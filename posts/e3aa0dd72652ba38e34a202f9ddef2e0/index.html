<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>主流大数据调度工具DolphinScheduler之数据ETL流程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e3aa0dd72652ba38e34a202f9ddef2e0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="主流大数据调度工具DolphinScheduler之数据ETL流程">
  <meta property="og:description" content="今天给大家分享主流大数据调度工具DolphinScheduler，以及数据的ETL流程。
一：调度工具DS 主流大数据调度工具DolphinScheduler，
其定位：解决数据处理流程中错综复杂的依赖关系
任务支持类型：支持传统的shell任务，同时支持大数据平台任务调度：MR、Spark、SQL(mysql、postgresql、hive/sparksql)、python、procedure、sub_process。
二，数据ETL流程(调度流程) 今天分享一个把数据从hive推送到人大金仓数据库的案例。
0，数据ETL的底层原理 ETL原理：本次分享的案例​​​​​​​ETL，采用的是DataX的数据传输方式。
1，源数据hive hive表数据如图所示，
在这里一共5条数据，展示的4个字段都是主键，dt为分区。
2，DS主界面 项目管理主界面，包含了很多的工作流，工作流需要自己配置。
3，创建工作流 在这里，我们写一个export的sheet页，主要实现数据从hive推送到数据库。
dept的内容是指的是前置依赖。
4，工作流内容配置 表名是 f_con_fund_deal_reminder
前缀 export 指的是数据推送，一般就是把数据从hive推送到其他数据库。
最重要的是脚本内容：
这里脚本内容是支持shell任务，所以大家一定要懂shell语法。
当然还要再设置参数，这里根据shell内容来，参数可以设置多个。
5，shell脚本开发 在这里底层逻辑采用datex的方式来进行数据的ETL。
5.1，日期配置
涉及时间或者其他参数的传参。
5.2，源表配置
这里的查询语句 query_sql，是可以将其查询出来的数据进行数据的传输（功能强大！！！）。
5.3，目标表配置
tgt_tab_pkey : 是数据库该表的主键。（下次ETL，如果数据发生变更，会把同主键的数据进行变更。）
tgt_tab_column : 是源表查询出来的字段映射到目标表的字段（映射灵活）。
tgt_pre_sql : 在数据ETL之前，可以先对数据库的表先进行操作（牛逼）。
5.4，其他配置
该调度是自然日跑批还是交易日跑批。
通用配置：这部分不需要大家更改。
底层逻辑采用datex的方式来进行数据的ETL，
写在了comment_data_sync.sh里面了。
6，参数的设置/调度运行 是否补数：就是可以跑批任意哪一天的调度。
调度日期：需要自己设置。然后点击运行。
7，在目标库看ETL结果 查询发现，只有4条数据。要的就是这个，因为我们设置主键了。
同主键数据，会随机插入一条数据。这个大家看步骤一。
8，工作流日志 看看工作日志长啥样，里面运行了什么。
发现有刚刚的shell脚本运行过程：
打印最终数据推送的结果：
好啦，今天这篇主流调度工具DS的简单介绍，以及工作流创建，脚本开发，调度流程，日志查看，一整个流程，就分享到这里。
下次再见！">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-19T19:08:52+08:00">
    <meta property="article:modified_time" content="2024-07-19T19:08:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">主流大数据调度工具DolphinScheduler之数据ETL流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> 今天给大家分享主流大数据调度工具DolphinScheduler，以及数据的ETL流程。</p> 
<h2>一：调度工具DS</h2> 
<p><strong>主流大数据调度工具DolphinScheduler，</strong></p> 
<p><strong>其定位：解决数据处理流程中错综复杂的依赖关系</strong></p> 
<p><strong>任务支持类型：支持传统的shell任务，同时支持大数据平台任务调度：MR、Spark、SQL(mysql、postgresql、hive/sparksql)、python、procedure、sub_process。</strong></p> 
<h2>二，数据ETL流程(调度流程)</h2> 
<p><strong>今天分享一个把数据从hive推送到人大金仓数据库的案例。</strong></p> 
<h3>0，数据ETL的底层原理</h3> 
<p><strong>ETL原理：</strong>本次分享的案例​​​​​​​ETL，<strong>采用的是DataX的数据传输方式。</strong></p> 
<h3>1，源数据hive</h3> 
<p>hive表数据如图所示，</p> 
<p>在这里一共5条数据，展示的4个字段都是主键，dt为分区。</p> 
<p><img alt="" height="461" src="https://images2.imgbox.com/6b/e3/aTfRMEwl_o.png" width="1131"></p> 
<h3>2，DS主界面</h3> 
<p>项目管理主界面，包含了很多的工作流，工作流需要自己配置。</p> 
<p><img alt="" height="589" src="https://images2.imgbox.com/99/30/CSCRTqfZ_o.png" width="1200"></p> 
<h3>3，创建工作流</h3> 
<p>在这里，我们写一个export的sheet页，主要实现数据从hive推送到数据库。</p> 
<p>dept的内容是指的是前置依赖。</p> 
<p><img alt="" height="782" src="https://images2.imgbox.com/bb/61/azV4Vbbu_o.png" width="1200"></p> 
<h3>4，工作流内容配置</h3> 
<p><strong>表名是  f_con_fund_deal_reminder</strong></p> 
<p><strong>前缀 export 指的是数据推送，一般就是把数据从hive推送到其他数据库。</strong></p> 
<p><strong>最重要的是脚本内容：</strong></p> 
<p><img alt="" height="757" src="https://images2.imgbox.com/cd/eb/FbERRmyL_o.png" width="783"></p> 
<p><strong>这里脚本内容是支持shell任务，所以大家一定要懂shell语法。</strong></p> 
<p><strong>当然还要再设置参数，这里根据shell内容来，参数可以设置多个。</strong></p> 
<p></p> 
<p><img alt="" height="532" src="https://images2.imgbox.com/dc/ca/eQmPlcvj_o.png" width="701"></p> 
<h3>5，shell脚本开发</h3> 
<p><strong>在这里底层逻辑采用datex的方式来进行数据的ETL。</strong></p> 
<p><strong>5.1，日期配置</strong></p> 
<p>涉及时间或者其他参数的传参。</p> 
<p><strong>5.2，源表配置</strong></p> 
<p>这里的查询语句  query_sql，是可以将其查询出来的数据进行数据的传输（功能强大！！！）。</p> 
<p><strong>5.3，目标表配置</strong></p> 
<p>tgt_tab_pkey : 是数据库该表的主键。（下次ETL，如果数据发生变更，会把同主键的数据进行变更。）</p> 
<p>tgt_tab_column : 是源表查询出来的字段映射到目标表的字段（映射灵活）。</p> 
<p>tgt_pre_sql : 在数据ETL之前，可以先对数据库的表先进行操作（牛逼）。</p> 
<p><strong>5.4，其他配置</strong></p> 
<p>该调度是自然日跑批还是交易日跑批。</p> 
<p><img alt="" height="651" src="https://images2.imgbox.com/92/fe/VhN8JEIu_o.png" width="1200"></p> 
<p><strong>通用配置：这部分不需要大家更改。</strong></p> 
<p><em>底层逻辑采用datex的方式来进行数据的ETL，</em></p> 
<p><em>写在了comment_data_sync.sh里面了。</em></p> 
<p><img alt="" height="530" src="https://images2.imgbox.com/42/36/kqBit7Pk_o.png" width="937"></p> 
<h3>6，参数的设置/调度运行</h3> 
<p>是否补数：就是可以跑批任意哪一天的调度。</p> 
<p>调度日期：需要自己设置。然后点击运行。</p> 
<p><img alt="" height="696" src="https://images2.imgbox.com/ac/1f/KOVyf7vr_o.png" width="860"></p> 
<h3>7，在目标库看ETL结果</h3> 
<p><strong>查询发现，只有4条数据。要的就是这个，因为我们设置主键了。</strong></p> 
<p><strong>同主键数据，会随机插入一条数据。这个大家看步骤一。</strong></p> 
<p><img alt="" height="290" src="https://images2.imgbox.com/ec/16/oAV9pEYF_o.png" width="919"></p> 
<h3>8，工作流日志</h3> 
<p>看看工作日志长啥样，里面运行了什么。</p> 
<p><img alt="" height="620" src="https://images2.imgbox.com/a9/ac/nvD5rA6F_o.png" width="1200"></p> 
<p>发现有刚刚的shell脚本运行过程：</p> 
<p><img alt="" height="694" src="https://images2.imgbox.com/94/7e/2AcctC2L_o.png" width="1200"></p> 
<p>打印最终数据推送的结果：</p> 
<p><img alt="" height="557" src="https://images2.imgbox.com/1b/60/eQUyaEYJ_o.png" width="1200"></p> 
<hr> 
<p>好啦，今天这篇主流调度工具DS的简单介绍，以及工作流创建，脚本开发，调度流程，日志查看，一整个流程，就分享到这里。</p> 
<p>下次再见！</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0a9a0f4207f7d57b1471b998481c364c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LLaMA-Factory在华为显卡上的实验记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4063815704cb5f5d1b74608c00ca717b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】优先级队列（堆）从实现到应用详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>