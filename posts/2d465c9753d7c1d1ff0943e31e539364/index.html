<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€AIGCã€‘Diffusers:åŠ è½½ç®¡é“ã€æ¨¡å‹å’Œè°ƒåº¦ç¨‹åº - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2d465c9753d7c1d1ff0943e31e539364/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€AIGCã€‘Diffusers:åŠ è½½ç®¡é“ã€æ¨¡å‹å’Œè°ƒåº¦ç¨‹åº">
  <meta property="og:description" content="å‰è¨€ æ‹¥æœ‰ä¸€ç§ä½¿ç”¨æ‰©æ•£ç³»ç»Ÿè¿›è¡Œæ¨ç†çš„ç®€å•æ–¹æ³•å¯¹äºğŸ§¨æ‰©æ•£å™¨è‡³å…³é‡è¦ã€‚æ‰©æ•£ç³»ç»Ÿé€šå¸¸ç”±å¤šä¸ªç»„ä»¶ç»„æˆï¼Œä¾‹å¦‚å‚æ•°åŒ–æ¨¡å‹ã€åˆ†è¯å™¨å’Œè°ƒåº¦å™¨ï¼Œå®ƒä»¬ä»¥å¤æ‚çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è®¾è®¡äº† DiffusionPipelineï¼Œå°†æ•´ä¸ªæ‰©æ•£ç³»ç»Ÿçš„å¤æ‚æ€§åŒ…è£…æˆä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ APIï¼ŒåŒæ—¶ä¿æŒè¶³å¤Ÿçš„çµæ´»æ€§ä»¥é€‚åº”å…¶ä»–ç”¨ä¾‹ï¼Œä¾‹å¦‚å°†æ¯ä¸ªç»„ä»¶å•ç‹¬åŠ è½½ä¸ºæ„å»ºå—ä»¥ç»„è£…æ‚¨è‡ªå·±çš„æ‰©æ•£ç³»ç»Ÿã€‚
æ¨ç†æˆ–è®­ç»ƒæ‰€éœ€çš„ä¸€åˆ‡éƒ½å¯ä»¥é€šè¿‡è¯¥Â from_pretrained()Â æ–¹æ³•è®¿é—®ã€‚
æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åŠ è½½ï¼š
æ¥è‡ªä¸­å¿ƒå’Œæœ¬åœ°çš„ç®¡é“å°†ä¸åŒçš„ç»„ä»¶æ”¾å…¥ç®¡é“ä¸­æ¨¡å‹å˜ä½“ï¼Œä¾‹å¦‚ä¸åŒçš„æµ®ç‚¹ç±»å‹æˆ–éæŒ‡æ•°å¹³å‡å¹³å‡ ï¼ˆEMAï¼‰ æƒé‡æ¨¡å‹å’Œè°ƒåº¦ç¨‹åº æ‰©æ•£ç®¡çº¿Â ğŸ’¡ å¦‚æœæ‚¨æœ‰å…´è¶£æ›´è¯¦ç»†åœ°äº†è§£ DiffusionPipeline ç±»çš„å·¥ä½œåŸç†ï¼Œè¯·è·³åˆ°DiffusionPipeline è¯´æ˜éƒ¨åˆ†ã€‚
DiffusionPipeline ç±»æ˜¯ä» Hub åŠ è½½æœ€æ–°è¶‹åŠ¿æ‰©æ•£æ¨¡å‹çš„æœ€ç®€å•ã€æœ€é€šç”¨çš„æ–¹æ³•ã€‚DiffusionPipeline.from_pretrainedï¼ˆï¼‰ æ–¹æ³•è‡ªåŠ¨ä»æ£€æŸ¥ç‚¹æ£€æµ‹æ­£ç¡®çš„ç®¡é“ç±»ï¼Œä¸‹è½½å¹¶ç¼“å­˜æ‰€æœ‰å¿…éœ€çš„é…ç½®å’Œæƒé‡æ–‡ä»¶ï¼Œå¹¶è¿”å›å‡†å¤‡è¿›è¡Œæ¨ç†çš„ç®¡é“å®ä¾‹ã€‚
from diffusers import DiffusionPipeline repo_id = &#34;runwayml/stable-diffusion-v1-5&#34; pipe = DiffusionPipeline.from_pretrained(repo_id, use_safetensors=True) è¿˜å¯ä»¥åŠ è½½å…·æœ‰ç‰¹å®šç®¡é“ç±»çš„æ£€æŸ¥ç‚¹ã€‚ä¸Šé¢çš„ç¤ºä¾‹åŠ è½½äº†ä¸€ä¸ªç¨³å®šæ‰©æ•£æ¨¡å‹;è‹¥è¦è·å¾—ç›¸åŒçš„ç»“æœï¼Œè¯·ä½¿ç”¨ StableDiffusionPipeline ç±»ï¼š
from diffusers import StableDiffusionPipeline repo_id = &#34;runwayml/stable-diffusion-v1-5&#34; pipe = StableDiffusionPipeline.from_pretrained(repo_id, use_safetensors=True) æ¨¡å‹ï¼ˆå¦‚Â CompVis/stable-diffusion-v1-4Â æˆ–runwayml/stable-diffusion-v1-5Â ï¼‰ä¹Ÿå¯ä»¥ç”¨äºå¤šä¸ªä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡æœ¬åˆ°å›¾åƒæˆ–å›¾åƒåˆ°å›¾åƒã€‚è‹¥è¦åŒºåˆ†è¦å°†æ¨¡å‹ç”¨äºçš„ä»»åŠ¡ï¼Œå¿…é¡»ç›´æ¥ä½¿ç”¨å…¶ç›¸åº”çš„ç‰¹å®šäºä»»åŠ¡çš„ç®¡é“ç±»åŠ è½½å®ƒï¼š
from diffusers import StableDiffusionImg2ImgPipeline repo_id = &#34;runwayml/stable-diffusion-v1-5&#34; pipe = StableDiffusionImg2ImgPipeline.from_pretrained(repo_id) æœ¬åœ°ç®¡é“ è‹¥è¦åœ¨æœ¬åœ°åŠ è½½æ‰©æ•£ç®¡é“ï¼Œè¯·ä½¿ç”¨Â git-lfsÂ æ‰‹åŠ¨å°†æ¨¡å‹ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºÂ runwayml/stable-diffusion-v1-5Â ï¼‰ä¸‹è½½åˆ°æœ¬åœ°ç£ç›˜ã€‚è¿™ä¼šåœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹Â ./stable-diffusion-v1-5Â ï¼Œ ï¼š">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-01T13:23:55+08:00">
    <meta property="article:modified_time" content="2024-06-01T13:23:55+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€AIGCã€‘Diffusers:åŠ è½½ç®¡é“ã€æ¨¡å‹å’Œè°ƒåº¦ç¨‹åº</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>å‰è¨€</h3> 
<p>æ‹¥æœ‰ä¸€ç§ä½¿ç”¨æ‰©æ•£ç³»ç»Ÿè¿›è¡Œæ¨ç†çš„ç®€å•æ–¹æ³•å¯¹äºğŸ§¨æ‰©æ•£å™¨è‡³å…³é‡è¦ã€‚æ‰©æ•£ç³»ç»Ÿé€šå¸¸ç”±å¤šä¸ªç»„ä»¶ç»„æˆï¼Œä¾‹å¦‚å‚æ•°åŒ–æ¨¡å‹ã€åˆ†è¯å™¨å’Œè°ƒåº¦å™¨ï¼Œå®ƒä»¬ä»¥å¤æ‚çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è®¾è®¡äº† DiffusionPipelineï¼Œå°†æ•´ä¸ªæ‰©æ•£ç³»ç»Ÿçš„å¤æ‚æ€§åŒ…è£…æˆä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ APIï¼ŒåŒæ—¶ä¿æŒè¶³å¤Ÿçš„çµæ´»æ€§ä»¥é€‚åº”å…¶ä»–ç”¨ä¾‹ï¼Œä¾‹å¦‚å°†æ¯ä¸ªç»„ä»¶å•ç‹¬åŠ è½½ä¸ºæ„å»ºå—ä»¥ç»„è£…æ‚¨è‡ªå·±çš„æ‰©æ•£ç³»ç»Ÿã€‚</p> 
<p>æ¨ç†æˆ–è®­ç»ƒæ‰€éœ€çš„ä¸€åˆ‡éƒ½å¯ä»¥é€šè¿‡è¯¥Â <code>from_pretrained()</code>Â æ–¹æ³•è®¿é—®ã€‚</p> 
<p>Â æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åŠ è½½ï¼š</p> 
<ul style="margin-left:0;"><li>æ¥è‡ªä¸­å¿ƒå’Œæœ¬åœ°çš„ç®¡é“</li><li>å°†ä¸åŒçš„ç»„ä»¶æ”¾å…¥ç®¡é“ä¸­</li><li>æ¨¡å‹å˜ä½“ï¼Œä¾‹å¦‚ä¸åŒçš„æµ®ç‚¹ç±»å‹æˆ–éæŒ‡æ•°å¹³å‡å¹³å‡ ï¼ˆEMAï¼‰ æƒé‡</li><li>æ¨¡å‹å’Œè°ƒåº¦ç¨‹åº</li></ul> 
<h3><span style="background-color:#ffffff;">æ‰©æ•£ç®¡çº¿</span>Â </h3> 
<p>Â ğŸ’¡ å¦‚æœæ‚¨æœ‰å…´è¶£æ›´è¯¦ç»†åœ°äº†è§£ <a class="link-info" href="https://huggingface.co/docs/diffusers/using-diffusers/loading#diffusionpipeline-explained" rel="nofollow" title="DiffusionPipeline">DiffusionPipeline</a> ç±»çš„å·¥ä½œåŸç†ï¼Œè¯·è·³åˆ°<a class="link-info" href="https://huggingface.co/docs/diffusers/v0.25.1/en/api/pipelines/overview#diffusers.DiffusionPipeline" rel="nofollow" title="DiffusionPipeline">DiffusionPipeline</a> è¯´æ˜éƒ¨åˆ†ã€‚</p> 
<p>DiffusionPipeline ç±»æ˜¯ä» Hub åŠ è½½æœ€æ–°è¶‹åŠ¿æ‰©æ•£æ¨¡å‹çš„æœ€ç®€å•ã€æœ€é€šç”¨çš„æ–¹æ³•ã€‚DiffusionPipeline.from_pretrainedï¼ˆï¼‰ æ–¹æ³•è‡ªåŠ¨ä»æ£€æŸ¥ç‚¹æ£€æµ‹æ­£ç¡®çš„ç®¡é“ç±»ï¼Œä¸‹è½½å¹¶ç¼“å­˜æ‰€æœ‰å¿…éœ€çš„é…ç½®å’Œæƒé‡æ–‡ä»¶ï¼Œå¹¶è¿”å›å‡†å¤‡è¿›è¡Œæ¨ç†çš„ç®¡é“å®ä¾‹ã€‚</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline

repo_id = "runwayml/stable-diffusion-v1-5"
pipe = DiffusionPipeline.from_pretrained(repo_id, use_safetensors=True)</code></pre> 
<p>Â è¿˜å¯ä»¥åŠ è½½å…·æœ‰ç‰¹å®šç®¡é“ç±»çš„æ£€æŸ¥ç‚¹ã€‚ä¸Šé¢çš„ç¤ºä¾‹åŠ è½½äº†ä¸€ä¸ªç¨³å®šæ‰©æ•£æ¨¡å‹;è‹¥è¦è·å¾—ç›¸åŒçš„ç»“æœï¼Œè¯·ä½¿ç”¨ StableDiffusionPipeline ç±»ï¼š</p> 
<pre><code class="language-python">from diffusers import StableDiffusionPipeline

repo_id = "runwayml/stable-diffusion-v1-5"
pipe = StableDiffusionPipeline.from_pretrained(repo_id, use_safetensors=True)</code></pre> 
<p>Â æ¨¡å‹ï¼ˆå¦‚Â <code>CompVis/stable-diffusion-v1-4</code>Â æˆ–<code>runwayml/stable-diffusion-v1-5</code>Â ï¼‰ä¹Ÿå¯ä»¥ç”¨äºå¤šä¸ªä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡æœ¬åˆ°å›¾åƒæˆ–å›¾åƒåˆ°å›¾åƒã€‚è‹¥è¦åŒºåˆ†è¦å°†æ¨¡å‹ç”¨äºçš„ä»»åŠ¡ï¼Œå¿…é¡»ç›´æ¥ä½¿ç”¨å…¶ç›¸åº”çš„ç‰¹å®šäºä»»åŠ¡çš„ç®¡é“ç±»åŠ è½½å®ƒï¼š</p> 
<pre><code class="language-python">from diffusers import StableDiffusionImg2ImgPipeline

repo_id = "runwayml/stable-diffusion-v1-5"
pipe = StableDiffusionImg2ImgPipeline.from_pretrained(repo_id)</code></pre> 
<h3>Â <span style="background-color:#ffffff;">æœ¬åœ°ç®¡é“</span></h3> 
<p>Â è‹¥è¦åœ¨æœ¬åœ°åŠ è½½æ‰©æ•£ç®¡é“ï¼Œè¯·ä½¿ç”¨Â <code>git-lfs</code>Â æ‰‹åŠ¨å°†æ¨¡å‹ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºÂ <code>runwayml/stable-diffusion-v1-5</code>Â ï¼‰ä¸‹è½½åˆ°æœ¬åœ°ç£ç›˜ã€‚è¿™ä¼šåœ¨ç£ç›˜ä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹Â <code>./stable-diffusion-v1-5</code>Â ï¼Œ ï¼š</p> 
<pre><code class="language-python">git-lfs install
git clone https://huggingface.co/runwayml/stable-diffusion-v1-5</code></pre> 
<p>Â ç„¶åå°†æœ¬åœ°è·¯å¾„ä¼ é€’ç»™ from_pretrainedï¼ˆï¼‰ï¼š</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline

repo_id = "./stable-diffusion-v1-5"
stable_diffusion = DiffusionPipeline.from_pretrained(repo_id, use_safetensors=True)</code></pre> 
<p>Â å½“ from_pretrainedï¼ˆï¼‰ æ–¹æ³•æ£€æµ‹åˆ°æœ¬åœ°è·¯å¾„æ—¶ï¼Œå®ƒä¸ä¼šä» Hub ä¸‹è½½ä»»ä½•æ–‡ä»¶ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€å®ƒä¸ä¼šä¸‹è½½å’Œç¼“å­˜æ£€æŸ¥ç‚¹çš„æœ€æ–°æ›´æ”¹ã€‚</p> 
<h3>Â <span style="background-color:#ffffff;">åœ¨ç®¡é“ä¸­äº¤æ¢ç»„ä»¶</span></h3> 
<p>Â æ‚¨å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªå…¼å®¹ç»„ä»¶è‡ªå®šä¹‰ä»»ä½•ç®¡é“çš„é»˜è®¤ç»„ä»¶ã€‚å®šåˆ¶å¾ˆé‡è¦ï¼Œå› ä¸ºï¼š</p> 
<ul style="margin-left:0;"><li>æ›´æ”¹è°ƒåº¦ç¨‹åºå¯¹äºæ¢ç´¢ç”Ÿæˆé€Ÿåº¦å’Œè´¨é‡ä¹‹é—´çš„æƒè¡¡éå¸¸é‡è¦ã€‚</li><li>æ¨¡å‹çš„ä¸åŒç»„ä»¶é€šå¸¸æ˜¯ç‹¬ç«‹è®­ç»ƒçš„ï¼Œæ‚¨å¯ä»¥å°†ç»„ä»¶æ¢æˆæ€§èƒ½æ›´å¥½çš„ç»„ä»¶ã€‚</li><li>åœ¨å¾®è°ƒè¿‡ç¨‹ä¸­ï¼Œé€šå¸¸åªè®­ç»ƒæŸäº›ç»„ä»¶ï¼ˆå¦‚ UNet æˆ–æ–‡æœ¬ç¼–ç å™¨ï¼‰ã€‚</li></ul> 
<p>Â è‹¥è¦æ‰¾å‡ºå“ªäº›è®¡åˆ’ç¨‹åºä¸è‡ªå®šä¹‰å…¼å®¹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹Â <code>compatibles</code>Â æ–¹æ³•ï¼š</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline

repo_id = "runwayml/stable-diffusion-v1-5"
stable_diffusion = DiffusionPipeline.from_pretrained(repo_id, use_safetensors=True)
stable_diffusion.scheduler.compatibles</code></pre> 
<p>è®©æˆ‘ä»¬ä½¿ç”¨ SchedulerMixin.from_pretrainedï¼ˆï¼‰ æ–¹æ³•å°†é»˜è®¤çš„ PNDMScheduler æ›¿æ¢ä¸ºæ€§èƒ½æ›´é«˜çš„è°ƒåº¦å™¨ EulerDiscreteSchedulerã€‚ä»ç®¡é“å­˜å‚¨åº“çš„æ­£ç¡®å­æ–‡ä»¶å¤¹åŠ è½½è°ƒåº¦ç¨‹åºé…ç½®éœ€è¦è¯¥Â <code>subfolder="scheduler"</code>Â å‚æ•°ã€‚</p> 
<p>ç„¶åï¼Œæ‚¨å¯ä»¥å°†æ–°çš„ EulerDiscreteScheduler å®ä¾‹ä¼ é€’ç»™ DiffusionPipeline ä¸­çš„Â <code>scheduler</code>Â å‚æ•°ï¼š</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline, EulerDiscreteScheduler

repo_id = "runwayml/stable-diffusion-v1-5"
scheduler = EulerDiscreteScheduler.from_pretrained(repo_id, subfolder="scheduler")
stable_diffusion = DiffusionPipeline.from_pretrained(repo_id, scheduler=scheduler, use_safetensors=True)</code></pre> 
<h3 style="margin-left:0px;"><span style="background-color:#ffffff;">å®‰å…¨æ£€æŸ¥å™¨</span></h3> 
<p>Â åƒ Stable Diffusion è¿™æ ·çš„æ‰©æ•£æ¨¡å‹å¯èƒ½ä¼šäº§ç”Ÿæœ‰å®³å†…å®¹ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ ğŸ§¨ Diffusers æœ‰ä¸€ä¸ªå®‰å…¨æ£€æŸ¥å™¨æ¥æ£€æŸ¥ç”Ÿæˆçš„è¾“å‡ºæ˜¯å¦ç¬¦åˆå·²çŸ¥çš„ç¡¬ç¼–ç  NSFW å†…å®¹ã€‚å¦‚æœæ‚¨å‡ºäºä»»ä½•åŸå› æƒ³è¦ç¦ç”¨å®‰å…¨æ£€æŸ¥å™¨ï¼Œè¯·ä¼ é€’Â <code>None</code>Â <code>safety_checker</code>Â å‚æ•°ï¼š</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline

repo_id = "runwayml/stable-diffusion-v1-5"
stable_diffusion = DiffusionPipeline.from_pretrained(repo_id, safety_checker=None, use_safetensors=True)
"""
You have disabled the safety checker for &lt;class 'diffusers.pipelines.stable_diffusion.pipeline_stable_diffusion.StableDiffusionPipeline'&gt; by passing `safety_checker=None`. Ensure that you abide by the conditions of the Stable Diffusion license and do not expose unfiltered results in services or applications open to the public. Both the diffusers team and Hugging Face strongly recommend keeping the safety filter enabled in all public-facing circumstances, disabling it only for use cases that involve analyzing network behavior or auditing its results. For more information, please have a look at https://github.com/huggingface/diffusers/pull/254 .
"""</code></pre> 
<h3>Â <span style="background-color:#ffffff;">è·¨ç®¡é“é‡ç”¨ç»„ä»¶</span></h3> 
<p>æ‚¨è¿˜å¯ä»¥åœ¨å¤šä¸ªç®¡é“ä¸­é‡å¤ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶ï¼Œä»¥é¿å…ä¸¤æ¬¡å°†æƒé‡åŠ è½½åˆ° RAM ä¸­ã€‚ä½¿ç”¨ components æ–¹æ³•ä¿å­˜ç»„ä»¶ï¼šÂ </p> 
<pre><code class="language-python">from diffusers import StableDiffusionPipeline, StableDiffusionImg2ImgPipeline

model_id = "runwayml/stable-diffusion-v1-5"
stable_diffusion_txt2img = StableDiffusionPipeline.from_pretrained(model_id, use_safetensors=True)

components = stable_diffusion_txt2img.components</code></pre> 
<p>Â ç„¶åï¼Œæ‚¨å¯ä»¥å°†å…¶Â <code>components</code>Â ä¼ é€’åˆ°å¦ä¸€ä¸ªç®¡é“ï¼Œè€Œæ— éœ€å°†æƒé‡é‡æ–°åŠ è½½åˆ° RAM ä¸­ï¼š</p> 
<pre><code class="language-python">stable_diffusion_img2img = StableDiffusionImg2ImgPipeline(**components)</code></pre> 
<p>å¦‚æœå¸Œæœ›æ›´çµæ´»åœ°é‡ç”¨æˆ–ç¦ç”¨å“ªäº›ç»„ä»¶ï¼Œè¿˜å¯ä»¥å°†ç»„ä»¶å•ç‹¬ä¼ é€’åˆ°ç®¡é“ã€‚ä¾‹å¦‚ï¼Œè‹¥è¦åœ¨å›¾åƒåˆ°å›¾åƒç®¡é“ä¸­é‡ç”¨æ–‡æœ¬åˆ°å›¾åƒç®¡é“ä¸­çš„ç›¸åŒç»„ä»¶ï¼Œä½†å®‰å…¨æ£€æŸ¥å™¨å’Œç‰¹å¾æå–å™¨é™¤å¤–ï¼š</p> 
<pre><code class="language-python">from diffusers import StableDiffusionPipeline, StableDiffusionImg2ImgPipeline

model_id = "runwayml/stable-diffusion-v1-5"
stable_diffusion_txt2img = StableDiffusionPipeline.from_pretrained(model_id, use_safetensors=True)
stable_diffusion_img2img = StableDiffusionImg2ImgPipeline(
    vae=stable_diffusion_txt2img.vae,
    text_encoder=stable_diffusion_txt2img.text_encoder,
    tokenizer=stable_diffusion_txt2img.tokenizer,
    unet=stable_diffusion_txt2img.unet,
    scheduler=stable_diffusion_txt2img.scheduler,
    safety_checker=None,
    feature_extractor=None,
    requires_safety_checker=False,
)</code></pre> 
<h3 style="margin-left:0;"><span style="background-color:#ffffff;">æ¨¡å‹æƒé‡å˜ä½“</span></h3> 
<p>Â ä»¥ä¸åŒçš„æµ®ç‚¹ç±»å‹å­˜å‚¨ï¼Œä»¥å®ç°è¾ƒä½çš„ç²¾åº¦å’Œè¾ƒä½çš„å­˜å‚¨ï¼Œä¾‹å¦‚Â <code>torch.float16</code>Â ï¼Œå› ä¸ºå®ƒåªéœ€è¦ä¸€åŠçš„å¸¦å®½å’Œå­˜å‚¨å³å¯ä¸‹è½½ã€‚å¦‚æœæ‚¨æ­£åœ¨ç»§ç»­è®­ç»ƒæˆ–ä½¿ç”¨ CPUï¼Œåˆ™æ— æ³•ä½¿ç”¨æ­¤å˜ä½“ã€‚</p> 
<p><span style="color:#956fe7;"><strong>éæŒ‡æ•°å¹³å‡ ï¼ˆEMAï¼‰ æƒé‡ï¼Œä¸åº”ç”¨äºæ¨ç†</strong></span>ã€‚æ‚¨åº”è¯¥<span style="color:#fe2c24;"><strong>ä½¿ç”¨å®ƒä»¬æ¥ç»§ç»­å¾®è°ƒæ¨¡å‹</strong></span>ã€‚Â </p> 
<blockquote> 
 <p>Â ğŸ’¡ å½“æ£€æŸ¥ç‚¹å…·æœ‰ç›¸åŒçš„æ¨¡å‹ç»“æ„ï¼Œä½†å®ƒä»¬æ˜¯åœ¨ä¸åŒçš„æ•°æ®é›†ä¸Šè®­ç»ƒçš„ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸åŒçš„è®­ç»ƒè®¾ç½®æ—¶ï¼Œå®ƒä»¬åº”è¯¥å­˜å‚¨åœ¨å•ç‹¬çš„å­˜å‚¨åº“ä¸­ï¼Œè€Œä¸æ˜¯å˜ä½“ï¼ˆä¾‹å¦‚ï¼ŒÂ <code>stable-diffusion-v1-4</code>Â å’ŒÂ <code>stable-diffusion-v1-5</code>Â ï¼‰ã€‚</p> 
</blockquote> 
<p>Â å¦åˆ™ï¼Œå˜ä½“ä¸åŸæ¨¡å‹ç›¸åŒã€‚å®ƒä»¬å…·æœ‰å®Œå…¨ç›¸åŒçš„åºåˆ—åŒ–æ ¼å¼ï¼ˆå¦‚ Safetensorsï¼‰ã€æ¨¡å‹ç»“æ„å’Œå…·æœ‰ç›¸åŒå¼ é‡å½¢çŠ¶çš„æƒé‡ã€‚</p> 
<table cellspacing="0" style="width:627.333px;"><thead><tr><th style="border-color:#e5e7eb;vertical-align:bottom;"><strong>checkpoint typeÂ æ£€æŸ¥ç‚¹ç±»å‹</strong></th><th style="border-color:#e5e7eb;vertical-align:bottom;"><strong>weight nameÂ é‡é‡åç§°</strong></th><th style="border-color:#e5e7eb;vertical-align:bottom;"><strong>argument for loading weights<br> åŠ è½½ç ç çš„å‚æ•°</strong></th></tr></thead><tbody><tr><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;">originalÂ æºè¯­è¨€</td><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;">diffusion_pytorch_model.bin</td><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;"></td></tr><tr><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;">floating pointÂ æµ®ç‚¹</td><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;">diffusion_pytorch_model.fp16.bin</td><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;"><code>variant</code>,Â <code>torch_dtype</code></td></tr><tr><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;">non-EMAÂ é EMA</td><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;">diffusion_pytorch_model.non_ema.bin</td><td style="background-color:#ffffff;border-color:#e5e7eb;vertical-align:baseline;"><code>variant</code></td></tr></tbody></table> 
<p>Â å¯¹äºåŠ è½½å˜ä½“ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„å‚æ•°éœ€è¦äº†è§£ï¼š</p> 
<p></p> 
<ul style="margin-left:0;"><li> <p style="margin-left:0;"><span style="color:#fe2c24;"><strong><code>torch_dtype</code></strong></span>Â å®šä¹‰åŠ è½½çš„æ£€æŸ¥ç‚¹çš„æµ®ç‚¹ç²¾åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦é€šè¿‡åŠ è½½Â <code>fp16</code>Â å˜ä½“æ¥èŠ‚çœå¸¦å®½ï¼Œåˆ™åº”æŒ‡å®šÂ <code>torch_dtype=torch.float16</code>Â å°†æƒé‡è½¬æ¢ä¸ºÂ <code>fp16</code>Â ã€‚å¦åˆ™ï¼ŒÂ <code>fp16</code>Â æƒé‡å°†è½¬æ¢ä¸ºé»˜è®¤Â <code>fp32</code>Â ç²¾åº¦ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ä¸å®šä¹‰Â <code>variant</code>Â å‚æ•°çš„æƒ…å†µä¸‹åŠ è½½åŸå§‹æ£€æŸ¥ç‚¹ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºÂ <code>fp16</code>Â withÂ <code>torch_dtype=torch.float16</code>Â .åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†é¦–å…ˆä¸‹è½½é»˜è®¤Â <code>fp32</code>Â æƒé‡ï¼Œç„¶ååœ¨åŠ è½½åå°†å…¶Â <code>fp16</code>Â è½¬æ¢ä¸ºé»˜è®¤æƒé‡ã€‚</p> </li><li> <p style="margin-left:0;"><span style="color:#fe2c24;"><strong><code>variant</code></strong></span>Â å®šä¹‰åº”ä»å­˜å‚¨åº“åŠ è½½å“ªäº›æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ä»å­˜å‚¨åº“åŠ è½½Â <code>non_ema</code>Â å˜ä½“ï¼Œåˆ™åº”æŒ‡å®šÂ <code>variant="non_ema"</code>Â ä¸‹è½½Â <code>non_ema</code>Â <code>diffusers/stable-diffusion-variants</code>Â æ–‡ä»¶ã€‚</p> </li></ul> 
<pre><code class="language-python">from diffusers import DiffusionPipeline
import torch

# load fp16 variant
stable_diffusion = DiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5", variant="fp16", torch_dtype=torch.float16, use_safetensors=True
)
# load non_ema variant
stable_diffusion = DiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5", variant="non_ema", use_safetensors=True
)</code></pre> 
<p>è‹¥è¦å°†å­˜å‚¨åœ¨ä¸åŒæµ®ç‚¹ç±»å‹ä¸­çš„æ£€æŸ¥ç‚¹ä¿å­˜ä¸ºé EMA å˜ä½“ï¼Œè¯·ä½¿ç”¨ DiffusionPipeline.save_pretrainedï¼ˆï¼‰ æ–¹æ³•å¹¶æŒ‡å®šÂ <code>variant</code>Â å‚æ•°ã€‚æ‚¨åº”è¯¥å°è¯•å°†å˜ä½“ä¿å­˜åˆ°ä¸åŸå§‹æ£€æŸ¥ç‚¹ç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä»åŒä¸€æ–‡ä»¶å¤¹åŠ è½½ä¸¤è€…ï¼š</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline

# save as fp16 variant
stable_diffusion.save_pretrained("runwayml/stable-diffusion-v1-5", variant="fp16")
# save as non-ema variant
stable_diffusion.save_pretrained("runwayml/stable-diffusion-v1-5", variant="non_ema")</code></pre> 
<p>å¦‚æœä¸å°†å˜ä½“ä¿å­˜åˆ°ç°æœ‰æ–‡ä»¶å¤¹ï¼Œåˆ™å¿…é¡»æŒ‡å®šå‚æ•°ï¼ŒÂ <code>variant</code>Â å¦åˆ™å®ƒå°†æŠ›å‡ºä¸€ä¸ªÂ <code>Exception</code>Â ï¼Œå› ä¸ºå®ƒæ‰¾ä¸åˆ°åŸå§‹æ£€æŸ¥ç‚¹ï¼š</p> 
<pre><code class="language-python"># ğŸ‘ this won't work
stable_diffusion = DiffusionPipeline.from_pretrained(
    "./stable-diffusion-v1-5", torch_dtype=torch.float16, use_safetensors=True
)
# ğŸ‘ this works
stable_diffusion = DiffusionPipeline.from_pretrained(
    "./stable-diffusion-v1-5", variant="fp16", torch_dtype=torch.float16, use_safetensors=True
)</code></pre> 
<h3 style="margin-left:0;"><span style="background-color:#ffffff;">æ¨¡å‹</span></h3> 
<p>Â æ¨¡å‹ä»<span style="color:#956fe7;"><strong> ModelMixin.from_pretrainedï¼ˆï¼‰ </strong></span>æ–¹æ³•åŠ è½½ï¼Œè¯¥æ–¹æ³•ä¸‹è½½å¹¶ç¼“å­˜æœ€æ–°ç‰ˆæœ¬çš„æ¨¡å‹æƒé‡å’Œé…ç½®ã€‚å¦‚æœæœ¬åœ°ç¼“å­˜ä¸­æœ‰æœ€æ–°çš„æ–‡ä»¶ï¼Œ<span style="color:#fe2c24;"><strong>åˆ™ from_pretrainedï¼ˆï¼‰ ä¼šé‡ç”¨ç¼“å­˜ä¸­çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é‡æ–°ä¸‹è½½å®ƒä»¬ã€‚</strong></span></p> 
<p>Â å¯ä»¥ä»å¸¦æœ‰å‚æ•°çš„Â <code>subfolder</code>Â å­æ–‡ä»¶å¤¹åŠ è½½æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œæ¨¡å‹æƒé‡Â <code>runwayml/stable-diffusion-v1-5</code>Â å­˜å‚¨åœ¨Â <code>unet</code>Â å­æ–‡ä»¶å¤¹ä¸­ï¼š</p> 
<pre><code class="language-python">from diffusers import UNet2DConditionModel

repo_id = "runwayml/stable-diffusion-v1-5"
model = UNet2DConditionModel.from_pretrained(repo_id, subfolder="unet", use_safetensors=True)</code></pre> 
<p>æˆ–è€…<span style="color:#fe2c24;"><strong>ç›´æ¥ä»å­˜å‚¨åº“çš„ç›®å½•</strong></span>ï¼š</p> 
<pre><code class="language-python">from diffusers import UNet2DModel

repo_id = "google/ddpm-cifar10-32"
model = UNet2DModel.from_pretrained(repo_id, use_safetensors=True)</code></pre> 
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨ ModelMixin.from_pretrainedï¼ˆï¼‰ å’Œ ModelMixin.save_pretrainedï¼ˆï¼‰ ä¸­æŒ‡å®šÂ <code>variant</code>Â å‚æ•°æ¥åŠ è½½å’Œä¿å­˜æ¨¡å‹å˜ä½“ï¼š</p> 
<pre><code class="language-python">from diffusers import UNet2DConditionModel

model = UNet2DConditionModel.from_pretrained(
    "runwayml/stable-diffusion-v1-5", subfolder="unet", variant="non_ema", use_safetensors=True
)
model.save_pretrained("./local-unet", variant="non_ema")</code></pre> 
<h3 style="margin-left:0;"><span style="background-color:#ffffff;">Â è°ƒåº¦ç¨‹åº</span></h3> 
<p>è°ƒåº¦å™¨æ˜¯ä» <span style="color:#fe2c24;"><strong>SchedulerMixin.from_pretrainedï¼ˆï¼‰</strong></span> æ–¹æ³•åŠ è½½çš„ï¼Œä¸æ¨¡å‹ä¸åŒï¼Œè°ƒåº¦å™¨æ²¡æœ‰å‚æ•°åŒ–æˆ–è®­ç»ƒ;å®ƒä»¬ç”±é…ç½®æ–‡ä»¶å®šä¹‰ã€‚Â </p> 
<p>åŠ è½½è°ƒåº¦ç¨‹åºä¸ä¼šæ¶ˆè€—ä»»ä½•å¤§é‡å†…å­˜ï¼Œå¹¶ä¸”ç›¸åŒçš„é…ç½®æ–‡ä»¶å¯ç”¨äºå„ç§ä¸åŒçš„è°ƒåº¦ç¨‹åºã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è°ƒåº¦ç¨‹åºä¸ StableDiffusionPipeline å…¼å®¹ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ä»»ä½•ç±»ä¸­åŠ è½½ç›¸åŒçš„è°ƒåº¦ç¨‹åºé…ç½®æ–‡ä»¶ï¼šÂ </p> 
<pre><code class="language-python">from diffusers import StableDiffusionPipeline
from diffusers import (
    DDPMScheduler,
    DDIMScheduler,
    PNDMScheduler,
    LMSDiscreteScheduler,
    EulerAncestralDiscreteScheduler,
    EulerDiscreteScheduler,
    DPMSolverMultistepScheduler,
)

repo_id = "runwayml/stable-diffusion-v1-5"

ddpm = DDPMScheduler.from_pretrained(repo_id, subfolder="scheduler")
ddim = DDIMScheduler.from_pretrained(repo_id, subfolder="scheduler")
pndm = PNDMScheduler.from_pretrained(repo_id, subfolder="scheduler")
lms = LMSDiscreteScheduler.from_pretrained(repo_id, subfolder="scheduler")
euler_anc = EulerAncestralDiscreteScheduler.from_pretrained(repo_id, subfolder="scheduler")
euler = EulerDiscreteScheduler.from_pretrained(repo_id, subfolder="scheduler")
dpm = DPMSolverMultistepScheduler.from_pretrained(repo_id, subfolder="scheduler")

# replace `dpm` with any of `ddpm`, `ddim`, `pndm`, `lms`, `euler_anc`, `euler`
pipeline = StableDiffusionPipeline.from_pretrained(repo_id, scheduler=dpm, use_safetensors=True)</code></pre> 
<h3 style="margin-left:0;"><span style="background-color:#ffffff;">DiffusionPipeline è§£é‡Š</span></h3> 
<p>Â ä½œä¸ºç±»æ–¹æ³•ï¼ŒDiffusionPipeline.from_pretrainedï¼ˆï¼‰ è´Ÿè´£ä¸¤ä»¶äº‹ï¼š</p> 
<ul style="margin-left:0;"><li>ä¸‹è½½æ¨ç†æ‰€éœ€çš„æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶å¤¹ç»“æ„å¹¶å¯¹å…¶è¿›è¡Œç¼“å­˜ã€‚å¦‚æœæœ¬åœ°ç¼“å­˜ä¸­æä¾›äº†æœ€æ–°çš„æ–‡ä»¶å¤¹ç»“æ„ï¼Œåˆ™ DiffusionPipeline.from_pretrainedï¼ˆï¼‰ ä¼šé‡ç”¨ç¼“å­˜ï¼Œå¹¶ä¸”ä¸ä¼šé‡æ–°ä¸‹è½½æ–‡ä»¶ã€‚</li><li>å°†ç¼“å­˜çš„æƒé‡åŠ è½½åˆ°æ­£ç¡®çš„ç®¡é“ç±»ï¼ˆä»æ–‡ä»¶ä¸­Â <code>model_index.json</code>Â æ£€ç´¢ï¼‰ï¼Œå¹¶è¿”å›è¯¥ç±»çš„å®ä¾‹ã€‚</li></ul> 
<p>Â ç®¡é“çš„åŸºç¡€æ–‡ä»¶å¤¹ç»“æ„ä¸å…¶ç±»å®ä¾‹ç›´æ¥å¯¹åº”ã€‚ä¾‹å¦‚ï¼ŒStableDiffusionPipeline å¯¹åº”äºÂ <code>runwayml/stable-diffusion-v1-5</code>Â ä¸­çš„æ–‡ä»¶å¤¹ç»“æ„ã€‚</p> 
<pre><code class="language-python">from diffusers import DiffusionPipeline

repo_id = "runwayml/stable-diffusion-v1-5"
pipeline = DiffusionPipeline.from_pretrained(repo_id, use_safetensors=True)
print(pipeline)</code></pre> 
<p>Â ä½ å°†çœ‹åˆ° pipeline æ˜¯ StableDiffusionPipeline çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒç”±ä¸ƒä¸ªç»„ä»¶ç»„æˆï¼š</p> 
<p></p> 
<ul style="margin-left:0;"><li><code>"feature_extractor"</code>Â ï¼šæ¥è‡ª Transformer çš„ ğŸ¤— CLIPImageProcessorã€‚</li><li><code>"safety_checker"</code>Â ï¼šç”¨äºç­›é€‰æœ‰å®³å†…å®¹çš„ç»„ä»¶ã€‚</li><li><code>"scheduler"</code>Â ï¼šPNDMScheduler çš„å®ä¾‹ã€‚</li><li><code>"text_encoder"</code>Â ï¼šæ¥è‡ª Transformer çš„ ğŸ¤— CLIPTextModelã€‚</li><li><code>"tokenizer"</code>Â ï¼šæ¥è‡ªTransformerçš„ ğŸ¤— CLIPTokenizerã€‚</li><li><code>"unet"</code>Â ï¼šUNet2DConditionModel çš„å®ä¾‹ã€‚</li><li><code>"vae"</code>Â ï¼šAutoencoderKL çš„å®ä¾‹ã€‚</li></ul> 
<pre><code class="language-python">StableDiffusionPipeline {
  "feature_extractor": [
    "transformers",
    "CLIPImageProcessor"
  ],
  "safety_checker": [
    "stable_diffusion",
    "StableDiffusionSafetyChecker"
  ],
  "scheduler": [
    "diffusers",
    "PNDMScheduler"
  ],
  "text_encoder": [
    "transformers",
    "CLIPTextModel"
  ],
  "tokenizer": [
    "transformers",
    "CLIPTokenizer"
  ],
  "unet": [
    "diffusers",
    "UNet2DConditionModel"
  ],
  "vae": [
    "diffusers",
    "AutoencoderKL"
  ]
}</code></pre> 
<p>å°†ç®¡é“å®ä¾‹çš„ç»„ä»¶ä¸æ–‡ä»¶å¤¹ç»“æ„è¿›è¡Œæ¯”è¾ƒï¼Œä½ å°†çœ‹åˆ°å­˜å‚¨åº“ä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„Â <code>runwayml/stable-diffusion-v1-5</code>Â æ–‡ä»¶å¤¹ï¼š</p> 
<pre><code class="language-python">.
â”œâ”€â”€ feature_extractor
â”‚Â Â  â””â”€â”€ preprocessor_config.json
â”œâ”€â”€ model_index.json
â”œâ”€â”€ safety_checker
â”‚Â Â  â”œâ”€â”€ config.json
|   â”œâ”€â”€ model.fp16.safetensors
â”‚   â”œâ”€â”€ model.safetensors
â”‚   â”œâ”€â”€ pytorch_model.bin
|   â””â”€â”€ pytorch_model.fp16.bin
â”œâ”€â”€ scheduler
â”‚Â Â  â””â”€â”€ scheduler_config.json
â”œâ”€â”€ text_encoder
â”‚Â Â  â”œâ”€â”€ config.json
|   â”œâ”€â”€ model.fp16.safetensors
â”‚   â”œâ”€â”€ model.safetensors
â”‚   |â”€â”€ pytorch_model.bin
|   â””â”€â”€ pytorch_model.fp16.bin
â”œâ”€â”€ tokenizer
â”‚Â Â  â”œâ”€â”€ merges.txt
â”‚Â Â  â”œâ”€â”€ special_tokens_map.json
â”‚Â Â  â”œâ”€â”€ tokenizer_config.json
â”‚Â Â  â””â”€â”€ vocab.json
â”œâ”€â”€ unet
â”‚Â Â  â”œâ”€â”€ config.json
â”‚Â Â  â”œâ”€â”€ diffusion_pytorch_model.bin
|   |â”€â”€ diffusion_pytorch_model.fp16.bin
â”‚   |â”€â”€ diffusion_pytorch_model.f16.safetensors
â”‚   |â”€â”€ diffusion_pytorch_model.non_ema.bin
â”‚   |â”€â”€ diffusion_pytorch_model.non_ema.safetensors
â”‚   â””â”€â”€ diffusion_pytorch_model.safetensors
|â”€â”€ vae
.   â”œâ”€â”€ config.json
.   â”œâ”€â”€ diffusion_pytorch_model.bin
    â”œâ”€â”€ diffusion_pytorch_model.fp16.bin
    â”œâ”€â”€ diffusion_pytorch_model.fp16.safetensors
    â””â”€â”€ diffusion_pytorch_model.safetensors</code></pre> 
<p>æ‚¨å¯ä»¥å°†ç®¡é“çš„æ¯ä¸ªç»„ä»¶ä½œä¸ºå±æ€§è¿›è¡Œè®¿é—®ï¼Œä»¥æŸ¥çœ‹å…¶é…ç½®ï¼š</p> 
<pre><code class="language-python">pipeline.tokenizer
CLIPTokenizer(
    name_or_path="/root/.cache/huggingface/hub/models--runwayml--stable-diffusion-v1-5/snapshots/39593d5650112b4cc580433f6b0435385882d819/tokenizer",
    vocab_size=49408,
    model_max_length=77,
    is_fast=False,
    padding_side="right",
    truncation_side="right",
    special_tokens={
        "bos_token": AddedToken("&lt;|startoftext|&gt;", rstrip=False, lstrip=False, single_word=False, normalized=True),
        "eos_token": AddedToken("&lt;|endoftext|&gt;", rstrip=False, lstrip=False, single_word=False, normalized=True),
        "unk_token": AddedToken("&lt;|endoftext|&gt;", rstrip=False, lstrip=False, single_word=False, normalized=True),
        "pad_token": "&lt;|endoftext|&gt;",
    },
    clean_up_tokenization_spaces=True
)</code></pre> 
<p>æ¯ä¸ªç®¡é“éƒ½éœ€è¦ä¸€ä¸ªÂ <code>model_index.json</code>Â æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å‘Šè¯‰ DiffusionPipelineï¼š</p> 
<ul style="margin-left:0;"><li>è¦ä»Â <code>_class_name</code>Â å“ªä¸ªç®¡é“ç±»åŠ è½½</li><li>å“ªä¸ªç‰ˆæœ¬çš„ğŸ§¨æ‰©æ•£å™¨ç”¨äºåˆ›å»ºæ¨¡å‹Â <code>_diffusers_version</code></li></ul> 
<pre><code class="language-python">{
  "_class_name": "StableDiffusionPipeline",
  "_diffusers_version": "0.6.0",
  "feature_extractor": [
    "transformers",
    "CLIPImageProcessor"
  ],
  "safety_checker": [
    "stable_diffusion",
    "StableDiffusionSafetyChecker"
  ],
  "scheduler": [
    "diffusers",
    "PNDMScheduler"
  ],
  "text_encoder": [
    "transformers",
    "CLIPTextModel"
  ],
  "tokenizer": [
    "transformers",
    "CLIPTokenizer"
  ],
  "unet": [
    "diffusers",
    "UNet2DConditionModel"
  ],
  "vae": [
    "diffusers",
    "AutoencoderKL"
  ]
}</code></pre> 
<p>å‚è€ƒé“¾æ¥ï¼š</p> 
<p>Â <a href="https://huggingface.co/docs/diffusers/using-diffusers/loading" rel="nofollow" title="https://huggingface.co/docs/diffusers/using-diffusers/loading">https://huggingface.co/docs/diffusers/using-diffusers/loading</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0cdae027aa1dae7d5fffb4faf40c5839/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">é€šä¿—æ˜“æ‡‚-ï¼å“ˆå¸Œè¡¨è¯¦è§£</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5895c58f1633e40793ede394c3811367/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">LeetCode/NowCoder-æ ˆå’Œé˜Ÿåˆ—OJç»ƒä¹ </p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>