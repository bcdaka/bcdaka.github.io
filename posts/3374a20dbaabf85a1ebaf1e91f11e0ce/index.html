<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前端怎么预览pdf - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/3374a20dbaabf85a1ebaf1e91f11e0ce/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="前端怎么预览pdf">
  <meta property="og:description" content="1.背景 后台返回了一个在线的pdf地址，需要我这边去做一个pdf的预览（需求1），并且支持配置是否可以下载（需求2），需要在当前页就能预览（需求3）。之前我写过一篇预览pdf的文章，但是当时后台返回的是blob流文件，如果你们的pdf也是以流文件的形式返回的，可以看这篇文章（超链接点进去就行）。
2.简单说下pdf预览的实现方式 a.借助 &lt;embed&gt; / &lt;iframe&gt;标签 这个是真的很简单，我直接贴在下面了，缺点是： 没办法阻止用户打印和下载pdf，所以我pass了这个方案
&lt;embed type=&#34;application/pdf&#34; :src=&#34;pdfUrl&#34; width=&#34;800&#34; height=&#34;600&#34; /&gt; &lt;iframe :src=&#34;pdfUrl&#34; width=&#34;800&#34; height=&#34;600&#34; /&gt; 实现效果：
b.使用vue插件vue-pdf来渲染(应该还有一些其他的插件也可以使用，大家自己研究下实现的效果把)
这个方案我已经试了且用到项目上了，但是感觉很丑，跟浏览器打开pdf的效果差别很大，原因是这个插件大概得原理是把pdf转成了图片然后使用canvas来渲染的，然后很多东西都没有，就被我pass了。你可以想象一下你的pdf，然后你截图放进你网页上的感觉，就差不多是这个效果了，图片我忘记保存了，大家脑补一下
我找了个图，这个其实别人还做了一些其他的渲染，比如下面的也是他自己写的。我感觉是没这么好看的，所以就抛弃了这个
c.使用pdf.js预览
我觉得预览pdf这一块还是得用pdf.js，真的很成熟，样式也还是很给力的，然后想要改成什么样就可以改成什么样，因为源码在你手上。
缺点：稍微麻烦点，需要处理跨域的问题（但是如果你的网站、pdf文件所在位置，后台返回的pdf位置都在同一个域名下的话，就不需要处理）。且可能需要知道一点运维的知识，不然很可能你在本地能运行成功，但是到线上可能访问不到
3.使用pdf.js预览pdf a.到官网去下载pdf.js 建议下第二个！！！（别问我为啥，因为我下了第一个来写demo发现有报错，又踩坑了）
b.解压之后直接丢到项目中的public文件夹下面去 c.写一个pdf.vue文件，内容如下（注意我的路径，这个路径跟public的路径是一样的，前面加了一个/，原因如下：当我们使用npm run serve时，我们的本地电脑也会开启一个服务将public项目中的资源开发出来，此时跟服务器是一样的，你去访问：localhost:8080/pdf/web/viewer.html 是可以正常访问通的，这里不理解的话，就依葫芦画瓢吧，没关系的 ）： &lt;template&gt; &lt;iframe :src=&#34;&#39;/pdf/web/viewer.html?file=&#39;&#43;pdfUrl&#34;&gt;&lt;/iframe&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;Pdf&#39;, props: { pdfUrl: { type: String, default: &#39;&#39; } } } &lt;/script&gt; &lt;style scoped&gt; iframe { /* width: 960px; */ width: 1100px; max-width: 100%; height: 800px; margin-left: 50%; transform: translateX(-50%); } &lt;/style&gt; d.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-13T14:51:52+08:00">
    <meta property="article:modified_time" content="2024-06-13T14:51:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前端怎么预览pdf</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1.背景</h3> 
<p>后台返回了一个在线的pdf地址，需要我这边去做一个pdf的预览（需求1），并且支持配置是否可以下载（需求2），需要在当前页就能预览（需求3）。之前我写过一篇预览pdf的文章，但是当时后台返回的是blob流文件，如果你们的pdf也是以流文件的形式返回的，可以看<a href="https://blog.csdn.net/weixin_43239880/article/details/121441741?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171751648516800211521587%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=171751648516800211521587&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-121441741-null-null.nonecase&amp;utm_term=pdf&amp;spm=1018.2226.3001.4450">这篇文章</a>（超链接点进去就行）。</p> 
<h3><a id="2pdf_2"></a>2.简单说下pdf预览的实现方式</h3> 
<pre><code class="prism language-javascript">a<span class="token punctuation">.</span>借助 <span class="token operator">&lt;</span>embed<span class="token operator">&gt;</span>  <span class="token operator">/</span>  <span class="token operator">&lt;</span>iframe<span class="token operator">&gt;</span>标签
</code></pre> 
<p>这个是真的很简单，我直接贴在下面了，缺点是： 没办法阻止用户打印和下载pdf，所以我pass了这个方案</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>embed
 type<span class="token operator">=</span><span class="token string">"application/pdf"</span>
 <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"pdfUrl"</span>
 width<span class="token operator">=</span><span class="token string">"800"</span>
 height<span class="token operator">=</span><span class="token string">"600"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>iframe
 <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"pdfUrl"</span>
 width<span class="token operator">=</span><span class="token string">"800"</span>
 height<span class="token operator">=</span><span class="token string">"600"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<p>实现效果：<br> <img src="https://images2.imgbox.com/89/da/pTYptjBp_o.png" alt="image.png"></p> 
<p>b.使用vue插件vue-pdf来渲染(应该还有一些其他的插件也可以使用，大家自己研究下实现的效果把)<br> 这个方案我已经试了且用到项目上了，但是感觉很丑，跟浏览器打开pdf的效果差别很大，原因是这个插件大概得原理是把pdf转成了图片然后使用canvas来渲染的，然后很多东西都没有，就被我pass了。你可以想象一下你的pdf，然后你截图放进你网页上的感觉，就差不多是这个效果了，图片我忘记保存了，大家脑补一下<br> 我找了个图，这个其实别人还做了一些其他的渲染，比如下面的也是他自己写的。我感觉是没这么好看的，所以就抛弃了这个<br> <img src="https://images2.imgbox.com/9a/4c/2iixuAUB_o.png" alt="image.png"><br> c.使用pdf.js预览<br> 我觉得预览pdf这一块还是得用pdf.js，真的很成熟，样式也还是很给力的，然后想要改成什么样就可以改成什么样，因为源码在你手上。<br> 缺点：稍微麻烦点，需要处理跨域的问题（但是如果你的网站、pdf文件所在位置，后台返回的pdf位置都在同一个域名下的话，就不需要处理）。且可能需要知道一点运维的知识，不然很可能你在本地能运行成功，但是到线上可能访问不到</p> 
<h3><a id="3pdfjspdf_32"></a>3.使用pdf.js预览pdf</h3> 
<h5><a id="ahttpsmozillagithubiopdfjspdfjs_33"></a>a.到<a href="https://mozilla.github.io/pdf.js/" rel="nofollow">官网</a>去下载pdf.js</h5> 
<p><img src="https://images2.imgbox.com/79/bf/xLE5nG3W_o.png" alt="image.png"><br> 建议下第二个！！！（别问我为啥，因为我下了第一个来写demo发现有报错，又踩坑了）<br> <img src="https://images2.imgbox.com/89/18/ScGlKflV_o.png" alt="image.png"></p> 
<h5><a id="bpublicimagepnghttpsimgblogcsdnimgcnimg_convert9dde1db0a10fc67f42bd06af727e9988png_37"></a>b.解压之后直接丢到项目中的public文件夹下面去<img src="https://images2.imgbox.com/70/0d/T0Zvblpw_o.png" alt="image.png"></h5> 
<h5><a id="cpdfvuepublicnpm_run_servepubliclocalhost8080pdfwebviewerhtml___38"></a>c.写一个pdf.vue文件，内容如下（注意我的路径，这个路径跟public的路径是一样的，前面加了一个/，原因如下：当我们使用npm run serve时，我们的本地电脑也会开启一个服务将public项目中的资源开发出来，此时跟服务器是一样的，你去访问：localhost:8080/pdf/web/viewer.html 是可以正常访问通的，这里不理解的话，就依葫芦画瓢吧，没关系的 ）：</h5> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>iframe <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"'/pdf/web/viewer.html?file='+pdfUrl"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Pdf'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">pdfUrl</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
iframe <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/* width: 960px; */</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 1100px<span class="token punctuation">;</span>
  max<span class="token operator">-</span>width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> 
<h5><a id="d_68"></a>d.在页面中导入使用：</h5> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"home"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>这下面是我用来预览pdf文件的<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>pdf <span class="token operator">:</span>pdfUrl<span class="token operator">=</span><span class="token string">"pdfUrl"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>pdf<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> pdf <span class="token keyword">from</span> <span class="token string">'./pdf.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeView'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    pdf
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">pdfUrl</span><span class="token operator">:</span><span class="token string">'http://localhost:8080/怎么删除wps中最后的空白页.pdf'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<h5><a id="e_97"></a>e.预览效果是这样子的</h5> 
<p><img src="https://images2.imgbox.com/44/a9/D4Y6RBol_o.png" alt="image.png"></p> 
<h5><a id="fpdf_99"></a>f.到源码中修改一下把打印和下载都去掉，这一步很简单，大家自己去弄了，也可以直接使用我的pdf文件，我这里都已经改好了。最后的效果如下：</h5> 
<p><img src="https://images2.imgbox.com/4b/e2/lEC2lOvu_o.png" alt="image.png"></p> 
<h3><a id="4_101"></a>4.难点处理</h3> 
<p>很大概率你在本地能跑通代码，但是到线上会出问题，可能会出现的问题我都罗列在下面了</p> 
<h5><a id="a404_103"></a>a：线上404</h5> 
<p>线上404的话，说明你线上的这个pdf的资源没有上传到线上，或者线上写的路径不对！比如你的ip为192.168.1.182。如果正常的话，你去访问192.168.1.182/pdf/web/viewer.html 是可以正常访问通的。如果都没有出现正常的这个页面，如下：<br> <img src="https://images2.imgbox.com/23/33/oLlzeDMB_o.png" alt="image.png"><br> 那么说明你pdf文件资源没上传或者你写的路径不对。 1.检查dist包里面是否有这个pdf文件（一般放在public文件夹的都会原封不动的打到dist包中，这里还是需要检查下） 2.如果发现有的话，说明没问题，那么你需要到服务器上看下有没有这个pdf文件上传上去了没有。如果有的话，那就是你写的路径不对，或者是后台没有开发这个静态资源文件夹。此时如果你不懂的话，你就跟后台说下你要去访问这个页面，应该要用什么路径去访问才能访问的到。正常来说 192.168.1.182/pdf/web/viewer.html是可以的，如果不可以，可能是要加什么路径，比如192.168.1.182/web/pdf/web/viewer.html这种。如果你是web/pdf/web/viewer.html才能访问的到，那么你就要在你的pdf.vue里面改下路径以对应生产环境</p> 
<h5><a id="b_107"></a>b：线上显示资源跨域</h5> 
<p>这里是很明显从浏览器面板能看到的。这个的处理，需要你和后台一起处理，首先你访问/pdf/web/viewer.html这个的地址和你访问的页面的地址是需要在一个域名下的（如果不在的话，需要后台处理，开放个别域名），第二点，就是/pdf/web/viewer.html?file='+pdfUrl" 这个pdfUrl的地址最好也是跟你的pdf的viewer.html在同一个域名下，相当于三个都在同一域名下，就不会有跨域问题了。如果后台说是静态资源都放到另一台主机上了，那么麻烦他让他做个资源映射，保证你的pdfUrl是跟你的pdf的viewer.html在同一个域名下的</p> 
<h3><a id="5demo_110"></a>5.demo地址</h3> 
<p>demo地址可下载自己看代码：<a href="https://github.com/rui-rui-an/viewpdf">https://github.com/rui-rui-an/viewpdf</a><br> 参考文章：<a href="https://juejin.cn/post/7207078219215732794?searchId=2024060423581130C1D707D73A6338E3BA#heading-14" rel="nofollow">https://juejin.cn/post/7207078219215732794?searchId=2024060423581130C1D707D73A6338E3BA#heading-14</a></p> 
<h3><a id="6_114"></a>6.更新</h3> 
<p>关于下载（忘记写下载了）<br> html:<br> 我这里用的是一个div，然后文件名作为用户下载的入口，点击就能去下载</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"downpdf"</span> href<span class="token operator">=</span><span class="token string">"#"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"is_download"</span> @click<span class="token operator">=</span><span class="token string">"goDownload"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> pdfname <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="1_123"></a>方法1（直接下载）:</h5> 
<pre><code class="prism language-javascript"><span class="token function">downloadPdf</span><span class="token punctuation">(</span><span class="token parameter">pdfurl</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> fileName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pdfname
      <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+).)+([A-Za-z0-9-~\/])+$</span><span class="token regex-delimiter">/</span></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pdfurl<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'传入参数不合法,不是标准的文件链接'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> pdfurl<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/pdf'</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">'blob'</span>
        <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//接受二进制文件流</span>
            <span class="token keyword">var</span> blob <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response
            that<span class="token punctuation">.</span><span class="token function">downloadExportFile</span><span class="token punctuation">(</span>blob<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">downloadExportFile</span><span class="token punctuation">(</span><span class="token parameter">blob<span class="token punctuation">,</span> tagFileName</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> downloadElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> href <span class="token operator">=</span> blob
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> blob <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        downloadElement<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token string">'_blank'</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span> <span class="token comment">//创建下载的链接</span>
      <span class="token punctuation">}</span>
      downloadElement<span class="token punctuation">.</span>href <span class="token operator">=</span> href
      downloadElement<span class="token punctuation">.</span>download <span class="token operator">=</span> tagFileName
           <span class="token comment">//下载后文件名</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>downloadElement<span class="token punctuation">)</span>
      downloadElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//点击下载</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>downloadElement<span class="token punctuation">)</span> <span class="token comment">//下载完成移除元素</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> blob <span class="token operator">!=</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span> <span class="token comment">//释放掉blob对象</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h5><a id="api_167"></a>方法二（通过调自己的后端的下载api来下载，这里得问自己的后台，我这里就不贴代码了）</h5>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3caa0f538aa66206b1e34b61c12ac6b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Docker】Docker 配置镜像加速</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c62130df5af2087ccc0dca4c02460806/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python酷库之旅-比翼双飞情侣库(04)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>