<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>超详细的万字Git分支教程（保姆级别） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8be07dd39ba34a24c3d577774e42284b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="超详细的万字Git分支教程（保姆级别）">
  <meta property="og:description" content="HEAD是一个活动指针，指向的是正在活跃的分支。
【在当前HEAD指针指向的位置创建分支】
git branch b1 查看.git\refs\heads目录：
【继续使用master分支开发】
echo &#39;444&#39; &gt; aaa.txt git commit -m &#39;444&#39; ./ Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master) $ git log --oneline 2920850 (HEAD -&gt; master) 444 57a8f94 (b1) 333 3ac4fa8 222 afb705d 111 1.2.2 指定提交对象创建分支 【指定提交对象来创建分支】
Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master) $ git branch b2 3ac4fa8	# 根据指定的提交对象来创建分支 Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master) $ git log --oneline 2920850 (HEAD -&gt; master) 444 57a8f94 (b1) 333 3ac4fa8 (b2) 222 afb705d 111 Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master) $ cat .">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-30T00:54:41+08:00">
    <meta property="article:modified_time" content="2024-04-30T00:54:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">超详细的万字Git分支教程（保姆级别）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>HEAD是一个活动指针，指向的是正在活跃的分支。</p> 
</blockquote> 
<p>【在当前HEAD指针指向的位置创建分支】</p> 
<pre><code>git branch b1

</code></pre> 
<p><img src="https://images2.imgbox.com/e7/e1/ReT4zzg6_o.png" alt=""></p> 
<p>查看<code>.git\refs\heads</code>目录：</p> 
<p><img src="https://images2.imgbox.com/4e/fe/WMGoOaop_o.png" alt=""></p> 
<p>【继续使用master分支开发】</p> 
<pre><code>echo '444' &gt; aaa.txt
git commit -m '444' ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline
2920850 (HEAD -&gt; master) 444
57a8f94 (b1) 333
3ac4fa8 222
afb705d 111

</code></pre> 
<p><img src="https://images2.imgbox.com/7e/3c/yrjT3c47_o.png" alt=""></p> 
<h5><a id="122__46"></a>1.2.2 指定提交对象创建分支</h5> 
<p>【指定提交对象来创建分支】</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git branch b2 3ac4fa8					# 根据指定的提交对象来创建分支

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline
2920850 (HEAD -&gt; master) 444
57a8f94 (b1) 333
3ac4fa8 (b2) 222
afb705d 111

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat .git/refs/heads/b2
3ac4fa83b8c224518758b2b4ef7d2f214ac0224a

</code></pre> 
<p><img src="https://images2.imgbox.com/77/bc/L0k2f4Qo_o.png" alt=""></p> 
<h4><a id="13__73"></a>1.3 切换分支</h4> 
<h5><a id="131_checkout_76"></a>1.3.1 checkout分支切换</h5> 
<p>创建好了分支之后，我们可以使用<code>git checkout</code>切换到其他分支进行开发；</p> 
<ul><li>语法：</li></ul> 
<pre><code>git checkout {branchName}

</code></pre> 
<p>【准备环境】</p> 
<pre><code>rm -rf .git ./*
git init
echo '111' &gt;&gt; aaa.txt
git add ./
git commit -m '111' ./
echo '222' &gt;&gt; aaa.txt
git commit -m '222' ./
echo '333' &gt;&gt; aaa.txt
git commit -m '333' ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline
2130f83 (HEAD -&gt; master) 333
86cbe2b 222
dad9d1a 111

</code></pre> 
<p>【创建分支】</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 在当前位置创建b1分支
$ git branch b1

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 指定提交对象来创建分支
$ git branch b2 86cbe2b

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		
$ git log --oneline
2130f83 (HEAD -&gt; master, b1) 333		# b1分支的位置
86cbe2b (b2) 222						# b2分支的位置
dad9d1a 111

</code></pre> 
<p>【切换到b1分支进行开发】</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 切换到b1分支
$ git checkout b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (b1)			# HEAD指针指向了b1分支
$ git log --oneline
2130f83 (HEAD -&gt; b1, master) 333
86cbe2b (b2) 222
dad9d1a 111

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (b1)		# 编辑文件
$ echo "444" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (b1)		# 提交
$ git commit -m "b1 444" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (b1)		# 查看文件内容
$ cat aaa.txt
111
222
333
444

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (b1)		# 查看日志
$ git log --oneline
51b41c0 (HEAD -&gt; b1) b1 444				# b1分支正在开发
2130f83 (master) 333					# master和b2分支留在原地
86cbe2b (b2) 222
dad9d1a 111

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (b1)		# 切换到master分支
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)	# 查看日志
$ git log --oneline
2130f83 (HEAD -&gt; master) 333		# HEAD指针指向了master分支
86cbe2b (b2) 222
dad9d1a 111

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)	# 查看master分支工作状态的文件内容(文件内容是旧版本的)
$ cat aaa.txt
111
222
333

</code></pre> 
<p>【查看所有版本情况】</p> 
<p>默认情况下使用<code>git log</code>查询日志只能查询到之前的版本的日志，无法查询到比自身分支版本还要新的版本，通过<code>--all</code>可以查询所有版本的提交日志；</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline				# 只能查询master分支之前版本的日志信息
2130f83 (HEAD -&gt; master) 333
86cbe2b (b2) 222
dad9d1a 111

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 查询所有日志信息
$ git log --oneline --all
51b41c0 (b1) b1 444
2130f83 (HEAD -&gt; master) 333
86cbe2b (b2) 222
dad9d1a 111

</code></pre> 
<h5><a id="132_checkout_209"></a>1.3.2 checkout原理</h5> 
<p>通常情况下，当前分支如果存在未提交的操作时，则无法切换到其他分支；所以我们切换分支时最好保证当前工作空间的状态为<code>nothing to commit</code>；即：所有操作均已提交</p> 
<p>在切换分支时，Git会对以下地方进行修改：</p> 
<ul><li>1）HEAD指针：将HEAD指针指向最新的分支</li><li>2）工作空间的内容：将当前工作空间的内容更新为之前的分支的内容</li></ul> 
<p>【代码示例】</p> 
<pre><code>rm -rf .git ./*
git init
echo '111' &gt;&gt; aaa.txt
git add ./
git commit -m '111' ./
git branch b1						
echo '222' &gt;&gt; aaa.txt
git add ./
git commit -m '222' ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git log --oneline --all
464d580 (HEAD -&gt; master) 222
cc3429a (b1) 111

</code></pre> 
<p>【操作master分支的文件但不提交，切换到b1分支发现切换失败】</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)			# 编辑文件
$ echo "333" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git status
On branch master
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   aaa.txt

no changes added to commit (use "git add" and/or "git commit -a")

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
error: Your local changes to the following files would be overwritten by checkout:
        aaa.txt
Please commit your changes or stash them before you switch branches.
Aborting

</code></pre> 
<p><img src="https://images2.imgbox.com/b6/87/eDwbimHp_o.png" alt=""></p> 
<p>可以看出，如果当前分支存在未提交的操作时，Git不允许切换分支。但是有2种情况是例外的：</p> 
<ul><li>1）新分支的情况：当该分支是一个新创建的分支时，当前分支存在未提交的操作依旧可以切换到新分支，并且会将未提交的操作影响到新分支；</li><li>2）新文件的情况：当操作的文件是一个新的文件时，当前分支未提交依旧是可以切换到其他分支，并将操作影响到其他分支；</li></ul> 
<p>如果存在以上两种行为进行切换分支，则切换分支时不仅会对HEAD指针、工作空间等地方修改，还会对如下地方进行修改：</p> 
<ul><li>1）工作空间的状态：将当前分支的工作空间状态更新为之前分支</li><li>2）暂存区的内容：将当前暂存区内容更新为之前的分支</li></ul> 
<blockquote> 
 <p>Tips：我们在切换分支时，<strong>要保证当前分支是提交的状态，否则会对其他分支造成不必要的影响；</strong></p> 
</blockquote> 
<h6><a id="1__296"></a>1） 影响工作空间</h6> 
<p>新分支、新文件的操作都会影响工作空间和暂存区；</p> 
<p>【演示新分支影响工作空间】</p> 
<p>初始化仓库</p> 
<pre><code>rm -rf ./* .git
git init
echo '111' &gt;&gt; aaa.txt
git add ./
git commit -m '111' ./
git branch b1						
Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)	# b1分支创建后整个工作空间还没有提交过任何一次文件，属于新分支
$ git log --oneline --all
4b3c6bc (HEAD -&gt; master, b1) 111			# 指针还是指向master分支的

</code></pre> 
<p>在master分支编辑文件，然后切换到b1分支，查看工作空间的内容，发现变更了（影响了b1分支的工作空间内容）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 编辑master分支的文件内容
$ echo "222" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# master分支的状态
$ git status
On branch master
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   aaa.txt

no changes added to commit (use "git add" and/or "git commit -a")

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 切换到b1分支，发现能够切换成功
$ git checkout b1
Switched to branch 'b1'
M       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)			# b1分支的文件内容
$ cat aaa.txt
111
222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)			# b1分支的状态
$ git status
On branch b1
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   aaa.txt

no changes added to commit (use "git add" and/or "git commit -a")

</code></pre> 
<p>可以看到在遇到新分支时，当前工作空间的操作即使未提交也可以切换到其他分支，而且影响其他分支的工作空间状态及工作空间内容；注意，此时将master未提交的数据也影响到了b1分支，当分支切换到master然后提交，b1分支被影响的内容就消失了；</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)			# 切换到master分支
$ git checkout master
Switched to branch 'master'
M       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 提交操作
$ git commit -m "222" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 切换到b1分支
$ git checkout b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)			# 查看内容，发现影响消失了
$ cat aaa.txt
111

</code></pre> 
<p>重新切换到master分支，编辑文件未提交，切换到b1分支失败（此时b1分支不属于新分支了）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "333" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)			# 切换到b1分支失败，此时b1分支不属于新分支了；
$ git checkout b1
error: Your local changes to the following files would be overwritten by checkout:
        aaa.txt
Please commit your changes or stash them before you switch branches.
Aborting

</code></pre> 
<p>【演示新文件影响工作空间】</p> 
<p>把之前编辑的内容删除，将工作空间恢复到干净状态</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 把之前编辑的内容删除
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ cat aaa.txt
111
222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 工作空间又回到了干净状态（所有的操作均已提交）
$ git status
On branch master
nothing to commit, working tree clean

</code></pre> 
<p>使用master创建一个新的文件，切换到b1分支，查看b1分支的工作空间内容，发现也多了一个bbb.txt文件（影响了b1分钟的工作空间）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 编辑一个新的文件
$ echo "333" &gt;&gt; bbb.txt		# 注意，此时创建了一个新的文件bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git status
On branch master
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
        bbb.txt

nothing added to commit but untracked files present (use "git add" to track)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 切换到b1分支，发现切换成功
$ git checkout b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ ll
total 2
-rw-r--r-- 1 Adminstrator 197121 5 Oct 23 09:23 aaa.txt
-rw-r--r-- 1 Adminstrator 197121 4 Oct 23 09:23 bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)			# b1的工作空间多了一个文件
$ git status
On branch b1
Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
        bbb.txt

nothing added to commit but untracked files present (use "git add" to track)

</code></pre> 
<p>切换到master分支，提交操作，然后切换回b1分支，发现b1分支的bbb.txt文件清除了：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)			# 切换回master分支
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git add ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 提交操作
$ git commit -m "333-bbb" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 切换到b1分支
$ git checkout b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git status
On branch b1
nothing to commit, working tree clean

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)		# b1工作空间的bbb.txt文件清除了
$ ll
total 1
-rw-r--r-- 1 Adminstrator 197121 5 Oct 23 09:26 aaa.txt

</code></pre> 
<h6><a id="2__498"></a>2） 影响暂存区</h6> 
<p>【演示新分支影响暂存区】</p> 
<p>初始化仓库：</p> 
<pre><code>rm -rf ./* .git
git init
echo '111' &gt;&gt; aaa.txt
git add ./
git commit -m '111' ./
git branch b1			

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# b1分支创建后整个工作空间还没有提交过任何一次文件，属于新分支
$ git log --oneline --all
19fd84b (HEAD -&gt; master, b1) 111		# 指针还是指向master分支的

</code></pre> 
<p>在master分支编辑文件，然后添加到暂存区，切换到b1分支，查看b1分支的暂存区内容，发现变更了（影响了b1分支的暂存区）；</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "222" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git add ./
warning: LF will be replaced by CRLF in aaa.txt.
The file will have its original line endings in your working directory

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
Switched to branch 'b1'
M       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git ls-files -s
100644 a30a52a3be2c12cbc448a5c9be960577d13f4755 0       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git cat-file -p a30a52a3
111
222

</code></pre> 
<p>重新切换回master，提交之前的操作，然后再切换回b1分支，查看暂存区内容，发现影响消除了（此时b1不再属于新分支了）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git checkout master
Switched to branch 'master'
M       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git commit -m "222" ./
warning: LF will be replaced by CRLF in aaa.txt.
The file will have its original line endings in your working directory
[master 2ae7cda] 222
 1 file changed, 1 insertion(+)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git ls-files -s
100644 58c9bdf9d017fcd178dc8c073cbfcbb7ff240d6c 0       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git cat-file -p 58c9bdf9
111

</code></pre> 
<p>切换回master分支，编辑文件，还没有提交，切换到b1分钟发现出错（此时b1分支不属于新分支了）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "333" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git add ./
warning: LF will be replaced by CRLF in aaa.txt.
The file will have its original line endings in your working directory

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
error: Your local changes to the following files would be overwritten by checkout:
        aaa.txt
Please commit your changes or stash them before you switch branches.
Aborting

</code></pre> 
<p>【演示新文件影响工作空间】</p> 
<p>提交之前的操作，将工作空间恢复到干净状态</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git commit -m "333" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git log --oneline --all
f5d54ea (HEAD -&gt; master) 333
2ae7cda 222
e9b98e3 (b1) 111

</code></pre> 
<p>创建一个新文件，添加到暂存区，然后切换到b1分支，发现b1分支的暂存区也多了一个文件（影响了b1分支的暂存区）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "444-bbb" &gt;&gt; bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git add ./
warning: LF will be replaced by CRLF in bbb.txt.
The file will have its original line endings in your working directory

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
Switched to branch 'b1'
A       bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)		# b1分支的暂存区也多了一个文件
$ git ls-files -s
100644 58c9bdf9d017fcd178dc8c073cbfcbb7ff240d6c 0       aaa.txt
100644 a864cef2a0696aabcc85e6e55f04dc12230bab84 0       bbb.txt

</code></pre> 
<p>切换回master，提交之前的操作，然后再切换回b1分支，查询b1分支的暂存区内容被消除了（消除影响）：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git checkout master
Switched to branch 'master'
A       bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git commit -m "444-bbb" ./
warning: LF will be replaced by CRLF in bbb.txt.
The file will have its original line endings in your working directory
[master d76cc6f] 444-bbb
 1 file changed, 1 insertion(+)
 create mode 100644 bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git ls-files -s
100644 58c9bdf9d017fcd178dc8c073cbfcbb7ff240d6c 0       aaa.txt

</code></pre> 
<p>此时bbb.txt文件已经不属于新文件了，回到master分支，编辑bbb.txt文件，未提交，然后切换到b1分支，发现切换不了：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "555-bbb" &gt;&gt; bbb.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git add ./
warning: LF will be replaced by CRLF in bbb.txt.
The file will have its original line endings in your working directory

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout b1
error: Your local changes to the following files would be overwritten by checkout:
        bbb.txt
Please commit your changes or stash them before you switch branches.
Aborting

</code></pre> 
<h5><a id="133_switch_702"></a>1.3.3 switch切换分支</h5> 
<p><code>git switch</code>是Git 2.23版本推出的一个新的命令，专门用于分支的切换，而<code>git checkout</code>除了做分支的切换还有一些其他的功能，如恢复文件，恢复暂存区等；</p> 
<p>初始化仓库：</p> 
<pre><code>rm -rf ./* .git
git init
echo '111' &gt;&gt; aaa.txt
git add ./
git commit -m '111' ./

</code></pre> 
<p>使用git checkout恢复文件：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "222" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git status
On branch master
Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
        modified:   aaa.txt

no changes added to commit (use "git add" and/or "git commit -a")

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout aaa.txt
Updated 1 path from the index

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git status
On branch master
nothing to commit, working tree clean

</code></pre> 
<p>使用git checkout恢复暂存区：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ echo "222" &gt;&gt; aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 添加到暂存区
$ git add ./
warning: LF will be replaced by CRLF in aaa.txt.
The file will have its original line endings in your working directory

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git status
On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
        modified:   aaa.txt


Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git reset aaa.txt
Unstaged changes after reset:
M       aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)
$ git checkout aaa.txt
Updated 1 path from the index

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (master)		# 成功恢复
$ git status		
On branch master
nothing to commit, working tree clean

</code></pre> 
<p>但<code>git switch</code>命令是专门用于切换分支的，并且<code>git switch</code>切换分支也会存在我们探究的新分支、新文件切换时所带来的影响问题；</p> 
<p>使用<code>git switch</code>命令切换分支：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 ((89dda87...))
$ git log --oneline --all
033f6b5 (master) 222
89dda87 (HEAD) 111

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 ((89dda87...))
$ git branch b1

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 ((89dda87...))
$ git switch b1
Switched to branch 'b1'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace/xiaohui/test01 (b1)
$ git log --oneline --all
033f6b5 (master) 222
89dda87 (HEAD -&gt; b1) 111

</code></pre> 
<h4><a id="14__814"></a>1.4 分支合并</h4> 
<p>建立好分支后，我们可以使用分支进行开发功能，开发功能趋于成熟稳定后，我们可以将master分支与当前分支进行合并，这样其他分支的功能就集成到主分支上了，这也是当前主流的开发方式。</p> 
<p>使用分支开发功能从角度上划分一般为<strong>同轴开发</strong>和<strong>非同轴开发</strong>。</p> 
<ul><li>分支合并语法：</li></ul> 
<pre><code>git merge {branchName}

</code></pre> 
<ul><li>解释：将branchName分支的代码合并到当前分支</li></ul> 
<h5><a id="141__835"></a>1.4.1 快进合并</h5> 
<ul><li>同轴开发的快进合并：</li></ul> 
<p>同轴开发：创建一个新分支，使用新分支开发，等待开发功能趋于成熟稳定后，我们可以将master分支与新分支进行合并，这样其他分支的功能就集成到主分支上了，这也是企业里面经常用的一种开发方式；</p> 
<p><strong>对于前面的版本想要合并后面的版本，我们称为快进合并</strong></p> 
<p>在同轴开发中，多个分支处于同一根开发轴上，后面版本的代码包含前面版本的代码，因此同轴开发一般只会存在快进合并；</p> 
<ul><li>如图所示：</li></ul> 
<p><img src="https://images2.imgbox.com/27/b0/5a6O3g83_o.png" alt=""></p> 
<ul><li>首先创建一个新分支（login分支）</li><li>切换到新分支，在新分支开发上功能代码</li></ul> 
<p>【示例代码】</p> 
<p>初始化项目：</p> 
<pre><code>rm -rf .git ./*
git init
echo '用户名+密码登录' &gt;&gt; login.txt
git add ./
git commit -m '用户名+密码登录功能完成' ./

</code></pre> 
<p>①创建login分支</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git branch login

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all
2f5d87a (HEAD -&gt; master, login) 用户名+密码登录功能完成

</code></pre> 
<p>②切换到login分支</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git checkout login
Switched to branch 'login'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git log --oneline --all
2f5d87a (HEAD -&gt; login, master) 用户名+密码登录功能完成

</code></pre> 
<p>③使用login分支开发：集成QQ登录</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ echo "集成QQ登录" &gt;&gt; login.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git commit -m "集成QQ登录" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git log --oneline --all
a879a6c (HEAD -&gt; login) 集成QQ登录
2f5d87a (master) 用户名+密码登录功能完成

</code></pre> 
<p>④使用login分支开发：集成微信登录</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ echo "集成微信登录" &gt;&gt; login.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git commit -m "集成微信登录" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git log --oneline --all
c5a2584 (HEAD -&gt; login) 集成微信登录
a879a6c 集成QQ登录
2f5d87a (master) 用户名+密码登录功能完成

</code></pre> 
<p>当login分支基于稳定后，将功能集成到maste分支：</p> 
<ul><li>如图所示：</li></ul> 
<p><img src="https://images2.imgbox.com/ba/19/c39nU1JU_o.png" alt=""></p> 
<p>⑤切换回master分支，将login分支的代码合并到master分支：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat login.txt
用户名+密码登录

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git merge login
Updating 2f5d87a..c5a2584
Fast-forward
 login.txt | 2 ++
 1 file changed, 2 insertions(+)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat login.txt
用户名+密码登录
集成QQ登录
集成微信登录

</code></pre> 
<p><img src="https://images2.imgbox.com/5e/92/meNpyoJK_o.png" alt=""></p> 
<p>将login分支的代码合并到master分支，其实本质上就是让master也指向与login一样的提交对象；</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# master与login分支指向的是同一个Commit对象
$ cat .git/refs/heads/login
c5a258428f0bec398017159126f0b87b0d05a1e4
Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat .git/refs/heads/master
c5a258428f0bec398017159126f0b87b0d05a1e4

</code></pre> 
<h5><a id="142__996"></a>1.4.2 典型合并</h5> 
<ul><li>非同轴开发的典型合并：</li></ul> 
<p>非同轴开发：创建一个新分支，使用新分支开发，与此同时master分支也在开发行功能，等到新分支开发的功能完毕后，将master分支与新分支进行合并，将新分支集成到master分支中，但是新分支在开发过程中master分支也进行了一部分开发。</p> 
<p>==<strong>在非同轴开发中，后面的版本（v3）需要合并前面的版本（v2），这种合并方式称为典型合并；</strong>==由于典型合并存在于非同轴</p> 
<ul><li>如图所示：</li></ul> 
<p><img src="https://images2.imgbox.com/29/6d/sr8aLNxR_o.png" alt=""></p> 
<p>需要注意的是，如果是同轴开发，后面版本的内容肯定包含前面版本的内容，因此==<strong>同轴开发不存在典型合并</strong>==，只存在快进合并。另外，非同轴开发也存在快进合并，例如上图中的③步骤中，前面的版本（v2）想要合并后面的版本（v3），这也是一种快进合并。</p> 
<p>总结：</p> 
<ul><li>同轴开发：只存在快进合并</li><li>非同轴开发： 
  <ul><li>前面的版本合并后面的版本：快进合并</li><li>后面的版本合并前面的版本：典型合并</li></ul> </li></ul> 
<blockquote> 
 <p>Tips：典型合并必定是非同轴，快进合并可以是非同轴也可以是同轴。</p> 
</blockquote> 
<p>【示例代码】</p> 
<p>初始化项目：</p> 
<pre><code>rm -rf .git ./*
git init
echo '用户名+密码登录' &gt;&gt; project.txt
git add ./
git commit -m '用户名+密码登录功能完成' ./

</code></pre> 
<p>①创建login分支：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git branch login

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)			# 查看不同轴的日志需要加上--graph
$ git log --oneline --all --graph
* 7c0b2a3 (HEAD -&gt; master, login) 用户名+密码登录功能完成

</code></pre> 
<p>②切换到login分支，使用login分支进行开发：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git checkout login
Switched to branch 'login'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ echo "集成QQ登录" &gt;&gt; project.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git commit -m "集成QQ登录" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git log --oneline --all --graph
* 9c968e0 (HEAD -&gt; login) 集成QQ登录
* 7c0b2a3 (master) 用户名+密码登录功能完成

</code></pre> 
<p>③切换回master分支添加注册功能：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 查看master分支的project.txt文件，代码并没有合并过来
$ cat project.txt
用户名+密码登录
添加头像上传功能

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 查看日志，处于不同轴开发路径
$ git log --oneline --all --graph
* fecdb41 (HEAD -&gt; master) 添加头像上传功能
| * 9c968e0 (login) 集成QQ登录
|/
* 7c0b2a3 用户名+密码登录功能完成

</code></pre> 
<p>④将login分支的合并到master分支：产生代码冲突</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git merge login
Auto-merging project.txt
CONFLICT (content): Merge conflict in project.txt
Automatic merge failed; fix conflicts and then commit the result.

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ cat project.txt
用户名+密码登录
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
添加头像上传功能
=======
集成QQ登录
&gt;&gt;&gt;&gt;&gt;&gt;&gt; login

</code></pre> 
<p><img src="https://images2.imgbox.com/58/b0/sPF1D5O7_o.png" alt=""></p> 
<p>解决代码冲突：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ cat project.txt
用户名+密码登录
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
添加头像上传功能
=======
集成QQ登录
&gt;&gt;&gt;&gt;&gt;&gt;&gt; login

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ vi project.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ cat project.txt
用户名+密码登录
添加头像上传功能
集成QQ登录

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ git commit -a -m "合并login分支，并解决代码冲突"
[master 9ccdde2] 合并login分支，并解决代码冲突

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
*   9ccdde2 (HEAD -&gt; master) 合并login分支，并解决代码冲突			# 解决冲突后提交产生一次新的版本
|\
| * 9c968e0 (login) 集成QQ登录
* | fecdb41 添加头像上传功能
|/
* 7c0b2a3 用户名+密码登录功能完成

</code></pre> 
<p>经过上一次合并后，master与login属于同轴了，当切换为login分支，可以使用快进合并来合并master分支；</p> 
<p><img src="https://images2.imgbox.com/2d/5c/12qQEJcx_o.png" alt=""></p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)			# 切换为login分支
$ git checkout login
Switched to branch 'login'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)			# login分支的代码
$ cat project.txt
用户名+密码登录
集成QQ登录

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git log --oneline --all --graph
*   9ccdde2 (master) 合并login分支，并解决代码冲突
|\
| * 9c968e0 (HEAD -&gt; login) 集成QQ登录			
* | fecdb41 添加头像上传功能
|/
* 7c0b2a3 用户名+密码登录功能完成

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)			# 合并master分支
$ git merge master
Updating 9c968e0..9ccdde2
Fast-forward
 project.txt | 1 +
 1 file changed, 1 insertion(+)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)			# 查看login分支的代码，发现master的代码被合并过来了
$ cat project.txt
用户名+密码登录
添加头像上传功能
集成QQ登录

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (login)
$ git log --oneline --all --graph
*   9ccdde2 (HEAD -&gt; login, master) 合并login分支，并解决代码冲突
|\
| * 9c968e0 集成QQ登录
* | fecdb41 添加头像上传功能
|/
* 7c0b2a3 用户名+密码登录功能完成

</code></pre> 
<h4><a id="15_Git_1222"></a>1.5 Git的代码冲突</h4> 
<h5><a id="151_Git_1225"></a>1.5.1 Git的代码冲突的分类与特点</h5> 
<p>Git存在代码冲突的情况分为<strong>协同开发时的代码冲突</strong>与<strong>分支合并时的代码冲突</strong>；其中分支合并时的代码冲突又分为<strong>快进合并代码冲突</strong>与<strong>典型合并代码冲突</strong>。</p> 
<p><img src="https://images2.imgbox.com/82/69/lgLXWyar_o.png" alt=""></p> 
<p>另外还需要注意的是，Git与SVN的代码冲突逻辑不一致。</p> 
<blockquote> 
 <p>Tips：我们本章主要讨论分支合并时的代码冲突。</p> 
</blockquote> 
<ul><li>在SVN中：只要两个用户编辑的不是同一行则不会出现代码冲突。</li><li>在Git中：只要两个文件内容不一致，在合并分支时必定会产生冲突，无论两个文件是否编辑的是同一行。不过具体情况还得细分如下： 
  <ul><li>快进合并：两个分支属于不同轴开发，前面版本合并后面版本时，只要两个文件不一致，合并时必定出现冲突，不管两个分支编辑的是不是同一行。</li><li>典型合并：由于典型合并两个分支属于不同的开发轴，而后面的分支想要合并前面的分支，两个文件必定不一致，因此典型合并必定出现代码冲突。</li></ul> </li></ul> 
<blockquote> 
 <p>Tips：同轴开发的快进合并是不会产生冲突的。</p> 
</blockquote> 
<p>【SVN代码冲突模拟】</p> 
<p>SVN的情况：两个用户编辑的代码是同一行则出现冲突</p> 
<table><thead><tr><th>xiaohui</th><th>xiaolan</th></tr></thead><tbody><tr><td>创建abc.txt</td><td></td></tr><tr><td>内容为：</td><td></td></tr><tr><td>111</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td>执行add</td><td></td></tr><tr><td>执行commit</td><td></td></tr><tr><td></td><td>执行update</td></tr><tr><td>修改内容为：</td><td></td></tr><tr><td>111aaa</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td>执行commit</td><td></td></tr><tr><td></td><td>修改内容为：</td></tr><tr><td>111bbb</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td></td><td>执行update（冲突）</td></tr></tbody></table> 
<p>如果"xiaolan"用户最后更改的文件内容为：</p> 
<pre><code>111
222bbb

</code></pre> 
<p>然后再执行update，则不会出现代码冲突，因为SVN判断代码冲突的代码单元为行，即：两个用户编辑的不是同一行就不会出现代码冲突。</p> 
<h5><a id="152__1299"></a>1.5.2 快进合并代码冲突</h5> 
<p>快进合并属于前面的版本合并后面的版本，需要注意的是==<strong>前面的版本并非是"旧版本"，后面的版本并非是"新版本"</strong>==，这主要取决于是否是同轴开发。对于同轴开发，后面的版本自然是新版本，其内容肯定包含前面版本的内容。但对于非同轴开发，后面的版本内容大概率是不包含前面的版本内容的；</p> 
<p>在同轴开发情况下，快进合并不会产生代码冲突，但如果在非同轴开发情况下，快进合并就会产生代码冲突了。我们观察下列操作：</p> 
<table><thead><tr><th>master分支</th><th>test分支</th></tr></thead><tbody><tr><td>创建abc.txt</td><td></td></tr><tr><td>内容为：</td><td></td></tr><tr><td>111</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td>执行add</td><td></td></tr><tr><td>执行commit</td><td></td></tr><tr><td></td><td>创建分支 – 此时test分支的abc.txt的内容也是111、222</td></tr><tr><td>修改内容为：</td><td></td></tr><tr><td>111aaa</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td>执行commit</td><td></td></tr><tr><td></td><td>切换到test分支</td></tr><tr><td></td><td>修改内容为：</td></tr><tr><td>111</td><td></td></tr><tr><td>222bbb</td><td></td></tr><tr><td></td><td>执行commit – 此时test分支和master分支已经不同轴了</td></tr><tr><td>切换回master分支，合并test分支，属于快进合并，但会出现冲突</td><td></td></tr></tbody></table> 
<blockquote> 
 <p>Tips：注意，上述操作在SVN中则不会认为是冲突，因为SVN判断是否冲突的标准是操作同一个文件的同一行记录；</p> 
</blockquote> 
<ul><li>快进合并冲突演示：</li></ul> 
<p><img src="https://images2.imgbox.com/05/93/V2DObGfw_o.png" alt=""></p> 
<p>【使用Git演示代码冲突】</p> 
<p>①初始化项目</p> 
<pre><code>rm -rf .git ./*
git init

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat aaa.txt
111
222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git add ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git commit -m "111 222" ./

</code></pre> 
<p>②创建test分支</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git branch test

</code></pre> 
<p>③继续使用master分支开发</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
* d40d605 (HEAD -&gt; master, test) 111 222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat aaa.txt
111aaa
222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git commit -m "aaa" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
* 09fe9cb (HEAD -&gt; master) aaa
* d40d605 (test) 111 222

</code></pre> 
<p>④切换到test分支开发</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git checkout test
Switched to branch 'test'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)			# 注意，和master分支修改的文件内容不是同一行
$ cat aaa.txt
111
222bbb

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git commit -m "bbb" ./
[test dfe1b42] bbb
 1 file changed, 1 insertion(+), 1 deletion(-)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)			# 查看日志，test与master分支已经不同轴
$ git log --oneline --all --graph	
* dfe1b42 (HEAD -&gt; test) bbb
| * 09fe9cb (master) aaa
|/
* d40d605 111 222

</code></pre> 
<p>⑤切换回master分支，合并test分支，出现冲突：</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)			# 切换回master分支
$ git checkout master
Switched to branch 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)		# 合并test分支，属于快进合并，但是会产生冲突
$ git merge test
Auto-merging aaa.txt
CONFLICT (content): Merge conflict in aaa.txt
Automatic merge failed; fix conflicts and then commit the result.

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ cat aaa.txt
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
111aaa
222
=======
111
222bbb
&gt;&gt;&gt;&gt;&gt;&gt;&gt; test

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)
$ cat aaa.txt
111aaa
222bbb


Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master|MERGING)			# 解决冲突
$ git commit -a -m "master合并test分支"
[master adaec78] master合并test分支

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
*   adaec78 (HEAD -&gt; master) master合并test分支
|\
| * 7b14536 (test) bbb
* | eeca4c9 aaa
|/
* 5f41035 111 222

</code></pre> 
<p>需要注意的是：此时切换回test分支，合并master分支内容不会出现冲突（属于快进合并，但是内容不一致，但不会出现冲突）：因为master分支的内容是刚刚解决了冲突之后用户确定了的内容。</p> 
<p><img src="https://images2.imgbox.com/db/24/kcuGUaR4_o.png" alt=""></p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git checkout test
Switched to branch 'test'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
*   adaec78 (master) master合并test分支
|\
| * 7b14536 (HEAD -&gt; test) bbb
* | eeca4c9 aaa
|/
* 5f41035 111 222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ cat aaa.txt
111
222bbb

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git merge master
Updating 7b14536..adaec78
Fast-forward
 aaa.txt | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ cat aaa.txt
111aaa
222bbb

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
*   adaec78 (HEAD -&gt; test, master) master合并test分支
|\
| * 7b14536 () bbb
* | eeca4c9 aaa
|/
* 5f41035 111 222

</code></pre> 
<h5><a id="153__1538"></a>1.5.3 典型合并代码冲突</h5> 
<p>典型合并时的代码冲突就是我们之前遇到的那种情况，典型合并属于不同轴的开发，并且后面版本需要合并前面版本的情况，由于不同轴，因此后面版本的内容不一定包含前面版本的内容，由于Git代码冲突的特点，<strong>因此典型合并必定会出现代码冲突</strong>，因为后面版本的内容不可能和前面版本内容一致。</p> 
<p>我们观察下列操作：</p> 
<table><thead><tr><th>master分支</th><th>test分支</th></tr></thead><tbody><tr><td>创建abc.txt</td><td></td></tr><tr><td>内容为：</td><td></td></tr><tr><td>111</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td>执行add</td><td></td></tr><tr><td>执行commit</td><td></td></tr><tr><td></td><td>创建分支 – 此时test分支的abc.txt的内容也是111、222</td></tr><tr><td>修改内容为：</td><td></td></tr><tr><td>111aaa</td><td></td></tr><tr><td>222</td><td></td></tr><tr><td>执行commit</td><td></td></tr><tr><td></td><td>切换到test分支</td></tr><tr><td></td><td>修改内容为：</td></tr><tr><td>111</td><td></td></tr><tr><td>222bbb</td><td></td></tr><tr><td></td><td>执行commit – 此时test分支和master分支已经不同轴了</td></tr><tr><td></td><td>合并master分支的代码，属于典型合并，出现代码冲突。</td></tr></tbody></table> 
<ul><li>典型合并冲突演示：</li></ul> 
<p><img src="https://images2.imgbox.com/eb/c0/OZCMyqwY_o.png" alt=""></p> 
<p>【使用Git演示代码冲突】</p> 
<p>①初始化项目：</p> 
<pre><code>rm -rf .git ./*
git init

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat aaa.txt
111
222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git add ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git commit -m "111 222" ./

</code></pre> 
<p>②创建test分支</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git branch test

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
* 45fa06b (HEAD -&gt; master, test) 111 222

</code></pre> 
<p>③继续使用master分支开发</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git checkout master
Already on 'master'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ cat aaa.txt
111aaa
222

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git commit -m "aaa" ./

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git log --oneline --all --graph
* c86283b (HEAD -&gt; master) aaa
* 45fa06b (test) 111 222

</code></pre> 
<p>④切换到test分支，继续开发</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (master)
$ git checkout test
Switched to branch 'test'

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ cat aaa.txt
111
222bbb

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git commit -m "bbb" ./
[test e61df5a] bbb
 1 file changed, 1 insertion(+), 1 deletion(-)

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git log --oneline --all --graph
* e61df5a (HEAD -&gt; test) bbb
| * c86283b (master) aaa
|/
* 45fa06b 111 222

</code></pre> 
<p>⑤使用test分支合并master分支（属于典型合并）</p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git merge master
Auto-merging aaa.txt
CONFLICT (content): Merge conflict in aaa.txt
Automatic merge failed; fix conflicts and then commit the result.

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test|MERGING)
$ cat aaa.txt
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
111
222bbb
=======
111aaa
222
&gt;&gt;&gt;&gt;&gt;&gt;&gt; master

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test|MERGING)
$ vi aaa.txt

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test|MERGING)
$ cat aaa.txt
111aaa
222bbb

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test|MERGING)
$ git commit -a -m "合并master分支，并解决冲突"
[test 448d619] 合并master分支，并解决冲突

Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git log --oneline --all --graph
*   448d619 (HEAD -&gt; test) 合并master分支，并解决冲突
|\
| * c86283b (master) aaa
* | e61df5a bbb
|/
* 45fa06b 111 222

</code></pre> 
<p>同样的，如果此时切换回master分支，合并test分支虽然属于快进合并并且不同轴，但合并依旧不会出现冲突，因为test分支的内容是解决冲突并且经过用户确认之后的内容。</p> 
<p><img src="https://images2.imgbox.com/d2/72/YgXbpa0B_o.png" alt=""></p> 
<pre><code>Adminstrator@LAPTOP-OC90J78H MINGW64 ~/Desktop/workspace (test)
$ git log --oneline --all --graph
*   448d619 (HEAD -&gt; test) 合并master分支，并解决冲突


### 给大家的福利


**零基础入门**


对于从来没有接触过网络安全的同学，我们帮你准备了详细的学习成长路线图。可以说是最科学最系统的学习路线，大家跟着这个大的方向学习准没问题。


![](https://img-blog.csdnimg.cn/img_convert/95608e9062782d28f4f04f821405d99a.png)


同时每个成长路线对应的板块都有配套的视频提供：


![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/a91b9e8100834e9291cfcf1695d8cd42.png#pic_center)


因篇幅有限，仅展示部分资料

**网上学习资料一大堆，但如果学到的知识不成体系，遇到问题时只是浅尝辄止，不再深入研究，那么很难做到真正的技术提升。**

**[需要这份系统化资料的朋友，可以点击这里获取](https://bbs.csdn.net/topics/618540462)**

**一个人可以走的很快，但一群人才能走的更远！不论你是正从事IT行业的老鸟或是对IT行业感兴趣的新人，都欢迎加入我们的的圈子（技术交流、学习资源、职场吐槽、大厂内推、面试辅导），让我们一起学习成长！**

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fb6267b2960ac0d952837ae81c3371c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用LLaMA-Factory来实现微调ChatGLM-3B</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/baeb2672c58c02c3a11ada555b3fc847/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">大数据 - Doris系列《四》- Doris常用函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>