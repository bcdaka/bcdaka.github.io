<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决问题： java.net.ConnectException: Connection refused: connect - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d931cef4c8c057999c7ca2c7f45abf52/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="解决问题： java.net.ConnectException: Connection refused: connect">
  <meta property="og:description" content="问题描述： 使用hive连接三方工具datagrip的时候出现错误：
Could not open client transport with JDBC Uri: jdbc:hive2://hadoop:10000: java.net.ConnectException: Connection refused: connect
解决过程： 首先通过查阅网上资料，排除了以下原因：
1、防火墙
2、Hadoop中hdfs、yarn的启动
3、开启metastore和hiveServer2服务
然后去看了hive的日志：
Caused by: org.apache.hadoop.ipc.RemoteException: Cannot create directory /tmp/hive/root/239df2e3-f39e-46b7-8f17-38dc7da2d793. Name node is in safe mode.
The reported blocks 501 needs additional 8 blocks to reach the threshold 0.9990 of total blocks 510.
The minimum number of live datanodes is not required. Safe mode will be turned off automatically once the thresholds have been reached.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-20T15:14:33+08:00">
    <meta property="article:modified_time" content="2023-06-20T15:14:33+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决问题： java.net.ConnectException: Connection refused: connect</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>问题描述：</h4> 
<p>使用hive连接三方工具datagrip的时候出现错误：<br> Could not open client transport with JDBC Uri: jdbc:hive2://hadoop:10000: java.net.ConnectException: Connection refused: connect</p> 
<h4><a id="_4"></a>解决过程：</h4> 
<p>首先通过查阅网上资料，排除了以下原因：<br> 1、防火墙<br> 2、Hadoop中hdfs、yarn的启动<br> 3、开启metastore和hiveServer2服务</p> 
<p>然后去看了hive的日志：<br> Caused by: org.apache.hadoop.ipc.RemoteException: Cannot create directory /tmp/hive/root/239df2e3-f39e-46b7-8f17-38dc7da2d793. Name node is in safe mode.<br> The reported blocks 501 needs additional 8 blocks to reach the threshold 0.9990 of total blocks 510.<br> The minimum number of live datanodes is not required. Safe mode will be turned off automatically once the thresholds have been reached. NamenodeHostName:hadoop102<br> at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.newSafemodeException(FSNamesystem.java:1468)</p> 
<p>根据错误信息，可以看出是因为 HDFS 的 NameNode 处于安全模式，无法创建目录 <code>/tmp/hive/root/239df2e3-f39e-46b7-8f17-38dc7da2d793</code>，导致任务失败。</p> 
<p>解决方法是等待 NameNode 自动退出安全模式，或者手动将其退出安全模式。可以使用以下命令将 NameNode 退出安全模式：</p> 
<pre><code class="prism language-bash">hdfs dfsadmin -safemode leave
</code></pre> 
<p>至此问题解决！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9fce11eb6e93a07c75285bdb7fe1c27a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springboot期末复习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6d15464c3befa23394be22bbc5a0d04c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java GUI实现简易百词斩功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>