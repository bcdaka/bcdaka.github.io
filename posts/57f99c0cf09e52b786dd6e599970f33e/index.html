<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机视觉 | 基于图像处理和边缘检测算法的黄豆计数实验 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/57f99c0cf09e52b786dd6e599970f33e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="计算机视觉 | 基于图像处理和边缘检测算法的黄豆计数实验">
  <meta property="og:description" content="目录 一、实验原理二、实验步骤1. 图像读取与预处理2. 边缘检测3. 轮廓检测4. 标记轮廓序号 三、实验结果四、完整代码 Hi，大家好，我是半亩花海。 本实验旨在利用 Python 和 OpenCV 库，通过图像处理和边缘检测算法实现黄豆图像的自动识别和计数，并在图像上标记每个黄豆的轮廓和序号。
一、实验原理 灰度转换：将彩色图像转换为灰度图像，减少计算复杂度。高斯平滑：使用高斯模糊来减少图像噪声。Canny边缘检测：检测图像中的边缘。轮廓查找：使用OpenCV的findContours函数检测图像中的轮廓。绘制轮廓和标记：在原始图像上绘制检测到的轮廓，并标记每个轮廓的序号。 二、实验步骤 1. 图像读取与预处理 import cv2 import matplotlib.pyplot as plt # 读取图像 image = cv2.imread(&#39;soybean.jpg&#39;) # 转换为灰度图像 gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY) # 平滑处理 blurred = cv2.GaussianBlur(gray, (11, 11), 0) soybean.jpg 图片如下所示，可自取：
2. 边缘检测 cv2.Canny(blurred, 30, 150)：使用Canny算法进行边缘检测，参数30和150分别是低阈值和高阈值。 # 使用Canny边缘检测 edges = cv2.Canny(blurred, 30, 150) 3. 轮廓检测 cv2.findContours(edges.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)：查找图像中的轮廓。RETR_EXTERNAL表示只检测外部轮廓，CHAIN_APPROX_SIMPLE表示使用简单的链式近似方法。 # 查找轮廓 contours, _ = cv2.findContours(edges.copy(), cv2.RETR_EXTERNAL, cv2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-22T23:12:17+08:00">
    <meta property="article:modified_time" content="2024-06-22T23:12:17+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机视觉 | 基于图像处理和边缘检测算法的黄豆计数实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_4" rel="nofollow">一、实验原理</a></li><li><a href="#_12" rel="nofollow">二、实验步骤</a></li><li><ul><li><a href="#1__13" rel="nofollow">1. 图像读取与预处理</a></li><li><a href="#2__34" rel="nofollow">2. 边缘检测</a></li><li><a href="#3__43" rel="nofollow">3. 轮廓检测</a></li><li><a href="#4__52" rel="nofollow">4. 标记轮廓序号</a></li></ul> 
  </li><li><a href="#_71" rel="nofollow">三、实验结果</a></li><li><a href="#_97" rel="nofollow">四、完整代码</a></li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p><font size="4"><font color="green"><strong>Hi，大家好，我是半亩花海。</strong></font> 本实验旨在利用 Python 和 OpenCV 库，通过<font color="red"><strong>图像处理</strong></font>和<font color="red"><strong>边缘检测算法</strong></font>实现黄豆图像的自动识别和计数，并在图像上标记每个黄豆的<strong>轮廓</strong>和<strong>序号</strong>。</font></p> 
</blockquote> 
<h2><a id="_4"></a>一、实验原理</h2> 
<ul><li><font size="4"><font color="purple">灰度转换</font>：将彩色图像转换为灰度图像，减少计算复杂度。</font></li><li><font size="4"><font color="purple">高斯平滑</font>：使用高斯模糊来减少图像噪声。</font></li><li><font size="4"><font color="purple">Canny边缘检测</font>：检测图像中的边缘。</font></li><li><font size="4"><font color="purple">轮廓查找</font>：使用OpenCV的findContours函数检测图像中的轮廓。</font></li><li><font size="4"><font color="purple">绘制轮廓和标记</font>：在原始图像上绘制检测到的轮廓，并标记每个轮廓的序号。</font></li></ul> 
<h2><a id="_12"></a>二、实验步骤</h2> 
<h3><a id="1__13"></a>1. 图像读取与预处理</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 读取图像</span>
image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'soybean.jpg'</span><span class="token punctuation">)</span>

<span class="token comment"># 转换为灰度图像</span>
gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>

<span class="token comment"># 平滑处理</span>
blurred <span class="token operator">=</span> cv2<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p><font size="4"><font color="purple"><strong>soybean.jpg 图片如下所示，可自取：</strong></font></font></p> 
<center> 
 <img src="https://images2.imgbox.com/f1/4b/fLQn4P7V_o.png" width="75%"> 
</center> 
<h3><a id="2__34"></a>2. 边缘检测</h3> 
<ul><li><font size="4"><font color="purple">cv2.Canny(blurred, 30, 150)</font>：使用Canny算法进行边缘检测，参数30和150分别是低阈值和高阈值。</font></li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 使用Canny边缘检测</span>
edges <span class="token operator">=</span> cv2<span class="token punctuation">.</span>Canny<span class="token punctuation">(</span>blurred<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3__43"></a>3. 轮廓检测</h3> 
<ul><li><font size="4"><font color="purple">cv2.findContours(edges.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)</font>：查找图像中的轮廓。RETR_EXTERNAL表示只检测外部轮廓，CHAIN_APPROX_SIMPLE表示使用简单的链式近似方法。</font></li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 查找轮廓</span>
contours<span class="token punctuation">,</span> _ <span class="token operator">=</span> cv2<span class="token punctuation">.</span>findContours<span class="token punctuation">(</span>edges<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>RETR_EXTERNAL<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4__52"></a>4. 标记轮廓序号</h3> 
<ul><li><font size="4"><font color="purple">cv2.boundingRect(contour)</font>：计算轮廓的边界框，用于确定标注位置。</font></li><li><font size="4"><font color="purple">cv2.drawContours(image, [contour], -1, (0, 255, 0), 2)</font>：绘制轮廓，绿色线条，线宽为2像素。</font></li><li><font size="4"><font color="purple">cv2.putText(image, str(i + 1), (x + w // 2, y + h // 2), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (255, 0, 0), 2)</font>：在每个轮廓的中心位置标注序号，红色字体，字体大小为0.5，线宽为2像素。</font></li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 绘制轮廓并标记序号</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> contour <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>contours<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 计算轮廓的边界框，用于确定标注位置</span>
    x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h <span class="token operator">=</span> cv2<span class="token punctuation">.</span>boundingRect<span class="token punctuation">(</span>contour<span class="token punctuation">)</span>

    <span class="token comment"># 绘制轮廓</span>
    cv2<span class="token punctuation">.</span>drawContours<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token punctuation">[</span>contour<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token comment"># 在轮廓内标注序号</span>
    cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> w <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">+</span> h <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_71"></a>三、实验结果</h2> 
<ul><li><font size="4"><font color="purple">plt.figure(figsize=(10, 10))</font>：创建一个显示窗口，大小为10x10英寸。</font></li><li><font size="4"><font color="purple">plt.imshow(cv2.cvtColor(image, cv2.COLOR_BGR2RGB))</font>：将处理后的图像转换为RGB格式并显示。</font></li><li><font size="4"><font color="purple">plt.axis(‘off’)</font>：关闭坐标轴显示。</font></li><li><font size="4"><font color="purple">plt.show()</font>：显示图像。</font></li><li><font size="4"><font color="purple">print(f"黄豆数量: {len(contours)}")</font>：输出检测到的黄豆数量。</font></li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 显示结果图像</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 输出黄豆数量</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"黄豆数量: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">len</span><span class="token punctuation">(</span>contours<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre> 
<center> 
 <img src="https://images2.imgbox.com/40/e0/ZWEsxuwI_o.png" width="75%"> 
</center> 
<p><font size="4"><font color="purple">实验结果表明：</font>图像中的所有18个黄豆都被成功识别和标记，每个黄豆的轮廓被绿色线条清晰绘制，序号标记在轮廓中心位置附近。</font></p> 
<h2><a id="_97"></a>四、完整代码</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 读取图像</span>
image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'soybean.jpg'</span><span class="token punctuation">)</span>

<span class="token comment"># 转换为灰度图像</span>
gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>

<span class="token comment"># 平滑处理</span>
blurred <span class="token operator">=</span> cv2<span class="token punctuation">.</span>GaussianBlur<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment"># 使用Canny边缘检测</span>
edges <span class="token operator">=</span> cv2<span class="token punctuation">.</span>Canny<span class="token punctuation">(</span>blurred<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>

<span class="token comment"># 查找轮廓</span>
contours<span class="token punctuation">,</span> _ <span class="token operator">=</span> cv2<span class="token punctuation">.</span>findContours<span class="token punctuation">(</span>edges<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>RETR_EXTERNAL<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span>

<span class="token comment"># 绘制轮廓并标记序号</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> contour <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>contours<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 计算轮廓的边界框，用于确定标注位置</span>
    x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h <span class="token operator">=</span> cv2<span class="token punctuation">.</span>boundingRect<span class="token punctuation">(</span>contour<span class="token punctuation">)</span>

    <span class="token comment"># 绘制轮廓</span>
    cv2<span class="token punctuation">.</span>drawContours<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token punctuation">[</span>contour<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token comment"># 在轮廓内标注序号</span>
    cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> w <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">+</span> h <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment"># 显示结果图像</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 输出黄豆数量</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"黄豆数量: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">len</span><span class="token punctuation">(</span>contours<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fba8b2de4a9b5ffaa3f65bfbd6647703/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">keep-alive实现页面缓存</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0ea49c7d6b3a57f79a79d4b06a5f02f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Midjourney绘画提示词精选：提升AI艺术创作的秘诀</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>