<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C/C&#43;&#43;】详解 assert() 断言（什么是assert? assert有什么作用？） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b3c0a99c74b408cdad6d5f39e15f21b3/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C/C&#43;&#43;】详解 assert() 断言（什么是assert? assert有什么作用？）">
  <meta property="og:description" content="目录
一、前言
二、什么是 assert ? 三、assert 的用法
四、assert 案例解析
五、assert 断言的使用原则
六、共勉 一、前言 在编写程序过程中，尤其是调试代码时，往往需要一个提醒代码漏洞/Bug的小助手，以便于程序员及时修改和完善代码。那么assert关键字就可以成为这个小助手。
二、什么是 assert ? 概念：C/C&#43;&#43; 中的 assert 是一个宏，用于在运行时检查一个条件是否为真，如果条件不满足，则运行时将终止程序的执行并输出一条错误信息。
assert 宏定义在 &lt;assert.h&gt; 或 &lt;cassert&gt; 头文件中，并接受一个参数，通常为一个语句。如果这个语句的结果为 false，assert 宏就会以&#34;Assertion failed: , file , line &#34;的形式显示出错信息，然后使程序崩溃并终止运行。如果该语句的结果为 true，则 assert 宏不做任何操作。 作用： assert 宏的使用可以帮助程序员检查程序的正确性，并提供帮助定位错误的一种手段。通常在程序编写的测试与调试阶段使用 assert 来追踪程序执行中的错误，并在最终发布程序时关闭 assert 检查，以提升程序的运行效率。
三、assert 的用法 语法：
assert(condition);condition：要判断的条件 说明：
a、如果condition判断结果为false，则程序就会停止执行。b、当程序停止执行时，assert就会断言失败，并输出一条程序的错误信息到控制台或日志文件中。c、assert关键字常常用于调试程序阶段，可以用来帮助程序员在程序出现异常或错误时，快速定位问题所在，以便于检查和就修改完善。d、而在程序正常部署后，assert一般就会被自动关闭。 四、assert 案例解析 案例1 ： 比大小
#include &lt;cassert&gt; #include &lt;iostream&gt; using namespace std; int main() { int a = 10, b = 20; assert(a &gt; b); // 条件不成立，程序会终止 cout &lt;&lt; a &#43; b &lt;&lt; endl; return 0; } 在这个例子中，条件 a &gt; b 不成立，程序就会在 assert 这个语句处崩溃，输出一条相应的错误信息。 案例2 ： 模拟 strlen() 函数 /*例程1*/ #include &lt;stdio.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-20T22:39:49+08:00">
    <meta property="article:modified_time" content="2024-03-20T22:39:49+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C/C&#43;&#43;】详解 assert() 断言（什么是assert? assert有什么作用？）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80" rel="nofollow">一、前言</a></p> 
<p id="%E4%BA%8C%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%20assert%20%3F%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%20assert%20%3F%C2%A0" rel="nofollow">二、什么是 assert ? </a></p> 
<p id="%C2%A0%E4%B8%89%E3%80%81assert%20%E7%9A%84%E7%94%A8%E6%B3%95-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%89%E3%80%81assert%20%E7%9A%84%E7%94%A8%E6%B3%95" rel="nofollow"> 三、assert 的用法</a></p> 
<p id="%C2%A0%E5%9B%9B%E3%80%81assert%20%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%9B%9B%E3%80%81assert%20%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90" rel="nofollow"> 四、assert 案例解析</a></p> 
<p id="%C2%A0%E4%BA%94%E3%80%81assert%20%E6%96%AD%E8%A8%80%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%94%E3%80%81assert%20%E6%96%AD%E8%A8%80%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99" rel="nofollow"> 五、assert 断言的使用原则</a></p> 
<p id="%E5%85%AD%E3%80%81%E5%85%B1%E5%8B%89%C2%A0-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E5%85%B1%E5%8B%89%C2%A0" rel="nofollow">六、共勉 </a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2><span style="color:#0d0016;"><strong>一、前言</strong></span></h2> 
<blockquote> 
 <p>      在编写程序过程中，尤其是调试代码时，往往需要一个提醒<span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">代码漏洞/Bug</span></strong></span>的小助手，以便于程序员及时修改和完善代码。那么<span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">assert关键字</span></strong></span>就可以成为这个小助手。</p> 
</blockquote> 
<h2 id="%E4%BA%8C%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%20assert%20%3F%C2%A0"><span style="color:#0d0016;"><strong>二、什么是 assert ? </strong></span></h2> 
<blockquote> 
 <p><span style="color:#511b78;"><strong> 概念：C/C++</strong></span> 中的 <span style="color:#fe2c24;"><strong><code><span style="background-color:#fbd4d0;">assert</span></code></strong></span> 是一个<span style="color:#956fe7;"><strong>宏</strong></span>，用于在运行时检查一个条件是否为真，如果条件不满足，则运行时将终止程序的执行并输出一条错误信息。</p> 
</blockquote> 
<ul><li><span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">assert 宏</span></strong></span>定义在 <span style="color:#0d0016;"><strong>&lt;assert.h&gt; 或 &lt;cassert&gt;</strong></span> 头文件中，并接受一个参数，通常为一个语句。</li><li>如果这个语句的结果为 <span style="color:#0d0016;"><strong>false</strong></span>，<span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">assert</span></strong></span> 宏就会以<span style="color:#9c8ec1;"><strong>"Assertion failed: , file , line "的形式显示出错信息，然后使程序崩溃并终止运行。如果该语句的结果为 true，则 assert 宏不做任何操作。</strong></span></li></ul> 
<blockquote> 
 <p><span style="color:#511b78;"><strong>作用： </strong></span><span style="color:#fe2c24;"><strong><code><span style="background-color:#fbd4d0;">assert</span></code></strong></span> 宏的使用可以帮助程序员检查程序的正确性，并提供帮助定位错误的一种手段。通常在程序编写的测试与调试阶段使用 <span style="color:#fe2c24;"><strong><code><span style="background-color:#fbd4d0;">assert</span></code></strong></span> 来追踪程序执行中的错误，并在最终发布程序时关闭 <span style="color:#fe2c24;"><strong><code><span style="background-color:#fbd4d0;">assert</span></code></strong></span> 检查，以提升程序的运行效率。</p> 
</blockquote> 
<h2 id="%C2%A0%E4%B8%89%E3%80%81assert%20%E7%9A%84%E7%94%A8%E6%B3%95"><span style="color:#0d0016;"><strong> 三、assert 的用法</strong></span></h2> 
<blockquote> 
 <p><span style="color:#0d0016;"> <strong>语法：</strong></span></p> 
 <ul><li><span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">assert(condition);</span></strong></span></li><li><span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">condition：要判断的条件</span></strong></span></li></ul> 
</blockquote> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong> 说明：</strong></span><br>  </p> 
 <ul><li><span style="color:#0d0016;"><strong>a、如果condition判断结果为false，则程序就会停止执行。</strong></span></li><li><span style="color:#0d0016;"><strong>b、当程序停止执行时，assert就会断言失败，并输出一条程序的错误信息到控制台或日志文件中。</strong></span></li><li><span style="color:#0d0016;"><strong>c、assert关键字常常用于调试程序阶段，可以用来帮助程序员在程序出现异常或错误时，快速定位问题所在，以便于检查和就修改完善。</strong></span></li><li><span style="color:#0d0016;"><strong>d、而在程序正常部署后，assert一般就会被自动关闭。</strong></span></li></ul> 
</blockquote> 
<h2 id="%C2%A0%E5%9B%9B%E3%80%81assert%20%E6%A1%88%E4%BE%8B%E8%A7%A3%E6%9E%90"><span style="color:#0d0016;"><strong> 四、assert 案例解析</strong></span></h2> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong>案例1 ： </strong></span><span style="color:#956fe7;"><strong>比大小</strong></span></p> 
</blockquote> 
<pre><code class="hljs">#include &lt;cassert&gt;
#include &lt;iostream&gt;
using namespace std;

int main() {
    int a = 10, b = 20;
    assert(a &gt; b);    // 条件不成立，程序会终止
    cout &lt;&lt; a + b &lt;&lt; endl;
    return 0;
}
</code></pre> 
<p class="img-center"><img alt="" height="452" src="https://images2.imgbox.com/b4/0b/T0X8etVE_o.png" width="966"></p> 
<ul><li> 在这个例子中，条件 <span style="color:#fe2c24;"><strong><code><span style="background-color:#fbd4d0;">a &gt; b</span></code><span style="background-color:#fbd4d0;"> </span></strong></span>不成立，程序就会在 <span style="color:#fe2c24;"><strong><code><span style="background-color:#fbd4d0;">assert</span></code><span style="background-color:#fbd4d0;"> </span></strong></span>这个语句处崩溃，输出一条相应的错误信息。</li></ul> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong>案例2 ：</strong></span> <span style="color:#956fe7;"><strong>模拟 strlen() 函数 </strong></span></p> 
</blockquote> 
<pre><code class="hljs">/*例程1*/
#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;
#include &lt;string.h&gt;

//size_t --- unsigned int
size_t My_strlen(const char* str)//参数传数组首地址
{
	assert("str != NULL");//注意：这里我把断言取消了，要用时把双引号去掉即可
	//断言，判断是否传的空地址，及时报错纠正
	int count = 0;//计数
	//是假就不执行while循环
	//是真则执行，函数体
	//不断判断后加加(后置++，先用后加)，数组元素是否为字符串结束标志位'\0'
	while (*str != '\0')
	{
		str++;
		count++;
	}
	return count;
}
int main()
{
	char arr[] = "hello bit!!!";
	int len = My_strlen(arr);
	printf("%d\n", len);//12
	return 0;
}
</code></pre> 
<p class="img-center"><img alt="" height="463" src="https://images2.imgbox.com/9a/bb/DHoCDeaX_o.png" width="958"></p> 
<blockquote> 
 <p> <strong>小结</strong>：</p> 
 <ul><li><span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">a、断言需要引用头文件，&lt;assert.h&gt;</span></strong></span></li><li><span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">b、断言,作用是指出代码报错的位置/方便查找原因</span></strong></span></li></ul> 
</blockquote> 
<h2 id="%C2%A0%E4%BA%94%E3%80%81assert%20%E6%96%AD%E8%A8%80%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99"><span style="color:#0d0016;"><strong> 五、assert 断言的使用原则</strong></span></h2> 
<blockquote> 
 <p>        <span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">assert() </span></strong></span>是一个调试程序时经常使用的<span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;">宏</span></strong></span>，在程序运行时它计算括号内的表达式，如果表达式为<span style="color:#fe2c24;"><strong><span style="background-color:#fbd4d0;"> false (0)</span></strong></span>, 程序将报告错误，并终止执行。如果表达式不为0，则继续执行后面的语句。这个宏通常原来判断程序中是否出现了明显非法的数据，如果出现了终止程序以免导致严重后果，同时也便于查找错误。</p> 
</blockquote> 
<ul><li>（1）使用断言捕捉不应该发生的非法情况。不要混淆非法情况与错误情况之间的区别，后者是必然存在的并且是一定要作出处理的。</li><li>（2）使用断言对函数的参数进行确认。</li><li>（3）在编写函数时，要进行反复的考查，并且自问："我打算做哪些假定？"一旦确定了的假定，就要使用断言对假定进行检查。</li><li>（4）一般教科书都鼓励程序员们进行防错性的程序设计，但要记住这种编程风格会隐瞒错误。当进行防错性编程时，如果"不可能发生"的事情的确发生了，则要使用断言进行报警。</li></ul> 
<blockquote> 
 <p><span style="color:#fe2c24;"><strong>注意：<span style="background-color:#fbd4d0;">assert</span></strong></span><span style="background-color:#fbd4d0;"> </span>只有在 Debug 版本中才有效，如果编译为 Release 版本则被忽略。 </p> 
</blockquote> 
<h2 id="%E5%85%AD%E3%80%81%E5%85%B1%E5%8B%89%C2%A0"><span style="color:#0d0016;"><strong>六、共勉 </strong></span></h2> 
<p> <strong>以下就是我对 <span style="color:#956fe7;">assert 断言</span> 的理解，如果有不懂和发现问题的小伙伴，请在评论区说出来哦，同时我还会继续更新对<span style="color:#956fe7;">C++  vector 类</span>的理解，<span style="color:#956fe7;">请持续关注我哦！！！</span></strong>  </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/10/18/bskN4vtl_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0097de95b8ecf722eb14541fca815b96/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Flink RocksDB状态后端优化总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9205b20489787253436662eb4973d18d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java反应式框架Reactor中的Mono和Flux，2024年最新Java面试精讲</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>