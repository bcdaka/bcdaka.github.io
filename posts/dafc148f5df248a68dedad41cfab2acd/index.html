<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Mac上安装Spark apache-spark-3.5.1 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/dafc148f5df248a68dedad41cfab2acd/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="在Mac上安装Spark apache-spark-3.5.1">
  <meta property="og:description" content="安装spark的步骤较为简单，前提是要安装好Hadoop哦。
这里我使用brew来安装，如果你安装了homebrew直接在终端里输入brew install apache-spark然后等着就可以了（如果没有安装过brew的参考其他博主的内容去安装哦）
brew install apache-spark ==&gt; Auto-updating Homebrew... Adjust how often this is run with HOMEBREW_AUTO_UPDATE_SECS or disable with HOMEBREW_NO_AUTO_UPDATE. Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`). ==&gt; Auto-updated Homebrew! Updated 2 taps (homebrew/core and homebrew/cask). ==&gt; New Formulae ffmpeg@6 ==&gt; New Casks boltai You have 5 outdated formulae installed. ==&gt; Fetching dependencies for apache-spark: libx11 and openjdk@17 ==&gt; Fetching libx11 ==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/libx11-1.8.9.arm64_ ######################################################################### 100.0% ==&gt; Fetching openjdk@17 ==&gt; Downloading https://mirrors.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-11T22:22:24+08:00">
    <meta property="article:modified_time" content="2024-04-11T22:22:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Mac上安装Spark apache-spark-3.5.1</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>安装spark的步骤较为简单，前提是要安装好Hadoop哦。</p> 
<p>这里我使用brew来安装，如果你安装了homebrew直接在终端里输入brew install apache-spark然后等着就可以了（如果没有安装过brew的参考其他博主的内容去安装哦）</p> 
<pre><code>brew install apache-spark


==&gt; Auto-updating Homebrew...
Adjust how often this is run with HOMEBREW_AUTO_UPDATE_SECS or disable with
HOMEBREW_NO_AUTO_UPDATE. Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
==&gt; Auto-updated Homebrew!
Updated 2 taps (homebrew/core and homebrew/cask).
==&gt; New Formulae
ffmpeg@6
==&gt; New Casks
boltai

You have 5 outdated formulae installed.

==&gt; Fetching dependencies for apache-spark: libx11 and openjdk@17
==&gt; Fetching libx11
==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/libx11-1.8.9.arm64_
######################################################################### 100.0%
==&gt; Fetching openjdk@17
==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/openjdk%4017-17.0.1
######################################################################### 100.0%
==&gt; Fetching apache-spark
==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/apache-spark-3.5.1.
######################################################################### 100.0%
==&gt; Installing dependencies for apache-spark: libx11 and openjdk@17
==&gt; Installing apache-spark dependency: libx11
==&gt; Pouring libx11-1.8.9.arm64_sonoma.bottle.tar.gz
🍺  /opt/homebrew/Cellar/libx11/1.8.9: 1,042 files, 7.0MB
==&gt; Installing apache-spark dependency: openjdk@17
==&gt; Pouring openjdk@17-17.0.10.arm64_sonoma.bottle.tar.gz
🍺  /opt/homebrew/Cellar/openjdk@17/17.0.10: 635 files, 304.9MB
==&gt; Installing apache-spark
==&gt; Pouring apache-spark-3.5.1.all.bottle.tar.gz
🍺  /opt/homebrew/Cellar/apache-spark/3.5.1: 1,823 files, 423.3MB
==&gt; Running `brew cleanup apache-spark`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
</code></pre> 
<p> 上面这个就是用brew安装好的样子</p> 
<pre><code>cd /opt/homebrew/Cellar/apache-spark/3.5.1 </code></pre> 
<p>切换到spark3.5.1的目录下，然后再切换到 libexec/conf 下面先复制一份 spark-env.sh.template 文件然后重命名（用cp命令）为spark-env.sh</p> 
<pre><code>cp spark-env.sh.template spark-env.sh
         
ls

fairscheduler.xml.template	spark-defaults.conf.template	workers.template
log4j2.properties.template	spark-env.sh
metrics.properties.template	spark-env.sh.template</code></pre> 
<p>编辑spark-env.sh文件(用：vim spark-env.sh)，在第一行添加以下配置信息:</p> 
<pre><code>export SPARK_DIST_CLASSPATH=$(/opt/homebrew/Cellar/hadoop/3.4.0/bin/hadoop classpath)</code></pre> 
<p>自己看看自己的Hadoop的位置在哪里哦，就是目录一直要到bin下的Hadoop</p> 
<p>我因为也是使用brew下载的Hadoop所以是在Homebrew目录下面，至于怎么用brew怎么装Hadoop在其他博主有讲解</p> 
<p>配置完成后就可以直接使用了，就不需要像Hadoop运行启动命令。<br> 通过运行Spark自带的示例，验证Spark是否安装成功。</p> 
<pre><code>/opt/homebrew/Cellar/apache-spark/3.5.1/bin</code></pre> 
<p>切换到bin目录下执行</p> 
<pre><code>run-example SparkPi</code></pre> 
<p>如果成功会输出很多这样的运行信息</p> 
<pre><code>24/04/11 21:32:32 INFO SparkContext: Running Spark version 3.5.1
24/04/11 21:32:32 INFO SparkContext: OS info Mac OS X, 14.4.1, aarch64
24/04/11 21:32:32 INFO SparkContext: Java version 1.8.0_401
24/04/11 21:32:32 INFO ResourceUtils: ==============================================================
24/04/11 21:32:32 INFO ResourceUtils: No custom resources configured for spark.driver.
24/04/11 21:32:32 INFO ResourceUtils: ==============================================================
24/04/11 21:32:32 INFO SparkContext: Submitted application: Spark Pi
24/04/11 21:32:32 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)
24/04/11 21:32:32 INFO ResourceProfile: Limiting resource is cpu
24/04/11 21:32:32 INFO ResourceProfileManager: Added ResourceProfile id: 0
</code></pre> 
<p>但是那个输出结果不容易找到，这里我使用管道和grep命令进行过滤</p> 
<p>命令中的 2&gt;&amp;1 可以将所有的信息都输出到 标志输出（stdout） 中，否则的话由于输出日志的性质（会有WARN之类的stderr），还是会输出到屏幕中</p> 
<pre><code>run-example SparkPi 2&gt;&amp;1 | grep "Pi is"


Pi is roughly 3.1475157375786877
</code></pre> 
<p>如果是输出这样就可以啦</p> 
<h4>这里我们再启动下Spark Shell试试</h4> 
<p>我们在还是和上面一样在bin目录下执行spark-shell</p> 
<p>启动spark-shell后，会自动创建名为sc的SparkContext对象和名为spark的SparkSession对象</p> 
<p>就像这样</p> 
<pre><code class="language-cs">Welcome to
      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  '_/
   /___/ .__/\_,_/_/ /_/\_\   version 3.5.1
      /_/
         
Using Scala version 2.12.18 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_401)
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt;</code></pre> 
<p>到这里在Mac上安装Spark就安装完成了</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/223806e7297f5ac0511a4114bea19142/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">文生图——python调用stable diffusionAPI生成有趣的图像</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/77fc9b5e29f7ba93dfb2a645234059c8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">iPhone手机使用：微信提示“运行内存不足导致该小程序无法使用“解决方法_苹果手机微信内存不足</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>