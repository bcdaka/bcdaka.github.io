<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flink学习（八）-Flink 集群搭建 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9905c62c7f5a439920b8b6e85e9bf061/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Flink学习（八）-Flink 集群搭建">
  <meta property="og:description" content="1，准备三台机器 装好 jdk 等必要的组件。
注意，由于本身没有额外的 dns做转发。因此，需要在每台机器的 host 文件里，配置好相关 ip
具体方法
vim /etc/hosts 2，flink做配置 2.1 资源规划 节点服务器
node01
node02
node03
角色
JobManager
TaskManager
TaskManager
TaskManager
2.2 下载 flink-1.19.0-bin-scala_2.12.tgz的包，并上传解压 下载地址
解压命令
tar xzvf flink-1.19.0-bin-scala_2.12.tgz 2.3 编辑相关配置信息 分别在 node01 、 node02以及 node03上
cd flink-1.19.0/conf vim config.yaml # JobManager节点地址.
jobmanager.rpc.address: node01
jobmanager.bind-host: 0.0.0.0
rest.address: node01
rest.bind-address: 0.0.0.0
# TaskManager节点地址.需要配置为当前机器名
taskmanager.bind-host: 0.0.0.0
taskmanager.host: node01
vim workers node01
node02
node03 vim masters node01:8081
注意，在 node02 和 node03节点上，只需要编辑对应的 config.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-23T16:18:27+08:00">
    <meta property="article:modified_time" content="2024-04-23T16:18:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flink学习（八）-Flink 集群搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1，准备三台机器</h2> 
<p>装好 jdk 等必要的组件。</p> 
<p><span style="color:#fe2c24;">注意，由于本身没有额外的 dns做转发。因此，需要在每台机器的 host 文件里，配置好相关 ip</span></p> 
<p>具体方法</p> 
<pre><code class="language-bash">vim /etc/hosts</code></pre> 
<p class="img-center"><img alt="" height="72" src="https://images2.imgbox.com/43/ac/LXZ5Z4h4_o.png" width="208"></p> 
<p> </p> 
<h2>2，flink做配置</h2> 
<h3>2.1 资源规划</h3> 
<table border="1" cellspacing="0" style="margin-left:5.4pt;"><tbody><tr><td style="vertical-align:top;width:79.65pt;"> <p style="margin-left:.0001pt;text-align:justify;"><strong><strong>节点服务器</strong></strong></p> </td><td style="vertical-align:top;width:113.4pt;"> <p style="margin-left:.0001pt;text-align:justify;"><strong>node01</strong></p> </td><td style="vertical-align:top;width:115.7pt;"> <p style="margin-left:.0001pt;text-align:justify;"><strong>node02</strong></p> </td><td style="vertical-align:top;width:116.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"><strong>node03</strong></p> </td></tr><tr><td style="background-color:#f1f1f1;width:79.65pt;"> <p style="margin-left:.0001pt;text-align:justify;"><strong><strong>角色</strong></strong></p> </td><td style="background-color:#f1f1f1;width:113.4pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="color:#ff0000;">JobManager</span></p> <p style="margin-left:.0001pt;text-align:justify;">TaskManager</p> </td><td style="background-color:#f1f1f1;width:115.7pt;"> <p style="margin-left:.0001pt;text-align:justify;">TaskManager</p> </td><td style="background-color:#f1f1f1;width:116.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">TaskManager</p> </td></tr></tbody></table> 
<h3>2.2 下载 flink-1.19.0-bin-scala_2.12.tgz的包，并上传解压</h3> 
<p><a class="link-info" href="https://flink.apache.org/downloads/" rel="nofollow" title="下载地址">下载地址</a></p> 
<p>解压命令</p> 
<pre><code class="language-bash">tar xzvf flink-1.19.0-bin-scala_2.12.tgz</code></pre> 
<p><img alt="" height="212" src="https://images2.imgbox.com/df/8a/ZrREa4v8_o.png" width="913"> </p> 
<h3>2.3 编辑相关配置信息</h3> 
<p>分别在<span style="color:#fe2c24;"> node01 、 node02以及 node03</span>上</p> 
<pre><code class="language-bash">cd flink-1.19.0/conf
vim config.yaml</code></pre> 
<blockquote> 
 <p><span style="color:#000000;"># J</span><span style="color:#000000;">obManager节点地址</span><span style="color:#000000;">.</span></p> 
 <p><span style="color:#ff0000;">jobmanager.rpc.address: node01</span></p> 
 <p><span style="color:#ff0000;">jobmanager.bind-host: </span><span style="color:#ff0000;">0.0.0.0</span></p> 
 <p><span style="color:#ff0000;">rest.address: node01</span></p> 
 <p><span style="color:#ff0000;">rest.bind-address: </span><span style="color:#ff0000;">0.0.0.0</span></p> 
 <p><span style="color:#000000;"># </span><span style="color:#000000;">TaskManager节点地址</span><span style="color:#000000;">.</span><span style="color:#000000;">需要配置为当前机器名</span></p> 
 <p><span style="color:#ff0000;">taskmanager.bind-host: </span><span style="color:#ff0000;">0.0.0.0</span></p> 
 <p><span style="color:#ff0000;">taskmanager.host: node01</span></p> 
</blockquote> 
<pre><code class="language-bash">vim workers</code></pre> 
<blockquote> 
 <p><span style="color:#fe2c24;">node01</span></p> 
 <p><span style="color:#ff0000;">node02</span></p> 
 <p><span style="color:#ff0000;">node03</span> </p> 
</blockquote> 
<pre><code class="language-bash">vim masters</code></pre> 
<blockquote> 
 <p><span style="color:#fe2c24;"> node01</span><span style="color:#ff0000;">:8081</span></p> 
</blockquote> 
<p>注意，在 node02 和 node03节点上，只需要编辑对应的 config.yaml 文件中的<span style="color:#ff0000;">taskmanager.host</span><span style="color:#494949;">属性，node02改为 node02，node03 改为 node03.</span></p> 
<p><img alt="" height="227" src="https://images2.imgbox.com/2f/bf/LcjnW8om_o.png" width="266"><img alt="" height="225" src="https://images2.imgbox.com/76/22/SjvcuaaU_o.png" width="274"></p> 
<h3>2.4依次启动三台 flink</h3> 
<pre><code class="language-bash">bin/start-cluster.sh</code></pre> 
<h2>3，访问 webUI </h2> 
<p>访问 jobManager 所在的 8081 端口，即可打开相关管理页面</p> 
<p><a href="http://node01:8081/#/overview" rel="nofollow" title="http://node01:8081/#/overview">http://node01:8081/#/overview</a></p> 
<h2><img alt="" height="495" src="https://images2.imgbox.com/34/d1/AOxBlvyH_o.png" width="1200">4，问题</h2> 
<p>如果外部机器无法访问上述地址。可能是防火墙的原因</p> 
<p>放通 8081 的防火墙就行。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac5ef8d46c5d78d110e152bac361af88/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">下载及安装PHP，composer，phpstudy,thinkPHP6.0框架</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6dfeebce3c3a709f02d7595a52be89c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">利用ollama和open-webui本地部署通义千问Qwen1.5-7B-Chat模型</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>