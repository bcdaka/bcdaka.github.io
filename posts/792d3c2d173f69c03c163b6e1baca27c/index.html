<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】用红黑树封装map、set - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/792d3c2d173f69c03c163b6e1baca27c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】用红黑树封装map、set">
  <meta property="og:description" content="用红黑树封装map、set 1. 红黑树1.1 模板参数的控制1.1.1 Value1.1.2 KeyOfValue 1.2 正向迭代器1.2.1 构造函数1.2.2 begin()&#43;end()1.2.3 operator&#43;&#43;()1.2.4 operator--()1.2.5 operator*()1.2.6 operator-&gt;()1.2.7 operator==()1.2.8 operator!=()1.2.9 总代码 1.3 反向迭代器1.3.1 rbegin()&#43;rend()1.3.2 总代码 1.4 find()1.5 insert() 2. Map2.1 operator[] 3. typename作用4. 完整代码4.1 Map.h4.2 Set.h4.3 RBTree.h 1. 红黑树 set是K模型，map是KV模型，二者底层都是使用红黑树来实现的，所以我们可以将红黑树设置为模板，即：set、map复用同一个类模板的红黑树。 1.1 模板参数的控制 1.1.1 Value Value决定你是k模型的set、还是KV模型的map。 enum Color { //枚举，一一列举出事物具有的所有可能 Red, //枚举常量，给枚举变量进行赋值 Black, }; template&lt;class T&gt;//红黑树的节点 struct RBTreeNode { typedef RBTreeNode&lt;T&gt; Node; //三叉链-》优点：便于查找孩子、父亲节点 Node* _left; //该节点的左孩子 Node* _right; //该节点的右孩子 Node* _parent; //该节点的父亲，便于向上更新 T _data; Color _col; RBTreeNode(const T&amp; data, Color col = Red) //构造函数 :_data(data) , _left(nullptr) , _right(nullptr) , _parent(nullptr) , _col(col) //默认新插入节点的颜色为红色 { } }; //Value决定你是k模型的set、还是KV模型的map template&lt;class K, class T, class KeyOfT&gt; class RBTree { public: typedef RBTreeNode&lt;T&gt; Node; }; template&lt;class K&gt; class set{ //K模型 public: private: //set中的key不允许被修改 RBTree&lt;K, const K, SetKeyOfT&gt; _t; //红黑树对象 }; } template&lt;class K, class V&gt; class map { //KV模型 public: private: //map中的key不允许被修改 RBTree&lt;K, pair&lt;const K, V&gt;, MapKeyOfT&gt; _t; //红黑树对象 }; }; 1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-08T10:27:05+08:00">
    <meta property="article:modified_time" content="2024-06-08T10:27:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】用红黑树封装map、set</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>用红黑树封装map、set</h4> 
 <ul><li><a href="#1__1" rel="nofollow">1. 红黑树</a></li><li><ul><li><a href="#11__4" rel="nofollow">1.1 模板参数的控制</a></li><li><ul><li><a href="#111_Value_5" rel="nofollow">1.1.1 Value</a></li><li><a href="#112_KeyOfValue_67" rel="nofollow">1.1.2 KeyOfValue</a></li></ul> 
   </li><li><a href="#12__94" rel="nofollow">1.2 正向迭代器</a></li><li><ul><li><a href="#121__96" rel="nofollow">1.2.1 构造函数</a></li><li><a href="#122_beginend_106" rel="nofollow">1.2.2 begin()+end()</a></li><li><a href="#123_operator_131" rel="nofollow">1.2.3 operator++()</a></li><li><a href="#124_operator_167" rel="nofollow">1.2.4 operator--()</a></li><li><a href="#125_operator_197" rel="nofollow">1.2.5 operator*()</a></li><li><a href="#126_operator_205" rel="nofollow">1.2.6 operator-&gt;()</a></li><li><a href="#127_operator_213" rel="nofollow">1.2.7 operator==()</a></li><li><a href="#128_operator_221" rel="nofollow">1.2.8 operator!=()</a></li><li><a href="#129__229" rel="nofollow">1.2.9 总代码</a></li></ul> 
   </li><li><a href="#13__319" rel="nofollow">1.3 反向迭代器</a></li><li><ul><li><a href="#131_rbeginrend_320" rel="nofollow">1.3.1 rbegin()+rend()</a></li><li><a href="#132__344" rel="nofollow">1.3.2 总代码</a></li></ul> 
   </li><li><a href="#14_find_390" rel="nofollow">1.4 find()</a></li><li><a href="#15_insert_414" rel="nofollow">1.5 insert()</a></li></ul> 
  </li><li><a href="#2_Map_538" rel="nofollow">2. Map</a></li><li><ul><li><a href="#21_operator_540" rel="nofollow">2.1 operator[]</a></li></ul> 
  </li><li><a href="#3_typename_554" rel="nofollow">3. typename作用</a></li><li><a href="#4__563" rel="nofollow">4. 完整代码</a></li><li><ul><li><a href="#41_Maph_564" rel="nofollow">4.1 Map.h</a></li><li><a href="#42_Seth_631" rel="nofollow">4.2 Set.h</a></li><li><a href="#43_RBTreeh_689" rel="nofollow">4.3 RBTree.h</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1__1"></a>1. 红黑树</h2> 
<ul><li>set是K模型，map是KV模型，二者底层都是使用红黑树来实现的，所以我们可以将红黑树设置为模板，即：set、map复用同一个类模板的红黑树。</li></ul> 
<h3><a id="11__4"></a>1.1 模板参数的控制</h3> 
<h4><a id="111_Value_5"></a>1.1.1 Value</h4> 
<ul><li>Value决定你是k模型的set、还是KV模型的map。</li></ul> 
<p><img src="https://images2.imgbox.com/f1/f9/mh1G9m7b_o.png" alt="map、set的模板参数value.png"></p> 
<pre><code class="prism language-cpp"><span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//枚举，一一列举出事物具有的所有可能</span>
	Red<span class="token punctuation">,</span>  <span class="token comment">//枚举常量，给枚举变量进行赋值</span>
	Black<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token comment">//红黑树的节点</span>
<span class="token keyword">struct</span> <span class="token class-name">RBTreeNode</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> RBTreeNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>

	<span class="token comment">//三叉链-》优点：便于查找孩子、父亲节点</span>
	Node<span class="token operator">*</span> _left<span class="token punctuation">;</span>      <span class="token comment">//该节点的左孩子</span>
	Node<span class="token operator">*</span> _right<span class="token punctuation">;</span>    <span class="token comment">//该节点的右孩子</span>
	Node<span class="token operator">*</span> _parent<span class="token punctuation">;</span>  <span class="token comment">//该节点的父亲，便于向上更新</span>
	T _data<span class="token punctuation">;</span>
	Color _col<span class="token punctuation">;</span>

	<span class="token function">RBTreeNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">,</span> Color col <span class="token operator">=</span> Red<span class="token punctuation">)</span>  <span class="token comment">//构造函数</span>
		<span class="token operator">:</span><span class="token function">_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_left</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_right</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_parent</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_col</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>  <span class="token comment">//默认新插入节点的颜色为红色</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<pre><code class="prism language-cpp"><span class="token comment">//Value决定你是k模型的set、还是KV模型的map</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token operator">&gt;</span> 
<span class="token keyword">class</span> <span class="token class-name">RBTree</span> <span class="token punctuation">{<!-- --></span>  
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> RBTreeNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">set</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//K模型</span>
<span class="token keyword">public</span><span class="token operator">:</span>   
       
<span class="token keyword">private</span><span class="token operator">:</span>  <span class="token comment">//set中的key不允许被修改</span>
		RBTree<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span> _t<span class="token punctuation">;</span>  <span class="token comment">//红黑树对象</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">map</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">//KV模型  </span>
<span class="token keyword">public</span><span class="token operator">:</span>

<span class="token keyword">private</span><span class="token operator">:</span>   <span class="token comment">//map中的key不允许被修改</span>
		RBTree<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span> _t<span class="token punctuation">;</span>  <span class="token comment">//红黑树对象</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p></p> 
<h4><a id="112_KeyOfValue_67"></a>1.1.2 KeyOfValue</h4> 
<ul><li>KeyOfT : 取出Value对象中的key。</li></ul> 
<p><img src="https://images2.imgbox.com/0c/76/53lkCeKm_o.png" alt="image.png"></p> 
<pre><code class="prism language-cpp"><span class="token comment">// KeyOfT : 取出Value对象中的key</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token operator">&gt;</span> 
<span class="token keyword">class</span> <span class="token class-name">RBTree</span> <span class="token punctuation">{<!-- --></span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">SetKeyOfT</span><span class="token punctuation">{<!-- --></span>   
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> key<span class="token punctuation">;</span>  <span class="token comment">//key</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">MapKeyOfT</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">;</span>  <span class="token comment">//pair中的key</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p></p> 
<h3><a id="12__94"></a>1.2 正向迭代器</h3> 
<p></p> 
<h4><a id="121__96"></a>1.2.1 构造函数</h4> 
<blockquote> 
 <p>💡RBTreeIterator(Node* node) ；</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token function">RBTreeIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">)</span> <span class="token comment">//构造函数，单参数构造函数支持隐式类型转化</span>
		<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>
</code></pre> 
<ul><li>Tips : 单参数构造函数支持隐式类型转换 Node*-&gt;iterator 。</li></ul> 
<h4><a id="122_beginend_106"></a>1.2.2 begin()+end()</h4> 
<blockquote> 
 <p>💡iterator begin( ) ；</p> 
</blockquote> 
<ul><li>功能：返回红黑树中最左节点(左孩子必为空)的迭代器。</li><li>Tips：set、map对象为非const对象，就调用begin()、end()。</li></ul> 
<pre><code class="prism language-cpp">iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//红黑树最左节点</span>
<span class="token punctuation">{<!-- --></span> 
	Node<span class="token operator">*</span> subLeft <span class="token operator">=</span> _root<span class="token punctuation">;</span>   
	<span class="token keyword">while</span> <span class="token punctuation">(</span>subLeft <span class="token operator">&amp;&amp;</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
		subLeft <span class="token operator">=</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>subLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>	
</code></pre> 
<blockquote> 
 <p>💡iterator end( ) ；</p> 
</blockquote> 
<ul><li>功能：返回最后一个元素的下一个的迭代器(空指针)。</li></ul> 
<pre><code class="prism language-cpp">iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//空指针 左闭右开[begin,end)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4e/22/1uLjzm0W_o.png" alt="image.png"></p> 
<h4><a id="123_operator_131"></a>1.2.3 operator++()</h4> 
<pre><code class="prism language-cpp"><span class="token comment">/*1.右不为空，下一个为该节点右子树的最左节点 ;
	* 2.右为空，说明该节点所在的子树已经访问完了，若该节点为父亲的右，说明该父亲所在的子树也访问完了，继续往上找，
	* 直到该节点为父亲的左，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲左*/</span>
Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//中序 左、根、右</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>  <span class="token comment">//1</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subLeft <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
			subLeft <span class="token operator">=</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

		_node <span class="token operator">=</span> subLeft<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>  <span class="token comment">//2</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> cur <span class="token operator">=</span> _node<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_left <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>中序遍历，左、根、右。<br> 情况一：右不为空，下一个为该节点右子树的最左节点 ;<br> 情况二：右为空，说明该节点所在的子树已经访问完了，若该节点为父亲的右，说明该父亲所在的子树也访问完了，继续往上找，直到该节点为父亲的左，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲左。</li></ul> 
<p><img src="https://images2.imgbox.com/9f/f8/SfJTpli7_o.png" alt="image.png"><br> </p> 
<h4><a id="124_operator_167"></a>1.2.4 operator–()</h4> 
<pre><code class="prism language-cpp"><span class="token comment">/*1.左不为空，下一个为该节点左子树的最右节点 ;
	* 2.左为空，说明该节点所在的子树已经访问完了，若该节点为父亲的左，说明该父亲所在的子树也访问完了，继续往上找，
	* 直到该节点为父亲的右，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲右*/</span>
Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//中序 左、根、右  --与++逻辑相反</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>  <span class="token comment">//1</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subRight <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>
			subRight <span class="token operator">=</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		_node <span class="token operator">=</span> subRight<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>  <span class="token comment">//2</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> cur <span class="token operator">=</span> _node<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_right <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/8b/Cc7v69C3_o.png" alt="image.png"></p> 
<h4><a id="125_operator_197"></a>1.2.5 operator*()</h4> 
<pre><code class="prism language-cpp">Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h4><a id="126_operator_205"></a>1.2.6 operator-&gt;()</h4> 
<pre><code class="prism language-cpp">Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//结构体指针，data为结构体</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h4><a id="127_operator_213"></a>1.2.7 operator==()</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _node <span class="token operator">==</span> rb<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h4><a id="128_operator_221"></a>1.2.8 operator!=()</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _node <span class="token operator">!=</span> rb<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h4><a id="129__229"></a>1.2.9 总代码</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token operator">&gt;</span> 
<span class="token keyword">struct</span> <span class="token class-name">RBTreeIterator</span>   <span class="token comment">//红黑树的正向迭代器</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> RBTreeNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> RBTreeIterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> Ptr<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>

	Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>

	<span class="token function">RBTreeIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">)</span> <span class="token comment">//构造函数，单参数构造函数支持隐式类型转化</span>
		<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

	Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//结构体指针，data为结构体</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*1.右不为空，下一个为该节点右子树的最左节点 ;
	* 2.右为空，说明该节点所在的子树已经访问完了，若该节点为父亲的右，说明该父亲所在的子树也访问完了，继续往上找，
	* 直到该节点为父亲的左，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲左*/</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//中序 左、根、右</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>  <span class="token comment">//1</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> subLeft <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
				subLeft <span class="token operator">=</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

			_node <span class="token operator">=</span> subLeft<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>  <span class="token comment">//2</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> _node<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_left <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*1.左不为空，下一个为该节点左子树的最右节点 ;
	* 2.左为空，说明该节点所在的子树已经访问完了，若该节点为父亲的左，说明该父亲所在的子树也访问完了，继续往上找，
	* 直到该节点为父亲的右，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲右*/</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//中序 左、根、右  --与++逻辑相反</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>  <span class="token comment">//1</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> subRight <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>
				subRight <span class="token operator">=</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

			_node <span class="token operator">=</span> subRight<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>  <span class="token comment">//2</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> _node<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_right <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">!=</span> rb<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">==</span> rb<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p></p> 
<h3><a id="13__319"></a>1.3 反向迭代器</h3> 
<h4><a id="131_rbeginrend_320"></a>1.3.1 rbegin()+rend()</h4> 
<blockquote> 
 <p>💡reverse_iterator rbegin( ) ；</p> 
</blockquote> 
<ul><li>功能：返回红黑树中最右节点(右孩子必为空)的迭代器。</li></ul> 
<pre><code class="prism language-cpp">reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//红黑树最右节点，因为此处反向迭代器*，是直接调用正向迭代器* [rbegin,erend)</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> subRight <span class="token operator">=</span> _root<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>subRight <span class="token operator">&amp;&amp;</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>
		subRight <span class="token operator">=</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span>subRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>💡reverse_iterator rend( ) ；</p> 
</blockquote> 
<ul><li>功能：返回第一个元素的前一个的迭代器(空指针)。</li></ul> 
<pre><code class="prism language-cpp">reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h4><a id="132__344"></a>1.3.2 总代码</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">iterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">ReverseIterator</span>  <span class="token comment">//红黑树的反向迭代器——适配器 begin = rend、end = rbegin</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> ReverseIterator<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> Ptr<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>  
	iterator _it<span class="token punctuation">;</span>   <span class="token comment">//适配器</span>

	<span class="token function">ReverseIterator</span><span class="token punctuation">(</span>iterator it<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_it</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

	Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">*</span>_it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>
	<span class="token punctuation">}</span>

	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">--</span>_it<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">++</span>_it<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _it <span class="token operator">==</span> rb<span class="token punctuation">.</span>_it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _it <span class="token operator">!=</span> rb<span class="token punctuation">.</span>_it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p></p> 
<h3><a id="14_find_390"></a>1.4 find()</h3> 
<blockquote> 
 <p>💡iterator find(const K&amp; key) ;</p> 
</blockquote> 
<ul><li>功能：查找。</li><li>若key在红黑树中，则返回树中与key值相等元素的迭代器，否则，就返回end( )。</li></ul> 
<pre><code class="prism language-cpp">iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>  <span class="token comment">//查找  模板参数K的作用</span>
<span class="token punctuation">{<!-- --></span>
	KeyOfT kot<span class="token punctuation">;</span>

	Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>  <span class="token comment">//先按照二叉搜索树的方式插入</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> key<span class="token punctuation">)</span>  <span class="token comment">//通仿函数对象调用operator()来获取T中的key</span>
			cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&gt;</span> key<span class="token punctuation">)</span>
			cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//找到了</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//找不到</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h3><a id="15_insert_414"></a>1.5 insert()</h3> 
<blockquote> 
 <p>💡pair&lt;iterator，bool&gt; insert(const T&amp; data) ;</p> 
</blockquote> 
<ul><li>功能：向红黑树中插入data。</li></ul> 
<p><img src="https://images2.imgbox.com/1e/a5/vklAnkWe_o.png" alt="image.png"></p> 
<ul><li>insert返回值为pair&lt;iterator, bool&gt;,若key(set的key、map的pair的first)在树中存在，因为搜索树中不能出现重复的键值key，所以pair::first指向在树中与key值相等的迭代器，pair::second为false。若key在树中不存在，pair::first指向在树中新插入元素的迭代器，pair::second为true。insert相当于查找。</li></ul> 
<pre><code class="prism language-cpp">pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>  <span class="token comment">//插入  </span>
<span class="token punctuation">{<!-- --></span>   <span class="token comment">//不能使用引用放回，因为返回值作用域为栈区，传值返回</span>
	KeyOfT kot<span class="token punctuation">;</span>  <span class="token comment">//仿函数类创建的对象，对象去调用operator()</span>

	Node<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
	Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>  <span class="token comment">//先按照二叉搜索树的方式插入</span>
    <span class="token punctuation">{<!-- --></span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//通仿函数对象调用operator()来获取T中的key值</span>
    	<span class="token punctuation">{<!-- --></span>
    		parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
    		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    	<span class="token punctuation">{<!-- --></span>
    		parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
    		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">else</span>
    	<span class="token punctuation">{<!-- --></span>
    		<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//插入节点已存在，插入失败，返回在树中与该节点值相同的迭代器</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    cur <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//注意 insert</span>
		
	Node<span class="token operator">*</span> newnode <span class="token operator">=</span> cur<span class="token punctuation">;</span>  <span class="token comment">//非空树，插入成功，因为要做旋转处理，会导致cur值发生改变，需提前将新节点的位置存储起来</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token comment">//空树</span>
	<span class="token punctuation">{<!-- --></span>
		_root <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		_root<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>  <span class="token comment">//跟节点为黑</span>
		<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>_root<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//空树，插入成功，返回新插入节点在树中的迭代器</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> cur<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> cur<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cur<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>  <span class="token comment">//记录当前节点的父亲</span>

	<span class="token comment">//更新颜色</span>
	<span class="token comment">//插入结束：1.插入节点的父亲是黑色，因为插入前该树就为红黑树 2.情况一处理完后，cur为根节点，且为黑色</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_col <span class="token operator">==</span> Red<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token comment">//爷爷一定存在，因为c为红，p为红，所以p一定不是根节点，且一定有父节点</span>
		Node<span class="token operator">*</span> grandfather <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> grandfather<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>  <span class="token comment">//旋转需要确定方向</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> uncle <span class="token operator">=</span> grandfather<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>uncle <span class="token operator">&amp;&amp;</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">==</span> Red<span class="token punctuation">)</span> <span class="token comment">//情况一：叔叔存在且为红-&gt;无方向(p、u为g的任意边，c为p的任一边)</span>
			<span class="token punctuation">{<!-- --></span>  <span class="token comment">//cur可能为新增节点，也可能一开始为黑色，cur的子树(下一层为红，下一层为新插入节点)在调整过程中将cur由黑变为红</span>
				parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span> <span class="token comment">//p、u变为黑，g变为红</span>
				grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>

				<span class="token comment">//g可能为根节点(更新结束)，也可能为子树(继续向上更新)</span>
				cur <span class="token operator">=</span> grandfather<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>  <span class="token comment">//情况二：叔叔不存在 或者 叔叔存在且为黑</span>
			<span class="token punctuation">{<!-- --></span>  <span class="token comment">//叔叔不存在，cur为新增节点 或 cur原来为黑，经子树调整由黑变红</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> cur<span class="token punctuation">)</span>  <span class="token comment">//左左——右单旋</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">RotateR</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
					parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span> <span class="token comment">//p变为黑，g变为红</span>
					grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>    <span class="token comment">//左右——左右单旋 </span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">RotateR</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
					cur<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>  <span class="token comment">//c变黑，g变红</span>
					grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">//更新结束：3.旋转+颜色处理后就是红黑树了</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> uncle <span class="token operator">=</span> grandfather<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>uncle <span class="token operator">&amp;&amp;</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">==</span> Red<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>
				grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>

				cur <span class="token operator">=</span> grandfather<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_right <span class="token operator">==</span> cur<span class="token punctuation">)</span>  <span class="token comment">//右右——左单旋</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">RotateL</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
					parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>
					grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>   <span class="token comment">//右左——右左单旋</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">RotateL</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
					cur<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>
					grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	_root<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>  <span class="token comment">//g为根，颜色变为黑，更新结束</span>
	<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>newnode<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//情况一，插入节点的父亲为黑，插入结束</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h2><a id="2_Map_538"></a>2. Map</h2> 
<p></p> 
<h3><a id="21_operator_540"></a>2.1 operator[]</h3> 
<blockquote> 
 <p>💡V&amp; operator[ ](const K&amp; key) ;</p> 
</blockquote> 
<ul><li>功能：访问与key相对应的value值。即可读又可写。</li><li>原理：operator[ ]底层是通过调用insert( )将键值队插入到map中。如果key存在，插入失败，insert返回与map中key值相同元素的迭代器。如果key不存在，插入成功，insert返回在map中新插入元素的迭代器。operator[ ]最后返回与key值相对应的value值的引用。</li><li>operator[ ] 具有插入、查找、插入+修改、查找+修改功能。</li></ul> 
<pre><code class="prism language-cpp">V<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span> <span class="token comment">//功能:查找+修改、插入+修改</span>
<span class="token punctuation">{<!-- --></span>
	pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> ret <span class="token operator">=</span> _t<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">.</span>first<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p></p> 
<h2><a id="3_typename_554"></a>3. typename作用</h2> 
<ol><li>使用域作用限定符(: : )的两种情况：静态变量、类中typedef的类型。</li><li>使用typename表示: :后面为类型，不是静态成员</li></ol> 
<pre><code class="prism language-cpp"><span class="token comment">//使用::两种情况：静态变量、类中typedef的类型  typename表示::前面为类型，不是静态成员</span>
<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">RBTree</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator iterator<span class="token punctuation">;</span> 
</code></pre> 
<p></p> 
<h2><a id="4__563"></a>4. 完整代码</h2> 
<h3><a id="41_Maph_564"></a>4.1 Map.h</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> <span class="token expression"><span class="token number">1</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"RBTree.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>

<span class="token keyword">namespace</span> zzx <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
	<span class="token keyword">class</span> <span class="token class-name">map</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">//KV模型  </span>
	<span class="token keyword">public</span><span class="token operator">:</span>

		<span class="token keyword">struct</span> <span class="token class-name">MapKeyOfT</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">;</span>  <span class="token comment">//pair中的key</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">//使用::两种情况：静态变量、类中typedef的类型  typename表示::前面为类型，不是静态成员</span>
		<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">RBTree</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator iterator<span class="token punctuation">;</span>   <span class="token comment">//正向迭代器</span>
		<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">RBTree</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>reverse_iterator reverse_iterator<span class="token punctuation">;</span>  <span class="token comment">//反向迭代器</span>

		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>  <span class="token comment">//查找</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span>pair<span class="token operator">&lt;</span><span class="token keyword">const</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>  <span class="token comment">//插入</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		V<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span> <span class="token comment">//功能:查找+修改、插入+修改</span>
		<span class="token punctuation">{<!-- --></span>
			pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> ret <span class="token operator">=</span> _t<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> ret<span class="token punctuation">.</span>first<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token keyword">private</span><span class="token operator">:</span>   <span class="token comment">//map中的key不允许被修改</span>
		RBTree<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span> _t<span class="token punctuation">;</span>  <span class="token comment">//红黑树对象</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p></p> 
<h3><a id="42_Seth_631"></a>4.2 Set.h</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> <span class="token expression"><span class="token number">1</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"RBTree.h"</span></span>

<span class="token keyword">namespace</span> zzx<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token operator">&gt;</span>
	<span class="token keyword">class</span> <span class="token class-name">set</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//K模型</span>
	<span class="token keyword">public</span><span class="token operator">:</span>   <span class="token comment">//仿函数类:比较对象大小，获取对象中的元素—自己手动传递比较逻辑</span>
		<span class="token keyword">struct</span> <span class="token class-name">SetKeyOfT</span><span class="token punctuation">{<!-- --></span>   
			<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> key<span class="token punctuation">;</span>  <span class="token comment">//key</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">//使用::两种情况：静态变量、类中typedef的类型  typename表示::后面为类型，不是静态成员</span>
		<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">RBTree</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator iterator<span class="token punctuation">;</span>   <span class="token comment">//正向迭代器</span>
		<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">RBTree</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>reverse_iterator reverse_iterator<span class="token punctuation">;</span>  <span class="token comment">//反向迭代器</span>

		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>  <span class="token comment">//查找</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>  <span class="token comment">//插入</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _t<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token keyword">private</span><span class="token operator">:</span>  <span class="token comment">//set中的key不允许被修改</span>
		RBTree<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span> _t<span class="token punctuation">;</span>  <span class="token comment">//红黑树对象</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="43_RBTreeh_689"></a>4.3 RBTree.h</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token class-name">Color</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//枚举，一一列举出事物具有的所有可能</span>
	Red<span class="token punctuation">,</span>  <span class="token comment">//枚举常量，给枚举变量进行赋值</span>
	Black<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token comment">//红黑树的节点</span>
<span class="token keyword">struct</span> <span class="token class-name">RBTreeNode</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> RBTreeNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>

	<span class="token comment">//三叉链-》优点：便于查找孩子、父亲节点</span>
	Node<span class="token operator">*</span> _left<span class="token punctuation">;</span>      <span class="token comment">//该节点的左孩子</span>
	Node<span class="token operator">*</span> _right<span class="token punctuation">;</span>    <span class="token comment">//该节点的右孩子</span>
	Node<span class="token operator">*</span> _parent<span class="token punctuation">;</span>  <span class="token comment">//该节点的父亲，便于向上更新</span>
	T _data<span class="token punctuation">;</span>
	Color _col<span class="token punctuation">;</span>

	<span class="token function">RBTreeNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">,</span> Color col <span class="token operator">=</span> Red<span class="token punctuation">)</span>  <span class="token comment">//构造函数</span>
		<span class="token operator">:</span><span class="token function">_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_left</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_right</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_parent</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_col</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>  <span class="token comment">//默认新插入节点的颜色为红色</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token operator">&gt;</span> 
<span class="token keyword">struct</span> <span class="token class-name">RBTreeIterator</span>   <span class="token comment">//红黑树的正向迭代器</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> RBTreeNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> RBTreeIterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> Ptr<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>

	Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>

	<span class="token function">RBTreeIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">)</span> <span class="token comment">//构造函数，单参数构造函数支持隐式类型转化</span>
		<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

	Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//结构体指针，data为结构体</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*1.右不为空，下一个为该节点右子树的最左节点 ;
	* 2.右为空，说明该节点所在的子树已经访问完了，若该节点为父亲的右，说明该父亲所在的子树也访问完了，继续往上找，
	* 直到该节点为父亲的左，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲左*/</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//中序 左、根、右</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>  <span class="token comment">//1</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> subLeft <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
				subLeft <span class="token operator">=</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

			_node <span class="token operator">=</span> subLeft<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>  <span class="token comment">//2</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> _node<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_left <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/*1.左不为空，下一个为该节点左子树的最右节点 ;
	* 2.左为空，说明该节点所在的子树已经访问完了，若该节点为父亲的左，说明该父亲所在的子树也访问完了，继续往上找，
	* 直到该节点为父亲的右，则要访问的下一个节点是它的父亲，即：找祖先里面的孩纸 = 父亲右*/</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//中序 左、根、右  --与++逻辑相反</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>  <span class="token comment">//1</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> subRight <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>
				subRight <span class="token operator">=</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

			_node <span class="token operator">=</span> subRight<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>  <span class="token comment">//2</span>
		<span class="token punctuation">{<!-- --></span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> _node<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_right <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_node <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">!=</span> rb<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">==</span> rb<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">iterator</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">ReverseIterator</span>  <span class="token comment">//红黑树的反向迭代器——适配器 begin = rend、end = rbegin</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> ReverseIterator<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> Ptr<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>  
	iterator _it<span class="token punctuation">;</span>   <span class="token comment">//适配器</span>

	<span class="token function">ReverseIterator</span><span class="token punctuation">(</span>iterator it<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_it</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

	Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">*</span>_it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>
	<span class="token punctuation">}</span>

	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">--</span>_it<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">++</span>_it<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _it <span class="token operator">==</span> rb<span class="token punctuation">.</span>_it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> rb<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _it <span class="token operator">!=</span> rb<span class="token punctuation">.</span>_it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//红黑树的模板参数:T决定你是k模型的set、还是KV模型的map ; KeyOfT:取出T对象中的key ; pair比较:先比较first,在比较second</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token operator">&gt;</span> 
<span class="token keyword">class</span> <span class="token class-name">RBTree</span> <span class="token punctuation">{<!-- --></span>  
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> RBTreeNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>

	<span class="token comment">//正向迭代器</span>
	<span class="token keyword">typedef</span> RBTreeIterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> iterator<span class="token punctuation">;</span>  <span class="token comment">//普通迭代器</span>
	<span class="token keyword">typedef</span> RBTreeIterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> const_iterator<span class="token punctuation">;</span> <span class="token comment">//const迭代器</span>

	<span class="token comment">//反向迭代器</span>
	<span class="token keyword">typedef</span> ReverseIterator<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> reverse_iterator<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> ReverseIterator<span class="token operator">&lt;</span>const_iterator<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> const_reverse_iterator<span class="token punctuation">;</span>

	iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//红黑树最左节点</span>
	<span class="token punctuation">{<!-- --></span> 
		Node<span class="token operator">*</span> subLeft <span class="token operator">=</span> _root<span class="token punctuation">;</span>   
		<span class="token keyword">while</span> <span class="token punctuation">(</span>subLeft <span class="token operator">&amp;&amp;</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
			subLeft <span class="token operator">=</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>subLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//空指针 左闭右开[begin,end)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>  
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subLeft <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>subLeft <span class="token operator">&amp;&amp;</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
			subLeft <span class="token operator">=</span> subLeft<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>subLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//红黑树最右节点，因为此处反向迭代器*，是直接调用正向迭代器* [rbegin,erend)</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subRight <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>subRight <span class="token operator">&amp;&amp;</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>
			subRight <span class="token operator">=</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span>subRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	const_reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subRight <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>subRight <span class="token operator">&amp;&amp;</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span>
			subRight <span class="token operator">=</span> subRight<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">const_reverse_iterator</span><span class="token punctuation">(</span>subRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	const_reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">const_reverse_iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>  <span class="token comment">//查找  模板参数K的作用</span>
	<span class="token punctuation">{<!-- --></span>
		KeyOfT kot<span class="token punctuation">;</span>

		Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>  <span class="token comment">//先按照二叉搜索树的方式插入</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> key<span class="token punctuation">)</span>  <span class="token comment">//通仿函数对象调用operator()来获取T中的key</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&gt;</span> key<span class="token punctuation">)</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//找到了</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//找不到</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">RotateL</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>  <span class="token comment">//右右—左单旋</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subR <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subRL <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

		Node<span class="token operator">*</span> pphead <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>

		parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subRL<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>subRL<span class="token punctuation">)</span>
			subRL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		subR<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> subR<span class="token punctuation">;</span>


		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> _root<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_root <span class="token operator">=</span> subR<span class="token punctuation">;</span>
			subR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pphead<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> parent<span class="token punctuation">)</span>
				pphead<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subR<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				pphead<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subR<span class="token punctuation">;</span>

			subR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> pphead<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">RotateR</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>  <span class="token comment">//左左—右单旋</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subL <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subLR <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		Node<span class="token operator">*</span> pphead <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>

		parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subLR<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>subLR<span class="token punctuation">)</span>
			subLR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		subL<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> subL<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> _root<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_root <span class="token operator">=</span> subL<span class="token punctuation">;</span>
			subL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pphead<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> parent<span class="token punctuation">)</span>
				pphead<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subL<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				pphead<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subL<span class="token punctuation">;</span>

			subL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> pphead<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">RotateRL</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>  <span class="token comment">//右左—先右旋再左旋</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subR <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subRL <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

		<span class="token function">RotateR</span><span class="token punctuation">(</span>subR<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">RotateLR</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>  <span class="token comment">//左右—先左旋再右旋</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subL <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subLR <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		<span class="token function">RotateL</span><span class="token punctuation">(</span>subL<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>  <span class="token comment">//插入  </span>
	<span class="token punctuation">{<!-- --></span>   <span class="token comment">//不能使用引用放回，因为返回值作用域为栈区，传值返回</span>
		KeyOfT kot<span class="token punctuation">;</span>  <span class="token comment">//仿函数类创建的对象，对象去调用operator()</span>

		Node<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>  <span class="token comment">//先按照二叉搜索树的方式插入</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//通仿函数对象调用operator()来获取T中的key值</span>
			<span class="token punctuation">{<!-- --></span>
				parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//插入节点已存在，插入失败，返回在树中与该节点值相同的迭代器</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		cur <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//注意 insert</span>
		
		Node<span class="token operator">*</span> newnode <span class="token operator">=</span> cur<span class="token punctuation">;</span>  <span class="token comment">//非空树，插入成功，因为要做旋转处理，会导致cur值发生改变，需提前将新节点的位置存储起来</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token comment">//空树</span>
		<span class="token punctuation">{<!-- --></span>
			_root <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			_root<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>  <span class="token comment">//跟节点为黑</span>
			<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>_root<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//空树，插入成功，返回新插入节点在树中的迭代器</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cur<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>  <span class="token comment">//记录当前节点的父亲</span>

		<span class="token comment">//更新颜色</span>
		<span class="token comment">//插入结束：1.插入节点的父亲是黑色，因为插入前该树就为红黑树 2.情况一处理完后，cur为根节点，且为黑色</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token operator">-&gt;</span>_col <span class="token operator">==</span> Red<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span> <span class="token comment">//爷爷一定存在，因为c为红，p为红，所以p一定不是根节点，且一定有父节点</span>
			Node<span class="token operator">*</span> grandfather <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> grandfather<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>  <span class="token comment">//旋转需要确定方向</span>
			<span class="token punctuation">{<!-- --></span>
				Node<span class="token operator">*</span> uncle <span class="token operator">=</span> grandfather<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>uncle <span class="token operator">&amp;&amp;</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">==</span> Red<span class="token punctuation">)</span> <span class="token comment">//情况一：叔叔存在且为红-&gt;无方向(p、u为g的任意边，c为p的任一边)</span>
				<span class="token punctuation">{<!-- --></span>  <span class="token comment">//cur可能为新增节点，也可能一开始为黑色，cur的子树(下一层为红，下一层为新插入节点)在调整过程中将cur由黑变为红</span>
					parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span> <span class="token comment">//p、u变为黑，g变为红</span>
					grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>

					<span class="token comment">//g可能为根节点(更新结束)，也可能为子树(继续向上更新)</span>
					cur <span class="token operator">=</span> grandfather<span class="token punctuation">;</span>
					parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>  <span class="token comment">//情况二：叔叔不存在 或者 叔叔存在且为黑</span>
				<span class="token punctuation">{<!-- --></span>  <span class="token comment">//叔叔不存在，cur为新增节点 或 cur原来为黑，经子树调整由黑变红</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> cur<span class="token punctuation">)</span>  <span class="token comment">//左左——右单旋</span>
					<span class="token punctuation">{<!-- --></span>
						<span class="token function">RotateR</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
						parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span> <span class="token comment">//p变为黑，g变为红</span>
						grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span>    <span class="token comment">//左右——左右单旋 </span>
					<span class="token punctuation">{<!-- --></span>
						<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">RotateR</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
						cur<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>  <span class="token comment">//c变黑，g变红</span>
						grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">//更新结束：3.旋转+颜色处理后就是红黑树了</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				Node<span class="token operator">*</span> uncle <span class="token operator">=</span> grandfather<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>uncle <span class="token operator">&amp;&amp;</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">==</span> Red<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> uncle<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>
					grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>

					cur <span class="token operator">=</span> grandfather<span class="token punctuation">;</span>
					parent <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_right <span class="token operator">==</span> cur<span class="token punctuation">)</span>  <span class="token comment">//右右——左单旋</span>
					<span class="token punctuation">{<!-- --></span>
						<span class="token function">RotateL</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
						parent<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>
						grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span>   <span class="token comment">//右左——右左单旋</span>
					<span class="token punctuation">{<!-- --></span>
						<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">RotateL</span><span class="token punctuation">(</span>grandfather<span class="token punctuation">)</span><span class="token punctuation">;</span>
						cur<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>
						grandfather<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Red<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		_root<span class="token operator">-&gt;</span>_col <span class="token operator">=</span> Black<span class="token punctuation">;</span>  <span class="token comment">//g为根，颜色变为黑，更新结束</span>
		<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>newnode<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//情况一，插入节点的父亲为黑，插入结束</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	Node<span class="token operator">*</span> _root <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/55d3930e9ec904a56f97aa85f374049a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【CVE-2024-4577】PHP CGI 远程代码执行漏洞</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7916506bb9e40cf368eabcb70c683511/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言详解（动态内存管理）1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>