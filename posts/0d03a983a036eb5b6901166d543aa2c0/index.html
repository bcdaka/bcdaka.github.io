<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>类和对象(上) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0d03a983a036eb5b6901166d543aa2c0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="类和对象(上)">
  <meta property="og:description" content="一、类的定义 类有点类似c语言的结构体是一种自定义类型，但类里面除了定义一些成员变量外还有方法(成员函数)，在访问的时候要指定类域。
在类定义时首先用一个class关键字，在后面接着类的名字，然后使用{ }在花括号里面定义成员变量和成员函数，最后需要在花括号外加分号，如下：
class Stack { void Init(int n = 4) { arr = (int*)malloc(sizeof(int) * n); if (nullptr == arr) { perror(&#34;malloc申请空间失败&#34;); return; } capacity = n; size = 0; } //...... int* arr; size_t size; size_t capacity; }; 这里calss也可以替换成struct，在类里面的函数默认都为内联函数，当然它不一定都展开具体还取决于编译器。
二、访问限定符 在定义类的时候通常会用一些关键字来限定类成员的访问，访问限定符有public，private，protected。
public修饰的成员在类外可以直接被访问；protected和private修饰的成员在类外不能直接被访问，protected和private的具体区别这里先不讲解。访问权限作⽤域从该访问限定符出现的位置开始直到下⼀个访问限定符出现时为⽌，如果后⾯没有访问限定符，作⽤域就到}即类结束。class定义成员没有被访问限定符修饰时默认为private，struct默认为public。⼀般成员变量都会被限制为private/protected，需要给别⼈使⽤的成员函数会放为public。 class Stack { public: void Init(int n = 4) { arr = (int*)malloc(sizeof(int) * n); if (nullptr == arr) { perror(&#34;malloc申请空间失败&#34;); return; } capacity = n; size = 0; } //.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-27T15:12:22+08:00">
    <meta property="article:modified_time" content="2024-07-27T15:12:22+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">类和对象(上)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、类的定义</h2> 
<p>        类有点类似c语言的结构体是一种自定义类型，但<span style="color:#fe2c24;">类里面除了定义一些成员变量外还有方法</span>(成员函数)，在访问的时候要指定类域。</p> 
<p>        在类定义时首先用一个<span style="color:#fe2c24;">class</span>关键字，在后面接着类的名字，然后使用{ }在花括号里面定义成员变量和成员函数，<u>最后需要在花括号外加分号</u>，如下：</p> 
<pre><code class="language-cpp">class Stack
{
    void Init(int n = 4)
    {
        arr = (int*)malloc(sizeof(int) * n);
        if (nullptr == arr)
        {
            perror("malloc申请空间失败");
            return;
        } 
        capacity = n;
        size = 0;
    }   
    //......
    int* arr;
    size_t size;
    size_t capacity;
};</code></pre> 
<p>这里calss也可以替换成struct，<span style="color:#fe2c24;">在类里面的函数默认都为内联函数，当然它不一定都展开具体还取决于编译器</span>。</p> 
<h2>二、访问限定符</h2> 
<p>        在定义类的时候通常会用一些关键字来限定类成员的访问，访问限定符有<span style="color:#fe2c24;">public，private，protected</span>。</p> 
<ul><li>public修饰的成员在类外可以直接被访问；protected和private修饰的成员在类外不能直接被访问，protected和private的具体区别这里先不讲解。</li><li><u>访问权限作⽤域从该访问限定符出现的位置开始直到下⼀个访问限定符出现时为⽌，如果后⾯没有访问限定符，作⽤域就到}即类结束。</u></li><li><u>class定义成员没有被访问限定符修饰时默认为private，struct默认为public</u>。</li><li>⼀般成员变量都会被限制为private/protected，需要给别⼈使⽤的成员函数会放为public。</li></ul> 
<pre><code class="language-cpp">class Stack
{
public:
    void Init(int n = 4)
    {
        arr = (int*)malloc(sizeof(int) * n);
        if (nullptr == arr)
        {
            perror("malloc申请空间失败");
            return;
        } 
        capacity = n;
        size = 0;
    }   
    //......
private:
    int* arr;
    size_t size;
    size_t capacity;
};</code></pre> 
<h2>三、类域</h2> 
<p>        类成员受到类域限制，在访问的时候需要指明类域，像命名空间一样<span style="color:#fe2c24;">使用::指明类域</span>，如果一个函数声明在类里，定义在类外，那么在定义函数的时候就得使用::指明类域，如下：</p> 
<pre><code class="language-cpp">class Stack
{
public:
    void Init(int n = 4); 
    //......
private:
    int* arr;
    size_t size;
    size_t capacity;
};
void Stack::Init(int n = 4)
{
    arr = (int*)malloc(sizeof(int) * n);
    if (nullptr == arr)
    {
        perror("malloc申请空间失败");
        return;
    } 
    capacity = n;
    size = 0; 
}  </code></pre> 
<p>当然访问类域内的函数通常都使用类对象加点( . ) 操作符去访问，如下：</p> 
<p><img alt="" height="409" src="https://images2.imgbox.com/5a/46/KYYSMlim_o.png" width="499"></p> 
<h2>四、实例化</h2> 
<p>        类就像是一栋房子的图纸，而用类去定义对象就类似使用图纸建造房子，这个过程就叫做实例化。</p> 
<p>        类是不占用内存的，只有实例化后才会占内存，就像只有把图纸建造出房子后才占用地盘一样。而那么计算一个对象的内存呢？</p> 
<p><img alt="" height="767" src="https://images2.imgbox.com/65/9f/k8nP0L1z_o.png" width="1200"></p> 
<h2>五、对象的大小</h2> 
<p>        对象与对象之间主要区别在于成员变量的值，而同一个类的所有对象的成员函数都是一样的，所以<strong><span style="color:#fe2c24;">成员函数并不储存在对象里面</span></strong>，只用考虑成员变量所占的内存，而成员变量占用的内存和结构体的内存计算方法一样，因为它们都存在<span style="color:#fe2c24;">内存对齐</span>。需要注意的是<span style="color:#fe2c24;"><strong>静态成员并不是储存在对象里面(和成员函数同理)</strong></span>，而是储存在静态区，不能算入。在类里面的静态成员与在全局申请的静态成员区别在于类成员受到<span style="color:#ff9900;">类域的限制</span>。</p> 
<p>        如果一个类里面一个成员变量都没有那么按上面逻辑来说它实例化出来的对象占的空间应该是0，而对于这种情况编译器做了特殊处理，它所占的空间为1字节。</p> 
<h2 style="background-color:transparent;">六、this指针</h2> 
<p>        类中有Init等成员函数，函数体中没有关于不同对象的区分，那当对象d1调⽤Init和其它函数时，该函数是如何知道应该访问的是d1对象还是d2对象呢？在这里C++给了⼀个隐含的this指针解决这⾥的问题。<br>         编译器编译后，类的成员函数默认都会在形参第⼀个位置，增加⼀个当前类类型的指针，叫做this指针。⽐如Stack类的Init的真实原型为， void Init(Stack* const this, int n=4)。                              C++规定<span style="color:#fe2c24;">不能在实参和形参的位置显⽰的写this指针(编译时编译器会处理)</span>，<u>但是可以在函数体内显示使⽤this指针。</u><br>         类的成员函数中访问成员变量，本质都是通过this指针访问的，如Init函数中给size赋值， 可以看做this-&gt;size = 0;</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c22d40ac8b2b028b544acaa86326e86e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">部署springboot项目到阿里云服务器(小白包会)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f10e429ac5f9cd19db92eb7b9cd0561/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI绘画：艺术与科技融合的新篇章</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>