<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Linux】nmcli命令详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/975203b425bd5589d6d2ad0d3f4b05e3/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Linux】nmcli命令详解">
  <meta property="og:description" content="目录
一、概述
二、常用参数使用
2.1 nmcli networking
1.显示NM是否接管网络
2.查看网络连接状态
3.开/关网络连接
2.2 general
​编辑
1.显示系统网络状态
2.显示主机名
3.更改主机名
2.3 nmcli connection
​编辑1.显示所有网络连接
2.显示某个网卡的详细信息
3.启动/关闭指定连接
4.修改
5.新增连接
6.删除连接
7.重载
8.监控连接
2.4 nmcli device
​编辑1.显示所有网络接口设备状态
2.显示所有设备详细信息
3.连接设备
4.断开
5.更新设备
一、概述 以往我都是在linux的系统中都是通过配置文件来配置和修改ip的，今天我们就来说一说nmcli命令配置网络。
目前所有的linux系统配置网卡等信息，均已经推行Network-Manager服务去管理。nmcli 是 NetworkManager 的命令行工具。nm 代表 NetworkManager，cli 代表 Command-Line 命令行。
# 查看运行状态 systemctl status NetworkManager # 启动 systemctl start NetworkManager # 重启 systemctl restart NetworkManager # 关闭 systemctl stop NetworkManager # 查看是否开机启动 systemctl is-enabled NetworkManager # 开机启动 systemctl enable NetworkManager 二、常用参数使用 我们可以看help查看参数，man nmcli查看参数详细使用">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-03T11:19:26+08:00">
    <meta property="article:modified_time" content="2024-04-03T11:19:26+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Linux】nmcli命令详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="u5ea98161"><img alt="" height="534" src="https://images2.imgbox.com/c0/d0/NRLvUWFg_o.png" width="950"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0" rel="nofollow">一、概述</a></p> 
<p id="EpdVb-toc" style="margin-left:0px;"><a href="#EpdVb" rel="nofollow">二、常用参数使用</a></p> 
<p id="N3Iis-toc" style="margin-left:40px;"><a href="#N3Iis" rel="nofollow">2.1 nmcli networking</a></p> 
<p id="X3dfI-toc" style="margin-left:80px;"><a href="#X3dfI" rel="nofollow">1.显示NM是否接管网络</a></p> 
<p id="Cq29g-toc" style="margin-left:80px;"><a href="#Cq29g" rel="nofollow">2.查看网络连接状态</a></p> 
<p id="NYuqR-toc" style="margin-left:80px;"><a href="#NYuqR" rel="nofollow">3.开/关网络连接</a></p> 
<p id="GB1lr-toc" style="margin-left:40px;"><a href="#GB1lr" rel="nofollow">2.2 general</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">​编辑</a></p> 
<p id="Kby54-toc" style="margin-left:80px;"><a href="#Kby54" rel="nofollow">1.显示系统网络状态</a></p> 
<p id="nEH3g-toc" style="margin-left:80px;"><a href="#nEH3g" rel="nofollow">2.显示主机名</a></p> 
<p id="udD7x-toc" style="margin-left:80px;"><a href="#udD7x" rel="nofollow">3.更改主机名</a></p> 
<p id="r6MbR-toc" style="margin-left:40px;"><a href="#r6MbR" rel="nofollow">2.3 nmcli connection</a></p> 
<p id="JFIvE-toc" style="margin-left:80px;"><a href="#JFIvE" rel="nofollow">​编辑1.显示所有网络连接</a></p> 
<p id="EyuuX-toc" style="margin-left:80px;"><a href="#EyuuX" rel="nofollow">2.显示某个网卡的详细信息</a></p> 
<p id="SYiiF-toc" style="margin-left:80px;"><a href="#SYiiF" rel="nofollow">3.启动/关闭指定连接</a></p> 
<p id="dB1YS-toc" style="margin-left:80px;"><a href="#dB1YS" rel="nofollow">4.修改</a></p> 
<p id="LkLRx-toc" style="margin-left:80px;"><a href="#LkLRx" rel="nofollow">5.新增连接</a></p> 
<p id="XnIu8-toc" style="margin-left:80px;"><a href="#XnIu8" rel="nofollow">6.删除连接</a></p> 
<p id="oDIop-toc" style="margin-left:80px;"><a href="#oDIop" rel="nofollow">7.重载</a></p> 
<p id="v6NPF-toc" style="margin-left:80px;"><a href="#v6NPF" rel="nofollow">8.监控连接</a></p> 
<p id="Uy2cA-toc" style="margin-left:40px;"><a href="#Uy2cA" rel="nofollow">2.4 nmcli device</a></p> 
<p id="w9vGx-toc" style="margin-left:80px;"><a href="#w9vGx" rel="nofollow">​编辑1.显示所有网络接口设备状态</a></p> 
<p id="FpR84-toc" style="margin-left:80px;"><a href="#FpR84" rel="nofollow">2.显示所有设备详细信息</a></p> 
<p id="lCYBT-toc" style="margin-left:80px;"><a href="#lCYBT" rel="nofollow">3.连接设备</a></p> 
<p id="IUc3K-toc" style="margin-left:80px;"><a href="#IUc3K" rel="nofollow">4.断开</a></p> 
<p id="zjGFv-toc" style="margin-left:80px;"><a href="#zjGFv" rel="nofollow">5.更新设备</a></p> 
<hr id="hr-toc"> 
<h2 id="%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0"><span style="color:#956fe7;">一、概述</span></h2> 
<hr id="pGDkI"> 
<blockquote> 
 <p id="u2e4bf05a">以往我都是在linux的系统中都是通过配置文件来配置和修改ip的，今天我们就来说一说nmcli命令配置网络。</p> 
 <p id="ucf8722b9">目前所有的linux系统配置网卡等信息，均已经推行Network-Manager服务去管理。nmcli 是 NetworkManager 的命令行工具。nm 代表 NetworkManager，cli 代表 Command-Line 命令行。</p> 
</blockquote> 
<pre id="Ps9Pi"><code># 查看运行状态
systemctl status NetworkManager
# 启动
systemctl start NetworkManager
# 重启
systemctl restart NetworkManager
# 关闭
systemctl stop NetworkManager

# 查看是否开机启动
systemctl is-enabled NetworkManager
# 开机启动
systemctl enable NetworkManager</code></pre> 
<hr id="atkrO"> 
<h2 id="EpdVb"><span style="color:#956fe7;">二、常用参数使用</span></h2> 
<hr id="Qmbud"> 
<p id="u49c59776">我们可以看help查看参数，man nmcli查看参数详细使用<img alt="" height="714" src="https://images2.imgbox.com/c5/a8/UYzs4WDp_o.png" width="1200"></p> 
<p><span style="color:#be191c;"><strong>版本</strong></span><span style="color:#4da8ee;"><strong>：</strong>nmcli tool, version 1.12.0-6.el7 </span></p> 
<p id="u449daa8b"></p> 
<p id="ueaf021ef"><strong>常用参数如下：</strong></p> 
<table id="NWYBN"><tbody><tr><td> <p id="u93b8b095"><strong>常用参数</strong></p> </td><td> <p id="u70c12614"><strong>释义</strong></p> </td></tr><tr><td> <p id="u6b51a812">g[eneral]</p> </td><td> <p id="ufda3a50e">NetworkManager的一般状态和操作</p> </td></tr><tr><td> <p id="u7ccab6ac">n[etworking]</p> </td><td> <p id="u4cf0fe53">网络整体控制</p> </td></tr><tr><td> <p id="ub0cd1327">r[adio]</p> </td><td> <p id="u6476992e">NetworkManager无线交换机</p> </td></tr><tr><td> <p id="u52828b0f">c[onnection]</p> </td><td> <p id="uf33ca709">NetworkManager无线交换机</p> </td></tr><tr><td> <p id="uf8f6a3fd">d[evice]</p> </td><td> <p id="ud4fb55f9">通过NetworkManager管理设备</p> </td></tr><tr><td> <p id="ucaa950a0">a[gent]</p> </td><td> <p id="u2dd26c3a">NetworkManager秘密代理或polkit代理</p> </td></tr><tr><td> <p id="u77bccabe">m[onitor]</p> </td><td> <p id="u7a96bf11">监控NetworkManager更改</p> </td></tr></tbody></table> 
<h3 id="N3Iis"><span style="color:#1a439c;">2.1 nmcli networking</span></h3> 
<hr id="Y9rBP"> 
<h4 id="X3dfI">1.显示NM是否接管网络</h4> 
<pre id="WFweL"><code>mcli networking
#或
nmcli n</code></pre> 
<p id="u85c59ca8"></p> 
<p><img alt="" height="109" src="https://images2.imgbox.com/c4/5e/uuvzHOVv_o.png" width="817"></p> 
<h4 id="Cq29g">2.查看网络连接状态</h4> 
<pre id="Zi7p0"><code>nmcli n connectivity
或者  
nmcli n c</code></pre> 
<p id="u4827a948"></p> 
<p class="img-center"><img alt="" height="113" id="u71131318" src="https://images2.imgbox.com/99/e7/Mf9cwBRV_o.png" width="798"></p> 
<p id="u1d2fd540">五种状态：</p> 
<ul><li id="u61e85341"><strong>full</strong>：联网</li><li id="udd765d48"><strong>limited</strong>：联网，但无法上网</li><li id="uf42c66b6"><strong>portal</strong>：联网，但需要登录认证</li><li id="udc1d168e"><strong>none</strong>：没网</li><li id="u7ece21c2"><strong>unknown</strong>：未知</li></ul> 
<h4 id="NYuqR">3.开/关网络连接</h4> 
<pre id="Kvfxi"><code>nmcli n on
nmcli n off</code></pre> 
<p id="u2478c6fc">如下关闭网络连接 ，xshell 断开了</p> 
<p><img alt="" height="276" src="https://images2.imgbox.com/18/02/3ZAlQbLO_o.png" width="943"></p> 
<p id="u0c8dacf4"></p> 
<p id="ue57d2ca7">我们可以看到网络关闭后网络设备 DEVICE : -- ，打开网络后DEIVCE : ens192<img alt="" height="344" src="https://images2.imgbox.com/3f/96/J5yLaQTy_o.png" width="879"></p> 
<p id="u354dc359"></p> 
<h3 id="GB1lr"><span style="color:#1a439c;">2.2 general</span></h3> 
<hr id="HeXX7"> 
<p id="u3e7f3990"></p> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="353" src="https://images2.imgbox.com/a8/55/bN9JekZJ_o.png" width="836"></h4> 
<h4 id="Kby54">1.显示系统网络状态</h4> 
<pre id="otFAN"><code>nmcli general status
#按照之前所说的简写规则，可以简写为
nmcli g s</code></pre> 
<p id="u4b52deb8"></p> 
<p class="img-center"><img alt="" height="107" id="uf6e62be5" src="https://images2.imgbox.com/ba/29/FZNMeOsp_o.png" width="915"></p> 
<ul><li id="ucbc08459"><strong>STATE</strong>：网络是否连接</li><li id="ud5a9eb60"><strong>CONNECTIVITY</strong>：同nmcli n c</li><li id="u1c0e575a"><strong>WIFI-HW</strong>：WIFI硬件开关</li><li id="ued02a81d"><strong>WIFI</strong>：WIFI软件开关</li><li id="ud9aa059d"><strong>WWAN-HW</strong>：WWAN硬件开关</li><li id="uf07a8906"><strong>WWAN</strong>：WWAN软件开关</li></ul> 
<h4 id="nEH3g">2.显示主机名</h4> 
<pre id="H3vDB"><code>nmcli general host
nmcli g h</code></pre> 
<h4 id="udD7x">3.更改主机名</h4> 
<pre id="KXPzz"><code>nmcli general hostname newhostname
nmcli g h newhostname</code></pre> 
<p id="u9a302256">主机名存放在<strong>/etc/hostname</strong>中，修改后需要重启NM。</p> 
<h3 id="r6MbR"><span style="color:#1a439c;">2.3 nmcli connection</span></h3> 
<hr id="TFesc"> 
<p id="ue20812d7"></p> 
<h4 id="JFIvE"><img alt="" height="874" src="https://images2.imgbox.com/e8/88/YPGdU5IY_o.png" width="1200">1.显示所有网络连接</h4> 
<pre id="NWBnS"><code>nmcli connection show
nmcli c s
nmcli c #show是nmcli c的默认项，因此可以省略</code></pre> 
<p id="u3b282699"></p> 
<p class="img-center"><img alt="" height="212" id="u812486c2" src="https://images2.imgbox.com/7d/13/5vrJqURB_o.png" width="964"></p> 
<p id="uc4921c1c">显示当前启动的连接</p> 
<pre id="CazE4"><code>nmcli c s --active
nmcli c s -a #因为s后边有参数，因此不能省略</code></pre> 
<p id="u26f6547a"></p> 
<p class="img-center"><img alt="" height="111" id="uaf2dd8ab" src="https://images2.imgbox.com/20/0d/ZW0LS2fw_o.png" width="922"></p> 
<h4 id="EyuuX">2.显示某个网卡的详细信息</h4> 
<pre id="JjcLP"><code>nmcli c s 设备名</code></pre> 
<p id="u7e08411d"></p> 
<p class="img-center"><img alt="" height="791" id="u8c11dd15" src="https://images2.imgbox.com/bd/36/YkTj9xxe_o.png" width="1066"></p> 
<h4 id="SYiiF">3.启动/关闭指定连接</h4> 
<pre id="xOCZM"><code># 如果某个设备原本就处于连接状态，那么该命令会重启它
nmcli c up 设备名

#  关闭之后，再用nmcli c查看，DEVICE项将显示--。
nmcli c down 设备名</code></pre> 
<h4 id="dB1YS">4.修改</h4> 
<pre id="evfNE"><code>nmcli c modify 设备名 [+ | -]选项 选项值
nmcli c m 设备名 [+ | -]选项 选项值</code></pre> 
<p id="u1ee42ede">常用修改示例</p> 
<pre id="k4zGP"><code>nmcli c m ens192 ipv4.address 192.168.2.201/24   # 修改 IP 地址和子网掩码
nmcli c m ens192 +ipv4.addresses 192.168.2.100/24
nmcli c m ens192 ipv4.method manual             # 修改为静态配置，默认是 auto
nmcli c m ens192 ipv4.gateway 192.168.2.2       # 修改默认网关
nmcli c m ens192 ipv4.dns 192.168.2.2           # 修改 DNS
nmcli c m ens192 +ipv4.dns 114.114.114.114      # 添加一个 DNS
nmcli c m ens192 ipv6.method ignored            # 将 IPv6 禁用，针对CentOS8，三个可选项：disabled、auto、manual
nmcli c m ens192 connection.autoconnect yes     # 开机启动</code></pre> 
<p id="u7195897f"></p> 
<p id="udde9e0ba">注意在<strong>修改method前</strong>，要<strong>先修改address</strong></p> 
<p id="u444aeb8c">使用<strong>空引号""</strong>代替<strong>选项值</strong>，可以将选项设回<strong>默认值</strong>：</p> 
<pre id="bwRtE"><code>nmcli c m ens33 ipv4.method ""</code></pre> 
<p id="u44309bc9">如下修改主机IP地址</p> 
<pre id="HEQG1"><code>nmcli connection modify ens192 ipv4.address 192.168.2.201/24</code></pre> 
<p id="ub8f54772"></p> 
<p class="img-center"><img alt="" height="686" id="uf7f5fa56" src="https://images2.imgbox.com/88/12/cHGAkzqU_o.png" width="955"></p> 
<h4 id="LkLRx">5.新增连接</h4> 
<pre id="QZatJ"><code>nmcli c add type 连接类型 选项 选项值  
nmcli c a type 连接类型 选项 选项值</code></pre> 
<p id="u0e7d4efb">通常用的type是802-3-ethernet（别名 ethernet）。</p> 
<p id="ua0fd7913">选项同之前<strong>修改连接</strong>的选项，其中有几个重要选项：</p> 
<pre id="is4TO"><code>connection.id（别名 con-name）：连接名；

connection.interface-name（别名 ifname）：设备名；

connection.autoconnect（别名 autoconnect）：是否开机自启，其值只能是 yes 或 no，默认 yes</code></pre> 
<p id="ucb1693a4">举例</p> 
<pre id="HMEhH"><code>nmcli c a type ethernet con-name ens33 ifname ens33</code></pre> 
<p id="ub2151a4f"></p> 
<p class="img-center"><img alt="" height="271" id="u63c0a134" src="https://images2.imgbox.com/a6/f3/sTu9d3NM_o.png" width="1078"></p> 
<h4 id="XnIu8">6.删除连接</h4> 
<pre id="guk7R"><code>nmcli c delete ens33  
nmcli c de ens33      # delete 不可简写为 d，否则与 down 冲突，但可以简写为 de</code></pre> 
<p id="ua6fabc9d"></p> 
<p class="img-center"><img alt="" height="171" id="u9df4f24c" src="https://images2.imgbox.com/4c/67/IOqrNWDX_o.png" width="1108"></p> 
<h4 id="oDIop">7.重载</h4> 
<pre id="mj3st"><code>nmcli c reload  # 或
nmcli c r

nmcli c load ifcfg-ens33  # 或
nmcli c l ifcfg-ens33


## 指定文件
nmcli connection  load  /etc/sysconfig/network-scripts/ifcfg-ens192</code></pre> 
<p id="u54c6cc5d">这里ifcfg网络配置文件默认保存在<strong>/etc/sysnconfig/network-scripts</strong>中，如果在其他位置，这里要写完整路径。</p> 
<h4 id="v6NPF">8.监控连接</h4> 
<pre id="Bmvq9"><code># 监控ens192 
nmcli connection   monitor ffb0dc33-75d6-42b7-8cd4-509c465448e8</code></pre> 
<p id="uc2879047"></p> 
<p class="img-center"><img alt="" height="165" id="uc4b75015" src="https://images2.imgbox.com/5d/bf/cLj8OtOz_o.png" width="1166"></p> 
<h3 id="Uy2cA"><span style="color:#1a439c;">2.4 nmcli device</span></h3> 
<hr id="WiXEX"> 
<h4 id="w9vGx"><img alt="" height="845" src="https://images2.imgbox.com/70/4f/DSKm3Kvl_o.png" width="1200">1.显示所有网络接口设备状态</h4> 
<pre id="OUOKn"><code>nmcli device status
nmcli d s
nmcli d</code></pre> 
<p id="u57bc51a2"></p> 
<p class="img-center"><img alt="" height="163" id="ubcd71bc3" src="https://images2.imgbox.com/36/8e/1nKchwKt_o.png" width="801"></p> 
<h4 id="FpR84">2.显示所有设备详细信息</h4> 
<pre id="R0JmA"><code>nmcli d show  
nmcli d sh         # show 不可简写为 s，否则与 status 冲突，但可以简写为 sh

# 显示指定设备详细信息
nmcli d sh ens192</code></pre> 
<p class="img-center"><img alt="" height="818" id="u04006f12" src="https://images2.imgbox.com/0d/59/JsKtslhd_o.png" width="1200"></p> 
<p id="u60b17499"></p> 
<h4 id="lCYBT">3.连接设备</h4> 
<pre id="UKh9R"><code>nmcli d connect ens192  # 或
nmcli d c ens33</code></pre> 
<h4 id="IUc3K">4.断开</h4> 
<pre id="Jc8vR"><code>nmcli d disconnect ens192  # 或
nmcli d d ens33</code></pre> 
<h4 id="zjGFv">5.更新设备</h4> 
<pre id="yueRE"><code>nmcli d reapply ens192  # 或
nmcli d r ens33</code></pre> 
<h2 id="u1c958d21" style="background-color:transparent;"></h2> 
<p></p> 
<hr> 
<p id="udafb97ba">参考原文链接：<a href="https://blog.csdn.net/m0_72125469/article/details/131156891" title="linux nmcli命令详解-CSDN博客">linux nmcli命令详解-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/deecc1d5858e81a556215e31029e6b2f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端 JS 压缩图片的思路（附源码）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62806d930a3d83c0dd4506c260daa961/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">毕业设计——基于Pytorch的人脸识别及人像卡通化算法设计与实现（源码&#43;数据&#43;模型）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>