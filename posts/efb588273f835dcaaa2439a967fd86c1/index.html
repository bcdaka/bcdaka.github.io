<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Flutter的image_picker插件实现设备的相册的访问和拍照 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/efb588273f835dcaaa2439a967fd86c1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="使用Flutter的image_picker插件实现设备的相册的访问和拍照">
  <meta property="og:description" content="先自我介绍一下，小编浙江大学毕业，去过华为、字节跳动等大厂，目前阿里P7
深知大多数程序员，想要提升技能，往往是自己摸索成长，但自己不成体系的自学效果低效又漫长，而且极易碰到天花板技术停滞不前！
因此收集整理了一份《2024年最新Linux运维全套学习资料》，初衷也很简单，就是希望能够帮助到想自学提升又不知道该从何学起的朋友。
既有适合小白学习的零基础资料，也有适合3年以上经验的小伙伴深入学习提升的进阶课程，涵盖了95%以上运维知识点，真正体系化！
由于文件比较多，这里只是将部分目录截图出来，全套包含大厂面经、学习笔记、源码讲义、实战项目、大纲路线、讲解视频，并且后续会持续更新
如果你需要这些资料，可以添加V获取：vip1024b （备注运维）
正文 ), ], ), ), 在上面的示例中，我们使用 ImagePicker 类中的 pickImage 方法来从相册中选择一张图片或者选择相机。如果用户选择了一张图片，我们将通过 pickedFile.path 获取到图片的文件路径，然后将其转换为 File 对象。 ImagePicker().pickImage(source: ImageSource.gallery);
如果用户选择了从相机拍照，通过调用 pickImage 方法时指定 ImageSource.camera 来实现。 await ImagePicker().pickImage(source: ImageSource.camera);
### 完整的代码 完整的代码如下： import ‘package:flutter/material.dart’;
import ‘dart:io’;
import ‘package:image_picker/image_picker.dart’;
import ‘package:shared_preferences/shared_preferences.dart’;
class SettingsPage extends StatefulWidget {
const SettingsPage({Key? key}) : super(key: key);
@override
_SettingsPageState createState() =&gt; _SettingsPageState();
}
class _SettingsPageState extends State {
late File _selectedImage;
late SharedPreferences _prefs;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-16T06:08:23+08:00">
    <meta property="article:modified_time" content="2024-04-16T06:08:23+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Flutter的image_picker插件实现设备的相册的访问和拍照</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>先自我介绍一下，小编浙江大学毕业，去过华为、字节跳动等大厂，目前阿里P7</strong></p> 
<p><strong>深知大多数程序员，想要提升技能，往往是自己摸索成长，但自己不成体系的自学效果低效又漫长，而且极易碰到天花板技术停滞不前！</strong></p> 
<p><strong>因此收集整理了一份《2024年最新Linux运维全套学习资料》，初衷也很简单，就是希望能够帮助到想自学提升又不知道该从何学起的朋友。</strong><br> <img src="https://images2.imgbox.com/85/8b/99SaqBV6_o.png" alt="img"><br> <img src="https://images2.imgbox.com/5d/64/aXg707db_o.png" alt="img"><br> <img src="https://images2.imgbox.com/48/1c/jijpk4ol_o.png" alt="img"><br> <img src="https://images2.imgbox.com/a5/96/r1zZKsvq_o.png" alt="img"><br> <img src="https://images2.imgbox.com/c5/92/gkaYwjYU_o.png" alt="img"></p> 
<p><strong>既有适合小白学习的零基础资料，也有适合3年以上经验的小伙伴深入学习提升的进阶课程，涵盖了95%以上运维知识点，真正体系化！</strong></p> 
<p><strong>由于文件比较多，这里只是将部分目录截图出来，全套包含大厂面经、学习笔记、源码讲义、实战项目、大纲路线、讲解视频，并且后续会持续更新</strong></p> 
<p><strong>如果你需要这些资料，可以添加V获取：vip1024b （备注运维）</strong><br> <img src="https://images2.imgbox.com/93/db/SX8IM92q_o.jpg" alt="img"></p> 
<h4><a id="_18"></a>正文</h4> 
<pre><code>            ),
          ],
        ),
      ),
</code></pre> 
<pre><code>
在上面的示例中，我们使用 ImagePicker 类中的 pickImage 方法来从相册中选择一张图片或者选择相机。如果用户选择了一张图片，我们将通过 pickedFile.path 获取到图片的文件路径，然后将其转换为 File 对象。



</code></pre> 
<p>ImagePicker().pickImage(source: ImageSource.gallery);</p> 
<pre><code>
如果用户选择了从相机拍照，通过调用 pickImage 方法时指定 ImageSource.camera 来实现。



</code></pre> 
<p>await ImagePicker().pickImage(source: ImageSource.camera);</p> 
<pre><code>
### 完整的代码


完整的代码如下：



</code></pre> 
<p>import ‘package:flutter/material.dart’;<br> import ‘dart:io’;<br> import ‘package:image_picker/image_picker.dart’;<br> import ‘package:shared_preferences/shared_preferences.dart’;</p> 
<p>class SettingsPage extends StatefulWidget {<!-- --><br> const SettingsPage({Key? key}) : super(key: key);</p> 
<p>@override<br> _SettingsPageState createState() =&gt; _SettingsPageState();<br> }</p> 
<p>class _SettingsPageState extends State {<!-- --><br> late File _selectedImage;<br> late SharedPreferences _prefs;</p> 
<p>@override<br> void initState() {<!-- --><br> super.initState();<br> // 调用 _loadPrefs 方法来初始化 _selectedImage 变量<br> _loadPrefs();<br> }</p> 
<p>Future _loadPrefs() async {<!-- --><br> _prefs = await SharedPreferences.getInstance();<br> final imagePath = _prefs.getString(‘imagePath’);<br> if (imagePath != null) {<!-- --><br> return File(imagePath);<br> } else {<!-- --><br> return File(‘assets/touxiang.jpg’);<br> }<br> }</p> 
<p>Future _saveImagePath(String imagePath) async {<!-- --><br> await _prefs.setString(‘imagePath’, imagePath);<br> }</p> 
<p>Future _pickImage(ImageSource source) async {<!-- --><br> final picker = ImagePicker();<br> final pickedImage = await picker.pickImage(source: source);<br> if (pickedImage != null) {<!-- --><br> setState(() {<!-- --><br> _selectedImage = File(pickedImage.path);<br> });<br> _saveImagePath(pickedImage.path);<br> }<br> }</p> 
<p>void _updateSelectedImage(File image) {<!-- --><br> setState(() {<!-- --><br> _selectedImage = image;<br> });<br> }</p> 
<p>@override<br> Widget build(BuildContext context) {<!-- --><br> return Scaffold(<br> body: ListView(<br> children: [<br> Container(<br> padding: EdgeInsets.all(16),<br> color: Colors.grey[200],<br> child: Row(<br> children: [<br> // 使用 FutureBuilder 来等待异步操作完成，避免 LateInitializationError 错误<br> FutureBuilder(<br> future: _loadPrefs(),<br> builder: (BuildContext context, AsyncSnapshot snapshot) {<!-- --><br> if (snapshot.connectionState == ConnectionState.done) {<!-- --><br> return InkWell(<br> onTap: () {<!-- --><br> showDialog(<br> context: context,<br> builder: (BuildContext context) {<!-- --><br> return AlertDialog(<br> title: Text(‘选择头像’),<br> actions: [<br> TextButton(<br> child: Text(‘从相册选择’),<br> onPressed: () async {<!-- --><br> Navigator.of(context).pop();<br> final pickedImage = await ImagePicker().pickImage(source: ImageSource.gallery);<br> if (pickedImage != null) {<!-- --><br> _updateSelectedImage(File(pickedImage.path));<br> _saveImagePath(pickedImage.path);<br> }<br> },<br> ),<br> TextButton(<br> child: Text(‘拍照’),<br> onPressed: () async {<!-- --><br> Navigator.of(context).pop();<br> final pickedImage = await ImagePicker().pickImage(source: ImageSource.camera);<br> if (pickedImage != null) {<!-- --><br> _updateSelectedImage(File(pickedImage.path));<br> _saveImagePath(pickedImage.path);<br> }<br> },<br> ),<br> ],<br> );<br> },<br> );<br> },<br> // 使用条件运算符来检查 _selectedImage 是否为 null，并使用默认头像路径<br> child: CircleAvatar(<br> radius: 40,<br> backgroundImage: snapshot.data != null ? FileImage(snapshot.data!) as ImageProvider?: AssetImage(‘assets/touxiang.jpg’),<br> ),<br> );<br> } else {<!-- --><br> return CircularProgressIndicator();<br> }<br> },<br> ),<br> SizedBox(width: 16),<br> Column(<br> crossAxisAlignment: CrossAxisAlignment.start,<br> children: [<br> Text(<br> ‘江上清风山间明月’,<br> style: TextStyle(fontSize: 18),<br> ),<br> Text(<br> ‘用户ID: 123456’,<br> style: TextStyle(fontSize: 14, color: Colors.grey),<br> ),<br> ],<br> ),<br> ],<br> ),<br> ),<br> Divider(indent: 60,),<br> SettingItem(icon: Icons.person, title: ‘个人信息’),<br> Divider(indent: 60,),<br> SettingItem(icon: Icons.lock, title: ‘账号与安全’),<br> Divider(indent: 60,),<br> SettingItem(icon: Icons.notifications, title: ‘消息通知’),<br> Divider(indent: 60,),<br> SettingItem(icon: Icons.language, title: ‘语言’),<br> // 添加更多的设置项…<br> ],<br> ),<br> );<br> }<br> }</p> 
<p>class SettingItem extends StatelessWidget {<!-- --><br> final IconData icon;<br> final String title;</p> 
<p>const SettingItem({required this.icon, required this.title});</p> 
<p>@override<br> Widget build(BuildContext context) {<!-- --><br> return ListTile(<br> leading: Icon(icon),<br> title: Text(title),<br> trailing: Icon(Icons.arrow_forward_ios),<br> onTap: () =&gt; {},<br> );<br> }<br> }</p> 
<pre><code>
### 效果


效果如下图：  
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/c0848e54b76c4df0996bd54e4e3bada0.png)


## 总结


总结一下，image\_picker 插件是Flutter中一个方便的工具，用于在应用中从相册中选择图片或拍摄照片。使用这个插件，您可以轻松地实现图片选择和拍照功能，十分方便的实现替换图像的功能。


## 其他插件


Flutter提供了许多插件和包，可以帮助你在应用程序中操作相机和相册。以下是一些常用的Flutter插件，用于处理相机和相册功能：


### camera


[camera插件]( )是一个广泛使用的Flutter插件，它提供了用于访问和控制设备相机的API。你可以使用camera插件来捕获照片和录制视频。


### image\_picker


[image\_picker插件]( )允许用户从设备的相册中选择图片，也可以使用相机拍摄新照片。这是一个非常方便的插件，用于选择和处理图片。


### flutter\_image\_compress：


[flutter\_image\_compress]( )这个插件可以帮助你压缩和处理图片，特别是在你从相机或相册获取图片后，你可能需要将其进行压缩以减小文件大小。


### path\_provider


[path\_provider插件]( )用于获取设备上特定目录的路径，这对于存储从相机或相册选择的图片文件以及其他数据非常有用。


### image\_cropper


[image\_cropper插件]( )用于裁剪图片。如果你需要让用户选择图片后进行裁剪，这个插件是一个很好的选择。


这些插件在Flutter社区中非常受欢迎，并提供了丰富的功能，以便于在你的Flutter应用程序中操作相机和相册。你可以通过Flutter官方的包管理工具pub来安装和使用这些插件。要了解更多详情和示例，请查阅各个插件的文档和示例代码。请注意，插件的版本和功能可能会随时间而变化，因此请查看它们的GitHub页面或Flutter包管理器以获取最新信息。


掌握以上插件对Flutter操作相机和相册的操作基本就没有问题了。








**网上学习资料一大堆，但如果学到的知识不成体系，遇到问题时只是浅尝辄止，不再深入研究，那么很难做到真正的技术提升。**

**需要这份系统化的资料的朋友，可以添加V获取：vip1024b （备注运维）**
![img](https://img-blog.csdnimg.cn/img_convert/3f436ddecca29ba882341854428bf30c.jpeg)

**一个人可以走的很快，但一群人才能走的更远！不论你是正从事IT行业的老鸟或是对IT行业感兴趣的新人，都欢迎加入我们的的圈子（技术交流、学习资源、职场吐槽、大厂内推、面试辅导），让我们一起学习成长！**
机和相册的操作基本就没有问题了。








**网上学习资料一大堆，但如果学到的知识不成体系，遇到问题时只是浅尝辄止，不再深入研究，那么很难做到真正的技术提升。**

**需要这份系统化的资料的朋友，可以添加V获取：vip1024b （备注运维）**
[外链图片转存中...(img-f01JHUif-1713218884309)]

**一个人可以走的很快，但一群人才能走的更远！不论你是正从事IT行业的老鸟或是对IT行业感兴趣的新人，都欢迎加入我们的的圈子（技术交流、学习资源、职场吐槽、大厂内推、面试辅导），让我们一起学习成长！**
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0726b089d46247a7a800e33fe5ac89bc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">告诉世界，前端也能做 AI</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e7f6eca04ba5a81dc5f75a7391467c3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Sql Server、Oracle、MySQL如何备份表数据的多种方法？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>