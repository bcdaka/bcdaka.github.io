<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 之 Matplotlib 柱状图（竖直柱状图和水平柱状图）、直方图和饼状图 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c6e0decfb867ecc9eb5e7a00eae39178/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python 之 Matplotlib 柱状图（竖直柱状图和水平柱状图）、直方图和饼状图">
  <meta property="og:description" content="文章目录 一、柱状图二、竖直柱状图1. 基本的柱状图2. 同位置多柱状图3. 堆叠柱状图 三、水平柱状图1. 基本的柱状图2. 同位置多柱状图3. 堆叠柱状图 四、直方图 plt.hist()1. 返回值2. 添加折线直方图3. 不等距分组4. 多类型直方图5. 堆叠直方图 五、饼状图 pie()1. 百分比显示 percentage2. 饼状图的分离3. 设置饼状图百分比和文本距离中心位置4. 图例 在开始，我们先引入 matplotlib 和 numpy 库。 from matplotlib import pyplot as plt import numpy as np 对基本配置进行设置，将中文字体设置为黑体，不包含中文负号，分辨率为 100，图像显示大小设置为 (5,3)。 plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;] plt.rcParams[&#39;axes.unicode_minus&#39;] = False​ plt.rcParams[&#39;figure.dpi&#39;] = 100​ plt.rcParams[&#39;figure.figsize&#39;] = (5,3) 一、柱状图 柱状图是一种用矩形柱来表示数据分类的图表。柱状图可以垂直绘制，也可以水平绘制。它的高度与其所表示的数值成正比关系。柱状图显示了不同类别之间的比较关系，图表的水平轴 X 指定被比较的类别，垂直轴 Y 则表示具体的类别值 二、竖直柱状图 matplotlib.pyplot.bar(x, height, width: float = 0.8, bottom = None, *, align: str = ‘center’, data = None, **kwargs) 其参数具体如下含义：x 表示 x 坐标，数据类型为 float 类型，一般是通过 np.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-02-18T13:19:26+08:00">
    <meta property="article:modified_time" content="2023-02-18T13:19:26+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 之 Matplotlib 柱状图（竖直柱状图和水平柱状图）、直方图和饼状图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_14" rel="nofollow">一、柱状图</a></li><li><a href="#_21" rel="nofollow">二、竖直柱状图</a></li><li><ul><li><a href="#1__38" rel="nofollow">1. 基本的柱状图</a></li><li><a href="#2__97" rel="nofollow">2. 同位置多柱状图</a></li><li><a href="#3__216" rel="nofollow">3. 堆叠柱状图</a></li></ul> 
  </li><li><a href="#_260" rel="nofollow">三、水平柱状图</a></li><li><ul><li><a href="#1__261" rel="nofollow">1. 基本的柱状图</a></li><li><a href="#2__276" rel="nofollow">2. 同位置多柱状图</a></li><li><a href="#3__331" rel="nofollow">3. 堆叠柱状图</a></li></ul> 
  </li><li><a href="#_plthist_377" rel="nofollow">四、直方图 plt.hist()</a></li><li><ul><li><a href="#1__416" rel="nofollow">1. 返回值</a></li><li><a href="#2__449" rel="nofollow">2. 添加折线直方图</a></li><li><a href="#3__470" rel="nofollow">3. 不等距分组</a></li><li><a href="#4__481" rel="nofollow">4. 多类型直方图</a></li><li><a href="#5__494" rel="nofollow">5. 堆叠直方图</a></li></ul> 
  </li><li><a href="#_pie_511" rel="nofollow">五、饼状图 pie()</a></li><li><ul><li><a href="#1__percentage_543" rel="nofollow">1. 百分比显示 percentage</a></li><li><a href="#2__565" rel="nofollow">2. 饼状图的分离</a></li><li><a href="#3__575" rel="nofollow">3. 设置饼状图百分比和文本距离中心位置</a></li><li><a href="#4__585" rel="nofollow">4. 图例</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<ul><li>在开始，我们先引入 matplotlib 和 numpy 库。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
</code></pre> 
<ul><li>对基本配置进行设置，将中文字体设置为黑体，不包含中文负号，分辨率为 100，图像显示大小设置为 (5,3)。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>​
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.dpi'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>​
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_14"></a>一、柱状图</h2> 
<ul><li>柱状图是一种用矩形柱来表示数据分类的图表。</li><li>柱状图可以垂直绘制，也可以水平绘制。</li><li>它的高度与其所表示的数值成正比关系。</li><li>柱状图显示了不同类别之间的比较关系，图表的水平轴 X 指定被比较的类别，垂直轴 Y 则表示具体的类别值</li></ul> 
<p><img src="https://images2.imgbox.com/25/dd/Ph6YnAU7_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_21"></a>二、竖直柱状图</h2> 
<pre><code class="prism language-python">matplotlib<span class="token punctuation">.</span>pyplot<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token builtin">float</span> <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">,</span> bottom <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> align<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> ‘center’<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
</code></pre> 
<ul><li>其参数具体如下含义：</li><li>x 表示 x 坐标，数据类型为 float 类型，一般是通过 np.arange() 生成的固定步长列表。</li><li>height 表示柱状图的高度，也就是 y 坐标值，数据类型为 float 类型，一般为一个列表，包含生成柱状图的所有 y 值。</li><li>width 表示柱状图的宽度，取值在 0~1 之间，默认值为 0.8。</li><li>bottom 表示柱状图的起始位置，也就是 y 轴的起始坐标，默认值为 None。</li><li>align 表示柱状图的中心位置，“center”，“lege” 边缘，默认值为 ’center’。</li><li>color 表示柱状图颜色，默认为蓝色。</li><li>alpha 表示透明度，取值在 0~1 之间，默认值为 1。</li><li>label 表示标签，设置后需要调用 plt.legend() 生成。</li><li>edgecolor 表示边框颜色 (ec)。</li><li>linewidth 表示边框宽度，浮点数或类数组，默认为 None (lw)。</li><li>tick_label 表示柱子的刻度标签，字符串或字符串列表，默认值为 None。</li><li>linestyle 表示线条样式 (ls)。</li></ul> 
<h3><a id="1__38"></a>1. 基本的柱状图</h3> 
<ul><li>我们可以简单画一个柱状图用以观察，x 轴数据通过 range 函数生成，y 轴数据随便设定一个数组即可。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
​data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
​plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"基本柱状图"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>ls<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/84/ad/oJgLrWYd_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="red"><strong>（1） bottom 参数。</strong></font></li><li>bottom 参数表示的是柱状图的起始位置，也就是 y 轴的起始坐标，默认值为 None。</li><li>我们仍采用和上述例子相同的数据，但与之不同的是，我们对 y 轴数据的起始点进行修改。</li><li>这里需要注意的是，bottom 参数设定的数组与 y 轴数据的参数是一一对应的，而且，两个数组的形状要相同。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
​data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
​plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"基本柱状图"</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>ls<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> data<span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/70/f4/vFpjg5WO_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="red"><strong>（2） 柱状图颜色。</strong></font></li><li>关于柱状图的颜色，我们也采用上述的数据进行操作，此时，不设置柱状图的 bottom 参数，同时，将柱状图的颜色设置为绿色。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
​plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"设置柱状图颜色"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>ls<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> data <span class="token punctuation">,</span>facecolor<span class="token operator">=</span><span class="token string">"green"</span><span class="token punctuation">)</span>
<span class="token comment">#plt.bar(x, data ,color="green")</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f0/e0/xpiCCV42_o.png" alt="在这里插入图片描述"></p> 
<ul><li>那么，在某些特定的情况下，柱状图的单一颜色并不利于我们后续的观察，因此，我们可以使用 facecolor 函数，分别对每个柱状图进行颜色的设置。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
x <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"color参数设置柱状图不同颜色"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>ls<span class="token operator">=</span><span class="token string">"--"</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> data <span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9e/f2/0PoXUYld_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="red"><strong>（3） 柱状图描边。</strong></font></li><li>描边的相关的关键字参数为：</li><li>edgecolor 或 ec。</li><li>linestyle 或 ls。</li><li>linewidth 或 lw。</li><li>具体可见如下具体实例。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt​
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>​
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"设置边缘线条样式"</span><span class="token punctuation">)</span>​
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> ec<span class="token operator">=</span><span class="token string">'r'</span><span class="token punctuation">,</span> ls<span class="token operator">=</span><span class="token string">'--'</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/e6/lthsMyUT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__97"></a>2. 同位置多柱状图</h3> 
<ul><li>在同一个 x 轴位置绘制多个柱状图，主要是通过调整柱状图的宽度和每个柱状图 x 轴的起始位置。</li><li>例如，我们有 2022 年冬奥会挪威、德国、中国、美国和瑞典的金银铜牌数和总奖牌数。</li></ul> 
<p><img src="https://images2.imgbox.com/8c/0d/Q8RW4kOd_o.png" alt="在这里插入图片描述"></p> 
<ul><li>对此，我们需要绘制如下图形：</li></ul> 
<p><img src="https://images2.imgbox.com/16/52/ZJ6fVVXY_o.png" alt="在这里插入图片描述"></p> 
<ul><li>对该柱状图进行分析，可得：</li><li>（1） 本实例需要对 x 轴进行计算，因此需要将 x 轴转数值。</li><li>（2） 确定同一 x 轴中，每个柱状图 x 轴的起始位置。</li><li>（3） 需要设置图形的宽度。</li><li>（4） 图形 2 的起始位置 = 图形 1 起始位置 + 图形的宽度。</li><li>（5） 图形 3 的起始位置 = 图形 1 起始位置 + 2 倍图形的宽度。</li><li>（6） 需要给每个柱状图循环显示文本内容。</li><li>（7） 需要显示图例。</li><li><font color="red"><strong>具体柱状图绘制过程如下：</strong></font></li><li>首先，我们需要导入国家和各个国家的金银铜奖牌数。</li></ul> 
<pre><code class="prism language-python">countries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'挪威'</span><span class="token punctuation">,</span> <span class="token string">'德国'</span><span class="token punctuation">,</span> <span class="token string">'中国'</span><span class="token punctuation">,</span> <span class="token string">'美国'</span><span class="token punctuation">,</span> <span class="token string">'瑞典'</span><span class="token punctuation">]</span>
gold_medal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
silver_medal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
bronze_medal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
</code></pre> 
<ul><li>此时，如果我们直接进行绘制的话，会发现每个国家的奖牌柱状图发生了重叠，并且每个柱状图的宽度也过大。</li><li>这是因为他们都默认 y 轴的起始坐标也就是 bottom 参数为 0，宽度参数由于没有设置，默认是 0.8。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>countries<span class="token punctuation">,</span> gold_medal<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"gold"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>countries<span class="token punctuation">,</span>silver_medal<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"silver"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>countries<span class="token punctuation">,</span>bronze_medal<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"red"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/42/0b/piE9jwSB_o.png" alt="在这里插入图片描述"></p> 
<ul><li>针对上述在绘图过程当中出现的问题和最后结果的样图，我们需要将每个国家的金银铜牌柱状图分别画在一起，所以我们需要对 x 轴的国家参数进行坐标计算。</li><li>由于字符串不可以直接进行算术运算，因此，我们使用 np.arange 将他们转化成数组，然后在返回字符串国家，并将柱状图的宽度 width 设置为 0.2</li></ul> 
<pre><code class="prism language-python">x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
width <span class="token operator">=</span> <span class="token number">0.2</span>
<span class="token comment">#[0 1 2 3 4]</span>
</code></pre> 
<ul><li>随后，我们确定每个国家的金银铜牌柱状图的起始位置。</li><li>金牌呃起始位置就是每个国家对应的 x 数值，银牌的起始位置就是每个国家对应的 x 数值再加上金牌柱状图的宽度，铜牌的起始位置与银牌相似，加上两倍的金牌位置即可（这里我们将每个柱状图的宽度均设置为 0.2）。</li></ul> 
<pre><code class="prism language-python">gold_x <span class="token operator">=</span> x​
silver_x <span class="token operator">=</span> x <span class="token operator">+</span> width
​bronze_x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> width
</code></pre> 
<ul><li>在上述运行完成后，分别绘制图形即可。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>gold_x<span class="token punctuation">,</span>gold_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"gold"</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>silver_x<span class="token punctuation">,</span>silver_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"silver"</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>bronze_x<span class="token punctuation">,</span>bronze_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"saddlebrown"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/ff/3AY6slx0_o.png" alt="在这里插入图片描述"></p> 
<ul><li>此时，我们注意到，绘制柱状图的横坐标是数字还没有返回我们的国家参数。</li><li>对此，我们需要将 x 轴的坐标变回来。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x<span class="token operator">+</span>width<span class="token punctuation">,</span> labels<span class="token operator">=</span>countries<span class="token punctuation">)</span>​
</code></pre> 
<p><img src="https://images2.imgbox.com/99/85/pVqb8cPV_o.png" alt="在这里插入图片描述"></p> 
<ul><li>最后，我们显示出每一个柱状图的高度参数和图例，就得到了我们需要的图像。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>gold_x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>silver_x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>silver_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>bronze_x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>bronze_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>  
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a9/a7/Q5lZecfG_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="red"><strong>代码汇总：</strong></font></li></ul> 
<pre><code class="prism language-python"><span class="token comment">#库导入</span>
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment">#参数设置</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.dpi'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">#国家和奖牌数据导入</span>
countries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'挪威'</span><span class="token punctuation">,</span> <span class="token string">'德国'</span><span class="token punctuation">,</span> <span class="token string">'中国'</span><span class="token punctuation">,</span> <span class="token string">'美国'</span><span class="token punctuation">,</span> <span class="token string">'瑞典'</span><span class="token punctuation">]</span>
gold_medal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
silver_medal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
bronze_medal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

<span class="token comment">#将横坐标国家转换为数值</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">)</span>
width <span class="token operator">=</span> <span class="token number">0.2</span>

<span class="token comment">#计算每一块的起始坐标</span>
gold_x <span class="token operator">=</span> x
silver_x <span class="token operator">=</span> x <span class="token operator">+</span> width
bronze_x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> width

<span class="token comment">#绘图</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>gold_x<span class="token punctuation">,</span>gold_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"gold"</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">"金牌"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>silver_x<span class="token punctuation">,</span>silver_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token string">"silver"</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">"银牌"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>bronze_x<span class="token punctuation">,</span>bronze_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"saddlebrown"</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">"铜牌"</span><span class="token punctuation">)</span>

<span class="token comment">#将横坐标数值转换为国家</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>x <span class="token operator">+</span> width<span class="token punctuation">,</span>labels<span class="token operator">=</span>countries<span class="token punctuation">)</span>

<span class="token comment">#显示柱状图的高度文本</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>gold_x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>silver_x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>silver_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>bronze_x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>bronze_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>  

<span class="token comment">#显示图例</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">"upper right"</span><span class="token punctuation">)</span> 
</code></pre> 
<ul><li><font color="red"><strong>其他知识点：在 Matplotlib 中旋转 X 轴刻度标签文本。</strong></font></li><li>（1） plt.xticks(rotation= ) 旋转 Xticks 标签文本。</li><li>（2） fig.autofmt_xdate(rotation= ) 旋转 Xticks 标签文本。</li><li>（3） ax.set_xticklabels(xlabels, rotation= ) 旋转 Xticks 标签文本。</li><li>（4） plt.setp(ax.get_xticklabels(), rotation=) 旋转 Xticks 标签文本。</li><li>（5） ax.tick_params(axis=‘x’, labelrotation= ) 旋转 Xticks 标签文本。</li></ul> 
<h3><a id="3__216"></a>3. 堆叠柱状图</h3> 
<ul><li>所谓堆叠柱状图就是将不同数组别的柱状图堆叠在一起，堆叠后的柱状图高度显示了两者相加的结果值。 如图：</li></ul> 
<p><img src="https://images2.imgbox.com/e9/b2/CtHDcP4k_o.png" alt="在这里插入图片描述"></p> 
<ul><li>对该图进行分析可得：</li><li>（1） 金牌榜的起始高度为：铜牌数据+银牌数据。</li><li>（2） 银牌榜的起始高度为：银牌高度。</li><li>（3） 铜牌榜的起始高度为：0。</li><li>（4） 起始位置的数据相加需要使用 numpy 的相关知识。</li><li>（6） 需要确定柱状图的颜色。</li><li>（7） 显示图例。</li><li>具体的绘制办法，跟上一个同位置多柱状图是完全类似的，区别在于我们需要注意 bottom 的数值计算，同时，金银铜牌的起始坐标是完全相同的。</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#库导入</span>
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment">#参数设置</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.dpi'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">#国家和奖牌数据输入、柱状图宽度设置</span>
countries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'挪威'</span><span class="token punctuation">,</span> <span class="token string">'德国'</span><span class="token punctuation">,</span> <span class="token string">'中国'</span><span class="token punctuation">,</span> <span class="token string">'美国'</span><span class="token punctuation">,</span> <span class="token string">'瑞典'</span><span class="token punctuation">]</span>
gold_medal <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
silver_medal <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
bronze_medal <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
​width <span class="token operator">=</span> <span class="token number">0.3</span>

<span class="token comment">#绘图</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>countries<span class="token punctuation">,</span> gold_medal<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'gold'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'金牌'</span><span class="token punctuation">,</span>
        bottom<span class="token operator">=</span>silver_medal <span class="token operator">+</span> bronze_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>countries<span class="token punctuation">,</span> silver_medal<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'silver'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'银牌'</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span>bronze_medal<span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>countries<span class="token punctuation">,</span> bronze_medal<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'#A0522D'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'铜牌'</span><span class="token punctuation">,</span>width<span class="token operator">=</span>width<span class="token punctuation">)</span>

<span class="token comment">#设置y轴标签，图例和文本值</span>
​plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'奖牌数'</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'upper right'</span><span class="token punctuation">)</span>
​<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>countries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    max_y <span class="token operator">=</span> bronze_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>silver_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>gold_medal<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>countries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> max_y<span class="token punctuation">,</span> max_y<span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">"bottom"</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">"center"</span><span class="token punctuation">)</span>​
</code></pre> 
<p>​<img src="https://images2.imgbox.com/99/e2/H5sk3gav_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_260"></a>三、水平柱状图</h2> 
<h3><a id="1__261"></a>1. 基本的柱状图</h3> 
<ul><li>通过调用 Matplotlib 中的 barh() 函数可以生成水平柱状图。</li><li>barh() 函数的用法与 bar() 函数的用法基本一样，只是在调用 barh() 函数时使用 y 参数传入 y 轴数据，使用 width 参数传入代表条柱宽度的数据。</li><li>ha（horizontal alignment）控制文本的 x 位置参数表示文本边界框的左边，中间或右边。</li><li>va（vertical alignment）控制文本的 y位置参数表示文本边界框的底部，中心或顶部。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> left<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> align<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
</code></pre> 
<ul><li>例如，我们以竖直柱状图当中的国家金牌数为例进行绘制。</li></ul> 
<pre><code class="prism language-python">countries <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'挪威'</span><span class="token punctuation">,</span> <span class="token string">'德国'</span><span class="token punctuation">,</span> <span class="token string">'中国'</span><span class="token punctuation">,</span> <span class="token string">'美国'</span><span class="token punctuation">,</span> <span class="token string">'瑞典'</span><span class="token punctuation">]</span>
gold_medal <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>countries<span class="token punctuation">,</span> width<span class="token operator">=</span>gold_medal<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f8/2b/NWj23RN4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__276"></a>2. 同位置多柱状图</h3> 
<ul><li>在同一个 y 轴位置绘制多个柱状图，主要是通过调整柱状图的宽度和每个柱状图 y 轴的起始位置。</li><li>例如，我们有最近三天当中 3 部电影的票房变化的数据。</li></ul> 
<pre><code class="prism language-python">movie <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'新蝙蝠侠'</span><span class="token punctuation">,</span> <span class="token string">'狙击手'</span><span class="token punctuation">,</span> <span class="token string">'奇迹笨小孩'</span><span class="token punctuation">]</span>
real_day1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4053</span><span class="token punctuation">,</span> <span class="token number">2548</span><span class="token punctuation">,</span> <span class="token number">1543</span><span class="token punctuation">]</span>
real_day2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7840</span><span class="token punctuation">,</span> <span class="token number">4013</span><span class="token punctuation">,</span> <span class="token number">2421</span><span class="token punctuation">]</span>
real_day3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token number">3673</span><span class="token punctuation">,</span> <span class="token number">1342</span><span class="token punctuation">]</span>
</code></pre> 
<ul><li>对此，我们需要绘制如下图像。<br> <img src="https://images2.imgbox.com/b0/90/jko3og6f_o.png" alt="在这里插入图片描述"></li><li>对该图进行分析可得：</li><li>（1） 由于牵扯高度的计算，因此先将 y 轴转换为数值型。</li><li>（2） 需要设置同图形的高度。</li><li>（3） 计算每个图形高度的起始位置。</li><li>（4） 绘制图形。</li><li>（5） 替换 y 轴数据。</li><li>由于牵扯计算，因此将数据转 numpy 数组，水平的用位置多柱状图绘制方法与竖直的完全相同，在此便不过多叙述了。</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#库导入</span>
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment">#参数设置</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.dpi'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">#数据的输入</span>
movie <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'新蝙蝠侠'</span><span class="token punctuation">,</span> <span class="token string">'狙击手'</span><span class="token punctuation">,</span> <span class="token string">'奇迹笨小孩'</span><span class="token punctuation">]</span>
real_day1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">4053</span><span class="token punctuation">,</span> <span class="token number">2548</span><span class="token punctuation">,</span> <span class="token number">1543</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
​real_day2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7840</span><span class="token punctuation">,</span> <span class="token number">4013</span><span class="token punctuation">,</span> <span class="token number">2421</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
​real_day3 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token number">3673</span><span class="token punctuation">,</span> <span class="token number">1342</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
​​
<span class="token comment">#y轴转换为数值型</span>
num_y <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>movie<span class="token punctuation">)</span><span class="token punctuation">)</span>
​
<span class="token comment">#设置同图形的高度</span>
height <span class="token operator">=</span> <span class="token number">0.2</span>
​
<span class="token comment">#计算每个图形高度的起始位置</span>
movie1_start_y <span class="token operator">=</span> num_y              
movie2_start_y <span class="token operator">=</span> num_y <span class="token operator">+</span> height      
movie3_start_y <span class="token operator">=</span> num_y <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> height  ​
​
<span class="token comment">#绘制图形​</span>
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>movie1_start_y<span class="token punctuation">,</span> real_day1<span class="token punctuation">,</span> height<span class="token operator">=</span>height<span class="token punctuation">)</span>​
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>movie2_start_y<span class="token punctuation">,</span> real_day2<span class="token punctuation">,</span>  height<span class="token operator">=</span>height<span class="token punctuation">)</span>​
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>movie3_start_y<span class="token punctuation">,</span> real_day3<span class="token punctuation">,</span> height<span class="token operator">=</span>height<span class="token punctuation">)</span>
​
<span class="token comment"># 计算宽度值和y轴值，替换y轴数据</span>
​plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>num_y <span class="token operator">+</span> height<span class="token punctuation">,</span> movie<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9d/45/rNXS7OM0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__331"></a>3. 堆叠柱状图</h3> 
<ul><li>水平的堆叠柱状图与竖直的堆叠柱状图类似都是将不同数组别的柱状图堆叠在一起，堆叠后的柱状图高度显示了两者相加的结果值。 如图：</li></ul> 
<p><img src="https://images2.imgbox.com/c0/44/izqdeLVs_o.png" alt="在这里插入图片描述"></p> 
<ul><li>对该图进行分析可得：</li><li>（1） 确定图形距离左侧的位置。</li><li>（2） 设置同一宽度。</li><li>（3） 绘制图形设置 left 参数。</li><li>（4） 标注数据。</li><li>由于过程当中牵扯到计算，因此需要将数据转 numpy 数组。</li><li>其他部分与绘制竖直堆叠柱状图的过程类似，在此便不过多进行叙述。</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#库导入</span>
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment">#参数设置</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.dpi'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">#数据的输入</span>
movie <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'新蝙蝠侠'</span><span class="token punctuation">,</span> <span class="token string">'狙击手'</span><span class="token punctuation">,</span> <span class="token string">'奇迹笨小孩'</span><span class="token punctuation">]</span>
real_day1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">4053</span><span class="token punctuation">,</span> <span class="token number">2548</span><span class="token punctuation">,</span> <span class="token number">1543</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
real_day2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7840</span><span class="token punctuation">,</span> <span class="token number">4013</span><span class="token punctuation">,</span> <span class="token number">2421</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
real_day3 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">8080</span><span class="token punctuation">,</span> <span class="token number">3673</span><span class="token punctuation">,</span> <span class="token number">1342</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
​
<span class="token comment">#确定距离左侧​</span>
left_day2 <span class="token operator">=</span> real_day1​
left_day3 <span class="token operator">=</span> real_day1 <span class="token operator">+</span> real_day2 
​
<span class="token comment"># 设置线条高度</span>
height <span class="token operator">=</span> <span class="token number">0.2</span>
​
<span class="token comment"># 绘制图形:</span>
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>movie<span class="token punctuation">,</span> real_day1<span class="token punctuation">,</span> height<span class="token operator">=</span>height<span class="token punctuation">)</span>​
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>movie<span class="token punctuation">,</span> real_day2<span class="token punctuation">,</span> left<span class="token operator">=</span>left_day2<span class="token punctuation">,</span> height<span class="token operator">=</span>height<span class="token punctuation">)</span> ​
plt<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>movie<span class="token punctuation">,</span> real_day3<span class="token punctuation">,</span> left<span class="token operator">=</span>left_day3<span class="token punctuation">,</span> height<span class="token operator">=</span>height<span class="token punctuation">)</span> 
​
<span class="token comment"># 设置数值文本，计算宽度值和y轴为值​</span>
sum_data <span class="token operator">=</span> real_day1 <span class="token operator">+</span> real_day2 <span class="token operator">+</span>real_day3
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>movie<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>sum_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> movie<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> sum_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>va<span class="token operator">=</span><span class="token string">"center"</span> <span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">"left"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/84/H6jbsi7x_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_plthist_377"></a>四、直方图 plt.hist()</h2> 
<ul><li>直方图（Histogram），又称质量分布图，它是一种条形图的一种，由一系列高度不等的纵向线段来表示数据分布的情况。 直方图的横轴表示数据类型，纵轴表示分布情况。</li><li>柱状图和直方图的区别：</li><li>直方图用于概率分布，它显示了一组数值序列在给定的数值范围内出现的概率。</li><li>柱状图则用于展示各个类别的频数。</li></ul> 
<p><img src="https://images2.imgbox.com/1f/a4/vPveM6Ar_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th>柱状图</th><th>直方图</th></tr></thead><tbody><tr><td>柱状图一般用于描述离散型分类数据的对比</td><td>直方图一般用于描述连续型数据的分布关系</td></tr><tr><td>每根柱子宽度固定，柱子之间会有间距</td><td>每根柱子宽度可以不一样，且一般没有间距</td></tr><tr><td>横轴变量可以任意排序</td><td>横轴变量有一定顺序规则</td></tr></tbody></table> 
<ul><li>将统计值的范围分段，即将整个值的范围分成一系列间隔，然后计算每个间隔中有多少值。 直方图也可以被归一化以显示相对频率。 然后，它显示了属于几个类别中的每个类别的占比，其高度总和等于 1。</li><li>其语法模板如下：</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> density<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> weights<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> cumulative<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> histtype<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">,</span> align<span class="token operator">=</span><span class="token string">'mid'</span><span class="token punctuation">,</span> orientation<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span> rwidth<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> log<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> stacked<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> normed<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> data<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
</code></pre> 
<ul><li>其参数具体如下含义：</li><li>x：作直方图所要用的数据，必须是一维数组；多维数组可以先进行扁平化再作图；必选参数。</li><li>bins：直方图的柱数，即要分的组数，默认为 10。</li><li>weights：与 x 形状相同的权重数组；将 x 中的每个元素乘以对应权重值再计数；如果 normed 或 density 取值为 True，则会对权重进行归一化处理。这个参数可用于绘制已合并的数据的直方图。</li><li>density：布尔,可选。如果为 True，返回元组的第一个元素将会将计数标准化以形成一个概率密度，也就是说，直方图下的面积（或积分）总和为 1。这是通过将计数除以数字的数量来实现的观察乘以箱子的宽度而不是除以总数数量的观察。如果叠加也是真实的，那么柱状图被规范化为 1(替代 normed)。</li><li>bottom：数组，标量值或 None；每个柱子底部相对于 y=0 的位置。如果是标量值，则每个柱子相对于 y=0 向上/向下的偏移量相同。如果是数组，则根据数组元素取值移动对应的柱子；即直方图上下便宜距离。</li><li>histtype：{‘bar’, ‘barstacked’, ‘step’, ‘stepfilled’}；bar 是传统的条形直方图；barstacked 是堆叠的条形直方图；step 是未填充的条形直方图，只有外边框；stepfilled 是有填充的直方图；当 histtype 取值为 step 或 stepfilled，rwidth 设置失效，即不能指定柱子之间的间隔，默认连接在一起。</li><li>align：{‘left’, ‘mid’, ‘right’}；left 是柱子的中心位于 bins 的左边缘；mid 是柱子位于 bins 左右边缘之间；right 是柱子的中心位于 bins 的右边缘。</li><li>color：具体颜色，数组（元素为颜色）或 None。</li><li>label：字符串（序列）或 None；有多个数据集时，用 label 参数做标注区分。</li><li>normed: 是否将得到的直方图向量归一化，即显示占比，默认为 0，不归一化；不推荐使用，建议改用 density 参数。</li><li>edgecolor: 直方图边框颜色。</li><li>alpha: 透明度。</li><li>例如，我们可以使用 np.random.randint 随机生成 300 个在区间 [140,180]（不包含 180）随机数据。</li></ul> 
<pre><code class="prism language-python">x_value <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x_value<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"数据统计"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"身高"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"比率"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b3/4c/b8Yj9Z2L_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1__416"></a>1. 返回值</h3> 
<ul><li>n：数组或数组列表，返回直方图的值。</li><li>bins：数组，返回各个 bin 的区间范围。</li><li>patches：列表的列表或列表，返回每个 bin 里面包含的数据，是一个 list。</li><li>以上个例子进行试验，分别对 num，bins 和 patches 的返回值进行观察。</li></ul> 
<pre><code class="prism language-python">num
<span class="token comment">#array([25., 28., 34., 39., 29., 25., 37., 34., 26., 23.])</span>

bins_limit
<span class="token comment">#array([140. , 143.9, 147.8, 151.7, 155.6, 159.5, 163.4, 167.3, 171.2,</span>
<span class="token comment">#       175.1, 179. ])</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> patches<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>get_x<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>get_y<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>get_height<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>get_width<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f0/c7/47OUuuNJ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">patches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_width<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#3.9000000000000057</span>
</code></pre> 
<ul><li><font color="red"><strong>知识点补充：</strong></font></li><li>xy：xy 位置（x 取值 bins_limits 是分组时的分隔值，y 取值都是 0 开始）。</li><li>width：宽度为各个 bin 的区间范围（bins_limits 是分组时的分隔值）。</li><li>height：高度也就是密度值（n 是分组区间对应的频率）。</li><li>angle：角度。</li><li>以最开始的直方图为例，进行上述参数的观察。</li></ul> 
<p><img src="https://images2.imgbox.com/c8/20/9eDTaXMt_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__449"></a>2. 添加折线直方图</h3> 
<ul><li>在直方图中，我们也可以加一个折线图，辅助我们查看数据变化情况。</li><li>首先通过 pyplot.subplots() 创建 Axes 对象。</li><li>通过 Axes 对象调用 hist() 方法绘制直方图，返回折线图所需要的下 x,y 数据。</li><li>然后 Axes 对象调用 plot() 绘制折线图。</li><li>我们对前面的代码进行修改即可。</li></ul> 
<pre><code class="prism language-python"><span class="token comment">#创建一个画布</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
​
<span class="token comment"># 绘制直方图</span>
num<span class="token punctuation">,</span>bins_limit<span class="token punctuation">,</span>patches <span class="token operator">=</span> ax<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x_value<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>
​
<span class="token comment"># 注意num返回的个数是10,bins_limit返回的个数为11,需要截取</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>bins_limit<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 曲线图</span>
ax<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>bins_limit<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> <span class="token string">'--'</span><span class="token punctuation">,</span>marker<span class="token operator">=</span><span class="token string">"o"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>bins_limit<span class="token punctuation">,</span>rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/06/8c/iDRLKAoI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__470"></a>3. 不等距分组</h3> 
<ul><li>面的直方图都是等距的，但有时我们需要得到不等距的直方图，这个时候只需要确定分组上下限，并指定 histtype=“bar” 就可以。</li></ul> 
<pre><code class="prism language-python">fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
bins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">]</span>
ax<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x<span class="token punctuation">,</span> bins<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"g"</span><span class="token punctuation">,</span>rwidth<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'不等距分组'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8b/e7/7Ia5VDb1_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4__481"></a>4. 多类型直方图</h3> 
<ul><li>我们在使用直方图查查看数据的频率时，有时候会查看多种类型数据出现的频率。</li><li>这时候我们可以以列表的形式传入多种数据给 hist() 方法的 x 数据。</li><li>我们指定 10 个分组个数，每组有 ABC 三类，分别生成 10000，5000，2000 个值，实际绘图代码与单类型直方图差异不大，只是增加了一个图例项，在 ax.hist 函数中先指定图例 label 名称。</li></ul> 
<pre><code class="prism language-python">n_bins<span class="token operator">=</span><span class="token number">10</span>
​fig<span class="token punctuation">,</span>ax<span class="token operator">=</span>plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
​x_multi <span class="token operator">=</span> <span class="token punctuation">[</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
​ax<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>x_multi<span class="token punctuation">,</span> n_bins<span class="token punctuation">,</span> histtype<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
​ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">'多类型直方图'</span><span class="token punctuation">)</span>
​ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7d/d3/a72jGSFQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5__494"></a>5. 堆叠直方图</h3> 
<ul><li>我们有时候会对吧同样数据范围情况下，对比两组不同对象群体收集的数据差异。</li><li>对此，我们准备两组数据：</li></ul> 
<pre><code class="prism language-python">x_value <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
x2_value <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>直方图属性 data：以列表的形式传入两组数据。</li><li>设置直方图 stacked：为 True，允许数据覆盖。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span><span class="token punctuation">[</span>x_value<span class="token punctuation">,</span>x2_value<span class="token punctuation">]</span><span class="token punctuation">,</span>bins<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> stacked<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">#([array([16., 23., 27., 22., 13., 22., 18., 21., 18., 20.]),</span>
<span class="token comment">#  array([39., 46., 44., 35., 33., 47., 41., 42., 33., 40.])],</span>
<span class="token comment"># array([140. , 143.9, 147.8, 151.7, 155.6, 159.5, 163.4, 167.3, 171.2,</span>
<span class="token comment">#        175.1, 179. ]),</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f7/f3/u7otohx8_o.png" alt="在这里插入图片描述">​</p> 
<h2><a id="_pie_511"></a>五、饼状图 pie()</h2> 
<ul><li>饼状图用来显示一个数据系列，具体来说，饼状图显示一个数据系列中各项目的占项目总和的百分比。</li><li>Matplotlib 提供了一个 pie() 函数，该函数可以生成数组中数据的饼状图。您可使用 x/sum(x) 来计算各个扇形区域占饼图总和的百分比。</li><li>pie() 函数的语法模板如下：</li></ul> 
<pre><code class="prism language-python">pyplot<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span> explode<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> labels<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> colors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> autopct<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>pie() 函数的参数说明如下：</li><li>x：数组序列，数组元素对应扇形区域的数量大小。</li><li>labels：列表字符串序列，为每个扇形区域备注一个标签名字。</li><li>colors：为每个扇形区域设置颜色，默认按照颜色周期自动设置。</li><li>autopct：格式化字符串 “fmt%pct”，使用百分比的格式设置每个扇形区的标签，并将其放置在扇形区内。</li><li>pctdistance：设置百分比标签与圆心的距离。</li><li>labeldistance：设置各扇形标签（图例）与圆心的距离。</li><li>explode：指定饼图某些部分的突出显示，即呈现爆炸式。</li><li>shadow：是否添加饼图的阴影效果。</li></ul> 
<p><img src="https://images2.imgbox.com/c9/3e/5kSdcmxU_o.png" alt="在这里插入图片描述"></p> 
<ul><li>例如，我们将大小设置为 (5,5)，定义饼的标签，每个标签所占的数量，绘制饼图。</li></ul> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'娱乐'</span><span class="token punctuation">,</span><span class="token string">'育儿'</span><span class="token punctuation">,</span><span class="token string">'饮食'</span><span class="token punctuation">,</span><span class="token string">'房贷'</span><span class="token punctuation">,</span><span class="token string">'交通'</span><span class="token punctuation">,</span><span class="token string">'其它'</span><span class="token punctuation">]</span>
​x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">7000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">]</span>
​plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span>labels<span class="token operator">=</span>labels<span class="token punctuation">)</span>
<span class="token comment">#[Text(1.09783,0.0690696,'娱乐'),</span>
<span class="token comment">#  Text(1.05632,0.30689,'育儿'),</span>
<span class="token comment">#  Text(0.753002,0.801865,'饮食'),</span>
<span class="token comment">#  Text(-1.06544,-0.273559,'房贷'),</span>
<span class="token comment">#  Text(0.889919,-0.646564,'交通'),</span>
<span class="token comment">#  Text(1.05632,-0.30689,'其它')])</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4c/28/Ujy83GyL_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1__percentage_543"></a>1. 百分比显示 percentage</h3> 
<ul><li>autopct：格式化字符串。</li><li>我们定义饼的标签，每个标签所占的数量，%.2f%% 显示百分比，保留 2 位小数。</li></ul> 
<pre><code class="prism language-python">labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'娱乐'</span><span class="token punctuation">,</span><span class="token string">'育儿'</span><span class="token punctuation">,</span><span class="token string">'饮食'</span><span class="token punctuation">,</span><span class="token string">'房贷'</span><span class="token punctuation">,</span><span class="token string">'交通'</span><span class="token punctuation">,</span><span class="token string">'其它'</span><span class="token punctuation">]</span>
​x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">7000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">]</span>
​plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"饼图示例-8月份家庭支出"</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span>labels<span class="token operator">=</span>labels<span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%.2f%%'</span><span class="token punctuation">)</span>
<span class="token comment">#[Text(1.09783,0.0690696,'娱乐'),</span>
<span class="token comment">#  Text(1.05632,0.30689,'育儿'),</span>
<span class="token comment">#  Text(0.753002,0.801865,'饮食'),</span>
<span class="token comment">#  Text(-1.06544,-0.273559,'房贷'),</span>
<span class="token comment">#  Text(0.889919,-0.646564,'交通'),</span>
<span class="token comment">#  Text(1.05632,-0.30689,'其它')],</span>
<span class="token comment"># [Text(0.598816,0.0376743,'2.00%'),</span>
<span class="token comment">#  Text(0.576176,0.167395,'5.00%'),</span>
<span class="token comment">#  Text(0.410728,0.437381,'12.00%'),</span>
<span class="token comment">#  Text(-0.58115,-0.149214,'70.00%'),</span>
<span class="token comment">#  Text(0.48541,-0.352671,'2.00%'),</span>
<span class="token comment">#  Text(0.576176,-0.167395,'9.00%')])</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/d6/5bVrNW4n_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__565"></a>2. 饼状图的分离</h3> 
<ul><li>explode：指定饼图某些部分的突出显示。</li><li>我们定义饼的标签，每个标签所占的数量，%.2f%% 显示百分比，保留 2 位小数。</li></ul> 
<pre><code class="prism language-python">labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'娱乐'</span><span class="token punctuation">,</span><span class="token string">'育儿'</span><span class="token punctuation">,</span><span class="token string">'饮食'</span><span class="token punctuation">,</span><span class="token string">'房贷'</span><span class="token punctuation">,</span><span class="token string">'交通'</span><span class="token punctuation">,</span><span class="token string">'其它'</span><span class="token punctuation">]</span>
x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">7000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">]</span>
​explode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.03</span><span class="token punctuation">,</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token number">0.06</span><span class="token punctuation">,</span><span class="token number">0.04</span><span class="token punctuation">,</span><span class="token number">0.08</span><span class="token punctuation">,</span><span class="token number">0.21</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span>labels<span class="token operator">=</span>labels<span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%3.2f%%'</span><span class="token punctuation">,</span>explode<span class="token operator">=</span>explode<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/33/lO2x7COC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__575"></a>3. 设置饼状图百分比和文本距离中心位置</h3> 
<ul><li>pctdistance：设置百分比标签与圆心的距离。</li><li>labeldistance：设置各扇形标签（图例）与圆心的距离。</li></ul> 
<pre><code class="prism language-python">labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'娱乐'</span><span class="token punctuation">,</span><span class="token string">'育儿'</span><span class="token punctuation">,</span><span class="token string">'饮食'</span><span class="token punctuation">,</span><span class="token string">'房贷'</span><span class="token punctuation">,</span><span class="token string">'交通'</span><span class="token punctuation">,</span><span class="token string">'其它'</span><span class="token punctuation">]</span>
​x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">7000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">]</span>
​explode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.03</span><span class="token punctuation">,</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token number">0.06</span><span class="token punctuation">,</span><span class="token number">0.04</span><span class="token punctuation">,</span><span class="token number">0.08</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span>labels<span class="token operator">=</span>labels<span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%3.2f%%'</span><span class="token punctuation">,</span>explode<span class="token operator">=</span>explode<span class="token punctuation">,</span> labeldistance<span class="token operator">=</span><span class="token number">1.35</span><span class="token punctuation">,</span> pctdistance<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b3/8b/MaDXK0wS_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4__585"></a>4. 图例</h3> 
<pre><code class="prism language-python">labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'娱乐'</span><span class="token punctuation">,</span><span class="token string">'育儿'</span><span class="token punctuation">,</span><span class="token string">'饮食'</span><span class="token punctuation">,</span><span class="token string">'房贷'</span><span class="token punctuation">,</span><span class="token string">'交通'</span><span class="token punctuation">,</span><span class="token string">'其它'</span><span class="token punctuation">]</span>
​x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">,</span><span class="token number">7000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">900</span><span class="token punctuation">]</span>
​explode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.03</span><span class="token punctuation">,</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token number">0.06</span><span class="token punctuation">,</span><span class="token number">0.04</span><span class="token punctuation">,</span><span class="token number">0.08</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span>
​plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span>labels<span class="token operator">=</span>labels<span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%3.2f%%'</span><span class="token punctuation">,</span>explode<span class="token operator">=</span>explode<span class="token punctuation">,</span> labeldistance<span class="token operator">=</span><span class="token number">1.35</span><span class="token punctuation">,</span> pctdistance<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/a8/MQCoAkC2_o.png" alt="在这里插入图片描述"></p> 
<ul><li>可以通过设置 x,y 的刻度一样，使其饼图为正圆 plt.axis(‘equal’)。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b759724e869ab94cc8c0f77b25c590ea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【yolov5】将标注好的数据集进行划分（附完整可运行python代码）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f0107422918afbf88e47112a7c38189/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于html&#43;js实现轮播图（自动轮播、左右按钮、小圆点点击及切换图片）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>