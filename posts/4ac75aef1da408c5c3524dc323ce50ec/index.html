<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>掌握ESP32的WiFi功能：全面指南 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4ac75aef1da408c5c3524dc323ce50ec/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="掌握ESP32的WiFi功能：全面指南">
  <meta property="og:description" content="第一部分：使用ESP32进行WiFi扫描和网络连接
引言
欢迎来到我们深入探讨使用ESP32进行WiFi功能的第一部分，ESP32是一款多功能且强大的微控制器，非常适用于物联网应用。在本节中，我们将重点关注WiFi扫描和连接到网络，这是任何物联网开发者的基本技能。本指南将向您介绍ESP32上WiFi技术的基础知识，演示如何扫描可用网络，并解释如何建立与WiFi网络的连接。
了解ESP32上的WiFi扫描
WiFi扫描是ESP32搜索附近可用WiFi网络的过程。这个功能对需要在不同位置连接到不同网络的物联网设备非常重要。
为什么WiFi扫描很重要：
网络选择的灵活性：使设备能够选择并连接到最强的可用网络。网络分析：用于分析给定区域内网络的强度和可用性。 设置ESP32进行WiFi扫描：
在进行扫描之前，必须正确配置ESP32并包括必要的WiFi库。 实施WiFi扫描：
编写代码以将ESP32初始化为Station模式。实施扫描可用网络并检索它们的详细信息，如SSID、RSSI和加密类型。 示例代码：WiFi网络扫描
以下是一个简单的程序，用于扫描可用的WiFi网络并打印它们的详细信息：
#include &lt;WiFi.h&gt; void setup() { Serial.begin(115200); // 初始化WiFi为Station模式 WiFi.mode(WIFI_STA); WiFi.disconnect(); delay(100); Serial.println(&#34;正在扫描WiFi网络...&#34;); int networkCount = WiFi.scanNetworks(); if (networkCount == 0) { Serial.println(&#34;未找到任何网络&#34;); } else { Serial.print(networkCount); Serial.println(&#34; 个网络已找到：&#34;); for (int i = 0; i &lt; networkCount; &#43;&#43;i) { Serial.print(&#34;网络名称：&#34;); Serial.println(WiFi.SSID(i)); Serial.print(&#34;信号强度：&#34;); Serial.println(WiFi.RSSI(i)); Serial.println(&#34;-----------------------&#34;); } } } void loop() { // 暂时没有内容 } 这段代码初始化ESP32以执行WiFi扫描，并打印每个可用网络的SSID和RSSI（信号强度）。
连接到WiFi网络
一旦识别到可用网络，下一步就是连接到其中之一。
网络连接基础：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-01T22:24:12+08:00">
    <meta property="article:modified_time" content="2024-01-01T22:24:12+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">掌握ESP32的WiFi功能：全面指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>第一部分：使用ESP32进行WiFi扫描和网络连接</strong></p> 
<p><strong>引言</strong></p> 
<p>欢迎来到我们深入探讨使用ESP32进行WiFi功能的第一部分，ESP32是一款多功能且强大的微控制器，非常适用于物联网应用。在本节中，我们将重点关注WiFi扫描和连接到网络，这是任何物联网开发者的基本技能。本指南将向您介绍ESP32上WiFi技术的基础知识，演示如何扫描可用网络，并解释如何建立与WiFi网络的连接。</p> 
<p><strong>了解ESP32上的WiFi扫描</strong></p> 
<p>WiFi扫描是ESP32搜索附近可用WiFi网络的过程。这个功能对需要在不同位置连接到不同网络的物联网设备非常重要。</p> 
<ol><li> <p><strong>为什么WiFi扫描很重要</strong>：</p> 
  <ul><li><strong>网络选择的灵活性</strong>：使设备能够选择并连接到最强的可用网络。</li><li><strong>网络分析</strong>：用于分析给定区域内网络的强度和可用性。</li></ul> </li><li> <p><strong>设置ESP32进行WiFi扫描</strong>：</p> 
  <ul><li>在进行扫描之前，必须正确配置ESP32并包括必要的WiFi库。</li></ul> </li><li> <p><strong>实施WiFi扫描</strong>：</p> 
  <ul><li>编写代码以将ESP32初始化为Station模式。</li><li>实施扫描可用网络并检索它们的详细信息，如SSID、RSSI和加密类型。</li></ul> </li></ol> 
<p><strong>示例代码：WiFi网络扫描</strong></p> 
<p>以下是一个简单的程序，用于扫描可用的WiFi网络并打印它们的详细信息：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 初始化WiFi为Station模式</span>
  WiFi<span class="token punctuation">.</span><span class="token function">mode</span><span class="token punctuation">(</span>WIFI_STA<span class="token punctuation">)</span><span class="token punctuation">;</span>
  WiFi<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"正在扫描WiFi网络..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> networkCount <span class="token operator">=</span> WiFi<span class="token punctuation">.</span><span class="token function">scanNetworks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>networkCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"未找到任何网络"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>networkCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" 个网络已找到："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> networkCount<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"网络名称："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">SSID</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"信号强度："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">RSSI</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 暂时没有内容</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这段代码初始化ESP32以执行WiFi扫描，并打印每个可用网络的SSID和RSSI（信号强度）。</p> 
<p><strong>连接到WiFi网络</strong></p> 
<p>一旦识别到可用网络，下一步就是连接到其中之一。</p> 
<ol><li> <p><strong>网络连接基础</strong>：</p> 
  <ul><li>从扫描列表中选择一个网络。</li><li>提供必要的凭据（SSID和密码）以建立连接。</li></ul> </li><li> <p><strong>编写WiFi连接代码</strong>：</p> 
  <ul><li>编写一个函数，使用提供的SSID和密码连接到WiFi网络。</li><li>实施检查以确保成功连接，并处理连接失败的错误。</li></ul> </li></ol> 
<p><strong>示例代码：连接到WiFi网络</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> ssid <span class="token operator">=</span> <span class="token string">"Your_SSID"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> password <span class="token operator">=</span> <span class="token string">"Your_Password"</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>ssid<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"正在连接到WiFi..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"已连接到 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ssid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"IP地址："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 暂时没有内容</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这段代码尝试连接到指定的WiFi网络，并在连接后打印IP地址。</p> 
<h3><a id="ESP32SmartConfigWiFi_106"></a>第二部分：在ESP32上实现SmartConfig以简化WiFi设置**</h3> 
<p><strong>引言</strong></p> 
<p>在我们关于ESP32的WiFi功能的全面指南中，第二部分侧重于实施SmartConfig - 这是一项旨在简化WiFi设置过程的技术。在传统的WiFi凭据输入方法不切实际或繁琐的情况下，SmartConfig尤其有用。在本部分中，我们将深入了解SmartConfig的原理，设置ESP32以利用此功能，并创建一个简单的应用程序来演示其功能。</p> 
<p><strong>了解SmartConfig</strong></p> 
<p>SmartConfig是由Espressif Systems开发的一项技术，使ESP32可以通过智能手机或平板电脑应用程序配置WiFi访问。这项技术允许智能设备向ESP32发送网络凭据（SSID和密码），而无需物理接口或预加载凭据。</p> 
<ol><li> <p><strong>SmartConfig的工作原理</strong>：</p> 
  <ul><li>ESP32进入特殊模式，监听由运行兼容应用程序的智能设备发送的包含WiFi凭据的数据包。</li><li>这些数据包通过空中广播并被ESP32接收，然后使用这些凭据连接到指定的WiFi网络。</li></ul> </li><li> <p><strong>SmartConfig的优点</strong>：</p> 
  <ul><li><strong>用户友好</strong>：消除了硬编码WiFi凭据或创建物理输入界面的需求。</li><li><strong>灵活性</strong>：非常适合在多个网络环境中使用的设备或需要终端用户自行设置其设备的商业产品。</li></ul> </li></ol> 
<p><strong>为ESP32配置SmartConfig</strong></p> 
<p>要在ESP32上使用SmartConfig，请确保已准备好适当的库和工具：</p> 
<ol><li> <p><strong>包含必要的库</strong>：</p> 
  <ul><li>ESP32 Arduino核心包括实施SmartConfig所需的库。</li></ul> </li><li> <p><strong>实施SmartConfig代码</strong>：</p> 
  <ul><li>编写代码以在SmartConfig模式下初始化ESP32。</li><li>实现ESP32等待并通过SmartConfig接收WiFi凭据的逻辑。</li></ul> </li></ol> 
<p><strong>示例代码：ESP32 SmartConfig设置</strong></p> 
<p>以下是设置ESP32与SmartConfig的示例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  WiFi<span class="token punctuation">.</span><span class="token function">mode</span><span class="token punctuation">(</span>WIFI_AP_STA<span class="token punctuation">)</span><span class="token punctuation">;</span>
  WiFi<span class="token punctuation">.</span><span class="token function">beginSmartConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"等待SmartConfig"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>WiFi<span class="token punctuation">.</span><span class="token function">smartConfigDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"已接收SmartConfig。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"连接到 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">SSID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"WiFi已连接。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"IP地址："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 暂时没有内容</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这段代码将ESP32置于SmartConfig模式下，其中ESP32等待来自兼容智能手机应用程序的WiFi凭据。一旦接收到，它会尝试连接到提供的WiFi网络。</p> 
<p><strong>使用SmartConfig应用程序</strong></p> 
<p>要向ESP32发送WiFi凭据：</p> 
<ol><li> <p><strong>选择SmartConfig应用程序</strong>：</p> 
  <ul><li>使用与ESP的SmartConfig兼容的应用程序，例如适用于iOS和Android的Espressif ESP8266 SmartConfig应用程序。</li></ul> </li><li> <p><strong>发送凭据</strong>：</p> 
  <ul><li>打开应用程序并输入WiFi凭据。</li><li>应用程序将广播这些凭据，ESP32将接收并使用它们连接到网络。</li></ul> </li></ol> 
<h3><a id="ESP32WiFi_186"></a>第三部分：ESP32的高级WiFi功能和技术**</h3> 
<p><strong>引言</strong></p> 
<p>在我们关于ESP32的WiFi功能系列的最后一部分中，我们将探讨提升您的物联网项目能力的高级技术和功能。基于之前介绍的WiFi扫描和SmartConfig的基础知识，本部分深入研究了高级方面，如WiFi事件处理、电源管理以及创建WiFi中继/扩展器等。这些高级功能可以在各种实际应用中充分发挥ESP32的潜力。</p> 
<p><strong>高级WiFi技术和功能</strong></p> 
<ol><li> <p><strong>WiFi事件处理</strong>：</p> 
  <ul><li>ESP32允许处理各种WiFi事件，如连接状态变化、获取IP地址、断开连接等。</li><li>通过处理这些事件，您的应用程序可以更具响应性和健壮性。</li></ul> </li><li> <p><strong>WiFi电源管理</strong>：</p> 
  <ul><li>对于使用电池供电或关注能源的应用程序，管理WiFi模块的功耗至关重要。</li><li>ESP32提供了各种电源模式，包括Modem Sleep、Light Sleep和Deep Sleep，每种模式具有不同的功耗特性。</li></ul> </li><li> <p><strong>创建WiFi中继/扩展器</strong>：</p> 
  <ul><li>ESP32可以作为WiFi中继/扩展器运行，有助于扩展现有WiFi网络的范围。</li><li>这涉及到接收WiFi信号并将其重新广播以扩展其范围。</li></ul> </li></ol> 
<p><strong>实施高级WiFi功能</strong></p> 
<p>让我们为每个功能实施这些高级功能的示例代码。</p> 
<p><strong>示例代码1：WiFi事件处理</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">WiFiEvent</span><span class="token punctuation">(</span>WiFiEvent_t event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> SYSTEM_EVENT_STA_GOT_IP<span class="token operator">:</span>
            Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"获得IP地址："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">localIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SYSTEM_EVENT_STA_DISCONNECTED<span class="token operator">:</span>
            Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"与WiFi断开连接"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token comment">// 在这里处理其他事件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    WiFi<span class="token punctuation">.</span><span class="token function">onEvent</span><span class="token punctuation">(</span>WiFiEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">"您的SSID"</span><span class="token punctuation">,</span> <span class="token string">"您的密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在这里编写您的代码</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>示例代码2：WiFi电源管理（Modem Sleep模式）</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">"您的SSID"</span><span class="token punctuation">,</span> <span class="token string">"您的密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"已连接到WiFi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    WiFi<span class="token punctuation">.</span><span class="token function">setSleep</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启用Modem Sleep模式</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在这里编写您的代码</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>示例代码3：创建WiFi中继/扩展器</strong></p> 
<pre><code class="prism language-cpp"><span class="token comment">// 注意：这是一个概念示例。创建完整的WiFi中继/扩展器需要同时处理STA和AP模式，这是相当高级的，超出了本指南的范围。</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;WiFi.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">115200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 初始化为站点</span>
    WiFi<span class="token punctuation">.</span><span class="token function">mode</span><span class="token punctuation">(</span>WIFI_STA<span class="token punctuation">)</span><span class="token punctuation">;</span>
    WiFi<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">"您的主要SSID"</span><span class="token punctuation">,</span> <span class="token string">"您的密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>WiFi<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> WL_CONNECTED<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化为接入点</span>
    WiFi<span class="token punctuation">.</span><span class="token function">softAP</span><span class="token punctuation">(</span><span class="token string">"ESP32_Repeater_SSID"</span><span class="token punctuation">,</span> <span class="token string">"Repeater_Password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在这里处理中继功能</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>结论</strong></p> 
<p>掌握ESP32的高级WiFi功能可以增强您在物联网项目中的实现可能性。从响应事件处理和高效的电源管理到扩展WiFi范围，这些高级技术为应对物联网开发中的复杂挑战提供了必要的工具。通过这些知识，您现在具备了充分利用ESP32的WiFi功能的能力，为创新和有影响力的物联网解决方案铺平了道路。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1e27b6c33926e02711775d5aa3121017/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python pygame贪吃蛇小游戏 (200行完整代码&#43;注释&#43;可运行）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/771329290e3a1053d7d485eb822d38d5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">macOS 提示：“应用程序” 已损坏，无法打开的解决方法总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>