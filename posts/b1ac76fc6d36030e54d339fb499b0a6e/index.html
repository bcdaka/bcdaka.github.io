<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringMVC基础详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b1ac76fc6d36030e54d339fb499b0a6e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SpringMVC基础详解">
  <meta property="og:description" content="文章目录 一、SpringMVC简介1、什么是MVC2、MVC架构模式与三层模型的区别3、什么是SpringMVC 二、HelloWorld程序1、pom文件2、springmvc.xml3、配置web.xml文件4、html文件5、执行Controller 三、RequestMapping注解1、value属性1.1、基础使用1.2、Ant风格（模糊匹配路径）1.3、路径占位符（@PathVariable） 2、method属性2.1、基础使用2.2、衍生xxxMapping注解2.3、web的请求方式 3、params属性4、headers属性 四、获取请求参数1、原生Servlet API2、RequestParam注解2.1、value属性2.2、required属性2.2、defaultValue属性 3、根据形参名获取4、根据实体类接收5、RequestHeader注解6、CookieValue注解7、请求的中文乱码问题7.1、get请求乱码7.2、post请求乱码 五、Servlet的三个域对象1、request域对象2、session域对象3、application域对象 六、HttpMessageConverter消息转换器1、Form表单转换器和默认转换器2、@ResponseBody2.1、Servlet原生API方式2.2、@ResponseBody注解方式2.3、MappingJackson2HttpMessageConverter(JSON转换器) 3、@RestController4、@RequestBody4.1、&amp;拼接参数4.2、JSON格式参数 5、RequestEntity6、ResponseEntity 七、异常处理器1、默认异常处理器2、自定义异常处理器2.1、跳转错误页面2.2、返回错误响应对象 八、拦截器1、拦截器概述2、拦截器和过滤器的区别3、拦截器的创建与基本配置4、多个拦截器执行顺序 一、SpringMVC简介 1、什么是MVC MVC是一种软件架构模式（是一种软件架构设计思想，不止Java开发中用到，其它语言也需要用到），它将应用分为三块： M：Model（模型），负责业务处理及数据的收集V：View（视图），负责数据的展示C：Controller（控制器），负责调度。它是一个调度中心，它来决定什么时候调用Model来处理业务，什么时候调用View视图来展示数据 MVC架构模式的描述：前端浏览器发送请求给web服务器，web服务器中的Controller接收到用户的请求，Controller负责将前端提交的数据进行封装，然后Controller调用Model来处理业务，当Model处理完业务后会返回处理之后的数据给Controller，Controller再调用View来完成数据的展示，最终将结果响应给浏览器，浏览器进行渲染展示页面。
2、MVC架构模式与三层模型的区别 什么是三层模型
三层模型就是由Controller控制器和View视图组成的表现层，将Model数据模型拆封为业务层和与数据库交互的持久层 MVC架构模式与三层模型的区别？
MVC和三层模型都采用了分层结构来设计应用程序，都是降低耦合度，提高扩展力，提高组件复用性区别在于他们的关注点不同 三层模型更加关注业务逻辑组件的划分MVC架构模式关注的是整个应用程序的层次关系和分离思想 现代的开发方式大部分都是MVC架构模式结合三层模型一起用 3、什么是SpringMVC SpringMVC是一个实现了MVC架构模式的Web框架，底层基于Servlet实现SpringMVC已经将MVC架构模式实现了，因此只要我们是基于SpringMVC框架写代码Spring框架中有一个子项目叫做Spring Web，Spring Web子项目当中包含很多模块 Spring MVCSpring WebFluxSpring Web ServicesSpring Web FlowSpring WebSocketSpring Web Services Client Spring架构图如下，其中Web中的servlet指的就是Spring MVC 二、HelloWorld程序 1、pom文件 &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.xc&lt;/groupId&gt; &lt;artifactId&gt;springmvc-xml&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;dependencies&gt; &lt;!--springmvc--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.3.1&lt;/version&gt; &lt;/dependency&gt; &lt;!--servletAPI--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-01T07:00:00+08:00">
    <meta property="article:modified_time" content="2024-07-01T07:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringMVC基础详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#SpringMVC_2" rel="nofollow">一、SpringMVC简介</a></li><li><ul><li><a href="#1MVC_4" rel="nofollow">1、什么是MVC</a></li><li><a href="#2MVC_16" rel="nofollow">2、MVC架构模式与三层模型的区别</a></li><li><a href="#3SpringMVC_33" rel="nofollow">3、什么是SpringMVC</a></li></ul> 
  </li><li><a href="#HelloWorld_49" rel="nofollow">二、HelloWorld程序</a></li><li><ul><li><a href="#1pom_51" rel="nofollow">1、pom文件</a></li><li><a href="#2springmvcxml_97" rel="nofollow">2、springmvc.xml</a></li><li><a href="#3webxml_138" rel="nofollow">3、配置web.xml文件</a></li><li><a href="#4html_184" rel="nofollow">4、html文件</a></li><li><a href="#5Controller_200" rel="nofollow">5、执行Controller</a></li></ul> 
  </li><li><a href="#RequestMapping_224" rel="nofollow">三、RequestMapping注解</a></li><li><ul><li><a href="#1value_235" rel="nofollow">1、value属性</a></li><li><ul><li><a href="#11_237" rel="nofollow">1.1、基础使用</a></li><li><a href="#12Ant_262" rel="nofollow">1.2、Ant风格（模糊匹配路径）</a></li><li><a href="#13PathVariable_321" rel="nofollow">1.3、路径占位符（@PathVariable）</a></li></ul> 
   </li><li><a href="#2method_344" rel="nofollow">2、method属性</a></li><li><ul><li><a href="#21_346" rel="nofollow">2.1、基础使用</a></li><li><a href="#22xxxMapping_369" rel="nofollow">2.2、衍生xxxMapping注解</a></li><li><a href="#23web_389" rel="nofollow">2.3、web的请求方式</a></li></ul> 
   </li><li><a href="#3params_427" rel="nofollow">3、params属性</a></li><li><a href="#4headers_449" rel="nofollow">4、headers属性</a></li></ul> 
  </li><li><a href="#_465" rel="nofollow">四、获取请求参数</a></li><li><ul><li><a href="#1Servlet_API_468" rel="nofollow">1、原生Servlet API</a></li><li><a href="#2RequestParam_499" rel="nofollow">2、RequestParam注解</a></li><li><ul><li><a href="#21value_501" rel="nofollow">2.1、value属性</a></li><li><a href="#22required_530" rel="nofollow">2.2、required属性</a></li><li><a href="#22defaultValue_548" rel="nofollow">2.2、defaultValue属性</a></li></ul> 
   </li><li><a href="#3_560" rel="nofollow">3、根据形参名获取</a></li><li><a href="#4_574" rel="nofollow">4、根据实体类接收</a></li><li><a href="#5RequestHeader_593" rel="nofollow">5、RequestHeader注解</a></li><li><a href="#6CookieValue_608" rel="nofollow">6、CookieValue注解</a></li><li><a href="#7_623" rel="nofollow">7、请求的中文乱码问题</a></li><li><ul><li><a href="#71get_625" rel="nofollow">7.1、get请求乱码</a></li><li><a href="#72post_638" rel="nofollow">7.2、post请求乱码</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Servlet_685" rel="nofollow">五、Servlet的三个域对象</a></li><li><ul><li><a href="#1request_704" rel="nofollow">1、request域对象</a></li><li><a href="#2session_809" rel="nofollow">2、session域对象</a></li><li><a href="#3application_829" rel="nofollow">3、application域对象</a></li></ul> 
  </li><li><a href="#HttpMessageConverter_850" rel="nofollow">六、HttpMessageConverter消息转换器</a></li><li><ul><li><a href="#1Form_862" rel="nofollow">1、Form表单转换器和默认转换器</a></li><li><a href="#2ResponseBody_883" rel="nofollow">2、@ResponseBody</a></li><li><ul><li><a href="#21ServletAPI_887" rel="nofollow">2.1、Servlet原生API方式</a></li><li><a href="#22ResponseBody_910" rel="nofollow">2.2、@ResponseBody注解方式</a></li><li><a href="#23MappingJackson2HttpMessageConverterJSON_955" rel="nofollow">2.3、MappingJackson2HttpMessageConverter(JSON转换器)</a></li></ul> 
   </li><li><a href="#3RestController_991" rel="nofollow">3、@RestController</a></li><li><a href="#4RequestBody_1007" rel="nofollow">4、@RequestBody</a></li><li><ul><li><a href="#41_1013" rel="nofollow">4.1、&amp;拼接参数</a></li><li><a href="#42JSON_1046" rel="nofollow">4.2、JSON格式参数</a></li></ul> 
   </li><li><a href="#5RequestEntity_1063" rel="nofollow">5、RequestEntity</a></li><li><a href="#6ResponseEntity_1089" rel="nofollow">6、ResponseEntity</a></li></ul> 
  </li><li><a href="#_1110" rel="nofollow">七、异常处理器</a></li><li><ul><li><a href="#1_1112" rel="nofollow">1、默认异常处理器</a></li><li><a href="#2_1127" rel="nofollow">2、自定义异常处理器</a></li><li><ul><li><a href="#21_1129" rel="nofollow">2.1、跳转错误页面</a></li><li><a href="#22_1158" rel="nofollow">2.2、返回错误响应对象</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_1179" rel="nofollow">八、拦截器</a></li><li><ul><li><a href="#1_1181" rel="nofollow">1、拦截器概述</a></li><li><a href="#2_1190" rel="nofollow">2、拦截器和过滤器的区别</a></li><li><a href="#3_1199" rel="nofollow">3、拦截器的创建与基本配置</a></li><li><a href="#4_1251" rel="nofollow">4、多个拦截器执行顺序</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="SpringMVC_2"></a>一、SpringMVC简介</h2> 
<h3><a id="1MVC_4"></a>1、什么是MVC</h3> 
<ul><li><font color="RoyalBlue"><strong>MVC是一种软件<code>架构模式</code>（是一种软件架构<code>设计思想</code>，不止Java开发中用到，其它语言也需要用到），它将应用分为三块：</strong> </font> 
  <ul><li><font color="green"><strong><code>M：Model（模型）</code>，负责业务处理及数据的收集</strong></font></li><li><font color="green"><strong><code>V：View（视图）</code>，负责数据的展示</strong></font></li><li><font color="green"><strong><code>C：Controller（控制器）</code>，负责调度。它是一个调度中心，它来决定什么时候调用Model来处理业务，什么时候调用View视图来展示数据</strong></font></li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/ef/fb/RqBjBuW5_o.png" alt="在这里插入图片描述"></p> 
<p>  <font color="purple"><strong>MVC架构模式的描述：前端浏览器发送请求给web服务器，web服务器中的Controller接收到用户的请求，Controller负责将前端提交的数据进行封装，然后Controller调用Model来处理业务，当Model处理完业务后会返回处理之后的数据给Controller，Controller再调用View来完成数据的展示，最终将结果响应给浏览器，浏览器进行渲染展示页面。</strong></font></p> 
<h3><a id="2MVC_16"></a>2、MVC架构模式与三层模型的区别</h3> 
<blockquote> 
 <p><strong><font size="3">什么是三层模型</font></strong></p> 
</blockquote> 
<ul><li><font color="RoyalBlue"><strong>三层模型就是由Controller控制器和View视图组成的<code>表现层</code>，将Model数据模型拆封为<code>业务层</code>和与数据库交互的<code>持久层</code></strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/be/a5/kx1fZNPR_o.png" alt="image.png"></p> 
<blockquote> 
 <p><strong><font size="3">MVC架构模式与三层模型的区别？</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>MVC和三层模型都采用了分层结构来设计应用程序，都是降低耦合度，提高扩展力，提高组件复用性</strong></font></li><li><font color="green"><strong>区别在于他们的<code>关注点不同</code></strong> </font> 
  <ul><li><font color="Olive"><strong>三层模型更加关注<code>业务逻辑</code>组件的划分</strong></font></li><li><font color="Olive"><strong>MVC架构模式关注的是整个<code>应用程序</code>的层次关系和分离思想</strong></font></li></ul> </li><li><font color="BlueViolet"><strong>现代的开发方式大部分都是MVC架构模式结合三层模型一起用</strong></font></li></ul> 
<h3><a id="3SpringMVC_33"></a>3、什么是SpringMVC</h3> 
<ul><li><font color="green"><strong>SpringMVC是一个实现了<code>MVC架构</code>模式的Web框架，底层基于<code>Servlet</code>实现</strong></font></li><li><font color="purple"><strong>SpringMVC已经将MVC架构模式实现了，因此只要我们是基于SpringMVC框架写代码</strong></font></li><li><font color="RoyalBlue"><strong>Spring框架中有一个子项目叫做Spring Web，Spring Web子项目当中包含很多模块</strong> </font> 
  <ul><li><strong><code>Spring MVC</code></strong></li><li><font color="SaddleBrown"><strong>Spring WebFlux</strong></font></li><li><font color="SaddleBrown"><strong>Spring Web Services</strong></font></li><li><font color="SaddleBrown"><strong>Spring Web Flow</strong></font></li><li><strong><code>Spring WebSocket</code></strong></li><li><font color="SaddleBrown"><strong>Spring Web Services Client</strong></font></li></ul> </li><li><font color="RoyalBlue"><strong>Spring架构图如下，其中Web中的servlet指的就是Spring MVC</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/72/5c/53iCXqFq_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="HelloWorld_49"></a>二、HelloWorld程序</h2> 
<h3><a id="1pom_51"></a>1、pom文件</h3> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.xc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springmvc-xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--springmvc--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--servletAPI--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--spring5和thymeleaf整合--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>thymeleaf-spring5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.11.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="2springmvcxml_97"></a>2、springmvc.xml</h3> 
<ul><li><font color="RoyalBlue"><strong><code>组件扫描</code>。spring扫描这个包中的类，将这个包中的类实例化并纳入IoC容器的管理</strong></font></li><li><font color="RoyalBlue"><strong><code>视图解析器</code>。视图解析器（View Resolver）的作用主要是将Controller方法返回的逻辑视图名称解析成实际的视图对象。视图解析器将解析出的视图对象返回给DispatcherServlet，并最终由DispatcherServlet将该视图对象转化为响应结果，呈现给用户</strong></font></li></ul> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--组件扫描--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.xc.controller<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--视图解析器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thymeleafViewResolver<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.thymeleaf.spring5.view.ThymeleafViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--作用于视图渲染的过程中，可以设置视图渲染后输出时采用的编码字符集--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>characterEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--如果配置多个视图解析器，它来决定优先使用哪个视图解析器，它的值越小优先级越高--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--当 ThymeleafViewResolver 渲染模板时，会使用该模板引擎来解析、编译和渲染模板--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateEngine<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.thymeleaf.spring5.SpringTemplateEngine<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!--用于指定 Thymeleaf 模板引擎使用的模板解析器。模板解析器负责根据模板位置、模板资源名称、文件编码等信息，加载模板并对其进行解析--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token comment">&lt;!--设置模板文件的位置（前缀）--&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/WEB-INF/templates/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                        <span class="token comment">&lt;!--设置模板文件后缀（后缀），Thymeleaf文件扩展名不一定是html，也可以是其他，例如txt，大部分都是html--&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.html<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                        <span class="token comment">&lt;!--设置模板类型，例如：HTML,TEXT,JAVASCRIPT,CSS等--&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateMode<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTML<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                        <span class="token comment">&lt;!--用于模板文件在读取和解析过程中采用的编码字符集--&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>characterEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="3webxml_138"></a>3、配置web.xml文件</h3> 
<ul><li><font color="Olive"><strong>Spring MVC是一个web框架，在javaweb中谁来负责接收请求，处理请求，以及响应呢？当然是<code>Servlet</code></strong></font></li><li><font color="green"><strong>在SpringMVC框架中已经为我们写好了一个Servlet，它的名字叫做：<code>DispatcherServlet</code>，我们称其为<code>前端控制器</code></strong></font></li><li><font color="purple"><strong>既然是Servlet，那么它就需要在web.xml文件中进行配置：</strong></font></li></ul> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://jakarta.ee/xml/ns/jakartaee<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd<span class="token punctuation">"</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--配置前端控制器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--手动设置springmvc配置文件的路径及名字--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--为了提高用户的第一次访问效率，建议在web服务器启动时初始化前端控制器--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- /* 表示任何一个请求都交给DispatcherServlet来处理 --&gt;</span>
        <span class="token comment">&lt;!-- / 表示当请求不是xx.jsp的时候，DispatcherServlet来负责处理本次请求--&gt;</span>
        <span class="token comment">&lt;!-- jsp本质就是Servlet，因此如果请求是jsp的话，应该走它自己的Servlet，而不应该走DispatcherServlet --&gt;</span>
        <span class="token comment">&lt;!-- 因此我们的 url-pattern 使用 / --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  <font color="green"><strong>DispatcherServlet是SpringMVC框架为我们提供的最核心的类，它是整个SpringMVC框架的前端控制器，负责接收HTTP请求、<code>将请求路由到处理程序</code>、<code>处理响应信息</code>，最终将响应返回给客户端。</strong></font></p> 
<ol><li><font color="Olive"><strong>接收客户端的HTTP请求：DispatcherServlet监听来自Web浏览器的HTTP请求，Tomcat已经将请求数据解析为Request对象</strong></font></li><li><font color="Olive"><strong>处理请求的URL：DispatcherServlet将请求的URL与处理程序进行匹配，确定要调用哪个<code>控制器(Controller)</code>来处理此请求</strong></font></li><li><font color="Olive"><strong>调用相应的控制器：DispatcherServlet将请求发送给找到的控制器处理，控制器将执行业务逻辑，然后返回一个<code>模型对象(Model)</code></strong></font></li><li><font color="Olive"><strong>渲染视图：DispatcherServlet将调用视图引擎，将模型对象呈现为用户可以查看的<code>HTML页面</code></strong></font></li><li><font color="Olive"><strong>返回响应给客户端：DispatcherServlet将为用户生成的响应发送回浏览器，响应可以包括表单、JSON、XML、HTML以及其它类型的数据</strong></font></li></ol> 
<h3><a id="4html_184"></a>4、html文件</h3> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
hello world
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="5Controller_200"></a>5、执行Controller</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="purple"><strong>配置Tomcat</strong></font></p> 
<p><img src="https://images2.imgbox.com/c4/27/w1uJdQ8r_o.png" alt="在这里插入图片描述"></p> 
<p><font color="purple"><strong>启动tomcat，调用test</strong></font></p> 
<p><img src="https://images2.imgbox.com/a4/80/QZ5AlImP_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="RequestMapping_224"></a>三、RequestMapping注解</h2> 
<p>  <font color="BlueViolet"><strong><code>@RequestMapping</code> 注解是 Spring MVC 框架中的一个<code>控制器映射注解</code>，用于将请求映射到相应的处理方法上。具体来说，它可以将指定 URL 的请求绑定到一个特定的方法或类上，从而实现对请求的处理和响应。</strong></font></p> 
<blockquote> 
 <p><strong><font size="3">RequestMapping的出现位置</font></strong></p> 
</blockquote> 
<ul><li><font color="Olive"><strong>通过源码可以看到RequestMapping注解只能出现在<code>类上</code>或者<code>方法上</code></strong></font></li><li><font color="purple"><strong>当然类上和方法上也可以同时出现，类上是公共的，方法上是独有的</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/86/41/ZoSvIS8V_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1value_235"></a>1、value属性</h3> 
<h4><a id="11_237"></a>1.1、基础使用</h4> 
<ul><li><font color="green"><strong>value属性是该注解最核心的属性，value属性填写的是<code>请求路径</code>，也就是说通过该请求路径与对应的控制器的方法绑定在一起</strong></font></li><li><font color="RoyalBlue"><strong>value属性是一个字符串<code>数组</code>，表示可以<code>提供多个路径</code>，也就是说，多个不同的请求路径可以映射同一个控制器的同一个方法</strong></font></li><li><font color="purple"><strong><code>value</code>属性和<code>path</code>属性互为别名，两个属性一样</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/e5/68/lpbZCMZc_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">举例</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>如下两个请求路径都可以正常访问到控制器的方法上</strong> </font> 
  <ul><li><font color="SaddleBrown"><strong>http://localhost:8080/springmvc/hello/test1</strong></font></li><li><font color="SaddleBrown"><strong>http://localhost:8080/springmvc/hello/test2</strong></font></li></ul> </li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestMappingController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"/test1"</span><span class="token punctuation">,</span><span class="token string">"test2"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="12Ant_262"></a>1.2、Ant风格（模糊匹配路径）</h4> 
<ul><li><font color="RoyalBlue"><strong>value是可以用来匹配路径的，路径支持<code>模糊匹配</code>，我们把这种模糊匹配称之为Ant风格</strong> </font> 
  <ul><li><font color="green"><strong><code>?</code>：表示任意的单个字符</strong></font></li><li><font color="green"><strong><code>*</code>：表示任意的0个或多个字符</strong></font></li><li><font color="green"><strong><code>**</code>：表示任意的一层或多层目录（只能使用<code>xxx/**</code>的方式）</strong></font></li></ul> </li></ul> 
<blockquote> 
 <p><strong><font size="3">匹配?例子</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/x?z/testValueAnt"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testValueAnt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="purple"><strong>匹配成功，可以正常访问到以上控制器的方法上</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/3b/8a/NnavRalg_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="purple"><strong>匹配失败，抛错404</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/08/f0/IkmlI0pu_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">匹配*例子</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/x*z/testValueAnt"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testValueAnt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="purple"><strong>匹配成功，可以正常访问到以上控制器的方法上</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/6a/e2/yRY7gJdQ_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="purple"><strong>匹配失败，抛错404</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/f4/f1/aDr4qJMS_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">匹配**例子</font></strong></p> 
</blockquote> 
<ul><li><font color="RoyalBlue"><strong>spring6中<code>**</code>通配符只能出现在路径的<code>末尾</code>，否则抛错，spring5可以不用在末尾</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testValueAnt/**"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testValueAnt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="purple"><strong>匹配成功，可以正常访问到以上控制器的方法上</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/48/92/DeGooGg8_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="13PathVariable_321"></a>1.3、路径占位符（@PathVariable）</h4> 
<br> 
<p><font color="BlueViolet"><strong>普通的请求路径：<font color="Olive">http://localhost:8080/springmvc/login?username=admin&amp;password=123&amp;age=20</font></strong></font></p> 
<p><font color="BlueViolet"><strong>restful风格的请求路径：<font color="Olive">http://localhost:8080/springmvc/login/admin/123/20</font></strong></font></p> 
<blockquote> 
 <p><strong><font size="3"><font color="#d32b8f">如果使用restful风格的请求路径，在控制器中应该如何获取请求中的数据呢？</font></font></strong></p> 
</blockquote> 
<ul><li><font color="RoyalBlue"><strong>不加<code>@PathVariable</code>路径变量注解会抛500异常</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/testRestful/{id}/{username}/{age}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRestful</span><span class="token punctuation">(</span>
        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2method_344"></a>2、method属性</h3> 
<h4><a id="21_346"></a>2.1、基础使用</h4> 
<ul><li><font color="green"><strong>如果前端发送请求的方式和后端的处理方式不一致时，会出现<code>405</code>错误</strong></font></li><li><font color="RoyalBlue"><strong>HTTP状态码405，这种机制的作用是：限制客户端的请求方式，以保证服务器中数据的安全</strong></font></li><li><font color="RoyalBlue"><strong>SpringMVC使用<code>RequestMapping注解</code>的<code>method</code>属性来实现<code>限制请求方式</code></strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/53/78/4HNibc50_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="Olive"><strong>通过RequestMapping源码可以看到，method属性也是一个<code>数组</code></strong></font></li><li><font color="BlueViolet"><strong>数组中的每个元素是<code>RequestMethod</code>，而RequestMethod是一个<code>枚举</code>类型的数据</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/6c/7a/Oo71f3dB_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">举例</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>只允许get和post请求方式，否则报错405</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/login"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="22xxxMapping_369"></a>2.2、衍生xxxMapping注解</h4> 
<ul><li><font color="RoyalBlue"><strong>SpringMVC提供了另外一些注解，使用更加的方便</strong> </font> 
  <ul><li><font color="green"><strong><code>GetMapping</code>：要求前端必须发送get请求</strong></font></li><li><font color="green"><strong><code>PutMapping</code>：要求前端必须发送put请求</strong></font></li><li><font color="green"><strong><code>DeleteMapping</code>：要求前端必须发送delete请求</strong></font></li><li><font color="green"><strong><code>PatchMapping</code>：要求前端必须发送patch请求</strong></font></li></ul> </li></ul> 
<blockquote> 
 <p><strong><font size="3">举例</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>两种方式效果一样，对比衍生注解更加简洁</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token comment">//@RequestMapping(value="/login", method = RequestMethod.POST)</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="23web_389"></a>2.3、web的请求方式</h4> 
<blockquote> 
 <p><strong><font size="3"><font color="#d32b8f">前端向服务器发送请求的方式包括哪些？共9种</font></font></strong></p> 
</blockquote> 
<ul><li><font color="green"><strong>GET：<code>获取资源</code>，只允许读取数据，不影响数据的状态和功能</strong> </font> 
  <ul><li><font color="Olive"><strong>使用<code>URL中传递参数</code>或者在HTTP<code>请求的头部使用参数</code>，服务器返回请求的资源</strong></font></li></ul> </li><li><font color="green"><strong>POST：向服务器<code>提交资源</code>，可能还会改变数据的状态和功能</strong> </font> 
  <ul><li><font color="Olive"><strong>通过表单等方式提交<code>请求体</code>，服务器接收请求体后，进行数据处理</strong></font></li></ul> </li><li><font color="green"><strong>PUT：<code>更新资源</code>，用于更新指定的资源上所有可编辑内容</strong> </font> 
  <ul><li><font color="Olive"><strong>通过<code>请求体</code>发送需要被更新的全部内容，服务器接收数据后，将被更新的资源进行替换或修改</strong></font></li></ul> </li><li><font color="green"><strong>DELETE：<code>删除资源</code>，用于删除指定的资源</strong> </font> 
  <ul><li><font color="Olive"><strong>将要被删除的资源标识符放在<code>URL中或请求体</code>中</strong></font></li></ul> </li><li><font color="BlueViolet"><strong>HEAD：请求服务器返回资源的头部</strong> </font> 
  <ul><li><font color="Olive"><strong>与 GET 命令类似，但是所有返回的信息都是头部信息，不能包含数据体</strong></font></li><li><font color="Olive"><strong>主要用于资源检测和缓存控制</strong></font></li></ul> </li><li><font color="BlueViolet"><strong>OPTIONS：请求获得服务器支持的请求方法类型，以及支持的请求头标志</strong> </font> 
  <ul><li><font color="Olive"><strong>OPTIONS则返回支持全部方法类型的服务器标志</strong></font></li><li><font color="Olive"><strong>主要用于<code>跨域检查</code></strong></font></li></ul> </li><li><font color="SaddleBrown"><strong>PATCH：部分更改请求</strong> </font> 
  <ul><li><strong>当被请求的资源是可被更改的资源时，请求服务器对该资源进行部分更新，即每次更新一部分</strong></li></ul> </li><li><font color="SaddleBrown"><strong>TRACE：服务器响应输出客户端的 HTTP 请求，主要用于调试和测试</strong></font></li><li><font color="SaddleBrown"><strong>CONNECT：建立网络连接，通常用于加密 SSL/TLS 连接</strong></font></li></ul> 
<blockquote> 
 <p><strong><font size="3"><font color="#d32b8f">⚠️注意</font></font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>使用超链接以及原生的form表单只能提交get和post请求</strong></font></li><li><font color="RoyalBlue"><strong>put、delete、head请求可以使用发送<code>ajax</code>请求的方式来实现</strong></font></li></ul> 
<blockquote> 
 <p><strong><font size="3">GET和POST的区别</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>get请求比较适合从服务器端<code>获取数据</code></strong></font></li><li><font color="purple"><strong>post请求比较适合向服务器端<code>传送数据</code></strong></font></li><li><font color="Olive"><strong>get请求<code>支持缓存</code>。 也就是说当第二次发送get请求时，会走浏览器上次的缓存结果，不再真正的请求服务器</strong></font></li><li><font color="Olive"><strong>post请求<code>不支持缓存</code>。每一次发送post请求都会真正的走服务器</strong></font></li></ul> 
<h3><a id="3params_427"></a>3、params属性</h3> 
<ul><li><font color="RoyalBlue"><strong>对于RequestMapping注解来说：</strong> </font> 
  <ul><li><font color="purple"><strong>value属性是一个数组，只要满足数组中的任意一个路径，就能映射成功</strong></font></li><li><font color="purple"><strong>method属性也是一个数组，只要满足数组中任意一个请求方式，就能映射成功</strong></font></li><li><font color="green"><strong>params属性也是一个<code>数组</code>，不过要求请求参数必须和params数组中要求的<code>所有参数完全一致</code>后，才能映射成功</strong></font></li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/da/f5/0OZXpXOp_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">params属性的4种用法</font></strong></p> 
</blockquote> 
<ol><li><strong><code>@RequestMapping(value="/login", params={"username", "password"}) </code></strong> 
  <ul><li><font color="green"><strong>请求参数中<font color="BlueViolet">必须包含</font>username 和 password，才能与当前标注的方法进行映射</strong></font></li></ul> </li><li><strong><code>@RequestMapping(value="/login", params={"!username", "password"})</code></strong> 
  <ul><li><font color="green"><strong>请求参数中<font color="BlueViolet">不能包含</font>username参数，但必须包含password参数，才能与当前标注的方法进行映射</strong></font></li></ul> </li><li><strong><code>@RequestMapping(value="/login", params={"username=admin", "password"})</code></strong> 
  <ul><li><font color="green"><strong>请求参数中<font color="BlueViolet">必须包含</font>username参数，并且<font color="BlueViolet">参数的值必须</font>是admin，另外也必须包含password参数，才能与当前标注的方法进行映射</strong></font></li></ul> </li><li><strong><code>@RequestMapping(value="/login", params={"username!=admin", "password"})</code></strong> 
  <ul><li><font color="green"><strong>请求参数中<font color="BlueViolet">必须包含</font>username参数，但<font color="BlueViolet">参数的值不能</font>是admin，另外也必须包含password参数，才能与当前标注的方法进行映射</strong></font></li></ul> </li></ol> 
<h3><a id="4headers_449"></a>4、headers属性</h3> 
<ul><li><font color="RoyalBlue"><strong>headers和params原理相同，用法也相同</strong></font></li><li><font color="green"><strong>当前端提交的请求头信息和后端要求的<code>请求头信息一致</code>时，才能映射成功</strong></font></li></ul> 
<blockquote> 
 <p><strong><font size="3">headers属性的4种用法</font></strong></p> 
</blockquote> 
<ol><li><strong><code>@RequestMapping(value="/login", headers={"Referer", "Host"}) </code></strong> 
  <ul><li><font color="green"><strong>请求头信息中<font color="BlueViolet">必须包含</font>Referer和Host，才能与当前标注的方法进行映射</strong></font></li></ul> </li><li><strong><code>@RequestMapping(value="/login", headers={"!Referer", "Host"})</code></strong> 
  <ul><li><font color="green"><strong>请求头信息中<font color="BlueViolet">不能包含</font>Referer参数，但必须包含Host参数，才能与当前标注的方法进行映射</strong></font></li></ul> </li><li><strong><code>@RequestMapping(value="/login", headers={"Referer=xxx", "Host"})</code></strong> 
  <ul><li><font color="green"><strong>请求头信息中<font color="BlueViolet">必须包含</font>Referer参数，并且<font color="BlueViolet">参数的值必须</font>是xxx，另外也必须包含Host参数，才能与当前标注的方法进行映射</strong></font></li></ul> </li><li><strong><code>@RequestMapping(value="/login", headers={"Referer!=xxx", "Host"})</code></strong> 
  <ul><li><font color="green"><strong>请求头信息中<font color="BlueViolet">必须包含</font>Referer参数，但<font color="BlueViolet">参数的值不能</font>是xxx，另外也必须包含Host参数，才能与当前标注的方法进行映射</strong></font></li></ul> </li></ol> 
<h2><a id="_465"></a>四、获取请求参数</h2> 
<h3><a id="1Servlet_API_468"></a>1、原生Servlet API</h3> 
<p><font color="purple"><strong>前端表单提交数据</strong></font></p> 
<p><img src="https://images2.imgbox.com/1a/e8/ZWPB1cQ2_o.png" alt="在这里插入图片描述"><br> <font color="purple"><strong>F12查询提交数据方式</strong></font></p> 
<p><img src="https://images2.imgbox.com/26/3b/j3aWFFzq_o.png" alt="在这里插入图片描述"></p> 
<p><font color="purple"><strong>后端控制器获取数据</strong></font></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 通过当前请求对象获取提交的数据</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> sex <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobbies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"hobby"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> intro <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"intro"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> password <span class="token operator">+</span> 
    	<span class="token string">","</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> intro<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  <font color="RoyalBlue"><strong>这样通过Servlet原生的API获取到提交的数据。但是这种方式<code>不建议使用</code>，因为方法的参数<code>HttpServletRequest</code>依赖Servlet原生API，Controller的测试将不能单独测试，必须依赖<code>web服务器</code>才能测试。</strong></font></p> 
<h3><a id="2RequestParam_499"></a>2、RequestParam注解</h3> 
<h4><a id="21value_501"></a>2.1、value属性</h4> 
<ul><li><font color="green"><strong>RequestParam注解作用：将<code>请求参数</code>与方法上的<code>形参</code>映射</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"username"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> a<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> b<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"sex"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> c<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"hobby"</span><span class="token punctuation">)</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> d<span class="token punctuation">,</span>
        <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"intro"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> e
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="purple"><strong>@RequestParam注解的两个属性<code>value</code>和<code>name</code>，互为<code>别名</code>，作用相同</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/da/fe/zguS7xha_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="RoyalBlue"><strong>发送请求时提交的数据是：<code>name1=value1&amp;name2=value2</code>，则这个注解应该这样写：<code>@RequestParam(value="name1")</code>、<code>@RequestParam(value="name2")</code></strong></font></li></ul> 
<h4><a id="22required_530"></a>2.2、required属性</h4> 
<ul><li><font color="green"><strong>required属性用来设置该方法参数<code>是否为必须</code>的</strong></font></li><li><font color="Olive"><strong>默认情况下，这个参数为 <code>true</code>，表示方法参数是必需的。如果请求中缺少对应的参数，则会抛出异常</strong></font></li><li><font color="Olive"><strong>可以将其设置为<code>false</code>，false表示不是必须的，如果请求中缺少对应的参数，则方法的参数为null</strong><br> <img src="https://images2.imgbox.com/0a/e8/CyRE3LvR_o.png" alt="在这里插入图片描述"></font></li></ul> 
<blockquote> 
 <p><strong><font size="3">举例</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>添加了一个 age 形参，没有指定 required 属性时，默认是true，表示必需的</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/9d/94/1DQ6FpRW_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="purple"><strong>但前端表单中没有年龄age，报错如下</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/a4/14/Lc5Xs1TZ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22defaultValue_548"></a>2.2、defaultValue属性</h4> 
<ul><li><font color="green"><strong>defaultValue属性用来设置形参的默认值</strong></font></li><li><font color="Olive"><strong>当<code>没有提供对应的请求参数</code>或者<code>请求参数的值是空字符串""</code>的时候，方法的形参会采用默认值</strong></font></li></ul> 
<blockquote> 
 <p><strong><font size="3">举例</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>age属性设置为非必须，当前端不传值时候，默认年龄为18岁</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/0e/24/MY3sEuZD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_560"></a>3、根据形参名获取</h3> 
<ul><li><font color="green"><strong>如果<code>方法形参的名字</code>和提交数据时的name相同，则@RequestParam可以省略</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">String</span> sex<span class="token punctuation">,</span> 
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobby<span class="token punctuation">,</span> <span class="token class-name">String</span> intro<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">","</span> 
    	<span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>hobby<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span> <span class="token operator">+</span> intro<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_574"></a>4、根据实体类接收</h3> 
<ul><li><font color="green"><strong>在SpringMVC中也可以使用POJO类/JavaBean<code>实体类</code>来接收请求参数</strong></font></li><li><font color="Olive"><strong>不过有一个非常重要的要求：<code>实体类的属性名</code>必须和<code>请求参数的参数名</code>保持一致</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="BlueViolet"><strong>底层的实现原理：反射机制</strong> </font> 
  <ul><li><font color="RoyalBlue"><strong>先获取User对象实例，没有则反射实例化</strong></font></li><li><font color="RoyalBlue"><strong>然后获取请求参数的名字，通过请求参数名字拼接出set属性名的方法名</strong></font></li><li><font color="RoyalBlue"><strong>最后User实例和set属性方法反射给属性赋值</strong></font></li></ul> </li><li><font color="#d32b8f"><strong>请求参数是否可以赋值到JavaBean对应的属性上，不是取决于属性名，而是<code>setter方法名</code></strong></font></li></ul> 
<h3><a id="5RequestHeader_593"></a>5、RequestHeader注解</h3> 
<ul><li><font color="green"><strong>该注解的作用是：将<code>请求头信息</code>映射到<code>方法的形参上</code></strong></font></li><li><font color="purple"><strong>对于RequestHeader注解来说，也有三个属性：value、required、defaultValue，和RequestParam一样</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> 
	<span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"Referer"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token class-name">String</span> referer<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>referer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6CookieValue_608"></a>6、CookieValue注解</h3> 
<ul><li><font color="green"><strong>该注解的作用是：将<code>请求提交的Cookie数据</code>映射到<code>方法的形参上</code></strong></font></li><li><font color="purple"><strong>对于CookieValue注解来说，也有三个属性：value、required、defaultValue，和RequestParam一样</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/register"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span>
	<span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">"110"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="7_623"></a>7、请求的中文乱码问题</h3> 
<h4><a id="71get_625"></a>7.1、get请求乱码</h4> 
<ul><li><font color="#d32b8f"><strong>get请求数据在URI后面提交，这个乱码问题怎么解决呢？</strong></font></li><li><font color="green"><strong>解决办法是找到 CATALINA_HOME/config/<code>server.xml</code>文件，找到其中配置端口号的标签<code>&lt;Connector&gt;</code>，在该标签中添加<code>URIEncoding="UTF-8</code></strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/a1/1d/eILWaWU5_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="RoyalBlue"><strong>但是对于高版本的Tomcat服务器来说，是不需要设置的，例如<code>Tomcat10</code>，<code>Tomcat9</code>，有如下的默认配置，在默认情况下URIEncoding使用的就是UTF-8的编码方式</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/2e/68/nq9rTsvS_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="RoyalBlue"><strong>但对于低版本的Tomcat服务器，例如：<code>Tomcat8</code>，URIEncoding的默认配置是<code>ISO-8859-1</code></strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/ef/0f/jsIVLdZ2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="72post_638"></a>7.2、post请求乱码</h4> 
<ul><li><font color="green"><strong>post请求是解决<code>请求体</code>的中文乱码问题</strong></font></li></ul> 
<pre><code class="prism language-java">request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li><font color="RoyalBlue"><strong>同样，对于高版本的<code>Tomcat10</code>服务器来说，针对请求体中的字符编码也是配置好的，默认也是采用了UTF-8，<code>web.xml</code>配置如下</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/79/c2/TQziXL9N_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="#d32b8f"><strong>一定要注意：Tomcat9以及之前的版本，以上的配置是没有的</strong></font></li><li><font color="green"><strong>解决方法：web.xml中配置mvc自带的<code>乱码过滤器</code></strong></font></li></ul> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--配置SpringMVC自带的乱码过滤器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 
    	设置forceEncoding为true，就是强制设置编码的意思
		forceEncoding为true就会设置forceRequestEncoding和forceResponseEncoding为true
		这样，如下源码的两个if条件成立，就会设置utf-8编码了
	 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>forceEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li><font color="purple"><strong>源码解析</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/62/fe/uuCfan4r_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e5/37/MqJFZXuD_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Servlet_685"></a>五、Servlet的三个域对象</h2> 
<ul><li><font color="green"><strong>请求域：<code>request</code>、会话域：<code>session</code>、应用域：<code>application</code></strong></font></li><li><font color="purple"><strong>三个域都有以下三个方法：</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token comment">// 向域中存储数据</span>
<span class="token keyword">void</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从域中读取数据</span>
<span class="token class-name">Object</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 删除域中的数据</span>
<span class="token keyword">void</span> <span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li><font color="RoyalBlue"><strong>主要是通过：setAttribute + getAttribute方法来完成在域中<code>数据的传递和共享</code></strong></font></li></ul> 
<h3><a id="1request_704"></a>1、request域对象</h3> 
<ul><li><font color="green"><strong>request对象代表了<code>一次请求</code>，一次请求一个request</strong></font></li><li><font color="Blue"><strong>使用请求域的业务场景</strong> </font> 
  <ul><li><font color="Olive"><strong>在A资源中通过转发的方式跳转到B资源</strong></font></li><li><font color="Olive"><strong>因为是转发，所以从A到B是一次请求</strong></font></li><li><font color="Olive"><strong>如果想让A资源和B资源共享同一个数据，可以将数据存储到request域中</strong></font></li></ul> </li><li><font color="Blue"><strong>在request域中共享数据有以下几种方式</strong> </font> 
  <ul><li><font color="purple"><strong>使用原生Servlet API方式</strong></font></li><li><font color="purple"><strong>使用Model接口</strong></font></li><li><font color="purple"><strong>使用Map接口</strong></font></li><li><font color="purple"><strong>使用ModelMap类</strong></font></li><li><font color="purple"><strong>使用ModelAndView类</strong></font></li></ul> </li></ul> 
<blockquote> 
 <p><strong><font size="3">使用原生Servlet API方式</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testServletAPI"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testServletAPI</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 向request域中存储数据</span>
    request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"testRequestScope"</span><span class="token punctuation">,</span> <span class="token string">"在SpringMVC中使用原生Servlet API实现request域数据共享"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong><font size="3">使用Model接口</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testModel"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testModel</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 向request域中存储数据</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"testRequestScope"</span><span class="token punctuation">,</span> <span class="token string">"在SpringMVC中使用Model接口实现request域数据共享"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong><font size="3">使用Map接口</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testMap"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 向request域中存储数据</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"testRequestScope"</span><span class="token punctuation">,</span> <span class="token string">"在SpringMVC中使用Map接口实现request域数据共享"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong><font size="3">使用ModelMap类</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testModelMap"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testModelMap</span><span class="token punctuation">(</span><span class="token class-name">ModelMap</span> modelMap<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 向request域中存储数据</span>
    modelMap<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"testRequestScope"</span><span class="token punctuation">,</span> <span class="token string">"在SpringMVC中使用ModelMap实现request域数据共享"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong><font size="5"><font color="#d32b8f"><strong>Model、Map、ModelMap的关系？</strong></font></font></strong></p> 
<ul><li><font color="green"><strong>输出打印Model、Map、ModelMap的Class，底层实例化的对象都是：<code>BindingAwareModelMap</code></strong></font></li><li><font color="purple"><strong>BindingAwareModelMap的继承结构</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/b7/a4/kyr8HlOZ_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="BlueViolet"><strong>BindingAwareModelMap继承<code>ModelMap</code>实现<code>Model</code>，而ModelMap又实现了<code>Map</code>接口</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/fd/8b/aTQHMIfm_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">使用ModelAndView类</font></strong></p> 
</blockquote> 
<ul><li><font color="purple"><strong>为了更好的体现MVC架构模式，提供了一个类：<code>ModelAndView</code>。这个类的实例封装了<code>Model</code>和<code>View</code></strong></font></li><li><font color="green"><strong>也就是说这个类既封装业务处理之后的数据，也体现了跳转到哪个视图</strong></font></li><li><font color="purple"><strong>使用它也可以完成request域数据共享</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testModelAndView"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">testModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建“模型与视图对象”</span>
    <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 绑定数据</span>
    modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"testRequestScope"</span><span class="token punctuation">,</span> <span class="token string">"在SpringMVC中使用ModelAndView实现request域数据共享"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 绑定视图</span>
    modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"view"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回</span>
    <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="#d32b8f"><strong>注意：</strong></font></p> 
<ol><li><font color="RoyalBlue"><strong>方法的返回值类型不是String，而是ModelAndView对象</strong></font></li><li><font color="RoyalBlue"><strong>ModelAndView不是出现在方法的参数位置，而是在方法体中new的</strong></font></li><li><font color="RoyalBlue"><strong>需要调用addObject向域中存储数据</strong></font></li><li><font color="RoyalBlue"><strong>需要调用setViewName设置视图的名字</strong></font></li></ol> 
<p>  <font color="Olive"><strong>以上我们通过了五种方式完成了request域数据共享，这几种方式在底层DispatcherServlet调用我们的Controller之后，返回的对象都是<code>ModelAndView</code>。</strong></font></p> 
<p><img src="https://images2.imgbox.com/90/57/ehaigIGZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2session_809"></a>2、session域对象</h3> 
<ul><li><font color="green"><strong>session对象代表了一次会话</strong> </font> 
  <ul><li><font color="Olive"><strong>从打开浏览器开始访问，到最终浏览器关闭，这是一次完整的会话</strong></font></li><li><font color="Olive"><strong>每个会话session对象都对应一个JSESSIONID，而JSESSIONID生成后以cookie的方式存储在浏览器客户端</strong></font></li><li><font color="Olive"><strong>浏览器关闭，JSESSIONID失效，会话结束</strong></font></li></ul> </li><li><font color="Blue"><strong>使用会话域的业务场景</strong> </font> 
  <ul><li><font color="Olive"><strong>登录成功后保存用户的登录状态</strong></font></li></ul> </li></ul> 
<blockquote> 
 <p><strong><font size="3">使用原生Servlet API方式</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testSessionScope1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testServletAPI</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 向会话域中存储数据</span>
    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"testSessionScope1"</span><span class="token punctuation">,</span> <span class="token string">"使用原生Servlet API实现session域共享数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3application_829"></a>3、application域对象</h3> 
<ul><li><font color="green"><strong>application对象代表了整个web应用</strong> </font> 
  <ul><li><strong>服务器启动时创建，服务器关闭时销毁</strong></li><li><font color="Olive"><strong>对于一个web应用来说，application对象只有一个</strong></font></li></ul> </li><li><font color="Blue"><strong>使用应用域的业务场景</strong> </font> 
  <ul><li><font color="Olive"><strong>记录网站的在线人数</strong></font></li></ul> </li></ul> 
<blockquote> 
 <p><strong><font size="3">使用原生Servlet API方式</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/testApplicationScope"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testApplicationScope</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 获取ServletContext对象</span>
    <span class="token class-name">ServletContext</span> application <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 向应用域中存储数据</span>
    application<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"applicationScope"</span><span class="token punctuation">,</span> <span class="token string">"我是应用域当中的一条数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="HttpMessageConverter_850"></a>六、HttpMessageConverter消息转换器</h2> 
<ul><li><font color="RoyalBlue"><strong><code>HttpMessageConverter</code>是Spring MVC中非常重要的一个<code>接口</code></strong></font></li><li><font color="RoyalBlue"><strong>翻译为：<code>HTTP消息转换器</code>。该接口下提供了很多实现类，不同的实现类有不同的转换方式</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/1a/f9/zqPLEyVU_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="green"><strong>转换器是<code>HTTP协议</code>与<code>Java程序中的对象</code>之间的互相转换</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/8d/88/lVyugHRQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1Form_862"></a>1、Form表单转换器和默认转换器</h3> 
<blockquote> 
 <p><strong><font size="3">Form表单转换器</font></strong></p> 
</blockquote> 
<p>  <font color="Olive"><strong>请求体中的数据是如何转换成user对象的，底层实际上使用了<code>HttpMessageConverter</code>接口的其中一个实现类<code>FormHttpMessageConverter</code>。</strong></font></p> 
<p><img src="https://images2.imgbox.com/a9/be/X1YwFdws_o.png" alt="在这里插入图片描述"></p> 
<p>  <font color="BlueViolet"><strong>通过上图可以看出<code>FormHttpMessageConverter</code>是负责将<code>请求协议</code>转换为<code>Java对象</code>的。</strong></font></p> 
<blockquote> 
 <p><strong><font size="3">默认转换器</font></strong></p> 
</blockquote> 
<p>  <font color="Olive"><strong>Controller返回值看做逻辑视图名称，视图解析器将其转换成物理视图名称，生成视图对象，<code>StringHttpMessageConverter</code>负责将视图对象中的HTML字符串写入到HTTP协议的响应体中。最终完成响应。</strong></font></p> 
<p><img src="https://images2.imgbox.com/2f/9e/197O1M58_o.png" alt="在这里插入图片描述"></p> 
<p>  <font color="BlueViolet"><strong>通过上图可以看出<code>StringHttpMessageConverter</code>是负责将<code>Java对象</code>转换为<code>响应协议</code>的。</strong></font></p> 
<h3><a id="2ResponseBody_883"></a>2、@ResponseBody</h3> 
<p><font color="RoyalBlue"><strong>首页面AJAX请求获取数据，非跳转页面Controller</strong></font></p> 
<h4><a id="21ServletAPI_887"></a>2.1、Servlet原生API方式</h4> 
<pre><code class="prism language-java"><span class="token comment">// 有返回值</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello1</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 无返回值</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hello2</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="purple"><strong>页面展示</strong></font></p> 
<p><img src="https://images2.imgbox.com/e9/4a/GvXaqHoO_o.png" alt="在这里插入图片描述"></p> 
<p><font color="#d32b8f"><strong>注意：如果采用这种方式响应，则和 springmvc.xml 文件中配置的视图解析器没有关系，不走视图解析器了</strong></font></p> 
<h4><a id="22ResponseBody_910"></a>2.2、@ResponseBody注解方式</h4> 
<ul><li><font color="BlueViolet"><strong>这里的"hello"不是逻辑视图名了，而是作为响应体的内容进行响应。直接输出到浏览器客户端</strong></font></li><li><font color="RoyalBlue"><strong>程序中使用的消息转换器是：<code>StringHttpMessageConverter</code>，为什么会启用这个消息转换器呢？</strong> </font> 
  <ul><li><font color="green"><strong>因为你添加<code>@ResponseBody</code>这个注解</strong></font></li></ul> </li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 由于你使用了 @ResponseBody 注解</span>
        <span class="token comment">// 以下的return语句返回的字符串则不再是“逻辑视图名”了</span>
        <span class="token comment">// 而是作为响应协议的响应体进行响应。</span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="RoyalBlue"><strong>通常AJAX请求需要服务器给返回一段<code>JSON格式的字符串</code>，可以返回JSON格式的字符串吗？当然可以，代码如下：</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"{\"username\":\"zhangsan\",\"password\":\"1234\"}"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="purple"><strong>页面展示</strong></font></p> 
<p><img src="https://images2.imgbox.com/aa/fa/6SNI5BRJ_o.png" alt="在这里插入图片描述"></p> 
<ul><li><font color="RoyalBlue"><strong>此时底层使用的消息转换器还是：<code>StringHttpMessageConverter</code></strong></font></li><li><font color="green"><strong>那如果在程序中是一个<code>POJO对象</code>，怎么将POJO对象以JSON格式的字符串响应给浏览器呢？</strong> </font> 
  <ul><li><font color="Olive"><strong>方式一：自己写代码将POJO对象转换成JSON格式的字符串，用上面的方式直接return即可</strong></font></li><li><font color="Olive"><strong>方式二：启用<code>MappingJackson2HttpMessageConverter</code>消息转换器</strong></font></li></ul> </li></ul> 
<h4><a id="23MappingJackson2HttpMessageConverterJSON_955"></a>2.3、MappingJackson2HttpMessageConverter(JSON转换器)</h4> 
<blockquote> 
 <p><strong><font size="3">启动JSON消息转换器需要两个步骤</font></strong></p> 
</blockquote> 
<ul><li><font color="green"><strong>第一步：引入<code>jackson依赖</code>，可以将java对象转换为json格式字符串</strong></font></li></ul> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.17.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li><font color="green"><strong>第二步：开启<code>注解驱动</code>，会自动装配一个消息转换器：MappingJackson2HttpMessageConverter</strong></font></li></ul> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p><font color="Blue"><strong>@ResponseBody最经典用法如下：</strong></font></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token string">"18"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><font color="purple"><strong>将POJO对象转换成JSON格式的字符串，响应给前端</strong></font></li></ul> 
<p><img src="https://images2.imgbox.com/f6/5c/0P6Fn5kO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3RestController_991"></a>3、@RestController</h3> 
<ul><li><font color="Olive"><strong>为了方便，Spring MVC中提供了一个注解<code>@RestController</code>。这一个注解代表了：<code>@Controller + @ResponseBody</code></strong></font></li><li><font color="RoyalBlue"><strong>@RestController标注在类上即可。被它标注的Controller中<code>所有的方法</code>上都会自动标注@ResponseBody</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token string">"18"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4RequestBody_1007"></a>4、@RequestBody</h3> 
<ul><li><font color="green"><strong>作用是直接将请求体传递给Java程序</strong></font></li></ul> 
<h4><a id="41_1013"></a>4.1、&amp;拼接参数</h4> 
<blockquote> 
 <p><strong><font size="3">在没有使用这个注解的时候：</font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 执行保存的业务逻辑</span>
    userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 保存成功跳转到成功页面</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="Olive"><strong>当<code>请求体</code>提交的数据是：</strong></font></p> 
<pre><code class="prism language-java">username<span class="token operator">=</span>zhangsan<span class="token operator">&amp;</span>password<span class="token operator">=</span><span class="token number">1234</span><span class="token operator">&amp;</span>email<span class="token operator">=</span>zhangsan<span class="token annotation punctuation">@powernode.com</span>
</code></pre> 
<p><font color="RoyalBlue"><strong>那么Spring MVC会自动使用 <code>FormHttpMessageConverter</code>消息转换器，将请求体转换成user对象</strong></font></p> 
<blockquote> 
 <p><strong><font size="3">当使用这个注解的时候：这个注解只能出现在<code>方法的参数上</code></font></strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> requestBodyStr<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求体："</span> <span class="token operator">+</span> requestBodyStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="RoyalBlue"><strong>Spring MVC仍然会使用 <code>FormHttpMessageConverter</code>消息转换器，将请求体直接以字符串形式传递给requestBodyStr变量</strong></font></p> 
<h4><a id="42JSON_1046"></a>4.2、JSON格式参数</h4> 
<ul><li><font color="green"><strong>如果<code>请求体</code>是<code>JSON</code>格式字符串，可以将其转化为POJO对象</strong></font></li><li><font color="Olive"><strong>此时必须使用@RequestBody注解来完成</strong></font></li><li><font color="Olive"><strong>底层使用的消息转换器是：<code>MappingJackson2HttpMessageConverter</code></strong></font></li><li><font color="purple"><strong>启动步骤与@ResponseBody一样，引入<code>jackson依赖</code>、开启<code>注解驱动</code></strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/send"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="5RequestEntity_1063"></a>5、RequestEntity</h3> 
<ul><li><font color="green"><strong>这个类的实例封装了整个请求协议：包括<code>请求行</code>、<code>请求头</code>、<code>请求体</code>所有信息</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/send"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">RequestEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> requestEntity<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求方式："</span> <span class="token operator">+</span> requestEntity<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求URL："</span> <span class="token operator">+</span> requestEntity<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> requestEntity<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求的内容类型："</span> <span class="token operator">+</span> headers<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请求头："</span> <span class="token operator">+</span> headers<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> requestEntity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font color="purple"><strong>执行结果：</strong></font></p> 
<p><img src="https://images2.imgbox.com/28/6e/SYSNef8W_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6ResponseEntity_1089"></a>6、ResponseEntity</h3> 
<ul><li><font color="green"><strong>用该类的实例可以封装响应协议，包括：<code>状态行</code>、<code>响应头</code>、<code>响应体</code></strong></font></li><li><font color="purple"><strong>如果你想定制属于自己的响应协议，可以使用该类</strong></font></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/users/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_1110"></a>七、异常处理器</h2> 
<h3><a id="1_1112"></a>1、默认异常处理器</h3> 
<ul><li><font color="green"><strong>方法执行过程中出现了<code>异常</code>，跳转到对应的<code>视图</code>，在视图上展示友好信息</strong></font></li></ul> 
<p><font color="RoyalBlue"><strong>默认处理器<code>DefaultHandlerExceptionResolver</code>核心方法：</strong></font></p> 
<p><img src="https://images2.imgbox.com/e1/d4/RJzkQacx_o.png" alt="在这里插入图片描述"></p> 
<p><font color="purple"><strong>当请求方式和处理方式<code>不同</code>时，DefaultHandlerExceptionResolver的默认处理态度是：</strong></font></p> 
<p><img src="https://images2.imgbox.com/a0/6e/tkZC7RUT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_1127"></a>2、自定义异常处理器</h3> 
<h4><a id="21_1129"></a>2.1、跳转错误页面</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ExceptionHandler</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">exceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"error"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>出错了<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>出错了，请联系管理员！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${e}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c6/c0/mR3nQjnK_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22_1158"></a>2.2、返回错误响应对象</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">exceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 这里先判断拦截到的Exceptiion是不是我们自定义的异常类型</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">MyException</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">MyException</span> myException <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyException</span><span class="token punctuation">)</span> e<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>myException<span class="token punctuation">.</span><span class="token function">getMeg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 如果拦截的异常不是我们自定义的异常(例如:数据库主键冲突)</span>
            <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token string">"服务器端异常"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_1179"></a>八、拦截器</h2> 
<h3><a id="1_1181"></a>1、拦截器概述</h3> 
<ul><li><font color="green"><strong>拦截器作用是在<code>请求到达控制器之前或之后进行拦截</code>，可以对请求和响应进行一些特定的处理</strong></font></li><li><font color="RoyalBlue"><strong>拦截器可以用于很多场景下</strong> </font> 
  <ul><li><font color="Olive"><strong><code>登录验证</code>：对于需要登录才能访问的网址，使用拦截器可以判断用户是否已登录，如果未登录则跳转到登录页面</strong></font></li><li><font color="Olive"><strong><code>权限校验</code>：根据用户权限对部分网址进行访问控制，拒绝未经授权的用户访问</strong></font></li><li><font color="Olive"><strong><code>请求日志</code>：记录请求信息，例如请求地址、请求参数、请求时间等，用于排查问题和性能优化</strong></font></li><li><font color="Olive"><strong><code>更改响应</code>：可以对响应的内容进行修改，例如添加头信息、调整响应内容格式等</strong></font></li></ul> </li></ul> 
<h3><a id="2_1190"></a>2、拦截器和过滤器的区别</h3> 
<ul><li><font color="green"><strong>过滤器更注重在<code>请求和响应</code>的流程中进行处理，可以修改请求和响应的内容，<font color="BlueViolet">例如设置编码和字符集、请求头、状态码等</font></strong></font></li><li><font color="green"><strong>拦截器则更加侧重于对<code>控制器</code>进行前置或后置处理，在请求到达控制器之前或之后进行特定的操作，<font color="BlueViolet">例如打印日志、权限验证等</font></strong></font></li></ul> 
<p><font color="#d32b8f"><strong>Filter、Servlet、Interceptor、Controller的执行顺序：</strong></font></p> 
<p><img src="https://images2.imgbox.com/40/8f/tySdefef_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_1199"></a>3、拦截器的创建与基本配置</h3> 
<blockquote> 
 <p><strong><font size="3">定义拦截器</font></strong></p> 
</blockquote> 
<ul><li><font color="green"><strong>实现<code>org.springframework.web.servlet.HandlerInterceptor</code> 接口，共有三个方法可以进行选择性的实现</strong> </font> 
  <ul><li><font color="Olive"><strong><code>preHandle</code>：处理器方法调用之前执行(返回true放行，false拦截)</strong></font></li><li><font color="Olive"><strong><code>postHandle</code>：处理器方法调用之后执行</strong></font></li><li><font color="Olive"><strong><code>afterCompletion</code>：渲染完成后执行</strong></font></li></ul> </li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"处理器方法前调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"处理器方法后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"渲染完成后调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong><font size="3">基本配置</font></strong></p> 
</blockquote> 
<p><font color="purple"><strong>springmvc.xml配置如下</strong></font></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.xc.interceptors.MyInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 或者 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><font color="purple"><strong>添加组件扫描</strong></font></p> 
<p><img src="https://images2.imgbox.com/f2/dd/jtPO3uj1_o.png" alt="在这里插入图片描述"></p> 
<p><font color="#d32b8f"><strong>注意：对于这种基本配置来说，拦截器是拦截所有请求的</strong></font></p> 
<h3><a id="4_1251"></a>4、多个拦截器执行顺序</h3> 
<blockquote> 
 <p><strong><font size="3">如果所有拦截器preHandle都返回true</font></strong></p> 
</blockquote> 
<p><font color="RoyalBlue"><strong>按照springmvc.xml文件中配置的顺序，<code>自上而下</code>调用 preHandle</strong></font></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>interceptor1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>interceptor2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><font color="purple"><strong>执行顺序：</strong></font></p> 
<p><img src="https://images2.imgbox.com/d3/41/y3wuREYW_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font size="3">如果其中一个拦截器preHandle返回false</font></strong></p> 
</blockquote> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>interceptor1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>interceptor2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><font color="purple"><strong>如果<code>interceptor2</code>的preHandle返回false，执行顺序：</strong></font></p> 
<p><img src="https://images2.imgbox.com/cb/63/pmBdS4j9_o.png" alt="在这里插入图片描述"><br> <font color="BlueViolet"><strong>规则：只要有一个拦截器<code>preHandle</code>返回false，所有<code>postHandle</code>都不执行。但返回false的拦截器的前面的拦截器按照逆序执行<code>afterCompletion</code>。</strong></font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/64edc3041cc05d86d553e8baf6e008e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux 安装 Redis 教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/379688c5d515f3fda1c295f1a9bb50ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【初阶数据结构】深入解析队列:探索底层逻辑</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>