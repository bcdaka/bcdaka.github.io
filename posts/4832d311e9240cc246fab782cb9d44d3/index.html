<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€C&#43;&#43;ã€‘ï¼šAVLæ ‘çš„æ·±åº¦è§£æåŠå…¶å®ç° - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4832d311e9240cc246fab782cb9d44d3/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€C&#43;&#43;ã€‘ï¼šAVLæ ‘çš„æ·±åº¦è§£æåŠå…¶å®ç°">
  <meta property="og:description" content="ç›®å½• ğŸš€å‰è¨€ä¸€ï¼ŒAVLæ ‘çš„æ¦‚å¿µäºŒï¼ŒAVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ä¸‰ï¼ŒAVLæ ‘çš„æ’å…¥3.1 ç¬¬ä¸€æ­¥3.2 ç¬¬äºŒæ­¥ å››ï¼ŒAVLæ ‘çš„æ—‹è½¬4.1 å³å•æ—‹4.2 å·¦å•æ—‹4.3 å³å·¦åŒæ—‹4.4 å·¦å³åŒæ—‹4.5 æ’å…¥ä»£ç çš„å®Œæ•´å®ç°4.6 æ—‹è½¬æ€»ç»“ äº”ï¼ŒAVLæ ‘çš„éªŒè¯å…­ï¼ŒAVLæ ‘çš„æ€§èƒ½ä¸ƒï¼Œå®ç°AVLæ ‘çš„å®Œæ•´ä»£ç  ç‚¹å‡»è·³è½¬è‡³æ–‡ç« ï¼š ã€C&#43;&#43;/STLã€‘ï¼šsetå’Œmapçš„ä»‹ç»åŠåŸºæœ¬ä½¿ç”¨ã€‘ ç‚¹å‡»è·³è½¬è‡³æ–‡ç« ï¼šã€C&#43;&#43;ã€‘ï¼šäºŒå‰æ ‘è¿›é˜¶ â€” æœç´¢äºŒå‰æ ‘ ğŸš€å‰è¨€ ä¸Šä¸€ç¯‡æ–‡ç« å¯¹map/multimap/set/multisetè¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œåœ¨å…¶æ–‡æ¡£ä»‹ç»ä¸­å‘ç°ï¼Œè¿™å‡ ä¸ªå®¹å™¨æœ‰ä¸ªå…±åŒç‚¹æ˜¯ï¼šå…¶åº•å±‚éƒ½æ˜¯æŒ‰ç…§äºŒå‰æœç´¢æ ‘æ¥å®ç°çš„ï¼Œä½†æ˜¯äºŒå‰æœç´¢æ ‘æœ‰å…¶è‡ªèº«çš„ç¼ºé™·ï¼Œå‡å¦‚å¾€æ ‘ä¸­æ’å…¥çš„å…ƒç´ æœ‰åºæˆ–è€…æ¥è¿‘æœ‰åºï¼ŒäºŒå‰æœç´¢æ ‘å°±ä¼šé€€åŒ–æˆå•æ”¯æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šé€€åŒ–æˆO(N)ï¼Œå› æ­¤mapã€setç­‰å…³è”å¼å®¹å™¨çš„åº•å±‚ç»“æ„æ˜¯å¯¹äºŒå‰æ ‘è¿›è¡Œäº†å¹³è¡¡å¤„ç†ï¼Œå³é‡‡ç”¨å¹³è¡¡æ ‘æ¥å®ç°ã€‚
æœ¬ç¯‡æ–‡ç« ä»‹ç»çš„å°±æ˜¯å¹³è¡¡æ ‘ä¹‹ä¸€çš„ï¼šAVLæ ‘ã€‚
æ³¨æ„ï¼šæœ¬ç¯‡æ–‡ç« AVLæ ‘å®ç°çš„ key_value æ¨¡å‹ã€‚å› ä¸ºå®é™…ä¸Š map/set çš„åº•å±‚å¹¶ä¸æ˜¯ç”¨AVLæ ‘å°è£…çš„ï¼Œè€Œæ˜¯ç”¨çº¢é»‘æ ‘ï¼ˆä¸‹ä¸€ç¯‡æ–‡ç« ï¼‰ï¼Œåœ¨çº¢é»‘æ ‘çš„éƒ¨åˆ†æˆ‘ä»¬å†å¯¹ key å’Œ key_value æ¨¡å‹è¿›è¡Œæ›´æ·±å±‚æ¬¡çš„å°è£…ã€‚
ä¸€ï¼ŒAVLæ ‘çš„æ¦‚å¿µ å¯¹äºäºŒå‰æœç´¢æ ‘æç«¯æƒ…å†µä¸‹æŸ¥æ‰¾æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ï¼Œæœ‰å¤§ä½¬æå‡ºäº†è¿™æ ·çš„è§£å†³æ–¹æ³•ï¼š
å½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°ç»“ç‚¹åï¼Œå¦‚æœèƒ½ä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(éœ€è¦å¯¹æ ‘ä¸­çš„ç»“ç‚¹è¿›è¡Œè°ƒæ•´)ï¼Œå³å¯é™ä½æ ‘çš„é«˜åº¦ï¼Œä»è€Œå‡å°‘å¹³å‡æœç´¢é•¿åº¦ã€‚
ä¸€æ£µAVLæ ‘æˆ–è€…æ˜¯ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„äºŒå‰æœç´¢æ ‘ï¼š
(1) å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘ï¼›
(2) å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®(ç®€ç§°å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(-1/0/1)
å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘ã€‚å¦‚æœå®ƒæœ‰nä¸ªç»“ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨
O ( l o g 2 n ) O(log_2 n) O(log2â€‹n)ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O( l o g 2 n log_2 n log2â€‹n)ã€‚
äºŒï¼ŒAVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ï¼š
(1) ä¸‰å‰é“¾ï¼šå·¦å­æ ‘ï¼Œå³å­æ ‘ï¼Œçˆ¶äº²ã€‚
(2) å¹³è¡¡å› å­ï¼šä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ï¼Œå³å­æ ‘é«˜åº¦ - å·¦å­æ ‘é«˜åº¦ã€‚
(3) key_value æ¨¡å‹çš„ pair ç±»å‹çš„æ•°æ®ã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-25T20:24:12+08:00">
    <meta property="article:modified_time" content="2024-07-25T20:24:12+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€C&#43;&#43;ã€‘ï¼šAVLæ ‘çš„æ·±åº¦è§£æåŠå…¶å®ç°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ç›®å½•</h4> 
 <ul><li><a href="#_4" rel="nofollow">ğŸš€å‰è¨€</a></li><li><a href="#AVL_11" rel="nofollow">ä¸€ï¼ŒAVLæ ‘çš„æ¦‚å¿µ</a></li><li><a href="#AVL_28" rel="nofollow">äºŒï¼ŒAVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰</a></li><li><a href="#AVL_55" rel="nofollow">ä¸‰ï¼ŒAVLæ ‘çš„æ’å…¥</a></li><li><ul><li><a href="#31__60" rel="nofollow">3.1 ç¬¬ä¸€æ­¥</a></li><li><a href="#32__106" rel="nofollow">3.2 ç¬¬äºŒæ­¥</a></li></ul> 
  </li><li><a href="#AVL_154" rel="nofollow">å››ï¼ŒAVLæ ‘çš„æ—‹è½¬</a></li><li><ul><li><a href="#41__160" rel="nofollow">4.1 å³å•æ—‹</a></li><li><a href="#42__225" rel="nofollow">4.2 å·¦å•æ—‹</a></li><li><a href="#43__276" rel="nofollow">4.3 å³å·¦åŒæ—‹</a></li><li><a href="#44__331" rel="nofollow">4.4 å·¦å³åŒæ—‹</a></li><li><a href="#45__383" rel="nofollow">4.5 æ’å…¥ä»£ç çš„å®Œæ•´å®ç°</a></li><li><a href="#46__472" rel="nofollow">4.6 æ—‹è½¬æ€»ç»“</a></li></ul> 
  </li><li><a href="#AVL_489" rel="nofollow">äº”ï¼ŒAVLæ ‘çš„éªŒè¯</a></li><li><a href="#AVL_553" rel="nofollow">å…­ï¼ŒAVLæ ‘çš„æ€§èƒ½</a></li><li><a href="#AVL_556" rel="nofollow">ä¸ƒï¼Œå®ç°AVLæ ‘çš„å®Œæ•´ä»£ç </a></li></ul> 
</div> 
<br> ç‚¹å‡»è·³è½¬è‡³æ–‡ç« ï¼š 
<a href="http://t.csdnimg.cn/a0yuD" rel="nofollow">ã€C++/STLã€‘ï¼šsetå’Œmapçš„ä»‹ç»åŠåŸºæœ¬ä½¿ç”¨ã€‘</a> 
<p></p> 
<p>ç‚¹å‡»è·³è½¬è‡³æ–‡ç« ï¼š<a href="http://t.csdnimg.cn/wL9ri" rel="nofollow">ã€C++ã€‘ï¼šäºŒå‰æ ‘è¿›é˜¶ â€” æœç´¢äºŒå‰æ ‘ </a></p> 
<h2><a id="_4"></a>ğŸš€å‰è¨€</h2> 
<p>ä¸Šä¸€ç¯‡æ–‡ç« å¯¹<strong>map/multimap/set/multiset</strong>è¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œåœ¨å…¶æ–‡æ¡£ä»‹ç»ä¸­å‘ç°ï¼Œè¿™å‡ ä¸ªå®¹å™¨æœ‰ä¸ªå…±åŒç‚¹æ˜¯ï¼š<strong>å…¶åº•å±‚éƒ½æ˜¯æŒ‰ç…§äºŒå‰æœç´¢æ ‘æ¥å®ç°çš„</strong>ï¼Œä½†æ˜¯äºŒå‰æœç´¢æ ‘æœ‰å…¶è‡ªèº«çš„ç¼ºé™·ï¼Œ<strong>å‡å¦‚å¾€æ ‘ä¸­æ’å…¥çš„å…ƒç´ æœ‰åºæˆ–è€…æ¥è¿‘æœ‰åºï¼ŒäºŒå‰æœç´¢æ ‘å°±ä¼šé€€åŒ–æˆå•æ”¯æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šé€€åŒ–æˆO(N)</strong>ï¼Œå› æ­¤mapã€setç­‰å…³è”å¼å®¹å™¨çš„åº•å±‚ç»“æ„æ˜¯å¯¹äºŒå‰æ ‘è¿›è¡Œäº†å¹³è¡¡å¤„ç†ï¼Œå³é‡‡ç”¨<strong>å¹³è¡¡æ ‘</strong>æ¥å®ç°ã€‚</p> 
<p>æœ¬ç¯‡æ–‡ç« ä»‹ç»çš„å°±æ˜¯å¹³è¡¡æ ‘ä¹‹ä¸€çš„ï¼šAVLæ ‘ã€‚</p> 
<p>æ³¨æ„ï¼šæœ¬ç¯‡æ–‡ç« AVLæ ‘å®ç°çš„ key_value æ¨¡å‹ã€‚å› ä¸ºå®é™…ä¸Š map/set çš„åº•å±‚å¹¶ä¸æ˜¯ç”¨AVLæ ‘å°è£…çš„ï¼Œè€Œæ˜¯ç”¨çº¢é»‘æ ‘ï¼ˆä¸‹ä¸€ç¯‡æ–‡ç« ï¼‰ï¼Œ<strong>åœ¨çº¢é»‘æ ‘çš„éƒ¨åˆ†æˆ‘ä»¬å†å¯¹ key å’Œ key_value æ¨¡å‹è¿›è¡Œæ›´æ·±å±‚æ¬¡çš„å°è£…</strong>ã€‚</p> 
<h2><a id="AVL_11"></a>ä¸€ï¼ŒAVLæ ‘çš„æ¦‚å¿µ</h2> 
<p>å¯¹äºäºŒå‰æœç´¢æ ‘æç«¯æƒ…å†µä¸‹æŸ¥æ‰¾æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ï¼Œæœ‰å¤§ä½¬æå‡ºäº†è¿™æ ·çš„è§£å†³æ–¹æ³•ï¼š</p> 
<p><mark>å½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°ç»“ç‚¹åï¼Œå¦‚æœèƒ½ä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1</mark>(éœ€è¦å¯¹æ ‘ä¸­çš„ç»“ç‚¹è¿›è¡Œè°ƒæ•´)ï¼Œå³<strong>å¯é™ä½æ ‘çš„é«˜åº¦</strong>ï¼Œä»è€Œå‡å°‘å¹³å‡æœç´¢é•¿åº¦ã€‚</p> 
<p>ä¸€æ£µAVLæ ‘æˆ–è€…æ˜¯ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„äºŒå‰æœç´¢æ ‘ï¼š</p> 
<p><strong>(1) å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘</strong>ï¼›<br> <strong>(2) å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®(ç®€ç§°å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(-1/0/1)</strong></p> 
<p><img src="https://images2.imgbox.com/30/29/g7iWxixd_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘</strong>ã€‚å¦‚æœå®ƒæœ‰nä¸ªç»“ç‚¹ï¼Œå…¶<strong>é«˜åº¦å¯ä¿æŒåœ¨<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          O 
         
        
          ( 
         
        
          l 
         
        
          o 
         
         
         
           g 
          
         
           2 
          
         
        
          n 
         
        
          ) 
         
        
       
         O(log_2 n) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O(<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          l 
         
        
          o 
         
         
         
           g 
          
         
           2 
          
         
        
          n 
         
        
       
         log_2 n 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span></span></span>)</strong>ã€‚</p> 
<h2><a id="AVL_28"></a>äºŒï¼ŒAVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰</h2> 
<p>AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ï¼š</p> 
<p>(1) ä¸‰å‰é“¾ï¼šå·¦å­æ ‘ï¼Œå³å­æ ‘ï¼Œçˆ¶äº²ã€‚<br> (2) å¹³è¡¡å› å­ï¼šä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ï¼Œ<strong>å³å­æ ‘é«˜åº¦ - å·¦å­æ ‘é«˜åº¦</strong>ã€‚<br> (3) <strong>key_value æ¨¡å‹çš„ pair ç±»å‹çš„æ•°æ®</strong>ã€‚</p> 
<pre><code class="prism language-c">template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">AVLTNode</span>
<span class="token punctuation">{<!-- --></span>
	pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span> _kv<span class="token punctuation">;</span>
	AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _left<span class="token punctuation">;</span>
	AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _right<span class="token punctuation">;</span>
	AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _parent<span class="token punctuation">;</span>

	<span class="token keyword">int</span> _bf<span class="token punctuation">;</span> <span class="token comment">//å¹³è¡¡å› å­ï¼šå³å­æ ‘é«˜åº¦- å·¦å­æ ‘é«˜åº¦</span>

	<span class="token function">AVLTNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_kv</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_left</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_right</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_parent</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_bf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="AVL_55"></a>ä¸‰ï¼ŒAVLæ ‘çš„æ’å…¥</h2> 
<p>AVLæ ‘å°±æ˜¯åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šå¼•å…¥äº†å¹³è¡¡å› å­ï¼Œå› æ­¤AVLæ ‘ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯äºŒå‰æœç´¢æ ‘ã€‚é‚£ä¹ˆ<br> AVLæ ‘çš„æ’å…¥è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼š</p> 
<h3><a id="31__60"></a>3.1 ç¬¬ä¸€æ­¥</h3> 
<p><strong>å…ˆæŒ‰ç…§äºŒå‰æœç´¢æ ‘çš„æ–¹å¼æ’å…¥æ–°èŠ‚ç‚¹ï¼š</strong></p> 
<pre><code class="prism language-c">bool <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_root <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> true<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cur <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//é“¾æ¥æ—¶è¦åˆ¤æ–­é“¾æ¥åœ¨å·¦è¿˜æ˜¯å³</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
		parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> cur<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> cur<span class="token punctuation">;</span>

	cur<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>

	<span class="token comment">// è°ƒèŠ‚å¹³è¡¡å› å­â€¦â€¦</span>
	
	<span class="token keyword">return</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="32__106"></a>3.2 ç¬¬äºŒæ­¥</h3> 
<p><strong>å†è°ƒæ•´èŠ‚ç‚¹çš„å¹³è¡¡å› å­ï¼š</strong></p> 
<p>æ ¹æ®æ’å…¥æƒ…å†µæ¥æ›´æ–° parent çš„å¹³è¡¡å› å­ï¼Œå¹¶ä¸”æ ¹æ®å¹³è¡¡å› å­æ¥åˆ¤æ–­æ˜¯å¦ç ´åäº†AVLæ ‘çš„å¹³è¡¡æ€§ã€‚</p> 
<p>é‡ç‚¹åˆ†æï¼š</p> 
<p><mark>åœ¨æ’å…¥ä¹‹å‰ï¼Œparent çš„å¹³è¡¡å› å­å¯èƒ½ä¸ºï¼š-1ï¼Œ0æˆ–1</mark>ã€‚æ’å…¥åˆ†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p> 
<p><strong>(1) å¦‚æœ cur æ’å…¥åˆ° parent çš„å·¦ä¾§ï¼Œåªéœ€ç»™ parent çš„å¹³è¡¡å› å­ -1 å³å¯</strong></p> 
<p><strong>(2) å¦‚æœ cur æ’å…¥åˆ° parent çš„å³ä¾§ï¼Œåªéœ€ç»™parent çš„å¹³è¡¡å› å­ +1 å³å¯</strong></p> 
<p><mark>æ’å…¥åï¼Œæ­¤æ—¶ï¼šparent çš„å¹³è¡¡å› å­å¯èƒ½ä¸ºï¼š0ï¼Œæ­£è´Ÿ1ï¼Œ æ­£è´Ÿ2</mark>ã€‚å¯¹åº”ä¸‹é¢ä¸‰ç§æƒ…å†µï¼š</p> 
<p>(1) <strong>å¦‚æœ parent çš„å¹³è¡¡å› å­ä¸º0</strong>ï¼Œè¯´æ˜æ’å…¥ä¹‹å‰ parent çš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ1ï¼Œæ’å…¥åè¢«è°ƒæ•´æˆ0ï¼Œ<strong>æ­¤æ—¶æ»¡è¶³AVLæ ‘çš„æ€§è´¨ï¼Œæ’å…¥æˆåŠŸï¼Œåœæ­¢æ£€æŸ¥</strong>ï¼›</p> 
<p>(2) <strong>å¦‚æœ parent çš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ1</strong>ï¼Œè¯´æ˜æ’å…¥å‰ parent çš„å¹³è¡¡å› å­ä¸€å®šä¸º0ï¼Œæ’å…¥åè¢«æ›´æ–°æˆæ­£è´Ÿ1ï¼Œ<strong>æ­¤æ—¶ä»¥ parent ä¸ºæ ¹çš„æ ‘çš„é«˜åº¦å¢åŠ ï¼Œéœ€è¦ç»§ç»­å‘ä¸Šæ›´æ–°æ£€æŸ¥</strong>ï¼›</p> 
<p>(3) <strong>å¦‚æœ parent çš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ2</strong>ï¼Œåˆ™ parent çš„å¹³è¡¡å› å­è¿åå¹³è¡¡æ ‘çš„æ€§è´¨ï¼Œ<strong>æ­¤æ—¶éœ€è¦å¯¹å…¶è¿›è¡Œæ—‹è½¬å¤„ç†</strong></p> 
<pre><code class="prism language-c"><span class="token comment">//è°ƒèŠ‚å¹³è¡¡å› å­â€¦â€¦ç»­ä¸Šæ–‡ä»£ç </span>

<span class="token comment">//ä»curå¼€å§‹ï¼Œä¸€ç›´å‘ä¸Šæ›´æ–°ã€‚æ ¹æ®curæ˜¯parentçš„å·¦æˆ–å³ï¼Œ</span>
<span class="token comment">// å¯¹parentçš„å¹³è¡¡å› å­--æˆ–++</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
		parent<span class="token operator">-&gt;</span>_bf<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		parent<span class="token operator">-&gt;</span>_bf<span class="token operator">++</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// æ­¤æ—¶å¹³è¡¡äº†ï¼Œåœæ­¢æ›´æ–°</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//ç»§ç»­å‘ä¸Šæ›´æ–°</span>
		cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		parent <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// æ—‹è½¬æ“ä½œâ€¦â€¦</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="AVL_154"></a>å››ï¼ŒAVLæ ‘çš„æ—‹è½¬</h2> 
<p>å¦‚æœ parent çš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ2ï¼Œæ­¤æ—¶å¿…é¡»è°ƒæ•´æ ‘çš„ç»“æ„ï¼Œä½¿ä¹‹å¹³è¡¡åŒ–ã€‚</p> 
<p>æ ¹æ®èŠ‚ç‚¹æ’å…¥ä½ç½®çš„ä¸åŒï¼Œ<strong>AVLæ ‘çš„æ—‹è½¬åˆ†ä¸ºå››ç§</strong>ï¼Œä¸‹é¢å°†é€šè¿‡æŠ½è±¡å›¾ä¸å…·è±¡å›¾è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼š</p> 
<p><strong>è¯´æ˜ï¼šä¸‹é¢çš„æŠ½è±¡å›¾ä¸­ a/b/c/d è¡¨ç¤ºAVLæ ‘ï¼Œh/h+1 è¡¨ç¤ºæ ‘çš„é«˜åº¦ï¼Œ h &gt;= 0</strong>ã€‚</p> 
<h3><a id="41__160"></a>4.1 å³å•æ—‹</h3> 
<p>æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å·¦å­æ ‘çš„å·¦ä¾§ â€” å·¦å·¦ï¼šå³å•æ—‹</p> 
<p><strong>æŠ½è±¡å›¾</strong>ï¼š</p> 
<p><img src="https://images2.imgbox.com/b5/3f/Hhzdna6R_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸Šå›¾åœ¨æ’å…¥å‰ï¼ŒAVLæ ‘æ˜¯å¹³è¡¡çš„ï¼Œæ–°èŠ‚ç‚¹æ’å…¥åˆ°30çš„å·¦å­æ ‘(æ³¨æ„ï¼šæ­¤å¤„ä¸æ˜¯å·¦å­©å­)ä¸­ï¼Œ30å·¦<br> å­æ ‘å¢åŠ äº†ä¸€å±‚ï¼Œå¯¼è‡´ä»¥60ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸å¹³è¡¡ï¼Œè¦è®©60å¹³è¡¡ï¼Œåªèƒ½å°†60å·¦å­æ ‘çš„é«˜åº¦å‡å°‘ä¸€å±‚ï¼Œå³å­æ ‘å¢åŠ ä¸€å±‚ï¼Œ<strong>å³å°†å·¦å­æ ‘å¾€ä¸Šæï¼Œè¿™æ ·60è½¬ä¸‹æ¥</strong>ï¼Œå› ä¸º60æ¯”30å¤§ï¼Œåªèƒ½å°†å…¶æ”¾åœ¨30çš„å³å­æ ‘ï¼Œè€Œå¦‚æœ30æœ‰å³å­æ ‘ï¼Œå³å­æ ‘æ ¹çš„å€¼ä¸€å®šå¤§äº30ï¼Œå°äº60ï¼Œåªèƒ½å°†å…¶æ”¾åœ¨60çš„å·¦å­æ ‘ï¼Œæ—‹è½¬å®Œæˆåï¼Œæ›´æ–°èŠ‚ç‚¹çš„å¹³è¡¡å› å­å³å¯ã€‚</p> 
<p>åœ¨æ—‹è½¬è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µéœ€è¦è€ƒè™‘ï¼š</p> 
<p>(1) <mark>30èŠ‚ç‚¹çš„å³å­©å­å¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨</mark>ï¼›</p> 
<p>(2) <mark>60å¯èƒ½æ˜¯æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å­æ ‘</mark>ã€‚å¦‚æœæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ—‹è½¬å®Œæˆåï¼Œè¦æ›´æ–°æ ¹èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯å­æ ‘ï¼Œå¯èƒ½æ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œä¹Ÿå¯èƒ½æ˜¯å³å­æ ‘ã€‚</p> 
<p><strong>å…·è±¡å›¾</strong>ï¼š</p> 
<p>å…·è±¡å›¾çš„å®é™…æƒ…å†µæœ‰æ— ç©·å¤šç§ï¼Œè¿™é‡Œç”¨ h == 1 æ¥è¯´æ˜æƒ…å†µã€‚</p> 
<p><img src="https://images2.imgbox.com/d8/6c/whx5dluy_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ’å…¥æ–°å¢åå‘ä¸Šæ£€æŸ¥å˜åˆ°ç¬¬äºŒä¸ªå›¾ï¼Œæ­¤æ—¶éœ€è¦æ—‹è½¬ï¼ŒæŠŠ30çš„å³å­æ ‘æ‹¿ç»™60å½“å·¦å­æ ‘ï¼Œ60çš„å·¦è¾¹å¤ªé«˜äº†ï¼ŒæŠŠå®ƒå‘ä¸‹å‹é™ä½é«˜åº¦ï¼ŒæŠŠ60é‚£ä¸ªå­æ ‘æ‹¿ç»™30å½“å³å­æ ‘ã€‚</p> 
<p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-c"><span class="token comment">//å³å•æ—‹</span>
<span class="token keyword">void</span> <span class="token function">RotateR</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> subL <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> subLR <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>subLR<span class="token punctuation">)</span>
		subLR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
	parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subLR<span class="token punctuation">;</span>

	subL<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> parent<span class="token punctuation">;</span>

	<span class="token comment">//æ”¹å˜ä¹‹å‰è®°å½•</span>
	Node<span class="token operator">*</span> ppNode <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
	parent<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> subL<span class="token punctuation">;</span>

	<span class="token comment">//parentä¸ºæ ¹</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> _root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_root <span class="token operator">=</span> subL<span class="token punctuation">;</span>
		_root<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//parentä¸ºä¸€é¢—å­æ ‘</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> parent<span class="token punctuation">)</span>
			ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subL<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			ppNode<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subL<span class="token punctuation">;</span>

		subL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> ppNode<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="42__225"></a>4.2 å·¦å•æ—‹</h3> 
<p>æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å³å­æ ‘çš„å³ä¾§â€”å³å³ï¼šå·¦å•æ—‹</p> 
<p>å®ç°åŠæƒ…å†µè€ƒè™‘å¯å‚è€ƒå³å•æ—‹ã€‚</p> 
<p><strong>æŠ½è±¡å›¾</strong>ï¼š</p> 
<p><img src="https://images2.imgbox.com/8d/fb/hbr064Sa_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>å…·è±¡å›¾</strong>ï¼š</p> 
<p><img src="https://images2.imgbox.com/a7/3f/Sxdbwxqa_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-c"><span class="token comment">//å·¦å•æ—‹</span>
<span class="token keyword">void</span> <span class="token function">RotateL</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> subR <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> subRL <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>subRL<span class="token punctuation">)</span>
		subRL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
	parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subRL<span class="token punctuation">;</span>

	subR<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> parent<span class="token punctuation">;</span>

	Node<span class="token operator">*</span> ppNode <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
	parent<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> subR<span class="token punctuation">;</span>

	<span class="token comment">//parentä¸ºæ ¹</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> _root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_root <span class="token operator">=</span> subR<span class="token punctuation">;</span>
		_root<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//parentä¸ºä¸€é¢—å­æ ‘</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> parent<span class="token punctuation">)</span>
			ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subR<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			ppNode<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subR<span class="token punctuation">;</span>

		subR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> ppNode<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="43__276"></a>4.3 å³å·¦åŒæ—‹</h3> 
<p>æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å³å­æ ‘çš„å·¦ä¾§â€”å³å·¦ï¼šå…ˆå³å•æ—‹å†å·¦å•æ—‹ã€‚</p> 
<p><strong>æŠ½è±¡å›¾</strong>ï¼š</p> 
<p><img src="https://images2.imgbox.com/11/d5/X8AbAYI2_o.png" alt="![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/direct/ba29d676d7784dd7893a2df9a54b5838.png"></p> 
<p>å°†åŒæ—‹å˜æˆå•æ—‹åå†æ—‹è½¬ï¼Œå³ï¼šå…ˆå¯¹90è¿›è¡Œå³å•æ—‹ï¼Œç„¶åå†å¯¹30è¿›è¡Œå·¦å•æ—‹ï¼Œæ—‹è½¬å®Œæˆåå†è€ƒè™‘å¹³è¡¡å› å­çš„æ›´æ–°ã€‚</p> 
<p><strong>å…·è±¡å›¾</strong>ï¼š</p> 
<p>æœ‰äº†ä¸Šé¢çš„å·¦å•æ—‹ï¼Œå³å•æ—‹ï¼ŒåŒæ—‹å¯ä»¥ç›´æ¥å¤ç”¨ï¼ŒåŒæ—‹åéº»çƒ¦çš„æ˜¯å¹³è¡¡å› å­çš„æ›´æ–°ï¼Œåˆæœ‰ä¸‰ç§æƒ…å†µï¼š</p> 
<p><strong>æ—‹è½¬å‰ä¿å­˜ subRL çš„å¹³è¡¡å› å­ï¼Œæ—‹è½¬å®Œæˆä¹‹åï¼Œéœ€è¦æ ¹æ®è¯¥å¹³è¡¡å› å­æ¥è°ƒæ•´å…¶ä»–èŠ‚ç‚¹çš„å¹³è¡¡å› å­</strong>ã€‚</p> 
<p><img src="https://images2.imgbox.com/fa/d6/olkRAX8p_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-c"><span class="token comment">//å³å·¦åŒæ—‹</span>
<span class="token keyword">void</span> <span class="token function">RotateRL</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> subR <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> subRL <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
	
	<span class="token keyword">int</span> bf <span class="token operator">=</span> subRL<span class="token operator">-&gt;</span>_bf<span class="token punctuation">;</span>

	<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»è¿‡è¿™ä¸ªå•æ—‹ï¼Œå˜æˆå•çº¯çš„å³è¾¹é«˜</span>
	<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		subRL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		subRL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		subRL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
		<span class="token function">assert</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="44__331"></a>4.4 å·¦å³åŒæ—‹</h3> 
<p>æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å·¦å­æ ‘çš„å³ä¾§â€”å·¦å³ï¼šå…ˆå·¦å•æ—‹å†å³å•æ—‹ã€‚</p> 
<p><strong>æŠ½è±¡å›¾</strong>ï¼š</p> 
<p><img src="https://images2.imgbox.com/f9/a9/uWexPGNh_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å°†åŒæ—‹å˜æˆå•æ—‹åå†æ—‹è½¬ï¼Œå³ï¼šå…ˆå¯¹30è¿›è¡Œå·¦å•æ—‹ï¼Œç„¶åå†å¯¹90è¿›è¡Œå³å•æ—‹ï¼Œæ—‹è½¬å®Œæˆåå†<br> è€ƒè™‘å¹³è¡¡å› å­çš„æ›´æ–°ã€‚</p> 
<p><strong>å…·è±¡å›¾</strong>ï¼š</p> 
<p><img src="https://images2.imgbox.com/f1/d5/5WejqbO5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-c"><span class="token comment">//å·¦å³åŒæ—‹</span>
<span class="token keyword">void</span> <span class="token function">RotateLR</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> subL <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> subLR <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

	<span class="token keyword">int</span> bf <span class="token operator">=</span> subLR<span class="token operator">-&gt;</span>_bf<span class="token punctuation">;</span>

	<span class="token function">RotateL</span><span class="token punctuation">(</span>subL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»è¿‡è¿™ä¸ªå•æ—‹ï¼Œå˜æˆå•çº¯çš„å³è¾¹é«˜</span>
	<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		subLR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		subLR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		subLR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
		<span class="token function">assert</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="45__383"></a>4.5 æ’å…¥ä»£ç çš„å®Œæ•´å®ç°</h3> 
<pre><code class="prism language-c">bool <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_root <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> true<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cur <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//é“¾æ¥æ—¶è¦åˆ¤æ–­é“¾æ¥åœ¨å·¦è¿˜æ˜¯å³</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
		parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> cur<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> cur<span class="token punctuation">;</span>

	cur<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>

	<span class="token comment">//æ›´æ–°å¹³è¡¡å› å­</span>
	<span class="token comment">//ä»curå¼€å§‹ï¼Œä¸€ç›´å‘ä¸Šæ›´æ–°ã€‚æ ¹æ®curæ˜¯parentçš„å·¦æˆ–å³ï¼Œ</span>
	<span class="token comment">// å¯¹parentçš„å¹³è¡¡å› å­--æˆ–++</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
			parent<span class="token operator">-&gt;</span>_bf<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			parent<span class="token operator">-&gt;</span>_bf<span class="token operator">++</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// æ­¤æ—¶å¹³è¡¡äº†ï¼Œåœæ­¢æ›´æ–°</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//ç»§ç»­å‘ä¸Šæ›´æ–°</span>
			cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//å½“å‰å­æ ‘å‡ºç°äº†é—®é¢˜ï¼Œéœ€è¦æ—‹è½¬å¹³è¡¡ä¸€ä¸‹</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//å•çº¯å·¦è¾¹é«˜ï¼Œå³å•æ—‹</span>
				<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//å•çº¯å³è¾¹é«˜ï¼Œå·¦å•æ—‹</span>
				<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//å³å·¦åŒæ—‹</span>
				<span class="token function">RotateRL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//å·¦å³åŒæ—‹</span>
				<span class="token function">RotateLR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">//æ—‹è½¬å®Œæˆåï¼Œå°±ä¸è¦ç»§ç»­å‘ä¸Šæ›´æ–°äº†ï¼Œå› ä¸ºæ­¤æ—¶å·²ç»è¾¾åˆ°äº†å¹³è¡¡ï¼Œ</span>
			<span class="token comment">// å¹¶ä¸”æ—‹è½¬åé«˜åº¦ä¸å˜ï¼Œä¸å½±å“ä¸Šé¢çš„çˆ¶äº²äº†</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="46__472"></a>4.6 æ—‹è½¬æ€»ç»“</h3> 
<p>æ€»ç»“ï¼š<br> <mark>å‡å¦‚ä»¥ parent ä¸ºæ ¹çš„å­æ ‘ä¸å¹³è¡¡ï¼Œå³ parent çš„å¹³è¡¡å› å­ä¸º2æˆ–è€…-2</mark>ï¼Œåˆ†ä»¥ä¸‹æƒ…å†µè€ƒè™‘ï¼š</p> 
<p>(1) <strong>parent çš„å¹³è¡¡å› å­ä¸º2</strong>ï¼Œè¯´æ˜ parent çš„å³å­æ ‘é«˜ï¼Œè®¾ parent çš„å³å­æ ‘çš„æ ¹ä¸º subRï¼š<br> <strong>å½“pSubRçš„å¹³è¡¡å› å­ä¸º1æ—¶ï¼Œæ‰§è¡Œå·¦å•æ—‹</strong>ï¼Œ<br> <strong>å½“pSubRçš„å¹³è¡¡å› å­ä¸º-1æ—¶ï¼Œæ‰§è¡Œå³å·¦åŒæ—‹</strong>ã€‚</p> 
<p>(2) <strong>parent çš„å¹³è¡¡å› å­ä¸º-2</strong>ï¼Œè¯´æ˜ parent çš„å·¦å­æ ‘é«˜ï¼Œè®¾ parent çš„å·¦å­æ ‘çš„æ ¹ä¸º subLï¼š<br> <strong>å½“ subL çš„å¹³è¡¡å› å­ä¸º-1æ˜¯ï¼Œæ‰§è¡Œå³å•æ—‹</strong>ï¼Œ<br> <strong>å½“ subL çš„å¹³è¡¡å› å­ä¸º1æ—¶ï¼Œæ‰§è¡Œå·¦å³åŒæ—‹</strong>ã€‚</p> 
<p>é¡ºå£æºœï¼š<mark>parent å’Œ subL/subR çš„å¹³è¡¡å› å­ï¼ŒåŒå·å•æ—‹ï¼Œå¼‚å·åŒæ—‹</mark>ã€‚</p> 
<p>æ—‹è½¬å®Œæˆåï¼ŒåŸ parent ä¸ºæ ¹çš„å­æ ‘ä¸ªé«˜åº¦é™ä½ï¼Œå·²ç»å¹³è¡¡ï¼Œä¸éœ€è¦å†å‘ä¸Šæ›´æ–°ã€‚</p> 
<h2><a id="AVL_489"></a>äº”ï¼ŒAVLæ ‘çš„éªŒè¯</h2> 
<p>AVLæ ‘æ˜¯åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸ŠåŠ å…¥äº†å¹³è¡¡æ€§çš„é™åˆ¶ï¼Œå› æ­¤è¦éªŒè¯AVLæ ‘ï¼Œå¯ä»¥åˆ†ä¸¤æ­¥ï¼š</p> 
<p><strong>(1) éªŒè¯å…¶ä¸ºäºŒå‰æœç´¢æ ‘</strong><br> <strong>å¦‚æœä¸­åºéå†å¯å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—ï¼Œå°±è¯´æ˜ä¸ºäºŒå‰æœç´¢æ ‘</strong></p> 
<p><strong>(2) éªŒè¯å…¶ä¸ºå¹³è¡¡æ ‘</strong><br> <strong>æ¯ä¸ªèŠ‚ç‚¹å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(æ³¨æ„èŠ‚ç‚¹ä¸­å¦‚æœæ²¡æœ‰å¹³è¡¡å› å­)èŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯å¦è®¡ç®—æ­£ç¡®</strong>ã€‚</p> 
<p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-c">public<span class="token operator">:</span>
	<span class="token comment">//ä¸­åºéå†</span>
	<span class="token keyword">void</span> <span class="token function">Inorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">_Inorder</span><span class="token punctuation">(</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//æ£€æŸ¥æ˜¯å¦å¹³è¡¡</span>
	bool <span class="token function">Is_balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">_Is_balance</span><span class="token punctuation">(</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

private<span class="token operator">:</span>
	<span class="token keyword">int</span> <span class="token function">_Height</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	bool <span class="token function">_Is_balance</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>

		<span class="token keyword">int</span> leftHeight <span class="token operator">=</span> <span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> rightHeight <span class="token operator">=</span> <span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//åˆ¤æ–­å·¦å³å­æ ‘çš„é«˜åº¦å·®</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>leftHeight <span class="token operator">-</span> rightHeight<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> root<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">_Is_balance</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">_Is_balance</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">_Inorder</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>

		<span class="token function">_Inorder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> root<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> root<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">_Inorder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="AVL_553"></a>å…­ï¼ŒAVLæ ‘çš„æ€§èƒ½</h2> 
<p>AVLæ ‘æ˜¯ä¸€æ£µ<strong>ç»å¯¹å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘</strong>ï¼Œå…¶è¦æ±‚æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼éƒ½ä¸è¶…è¿‡1ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æŸ¥è¯¢æ—¶é«˜æ•ˆçš„æ—¶é—´å¤æ‚åº¦ï¼Œå³<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         l 
        
       
         o 
        
        
        
          g 
         
        
          2 
         
        
       
         ( 
        
       
         N 
        
       
         ) 
        
       
      
        log_2 (N) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mclose">)</span></span></span></span></span>ã€‚<strong>ä½†æ˜¯å¦‚æœè¦å¯¹AVLæ ‘åšä¸€äº›ç»“æ„ä¿®æ”¹çš„æ“ä½œï¼Œæ€§èƒ½éå¸¸ä½ä¸‹ï¼Œæ¯”å¦‚ï¼šæ’å…¥æ—¶è¦ç»´æŠ¤å…¶ç»å¯¹å¹³è¡¡ï¼Œæ—‹è½¬çš„æ¬¡æ•°æ¯”è¾ƒå¤šï¼Œæ›´å·®çš„æ˜¯åœ¨åˆ é™¤æ—¶ï¼Œæœ‰å¯èƒ½ä¸€ç›´è¦è®©æ—‹è½¬æŒç»­åˆ°æ ¹çš„ä½ç½®</strong>ã€‚å› æ­¤ï¼šå¦‚æœéœ€è¦ä¸€ç§æŸ¥è¯¢é«˜æ•ˆä¸”æœ‰åºçš„æ•°æ®ç»“æ„ï¼Œè€Œä¸”æ•°æ®çš„ä¸ªæ•°ä¸ºé™æ€çš„(å³ä¸ä¼šæ”¹å˜)ï¼Œå¯ä»¥è€ƒè™‘AVLæ ‘ï¼Œä½†ä¸€ä¸ªç»“æ„ç»å¸¸ä¿®æ”¹ï¼Œå°±ä¸å¤ªé€‚åˆã€‚</p> 
<h2><a id="AVL_556"></a>ä¸ƒï¼Œå®ç°AVLæ ‘çš„å®Œæ•´ä»£ç </h2> 
<p><mark>AVLTree.h</mark></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;assert.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>
using namespace std<span class="token punctuation">;</span>

template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">AVLTNode</span>
<span class="token punctuation">{<!-- --></span>
	pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span> _kv<span class="token punctuation">;</span>
	AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _left<span class="token punctuation">;</span>
	AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _right<span class="token punctuation">;</span>
	AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _parent<span class="token punctuation">;</span>

	<span class="token keyword">int</span> _bf<span class="token punctuation">;</span> <span class="token comment">//å¹³è¡¡å› å­ï¼šå³å­æ ‘é«˜åº¦- å·¦å­æ ‘é«˜åº¦</span>

	<span class="token function">AVLTNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_kv</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_left</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_right</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_parent</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_bf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token operator">&gt;</span>
class AVLTree
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> AVLTNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
public<span class="token operator">:</span>
	Node<span class="token operator">*</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				<span class="token keyword">return</span> cur<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> nullptr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	bool <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_root <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Node<span class="token operator">*</span> cur <span class="token operator">=</span> _root<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
				<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cur <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//é“¾æ¥æ—¶è¦åˆ¤æ–­é“¾æ¥åœ¨å·¦è¿˜æ˜¯å³</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&gt;</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">)</span>
			parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> cur<span class="token punctuation">;</span>

		cur<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>

		<span class="token comment">//æ›´æ–°å¹³è¡¡å› å­</span>
		<span class="token comment">//ä»curå¼€å§‹ï¼Œä¸€ç›´å‘ä¸Šæ›´æ–°ã€‚æ ¹æ®curæ˜¯parentçš„å·¦æˆ–å³ï¼Œ</span>
		<span class="token comment">// å¯¹parentçš„å¹³è¡¡å› å­--æˆ–++</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span>
				parent<span class="token operator">-&gt;</span>_bf<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				parent<span class="token operator">-&gt;</span>_bf<span class="token operator">++</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// æ­¤æ—¶å¹³è¡¡äº†ï¼Œåœæ­¢æ›´æ–°</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//ç»§ç»­å‘ä¸Šæ›´æ–°</span>
				cur <span class="token operator">=</span> parent<span class="token punctuation">;</span>
				parent <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//å½“å‰å­æ ‘å‡ºç°äº†é—®é¢˜ï¼Œéœ€è¦æ—‹è½¬å¹³è¡¡ä¸€ä¸‹</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//å•çº¯å·¦è¾¹é«˜ï¼Œå³å•æ—‹</span>
					<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//å•çº¯å³è¾¹é«˜ï¼Œå·¦å•æ—‹</span>
					<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//å³å·¦åŒæ—‹</span>
					<span class="token function">RotateRL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>_bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//å·¦å³åŒæ—‹</span>
					<span class="token function">RotateLR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				
				<span class="token comment">//æ—‹è½¬å®Œæˆåï¼Œå°±ä¸è¦ç»§ç»­å‘ä¸Šæ›´æ–°äº†ï¼Œå› ä¸ºæ­¤æ—¶å·²ç»è¾¾åˆ°äº†å¹³è¡¡ï¼Œ</span>
				<span class="token comment">// å¹¶ä¸”æ—‹è½¬åé«˜åº¦ä¸å˜ï¼Œä¸å½±å“ä¸Šé¢çš„çˆ¶äº²äº†</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
				<span class="token function">assert</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> true<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//å³å•æ—‹</span>
	<span class="token keyword">void</span> <span class="token function">RotateR</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subL <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subLR <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>subLR<span class="token punctuation">)</span>
			subLR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subLR<span class="token punctuation">;</span>

		subL<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> parent<span class="token punctuation">;</span>

		<span class="token comment">//æ”¹å˜ä¹‹å‰è®°å½•</span>
		Node<span class="token operator">*</span> ppNode <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> subL<span class="token punctuation">;</span>

		<span class="token comment">//parentä¸ºæ ¹</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> _root<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_root <span class="token operator">=</span> subL<span class="token punctuation">;</span>
			_root<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//parentä¸ºä¸€é¢—å­æ ‘</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> parent<span class="token punctuation">)</span>
				ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subL<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				ppNode<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subL<span class="token punctuation">;</span>

			subL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> ppNode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//å·¦å•æ—‹</span>
	<span class="token keyword">void</span> <span class="token function">RotateL</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subR <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subRL <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>subRL<span class="token punctuation">)</span>
			subRL<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subRL<span class="token punctuation">;</span>

		subR<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> parent<span class="token punctuation">;</span>

		Node<span class="token operator">*</span> ppNode <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_parent<span class="token punctuation">;</span>
		parent<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> subR<span class="token punctuation">;</span>

		<span class="token comment">//parentä¸ºæ ¹</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> _root<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_root <span class="token operator">=</span> subR<span class="token punctuation">;</span>
			_root<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//parentä¸ºä¸€é¢—å­æ ‘</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">==</span> parent<span class="token punctuation">)</span>
				ppNode<span class="token operator">-&gt;</span>_left <span class="token operator">=</span> subR<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				ppNode<span class="token operator">-&gt;</span>_right <span class="token operator">=</span> subR<span class="token punctuation">;</span>

			subR<span class="token operator">-&gt;</span>_parent <span class="token operator">=</span> ppNode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//å³å·¦åŒæ—‹</span>
	<span class="token keyword">void</span> <span class="token function">RotateRL</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subR <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subRL <span class="token operator">=</span> subR<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		
		<span class="token keyword">int</span> bf <span class="token operator">=</span> subRL<span class="token operator">-&gt;</span>_bf<span class="token punctuation">;</span>

		<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»è¿‡è¿™ä¸ªå•æ—‹ï¼Œå˜æˆå•çº¯çš„å³è¾¹é«˜</span>
		<span class="token function">RotateL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			subRL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
			subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			subRL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			subR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			subRL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>

	<span class="token comment">//å·¦å³åŒæ—‹</span>
	<span class="token keyword">void</span> <span class="token function">RotateLR</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> parent<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Node<span class="token operator">*</span> subL <span class="token operator">=</span> parent<span class="token operator">-&gt;</span>_left<span class="token punctuation">;</span>
		Node<span class="token operator">*</span> subLR <span class="token operator">=</span> subL<span class="token operator">-&gt;</span>_right<span class="token punctuation">;</span>

		<span class="token keyword">int</span> bf <span class="token operator">=</span> subLR<span class="token operator">-&gt;</span>_bf<span class="token punctuation">;</span>

		<span class="token function">RotateL</span><span class="token punctuation">(</span>subL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»è¿‡è¿™ä¸ªå•æ—‹ï¼Œå˜æˆå•çº¯çš„å³è¾¹é«˜</span>
		<span class="token function">RotateR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			subLR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
			parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			subLR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bf <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			subL<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			parent<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			subLR<span class="token operator">-&gt;</span>_bf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//ä¸­åºéå†</span>
	<span class="token keyword">void</span> <span class="token function">Inorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">_Inorder</span><span class="token punctuation">(</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//æ£€æŸ¥æ˜¯å¦å¹³è¡¡</span>
	bool <span class="token function">Is_balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">_Is_balance</span><span class="token punctuation">(</span>_root<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

private<span class="token operator">:</span>
	<span class="token keyword">int</span> <span class="token function">_Height</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	bool <span class="token function">_Is_balance</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>

		<span class="token keyword">int</span> leftHeight <span class="token operator">=</span> <span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> rightHeight <span class="token operator">=</span> <span class="token function">_Height</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//åˆ¤æ–­å·¦å³å­æ ‘çš„é«˜åº¦å·®</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>leftHeight <span class="token operator">-</span> rightHeight<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> root<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">_Is_balance</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">_Is_balance</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">_Inorder</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> root<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>

		<span class="token function">_Inorder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_left<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> root<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> root<span class="token operator">-&gt;</span>_kv<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">_Inorder</span><span class="token punctuation">(</span>root<span class="token operator">-&gt;</span>_right<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
private<span class="token operator">:</span>
	Node<span class="token operator">*</span> _root <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">//æµ‹è¯•ä»£ç </span>
<span class="token keyword">void</span> <span class="token function">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">13</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	AVLTree<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> t<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> a<span class="token punctuation">)</span>
		t<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>e <span class="token punctuation">,</span>e<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	t<span class="token punctuation">.</span><span class="token function">Inorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> t<span class="token punctuation">.</span><span class="token function">Is_balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><mark>Test.cpp</mark></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> </span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"AVLTree.h"</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p> 
<p><strong>ä¸­åºéå†æ˜¯æœ‰åºçš„ï¼Œè¯´æ˜æ˜¯æœç´¢äºŒå‰æ ‘ï¼Œè¿”å›1ï¼Œè¯´æ˜æ˜¯å¹³è¡¡æ ‘</strong>ã€‚</p> 
<p><img src="https://images2.imgbox.com/ce/26/vcs7phGx_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6e650e1f528c8207ee323d31b99baadc/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">anaconda&#43;tensorflow&#43;keras&#43;jupyter notebookæ­å»ºè¿‡ç¨‹ï¼ˆCPUç‰ˆï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/17747c9bb46ccb4f5b128e77b7ef98e1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">C&#43;&#43;ä¸­çš„ä¾èµ–æ³¨å…¥</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>