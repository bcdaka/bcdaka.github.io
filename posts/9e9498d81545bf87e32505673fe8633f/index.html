<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用宝塔面板部署node项目、数据库及react项目 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9e9498d81545bf87e32505673fe8633f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="使用宝塔面板部署node项目、数据库及react项目">
  <meta property="og:description" content="1.前置准备 a.数据库文件 .sql文件
没有的可以参考我的:
链接: https://pan.baidu.com/s/1l23nNmkSt4JtQ7aRqPgpZw 提取码: 6d64 复制这段内容后打开百度网盘手机App，操作更方便哦
b.完整的node项目
没有的可以参考我的：https://github.com/rui-rui-an/hkzf_node
c.react项目/vue项目
没有可以参考我的：https://github.com/rui-rui-an/cityRent
d.前置知识：知道怎么安装宝塔，不懂怎么在服务器上安装宝塔的可以看我这篇文章 e.已经有云服务器且安装了宝塔，不懂的可以看这篇文章
2.使用宝塔面板建数据库 a.打开宝塔面板的数据库 b.添加数据库 tips：注意这里的访问权限要打开，不然你本地去连线上数据库时连不上
这里建立的数据库要与你的node项目中的完全一致
c.可选步骤（sql文件过大时(大于50mb)需要设置，否则会导入不成功） 到软件商店里去设置php
把下面4个都选择成500
重启php
d.导入hkzf.sql文件 点击管理
这里的密码就是你刚才设置的
上传sql文件
如果你的数据库表里有数据，那么就是正确的
e.开放端口 这里特别要注意，需要开放两个地方的端口
1.需要开放宝塔面板的3306端口
2.需要把阿里云安全组的3306端口开放
f.修改node项目host地址，检验线上数据库是否部署成功 tips:这里的ip地址不要带有http!!!
运行node项目，能正常访问就说明我们线上的数据库部署成功了！
2.部署node项目 a.新建文件夹并将node项目（不需要打包）放到该文件夹下 将我们的node项目中的node_modules删除掉，然后再压缩，把这个压缩包上传上去，再解压，然后删除这个安装包即可
上传：
解压：
最后删除zip文件
b.开启宝塔面包中node项目的服务 到网站的node项目中去，安装node版本管理器
接着会提示你安装node,npm（node版本的选择看你的项目），同时它也会自动安装pm2
c.将我们的node项目文件放到node服务中 点击添加node项目，选择项目路径
tips：
项目目录：选择刚才a步骤的文件夹
项目名称和启动选项：会在你选了项目目录之后自动带入进去
项目端口号：很重要，这边我会解释的多一点！！！！！！！！！！这个要与你node项目中配置的端口号一致！！！后面去访问接口也是使用这个端口号！！
这个项目端口号可以随便填，但是一定要与node项目中配置的端口号一致，并且与vue项目中axios的base_url（项目基地址）的端口号一致，并且整个vue项目中的地址，你都是使用的base_url变量，而不是写死的常量。有一个不一致，都会导致网络请求错误。
（下图是我的node项目中的端口号，没写8080是因为我这个服务器的8080端口已经被另一个项目使用了，一定要注意不要和前端项目使用同一个端口，会导致端口占用！！！）
（vue项目的生产环境base_usl配置）
（封装的axios中的baseURL（项目基地址）使用的也是这个）
（平常的vue项目访问的图片和接口一定要用base_url，否则会出现请求错误的情况，我部署的时候就出现了，接口访问出错，找了很久，发现是vue项目里面写死了！！！）
（这里的图片也是，不能使用写死的）
d.开放接口端口 这里特别要注意，需要开放两个地方的端口
1.开放宝塔面板的9999端口
2.开放阿里云的安全组9999端口
e.测试项目接口 这里我使用的是在线的postman测试的
接口测试的没问题，那么说明我们的node项目已经在服务器上跑起来了
3.部署vue项目 a.修改线上环境的ip和端口 b.检查项目中有没有写死的地址，如果有，替换成变量process.env.REACT_APP_URL c.打包 d.到宝塔面板的网站中建立站点 tips:这里的域名随便填一个（后面还要删掉），主要是为了创建第三行的目录">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-27T01:27:01+08:00">
    <meta property="article:modified_time" content="2023-12-27T01:27:01+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用宝塔面板部署node项目、数据库及react项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1.前置准备</h3> 
<p><strong>a.数据库文件 .sql文件</strong><br> 没有的可以参考我的:<br> 链接: <a href="https://pan.baidu.com/s/1l23nNmkSt4JtQ7aRqPgpZw" rel="nofollow">https://pan.baidu.com/s/1l23nNmkSt4JtQ7aRqPgpZw</a> 提取码: 6d64 复制这段内容后打开百度网盘手机App，操作更方便哦<br> <strong>b.完整的node项目</strong><br> 没有的可以参考我的：<a href="https://github.com/rui-rui-an/hkzf_node">https://github.com/rui-rui-an/hkzf_node</a><br> <strong>c.react项目/vue项目</strong><br> 没有可以参考我的：<a href="https://github.com/rui-rui-an/cityRent">https://github.com/rui-rui-an/cityRent</a><br> <strong>d.前置知识：知道怎么安装宝塔</strong>，不懂怎么在服务器上安装宝塔的可以看我<a href="https://blog.csdn.net/weixin_43239880/article/details/129509419?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170360831216800222879973%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=170360831216800222879973&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-129509419-null-null.nonecase&amp;utm_term=%E5%AE%9D%E5%A1%94&amp;spm=1018.2226.3001.4450">这篇文章</a> <br> <strong>e.已经有云服务器且安装了宝塔</strong>，不懂的可以看<a href="https://blog.csdn.net/weixin_43239880/article/details/129509419?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522170360831216800222879973%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=170360831216800222879973&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-129509419-null-null.nonecase&amp;utm_term=%E5%AE%9D%E5%A1%94&amp;spm=1018.2226.3001.4450">这篇文章</a></p> 
<h3><a id="2_10"></a>2.使用宝塔面板建数据库</h3> 
<h5><a id="a_11"></a>a.打开宝塔面板的数据库</h5> 
<p><img src="https://images2.imgbox.com/9a/a9/hkKvaukR_o.png" alt="image.png"></p> 
<h5><a id="b_13"></a>b.添加数据库</h5> 
<p><img src="https://images2.imgbox.com/2f/36/UpLu4aGq_o.png" alt="image.png"><br> tips：注意这里的访问权限要打开，不然你本地去连线上数据库时连不上<br> 这里建立的数据库要与你的node项目中的完全一致<br> <img src="https://images2.imgbox.com/79/5e/NxjKSAic_o.png" alt="image.png"></p> 
<h5><a id="csql50mb_18"></a>c.可选步骤（sql文件过大时(大于50mb)需要设置，否则会导入不成功）</h5> 
<p>到软件商店里去设置php<br> <img src="https://images2.imgbox.com/ba/3b/Ppl4ptCo_o.png" alt="image.png"><br> 把下面4个都选择成500<br> <img src="https://images2.imgbox.com/d3/3f/MnXbXEGc_o.png" alt="image.png"><br> 重启php<br> <img src="https://images2.imgbox.com/cf/37/pxiNbhiP_o.png" alt="image.png"></p> 
<h5><a id="dhkzfsql_26"></a>d.导入hkzf.sql文件</h5> 
<p>点击管理<br> <img src="https://images2.imgbox.com/b0/ab/BI8Z5kuL_o.png" alt="image.png"><br> 这里的密码就是你刚才设置的<br> <img src="https://images2.imgbox.com/1b/28/Z2Rxra8V_o.png" alt="image.png"><br> 上传sql文件<br> <img src="https://images2.imgbox.com/79/74/zTMTsRRG_o.png" alt="image.png"><br> 如果你的数据库表里有数据，那么就是正确的<br> <img src="https://images2.imgbox.com/50/e0/tLpbZdRm_o.png" alt="image.png"></p> 
<h5><a id="e_35"></a>e.开放端口</h5> 
<p>这里特别要注意，需要开放两个地方的端口<br> 1.需要开放宝塔面板的3306端口<br> <img src="https://images2.imgbox.com/c3/0c/nWennWfY_o.png" alt="image.png"><br> 2.需要把阿里云安全组的3306端口开放<br> <img src="https://images2.imgbox.com/3d/bb/rhFoSCcV_o.png" alt="image.png"></p> 
<h5><a id="fnodehost_41"></a>f.修改node项目host地址，检验线上数据库是否部署成功</h5> 
<p><img src="https://images2.imgbox.com/09/ac/QAMf78kR_o.png" alt="image.png"><br> tips:这里的ip地址不要带有http!!!<br> 运行node项目，能正常访问就说明我们线上的数据库部署成功了！<br> <img src="https://images2.imgbox.com/2d/53/Ti4lzuKJ_o.png" alt="image.png"></p> 
<h3><a id="2node_46"></a>2.部署node项目</h3> 
<h5><a id="anode_47"></a>a.新建文件夹并将node项目（不需要打包）放到该文件夹下</h5> 
<p><img src="https://images2.imgbox.com/d8/0f/LKcz1Wz0_o.png" alt="image.png"><br> 将我们的node项目中的node_modules删除掉，然后再压缩，把这个压缩包上传上去，再解压，然后删除这个安装包即可<br> <img src="https://images2.imgbox.com/f9/84/qJNZmQx9_o.png" alt="image.png"><br> 上传：<br> <img src="https://images2.imgbox.com/8a/21/7Rp3jxqc_o.png" alt="image.png"><br> 解压：<br> <img src="https://images2.imgbox.com/4a/bb/8HXzRnah_o.png" alt="image.png"><br> 最后删除zip文件<br> <img src="https://images2.imgbox.com/77/2a/NIB3IbB4_o.png" alt="image.png"></p> 
<h5><a id="bnode_57"></a>b.开启宝塔面包中node项目的服务</h5> 
<p>到网站的node项目中去，安装node版本管理器<br> <img src="https://images2.imgbox.com/db/8b/EDiL7WPu_o.png" alt="image.png"><br> 接着会提示你安装node,npm（node版本的选择看你的项目），同时它也会自动安装pm2<br> <img src="https://images2.imgbox.com/60/cc/XhT1ZNV5_o.png" alt="image.png"></p> 
<h5><a id="cnodenode_62"></a>c.将我们的node项目文件放到node服务中</h5> 
<p>点击添加node项目，选择项目路径<br> <img src="https://images2.imgbox.com/b0/69/bCVC2BEh_o.png" alt="image.png"><br> tips：<br> 项目目录：选择刚才a步骤的文件夹<br> 项目名称和启动选项：会在你选了项目目录之后自动带入进去<br> 项目端口号：很重要，这边我会解释的多一点！！！！！！！！！！这个要与你node项目中配置的端口号一致！！！后面去访问接口也是使用这个端口号！！<br> 这个项目端口号可以随便填，但是一定要与node项目中配置的端口号一致，并且与vue项目中axios的base_url（项目基地址）的端口号一致，并且整个vue项目中的地址，你都是使用的base_url变量，而不是写死的常量。<strong>有一个不一致，都会导致网络请求错误</strong>。<br> （下图是我的node项目中的端口号，没写8080是因为我这个服务器的8080端口已经被另一个项目使用了，一定要注意不要和前端项目使用同一个端口，会导致端口占用！！！）<br> <img src="https://images2.imgbox.com/8c/db/VlGXiKjk_o.png" alt="image.png"><br> （vue项目的生产环境base_usl配置）<br> <img src="https://images2.imgbox.com/53/c7/rcgsLwvk_o.png" alt="image.png"><br> （封装的axios中的baseURL（项目基地址）使用的也是这个）<br> <img src="https://images2.imgbox.com/17/ff/e7UPHqWO_o.png" alt="image.png"><br> <img src="https://images2.imgbox.com/01/37/gfMfjNER_o.png" alt="image.png"><br> （平常的vue项目访问的图片和接口一定要用base_url，否则会出现请求错误的情况，我部署的时候就出现了，接口访问出错，找了很久，发现是vue项目里面写死了！！！）<br> <img src="https://images2.imgbox.com/6d/2c/TTuJaNeN_o.png" alt="image.png"><br> （这里的图片也是，不能使用写死的）<br> <img src="https://images2.imgbox.com/9d/4f/03u1fSUB_o.png" alt="image.png"></p> 
<h5><a id="d_81"></a>d.开放接口端口</h5> 
<p>这里特别要注意，需要开放两个地方的端口<br> 1.开放宝塔面板的9999端口<br> <img src="https://images2.imgbox.com/1a/e5/hF7wOat3_o.png" alt="image.png"><br> 2.开放阿里云的安全组9999端口<br> <img src="https://images2.imgbox.com/a2/11/0Jj9V9Dq_o.png" alt="image.png"></p> 
<h5><a id="e_87"></a>e.测试项目接口</h5> 
<p>这里我使用的是在线的postman测试的<br> <img src="https://images2.imgbox.com/8b/86/zX61NZCC_o.png" alt="image.png"><br> 接口测试的没问题，那么说明我们的node项目已经在服务器上跑起来了</p> 
<h3><a id="3vue_91"></a>3.部署vue项目</h3> 
<h5><a id="aip_92"></a>a.修改线上环境的ip和端口</h5> 
<p><img src="https://images2.imgbox.com/f3/3d/f5o9AsnT_o.png" alt="image.png"></p> 
<h5><a id="bprocessenvREACT_APP_URL_94"></a>b.检查项目中有没有写死的地址，如果有，替换成变量process.env.REACT_APP_URL</h5> 
<p><img src="https://images2.imgbox.com/3c/12/AKwNqlbp_o.png" alt="image.png"></p> 
<h5><a id="c_96"></a>c.打包</h5> 
<p><img src="https://images2.imgbox.com/e0/62/4wZTMGEA_o.png" alt="image.png"></p> 
<h5><a id="d_98"></a>d.到宝塔面板的网站中建立站点</h5> 
<p><img src="https://images2.imgbox.com/ba/50/T2umeRYJ_o.png" alt="image.png"><br> tips:这里的域名随便填一个（后面还要删掉），主要是为了创建第三行的目录</p> 
<h5><a id="evuehkzfcom_101"></a>e.把打包好的vue项目文件上传到上面一步生成的目录hkzf.com中</h5> 
<p>删除没有用的文件<br> <img src="https://images2.imgbox.com/52/b5/7vAOu0Up_o.png" alt="image.png"><br> 将打包好的vue项目文件传到该目录下<br> <img src="https://images2.imgbox.com/f6/70/vaTBMRwu_o.png" alt="image.png"></p> 
<h5><a id="fimagepnghttpsimgblogcsdnimgcnimg_converta13452b5206dfae26f3d7ef053362193png_106"></a>f.设置真正的域名并删除刚才的域名<img src="https://images2.imgbox.com/5e/b0/2e5xwLI4_o.png" alt="image.png"></h5> 
<p>设置真正的域名（我这里使用的是ip访问，由于我这里已经有一个项目使用的是8080端口，所以我这里使用6666的端口号，如果你们是第一次，那么直接写ip即可。）<br> 注意：这里填写的是你真正可以访问的域名或者ip<br> <img src="https://images2.imgbox.com/07/5d/qplKsH7w_o.png" alt="image.png"><br> 删除刚才的hkzf.com域名（原因是我没有买这个域名，所以这个域名没用，这个域名的作用其实就是充当文件夹的名字，好在宝塔面板的列表中知道你是哪个网站）<br> <img src="https://images2.imgbox.com/90/2b/Y9FIm7ZP_o.png" alt="image.png"></p> 
<h5><a id="g_112"></a>g.开放端口</h5> 
<p>注意：要同时开放宝塔面板的防火墙端口和阿里云安全组端口<br> 1.开放宝塔面板的防火墙端口<br> <img src="https://images2.imgbox.com/1a/70/CEGwxiHn_o.png" alt="image.png"><br> 2.开放阿里云安全组端口<br> <img src="https://images2.imgbox.com/ba/63/fcqCCYs2_o.png" alt="image.png"></p> 
<h5><a id="h_118"></a>h.检查前端项目是否部署上去</h5> 
<p>在浏览器中输入刚才填写的真正域名120.76.176.237:6666,访问成功说明已经成功部署上去了。(这里还有个小问题，就是刷新会404not found)<br> <img src="https://images2.imgbox.com/56/48/9pQKX7Z2_o.png" alt="image.png"></p> 
<h5><a id="ihistory404_121"></a>i.解决history路由，刷新页面404的问题</h5> 
<p>点击设置-配置文件-加入以下代码并保存</p> 
<pre><code class="prism language-javascript">location <span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
      try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f1/e0/Hu6DcDWa_o.png" alt="image.png"><br> 到此，你的项目已经全部部署到服务器中了，你就可以把你的网站发给别人进行浏览了</p> 
<h3><a id="_130"></a>参考链接</h3> 
<p>1.宝塔-如何部署自己的nodejs项目并跑起来：<a href="https://blog.csdn.net/Leijiang0504/article/details/129620483">https://blog.csdn.net/Leijiang0504/article/details/129620483</a><br> 2.宝塔-上传sql文件被限制<br> <a href="https://www.ewbang.com/community/article/details/961696273.html" rel="nofollow">https://www.ewbang.com/community/article/details/961696273.html</a><br> 3.宝塔-部署vue项目（视频）<br> <a href="https://www.bilibili.com/video/BV1H34y1H7L1/?spm_id_from=333.337.search-card.all.click&amp;vd_source=7738ab952ba89cab0761cead753a3bcc" rel="nofollow">https://www.bilibili.com/video/BV1H34y1H7L1/?spm_id_from=333.337.search-card.all.click&amp;vd_source=7738ab952ba89cab0761cead753a3bcc</a><br> 4.宝塔-刷新页面404问题<br> <a href="https://blog.csdn.net/weixin_43861689/article/details/132118103">https://blog.csdn.net/weixin_43861689/article/details/132118103</a><br> 5.宝塔-使用路由访问可以访问不同的前端项目（没参考，但是学到了新东西，视频）<br> <a href="https://www.bilibili.com/video/BV1Ex4y1E7VT/?spm_id_from=333.337.search-card.all.click" rel="nofollow">https://www.bilibili.com/video/BV1Ex4y1E7VT/?spm_id_from=333.337.search-card.all.click</a><br> 该视频主要说的是，将另一个打包好的前端项目放已上线的前端项目，可以通过路由访问。原理是浏览器输入url相当于发送了一个get请求，后台会把该路径下的index.html返回回来。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/70e31c6b5f15208960365b819194d0af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ONNX格式模型 学习笔记 (onnxRuntime部署)---用java调用yolov8模型来举例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6c8e014ece0f9846ee5e17e63ac3c898/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人工智能在软件工程中的应用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>