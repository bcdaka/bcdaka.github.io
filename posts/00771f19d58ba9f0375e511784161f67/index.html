<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot 整合WebService - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/00771f19d58ba9f0375e511784161f67/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SpringBoot 整合WebService">
  <meta property="og:description" content="文章目录 WebService1.简单介绍WebService1.1. 类型1.2. 架构1.3. 主要特点1.4. 使用场景1.5. Web服务标准和技术 2.案例-WebServiceDemo2.1.引入配置文件2.2.创建接口2.3.创建接口实现类2.4.创建WebService配置类2.5.测试 WebService Web服务（Web Services）是一种基于网络的标准化的软件系统，允许不同的应用程序通过网络相互通信和交互。它们使用标准化的网络协议和数据格式，使得不同平台、不同语言编写的应用程序能够互相通信和交换数据。
在现代软件开发中，构建可靠的Web服务是至关重要的。Apache CXF是一个功能强大的Java框架，用于构建Web服务和Web应用程序。结合Spring Boot，我们可以快速搭建一个简单的WebService。本文将介绍如何使用Apache CXF和Spring Boot创建一个简单的WebService，并进行基本的测试。
1.简单介绍WebService 1.1. 类型 Web服务通常分为两种主要类型：
SOAP Web服务：基于SOAP（Simple Object Access Protocol）协议的Web服务。SOAP是一种用于交换结构化信息的协议，它使用XML作为消息格式，并通常通过HTTP协议进行传输。RESTful Web服务：基于REST（Representational State Transfer）原则的Web服务。RESTful服务使用标准的HTTP方法（如GET、POST、PUT、DELETE）来执行操作，并通常返回JSON或XML格式的数据。 1.2. 架构 Web服务的架构通常包括以下关键组件：
服务提供者（Service Provider）：提供Web服务的实体。它们发布服务并处理来自客户端的请求。服务请求者（Service Requestor）：使用Web服务的客户端应用程序。它们向服务提供者发送请求并处理响应。服务描述（Service Description）：Web服务的描述文件，通常使用WSDL（Web Services Description Language）或OpenAPI等格式来描述服务的接口和操作。消息格式（Message Format）：Web服务使用的数据交换格式，通常是XML或JSON。通信协议（Communication Protocol）：Web服务之间通信的协议，常见的包括HTTP、HTTPS、SMTP等。 1.3. 主要特点 Web服务具有以下主要特点：
跨平台性（Platform Independence）：由于Web服务使用标准化的协议和数据格式，因此它们可以在不同的平台和操作系统上运行。松耦合（Loose Coupling）：Web服务通过标准化接口进行通信，服务提供者和请求者之间的耦合度较低，可以独立开发和部署。可组合性（Composability）：可以通过组合多个Web服务来创建复杂的应用程序。可重用性（Reusability）：Web服务可以被多个应用程序重复使用，从而提高了软件开发效率。易于维护（Maintainability）：由于Web服务使用标准化的接口和协议，因此易于维护和更新。 1.4. 使用场景 Web服务在许多场景下都得到了广泛应用，包括但不限于：
企业应用集成（Enterprise Application Integration，EAI）：将不同的企业应用程序和系统集成在一起，实现数据和业务流程的无缝交互。分布式系统：构建分布式系统和服务导向架构（Service-Oriented Architecture，SOA），提供跨网络的服务和资源共享。移动应用程序开发：通过Web服务为移动应用程序提供数据和功能支持，与后端服务器进行通信和交互。云计算：在云平台上部署和管理Web服务，提供云端服务和资源。 1.5. Web服务标准和技术 一些常见的Web服务标准和技术包括：
SOAP（Simple Object Access Protocol）：用于构建基于XML的Web服务的协议。WSDL（Web Services Description Language）：用于描述Web服务的接口和操作的XML格式的语言。UDDI（Universal Description, Discovery, and Integration）：用于注册和发现Web服务的协议和规范。REST（Representational State Transfer）：一种基于HTTP协议的软件架构风格，用于构建RESTful Web服务。JSON（JavaScript Object Notation）：一种轻量级的数据交换格式，通常用于RESTful Web服务的数据格式。 2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-01T22:28:45+08:00">
    <meta property="article:modified_time" content="2024-03-01T22:28:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot 整合WebService</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#WebService_1" rel="nofollow">WebService</a></li><li><ul><li><a href="#1WebService_7" rel="nofollow">1.简单介绍WebService</a></li><li><ul><li><a href="#11__9" rel="nofollow">1.1. 类型</a></li><li><a href="#12__16" rel="nofollow">1.2. 架构</a></li><li><a href="#13__26" rel="nofollow">1.3. 主要特点</a></li><li><a href="#14__36" rel="nofollow">1.4. 使用场景</a></li><li><a href="#15_Web_45" rel="nofollow">1.5. Web服务标准和技术</a></li></ul> 
    </li><li><a href="#2WebServiceDemo_59" rel="nofollow">2.案例-WebServiceDemo</a></li><li><ul><li><a href="#21_61" rel="nofollow">2.1.引入配置文件</a></li><li><a href="#22_89" rel="nofollow">2.2.创建接口</a></li><li><a href="#23_108" rel="nofollow">2.3.创建接口实现类</a></li><li><a href="#24WebService_142" rel="nofollow">2.4.创建WebService配置类</a></li><li><a href="#25_190" rel="nofollow">2.5.测试</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="WebService_1"></a>WebService</h3> 
<blockquote> 
 <p>Web服务（Web Services）是一种基于网络的标准化的软件系统，允许不同的应用程序通过网络相互通信和交互。它们使用标准化的网络协议和数据格式，使得不同平台、不同语言编写的应用程序能够互相通信和交换数据。</p> 
 <p>在现代软件开发中，构建可靠的Web服务是至关重要的。Apache CXF是一个功能强大的Java框架，用于构建Web服务和Web应用程序。结合Spring Boot，我们可以快速搭建一个简单的WebService。本文将介绍如何使用Apache CXF和Spring Boot创建一个简单的WebService，并进行基本的测试。</p> 
</blockquote> 
<h4><a id="1WebService_7"></a>1.简单介绍WebService</h4> 
<h5><a id="11__9"></a>1.1. 类型</h5> 
<p>Web服务通常分为两种主要类型：</p> 
<ul><li><strong>SOAP Web服务</strong>：基于SOAP（Simple Object Access Protocol）协议的Web服务。SOAP是一种用于交换结构化信息的协议，它使用XML作为消息格式，并通常通过HTTP协议进行传输。</li><li><strong>RESTful Web服务</strong>：基于REST（Representational State Transfer）原则的Web服务。RESTful服务使用标准的HTTP方法（如GET、POST、PUT、DELETE）来执行操作，并通常返回JSON或XML格式的数据。</li></ul> 
<h5><a id="12__16"></a>1.2. 架构</h5> 
<p>Web服务的架构通常包括以下关键组件：</p> 
<ul><li><strong>服务提供者（Service Provider）</strong>：提供Web服务的实体。它们发布服务并处理来自客户端的请求。</li><li><strong>服务请求者（Service Requestor）</strong>：使用Web服务的客户端应用程序。它们向服务提供者发送请求并处理响应。</li><li><strong>服务描述（Service Description）</strong>：Web服务的描述文件，通常使用WSDL（Web Services Description Language）或OpenAPI等格式来描述服务的接口和操作。</li><li><strong>消息格式（Message Format）</strong>：Web服务使用的数据交换格式，通常是XML或JSON。</li><li><strong>通信协议（Communication Protocol）</strong>：Web服务之间通信的协议，常见的包括HTTP、HTTPS、SMTP等。</li></ul> 
<h5><a id="13__26"></a>1.3. 主要特点</h5> 
<p>Web服务具有以下主要特点：</p> 
<ul><li><strong>跨平台性（Platform Independence）</strong>：由于Web服务使用标准化的协议和数据格式，因此它们可以在不同的平台和操作系统上运行。</li><li><strong>松耦合（Loose Coupling）</strong>：Web服务通过标准化接口进行通信，服务提供者和请求者之间的耦合度较低，可以独立开发和部署。</li><li><strong>可组合性（Composability）</strong>：可以通过组合多个Web服务来创建复杂的应用程序。</li><li><strong>可重用性（Reusability）</strong>：Web服务可以被多个应用程序重复使用，从而提高了软件开发效率。</li><li><strong>易于维护（Maintainability）</strong>：由于Web服务使用标准化的接口和协议，因此易于维护和更新。</li></ul> 
<h5><a id="14__36"></a>1.4. 使用场景</h5> 
<p>Web服务在许多场景下都得到了广泛应用，包括但不限于：</p> 
<ul><li><strong>企业应用集成（Enterprise Application Integration，EAI）</strong>：将不同的企业应用程序和系统集成在一起，实现数据和业务流程的无缝交互。</li><li><strong>分布式系统</strong>：构建分布式系统和服务导向架构（Service-Oriented Architecture，SOA），提供跨网络的服务和资源共享。</li><li><strong>移动应用程序开发</strong>：通过Web服务为移动应用程序提供数据和功能支持，与后端服务器进行通信和交互。</li><li><strong>云计算</strong>：在云平台上部署和管理Web服务，提供云端服务和资源。</li></ul> 
<h5><a id="15_Web_45"></a>1.5. Web服务标准和技术</h5> 
<p>一些常见的Web服务标准和技术包括：</p> 
<ul><li><strong>SOAP（Simple Object Access Protocol）</strong>：用于构建基于XML的Web服务的协议。</li><li><strong>WSDL（Web Services Description Language）</strong>：用于描述Web服务的接口和操作的XML格式的语言。</li><li><strong>UDDI（Universal Description, Discovery, and Integration）</strong>：用于注册和发现Web服务的协议和规范。</li><li><strong>REST（Representational State Transfer）</strong>：一种基于HTTP协议的软件架构风格，用于构建RESTful Web服务。</li><li><strong>JSON（JavaScript Object Notation）</strong>：一种轻量级的数据交换格式，通常用于RESTful Web服务的数据格式。</li></ul> 
<h4><a id="2WebServiceDemo_59"></a>2.案例-WebServiceDemo</h4> 
<h5><a id="21_61"></a>2.1.引入配置文件</h5> 
<blockquote> 
 <p>首先，我们需要在项目中添加必要的依赖项。这些依赖项将帮助我们集成Apache CXF到Spring Boot应用程序中。我的使用的是gradle构建的项目</p> 
</blockquote> 
<pre><code class="prism language-java">    <span class="token comment">// 引入WebService</span>
    implementation 'org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token operator">:</span>cxf<span class="token operator">-</span>rt<span class="token operator">-</span>frontend<span class="token operator">-</span>jaxws<span class="token operator">:</span><span class="token number">3.2</span><span class="token number">.0</span>'
    implementation 'org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token operator">:</span>cxf<span class="token operator">-</span>rt<span class="token operator">-</span>transports<span class="token operator">-</span>http<span class="token operator">:</span><span class="token number">3.2</span><span class="token number">.0</span>'
</code></pre> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.cxf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cxf-rt-frontend-jaxws<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.cxf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cxf-rt-transports-http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<h5><a id="22_89"></a>2.2.创建接口</h5> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fhr<span class="token punctuation">.</span>student<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Student</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>jws<span class="token punctuation">.</span></span><span class="token class-name">WebParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>jws<span class="token punctuation">.</span></span><span class="token class-name">WebService</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@WebService</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 根据姓名获取学生信息
     * @param userName 学生姓名
     * @return 学生信息
     */</span>
    <span class="token class-name">Student</span> <span class="token function">getStudentInfoByName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@WebParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"userName"</span><span class="token punctuation">)</span><span class="token class-name">String</span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="23_108"></a>2.3.创建接口实现类</h5> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fhr<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">StudentService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fhr<span class="token punctuation">.</span>student<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Student</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>jws<span class="token punctuation">.</span></span><span class="token class-name">WebService</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * targetNamespace：目标命名控件，一般由接口所在包路径命名，不过是由里往外写：比如：我接口所在路径为：com.fhr.service 写为：http://service.fhr.com/
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@WebService</span><span class="token punctuation">(</span>targetNamespace <span class="token operator">=</span> <span class="token string">"http://service.fhr.com/"</span><span class="token punctuation">,</span>endpointInterface <span class="token operator">=</span> <span class="token string">"com.fhr.service.StudentService"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 根据学生姓名获取学生信息
     * @param userName 学生姓名
     * @return 学生信息
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">getStudentInfoByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// TODO这里应该查询数据库</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"传入的参数为："</span><span class="token operator">+</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token string">"高三一班"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> student<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="24WebService_142"></a>2.4.创建WebService配置类</h5> 
<blockquote> 
 <p>我们需要配置CXF和发布WebService的端点。我们使用Spring Boot的配置类来完成这个任务。</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fhr<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">StudentService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token punctuation">.</span></span><span class="token class-name">Bus</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token punctuation">.</span>bus<span class="token punctuation">.</span>spring<span class="token punctuation">.</span></span><span class="token class-name">SpringBus</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token punctuation">.</span>jaxws<span class="token punctuation">.</span></span><span class="token class-name">EndpointImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token punctuation">.</span>transport<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">CXFServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRegistrationBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>ws<span class="token punctuation">.</span></span><span class="token class-name">Endpoint</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebServiceConfig</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token comment">// 创建一个SpringBus Bean，作为Apache CXF的默认总线</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token class-name">Bus</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_BUS_ID</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">SpringBus</span> <span class="token function">springBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 注册CXF Servlet，用于处理WebService请求</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"wbsBean"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">dispatcherServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建一个ServletRegistrationBean，将CXFServlet映射到指定路径</span>
        <span class="token class-name">ServletRegistrationBean</span> wbsServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CXFServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"/wbs/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> wbsServlet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 定义WebService端点</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Endpoint</span> <span class="token function">endpointPurchase</span><span class="token punctuation">(</span><span class="token class-name">SpringBus</span> springBus<span class="token punctuation">,</span> <span class="token class-name">StudentService</span> studentService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建EndpointImpl对象，并将SpringBus和WebService实现类传入</span>
        <span class="token class-name">EndpointImpl</span> endpoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EndpointImpl</span><span class="token punctuation">(</span>springBus<span class="token punctuation">,</span> studentService<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将端点发布到指定路径</span>
        endpoint<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">"/user-server"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 打印发布成功消息，显示服务的访问地址</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"服务发布成功！地址为：http://localhost:8081/wbs/user-server"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回端点对象</span>
        <span class="token keyword">return</span> endpoint<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="25_190"></a>2.5.测试</h5> 
<blockquote> 
 <p>启动项目后，您可以在浏览器中输入<code>http://localhost:8081/wbs/user-server?wsdl</code>来查看WebService的WSDL文档。</p> 
</blockquote> 
<pre><code class="prism language-markdown"># 启动项目
	在浏览器的地址中输入 http://localhost:8081/wbs/user-server?wsdl
</code></pre> 
<p><img src="https://images2.imgbox.com/6e/28/KCpzlIqK_o.png" alt="image-20220509163821547"></p> 
<pre><code class="prism language-markdown"># 测试客户端 
	为了方便直接在本地项目测试
	在浏览器中输入 测试
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token punctuation">.</span>endpoint<span class="token punctuation">.</span></span><span class="token class-name">Client</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>cxf<span class="token punctuation">.</span>jaxws<span class="token punctuation">.</span>endpoint<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span></span><span class="token class-name">JaxWsDynamicClientFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/stu"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 定义了一个映射到路径"/stu/getUserInfoByName"的GET请求处理方法</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getUserInfoByName"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getUserInfoByName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建JaxWsDynamicClientFactory实例，用于动态创建客户端</span>
        <span class="token class-name">JaxWsDynamicClientFactory</span> proxyFactoryBean <span class="token operator">=</span>  <span class="token class-name">JaxWsDynamicClientFactory</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 使用动态客户端工厂创建客户端对象，并指定WebService的WSDL地址</span>
        <span class="token class-name">Client</span> client <span class="token operator">=</span> proxyFactoryBean<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8081/wbs/user-server?wsdl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义一个Object数组用于存储调用WebService方法后的返回结果</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 调用远程WebService方法</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 调用客户端的invoke方法，传入方法名和参数，获取WebService方法的返回结果</span>
            objects <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">"getStudentInfoByName"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 捕获异常，打印异常信息</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 返回WebService方法的返回结果</span>
        <span class="token keyword">return</span> objects<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<p><img src="https://images2.imgbox.com/96/8e/Zqvs3boa_o.png" alt="image-20220509164055806"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/228e212f66057e90662a687d50f34a68/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据库：关系运算整理大全（包括关系代数、元组关系演算、域关系演算）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9ebabba30fe8fe9a14d20c264ea39319/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pywebview桌面程序开发（技术路线：前端&#43;Python，全网独一份！！！！！！）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>