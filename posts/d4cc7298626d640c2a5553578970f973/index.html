<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>dataX3.0和datax-web部署实践踩坑记录（windows版） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d4cc7298626d640c2a5553578970f973/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="dataX3.0和datax-web部署实践踩坑记录（windows版）">
  <meta property="og:description" content="今年公司需要上一个数据分析项目，在考察了一番（百度一番）之后决定上datax加上datax-web的方式来进行数据调度。
PS：写在前面，主要作用是为了自己以后再次（跳槽）部署而写下的记录。
持续更新中... ...
一、相关环境以及需要下载的配置 1、datax3.0 注意：这里的链接是指向的github的开发文档。下载dataX需要拉到下边的
或者这个链接。
https://datax-opensource.oss-cn-hangzhou.aliyuncs.com/202308/datax.tar.gz
2、jdk（jdk版本建议1.8.201以上） 这个版本我现在使用的是1.8.0.131目前暂时没有发现问题。等后期升级到1.8.0.301
这个是下载地址Java Downloads | Oracle有需要的自取
下载的时候拉到下边
然后点击
就直接下载了。（如果还不会就自己百度吧！）
下载完成之后点击安装然后一路next就可以了
注意如果需要安装在D盘什么的需要操作一下具体的自行百度。
参考文章：java8的下载与安装(网上教程的安装方法)_java8下载-CSDN博客
3、python （推荐python 2.7, python 3需要修改datax相关配置） 下载相对简单：百度找到python官网
然后进入之后
然后向下滑动找到对应的版本（因为dataX限制了使用2.X的版本，不过这个可以后续替换对应的文件来实现使用3.X版本）
或者使用这个链接https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi
下载完成之后点击安装然后在path环境中配置一下
对应的环境变量就好
D:\Python27
4、mysql（本身对于版本的限制是5.7.X） MySQL :: Download MySQL Community Server
进去之后选择版本、选择、平台、选择系统位数。一系列选择完成之后点击下载msi版本
然后按照规则点就好了。下载完成之后点击安装
拿不准的可以参考这个文章https://www.cnblogs.com/kendoziyu/p/MySQL.html
至此针对于datax和datax-web的环境就已经安装好了
5、其他软件 针对上边环境配置完成之后我们还需要数据库的查询软件
在这儿我个人喜欢使用的是DBever
进去down下来就一路next就行了
二、数据库准备 1、数据库准备以及sql录入，系统表生成。 因为这个项目的数据库使用的是mysql，且它的数据也是存在本地的（理论上也可以存在远端）。所以我们需要将数据库配置一下。在这儿我们的datax-web开发者们在项目里留了对应的数据库文件我们把它拿出来。位置是在他们项目的bin目录下：\datax-web-master\bin\db
先创建一个datax_web的数据库然后
将文件拷贝出来放在我们刚才安装的dbever中一行一行执行就可以了。
以上全部执行完成之后我们就得到了这个这个web系统所需要的数据库支持。
三、解压相应的文件 1、datax 再刚才第一步中我们下载了datax的文件以及datax-web的文件。再将datax解压到D盘下。
2、datax-web 解压datax-web文件之后生成一个
文件夹这个文件夹是其项目开发的文件夹。在这个时候我们是不能直接使用的。切记
四、datax-web项目配置 官方原文档：
https://github.com/WeiYe-Jing/datax-web/blob/master/userGuid.md
官方给出的开发环境部署：
https://github.com/WeiYe-Jing/datax-web/files/5082018/datax-web.Debug.pdf
这是官方部署文档参考第三点，在此我进行一些简单说明。
这些地址必须和你本地的地址相对应。
在这些操作完成之后就可以试着在IDEA上边启动项目。（如果不行就去找找两个application文件是否配置错误）
五、windows使用环境部署&amp;踩坑实录 对于这个项目在windows服务器上部署的时候我们需要将项目进行maven打包。并且java -jar">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-21T11:55:45+08:00">
    <meta property="article:modified_time" content="2023-12-21T11:55:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">dataX3.0和datax-web部署实践踩坑记录（windows版）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>今年公司需要上一个数据分析项目，在考察了一番（百度一番）之后决定上datax加上datax-web的方式来进行数据调度。</p> 
<p>PS：写在前面，主要作用是为了自己以后再次（跳槽）部署而写下的记录。</p> 
<p>持续更新中... ...</p> 
<h2>一、相关环境以及需要下载的配置</h2> 
<h3>1、<a class="link-info" href="https://github.com/alibaba/DataX" title="datax3.0">datax3.0</a></h3> 
<p>注意：<strong>这里的链接是指向的github的开发文档</strong>。下载dataX需要拉到下边的<img alt="" height="456" src="https://images2.imgbox.com/62/c0/GLpbHB7n_o.png" width="1200"></p> 
<p>或者这个链接。</p> 
<p>https://datax-opensource.oss-cn-hangzhou.aliyuncs.com/202308/datax.tar.gz</p> 
<p></p> 
<h3>2、jdk（jdk版本建议1.8.201以上）</h3> 
<p>这个版本我现在使用的是1.8.0.131目前暂时没有发现问题。等后期升级到1.8.0.301</p> 
<p>这个是下载地址<a href="https://www.oracle.com/java/technologies/downloads/#java8-windows" rel="nofollow" title="Java Downloads | Oracle">Java Downloads | Oracle</a>有需要的自取</p> 
<p>下载的时候拉到下边</p> 
<p><img alt="" height="756" src="https://images2.imgbox.com/11/18/4fCuREJX_o.png" width="1200"></p> 
<p>然后点击<img alt="" height="708" src="https://images2.imgbox.com/f5/3c/L6MHDOq5_o.png" width="1200"></p> 
<p>就直接下载了。（如果还不会就自己百度吧！）</p> 
<p>下载完成之后点击安装然后一路next就可以了</p> 
<p>注意如果需要安装在D盘什么的需要操作一下具体的自行百度。</p> 
<p>参考文章：<a href="https://blog.csdn.net/jcc_terminal/article/details/121849190" title="java8的下载与安装(网上教程的安装方法)_java8下载-CSDN博客">java8的下载与安装(网上教程的安装方法)_java8下载-CSDN博客</a></p> 
<h3><br> 3、python （推荐python 2.7, python 3需要修改datax相关配置）</h3> 
<p>下载相对简单：百度找到<a class="link-info" href="https://www.python.org/" rel="nofollow" title="python官网">python官网</a></p> 
<p>然后进入之后</p> 
<p><img alt="" height="601" src="https://images2.imgbox.com/a1/da/dhfur1el_o.png" width="1200"></p> 
<p>然后向下滑动找到对应的版本（因为dataX限制了使用2.X的版本，不过这个可以后续替换对应的文件来实现使用3.X版本）</p> 
<p>或者使用这个链接<a href="https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi" rel="nofollow" title="https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi">https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi</a></p> 
<p><img alt="" height="416" src="https://images2.imgbox.com/6f/0b/hjqcpf9A_o.png" width="1200"></p> 
<p>下载完成之后点击安装然后在path环境中配置一下</p> 
<p>对应的环境变量就好</p> 
<p>D:\Python27</p> 
<p><img alt="" height="23" src="https://images2.imgbox.com/26/a8/ttJzVz5P_o.png" width="155"></p> 
<p><img alt="" height="84" src="https://images2.imgbox.com/a9/f1/j7NjgCvY_o.png" width="643"></p> 
<h3>4、mysql（本身对于版本的限制是5.7.X）</h3> 
<p><a href="https://dev.mysql.com/downloads/mysql/" rel="nofollow" title="MySQL :: Download MySQL Community Server">MySQL :: Download MySQL Community Server</a></p> 
<p>进去之后选择版本、选择、平台、选择系统位数。一系列选择完成之后点击下载msi版本</p> 
<p><img alt="" height="838" src="https://images2.imgbox.com/aa/72/wehLk20s_o.png" width="1200"></p> 
<p><img alt="" height="573" src="https://images2.imgbox.com/39/3b/vfURJT4v_o.png" width="1189"></p> 
<p><img alt="" height="460" src="https://images2.imgbox.com/57/f5/oZvnUOo1_o.png" width="1200"></p> 
<p>然后按照规则点就好了。下载完成之后点击安装</p> 
<p>拿不准的可以参考这个文章<a href="https://www.cnblogs.com/kendoziyu/p/MySQL.html" rel="nofollow" title="https://www.cnblogs.com/kendoziyu/p/MySQL.html">https://www.cnblogs.com/kendoziyu/p/MySQL.html</a></p> 
<p>至此针对于datax和datax-web的环境就已经安装好了</p> 
<h3>5、其他软件</h3> 
<p>针对上边环境配置完成之后我们还需要数据库的查询软件</p> 
<p>在这儿我个人喜欢使用的是<a class="link-info" href="https://dbeaver.io/" rel="nofollow" title="DBever">DBever</a></p> 
<p><img alt="" height="766" src="https://images2.imgbox.com/5f/d1/gjT7tgvD_o.png" width="1200"></p> 
<p>进去down下来就一路next就行了</p> 
<h2>二、数据库准备</h2> 
<h3>1、数据库准备以及sql录入，系统表生成。</h3> 
<p>因为这个项目的数据库使用的是mysql，且它的数据也是存在本地的（理论上也可以存在远端）。所以我们需要将数据库配置一下。在这儿我们的datax-web开发者们在项目里留了对应的数据库文件我们把它拿出来。位置是在他们项目的bin目录下：\datax-web-master\bin\db</p> 
<p><img alt="" height="259" src="https://images2.imgbox.com/f1/94/X9zVFRwe_o.png" width="726"></p> 
<p>先创建一个datax_web的数据库然后</p> 
<p>将文件拷贝出来放在我们刚才安装的dbever中一行一行执行就可以了。</p> 
<p><img alt="" height="671" src="https://images2.imgbox.com/a0/7e/TbYIzkYf_o.png" width="1200"></p> 
<p>以上全部执行完成之后我们就得到了这个这个web系统所需要的数据库支持。</p> 
<h2>三、解压相应的文件</h2> 
<h3>1、datax</h3> 
<p>再刚才第一步中我们下载了datax的文件以及datax-web的文件。再将datax解压到D盘下。</p> 
<p><img alt="" height="475" src="https://images2.imgbox.com/88/8f/ukaEC32u_o.png" width="1200"></p> 
<h3>2、datax-web</h3> 
<p>解压datax-web文件之后生成一个</p> 
<p><img alt="" height="67" src="https://images2.imgbox.com/80/a1/jfQfgYPQ_o.png" width="680"></p> 
<p>文件夹这个文件夹是其项目开发的文件夹。在这个时候我们是不能直接使用的。<strong>切记</strong></p> 
<h2>四、datax-web项目配置</h2> 
<p>官方原文档：</p> 
<p><a href="https://github.com/WeiYe-Jing/datax-web/blob/master/userGuid.md" title="https://github.com/WeiYe-Jing/datax-web/blob/master/userGuid.md">https://github.com/WeiYe-Jing/datax-web/blob/master/userGuid.md</a></p> 
<p>官方给出的开发环境部署：</p> 
<p><a href="https://github.com/WeiYe-Jing/datax-web/files/5082018/datax-web.Debug.pdf" title="https://github.com/WeiYe-Jing/datax-web/files/5082018/datax-web.Debug.pdf">https://github.com/WeiYe-Jing/datax-web/files/5082018/datax-web.Debug.pdf</a></p> 
<p>这是官方部署文档参考第三点，在此我进行一些简单说明。</p> 
<p><img alt="" height="812" src="https://images2.imgbox.com/ab/90/t2pkSqb6_o.png" width="1200"></p> 
<p>这些地址必须和你本地的地址相对应。</p> 
<p>在这些操作完成之后就可以试着在<span style="color:#fe2c24;"><strong>IDEA</strong></span>上边启动项目。（如果不行就去找找两个application文件是否配置错误）</p> 
<h2>五、windows使用环境部署&amp;踩坑实录</h2> 
<p>对于这个项目在windows服务器上部署的时候我们需要将项目进行maven打包。并且java -jar</p> 
<p>一下。</p> 
<h3>1、打包</h3> 
<p>首先基于前四步我们在idea上成功的运行起来了datax-web。那么在这个里边我们需要对项目进行打包</p> 
<p><img alt="" height="749" src="https://images2.imgbox.com/a0/0a/InIkX3sW_o.png" width="573"></p> 
<p>按照上图进行打包。不出意外都可以进行打包</p> 
<h3>2、CMD启动</h3> 
<p>然后放到服务器或者对应的机器上CMD然后进行Java-jar执行</p> 
<p>如果提示没有主目录清单，</p> 
<p><img alt="" height="237" src="https://images2.imgbox.com/10/08/4cev1D0i_o.png" width="1105"></p> 
<p>那么需要我们分别在datax-admin和datax-executor下面的pom.xml文件中添加</p> 
<pre><code class="language-java">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
    &lt;excludes&gt;
        &lt;exclude&gt;**/*.yml&lt;/exclude&gt;
        &lt;exclude&gt;**/*.properties&lt;/exclude&gt;
        &lt;exclude&gt;**/*.sh&lt;/exclude&gt;
        &lt;exclude&gt;**/*.xml&lt;/exclude&gt;
    &lt;/excludes&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
&lt;!--在这个地方不经要增加依赖并且还要声明版本--&gt;
    &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;repackage&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre> 
<p>因为之前有些模块的打包插件的版本也没有添加是可以正常使用的，但是今天突然不行了，后来发现spring boot 3.0版最近正式发布了，3.0版是基于java 17 的，不指定的话，默认引用最新的导致这种问题的发生，所以大家做的时候，所有模块的打包插件的版本一定要指定一下，避免出现这种问题，当然这个版本号最好在总的pom文件中定义一下，子模块中直接引用就可以了，不用在每个子模块中一一定义了。</p> 
<p>添加完成之后重新执行一下上一步打包。</p> 
<h3>3、启动问题</h3> 
<p>在此我引用大佬的文章：<a href="https://blog.csdn.net/u012874077/article/details/116148000" title="datax-web在windows环境idea中模块化打包部署操作步骤_datax打包-CSDN博客">datax-web在windows环境idea中模块化打包部署操作步骤_datax打包-CSDN博客</a></p> 
<p>3.1、当我们按照上一步将jar包放到系统中的时候执行并且执行生成的datax-admin-2.1.2.jar和datax-executor-2.1.2.jar,结果还是报错。</p> 
<p>datax-admin-2.1.2.jar报错如下：</p> 
<p><img alt="" height="552" src="https://images2.imgbox.com/72/ac/mZQ3nhlR_o.png" width="1193"></p> 
<p>datax-executor-2.1.2.jar报错如下：</p> 
<p><img alt="" height="375" src="https://images2.imgbox.com/55/cd/IHd5u2En_o.png" width="1200"></p> 
<p>发现问题：打包后的datax-admin.2.1.2.jar和datax-executor.2.1.2.jar包缺少配置文件，应把配置文件补充进jar包。</p> 
<p>3.2、将datax-admin下的所有配置资源拷贝进datax-admin-2.1.2.jar的相关目录中。具体 如下：</p> 
<p>1）将idea中的datax-admin下的classes下的配置文件application.yml、bootstrap.properties、logback.xml拷贝进datax-admin-2.1.2.jar下的BOOT-INF\classes下。</p> 
<p><img alt="" height="361" src="https://images2.imgbox.com/b9/91/0bvB7WIb_o.png" width="1200"></p> 
<p>2）将datax-admin下的target/classes/i8n下的message.properties和message_en.properties拷贝进datax-admin-2.1.2.jar下的BOOT-INF\classes\i18n下</p> 
<p>3）将将datax-admin下的target/classes/mybatis-mapper下的所有xml文件拷贝进datax-admin-2.1.2.jar下的BOOT-INF\classes\mybatis-mapper下</p> 
<p><img alt="" height="459" src="https://images2.imgbox.com/99/ae/Jus0Ibs0_o.png" width="1200"></p> 
<p>4)将idea中的datax-executor编译生成后的classes下的配置文件application.yml、logback.xml拷贝进datax-executor-2.1.2.jar下的BOOT-INF\classes下。</p> 
<p><img alt="" height="316" src="https://images2.imgbox.com/52/5e/dML1YVmb_o.png" width="1200"></p> 
<p>5）在此时我们执行cmd就可以成功启动项目，但是因为数据库支持的驱动还没有导入项目所以我们需要将数据库支持的驱动一起导入到项目中。</p> 
<p><img alt="" height="409" src="https://images2.imgbox.com/66/d7/tWpfLz7L_o.png" width="517"></p> 
<p>我们把缺少的3个jar包，补充进datax-admin-2.1.2.jar下的BOOT-INF\lib下。</p> 
<p>注意：补充进的时候需要<strong>设置不压缩直接存储，否则会报错，不识别压缩的驱动jar包</strong></p> 
<p><img alt="" height="720" src="https://images2.imgbox.com/a6/1e/Ed1gSuqP_o.png" width="1200"></p> 
<p><img alt="" height="735" src="https://images2.imgbox.com/99/a4/k4VeqTXx_o.png" width="1200"></p> 
<p>重新CMD一下然后执行文件就好</p> 
<p><img alt="" height="791" src="https://images2.imgbox.com/b6/76/Gma0cP9c_o.png" width="1200"></p> 
<h2>六、项目使用</h2> 
<p>这是大佬的文章</p> 
<p><a href="https://blog.csdn.net/weixin_40496191/article/details/123683479" title="datax和datax_web的搭建与入门使用（windows版本）_datax web-CSDN博客">datax和datax_web的搭建与入门使用（windows版本）_datax web-CSDN博客</a></p> 
<p></p> 
<h2>七、项目使用中的问题点记录</h2> 
<h3>1、MySQL插入中文问题。</h3> 
<p>按照部署步骤部署好项目之后，开心的启动了项目。首先遇到的第一个问题就是本来想使用本地安装的MySQL来测试一下数据调度。然后马上就出来了一个中文识别的问题。</p> 
<p><img alt="" height="149" src="https://images2.imgbox.com/c4/67/czuqFfDA_o.png" width="418"></p> 
<p>1.1、解决办法</p> 
<p>MySQL对应的url后边增加对应的参数。</p> 
<pre><code class="hljs">?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</code></pre> 
<p><img alt="" height="640" src="https://images2.imgbox.com/69/42/FbNAz6CK_o.png" width="730"></p> 
<p>这样就可以解决后续生成的中文参数的问题。</p> 
<p>为什么要说后续。因为原本的那个生成的任务还是会中文输入错误。</p> 
<p><img alt="" height="168" src="https://images2.imgbox.com/ee/b7/Uwrpz8q9_o.png" width="460"></p> 
<p>在观看日志之后发现之前生成的Json并没有随着我数据源的更新而更新。</p> 
<p><img alt="" height="111" src="https://images2.imgbox.com/5f/48/O9pd02SB_o.png" width="704"></p> 
<p>这应该是之前web开发者没有注意到的细节吧。勉强算是一个bug（要什么自行车）</p> 
<p>所以更新一下</p> 
<p><img alt="" height="719" src="https://images2.imgbox.com/75/51/SG2j4Yy9_o.png" width="1200"></p> 
<p><img alt="" height="376" src="https://images2.imgbox.com/af/7f/MJh3f3AR_o.png" width="1030"></p> 
<p>就可以正常录入了</p> 
<p><img alt="" height="397" src="https://images2.imgbox.com/5e/1d/xuexZcCn_o.png" width="742"></p> 
<h3>2、在有总bps限速条件下，单个channel的bps值不能为空，也不能为非正数</h3> 
<p><img alt="" height="150" src="https://images2.imgbox.com/2b/18/Rxcs2AUw_o.png" width="1200"></p> 
<p>在默认生成的模板中有对每个通道的速度限制。把速度限制删除掉就可以了。</p> 
<p><img alt="" height="116" src="https://images2.imgbox.com/19/8d/pq089n32_o.png" width="431"></p> 
<p>具体原因是为什么暂时还没有找到。但是再查找文档的时候许多文档都是只写了通道数并没有限制传输速度。</p> 
<p><img alt="" height="84" src="https://images2.imgbox.com/d7/b3/tbEApeR9_o.png" width="437"></p> 
<p>但是将对应的速度限制去掉之后就可以正常使用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2bba789817739f722c941eb8d77399d9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android Studio 下载地址</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fdef9a277ddf1e5b28812d76591dcdd8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PostgreSQL数据类型及基本操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>