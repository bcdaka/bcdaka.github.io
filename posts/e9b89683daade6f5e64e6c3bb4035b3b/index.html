<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AiGC学习之Stable Diffusion安装部署 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e9b89683daade6f5e64e6c3bb4035b3b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="AiGC学习之Stable Diffusion安装部署">
  <meta property="og:description" content="AiGC的学习如火如荼，我们也来体验一把。
一：先看电脑配置，建议使用navida显卡，显存8G&#43;，我的显卡截图如下：
二：打开网站 github.comGitHub - AUTOMATIC1111/stable-diffusion-webui: Stable Diffusion web UIhttps://github.com/AUTOMATIC1111/stable-diffusion-webui
下拉到如图的位置，可以看到需要安装Python 3.10.6和git，可以依次点击这两个链接并进行安装。
2.1 ， 安装Python 3.10.6 ，可以选择点击github的链接，或者链接Python Release Python 3.10.6 | Python.org
我的是windows11，下载 Windows installer (64-bit)
并安装，记得勾选 Add Python 3.10 to PATH。 安装之后打开windows 命令提示符【搜索 cmd即可】并执行命令python，确认Python版本是否符合要求。
2.2 安装git，可以点击github的链接或者链接Git - Downloading Package (git-scm.com)
下一步，下一步安装即可， 安装完成，同样打开windows命令提示符，输入命令git，检查是否安装成功。
三：python和git安装成功之后，创建或者选择Stable Diffusion安装目录，我的安装目录为D:\MyDoc\project，
进入到安装目录D:\MyDoc\project后，执行命令git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git，获取源码。
四：安装，获取源码后执行命令 1，cd stable-diffusion-webui 2， webui-user.bat ，因为网络的原因，第二条命令可能需要多次尝试，而且执行时间较长，请耐心等待。
该步骤的错误和应对：
4,1 如下提示，表示python的基础安装包安装完成，算是阶段性成果吧。
Installing collected packages: mpmath, urllib3, typing-extensions, sympy, pillow, numpy, networkx, MarkupSafe, idna, filelock, charset-normalizer, certifi, requests, jinja2, torch, torchvision">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-26T18:57:13+08:00">
    <meta property="article:modified_time" content="2024-02-26T18:57:13+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AiGC学习之Stable Diffusion安装部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>AiGC的学习如火如荼，我们也来体验一把。</p> 
<p>一：先看电脑配置，建议使用navida显卡，显存8G+，我的显卡截图如下：</p> 
<p><img alt="" height="718" src="https://images2.imgbox.com/69/cb/duGrjA80_o.png" width="974"></p> 
<p>二：打开网站 github.com<a class="has-card" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" title="GitHub - AUTOMATIC1111/stable-diffusion-webui: Stable Diffusion web UI"><span class="link-card-box"><span class="link-title">GitHub - AUTOMATIC1111/stable-diffusion-webui: Stable Diffusion web UI</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/5b/6c/lpIYKpAQ_o.png" alt="icon-default.png?t=N7T8">https://github.com/AUTOMATIC1111/stable-diffusion-webui</span></span></a></p> 
<p>       下拉到如图的位置，可以看到需要安装Python 3.10.6和git，可以依次点击这两个链接并进行安装。</p> 
<p><img alt="" height="683" src="https://images2.imgbox.com/b7/be/UMnUZaiS_o.png" width="1182"></p> 
<p>  2.1 ， 安装Python 3.10.6  ，可以选择点击github的链接，或者链接<a href="https://www.python.org/downloads/release/python-3106/" rel="nofollow" title="Python Release Python 3.10.6 | Python.org">Python Release Python 3.10.6 | Python.org</a></p> 
<p>我的是windows11，下载 <a href="https://www.python.org/ftp/python/3.10.6/python-3.10.6-amd64.exe" rel="nofollow" title="Windows installer (64-bit)">Windows installer (64-bit)</a></p> 
<p>并安装，记得勾选 Add Python 3.10 to PATH。 </p> 
<p><img alt="" height="546" src="https://images2.imgbox.com/a3/7c/QEQmOWfN_o.png" width="1200"></p> 
<p>安装之后打开windows 命令提示符【搜索 cmd即可】并执行命令python，确认Python版本是否符合要求。</p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/2d/9d/n2zgPYmA_o.png" width="1129"></p> 
<p></p> 
<p>2.2 安装git，可以点击github的链接或者链接<a href="https://git-scm.com/download/win" rel="nofollow" title="Git - Downloading Package (git-scm.com)">Git - Downloading Package (git-scm.com)</a><img alt="" height="527" src="https://images2.imgbox.com/63/b8/msJ0rMRU_o.png" width="703"></p> 
<p></p> 
<p>下一步，下一步安装即可， 安装完成，同样打开windows命令提示符，输入命令git，检查是否安装成功。</p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/d5/9a/NeEK8ICO_o.png" width="1129"></p> 
<p></p> 
<p>三：python和git安装成功之后，创建或者选择Stable Diffusion安装目录，我的安装目录为D:\MyDoc\project，</p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/22/4f/CCYrMVcw_o.png" width="1129"></p> 
<p></p> 
<p>进入到安装目录D:\MyDoc\project后，执行命令git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git，获取源码。</p> 
<p>四：安装，获取源码后执行命令 1，cd stable-diffusion-webui  2， webui-user.bat ，因为网络的原因，第二条命令可能需要多次尝试，而且执行时间较长，请耐心等待。</p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/01/0f/0N9EM0Q1_o.png" width="1129"></p> 
<p></p> 
<p>该步骤的错误和应对：</p> 
<p>4,1  如下提示，表示python的基础安装包安装完成，算是阶段性成果吧。</p> 
<p>Installing collected packages: mpmath, urllib3, typing-extensions, sympy, pillow, numpy, networkx, MarkupSafe, idna, filelock, charset-normalizer, certifi, requests, jinja2, torch, torchvision<br> Successfully installed MarkupSafe-2.1.5 certifi-2024.2.2 charset-normalizer-3.3.2 filelock-3.13.1 idna-3.6 jinja2-3.1.3 mpmath-1.3.0 networkx-3.2.1 numpy-1.26.4 pillow-10.2.0 requests-2.31.0 sympy-1.12 torch-2.0.1+cu118 torchvision-0.15.2+cu118 typing-extensions-4.9.0 urllib3-2.2.1</p> 
<p>4.2 安装CodeFormer，参考文件D:\MyDoc\project\stable-diffusion-webui\repositories\CodeFormer\requirements.txt ,这个步骤的安装opencv-python一直安装超时，报错为read timeout，后来我是根据提示手动下载并放到安装目录下面的。</p> 
<p>下载链接，错误提示里面可以找到：<a href="https://files.pythonhosted.org/packages/c7/ec/9dabb6a9abfdebb3c45b0cc52dec901caafef2b2c7e7d6a839ed86d81e91/opencv_python-4.9.0.80-cp37-abi3-win_amd64.whl" rel="nofollow" title="https://files.pythonhosted.org/packages/c7/ec/9dabb6a9abfdebb3c45b0cc52dec901caafef2b2c7e7d6a839ed86d81e91/opencv_python-4.9.0.80-cp37-abi3-win_amd64.whl">https://files.pythonhosted.org/packages/c7/ec/9dabb6a9abfdebb3c45b0cc52dec901caafef2b2c7e7d6a839ed86d81e91/opencv_python-4.9.0.80-cp37-abi3-win_amd64.whl</a></p> 
<p>文件放置路径： D:\MyDoc\project\stable-diffusion-webui\venv\Lib\site-packages</p> 
<p><img alt="" height="753" src="https://images2.imgbox.com/79/d4/tPa8ZKCq_o.png" width="887"></p> 
<p></p> 
<p> <img alt="" height="403" src="https://images2.imgbox.com/88/55/HuXxFrMC_o.png" width="877"></p> 
<p></p> 
<p>4.3 错误提示</p> 
<p><img alt="" height="217" src="https://images2.imgbox.com/e1/b1/gKDRDSVy_o.png" width="859"></p> 
<p>解决：创建目录D:\MyDoc\project\stable-diffusion-webui\openai，打开windows 命令提示符，进入该目录并执行命令，git clone https://www.modelscope.cn/AI-ModelScope/clip-vit-large-patch14.git</p> 
<p><img alt="" height="637" src="https://images2.imgbox.com/4a/6c/FXRZbesj_o.png" width="808"></p> 
<p></p> 
<p>五，启动，打开windows命令提示符，执行命令 1， cd stable-diffusion-webui   2, webui-user.bat【安装和启动都是该操作】，成功启动后会提示 http://127.0.0.1:7860,并自动打开该站点。</p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/7d/23/LeBNapJ3_o.png" width="1129"></p> 
<p>站点如图，注意checkpoint 下面应该还是空的，还需要去下载模型才能正常使用。</p> 
<p><img alt="" height="747" src="https://images2.imgbox.com/c8/dd/0ccCfHP5_o.png" width="945"></p> 
<p></p> 
<p>六，下载模型并生成图片</p> 
<p>国内模型下载：https://www.liblib.art/，我选择了基础算法v1.5，其他的待尝试。</p> 
<p><img alt="" height="958" src="https://images2.imgbox.com/61/21/kq2Q8C3y_o.png" width="1200"></p> 
<p>模型下载后放置到目录D:\MyDoc\project\stable-diffusion-webui\models\Stable-diffusion</p> 
<p><img alt="" height="715" src="https://images2.imgbox.com/36/c9/tCl0DDWw_o.png" width="1027"></p> 
<p><img alt="" height="884" src="https://images2.imgbox.com/9c/87/R4JdsH1n_o.png" width="1200"></p> 
<p> 七，享受工作成果</p> 
<p>本来是打算秀一下图的，但是不得不说，这些图放大了看还是挺难看的，待我后面优化提示词，更新模型再说吧。</p> 
<p></p> 
<p>八，参考文档，感谢原作者</p> 
<p>https://blog.csdn.net/weixin_67276852/article/details/136240988#32_LiblibAIAI_70</p> 
<p>https://blog.csdn.net/lgf19880929/article/details/130439760</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5ca625a75366c8181b7cb74d19ae8b68/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android WebView访问网页&#43;自动播放视频&#43;自动全屏&#43;切换横屏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c36ac9dcf9c2aa1e76ee7fe80a54edcf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解析Hadoop三大核心组件：HDFS、MapReduce和YARN</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>