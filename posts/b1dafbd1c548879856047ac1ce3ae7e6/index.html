<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>XXXForm组件 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b1dafbd1c548879856047ac1ce3ae7e6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="XXXForm组件">
  <meta property="og:description" content="效果展示 代码 XXXForm &lt;template&gt; &lt;div class=&#34;search-container&#34;&gt; &lt;el-form ref=&#34;formRef&#34; class=&#34;form_is_hidden&#34; :model=&#34;form&#34; v-bind=&#34;formAttrs&#34;&gt; &lt;el-row :gutter=&#34;20&#34; class=&#34;search-row&#34;&gt; &lt;el-col v-for=&#34;item in shows.columns&#34; :key=&#34;item.inputType &#43; JSON.stringify(item.values)&#34; :span=&#34;item.span || 6&#34; &gt; &lt;el-form-item v-bind=&#34;item.formItemAttrs || {}&#34;&gt; &lt;FormItem v-if=&#34;typeof item.values == &#39;string&#39;&#34; v-bind=&#34;item.inputAttrs || {}&#34; v-model=&#34;form[item.values]&#34; :input-type=&#34;item.inputType&#34; /&gt; &lt;FormItem v-else v-model:one=&#34;form[item.values[0]]&#34; v-model:two=&#34;form[item.values[1]]&#34; :input-type=&#34;item.inputType&#34; v-bind=&#34;item.inputAttrs || {}&#34; /&gt; &lt;/el-form-item&gt; &lt;/el-col&gt; &lt;el-col :span=&#34;shows.btnsSpan&#34; class=&#34;search-btn-container&#34;&gt; &lt;el-form-item class=&#34;search-btn&#34; label=&#34;1&#34; label-width=&#34;0&#34;&gt; &lt;el-tooltip v-if=&#34;shows.collapsedBtn&#34; :content=&#34;collapsed ? &#39;收起&#39; : &#39;展开&#39;&#34; placement=&#34;top&#34; trigger=&#34;hover&#34; &gt; &lt;el-button class=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-08T16:35:09+08:00">
    <meta property="article:modified_time" content="2024-08-08T16:35:09+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">XXXForm组件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>效果展示</h3> 
<p><img src="https://images2.imgbox.com/00/79/4GiDD4fX_o.gif" alt="2024-04-182.40.57-ezgif.com-video-to-gif-converter.gif"></p> 
<h3><a id="_3"></a>代码</h3> 
<h4><a id="XXXForm_4"></a>XXXForm</h4> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="search-container"&gt;
    &lt;el-form ref="formRef" class="form_is_hidden" :model="form" v-bind="formAttrs"&gt;
      &lt;el-row :gutter="20" class="search-row"&gt;
        &lt;el-col
          v-for="item in shows.columns"
          :key="item.inputType + JSON.stringify(item.values)"
          :span="item.span || 6"
        &gt;
          &lt;el-form-item v-bind="item.formItemAttrs || {}"&gt;
            &lt;FormItem
              v-if="typeof item.values == 'string'"
              v-bind="item.inputAttrs || {}"
              v-model="form[item.values]"
              :input-type="item.inputType"
            /&gt;
            &lt;FormItem
              v-else
              v-model:one="form[item.values[0]]"
              v-model:two="form[item.values[1]]"
              :input-type="item.inputType"
              v-bind="item.inputAttrs || {}"
            /&gt;
          &lt;/el-form-item&gt;
        &lt;/el-col&gt;
        &lt;el-col :span="shows.btnsSpan" class="search-btn-container"&gt;
          &lt;el-form-item class="search-btn" label="1" label-width="0"&gt;
            &lt;el-tooltip
              v-if="shows.collapsedBtn"
              :content="collapsed ? '收起' : '展开'"
              placement="top"
              trigger="hover"
            &gt;
              &lt;el-button class="coll" text bg type="info" @click="toggleCollapse"&gt;
  
                &lt;el-icon class="form_is_hidden_icon"&gt;
                  &lt;DArrowRight v-if="!collapsed" /&gt;
                  &lt;DArrowLeft v-else /&gt;
                &lt;/el-icon&gt;
              &lt;/el-button&gt;
            &lt;/el-tooltip&gt;
            &lt;el-button text bg type="info" @click="resetForm"&gt;重置&lt;/el-button&gt;
            &lt;el-button type="primary" @click="search"&gt;查询&lt;/el-button&gt;

          &lt;/el-form-item&gt;
        &lt;/el-col&gt;
      &lt;/el-row&gt;
    &lt;/el-form&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script lang="ts" setup&gt;
import { computed, ref } from 'vue';
import { useVModel } from '@vueuse/core';
import { SearchFormColum } from './type';
import FormItem from './formItem.vue';
import { DArrowRight, DArrowLeft } from '@element-plus/icons-vue';

const props = defineProps({
  columns: {
    type: Array,
    default: () =&gt; [],
  },
  collapse: {
    type: Boolean,
    default: false,
  },
  modelValue: {
    type: Object,
    default: () =&gt; {
      return {};
    },
  },
  resttForm: {
    type: Object,
    default: () =&gt; {
      return {};
    },
  },
  formAttrs: {
    type: Object,
    default: () =&gt; {
      return {};
    },
  },
});
const emit = defineEmits(['update:modelValue', 'search', 'reset']);
const collapsed = ref(props.collapse);
const form = useVModel(props, 'modelValue', emit);
const shows = computed(() =&gt; {
  const cols = props.columns as SearchFormColum;
  const spans = cols?.map((i) =&gt; i.span || 6).reduce((a, b) =&gt; a + b, 0);
  if (spans &gt; 18) {
    if (!collapsed.value) {
      let spanss = 0;
      let index = 0;
      try {
        cols?.forEach((i, idx) =&gt; {
          if (spanss &lt; 18) {
            if ((i.span || 6) + spanss &gt; 18) {
              throw new Error('');
            }
            spanss += i.span || 6;
            index = idx;
          } else {
            throw new Error('');
          }
        });
      } catch (error) {
        // console.log('跳出循环');
      }

      return {
        columns: cols.filter((_i, idx) =&gt; idx &lt;= index),
        btnsSpan: 24 - spanss,
        collapsedBtn: true,
      };
    } else {
      const spanss = cols
        ?.map((i) =&gt; i.span || 6)
        .reduce((a, b) =&gt; {
          if (a + b &gt; 24) {
            return b;
          } else if (a + b == 24) {
            return 0;
          } else {
            return a + b;
          }
        }, 0);
      const btnsSpan = spanss &gt; 18 ? 24 : 24 - spanss;

      return {
        columns: cols,
        btnsSpan,
        collapsedBtn: true,
      };
    }
  } else {
    return {
      columns: cols,
      btnsSpan: 24 - spans,
      collapsedBtn: false,
    };
  }
});
const search = () =&gt; {
  emit('search');
};
const resetForm = () =&gt; {
  const resett = { ...props.resttForm };
  form.value = resett;
  emit('reset');
};
const toggleCollapse = () =&gt; {
  collapsed.value = !collapsed.value;
};
&lt;/script&gt;
&lt;style lang="less" scoped&gt;
.search-container {
  // margin-bottom: 20px;

  .form_is_hidden_icon {
    transform: rotate(90deg);
  }

  .search-btn-container {
    .search-btn {
      :deep(.el-form-item__content) {
        justify-content: end;
      }

      :deep(.el-form-item__label) {
        color:transparent;
      }
    }
  }

  .search-row {
    // transition: height 0.3s;
    overflow: hidden;
  }
  .search-label {
    font-size: 14px;
    color: var(--hiwork-global-color);
    padding-bottom: 8px;
  }
}
:deep(.el-button).coll {
  padding: 10px 12px !important;
}
&lt;/style&gt;

</code></pre> 
<h4><a id="formItem_198"></a>formItem</h4> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;component :is="currentCom" /&gt;
&lt;/template&gt;
&lt;script lang="tsx" setup&gt;
// import cityCascader from './cityCascader';
import DateMonthPicker from './components/dateMonthPicker';
import DateRangePicker from './components/dateRangePicker';
import DateYearPicker from './components/dateYearPicker';
import Select from './components/select';
import CountryAutoComplete from './components/countryAutoComplete.vue';
import CountryAutoCompleteOne from './components/countryAutoCompleteOne.vue';
import HiInput from './components/hiInput.vue';
import { computed } from 'vue';
const props = defineProps({
  inputType: {
    type: String,
    default: 'input',
  },
});

const currentCom = computed(() =&gt; {
  switch (props.inputType) {
    case 'date':
      return DateRangePicker;
    case 'month':
      return DateMonthPicker;
    case 'year':
      return DateYearPicker;
    // case 'cascader':
    //   return cityCascader;
    case 'select':
      return Select;
    case 'countryAuto':
      return CountryAutoComplete;
    case 'countryAuto1':
      return CountryAutoCompleteOne;
    default:
      return HiInput;
  }
});
&lt;/script&gt;

</code></pre> 
<h4><a id="XXXInput_244"></a>XXXInput</h4> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;!-- hiInput --&gt;
  &lt;el-input v-model="modelValue" @blur="hBlur" /&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { computed } from 'vue';
const props = defineProps({
  modelValue: {
    type: String,
    default: '',
  },
});
const emit = defineEmits(['update:modelValue']);
const modelValue = computed({
  get() {
    return props.modelValue;
  },
  set(v) {
    emit('update:modelValue', v);
  },
});
const hBlur = () =&gt; {
  modelValue.value = modelValue.value.trim();
};
&lt;/script&gt;

</code></pre> 
<pre><code class="prism language-tsx">// dateRangePicker
import { ElDatePicker } from 'element-plus';
import { defineComponent, reactive, watchEffect } from 'vue';
import dayjs from 'dayjs';

export default defineComponent({
  props: {
    one: { type: String, default: () =&gt; '' },
    two: { type: String, default: () =&gt; '' },
    format: { type: String, default: () =&gt; '' },
  },
  emits: ['update:one', 'update:two'],
  // emits: {
  //   'update:one': (v: string) =&gt; true,
  //   'update:two': (v: string) =&gt; true,
  // },
  setup(props, { attrs, emit }) {
    const state = reactive({
      ivalue: [],
    });
    const updateValue = (
      v: (string | number | Date | dayjs.Dayjs | null | undefined)[],
    ) =&gt; {
      emit(
        'update:one',
        v ? dayjs(v[0]).format(props.format || 'YYYY-MM-DD') : '',
      );
      emit(
        'update:two',
        v ? dayjs(v[1]).format(props.format || 'YYYY-MM-DD') : '',
      );
    };
    watchEffect(() =&gt; {
      state.ivalue = [props.one, props.two] as any;
    });
    return () =&gt; (
      &lt;ElDatePicker
        modelValue={state.ivalue as any}
        onUpdate:modelValue={updateValue}
        type='daterange'
        range-separator='-'
        start-placeholder='开始'
        end-placeholder='结束'
        {...attrs}
      /&gt;
    );
  },
});

</code></pre> 
<pre><code class="prism language-tsx">// cityCascader
import { getLocationDetailInfo } from '@/axios/api';
import { ElCascader } from 'element-plus';
import { defineComponent, ref } from 'vue';

export default defineComponent((_p, { attrs }) =&gt; {
  const cityList = ref([]);

  getLocationDetailInfo().then((res) =&gt; {
    cityList.value = res.data;
  });

  return () =&gt; (
    &lt;ElCascader
      {...attrs}
      placeholder='请选择省市区'
      style={'width: 100%'}
      props={<!-- -->{ children: 'child', value: 'name', label: 'name' }}
      options={cityList.value}
    /&gt;
  );
});

</code></pre> 
<p>XXXInput，自己想要啥补充啥就行。</p> 
<h3><a id="_352"></a>使用</h3> 
<h4><a id="props_353"></a>props</h4> 
<table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>可选值</th><th>默认值</th></tr></thead><tbody><tr><td>columns</td><td>配置表单展示项</td><td>object[]</td><td>-</td><td>-</td></tr><tr><td>collapse</td><td>是否收起</td><td>boolean</td><td>true/false</td><td>false</td></tr><tr><td>modelValue</td><td>form 对象</td><td>{}</td><td>-</td><td>{}</td></tr><tr><td>resttForm</td><td>重制 form 默认值</td><td>{}</td><td>-</td><td>{}</td></tr><tr><td>formAttrs</td><td>支持 el 的 form 属性</td><td>{}</td><td>-</td><td>{}</td></tr></tbody></table> 
<h5><a id="cloumns__362"></a>cloumns 说明</h5> 
<table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>可选值</th><th>默认值</th></tr></thead><tbody><tr><td>inputType</td><td>输入框类型</td><td>string</td><td>-</td><td>-</td></tr><tr><td>span</td><td>formitem 占用空间（参考el-col）</td><td>number</td><td>1-24</td><td>6</td></tr><tr><td>formItemAttrs</td><td>继承 el 的 formitem 的 props + emit，配置formitem 像 el 一样。</td><td>{}</td><td>-</td><td>-</td></tr><tr><td>values</td><td>form 中对应的 key</td><td>string/string[]</td><td>-</td><td>-</td></tr><tr><td>inputAttrs</td><td>继承 el 的 input 的 props + emit，配置 input 像 el 一样。也是拓展属性的地方。</td><td>{}</td><td>-</td><td>-</td></tr></tbody></table> 
<h4><a id="emit_371"></a>emit</h4> 
<table><thead><tr><th>方法名</th><th>说明</th><th>类型</th></tr></thead><tbody><tr><td>update:modelValue</td><td>更新 form 对象</td><td>-</td></tr><tr><td>search</td><td>搜索</td><td>-</td></tr><tr><td>reset</td><td>重制</td><td>-</td></tr></tbody></table> 
<h3><a id="_379"></a>使用示例</h3> 
<h4><a id="searchFormC_380"></a>searchFormC</h4> 
<pre><code class="prism language-tsx">import { defineComponent, ref } from 'vue';
//@ts-ignore
import SearchForm from '@/components/searchForm/index.vue';
export default defineComponent((_p, { attrs }) =&gt; {
  const columns = ref([
    {
      values: 'nickname',
      inputType: 'input',
      span: 6,
      inputAttrs: {
        placeholder: '请输入',
      },
      formItemAttrs: {
        label: '姓名',
        labelWidth: '80px',
      },
    },
    {
      values: 'country',
      inputType: 'countryAuto1',
      inputAttrs: {
        placeholder: '请输入',
      },
      formItemAttrs: {
        label: '国家',
        labelWidth: '80px',
      },
    },
    {
      values: 'email',
      inputType: 'input',
      span: 6,
      inputAttrs: {
        placeholder: '请输入',
      },
      formItemAttrs: {
        label: '邮箱',
        labelWidth: '80px',
      },
    },
    {
      values: 'employeeCode',
      inputType: 'input',
      span: 12,
      inputAttrs: {
        placeholder: '请输入',
      },
      formItemAttrs: {
        label: '员工编号',
        labelWidth: '80px',
      },
    },
    {
      values: ['createStartTime', 'createEndTime'],
      inputType: 'date',
      span: 12,
      inputAttrs: {
        format: 'YYYY-MM-DD',
        placeholder: '请输入',
      },
      formItemAttrs: {
        label: '创建时间',
        labelWidth: '80px',
      },
    },
  ]);
  return () =&gt; (
    &lt;SearchForm {...attrs} columns={columns.value} collapse={false} formAttrs={<!-- -->{ labelPosition: 'left' }} /&gt;
  );
});

</code></pre> 
<h4><a id="vue_454"></a>vue</h4> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;SearchFormC v-model="form" @search="search" @reset="rest" /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import SearchFormC from './components/searchFormC'
import { ref } from 'vue';
const form = ref({})

const search = () =&gt; {
  console.log(form.value)
}

const rest = () =&gt; {
  console.log(form.value)
}
&lt;/script&gt;
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/34268873867f1c1d718fe74b24142e04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Android Studio】gradle文件、配置、版本下载、国内源（SDK版本、gradle版本以及gradle-plugin（AGP）版本）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d0550fe68960d53f1eb9d8bac9eb0a64/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python-flask-上传多个文件并存储</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>