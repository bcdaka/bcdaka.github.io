<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机网络课程实训：局域网方案设计与实现（基于ensp） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/02bfaece03d198fed064e2dc9fee3827/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="计算机网络课程实训：局域网方案设计与实现（基于ensp）">
  <meta property="og:description" content="文章目录 前言基本要求操作分公司1分公司2总部核心交换机配置实现内部服务器的搭建acl_deny部分用户与服务器出口出口防火墙配置 前言 本篇文章是小编实训部分内容，内容可能会有错误，另外ensp对电脑兼容性及其挑剔，在使用之前一定要安装好。！！！内容仅做参考！！！
基本要求 公司有公司总部，另有两个分公司，申请到22.22.22.0/27，网关22.22.22.1的公网IP地址，总部大约有10台内部服务器，5台财务服务器，100名员工，20名财务人员；分公司1有150名员工，5名财务人员；分公司2有200名员工，8名财务人员。
要求：
1、 总部、分公司1和分公司2的员工和财务人员使用的计算机分别有独立的广播域，内部服务器和财务服务器也有独立的广播域。
2、 员工的计算机能够访问互联网，财务人员的计算机、内部服务器和财务服务器不可以访问互联网。
3、员工、财务人员使用的计算机都可以访问内部服务器和财务服务器，并且相互可以访问。
根据下面给出的整体拓扑图，规划、设计出某公司的网络，并在ENSP模拟器中给出具体的配置。
操作 分公司1 财务clinet配置IP为192.168.110.2：
员工pc1配置192.168.100.2：
1_5700的GE0/0/2配置接口vlan110 地址为192.168.110.1/24
1_5700的GE0/0/3配置接口vlan100 地址为192.168.100.1/24
1_5700的GE0/0/4配置接口vlan120 地址为10.10.10.1/30
&lt;Huawei&gt;system-view int vlanif 100 ip address 192.168.100.1 24 int vlanif 110 ip address 192.168.110.1 24 int vlanif 120 ip address 10.10.10.1 30 进入接口配置：
int g 0/0/2 port link-type access port default vlan 110 int g 0/0/3 portlink-type access port default vlan 100 int g 0/0/4 port link-type access ​​​​​​​port default vlan 120 配置静态默认路由：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-27T14:11:12+08:00">
    <meta property="article:modified_time" content="2024-06-27T14:11:12+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机网络课程实训：局域网方案设计与实现（基于ensp）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">前言</a></li><li><a href="#_4" rel="nofollow">基本要求</a></li><li><a href="#_17" rel="nofollow">操作</a></li><li><ul><li><a href="#1_18" rel="nofollow">分公司1</a></li><li><a href="#2_79" rel="nofollow">分公司2</a></li><li><a href="#_132" rel="nofollow">总部</a></li><li><a href="#_185" rel="nofollow">核心交换机配置</a></li><li><a href="#_261" rel="nofollow">实现内部服务器的搭建</a></li><li><a href="#acl_deny_285" rel="nofollow">acl_deny部分用户与服务器出口</a></li><li><a href="#_305" rel="nofollow">出口防火墙配置</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>前言</h2> 
<p>本篇文章是小编实训部分内容，内容可能会有错误，另外ensp对电脑兼容性及其挑剔，在使用之前一定要安装好。<strong>！！！内容仅做参考！！！</strong></p> 
<h2><a id="_4"></a>基本要求</h2> 
<p>公司有公司总部，另有两个分公司，申请到22.22.22.0/27，网关22.22.22.1的公网IP地址，总部大约有10台内部服务器，5台财务服务器，100名员工，20名财务人员；分公司1有150名员工，5名财务人员；分公司2有200名员工，8名财务人员。<br> 要求：<br> 1、 总部、分公司1和分公司2的员工和财务人员使用的计算机分别有独立的广播域，内部服务器和财务服务器也有独立的广播域。<br> 2、 员工的计算机能够访问互联网，财务人员的计算机、内部服务器和财务服务器不可以访问互联网。<br> 3、员工、财务人员使用的计算机都可以访问内部服务器和财务服务器，并且相互可以访问。</p> 
<p>根据下面给出的整体拓扑图，规划、设计出某公司的网络，并在ENSP模拟器中给出具体的配置。</p> 
<p><img src="https://images2.imgbox.com/1d/e9/iGT5GB0Z_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_17"></a>操作</h2> 
<h3><a id="1_18"></a>分公司1</h3> 
<p><img src="https://images2.imgbox.com/7f/f2/dssnhSpZ_o.png" alt="在这里插入图片描述"></p> 
<p>财务clinet配置IP为192.168.110.2：</p> 
<p><img src="https://images2.imgbox.com/90/cf/lUkUqU6B_o.png" alt="在这里插入图片描述"></p> 
<p>员工pc1配置192.168.100.2：</p> 
<p><img src="https://images2.imgbox.com/4e/9d/5GnmD4pB_o.png" alt="在这里插入图片描述"></p> 
<p>1_5700的GE0/0/2配置接口vlan110 地址为192.168.110.1/24</p> 
<p>1_5700的GE0/0/3配置接口vlan100 地址为192.168.100.1/24</p> 
<p>1_5700的GE0/0/4配置接口vlan120 地址为10.10.10.1/30</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>system<span class="token operator">-</span>view

<span class="token keyword">int</span> vlanif <span class="token number">100</span> ip address <span class="token number">192.168</span><span class="token number">.100</span><span class="token number">.1</span> <span class="token number">24</span>
 
<span class="token keyword">int</span> vlanif <span class="token number">110</span> ip address <span class="token number">192.168</span><span class="token number">.110</span><span class="token number">.1</span> <span class="token number">24</span>
 
<span class="token keyword">int</span> vlanif <span class="token number">120</span> ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">30</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/62/9hxd88ei_o.png" alt="在这里插入图片描述"></p> 
<p>进入接口配置：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">110</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
portlink<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">100</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">4</span>
port link<span class="token operator">-</span>type access
​​​​​​​port <span class="token keyword">default</span> vlan <span class="token number">120</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c3/25/xofybwqo_o.png" alt="在这里插入图片描述"></p> 
<p>配置静态默认路由：</p> 
<pre><code class="prism language-c">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.2</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/77/6f/aBJF53XU_o.png" alt="在这里插入图片描述"></p> 
<p>在PC1端使用<code>ping</code>命令进行检测：</p> 
<pre><code class="prism language-c">ping <span class="token number">192.168</span><span class="token number">.110</span><span class="token number">.2</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e0/10/IvNW9A7m_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_79"></a>分公司2</h3> 
<p>分公司2的配置和分公司1的配置方法是一样的</p> 
<p>2_5700的GE0/0/2配置接口vlan210 地址为192.168.210.1/24</p> 
<p>2_5700的GE0/0/3配置接口vlan200 地址为192.168.200.1/24</p> 
<p>2_5700的GE0/0/4配置接口vlan220 地址为10.10.10.1/30</p> 
<pre><code class="prism language-c">vlan batch <span class="token number">210</span> <span class="token number">200</span> <span class="token number">220</span> <span class="token comment">//创建多个vlan 并配置ip地址</span>
 
<span class="token keyword">int</span> vlanif <span class="token number">200</span> 
ip address <span class="token number">192.168</span><span class="token number">.200</span><span class="token number">.1</span> <span class="token number">24</span>
 
<span class="token keyword">int</span> vlanif <span class="token number">210</span> 
ip address <span class="token number">192.168</span><span class="token number">.210</span><span class="token number">.1</span> <span class="token number">24</span>
 
<span class="token keyword">int</span> vlanif <span class="token number">220</span> 
ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.5</span> <span class="token number">30</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/43/71/MMfgWYCM_o.png" alt="在这里插入图片描述"></p> 
<p>接口配置：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">210</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">200</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">220</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6b/9f/nAB72UWz_o.png" alt="在这里插入图片描述"></p> 
<p>配置静态默认路由：</p> 
<pre><code class="prism language-c">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.6</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/86/13/lisYMPkX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_132"></a>总部</h3> 
<p><img src="https://images2.imgbox.com/6a/7d/dBFdRJcg_o.png" alt="在这里插入图片描述"></p> 
<p>总部所使用的交换机是S3700，没有可参考的地址，意味着需要进行一些基本的配置步骤来确保交换机能够正常工作并与网络中的其他设备通信。</p> 
<p>可以如下操作：<br> 核心交换机的g0/0/3成为pc2、client2的网关 interface Ethernet0/0/0配置为trunk口</p> 
<p>财务clinet2配置IP为192.168.40.2（1给网关）</p> 
<p>员工pc2配置192.168.30.2（1给网关）</p> 
<p>总部交换机S3700配置：</p> 
<ul><li>创建VLAN</li></ul> 
<pre><code class="prism language-c">vlan batch <span class="token number">30</span> <span class="token number">40</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/13/4f/Ms7WHsfN_o.png" alt="在这里插入图片描述"><br> 批量创建VLAN 30和VLAN 40。在华为设备上，通常不需要batch关键字来创建多个VLAN，可能只需要分别使用vlan 30和vlan 40。</p> 
<ul><li>将接口Ethernet0/0/1配置为trunk模式，并允许VLAN 30和VLAN 40通过这个接口。Trunk模式允许接口携带多个VLAN的流量</li></ul> 
<pre><code class="prism language-c">interface Ethernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
port link<span class="token operator">-</span>type trunk
port trunk allow<span class="token operator">-</span>pass vlan <span class="token number">30</span> <span class="token number">40</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a6/9d/8R1rQig6_o.png" alt="在这里插入图片描述"></p> 
<ul><li>配置接口为access模式:<br> 将接口Ethernet0/0/2配置为access模式，并将默认VLAN设置为VLAN 40。Access模式的接口通常连接到单个VLAN，并且不传输标签（即VLAN信息）</li></ul> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">40</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/06/nG9RB1c4_o.png" alt="在这里插入图片描述"></p> 
<ul><li>配置另一个access接口:</li></ul> 
<pre><code class="prism language-c">interface Ethernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">3</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">30</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d9/5d/IwZwNmtc_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_185"></a>核心交换机配置</h3> 
<p>需要将核心交换机的<code>g 0/0/2</code>接口配置为总部pc3的网关：<br> <img src="https://images2.imgbox.com/7b/5b/3eBo8Xgy_o.png" alt="在这里插入图片描述"></p> 
<p>把<code>g 0/0/5 g</code>和<code>0/0/1</code>分别配置成<code>vlan120:10.10.10.2</code> 和<code>vlan220:10.10.10.6</code></p> 
<p>具体操作：</p> 
<ul><li>批量创建vlan：</li></ul> 
<pre><code class="prism language-c">vlan batch <span class="token number">30</span> <span class="token number">40</span> <span class="token number">120</span> <span class="token number">220</span> <span class="token number">50</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2d/e7/otyfK1OB_o.png" alt="在这里插入图片描述"></p> 
<ul><li>配置VLAN接口的IP地址:<br> 为VLAN 30、40、120、220和50配置IP地址。子网掩码使用 /24 表示255.255.255.0</li></ul> 
<pre><code class="prism language-c"><span class="token keyword">int</span> vlanif <span class="token number">30</span>
ip address <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

<span class="token keyword">int</span> vlanif <span class="token number">40</span>
ip address <span class="token number">192.168</span><span class="token number">.40</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>

<span class="token keyword">int</span> vlanif <span class="token number">120</span>
ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.252</span>

<span class="token keyword">int</span> vlanif <span class="token number">220</span>
ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.10</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.252</span>

<span class="token keyword">int</span> vlanif <span class="token number">50</span>
ip address <span class="token number">10.10</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.252</span>
</code></pre> 
<ul><li>配置物理接口为trunk模式:</li></ul> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
port link<span class="token operator">-</span>type trunk
port trunk allow<span class="token operator">-</span>pass vlan <span class="token number">30</span> <span class="token number">40</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/e0/RV3OOO4i_o.png" alt="在这里插入图片描述"></p> 
<ul><li>配置物理接口为access模式:</li></ul> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">120</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">220</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">7</span>
port link<span class="token operator">-</span>type access
​​​​​​​port <span class="token keyword">default</span> vlan <span class="token number">50</span>
</code></pre> 
<p>想要分公司1和分公司2能相互连通，需要给总部核心交换机配置路由<br> 核心交换机路由配置：</p> 
<pre><code class="prism language-c">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.100</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.1</span>
ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.110</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.1</span>
ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.200</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.5</span>
ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.210</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.5</span>
​​​​​​​ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.9</span>
</code></pre> 
<p>后一条命令设置了一个默认路由，这意味着所有不匹配上述特定网络的流量都将通过10.10.10.9这个网关进行路由</p> 
<h3><a id="_261"></a>实现内部服务器的搭建</h3> 
<p><img src="https://images2.imgbox.com/ae/5f/fv3vYS2v_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp">vlan batch <span class="token number">10</span> <span class="token number">20</span>
<span class="token keyword">int</span> vlanif <span class="token number">10</span>
ip address <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">10.1</span> <span class="token number">24</span>
<span class="token keyword">int</span> vlanif <span class="token number">20</span>
ip address <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">20.1</span> <span class="token number">24</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">4</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">10</span>
 
<span class="token keyword">int</span> g <span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">6</span>
port link<span class="token operator">-</span>type access
port <span class="token keyword">default</span> vlan <span class="token number">20</span>
</code></pre> 
<p>接口GigabitEthernet 0/0/4被设置为访问模式，并且默认属于VLAN 10，这意味着连接到这个接口的设备将属于VLAN 10。<br> 接口GigabitEthernet 0/0/5也被设置为访问模式，并且默认属于VLAN 20。</p> 
<p>此配置好后 内部http 和内部 ftp所有员工都可访问了</p> 
<h3><a id="acl_deny_285"></a>acl_deny部分用户与服务器出口</h3> 
<p>实现这样的网络访问控制，可以使用访问控制列表（ACL）来限制或允许特定的流量通过交换机的特定接口。</p> 
<p>可以配置核心的交换机acl 让这几个主机不能出g 0/0/7接口</p> 
<p><img src="https://images2.imgbox.com/2d/e6/kI6cJMlM_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c">acl number <span class="token number">2001</span>
rule <span class="token number">5</span> deny source <span class="token number">192.168</span><span class="token number">.110</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
rule <span class="token number">10</span> deny source <span class="token number">192.168</span><span class="token number">.40</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
rule <span class="token number">15</span> deny source <span class="token number">192.168</span><span class="token number">.210</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
rule <span class="token number">20</span> deny source <span class="token number">192.168</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
rule <span class="token number">25</span> deny source <span class="token number">192.168</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
 
interface GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">7</span>
​​​​​​​traffic<span class="token operator">-</span>filter outbound acl <span class="token number">2001</span>
</code></pre> 
<h3><a id="_305"></a>出口防火墙配置</h3> 
<p><img src="https://images2.imgbox.com/ef/b7/DXv4PF85_o.png" alt="在这里插入图片描述"></p> 
<p>配置两个接口：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
undo shutdown
ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.9</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.252</span>
service<span class="token operator">-</span>manage ping permit
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/37/gIG12LzP_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> g <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
undo shutdown
ip address <span class="token number">22.22</span><span class="token number">.22</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.224</span>
service<span class="token operator">-</span>manage ping permit
</code></pre> 
<p><img src="https://images2.imgbox.com/5f/b6/9em5P8az_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>增加trust与untrust:</p> 
<pre><code class="prism language-c">firewall zone trust
add <span class="token keyword">int</span> g1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>
​​​​​​​firewall zone untrust
add <span class="token keyword">int</span> g1<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
</code></pre> 
<p><code>firewall zone trust</code>：带入名为“trust”的安全区域配置模式，该区域通常被认为是内部网络或可信网络部分<br> 将接口 GigabitEthernet 1/0/0 添加到Trust区域</p> 
<p><code>firewall zone untrust</code>：带入名为“untrust”的安全区域配置模式，该区域通常被认为是外部网络或不可信网络部分，如互联网连接</p> 
<p><img src="https://images2.imgbox.com/52/ce/ZfzYT40c_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>让trust与untrust能走通:</p> 
<pre><code class="prism language-c">security<span class="token operator">-</span>policy <span class="token comment">//带入安全策略的配置模式，在这里可以定义新的安全规则或修改现有的规则</span>
rule name internet  <span class="token comment">//为新创建的安全策略规则定义一个名称</span>
source<span class="token operator">-</span>zone trust  <span class="token comment">//指定了安全策略的源区域为trust</span>
destination<span class="token operator">-</span>zone untrust <span class="token comment">//指定了安全策略的目的区域为untrust。目的区域是指流量目标的网络区域，untrust通常表示外部网络或不受信任的网络环境</span>
action permit  <span class="token comment">//定义了当流量匹配此安全策略规则时执行的动作。action permit表示允许从源区域到目的区域的流量通过。</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/f0/3RTiyZIp_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>实现上网的端口转换:</p> 
<pre><code class="prism language-c">nat<span class="token operator">-</span>policy  <span class="token comment">//带入NAT策略的配置模式，在这里可以定义新的NAT规则或修改现有的规则</span>
rule name internet  <span class="token comment">//为新创建的NAT策略规则定义一个名称。在这个例子中，规则被命名为internet，以便于识别和引用</span>
source<span class="token operator">-</span>zone trust  <span class="token comment">//指定了NAT策略的源区域为trust。源区域是指流量起始的网络区域，trust通常表示内部网络或受信任的网络环境。</span>
destination<span class="token operator">-</span>zone untrust  <span class="token comment">//指定了NAT策略的目的区域为untrust。目的区域是指流量目标的网络区域，untrust通常表示外部网络或不受信任的网络环境</span>
action nat easy<span class="token operator">-</span>ip   <span class="token comment">//命令定义了当流量匹配此NAT策略规则时执行的动作。action nat easy-ip表示使用Easy IP功能进行源地址转换。Easy IP是一种简化的NAT配置，通常用于小型网络或单个公网IP地址的场景，它允许多个内部私有IP地址通过单个公网IP地址访问互联网</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/86/78/vScY7UtE_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>为有权上网的用户提供路由：</p> 
<pre><code class="prism language-c">ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.10</span>
ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.100</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.10</span>
​​​​​​​ip route<span class="token operator">-</span><span class="token keyword">static</span> <span class="token number">192.168</span><span class="token number">.200</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.10</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/18/52/XihESMzz_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51e27044d48383479e79fe9e76334c42/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java设计模式（七）适配器模式（Adapter Pattern）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6bb3d39f63948f9b3a4770c7f27ae03b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">国内 10 款主流语言大模型综合能力测评 包括文心一言、Kimi、豆包</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>