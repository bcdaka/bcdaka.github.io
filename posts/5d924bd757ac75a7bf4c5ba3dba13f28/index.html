<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【AI 大模型】提示工程 ③ ( 提示词用法 | 提示词 Prompt 构成 | 提示词位置对权重的影响 | 提示词 Prompt 调优 | OpenAI 的 API 类型 | 提示词重要参数说明 ) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5d924bd757ac75a7bf4c5ba3dba13f28/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【AI 大模型】提示工程 ③ ( 提示词用法 | 提示词 Prompt 构成 | 提示词位置对权重的影响 | 提示词 Prompt 调优 | OpenAI 的 API 类型 | 提示词重要参数说明 )">
  <meta property="og:description" content="文章目录 一、提示词用法二、提示词 Prompt 构成1、提示词构成2、提示词位置对权重的影响3、定义角色的好处 三、提示词 Prompt 调优1、结合 训练数据 写提示词2、不知道训练数据的情况 - 不断尝试3、高质量提示词特征 - 小作文 四、OpenAI 的 API 类型1、续写文本 API 示例2、对话 API 示例 五、OpenAI API 中的重要参数说明 一、提示词用法 提示词 Prompt 的 两种用法 :
直接提问 : 直接向 GPT 大模型提问 , 得到一个具体问题的答案 , 如 : XXX 错误如何处理 ;集成应用 : 将 提示词 Prompt 集成到自己开发的应用程序中 , 结合自己公司的实际业务状况 , 生成与自己业务相关的一系列提示词 , 如 : 基于公司的一套知识库 &#43; GPT 大模型 进行使用 ; 二、提示词 Prompt 构成 1、提示词构成 提示词 Prompt 构成 :">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-02T00:11:02+08:00">
    <meta property="article:modified_time" content="2024-07-02T00:11:02+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【AI 大模型】提示工程 ③ ( 提示词用法 | 提示词 Prompt 构成 | 提示词位置对权重的影响 | 提示词 Prompt 调优 | OpenAI 的 API 类型 | 提示词重要参数说明 )</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_13" rel="nofollow">一、提示词用法</a></li><li><a href="#_Prompt__33" rel="nofollow">二、提示词 Prompt 构成</a></li><li><ul><li><a href="#1_42" rel="nofollow">1、提示词构成</a></li><li><a href="#2_66" rel="nofollow">2、提示词位置对权重的影响</a></li><li><a href="#3_77" rel="nofollow">3、定义角色的好处</a></li></ul> 
  </li><li><a href="#_Prompt__95" rel="nofollow">三、提示词 Prompt 调优</a></li><li><ul><li><a href="#1___108" rel="nofollow">1、结合 训练数据 写提示词</a></li><li><a href="#2___119" rel="nofollow">2、不知道训练数据的情况 - 不断尝试</a></li><li><a href="#3___148" rel="nofollow">3、高质量提示词特征 - 小作文</a></li></ul> 
  </li><li><a href="#OpenAI__API__169" rel="nofollow">四、OpenAI 的 API 类型</a></li><li><ul><li><a href="#1_API__189" rel="nofollow">1、续写文本 API 示例</a></li><li><a href="#2_API__248" rel="nofollow">2、对话 API 示例</a></li></ul> 
  </li><li><a href="#OpenAI_API__316" rel="nofollow">五、OpenAI API 中的重要参数说明</a></li></ul> 
</div> 
<p></p> 
<br> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="_13"></a>一、提示词用法</h2> 
<hr> 
<br> 
<p><strong>提示词 Prompt 的 两种用法 :</strong></p> 
<ul><li><strong>直接提问 :</strong> <font color="blue">直接向 GPT 大模型提问 , <font color="red">得到一个具体问题的答案 , <font color="black">如 : XXX 错误如何处理 ;</font></font></font></li><li><strong>集成应用 :</strong> <font color="purple">将 提示词 Prompt 集成到自己开发的应用程序中 , <font color="orange">结合自己公司的实际业务状况 , <font color="green">生成与自己业务相关的一系列提示词 , <font color="black">如 : 基于公司的一套知识库 + GPT 大模型 进行使用 ;</font></font></font></font></li></ul> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="_Prompt__33"></a>二、提示词 Prompt 构成</h2> 
<hr> 
<br> 
<br> 
<h3><a id="1_42"></a>1、提示词构成</h3> 
<br> 
<p><strong>提示词 Prompt 构成 :</strong></p> 
<ul><li><strong>指定角色 :</strong> <font color="blue">为 大模型 指定一个角色 , <font color="red">明确指出 " 你是一个 XX " 是很有用的 ; </font></font> 
  <ul><li>如 : 你是一位软件工程师 , 请写出 XXX 代码 ;</li><li>GPT 大模型 在训练文本 时 , 没有想过角色 , 后来使用时发现添加 " 你是一个 XX " 角色设置 非常有效 , 慢慢后面 <font color="purple">训练 大模型时 , <font color="orange">都会将角色作为一个 参数 设置到训练中, <font color="green">之后就越来越有效 ;</font></font></font></li><li><font color="blue">将 指定角色 " 你是一个 XX " 提示词 ,<font color="red"> 必须放在最前面 , <font color="purple">已经有论文研究过了 , <font color="orange">指定角色提示词放在最前面 , <font color="green">生成的结果最准确 ;</font></font></font></font></font></li><li><font color="magenta">大模型 对 提示词 Prompt 开头和结尾的文本更加敏感 , <font color="blue">最重要的内容要放在开头和结尾 , <font color="red">开头 &gt; 结尾 ;</font></font></font></li></ul> </li><li><strong>任务描述 :</strong> <font color="purple">给出一个具体的 任务 , 信息越丰富越好 ; </font> 
  <ul><li>如 : 写出 XX 代码 , 实现以下功能 : XX ;</li></ul> </li><li><strong>案例说明 :</strong> <font color="orange">期望 大模型 生成 特定 的 输出时 , 给出一个例子 , <font color="green">可以帮助模型更好地理解任务并生成正确的输出 , 提升输出质量 ; </font></font> 
  <ul><li>如 : 你是程序员 , 实现 XX 功能 , 例如 下面的代码 : XX , 在上述代码的基础上进行微调 ;</li></ul> </li><li><strong>输入信息 :</strong> <font color="blue">任务的输入信息 要在 提示词 中 明确的标识出来 ; </font> 
  <ul><li>如 : 写出的函数 输入参数 有 X 个 , 分别是 X / X … ;</li></ul> </li><li><strong>输出信息 :</strong> <font color="red">详细的描述你对输出信息的要求 , <font color="purple">比如 : 输出格式 , 输出结果个数 , 输出语言 ; </font></font> 
  <ul><li>如 : 输出 MarkDown 格式的文本 , 输出为英文 , 300 字 ;</li></ul> </li></ul> 
<br> 
<h3><a id="2_66"></a>2、提示词位置对权重的影响</h3> 
<br> 
<p><strong>大模型 对 提示词 Prompt 开头和结尾的文本更加敏感 , 最重要的内容要放在开头和结尾 , 开头 &gt; 结尾 ;</strong></p> 
<p>相对来说 重要性不太强的内容 , 放在中间位置 ;</p> 
<br> 
<h3><a id="3_77"></a>3、定义角色的好处</h3> 
<br> 
<p><font color="blue">在文章开头 定义角色 , <font color="red">会将 问题领域 收窄 ,<font color="purple"> 减少歧义 ,</font></font></font></p> 
<p><strong>比如 :</strong> 你定义<font color="orange"> " 你是一个 程序员 "</font> 提示词 , <font color="green">就会将整个问题领域 局限在 编程领域 , 当我们提出 " 模式 " 一词 时 ,</font></p> 
<ul><li>大模型 就会想到<font color="magenta"> 设计模式 , 开发模式 ,</font></li><li>而不会想到 <font color="brown">做饭模式 , 睡觉模式 ,</font></li></ul> 
<p><font color="blue">这样能极大的提升准确性 , <font color="red">得到更好的输出结果 ;</font></font></p> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="_Prompt__95"></a>三、提示词 Prompt 调优</h2> 
<hr> 
<br> 
<p><font color="blue">提示词 Prompt 需要 不断的进行调优 , <font color="red">每当 通过 提示词 得到的结果不满意 ,<font color="purple"> 我们就对 提示词 进行迭代修改 , 不断进行调优 , <font color="orange">直到得到 令我们满意的输出为止 ;</font></font></font></font></p> 
<br> 
<h3><a id="1___108"></a>1、结合 训练数据 写提示词</h3> 
<br> 
<p><strong>知道训练数据 :</strong> 了解 提示词 的 训练数据 , <font color="blue">如果是 自己训练的数据 , <font color="red">肯定知道 写什么提示词 能得到最佳结果 ;</font></font></p> 
<br> 
<h3><a id="2___119"></a>2、不知道训练数据的情况 - 不断尝试</h3> 
<br> 
<p><strong>不知道训练数据 :</strong> 如果不知道 GPT 的训练数据 , <font color="blue">那就需要 不断与 大模型 进行聊天 , <font color="red">了解 GPT 都训练了哪些数据 , 都输出了哪些数据 ;</font></font></p> 
<br> 
<p>如何 知道 GPT 大模型训练了哪些数据 , 借助这些数据 进行 提示词 Prompt 的 调优 , 以 " 西游记 " 为例 ,</p> 
<p>如果知道 GPT ( Generative Pre-trained Transformer ) 大模型 训练 " 西游记 " 相关知识文本 的 数据 , 参考 该方面知识 的 " 训练数据 " 进行 提示词 Prompt 调优 , 是最佳途径 ;</p> 
<p><font color="blue">跟 GPT 大模型聊天 ,<font color="red"> 就 聊 " 西游记 " 相关内容 , <font color="purple">聊 几十轮 对话 , <font color="orange">看看 大模型 都训练了哪些数据 ;</font></font></font></font></p> 
<p><font color="green">尽量选择 与 GPT 输出的内容 类似的 文本 作为 提示词 ;</font></p> 
<br> 
<p><font color="blue">不断尝试 修改 提示词 , <font color="red">增加一个字 , <font color="purple">减少一个字 , <font color="orange">使用不同的间隔 和 标点符号 , <font color="green">对输出结果都有一定的影响 ;</font></font></font></font></font></p> 
<p><strong>该方案有一定的运气成分 , 门槛比较低 ;</strong></p> 
<br> 
<h3><a id="3___148"></a>3、高质量提示词特征 - 小作文</h3> 
<br> 
<p><strong>高质量提示词 有如下特点 :</strong></p> 
<ul><li><strong>描述具体 :</strong><font color="blue"> 提示词不能太概括 , <font color="red">描述的越具体越好 ;</font></font></li><li><strong>信息丰富 :</strong> 提供丰富的上下文信息 , <font color="purple">给出 几百上千字 的参考信息 ;</font></li><li><strong>没有歧义 :</strong> <font color="orange">目标必须明确 , 不能有歧义 , <font color="green">不能让 大模型 理解错方向 ,<font color="brown"> 反面案例就是 " 武汉市长江大桥 " ;</font></font></font></li></ul> 
<p><strong>高质量的提示词 , 都是 几百字 或者 上千字 的 , 内容丰富 的 " 小作文 " ;</strong></p> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="OpenAI__API__169"></a>四、OpenAI 的 API 类型</h2> 
<hr> 
<br> 
<p>OpenAI 的大模型 出现最早 , 其它的大模型的 API 基本都参考 OpenAI 的大模型 , 学会使用 OpenAI 的 API , 基本其它的大模型提供的 API 都可以很快学会 ;</p> 
<br> 
<p><strong>OpenAI 提供了两种 API 版本 :</strong></p> 
<ul><li><strong>续写文本 API :</strong> <a href="https://platform.openai.com/docs/api-reference/completions/create" rel="nofollow">https://platform.openai.com/docs/api-reference/completions/create</a></li><li><strong>对话 API :</strong> <a href="https://platform.openai.com/docs/api-reference/chat/create" rel="nofollow">https://platform.openai.com/docs/api-reference/chat/create</a></li></ul> 
<br> 
<p>基本上使用 对话 API 就可以解决所有问题 , 续写文本 API 几乎很少使用 ;</p> 
<br> 
<h3><a id="1_API__189"></a>1、续写文本 API 示例</h3> 
<br> 
<p><strong>续写文本 API :</strong> <a href="https://platform.openai.com/docs/api-reference/completions/create" rel="nofollow">https://platform.openai.com/docs/api-reference/completions/create</a></p> 
<p><img src="https://images2.imgbox.com/90/1c/mgjrz5zI_o.png" alt="在这里插入图片描述"></p> 
<p>官方给出了一个 调用 OpenAI 续写文本 API 的 Python 示例代码 :</p> 
<pre><code class="prism language-javascript">from openai <span class="token keyword">import</span> OpenAI
client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

client<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo-instruct"</span><span class="token punctuation">,</span>
  prompt<span class="token operator">=</span><span class="token string">"Say this is a test"</span><span class="token punctuation">,</span>
  max_tokens<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>
  temperature<span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>在之前的博客 <a href="https://hanshuliang.blog.csdn.net/article/details/139922167" rel="nofollow">【AI 大模型】OpenAI 接口调用 ① ( 安装 openai 软件包 | 查看 openai 软件包版本 | PyCharm 中开发 Python 程序调用 OpenAI 接口 )</a> 中 , 购买了 API-KEY , 设置 API-KEY 和 请求地址 ,</p> 
<ul><li>API-KEY 为 <code>sk-6o3KJuuocEXpb1Ug39D0A4913a844fCaBa892eDe9814Df8a</code> ,</li><li>请求地址是 <code>https://api.xiaoai.plus/v1</code> ,</li></ul> 
<p>这是一个 GPT 3.5 的 API-KEY ;</p> 
<pre><code class="prism language-javascript">from openai <span class="token keyword">import</span> OpenAI

client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span>
    api_key<span class="token operator">=</span><span class="token string">"sk-6o3KJuuocEXpb1Ug39D0A4913a844fCaBa892eDe9814Df8a"</span><span class="token punctuation">,</span>
    base_url<span class="token operator">=</span><span class="token string">"https://api.xiaoai.plus/v1"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

completion <span class="token operator">=</span> client<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo-instruct"</span><span class="token punctuation">,</span>
  prompt<span class="token operator">=</span><span class="token string">"Say this is a test"</span><span class="token punctuation">,</span>
  max_tokens<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>
  temperature<span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>completion<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
</code></pre> 
<p>在 PyCharm 中 直接执行该代码 , 这个代码执行的时间比较长 , 需要等待 几分钟 左右 , 执行结果如下 :</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span><span class="token string-property property">'role'</span><span class="token operator">:</span> <span class="token string">'assistant'</span><span class="token punctuation">,</span> <span class="token string-property property">'content'</span><span class="token operator">:</span> <span class="token string">'*nods* Understood. I am now roleplaying as an AI assistant with broad knowledge'</span><span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/05/c4/h9xl2CaI_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="2_API__248"></a>2、对话 API 示例</h3> 
<br> 
<p><strong>对话 API :</strong> <a href="https://platform.openai.com/docs/api-reference/chat/create" rel="nofollow">https://platform.openai.com/docs/api-reference/chat/create</a></p> 
<p><img src="https://images2.imgbox.com/7c/f7/AK6m2bLz_o.png" alt="在这里插入图片描述"></p> 
<p>官方给出的示例如下 :</p> 
<pre><code class="prism language-javascript">from openai <span class="token keyword">import</span> OpenAI
client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

completion <span class="token operator">=</span> client<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  model<span class="token operator">=</span><span class="token string">"gpt-4o"</span><span class="token punctuation">,</span>
  messages<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"You are a helpful assistant."</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>completion<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
</code></pre> 
<p>同理 , 设置 API-KEY 和 请求地址 ,</p> 
<ul><li>API-KEY 为 <code>sk-6o3KJuuocEXpb1Ug39D0A4913a844fCaBa892eDe9814Df8a</code> ,</li><li>请求地址是 <code>https://api.xiaoai.plus/v1</code> ,</li></ul> 
<p>这是一个 GPT 3.5 的 API-KEY ;</p> 
<p>最终代码如下 :</p> 
<pre><code class="prism language-javascript">from openai <span class="token keyword">import</span> OpenAI

client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span>
    api_key<span class="token operator">=</span><span class="token string">"sk-6o3KJuuocEXpb1Ug39D0A4913a844fCaBa892eDe9814Df8a"</span><span class="token punctuation">,</span>
    base_url<span class="token operator">=</span><span class="token string">"https://api.xiaoai.plus/v1"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

completion <span class="token operator">=</span> client<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo"</span><span class="token punctuation">,</span>
  messages<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"You are a helpful assistant."</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>completion<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
</code></pre> 
<p>在 PyCharm 中执行上述代码 , 执行结果为 :</p> 
<pre><code class="prism language-javascript"><span class="token function">ChatCompletionMessage</span><span class="token punctuation">(</span>content<span class="token operator">=</span><span class="token string">'Hello! How can I assist you today?'</span><span class="token punctuation">,</span> role<span class="token operator">=</span><span class="token string">'assistant'</span><span class="token punctuation">,</span> function_call<span class="token operator">=</span>None<span class="token punctuation">,</span> tool_calls<span class="token operator">=</span>None<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2e/52/24SmCav4_o.png" alt="在这里插入图片描述"></p> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="OpenAI_API__316"></a>五、OpenAI API 中的重要参数说明</h2> 
<hr> 
<br> 
<p><strong>OpenAI API 中的重要参数说明 :</strong></p> 
<ul><li><strong>temperature 参数 :</strong> <font color="blue">控制生成结果的多样性 ; <font color="red">默认值为 0 , 取值范围 0 ~ 2 ; </font></font> 
  <ul><li>值越高 , 生成的结果越随机 , <font color="purple">设置为 2 基本胡说八道 ;</font></li><li>值越低 , 生成的结果越固定 , <font color="orange">0 的时候基本固定 ;</font></li></ul> </li><li><strong>seed 参数 :</strong> <font color="green">随机种子 , <font color="magenta">如果不指定 则 OpenAI 自己随机决定用什么随机种子 ; </font></font> 
  <ul><li><font color="blue">指定该 seed 参数后 , <font color="red">如果 temperature = 0 , <font color="purple">则固定的种子生成的结果是固定的 ;</font></font></font></li></ul> </li><li><strong>stream 参数 :</strong> <font color="orange">控制是否以数据流模式进行生成</font> ; 默认值为 False ; 
  <ul><li>如果设置为 True , 在数据流模式下 , 一个字一个字的输出 , 浪费流量 ;</li><li>默认 False , 整个生成完了 , 在一次性返回 ;</li></ul> </li><li><strong>top_p 参数 :</strong> <font color="blue">在随机采样时 , 只考虑累计概率前百分之多少的 token</font> , 有助于控制生成文本的多样性 ; 
  <ul><li>与 temperature 参数作用相似 , 不建议与 temperature 一起使用 ;</li></ul> </li><li><strong>n 参数 :</strong> <font color="red">一次生成的结果数量 ; </font> 
  <ul><li>使用提示词的 自洽性 时使用 , 一次返回多个结果再进行比较 ;</li></ul> </li><li><strong>max_tokens 参数 :</strong> <font color="purple">每条生成结果的最大 token 数量 , 超过这个限制的部分会被截断 ; </font> 
  <ul><li>省钱方案 , 防止某个用户大量消耗 token ;</li></ul> </li><li><strong>presence_penalty 参数 :</strong> <font color="orange">对已经出现过的 token 的概率进行降权</font> , 帮助生成更多样化的文本结果 ; 
  <ul><li>避免输出很多重复的话 , 浪费 token ;</li></ul> </li><li><strong>frequency_penalty 参数 :</strong> <font color="green">根据 token 的出现频次 , 对其生成概率进行降权 ;</font></li><li><strong>logit_bias 参数 :</strong><font color="magenta"> 对指定的 token 进行手工加权或降权</font> , 可以通过这个参数来调整特定 token 的生成概率 , 但不常用 ;</li></ul> 
<br> 
<p><strong>OpenAI 参数示例 :</strong></p> 
<pre><code class="prism language-javascript">from openai <span class="token keyword">import</span> OpenAI

client <span class="token operator">=</span> <span class="token function">OpenAI</span><span class="token punctuation">(</span>
    api_key<span class="token operator">=</span><span class="token string">"sk-6o3KJuuocEXpb1Ug39D0A4913a844fCaBa892eDe9814Df8a"</span><span class="token punctuation">,</span>
    base_url<span class="token operator">=</span><span class="token string">"https://api.xiaoai.plus/v1"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

completion <span class="token operator">=</span> client<span class="token punctuation">.</span>chat<span class="token punctuation">.</span>completions<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
    model<span class="token operator">=</span><span class="token string">"gpt-3.5-turbo"</span><span class="token punctuation">,</span>
    messages<span class="token operator">=</span><span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"system"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"You are a helpful assistant."</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span><span class="token string-property property">"role"</span><span class="token operator">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string-property property">"content"</span><span class="token operator">:</span> <span class="token string">"Hello!"</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    # 下面的参数都是默认参数值

    temperature<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>          # 控制生成结果的多样性
    stream<span class="token operator">=</span>False<span class="token punctuation">,</span>           # 控制是否以数据流模式进行生成
    top_p<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>                # 在随机采样时 只考虑累计概率前百分之多少的 token
    n<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>                    # 一次生成的结果数量
    max_tokens<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>         # 每条生成结果的最大 token 数量
    presence_penalty<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>     # 对已经出现过的 token 的概率进行降权
    frequency_penalty<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>    # 根据 token 的出现频次 对其生成概率进行降权
    logit_bias<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>          # 对指定的 token 进行手工加权或降权
<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>completion<span class="token punctuation">.</span>choices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span>
</code></pre> 
<p><strong>执行上述代码结果 :</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">ChatCompletionMessage</span><span class="token punctuation">(</span>content<span class="token operator">=</span><span class="token string">'Hello! How can I assist you today?'</span><span class="token punctuation">,</span> role<span class="token operator">=</span><span class="token string">'assistant'</span><span class="token punctuation">,</span> function_call<span class="token operator">=</span>None<span class="token punctuation">,</span> tool_calls<span class="token operator">=</span>None<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2d/e9/WnmddBpT_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e7dc5a057879033638eaeb5097bf4e44/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android中的适配器，你知道是做什么的吗？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ada618c82c11640ab42b3b3a9fe4b490/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">（超详细）数据结构——“队列”的深度解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>