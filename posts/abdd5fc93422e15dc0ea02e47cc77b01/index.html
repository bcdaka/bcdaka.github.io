<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>hadoop疑难问题解决_NoClassDefFoundError: org/apache/hadoop/fs/adl/AdlFileSystem - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/abdd5fc93422e15dc0ea02e47cc77b01/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="hadoop疑难问题解决_NoClassDefFoundError: org/apache/hadoop/fs/adl/AdlFileSystem">
  <meta property="og:description" content="1、问题描述 impala执行查询：select * from stmta_raw limit 10;
报错信息如下：
Query: select * from sfmta_raw limit 10 Query submitted at: 2018-04-11 14:46:29 (Coordinator: http://mrj001:25000) ERROR: AnalysisException: Failed to load metadata for table: &#39;sfmta_raw&#39; CAUSED BY: TableLoadingException: Failed to load metadata for table: test.sfmta_raw. Running &#39;invalidate metadata test.sfmta_raw&#39; may resolve this problem. CAUSED BY: NoClassDefFoundError: org/apache/hadoop/fs/adl/AdlFileSystem CAUSED BY: ClassNotFoundException: org.apache.hadoop.fs.adl.AdlFileSystem 2、集群环境 【操作系统】Centos6.5
【hadoop版本】2.7.1
【impala版本】2.10.0-cdh5.14.0
3、报错分析 3.1、使用日志提示解决方案 #根据日志提示执行 invalidate metadata test.sfmta_raw 3.2、检查依赖lib包依赖 #检查依赖，看是否有依赖没有引入 cd /usr/lib/impala/lib #检查是否存在依赖包 ls -s | grep azure 3.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-06T16:02:52+08:00">
    <meta property="article:modified_time" content="2024-06-06T16:02:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">hadoop疑难问题解决_NoClassDefFoundError: org/apache/hadoop/fs/adl/AdlFileSystem</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1、问题描述</h2> 
<p>impala执行查询：select * from stmta_raw limit 10;</p> 
<p>报错信息如下：</p> 
<pre><code class="language-bash">Query: select * from sfmta_raw limit 10
Query submitted at: 2018-04-11 14:46:29 (Coordinator: http://mrj001:25000)
ERROR: AnalysisException: Failed to load metadata for table: 'sfmta_raw'
CAUSED BY: TableLoadingException: Failed to load metadata for table: test.sfmta_raw. Running 'invalidate metadata test.sfmta_raw' may resolve this problem.
CAUSED BY: NoClassDefFoundError: org/apache/hadoop/fs/adl/AdlFileSystem
CAUSED BY: ClassNotFoundException: org.apache.hadoop.fs.adl.AdlFileSystem</code></pre> 
<h2>2、集群环境</h2> 
<p>【操作系统】Centos6.5</p> 
<p>【hadoop版本】2.7.1</p> 
<p>【impala版本】2.10.0-cdh5.14.0</p> 
<h2>3、报错分析</h2> 
<h3>3.1、使用日志提示解决方案</h3> 
<pre><code class="language-bash">#根据日志提示执行
invalidate metadata test.sfmta_raw</code></pre> 
<h3>3.2、检查依赖lib包依赖</h3> 
<pre><code class="language-bash">#检查依赖，看是否有依赖没有引入
cd /usr/lib/impala/lib

#检查是否存在依赖包
ls -s | grep azure</code></pre> 
<h3>3.3、检查core-site.xml配置</h3> 
<pre><code class="language-bash">#进入impala配置目录
cd /etc/impala/conf

#检查配置文件
cat core-site.xml

#查看下面引入的是否有下面属性，如果没有则添加
&lt;property&gt;
    &lt;name&gt;fs.AbstractFileSystem.adl.impl&lt;/name&gt;
    &lt;value&gt;org.apache.hadoop.fs.adl.Adl&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
    &lt;name&gt;fs.adl.impl&lt;/name&gt;
    &lt;value&gt;org.apache.hadoop.fs.adl.AdlFileSystem&lt;/value&gt;
&lt;/property&gt;</code></pre> 
<h3>3.4、检查hadoop lib目录</h3> 
<pre><code class="language-bash">#进入impala配置目录
cd $HADOOP_HOME/lib

#检查配置文件
ls -l | grep azure

#如果上一步有对应jar包，则查找下面jar包(该包包括缺失的class实现类)
ls -l | grep hadoop-azure-datalake</code></pre> 
<h3>3.5、检查hadoop lib目录</h3> 
<p>        如果3.2、3.3、3.4中均缺失相应jar包，则代表当前版本hadoop中不支持AdlFileSystem的实现，需要更新hadoop版本；本人使用了apache hadoop2.7.1，经过检查发现确实没有这个子类。经过hadoop官网查询验证</p> 
<p><img alt="" height="327" src="https://images2.imgbox.com/52/02/eA7xy4fs_o.png" width="1096"></p> 
<p><strong>hadoop2.9.0版本有这个子类；问题终于找到</strong> </p> 
<p><img alt="" height="328" src="https://images2.imgbox.com/6c/da/0kEDR6ci_o.png" width="981"></p> 
<h3>3.6、更新hadoop版本</h3> 
<p>    检查环境兼容性，更新hadoop版本至2.9.0或更高版本</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d869aafede9ab97ee63c8ef263de478c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">自定义类型：结构体&#43;结构体内存对齐&#43;结构体实现位段</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f46920c5c88c55383413e176d3d79fb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java static 如何理解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>