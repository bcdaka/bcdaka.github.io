<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Stable Diffusion整合包与手动本地部署结合内网穿透远程AI绘画 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d8344aa09f67cf76f3e0d992aa374938/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Stable Diffusion整合包与手动本地部署结合内网穿透远程AI绘画">
  <meta property="og:description" content="文章目录 前言1. 本地部署Stable Diffusion Web UI1.1 整合包安装1.2 手动安装Stable Diffusion Web UI 2. 安装Cpolar内网穿透3. 实现公网访问Stable Diffusion Web UI4. 固定Stable Diffusion Web UI 公网地址 💡 推荐 前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。【点击跳转到网站】
前言 本篇文章介绍如何在Windows本地部署Stable Diffusion Web UI，并且结合cpolar内网穿透实现公网环境远程访问。
Stable Diffusion（简称SD）是AI绘画领域的一个核心模型，它目前也是一个完全开源的项目（模型、代码、训练数据、论文、生态等全部开源），可拓展性强、 出图效率高、 数据安全保障，这使得其能快速构建强大繁荣的上下游生态，并且吸引了越来越多的AI绘画爱好者加入其中。
相比于集成在网络平台的SD或者其他AI绘画平台来说，自部署平台没有生成数量的限制，不用花钱，不用被NSFW约束，生成时间快，不用排队，自由度高，而且功能完整，插件丰富，可以调试和个性化的地方也更多；更稳定，也更容易让SD变成生产力或者商业化使用。既然这样，那就自力更生，在本机上自己部署一个，可以随心所欲地玩图、玩图。
Stable Diffusion只是提供一个模型，提供基础的文本分析、特征提取、图片生成这些核心功能，但自身是没有可视化UI的，用起来就是各种文件加命令行。原始的Stable Diffusion程序（脚本）只能以命令行的方式进行，参数设置很不方便，而且每次调用时，需要事先加载预训练模型，图像生成完成后会释放内存中的模型并结束进程，运行效率低，交互操作极其麻烦。
开源的 Stable Diffusion 社区受到了广泛民间开发者大力支持，众多为爱发电的程序员自告奋勇的为其制作方便操控的 GUI 图形化界面。那么接下来就教大家如何在WIndiows本地来部署Stable Diffusion Web UI。
【视频教程】
AI绘图利器Stable Diffusion如何在本地Windows系统电脑部署保姆级教程
1. 本地部署Stable Diffusion Web UI 本篇文章介绍两种本地部署方式，一种是整合包安装，另一种是手动安装。
安装环境：Windows10
1.1 整合包安装 首先介绍第一种秋叶整合包安装，Stable Diffusion秋叶整合包是中国大神秋叶基于Stable Diffusion WebUI内核开发的整合包，内置了与电脑本身系统隔离的Python环境和Git（包含了第三部分需要下载和安装的依赖项、github依赖包、预训练模型以及相当多的插件）。可以忽略网络需求和Python环境的门槛，让更多人轻松地使用Stable Diffusion WebUI。超简单一键安装，无任何使用门槛，完全免费使用，支持Nvdia全系列显卡。
（1）配置要求：
系统：Windows 10及以上系统显存最低4G，建议使用Nvidia 2060显卡，显存6GB以上。内存至少是8GB，而配备16GB或者以上内存，你会有更好的使用体验 （2）下载文件：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-23T14:36:57+08:00">
    <meta property="article:modified_time" content="2024-08-23T14:36:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Stable Diffusion整合包与手动本地部署结合内网穿透远程AI绘画</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_3" rel="nofollow">前言</a></li><li><a href="#1_Stable_Diffusion_Web_UI_22" rel="nofollow">1. 本地部署Stable Diffusion Web UI</a></li><li><ul><li><a href="#11__27" rel="nofollow">1.1 整合包安装</a></li><li><a href="#12_Stable_Diffusion_Web_UI_57" rel="nofollow">1.2 手动安装Stable Diffusion Web UI</a></li></ul> 
   </li><li><a href="#2_Cpolar_131" rel="nofollow">2. 安装Cpolar内网穿透</a></li><li><a href="#3_Stable_Diffusion_Web_UI_171" rel="nofollow">3. 实现公网访问Stable Diffusion Web UI</a></li><li><a href="#4_Stable_Diffusion_Web_UI__183" rel="nofollow">4. 固定Stable Diffusion Web UI 公网地址</a></li></ul> 
 </li></ul> 
</div> 
<br> 💡 
<strong>推荐</strong> 
<p></p> 
<blockquote> 
 <p>前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。【<a href="https://www.captainbed.cn/liuyi" rel="nofollow">点击跳转到网站</a>】</p> 
</blockquote> 
<h3><a id="_3"></a>前言</h3> 
<p>本篇文章介绍如何在Windows本地部署Stable Diffusion Web UI，并且结合cpolar内网穿透实现公网环境远程访问。</p> 
<p>Stable Diffusion（简称SD）是AI绘画领域的一个核心模型，它目前也是一个完全开源的项目（模型、代码、训练数据、论文、生态等全部开源），可拓展性强、 出图效率高、 数据安全保障，这使得其能快速构建强大繁荣的上下游生态，并且吸引了越来越多的AI绘画爱好者加入其中。</p> 
<p>相比于集成在网络平台的SD或者其他AI绘画平台来说，自部署平台没有生成数量的限制，不用花钱，不用被NSFW约束，生成时间快，不用排队，自由度高，而且功能完整，插件丰富，可以调试和个性化的地方也更多；更稳定，也更容易让SD变成生产力或者商业化使用。既然这样，那就自力更生，在本机上自己部署一个，可以随心所欲地玩图、玩图。</p> 
<p>Stable Diffusion只是提供一个模型，提供基础的文本分析、特征提取、图片生成这些核心功能，但自身是没有可视化UI的，用起来就是各种文件加命令行。原始的Stable Diffusion程序（脚本）只能以命令行的方式进行，参数设置很不方便，而且每次调用时，需要事先加载预训练模型，图像生成完成后会释放内存中的模型并结束进程，运行效率低，交互操作极其麻烦。</p> 
<p>开源的 Stable Diffusion 社区受到了广泛民间开发者大力支持，众多为爱发电的程序员自告奋勇的为其制作方便操控的 GUI 图形化界面。那么接下来就教大家如何在WIndiows本地来部署Stable Diffusion Web UI。</p> 
<p><img src="https://images2.imgbox.com/11/21/0H7Z5l8V_o.png" alt="在这里插入图片描述"></p> 
<p><strong>【视频教程】</strong></p> 
<p></p> 
<div class="csdn-video-box" data-report-view='{"spm":"3001.10261","extra":{"id":"hio17Um0-1720778101805"}}'> 
 <iframe id="hio17Um0-1720778101805" frameborder="0" src="https://player.bilibili.com/player.html?aid=1806232299" allowfullscreen="true" data-mediaembed="bilibili"></iframe> 
 <p>AI绘图利器Stable Diffusion如何在本地Windows系统电脑部署保姆级教程</p> 
</div> 
<p></p> 
<h3><a id="1_Stable_Diffusion_Web_UI_22"></a>1. 本地部署Stable Diffusion Web UI</h3> 
<p>本篇文章介绍两种本地部署方式，一种是整合包安装，另一种是手动安装。<br> 安装环境：Windows10</p> 
<h4><a id="11__27"></a>1.1 整合包安装</h4> 
<p>首先介绍第一种<strong>秋叶整合包安装</strong>，Stable Diffusion秋叶整合包是中国大神秋叶基于Stable Diffusion WebUI内核开发的整合包，内置了与电脑本身系统隔离的Python环境和Git（包含了第三部分需要下载和安装的依赖项、github依赖包、预训练模型以及相当多的插件）。可以忽略网络需求和Python环境的门槛，让更多人轻松地使用Stable Diffusion WebUI。超简单一键安装，无任何使用门槛，完全免费使用，支持Nvdia全系列显卡。</p> 
<p>（1）配置要求：</p> 
<ul><li>系统：Windows 10及以上系统</li><li>显存最低4G，建议使用Nvidia 2060显卡，显存6GB以上。内存至少是8GB，而配备16GB或者以上内存，你会有更好的使用体验</li></ul> 
<p>（2）下载文件：<br> 下载到本地，最好不要有中文目录，整合包地址链接：链接：https://pan.baidu.com/s/1uFmhO8jwdmseFjRq03YSbg?pwd=6666<br> 提取码：6666</p> 
<p>（3）解压文件夹到本地，点击启动器</p> 
<p><img src="https://images2.imgbox.com/e9/1b/NrqO0dyx_o.png" alt="af299cde20f0567a58019a11578fed7.png"></p> 
<p>（4）点击一键启动</p> 
<p><img src="https://images2.imgbox.com/a4/89/2p5lXDo3_o.png" alt="d7c6727553611dd2bdd07ea6e1d1ef6.png"></p> 
<p>可以看到出现了命令行</p> 
<p><img src="https://images2.imgbox.com/ca/79/dv9sA3Vs_o.png" alt="6a8c6eba316fce81861f49250ba78e7.png"></p> 
<p>稍等等几秒钟，会自动跳到Web UI页面。</p> 
<p><img src="https://images2.imgbox.com/a5/55/ebpij5VG_o.png" alt="cceacbde5f237d5414d6277cbbf0610.png"></p> 
<p>然后就可以在文本框中，输入指令来进行AI生图了。</p> 
<h4><a id="12_Stable_Diffusion_Web_UI_57"></a>1.2 手动安装Stable Diffusion Web UI</h4> 
<p>(1) 下载文件和修改文件</p> 
<p>点击链接下载文件：https://huggingface.co/CompVis/stable-diffusion-v-1-4-original</p> 
<p>将文件重命名为 <code>model.ckpt</code></p> 
<p>(2)下载<strong>Anaconda</strong>: 首先我们需要安装一个Python的虚拟环境的管理器——<strong>Anaconda</strong>，给我们的Stable Diffusion创建一个独立的python3.10.6环境</p> 
<p>下载地址：https://repo.anaconda.com/archive/</p> 
<p>下载完成后，打开Anaconda的终端，创建一个名为 stablediffusion 的环境，指定python版本3.10.6</p> 
<pre><code class="prism language-shell">conda create <span class="token parameter variable">-n</span> stablediffusion <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.10</span>.8
</code></pre> 
<p>查看是否创建环境成功</p> 
<pre><code class="prism language-shell">conda <span class="token function">env</span> list
</code></pre> 
<p>创建成功后，激活虚拟环境</p> 
<pre><code class="prism language-shell">active stablediffusion
</code></pre> 
<p>（3）下载git：https://git-scm.com/</p> 
<p>选择Windows最新版本安装即可</p> 
<p><img src="https://images2.imgbox.com/d8/02/19gzsPvS_o.png" alt="image.png"></p> 
<p>(4) 下载 stable-diffusion webui github 链接</p> 
<ul><li>在Anaconda命令行中输入</li></ul> 
<pre><code class="prism language-Bash">git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
</code></pre> 
<pre><code>运行之后 git 会将文件下载到当前文件夹中
</code></pre> 
<p><img src="https://images2.imgbox.com/40/bc/koTV2BI9_o.png" alt="image.png"></p> 
<ul><li> <p>将 <code>model.ckpt</code> 放到 <code>models</code> 文件夹下</p> </li><li> <p>将 <code>repositories</code> 文件夹和 <code>GFPGANv1.3.pth</code> 放到 webui 根目录下和 <code>webui.bat</code> 同一个文件夹</p> </li></ul> 
<p>（5）在conda虚拟环境命令行中进入到根目录中打开webui-user.bat</p> 
<p><img src="https://images2.imgbox.com/20/e8/VNtcumZZ_o.png" alt="6ff32405daa0eda86c5c43dea7d4262.png"></p> 
<p>等一会之后，自动打开Stable Diffusion Web UI，本地地址为：127.0.0.1:7860</p> 
<p>之后就可以在文本框中输入指令并生成图片。</p> 
<p><img src="https://images2.imgbox.com/2b/1d/5EdnXUkV_o.png" alt="396ad6cb14323551a734cee12acac24.png"></p> 
<p>目前我们在本地成功部署了Stable Diffusion Web UI，但是如果我们想实现不在局域网下，在公网能够远程访问Stable Diffusion Web UI的话，我们就可以使用Cpolar内网穿透来实现公网随时随地访问了！免去了复杂得本地部署过程，只需要一个公网地址直接就可以访问。</p> 
<p>接下来就教大家如何安装Cpolar并且将本地部署的Stable Diffusion Web UI实现公网访问。</p> 
<h3><a id="2_Cpolar_131"></a>2. 安装Cpolar内网穿透</h3> 
<p>下面是安装cpolar步骤：</p> 
<blockquote> 
 <p>Cpolar官网地址: <a href="https://www.cpolar.com/" rel="nofollow">https://www.cpolar.com</a></p> 
</blockquote> 
<p>点击进入cpolar官网，点击<code>免费使用</code>注册一个账号，并下载最新版本的Cpolar</p> 
<p><img src="https://images2.imgbox.com/81/ac/pmvejbuT_o.png" alt=""></p> 
<p>登录成功后，点击下载Cpolar到本地并安装（一路默认安装即可）本教程选择下载Windows版本。</p> 
<p><img src="https://images2.imgbox.com/c4/8c/qt3GT5tl_o.png" alt="image-20240319175308664"></p> 
<p>Cpolar安装成功后，在浏览器上访问http://localhost:9200，使用cpolar账号登录,登录后即可看到Cpolar web 配置界面,结下来在web 管理界面配置即可。</p> 
<p><img src="https://images2.imgbox.com/f9/ee/bC3GxK4N_o.png" alt=""></p> 
<p>接下来配置一下 Stable Diffusion Web UI 的公网地址，</p> 
<p>登录后，点击左侧仪表盘的隧道管理——创建隧道，</p> 
<p>创建一个 Stable Diffusion Web UI 的公网http地址隧道</p> 
<ul><li>隧道名称：可自定义命名，注意不要与已有的隧道名称重复</li><li>协议：选择http</li><li>本地地址：7860 (本地访问的地址)</li><li>域名类型：免费选择随机域名</li><li>地区：选择China Top</li></ul> 
<p><img src="https://images2.imgbox.com/b6/da/NgfULcj9_o.png" alt="f243ebf8c60be11d1a1470224a754fb.png"></p> 
<p>隧道创建成功后，点击左侧的状态——在线隧道列表,查看所生成的公网访问地址，有两种访问方式,一种是http 和https</p> 
<p><img src="https://images2.imgbox.com/82/b0/7p1zuVRE_o.png" alt="8cca72f2ff4aa774e48cba680d15015.png"></p> 
<p>使用上面的Cpolar https公网地址,在手机或任意设备的浏览器进行登录访问,即可成功看到 Stable Diffusion Web UI界面,这样一个公网地址且可以远程访问就创建好了,使用了Cpolar的公网域名,无需自己购买云服务器,即可到公网访问 Stable Diffusion Web UI了！</p> 
<h3><a id="3_Stable_Diffusion_Web_UI_171"></a>3. 实现公网访问Stable Diffusion Web UI</h3> 
<p>我们用刚才cpolar生成的公网地址，打开一个新的浏览器复制粘贴，可以看到进入到了Stable Diffusion Web UI主界面。</p> 
<p><img src="https://images2.imgbox.com/d9/72/MxmSxzVl_o.png" alt="7bb527ae95cc1792028eb9fbfebdb3e.png"></p> 
<p><strong>小结</strong></p> 
<p>如果我们需要长期进行团队协作的话，由于刚才创建的是随机的地址，24小时会发生变化。另外它的网址是由随机字符生成，不容易记忆。如果想把域名变成固定的二级子域名，并且不想每次都重新创建隧道来访问Stable Diffusion Web UI，我们可以选择创建一个固定的http地址来解决这个问题。</p> 
<h3><a id="4_Stable_Diffusion_Web_UI__183"></a>4. 固定Stable Diffusion Web UI 公网地址</h3> 
<p>我们接下来为其配置固定的HTTP端口地址，该地址不会变化，方便分享给别人长期查看你的博客，而无需每天重复修改服务器地址。</p> 
<blockquote> 
 <p>配置固定http端口地址需要将cpolar升级到专业版套餐或以上。</p> 
</blockquote> 
<p><a href="https://dashboard.cpolar.com/" rel="nofollow">登录cpolar官网</a>，点击左侧的预留，选择保留二级子域名，设置一个二级子域名名称，点击保留,保留成功后复制保留的二级子域名名称。</p> 
<p><img src="https://images2.imgbox.com/33/a8/LKjgOYsd_o.png" alt="6fc65f9eb26f36e3e54275b53a2e574.png"></p> 
<p>保留成功后复制保留成功的二级子域名的名称</p> 
<p><img src="https://images2.imgbox.com/98/82/GrpFJvfS_o.png" alt="cd7b5bb0c6f667b493d279bdb420661.png"></p> 
<p>返回登录Cpolar web UI管理界面，点击左侧仪表盘的隧道管理——隧道列表，找到所要配置的隧道，点击右侧的编辑</p> 
<p><img src="https://images2.imgbox.com/02/bb/a8ZNOCQj_o.png" alt="19ffeec2220f85c0854494df82b5bd7.png"></p> 
<p>修改隧道信息，将保留成功的二级子域名配置到隧道中</p> 
<ul><li>域名类型：选择二级子域名</li><li>Sub Domain：填写保留成功的二级子域名</li></ul> 
<p>点击<code>更新</code>(注意,点击一次更新即可,不需要重复提交)</p> 
<p><img src="https://images2.imgbox.com/2e/a5/iTn43RI9_o.png" alt="26f2cad01153608fd8695138449ca59.png"></p> 
<p>更新完成后,打开在线隧道列表,此时可以看到公网地址已经发生变化,地址名称也变成了固定的二级子域名名称的域名</p> 
<p><img src="https://images2.imgbox.com/fb/ae/BVVtH1Km_o.png" alt="0a6477016cf652bad6bdc7a406fb257.png"></p> 
<p>最后，我们使用固定的公网https地址在任何浏览器打开访问，可以看到访问Stable Diffusion Web UI成功了这样一个固定且永久不变的公网地址就设置好了。</p> 
<p><img src="https://images2.imgbox.com/6e/26/3oPD4kwr_o.png" alt="c8884f8b895c7b27f2853c95e6c89ae.png"></p> 
<p>以上就是如何在Windows本地部署Stable Diffusion Web UI，并结合cpolar内网穿透工具实现远程访问使用的全部流程，感谢您的观看，有任何问题欢迎留言交流。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5b7c30a9c877075b8c9bd8b8b01f8e4f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LP2801A/B/C/D/E 输出电压可调3.3V～24V，输出电流100mA～400mA</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/017be3778d99a41098dc685015891a47/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">旧衣回收小程序系统，为市场发展提供新模式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>