<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Rust Webå¼€å‘å…¥é—¨æŒ‡å—ï¼šæ„å»ºå®‰å…¨é«˜æ•ˆçš„Webåº”ç”¨ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2b0a0c028b21695a6c61be57ca192ab1/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="Rust Webå¼€å‘å…¥é—¨æŒ‡å—ï¼šæ„å»ºå®‰å…¨é«˜æ•ˆçš„Webåº”ç”¨">
  <meta property="og:description" content="ğŸ’‚ ä¸ªäººç½‘ç«™:ã€ æ‘¸é±¼æ¸¸æˆã€‘ã€ç¥çº§ä»£ç èµ„æºç½‘ç«™ã€‘ã€å·¥å…·å¤§å…¨ã€‘ğŸ¤Ÿ ä¸€ç«™å¼è½»æ¾æ„å»ºå°ç¨‹åºã€Webç½‘ç«™ã€ç§»åŠ¨åº”ç”¨ï¼šğŸ‘‰æ³¨å†Œåœ°å€ğŸ¤Ÿ åŸºäºWebç«¯æ‰“é€ çš„ï¼šğŸ‘‰è½»é‡åŒ–å·¥å…·åˆ›ä½œå¹³å°ğŸ’… æƒ³å¯»æ‰¾å…±åŒå­¦ä¹ äº¤æµï¼Œæ‘¸é±¼åˆ’æ°´çš„å°ä¼™ä¼´ï¼Œè¯·ç‚¹å‡»ã€å…¨æ ˆæŠ€æœ¯äº¤æµç¾¤ã€‘ å¼•è¨€ éšç€Rustè¯­è¨€çš„æµè¡Œå’Œæˆç†Ÿï¼Œå®ƒä½œä¸ºä¸€é—¨ç³»ç»Ÿçº§çš„ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨Webå¼€å‘é¢†åŸŸä¹Ÿé€æ¸å±•ç°å‡ºå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨Rustè¯­è¨€è¿›è¡ŒWebå¼€å‘ï¼ŒåŒ…æ‹¬é€‰æ‹©åˆé€‚çš„Webæ¡†æ¶ã€å¤„ç†HTTPè¯·æ±‚ã€æ•°æ®åº“æ“ä½œä»¥åŠç¼–å†™RESTful APIã€‚æˆ‘ä»¬å°†ä¸»è¦ä»¥Actix-webä½œä¸ºç¤ºä¾‹æ¡†æ¶ï¼Œæ¼”ç¤ºå¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•ä½†å®Œæ•´çš„Webåº”ç”¨ã€‚
ä¸€ã€å‡†å¤‡å·¥ä½œ åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…äº†Rustç¼–ç¨‹è¯­è¨€çš„å·¥å…·é“¾ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥å’Œå®‰è£…ï¼š
curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…ï¼š
rustc --version cargo --version æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨Cargoåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Rusté¡¹ç›®ï¼š
cargo new rust_web_app cd rust_web_app äºŒã€é€‰æ‹©Webæ¡†æ¶ï¼šActix-web Actix-web æ˜¯ä¸€ä¸ªåŸºäºActoræ¨¡å‹çš„é«˜æ€§èƒ½Webæ¡†æ¶ï¼Œéå¸¸é€‚åˆæ„å»ºå¹¶å‘å’Œé«˜ååé‡çš„Webåº”ç”¨ã€‚å®ƒæä¾›äº†å¼‚æ­¥å¤„ç†ã€ä¸­é—´ä»¶æ”¯æŒå’Œå¼ºå¤§çš„è·¯ç”±ç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ­å»ºç¨³å¥çš„WebæœåŠ¡ã€‚
æ·»åŠ ä¾èµ– ç¼–è¾‘é¡¹ç›®çš„ Cargo.toml æ–‡ä»¶ï¼Œæ·»åŠ  actix-web ä½œä¸ºä¾èµ–ï¼š
[dependencies] actix-web = &#34;4.0&#34; ç¼–å†™åŸºæœ¬çš„Webåº”ç”¨ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å•çš„Hello Worldåº”ç”¨ï¼Œå¹¶å¯åŠ¨ä¸€ä¸ªHTTPæœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ï¼š
use actix_web::{get, web, App, HttpServer, Responder}; // å®šä¹‰å¤„ç†å™¨å‡½æ•° #[get(&#34;/&#34;)] async fn index() -&gt; impl Responder { &#34;Hello, Rust!&#34; } #[actix_web::main] async fn main() -&gt; std::io::Result&lt;()&gt; { // å¯åŠ¨HTTPæœåŠ¡å™¨å¹¶ç»‘å®šåˆ°æœ¬åœ°åœ°å€çš„8080ç«¯å£ HttpServer::new(|| { App::new() // æ³¨å†Œè·¯ç”± .">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-25T16:25:14+08:00">
    <meta property="article:modified_time" content="2024-06-25T16:25:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Rust Webå¼€å‘å…¥é—¨æŒ‡å—ï¼šæ„å»ºå®‰å…¨é«˜æ•ˆçš„Webåº”ç”¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <ul><li><strong>ğŸ’‚ ä¸ªäººç½‘ç«™:ã€ <a href="https://haiyong.site/moyu" rel="nofollow">æ‘¸é±¼æ¸¸æˆ</a>ã€‘ã€<a href="https://code.haiyong.site" rel="nofollow">ç¥çº§ä»£ç èµ„æºç½‘ç«™</a>ã€‘ã€<a href="https://nav.haiyong.site/" rel="nofollow">å·¥å…·å¤§å…¨</a>ã€‘</strong></li><li><strong>ğŸ¤Ÿ ä¸€ç«™å¼è½»æ¾æ„å»ºå°ç¨‹åºã€Webç½‘ç«™ã€ç§»åŠ¨åº”ç”¨ï¼šğŸ‘‰<a href="https://cloud.memfiredb.com/auth/login?from=5VkUHt" rel="nofollow">æ³¨å†Œåœ°å€</a></strong></li><li><strong>ğŸ¤Ÿ åŸºäºWebç«¯æ‰“é€ çš„ï¼šğŸ‘‰<a href="https://sso.mapmost.com/#/login?source_inviter=ryIXGCHG" rel="nofollow">è½»é‡åŒ–å·¥å…·åˆ›ä½œå¹³å°</a></strong></li><li><strong>ğŸ’… æƒ³å¯»æ‰¾å…±åŒå­¦ä¹ äº¤æµï¼Œæ‘¸é±¼åˆ’æ°´çš„å°ä¼™ä¼´ï¼Œè¯·ç‚¹å‡»ã€<a href="https://haiyong.site/chat/" rel="nofollow">å…¨æ ˆæŠ€æœ¯äº¤æµç¾¤</a>ã€‘</strong></li></ul> 
</blockquote> 
<h5><a id="_5"></a>å¼•è¨€</h5> 
<p>éšç€Rustè¯­è¨€çš„æµè¡Œå’Œæˆç†Ÿï¼Œå®ƒä½œä¸ºä¸€é—¨ç³»ç»Ÿçº§çš„ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨Webå¼€å‘é¢†åŸŸä¹Ÿé€æ¸å±•ç°å‡ºå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨Rustè¯­è¨€è¿›è¡ŒWebå¼€å‘ï¼ŒåŒ…æ‹¬é€‰æ‹©åˆé€‚çš„Webæ¡†æ¶ã€å¤„ç†HTTPè¯·æ±‚ã€æ•°æ®åº“æ“ä½œä»¥åŠç¼–å†™RESTful APIã€‚æˆ‘ä»¬å°†ä¸»è¦ä»¥Actix-webä½œä¸ºç¤ºä¾‹æ¡†æ¶ï¼Œæ¼”ç¤ºå¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•ä½†å®Œæ•´çš„Webåº”ç”¨ã€‚</p> 
<h5><a id="_9"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h5> 
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…äº†Rustç¼–ç¨‹è¯­è¨€çš„å·¥å…·é“¾ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥å’Œå®‰è£…ï¼š</p> 
<pre><code class="prism language-bash"><span class="token function">curl</span> <span class="token parameter variable">--proto</span> <span class="token string">'=https'</span> <span class="token parameter variable">--tlsv1.2</span> <span class="token parameter variable">-sSf</span> https://sh.rustup.rs <span class="token operator">|</span> <span class="token function">sh</span>
</code></pre> 
<p>å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…ï¼š</p> 
<pre><code class="prism language-bash">rustc <span class="token parameter variable">--version</span>
<span class="token function">cargo</span> <span class="token parameter variable">--version</span>
</code></pre> 
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨Cargoåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Rusté¡¹ç›®ï¼š</p> 
<pre><code class="prism language-bash"><span class="token function">cargo</span> new rust_web_app
<span class="token builtin class-name">cd</span> rust_web_app
</code></pre> 
<h5><a id="WebActixweb_31"></a>äºŒã€é€‰æ‹©Webæ¡†æ¶ï¼šActix-web</h5> 
<p>Actix-web æ˜¯ä¸€ä¸ªåŸºäºActoræ¨¡å‹çš„é«˜æ€§èƒ½Webæ¡†æ¶ï¼Œéå¸¸é€‚åˆæ„å»ºå¹¶å‘å’Œé«˜ååé‡çš„Webåº”ç”¨ã€‚å®ƒæä¾›äº†å¼‚æ­¥å¤„ç†ã€ä¸­é—´ä»¶æ”¯æŒå’Œå¼ºå¤§çš„è·¯ç”±ç³»ç»Ÿï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿæ­å»ºç¨³å¥çš„WebæœåŠ¡ã€‚</p> 
<h6><a id="_35"></a>æ·»åŠ ä¾èµ–</h6> 
<p>ç¼–è¾‘é¡¹ç›®çš„ <code>Cargo.toml</code> æ–‡ä»¶ï¼Œæ·»åŠ  <code>actix-web</code> ä½œä¸ºä¾èµ–ï¼š</p> 
<pre><code class="prism language-toml">[dependencies]
actix-web = "4.0"
</code></pre> 
<h6><a id="Web_44"></a>ç¼–å†™åŸºæœ¬çš„Webåº”ç”¨</h6> 
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å•çš„Hello Worldåº”ç”¨ï¼Œå¹¶å¯åŠ¨ä¸€ä¸ªHTTPæœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">actix_web<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>get<span class="token punctuation">,</span> web<span class="token punctuation">,</span> <span class="token class-name">App</span><span class="token punctuation">,</span> <span class="token class-name">HttpServer</span><span class="token punctuation">,</span> <span class="token class-name">Responder</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®šä¹‰å¤„ç†å™¨å‡½æ•°</span>
<span class="token attribute attr-name">#[get(<span class="token string">"/"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">impl</span> <span class="token class-name">Responder</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"Hello, Rust!"</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[actix_web::main]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">std<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// å¯åŠ¨HTTPæœåŠ¡å™¨å¹¶ç»‘å®šåˆ°æœ¬åœ°åœ°å€çš„8080ç«¯å£</span>
    <span class="token class-name">HttpServer</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">App</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// æ³¨å†Œè·¯ç”±</span>
            <span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1:8080"</span><span class="token punctuation">)</span><span class="token operator">?</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">await</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å¤„ç†å™¨å‡½æ•° <code>index()</code>ï¼Œå¹¶åœ¨ <code>main()</code> å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªActix-webåº”ç”¨ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ° <code>127.0.0.1:8080</code> åœ°å€ä¸Šã€‚</p> 
<h5><a id="Diesel_73"></a>ä¸‰ã€æ•°æ®åº“æ“ä½œï¼šä½¿ç”¨Diesel</h5> 
<p>åœ¨å®é™…çš„Webåº”ç”¨ä¸­ï¼Œç»å¸¸éœ€è¦ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚Diesel æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œæä¾›äº†ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œï¼Œä¸Rustè¯­è¨€ç´§å¯†é›†æˆã€‚</p> 
<h6><a id="Diesel_77"></a>æ·»åŠ Dieselä¾èµ–</h6> 
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>Cargo.toml</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>diesel</code> å’Œå¯¹åº”çš„æ•°æ®åº“é©±åŠ¨ä¾èµ–ã€‚è¿™é‡Œä»¥SQLiteä¸ºä¾‹ï¼š</p> 
<pre><code class="prism language-toml">[dependencies]
diesel = { version = "1.4", features = ["sqlite"] }
dotenv = "0.15"
</code></pre> 
<p>åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ  <code>dotenv</code> ä¾èµ–ï¼Œç”¨äºä»ç¯å¢ƒå˜é‡åŠ è½½æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚</p> 
<h6><a id="_89"></a>åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</h6> 
<p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š</p> 
<pre><code>DATABASE_URL=sqlite://./test.db
</code></pre> 
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™æ•°æ®åº“æ“ä½œçš„ç¤ºä¾‹ä»£ç ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>users</code> è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Dieselæ¥åˆ›å»ºã€æŸ¥è¯¢å’Œæ›´æ–°ç”¨æˆ·æ•°æ®ã€‚</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">diesel<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">diesel<span class="token punctuation">::</span>sqlite<span class="token punctuation">::</span></span><span class="token class-name">SqliteConnection</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">dotenv<span class="token punctuation">::</span></span>dotenv<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span></span>env<span class="token punctuation">;</span>

<span class="token comment">// åˆå§‹åŒ–æ•°æ®åº“è¿æ¥</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">establish_connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">SqliteConnection</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">dotenv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> database_url <span class="token operator">=</span> <span class="token namespace">env<span class="token punctuation">::</span></span><span class="token function">var</span><span class="token punctuation">(</span><span class="token string">"DATABASE_URL"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">"DATABASE_URL must be set"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqliteConnection</span><span class="token punctuation">::</span><span class="token function">establish</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>database_url<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">"Error connecting to {}"</span><span class="token punctuation">,</span> database_url<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®šä¹‰æ•°æ®æ¨¡å‹</span>
<span class="token keyword">mod</span> <span class="token module-declaration namespace">schema</span> <span class="token punctuation">{<!-- --></span>
    <span class="token macro property">table!</span> <span class="token punctuation">{<!-- --></span>
        users <span class="token punctuation">{<!-- --></span>
            id <span class="token punctuation">-&gt;</span> <span class="token class-name">Integer</span><span class="token punctuation">,</span>
            name <span class="token punctuation">-&gt;</span> <span class="token class-name">Text</span><span class="token punctuation">,</span>
            email <span class="token punctuation">-&gt;</span> <span class="token class-name">Text</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">use</span> <span class="token namespace">schema<span class="token punctuation">::</span></span>users<span class="token punctuation">;</span>

<span class="token comment">// æ’å…¥æ–°ç”¨æˆ·çš„å‡½æ•°ç¤ºä¾‹</span>
<span class="token keyword">fn</span> <span class="token function-definition function">create_user</span><span class="token punctuation">(</span>conn<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">SqliteConnection</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">usize</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>schema<span class="token punctuation">::</span></span>users<span class="token punctuation">;</span>

    <span class="token namespace">diesel<span class="token punctuation">::</span></span><span class="token function">insert_into</span><span class="token punctuation">(</span><span class="token namespace">users<span class="token punctuation">::</span></span>table<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token namespace">users<span class="token punctuation">::</span></span>name<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token namespace">users<span class="token punctuation">::</span></span>email<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">"Error inserting user"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="RESTful_API_138"></a>å››ã€ç¼–å†™RESTful API</h5> 
<p>åœ¨ç°ä»£çš„Webåº”ç”¨ä¸­ï¼ŒRESTful APIæ˜¯å¸¸è§çš„æ¥å£è®¾è®¡é£æ ¼ã€‚Actix-webæä¾›äº†å¼ºå¤§çš„è·¯ç”±å’Œå¼‚æ­¥å¤„ç†èƒ½åŠ›ï¼Œä½¿å¾—ç¼–å†™RESTful APIå˜å¾—éå¸¸ç®€å•å’Œé«˜æ•ˆã€‚</p> 
<h6><a id="RESTful_API_142"></a>ç¼–å†™RESTful API</h6> 
<p>æˆ‘ä»¬å¯ä»¥æ‰©å±•æˆ‘ä»¬ä¹‹å‰çš„Actix-webåº”ç”¨ï¼Œæ·»åŠ ä¸€ä¸ªç®€å•çš„RESTful APIæ¥ç®¡ç†ç”¨æˆ·èµ„æºï¼š</p> 
<pre><code class="prism language-rust"><span class="token keyword">use</span> <span class="token namespace">actix_web<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span>get<span class="token punctuation">,</span> post<span class="token punctuation">,</span> web<span class="token punctuation">,</span> <span class="token class-name">App</span><span class="token punctuation">,</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">,</span> <span class="token class-name">HttpServer</span><span class="token punctuation">,</span> <span class="token class-name">Responder</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">serde<span class="token punctuation">::</span></span><span class="token punctuation">{<!-- --></span><span class="token class-name">Deserialize</span><span class="token punctuation">,</span> <span class="token class-name">Serialize</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å®šä¹‰ç”¨æˆ·æ•°æ®æ¨¡å‹</span>
<span class="token attribute attr-name">#[derive(Debug, Serialize, Deserialize)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{<!-- --></span>
    name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    email<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…¨å±€çŠ¶æ€ç»“æ„ä½“</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">AppState</span> <span class="token punctuation">{<!-- --></span>
    users<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// è·å–æ‰€æœ‰ç”¨æˆ·çš„å¤„ç†å™¨å‡½æ•°</span>
<span class="token attribute attr-name">#[get(<span class="token string">"/users"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">get_users</span><span class="token punctuation">(</span>state<span class="token punctuation">:</span> <span class="token namespace">web<span class="token punctuation">::</span></span><span class="token class-name">Data</span><span class="token operator">&lt;</span><span class="token class-name">AppState</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">impl</span> <span class="token class-name">Responder</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">HttpResponse</span><span class="token punctuation">::</span><span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>state<span class="token punctuation">.</span>users<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// åˆ›å»ºæ–°ç”¨æˆ·çš„å¤„ç†å™¨å‡½æ•°</span>
<span class="token attribute attr-name">#[post(<span class="token string">"/users"</span>)]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">create_user</span><span class="token punctuation">(</span>user<span class="token punctuation">:</span> <span class="token namespace">web<span class="token punctuation">::</span></span><span class="token class-name">Json</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> state<span class="token punctuation">:</span> <span class="token namespace">web<span class="token punctuation">::</span></span><span class="token class-name">Data</span><span class="token operator">&lt;</span><span class="token class-name">AppState</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">impl</span> <span class="token class-name">Responder</span> <span class="token punctuation">{<!-- --></span>
    state<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">into_inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HttpResponse</span><span class="token punctuation">::</span><span class="token class-name">Created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>state<span class="token punctuation">.</span>users<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token attribute attr-name">#[actix_web::main]</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token namespace">std<span class="token punctuation">::</span>io<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// åˆå§‹åŒ–åº”ç”¨çŠ¶æ€</span>
    <span class="token keyword">let</span> app_state <span class="token operator">=</span> <span class="token namespace">web<span class="token punctuation">::</span></span><span class="token class-name">Data</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">AppState</span> <span class="token punctuation">{<!-- --></span>
        users<span class="token punctuation">:</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span>
            <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
                name<span class="token punctuation">:</span> <span class="token string">"Alice"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                email<span class="token punctuation">:</span> <span class="token string">"alice@example.com"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
                name<span class="token punctuation">:</span> <span class="token string">"Bob"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                email<span class="token punctuation">:</span> <span class="token string">"bob@example.com"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å¯åŠ¨HTTPæœåŠ¡å™¨</span>
    <span class="token class-name">HttpServer</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token keyword">move</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">App</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">app_data</span><span class="token punctuation">(</span>app_state<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å…±äº«åº”ç”¨çŠ¶æ€</span>
            <span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>get_users<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span>create_user<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1:8080"</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token comment">// ç»‘å®šåˆ°æœ¬åœ°åœ°å€çš„8080ç«¯å£</span>
    <span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">await</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_204"></a>äº”ã€æ€»ç»“</h5> 
<p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨Rustè¯­è¨€å’ŒActix-webæ¡†æ¶æ„å»ºä¸€ä¸ªç®€å•ä½†å®Œæ•´çš„Webåº”ç”¨ã€‚ä»é€‰æ‹©æ¡†æ¶ã€å¤„ç†HTTPè¯·æ±‚ã€æ•°æ®åº“æ“ä½œåˆ°ç¼–å†™RESTful APIï¼Œæˆ‘ä»¬è¦†ç›–äº†Rust Webå¼€å‘çš„åŸºæœ¬çŸ¥è¯†å’Œå®é™…æ“ä½œã€‚Rustä½œä¸ºä¸€é—¨å®‰å…¨ä¸”é«˜æ€§èƒ½çš„è¯­è¨€ï¼Œåœ¨Webå¼€å‘ä¸­å±•ç°å‡ºäº†å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºé«˜æ•ˆã€å®‰å…¨çš„Webåº”ç”¨çš„ç†æƒ³å¹³å°ã€‚éšç€Rustç”Ÿæ€ç³»ç»Ÿçš„ä¸æ–­æˆç†Ÿå’Œä¸°å¯Œï¼Œå®ƒåœ¨Webå¼€å‘ä¸­çš„åº”ç”¨å‰æ™¯å°†æ›´åŠ å¹¿é˜”ã€‚</p> 
<h5><a id="__208"></a>â­ï¸ å¥½ä¹¦æ¨è</h5> 
<p><b>ã€ŠRust Webå¼€å‘ã€‹</b></p> 
<p><img src="https://images2.imgbox.com/ab/bf/4sX5mzA0_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="300"></p> 
<p>ã€å†…å®¹ç®€ä»‹ã€‘</p> 
<p>ä¸»è¦å†…å®¹</p> 
<p>â— åœ¨å¼‚æ­¥ç¯å¢ƒä¸­å¤„ç†å€Ÿç”¨æ£€æŸ¥å™¨<br> â— åˆ›å»ºWeb APIå¹¶å¤„ç†JSON<br> â— ç»„å»ºä¸€ä¸ªç”¨äºRustå¼‚æ­¥å¼€å‘çš„æŠ€æœ¯æ ˆ<br> â— ä¼˜é›…åœ°å¤„ç†é”™è¯¯<br> â— æµ‹è¯•ã€è¿½è¸ªã€è®°å½•å’Œè°ƒè¯•<br> â— åœ¨å¤šä¸ªç¯å¢ƒä¸­éƒ¨ç½²Ruståº”ç”¨</p> 
<p>ğŸ“š äº¬ä¸œè´­ä¹°é“¾æ¥ï¼š<a href="https://item.jd.com/14549308.html" rel="nofollow">ã€ŠRust Webå¼€å‘ã€‹</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/76ad538f38585a770fd8528b092be9e0/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">AIå…¨èƒ½åŠ©æ‰‹ï¼šé©æ–°æœªæ¥ç”Ÿæ´»çš„æ™ºèƒ½ä¼™ä¼´</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/10b9359a41c420e7beb0c495db792c9b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Chromeå¼€å‘è€…å·¥å…·å­¦ä¹ </p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>