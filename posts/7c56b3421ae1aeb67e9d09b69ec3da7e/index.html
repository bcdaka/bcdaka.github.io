<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring AI来了，Java开发者福音 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7c56b3421ae1aeb67e9d09b69ec3da7e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spring AI来了，Java开发者福音">
  <meta property="og:description" content="Spring AI来了，Java生态接入LLM大模型变得更加简单！
SpringAI 今天官宣Spring AI已经上架到Spring Initializr 上，它提供了一种更简洁的方式和AI交互，减轻Java业务中接入LLM模型应用的学习成本，目前在 https://start.spring.io/ 上可以使用并构建。
Spring AI 是一个人工智能工程的应用框架。其目标是将 Spring 生态系统设计原则（例如可移植性和模块化设计）应用于 AI 领域，并推广使用 POJO 作为 AI 领域应用程序的构建块。
Features 跨 AI 提供商的便携式 API 支持聊天、文本到图像和嵌入模型。支持同步和流 API 选项。还支持配置参数访问特定Model。
支持的聊天模型
OpenAIAzure Open AIAmazon Bedrock Anthropic’s ClaudeCohere’s CommandAI21 Labs’ Jurassic-2Meta’s LLama 2Amazon’s Titan Google Vertex AIHuggingFace - HuggingFace上的大量模型，例如Llama2Ollama - 支持本地无GPU情况下运行AI模型 支持的文生图模型
OpenAI with DALL-EStabilityAI 支持的向量模型
OpenAIAzure OpenAIOllamaONNXPostgresMLBedrock CohereBedrock TitanGoogle VertexAI 官方文档：https://spring.io/projects/spring-ai#overview
快速开始 使用IDEA快速新建项目，选择要使用的AI模型依赖
这里我以ollama模型为例
Ollama Ollama帮助我们在本地的电脑上无需GPU（显卡）资源，也能一键构建大模型，并且提供控制台、RestfulAPI方式快速测试和接入Ollama上的大模型。
Ollama支持哪些模型？
Ollama官网：https://ollama.com/library
Tips:
其中gemma就是谷歌Meta近期新发布的模型llama2模型基本不支持中文语言，gemma模型对中文支持比较友好 引入依赖 **Tips：**Spring AI的相关依赖并没有开放在Meven中央仓库，因此需要配置Spring的仓库">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-01T13:32:44+08:00">
    <meta property="article:modified_time" content="2024-03-01T13:32:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring AI来了，Java开发者福音</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>Spring AI来了，Java生态接入LLM大模型变得更加简单！</p> 
</blockquote> 
<h3><a id="SpringAI_3"></a>SpringAI</h3> 
<p>今天官宣Spring AI已经上架到Spring Initializr 上，它提供了一种更简洁的方式和AI交互，减轻Java业务中接入LLM模型应用的学习成本，目前在 https://start.spring.io/ 上可以使用并构建。</p> 
<p>Spring AI 是一个人工智能工程的应用框架。其目标是将 Spring 生态系统设计原则（例如可移植性和模块化设计）应用于 AI 领域，并推广使用 POJO 作为 AI 领域应用程序的构建块。</p> 
 
<p><img src="https://images2.imgbox.com/14/0c/wbt9z3oc_o.png" alt="image-20240301100946943"></p> 
<h3><a id="Features_13"></a>Features</h3> 
<p>跨 AI 提供商的便携式 API 支持聊天、文本到图像和嵌入模型。支持同步和流 API 选项。还支持配置参数访问特定Model。</p> 
<p><strong>支持的聊天模型</strong></p> 
<ul><li>OpenAI</li><li>Azure Open AI</li><li>Amazon Bedrock 
  <ul><li>Anthropic’s Claude</li><li>Cohere’s Command</li><li>AI21 Labs’ Jurassic-2</li><li>Meta’s LLama 2</li><li>Amazon’s Titan</li></ul> </li><li>Google Vertex AI</li><li>HuggingFace - HuggingFace上的大量模型，例如Llama2</li><li>Ollama - 支持本地无GPU情况下运行AI模型</li></ul> 
<p><strong>支持的文生图模型</strong></p> 
<ul><li>OpenAI with DALL-E</li><li>StabilityAI</li></ul> 
<p><strong>支持的向量模型</strong></p> 
<ul><li>OpenAI</li><li>Azure OpenAI</li><li>Ollama</li><li>ONNX</li><li>PostgresML</li><li>Bedrock Cohere</li><li>Bedrock Titan</li><li>Google VertexAI</li></ul> 
<p>官方文档：https://spring.io/projects/spring-ai#overview</p> 
<h3><a id="_57"></a>快速开始</h3> 
<p>使用IDEA快速新建项目，选择要使用的AI模型依赖</p> 
<p><img src="https://images2.imgbox.com/ee/4c/SlrSraly_o.png" alt="image-20240301102503034"></p> 
<p><strong>这里我以ollama模型为例</strong></p> 
<h4><a id="Ollama_67"></a>Ollama</h4> 
<p>Ollama帮助我们在本地的电脑上无需GPU（显卡）资源，也能一键构建大模型，并且提供控制台、RestfulAPI方式快速测试和接入Ollama上的大模型。</p> 
<p><strong>Ollama支持哪些模型？</strong></p> 
<p>Ollama官网：https://ollama.com/library</p> 
<p><img src="https://images2.imgbox.com/e1/00/chy021y3_o.png" alt="image-20240301102823837"></p> 
<p><strong>Tips:</strong></p> 
<ul><li>其中gemma就是谷歌Meta近期新发布的模型</li><li>llama2模型基本不支持中文语言，gemma模型对中文支持比较友好</li></ul> 
<h4><a id="_84"></a>引入依赖</h4> 
<blockquote> 
 <p>**Tips：**Spring AI的相关依赖并没有开放在Meven中央仓库，因此需要配置Spring的仓库</p> 
</blockquote> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-ollama-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-bom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring-ai.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="Ollama_114"></a>启动Ollama模型</h4> 
<p>在本地电脑控制台运行<code>ollama run gemma:2b</code>（这里使用gemma模型）</p> 
<p><img src="https://images2.imgbox.com/fd/a3/MhN4IdKb_o.png" alt="image-20240301103438484"></p> 
<p>第一次运行会先下载模型文件（大概3G，会比较耗时）</p> 
<p>下载完模型资源后会自动启动模型，如上，可以在控制台测试和模型交互。</p> 
<h4><a id="Ollama_126"></a>配置Ollama模型</h4> 
<p>修改此项目的<code>application.yml</code>配置文件，增加如下：</p> 
<pre><code class="prism language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">ai</span><span class="token punctuation">:</span>
    <span class="token key atrule">ollama</span><span class="token punctuation">:</span>
      <span class="token comment">## 默认地址无需配置</span>
      <span class="token key atrule">base-url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">11434</span>
      <span class="token key atrule">chat</span><span class="token punctuation">:</span>
        <span class="token key atrule">model</span><span class="token punctuation">:</span> gemma<span class="token punctuation">:</span>2b
</code></pre> 
<h3><a id="_142"></a>测试</h3> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">SpringAiApplicationTests</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OllamaChatClient</span> chatClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
                鲁迅和周树人是什么关系？
                """</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>chatClient<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/28/bd/xOAZlktL_o.png" alt="image-20240301104343480"></p> 
<h4><a id="_163"></a>流式访问</h4> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">streamChat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 构建一个异步函数，实现手动关闭测试函数</span>
        <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompletableFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
                年终总结
                """</span><span class="token punctuation">;</span>
        <span class="token class-name">PromptTemplate</span> promptTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PromptTemplate</span><span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
                你是一个Java开发工程师，你擅长于写公司年底的工作总结报告，
                根据：{message} 场景写100字的总结报告
                """</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Prompt</span> prompt <span class="token operator">=</span> promptTemplate<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chatClient<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>
                chatResponse <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"response: "</span> <span class="token operator">+</span> chatResponse<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                throwable <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"err: "</span> <span class="token operator">+</span> throwable<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"complete~!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 关闭函数</span>
                    future<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ed/6c/j3pqWBa9_o.png" alt="image-20240301110938340"></p> 
<p><strong>示例代码：</strong> https://github.com/TyCoding/spring-ai</p> 
<p><strong>更多的应用示例关注后续文章哦！</strong></p> 
<h3><a id="_208"></a>推荐项目</h3> 
<ul><li>https://github.com/TyCoding/lang-sora React NextJS全栈快速构建Sora AI Video演示项目</li></ul> 
<h3><a id="_214"></a>合作和联系</h3> 
<ul><li>个人博客：<a href="http://tycoding.cn/" rel="nofollow">http://tycoding.cn</a></li><li>GitHub：https://github.com/tycoding</li><li>微信公众号：程序员涂陌</li><li>微信交流群：公众号后台回复：<code>微信群</code></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/964237c5a5aec70087fe866cbc44c5cf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【工作实践-06】uniapp使用webView</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b241748cb72aed01c14efb09c0e4033b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL进阶（日志）——MySQL的日志 &amp; bin log (归档日志) &amp; 事务日志redo log(重做日志) &amp; undo log(回滚日志)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>