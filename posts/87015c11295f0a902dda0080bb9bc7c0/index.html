<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>超级详细Spring AI&#43;ChatGPT（java接入OpenAI大模型） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/87015c11295f0a902dda0080bb9bc7c0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="超级详细Spring AI&#43;ChatGPT（java接入OpenAI大模型）">
  <meta property="og:description" content="Spring AI 对接各种AI大模型（AI工程领域的应用程序框架）
前期准备 API-Key:sk-3sfER03LDLG3SDFsdlwe283JSdw023lkrmrHDND32fmREKFD
（格式长这样，这个不可用）
免费使用
🚀申请领取内测免费API Key免费版支持gpt-3.5-turbo, embedding, gpt-4。其中gpt-4由于价格过高，每24小时限制10次调用，且不支持流式传输。需要更稳定快速的gpt-4请使用付费版。转发Host1: https://api.chatanywhere.tech (国内中转，延时更低，host1和host2二选一)转发Host2: https://api.chatanywhere.com.cn (国内中转，延时更低，host1和host2二选一)转发Host3: https://api.chatanywhere.cn (国外使用,国内需要全局代理) 创建项目 ​
​
pom文件配置 &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;3.2.5&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.zzq&lt;/groupId&gt; &lt;artifactId&gt;spring-ai-chat01&lt;/artifactId&gt; &lt;!-- 快照版本--&gt; &lt;version&gt;1.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring-ai-chat01&lt;/name&gt; &lt;description&gt;spring-ai-chat01&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;17&lt;/java.version&gt; &lt;spring-ai.version&gt;1.0.0-SNAPSHOT&lt;/spring-ai.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- spring ai-starter依赖 启动依赖--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt; &lt;artifactId&gt;spring-ai-openai-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;scope&gt;runtime&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-04T10:39:33+08:00">
    <meta property="article:modified_time" content="2024-06-04T10:39:33+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">超级详细Spring AI&#43;ChatGPT（java接入OpenAI大模型）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="color:#fe2c24;"><strong>Spring AI</strong></span></h2> 
<p>对接各种AI大模型（AI工程领域的应用程序框架）</p> 
<p><img alt="" height="481" src="https://images2.imgbox.com/47/97/dB0eehLo_o.png" width="1010"><img alt="" height="400" src="https://images2.imgbox.com/13/2b/z8wULcBu_o.png" width="697"></p> 
<p><img alt="" height="386" src="https://images2.imgbox.com/9a/09/Cic2l9Ml_o.png" width="983"></p> 
<p><img alt="" height="387" src="https://images2.imgbox.com/ed/da/jRFMZjMD_o.png" width="959"></p> 
<p><img alt="" height="362" src="https://images2.imgbox.com/79/99/fPEuO5CV_o.png" width="967"></p> 
<p><img alt="" height="191" src="https://images2.imgbox.com/dd/72/ZBqxSaw2_o.png" width="957"></p> 
<h2><span style="color:#fe2c24;"><strong>前期准备</strong></span></h2> 
<p><img alt="" height="180" src="https://images2.imgbox.com/2a/d4/fs2g96y0_o.png" width="886"></p> 
<p><span style="color:#ff9900;"><strong>API-Key:</strong></span><span style="color:#956fe7;"><strong>sk-3sfER03LDLG3SDFsdlwe283JSdw023lkrmrHDND32fmREKFD</strong></span></p> 
<p><span style="color:#956fe7;"><strong>（格式长这样，这个不可用）</strong></span></p> 
<p id="免费使用">免费使用</p> 
<ul><li><strong>🚀<strong><strong><strong><a href="https://api.chatanywhere.org/v1/oauth/free/github/render" rel="nofollow" title="申请领取内测免费API Key">申请领取内测免费API Key</a></strong></strong></strong></strong></li><li>免费版支持gpt-3.5-turbo, embedding, gpt-4。其中gpt-4由于价格过高，每24小时限制10次调用，且不支持流式传输。需要更稳定快速的gpt-4请使用付费版。</li><li><strong>转发Host1: <code>https://api.chatanywhere.tech</code> (国内中转，延时更低，host1和host2二选一)</strong></li><li><strong>转发Host2: <code>https://api.chatanywhere.com.cn</code> (国内中转，延时更低，host1和host2二选一)</strong></li><li><strong>转发Host3: <code>https://api.chatanywhere.cn</code> (国外使用,国内需要全局代理)</strong></li></ul> 
<h2>创建项目</h2> 
<p><img alt="" height="911" src="https://images2.imgbox.com/8a/7e/XASLe9v1_o.png" width="1160">​</p> 
<p><img alt="" height="915" src="https://images2.imgbox.com/bd/8d/1PQjTiYm_o.png" width="1182">​</p> 
<h2>pom文件配置</h2> 
<div> 
 <pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.2.5&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.zzq&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-chat01&lt;/artifactId&gt;
    &lt;!--        快照版本--&gt;
    &lt;version&gt;1.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;spring-ai-chat01&lt;/name&gt;
    &lt;description&gt;spring-ai-chat01&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
        &lt;spring-ai.version&gt;1.0.0-SNAPSHOT&lt;/spring-ai.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
&lt;!--        spring ai-starter依赖 启动依赖--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
            &lt;artifactId&gt;spring-ai-openai-spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;!--    继承一个父项目spring-ai-bom--&gt;
    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
                &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt;
                &lt;version&gt;${spring-ai.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;!--    配置本项目的maven仓库  因为maven中心仓库还没有更新spring ai的jar包--&gt;
&lt;!--里程碑版本仓库--&gt;
    &lt;!--    &lt;repositories&gt;--&gt;
&lt;!--        &lt;repository&gt;--&gt;
&lt;!--            &lt;id&gt;spring-milestones&lt;/id&gt;--&gt;
&lt;!--            &lt;name&gt;Spring Milestones&lt;/name&gt;--&gt;
&lt;!--            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;--&gt;
&lt;!--            &lt;snapshots&gt;--&gt;
&lt;!--                &lt;enabled&gt;false&lt;/enabled&gt;--&gt;
&lt;!--            &lt;/snapshots&gt;--&gt;
&lt;!--        &lt;/repository&gt;--&gt;
&lt;!--    &lt;/repositories&gt;--&gt;

&lt;!--    快照版本--&gt;
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-snapshot&lt;/id&gt;
            &lt;name&gt;Spring Snapshots&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
            &lt;releases&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/releases&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
&lt;/project&gt;
</code></pre> 
</div> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/db/f0/HO5eKHTm_o.png" width="1200">​</p> 
<h2>配置application文件</h2> 
<p><img alt="" height="682" src="https://images2.imgbox.com/d1/94/gByE6b94_o.png" width="715"></p> 
<p>文件内容： </p> 
<pre><code class="language-XML">spring:
  application:
     name:spring-ai-01-chat
  ai:
    openai:
     api-key: ${OPENAI_API_KEY}
     base-url: ${OPENAI_API_URL}
     chat:
       option:
         #model:gpt-4-32k
         model:gpt-3.5-turbo
         temperature:0.3F</code></pre> 
<p><a href="http://t.csdnimg.cn/32fqr" rel="nofollow" title="http://t.csdnimg.cn/32fqr">http://t.csdnimg.cn/32fqr</a>小白如何设置openai api key的环境变量</p> 
<p>controller文件内容：</p> 
<h2>生成文字</h2> 
<pre><code class="language-java">package com.zzq.controller;
 
import jakarta.annotation.Resource;
import org.springframework.ai.chat.ChatResponse;
import org.springframework.ai.chat.prompt.Prompt;
import org.springframework.ai.openai.OpenAiChatClient;
import org.springframework.ai.openai.OpenAiChatOptions;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import reactor.core.publisher.Flux;
 
@RestController
public class ChatController {
    /**
     * OpenAi自动装配，可以直接注入使用
     */
    @Resource
    private OpenAiChatClient openAiChatClient;
 
    /**
     * 调用OpenAi的接口,call方法为同步的api
     * @param msg 你要问的问题
     * @return
     */
    @RequestMapping("/ai/chat")
    public String chat(@RequestParam("msg") String msg) {
        String called = openAiChatClient.call(msg);
        return called;
    }
 
    /**
     * 调用OpenAi的接口
     * @param msg 你要问的问题
     * @return  Object--json对象
     */
    @RequestMapping ("/ai/chat1")
    public Object chat1(@RequestParam("msg") String msg) {
        ChatResponse response = openAiChatClient.call(new Prompt(msg));
        return response;
//        return response.getResult().getOutput().getContent();//只拿到内容
    }
 
    /**
     * 调用OpenAi的接口
     * @param msg 你要问的问题
     * @return
     */
    @RequestMapping ("/ai/chat3")
    public String chat3(@RequestParam("msg") String msg) {
        //可选参数在yml配置，同时在代码中也配置，那么会以代码为准
        ChatResponse response = openAiChatClient.call(new Prompt(msg, OpenAiChatOptions.builder()
//                .withModel("gpt-4-32k")//使用的模型,32k是参数量//参数量越高，准确率越高
                .withTemperature(0.3F)//温度越高回答越慢，温度越低回答越快
                .build()));
        return response.getResult().getOutput().getContent();
    }
 
    /**
     * 调用OpenAi的接口 stream是流式的api
     * @param msg 你要问的问题
     * @return
     */
    @RequestMapping ("/ai/chat4")
    public Object chat4(@RequestParam("msg") String msg) {
        //可选参数在yml配置，同时在代码中也配置，那么会以代码为准
        Flux&lt;ChatResponse&gt; flux = openAiChatClient.stream(new Prompt(msg, OpenAiChatOptions.builder()
//                .withModel("gpt-3.5")//使用的模型
                .withTemperature(0.3F)//温度越高回答越慢，温度越低回答越快
                .build()));
        flux.toStream().forEach(chatResponse -&gt;{
            System.out.println(chatResponse.getResult().getOutput().getContent());
        });
        return flux.collectList();//数据的序列,一序列的数据，一个一个的数据返回
    }
}
 </code></pre> 
<p>spring-ai-02-image</p> 
<p>application文件内容(代码配置的会覆盖yml文件中的)</p> 
<p><span style="color:#fe2c24;">更改可以生成image的api-key</span></p> 
<p><span style="color:#fe2c24;">画图模型版本</span></p> 
<p>n:1(生成图片两张)</p> 
<p>height:1024(高度)</p> 
<p>width:1024(宽度)</p> 
<p>quality:hd(高清)</p> 
<pre><code class="language-XML">spring:
  application:
     name:spring-ai-02-image
  ai:
    openai:
     api-key: ${OPENAI_API_KEY}
     base-url: ${OPENAI_API_URL}
     image:
        options:
           model:gpt-4-dalle
    </code></pre> 
<p></p> 
<p>controller内容：</p> 
<h2><strong>生成图片</strong></h2> 
<p>图片无法使用流式api</p> 
<pre><code class="language-java">package com.zzq.controller;
import jakarta.annotation.Resource;
import org.springframework.ai.image.ImageOptionsBuilder;
import org.springframework.ai.image.ImagePrompt;
import org.springframework.ai.image.ImageResponse;
import org.springframework.ai.openai.OpenAiImageClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class ImageController {
    @Resource
    private OpenAiImageClient openAiImageClient;

    @RequestMapping("/ai/image")
    private Object image(@RequestParam(value="msg")String msg){
        ImageResponse imageResponse=openAiImageClient.call(new ImagePrompt(msg));
        System.out.println(imageResonse);
//把图片进行业务处理
        String imageUrl=return response.getResult().getOutput().getUrl();

     return response.getResult().getOutput().getUrl();

  /*  @GetMapping("/ai/draw")
    public String drawImage(@RequestParam(value = "msg") String msg){
        ImageResponse response = openAiImageClient.call(new ImagePrompt(msg,
                ImageOptionsBuilder
                        .builder()
                        .withQuality("hd")//高清图像
                        .withModel("dall-e-3") //绘画模型
                        .withN(1) //生成图像的个数
                        .withWidth(1024) //图像宽度 默认值
                        .withHeight(1024) //图像高度 默认值
                        .build()
                )
        );
        //返回结果图片的地址
        return response.getResult().getOutput().getUrl();
*/
    }
}
</code></pre> 
<h2>生成语音</h2> 
<h4>Ai音频转文本</h4> 
<p>spring-ai-03-transcription</p> 
<p><span style="color:#fe2c24;">更改可以生成声音的api-key</span></p> 
<p><span style="color:#fe2c24;">声音模型版本</span></p> 
<p>application文件内容</p> 
<pre><code class="language-XML">spring:
  application:
     name:spring-ai-03-trascription
  ai:
    openai:
     api-key: ${OPENAI_API_KEY}
     base-url: ${OPENAI_API_URL}
    </code></pre> 
<pre><code class="language-java">import jakarta.annotation.Resource;
import org.springframework.ai.openai.OpenAiAudioSpeechClient;
import org.springframework.ai.openai.OpenAiAudioTranscriptionClient;
import org.springframework.core.io.ClassPathResource;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import static com.ysl.utisl.save2File.save2File;


@RestController
public class TranscriptionController {
    @Resource
    private OpenAiudioTranscriptionClient openAiAudioTranscriptionClient;
    @RequestMapping(value="/ai/transcription")
    public Object transcription(){
          org,springframework.core.io.Resourse audioFile = new ClassPathResourse("文件名jfk.mp3")
    String called = openAiAudioTranscriptiomClient.call(audioFile)
    System.out.println(called);
    return called;
}

/*
@RestController
public class TranscriptionController {
    //将音频转文字时使用
    @Resource
    private OpenAiAudioTranscriptionClient transcriptionClient;
    //将文字转语音时使用
    @Resource
    private OpenAiAudioSpeechClient speechClient;

    /**
     * 将音频转文字
     * @return
     */
   /* @RequestMapping("/ai/transcription")
    public Object transcription() {
    //读取的是磁盘的路径
    //FileSystemResource audioFile = new FileSystemResource("C:\\Users\\DELL\\Desktop\\luyin.m4a");
        //读取的是classpath静态资源下的文件
        ClassPathResource audioFile = new ClassPathResource("luyin.m4a");
        String call = transcriptionClient.call(audioFile);
        System.out.println(call);
        return call;
    }

    /**
     * 将文字转音频
     * @return
     */
   /* @RequestMapping("/ai/tts")
    public Object tts() {
        String text = "Spring AI 是 AI 工程的应用框架。其目标是将 Spring 生态系统设计原则（如可移植性和模块化设计）应用于 AI，并推广使用 POJO 作为 AI 领域应用程序的构建块。 跨 AI 提供商的可移植 API 支持，适用于聊天、文本到图像和嵌入模型。支持同步和流 API 选项。还支持下拉以访问特定于模型的功能";
        byte[] bytes = speechClient.call(text);
        save2File("C:\\Users\\DELL\\Desktop\\test.mp3",bytes);
        return "OK";
    }
*/
/*

@RequestMapping("/ai/tts")
    public Object tts() {
        String text = "Spring AI 是 AI 工程的应用框架。其目标是将 Spring 生态系统设计原则（如可移植性和模块化设计）应用于 AI，并推广使用 POJO 作为 AI 领域应用程序的构建块。 跨 AI 提供商的可移植 API 支持，适用于聊天、文本到图像和嵌入模型。支持同步和流 API 选项。还支持下拉以访问特定于模型的功能";
        byte[] bytes = openAiAudioSpeechClient..call(text);
        FileUtilssave2File("C:\\Users\\DELL\\Desktop\\test.mp3",bytes);
        return "OK";
}
*/

}
</code></pre> 
<h2>Spring Ai---多模态</h2> 
<p>多模态API</p> 
<p>多模态是指模型同时理解和处理来自各种来源信息的能力，包括文本、图像、音频和其他数据格式</p> 
<p>多模型大语言（LLM）特征使模型能够结合其他模态（如图像、音频或视频）来处理和生成文本</p> 
<p>spring-ai-05-multimodel</p> 
<pre><code class="language-java">package com.zzq.controller;

import jakarta.annotation.Resource;
import org.springframework.ai.chat.ChatClient;
import org.springframework.ai.chat.ChatResponse;
import org.springframework.ai.chat.messages.Media;
import org.springframework.ai.chat.messages.UserMessage;
import org.springframework.ai.chat.prompt.Prompt;
import org.springframework.ai.openai.OpenAiChatOptions;
import org.springframework.ai.openai.api.OpenAiApi;
import org.springframework.util.MimeTypeUtils;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
public class MultiModelController {
@Resource
    private ChatClient chatClient;
@RequestMapping(value = "/ai/multi")
    public  Object multi(String msg,String imageUrl){
    UserMessage userMessage=new UserMessage(msg,
            List.of(new Media(MimeTypeUtils.IMAGE_PNG,imageUrl))
            );
    ChatResponse response=chatClient.call(new Prompt(List.of(userMessage),
            OpenAiChatOptions.builder()
                    .withModel(OpenAiApi.ChatModel.GPT_4_VISION_PREVIEW.getValue())
                    .build()
            ));
    return response.getResult().getOutput().getContent();
}
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bce5da055f5e5f76512ee09cd1e13f3d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">程序性能优化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51f8c0b111cefb0d534c1436efe6fe04/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;第二十三弹---深入理解STL中list的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>