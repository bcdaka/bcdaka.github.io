<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Stable Diffusion【基础篇】：降噪强度（denoising strength） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b427300f51e5369b179a03ad58439195/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Stable Diffusion【基础篇】：降噪强度（denoising strength）">
  <meta property="og:description" content="大家好，我是程序员晓晓。
提到降噪强度（denoising strength），大家一定不会陌生，这个参数是图生图中最关键的参数之一。今天在Stable Diffusion Art网站看到一篇介绍降噪强度（denoising strength）的文章（地址：https://stable-diffusion-art.com/denoising-strength/），个人觉得对大家理解降噪强度这个参数非常有帮助，所以这里整理出来，希望能帮助到大家。
在这里说一点题外话，不管是我们学习Stable Diffusion还是其他的AI绘画工具，个人认为有两点极为重要，第一点是基础知识的学习，需要我们不断强加和精进。第二点是亲自动手实践操作，只有多动手实践才能把自己看到想到的东西变成真正是自己的成果。后续关于Stable Diffusion的基础篇、进阶篇等我仍然会不定时保持更新。
一. 图生图实现原理
图生图方法首先是由 SDEdit 所提出的。SDEdit可以应用于任何的扩散模型。因此我们在Stable Diffusion中也有了图生图的功能。
图生图功能使用一张图片与一段文字指令共同作为输入。生成的图像将受到这两个输入的共同调节作用。比如，使用下面这张初级草图以及一段指令 ”photo of perfect green apple with stem, water droplets, dramatic lighting&#34; 作为输入，图生图功能会将其转化为一张很专业的绘画。
下面介绍其具体生成的过程。
【第一步】：输入的图片会被编码至潜在空间中。
【第二步】：我们会向其添加噪声。通过在SD工具中设置降噪强度（Denoising strength）可以控制究竟要添加多少噪声到原始输入图像中去（潜在空间）。如果这个值设置为0，不会有任何噪声添加进去，如果是1则会向其添加最大量的噪声以使其成为一个潜在空间中完全随机的张量。
【第三步】噪声预测器将上一步处理后的潜在空间图像与文字指令作为输入传入其U-Net网络，并给出预测应减去的潜在空间噪声张量。
【第四步】将这个潜空间噪声从潜空间初始图像中减去，得到潜空间中新的图像。
第三步与第四步将根据你设置的采样步数（sampling steps）重复特定次数，比如20次。
【第五步】VAE解码器将最后得到的潜在空间图像恢复为像素空间的图像，这也是图生图中最终得到的图像。
现在我们知道图生图究竟是什么了，他所做的就是将初始的潜在空间图像设置为输入图片与一些噪声的混合。如果你将降噪强度（denoising strength）设置为1，那你获得的图片其实就等价于纯粹使用文本指令运行文本生成图片工具所得到的结果，因为此时这两种功能使用的初始潜在空间图像都是一个完全随机的噪声图。
我们了解了图生图的实现原理，对于降噪强度，我们有以下的认识。
（1）降噪强度决定在采样步骤之前向图像添加多少噪声。
（2）降噪强度的取值范围为0到1。0表示输入图像中不添加噪声。1表示输入图像完全被噪声替换。
（3）降噪强度可以理解为保留原始图像和创建全新图像之间的平衡。降噪强度越高，图像变化越大。
二. 图生图中降噪强度
在图生图模块上传一张图片到图像画布。
单击【生成】按钮旁边【CLIP反推】按钮。此功能会使用 CLIP 模型来反推图像的提示词填充到提示词区域。单击【生成】按钮生成新的图像。
我们通过更改降噪强度的值来调整变化量。降噪强度值越高，图片变化越大。
0：没有变化。
0.2：轻微变化。
0.6：大变化。
1.0：非常大的变化。
三. 局部重绘(Inpainting)中降噪强度
局部重绘(Inpainting)实际上只是图生图的一种特殊情况。噪点会添加到您想要修复的图像部分。噪声量同样由降噪强度控制。
局部重绘(Inpainting)中降噪强度的效果与图生图类似：值越高，图像变化越大。
假设您想重新生成上一张图像的脸部。
以下是改变降噪强度的效果。
局部重绘中降噪强度设置需要注意的几点
（1）局部重绘时不应将降噪强度设置得太高。否则，生成的图片重绘部分与图片的其余部分不连贯。
（2）有多种方法可以在局部重绘中使用高降噪强度。
使用修复检查点模型
使用 ControlNet
四. ComfyUI中降噪强度
ComfyUI中更改降噪强度的效果与SD Web UI 中相同。您可以更改 KSampler节点中的降噪强度。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-19T13:50:57+08:00">
    <meta property="article:modified_time" content="2024-02-19T13:50:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Stable Diffusion【基础篇】：降噪强度（denoising strength）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>大家好，我是程序员晓晓。</p> 
<p>提到降噪强度（denoising strength），大家一定不会陌生，这个参数是图生图中最关键的参数之一。今天在Stable Diffusion Art网站看到一篇介绍降噪强度（denoising strength）的文章（地址：https://stable-diffusion-art.com/denoising-strength/），个人觉得对大家理解降噪强度这个参数非常有帮助，所以这里整理出来，希望能帮助到大家。</p> 
<p>在这里说一点题外话，不管是我们学习Stable Diffusion还是其他的AI绘画工具，个人认为有两点极为重要，第一点是基础知识的学习，需要我们不断强加和精进。第二点是亲自动手实践操作，只有多动手实践才能把自己看到想到的东西变成真正是自己的成果。后续关于Stable Diffusion的基础篇、进阶篇等我仍然会不定时保持更新。</p> 
<p><strong>一. 图生图实现原理</strong></p> 
<p>图生图方法首先是由 SDEdit 所提出的。SDEdit可以应用于任何的扩散模型。因此我们在Stable Diffusion中也有了图生图的功能。</p> 
<p>图生图功能使用一张图片与一段文字指令共同作为输入。生成的图像将受到这两个输入的共同调节作用。比如，使用下面这张初级草图以及一段指令 ”photo of perfect green apple with stem, water droplets, dramatic lighting" 作为输入，图生图功能会将其转化为一张很专业的绘画。</p> 
<p><img src="https://images2.imgbox.com/fe/6b/9LJQjuEP_o.png" alt=""></p> 
<p>下面介绍其具体生成的过程。</p> 
<p>【<strong>第一步</strong>】：输入的图片会被编码至潜在空间中。</p> 
<p><img src="https://images2.imgbox.com/58/4f/8CmXTwJG_o.png" alt=""></p> 
<p>【<strong>第二步</strong>】：我们会向其添加噪声。通过在SD工具中设置降噪强度（Denoising strength）可以控制究竟要添加多少噪声到原始输入图像中去（潜在空间）。如果这个值设置为0，不会有任何噪声添加进去，如果是1则会向其添加最大量的噪声以使其成为一个潜在空间中完全随机的张量。</p> 
<p><img src="https://images2.imgbox.com/03/1c/CElG75Hl_o.png" alt=""></p> 
<p>【<strong>第三步</strong>】噪声预测器将上一步处理后的潜在空间图像与文字指令作为输入传入其U-Net网络，并给出预测应减去的潜在空间噪声张量。</p> 
<p><img src="https://images2.imgbox.com/6c/4b/0nM83NJa_o.png" alt=""></p> 
<p>【<strong>第四步</strong>】将这个潜空间噪声从潜空间初始图像中减去，得到潜空间中新的图像。</p> 
<p><img src="https://images2.imgbox.com/be/69/eaD6naTD_o.png" alt=""></p> 
<p>第三步与第四步将根据你设置的采样步数（sampling steps）重复特定次数，比如20次。</p> 
<p>【<strong>第五步</strong>】VAE解码器将最后得到的潜在空间图像恢复为像素空间的图像，这也是图生图中最终得到的图像。</p> 
<p><img src="https://images2.imgbox.com/ed/61/SwIPg9PV_o.png" alt=""></p> 
<p>现在我们知道图生图究竟是什么了，他所做的就是将初始的潜在空间图像设置为输入图片与一些噪声的混合。如果你将降噪强度（denoising strength）设置为1，那你获得的图片其实就等价于纯粹使用文本指令运行文本生成图片工具所得到的结果，因为此时这两种功能使用的初始潜在空间图像都是一个完全随机的噪声图。</p> 
<p>我们了解了图生图的实现原理，对于降噪强度，我们有以下的认识。</p> 
<p>（1）降噪强度决定在采样步骤之前向图像添加多少噪声。</p> 
<p>（2）降噪强度的取值范围为0到1。0表示输入图像中不添加噪声。1表示输入图像完全被噪声替换。</p> 
<p>（3）降噪强度可以理解为保留原始图像和创建全新图像之间的平衡。降噪强度越高，图像变化越大。</p> 
<p><strong>二. 图生图中降噪强度</strong></p> 
<p>在图生图模块上传一张图片到图像画布。</p> 
<p><img src="https://images2.imgbox.com/8b/aa/kHHFMxwC_o.png" alt=""></p> 
<p>单击【生成】按钮旁边【CLIP反推】按钮。此功能会使用 CLIP 模型来反推图像的提示词填充到提示词区域。单击【生成】按钮生成新的图像。</p> 
<p>我们通过更改降噪强度的值来调整变化量。降噪强度值越高，图片变化越大。</p> 
<ul><li> <p>0：没有变化。</p> </li><li> <p>0.2：轻微变化。</p> </li><li> <p>0.6：大变化。</p> </li><li> <p>1.0：非常大的变化。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/c1/d3/VYoaIvTq_o.png" alt=""></p> 
<p><strong>三. 局部重绘(Inpainting)中降噪强度</strong></p> 
<p>局部重绘(Inpainting)实际上只是图生图的一种特殊情况。噪点会添加到您想要修复的图像部分。噪声量同样由降噪强度控制。</p> 
<p>局部重绘(Inpainting)中降噪强度的效果与图生图类似：值越高，图像变化越大。</p> 
<p>假设您想重新生成上一张图像的脸部。</p> 
<p><img src="https://images2.imgbox.com/6f/91/HgF8RYWl_o.png" alt=""></p> 
<p>以下是改变降噪强度的效果。</p> 
<p><img src="https://images2.imgbox.com/63/94/1dd2aYF1_o.png" alt=""></p> 
<p>局部重绘中降噪强度设置需要注意的几点</p> 
<p>（1）局部重绘时不应将降噪强度设置得太高。否则，生成的图片重绘部分与图片的其余部分不连贯。</p> 
<p>（2）有多种方法可以在局部重绘中使用高降噪强度。</p> 
<ul><li> <p>使用修复检查点模型</p> </li><li> <p>使用 ControlNet</p> </li></ul> 
<p><strong>四. ComfyUI中降噪强度</strong></p> 
<p>ComfyUI中更改降噪强度的效果与SD Web UI 中相同。您可以更改 KSampler节点中的降噪强度。</p> 
<p><img src="https://images2.imgbox.com/11/ea/sFnWU8sQ_o.png" alt=""></p> 
<p><strong>五. 降噪强度的替代方案</strong></p> 
<p>调整图生图的降噪强度并不是生成图像变化的唯一方法。</p> 
<p>您还可以使用Stable Diffusion中的ControlNet控制模型IP-Adapter（图像提示适配器）来生成类似的图像。它可用于生成图像变化、复制面部等。</p> 
<p>好了，今天的分享就到这里了，希望今天分享的内容对大家有所帮助。</p> 
<h3><a id="_109"></a>写在最后</h3> 
<p><font face="幼圆" size="4" color="red">感兴趣的小伙伴，赠送全套AIGC学习资料，包含AI绘画、AI人工智能等前沿科技教程和软件工具，具体看这里。<br> </font><br> <img src="https://images2.imgbox.com/4c/2c/BGAOEVXL_o.png"></p> 
<p>AIGC技术的未来发展前景广阔，随着人工智能技术的不断发展，AIGC技术也将不断提高。未来，AIGC技术将在游戏和计算领域得到更广泛的应用，使游戏和计算系统具有更高效、更智能、更灵活的特性。同时，AIGC技术也将与人工智能技术紧密结合，在更多的领域得到广泛应用，对程序员来说影响至关重要。未来，AIGC技术将继续得到提高，同时也将与人工智能技术紧密结合，在更多的领域得到广泛应用。<br>  <br> <img src="https://images2.imgbox.com/f3/06/4K8x2oaR_o.png" alt="在这里插入图片描述"></p> 
<p><strong>一、AIGC所有方向的学习路线</strong></p> 
<p>AIGC所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照下面的知识点去找对应的学习资源，保证自己学得较为全面。</p> 
<p><img src="https://images2.imgbox.com/a4/e9/Dj0JAiJs_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/41/87/co20YD7K_o.png" alt="在这里插入图片描述"></p> 
<p><strong>二、AIGC必备工具</strong></p> 
<p>工具都帮大家整理好了，安装就可直接上手！<br> <img src="https://images2.imgbox.com/da/54/ayJeaidn_o.png" alt="在这里插入图片描述"></p> 
<p><strong>三、最新AIGC学习笔记</strong></p> 
<p>当我学到一定基础，有自己的理解能力的时候，会去阅读一些前辈整理的书籍或者手写的笔记资料，这些笔记详细记载了他们对一些技术点的理解，这些理解是比较独到，可以学到不一样的思路。<br> <img src="https://images2.imgbox.com/5b/eb/XCgqEHzg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/be/2d/6mjOTjSs_o.png" alt="在这里插入图片描述"></p> 
<p><strong>四、AIGC视频教程合集</strong></p> 
<p>观看全面零基础学习视频，看视频学习是最快捷也是最有效果的方式，跟着视频中老师的思路，从基础到深入，还是很容易入门的。</p> 
<p><img src="https://images2.imgbox.com/97/de/DI0m2nnv_o.png" alt="在这里插入图片描述"></p> 
<p><strong>五、实战案例</strong></p> 
<p>纸上得来终觉浅，要学会跟着视频一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。<br> <img src="https://images2.imgbox.com/87/ac/O4MUgB0Y_o.png" alt="在这里插入图片描述"></p> 
<img src="https://images2.imgbox.com/9a/8e/CDckCmoY_o.png"> 若有侵权，请联系删除
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2a48618e9d2276198c193fdcdcb65db7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android打造丝滑的Activity recreate重建（主题切换）过渡动画</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5efc323825221499a0eccba8072dbca5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android Studio adb无线调试连接问题，告别数据线</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>