<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>吊炸天的 Kafka 图形化工具 Eagle，必须推荐给你！ - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/49a4eeb8378244c3c4ca144a54e993e6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="吊炸天的 Kafka 图形化工具 Eagle，必须推荐给你！">
  <meta property="og:description" content="摘要 Kafka是当下非常流行的消息中间件，据官网透露，已有成千上万的公司在使用它。最近实践了一波Kafka，确实很好很强大。今天我们来从三个方面学习下Kafka：Kafaka在Linux下的安装，Kafka的可视化工具，Kafka和SpringBoot结合使用。希望大家看完后能快速入门Kafka，掌握这个流行的消息中间件！
Kafka简介 Kafka是由LinkedIn公司开发的一款开源分布式消息流平台，由Scala和Java编写。主要作用是为处理实时数据提供一个统一、高吞吐、低延迟的平台，其本质是基于发布订阅模式的消息引擎系统。
Kafka具有以下特性：
高吞吐、低延迟：Kafka收发消息非常快，使用集群处理消息延迟可低至2ms。高扩展性：Kafka可以弹性地扩展和收缩，可以扩展到上千个broker，数十万个partition，每天处理数万亿条消息。永久存储：Kafka可以将数据安全地存储在分布式的，持久的，容错的群集中。高可用性：Kafka在可用区上可以有效地扩展群集，某个节点宕机，集群照样能够正常工作。 Kafka安装 我们将采用Linux下的安装方式，安装环境为CentOS 7.6。此处没有采用Docker来安装部署，个人感觉直接安装更简单（主要是官方没提供Docker镜像）！
首先我们需要下载Kafka的安装包，下载地址：mirrors.bfsu.edu.cn/apache/kafk… 下载完成后将Kafka解压到指定目录： bash复制代码cd /mydata/kafka/ tar -xzf kafka_2.13-2.8.0.tgz 解压完成后进入到解压目录： bash 复制代码cd kafka_2.13-2.8.0 虽然有消息称Kafka即将移除Zookeeper，但是在Kafka最新版本中尚未移除，所以启动Kafka前还是需要先启动Zookeeper； 启动Zookeeper服务，服务将运行在2181端口； bash复制代码# 后台运行服务，并把日志输出到当前文件夹下的zookeeper-out.file文件中 nohup bin/zookeeper-server-start.sh config/zookeeper.properties &gt; zookeeper-out.file 2&gt;&amp;1 &amp; 由于目前Kafka是部署在Linux服务器上的，外网如果想要访问，需要修改Kafka的配置文件config/server.properties，修改下Kafka的监听地址，否则会无法连接； properties复制代码############################# Socket Server Settings ############################# # The address the socket server listens on. It will get the value returned from # java.net.InetAddress.getCanonicalHostName() if not configured. # FORMAT: # listeners = listener_name://host_name:port # EXAMPLE: # listeners = PLAINTEXT://your.host.name:9092 listeners=PLAINTEXT://192.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-08T10:30:11+08:00">
    <meta property="article:modified_time" content="2024-03-08T10:30:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">吊炸天的 Kafka 图形化工具 Eagle，必须推荐给你！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>摘要</h3> 
<p>Kafka是当下非常流行的消息中间件，据官网透露，已有成千上万的公司在使用它。最近实践了一波Kafka，确实很好很强大。今天我们来从三个方面学习下Kafka：Kafaka在Linux下的安装，Kafka的可视化工具，Kafka和SpringBoot结合使用。希望大家看完后能快速入门Kafka，掌握这个流行的消息中间件！</p> 
<h3><a id="Kafka_4"></a>Kafka简介</h3> 
<p>Kafka是由<code>LinkedIn</code>公司开发的一款开源分布式消息流平台，由Scala和Java编写。主要作用是为处理实时数据提供一个统一、高吞吐、低延迟的平台，其本质是基于<code>发布订阅模式</code>的消息引擎系统。</p> 
<p>Kafka具有以下特性：</p> 
<ul><li>高吞吐、低延迟：Kafka收发消息非常快，使用集群处理消息延迟可低至2ms。</li><li>高扩展性：Kafka可以弹性地扩展和收缩，可以扩展到上千个broker，数十万个partition，每天处理数万亿条消息。</li><li>永久存储：Kafka可以将数据安全地存储在分布式的，持久的，容错的群集中。</li><li>高可用性：Kafka在可用区上可以有效地扩展群集，某个节点宕机，集群照样能够正常工作。</li></ul> 
<h3><a id="Kafka_15"></a>Kafka安装</h3> 
<blockquote> 
 <p>我们将采用Linux下的安装方式，安装环境为CentOS 7.6。此处没有采用Docker来安装部署，个人感觉直接安装更简单（主要是官方没提供Docker镜像）！</p> 
</blockquote> 
<ul><li>首先我们需要下载Kafka的安装包，下载地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fmirrors.bfsu.edu.cn%2Fapache%2Fkafka%2F2.8.0%2Fkafka_2.13-2.8.0.tgz" rel="nofollow">mirrors.bfsu.edu.cn/apache/kafk…</a></li></ul> 
<p><img src="https://images2.imgbox.com/ff/57/wiGwEUfU_o.png" alt="img"></p> 
<ul><li>下载完成后将Kafka解压到指定目录：</li></ul> 
<pre><code class="prism language-bash">bash复制代码cd /mydata/kafka/
<span class="token function">tar</span> <span class="token parameter variable">-xzf</span> kafka_2.13-2.8.0.tgz
</code></pre> 
<ul><li>解压完成后进入到解压目录：</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码cd kafka_2.13-2.8.0
</code></pre> 
<ul><li>虽然有消息称Kafka即将移除Zookeeper，但是在Kafka最新版本中尚未移除，所以启动Kafka前还是需要先启动Zookeeper；</li></ul> 
<p><img src="https://images2.imgbox.com/1d/40/VZpIP6jx_o.png" alt="img"></p> 
<ul><li>启动Zookeeper服务，服务将运行在<code>2181</code>端口；</li></ul> 
<pre><code class="prism language-bash">bash复制代码<span class="token comment"># 后台运行服务，并把日志输出到当前文件夹下的zookeeper-out.file文件中</span>
<span class="token function">nohup</span> bin/zookeeper-server-start.sh config/zookeeper.properties <span class="token operator">&gt;</span> zookeeper-out.file <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre> 
<ul><li>由于目前Kafka是部署在Linux服务器上的，外网如果想要访问，需要修改Kafka的配置文件<code>config/server.properties</code>，修改下Kafka的监听地址，否则会无法连接；</li></ul> 
<pre><code class="prism language-properties">properties复制代码############################# Socket Server Settings #############################

# The address the socket server listens on. It will get the value returned from
# java.net.InetAddress.getCanonicalHostName() if not configured.
#   FORMAT:
#     listeners = listener_name://host_name:port
#   EXAMPLE:
#     listeners = PLAINTEXT://your.host.name:9092
listeners=PLAINTEXT://192.168.5.78:9092
</code></pre> 
<ul><li>最后启动Kafka服务，服务将运行在<code>9092</code>端口。</li></ul> 
<pre><code class="prism language-bash">bash复制代码<span class="token comment"># 后台运行服务，并把日志输出到当前文件夹下的kafka-out.file文件中</span>
<span class="token function">nohup</span> bin/kafka-server-start.sh config/server.properties <span class="token operator">&gt;</span> kafka-out.file <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre> 
<h3><a id="Kafka_69"></a>Kafka命令行操作</h3> 
<blockquote> 
 <p>接下来我们使用命令行来操作下Kafka，熟悉下Kafka的使用。</p> 
</blockquote> 
<ul><li>首先创建一个叫<code>consoleTopic</code>的Topic；</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码bin/kafka-topics.sh <span class="token parameter variable">--create</span> <span class="token parameter variable">--topic</span> consoleTopic --bootstrap-server <span class="token number">192.168</span>.5.78:9092
</code></pre> 
<ul><li>接下来查看Topic；</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码bin/kafka-topics.sh <span class="token parameter variable">--describe</span> <span class="token parameter variable">--topic</span> consoleTopic --bootstrap-server <span class="token number">192.168</span>.5.78:9092
</code></pre> 
<ul><li>会显示如下Topic信息；</li></ul> 
<pre><code class="prism language-bash">bash复制代码Topic: consoleTopic	TopicId: tJmxUQ8QRJGlhCSf2ojuGw	PartitionCount: <span class="token number">1</span>	ReplicationFactor: <span class="token number">1</span>	Configs: <span class="token assign-left variable">segment.bytes</span><span class="token operator">=</span><span class="token number">1073741824</span>
	Topic: consoleTopic	Partition: <span class="token number">0</span>	Leader: <span class="token number">0</span>	Replicas: <span class="token number">0</span>	Isr: <span class="token number">0</span>
</code></pre> 
<ul><li>向Topic中发送消息：</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码bin/kafka-console-producer.sh <span class="token parameter variable">--topic</span> consoleTopic --bootstrap-server <span class="token number">192.168</span>.5.78:9092
</code></pre> 
<ul><li>直接在命令行中输入信息即可发送；</li></ul> 
<p><img src="https://images2.imgbox.com/ed/e5/TDbqLR8O_o.png" alt="img"></p> 
<ul><li>重新打开一个窗口，通过如下命令可以从Topic中获取消息：</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码bin/kafka-console-consumer.sh <span class="token parameter variable">--topic</span> consoleTopic --from-beginning --bootstrap-server <span class="token number">192.168</span>.5.78:9092
</code></pre> 
<p><img src="https://images2.imgbox.com/a7/76/4S5mZbl6_o.png" alt="img"></p> 
<h3><a id="Kafka_114"></a>Kafka可视化</h3> 
<blockquote> 
 <p>使用命令行操作Kafka确实有点麻烦，接下来我们试试可视化工具<code>kafka-eagle</code>。</p> 
</blockquote> 
<h4><a id="JDK_118"></a>安装JDK</h4> 
<blockquote> 
 <p>如果你使用的是CentOS的话，默认没有安装完整版的JDK，需要自行安装！</p> 
</blockquote> 
<ul><li>下载JDK 8，下载地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fmirrors.tuna.tsinghua.edu.cn%2FAdoptOpenJDK%2F" rel="nofollow">mirrors.tuna.tsinghua.edu.cn/AdoptOpenJD…</a></li></ul> 
<p><img src="https://images2.imgbox.com/91/e4/KG1Yceyx_o.png" alt="img"></p> 
<ul><li>下载完成后将JDK解压到指定目录；</li></ul> 
<pre><code class="prism language-bash">bash复制代码cd /mydata/java
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> OpenJDK8U-jdk_x64_linux_xxx.tar.gz
<span class="token function">mv</span> OpenJDK8U-jdk_x64_linux_xxx.tar.gz jdk1.8
</code></pre> 
<ul><li>在<code>/etc/profile</code>文件中添加环境变量<code>JAVA_HOME</code>。</li></ul> 
<pre><code class="prism language-bash">bash复制代码vi /etc/profile
<span class="token comment"># 在profile文件中添加</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/mydata/java/jdk1.8
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin
<span class="token comment"># 使修改后的profile文件生效</span>
<span class="token builtin class-name">.</span> /etc/profile
</code></pre> 
<h4><a id="kafkaeagle_145"></a>安装<code>kafka-eagle</code></h4> 
<ul><li>下载<code>kafka-eagle</code>的安装包，下载地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsmartloli%2Fkafka-eagle-bin%2Freleases" rel="nofollow">github.com/smartloli/k…</a></li></ul> 
<p><img src="https://images2.imgbox.com/3b/97/GweW38yk_o.png" alt="img"></p> 
<ul><li>下载完成后将<code>kafka-eagle</code>解压到指定目录；</li></ul> 
<pre><code class="prism language-bash">bash复制代码cd /mydata/kafka/
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> kafka-eagle-web-2.0.5-bin.tar.gz
</code></pre> 
<ul><li>在<code>/etc/profile</code>文件中添加环境变量<code>KE_HOME</code>；</li></ul> 
<pre><code class="prism language-bash">bash复制代码vi /etc/profile
<span class="token comment"># 在profile文件中添加</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">KE_HOME</span><span class="token operator">=</span>/mydata/kafka/kafka-eagle-web-2.0.5
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$KE_HOME</span>/bin
<span class="token comment"># 使修改后的profile文件生效</span>
<span class="token builtin class-name">.</span> /etc/profile
</code></pre> 
<ul><li>安装MySQL并添加数据库<code>ke</code>，<code>kafka-eagle</code>之后会用到它；</li><li>修改配置文件<code>$KE_HOME/conf/system-config.properties</code>，主要是修改Zookeeper的配置和数据库配置，注释掉sqlite配置，改为使用MySQL；</li></ul> 
<pre><code class="prism language-properties">properties复制代码######################################
# multi zookeeper &amp; kafka cluster list
######################################
kafka.eagle.zk.cluster.alias=cluster1
cluster1.zk.list=localhost:2181

######################################
# kafka eagle webui port
######################################
kafka.eagle.webui.port=8048

######################################
# kafka sqlite jdbc driver address
######################################
# kafka.eagle.driver=org.sqlite.JDBC
# kafka.eagle.url=jdbc:sqlite:/hadoop/kafka-eagle/db/ke.db
# kafka.eagle.username=root
# kafka.eagle.password=www.kafka-eagle.org

######################################
# kafka mysql jdbc driver address
######################################
kafka.eagle.driver=com.mysql.cj.jdbc.Driver
kafka.eagle.url=jdbc:mysql://localhost:3306/ke?useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull
kafka.eagle.username=root
kafka.eagle.password=root
</code></pre> 
<ul><li>使用如下命令启动<code>kafka-eagle</code>；</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码<span class="token variable">$KE_HOME</span>/bin/ke.sh start
</code></pre> 
<ul><li>命令执行完成后会显示如下信息，但并不代表服务已经启动成功，还需要等待一会；</li></ul> 
<p><img src="https://images2.imgbox.com/ec/83/BrM0l01R_o.png" alt="img"></p> 
<ul><li>再介绍几个有用的<code>kafka-eagle</code>命令：</li></ul> 
<pre><code class="prism language-bash">bash复制代码<span class="token comment"># 停止服务</span>
<span class="token variable">$KE_HOME</span>/bin/ke.sh stop
<span class="token comment"># 重启服务</span>
<span class="token variable">$KE_HOME</span>/bin/ke.sh restart
<span class="token comment"># 查看服务运行状态</span>
<span class="token variable">$KE_HOME</span>/bin/ke.sh status
<span class="token comment"># 查看服务状态</span>
<span class="token variable">$KE_HOME</span>/bin/ke.sh stats
<span class="token comment"># 动态查看服务输出日志</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token variable">$KE_HOME</span>/logs/ke_console.out
</code></pre> 
<ul><li>启动成功可以直接访问，输入账号密码<code>admin:123456</code>，访问地址：<a href="https://link.juejin.cn?target=http%3A%2F%2F192.168.5.78%3A8048%2F" rel="nofollow">http://192.168.5.78:8048/</a></li></ul> 
<p><img src="https://images2.imgbox.com/dc/de/j0vxqHgZ_o.png" alt="img"></p> 
<ul><li>登录成功后可以访问到Dashboard，界面还是很棒的！</li></ul> 
<p><img src="https://images2.imgbox.com/f8/93/EB6KLAN3_o.png" alt="img"></p> 
<h4><a id="_235"></a>可视化工具使用</h4> 
<ul><li>之前我们使用命令行创建了Topic，这里可以直接通过界面来创建；</li></ul> 
<p><img src="https://images2.imgbox.com/a7/8f/TACQaDos_o.png" alt="img"></p> 
<ul><li>我们还可以直接通过<code>kafka-eagle</code>来发送消息；</li></ul> 
<p><img src="https://images2.imgbox.com/34/96/NhlolvGf_o.png" alt="img"></p> 
<ul><li>我们可以通过命令行来消费Topic中的消息；</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码bin/kafka-console-consumer.sh <span class="token parameter variable">--topic</span> testTopic --from-beginning --bootstrap-server <span class="token number">192.168</span>.5.78:9092
</code></pre> 
<ul><li>控制台获取到信息显示如下；</li></ul> 
<p><img src="https://images2.imgbox.com/c4/63/P4PWRwek_o.png" alt="img"></p> 
<ul><li>还有一个很有意思的功能叫<code>KSQL</code>，可以通过SQL语句来查询Topic中的消息；</li></ul> 
<p><img src="https://images2.imgbox.com/27/47/wSSjGLE2_o.png" alt="img"></p> 
<ul><li>可视化工具自然少不了监控，如果你想开启<code>kafka-eagle</code>对Kafka的监控功能的话，需要修改Kafka的启动脚本，暴露JMX的端口；</li></ul> 
<pre><code class="prism language-bash">bash复制代码vi kafka-server-start.sh
<span class="token comment"># 暴露JMX端口</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"x<span class="token variable">$KAFKA_HEAP_OPTS</span>"</span> <span class="token operator">=</span> <span class="token string">"x"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">export</span> <span class="token assign-left variable">KAFKA_HEAP_OPTS</span><span class="token operator">=</span><span class="token string">"-server -Xms2G -Xmx2G -XX:PermSize=128m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:ParallelGCThreads=8 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70"</span>
    <span class="token builtin class-name">export</span> <span class="token assign-left variable">JMX_PORT</span><span class="token operator">=</span><span class="token string">"9999"</span>
<span class="token keyword">fi</span>
</code></pre> 
<ul><li>来看下监控图表界面；</li></ul> 
<p><img src="https://images2.imgbox.com/50/ca/ByHeeR4j_o.png" alt="img"></p> 
<ul><li>还有一个很骚气的监控大屏功能；</li></ul> 
<p><img src="https://images2.imgbox.com/23/3b/PatHhKhg_o.png" alt="img"></p> 
<ul><li>还有Zookeeper的命令行功能，总之功能很全，很强大！</li></ul> 
<p><img src="https://images2.imgbox.com/35/b9/i0vclJsp_o.png" alt="img"></p> 
<h3><a id="SpringBootKafka_283"></a>SpringBoot整合Kafka</h3> 
<blockquote> 
 <p>在SpringBoot中操作Kafka也是非常简单的，比如Kafka的消息模式很简单，没有队列，只有Topic。</p> 
</blockquote> 
<ul><li>首先在应用的<code>pom.xml</code>中添加Spring Kafka依赖；</li></ul> 
<pre><code class="prism language-xml">xml复制代码<span class="token comment">&lt;!--Spring整合Kafka--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-kafka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li>修改应用配置文件<code>application.yml</code>，配置Kafka服务地址及consumer的<code>group-id</code>；</li></ul> 
<pre><code class="prism language-yaml"><span class="token key atrule">yaml复制代码server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8088</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">kafka</span><span class="token punctuation">:</span>
    <span class="token key atrule">bootstrap-servers</span><span class="token punctuation">:</span> <span class="token string">'192.168.5.78:9092'</span>
    <span class="token key atrule">consumer</span><span class="token punctuation">:</span>
      <span class="token key atrule">group-id</span><span class="token punctuation">:</span> <span class="token string">"bootGroup"</span>
</code></pre> 
<ul><li>创建一个生产者，用于向Kafka的Topic中发送消息；</li></ul> 
<pre><code class="prism language-java">java复制代码<span class="token comment">/**
 * Kafka消息生产者
 * Created by macro on 2021/5/19.
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaProducer</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">KafkaTemplate</span> kafkaTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        kafkaTemplate<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"bootTopic"</span><span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>创建一个消费者，用于从Kafka中获取消息并消费；</li></ul> 
<pre><code class="prism language-java">java复制代码<span class="token comment">/**
 * Kafka消息消费者
 * Created by macro on 2021/5/19.
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaConsumer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@KafkaListener</span><span class="token punctuation">(</span>topics <span class="token operator">=</span> <span class="token string">"bootTopic"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"consumer processMessage : {}"</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<ul><li>创建一个发送消息的接口，调用生产者去发送消息；</li></ul> 
<pre><code class="prism language-java">java复制代码<span class="token comment">/**
 * Kafka功能测试
 * Created by macro on 2021/5/19.
 */</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"KafkaController"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"Kafka功能测试"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/kafka"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">KafkaProducer</span> kafkaProducer<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"发送消息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/sendMessage"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        kafkaProducer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>直接在Swagger中调用接口进行测试；</li></ul> 
<p><img src="https://images2.imgbox.com/12/05/DzGW1a2L_o.png" alt="img"></p> 
<ul><li>项目控制台会输出如下信息，表明消息已经被接收并消费掉了。</li></ul> 
<pre><code class="prism language-bash"><span class="token function">bash</span>
复制代码2021-05-19 <span class="token number">16</span>:59:21.016  INFO <span class="token number">2344</span> --- <span class="token punctuation">[</span>ntainer<span class="token comment">#0-0-C-1] c.m.mall.tiny.component.KafkaConsumer    : consumer processMessage : Spring Boot message!</span>
</code></pre> 
<h3><a id="_383"></a>总结</h3> 
<p>通过本文的一波实践，大家基本就能入门Kafka了。安装、可视化工具、结合SpringBoot，这些基本都是和开发者相关的操作，也是学习Kafka的必经之路。</p> 
<h3><a id="_387"></a>参考资料</h3> 
<ul><li>Kafka官方文档：<a href="https://link.juejin.cn?target=https%3A%2F%2Fkafka.apache.org%2Fquickstart" rel="nofollow">kafka.apache.org/quickstart</a></li><li><code>kafka-eagle</code>官方文档：<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.kafka-eagle.org%2Farticles%2Fdocs%2Fintroduce%2Fgetting-started.html" rel="nofollow">www.kafka-eagle.org/articles/do…</a></li><li>Kafka相关概念：<a href="https://juejin.cn/post/6844903495670169607" rel="nofollow">juejin.cn/post/684490…</a></li></ul> 
<h3><a id="_393"></a>项目源码地址</h3> 
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmacrozheng%2Fmall-learning%2Ftree%2Fmaster%2Fmall-tiny-kafka" rel="nofollow">github.com/macrozheng/…</a></p> 
<blockquote> 
 <p>本文 GitHub <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmacrozheng%2Fmall-learning" rel="nofollow">github.com/macrozheng/…</a> 已经收录，欢迎大家Star！</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f72a3807f95e09fc3c7bc7c0da9bb94a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">R语言系列1——R语言基础：入门篇</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/34b2cdae9beb9a5b6cbb85e1d30259e9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">贪心算法（greedy algorithm，又称贪婪算法）详解（附例题）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>