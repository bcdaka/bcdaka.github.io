<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序实战项目开发（天气预报项目实战）：内涵开发说明文档、需求文档 &amp;&amp; 手把手分步骤教你写出自己的小程序项目 &amp;&amp; 天气预报小程序 &amp;&amp; 时实请求获取天气 &amp;&amp; 自定义功能 &amp;&amp; 完整的源代码 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8ea6b6d4440f15e5714c2c4f6c1911f1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="微信小程序实战项目开发（天气预报项目实战）：内涵开发说明文档、需求文档 && 手把手分步骤教你写出自己的小程序项目 && 天气预报小程序 && 时实请求获取天气 && 自定义功能 && 完整的源代码">
  <meta property="og:description" content="文章目录 微信小程序开发实现天气预报 一、项目需求分析需求分析实现思路分析详解如下：1、创建项目、全局配置 json 文件2、在 wxml文件中完成布局3、wxss的实现美化效果颜色渐变效果：鼠标 hover 浮动阴影效果：圆角效果底部按钮button使用flex布局实现对天气信息采用分模块化的配色，同时添加了动画效果 4、业务逻辑的实现全部逻辑代码如下js代码分步介绍：获取天气详细信息模块将获取到的数据渲染到页面中： 二、完整代码实现1、wxml代码2、wxss代码3、js代码 4、效果图: 微信小程序开发实现天气预报 一、项目需求分析 需求分析 静态页面设计：要求界面美观 → 在wxss代码文件中对 wxml代码文件进行合理布局和美化，舒适的交互效果.功能逻辑完善：能够使用到 wx.request 请求接口实现天气预报查询的功能 主要使用到的技术栈如下：
wxml：中使用了 picker 组件标签来完成了我们城市选择wxss：我们使用了简单的布局：background-image、动画效果等常用属性完成页面的美化app.json：该项目由于考虑到为一个页面，所以在全局配置文件中对页面的 window进行了配置，从而实现顶部的下拉、背景、文字和颜色的效果js：文件中我们主要的使用了 wx.request 方法请求和风天气的WebAPI 后端接口 实现了最直观的业务逻辑。 实现思路分析详解如下： 1、创建项目、全局配置 json 文件 创建小程序项目，使用JavaScript开发，这一点注意了即可。
项目创建成功后，我第一时间对 json 文件中的代码进行阅读和配置，这也是项目开发的第一步和后续操作防止出现问题的重要手段
代码如下：
&#34;window&#34;: { &#34;navigationBarBackgroundColor&#34;: &#34;#00FFFF&#34;, &#34;navigationBarTextStyle&#34;: &#34;black&#34;, &#34;navigationBarTitleText&#34;: &#34;WeatherQuery&#34;, &#34;backgroundColor&#34;: &#34;#00FA9A&#34;, &#34;backgroundTextStyle&#34;: &#34;light&#34;, &#34;enablePullDownRefresh&#34;: true } 同时需要注意的是：pages配置值的时候注意我们天气页面的位置，需要放在第一个，否则会出现跑错的问题！（最好建议除非有多个页面，不然除了需要的直接删掉就好了）。 2、在 wxml文件中完成布局 实现代码如下：
&lt;view class=&#34;father_View_box&#34;&gt; &lt;!-- 显示当前查询城市 --&gt; &lt;view class=&#34;at_present_query_city&#34;&gt; &lt;text class=&#34;ar_present_hint_text&#34;&gt;当前查询城市:&lt;/text&gt; &lt;text class=&#34;city_text&#34;&gt;{{city}}&lt;/text&gt; &lt;/view&gt; &lt;!">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-06T17:22:44+08:00">
    <meta property="article:modified_time" content="2024-04-06T17:22:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序实战项目开发（天气预报项目实战）：内涵开发说明文档、需求文档 &amp;&amp; 手把手分步骤教你写出自己的小程序项目 &amp;&amp; 天气预报小程序 &amp;&amp; 时实请求获取天气 &amp;&amp; 自定义功能 &amp;&amp; 完整的源代码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">微信小程序开发实现天气预报</a></li></ul> 
   </li><li><a href="#_3" rel="nofollow">一、项目需求分析</a></li><li><ul><li><a href="#_4" rel="nofollow">需求分析</a></li><li><a href="#_20" rel="nofollow">实现思路分析详解如下：</a></li><li><ul><li><ul><li><a href="#1_json__24" rel="nofollow">1、创建项目、全局配置 json 文件</a></li><li><a href="#2_wxml_47" rel="nofollow">2、在 wxml文件中完成布局</a></li><li><a href="#3wxss_86" rel="nofollow">3、wxss的实现美化效果</a></li><li><ul><li><a href="#_92" rel="nofollow">颜色渐变效果：</a></li><li><a href="#_hover__104" rel="nofollow">鼠标 hover 浮动阴影效果：</a></li><li><a href="#_123" rel="nofollow">圆角效果</a></li><li><a href="#buttonflex_133" rel="nofollow">底部按钮button使用flex布局实现</a></li><li><a href="#_144" rel="nofollow">对天气信息采用分模块化的配色，同时添加了动画效果</a></li></ul> 
      </li><li><a href="#4_187" rel="nofollow">4、业务逻辑的实现</a></li><li><ul><li><a href="#_192" rel="nofollow">全部逻辑代码如下</a></li><li><a href="#js_266" rel="nofollow">js代码分步介绍：</a></li><li><a href="#_301" rel="nofollow">获取天气详细信息模块</a></li><li><a href="#_444" rel="nofollow">将获取到的数据渲染到页面中：</a></li></ul> 
     </li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#_468" rel="nofollow">二、完整代码实现</a></li><li><ul><li><a href="#1wxml_469" rel="nofollow">1、wxml代码</a></li><li><a href="#2wxss_499" rel="nofollow">2、wxss代码</a></li><li><a href="#3js_688" rel="nofollow">3、js代码</a></li></ul> 
   </li><li><a href="#4_756" rel="nofollow">4、效果图:</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_1"></a>微信小程序开发实现天气预报</h4> 
<h3><a id="_3"></a>一、项目需求分析</h3> 
<h4><a id="_4"></a>需求分析</h4> 
<ol><li><strong>静态页面设计</strong>：要求界面美观 → 在wxss代码文件中对 wxml代码文件进行合理布局和美化，舒适的交互效果.</li><li><strong>功能逻辑完善</strong>：能够使用到 wx.request 请求接口实现天气预报查询的功能</li></ol> 
<p>主要使用到的技术栈如下：</p> 
<blockquote> 
 <ul><li>wxml：中使用了 picker 组件标签来完成了我们城市选择</li><li>wxss：我们使用了简单的布局：background-image、动画效果等常用属性完成页面的美化</li><li>app.json：该项目由于考虑到为一个页面，所以在全局配置文件中对页面的 window进行了配置，从而实现顶部的下拉、背景、文字和颜色的效果</li><li>js：文件中我们主要的使用了 wx.request 方法请求和风天气的WebAPI 后端接口 实现了最直观的业务逻辑。</li></ul> 
</blockquote> 
<h4><a id="_20"></a>实现思路分析详解如下：</h4> 
<h6><a id="1_json__24"></a>1、创建项目、全局配置 json 文件</h6> 
<p>创建小程序项目，使用JavaScript开发，这一点注意了即可。</p> 
<p>项目创建成功后，我第一时间对 json 文件中的代码进行阅读和配置，这也是项目开发的第一步和后续操作防止出现问题的重要手段</p> 
<p>代码如下：</p> 
<pre><code class="prism language-json">	<span class="token string-property property">"window"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token string-property property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#00FFFF"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"WeatherQuery"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#00FA9A"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"backgroundTextStyle"</span><span class="token operator">:</span> <span class="token string">"light"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"enablePullDownRefresh"</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
</code></pre> 
<ul><li>同时需要注意的是：pages配置值的时候注意我们天气页面的位置，需要放在第一个，否则会出现跑错的问题！（最好建议除非有多个页面，不然除了需要的直接删掉就好了）。</li></ul> 
<h6><a id="2_wxml_47"></a>2、在 wxml文件中完成布局</h6> 
<p>实现代码如下：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>father_View_box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 显示当前查询城市 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>at_present_query_city<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ar_present_hint_text<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>当前查询城市:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city_text<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{city}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 显示城市天气信息 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show_sity_weather_information<span class="token punctuation">"</span></span> 			<span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{w3}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>第 {<!-- -->{ index + 1 }} 天：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最高温度:{<!-- -->{item.tempMax}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最低温度:{<!-- -->{item.tempMin}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>风向：{<!-- -->{item.windDirDay}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>风级：{<!-- -->{item.textDay}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button_view<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token comment">&lt;!-- 选择城市 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>select_city_button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wxml_picker<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>region<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> 		<span class="token attr-name">bindchange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selCity<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>选择城市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 获取天气信息 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>query_weather_information<span class="token punctuation">"</span></span> 				<span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getWeather<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>获取城市天气信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h6><a id="3wxss_86"></a>3、wxss的实现美化效果</h6> 
<ul><li>wxss 就是简单的一些布局，例如颜色的<strong>渐变、 阴影、 圆角 和 鼠标hover效果</strong>了。由于代码量大，这里就部分展示；</li></ul> 
<ol><li> <h6><a id="_92"></a>颜色渐变效果：</h6> </li></ol> 
<ul><li>使用 background-image 属性完成 ，属性值就是 方向 和 颜色的透明度了。</li></ul> 
<pre><code class="prism language-css">	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4facfe 0%<span class="token punctuation">,</span> #00f2fe 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li> <h6><a id="_hover__104"></a>鼠标 hover 浮动阴影效果：</h6> </li></ol> 
<ul><li>box-shadow 属性实现阴影效果</li><li>transition 属性主要实现就是动态了</li><li>给选择器添加 hover 鼠标悬停效果</li></ul> 
<pre><code class="prism language-css"><span class="token comment">/* 设置初始状态的样式 */</span>
<span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s<span class="token punctuation">;</span>
<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">box-shadow</span><span class="token punctuation">:</span> 10px 10px 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* 设置鼠标悬停状态的样式 */</span>
<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token property">box-shadow</span><span class="token punctuation">:</span> 20px 20px 40px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li> <h6><a id="_123"></a>圆角效果</h6> </li></ol> 
<ul><li>border-radius属性完成</li></ul> 
<pre><code class="prism language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
</code></pre> 
<ol start="4"><li> <h6><a id="buttonflex_133"></a>底部按钮button使用flex布局实现</h6> </li></ol> 
<ul><li>让两个盒子平分父盒子显示，自适应宽度。</li></ul> 
<pre><code class="prism language-css">	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
</code></pre> 
<ol start="5"><li> <h6><a id="_144"></a>对天气信息采用分模块化的配色，同时添加了动画效果</h6> </li></ol> 
<ul><li>使用了 keyframes属性 定义了animate动画，然后hover盒子后，则执行该动画。</li></ul> 
<pre><code class="prism language-css"><span class="token selector">.show_sity_weather_information:hover</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">animation</span><span class="token punctuation">:</span> animate 0.5s linear infinite<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 


<span class="token atrule"><span class="token rule">@keyframes</span> animate</span> <span class="token punctuation">{<!-- --></span>

	<span class="token selector">0%,
	25%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> 2px 5px 2px <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 6<span class="token punctuation">,</span> 6<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">50%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> 2px -5px 2px #0f0<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">75%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> -2px 5px 2px #00f<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">100%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> -2px -5px 2px #f0f<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>效果图如下：<br> <img src="https://images2.imgbox.com/f7/c7/EFl648NN_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="4_187"></a>4、业务逻辑的实现</h6> 
<ul><li>这里使用的是原生的微信小程序开发 采用 JavaScript 语言编写的交互逻辑！</li><li>使用了和风天气 webAPI接口 完成了数据的请求。</li></ul> 
<h6><a id="_192"></a>全部逻辑代码如下</h6> 
<ul><li>相信看注释应该都能看懂这段代码的含义。下面我会分步对代码块完成的功能进行介绍！</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">// pages/city/city.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">w3</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span><span class="token string">'郑州'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 选择城市触发的事件</span>
<span class="token function">selCity</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 获取城市的id，因为请求城市天气，依靠的就是id</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">city</span><span class="token operator">:</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 获取天气触发的事件</span>
<span class="token function">getWeather</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
	<span class="token comment">// 向服务器发送请求</span>
  wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

		<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://geoapi.qweather.com/v2/city/lookup'</span><span class="token punctuation">,</span> <span class="token comment">// 请求地址</span>
		<span class="token comment">// 请求携带的参数</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">location</span><span class="token operator">:</span>that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>city<span class="token punctuation">,</span>	<span class="token comment">// 用户选择的城市名称</span>
      <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// 和风API接口的key值</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 请求成功后，获取城市的 id</span>
		<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 将 locaitionId获取存到城市id中，获取城市天气的时候使用</span>
				<span class="token keyword">var</span> cityCode <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id
			<span class="token punctuation">}</span>


			<span class="token comment">// 根据上面获取到的城市id ， 请求城市天气信息</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://devapi.qweather.com/v7/weather/3d'</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">location</span><span class="token operator">:</span> cityCode<span class="token punctuation">,</span>		<span class="token comment">// 携带的城市id</span>
          <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// API  接口的key值</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">// 配置请求头</span>
        <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">w3</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>daily		<span class="token comment">// 拿到需要渲染的数据</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 请求失败所触发的事件</span>
    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取天气失败!!!"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h6><a id="js_266"></a>js代码分步介绍：</h6> 
<p>初始化数据容器：</p> 
<pre><code class="prism language-js">  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">w3</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span><span class="token string">'郑州'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 选择城市触发的事件</span>
<span class="token function">selCity</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 获取城市的id，因为请求城市天气，依靠的就是id</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">city</span><span class="token operator">:</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<blockquote> 
 <ul><li> <p>data{} : 里面的数据 w3 是用于存放我们需要渲染到页面上的天气信息，例如：最高温、最低温、天气、风向等数据。他是一个数组。目的就是方便后面我们使用wx.for进行循环渲染映射结构。</p> </li><li> <p>city：见名知意，就是城市。当我们选择省份后，会自动帮我们获取城市信息，然后存放到该key属性中。方便我们后面请求城市的天气信息。</p> </li></ul> 
</blockquote> 
<p>这就是渲染w3的效果图：<br> <img src="https://images2.imgbox.com/12/2c/nx7KsSpe_o.png" alt="在这里插入图片描述"></p> 
<p>这里我们只请求三天的数据，七天、十五天、都是一样！不过就是请求的结构进行更改。</p> 
<h6><a id="_301"></a>获取天气详细信息模块</h6> 
<pre><code class="prism language-js"><span class="token function">getWeather</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span>	<span class="token comment">// 重新定义引用</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<ul><li>在我们wxml代码中的按钮上， 我们注册了点击事件（getWeather（e））</li><li>然后里面我们使用 wx.request 总共就发送了两次请求（采用了嵌套请求）</li></ul> 
<pre><code class="prism language-js">  wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

		<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://geoapi.qweather.com/v2/city/lookup'</span><span class="token punctuation">,</span> <span class="token comment">// 请求地址</span>
		<span class="token comment">// 请求携带的参数</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">location</span><span class="token operator">:</span>that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>city<span class="token punctuation">,</span>	<span class="token comment">// 用户选择的城市名称</span>
      <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// 和风API接口的key值</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 请求成功后，拿到城市的 id</span>
		<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 将 locaitionId获取存到城市id中，获取城市天气的时候使用</span>
				<span class="token keyword">var</span> cityCode <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 请求失败所触发的事件</span>
    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取天气失败!!!"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>我么先看看外层请求：这里我们使用 <a href="https://geoapi.qweather.com/v2/city/lookup?%5B%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%5D" rel="nofollow">和风天气城市的接口</a>，用来获取我们用户所选择的城市 locationId （用于内层请求数据所携带的请求参数）。</p> 
 <pre><code class="prism language-js"> <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
   <span class="token literal-property property">location</span><span class="token operator">:</span>that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>city<span class="token punctuation">,</span>	<span class="token comment">// 用户选择的城市名称</span>
   <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// 和风API接口的key值</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
 <ul><li>data配置项里面就是此次请求所携带的参数，第一个参数就是我们用户选择的城市信息（就是我们上面获取存储的）</li><li>第一个key 就是我们的 和风项目中的API接口 的值了，可以理解为是一个密钥。就和身份证一样。</li></ul> 
</blockquote> 
<ul><li>请求成功</li></ul> 
<blockquote> 
 <pre><code class="prism language-js">		<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 将 locaitionId获取存到城市id中，获取城市天气的时候使用</span>
				<span class="token keyword">var</span> cityCode <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
 <p>这是我们请求服务器成功后，服务器给我们响应所触发的函数（请求成功自动调用），我们只需要负责编写里面的逻辑就好了。</p> 
 <p>我先对返回的结果进行判断，目的是防止数据出现问题导致编译错误！</p> 
 <p>然后我将里面的数据存在了一个变量中，这里使用了var声明（不推荐使用），不过这里恰好用了它的这一点好处。存好后内层请求数据可以访问我这个变量里面的数据发送请求（也就是城市的 id ）</p> 
</blockquote> 
<ul><li>请求失败</li></ul> 
<blockquote> 
 <pre><code class="prism language-js"> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取天气失败!!!"</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre> 
 <p>失败就在控制台输出结果，提示 “获取天气失败”</p> 
</blockquote> 
<blockquote> 
 <p>下面就是内层的网络请求，根据 城市id 获取天气信息。</p> 
</blockquote> 
<pre><code class="prism language-js">	  <span class="token comment">// 根据上面获取到的城市id ， 请求城市天气信息</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://devapi.qweather.com/v7/weather/3d'</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">location</span><span class="token operator">:</span> cityCode<span class="token punctuation">,</span>		<span class="token comment">// 携带的城市id</span>
          <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// API  接口的key值</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">// 配置请求头</span>
        <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">w3</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>daily		<span class="token comment">// 拿到需要渲染的数据</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>经过上面分析，这里我就不在一一讲解了，我们直接看这次的请求配置项 data</p> 
 <pre><code class="prism language-js"><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
 <span class="token literal-property property">location</span><span class="token operator">:</span> cityCode<span class="token punctuation">,</span>		<span class="token comment">// 携带的城市id</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// API  接口的key值</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">// 配置请求头</span>
<span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
 <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
 <p>location： 这次就是我们外层请求获取的城市id了</p> 
 <p>key：一样的，是密钥。</p> 
 <ul><li>就是会发现这里使用和 header 配置项，这是网络请求中的 请求头，这是 后台数据库需要配置的数据，开发文档说明了需要配置，那么我在写的时候，就得按照后端程序员的设置去配置这个header请求头。一般的都是对请求的类型和返回数据的格式进行了配置。</li></ul> 
 <pre><code class="prism language-js">        <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">w3</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>daily		<span class="token comment">// 拿到需要渲染的数据</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> 
 <ul><li>同样的，请求成功后，我们将获取响应的数据中需要渲染的数据，存到我们的w3 数组中。</li></ul> 
</blockquote> 
<h6><a id="_444"></a>将获取到的数据渲染到页面中：</h6> 
<pre><code class="prism language-xml">		<span class="token comment">&lt;!-- 显示城市天气信息 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show_sity_weather_information<span class="token punctuation">"</span></span> 			<span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{w3}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>第 {<!-- -->{ index + 1 }} 天：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最高温度:{<!-- -->{item.tempMax}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最低温度:{<!-- -->{item.tempMin}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>风向：{<!-- -->{item.windDirDay}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>风级：{<!-- -->{item.textDay}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li> <p>这里使用了 wx.for 对数据对象 w3循环渲染了， 并且指定了key。</p> </li><li> <p>分析总结<br> 以上就是从分析项目需求 → 项目创建 → 页面布局 → 样式美化 → 业务逻辑实现 的完整步骤分析。对了这里存在最大的问题就是。切记开发文档的时候，一定要详细阅读开发文档中所嵌套的文档。方便我们开发请求服务器数据</p> </li></ul> 
<h3><a id="_468"></a>二、完整代码实现</h3> 
<h4><a id="1wxml_469"></a>1、wxml代码</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>father_View_box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 显示当前查询城市 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>at_present_query_city<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ar_present_hint_text<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>当前查询城市:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city_text<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{city}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 显示城市天气信息 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show_sity_weather_information<span class="token punctuation">"</span></span> 			<span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{w3}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>第 {<!-- -->{ index + 1 }} 天：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最高温度:{<!-- -->{item.tempMax}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最低温度:{<!-- -->{item.tempMin}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>风向：{<!-- -->{item.windDirDay}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text_5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>风级：{<!-- -->{item.textDay}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- button --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button_view<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token comment">&lt;!-- 选择城市 --&gt;</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>select_city_button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wxml_picker<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>region<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> 		<span class="token attr-name">bindchange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selCity<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>选择城市<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 获取天气信息 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>query_weather_information<span class="token punctuation">"</span></span> 				<span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getWeather<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>获取城市天气信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="2wxss_499"></a>2、wxss代码</h4> 
<pre><code class="prism language-css"><span class="token comment">/* pages/city/city.wxss */</span>

<span class="token comment">/* 根组件的样式 */</span>

<span class="token selector">.father_View_box</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 1300rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #0acffe 0%<span class="token punctuation">,</span> #495aff 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">border-radius</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>

	<span class="token comment">/* 设置初始状态的样式 */</span>
	<span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s<span class="token punctuation">;</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">box-shadow</span><span class="token punctuation">:</span> 10px 10px 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.father_View_box:hover</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 设置鼠标悬停状态的样式 */</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">box-shadow</span><span class="token punctuation">:</span> 20px 20px 40px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token comment">/* 显示查询城市的样式 */</span>
<span class="token selector">.at_present_query_city</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 240rpx<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4facfe 0%<span class="token punctuation">,</span> #00f2fe 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">line-height</span><span class="token punctuation">:</span> 240rpx<span class="token punctuation">;</span>
	<span class="token property">border-radius</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>

	  <span class="token comment">/* 设置初始状态的样式 */</span>
		<span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s<span class="token punctuation">;</span>
		<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token property">box-shadow</span><span class="token punctuation">:</span> 10px 10px 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token selector">.at_present_query_city:hover</span> <span class="token punctuation">{<!-- --></span>
			  <span class="token comment">/* 设置鼠标悬停状态的样式 */</span>
				<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token property">box-shadow</span><span class="token punctuation">:</span> 20px 20px 40px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*  显示城市内容 */</span>
<span class="token selector">.show_sity_weather_information</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 120rpx<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 150rpx<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 28rpx<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> #FFCCAA<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.show_sity_weather_information:hover</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">animation</span><span class="token punctuation">:</span> animate 0.5s linear infinite<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token selector">.show_sity_weather_information .text_1</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 35rpx<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> orangered<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>120deg<span class="token punctuation">,</span> #d4fc79 0%<span class="token punctuation">,</span> #96e6a1 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.text_2</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 35rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #30cfd0 0%<span class="token punctuation">,</span> #330867 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token selector">.text_3</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 35rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #30cfd0 0%<span class="token punctuation">,</span> #330867 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token selector">.text_4</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 35rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #30cfd0 0%<span class="token punctuation">,</span> #330867 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token selector">.text_5</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 35rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #30cfd0 0%<span class="token punctuation">,</span> #330867 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
	


<span class="token atrule"><span class="token rule">@keyframes</span> animate</span> <span class="token punctuation">{<!-- --></span>

	<span class="token selector">0%,
	25%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> 2px 5px 2px <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 6<span class="token punctuation">,</span> 6<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">50%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> 2px -5px 2px #0f0<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">75%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> -2px 5px 2px #00f<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token selector">100%</span> <span class="token punctuation">{<!-- --></span>
		<span class="token property">text-shadow</span><span class="token punctuation">:</span> -2px -5px 2px #f0f<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token selector">.at_present_query_city .ar_present_hint_text</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 100rpx<span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> #808080<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.city_text</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 200rxp<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
	<span class="token property">margin-right</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
	<span class="token property">line-height</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
	<span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> hotpink<span class="token punctuation">;</span>
	<span class="token comment">/* background-image: linear-gradient(to right, #6794a1 0%, #2ccfb1 50%); */</span>
<span class="token punctuation">}</span>


<span class="token comment">/* 选择城市button */</span>


<span class="token comment">/* 获取城市天气信息button */</span>

<span class="token selector">.button_view</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to top<span class="token punctuation">,</span> #a8edea 0%<span class="token punctuation">,</span> #fed6e3 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 1、选择城市 */</span>
<span class="token selector">.select_city_button</span> <span class="token punctuation">{<!-- --></span>

	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #fa709a 0%<span class="token punctuation">,</span> #fee140 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token property">border-radius</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
	<span class="token comment">/* 设置初始状态的样式 */</span>
	<span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s<span class="token punctuation">;</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">box-shadow</span><span class="token punctuation">:</span> 10px 10px 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.select_city_button:hover</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 设置鼠标悬停状态的样式 */</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">box-shadow</span><span class="token punctuation">:</span> 20px 20px 40px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/* 2、获取城市信息 */</span>
<span class="token selector">.query_weather_information</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">border-radius</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #ff8177 0%<span class="token punctuation">,</span> #ff867a 0%<span class="token punctuation">,</span> #ff8c7f 21%<span class="token punctuation">,</span> #f99185 52%<span class="token punctuation">,</span> #cf556c 78%<span class="token punctuation">,</span> #b12a5b 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/* 设置初始状态的样式 */</span>
	<span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s<span class="token punctuation">;</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">box-shadow</span><span class="token punctuation">:</span> 10px 10px 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 10px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.query_weather_information:hover</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* 设置鼠标悬停状态的样式 */</span>
	<span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-10px<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">box-shadow</span><span class="token punctuation">:</span> 20px 20px 40px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.4<span class="token punctuation">)</span><span class="token punctuation">,</span> inset 0 0 20px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



</code></pre> 
<h4><a id="3js_688"></a>3、js代码</h4> 
<pre><code class="prism language-js"><span class="token comment">// pages/city/city.js</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">w3</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">city</span><span class="token operator">:</span><span class="token string">'郑州'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 选择城市触发的事件</span>
<span class="token function">selCity</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>code<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token comment">// 获取城市的id，因为请求城市天气，依靠的就是id</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">city</span><span class="token operator">:</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 获取天气触发的事件</span>
<span class="token function">getWeather</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
	<span class="token comment">// 向服务器发送请求</span>
  wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

		<span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://geoapi.qweather.com/v2/city/lookup'</span><span class="token punctuation">,</span> <span class="token comment">// 请求地址</span>
		<span class="token comment">// 请求携带的参数</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">location</span><span class="token operator">:</span>that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>city<span class="token punctuation">,</span>	<span class="token comment">// 用户选择的城市名称</span>
      <span class="token literal-property property">key</span><span class="token operator">:</span><span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// 和风API接口的key值</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 请求成功后，获取城市的 id</span>
		<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 将 locaitionId获取存到城市id中，获取城市天气的时候使用</span>
				<span class="token keyword">var</span> cityCode <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>location<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id
			<span class="token punctuation">}</span>


			<span class="token comment">// 根据上面获取到的城市id ， 请求城市天气信息</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'https://devapi.qweather.com/v7/weather/3d'</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">location</span><span class="token operator">:</span> cityCode<span class="token punctuation">,</span>		<span class="token comment">// 携带的城市id</span>
          <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'0db90c3a430d46b58c83c875e6fa5de5'</span>		<span class="token comment">// API  接口的key值</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token comment">// 配置请求头</span>
        <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">w3</span><span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>daily		<span class="token comment">// 拿到需要渲染的数据</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 请求失败所触发的事件</span>
    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取天气失败!!!"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre> 
<h3><a id="4_756"></a>4、效果图:</h3> 
<p><img src="https://images2.imgbox.com/be/7f/R1CfASzv_o.png" alt="在这里插入图片描述"></p> 
<ul><li>有什么问题或需要完整的项目直接私信即可！</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/844211ea397f43c3e32cc21972f5d774/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python中的print(f‘‘)具体用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5546d31b0f1acccc526fcb88d29ef16b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据集处理】中国地面气候资料日值数据集(V3.0)(python)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>