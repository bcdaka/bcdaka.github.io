<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>从零搭建SpringBoot3&#43;Vue3前后端分离项目基座，中小项目可用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/148a77478b51fad45b658182b09be8d2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="从零搭建SpringBoot3&#43;Vue3前后端分离项目基座，中小项目可用">
  <meta property="og:description" content="文章目录 1. 后端项目搭建1.1 环境准备1.2 数据表准备1.3 SpringBoot3项目创建1.4 MySql环境整合，使用druid连接池1.5 整合mybatis-plus1.5.1 引入mybatis-plus1.5.2 配置代码生成器1.5.3 配置分页插件 1.6 整合swagger3（knife4j）1.6.1 整合1.6.2 使用 1.7 数据交互处理1.7.1 响应数据封装（公共返回数据类）1.7.2 分页查询返回数据封装 1.8 全局异常处理1.9 整合JWT，生成token1.10 封装ThreadLocal 工具类1.11 MD5封装1.12登录验证拦截1.13 登录和获取当前用户信息接口处理 2. 前端项目搭建2.1 环境准备2.2 创建Vue3项目2.3 项目搭建准备2.4 Element Plus 安装使用2.5 axios 安装使用2.5.1 安装2.5.2 配置（创建实例，配置请求、响应拦截器）2.5.3 配置跨域 2.6 Vue Router 安装使用2.7 Pinia状态管理库2.7.1 Pinia持久化插件-persist2.8 搭建管理页面基础框架2.8.1 在src下创建api目录，次目录存放请求http方法的封装，创建user.js， 里边写封装请求方法2.8.2 登录页面2.8.3 布局页面 3.项目代码 项目使用SpringBoot3&#43;Vue3， 后端使用springboot3, mybatisPlus, druid,knife4j(swagger3),Jwt; 前端 vue3 , element-plus, axios, pinia, vue-router; 项目前后端分离， 可持续扩展， 代码放到最后 1. 后端项目搭建 1.1 环境准备 - spring-boot3 最低支持jdk17, 所以需要准备jdk17环境 - Idea 版本IntelliJ IDEA 2021.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-05T15:09:41+08:00">
    <meta property="article:modified_time" content="2024-04-05T15:09:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">从零搭建SpringBoot3&#43;Vue3前后端分离项目基座，中小项目可用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__2" rel="nofollow">1. 后端项目搭建</a></li><li><ul><li><a href="#11__3" rel="nofollow">1.1 环境准备</a></li><li><a href="#12__8" rel="nofollow">1.2 数据表准备</a></li><li><a href="#13_SpringBoot3_24" rel="nofollow">1.3 SpringBoot3项目创建</a></li><li><a href="#14_MySqldruid_80" rel="nofollow">1.4 MySql环境整合，使用druid连接池</a></li><li><a href="#15_mybatisplus_122" rel="nofollow">1.5 整合mybatis-plus</a></li><li><ul><li><a href="#151_mybatisplus_123" rel="nofollow">1.5.1 引入mybatis-plus</a></li><li><a href="#152__150" rel="nofollow">1.5.2 配置代码生成器</a></li><li><a href="#153__255" rel="nofollow">1.5.3 配置分页插件</a></li></ul> 
   </li><li><a href="#16_swagger3knife4j_287" rel="nofollow">1.6 整合swagger3（knife4j）</a></li><li><ul><li><a href="#161__288" rel="nofollow">1.6.1 整合</a></li><li><a href="#162__361" rel="nofollow">1.6.2 使用</a></li></ul> 
   </li><li><a href="#17__400" rel="nofollow">1.7 数据交互处理</a></li><li><ul><li><a href="#171__401" rel="nofollow">1.7.1 响应数据封装（公共返回数据类）</a></li><li><a href="#172___472" rel="nofollow">1.7.2 分页查询返回数据封装</a></li></ul> 
   </li><li><a href="#18__519" rel="nofollow">1.8 全局异常处理</a></li><li><a href="#19_JWTtoken_544" rel="nofollow">1.9 整合JWT，生成token</a></li><li><a href="#110_ThreadLocal__588" rel="nofollow">1.10 封装ThreadLocal 工具类</a></li><li><a href="#111_MD5_615" rel="nofollow">1.11 MD5封装</a></li><li><a href="#112_698" rel="nofollow">1.12登录验证拦截</a></li><li><a href="#113__782" rel="nofollow">1.13 登录和获取当前用户信息接口处理</a></li></ul> 
  </li><li><a href="#2__835" rel="nofollow">2. 前端项目搭建</a></li><li><ul><li><a href="#21__836" rel="nofollow">2.1 环境准备</a></li><li><a href="#22_Vue3_839" rel="nofollow">2.2 创建Vue3项目</a></li><li><a href="#23__855" rel="nofollow">2.3 项目搭建准备</a></li><li><a href="#24_Element_Plus__872" rel="nofollow">2.4 Element Plus 安装使用</a></li><li><a href="#25_axios__888" rel="nofollow">2.5 axios 安装使用</a></li><li><ul><li><a href="#251__889" rel="nofollow">2.5.1 安装</a></li><li><a href="#252__894" rel="nofollow">2.5.2 配置（创建实例，配置请求、响应拦截器）</a></li><li><a href="#253__959" rel="nofollow">2.5.3 配置跨域</a></li></ul> 
   </li><li><a href="#26_Vue_Router__975" rel="nofollow">2.6 Vue Router 安装使用</a></li><li><a href="#27_Pinia_1035" rel="nofollow">2.7 Pinia状态管理库</a></li><li><a href="#271_Piniapersist_1037" rel="nofollow">2.7.1 Pinia持久化插件-persist</a></li><li><a href="#28__1170" rel="nofollow">2.8 搭建管理页面基础框架</a></li><li><ul><li><a href="#281_srcapihttpuserjs__1171" rel="nofollow">2.8.1 在src下创建api目录，次目录存放请求http方法的封装，创建user.js， 里边写封装请求方法</a></li><li><a href="#282__1217" rel="nofollow">2.8.2 登录页面</a></li><li><a href="#283__1359" rel="nofollow">2.8.3 布局页面</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3_1698" rel="nofollow">3.项目代码</a></li></ul> 
</div> 
<br> 项目使用SpringBoot3+Vue3， 后端使用springboot3, mybatisPlus, druid,knife4j(swagger3),Jwt; 前端 vue3 , element-plus, axios, pinia, vue-router; 项目前后端分离， 可持续扩展， 代码放到最后 
<p></p> 
<h2><a id="1__2"></a>1. 后端项目搭建</h2> 
<h3><a id="11__3"></a>1.1 环境准备</h3> 
<pre><code>- spring-boot3 最低支持jdk17, 所以需要准备jdk17环境
- Idea 版本IntelliJ IDEA 2021.2及以后，版本关系参考[https://blog.csdn.net/m0_62258564/article/details/134527268](https://blog.csdn.net/m0_62258564/article/details/134527268)
- maven 版本参考以上链接
- MySql8
</code></pre> 
<h3><a id="12__8"></a>1.2 数据表准备</h3> 
<p>创建数据库 base_manage， 并创建表</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">user</span><span class="token punctuation">(</span>
    id INT NOT <span class="token constant">NULL</span> AUTO_INCREMENT COMMENT <span class="token char">'主键'</span><span class="token punctuation">,</span>
    login_name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span> COMMENT <span class="token char">'登录名（账号）'</span><span class="token punctuation">,</span>
    password <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span> COMMENT <span class="token char">'密码'</span><span class="token punctuation">,</span>
    name <span class="token function">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span> COMMENT <span class="token char">'姓名'</span><span class="token punctuation">,</span>
    sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span> COMMENT <span class="token char">'性别'</span><span class="token punctuation">,</span>
    phone <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> COMMENT <span class="token char">'联系电话'</span><span class="token punctuation">,</span>
    PRIMARY <span class="token function">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
 <span class="token punctuation">)</span>COMMENT <span class="token char">'用户信息表'</span><span class="token punctuation">;</span>
</code></pre> 
<p>用户表只是便于后续过程搭建操作，可根据需求修改</p> 
<h3><a id="13_SpringBoot3_24"></a>1.3 SpringBoot3项目创建</h3> 
<p><img src="https://images2.imgbox.com/9f/4f/pBTgF0V3_o.png" alt="在这里插入图片描述"><br> springboot版本可根据需求选择，这里选则默认的3.2.4<br> <img src="https://images2.imgbox.com/ff/e3/HtI4IOiO_o.png" alt="在这里插入图片描述"><br> 耐心等待项目构建完成， 构建完成pom文件如下，请注意，mysql驱动包<code>&lt;groupId&gt;com.mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;</code>较之前版本有所改变</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>project xmlns<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0"</span> xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>modelVersion<span class="token operator">&gt;</span><span class="token number">4.0</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>modelVersion<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>parent<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>parent<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">3.2</span><span class="token number">.4</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>relativePath<span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> lookup parent from repository <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>parent<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>buzhisuoyun<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>base_manage<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">0.0</span><span class="token number">.1</span><span class="token operator">-</span>SNAPSHOT<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>base_manage<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>base_manage<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>properties<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>java<span class="token punctuation">.</span>version<span class="token operator">&gt;</span><span class="token number">17</span><span class="token operator">&lt;</span><span class="token operator">/</span>java<span class="token punctuation">.</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>properties<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependencies<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>mysql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mysql<span class="token operator">-</span>connector<span class="token operator">-</span>j<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span>runtime<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>build<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>plugins<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>plugin<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token operator">&gt;</span>

</code></pre> 
<h3><a id="14_MySqldruid_80"></a>1.4 MySql环境整合，使用druid连接池</h3> 
<p>添加 jdbc依赖，防止项目启动时找不到Bean报错</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>jdbc<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> 
<p>添加druid依赖</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token comment">//mvnrepository.com/artifact/com.alibaba/druid-spring-boot-3-starter --&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>alibaba<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>druid<span class="token operator">-</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span><span class="token number">3</span><span class="token operator">-</span>starter<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">1.2</span><span class="token number">.20</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

</code></pre> 
<p>项目使用yml格式配置文件，修改resources下application.properties<br> 为application.yml, 并删除文件内容</p> 
<pre><code class="prism language-c">配置项目端口号
server<span class="token operator">:</span>
  port<span class="token operator">:</span> <span class="token number">8099</span>
</code></pre> 
<p>配置数据源和druid 连接池</p> 
<pre><code class="prism language-c">spring<span class="token operator">:</span>
  # 数据源
  datasource<span class="token operator">:</span>
    type<span class="token operator">:</span> com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>DruidDataSource
    driver<span class="token operator">-</span>class<span class="token operator">-</span>name<span class="token operator">:</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
    url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token comment">//127.0.0.1:3306/base_manage?serverTimezone=UTC</span>
    username<span class="token operator">:</span> root
    password<span class="token operator">:</span> root
</code></pre> 
<p>启动项目， 查看日志，端口和druid 初始化， 整合成功<br> <img src="https://images2.imgbox.com/8c/dc/LoKZlSjE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="15_mybatisplus_122"></a>1.5 整合mybatis-plus</h3> 
<h4><a id="151_mybatisplus_123"></a>1.5.1 引入mybatis-plus</h4> 
<p>官网地址： <a href="https://baomidou.com/" rel="nofollow">https://baomidou.com/</a><br> 1、添加依赖</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> https<span class="token operator">:</span><span class="token comment">//mvnrepository.com/artifact/com.baomidou/mybatis-plus-spring-boot3-starter --&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>baomidou<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mybatis<span class="token operator">-</span>plus<span class="token operator">-</span>spring<span class="token operator">-</span>boot3<span class="token operator">-</span>starter<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">3.5</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

</code></pre> 
<p>2、配置</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">mybatis</span><span class="token expression"><span class="token operator">-</span>plus</span></span>
mybatis<span class="token operator">-</span>plus<span class="token operator">:</span>
  configuration<span class="token operator">:</span>
    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">sql</span><span class="token expression">日志<span class="token punctuation">,</span> 开发调试时开启</span></span>
    log<span class="token operator">-</span>impl<span class="token operator">:</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>logging<span class="token punctuation">.</span><span class="token constant">stdout</span><span class="token punctuation">.</span>StdOutImpl
  global<span class="token operator">-</span>config<span class="token operator">:</span>
    db<span class="token operator">-</span>config<span class="token operator">:</span>
      id<span class="token operator">-</span>type<span class="token operator">:</span> <span class="token keyword">auto</span>
</code></pre> 
<p>启动项目，出现mybatis-plus日志<br> <img src="https://images2.imgbox.com/38/0c/NmXAWnNo_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="152__150"></a>1.5.2 配置代码生成器</h4> 
<p>1.引入相关依赖</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> mybatis<span class="token operator">-</span>plus 代码生成器<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>baomidou<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>mybatis<span class="token operator">-</span>plus<span class="token operator">-</span>generator<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">3.5</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> mybatis<span class="token operator">-</span>plus代码生成器模板引擎 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>freemarker<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> 
<ol start="2"><li>新建utis包，并在下边创建MybatisPlusGenerator.java代码生成器配置类<br> <img src="https://images2.imgbox.com/88/d7/C7BrrsrW_o.png" alt="在这里插入图片描述"></li></ol> 
<pre><code>package com.buzhisuoyun.base_manage.utils;

import com.baomidou.mybatisplus.generator.FastAutoGenerator;
import com.baomidou.mybatisplus.generator.config.OutputFile;
import com.baomidou.mybatisplus.generator.config.rules.DbColumnType;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;

import java.io.File;
import java.sql.Types;
import java.util.Collections;

public class MybatisPlusGenerator {
    static final String url = "jdbc:mysql://127.0.0.1:3306/base_manage?serverTimezone=UTC";    // 数据库地址
    static final String username = "root";  // 数据库用户名
    static final String password = "root";  // 数据库密码
    static final String authorName = "buzhisuoyun"; // 作者名
    static final String parentPackageNameResource = "com/buzhisuoyun/base_manage";  // mapper.xml路径
    static final String parentPackageNameJava = "com.buzhisuoyun.base_manage";  // java 文件父包名
    // 要生成代码对应的数据表名
    static final String tableName = "user";


    public static void main(String[] args) {

        FastAutoGenerator.create(url, username, password)
                // 1.全局配置
                .globalConfig(builder -&gt; {
                    builder.author(authorName)                // 设置作者
                            .enableSpringdoc()               // 开启 swagger 模式
                            // 获取当前工程路径并定位到项目java目录下
                            .outputDir(System.getProperty("user.dir") + "/src/main/java");            // 指定输出目录
                })

                // 2.数据源配置
                .dataSourceConfig(builder -&gt; builder.typeConvertHandler((globalConfig, typeRegistry, metaInfo) -&gt; {
                    int typeCode = metaInfo.getJdbcType().TYPE_CODE;
                    if (typeCode == Types.SMALLINT) {
                        // 自定义类型转换
                        return DbColumnType.INTEGER;
                    }
                    return typeRegistry.getColumnType(metaInfo);

                }))

                // 3.包名策略配置
                .packageConfig(builder -&gt; {
                    builder.parent(parentPackageNameJava) // 设置父包名
                            .entity("entity")
                            .mapper("mapper")
                            .service("service")
                            .serviceImpl("service.impl")
                            .controller("controller")
                            //.moduleName("system") // 设置父包模块名
                            .pathInfo(Collections.singletonMap(OutputFile.xml, System.getProperty("user.dir") + "/src/main/resources/" + parentPackageNameResource + "/mapper")); // 设置mapperXml生成路径
                })
                // 策略配置
                .strategyConfig(builder -&gt; {
                    builder.addInclude(tableName) // 设置需要生成的表名
                            // 覆盖已生成文件
                            .entityBuilder().enableFileOverride()
                            .mapperBuilder().enableFileOverride()
                            .serviceBuilder().enableFileOverride().formatServiceFileName("%sService");
                            //.addTablePrefix("t_", "c_"); // 设置过滤表前缀

                })

                // 配置模板
                .templateConfig(builder -&gt; {
                    //builder.controller("");         // 不生成controller
                })
                .templateEngine(new FreemarkerTemplateEngine()) // 使用Freemarker引擎模板，默认的是Velocity引擎模板
                .execute();
    }
}
</code></pre> 
<ul><li>修改数据库相关信息</li><li>修改authorName</li><li>修改parentPackageNameResource， parentPackageNameJava</li><li>修改tableName， 要生成代码的数据表名称，多个表使用，分割</li><li>.enableSpringdoc() 可以选择，生成swagger3文档注释<br> 修改完成后运行main函数，生成相应代码，mapper.xml在resource下与java同路径下<br> <img src="https://images2.imgbox.com/44/1e/rSImCExJ_o.png" alt="在这里插入图片描述"><br> 实体类import io.swagger.v3.oas.annotations.media.Schema;报错，是因为swagger3依赖还未导入，下边整合swagger3后就不会报错了</li></ul> 
<h4><a id="153__255"></a>1.5.3 配置分页插件</h4> 
<p>新建config包，并在下边创建配置类MybatisPlusConfig.java<br> <img src="https://images2.imgbox.com/ee/3c/aKDGFlRW_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

import com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>DbType<span class="token punctuation">;</span>
import com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>MybatisPlusInterceptor<span class="token punctuation">;</span>
import com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>inner<span class="token punctuation">.</span>PaginationInnerInterceptor<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>MapperScan<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Bean<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>

@Configuration
@<span class="token function">MapperScan</span><span class="token punctuation">(</span><span class="token string">"com/buzhisuoyun/base_manage/mapper"</span><span class="token punctuation">)</span>
public class MybatisPlusConfig <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 添加分页插件
     */</span>
    @Bean
    public MybatisPlusInterceptor <span class="token function">mybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        MybatisPlusInterceptor interceptor <span class="token operator">=</span> new <span class="token function">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        interceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span>new <span class="token function">PaginationInnerInterceptor</span><span class="token punctuation">(</span>DbType<span class="token punctuation">.</span>MYSQL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果配置多个插件,切记分页最后添加</span>
        <span class="token comment">//interceptor.addInnerInterceptor(new PaginationInnerInterceptor()); 如果有多数据源可以不配具体类型 否则都建议配上具体的DbType</span>
        <span class="token keyword">return</span> interceptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>@MapperScan(“com/buzhisuoyun/base_manage/mapper”) 扫描mapper路劲，也可在启动类配置</p> 
<h3><a id="16_swagger3knife4j_287"></a>1.6 整合swagger3（knife4j）</h3> 
<h4><a id="161__288"></a>1.6.1 整合</h4> 
<p>引入依赖</p> 
<pre><code>&lt;!-- API 文档 knife4j --&gt;
&lt;!-- https://mvnrepository.com/artifact/com.github.xiaoymin/knife4j-openapi3-jakarta-spring-boot-starter --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;
    &lt;artifactId&gt;knife4j-openapi3-jakarta-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;4.5.0&lt;/version&gt;
&lt;/dependency&gt;

</code></pre> 
<p>配置：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">springdoc</span><span class="token expression"><span class="token operator">-</span>openapi 配置</span></span>
springdoc<span class="token operator">:</span>
  swagger<span class="token operator">-</span>ui<span class="token operator">:</span>
    path<span class="token operator">:</span> <span class="token operator">/</span>swagger<span class="token operator">-</span>ui<span class="token punctuation">.</span>html
    tags<span class="token operator">-</span>sorter<span class="token operator">:</span> alpha
    operations<span class="token operator">-</span>sorter<span class="token operator">:</span> alpha
  api<span class="token operator">-</span>docs<span class="token operator">:</span>
    path<span class="token operator">:</span> <span class="token operator">/</span>v3<span class="token operator">/</span>api<span class="token operator">-</span>docs
  group<span class="token operator">-</span>configs<span class="token operator">:</span>
    <span class="token operator">-</span> group<span class="token operator">:</span> <span class="token char">'default'</span>
      paths<span class="token operator">-</span>to<span class="token operator">-</span>match<span class="token operator">:</span> <span class="token char">'/**'</span>
      packages<span class="token operator">-</span>to<span class="token operator">-</span>scan<span class="token operator">:</span> com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">knife</span><span class="token expression"><span class="token number">4</span>j 配置</span></span>
knife4j<span class="token operator">:</span>
  # 是否启用增强
  enable<span class="token operator">:</span> true
  # 开启生产环境屏蔽
  production<span class="token operator">:</span> false
  # 是否认证登录
  basic<span class="token operator">:</span>
    <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">basic</span><span class="token expression">是否开启，默认为false</span></span>
    enable<span class="token operator">:</span> true
    username<span class="token operator">:</span> knife4j
    password<span class="token operator">:</span> knife4j
  setting<span class="token operator">:</span>
    language<span class="token operator">:</span> zh_cn
    enable<span class="token operator">-</span>version<span class="token operator">:</span> true
    enable<span class="token operator">-</span>swagger<span class="token operator">-</span>models<span class="token operator">:</span> true
</code></pre> 
<p>在config下创建配置类</p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

import io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>models<span class="token punctuation">.</span>OpenAPI<span class="token punctuation">;</span>
import io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>models<span class="token punctuation">.</span>info<span class="token punctuation">.</span>Info<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Bean<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>

@Configuration
public class Knife4jConfig <span class="token punctuation">{<!-- --></span>
    @Bean
    public OpenAPI <span class="token function">springShopOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> new <span class="token function">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// 接口文档标题</span>
                <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>new <span class="token function">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"接口文档"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"api接口文档"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"1.0版本"</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>配置完后，启动项目，访问路径<a href="http://localhost:9999/doc.html" rel="nofollow">http://localhost:9999/doc.html</a>，用户名密码就是配置文件中的，结果如图<br> <img src="https://images2.imgbox.com/2b/73/3djyHfCE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="162__361"></a>1.6.2 使用</h4> 
<p>实体类使用@Schema 注解，在mybatis-plus选择的话会自动生成<br> <img src="https://images2.imgbox.com/5f/83/hEFOdl02_o.png" alt="在这里插入图片描述"><br> Conntroller 层使用：</p> 
<pre><code>@Tag(name = "用户接口")
@RestController
@RequestMapping("/user")
public class UserController {
    @Autowired
    private UserService userService;
/**
     * 用户列表分页
     * @param pageSize 每页显示的条数
     * @param currentPage  要查询的页
     * @param name  用户姓名
     * @return  Result&lt;PageResultBean&lt;List&lt;User&gt;&gt;&gt;
     */
    @GetMapping("/pageList")
    @Operation(summary = "用户列表分页查询")
    @Parameters({
            @Parameter(name = "Authorization", in = ParameterIn.HEADER, required = true, description = "token"),
            @Parameter(name = "pageSize", required = true, description = "每页显示的条数"),
            @Parameter(name = "currentPage", required = true, description = "要查询的页"),
            @Parameter(name = "name", description = "用户姓名", required = false)
    })
    public Result&lt;PageResultBean&lt;User&gt;&gt; pageList(@RequestParam int pageSize, @RequestParam int currentPage, @Nullable @RequestParam String name) {
        IPage&lt;User&gt; page = userService.pageList(pageSize, currentPage, name);
        if (page == null) {
            return Result.error("查询失败");
        }
        //PageResultBean&lt;User&gt; pageResultBean = new PageResultBean&lt;User&gt;(page.getTotal(), page.getRecords());
        return Result.success(PageResultBean.getInstance(page.getTotal(), page.getRecords()));

    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/d2/c6/2zMvMbjF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="17__400"></a>1.7 数据交互处理</h3> 
<h4><a id="171__401"></a>1.7.1 响应数据封装（公共返回数据类）</h4> 
<p>封装返回数据封装类，放到common包下：<br> <img src="https://images2.imgbox.com/69/b7/QWihAhsr_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>common<span class="token punctuation">;</span>

import io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span>media<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span>

public class Result<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    @<span class="token function">Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"业务状态码 0：成功  1: 失败"</span><span class="token punctuation">)</span>
    private <span class="token keyword">int</span> code<span class="token punctuation">;</span>        <span class="token comment">// 业务状态码 0：成功  1: 失败</span>
    @<span class="token function">Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"提示信息"</span><span class="token punctuation">)</span>
    private String message<span class="token punctuation">;</span>  <span class="token comment">// 提示信息</span>
    @<span class="token function">Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"返回数据"</span><span class="token punctuation">)</span>
    private T data<span class="token punctuation">;</span>          <span class="token comment">// 响应数据</span>

    public <span class="token function">Result</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">,</span> String message<span class="token punctuation">,</span> T data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 操作成功返回响应结果（带响应数据）</span>
    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> Result<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> <span class="token function">success</span><span class="token punctuation">(</span>E data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> new Result<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"操作成功"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> Result<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> new Result<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"操作成功"</span><span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> Result<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> <span class="token function">error</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> new Result<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> message<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">int</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setCode</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public String <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span>String message<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public T <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span>T data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Override
    public String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Result{"</span> <span class="token operator">+</span>
                <span class="token string">"code="</span> <span class="token operator">+</span> code <span class="token operator">+</span>
                <span class="token string">", message='"</span> <span class="token operator">+</span> message <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", data="</span> <span class="token operator">+</span> data <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="172___472"></a>1.7.2 分页查询返回数据封装</h4> 
<p>封装分页查询数据，放到common包下：<br> <img src="https://images2.imgbox.com/90/3c/ePrxOzBU_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>common<span class="token punctuation">;</span>

import io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span>media<span class="token punctuation">.</span>Schema<span class="token punctuation">;</span>

import java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>

public class PageResultBean<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    @<span class="token function">Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"数据总条数"</span><span class="token punctuation">)</span>
    private Long total<span class="token punctuation">;</span>
    @<span class="token function">Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"当前页数据集合"</span><span class="token punctuation">)</span>
    private List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> items<span class="token punctuation">;</span>

    public <span class="token function">PageResultBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    public <span class="token function">PageResultBean</span><span class="token punctuation">(</span>Long total<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> items<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>total <span class="token operator">=</span> total<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> PageResultBean<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> <span class="token function">getInstance</span><span class="token punctuation">(</span>Long total<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>E<span class="token operator">&gt;</span> items<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> new PageResultBean<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>total<span class="token punctuation">,</span> items<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public Long <span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> total<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setTotal</span><span class="token punctuation">(</span>Long total<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>total <span class="token operator">=</span> total<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> items<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public <span class="token keyword">void</span> <span class="token function">setItems</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> items<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>items <span class="token operator">=</span> items<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="18__519"></a>1.8 全局异常处理</h3> 
<p>创建xception包，在包下放全局异常处理类GlobalExceptionHandler.java，类名放置 位置可以随意，为便于分类整理， 同类包放到一个包下<br> <img src="https://images2.imgbox.com/e6/95/0Wmf4DhE_o.png" alt="xception包"><br> 使用springboot @RestControllerAdvice 注解配置</p> 
<pre><code>package com.buzhisuoyun.base_manage.exception;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.util.StringUtils;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

// 全局异常处理
@RestControllerAdvice
public class GlobalExceptionHandler {
    private final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);
    @ExceptionHandler(Exception.class)
    public Result&lt;String&gt; handlerException(Exception e) {
        logger.warn(e.getMessage());
        return Result.error(StringUtils.hasLength(e.getMessage()) ? e.getMessage() : "操作失败");
    }
}

</code></pre> 
<h3><a id="19_JWTtoken_544"></a>1.9 整合JWT，生成token</h3> 
<p>引入依赖</p> 
<pre><code class="prism language-c"> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jwt <span class="token operator">--</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>auth0<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>java<span class="token operator">-</span>jwt<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">4.4</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre> 
<p>封装工具类， 放到utils包下：</p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>utils<span class="token punctuation">;</span>

import com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>JWT<span class="token punctuation">;</span>
import com<span class="token punctuation">.</span>auth0<span class="token punctuation">.</span>jwt<span class="token punctuation">.</span>algorithms<span class="token punctuation">.</span>Algorithm<span class="token punctuation">;</span>

import java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>
import java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>

public class JwtUtil <span class="token punctuation">{<!-- --></span>
    private <span class="token keyword">static</span> final String KEY <span class="token operator">=</span> <span class="token string">"buzhisuoyun"</span><span class="token punctuation">;</span>   <span class="token comment">// 密钥</span>

    <span class="token comment">// 接收数据，生成token并返回</span>
    public <span class="token keyword">static</span> String <span class="token function">getToken</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> claims<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> JWT<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">"claims"</span><span class="token punctuation">,</span> claims<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span>new <span class="token function">Date</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// 失效时间1小时</span>
                <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>Algorithm<span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>KEY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 接收token,验证并返回数据</span>
    public <span class="token keyword">static</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> <span class="token function">parseToken</span><span class="token punctuation">(</span>String token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> JWT<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span>Algorithm<span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>KEY<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getClaim</span><span class="token punctuation">(</span><span class="token string">"claims"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="110_ThreadLocal__588"></a>1.10 封装ThreadLocal 工具类</h3> 
<p>因项目使用前后端分离，使用ThreadLocal 线程变量存储用户登录信息，替代session</p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>utils<span class="token punctuation">;</span>

public class ThreadLocalUtil <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 提供ThreadLocal 对象</span>
    private <span class="token keyword">static</span> final ThreadLocal<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span> THREAD_LOCAL <span class="token operator">=</span> new ThreadLocal<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 获取存储值</span>
    public <span class="token keyword">static</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> T <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> THREAD_LOCAL<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 存储值</span>
    public <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>Object value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        THREAD_LOCAL<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 清除THREAD_LOCAL 防止内存泄漏</span>
    public <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        THREAD_LOCAL<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="111_MD5_615"></a>1.11 MD5封装</h3> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>utils<span class="token punctuation">;</span>

import java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>MessageDigest<span class="token punctuation">;</span>
import java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>NoSuchAlgorithmException<span class="token punctuation">;</span>

public class Md5Util <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**
     * 默认的密码字符串组合，用来将字节转换成 16 进制表示的字符,apache校验下载的文件的正确性用的就是默认的这个组合
     */</span>
    protected <span class="token keyword">static</span> <span class="token keyword">char</span> hexDigits<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token char">'0'</span><span class="token punctuation">,</span> <span class="token char">'1'</span><span class="token punctuation">,</span> <span class="token char">'2'</span><span class="token punctuation">,</span> <span class="token char">'3'</span><span class="token punctuation">,</span> <span class="token char">'4'</span><span class="token punctuation">,</span> <span class="token char">'5'</span><span class="token punctuation">,</span> <span class="token char">'6'</span><span class="token punctuation">,</span> <span class="token char">'7'</span><span class="token punctuation">,</span> <span class="token char">'8'</span><span class="token punctuation">,</span> <span class="token char">'9'</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">,</span> <span class="token char">'c'</span><span class="token punctuation">,</span> <span class="token char">'d'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'f'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    protected <span class="token keyword">static</span> MessageDigest messagedigest <span class="token operator">=</span> null<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        try <span class="token punctuation">{<!-- --></span>
            messagedigest <span class="token operator">=</span> MessageDigest<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"MD5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token function">catch</span> <span class="token punctuation">(</span>NoSuchAlgorithmException nsaex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Md5Util<span class="token punctuation">.</span>class<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"初始化失败，MessageDigest不支持MD5Util。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            nsaex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 生成字符串的md5校验值
     *
     * @param s
     * @return
     */</span>
    public <span class="token keyword">static</span> String <span class="token function">getMD5String</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">getMD5String</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 判断字符串的md5校验码是否与一个已知的md5码相匹配
     *
     * @param password  要校验的字符串
     * @param md5PwdStr 已知的md5校验码
     * @return
     */</span>
    public <span class="token keyword">static</span> boolean <span class="token function">checkPassword</span><span class="token punctuation">(</span>String password<span class="token punctuation">,</span> String md5PwdStr<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        String s <span class="token operator">=</span> <span class="token function">getMD5String</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>md5PwdStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    public <span class="token keyword">static</span> String <span class="token function">getMD5String</span><span class="token punctuation">(</span>byte<span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        messagedigest<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">bufferToHex</span><span class="token punctuation">(</span>messagedigest<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    private <span class="token keyword">static</span> String <span class="token function">bufferToHex</span><span class="token punctuation">(</span>byte bytes<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">bufferToHex</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    private <span class="token keyword">static</span> String <span class="token function">bufferToHex</span><span class="token punctuation">(</span>byte bytes<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        StringBuffer stringbuffer <span class="token operator">=</span> new <span class="token function">StringBuffer</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> k <span class="token operator">=</span> m <span class="token operator">+</span> n<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l <span class="token operator">=</span> m<span class="token punctuation">;</span> l <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">appendHexPair</span><span class="token punctuation">(</span>bytes<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span> stringbuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> stringbuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    private <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">appendHexPair</span><span class="token punctuation">(</span>byte bt<span class="token punctuation">,</span> StringBuffer stringbuffer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">char</span> c0 <span class="token operator">=</span> hexDigits<span class="token punctuation">[</span><span class="token punctuation">(</span>bt <span class="token operator">&amp;</span> <span class="token number">0xf0</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 取字节中高 4 位的数字转换, &gt;&gt;&gt;</span>
        <span class="token comment">// 为逻辑右移，将符号位一起右移,此处未发现两种符号有何不同</span>
        <span class="token keyword">char</span> c1 <span class="token operator">=</span> hexDigits<span class="token punctuation">[</span>bt <span class="token operator">&amp;</span> <span class="token number">0xf</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 取字节中低 4 位的数字转换</span>
        stringbuffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>c0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stringbuffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 测试</span>
    public <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Md5Util<span class="token punctuation">.</span><span class="token function">getMD5String</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="112_698"></a>1.12登录验证拦截</h3> 
<p>1、创建包interceptors，在包下配置登录拦截器</p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>interceptors<span class="token punctuation">;</span>


import com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>JwtUtil<span class="token punctuation">;</span>
import com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>ThreadLocalUtil<span class="token punctuation">;</span>
import jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletRequest<span class="token punctuation">;</span>
import jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletResponse<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Component<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>HandlerInterceptor<span class="token punctuation">;</span>

import java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span>

@Component
public class LoginInterceptor implements HandlerInterceptor <span class="token punctuation">{<!-- --></span>
    @Override
    public boolean <span class="token function">preHandle</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">)</span> throws Exception <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取token</span>
        String token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Authorization"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 验证token</span>
        try <span class="token punctuation">{<!-- --></span>
            Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> claims <span class="token operator">=</span> JwtUtil<span class="token punctuation">.</span><span class="token function">parseToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 存储业务信息到线程变量</span>
            ThreadLocalUtil<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 放行拦截</span>
            <span class="token keyword">return</span> true<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token function">catch</span> <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 登录信息异常或未登录，http响应状态码为401</span>
            response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 拦截请求</span>
            <span class="token keyword">return</span> false<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    @Override
    public <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> Object handler<span class="token punctuation">,</span> Exception ex<span class="token punctuation">)</span> throws Exception <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 清除ThreadLocal业务数据</span>
        ThreadLocalUtil<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>2、在config包下创建WebConfig配置类，注册登录拦截器</p> 
<pre><code class="prism language-c">package com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

import com<span class="token punctuation">.</span>buzhisuoyun<span class="token punctuation">.</span>base_manage<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>LoginInterceptor<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>InterceptorRegistry<span class="token punctuation">;</span>
import org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>WebMvcConfigurer<span class="token punctuation">;</span>

import java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList<span class="token punctuation">;</span>
import java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>

@Configuration
public class WebConfig implements WebMvcConfigurer <span class="token punctuation">{<!-- --></span>
    @Autowired
    private LoginInterceptor loginInterceptor<span class="token punctuation">;</span>

    @Override
    public <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span>InterceptorRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 配置放行资源</span>
        <span class="token comment">// 无需拦截的接口集合</span>
        List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> ignorePath <span class="token operator">=</span> new ArrayList<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// knife4j(swagger)</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/swagger-resources/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/doc.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/v3/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/webjars/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/static/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/templates/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 登录页面</span>
        ignorePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"/user/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>loginInterceptor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span>ignorePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="113__782"></a>1.13 登录和获取当前用户信息接口处理</h3> 
<pre><code class="prism language-c">	@<span class="token function">PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
    @<span class="token function">Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"用户登录"</span><span class="token punctuation">)</span>
    @<span class="token function">Parameters</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            @<span class="token function">Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"loginName"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"登录名"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> true<span class="token punctuation">,</span> schema <span class="token operator">=</span> @<span class="token function">Schema</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">"sting"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            @<span class="token function">Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"密码"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> true<span class="token punctuation">,</span> schema <span class="token operator">=</span> @<span class="token function">Schema</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">"sting"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    public Result<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token function">login</span><span class="token punctuation">(</span>@RequestBody User user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> null <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getLoginName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> user<span class="token punctuation">.</span><span class="token function">getLoginName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> null <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"用户名密码不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 检验用户名是否存在</span>
        User eruser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findByLoginName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getLoginName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>eruser <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"用户名不存在"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 检验用户密码是否正确</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Md5Util<span class="token punctuation">.</span><span class="token function">getMD5String</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>eruser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> claims <span class="token operator">=</span> new HashMap<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> eruser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> eruser<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"loginName"</span><span class="token punctuation">,</span> eruser<span class="token punctuation">.</span><span class="token function">getLoginName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            String token <span class="token operator">=</span> JwtUtil<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"密码错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



<span class="token comment">/**
     * 获取当前登录用户信息
     * @return  User
     */</span>
    @<span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token string">"/currentUser"</span><span class="token punctuation">)</span>
    @<span class="token function">Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"获取当前登录用户信息"</span><span class="token punctuation">)</span>
    @<span class="token function">Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"Authorization"</span><span class="token punctuation">,</span> in <span class="token operator">=</span> ParameterIn<span class="token punctuation">.</span>HEADER<span class="token punctuation">,</span> required <span class="token operator">=</span> true<span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"token"</span><span class="token punctuation">)</span>
    public Result<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> userSession <span class="token operator">=</span> ThreadLocalUtil<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> userSession<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        User user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"用户状态异常"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>因为是做简单后端项目搭建，所以token存在一定问题，如在修改用户密码后必须强制重新登录或采用redis缓存token,同时验证浏览器token和用户token，或采用第三方认证中心解决等<br> 项目工程结构如图<br> <img src="https://images2.imgbox.com/9b/0d/DafGCIqa_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2__835"></a>2. 前端项目搭建</h2> 
<h3><a id="21__836"></a>2.1 环境准备</h3> 
<pre><code>- node安装
- vscode安装
</code></pre> 
<h3><a id="22_Vue3_839"></a>2.2 创建Vue3项目</h3> 
<p>在将要存放vue3项目的路径打开cmd, 使用以下命令创建项目</p> 
<pre><code class="prism language-c">npm init vue@latest
</code></pre> 
<p><img src="https://images2.imgbox.com/d3/6b/Bu7NCLut_o.png" alt="在这里插入图片描述"><br> 此时项目创建完成，vscode打开项目目录，在资源目录空白右键，打开终端<br> <img src="https://images2.imgbox.com/dc/6b/IUNmYgmA_o.png" alt="在这里插入图片描述"><br> 执行命令 <code>npm install</code>安装依赖，等待安装完成后执行 <code>npm run dev</code> 运行项目<br> <img src="https://images2.imgbox.com/ac/e5/ttqRy7Vq_o.png" alt="在这里插入图片描述"><br> 访问路径可访问项目<br> <img src="https://images2.imgbox.com/31/96/IrllXMLp_o.png" alt="在这里插入图片描述"><br> 在终端ctrl c 可停止运行项目<br> 项目描述如图，图引自黑马开源教程PPT<br> <img src="https://images2.imgbox.com/16/61/LlSEJCD6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23__855"></a>2.3 项目搭建准备</h3> 
<p>说明：项目中使用组合式API<br> 删掉components下所有文件，删除App.vue文件不需要的东西，最后如下所示</p> 
<pre><code>&lt;script setup&gt;

&lt;/script&gt;

&lt;template&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
&lt;/template&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</code></pre> 
<h3><a id="24_Element_Plus__872"></a>2.4 Element Plus 安装使用</h3> 
<ul><li>安装 <code>npm install element-plus --save </code></li><li>引入：在main.js中引入Element Plus（参照官方文档）<a href="https://element.eleme.cn/#/zh-CN/component/quickstart" rel="nofollow">https://element.eleme.cn/#/zh-CN/component/quickstart</a></li></ul> 
<pre><code class="prism language-c">import <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> from <span class="token char">'vue'</span>
import ElementPlus from <span class="token char">'element-plus'</span>
import <span class="token char">'element-plus/dist/index.css'</span>
import App from <span class="token char">'./App.vue'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementPlus<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token char">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>使用： 访问Element官方文档，复制组件代码，修改调整</li></ul> 
<h3><a id="25_axios__888"></a>2.5 axios 安装使用</h3> 
<h4><a id="251__889"></a>2.5.1 安装</h4> 
<pre><code class="prism language-c">npm install axios
</code></pre> 
<h4><a id="252__894"></a>2.5.2 配置（创建实例，配置请求、响应拦截器）</h4> 
<p>在src目录下新建 utils, 并在utils 下创建request.js 进行axios配置<br> <img src="https://images2.imgbox.com/f0/75/Un6IYv46_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token comment">// 请求配置</span>

import axios from <span class="token string">"axios"</span><span class="token punctuation">;</span>

<span class="token comment">// 定义公共前缀，创建请求实例</span>
<span class="token comment">// const baseUrl = "http://localhost:8080";</span>
<span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token char">'/api/'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>baseURL<span class="token punctuation">}</span><span class="token punctuation">)</span>


import <span class="token punctuation">{<!-- --></span> ElMessage <span class="token punctuation">}</span> from <span class="token string">"element-plus"</span>
import <span class="token punctuation">{<!-- --></span> useTokenStore <span class="token punctuation">}</span> from <span class="token string">"@/stores/token.js"</span>
<span class="token comment">// 配置请求拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 请求前回调</span>
        <span class="token comment">// 添加token</span>
        <span class="token keyword">const</span> tokenStore <span class="token operator">=</span> <span class="token function">useTokenStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 判断有无token</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tokenStore<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> tokenStore<span class="token punctuation">.</span>token
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 请求错误的回调</span>
        Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>


import router from <span class="token string">"@/router"</span><span class="token punctuation">;</span>
<span class="token comment">// 添加响应拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    result <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 判断业务状态码</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 操作失败</span>
        ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message <span class="token operator">?</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message <span class="token operator">:</span> <span class="token char">'服务异常'</span><span class="token punctuation">)</span>
        <span class="token comment">// 异步操作的状态转换为失败</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    err <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 判断响应状态码， 401为未登录，提示登录并跳转到登录页面</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token char">'请先登录'</span><span class="token punctuation">)</span>
            router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char">'/login'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token char">'服务异常'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 异步操作的状态转换为失败</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

export <span class="token keyword">default</span> instance

</code></pre> 
<h4><a id="253__959"></a>2.5.3 配置跨域</h4> 
<p>在vite.config.js 中defineConfig配置代理，实现跨域</p> 
<pre><code class="prism language-c">server<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token char">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">// 获取路径中包含了/api的请求</span>
            target<span class="token operator">:</span> <span class="token char">'http://localhost:9999'</span><span class="token punctuation">,</span>        <span class="token comment">// 服务端地址</span>
            changeOrigin<span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token comment">// 修改源</span>
            rewrite<span class="token operator">:</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token operator">^</span>\<span class="token operator">/</span>api<span class="token operator">/</span><span class="token punctuation">,</span> <span class="token char">''</span><span class="token punctuation">)</span>   <span class="token comment">// api 替换为 ''</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e8/d9/wC6HIytI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="26_Vue_Router__975"></a>2.6 Vue Router 安装使用</h3> 
<ul><li>安装 <code>npm install vue-router@4</code></li><li>在src/router/index.js中创建路由器，并导出</li></ul> 
<pre><code class="prism language-c"><span class="token comment">// 导入vue-router</span>
import <span class="token punctuation">{<!-- --></span>createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">}</span> from <span class="token char">'vue-router'</span>

<span class="token comment">// 导入组件</span>
import LoginVue from <span class="token char">'@/views/Login.vue'</span>
import LayoutVue from <span class="token char">'@/views/Layout.vue'</span>
import UserList from <span class="token char">'@/views/user/UserList.vue'</span>
import EditPassword from <span class="token char">'@/views/user/EditPassword.vue'</span>
import DisplayUser from <span class="token char">'@/views/user/DisplayUser.vue'</span>

<span class="token comment">// 定义路由关系</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>path<span class="token operator">:</span> <span class="token char">'/login'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> LoginVue<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        path<span class="token operator">:</span> <span class="token char">'/'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> LayoutVue<span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token char">''</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{<!-- --></span>path<span class="token operator">:</span> <span class="token char">'/user/userlist'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"/user/userlist"</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UserList<span class="token punctuation">,</span> meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                title<span class="token operator">:</span> <span class="token string">"用户列表"</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span>path<span class="token operator">:</span> <span class="token char">'/user/editpassword'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"/user/editpassword"</span><span class="token punctuation">,</span> component<span class="token operator">:</span> EditPassword<span class="token punctuation">,</span> meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                title<span class="token operator">:</span> <span class="token string">"修改密码"</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span>path<span class="token operator">:</span> <span class="token char">'/user/displayuser'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"/user/displayuser"</span><span class="token punctuation">,</span> component<span class="token operator">:</span> DisplayUser<span class="token punctuation">,</span> meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                title<span class="token operator">:</span> <span class="token string">"个人信息"</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// 创建路由器 </span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

export <span class="token keyword">default</span> router
</code></pre> 
<ul><li>在vue应用实例中使用vue-router</li></ul> 
<pre><code class="prism language-c">在main<span class="token punctuation">.</span>js 中

import router from <span class="token char">'@/router'</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
</code></pre> 
<ul><li>声明router-view标签，展示组件内容</li></ul> 
<pre><code class="prism language-c">在app<span class="token punctuation">.</span>vue 中

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="27_Pinia_1035"></a>2.7 Pinia状态管理库</h3> 
<ul><li>安装 <code>npm install pinia</code></li></ul> 
<h3><a id="271_Piniapersist_1037"></a>2.7.1 Pinia持久化插件-persist</h3> 
<ul><li>安装persist npm install pinia-persistedstate-plugin</li><li>在pinia中使用persist</li></ul> 
<pre><code class="prism language-c">main<span class="token punctuation">.</span>js

import <span class="token punctuation">{<!-- --></span>createPersistedState<span class="token punctuation">}</span> from'pinia<span class="token operator">-</span>persistedstate<span class="token operator">-</span>plugin’ <span class="token keyword">const</span> persist <span class="token operator">=</span> <span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
pinia<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>persist<span class="token punctuation">)</span>
</code></pre> 
<ul><li> <p>定义状态Store时指定持久化配置参数<br> <img src="https://images2.imgbox.com/75/f5/YqgNysA1_o.png" alt="在这里插入图片描述"></p> </li><li> <p>在src/stores/下定义token.js和userInfo.js 用来存储token和用户相关信息</p> </li></ul> 
<pre><code>token.js

// 定义 store
import { defineStore } from "pinia"
import {ref} from 'vue'
/*
    第一个参数:名字,唯一性
    第二个参数:函数,函数的内部可以定义状态的所有内容

    返回值: 函数
 */
export const useTokenStore = defineStore('token', () =&gt; {
    // 响应式变量
    const token = ref('')

    // 修改token值函数
    const setToken = (newToken) =&gt; {
        token.value = newToken
    }

    // 移除token值函数
    const removeToke = () =&gt; {
        token.value = ''
    }

    return {
        token, setToken, removeToke
    }
}, 
{
    persist: true   // 持久化存储
}
)
</code></pre> 
<pre><code class="prism language-c">userInfo<span class="token punctuation">.</span>js 

import <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> from <span class="token string">"pinia"</span>
import <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span> from <span class="token char">'vue'</span>

<span class="token keyword">const</span> useUserInfoStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token char">'userInfo'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token keyword">const</span> setInfo <span class="token operator">=</span> <span class="token punctuation">(</span>newInfo<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        info<span class="token punctuation">.</span>value <span class="token operator">=</span> newInfo
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> removeInfo <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        info<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>info<span class="token punctuation">,</span> setInfo<span class="token punctuation">,</span> removeInfo<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{<!-- --></span>
    persist<span class="token operator">:</span> true
<span class="token punctuation">}</span>
<span class="token punctuation">)</span>

export <span class="token keyword">default</span> useUserInfoStore<span class="token punctuation">;</span>
</code></pre> 
<ul><li>在组件中使用store 示例</li></ul> 
<pre><code class="prism language-c">import <span class="token punctuation">{<!-- --></span>userLoginService<span class="token punctuation">}</span> from <span class="token char">'@/api/user.js'</span>
import <span class="token punctuation">{<!-- --></span>useTokenStore<span class="token punctuation">}</span> from <span class="token char">'@/stores/token.js'</span>
import <span class="token punctuation">{<!-- --></span>useRouter<span class="token punctuation">}</span> from <span class="token char">'vue-router'</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> tokenStore <span class="token operator">=</span> <span class="token function">useTokenStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token function">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 校验表单</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ruleFormRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"校验"</span><span class="token punctuation">)</span>
    await ruleFormRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token function">async</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"校验成功"</span><span class="token punctuation">)</span>
            <span class="token comment">// 调用接口,完成登录</span>
            let result <span class="token operator">=</span> await <span class="token function">userLoginService</span><span class="token punctuation">(</span>registerData<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/* if(result.code===0){
                alert(result.msg? result.msg : '登录成功')
            }else{
                alert('登录失败')
            } */</span>
            <span class="token comment">//alert(result.msg? result.msg : '登录成功')</span>
            ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>msg <span class="token operator">?</span> result<span class="token punctuation">.</span>msg <span class="token operator">:</span> <span class="token char">'登录成功'</span><span class="token punctuation">)</span>
            <span class="token comment">//token存储到pinia中</span>
            tokenStore<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
            <span class="token comment">//跳转到首页 路由完成跳转</span>
            router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"校验失败"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>



<span class="token comment">// 配置请求拦截器</span>
instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 请求前回调</span>
        <span class="token comment">// 添加token</span>
        <span class="token keyword">const</span> tokenStore <span class="token operator">=</span> <span class="token function">useTokenStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 判断有无token</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tokenStore<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> tokenStore<span class="token punctuation">.</span>token
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> config
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 请求错误的回调</span>
        Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="28__1170"></a>2.8 搭建管理页面基础框架</h3> 
<h4><a id="281_srcapihttpuserjs__1171"></a>2.8.1 在src下创建api目录，次目录存放请求http方法的封装，创建user.js， 里边写封装请求方法</h4> 
<pre><code class="prism language-c">import request from <span class="token string">"@/utils/request.js"</span>

<span class="token comment">// 登录接口调用函数</span>
export <span class="token keyword">const</span> userLoginService <span class="token operator">=</span> <span class="token punctuation">(</span>loginData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token char">'/user/login'</span><span class="token punctuation">,</span> loginData<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取当前登录用户信息</span>
export <span class="token keyword">const</span> currentUserService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'/user/currentUser'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取所有用户信息</span>
export <span class="token keyword">const</span> allUserService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'/user/userList'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 分页查询</span>
export <span class="token keyword">const</span> pageListService <span class="token operator">=</span> <span class="token punctuation">(</span>pageParam<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'/user/pageList'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>params<span class="token operator">:</span> pageParam<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 新增用户</span>
export <span class="token keyword">const</span> addUserService <span class="token operator">=</span> <span class="token punctuation">(</span>addData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token char">'/user/add'</span><span class="token punctuation">,</span> addData<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 根据id获取用户信息</span>
export <span class="token keyword">const</span> getUserById <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'/user/getuserById'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>params<span class="token operator">:</span> id<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 修改用户信息</span>
export <span class="token keyword">const</span> updateUserService <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token char">'/user/update'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 删除用户</span>
export <span class="token keyword">const</span> deleteByIdService <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"deleteRequestid:"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token char">'/user/delete/'</span> <span class="token operator">+</span> id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="282__1217"></a>2.8.2 登录页面</h4> 
<ul><li>安装 <code>npm install sass -D</code></li></ul> 
<p>在src下创建views目录,用于存放vue页面组件<br> <img src="https://images2.imgbox.com/2a/d5/12PVXLDG_o.png" alt="在这里插入图片描述"><br> 登录 Login.vue</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
import <span class="token punctuation">{<!-- --></span> User<span class="token punctuation">,</span> Lock <span class="token punctuation">}</span> from <span class="token char">'@element-plus/icons-vue'</span>
import <span class="token punctuation">{<!-- --></span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> from <span class="token char">'vue'</span>
import <span class="token punctuation">{<!-- --></span> ElMessage <span class="token punctuation">}</span> from <span class="token char">'element-plus'</span>
<span class="token comment">//定义数据模型</span>
<span class="token keyword">const</span> registerData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    loginName<span class="token operator">:</span> <span class="token char">'admin'</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span><span class="token char">'admin'</span><span class="token punctuation">,</span>
    rePassword<span class="token operator">:</span> <span class="token char">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 定义表单组件的引用</span>
<span class="token keyword">const</span> ruleFormRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span>

<span class="token comment">//定义表单校验规则</span>
<span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    loginName<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span> required<span class="token operator">:</span> true<span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token char">'请输入用户名'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token char">'blur'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> min<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token char">'长度为5~16位非空字符'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token char">'blur'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    password<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span> required<span class="token operator">:</span> true<span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token char">'请输入密码'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token char">'blur'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> min<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token char">'长度为5~16位非空字符'</span><span class="token punctuation">,</span> trigger<span class="token operator">:</span> <span class="token char">'blur'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//绑定数据,复用注册表单的数据模型</span>
<span class="token comment">//表单数据校验</span>
<span class="token comment">//登录函数</span>
import <span class="token punctuation">{<!-- --></span>userLoginService<span class="token punctuation">}</span> from <span class="token char">'@/api/user.js'</span>
import <span class="token punctuation">{<!-- --></span>useTokenStore<span class="token punctuation">}</span> from <span class="token char">'@/stores/token.js'</span>
import <span class="token punctuation">{<!-- --></span>useRouter<span class="token punctuation">}</span> from <span class="token char">'vue-router'</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> tokenStore <span class="token operator">=</span> <span class="token function">useTokenStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token function">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 校验表单</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ruleFormRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token keyword">return</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"校验"</span><span class="token punctuation">)</span>
    await ruleFormRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token function">async</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"校验成功"</span><span class="token punctuation">)</span>
            <span class="token comment">// 调用接口,完成登录</span>
            let result <span class="token operator">=</span> await <span class="token function">userLoginService</span><span class="token punctuation">(</span>registerData<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/* if(result.code===0){
                alert(result.msg? result.msg : '登录成功')
            }else{
                alert('登录失败')
            } */</span>
            <span class="token comment">//alert(result.msg? result.msg : '登录成功')</span>
            ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>msg <span class="token operator">?</span> result<span class="token punctuation">.</span>msg <span class="token operator">:</span> <span class="token char">'登录成功'</span><span class="token punctuation">)</span>
            <span class="token comment">//token存储到pinia中</span>
            tokenStore<span class="token punctuation">.</span><span class="token function">setToken</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
            <span class="token comment">//跳转到首页 路由完成跳转</span>
            router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"校验失败"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//定义函数,清空数据模型的数据</span>
<span class="token keyword">const</span> clearRegisterData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>
    registerData<span class="token punctuation">.</span>value<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
        loginName<span class="token operator">:</span> <span class="token char">''</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span><span class="token char">''</span><span class="token punctuation">,</span>
        rePassword<span class="token operator">:</span><span class="token char">''</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>row class<span class="token operator">=</span><span class="token string">"login-page"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">"12"</span> class<span class="token operator">=</span><span class="token string">"bg"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">"6"</span> <span class="token operator">:</span>offset<span class="token operator">=</span><span class="token string">"3"</span> class<span class="token operator">=</span><span class="token string">"form"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 登录表单 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>form ref<span class="token operator">=</span><span class="token string">"ruleFormRef"</span> <span class="token operator">:</span>model<span class="token operator">=</span>registerData size<span class="token operator">=</span><span class="token string">"large"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"loginName"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>input <span class="token operator">:</span>prefix<span class="token operator">-</span>icon<span class="token operator">=</span><span class="token string">"User"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入用户名"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"registerData.loginName"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>input name<span class="token operator">=</span><span class="token string">"password"</span> <span class="token operator">:</span>prefix<span class="token operator">-</span>icon<span class="token operator">=</span><span class="token string">"Lock"</span> type<span class="token operator">=</span><span class="token string">"password"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入密码"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"registerData.password"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item class<span class="token operator">=</span><span class="token string">"flex"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"flex"</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>记住我<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>el<span class="token operator">-</span>link type<span class="token operator">=</span><span class="token string">"primary"</span> <span class="token operator">:</span>underline<span class="token operator">=</span><span class="token string">"false"</span><span class="token operator">&gt;</span>忘记密码？<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>link<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 登录按钮 <span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>button class<span class="token operator">=</span><span class="token string">"button"</span> type<span class="token operator">=</span><span class="token string">"primary"</span> <span class="token keyword">auto</span><span class="token operator">-</span>insert<span class="token operator">-</span>space @click<span class="token operator">=</span><span class="token string">"login"</span><span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span> scoped<span class="token operator">&gt;</span>
<span class="token comment">/* 样式 */</span>
<span class="token punctuation">.</span>login<span class="token operator">-</span>page <span class="token punctuation">{<!-- --></span>
    height<span class="token operator">:</span> <span class="token number">100</span>vh<span class="token punctuation">;</span>
    background<span class="token operator">-</span>color<span class="token operator">:</span> #fff<span class="token punctuation">;</span>

    <span class="token punctuation">.</span>bg <span class="token punctuation">{<!-- --></span>
        background<span class="token operator">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token char">'@/assets/login_bg.jpg'</span><span class="token punctuation">)</span> no<span class="token operator">-</span>repeat center <span class="token operator">/</span> cover<span class="token punctuation">;</span>
        border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">0</span> <span class="token number">20</span>px <span class="token number">20</span>px <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span>form <span class="token punctuation">{<!-- --></span>
        display<span class="token operator">:</span> flex<span class="token punctuation">;</span>
        flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
        user<span class="token operator">-</span>select<span class="token operator">:</span> none<span class="token punctuation">;</span>

        <span class="token punctuation">.</span>title <span class="token punctuation">{<!-- --></span>
            margin<span class="token operator">:</span> <span class="token number">0</span> <span class="token keyword">auto</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">.</span>button <span class="token punctuation">{<!-- --></span>
            width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">.</span>flex <span class="token punctuation">{<!-- --></span>
            width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
            display<span class="token operator">:</span> flex<span class="token punctuation">;</span>
            justify<span class="token operator">-</span>content<span class="token operator">:</span> space<span class="token operator">-</span>between<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="283__1359"></a>2.8.3 布局页面</h4> 
<ul><li>Layout .vue</li></ul> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
import LeftLayout from <span class="token char">'./LeftLayout.vue'</span>
import Header from <span class="token char">'./Header.vue'</span>
import MainView from <span class="token char">'./MainView.vue'</span>

import <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span> from <span class="token char">'vue'</span>
<span class="token keyword">const</span> isCollapse <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span>
<span class="token keyword">const</span> parentClick <span class="token operator">=</span> <span class="token punctuation">(</span>isCollapseValue<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    isCollapse<span class="token punctuation">.</span>value <span class="token operator">=</span> isCollapseValue<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isCollapse<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>


<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"common-layout"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>LeftLayout <span class="token operator">:</span>isCollapse<span class="token operator">=</span><span class="token char">'isCollapse'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>header style<span class="token operator">=</span><span class="token string">"padding: 0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Header @parentClick<span class="token operator">=</span><span class="token char">'parentClick'</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>
        
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>main style<span class="token operator">=</span><span class="token string">"padding: 16px 8px 6px 8px"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>MainView<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>footer<span class="token operator">&gt;</span>后台 ©<span class="token number">2024</span> Created by buzhisuoyun<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>footer<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
    <span class="token punctuation">.</span>el<span class="token operator">-</span>footer <span class="token punctuation">{<!-- --></span>
        display<span class="token operator">:</span> flex<span class="token punctuation">;</span>
        align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
        font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
        color<span class="token operator">:</span> #<span class="token number">666</span><span class="token punctuation">;</span>
        height<span class="token operator">:</span> <span class="token number">38</span>px<span class="token punctuation">;</span>
        padding<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        background<span class="token operator">-</span>color<span class="token operator">:</span> #FFFFFF<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>LeftLayout.vue</li></ul> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>el<span class="token operator">-</span>row class<span class="token operator">=</span><span class="token string">"tac"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu
        <span class="token keyword">default</span><span class="token operator">-</span>active<span class="token operator">=</span><span class="token string">"2"</span>
        class<span class="token operator">=</span><span class="token string">"el-menu-vertical-demo"</span>
        <span class="token operator">:</span>collapse<span class="token operator">=</span><span class="token string">"isCollapse"</span>
        <span class="token operator">:</span>router<span class="token operator">=</span><span class="token string">"true"</span>
      <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 标题 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"containerdiv"</span><span class="token operator">&gt;</span>  
            <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"../assets/favicon.ico"</span> alt<span class="token operator">=</span><span class="token string">"Your Image"</span> class<span class="token operator">=</span><span class="token string">"image"</span><span class="token operator">&gt;</span>  
            <span class="token operator">&lt;</span>span class<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">&gt;</span>后台管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>  
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 菜单 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu index<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>template #title<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Share <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>API管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/api/apilist"</span><span class="token operator">&gt;</span>API列表<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"1-2"</span><span class="token operator">&gt;</span>item two<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"1-3"</span><span class="token operator">&gt;</span>item three<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu index<span class="token operator">=</span><span class="token string">"1-4"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>template #title<span class="token operator">&gt;</span>item four<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"1-4-1"</span><span class="token operator">&gt;</span>item one<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>icon<span class="token operator">-</span>menu <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Navigator Two<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"3"</span> disabled<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>document <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Navigator Three<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"4"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>setting <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Navigator Four<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu index<span class="token operator">=</span><span class="token string">"5"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>template #title<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>UserFilled <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>用户管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/user/userlist"</span><span class="token operator">&gt;</span>用户列表<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/user/displayuser"</span><span class="token operator">&gt;</span>个人信息<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item index<span class="token operator">=</span><span class="token string">"/user/editpassword"</span><span class="token operator">&gt;</span>修改密码<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>sub<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">"ts"</span> setup<span class="token operator">&gt;</span>
import <span class="token punctuation">{<!-- --></span>
  Document<span class="token punctuation">,</span>
  Menu as IconMenu<span class="token punctuation">,</span>
  Location<span class="token punctuation">,</span>
  Share<span class="token punctuation">,</span>
  UserFilled<span class="token punctuation">,</span>
  Setting<span class="token punctuation">,</span>
<span class="token punctuation">}</span> from <span class="token char">'@element-plus/icons-vue'</span>
import <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">,</span> defineProps<span class="token punctuation">}</span> from <span class="token char">'vue'</span>

type Props <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    isCollapse<span class="token operator">:</span> boolean
<span class="token punctuation">}</span>
defineProps<span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
    <span class="token punctuation">.</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>vertical<span class="token operator">-</span>demo <span class="token punctuation">{<!-- --></span>
        height<span class="token operator">:</span> <span class="token number">100</span>vh<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>el<span class="token operator">-</span>menu<span class="token operator">-</span>item <span class="token punctuation">{<!-- --></span>
        min<span class="token operator">-</span>width<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>containerdiv <span class="token punctuation">{<!-- --></span>  
        <span class="token comment">/* 你可以设置容器的样式，例如宽度、高度、背景色等 */</span>  
        <span class="token comment">/* width: 300px; /* 示例宽度 */</span>  
        height<span class="token operator">:</span> <span class="token number">48</span>px<span class="token punctuation">;</span>  
        
        padding<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span> <span class="token comment">/* 内边距 */</span>  
        border<span class="token operator">-</span>bottom<span class="token operator">:</span> <span class="token number">2</span>px solid<span class="token punctuation">;</span> <span class="token comment">/* 设置下边框宽度和样式 */</span>  
        border<span class="token operator">-</span>bottom<span class="token operator">-</span>color<span class="token operator">:</span> #F5F5F5<span class="token punctuation">;</span> <span class="token comment">/* 设置下边框颜色为红色 */</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token punctuation">.</span>image <span class="token punctuation">{<!-- --></span>  
        display<span class="token operator">:</span> <span class="token keyword">inline</span><span class="token operator">-</span>block<span class="token punctuation">;</span>  
        vertical<span class="token operator">-</span>align<span class="token operator">:</span> middle<span class="token punctuation">;</span> <span class="token comment">/* 图片与文字垂直居中对齐 */</span>  
        margin<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">6</span>px<span class="token punctuation">;</span> <span class="token comment">/* 图片右边距，可选 */</span>  
        width<span class="token operator">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>  
    
    <span class="token punctuation">.</span>text <span class="token punctuation">{<!-- --></span>  
        display<span class="token operator">:</span> <span class="token keyword">inline</span><span class="token operator">-</span>block<span class="token punctuation">;</span>  
        vertical<span class="token operator">-</span>align<span class="token operator">:</span> middle<span class="token punctuation">;</span> <span class="token comment">/* 文字与图片垂直居中对齐 */</span>  
        font<span class="token operator">-</span>weight<span class="token operator">:</span> bold<span class="token punctuation">;</span> <span class="token comment">/* 加粗文字 */</span>  
        font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>Heard.vue</li></ul> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> div left <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 折叠按钮<span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div @click<span class="token operator">=</span><span class="token string">"toggleCollapse()"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon size<span class="token operator">=</span><span class="token string">"24"</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">"!isMenuOpen"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Fold <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon size<span class="token operator">=</span><span class="token string">"24"</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">"isMenuOpen"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>Expand <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 面包屑 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>breadcrumb separator<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>breadcrumb<span class="token operator">-</span>item <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"{ path: '/' }"</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>breadcrumb<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, index) in breadList"</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>breadcrumb<span class="token operator">-</span>item
                        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"item.name"</span>
                        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"index"</span>
                        <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"item.path"</span>
                    <span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> item<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>breadcrumb<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>breadcrumb<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> div right <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token operator">&gt;</span>账号：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>userData<span class="token punctuation">.</span>loginName<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>avatar<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>userData<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>avatar<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon size<span class="token operator">=</span><span class="token string">"24"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>MoreFilled <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #dropdown<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>UserFilled <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>个人信息
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>EditPen <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>修改密码
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>ArrowLeft <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>icon<span class="token operator">&gt;</span>退出登录
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
    import <span class="token punctuation">{<!-- --></span>
        Fold<span class="token punctuation">,</span>
        Expand<span class="token punctuation">,</span>
        MoreFilled<span class="token punctuation">,</span>
        EditPen<span class="token punctuation">,</span>
        ArrowLeft<span class="token punctuation">,</span>
        UserFilled
    <span class="token punctuation">}</span> from <span class="token char">'@element-plus/icons-vue'</span>
    import <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">,</span> defineEmits<span class="token punctuation">,</span> watch<span class="token punctuation">}</span> from <span class="token char">'vue'</span>

    <span class="token comment">// 面包屑</span>
    import <span class="token punctuation">{<!-- --></span> useRouter<span class="token punctuation">,</span>useRoute <span class="token punctuation">}</span> from <span class="token char">'vue-router'</span>

    let router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    let route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    let breadList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    let getMatched<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"route.matched:"</span><span class="token punctuation">,</span>route<span class="token punctuation">.</span>matched<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console
        breadList<span class="token punctuation">.</span>value <span class="token operator">=</span> route<span class="token punctuation">.</span>matched<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> item<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getMatched</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> route<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//监听路由路径是否发生变化，之后更改面包屑</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"======"</span><span class="token punctuation">)</span>
        breadList<span class="token punctuation">.</span>value <span class="token operator">=</span> route<span class="token punctuation">.</span>matched<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> 
            item<span class="token punctuation">.</span>meta <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"breadList.value"</span><span class="token punctuation">,</span> breadList<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>



    import useUserInfoStore from <span class="token char">'@/stores/userInfo.js'</span>
    <span class="token keyword">const</span> userInfoStore <span class="token operator">=</span> <span class="token function">useUserInfoStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 用户数据模型</span>
    let userData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        id<span class="token operator">:</span> <span class="token char">''</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token char">''</span><span class="token punctuation">,</span>
        loginName<span class="token operator">:</span> <span class="token char">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>


    import <span class="token punctuation">{<!-- --></span>currentUserService<span class="token punctuation">}</span> from <span class="token char">'@/api/user.js'</span>
    <span class="token comment">// 获取登录用户信息</span>
    <span class="token keyword">const</span> getUser <span class="token operator">=</span> <span class="token function">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        let result <span class="token operator">=</span> await <span class="token function">currentUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// console.log(result)</span>
        userData<span class="token punctuation">.</span>value <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        userInfoStore<span class="token punctuation">.</span><span class="token function">setInfo</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token comment">// console.log("userData:",userData)</span>
    <span class="token punctuation">}</span>
    <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


    <span class="token comment">// 折叠按钮处理</span>
    <span class="token keyword">const</span> emits <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"parentClick"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> isMenuOpen <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span>
    <span class="token keyword">const</span> toggleCollapse <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        isMenuOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token operator">!</span>isMenuOpen<span class="token punctuation">.</span>value
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isMenuOpen<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token function">emits</span><span class="token punctuation">(</span><span class="token string">"parentClick"</span><span class="token punctuation">,</span> isMenuOpen<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>


<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span> scope<span class="token operator">&gt;</span>
    <span class="token punctuation">.</span>container <span class="token punctuation">{<!-- --></span>  
        overflow<span class="token operator">:</span> <span class="token keyword">auto</span><span class="token punctuation">;</span> <span class="token comment">/* 清除浮动影响 */</span>  
        height<span class="token operator">:</span> <span class="token number">48</span>px<span class="token punctuation">;</span>
        padding<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span> <span class="token comment">/* 内边距 */</span>  
        border<span class="token operator">-</span>bottom<span class="token operator">:</span> <span class="token number">2</span>px solid<span class="token punctuation">;</span> <span class="token comment">/* 设置下边框宽度和样式 */</span>  
        border<span class="token operator">-</span>bottom<span class="token operator">-</span>color<span class="token operator">:</span> #F5F5F5<span class="token punctuation">;</span> <span class="token comment">/* 设置下边框颜色为红色 */</span>  
        background<span class="token operator">-</span>color<span class="token operator">:</span> #FFFFFF<span class="token punctuation">;</span>   
    <span class="token punctuation">}</span>  
    
    <span class="token punctuation">.</span>left <span class="token punctuation">{<!-- --></span>  
        height<span class="token operator">:</span> <span class="token number">48</span>px<span class="token punctuation">;</span>
        <span class="token keyword">float</span><span class="token operator">:</span> left<span class="token punctuation">;</span>   
        display<span class="token operator">:</span> flex<span class="token punctuation">;</span>
        align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span> <span class="token comment">/* 垂直居中子项 */</span>  
        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span> <span class="token comment">/* 水平居中子项（如果需要）*/</span> 
    <span class="token punctuation">}</span>  

    <span class="token punctuation">.</span>left <span class="token operator">&gt;</span> div <span class="token punctuation">{<!-- --></span>  
        padding<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span> <span class="token comment">/* 设置直接子元素的 padding */</span>  
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">.</span>right <span class="token punctuation">{<!-- --></span>  
        <span class="token keyword">float</span><span class="token operator">:</span> right<span class="token punctuation">;</span> 
        display<span class="token operator">:</span> flex<span class="token punctuation">;</span> 
        align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span> <span class="token comment">/* 垂直居中子项 */</span>  
        justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span> <span class="token comment">/* 水平居中子项（如果需要）*/</span>   
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>right <span class="token operator">&gt;</span> div <span class="token punctuation">{<!-- --></span>  
        padding<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span> <span class="token comment">/* 设置直接子元素的 padding */</span>  
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>MainView.vue</li></ul> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"app-main"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>transition name<span class="token operator">=</span><span class="token string">"fade-transfrom"</span> mode<span class="token operator">=</span><span class="token string">"out-in"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span>slot<span class="token operator">=</span><span class="token string">"{ Component }"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>transition<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">"Component"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>transition<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"scss"</span> scope<span class="token operator">&gt;</span>
	<span class="token punctuation">.</span>app<span class="token operator">-</span>main<span class="token punctuation">{<!-- --></span>
		width<span class="token operator">:</span><span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
		height<span class="token operator">:</span><span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
        background<span class="token operator">-</span>color<span class="token operator">:</span> #FFFFFF<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>项目结构：<br> <img src="https://images2.imgbox.com/53/a8/dsX585Rt_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3_1698"></a>3.项目代码</h2> 
<p><a href="https://download.csdn.net/download/qq_51355375/89085020">https://download.csdn.net/download/qq_51355375/89085020</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae9696106ae5f21a7744e1e854de0f48/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【开发环境】Mac 安装 Visual Studio Code ② ( 装 C/C&#43;&#43; 扩展 | 安装配置 Code Runner 扩展插件 | 运行 C 语言程序 )</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb0657dd7ba6e7c8ed1405953abf0fe9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI绘画：使用ComfyUI结合LCM进行实时绘图：开启AI艺术创作新篇章</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>