<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>fastapi å­¦ä¹  - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c530826419b3045dc1b02379609797e2/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="fastapi å­¦ä¹ ">
  <meta property="og:description" content="1ã€å‰ç½®çŸ¥è¯†
1.1ã€HTTP åè®®
1.2ã€I/O å¯†é›†å‹å’Œ CPU å¯†é›†å‹
æ…¢æ“ä½œ
è®¡ç®—æœº/ç¨‹åº ğŸ¤–ä¸€äº›ç›¸å¯¹è¾ƒæ…¢ï¼ˆä¸å¤„ç†å™¨å’Œ RAM å­˜å‚¨å™¨çš„é€Ÿåº¦ç›¸æ¯”ï¼‰çš„Â I/OÂ æ“ä½œï¼Œæ¯”å¦‚è¯´ï¼š
â— é€šè¿‡ç½‘ç»œå‘é€æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®
â— å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªç½‘ç»œä¸­çš„æ•°æ®
â— ç£ç›˜ä¸­è¦ç”±ç³»ç»Ÿè¯»å–å¹¶æä¾›ç»™ç¨‹åºçš„æ–‡ä»¶çš„å†…å®¹
â— ç¨‹åºæä¾›ç»™ç³»ç»Ÿçš„è¦å†™å…¥ç£ç›˜çš„å†…å®¹
â— ä¸€ä¸ª API çš„è¿œç¨‹è°ƒç”¨
â— ä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œç›´åˆ°å®Œæˆ
â— ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢ï¼Œç›´åˆ°è¿”å›ç»“æœ
â— ç­‰ç­‰.
I/O å¯†é›†å‹
è¿™ä¸ªæ‰§è¡Œçš„æ—¶é—´å¤§å¤šæ˜¯åœ¨ç­‰å¾…Â I/OÂ æ“ä½œï¼Œå› æ­¤å®ƒä»¬è¢«å«åš â€œI/O å¯†é›†å‹â€ æ“ä½œ
CPU å¯†é›†å‹
å¤§å¤šæ•°æ‰§è¡Œæ—¶é—´æ˜¯ç”±å®é™…å·¥ä½œï¼ˆè€Œä¸æ˜¯ç­‰å¾…ï¼‰å ç”¨çš„ï¼Œå¹¶ä¸”è®¡ç®—æœºä¸­çš„å·¥ä½œæ˜¯ç”±Â CPUÂ å®Œæˆçš„ï¼Œæ‰€ä»¥ä»–ä»¬ç§°è¿™äº›é—®é¢˜ä¸º&#34;CPU å¯†é›†å‹&#34;
CPU å¯†é›†å‹æ“ä½œçš„å¸¸è§ç¤ºä¾‹æ˜¯éœ€è¦å¤æ‚çš„æ•°å­¦å¤„ç†ã€‚
ä¾‹å¦‚ï¼š
â— éŸ³é¢‘æˆ–å›¾åƒå¤„ç†ï¼›
â— è®¡ç®—æœºè§†è§‰: ä¸€å¹…å›¾åƒç”±æ•°ç™¾ä¸‡åƒç´ ç»„æˆï¼Œæ¯ä¸ªåƒç´ æœ‰3ç§é¢œè‰²å€¼ï¼Œå¤„ç†é€šå¸¸éœ€è¦åŒæ—¶å¯¹è¿™äº›åƒç´ è¿›è¡Œè®¡ç®—ï¼›
â— æœºå™¨å­¦ä¹ : å®ƒé€šå¸¸éœ€è¦å¤§é‡çš„&#34;çŸ©é˜µ&#34;å’Œ&#34;å‘é‡&#34;ä¹˜æ³•ã€‚æƒ³è±¡ä¸€ä¸ªåŒ…å«æ•°å­—çš„å·¨å¤§ç”µå­è¡¨æ ¼ï¼Œå¹¶åŒæ—¶å°†æ‰€æœ‰æ•°å­—ç›¸ä¹˜ï¼›
â— æ·±åº¦å­¦ä¹ : è¿™æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå­é¢†åŸŸï¼ŒåŒæ ·é€‚ç”¨ã€‚åªæ˜¯æ²¡æœ‰ä¸€ä¸ªæ•°å­—çš„ç”µå­è¡¨æ ¼å¯ä»¥ç›¸ä¹˜ï¼Œè€Œæ˜¯ä¸€ä¸ªåºå¤§çš„æ•°å­—é›†åˆï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å¤„ç†å™¨æ¥æ„å»ºå’Œä½¿ç”¨è¿™äº›æ¨¡å‹ã€‚
1.3ã€åŒæ­¥å’Œå¼‚æ­¥
åŒæ­¥
å»ç­‰å¾…æ…¢æ“ä½œå®Œæˆçš„ç¡®åˆ‡æ—¶åˆ»ï¼Œè€Œåœ¨æ­¤æœŸé—´ä¸åšä»»ä½•äº‹æƒ…ç›´åˆ°èƒ½å¤Ÿè·å–ä»»åŠ¡ç»“æœæ‰ç»§ç»­å·¥ä½œ
å¼‚æ­¥
ç­‰å¾…æ…¢æ“ä½œğŸ“å®Œæˆçš„è¿™æ®µæ—¶é—´ï¼Œè®¡ç®—æœºå¯ä»¥åšä¸€äº›å…¶ä»–å·¥ä½œ
1.4ã€asyncÂ å’ŒÂ await
ä½¿ç”¨Â async defï¼ŒPython å°±çŸ¥é“åœ¨è¯¥å‡½æ•°ä¸­ï¼Œå®ƒå°†é‡ä¸ŠÂ awaitï¼Œå¹¶ä¸”å®ƒå¯ä»¥&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-25T19:40:23+08:00">
    <meta property="article:modified_time" content="2024-08-25T19:40:23+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">fastapi å­¦ä¹ </h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1ã€å‰ç½®çŸ¥è¯†<br> 1.1ã€HTTP åè®®<br> 1.2ã€I/O å¯†é›†å‹å’Œ CPU å¯†é›†å‹<br> æ…¢æ“ä½œ<br> è®¡ç®—æœº/ç¨‹åº ğŸ¤–ä¸€äº›ç›¸å¯¹è¾ƒæ…¢ï¼ˆä¸å¤„ç†å™¨å’Œ RAM å­˜å‚¨å™¨çš„é€Ÿåº¦ç›¸æ¯”ï¼‰çš„Â I/OÂ æ“ä½œï¼Œæ¯”å¦‚è¯´ï¼š<br> â— é€šè¿‡ç½‘ç»œå‘é€æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®<br> â— å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªç½‘ç»œä¸­çš„æ•°æ®<br> â— ç£ç›˜ä¸­è¦ç”±ç³»ç»Ÿè¯»å–å¹¶æä¾›ç»™ç¨‹åºçš„æ–‡ä»¶çš„å†…å®¹<br> â— ç¨‹åºæä¾›ç»™ç³»ç»Ÿçš„è¦å†™å…¥ç£ç›˜çš„å†…å®¹<br> â— ä¸€ä¸ª API çš„è¿œç¨‹è°ƒç”¨<br> â— ä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œç›´åˆ°å®Œæˆ<br> â— ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢ï¼Œç›´åˆ°è¿”å›ç»“æœ<br> â— ç­‰ç­‰.<br> I/O å¯†é›†å‹<br> è¿™ä¸ªæ‰§è¡Œçš„æ—¶é—´å¤§å¤šæ˜¯åœ¨ç­‰å¾…Â I/OÂ æ“ä½œï¼Œå› æ­¤å®ƒä»¬è¢«å«åš â€œI/O å¯†é›†å‹â€ æ“ä½œ<br> CPU å¯†é›†å‹<br> å¤§å¤šæ•°æ‰§è¡Œæ—¶é—´æ˜¯ç”±å®é™…å·¥ä½œï¼ˆè€Œä¸æ˜¯ç­‰å¾…ï¼‰å ç”¨çš„ï¼Œå¹¶ä¸”è®¡ç®—æœºä¸­çš„å·¥ä½œæ˜¯ç”±Â CPUÂ å®Œæˆçš„ï¼Œæ‰€ä»¥ä»–ä»¬ç§°è¿™äº›é—®é¢˜ä¸º"CPU å¯†é›†å‹"<br> CPU å¯†é›†å‹æ“ä½œçš„å¸¸è§ç¤ºä¾‹æ˜¯éœ€è¦å¤æ‚çš„æ•°å­¦å¤„ç†ã€‚<br> ä¾‹å¦‚ï¼š<br> â— éŸ³é¢‘æˆ–å›¾åƒå¤„ç†ï¼›<br> â— è®¡ç®—æœºè§†è§‰: ä¸€å¹…å›¾åƒç”±æ•°ç™¾ä¸‡åƒç´ ç»„æˆï¼Œæ¯ä¸ªåƒç´ æœ‰3ç§é¢œè‰²å€¼ï¼Œå¤„ç†é€šå¸¸éœ€è¦åŒæ—¶å¯¹è¿™äº›åƒç´ è¿›è¡Œè®¡ç®—ï¼›<br> â— æœºå™¨å­¦ä¹ : å®ƒé€šå¸¸éœ€è¦å¤§é‡çš„"çŸ©é˜µ"å’Œ"å‘é‡"ä¹˜æ³•ã€‚æƒ³è±¡ä¸€ä¸ªåŒ…å«æ•°å­—çš„å·¨å¤§ç”µå­è¡¨æ ¼ï¼Œå¹¶åŒæ—¶å°†æ‰€æœ‰æ•°å­—ç›¸ä¹˜ï¼›<br> â— æ·±åº¦å­¦ä¹ : è¿™æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå­é¢†åŸŸï¼ŒåŒæ ·é€‚ç”¨ã€‚åªæ˜¯æ²¡æœ‰ä¸€ä¸ªæ•°å­—çš„ç”µå­è¡¨æ ¼å¯ä»¥ç›¸ä¹˜ï¼Œè€Œæ˜¯ä¸€ä¸ªåºå¤§çš„æ•°å­—é›†åˆï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å¤„ç†å™¨æ¥æ„å»ºå’Œä½¿ç”¨è¿™äº›æ¨¡å‹ã€‚<br> 1.3ã€åŒæ­¥å’Œå¼‚æ­¥<br> åŒæ­¥<br> å»ç­‰å¾…æ…¢æ“ä½œå®Œæˆçš„ç¡®åˆ‡æ—¶åˆ»ï¼Œè€Œåœ¨æ­¤æœŸé—´ä¸åšä»»ä½•äº‹æƒ…ç›´åˆ°èƒ½å¤Ÿè·å–ä»»åŠ¡ç»“æœæ‰ç»§ç»­å·¥ä½œ<br> å¼‚æ­¥<br> ç­‰å¾…æ…¢æ“ä½œğŸ“å®Œæˆçš„è¿™æ®µæ—¶é—´ï¼Œè®¡ç®—æœºå¯ä»¥åšä¸€äº›å…¶ä»–å·¥ä½œ</p> 
<p>1.4ã€asyncÂ å’ŒÂ await<br> ä½¿ç”¨Â async defï¼ŒPython å°±çŸ¥é“åœ¨è¯¥å‡½æ•°ä¸­ï¼Œå®ƒå°†é‡ä¸ŠÂ awaitï¼Œå¹¶ä¸”å®ƒå¯ä»¥"æš‚åœ" â¸ æ‰§è¡Œè¯¥å‡½æ•°ï¼Œç›´è‡³æ‰§è¡Œå…¶ä»–æ“ä½œ ğŸ”€ åå›æ¥ã€‚</p> 
<p>TODOï¼š async å’Œ await çš„ååŒå·¥ä½œåŸç†è®¾è®¡åˆ°åç¨‹ï¼Œåç»­å¯ä»¥æ·±å…¥ç ”ç©¶<br> async def get_burgers(number: int):<br> # Do some asynchronous stuff to create the burgers<br> return burgers</p> 
<p>@app.get(â€˜/burgersâ€™)<br> async def read_burgers():<br> burgers = await get_burgers(2)<br> return burgers</p> 
<p>æ³¨æ„<br> â— awaitÂ åªèƒ½åœ¨Â async defÂ å®šä¹‰çš„å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚<br> â— awaitå¿…é¡»"ç­‰å¾…"é€šè¿‡Â async defÂ å®šä¹‰çš„å‡½æ•°<br> â— å¸¦Â async defÂ çš„å‡½æ•°ä¹Ÿåªèƒ½åœ¨Â async defÂ å®šä¹‰çš„å‡½æ•°å†…éƒ¨è°ƒç”¨<br> â— é‚£ä¹ˆï¼Œè¿™å…³äºå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜ï¼Œå¦‚ä½•è°ƒç”¨ç¬¬ä¸€ä¸ªÂ asyncÂ å‡½æ•°ï¼Ÿ<br> â—‹ å› ä¸º"ç¬¬ä¸€ä¸ª"å‡½æ•°å°†æ˜¯ä½ çš„è·¯å¾„æ“ä½œå‡½æ•°ï¼ŒFastAPI å°†çŸ¥é“å¦‚ä½•åšæ­£ç¡®çš„äº‹æƒ…</p> 
<p>1.5ã€åç¨‹<br> TODOï¼šæ·±å…¥ç†è§£åç¨‹å¹¶å‘å’Œçº¿ç¨‹å¹¶å‘</p> 
<p>1.6ã€restful api çš„ç†è§£</p> 
<ol><li>å¯¹æ•°æ®çš„ CRUD æ“ä½œï¼Œç”¨ç›¸åŒçš„è¯·æ±‚è·¯å¾„ï¼ˆå³åªå‡ºç°èµ„æºçš„åè¯ï¼Œä¸å‡ºç° getã€add ç­‰åŠ¨è¯ï¼‰</li><li>æ“ä½œçš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨è¯·æ±‚æ–¹æ³•çš„å·®å¼‚ä¸Š</li></ol> 
<p>åœ¨å¼€å‘ API æ—¶ï¼Œä½ é€šå¸¸ä½¿ç”¨ç‰¹å®šçš„ HTTP æ–¹æ³•å»æ‰§è¡Œç‰¹å®šçš„è¡Œä¸ºã€‚<br> é€šå¸¸ä½¿ç”¨ï¼š<br> â— POSTï¼šåˆ›å»ºæ•°æ®ã€‚<br> â— GETï¼šè¯»å–æ•°æ®ã€‚<br> â— PUTï¼šæ›´æ–°æ•°æ®ã€‚<br> â— DELETEï¼šåˆ é™¤æ•°æ®ã€‚</p> 
<p>2ã€quick start<br> pip install fastapi<br> pip install uvicorn</p> 
<p>from fastapi import FastAPI</p> 
<h2><a id="_fastapi__70"></a>åˆ›å»ºä¸€ä¸ª fastapi åº”ç”¨</h2> 
<p>app = FastAPI()</p> 
<h2><a id="_74"></a>æä¾›è®¿é—®æ¥å£</h2> 
<p>@app.get(â€œ/â€)<br> async def root():<br> return {â€œmsgâ€: â€œhello worldâ€}</p> 
<p>2.1ã€shell å¯åŠ¨<br> uvicorn demo_1:app --reload</p> 
<p>æŸ¥çœ‹æ•ˆæœï¼šhttp://127.0.0.1:8000/<br> API æ–‡æ¡£ï¼š<br> http://127.0.0.1:8000/docs<br> http://127.0.0.1:8000/redoc</p> 
<p>2.2ã€py æ–‡ä»¶å¯åŠ¨</p> 
<p>3ã€è·¯å¾„æ“ä½œ<br> 3.1ã€è·¯å¾„æ“ä½œè£…é¥°å™¨</p> 
<h2><a id="_96"></a>å¸¸ç”¨</h2> 
<p>@app.get()<br> @app.post()<br> @app.put()<br> @app.delete()</p> 
<h2><a id="_102"></a>ä¸å¸¸ç”¨</h2> 
<p>@app.patch()<br> @app.options()<br> @app.head()<br> @app.trace()</p> 
<p>3.2ã€å‚æ•°ç®€ä»‹</p> 
<p>3.3ã€è·¯ç”±åˆ†å‘<br> app.include_router ç»Ÿä¸€ç®¡ç†è·¯ç”±</p> 
<p>4ã€è¯·æ±‚ä¸å“åº”<br> å…·è±¡åŒ–ç†è§£è·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°</p> 
<p>4.1ã€è·¯å¾„å‚æ•°<br> æŸ¥è¯¢è·¯å¾„ä¸Šçš„åŠ¨æ€å‚æ•°ï¼Œå¦‚ {user_id}</p> 
<p>å½“åŒ¹é…åˆ°å¤šä¸ªè·¯å¾„æ—¶ï¼Œå“åº”å…ˆå®šä¹‰çš„ï¼Œæµ‹è¯•å¦‚ä¸‹å›¾</p> 
<p>4.2ã€æŸ¥è¯¢å‚æ•°</p> 
<p>Union æ˜¯å½“æœ‰å¤šç§å¯èƒ½çš„æ•°æ®ç±»å‹æ—¶ä½¿ç”¨ï¼Œæ¯”å¦‚å‡½æ•°æœ‰å¯èƒ½æ ¹æ®ä¸åŒæƒ…å†µæœ‰æ—¶è¿”å›stræˆ–è¿”å›listï¼Œé‚£ä¹ˆå°±å¯ä»¥å†™æˆUnion[list, str]<br> Optional æ˜¯Unionçš„ä¸€ä¸ªç®€åŒ–ï¼Œ å½“ æ•°æ®ç±»å‹ä¸­æœ‰å¯èƒ½æ˜¯Noneæ—¶ï¼Œæ¯”å¦‚æœ‰å¯èƒ½æ˜¯strä¹Ÿæœ‰å¯èƒ½æ˜¯Noneï¼Œåˆ™Optional[str], ç›¸å½“äºUnion[str, None]</p> 
<p>4.3ã€è¯·æ±‚ä½“æ•°æ®<br> å½“ä½ éœ€è¦å°†æ•°æ®ä»å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚æµè§ˆå™¨ï¼‰å‘é€ç»™ API æ—¶ï¼Œä½ å°†å…¶ä½œä¸ºã€Œè¯·æ±‚ä½“ã€å‘é€ã€‚è¯·æ±‚ä½“æ˜¯å®¢æˆ·ç«¯å‘é€ç»™ API çš„æ•°æ®ã€‚å“åº”ä½“æ˜¯ API å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®ã€‚<br> FastAPI åŸºäºÂ PydanticÂ ï¼ŒPydanticÂ ä¸»è¦ç”¨æ¥åšç±»å‹å¼ºåˆ¶æ£€æŸ¥ï¼ˆæ ¡éªŒæ•°æ®ï¼‰ã€‚ä¸ç¬¦åˆç±»å‹è¦æ±‚å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p> 
<p>4.4ã€form è¡¨å•<br> åœ¨ OAuth2 è§„èŒƒçš„ä¸€ç§ä½¿ç”¨æ–¹å¼ï¼ˆå¯†ç æµï¼‰ä¸­ï¼Œéœ€è¦å°†ç”¨æˆ·åã€å¯†ç ä½œä¸ºè¡¨å•å­—æ®µå‘é€ï¼Œè€Œä¸æ˜¯ JSONã€‚<br> FastAPI å¯ä»¥ä½¿ç”¨Formç»„ä»¶æ¥æ¥æ”¶è¡¨å•æ•°æ®ï¼Œéœ€è¦å…ˆä½¿ç”¨pip install python-multipartå‘½ä»¤è¿›è¡Œå®‰è£…ã€‚</p> 
<p>4.5ã€æ–‡ä»¶ä¸Šä¼ </p> 
<p>4.6ã€Request å¯¹è±¡<br> æœ‰äº›æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›èƒ½ç›´æ¥è®¿é—®Requestå¯¹è±¡ã€‚ä¾‹å¦‚æˆ‘ä»¬åœ¨è·¯å¾„æ“ä½œå‡½æ•°ä¸­æƒ³è·å–å®¢æˆ·ç«¯çš„IPåœ°å€ï¼Œéœ€è¦åœ¨å‡½æ•°ä¸­å£°æ˜Requestç±»å‹çš„å‚æ•°ï¼ŒFastAPI å°±ä¼šè‡ªåŠ¨ä¼ é€’ Request å¯¹è±¡ç»™è¿™ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å–åˆ° Request å¯¹è±¡åŠå…¶å±æ€§ä¿¡æ¯ï¼Œä¾‹å¦‚ headerã€urlã€cookieã€session ç­‰ã€‚</p> 
<p>4.7ã€è¯·æ±‚é™æ€æ–‡ä»¶<br> æŒ‚è½½é™æ€æ–‡ä»¶</p> 
<p>4.8ã€å“åº”æ¨¡å‹ç›¸å…³å‚æ•°<br> 4.8.1ã€response_model<br> æ§åˆ¶è¿”å›æ•°æ®</p> 
<p>4.8.2ã€response_model_exclude_unset</p> 
<p>è®¾ç½®ä¸º True å’Œ False çš„åŒºåˆ«åœ¨äº è¿”å›ç»“æœæ˜¯å¦æ’é™¤æœªè®¾ç½®çš„å€¼</p> 
<p>4.8.3ã€INCLUDEå’ŒEXCLUDE<br> å“åº”ç»“æœ ï¼šåŒ…å«å’Œæ’é™¤</p> 
<p>5ã€ORM æ“ä½œ<br> SQLAlchemy<br> https://fastapi.tiangolo.com/zh/tutorial/sql-databases</p> 
<p>6ã€ä¸­é—´ä»¶ä¸è·¨åŸŸ<br> import time</p> 
<p>from fastapi import FastAPI, Request</p> 
<p>app = FastAPI()</p> 
<p>@app.middleware(â€œhttpâ€)<br> async def add_process_time_header(request: Request, call_next):<br> start_time = time.time()<br> response = await call_next(request)<br> process_time = time.time() - start_time<br> response.headers[â€œX-Process-Timeâ€] = str(process_time)<br> return response</p> 
<p>import time</p> 
<p>from fastapi import FastAPI, Request</p> 
<p>app = FastAPI()</p> 
<p>@app.middleware(â€œhttpâ€)<br> async def add_process_time_header(request: Request, call_next):<br> start_time = time.time()<br> response = await call_next(request)<br> process_time = time.time() - start_time<br> response.headers[â€œX-Process-Timeâ€] = str(process_time)<br> return response</p> 
<p>from fastapi import FastAPI<br> from fastapi.middleware.cors import CORSMiddleware</p> 
<p>app = FastAPI()</p> 
<p>origins = [<br> â€œhttp://localhost.tiangolo.comâ€,<br> â€œhttps://localhost.tiangolo.comâ€,<br> â€œhttp://localhostâ€,<br> â€œhttp://localhost:8080â€,<br> ]</p> 
<p>app.add_middleware(<br> CORSMiddleware,<br> allow_origins=origins,<br> allow_credentials=True,<br> allow_methods=[â€œ<em>â€œ],<br> allow_headers=[â€</em>â€],<br> )</p> 
<p>@app.get(â€œ/â€)<br> async def main():<br> return {â€œmessageâ€: â€œHello Worldâ€}</p> 
<p>7ã€via</p> 
<ol><li>https://fastapi.tiangolo.com/zh</li><li>https://www.bilibili.com/video/BV1Ya4y1D7et</li><li>https://cloud.tencent.com/developer/article/2067969</li><li>https://wenku.csdn.net/answer/1fa1ii7en6</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1488e3efc65046fb7f4a244a9b857858/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Androidå¸¸è§å¸ƒå±€æ§ä»¶ï¼ˆå››ï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e40a55e06910c96cbb1c0b131c1d075/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">æ•°æ®ç»“æ„ã€é“¾è¯•ç»“æ„äºŒå‰æ ‘ã€‘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>