<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3项目 - Eslint 配置代码风格（保存格式化） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ba16749d2c6312819e3f2e506b806a25/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="vue3项目 - Eslint 配置代码风格（保存格式化）">
  <meta property="og:description" content="一配置文件 1.1 .eslintrc.cjs // @ts-check const { defineConfig } = require(&#39;eslint-define-config&#39;) module.exports = defineConfig({ root: true, env: { browser: true, node: true, es6: true }, parser: &#39;vue-eslint-parser&#39;, parserOptions: { parser: &#39;@typescript-eslint/parser&#39;, ecmaVersion: 2020, sourceType: &#39;module&#39;, jsxPragma: &#39;React&#39;, ecmaFeatures: { jsx: true } }, extends: [ &#39;plugin:vue/vue3-recommended&#39;, &#39;plugin:@typescript-eslint/recommended&#39;, &#39;prettier&#39;, &#39;plugin:prettier/recommended&#39; ], rules: { &#39;vue/no-setup-props-destructure&#39;: &#39;off&#39;, &#39;vue/script-setup-uses-vars&#39;: &#39;error&#39;, &#39;vue/no-reserved-component-names&#39;: &#39;off&#39;, &#39;@typescript-eslint/ban-ts-ignore&#39;: &#39;off&#39;, &#39;@typescript-eslint/explicit-function-return-type&#39;: &#39;off&#39;, &#39;@typescript-eslint/no-explicit-any&#39;: &#39;off&#39;, &#39;@typescript-eslint/no-var-requires&#39;: &#39;off&#39;, &#39;@typescript-eslint/no-empty-function&#39;: &#39;off&#39;, &#39;vue/custom-event-name-casing&#39;: &#39;off&#39;, &#39;no-use-before-define&#39;: &#39;off&#39;, &#39;@typescript-eslint/no-use-before-define&#39;: &#39;off&#39;, &#39;@typescript-eslint/ban-ts-comment&#39;: &#39;off&#39;, &#39;@typescript-eslint/ban-types&#39;: &#39;off&#39;, &#39;@typescript-eslint/no-non-null-assertion&#39;: &#39;off&#39;, &#39;@typescript-eslint/explicit-module-boundary-types&#39;: &#39;off&#39;, &#39;@typescript-eslint/no-unused-vars&#39;: &#39;off&#39;, &#39;no-unused-vars&#39;: &#39;off&#39;, &#39;space-before-function-paren&#39;: &#39;off&#39;, &#39;vue/attributes-order&#39;: &#39;off&#39;, &#39;vue/one-component-per-file&#39;: &#39;off&#39;, &#39;vue/html-closing-bracket-newline&#39;: &#39;off&#39;, &#39;vue/max-attributes-per-line&#39;: &#39;off&#39;, &#39;vue/multiline-html-element-content-newline&#39;: &#39;off&#39;, &#39;vue/singleline-html-element-content-newline&#39;: &#39;off&#39;, &#39;vue/attribute-hyphenation&#39;: &#39;off&#39;, &#39;vue/require-default-prop&#39;: &#39;off&#39;, &#39;vue/require-explicit-emits&#39;: &#39;off&#39;, &#39;vue/html-self-closing&#39;: [ &#39;error&#39;, { html: { void: &#39;always&#39;, normal: &#39;never&#39;, component: &#39;always&#39; }, svg: &#39;always&#39;, math: &#39;always&#39; } ], &#39;vue/multi-word-component-names&#39;: &#39;off&#39;, &#39;vue/no-v-html&#39;: &#39;off&#39;, &#39;vue/require-toggle-inside-transition&#39;: &#39;off&#39; } }) 1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-11T10:23:17+08:00">
    <meta property="article:modified_time" content="2024-05-11T10:23:17+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3项目 - Eslint 配置代码风格（保存格式化）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2> 一配置文件</h2> 
<h3>1.1 .eslintrc.cjs</h3> 
<pre><code>// @ts-check
const { defineConfig } = require('eslint-define-config')
module.exports = defineConfig({
  root: true,
  env: {
    browser: true,
    node: true,
    es6: true
  },
  parser: 'vue-eslint-parser',
  parserOptions: {
    parser: '@typescript-eslint/parser',
    ecmaVersion: 2020,
    sourceType: 'module',
    jsxPragma: 'React',
    ecmaFeatures: {
      jsx: true
    }
  },
  extends: [
    'plugin:vue/vue3-recommended',
    'plugin:@typescript-eslint/recommended',
    'prettier',
    'plugin:prettier/recommended'
  ],
  rules: {
    'vue/no-setup-props-destructure': 'off',
    'vue/script-setup-uses-vars': 'error',
    'vue/no-reserved-component-names': 'off',
    '@typescript-eslint/ban-ts-ignore': 'off',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/no-explicit-any': 'off',
    '@typescript-eslint/no-var-requires': 'off',
    '@typescript-eslint/no-empty-function': 'off',
    'vue/custom-event-name-casing': 'off',
    'no-use-before-define': 'off',
    '@typescript-eslint/no-use-before-define': 'off',
    '@typescript-eslint/ban-ts-comment': 'off',
    '@typescript-eslint/ban-types': 'off',
    '@typescript-eslint/no-non-null-assertion': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-unused-vars': 'off',
    'no-unused-vars': 'off',
    'space-before-function-paren': 'off',
 
    'vue/attributes-order': 'off',
    'vue/one-component-per-file': 'off',
    'vue/html-closing-bracket-newline': 'off',
    'vue/max-attributes-per-line': 'off',
    'vue/multiline-html-element-content-newline': 'off',
    'vue/singleline-html-element-content-newline': 'off',
    'vue/attribute-hyphenation': 'off',
    'vue/require-default-prop': 'off',
    'vue/require-explicit-emits': 'off',
    'vue/html-self-closing': [
      'error',
      {
        html: {
          void: 'always',
          normal: 'never',
          component: 'always'
        },
        svg: 'always',
        math: 'always'
      }
    ],
    'vue/multi-word-component-names': 'off',
    'vue/no-v-html': 'off',
    'vue/require-toggle-inside-transition': 'off'
  }
})</code></pre> 
<h3 id="eslint&amp;prettier-prettier.config.js">1.2 prettier.config.js</h3> 
<pre><code>
export default {
  printWidth: 100, // 一行最多多少字符
  tabWidth: 2, // 缩进的宽度，2 个空格
  useTabs: false, // 是否使用制表符，不使用制表符，使用空格
  semi: false, // 语句结尾是否使用分号
  bracketSpacing: true, // 大括号 {} 中开始和结束是否要空格，true — { foo: 1 }，false — {foo: 1}
  trailingComma: 'none', // 数组或对象或参数的最后一项是否尾随逗号，none — 没有尾随逗号，all — 尽可能使用尾随逗号，es5 — 在 ES5 中有效的尾随逗号（对象、数组等），TypeScript 和 Flow 类型参数中的尾随逗号。
  arrowParens: 'always', // 只有一个参数的箭头函数是否带括号，always — 始终带括号，avoid — 不带括号
  proseWrap: 'always', // 什么对代码进行折行，always — 如果超过 printWidth 指定的一行最多字符宽度，则进行折行；never — 将每块代码块展开成一行；preserve — 什么都不做，保持原样。
  htmlWhitespaceSensitivity: 'strict', // 根据显示样式决定 html 要不要折行
  endOfLine: 'auto', // 每行的结束符（回车符、换行符），取值请参考 https://www.prettier.cn/docs/options.html#end-of-line
  // 每个文件格式化的范围是文件的全部内容
  rangeStart: 0,
  rangeEnd: Infinity,
  // 不需要写文件开头的@prettier
  requirePragma: false,
  // 不需要自动在文件开头插入@prettier
  insertPragma: false,
}</code></pre> 
<h3>1.3 本地setting</h3> 
<pre><code class="hljs">{
  "workbench.colorTheme": "Visual Studio Dark",
  "editor.accessibilitySupport": "off",
  "git.autofetch": true,
  "editor.tabSize": 2,
  "security.workspace.trust.untrustedFiles": "open",
  "gitlens.views.branches.branches.layout": "list",
  "editor.fontSize": 15,
  "GitCommitPlugin.ShowEmoji": false,
  "workbench.editorAssociations": {
      "git-rebase-todo": "gitlens.rebase"
  },
  "[javascript]": {
      "editor.defaultFormatter": "vscode.typescript-language-features"
  },
  "liveServer.settings.donotShowInfoMsg": true,
  "explorer.confirmDelete": false,
  "window.zoomLevel": 1,
  "breadcrumbs.enabled": false,
  "editor.stickyScroll.enabled": false,
  "cSpell.userWords": [
      "consola",
      "iconify",
      "persistedstate",
      "pinia",
      "popconfirm",
      "unplugin",
      "vite"
  ],
  "[vue]": {
      "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "eslint.enable": true,
  "eslint.run": "onType",
  "eslint.options": {
      "extensions": [
          ".js",
          ".ts",
          ".vue",
          ".jsx",
          ".tsx"
      ]
  },
  "eslint.codeActionsOnSave.rules": null,
}</code></pre> 
<h3>1.4他自动保存关闭了，需要手动格式化</h3> 
<p>方式一：</p> 
<p><img alt="" height="392" src="https://images2.imgbox.com/19/43/sl2YR6In_o.png" width="902"></p> 
<p>方式二：</p> 
<p>在代码上局部 格式化</p> 
<p></p> 
<p></p> 
<p>======================</p> 
<h2>二  修改</h2> 
<p>总结：<br><span style="color:#fe2c24;">Prettier  （代码规范的插件，格式化 ）---&gt; 美观</span></p> 
<p><span style="color:#fe2c24;">Eslint  （规范、纠错、检验错误 ）-----&gt; 纠错</span></p> 
<p></p> 
<p>首先，<span style="color:#fe2c24;"><strong>禁用 Prettier 插件，安装 ESLint 插件，配置保存时自动修复</strong></span></p> 
<p>再 <span style="color:#fe2c24;"><strong>配置代码风格文件 .eslintrc.cjs</strong></span>（Prettier 配置 + ESLint 配置，附配置代码）</p> 
<p>配置内容 如，</p> 
<blockquote> 
 <p>Prettier：单引号、无分号、每行宽度限制 80字符、不加对象/数组最后逗号、换行符号不限制（win mac不一样）<br> ESLint：vue组件名称多单词组成（忽略 index.vue）、props解构关闭、未定义变量错误提示<br> 流程：<br>  </p> 
</blockquote> 
<p>流程：</p> 
<p>配置文件 .eslintrc.cjs 文件</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/27/6a/E0g63Gn2_o.png" width="1200"></p> 
<pre><code>rules: {
    // 前置
    // 1. 禁用格式化插件  prettier   format on save 关闭
    // 2. 安装Eslint插件，并配置保存时自动修复
 
    // prettier 专注于美观度
    'prettier/prettier': [
      'warn',
      {
        singleQuote: true, // 单引号
        semi: false, // 无分号
        printWidth: 80, // 每行宽度至多80字符
        trailingComma: 'none', // 不加对象|数组最后逗号
        endOfLine: 'auto' // 换行符号不限制（win mac 不一致）
      }
    ],
 
    // ESLint专注于规范，不符合规范 则报错
    'vue/multi-word-component-names': [
      'warn',
      {
        ignores: ['index'] // vue组件名称多单词组成（忽略index.vue / index.vue除外）
      }
    ],
    'vue/no-setup-props-destructure': ['off'], // 关闭 props 解构的校验（props解构丢失响应式）
    // 添加未定义变量错误提示，create-vue@3.6.3 关闭，这里加上是为了支持下一个章节演示
    'no-undef': 'error'
}</code></pre> 
<p></p> 
<p><span style="color:#fe2c24;"><strong>检查，禁用 Prettier 插件</strong></span>，采用 package.json 中的 prettier</p> 
<p><img alt="" height="553" src="https://images2.imgbox.com/8d/05/sBTBy6oQ_o.png" width="1200"></p> 
<p><img alt="" height="431" src="https://images2.imgbox.com/90/7b/MF1T6Q8x_o.png" width="973"></p> 
<p><span style="color:#fe2c24;"><strong>安装 ESLint 插件</strong> </span></p> 
<p><img alt="" height="323" src="https://images2.imgbox.com/71/c4/xSW1EZXw_o.png" width="1200">在设置中，<span style="color:#fe2c24;"><strong>配置保存时自动修复</strong>，</span>（不要开启默认的自动保存格式化）</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/74/cf/3gsaDAc4_o.png" width="1200"></p> 
<p><img alt="" height="724" src="https://images2.imgbox.com/d0/c6/o75u2oQo_o.png" width="1128"></p> 
<p> 保存时自动修复，代码如下</p> 
<pre><code>    // 二则冲突。可以达成vue2和vue3的统一
    // ESlint插件 + Vscode配置 实现自动格式化修复
    "editor.codeActionsOnSave": {
        "source.fixAll": true
    },
    // 关闭保存自动格式化
    "editor.formatOnSave": false,</code></pre> 
<p>此时，保存 可自动根据规范 进行代码修复。</p> 
<p>参考：<a href="https://blog.csdn.net/weixin_42479421/article/details/135174123" title="vue3项目 - Eslint 配置代码风格_eslint配置模板-CSDN博客">vue3项目 - Eslint 配置代码风格_eslint配置模板-CSDN博客</a></p> 
<h2>三 仍有爆红</h2> 
<h5>禁用插件vetur</h5> 
<p><img alt="" height="241" src="https://images2.imgbox.com/52/3a/HL9Vy7w0_o.png" width="1079"></p> 
<p>最后重启vscode就可以啦！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9ffaad9a42e2a076b9025ff524b0bbbf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用ffmpeg.js在Web上实现流媒体处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4b65057ca51400f1f39ea91faf0c5ae8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自行搭建rustdesk服务器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>