<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>项目设计：基于Qt和百度AI的车牌识别系统(嵌入式ARM) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/fb1a6ce29cb82e6cfb777112020f9386/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="项目设计：基于Qt和百度AI的车牌识别系统(嵌入式ARM)">
  <meta property="og:description" content="基于Qt和百度AI智能云实现的智能车牌识别系统，具体可实现为停车场管理系统、智能计费停车系统…等。
注：详细资料/教程/帮助请联系作者（见文末）。
1.系统实现思路及框架 1.1实现思路 要实现一个车牌识别系统，有多种方法，例如用opencv图像算法实现，或用第三方算法接口，选择一种合适的方式。除算法部分外，还需要有用户交互界面即UI，UI界面的实现也有多种方法，也需要多种方法对比选出适合的一种。
此外，还有很重要的一项，用哪种语言实现，如C/C&#43;&#43;，python，java …等。
1.1.1系统功能需求 要做一个项目，首先要明确系统的功能有哪些，再根据功能思考该如何实现。该项目的功能有如下：
打开摄像头并能实时显示画面；车牌识别，能准确识别出摄像头拍到的车牌号码；识别到车牌后，能显示车牌号码，并截下车辆图片；若是车库或收费系统，还需要录入/删除车牌，计费等功能。 关于编译语言，多种语言均可实现，这里选择C/C&#43;&#43;。
1.1.2界面实现 UI界面的实现，本系统选择最常用的QT库，本系统的所有UI界面都能实现，包括各种界面显示，如视频显示，文字/图像等，还有用户交互的部分，如按钮，输入框等操作控件。此外，QT库学习入门快、网上资料教程多等也是选择的原因之一。
1.1.3车牌识别实现 车牌识别，不选择算法复杂的opencv，而是选用简单调用接口的百度AI平台。用百度AI平台，具体算法方面不用关心，只需要按照其访问要求来对接即可，即发送的内容要按照百度AI定义的协议要求来组织，具体要查看百度AI官方文档，后续再具体讲解。
1.2系统框架 1.2.1硬件框架 系统的硬件主要分为两大部分：PC主机和ARM开发板，即需要一块ARM-Linux开发板（带屏幕），一个摄像头，一台PC主机，一根网线（开发板与PC主机连接）。
硬件框架
1.2.2软件框架 系统的软件框架主要分为三大部分：前台（ARM开发板）、后台（PC主机）、百度智能云。
前台（ARM开发板）主要功能是采集图像、信息显示等；后台（PC主机，ubuntu）主要是车牌管理（录入/删除车牌等）、对接百度智能云平台；百度智能云主要是识别车牌信息。
2.系统开发环境搭建 PC主机的运行环境是在windows上运行的虚拟机ubuntu系统。
2.1 Qt开发环境 界面采用QT进行开发，主要安装qt creator即可。
qt creator安装程序是图形化界面的，像在windows上安装软件一样，比较简单，不再累述。
2.2百度AI开发环境 与百度AI的通信方式是https，因此，百度AI相关的环境主要有OpenSSL库、Curl库和Json库的安装。
2.2.1 OpenSSL库安装 下载openssl库：/source/index.html (openssl.org)
实验版本：openssl-1.1.1s.tar.gz
将openssl库源码包放到ubuntu下，解压出来，并进入解压出来的目录。
配置编译选项：主要配置安装路径
$ ./config –prefix=/usr/local/openssl
编译：
$ make
安装：
$ sudo make install
安装完成，可在安装路径下见到openssl
2.2.2 Curl库安装 下载curl源码包：curl-7.88.0.tar.gz
下载地址：curl downloads
亦可用命令下载：
$ wget https://curl.se/download/curl-7.88.0.tar.gz
将源码包放入ubuntu，解压出来，并进入解压出来的目录：
配置编译选项：指定安装在/usr/local/curl目录，指定openssl的路径，
$ ./configure --prefix=/usr/local/curl --with-ssl=/usr/local/openssl
编译
$ make">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-09T10:49:53+08:00">
    <meta property="article:modified_time" content="2024-03-09T10:49:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">项目设计：基于Qt和百度AI的车牌识别系统(嵌入式ARM)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:justify;">        基于Qt和百度AI智能云实现的智能车牌识别系统，具体可实现为停车场管理系统、智能计费停车系统…等。</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#f9eda6;">注：详细资料/教程/帮助请联系作者（见文末）。</span></p> 
<h2 style="margin-left:0px;text-align:justify;">1.系统实现思路及框架</h2> 
<h3>1.1实现思路</h3> 
<p style="margin-left:0;text-align:justify;">         要实现一个车牌识别系统，有多种方法，例如用opencv图像算法实现，或用第三方算法接口，选择一种合适的方式。除算法部分外，还需要有用户交互界面即UI，UI界面的实现也有多种方法，也需要多种方法对比选出适合的一种。</p> 
<p style="margin-left:0;text-align:justify;">         此外，还有很重要的一项，用哪种语言实现，如C/C++，python，java …等。</p> 
<h4>1.1.1系统功能需求</h4> 
<p style="text-align:justify;">        要做一个项目，首先要明确系统的功能有哪些，再根据功能思考该如何实现。该项目的功能有如下：</p> 
<ol><li style="text-align:justify;">打开摄像头并能实时显示画面；</li><li style="text-align:justify;">车牌识别，能准确识别出摄像头拍到的车牌号码；</li><li style="text-align:justify;">识别到车牌后，能显示车牌号码，并截下车辆图片；</li><li style="text-align:justify;">若是车库或收费系统，还需要录入/删除车牌，计费等功能。</li></ol> 
<p style="margin-left:0;text-align:justify;">关于编译语言，多种语言均可实现，这里选择C/C++。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4>1.1.2界面实现</h4> 
<p style="margin-left:0;text-align:justify;">         UI界面的实现，本系统选择最常用的QT库，本系统的所有UI界面都能实现，包括各种界面显示，如视频显示，文字/图像等，还有用户交互的部分，如按钮，输入框等操作控件。此外，QT库学习入门快、网上资料教程多等也是选择的原因之一。</p> 
<h4>1.1.3车牌识别实现</h4> 
<p style="margin-left:0;text-align:justify;">车牌识别，不选择算法复杂的opencv，而是选用简单调用接口的百度AI平台。用百度AI平台，具体算法方面不用关心，只需要按照其访问要求来对接即可，即发送的内容要按照百度AI定义的协议要求来组织，具体要查看百度AI官方文档，后续再具体讲解。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h3 style="margin-left:0px;text-align:justify;">1.2系统框架</h3> 
<h4 style="margin-left:0px;text-align:justify;">1.2.1硬件框架</h4> 
<p style="margin-left:0;text-align:justify;">        系统的硬件主要分为两大部分：PC主机和ARM开发板，即需要一块ARM-Linux开发板（带屏幕），一个摄像头，一台PC主机，一根网线（开发板与PC主机连接）。</p> 
<p class="img-center"><img alt="" height="141" src="https://images2.imgbox.com/ae/b8/SfMHMuns_o.png" width="446"></p> 
<p style="margin-left:0;text-align:center;">硬件框架</p> 
<h4 style="margin-left:0px;text-align:justify;">1.2.2软件框架</h4> 
<p style="margin-left:0;text-align:justify;">系统的软件框架主要分为三大部分：前台（ARM开发板）、后台（PC主机）、百度智能云。</p> 
<p style="margin-left:0;text-align:justify;">前台（ARM开发板）主要功能是采集图像、信息显示等；后台（PC主机，ubuntu）主要是车牌管理（录入/删除车牌等）、对接百度智能云平台；百度智能云主要是识别车牌信息。</p> 
<p class="img-center"><img alt="" height="231" src="https://images2.imgbox.com/8f/c0/h0whxkyM_o.png" width="545"></p> 
<h2 style="margin-left:0px;text-align:justify;">2.系统开发环境搭建</h2> 
<p style="margin-left:0;text-align:justify;">PC主机的运行环境是在windows上运行的虚拟机ubuntu系统。</p> 
<h3 style="margin-left:0px;text-align:justify;">2.1 Qt开发环境</h3> 
<p style="margin-left:0;text-align:justify;">界面采用QT进行开发，主要安装qt creator即可。</p> 
<p style="margin-left:0;text-align:justify;">qt creator安装程序是图形化界面的，像在windows上安装软件一样，比较简单，不再累述。</p> 
<h3 style="margin-left:0px;text-align:justify;">2.2百度AI开发环境</h3> 
<p style="margin-left:0;text-align:justify;">与百度AI的通信方式是https，因此，百度AI相关的环境主要有OpenSSL库、Curl库和Json库的安装。</p> 
<h4 style="margin-left:0px;text-align:justify;">2.2.1 OpenSSL库安装</h4> 
<p style="margin-left:0;text-align:justify;">下载openssl库：<a href="https://www.openssl.org/source/" rel="nofollow" title="/source/index.html (openssl.org)">/source/index.html (openssl.org)</a></p> 
<p style="margin-left:0;text-align:justify;">实验版本：openssl-1.1.1s.tar.gz</p> 
<p style="margin-left:0;text-align:justify;">将openssl库源码包放到ubuntu下，解压出来，并进入解压出来的目录。</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="190" src="https://images2.imgbox.com/a6/22/dPmwQxOs_o.png" width="572"></p> 
<p style="margin-left:0;text-align:justify;">配置编译选项：主要配置安装路径</p> 
<p style="margin-left:0;text-align:justify;">$ ./config –prefix=/usr/local/openssl</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="348" src="https://images2.imgbox.com/65/57/WDjdOmrt_o.png" width="645"></p> 
<p style="margin-left:0;text-align:justify;">编译：</p> 
<p style="margin-left:0;text-align:justify;">$ make</p> 
<p style="margin-left:0;text-align:justify;">安装：</p> 
<p style="margin-left:0;text-align:justify;">$ sudo make install</p> 
<p style="margin-left:0;text-align:justify;">安装完成，可在安装路径下见到openssl</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="144" src="https://images2.imgbox.com/74/88/nBSCZscp_o.png" width="621"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 style="margin-left:0px;text-align:justify;">2.2.2 Curl库安装</h4> 
<p style="margin-left:0;text-align:justify;">下载curl源码包：curl-7.88.0.tar.gz</p> 
<p style="margin-left:0;text-align:justify;">下载地址：<a href="https://curl.se/download/" rel="nofollow" title="curl downloads">curl downloads</a></p> 
<p style="margin-left:0;text-align:justify;">亦可用命令下载：</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#d9d9d9;"><span style="color:#000000;">$ wget https://curl.se/download/curl-7.88.0.tar.gz</span></span></p> 
<p style="margin-left:0;text-align:justify;">将源码包放入ubuntu，解压出来，并进入解压出来的目录：</p> 
<p class="img-center"><img alt="" height="179" src="https://images2.imgbox.com/ee/60/FyX5frIP_o.png" width="620"></p> 
<p style="margin-left:0;text-align:justify;">配置编译选项：指定安装在/usr/local/curl目录，指定openssl的路径，</p> 
<p style="margin-left:0;text-align:justify;">$ ./configure --prefix=/usr/local/curl --with-ssl=/usr/local/openssl</p> 
<p style="margin-left:0;text-align:justify;">编译</p> 
<p style="margin-left:0;text-align:justify;">$ make</p> 
<p style="margin-left:0;text-align:justify;">安装</p> 
<p style="margin-left:0;text-align:justify;">$ sudo make install</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 style="margin-left:0px;text-align:justify;">2.2.3 Jsoncpp安装</h4> 
<p style="margin-left:0;text-align:justify;">下载jsoncpp库：jsoncpp-master.tar.gz</p> 
<p style="margin-left:0;text-align:justify;"><a href="https://github.com/open-source-parsers/jsoncpp" title="open-source-parsers/jsoncpp: A C++ library for interacting with JSON. (github.com)">open-source-parsers/jsoncpp: A C++ library for interacting with JSON. (github.com)</a></p> 
<p style="margin-left:0;text-align:justify;">把源码包放到ubuntu上，解压出来并进入解压出来的目录：</p> 
<p class="img-center"><img alt="" height="184" src="https://images2.imgbox.com/dd/1e/SfFeoQec_o.png" width="646"></p> 
<p style="margin-left:0;text-align:justify;">执行amalgamate.py脚本，会在当前目录生成dist目录：</p> 
<p class="img-center"><img alt="" height="252" src="https://images2.imgbox.com/dc/d8/sMkvJ3mD_o.png" width="615"></p> 
<p style="margin-left:0;text-align:justify;">dist目录就是我们需要的源码文件，共有3个文件：</p> 
<p style="margin-left:0;text-align:justify;">jsoncpp.cpp、json-forwards.h、json.h</p> 
<p style="margin-left:0;text-align:justify;">将其包含在我们的工程源码一起编译即可使用json接口了。</p> 
<p style="margin-left:0;text-align:justify;">使用时，只需包含头文件json.h</p> 
<p style="margin-left:0;text-align:justify;">#include "json/json.h"</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h2 style="margin-left:0px;text-align:justify;">3.系统实现步骤</h2> 
<p style="margin-left:0;text-align:justify;">        整个系统的实现，分功能分模块逐个实现，由简入深，先表面再内部，就是说，先做界面和图像采集及显示的，然后调前台和后台之间的通信，最后再实现百度AI算法接口的调用。</p> 
<h3 style="margin-left:0px;text-align:justify;">3.1 Qt界面</h3> 
<h4 style="margin-left:0px;text-align:justify;">3.1.1 界面显示及而已</h4> 
<p style="margin-left:0;text-align:justify;">界面显示及布局可直接在Qt creator上添加想要的控件及设定其坐标位置即可，十分的直观快捷。</p> 
<p style="margin-left:0;text-align:justify;">前台界面设计如下：</p> 
<p class="img-center"><img alt="" height="356" src="https://images2.imgbox.com/40/df/pJAw8UOG_o.png" width="590"></p> 
<p style="margin-left:0;text-align:justify;">注：中间大图区域显示摄像头画面，右侧显示识别出来的车牌号信息。</p> 
<p style="margin-left:0;text-align:justify;">后台界面设计如下：</p> 
<p class="img-center"><img alt="" height="363" src="https://images2.imgbox.com/ed/5c/J71c1bi4_o.png" width="600"></p> 
<p style="margin-left:0;text-align:justify;">注：中间大图区域显示摄像头画面或出入记录表格，右侧为识别结果及车牌管理相关功能。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 style="margin-left:0px;text-align:justify;">3.1.2 摄像头图像采集及显示</h4> 
<p style="margin-left:0;text-align:justify;">对摄像头的驱动，采用的是linux系统的V4L2框架，这是linux系统内部的，不需要我们来实现，只管调用即可。</p> 
<p style="margin-left:0;text-align:justify;">V4L2流程：申请若干个buffer，组成一个队列，每个buffer用于存放一帧图像，当摄像头有图像时便会填充到到这些buffer中，要读取数据时实际是取出一个已填充图像的buffer，读完图像又将该buffer塞入队列中。</p> 
<p style="margin-left:0;text-align:justify;">采集到图像后，将送至屏幕显示以及传输给后台并由后台发送到百度AI平台识别，百度AI再返回识别结果，这样图像的流程就走完了。</p> 
<p class="img-center"><img alt="" height="132" src="https://images2.imgbox.com/9e/d5/g1jb3BFy_o.png" width="620"></p> 
<p style="margin-left:0px;text-align:center;">图像流程</p> 
<h3 style="margin-left:0px;text-align:justify;">3.2 前后台通信</h3> 
<p style="margin-left:0;text-align:justify;">前后台通信采用的是socket套接字TCP连接，一切数据交互都是基于TCP连接的，后台为服务器，前台为客户端。</p> 
<p class="img-center"><img alt="" height="148" src="https://images2.imgbox.com/15/d8/GzHeP9ab_o.png" width="358"></p> 
<p style="margin-left:0;text-align:justify;">具体通信数据内容可以定义一种协议，通信双方按照协议所规定的格式对数据进行封装及解析，这种通信内容就清晰可见。本系统的通信协议定义如下：</p> 
<p style="margin-left:0;text-align:justify;">格式如下：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:63.55pt;"> <p style="margin-left:0;text-align:justify;">字段</p> </td><td style="border-color:#000000;vertical-align:top;width:49.6pt;"> <p style="margin-left:0;text-align:justify;">协议头</p> <p style="margin-left:0;text-align:justify;">HEAD</p> </td><td style="border-color:#000000;vertical-align:top;width:43.7pt;"> <p style="margin-left:0;text-align:justify;">校验码</p> <p style="margin-left:0;text-align:justify;">VERIFY</p> </td><td style="border-color:#000000;vertical-align:top;width:51.55pt;"> <p style="margin-left:0;text-align:justify;">顺序号</p> <p style="margin-left:0;text-align:justify;">SEQ</p> </td><td style="border-color:#000000;vertical-align:top;width:51.6pt;"> <p style="margin-left:0;text-align:justify;">命令号</p> <p style="margin-left:0;text-align:justify;">CMD</p> </td><td style="border-color:#000000;vertical-align:top;width:58.7pt;"> <p style="margin-left:0;text-align:justify;">数据长度</p> <p style="margin-left:0;text-align:justify;">LEN</p> </td><td style="border-color:#000000;vertical-align:top;width:44.5pt;"> <p style="margin-left:0;text-align:justify;">数据</p> <p style="margin-left:0;text-align:justify;">DATA</p> </td><td style="border-color:#000000;vertical-align:top;width:51.6pt;"> <p style="margin-left:0;text-align:justify;">协议尾</p> <p style="margin-left:0;text-align:justify;">TAIL</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:63.55pt;"> <p style="margin-left:0;text-align:justify;">内容</p> </td><td style="vertical-align:top;width:49.6pt;"> <p style="margin-left:0;text-align:justify;">0xFF</p> </td><td style="vertical-align:top;width:43.7pt;"> <p style="margin-left:0;text-align:justify;">“ABCD”</p> </td><td style="vertical-align:top;width:51.55pt;"> <p style="margin-left:0;text-align:justify;">0~255</p> </td><td style="vertical-align:top;width:51.6pt;"> <p style="margin-left:0;text-align:justify;">0x00~</p> </td><td style="vertical-align:top;width:58.7pt;"> <p style="margin-left:0;text-align:justify;">…</p> </td><td style="vertical-align:top;width:44.5pt;"> <p style="margin-left:0;text-align:justify;">…</p> </td><td style="vertical-align:top;width:51.6pt;"> <p style="margin-left:0;text-align:justify;">0xFE</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:63.55pt;"> <p style="margin-left:0;text-align:justify;">长度/byte</p> </td><td style="vertical-align:top;width:49.6pt;"> <p style="margin-left:0;text-align:justify;">1</p> </td><td style="vertical-align:top;width:43.7pt;"> <p style="margin-left:0;text-align:justify;">4</p> </td><td style="vertical-align:top;width:51.55pt;"> <p style="margin-left:0;text-align:justify;">1</p> </td><td style="vertical-align:top;width:51.6pt;"> <p style="margin-left:0;text-align:justify;">1</p> </td><td style="vertical-align:top;width:58.7pt;"> <p style="margin-left:0;text-align:justify;">4</p> </td><td style="vertical-align:top;width:44.5pt;"> <p style="margin-left:0;text-align:justify;">LEN</p> </td><td style="vertical-align:top;width:51.6pt;"> <p style="margin-left:0;text-align:justify;">1</p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;">可见，一个协议数据包有头有尾及校验等格式字段，还包含命令号、数据等内容部分，具体的命令号及数据可再自定义，例如登陆的命令号为0x01、发送图像0x02、识别结果0x03等。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h3 style="margin-left:0px;text-align:justify;">3.3 百度AI调用</h3> 
<p style="margin-left:0;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">百度车牌识别：支持识别中国大陆机动车蓝牌、黄牌（单双行）、绿牌、大型新能源（黄绿）、领使馆车牌、警牌、武警牌（单双行）、军牌（单双行）、港澳出入境车牌、农用车牌、民航车牌、非机动车车牌（北京地区）的地域编号和车牌号，并能同时识别图像中的多张车牌。</span></span></p> 
<p style="margin-left:0;"><span style="background-color:#FFFFFF;">         <span style="color:#000000;">百度智能云（百度</span><span style="color:#000000;">AI</span><span style="color:#000000;">）算法接口的调用是基于</span><span style="color:#000000;">http</span><span style="color:#000000;">协议（</span><span style="color:#000000;">Hypertext Transfer Protocol</span><span style="color:#000000;">，超文本传输协议），</span><span style="color:#000000;">http</span><span style="color:#000000;">是一个简单的请求</span><span style="color:#000000;">-</span><span style="color:#000000;">响应协议，它通常运行在</span><span style="color:#000000;">TCP</span><span style="color:#000000;">之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。</span></span></p> 
<h4 style="margin-left:0px;text-align:justify;">3.3.1 创建百度设备</h4> 
<p style="margin-left:0;text-align:justify;">首先要在百度智能云官网上创建自己的账号，然后创建一个人车牌识别的项目/设备，具体操作请自行了解，这里不再展开。</p> 
<h4 style="margin-left:0px;text-align:justify;">3.3.2 鉴权认证</h4> 
<p style="margin-left:0;text-align:justify;">鉴权的主要目的是获取Access_token。Access_token是用户的访问令牌，承载了用户的身份、权限等信息。鉴权主要分为以下两步：1、获取AK/SK；2、获取Access_token。</p> 
<p style="margin-left:0;text-align:justify;">在应用列表下，AK和SK均可见，直接复制即可，后续需要用到，如下：</p> 
<p class="img-center"><img alt="" height="107" src="https://images2.imgbox.com/e4/29/2Id6lx7A_o.png" width="650"></p> 
<p style="margin-left:0;text-align:justify;"><strong>获取Access_token</strong><strong>：</strong></p> 
<p style="margin-left:0;text-align:justify;">百度AI开放平台使用OAuth2.0授权调用开放API，调用API时必须在URL中带上Access_token参数，Access token默认有效期为30天，获取Access_token的流程如下：</p> 
<p style="margin-left:0;text-align:justify;">请求URL数据格式：</p> 
<p style="margin-left:0;text-align:justify;">向授权服务地址https://aip.baidubce.com/oauth/2.0/token发送请求（推荐使用POST），并在URL中带上以下参数：</p> 
<ul><li style="text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#000000;">grant_type</span></strong><strong><span style="color:#000000;">：</span></strong> <span style="color:#000000;">必须参数，固定为</span><span style="background-color:#f5f2f0;"><span style="color:#000000;">client_credentials</span></span><span style="color:#000000;">；</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#000000;">client_id</span></strong><strong><span style="color:#000000;">：</span></strong> <span style="color:#000000;">必须参数，应用的</span><span style="background-color:#f5f2f0;"><span style="color:#000000;">API Key</span></span><span style="color:#000000;">；</span></span></li><li style="text-align:left;"><span style="background-color:#FFFFFF;"><strong><span style="color:#000000;">client_secret</span></strong><strong><span style="color:#000000;">：</span></strong> <span style="color:#000000;">必须参数，应用的</span><span style="background-color:#f5f2f0;"><span style="color:#000000;">Secret Key</span></span><span style="color:#000000;">；</span></span></li></ul> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#000000;">例如：</span></span></p> 
<pre><code class="hljs">https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=Va5yQRHlA4Fq5eR3LT0vuXV4&amp;client_secret=0rDSjzQ20XUj5itV6WRtznPQSzr5pVw2&amp;
</code></pre> 
<p style="margin-left:0;text-align:justify;">获取access_token的C++代码：</p> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
#include &lt;string.h&gt;
#include &lt;curl/curl.h&gt;
#include &lt;json/json.h&gt;
#include &lt;fstream&gt;


inline size_t onWriteData(void * buffer, size_t size, size_t nmemb, void * userp)
{
    std::string * str = dynamic_cast&lt;std::string *&gt;((std::string *)userp);
    str-&gt;append((char *)buffer, size * nmemb);
    return nmemb;
}


int main(int argc, char *argv[])
{
    std::string result;
    CURL *curl;
    CURLcode res;
    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_CUSTOMREQUEST, "POST");
        curl_easy_setopt(curl, CURLOPT_URL, "https://aip.baidubce.com/oauth/2.0/token?client_id=&amp;client_secret=&amp;grant_type=client_credentials");
        curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);
        curl_easy_setopt(curl, CURLOPT_DEFAULT_PROTOCOL, "https");
        struct curl_slist *headers = NULL;
        headers = curl_slist_append(headers, "Content-Type: application/json");
        headers = curl_slist_append(headers, "Accept: application/json");
        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
        const char *data = "";
        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;result);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, onWriteData);
        res = curl_easy_perform(curl);
        std::cout&lt;&lt;result;
    }
    curl_easy_cleanup(curl);
    return (int)res;
}
</code></pre> 
<p style="margin-left:0;text-align:justify;">运行程序后，百度AI服务器返回json文本参数，如下：</p> 
<p class="img-center"><img alt="" height="158" src="https://images2.imgbox.com/dc/aa/RBfKasFe_o.png" width="665"></p> 
<p style="margin-left:0;text-align:justify;">由上可见，成功获取到access_token。</p> 
<p style="margin-left:0;text-align:justify;">后续的算法接口都需要用到该access_token来鉴权验证，否则无法访问。</p> 
<h4 style="margin-left:0px;text-align:justify;">3.3.3 百度AI算法的调用</h4> 
<p style="margin-left:0;text-align:justify;">百度AI算法的调用是基于https协议的，向百度AI服务器使用post发送请求，带上验证信息、图片数据等，百度AI处理post请求并识别图片中的车牌号后，再返回结果。</p> 
<p style="margin-left:0;text-align:justify;">具体post内容如下：</p> 
<p style="margin-left:0;text-align:justify;">HTTP POST请求URL：https://aip.baidubce.com/rest/2.0/ocr/v1/license_plate</p> 
<p style="margin-left:0;text-align:justify;">URL参数：access_token</p> 
<p style="margin-left:0;text-align:justify;">Header如下：</p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:213.05pt;"> <p style="margin-left:0;text-align:justify;">参数</p> </td><td style="border-color:#000000;vertical-align:top;width:213.05pt;"> <p style="margin-left:0;text-align:justify;">值</p> </td></tr><tr><td style="border-color:#000000;vertical-align:top;width:213.05pt;"> <p style="margin-left:0;text-align:justify;">Content-Type</p> </td><td style="vertical-align:top;width:213.05pt;"> <p style="margin-left:0;text-align:justify;">application/x-www-form-urlencoded</p> </td></tr></tbody></table> 
<p style="margin-left:0;text-align:justify;">Body中放置请求参数，参数详情如下：</p> 
<p class="img-center"><img alt="" height="303" src="https://images2.imgbox.com/37/f2/foPp3EQS_o.png" width="681"></p> 
<p style="margin-left:0;text-align:justify;">百度AI处理识别图片后，返回参数如下：</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="514" src="https://images2.imgbox.com/9a/dc/Uarnoypb_o.png" width="865"></p> 
<p style="margin-left:0;text-align:justify;">示例代码，C++如下：</p> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;curl/curl.h&gt;

// libcurl库下载链接：https://curl.haxx.se/download.html
// jsoncpp库下载链接：https://github.com/open-source-parsers/jsoncpp/
const static std::string request_url = "https://aip.baidubce.com/rest/2.0/ocr/v1/license_plate";
static std::string licensePlate_result;
/**
* curl发送http请求调用的回调函数，回调函数中对返回的json格式的body进行了解析，解析结果储存在全局的静态变量当中
* @param 参数定义见libcurl文档
* @return 返回值定义见libcurl文档
*/
static size_t callback(void *ptr, size_t size, size_t nmemb, void *stream) {
    // 获取到的body存放在ptr中，先将其转换为string格式
    licensePlate_result = std::string((char *) ptr, size * nmemb);
    return size * nmemb;
}
/**
* 车牌识别
* @return 调用成功返回0，发生错误返回其他错误码
*/
int licensePlate(std::string &amp;json_result, const std::string &amp;access_token) {
    std::string url = request_url + "?access_token=" + access_token;
    CURL *curl = NULL;
    CURLcode result_code;
    int is_success;
    curl = curl_easy_init();
    if (curl) {
        curl_easy_setopt(curl, CURLOPT_URL, url.data());
        curl_easy_setopt(curl, CURLOPT_POST, 1);
        curl_httppost *post = NULL;
        curl_httppost *last = NULL;
        curl_formadd(&amp;post, &amp;last, CURLFORM_COPYNAME, "image", CURLFORM_COPYCONTENTS, "【base64_img】", CURLFORM_END);

        curl_easy_setopt(curl, CURLOPT_HTTPPOST, post);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, callback);
        result_code = curl_easy_perform(curl);
        if (result_code != CURLE_OK) {
            fprintf(stderr, "curl_easy_perform() failed: %s
",
                    curl_easy_strerror(result_code));
            is_success = 1;
            return is_success;
        }
        json_result = licensePlate_result;
        curl_easy_cleanup(curl);
        is_success = 0;
    } else {
        fprintf(stderr, "curl_easy_init() failed.");
        is_success = 1;
    }
    return is_success;
}
</code></pre> 
<p style="margin-left:0;text-align:justify;">结果返回示例：</p> 
<pre><code class="language-cpp">{
	"words_result": [
		{
			"color": "blue",
			"number": "京KBT355",
			"probability": [
				0.9999992847,
				0.999999404,
				0.9999910593,
				0.9999765158,
				0.999994874,
				0.9998959303,
				0.9999984503
			],
			"vertexes_location": [
				{
					"x": 495,
					"y": 589
				},
				{
					"x": 800,
					"y": 587
				},
				{
					"x": 800,
					"y": 676
				},
				{
					"x": 496,
					"y": 678
				}
			]
		}
	],
	"log_id": "6845817085824549137"
}
</code></pre> 
<p style="margin-left:0;text-align:justify;">从结果可见，可得知车牌号、颜色、位置坐标等信息。</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h2 style="margin-left:0px;text-align:justify;">4. 系统实现效果</h2> 
<p>后台PC端效果图：</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="406" src="https://images2.imgbox.com/aa/fa/kVxyYG2d_o.png" width="634"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="405" src="https://images2.imgbox.com/73/d9/j9hcF82I_o.png" width="634"></p> 
<p style="margin-left:0;text-align:justify;">前面ARM开发板效果图：</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="475" src="https://images2.imgbox.com/04/93/g64Gqy0y_o.png" width="634"></p> 
<p style="margin-left:0;text-align:justify;">最后：</p> 
<p style="margin-left:0;text-align:justify;"><strong>资料/指导答疑/技术交流/选题/帮助，请点链接：</strong></p> 
<p style="margin-left:0;text-align:justify;"><a href="https://gitee.com/zengzhaorong/share_contact/blob/master/linux_face.txt" rel="nofollow" title="linux_face.txt · zengzr/share_contact - Gitee.com">linux_face.txt · zengzr/share_contact - Gitee.com</a></p> 
<p style="margin-left:0;text-align:justify;">如有任何问题，请联系作者，谢谢！</p> 
<p style="margin-left:0;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6d4f235232b3c562f1d0ac3e3925430a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于PCA特征提取的人脸特征数据识别算法matlab仿真</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d53291ada61b96b3e526bd69ce7b323a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue 前端excel表格导入和导出,Element &#43; xlsx 组件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>