<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HBase数据访问的几种方式 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cdb4a6ad3f98e20703abf0886f3f2efd/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="HBase数据访问的几种方式">
  <meta property="og:description" content="1 Python访问HBase RestServer HBase RestServer HBase RESTServer是Apache HBase提供的一个RESTful接口，用于通过HTTP协议与HBase进行交互。通过RESTServer，用户可以方便地通过发送HTTP请求来进行数据的读取、写入和查询操作，无需直接使用HBase的Java API。
首先，我们需要启动HBase RESTServer。在HBase的安装目录下，执行以下命令来启动RESTServer：
./bin/hbase-daemon.sh start rest HBase RestServer的示例 启动后，我们可以通过访问http://localhost:8080来访问RESTServer的Web UI，查看API文档和进行交互。
下面是一个简单的Python代码示例，演示如何通过HBase RESTServer来读取HBase中的数据：
http://localhost:8080/table_name/row_key [GET]
import requests url = &#34;http://localhost:8080/example/table_name/row_key&#34; response = requests.get(url) if response.status_code == 200: data = response.json() print(data) else: print(&#34;Failed to retrieve data&#34;) 或者安装Python三方包: hbase-rest-py
pip install hbase-rest-py from hbase.rest_client import HBaseRESTClient from hbase.scan import Scan from hbase.scan_filter_helper import ( build_base_scanner, build_prefix_filter, build_row_filter, build_value_filter, build_single_column_value_filter ) client = HBaseRESTClient([&#39;http://localhost:8080&#39;]) scanner_def = build_base_scanner(startRow=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-18T15:56:11+08:00">
    <meta property="article:modified_time" content="2024-07-18T15:56:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HBase数据访问的几种方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>1 Python访问HBase RestServer</h3> 
<h4>HBase RestServer</h4> 
<p>HBase RESTServer是Apache HBase提供的一个RESTful接口，用于通过HTTP协议与HBase进行交互。通过RESTServer，用户可以方便地通过发送HTTP请求来进行数据的读取、写入和查询操作，无需直接使用HBase的Java API。</p> 
<p>首先，我们需要启动HBase RESTServer。在HBase的安装目录下，执行以下命令来启动RESTServer：</p> 
<pre><code>./bin/hbase-daemon.sh start rest
</code></pre> 
<h4>HBase RestServer的示例</h4> 
<p>启动后，我们可以通过访问http://localhost:8080来访问RESTServer的Web UI，查看API文档和进行交互。</p> 
<p>下面是一个简单的Python代码示例，演示如何通过HBase RESTServer来读取HBase中的数据：</p> 
<blockquote> 
 <p>http://localhost:8080/table_name/row_key [GET]<br><img alt="" height="132" src="https://images2.imgbox.com/f8/06/DHQAYn03_o.png" width="895"></p> 
</blockquote> 
<pre><code>import requests

url = "http://localhost:8080/example/table_name/row_key"

response = requests.get(url)

if response.status_code == 200:
    data = response.json()
    print(data)
else:
    print("Failed to retrieve data")</code></pre> 
<p>或者安装Python三方包: hbase-rest-py</p> 
<pre><code>pip install hbase-rest-py</code></pre> 
<pre><code>from hbase.rest_client import HBaseRESTClient
from hbase.scan import Scan
from hbase.scan_filter_helper import (
    build_base_scanner,
    build_prefix_filter,
    build_row_filter,
    build_value_filter,
    build_single_column_value_filter
)

client = HBaseRESTClient(['http://localhost:8080'])
scanner_def = build_base_scanner(startRow="start", endRow="end", column=["cf:info"])
flag, res = scan.scan(tbl_name="table_name", scanner_payload=scanner_def)</code></pre> 
<blockquote> 
 <p>更多方法可查看：<a href="https://github.com/samirMoP/hbase-rest-py" title="https://github.com/samirMoP/hbase-rest-py">https://github.com/samirMoP/hbase-rest-py</a></p> 
</blockquote> 
<h4>HBase RestServer的优势</h4> 
<p>易于使用：通过HTTP协议进行交互，无需了解复杂的Java API。<br> 跨平台支持：RESTful接口可以被任何支持HTTP协议的平台和语言所访问。<br> 灵活性：可以方便地与其他系统集成，实现数据的共享和交换。</p> 
<h3>2 Python访问HBase ThriftServer</h3> 
<h4>HBase ThriftServer</h4> 
<p>首先，我们需要启动HBase ThriftServer。在HBase的安装目录下，执行以下命令来启动ThriftServer：</p> 
<pre><code>./bin/hbase-daemon.sh start thrift</code></pre> 
<h4>HBase ThriftServer的示例</h4> 
<p>安装Python三方包: happybase</p> 
<pre><code>pip install happybase</code></pre> 
<p>scan示例</p> 
<pre><code>import happybase

connection = happybase.Connection('localhost')
connection.open()

table = connection.table('table_name')
scan_results = table.scan(row_start='start', row_stop='end')
count = len([x for x in scan_results])

connection.close()
</code></pre> 
<blockquote> 
 <p>更多方法可查看：<a href="https://github.com/python-happybase/happybase" title="https://github.com/python-happybase/happybase">https://github.com/python-happybase/happybase</a></p> 
</blockquote> 
<h4>HBase ThriftServer的优势</h4> 
<p>适合高性能和低延迟需求的场景，特别是需要处理大数据量和高并发查询的场景。</p> 
<ul><li>延迟低，因为 Thrift 协议是二进制协议，序列化和反序列化效率高。</li><li>吞吐量高，适合高并发和大数据量的查询。</li><li>资源使用效率高，尤其是在需要处理大量数据时。</li></ul> 
<h3>3 Java HBase-Client访问HBase</h3> 
<h4>HBase-Client 配置</h4> 
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;
    &lt;artifactId&gt;hbase-client&lt;/artifactId&gt;
    &lt;version&gt;2.5.7&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
             &lt;groupId&gt;log4j&lt;/groupId&gt;
             &lt;artifactId&gt;log4j&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
</code></pre> 
<h4>HBase-Client Java代码示例</h4> 
<pre><code>import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.client.Connection;
import org.apache.hadoop.hbase.client.ConnectionFactory;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.client.Result;
import org.apache.hadoop.hbase.client.ResultScanner;
import org.apache.hadoop.hbase.client.Scan;
import org.apache.hadoop.hbase.client.Table;
import org.apache.hadoop.hbase.util.Bytes;

public class HBaseClientExample {
    public static void main(String[] args) throws Exception {
        // 创建 HBase 配置
        org.apache.hadoop.conf.Configuration config = HBaseConfiguration.create();
        
        // 建立连接
        try (Connection connection = ConnectionFactory.createConnection(config)) {
            // 获取表
            Table table = connection.getTable(org.apache.hadoop.hbase.TableName.valueOf("my_table"));
            
            // 插入数据
            Put put = new Put(Bytes.toBytes("row1"));
            put.addColumn(Bytes.toBytes("cf"), Bytes.toBytes("qual1"), Bytes.toBytes("value1"));
            table.put(put);
            
            // 扫描表
            Scan scan = new Scan();
            try (ResultScanner scanner = table.getScanner(scan)) {
                for (Result result : scanner) {
                    byte[] value = result.getValue(Bytes.toBytes("cf"), Bytes.toBytes("qual1"));
                    System.out.println("Found row: " + Bytes.toString(value));
                }
            }
            
            // 关闭表
            table.close();
        }
    }
}
</code></pre> 
<blockquote> 
 <p>也可以使用spring-boot-starter-hbase进行查询，简化了集成与配置管理，由于增加了一层抽象，性能可能略低于直接使用 <code>hbase-client</code>。</p> 
</blockquote> 
<h4>Java HBase 客户端查询优势</h4> 
<ul><li><strong>直接通信</strong>：Java 客户端直接与 HBase 的 RegionServers 和 ZooKeeper 进行通信，没有中间层，减少了延迟。</li><li><strong>高效协议</strong>：使用 HBase 的原生 RPC 协议（基于 Protobuf），具有高效的二进制序列化和反序列化。</li><li><strong>本地优化</strong>：Java 客户端是 HBase 的原生客户端，经过高度优化，能够充分利用 HBase 提供的所有特性和功能。</li><li><strong>缓存机制</strong>：客户端缓存元数据（如 Region 位置信息），减少了与 ZooKeeper 和RegionServers 的通信频率，提高了性能。</li></ul> 
<h3>4 验证版本</h3> 
<blockquote> 
 <p><span style="color:#0d0016;">HBase 2.3.7</span></p> 
</blockquote> 
<h3>5 参考资料</h3> 
<p><a href="https://blog.51cto.com/u_16213427/11417321" rel="nofollow" title="https://blog.51cto.com/u_16213427/11417321">https://blog.51cto.com/u_16213427/11417321</a></p> 
<p><a href="https://blog.csdn.net/lIujunXHU/article/details/132765602" title="https://blog.csdn.net/lIujunXHU/article/details/132765602">https://blog.csdn.net/lIujunXHU/article/details/132765602</a></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/10b7c90dedf59301fc73e570325a729b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">XLua原理（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98785b0608820b79499b3edbc4ef1325/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">同时安装多个nodejs版本可切换使用，或者用nvm管理、切换nodejs版本（两个详细方法）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>