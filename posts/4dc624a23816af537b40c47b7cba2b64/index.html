<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySql-学生成绩管理系统 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4dc624a23816af537b40c47b7cba2b64/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySql-学生成绩管理系统">
  <meta property="og:description" content="前言 暑假的时候学习过这个 MySql 数据库，然后学校这个学期居然开了这门课程，那就做一个学生成绩管理系统来练一练手吧。在这里做一个简单的练习记录。
需求分析 SQL 编写 新建数据库 为该数据库建表 INSERT INTO 数据 创建索引 创建视图 创建触发器 创建存储过程 SQL 查询进行调试 结语 完整代码如下
-- 1. 新建数据库 drop database studentManage; CREATE DATABASE studentManage; use studentManage; -- 2. 创建表 -- 创建班级表 CREATE TABLE classes ( class_id INT PRIMARY KEY, -- 班级ID，作为主键 class_name VARCHAR(50) -- 班级名称，最大长度为50个字符 ); -- 插入班级数据 INSERT INTO classes (class_id, class_name) VALUES (0, &#39;尖子班&#39;); INSERT INTO classes (class_id, class_name) VALUES (1, &#39;垃圾班&#39;); INSERT INTO classes (class_id, class_name) VALUES (2, &#39;垃圾班&#39;); INSERT INTO classes (class_id, class_name) VALUES (3, &#39;废物班&#39;); INSERT INTO classes (class_id, class_name) VALUES (4, &#39;废物班&#39;); INSERT INTO classes (class_id, class_name) VALUES (5, &#39;脑残班&#39;); -- 创建学生表 CREATE TABLE students ( student_id INT PRIMARY KEY NOT NULL, -- 学生ID，作为主键，不允许为空 name VARCHAR(50), -- 姓名，最大长度为50个字符 class_id INT, -- 班级ID age INT, -- 年龄 FOREIGN KEY (class_id) REFERENCES classes(class_id) -- 外键关联到班级表的班级ID ); -- 插入学生数据 INSERT INTO students (student_id, name, class_id, age) VALUES (1, &#39;王八&#39;, 5, 19); INSERT INTO students (student_id, name, class_id, age) VALUES (2, &#39;王一&#39;, 1, 20); INSERT INTO students (student_id, name, class_id, age) VALUES (3, &#39;小六&#39;, 0, 18); INSERT INTO students (student_id, name, class_id, age) VALUES (4, &#39;王五&#39;, 2, 19); INSERT INTO students (student_id, name, class_id, age) VALUES (5, &#39;赵六&#39;, 3, 20); INSERT INTO students (student_id, name, class_id, age) VALUES (6, &#39;小七&#39;, 4, 18); -- 创建教师表 CREATE TABLE teachers ( teacher_id INT PRIMARY KEY NOT NULL, -- 教师ID，作为主键，不允许为空 teacher_name VARCHAR(50) -- 教师姓名，最大长度为50个字符 ); -- 插入教师数据 INSERT INTO teachers (teacher_id, teacher_name) VALUES (1, &#39;陈老师&#39;); INSERT INTO teachers (teacher_id, teacher_name) VALUES (2, &#39;杨老师&#39;); INSERT INTO teachers (teacher_id, teacher_name) VALUES (4, &#39;何老师&#39;); INSERT INTO teachers (teacher_id, teacher_name) VALUES (4, &#39;刘老师&#39;); INSERT INTO teachers (teacher_id, teacher_name) VALUES (5, &#39;陈老师&#39;); INSERT INTO teachers (teacher_id, teacher_name) VALUES (6, &#39;周老师&#39;); -- 创建课程表 CREATE TABLE courses ( course_id INT PRIMARY KEY NOT NULL, -- 课程ID，作为主键，不允许为空 course_name VARCHAR(50), -- 课程名称，最大长度为50个字符 teacher_id INT, -- 教师ID FOREIGN KEY (teacher_id) REFERENCES teachers(teacher_id) -- 外键关联到教师表的教师ID ); -- 插入课程数据 INSERT INTO courses (course_id, course_name, teacher_id) VALUES (100, &#39;英语&#39;, 1); INSERT INTO courses (course_id, course_name, teacher_id) VALUES (101, &#39;语文&#39;, 2); INSERT INTO courses (course_id, course_name, teacher_id) VALUES (102, &#39;数学&#39;, 3); INSERT INTO courses (course_id, course_name, teacher_id) VALUES (103, &#39;生物&#39;, 4); INSERT INTO courses (course_id, course_name, teacher_id) VALUES (104, &#39;物理&#39;, 5); INSERT INTO courses (course_id, course_name, teacher_id) VALUES (105, &#39;化学&#39;, 6); -- 创建成绩表 CREATE TABLE scores ( student_id INT, -- 学生ID course_id INT, -- 课程ID score INT, -- 分数 FOREIGN KEY (student_id) REFERENCES students(student_id), -- 外键关联到学生表的学生ID FOREIGN KEY (course_id) REFERENCES courses(course_id) -- 外键关联到课程表的课程ID ); -- 插入成绩数据 INSERT INTO scores (student_id, course_id, score) VALUES (1, 1, 92); INSERT INTO scores (student_id, course_id, score) VALUES (2, 1, 8); INSERT INTO scores (student_id, course_id, score) VALUES (3, 1, 5); INSERT INTO scores (student_id, course_id, score) VALUES (4, 1, 0); INSERT INTO scores (student_id, course_id, score) VALUES (5, 1, 8); INSERT INTO scores (student_id, course_id, score) VALUES (6, 1, 7); INSERT INTO scores (student_id, course_id, score) VALUES (1, 2, 100); INSERT INTO scores (student_id, course_id, score) VALUES (2, 2, 8); INSERT INTO scores (student_id, course_id, score) VALUES (3, 2, 5); INSERT INTO scores (student_id, course_id, score) VALUES (4, 2, 2); INSERT INTO scores (student_id, course_id, score) VALUES (5, 2, 8); INSERT INTO scores (student_id, course_id, score) VALUES (6, 2, 7); INSERT INTO scores (student_id, course_id, score) VALUES (1, 1, 100); INSERT INTO scores (student_id, course_id, score) VALUES (2, 2, 1); INSERT INTO scores (student_id, course_id, score) VALUES (3, 3, 7); INSERT INTO scores (student_id, course_id, score) VALUES (4, 4, 10); INSERT INTO scores (student_id, course_id, score) VALUES (5, 5, 10); INSERT INTO scores (student_id, course_id, score) VALUES (6, 6, 60); INSERT INTO scores (student_id, course_id, score) VALUES (1, 1, 100); INSERT INTO scores (student_id, course_id, score) VALUES (2, 2, 22); INSERT INTO scores (student_id, course_id, score) VALUES (3, 3, 71); INSERT INTO scores (student_id, course_id, score) VALUES (4, 4, 20); INSERT INTO scores (student_id, course_id, score) VALUES (5, 5, 30); INSERT INTO scores (student_id, course_id, score) VALUES (6, 6, 40); INSERT INTO scores (student_id, course_id, score) VALUES (1, 1, 100); INSERT INTO scores (student_id, course_id, score) VALUES (2, 2, 14); INSERT INTO scores (student_id, course_id, score) VALUES (3, 3, 72); INSERT INTO scores (student_id, course_id, score) VALUES (4, 4, 11); INSERT INTO scores (student_id, course_id, score) VALUES (5, 5, 11); INSERT INTO scores (student_id, course_id, score) VALUES (6, 6, 62); INSERT INTO scores (student_id, course_id, score) VALUES (1, 1, 100); INSERT INTO scores (student_id, course_id, score) VALUES (2, 2, 12); INSERT INTO scores (student_id, course_id, score) VALUES (3, 3, 73); INSERT INTO scores (student_id, course_id, score) VALUES (4, 4, 14); INSERT INTO scores (student_id, course_id, score) VALUES (5, 5, 15); INSERT INTO scores (student_id, course_id, score) VALUES (6, 6, 66); -- 3.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-30T19:09:51+08:00">
    <meta property="article:modified_time" content="2024-01-30T19:09:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySql-学生成绩管理系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>前言</h3> 
<blockquote> 
 <p>暑假的时候学习过这个 MySql 数据库，然后学校这个学期居然开了这门课程，那就做一个学生成绩管理系统来练一练手吧。在这里做一个简单的练习记录。</p> 
</blockquote> 
<h4><a id="_2"></a>需求分析</h4> 
<h4><a id="SQL__3"></a>SQL 编写</h4> 
<h5><a id="_4"></a>新建数据库</h5> 
<h5><a id="_5"></a>为该数据库建表</h5> 
<h5><a id="INSERT_INTO__6"></a>INSERT INTO 数据</h5> 
<h5><a id="_7"></a>创建索引</h5> 
<h5><a id="_8"></a>创建视图</h5> 
<h5><a id="_9"></a>创建触发器</h5> 
<h5><a id="_10"></a>创建存储过程</h5> 
<h5><a id="SQL__11"></a>SQL 查询进行调试</h5> 
<h3><a id="_12"></a>结语</h3> 
<blockquote> 
 <p>完整代码如下</p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token comment">-- 1. 新建数据库</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> studentManage<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> studentManage<span class="token punctuation">;</span>
<span class="token keyword">use</span> studentManage<span class="token punctuation">;</span>

<span class="token comment">-- 2. 创建表</span>

<span class="token comment">-- 创建班级表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> classes <span class="token punctuation">(</span>
class_id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>  <span class="token comment">-- 班级ID，作为主键</span>
class_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token comment">-- 班级名称，最大长度为50个字符</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入班级数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> classes <span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> class_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'尖子班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> classes <span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> class_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'垃圾班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> classes <span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> class_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'垃圾班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> classes <span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> class_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'废物班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> classes <span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> class_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'废物班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> classes <span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> class_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'脑残班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建学生表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students <span class="token punctuation">(</span>
student_id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token comment">-- 学生ID，作为主键，不允许为空</span>
name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">-- 姓名，最大长度为50个字符</span>
class_id <span class="token keyword">INT</span><span class="token punctuation">,</span>  <span class="token comment">-- 班级ID</span>
age <span class="token keyword">INT</span><span class="token punctuation">,</span>  <span class="token comment">-- 年龄</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> classes<span class="token punctuation">(</span>class_id<span class="token punctuation">)</span>  <span class="token comment">-- 外键关联到班级表的班级ID</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入学生数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'王八'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'王一'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'小六'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'王五'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'赵六'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'小七'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建教师表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> teachers <span class="token punctuation">(</span>
teacher_id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token comment">-- 教师ID，作为主键，不允许为空</span>
teacher_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token comment">-- 教师姓名，最大长度为50个字符</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入教师数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teachers <span class="token punctuation">(</span>teacher_id<span class="token punctuation">,</span> teacher_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'陈老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teachers <span class="token punctuation">(</span>teacher_id<span class="token punctuation">,</span> teacher_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'杨老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teachers <span class="token punctuation">(</span>teacher_id<span class="token punctuation">,</span> teacher_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'何老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teachers <span class="token punctuation">(</span>teacher_id<span class="token punctuation">,</span> teacher_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'刘老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teachers <span class="token punctuation">(</span>teacher_id<span class="token punctuation">,</span> teacher_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'陈老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> teachers <span class="token punctuation">(</span>teacher_id<span class="token punctuation">,</span> teacher_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'周老师'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建课程表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> courses <span class="token punctuation">(</span>
course_id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token comment">-- 课程ID，作为主键，不允许为空</span>
course_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">-- 课程名称，最大长度为50个字符</span>
teacher_id <span class="token keyword">INT</span><span class="token punctuation">,</span>  <span class="token comment">-- 教师ID</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>teacher_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> teachers<span class="token punctuation">(</span>teacher_id<span class="token punctuation">)</span>  <span class="token comment">-- 外键关联到教师表的教师ID</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入课程数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'英语'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token string">'语文'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">,</span> <span class="token string">'数学'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token string">'生物'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">104</span><span class="token punctuation">,</span> <span class="token string">'物理'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">105</span><span class="token punctuation">,</span> <span class="token string">'化学'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建成绩表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> scores <span class="token punctuation">(</span>
student_id <span class="token keyword">INT</span><span class="token punctuation">,</span>  <span class="token comment">-- 学生ID</span>
course_id <span class="token keyword">INT</span><span class="token punctuation">,</span>  <span class="token comment">-- 课程ID</span>
score <span class="token keyword">INT</span><span class="token punctuation">,</span>  <span class="token comment">-- 分数</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>student_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> students<span class="token punctuation">(</span>student_id<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">-- 外键关联到学生表的学生ID</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>course_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> courses<span class="token punctuation">(</span>course_id<span class="token punctuation">)</span>  <span class="token comment">-- 外键关联到课程表的课程ID</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入成绩数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">71</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">73</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 3. 创建索引</span>
<span class="token comment">-- 为学生表的学生ID创建索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_student_id <span class="token keyword">ON</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 为课程表的课程ID创建索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_course_id <span class="token keyword">ON</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 为成绩表的学生ID和课程ID创建联合索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_student_course <span class="token keyword">ON</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 4. 创建视图</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> class_scores <span class="token keyword">AS</span>    
<span class="token keyword">SELECT</span>     
    c<span class="token punctuation">.</span>class_id<span class="token punctuation">,</span>     
    c<span class="token punctuation">.</span>class_name<span class="token punctuation">,</span>     
    <span class="token function">COUNT</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>student_id<span class="token punctuation">)</span> <span class="token keyword">AS</span> student_count<span class="token punctuation">,</span>     
    <span class="token function">AVG</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span> <span class="token keyword">AS</span> average_score    
<span class="token keyword">FROM</span>     
    classes c    
<span class="token keyword">JOIN</span>     
    students s <span class="token keyword">ON</span> c<span class="token punctuation">.</span>class_id <span class="token operator">=</span> s<span class="token punctuation">.</span>class_id    
<span class="token keyword">JOIN</span>
    scores sc <span class="token keyword">ON</span> s<span class="token punctuation">.</span>student_id <span class="token operator">=</span> sc<span class="token punctuation">.</span>student_id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>     
    c<span class="token punctuation">.</span>class_id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>class_name<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> teacher_courses <span class="token keyword">AS</span>  
<span class="token keyword">SELECT</span>   
    t<span class="token punctuation">.</span>teacher_id<span class="token punctuation">,</span>   
    t<span class="token punctuation">.</span>teacher_name<span class="token punctuation">,</span>   
    <span class="token function">COUNT</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>course_id<span class="token punctuation">)</span> <span class="token keyword">AS</span> course_count  
<span class="token keyword">FROM</span>   
    teachers t  
<span class="token keyword">JOIN</span>   
    courses c <span class="token keyword">ON</span> t<span class="token punctuation">.</span>teacher_id <span class="token operator">=</span> c<span class="token punctuation">.</span>teacher_id  
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>   
    t<span class="token punctuation">.</span>teacher_id<span class="token punctuation">,</span> t<span class="token punctuation">.</span>teacher_name<span class="token punctuation">;</span>


<span class="token comment">-- 5. 创建触发器</span>

<span class="token keyword">DELIMITER</span> <span class="token comment">//  </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> check_student_class_id_after_insert  
<span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> students  
<span class="token keyword">FOR EACH ROW</span>  
<span class="token keyword">BEGIN</span>  
    <span class="token keyword">IF</span> NEW<span class="token punctuation">.</span>class_id <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">OR</span> NEW<span class="token punctuation">.</span>class_id <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">THEN</span>  
        SIGNAL SQLSTATE <span class="token string">'45000'</span> <span class="token keyword">SET</span> MESSAGE_TEXT <span class="token operator">=</span> <span class="token string">'必须为新学生分配班级ID'</span><span class="token punctuation">;</span>  
    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>  
<span class="token comment">//  </span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token keyword">DELIMITER</span> <span class="token comment">//  </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> check_course_name_length_before_update  
BEFORE <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> courses  
<span class="token keyword">FOR EACH ROW</span>  
<span class="token keyword">BEGIN</span>  
    <span class="token keyword">IF</span> NEW<span class="token punctuation">.</span>course_name <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token operator">AND</span> LENGTH<span class="token punctuation">(</span>NEW<span class="token punctuation">.</span>course_name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">50</span> <span class="token keyword">THEN</span>  
        SIGNAL SQLSTATE <span class="token string">'45000'</span> <span class="token keyword">SET</span> MESSAGE_TEXT <span class="token operator">=</span> <span class="token string">'课程名称长度不能超过50个字符'</span><span class="token punctuation">;</span>  
    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>  
<span class="token comment">//  </span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token keyword">DELIMITER</span> <span class="token comment">//  </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> check_student_scores_after_delete  
<span class="token keyword">AFTER</span> <span class="token keyword">DELETE</span> <span class="token keyword">ON</span> students  
<span class="token keyword">FOR EACH ROW</span>  
<span class="token keyword">BEGIN</span>  
    <span class="token keyword">DECLARE</span> score_count <span class="token keyword">INT</span><span class="token punctuation">;</span>  
    <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> score_count <span class="token keyword">FROM</span> scores <span class="token keyword">WHERE</span> student_id <span class="token operator">=</span> OLD<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span>  
    <span class="token keyword">IF</span> score_count <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">THEN</span>  
        SIGNAL SQLSTATE <span class="token string">'45000'</span> <span class="token keyword">SET</span> MESSAGE_TEXT <span class="token operator">=</span> <span class="token string">'不能删除有分数记录的学生'</span><span class="token punctuation">;</span>  
    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span><span class="token punctuation">;</span>  
<span class="token comment">//  </span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token comment">-- 6. 创建存储函数</span>
<span class="token comment">-- 存储过程1 - 添加学生</span>
<span class="token keyword">DELIMITER</span> <span class="token comment">//</span>

<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> add_student <span class="token punctuation">(</span>
    <span class="token operator">IN</span> p_student_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_class_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_age <span class="token keyword">INT</span>
<span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> class_id<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>p_student_id<span class="token punctuation">,</span> p_name<span class="token punctuation">,</span> p_class_id<span class="token punctuation">,</span> p_age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token comment">//</span>

<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token comment">-- 存储过程2 - 添加课程</span>
<span class="token keyword">DELIMITER</span> <span class="token comment">//</span>

<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> add_course <span class="token punctuation">(</span>
    <span class="token operator">IN</span> p_course_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_course_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_teacher_id <span class="token keyword">INT</span>
<span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> courses <span class="token punctuation">(</span>course_id<span class="token punctuation">,</span> course_name<span class="token punctuation">,</span> teacher_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>p_course_id<span class="token punctuation">,</span> p_course_name<span class="token punctuation">,</span> p_teacher_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token comment">//</span>

<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token comment">-- 存储过程3 - 添加成绩</span>
<span class="token keyword">DELIMITER</span> <span class="token comment">//</span>

<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> add_score <span class="token punctuation">(</span>
    <span class="token operator">IN</span> p_student_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_course_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    <span class="token operator">IN</span> p_score <span class="token keyword">INT</span>
<span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> scores <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">,</span> score<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>p_student_id<span class="token punctuation">,</span> p_course_id<span class="token punctuation">,</span> p_score<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> <span class="token comment">//</span>

<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token comment">-- 数据更新</span>
<span class="token comment">-- 更新学生的姓名</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'新名字'</span> <span class="token keyword">WHERE</span> student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 更新学生的班级</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> class_id <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">WHERE</span> student_id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">-- 更新学生的年龄</span>
<span class="token keyword">UPDATE</span> students <span class="token keyword">SET</span> age <span class="token operator">=</span> <span class="token number">21</span> <span class="token keyword">WHERE</span> student_id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">-- 更新课程的名称</span>
<span class="token keyword">UPDATE</span> courses <span class="token keyword">SET</span> course_name <span class="token operator">=</span> <span class="token string">'历史'</span> <span class="token keyword">WHERE</span> course_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">-- 更新课程的教师</span>
<span class="token keyword">UPDATE</span> courses <span class="token keyword">SET</span> teacher_id <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">WHERE</span> course_id <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>

<span class="token comment">-- 更新成绩</span>
<span class="token keyword">UPDATE</span> scores <span class="token keyword">SET</span> score <span class="token operator">=</span> <span class="token number">90</span> <span class="token keyword">WHERE</span> student_id <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> course_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>


<span class="token comment">-- 查询特定学生的信息：</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> students <span class="token keyword">WHERE</span> student_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">--  查询特定课程的信息：</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> courses <span class="token keyword">WHERE</span> course_id <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询特定学生在特定课程上的成绩：</span>
<span class="token keyword">SELECT</span> scores<span class="token punctuation">.</span>score   
<span class="token keyword">FROM</span> scores   
<span class="token keyword">JOIN</span> students <span class="token keyword">ON</span> scores<span class="token punctuation">.</span>student_id <span class="token operator">=</span> students<span class="token punctuation">.</span>student_id   
<span class="token keyword">JOIN</span> courses <span class="token keyword">ON</span> scores<span class="token punctuation">.</span>course_id <span class="token operator">=</span> courses<span class="token punctuation">.</span>course_id   
<span class="token keyword">WHERE</span> students<span class="token punctuation">.</span>student_id <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> courses<span class="token punctuation">.</span>course_id <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询某个班级的所有学生信息：</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> students <span class="token keyword">WHERE</span> class_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询某个教师的所有课程信息：</span>
<span class="token keyword">SELECT</span> courses<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> courses <span class="token keyword">JOIN</span> teachers <span class="token keyword">ON</span> courses<span class="token punctuation">.</span>teacher_id <span class="token operator">=</span> teachers<span class="token punctuation">.</span>teacher_id <span class="token keyword">WHERE</span> teachers<span class="token punctuation">.</span>teacher_name <span class="token operator">=</span> <span class="token string">'刘老师'</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8672a9578993f50a1b0f21a571988617/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac 安装 RabbitMQ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/72b64c78cc34655502268fe03693ae7b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">macOS上使用x11转发运行Linux GUI软件——XQuartz</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>