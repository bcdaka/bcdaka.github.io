<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】类和对象（四）拷贝构造、赋值运算符重载 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cd49cf130e1811fd5816ea5488bcb34c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】类和对象（四）拷贝构造、赋值运算符重载">
  <meta property="og:description" content="文章目录 四、拷贝构造函数干嘛的？写拷贝构造函数的注意事项正确写法 不显示定义拷贝构造函数的情况浅拷贝:one:示例：内置类型:two:示例：自定义类型一个提问 深拷贝 五、赋值运算符重载运算符重载函数原型注意调用时的两种书写方式完整实现代码 赋值运算符重载干嘛的？连续赋值总结赋值运算符重载格式默认生成的复制重载函数的行为默认生成的函数行为总结赋值运算符是否可以重载为全局函数 书接上回： 【C&#43;&#43;】类和对象（三）构造与析构 四、拷贝构造函数 干嘛的？ 拷贝构造函数：用同类型的其他对象 构造一个（初始化 ）新的对象
代码演示：
class Date { public: Date(int year = 1, int month = 1, int day = 1) { _year = year; _month = month; _day = day; } //Date d2(d1); Date(Date&amp; d) { _year = d._year; _month = d._month; _day = d._day; } void Print() { cout &lt;&lt; _year &lt;&lt; &#34;-&#34; &lt;&lt; _month &lt;&lt; &#34;-&#34; &lt;&lt; _day &lt;&lt; endl; } private: int _year; int _month; int _day; }; int main() { Date d1(2024, 1, 28); Date d2(d1); d1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-21T09:42:33+08:00">
    <meta property="article:modified_time" content="2024-06-21T09:42:33+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】类和对象（四）拷贝构造、赋值运算符重载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">四、拷贝构造函数</a></li><li><ul><li><a href="#_3" rel="nofollow">干嘛的？</a></li><li><a href="#_49" rel="nofollow">写拷贝构造函数的注意事项</a></li><li><ul><li><a href="#_115" rel="nofollow">正确写法</a></li></ul> 
   </li><li><a href="#_126" rel="nofollow">不显示定义拷贝构造函数的情况</a></li><li><ul><li><a href="#_127" rel="nofollow">浅拷贝</a></li><li><ul><li><a href="#one_134" rel="nofollow">:one:示例：内置类型</a></li><li><a href="#two_136" rel="nofollow">:two:示例：自定义类型</a></li><li><a href="#_209" rel="nofollow">一个提问</a></li></ul> 
    </li><li><a href="#_266" rel="nofollow">深拷贝</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_332" rel="nofollow">五、赋值运算符重载</a></li><li><ul><li><a href="#_333" rel="nofollow">运算符重载</a></li><li><ul><li><a href="#_337" rel="nofollow">函数原型</a></li><li><a href="#_347" rel="nofollow">注意</a></li><li><a href="#_364" rel="nofollow">调用时的两种书写方式</a></li><li><a href="#_370" rel="nofollow">完整实现代码</a></li></ul> 
   </li><li><a href="#_449" rel="nofollow">赋值运算符重载</a></li><li><ul><li><a href="#_450" rel="nofollow">干嘛的？</a></li><li><a href="#_504" rel="nofollow">连续赋值</a></li><li><a href="#_516" rel="nofollow">总结赋值运算符重载格式</a></li><li><a href="#_523" rel="nofollow">默认生成的复制重载函数的行为</a></li><li><a href="#_527" rel="nofollow">默认生成的函数行为总结</a></li><li><a href="#_530" rel="nofollow">赋值运算符是否可以重载为全局函数</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 书接上回： 
<a href="https://blog.csdn.net/weixin_61400132/article/details/139781840?spm=1001.2014.3001.5502">【C++】类和对象（三）构造与析构</a> 
<p></p> 
<h2><a id="_2"></a>四、拷贝构造函数</h2> 
<h3><a id="_3"></a>干嘛的？</h3> 
<p>拷贝构造函数：用同类型的其他对象 构造一个（初始化 ）新的对象<br> 代码演示：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//Date d2(d1);</span>
	<span class="token function">Date</span><span class="token punctuation">(</span>Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_49"></a>写拷贝构造函数的注意事项</h3> 
<blockquote> 
 <p>注意：拷贝构造函数 <strong>参数位置必须要传引用</strong> ！</p> 
</blockquote> 
<p>为什么参数位置必须要传引用？<br> <strong>传值</strong>做拷贝构造函数的参数 🆚 <strong>传引用</strong>做拷贝构造函数的参数</p> 
<p>C++规定 调用拷贝构造函数时，<br> 1️⃣自定义类型本身 作为实参传递过去（传值传参），都会先调用拷贝构造。<br> 🌰例如：<br> <img src="https://images2.imgbox.com/e3/a5/Cfau5uXK_o.png" alt="在这里插入图片描述"><br> 如果传值传参 会发生无穷递归的问题：<br> <img src="https://images2.imgbox.com/a4/4a/fEC0UIcR_o.png" alt="在这里插入图片描述"><br> 2️⃣自定义类型的引用 作为实参传递过去（传引用传参），就不会先调用拷贝构造。</p> 
<p>除此之外，为了 防止写反方向的类似问题，我们一般给 <strong>引用前面加const修饰</strong><br> 例如：可能出现赋值方向写反的问题</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//Date d2(d1);</span>
	<span class="token function">Date</span><span class="token punctuation">(</span>Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//赋值方向写反的问题</span>
		d<span class="token punctuation">.</span>_year <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_year<span class="token punctuation">;</span>
		d<span class="token punctuation">.</span>_month <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_month<span class="token punctuation">;</span>
		d<span class="token punctuation">.</span>_day <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_day<span class="token punctuation">;</span>
		<span class="token comment">//_year = d._year;</span>
		<span class="token comment">//_month = d._month;</span>
		<span class="token comment">//_day = d._day;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>写反方向的情况如下：<br> <img src="https://images2.imgbox.com/fd/ca/JfmcqUNY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_115"></a>正确写法</h4> 
<p>加入const修饰 保护要赋值给别人的对象</p> 
<pre><code class="prism language-cpp">	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_126"></a>不显示定义拷贝构造函数的情况</h3> 
<h4><a id="_127"></a>浅拷贝</h4> 
<p>程序员不显示定义拷贝构造函数 ，则<strong>编译器会自动生成拷贝构造函数</strong>。并且</p> 
<blockquote> 
 <p>1️⃣ 对<strong>内置类型的成员变量</strong>进行<strong>值拷贝</strong>（浅拷贝）。<br> 2️⃣对<strong>自定义类型的成员变量 调用它的拷贝构造</strong>。</p> 
</blockquote> 
<h5><a id="one_134"></a>1️⃣示例：内置类型</h5> 
<p><img src="https://images2.imgbox.com/0c/85/FEoOgi0C_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="two_136"></a>2️⃣示例：自定义类型</h5> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Time</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token operator">~</span><span class="token function">Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~Time()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 注意：拷贝构造函数 也属于构造函数 编译器就不会自动生成 构造函数</span>
	<span class="token comment">// 但是下面一句代码 可以强制编译器生成默认构造</span>
	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>

	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token keyword">const</span> Time<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Time(const Time&amp; t)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_hour <span class="token operator">=</span> t<span class="token punctuation">.</span>_hour<span class="token punctuation">;</span>
		_minute <span class="token operator">=</span> t<span class="token punctuation">.</span>_minute<span class="token punctuation">;</span>
		_second <span class="token operator">=</span> t<span class="token punctuation">.</span>_second<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _hour<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _minute<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _second<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Date d2(d1);</span>
	<span class="token comment">/*Date(const Date&amp; d)
	{
		_year = d._year;
		_month = d._month;
		_day = d._day;
	}*/</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 内置类型</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>

	<span class="token comment">// 自定义类型</span>
	Time _t<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码演示：对<strong>自定义类型的成员变量 调用它的拷贝构造</strong><br> <img src="https://images2.imgbox.com/04/ab/W7dEyO8Q_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_209"></a>一个提问</h5> 
<blockquote> 
 <p>❓对于内置类型、自定义类型的成员变量，即使程序员不提供拷贝构造函数，编译器都会自动进行拷贝，那么拷贝构造函数是不是就可以不用我们写了呢？</p> 
</blockquote> 
<p>答案当然不是的。在有些情况，编译器默认生成的拷贝构造会出现问题，我们可以看看如下的问题情况。<br> 问题代码：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">int</span> DataType<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span>size_t capacity <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_array <span class="token operator">=</span> <span class="token punctuation">(</span>DataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>capacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>DataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _array<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc申请空间失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> capacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span><span class="token keyword">const</span> DataType<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// CheckCapacity();</span>
		_array<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
		_size<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_array<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">free</span><span class="token punctuation">(</span>_array<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_array <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	DataType<span class="token operator">*</span> _array<span class="token punctuation">;</span>
	size_t _size<span class="token punctuation">;</span>
	size_t _capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st1<span class="token punctuation">;</span>
	Stack <span class="token function">st2</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/29/f4/S4ia7S5R_o.png" alt="在这里插入图片描述"><br> 问题描述：经过调试，我们发现 _array的值是一个地址也被拷贝过来 ，这意味着两个对象指向同一块空间。<br> <img src="https://images2.imgbox.com/d9/9b/fXl9OpM3_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><font color="black">出了函数作用域，会对他们析构，把<code>st2</code>对象的 _array空间释放。但st2置空并不影响st1,st1依然指向那块空间，导致st1成为野指针，析构st1时，_array空间再次被释放，相当于同一块空间被释放了两次。</font></p> 
</blockquote> 
<p>所以，对于动态开辟的内存空间 都要使用<strong>深拷贝</strong>。深拷贝就是，为要拷贝st1的st2再开辟一块同样大小的新空间。</p> 
<h4><a id="_266"></a>深拷贝</h4> 
<p>对于动态开辟的内存空间，必须程序员自己实现深拷贝！<br> 代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">int</span> DataType<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span>size_t capacity <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_array <span class="token operator">=</span> <span class="token punctuation">(</span>DataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>capacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>DataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _array<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc申请空间失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> capacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">Stack</span><span class="token punctuation">(</span><span class="token keyword">const</span> Stack<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        DataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>DataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">memcpy</span><span class="token punctuation">(</span>tmp <span class="token punctuation">,</span> a<span class="token punctuation">.</span>_array<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>DataType<span class="token punctuation">)</span><span class="token operator">*</span>s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _array <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
        _size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
        _capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span><span class="token keyword">const</span> DataType<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// CheckCapacity();</span>
		_array<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
		_size<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_array<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">free</span><span class="token punctuation">(</span>_array<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_array <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	DataType<span class="token operator">*</span> _array<span class="token punctuation">;</span>
	size_t _size<span class="token punctuation">;</span>
	size_t _capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack st1<span class="token punctuation">;</span>
	Stack <span class="token function">st2</span><span class="token punctuation">(</span>st1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/26/e8/ZF8S3bPQ_o.png" alt="在这里插入图片描述"><br> 可以看到经过深度拷贝的两个指针分别开辟了两块不同的空间。</p> 
<h2><a id="_332"></a>五、赋值运算符重载</h2> 
<h3><a id="_333"></a>运算符重载</h3> 
<p>C++为了增强代码的可读性引入了<strong>运算符重载</strong>，运算符重载是具有特殊函数名的函数，也具有其返回值类型、函数名字、参数列表。其返回值类型、参数列表与普通的函数类似。</p> 
<h4><a id="_337"></a>函数原型</h4> 
<blockquote> 
 <p>函数名：关键字operator后面接需要重载的运算符符号。<br> 函数原型：返回值类型 operator操作符(参数列表)</p> 
</blockquote> 
<p>🌰</p> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_347"></a>注意</h4> 
<blockquote> 
 <ul><li>不能通过连接其他符号来创建新的操作符：比如operator@</li><li>重载操作符必须有一个类类型参数</li><li>用于内置类型的运算符，其含义不能改变，例如：内置的整型+，不能改变其含义</li><li>作为类成员函数重载时，其<strong>形参比操作数数目少1</strong>，因为<strong>成员函数的第一个参数为隐藏的this</strong></li><li>.* （点星运算符） :: (域作用限定符) sizeof （计算变量大小的运算符） ?: （三目运算符） . （点操作符） 注意以上5个运算符不能重载。这个经常在笔试选择题中出 现。</li></ul> 
</blockquote> 
<p><strong>注意：区分 运算符重载 跟 函数重载，二者没有关系。</strong></p> 
<blockquote> 
 <p><strong>运算符重载</strong>：让自定义类型的对象可以使用运算符。通过函数定义了该运算符的行为</p> 
 <p><strong>函数重载</strong>：允许函数名相同 参数不同的函数存在，通过函数名修饰规则可以找到对应的函数</p> 
</blockquote> 
<p>代码示例🌰<br> 这里展示两个​运算符重载函数 他们是用来 <strong>比较自定义对象 日期年月日的大小</strong></p> 
<h4><a id="_364"></a>调用时的两种书写方式</h4> 
<pre><code class="prism language-cpp">d1<span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span>
d1 <span class="token operator">==</span> d2
</code></pre> 
<h4><a id="_370"></a>完整实现代码</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//类成员函数重载时，其形参看起来比操作数数目少1，因为成员函数的第一个参数为隐藏的this</span>
	<span class="token comment">// operator运算符 做函数名</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year
			<span class="token operator">&amp;&amp;</span> _month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month
			<span class="token operator">&amp;&amp;</span> _day <span class="token operator">==</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// operator运算符 做函数名</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
	
	<span class="token punctuation">{<!-- --></span>
        <span class="token comment">//如果 年小就小</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
        <span class="token comment">//如果年相等</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
            <span class="token comment">//如果月小就小</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> _day <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//通过对象调用成员函数的方式 调用运算符重载函数 比较日期对象d1和d2的大小</span>
	cout <span class="token operator">&lt;&lt;</span> d1<span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> d1<span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">//另一种调用方式 加括号的原因：流插入运算符的优先级高于等于号</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>d1 <span class="token operator">==</span> d2<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// cout &lt;&lt; (d1.operator==(d2)) &lt;&lt; endl;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>d1 <span class="token operator">&lt;</span> d2<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  <span class="token comment">// cout &lt;&lt; (d1.operator==(d2)) &lt;&lt; endl;</span>
    
    <span class="token keyword">bool</span> ret1 <span class="token operator">=</span> d1 <span class="token operator">&lt;</span> d2<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ret2 <span class="token operator">=</span> d1<span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ret3 <span class="token operator">=</span>i<span class="token operator">&lt;</span>j<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bd/26/d9Wswkaa_o.png" alt="在这里插入图片描述"><br> 通过反汇编窗口，我们可以看到</p> 
<blockquote> 
 <p>对于<strong>自定义类型</strong>的运算符重载函数的<strong>两种调用方式底层的汇编代码</strong>都是<strong>一样</strong>的。<br> 而对于<strong>内置类型</strong>的运算符比较，是直接<strong>有cmp指令支持</strong>的，不用程序员自己规定大小比较方式。</p> 
</blockquote> 
<h3><a id="_449"></a>赋值运算符重载</h3> 
<h4><a id="_450"></a>干嘛的？</h4> 
<blockquote> 
 <p>赋值运算符重载：对已经存在的同类型对象，一个拷贝赋值给另一个，就用到了<strong>赋值运算符重载</strong></p> 
</blockquote> 
<p><strong>代码示例</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//d2 = d1;</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>d<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
			_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
			_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">1990</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d3</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 拷贝构造，同类型一个存在的对象进行初始化要创建的对象</span>

	d2 <span class="token operator">=</span> d1<span class="token punctuation">;</span><span class="token comment">// 已经存在的对象，一个拷贝赋值给另一个</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d3<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>栗子结果</strong><br> <img src="https://images2.imgbox.com/1d/88/5X9pCKG3_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_504"></a>连续赋值</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span>  i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
i <span class="token operator">=</span> j <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>注意：</p> 
 <ol><li>对于<strong>内置类型</strong>，10先赋值给j ，表达式的返回值为j ，j再作为下一次赋值的右操作数 以此支持连续赋值。<br> 同理，对于<strong>自定义类型</strong>，<strong>为了支持连续赋值</strong>，我们需要拿到表达式的结果，所以<font color="green"><strong>在写赋值重载函数时，我们要返回被赋值好的对象 *this。</strong></font></li><li>函数传值返回会调用拷贝构造函数，为了避免浪费，赋值运算符函数的<strong>返回值</strong>使用<font color="green"><strong>引用返回</strong>。</font></li><li>为了防止自己给自己赋值，我们需要加一个判断。</li></ol> 
</blockquote> 
<h4><a id="_516"></a>总结赋值运算符重载格式</h4> 
<blockquote> 
 <ul><li><strong>参数类型</strong>：const T&amp;，传递引用可以提高传参效率</li><li><strong>返回值类型</strong>：T&amp;，返回引用可以提高返回的效率，有返回值目的是为了支持连续赋值</li><li><strong>检测是否自己给自己赋值</strong></li><li><strong>返回*this</strong> ：要复合连续赋值的含义</li></ul> 
</blockquote> 
<h4><a id="_523"></a>默认生成的复制重载函数的行为</h4> 
<p>用户没有显式实现时，编译器会生成一个默认赋值运算符重载，以值的方式逐字节拷贝。注意：内置类型成员变量是直接赋值的，而自定义类型成员变量需要调用对应类的赋值运算符重载完成赋值。</p> 
<h4><a id="_527"></a>默认生成的函数行为总结</h4> 
<p><img src="https://images2.imgbox.com/1d/ce/OZOqWGrm_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_530"></a>赋值运算符是否可以重载为全局函数</h4> 
<p>❓运算符重载可以在全局重载，那赋值运算符重载可以在全局重载嘛？</p> 
<p>注意： <strong>赋值运算符</strong>只能重载成类的成员函数<strong>不能重载成全局函数</strong></p> 
<p>原因：：赋值运算符如果不显式在类里面实现，编译器会生成一个默认的。此时用户再在类外自己实现 一个全局的赋值运算符重载，就<strong>和编译器在类中生成的默认赋值运算符重载冲突</strong>了，故<font color="green"><strong>赋值运算符重载只能是类的成员函数</strong></font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/85447474f6bee46ce22cdacb54fbc596/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Llama 3 与 GPT-4：哪个更好？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/369a83e664d6b4368414f467ac49258f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Echarts实现动态背景</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>