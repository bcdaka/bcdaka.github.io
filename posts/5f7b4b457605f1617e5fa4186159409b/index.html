<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>尚硅谷大数据技术-Kafka视频教程-笔记01【Kafka 入门】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5f7b4b457605f1617e5fa4186159409b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="尚硅谷大数据技术-Kafka视频教程-笔记01【Kafka 入门】">
  <meta property="og:description" content="视频地址：【尚硅谷】Kafka3.x教程（从入门到调优，深入全面）_哔哩哔哩_bilibili
尚硅谷大数据技术-Kafka视频教程-笔记01【Kafka 入门】尚硅谷大数据技术-Kafka视频教程-笔记02【Kafka 外部系统集成】尚硅谷大数据技术-Kafka视频教程-笔记03【Kafka 生产调优手册】尚硅谷大数据技术-Kafka视频教程-笔记04【Kafka 源码解析】 目录
01_尚硅谷大数据技术之Kafka
第 1 章 Kafka 概述
p001
p002
p003
p004
p005
第 2 章 Kafka 快速入门
p006
p007
p008
p009
第 3 章 Kafka 生产者
p010
p011
p012
p013
p014
第 4 章 Kafka Broker
第 5 章 Kafka 消费者
第 6 章 Kafka-Eagle 监控
第 7 章 Kafka-Kraft 模式
01_尚硅谷大数据技术之Kafka 第 1 章 Kafka 概述 p001 p002 p003 flume：时刻监控数据文件的变化，每产生一条数据日志都能监控的到，并将数据传送到hadoop集群。kafka：数据量太大，对数据进行缓冲。 同步处理：时刻处理，一步一步地做完。异步处理：先处理核心事务。 p004 消息队列的两种模式：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-30T10:37:47+08:00">
    <meta property="article:modified_time" content="2024-08-30T10:37:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">尚硅谷大数据技术-Kafka视频教程-笔记01【Kafka 入门】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>视频地址：<a href="https://www.bilibili.com/video/BV1vr4y1677k/" rel="nofollow" title="【尚硅谷】Kafka3.x教程（从入门到调优，深入全面）_哔哩哔哩_bilibili">【尚硅谷】Kafka3.x教程（从入门到调优，深入全面）_哔哩哔哩_bilibili</a></p> 
 <ol><li>尚硅谷大数据技术-Kafka视频教程-笔记01【Kafka 入门】</li><li>尚硅谷大数据技术-Kafka视频教程-笔记02【Kafka 外部系统集成】</li><li>尚硅谷大数据技术-Kafka视频教程-笔记03【Kafka 生产调优手册】</li><li>尚硅谷大数据技术-Kafka视频教程-笔记04【Kafka 源码解析】</li></ol> 
</blockquote> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="01_%E5%B0%9A%E7%A1%85%E8%B0%B7%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B9%8BKafka-toc" style="margin-left:0px;"><a href="#01_%E5%B0%9A%E7%A1%85%E8%B0%B7%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E4%B9%8BKafka" rel="nofollow">01_尚硅谷大数据技术之Kafka</a></p> 
<p id="%E7%AC%AC%201%20%E7%AB%A0%20Kafka%20%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%201%20%E7%AB%A0%20Kafka%20%E6%A6%82%E8%BF%B0" rel="nofollow">第 1 章 Kafka 概述</a></p> 
<p id="p001-toc" style="margin-left:80px;"><a href="#p001" rel="nofollow">p001</a></p> 
<p id="p002-toc" style="margin-left:80px;"><a href="#p002" rel="nofollow">p002</a></p> 
<p id="p003-toc" style="margin-left:80px;"><a href="#p003" rel="nofollow">p003</a></p> 
<p id="p004-toc" style="margin-left:80px;"><a href="#p004" rel="nofollow">p004</a></p> 
<p id="p005-toc" style="margin-left:80px;"><a href="#p005" rel="nofollow">p005</a></p> 
<p id="%E7%AC%AC%202%20%E7%AB%A0%20Kafka%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%202%20%E7%AB%A0%20Kafka%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8" rel="nofollow">第 2 章 Kafka 快速入门</a></p> 
<p id="p006-toc" style="margin-left:80px;"><a href="#p006" rel="nofollow">p006</a></p> 
<p id="p007-toc" style="margin-left:80px;"><a href="#p007" rel="nofollow">p007</a></p> 
<p id="p008-toc" style="margin-left:80px;"><a href="#p008" rel="nofollow">p008</a></p> 
<p id="p009-toc" style="margin-left:80px;"><a href="#p009" rel="nofollow">p009</a></p> 
<p id="%E7%AC%AC%203%20%E7%AB%A0%20Kafka%20%E7%94%9F%E4%BA%A7%E8%80%85-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%203%20%E7%AB%A0%20Kafka%20%E7%94%9F%E4%BA%A7%E8%80%85" rel="nofollow">第 3 章 Kafka 生产者</a></p> 
<p id="p010-toc" style="margin-left:80px;"><a href="#p010" rel="nofollow">p010</a></p> 
<p id="p011-toc" style="margin-left:80px;"><a href="#p011" rel="nofollow">p011</a></p> 
<p id="p012-toc" style="margin-left:80px;"><a href="#p012" rel="nofollow">p012</a></p> 
<p id="p013-toc" style="margin-left:80px;"><a href="#p013" rel="nofollow">p013</a></p> 
<p id="p014-toc" style="margin-left:80px;"><a href="#p014" rel="nofollow">p014</a></p> 
<p id="%E7%AC%AC%204%20%E7%AB%A0%20Kafka%20Broker-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%204%20%E7%AB%A0%20Kafka%20Broker" rel="nofollow">第 4 章 Kafka Broker</a></p> 
<p id="%E7%AC%AC%205%20%E7%AB%A0%20Kafka%20%E6%B6%88%E8%B4%B9%E8%80%85-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%205%20%E7%AB%A0%20Kafka%20%E6%B6%88%E8%B4%B9%E8%80%85" rel="nofollow">第 5 章 Kafka 消费者</a></p> 
<p id="%E7%AC%AC%206%20%E7%AB%A0%20Kafka-Eagle%20%E7%9B%91%E6%8E%A7-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%206%20%E7%AB%A0%20Kafka-Eagle%20%E7%9B%91%E6%8E%A7" rel="nofollow">第 6 章 Kafka-Eagle 监控</a></p> 
<p id="%E7%AC%AC%207%20%E7%AB%A0%20Kafka-Kraft%20%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%207%20%E7%AB%A0%20Kafka-Kraft%20%E6%A8%A1%E5%BC%8F" rel="nofollow">第 7 章 Kafka-Kraft 模式</a></p> 
<hr id="hr-toc"> 
<h2>01_尚硅谷大数据技术之Kafka</h2> 
<h3 id="%E7%AC%AC%201%20%E7%AB%A0%20Kafka%20%E6%A6%82%E8%BF%B0">第 1 章 Kafka 概述</h3> 
<h4 id="p001">p001</h4> 
<h4 id="p002">p002</h4> 
<h4 id="p003">p003</h4> 
<blockquote> 
 <ol><li>flume：时刻监控数据文件的变化，每产生一条数据日志都能监控的到，并将数据传送到hadoop集群。</li><li>kafka：数据量太大，对数据进行缓冲。</li></ol> 
</blockquote> 
<blockquote> 
 <ol><li>同步处理：时刻处理，一步一步地做完。</li><li>异步处理：先处理核心事务。</li></ol> 
</blockquote> 
<h4 id="p004">p004</h4> 
<blockquote> 
 <p>消息队列的两种模式：</p> 
 <ol><li>点对点模式： 
   <ol><li>只产生一个主题的数据；</li><li>数据消费后就删除了。</li></ol></li><li>发布/订阅模式： 
   <ol><li>可以有多个主题的数据；</li><li>数据消费后不删除；</li><li>多个消费者相互独立。</li></ol></li></ol> 
</blockquote> 
<h4 id="p005">p005</h4> 
<blockquote> 
 <ol><li>zookeeper：kafka中的一部分数据存储到kafka中，zookeeper帮助kafka存储记录服务器节点运行的状态，zk记录谁是leader。</li><li>kafka：数据分区存储。</li></ol> 
</blockquote> 
<h3 id="%E7%AC%AC%202%20%E7%AB%A0%20Kafka%20%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">第 2 章 Kafka 快速入门</h3> 
<h4 id="p006">p006</h4> 
<blockquote> 
 <ol><li><a href="https://kafka.apache.org/" rel="nofollow" title="Apache Kafka">Apache Kafka</a></li><li><a href="https://kafka.apache.org/downloads" rel="nofollow" title="Apache Kafka">Apache Kafka</a></li></ol> 
</blockquote> 
<blockquote> 
 <p><img alt="" height="207" src="https://images2.imgbox.com/8d/fe/3w2zoqRZ_o.png" width="797"></p> 
</blockquote> 
<blockquote> 
 <p><img alt="" height="284" src="https://images2.imgbox.com/ec/12/BCXYAMb6_o.png" width="995"></p> 
 <p>############################# Zookeeper #############################</p> 
 <p># Zookeeper connection string (see zookeeper docs for details).<br> # This is a comma separated host:port pairs, each corresponding to a zk<br> # server. e.g. "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002".<br> # You can also append an optional chroot string to the urls to specify the<br> # root directory for all kafka znodes.<br> #zookeeper.connect=localhost:2181<br><span style="color:#956fe7;">zookeeper.connect=node001:2181,node002:2181,node003:2181/kafka</span></p> 
 <p>zk采用目录树进行存储，根目录下有zookeeper节点，不采用<span style="color:#956fe7;">node003:2181/kafka</span>方式进行存储的话，kafka的信息就会打散到zookeeper里面去，对kafka集群进行注销或删除的话，需要挨个删除，不利于后续管理。</p> 
</blockquote> 
<pre><code class="language-bash">[atguigu@node001 ~]$ vim /opt/module/kafka/kafka_2.12-3.0.0/config/server.properties 
[atguigu@node001 ~]$ sudo vim /etc/profile.d/my_env.sh
[atguigu@node001 ~]$ source /etc/profile
[atguigu@node001 ~]$ sudo /home/atguigu/bin/xsync /etc/profile.d/my_env.sh
==================== node001 ====================
sending incremental file list

sent 47 bytes  received 12 bytes  39.33 bytes/sec
total size is 1,201  speedup is 20.36
==================== node002 ====================
sending incremental file list
my_env.sh

sent 599 bytes  received 47 bytes  1,292.00 bytes/sec
total size is 1,201  speedup is 1.86
==================== node003 ====================
sending incremental file list
my_env.sh

sent 599 bytes  received 47 bytes  1,292.00 bytes/sec
total size is 1,201  speedup is 1.86
[atguigu@node001 ~]$ </code></pre> 
<pre><code class="language-bash">[atguigu@node001 ~]$ zookeeper.sh start
---------- zookeeper node001 启动 ----------
ZooKeeper JMX enabled by default
Using config: /opt/module/zookeeper/zookeeper-3.5.7/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
---------- zookeeper node002 启动 ----------
ZooKeeper JMX enabled by default
Using config: /opt/module/zookeeper/zookeeper-3.5.7/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
---------- zookeeper node003 启动 ----------
ZooKeeper JMX enabled by default
Using config: /opt/module/zookeeper/zookeeper-3.5.7/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
[atguigu@node001 ~]$ 
[atguigu@node001 ~]$ 
[atguigu@node001 ~]$ xcall jps
=============== node001 ===============
4291 QuorumPeerMain
4346 Jps
=============== node002 ===============
3570 QuorumPeerMain
3630 Jps
=============== node003 ===============
3426 QuorumPeerMain
3478 Jps
[atguigu@node001 ~]$ cd /opt/module/kafka/kafka_2.12-3.0.0/
[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-server-start.sh 
USAGE: bin/kafka-server-start.sh [-daemon] server.properties [--override property=value]*
[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-server-start.sh -daemon config/server.properties
[atguigu@node001 kafka_2.12-3.0.0]$ jpsall 
================ node001 ================
4817 Jps
4291 QuorumPeerMain
4756 Kafka
================ node002 ================
3570 QuorumPeerMain
3724 Jps
================ node003 ================
3426 QuorumPeerMain
3564 Jps
[atguigu@node001 kafka_2.12-3.0.0]$ </code></pre> 
<h4 id="p007">p007</h4> 
<pre><code class="language-bash">#!/bin/bash

case $1 in
"start"){
	for i in node001 node002 node003
	do
		echo "--------------- $i Kafka 启动 ---------------"
		ssh $i "/opt/module/kafka/kafka_2.12-3.0.0/bin/kafka-server-start.sh -daemon /opt/module/kafka/kafka_2.12-3.0.0/config/server.properties"
	done
};;
"stop"){
	for i in node001 node002 node003
	do
		echo "--------------- $i Kafka 停止 ---------------"
		ssh $i "/opt/module/kafka/kafka_2.12-3.0.0/bin/kafka-server-stop.sh "
    done
};;
"status") {
	for i in node001 node002 node003
	do
		echo "--------------- $i Kafka 状态 ---------------"
		ssh $i "/opt/module/kafka/kafka_2.12-3.0.0/bin/kafka-topics.sh "
	done
}
;;
esac</code></pre> 
<h4 id="p008">p008</h4> 
<blockquote> 
 <p><u>2.2 Kafka 命令行操作</u></p> 
</blockquote> 
<pre><code class="language-bash">[atguigu@node001 kafka_2.12-3.0.0]$ pwd
/opt/module/kafka/kafka_2.12-3.0.0
[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-topics.sh # 查看操作主题命令参数
Create, delete, describe, or change a topic.
Option                                   Description                            
------                                   -----------                            
--alter                                  Alter the number of partitions,        
                                           replica assignment, and/or           
                                           configuration for the topic.         
--at-min-isr-partitions                  if set when describing topics, only    
                                           show partitions whose isr count is   
                                           equal to the configured minimum.     
--bootstrap-server &lt;String: server to    REQUIRED: The Kafka server to connect  
  connect to&gt;                              to.                                  
--command-config &lt;String: command        Property file containing configs to be 
  config property file&gt;                    passed to Admin Client. This is used 
                                           only with --bootstrap-server option  
                                           for describing and altering broker   
                                           configs.                             
--config &lt;String: name=value&gt;            A topic configuration override for the 
                                           topic being created or altered. The  
                                           following is a list of valid         
                                           configurations:                      
                                                cleanup.policy                        
                                                compression.type                      
                                                delete.retention.ms                   
                                                file.delete.delay.ms                  
                                                flush.messages                        
                                                flush.ms                              
                                                follower.replication.throttled.       
                                           replicas                             
                                                index.interval.bytes                  
                                                leader.replication.throttled.replicas 
                                                local.retention.bytes                 
                                                local.retention.ms                    
                                                max.compaction.lag.ms                 
                                                max.message.bytes                     
                                                message.downconversion.enable         
                                                message.format.version                
                                                message.timestamp.difference.max.ms   
                                                message.timestamp.type                
                                                min.cleanable.dirty.ratio             
                                                min.compaction.lag.ms                 
                                                min.insync.replicas                   
                                                preallocate                           
                                                remote.storage.enable                 
                                                retention.bytes                       
                                                retention.ms                          
                                                segment.bytes                         
                                                segment.index.bytes                   
                                                segment.jitter.ms                     
                                                segment.ms                            
                                                unclean.leader.election.enable        
                                         See the Kafka documentation for full   
                                           details on the topic configs. It is  
                                           supported only in combination with --
                                           create if --bootstrap-server option  
                                           is used (the kafka-configs CLI       
                                           supports altering topic configs with 
                                           a --bootstrap-server option).        
--create                                 Create a new topic.                    
--delete                                 Delete a topic                         
--delete-config &lt;String: name&gt;           A topic configuration override to be   
                                           removed for an existing topic (see   
                                           the list of configurations under the 
                                           --config option). Not supported with 
                                           the --bootstrap-server option.       
--describe                               List details for the given topics.     
--disable-rack-aware                     Disable rack aware replica assignment  
--exclude-internal                       exclude internal topics when running   
                                           list or describe command. The        
                                           internal topics will be listed by    
                                           default                              
--help                                   Print usage information.               
--if-exists                              if set when altering or deleting or    
                                           describing topics, the action will   
                                           only execute if the topic exists.    
--if-not-exists                          if set when creating topics, the       
                                           action will only execute if the      
                                           topic does not already exist.        
--list                                   List all available topics.             
--partitions &lt;Integer: # of partitions&gt;  The number of partitions for the topic 
                                           being created or altered (WARNING:   
                                           If partitions are increased for a    
                                           topic that has a key, the partition  
                                           logic or ordering of the messages    
                                           will be affected). If not supplied   
                                           for create, defaults to the cluster  
                                           default.                             
--replica-assignment &lt;String:            A list of manual partition-to-broker   
  broker_id_for_part1_replica1 :           assignments for the topic being      
  broker_id_for_part1_replica2 ,           created or altered.                  
  broker_id_for_part2_replica1 :                                                
  broker_id_for_part2_replica2 , ...&gt;                                           
--replication-factor &lt;Integer:           The replication factor for each        
  replication factor&gt;                      partition in the topic being         
                                           created. If not supplied, defaults   
                                           to the cluster default.              
--topic &lt;String: topic&gt;                  The topic to create, alter, describe   
                                           or delete. It also accepts a regular 
                                           expression, except for --create      
                                           option. Put topic name in double     
                                           quotes and use the '\' prefix to     
                                           escape regular expression symbols; e.
                                           g. "test\.topic".                    
--topics-with-overrides                  if set when describing topics, only    
                                           show topics that have overridden     
                                           configs                              
--unavailable-partitions                 if set when describing topics, only    
                                           show partitions whose leader is not  
                                           available                            
--under-min-isr-partitions               if set when describing topics, only    
                                           show partitions whose isr count is   
                                           less than the configured minimum.    
--under-replicated-partitions            if set when describing topics, only    
                                           show under replicated partitions     
--version                                Display Kafka version.                 
[atguigu@node001 kafka_2.12-3.0.0]$ </code></pre> 
<pre><code class="language-bash">--bootstrap-server &lt;String: server to    REQUIRED: The Kafka server to connect  
  connect to&gt;                              to.

--topic &lt;String: topic&gt;                  The topic to create, alter, describe   
                                           or delete. It also accepts a regular 
                                           expression, except for --create      
                                           option. Put topic name in double     
                                           quotes and use the '\' prefix to     
                                           escape regular expression symbols; e.
                                           g. "test\.topic".</code></pre> 
<blockquote> 
 <ol><li>[atguigu@node001 kafka_2.12-3.0.0]$<span style="color:#956fe7;"> bin/kafka-topics.sh --bootstrap-server node001:9092 --list</span></li><li>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first --create --partitions 1 --replication-factor 3</span> # 创建first主题，设置三个副本</li><li>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --describe</span></li><li>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --alter --partitions 3</span></li><li>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --describe</span></li><li>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --alter --partitions 1 </span><span style="color:#0d0016;"># 报错，分区只能增加，不能减少！</span></li><li>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --alter --replication-factor 2 </span><span style="color:#0d0016;"># 不能通过命令行去修改副本</span></li></ol> 
</blockquote> 
<pre><code class="language-bash">[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-topics.sh --bootstrap-server node001:9092 --list
__consumer_offsets
__transaction_state
action_topic
appVideo_topic
display_topic
dwd_examination_test_paper
dwd_examination_test_question
dwd_interaction_comment
dwd_interaction_favor_add
dwd_interaction_review
dwd_learn_play
dwd_trade_cart_add
dwd_trade_order_detail
dwd_trade_pay_suc_detail
dwd_traffic_action_log
dwd_traffic_display_log
dwd_traffic_error_log
dwd_traffic_page_log
dwd_traffic_play_pre_process
dwd_traffic_start_log
dwd_traffic_unique_visitor_detail
dwd_traffic_user_jump_detail
dwd_user_user_login
dwd_user_user_register
error_topic
first
maxwell
nifi
nifiOutput
page_topic
start_topic
topic_db
topic_log
[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first --create --partitions 1 --replication-factor 3
Error while executing topic command : Topic 'first' already exists.
[2024-03-04 16:59:58,015] ERROR org.apache.kafka.common.errors.TopicExistsException: Topic 'first' already exists.
 (kafka.admin.TopicCommand$)
[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --create --partitions 1 --replication-factor 3
Created topic first01.
[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-topics.sh --bootstrap-server node001:9092 --topic first01 --describe
Topic: first01  TopicId: 8_ayAUYdRbODZCeFMBE8Cg PartitionCount: 1       ReplicationFactor: 3    Configs: segment.bytes=1073741824
        Topic: first01  Partition: 0    Leader: 2       Replicas: 2,1,0 Isr: 2,1,0
[atguigu@node001 kafka_2.12-3.0.0]$ 
</code></pre> 
<h4 id="p009">p009</h4> 
<blockquote> 
 <p>[atguigu@node001 kafka_2.12-3.0.0]$ <span style="color:#956fe7;">bin/kafka-topics.sh --bootstrap-server node001:9092</span><span style="color:#fe2c24;"> --topic first </span><span style="color:#956fe7;">--create --partitions 1 --replication-factor 3</span> # 创建first主题，设置三个副本</p> 
 <p>之后，创建生产者，向first主题发送数据，</p> 
 <p>[atguigu@node001 ~]$ <span style="color:#956fe7;">cd /opt/module/kafka/kafka_2.12-3.0.0/bin</span><br> [atguigu@node001 bin]$ <span style="color:#fe2c24;">./kafka-console-producer.sh</span></p> 
 <p><img alt="" height="449" src="https://images2.imgbox.com/17/6f/g1KIjMCr_o.png" width="1013"></p> 
</blockquote> 
<pre><code class="language-bash">[atguigu@node001 ~]$ cd /opt/module/kafka/kafka_2.12-3.0.0/bin
[atguigu@node001 bin]$ ./kafka-console-producer.sh
Missing required option(s) [bootstrap-server]
Option                                   Description                            
------                                   -----------                            
--batch-size &lt;Integer: size&gt;             Number of messages to send in a single 
                                           batch if they are not being sent     
                                           synchronously. (default: 200)        
--bootstrap-server &lt;String: server to    REQUIRED unless --broker-list          
  connect to&gt;                              (deprecated) is specified. The server
                                           (s) to connect to. The broker list   
                                           string in the form HOST1:PORT1,HOST2:
                                           PORT2.                               
--broker-list &lt;String: broker-list&gt;      DEPRECATED, use --bootstrap-server     
                                           instead; ignored if --bootstrap-     
                                           server is specified.  The broker     
                                           list string in the form HOST1:PORT1, 
                                           HOST2:PORT2.                         
--compression-codec [String:             The compression codec: either 'none',  
  compression-codec]                       'gzip', 'snappy', 'lz4', or 'zstd'.  
                                           If specified without value, then it  
                                           defaults to 'gzip'                   
--help                                   Print usage information.               
--line-reader &lt;String: reader_class&gt;     The class name of the class to use for 
                                           reading lines from standard in. By   
                                           default each line is read as a       
                                           separate message. (default: kafka.   
                                           tools.                               
                                           ConsoleProducer$LineMessageReader)   
--max-block-ms &lt;Long: max block on       The max time that the producer will    
  send&gt;                                    block for during a send request      
                                           (default: 60000)                     
--max-memory-bytes &lt;Long: total memory   The total memory used by the producer  
  in bytes&gt;                                to buffer records waiting to be sent 
                                           to the server. (default: 33554432)   
--max-partition-memory-bytes &lt;Long:      The buffer size allocated for a        
  memory in bytes per partition&gt;           partition. When records are received 
                                           which are smaller than this size the 
                                           producer will attempt to             
                                           optimistically group them together   
                                           until this size is reached.          
                                           (default: 16384)                     
--message-send-max-retries &lt;Integer&gt;     Brokers can fail receiving the message 
                                           for multiple reasons, and being      
                                           unavailable transiently is just one  
                                           of them. This property specifies the 
                                           number of retries before the         
                                           producer give up and drop this       
                                           message. (default: 3)                
--metadata-expiry-ms &lt;Long: metadata     The period of time in milliseconds     
  expiration interval&gt;                     after which we force a refresh of    
                                           metadata even if we haven't seen any 
                                           leadership changes. (default: 300000)
--producer-property &lt;String:             A mechanism to pass user-defined       
  producer_prop&gt;                           properties in the form key=value to  
                                           the producer.                        
--producer.config &lt;String: config file&gt;  Producer config properties file. Note  
                                           that [producer-property] takes       
                                           precedence over this config.         
--property &lt;String: prop&gt;                A mechanism to pass user-defined       
                                           properties in the form key=value to  
                                           the message reader. This allows      
                                           custom configuration for a user-     
                                           defined message reader. Default      
                                           properties include:                  
                                                parse.key=true|false                  
                                                key.separator=&lt;key.separator&gt;         
                                                ignore.error=true|false               
--request-required-acks &lt;String:         The required acks of the producer      
  request required acks&gt;                   requests (default: 1)                
--request-timeout-ms &lt;Integer: request   The ack timeout of the producer        
  timeout ms&gt;                              requests. Value must be non-negative 
                                           and non-zero (default: 1500)         
--retry-backoff-ms &lt;Integer&gt;             Before each retry, the producer        
                                           refreshes the metadata of relevant   
                                           topics. Since leader election takes  
                                           a bit of time, this property         
                                           specifies the amount of time that    
                                           the producer waits before refreshing 
                                           the metadata. (default: 100)         
--socket-buffer-size &lt;Integer: size&gt;     The size of the tcp RECV size.         
                                           (default: 102400)                    
--sync                                   If set message send requests to the    
                                           brokers are synchronously, one at a  
                                           time as they arrive.                 
--timeout &lt;Integer: timeout_ms&gt;          If set and the producer is running in  
                                           asynchronous mode, this gives the    
                                           maximum amount of time a message     
                                           will queue awaiting sufficient batch 
                                           size. The value is given in ms.      
                                           (default: 1000)                      
--topic &lt;String: topic&gt;                  REQUIRED: The topic id to produce      
                                           messages to.                         
--version                                Display Kafka version.                 
[atguigu@node001 bin]$ </code></pre> 
<pre><code class="language-bash">[atguigu@node001 kafka_2.12-3.0.0]$ bin/kafka-console-producer.sh --bootstrap-server node001:9092 --topic first01 # 生产者
&gt;hello
&gt;123
[atguigu@node002 kafka_2.12-3.0.0]$ bin/kafka-console-consumer.sh --bootstrap-server node001:9092 --topic first01 # 消费者
hello
123
--------------------------------------------------
[atguigu@node002 kafka_2.12-3.0.0]$ bin/kafka-console-consumer.sh --bootstrap-server node001:9092 --topic first01 --from-beginning # --from-beginning，把主题中所有的数据都读取出来（包括历史数据）</code></pre> 
<h3 id="%E7%AC%AC%203%20%E7%AB%A0%20Kafka%20%E7%94%9F%E4%BA%A7%E8%80%85">第 3 章 Kafka 生产者</h3> 
<h4 id="p010">p010</h4> 
<blockquote> 
 <p>kafka由三部分组成：生产者、broker、消费者。</p> 
 <p><u>3.1.1 发送原理</u></p> 
 <p>在消息发送的过程中，涉及到了两个线程——main 线程和 Sender 线程。在 main 线程 中创建了一个双端队列 RecordAccumulator。main 线程将消息发送给 RecordAccumulator，Sender 线程不断从 RecordAccumulator 中拉取消息发送到 Kafka Broker。</p> 
 <p><img alt="" height="507" src="https://images2.imgbox.com/0f/0f/Do2JvmFn_o.png" width="900"></p> 
</blockquote> 
<h4 id="p011">p011</h4> 
<blockquote> 
 <p><u>3.2 异步发送 API</u></p> 
 <p><u>3.2.1 普通异步发送</u></p> 
</blockquote> 
<h4 id="p012">p012</h4> 
<h4 id="p013">p013</h4> 
<h4 id="p014">p014</h4> 
<h3 id="%E7%AC%AC%204%20%E7%AB%A0%20Kafka%20Broker">第 4 章 Kafka Broker</h3> 
<h3 id="%E7%AC%AC%205%20%E7%AB%A0%20Kafka%20%E6%B6%88%E8%B4%B9%E8%80%85">第 5 章 Kafka 消费者</h3> 
<h3 id="%E7%AC%AC%206%20%E7%AB%A0%20Kafka-Eagle%20%E7%9B%91%E6%8E%A7">第 6 章 Kafka-Eagle 监控</h3> 
<h3 id="%E7%AC%AC%207%20%E7%AB%A0%20Kafka-Kraft%20%E6%A8%A1%E5%BC%8F">第 7 章 Kafka-Kraft 模式</h3>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d55402b983d414456ea968fd82b014f1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第65期 | GPTSecurity周报</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b73156304f27866bfdb7b7214901215a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[知识技巧] iPhone 15 卡在恢复模式修复方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>