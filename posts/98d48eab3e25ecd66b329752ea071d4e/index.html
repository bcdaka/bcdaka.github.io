<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SqlSugar:基于SQLSugar框架在 .Net环境中搭建PostgreSQL数据库访问、操作的框架，C#连接访问PostgreSQL数据库 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/98d48eab3e25ecd66b329752ea071d4e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SqlSugar:基于SQLSugar框架在 .Net环境中搭建PostgreSQL数据库访问、操作的框架，C#连接访问PostgreSQL数据库">
  <meta property="og:description" content="SqlSugar 是一款 老牌 .NET开源ORM框架，由果糖大数据科技团队维护和更新 ，开箱即用最易上手的ORM 优点 ：【生态丰富】【高性能】【超简单】 【功能全面】 【多库兼容】【适合产品】 【SqlSugar视频教程】 支持 ： .net framework .net core3.1 .ne5 .net6 .net7 .net8 .net9 特色 ： 拥有全球最活跃的ORM线上论坛，比EF还要活跃，交流群人数已超过万人 ，技术支持快，口碑好。
详情请看SqlSugar 官方教程SqlSugar .Net ORM 5.X 官网 、文档、教程 - SqlSugar 5x - .NET果糖网
概览 本文描述了在.Net环境中使用SQLSugar框架连接及访问PostgreSQL数据库的详细操作过程，主要包括四个步骤：1 下载SqlSugar包 2 创建初始化并连接数据库工具类 3 创建数据操作类 4调用操作类访问数据库。
1.下载SqlSugar包 1.1 下载 ​​​在NuGet包管理器中搜索sqlsugar。注：.Net Framework框架选择SqlSugar，如果是.Net框架下则选择SqlSugarCore。
1.2引用 using SqlSugar
2.连接 创建数据库访问基类，代码中加密解密步骤可以根据实际需求省略或自设 using SqlSugar; using System; using System.Collections.Generic; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms.Design; namespace DemoSummaryZT.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-27T22:17:08+08:00">
    <meta property="article:modified_time" content="2024-05-27T22:17:08+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SqlSugar:基于SQLSugar框架在 .Net环境中搭建PostgreSQL数据库访问、操作的框架，C#连接访问PostgreSQL数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p>SqlSugar 是一款 老牌 .NET开源ORM框架，由果糖大数据科技团队维护和更新 ，开箱即用最易上手的ORM </p> 
<p>优点 ：【生态丰富】【高性能】【超简单】 【功能全面】 【多库兼容】【适合产品】 <a href="https://www.bilibili.com/video/BV1sb411o7Kc/" rel="nofollow" title="【SqlSugar视频教程】">【SqlSugar视频教程】</a> </p> 
<p>支持 ： .net framework  .net core3.1  .ne5 .net6 .net7 .net8 .net9 </p> 
<p>特色 ： 拥有全球最活跃的ORM线上论坛，比EF还要活跃，交流群人数已超过万人 ，技术支持快，口碑好。</p> 
<p>详情请看SqlSugar 官方教程<a href="https://www.donet5.com/Home/Doc" rel="nofollow" title="SqlSugar  .Net ORM 5.X 官网 、文档、教程 - SqlSugar 5x - .NET果糖网">SqlSugar .Net ORM 5.X 官网 、文档、教程 - SqlSugar 5x - .NET果糖网</a></p> 
<h4>概览</h4> 
<p>本文描述了在.Net环境中使用SQLSugar框架连接及访问PostgreSQL数据库的详细操作过程，主要包括四个步骤：1 下载SqlSugar包  2 创建初始化并连接数据库工具类 3 创建数据操作类 4调用操作类访问数据库。</p> 
<h3>1.下载SqlSugar包</h3> 
<h4>1.1 下载</h4> 
<p>​​​在NuGet包管理器中搜索sqlsugar。注：.Net Framework框架选择SqlSugar，如果是.Net框架下则选择SqlSugarCore。</p> 
<p class="img-center"><img alt="" height="283" src="https://images2.imgbox.com/94/60/rVc3OmvN_o.png" width="634"></p> 
<h4>1.2引用</h4> 
<p>using SqlSugar</p> 
<p class="img-center"><img alt="" height="169" src="https://images2.imgbox.com/25/d9/NZC9ZvYZ_o.png" width="459"></p> 
<h3>2.连接</h3> 
<h5>创建数据库访问基类，代码中加密解密步骤可以根据实际需求省略或自设</h5> 
<pre><code class="language-cs">
using SqlSugar;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms.Design;

namespace DemoSummaryZT.DatabaseOperation
{
    /// &lt;summary&gt;
    /// 数据库访问基类
    /// &lt;/summary&gt;
    public  class PGSql
    {
        public static SqlSugarScope PG_db = null;
        /// &lt;summary&gt;
        /// 初始化数据库连接
        /// &lt;/summary&gt;
        /// &lt;param name="server"&gt;主机IP&lt;/param&gt;
        /// &lt;param name="port"&gt;端口&lt;/param&gt;
        /// &lt;param name="database"&gt;数据库名称&lt;/param&gt;
        /// &lt;param name="userId"&gt;用户名&lt;/param&gt;
        /// &lt;param name="passWord"&gt;密码&lt;/param&gt;
        /// &lt;param name="ifJiaMi"&gt;是否加密&lt;/param&gt;
        public static void InitialPGSql(string server, string port, string database, string userId, string passWord, bool ifJiaMi)
        {

            if (ifJiaMi)
            {
                passWord = Encryption.DecryptStringFromBytes_Aes(passWord, "PostgreSQLExample");//解密密码
            }
            PG_db = new SqlSugarScope(new ConnectionConfig
            {
                ConnectionString = $"Server={server};Port={port};Database={database};User Id={userId};Password={passWord}",
                DbType = DbType.PostgreSQL,
                IsAutoCloseConnection = true,
            });  // 使用SqlSugarScope建立PostgreSQL数据库连接


        }
        /// &lt;summary&gt;
        /// 获取数据库Postgre当前时间
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public DateTime GetPostgreDateTime()
        {
            return PG_db.Ado.GetDateTime("select now();");
        }


    }
}</code></pre> 
<h3>3.创建增删改查工具类</h3> 
<h4>3.1创建数据库表</h4> 
<p>数据库表可以根据实际的环境创建，用SQL语句或者可视化开发工具，这里用的是DBeaver</p> 
<p class="img-center"><img alt="" height="500" src="https://images2.imgbox.com/02/0b/OXEL0YPs_o.png" width="1200"></p> 
<p class="img-center"><img alt="" height="482" src="https://images2.imgbox.com/43/b0/ZCWUAUzw_o.png" width="937"></p> 
<h4>3.2创建跟数据库表相对应的映射类</h4> 
<pre><code class="language-cs">using SqlSugar;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DemoSummaryZT.DataModel
{
    /// &lt;summary&gt;
    /// 用户信息
    /// &lt;/summary&gt;
    [SugarTable("user_table")]
    public class UserTable
    {
        public string ID { get; set; }
        /// &lt;summary&gt;
        /// 年龄
        public int Age { get; set; }
        /// &lt;summary&gt;
        /// 姓名
        /// &lt;/summary&gt;
        public string Name { get; set; }
       

    }
}
</code></pre> 
<h4>3.3分别创建增删改查工具类</h4> 
<p>注意，这里的所有操作类都继承步骤2中的PGSql类</p> 
<h5>增</h5> 
<pre><code class="language-cs">using DemoSummaryZT.DataModel;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DemoSummaryZT.DatabaseOperation
{
    public  class AddUser :PGSql
    {
        /// &lt;summary&gt;
        /// 新增用户
        /// &lt;/summary&gt;
        public static void AddNewUser(UserTable ut)
        {
            try
            {
                var res = PG_db.Insertable(ut).ExecuteCommand();
                if (res &gt; 0)
                {
                    return ;
                }
                else
                {
                    return ;
                }
            }
            catch (Exception ex)
            {
                return;
            }
        }

    }

    
}
</code></pre> 
<h5>删</h5> 
<pre><code class="language-cs">using DemoSummaryZT.DataModel;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DemoSummaryZT.DatabaseOperation
{
    public  class DeleteUser:PGSql
    {
        /// &lt;summary&gt;
        /// 删除用户
        /// &lt;/summary&gt;
        public static void Delete(string id)
        {
            try
            {

                var res = PG_db.Deleteable&lt;UserTable&gt;().In(it =&gt; it.ID , id).ExecuteCommand();
              //  var res = PG_db.Deleteable&lt;UserTable&gt;().In(100).ExecuteCommand();
              
                if (res &gt; 0)
                {
                    return;
                }
                else
                {
                    return;
                }
            }
            catch (Exception ex)
            {
                return;
            }
        }

    }
}
</code></pre> 
<h5>改</h5> 
<pre><code class="language-cs">using DemoSummaryZT.DataModel;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace DemoSummaryZT.DatabaseOperation
{
    public  class ModifyUser:PGSql
    {


        public static  void Modify(UserTable ut)
        {
            var result = PG_db.Updateable(ut).Where(a=&gt;a.ID==ut.ID ).ExecuteCommand();
        }

    }
}
</code></pre> 
<h5>查</h5> 
<pre><code class="language-cs">using DemoSummaryZT.DataModel;
using SqlSugar;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;


namespace DemoSummaryZT.DatabaseOperation
{

    public  class QueryUser:PGSql
    {

        /// &lt;summary&gt;
       /// 查询所有的用户
        /// &lt;/summary&gt;
        public static List&lt;UserTable&gt; QueryUserName()
        {
            List&lt;UserTable&gt;list = PG_db.Queryable&lt;UserTable&gt;().ToList();
            return list;
        }
    }
}
</code></pre> 
<h3>4.调用操作类访问数据库</h3> 
<p>创建控制台程序，调用数据库访问工具类并运行</p> 
<pre><code class="language-cs">using DemoSummaryZT.DatabaseOperation;
using DemoSummaryZT.DataModel;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace DemoSummaryZT
{
    internal static class Program
    {
        /// &lt;summary&gt;
        /// 应用程序的主入口点。
        /// &lt;/summary&gt;
        [STAThread]
        static void Main()
        {

            //初始化数据库连接
            PGSql.InitialPGSql("localhost", "5432", "postgres", "postgres", "postgres", false);
            //查询数据
            Console.WriteLine("----新查询----");
            List&lt;UserTable&gt; userList = QueryUser.QueryUserName();
            foreach (var item in userList)
            {
                Console.WriteLine("用户名:{0}\t\t ID:{1}\t年龄:{2}\t", item.Name, item.ID, item.Age);
            }
            //新增数据
            Console.WriteLine("----新增数据----");
            UserTable userTable = new UserTable();
            userTable.ID = "100";
            userTable.Name = "新增用户";
            userTable.Age = 47;
            AddUser.AddNewUser(userTable);
            Console.WriteLine("----新查询----");
            List&lt;UserTable&gt; userList1 = QueryUser.QueryUserName();
            foreach (var item in userList1)
            {
                Console.WriteLine("用户名:{0}\t \t ID:{1}\t年龄:{2}\t", item.Name, item.ID, item.Age);
            }
            //修改数据
            Console.WriteLine("----修改数据----");
            UserTable userTable1 = new UserTable();
            userTable1.ID = "100";
            userTable1.Name = "新增用户名被修改";
            userTable1.Age = 47;
            ModifyUser.Modify(userTable1);
            Console.WriteLine("----新查询----");
            List&lt;UserTable&gt; userList2 = QueryUser.QueryUserName();
            foreach (var item in userList2)
            {
                Console.WriteLine("用户名:{0}\t \t ID:{1}\t年龄:{2}\t", item.Name, item.ID, item.Age);
            }
            //删除数据
            Console.WriteLine("----删除数据-新增用户----");
            Console.WriteLine("----删除数据-新增用户----");
            DeleteUser.Delete("100");
            Console.WriteLine("----新查询----");
            List&lt;UserTable&gt; userList3 = QueryUser.QueryUserName();
            foreach (var item in userList3)
            {
                Console.WriteLine("用户名:{0}\t \t ID:{1}\t年龄:{2}\t", item.Name, item.ID, item.Age);
            }
        }
    }
}
</code></pre> 
<h4>查看运行结果</h4> 
<p class="img-center"><img alt="" height="850" src="https://images2.imgbox.com/81/e0/o44cwRcI_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/18b157cc3acc3a666e4f431a995c5e06/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">spring boot3整合邮件服务实现邮件发送功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/30f3df374b6d169e93bd2e50c777b6a4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Kotlin 标准函数 with、run、apply 的定义和使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>