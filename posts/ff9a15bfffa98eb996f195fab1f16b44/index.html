<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· å‰–æç¯‡ï¼ˆä¸Šï¼‰ã€‹ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ff9a15bfffa98eb996f195fab1f16b44/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· å‰–æç¯‡ï¼ˆä¸Šï¼‰ã€‹">
  <meta property="og:description" content="ğŸ“¢ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ ã€æˆ˜ç¥åˆ˜ç‰æ ‹ã€‘ï¼Œæœ‰10å¤šå¹´çš„ç ”å‘ç»éªŒï¼Œè‡´åŠ›äºå‰åç«¯æŠ€æœ¯æ ˆçš„çŸ¥è¯†æ²‰æ·€å’Œä¼ æ’­ã€‚ ğŸ’—
ğŸŒ» CSDNå…¥é©»ä¸ä¹…ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œåç»­ä¼šç»§ç»­æå‡æ–‡ç« è´¨é‡ï¼Œç»ä¸æ»¥ç«½å……æ•°ï¼Œæ¬¢è¿å¤šå¤šäº¤æµã€‚ğŸ‘
æ–‡ç« ç›®å½• å†™åœ¨å‰é¢çš„è¯å­¦å‰å‡†å¤‡ è¯·æ±‚æµç¨‹åˆ†æStep1ã€DispatcherServlet#doDispatchStep2ã€DispatcherServlet#getHandlerStep3ã€DispatcherServlet#getHandlerAdapterStep4ã€DispatcherServlet#handleStep5ã€InvocableHandlerMethod#getMethodArgumentValuesStep6ã€InvocableHandlerMethod#doInvokeStep7ã€HandlerMethodReturnValueHandlerComposite#handleReturnValueStep8ã€RequestResponseBodyMethodProcessor#writeWithMessageConverters è¯·æ±‚åˆ†æå¤ç›˜æ•´ä¸ªæµç¨‹æ¢³ç†ï¼ˆç²¾ç®€ç‰ˆï¼‰doDispatchï¼ˆéƒ¨åˆ†ä»£ç ï¼‰ æ€»ç»“é™ˆè¯ å†™åœ¨å‰é¢çš„è¯ é€šè¿‡ä¸Šä¸€ç¯‡åšæ–‡ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· åŸºç¡€ç¯‡ã€‹çš„å­¦ä¹ ï¼Œå¯ä»¥æŒæ¡ SpringMVC çš„é¡¹ç›®æ­å»ºå’Œéƒ¨åˆ†ç”¨æ³•ï¼Œä»æ­å»ºè¿‡ç¨‹ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼ŒSpringMVC çš„å…¥å£æ˜¯åœ¨ web.xml ä¸­æ·»åŠ  DispatcherServletï¼Œå®ƒæ˜¯ä¸€ä¸ªServletï¼Œé‚£è¯·æ±‚æµç¨‹ä¹Ÿéµå¾ª Servlet ç›¸å…³è§„èŒƒå±•å¼€ã€‚
æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æç›¸å…³æºç ï¼Œé¡ºå¸¦å¼•å‡ºç›¸å…³æ‰©å±•ç‚¹å’Œå®æˆ˜è¿ç”¨ã€‚
å­¦å‰å‡†å¤‡ 1ã€SpringMVC æºç åˆ†æåˆ†ä¸ºåˆå§‹åŒ–æµç¨‹å’Œè¯·æ±‚æµç¨‹ä¸¤éƒ¨åˆ†ï¼Œæœ¬ç¯‡å…ˆé‡ç‚¹ä»‹ç»åè€…ã€‚å¯ä»¥æŠŠ SpringMVCçš„è¯·æ±‚æµç¨‹ï¼Œæ¯”ä½œä¸€ä¸ªè¯·æ±‚ï¼ˆServletï¼‰çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œé‚£å°±æ˜¯åŒ…æ‹¬â€œè¯·æ±‚å‰ - å®é™…è¯·æ±‚ - è¯·æ±‚åâ€ï¼Œä»¥æ­¤æ€è·¯å±•å¼€ï¼›
2ã€æœ¬ç¯‡ SpringMVC æºç åˆ†æç³»åˆ—æ–‡ç« ï¼Œå°†ä»¥ ã€Šæ­å»ºæ‹¥æœ‰æ•°æ®äº¤äº’çš„ SpringBoot ã€‹çš„ SpringBoot3.x ä¸ºåŸºç¡€ï¼Œå­¦ä¹ ç›¸å…³æºç ï¼Œå¯¹åº” SpringMVC ç‰ˆæœ¬ä¸º 6.1.11ï¼Œä¸è¿‡æ ¸å¿ƒæµç¨‹ä¸Šï¼ŒåŸºæœ¬å¤§åŒå°å¼‚ï¼›
3ã€å…ˆæ·»åŠ ä¸€ä¸ªå…¥å‚å’Œè¿”å›å€¼éƒ½æ˜¯å®ä½“å¯¹è±¡çš„æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæ­£æ‰€è°“éº»é›€è™½å°ï¼Œä½†ä¹Ÿè¦†ç›–åˆ°å…¥å‚è§£æé€»è¾‘äº†ï¼Œå¯åŠ¨Booté¡¹ç›®ï¼ŒPostmanæµ‹è¯•ä¸€ä¸‹ï¼Œæ©ï¼ŒåŠŸèƒ½éƒ½æ­£å¸¸ï¼Œå¯ä»¥å¼€å§‹æºç å­¦ä¹ äº†ï¼
@ResponseBody @RequestMapping(&#34;/studyJson&#34;) public ZyTeacherInfo studyJson(@RequestBody ZyTeacherInfo teacherInfo) { teacherInfo.setTeaName(&#34;æˆ˜ç¥&#34;); return teacherInfo; } ç›¸å…³æ–‡ç« 
ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· å‰–æç¯‡ï¼ˆä¸Šï¼‰ã€‹
è¯·æ±‚æµç¨‹åˆ†æ Tipsï¼šå…ˆé€šè¿‡ç¤ºä¾‹æ–¹æ³•çš„æ‰§è¡Œï¼Œæ¢³ç†ä¸€ä¸‹ç›¸å¯¹å®Œæ•´çš„é“¾è·¯ï¼Œåç»­åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•è‡ªå®šä¹‰é€»è¾‘ã€‚
Step1ã€DispatcherServlet#doDispatch å‰é¢æåˆ° DispatcherServlet æ˜¯ SpringMVC çš„å…¥å£ï¼Œä¸ç®¡æ˜¯å¦ä¸º SpringBoot é¡¹ç›®ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-31T22:31:59+08:00">
    <meta property="article:modified_time" content="2024-07-31T22:31:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· å‰–æç¯‡ï¼ˆä¸Šï¼‰ã€‹</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ğŸ“¢ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ ã€æˆ˜ç¥åˆ˜ç‰æ ‹ã€‘ï¼Œæœ‰10å¤šå¹´çš„ç ”å‘ç»éªŒï¼Œè‡´åŠ›äºå‰åç«¯æŠ€æœ¯æ ˆçš„çŸ¥è¯†æ²‰æ·€å’Œä¼ æ’­ã€‚ ğŸ’—<br> ğŸŒ» CSDNå…¥é©»ä¸ä¹…ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œåç»­ä¼šç»§ç»­æå‡æ–‡ç« è´¨é‡ï¼Œç»ä¸æ»¥ç«½å……æ•°ï¼Œæ¬¢è¿å¤šå¤šäº¤æµã€‚ğŸ‘</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><ul><li><a href="#_9" rel="nofollow">å†™åœ¨å‰é¢çš„è¯</a></li><li><ul><li><a href="#_15" rel="nofollow">å­¦å‰å‡†å¤‡</a></li></ul> 
   </li><li><a href="#_34" rel="nofollow">è¯·æ±‚æµç¨‹åˆ†æ</a></li><li><ul><li><a href="#Step1DispatcherServletdoDispatch_38" rel="nofollow">Step1ã€DispatcherServlet#doDispatch</a></li><li><a href="#Step2DispatcherServletgetHandler_48" rel="nofollow">Step2ã€DispatcherServlet#getHandler</a></li><li><a href="#Step3DispatcherServletgetHandlerAdapter_82" rel="nofollow">Step3ã€DispatcherServlet#getHandlerAdapter</a></li><li><a href="#Step4DispatcherServlethandle_122" rel="nofollow">Step4ã€DispatcherServlet#handle</a></li><li><a href="#Step5InvocableHandlerMethodgetMethodArgumentValues_169" rel="nofollow">Step5ã€InvocableHandlerMethod#getMethodArgumentValues</a></li><li><a href="#Step6InvocableHandlerMethoddoInvoke_242" rel="nofollow">Step6ã€InvocableHandlerMethod#doInvoke</a></li><li><a href="#Step7HandlerMethodReturnValueHandlerCompositehandleReturnValue_248" rel="nofollow">Step7ã€HandlerMethodReturnValueHandlerComposite#handleReturnValue</a></li><li><a href="#Step8RequestResponseBodyMethodProcessorwriteWithMessageConverters_280" rel="nofollow">Step8ã€RequestResponseBodyMethodProcessor#writeWithMessageConverters</a></li></ul> 
   </li><li><a href="#_317" rel="nofollow">è¯·æ±‚åˆ†æå¤ç›˜</a></li><li><ul><li><a href="#_319" rel="nofollow">æ•´ä¸ªæµç¨‹æ¢³ç†ï¼ˆç²¾ç®€ç‰ˆï¼‰</a></li><li><a href="#doDispatch_364" rel="nofollow">doDispatchï¼ˆéƒ¨åˆ†ä»£ç ï¼‰</a></li></ul> 
   </li><li><a href="#_459" rel="nofollow">æ€»ç»“é™ˆè¯</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/1c/12/D6HEHqLe_o.gif" alt="CSDN.gif"></p> 
<h3><a id="_9"></a>å†™åœ¨å‰é¢çš„è¯</h3> 
<p>é€šè¿‡ä¸Šä¸€ç¯‡åšæ–‡<a href="https://zhanshen.blog.csdn.net/article/details/140799689" rel="nofollow">ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· åŸºç¡€ç¯‡ã€‹</a>çš„å­¦ä¹ ï¼Œå¯ä»¥æŒæ¡ SpringMVC çš„é¡¹ç›®æ­å»ºå’Œéƒ¨åˆ†ç”¨æ³•ï¼Œä»æ­å»ºè¿‡ç¨‹ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼ŒSpringMVC çš„å…¥å£æ˜¯åœ¨ web.xml ä¸­æ·»åŠ  DispatcherServletï¼Œå®ƒæ˜¯ä¸€ä¸ªServletï¼Œé‚£è¯·æ±‚æµç¨‹ä¹Ÿéµå¾ª Servlet ç›¸å…³è§„èŒƒå±•å¼€ã€‚<br> æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æç›¸å…³æºç ï¼Œé¡ºå¸¦å¼•å‡ºç›¸å…³æ‰©å±•ç‚¹å’Œå®æˆ˜è¿ç”¨ã€‚</p> 
<hr> 
<h4><a id="_15"></a>å­¦å‰å‡†å¤‡</h4> 
<p>1ã€SpringMVC æºç åˆ†æåˆ†ä¸ºåˆå§‹åŒ–æµç¨‹å’Œè¯·æ±‚æµç¨‹ä¸¤éƒ¨åˆ†ï¼Œæœ¬ç¯‡å…ˆé‡ç‚¹ä»‹ç»åè€…ã€‚å¯ä»¥æŠŠ SpringMVCçš„è¯·æ±‚æµç¨‹ï¼Œæ¯”ä½œä¸€ä¸ªè¯·æ±‚ï¼ˆServletï¼‰çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œé‚£å°±æ˜¯åŒ…æ‹¬â€œè¯·æ±‚å‰ - å®é™…è¯·æ±‚ - è¯·æ±‚åâ€ï¼Œä»¥æ­¤æ€è·¯å±•å¼€ï¼›<br> 2ã€æœ¬ç¯‡ SpringMVC æºç åˆ†æç³»åˆ—æ–‡ç« ï¼Œå°†ä»¥ <a href="https://zhanshen.blog.csdn.net/article/details/140621952" rel="nofollow">ã€Šæ­å»ºæ‹¥æœ‰æ•°æ®äº¤äº’çš„ SpringBoot ã€‹</a>çš„ SpringBoot3.x ä¸ºåŸºç¡€ï¼Œå­¦ä¹ ç›¸å…³æºç ï¼Œå¯¹åº” SpringMVC ç‰ˆæœ¬ä¸º 6.1.11ï¼Œä¸è¿‡æ ¸å¿ƒæµç¨‹ä¸Šï¼ŒåŸºæœ¬å¤§åŒå°å¼‚ï¼›<br> 3ã€å…ˆæ·»åŠ ä¸€ä¸ªå…¥å‚å’Œè¿”å›å€¼éƒ½æ˜¯å®ä½“å¯¹è±¡çš„æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæ­£æ‰€è°“éº»é›€è™½å°ï¼Œä½†ä¹Ÿè¦†ç›–åˆ°å…¥å‚è§£æé€»è¾‘äº†ï¼Œå¯åŠ¨Booté¡¹ç›®ï¼ŒPostmanæµ‹è¯•ä¸€ä¸‹ï¼Œæ©ï¼ŒåŠŸèƒ½éƒ½æ­£å¸¸ï¼Œå¯ä»¥å¼€å§‹æºç å­¦ä¹ äº†ï¼</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/studyJson"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ZyTeacherInfo</span> <span class="token function">studyJson</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">ZyTeacherInfo</span> teacherInfo<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    teacherInfo<span class="token punctuation">.</span><span class="token function">setTeaName</span><span class="token punctuation">(</span><span class="token string">"æˆ˜ç¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> teacherInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/fc/qnqjb19P_o.png" alt="image.png"></p> 
<p><strong>ç›¸å…³æ–‡ç« </strong><br> <a href="https://zhanshen.blog.csdn.net/article/details/140809735" rel="nofollow">ã€Šå­¦ä¼š SpringMVC ç³»åˆ— Â· å‰–æç¯‡ï¼ˆä¸Šï¼‰ã€‹</a></p> 
<hr> 
<h3><a id="_34"></a>è¯·æ±‚æµç¨‹åˆ†æ</h3> 
<blockquote> 
 <p>Tipsï¼šå…ˆé€šè¿‡ç¤ºä¾‹æ–¹æ³•çš„æ‰§è¡Œï¼Œæ¢³ç†ä¸€ä¸‹ç›¸å¯¹å®Œæ•´çš„é“¾è·¯ï¼Œåç»­åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•è‡ªå®šä¹‰é€»è¾‘ã€‚</p> 
</blockquote> 
<h4><a id="Step1DispatcherServletdoDispatch_38"></a>Step1ã€DispatcherServlet#doDispatch</h4> 
<p>å‰é¢æåˆ° DispatcherServlet æ˜¯ SpringMVC çš„å…¥å£ï¼Œä¸ç®¡æ˜¯å¦ä¸º SpringBoot é¡¹ç›®ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚<br> ä»ä¸‹é¢è¿™å¼ å›¾å¾ˆæ˜æ˜¾å¯ä»¥çœ‹å‡º DispatcherServlet å’Œ Servlet çš„çˆ¶å­å…³ç³»ã€‚<br> <img src="https://images2.imgbox.com/53/2c/ipumAcNk_o.png" alt="image.png"><br> æœ‰è¿‡ JavaWeb å¼€å‘ç»éªŒçš„äººåº”è¯¥äº†è§£ï¼ŒServlet çš„è¯·æ±‚å…¥å£æ–¹æ³•æ˜¯ service æ–¹æ³•ã€‚åœ¨è®¿é—®æ¥å£åï¼Œå¯ä»¥æŠŠæ–­ç‚¹åœç•™åœ¨ DispatcherServlet#doDispatch æ–¹æ³•ï¼Œå¯ä»¥ä»IDEAçš„è°ƒè¯•å™¨ï¼Œè§‚å¯Ÿåˆ°è¯·æ±‚çš„è°ƒç”¨æ ˆä¿¡æ¯ã€‚<br> è¿™è¾¹å…ˆä¸å±•å¼€ç»†èŠ‚ï¼Œåç»­å†æŒ‰ä¸“æ å±•å¼€ï¼Œæ€»ä¹‹æ˜¯åœ¨ DispatcherServletã€FrameworkServletã€HttpServlet ç­‰ç±»ä¹‹é—´åå¤æ¨ªè·³ï¼Œæœ€ååˆ°äº† doDispatchï¼Œå½“ç„¶ï¼Œè¿™é‡Œé¢æ‰æ˜¯è¯·æ±‚çš„æ ¸å¿ƒé€»è¾‘ã€‚<br> <img src="https://images2.imgbox.com/db/57/DyCsmm3Y_o.png" alt="image.png"></p> 
<hr> 
<h4><a id="Step2DispatcherServletgetHandler_48"></a>Step2ã€DispatcherServlet#getHandler</h4> 
<p><strong>å…³é”®ä»£ç ï¼š</strong><code>HandlerExecutionChain mappedHandler = getHandler(processedRequest);</code><br> <strong>é€»è¾‘è¯´æ˜ï¼š</strong></p> 
<ul><li>ç›®çš„æ˜¯è·å– HandlerExecutionChain æ‰§è¡Œé“¾å¯¹è±¡ï¼Œé™¤äº†åŒ…å« HandlerMethod æ–¹æ³•ï¼ˆå…·ä½“ Controller çš„æ–¹æ³•ï¼‰ï¼Œè¿˜åŒ…å«æ‹¦æˆªå™¨ä¿¡æ¯ï¼›</li><li>æ‰§è¡Œè¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéå† HandlerMapping åˆ—è¡¨ï¼ˆåœ¨åˆå§‹åŒ–æ—¶åŠ è½½åˆ—è¡¨ï¼‰ï¼Œä¾æ¬¡æ‰§è¡Œ HandlerMapping çš„ getHandler æ–¹æ³•ï¼Œä»…æœ‰ RequestMappingHandlerMapping æ»¡è¶³ï¼ŒåŒæ—¶åœ¨å…¶çˆ¶ç±» AbstractHandlerMapping çš„æ–¹æ³• getHandlerExecutionChain ä¸­ï¼Œä¼šåŠ è½½æ‹¦æˆªå™¨é“¾ï¼Œå¦‚å›¾äºŒæ‰€ç¤ºï¼›</li></ul> 
<p><img src="https://images2.imgbox.com/c2/1f/L5lmgkXm_o.png" alt="image.png"><br> <img src="https://images2.imgbox.com/8e/2e/QQyMYnET_o.png" alt="image.png"><br> å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè·å–åˆ°çš„ HandlerExecutionChain å¯¹è±¡ï¼ŒæŒ‡å‘å…·ä½“ä¸šåŠ¡æ¥å£ï¼Œå¹¶ä¸”åŒ…å«ä¸‰ä¸ªå†…ç½®æ‹¦æˆªå™¨ã€‚<br> åˆ°æ­¤ï¼ŒDispatcherServlet#getHandler æµç¨‹åŸºæœ¬ç»“æŸã€‚</p> 
<p><strong>é¢˜å¤–è¯ - å¦‚ä½•åˆ¤å®š RequestMappingHandlerMappingï¼š</strong><br> åœ¨ SpringBoot å¼€å‘ä¸­ï¼Œå¤§éƒ¨åˆ†æ¥å£æ·»åŠ äº† @Controller æ³¨è§£ï¼Œç¤ºä¾‹æ–¹æ³•ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä»<code>RequestMappingHandlerMapping#isHandler</code> çš„ä»£ç ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œåªè¦ç±»åŒ…å« @Controller æ³¨è§£ï¼Œå°±å¯ä»¥æ»¡è¶³åŠ è½½è¦æ±‚ã€‚</p> 
<blockquote> 
 <p>Tipsï¼šSpringMVCçš„5.xï¼Œä¹Ÿå…è®¸åªå­˜åœ¨ RequestMapping æ³¨è§£çš„æƒ…å†µï¼Œ6.x åªå‰©ä¸‹Controlleräº†ã€‚<br> Tipsï¼šè¯¥æ–¹æ³•æ˜¯æœåŠ¡å¯åŠ¨çš„æ—¶å€™ï¼Œé€ä¸ªBeanå»è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ¤å®šå½’å±ï¼Œåç»­å†å±•å¼€ä»‹ç»ã€‚</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isHandler</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> beanType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token class-name">AnnotatedElementUtils</span><span class="token punctuation">.</span><span class="token function">hasAnnotation</span><span class="token punctuation">(</span>beanType<span class="token punctuation">,</span> <span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>Tipsï¼šå¦å¤–ï¼ŒRequestMappingHandlerMapping ä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šå°†<code>url/controllerçš„æ˜ å°„</code>å­˜åˆ°handlerMethods å˜é‡ä¸­ï¼Œ<code>url/mappingçš„æ˜ å°„</code>å­˜åœ¨urlMapå˜é‡ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œç›®çš„æ˜¯æ–¹ä¾¿å¿«é€ŸæŸ¥æ‰¾ã€‚</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">HandlerMethod</span><span class="token punctuation">&gt;</span></span> handlerMethods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">HandlerMethod</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MultiValueMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> urlMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedMultiValueMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><strong>æ¸©é¦¨æç¤ºï¼šå¾ˆå¤šä»£ç è¿˜å¯ç»§ç»­æ·±æŒ–ï¼Œä½†å»ºè®®åˆ†ææºç è¿˜æ˜¯è¦æŠŠæ¡ä¸»çº¿ã€æµ…å°è¾„æ­¢ï¼Œä¸ç„¶æ·±é™·å…¶ä¸­ï¼Œæ— æ³•è‡ªæ‹”ï¼Œå½“ç„¶ï¼Œåç»­ä¼šé’ˆå¯¹æ¯ä¸ªé‡è¦æ¿å—å•ç‹¬å±•å¼€åˆ†æï¼Œæœ¬ç¯‡åªæ˜¯å±•ç¤ºä¸€ä¸ªå…¨è²Œã€‚</strong></p> 
</blockquote> 
<hr> 
<h4><a id="Step3DispatcherServletgetHandlerAdapter_82"></a>Step3ã€DispatcherServlet#getHandlerAdapter</h4> 
<p><strong>å…³é”®ä»£ç ï¼š</strong><code>HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());</code><br> <strong>é€»è¾‘è¯´æ˜ï¼š</strong></p> 
<ul><li>ç›®çš„æ˜¯è·å– HandlerAdapter å¤„ç†å™¨å¯¹è±¡ï¼ˆè™½ç„¶å•è¯æ˜¯é€‚é…å™¨ï¼Œå®é™…åšçš„æ˜¯å¤„ç†å™¨çš„äº‹æƒ…ï¼‰ï¼Œé€»è¾‘æœ‰ç‚¹ç±»ä¼¼å‰é¢æ‰¾Mapping çš„æ–¹å¼ï¼›</li><li>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä» HandlerAdapter åˆ—è¡¨éå†ï¼Œä¾æ¬¡å¯»æ‰¾ç¬¦åˆè¦æ±‚çš„ï¼ŒåŒ¹é…åˆ° RequestMappingHandlerAdapterï¼›</li></ul> 
<p><img src="https://images2.imgbox.com/e5/12/zd3lSSWY_o.png" alt="image.png"></p> 
<ul><li>å¦‚ä¸‹æ–¹ä»£ç ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæ˜¯æ ¹æ® supports æ–¹æ³•åˆ¤æ–­ adapter æ˜¯å¦æ”¯æŒè¿™ä¸ª handlerï¼Œå¾ˆæ˜æ˜¾è¿™ä¸ªè¦æ±‚å¾ˆç®€å•ï¼ŒRequestMappingHandlerAdapter æ˜¯è‚¯å®šæ»¡è¶³çš„ï¼›</li></ul> 
<pre><code class="prism language-java"><span class="token comment">// å­˜åœ¨çˆ¶ç±» AbstractHandlerMethodAdapter#supports</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> <span class="token function">supports</span><span class="token punctuation">(</span><span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// åˆ¤æ–­handleræ˜¯å¦å±äºHandlerMethod  å¹¶ä¸” supportsInternal ä¸ºtrue</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>handler <span class="token keyword">instanceof</span> <span class="token class-name">HandlerMethod</span> <span class="token operator">&amp;&amp;</span> <span class="token function">supportsInternal</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> handler<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>é¢˜å¤–è¯ï¼šgetHandlerAdapter æ·»åŠ æ³¨é‡Šä¿¡æ¯</strong><br> å¦‚ä¸‹æ‰€ç¤ºï¼Œçœ‹èµ·æ¥å’Œå‰é¢è·å– HandlerExecutionChain çš„è·å–é€»è¾‘å·®ä¸å¤šã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">protected</span> <span class="token class-name">HandlerAdapter</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span><span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//éå†æ‰€æœ‰handlerAdapters é€‰æ‹©åˆé€‚çš„handlerAdapters</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerAdapter</span> ha <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerAdapters<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Testing handler adapter ["</span> <span class="token operator">+</span> ha <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//åˆ¤æ–­è¿™ä¸ªadapteræ˜¯å¦æ”¯æŒè¿™ä¸ªhandler</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ha<span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> ha<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">"No adapter for handler ["</span> <span class="token operator">+</span> handler <span class="token operator">+</span>
			<span class="token string">"]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<hr> 
<h4><a id="Step4DispatcherServlethandle_122"></a>Step4ã€DispatcherServlet#handle</h4> 
<p>æ¥ä¸‹æ¥åˆ°äº†æ ¸å¿ƒä»£ç ç‰‡æ®µï¼Œç›´æ¥çœ‹å¦‚ä¸‹ä»£ç ï¼šå¯ä»¥çœ‹åˆ° handle æ‰æ˜¯ç»å¯¹çš„æ ¸å¿ƒï¼Œå‰ååŒ…è£¹äº†å‰ç½®å’Œåç½®æ‹¦æˆªå™¨ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Actually invoke the handler.</span>
mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mappedHandler<span class="token punctuation">.</span><span class="token function">applyPostHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>é€»è¾‘è¯´æ˜ï¼š</strong><br> 1ã€æ­¤æ—¶å·²ç»å¾—åˆ° HandlerAdapterï¼Œå…ˆæ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„ applyPreHandle æ–¹æ³•ï¼›<br> 2ã€æ¥ç€è°ƒç”¨å…¶ handle æ–¹æ³•ï¼Œå†æ‰§è¡Œæ‹¦æˆªå™¨çš„ applyPostHandle æ–¹æ³•ï¼›<br> 3ã€è¿™é‡Œçš„ handle æ˜¯ä¸»è¦é€»è¾‘ï¼Œç”±äº RequestMappingHandlerAdapter æ²¡æœ‰ handle æ–¹æ³•ï¼Œæ‰€ä»¥è¿›å…¥çˆ¶ç±»çš„ handleï¼Œå†ç»è¿‡ä¸€ç³»åˆ—æ–¹æ³•ï¼Œæœ€ç»ˆè¿›å…¥InvocableHandlerMethod#invokeForRequestï¼›</p> 
<pre><code class="prism language-java"><span class="token comment">//è¯·æ±‚é“¾è·¯ï¼š</span>
<span class="token comment">// AbstractHandlerMethodAdapter#handle</span>
<span class="token comment">// RequestMappingHandlerAdapter#invokeHandleMethod</span>
<span class="token comment">// ServletInvocableHandlerMethod#invokeAndHandle</span>
<span class="token comment">// InvocableHandlerMethod#invokeForRequestï¼Œä¸‹æ–¹ä»£ç ï¼ˆå‚æ•°è§£æå’Œå®é™…è¯·æ±‚ï¼‰</span>
<span class="token comment">// HandlerMethodReturnValueHandlerComposite#returnValueHandlersï¼ˆè¿”å›å€¼å¤„ç†ï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">invokeForRequest</span><span class="token punctuation">(</span><span class="token class-name">NativeWebRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
		<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	
    <span class="token comment">// åˆ©ç”¨å‚æ•°è§£æå™¨è§£æå‚æ•°ï¼Œæœ€ç»ˆå¾—åˆ°å‚æ•°åˆ—è¡¨</span>
	<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">"Invoking ["</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">getBeanType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"] method with arguments "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
    <span class="token comment">//æ­¤å¤„æ‰§è¡Œåå°„è°ƒç”¨controllerçš„æ–¹æ³•</span>
	<span class="token class-name">Object</span> returnValue <span class="token operator">=</span> <span class="token function">doInvoke</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"Method ["</span> <span class="token operator">+</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"] returned ["</span> <span class="token operator">+</span> returnValue <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> returnValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h4><a id="Step5InvocableHandlerMethodgetMethodArgumentValues_169"></a>Step5ã€InvocableHandlerMethod#getMethodArgumentValues</h4> 
<p>æ¥ä¸Šå›ï¼ŒgetMethodArgumentValues è¿™æ­¥é€šä¿—ä¸€ç‚¹æ¥è¯´ï¼Œå°±æ˜¯è§£æå‚æ•°ï¼Œå¾—åˆ°æœ€åçš„å‚æ•°åˆ—è¡¨ã€‚<br> éƒ¨åˆ†ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p> 
<pre><code class="prism language-java"><span class="token keyword">protected</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span><span class="token class-name">NativeWebRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
		<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>

	<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>parameters<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parameters<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒè§£æè¿™ä¸ªå‚æ•°ï¼Œå¦‚æœæ”¯æŒä¼šæŠŠå‚æ•°è§£æå™¨åŠ å…¥åˆ°ç¼“å­˜ä¸­</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> <span class="token string">"No suitable resolver"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
		    <span class="token comment">è§£æè¯·æ±‚å‚æ•°</span>
			args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">resolveArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataBinderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> args<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å…¶ä¸­ï¼Œæœ€é‡è¦çš„æ–¹æ³•åº”è¯¥æ˜¯ resolveArgumentï¼Œå…¶éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼Œé€»è¾‘ä¹Ÿæ˜¯æŠŠæ‰€æœ‰å‚æ•°è§£æå™¨æ‹¿å‡ºæ¥æºœæºœï¼Œçœ‹çœ‹å“ªä¸ªè§£æå™¨çš„ supportsParameter æ–¹æ³•æ»¡è¶³ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">resolveArgument</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
		<span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">WebDataBinderFactory</span> binderFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">HandlerMethodArgumentResolver</span> resolver <span class="token operator">=</span> <span class="token function">getArgumentResolver</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> resolver<span class="token punctuation">.</span><span class="token function">resolveArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">,</span> binderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">HandlerMethodArgumentResolver</span> <span class="token function">getArgumentResolver</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">HandlerMethodArgumentResolver</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolverCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethodArgumentResolver</span> resolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>resolver<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				result <span class="token operator">=</span> resolver<span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolverCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ä¸å‡ºæ„å¤–ï¼Œæ»¡è¶³çš„æ˜¯ RequestResponseBodyMethodProcessorï¼Œè¿è¡Œæˆªå›¾å¦‚ä¸‹ï¼Œä»27ä¸ªå‚æ•°è§£æå™¨ä¸­é€‰ä¸­äº†è¿™ä¸ªã€‚<br> <img src="https://images2.imgbox.com/0f/28/U0Jh6w3y_o.png" alt="image.png"><br> æµç¨‹é‡æ–°æ¢³ç†ä¸€ä¸‹ï¼š</p> 
<ol><li>éå†æ‰€æœ‰å‚æ•°åˆ—è¡¨ï¼Œä¾æ¬¡åˆ©ç”¨ supportsParameter æ–¹æ³•ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰è§£æå™¨æ˜¯å¦æ»¡è¶³ï¼›</li><li>å†è¿›è¡Œä¸‹é¢çš„ä¸€ç³»åˆ—åˆ¤å®šé€»è¾‘ï¼Œæœ€ç»ˆå¯ä»¥æ‰¾åˆ° RequestResponseBodyMethodProcessor è¿™ä¸€è§£æå™¨æ˜¯ç¬¦åˆçš„ï¼Œç´§æ¥ç€æŠŠå‚æ•°è§£æå™¨æ”¾åˆ° argumentResolverCache ç¼“å­˜ä¸­ï¼›</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supportsParameter</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> parameter<span class="token punctuation">.</span><span class="token function">hasParameterAnnotation</span><span class="token punctuation">(</span><span class="token class-name">RequestBody</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supportsReturnType</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">AnnotatedElementUtils</span><span class="token punctuation">.</span><span class="token function">hasAnnotation</span><span class="token punctuation">(</span>returnType<span class="token punctuation">.</span><span class="token function">getContainingClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ResponseBody</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">||</span>
			returnType<span class="token punctuation">.</span><span class="token function">hasMethodAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ResponseBody</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>æœ€ç»ˆè°ƒç”¨RequestResponseBodyMethodProcessor çš„ resolveArgument è¿›è¡Œå‚æ•°è§£æï¼›</li></ol> 
<blockquote> 
 <p>Tipsï¼šè¿™é‡Œå…¶å®åˆæ˜¯ä¸€ä¸ªé€‚é…å™¨çš„å¥—è·¯ï¼ˆé€‚é…å™¨æ¨¡å¼ï¼‰ï¼ŒSpringä¸ºæˆ‘ä»¬æä¾›äº†å¤šç§åœºæ™¯çš„æ”¯æŒã€‚</p> 
</blockquote> 
<p><strong>é¢˜å¤–è¯ï¼šå¦‚ä½•æ˜¯ @RequestParam æ³¨è§£å‘¢ï¼Ÿ</strong><br> å¦‚æœæ¥å£çš„å‚æ•°ä½¿ç”¨ @RequestParam æ³¨è§£ï¼Œé‚£ä¹ˆè¿™é‡Œæ»¡è¶³çš„æ˜¯ RequestParamMethodArgumentResolver ï¼Œè¿è¡Œæˆªå›¾å¦‚ä¸‹ï¼Œå½“ç„¶å®ƒä¹Ÿæ˜¯ç¬¬ä¸€é¡ºä½ã€‚<br> å€¼å¾—ä¸€æï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆé€‚çš„å‚æ•°å¤„ç†å™¨ï¼Œé‚£ä¹ˆæœ€åè¿˜æ˜¯ä¼šç”¨ RequestParamMethodArgumentResolver å…œåº•ï¼Œæ­¤æ—¶åè¯ï¼Œæš‚ä¸”ä¸æã€‚<br> <img src="https://images2.imgbox.com/61/a6/HOEAFGaW_o.png" alt="image.png"></p> 
<hr> 
<h4><a id="Step6InvocableHandlerMethoddoInvoke_242"></a>Step6ã€InvocableHandlerMethod#doInvoke</h4> 
<p>æ¥å‰é¢çš„<code>InvocableHandlerMethod#invokeForRequest</code>ï¼Œåœ¨æ‰§è¡Œå®Œ<code>getMethodArgumentValues</code>è·å¾—æœ€ç»ˆå‚æ•°åˆ—è¡¨åï¼Œå°±ç›´æ¥è°ƒç”¨<code>InvocableHandlerMethod#doInvoke</code>è¿›è¡ŒçœŸå®é€»è¾‘è°ƒç”¨ï¼Œå¾—åˆ°è¿”å›å€¼ã€‚<br> åˆ©ç”¨çš„æ˜¯åå°„æœºåˆ¶ï¼Œç»†èŠ‚ä¸å±•å¼€ï¼Œåç»­ä¸“æ å†è¡¥å……è¯´æ˜ã€‚</p> 
<hr> 
<h4><a id="Step7HandlerMethodReturnValueHandlerCompositehandleReturnValue_248"></a>Step7ã€HandlerMethodReturnValueHandlerComposite#handleReturnValue</h4> 
<p>å®é™…ä¸šåŠ¡æ¥å£æ‰§è¡Œå®Œï¼Œä¹Ÿæ‹¿åˆ°äº†è¿”å›å€¼ï¼Œæ¥ä¸‹æ¥å°±è¯¥é’ˆå¯¹è¿”å›å€¼è¿›è¡ŒåŠ å·¥å¤„ç†ã€‚<br> éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼Œåˆæ˜¯ä¸€æ ·çš„è®¨è®ºï¼Œå…ˆä»è¿”å›å€¼å¤„ç†å™¨çš„åˆ—è¡¨é‡Œé¢ï¼Œæ‰¾åˆ°åŒ¹é…çš„ï¼Œç„¶åæ‰§è¡Œå¤„ç†é€»è¾‘ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleReturnValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">,</span>
		<span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span> <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//æ‰¾åˆ°åˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨</span>
    <span class="token class-name">HandlerMethodReturnValueHandler</span> handler <span class="token operator">=</span> <span class="token function">selectHandler</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Unknown return value type: "</span> <span class="token operator">+</span> returnType<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    <span class="token comment">//æ‰§è¡Œå¤„ç†é€»è¾‘</span>
	handler<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">HandlerMethodReturnValueHandler</span> <span class="token function">selectHandler</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">boolean</span> isAsyncValue <span class="token operator">=</span> <span class="token function">isAsyncReturnValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethodReturnValueHandler</span> handler <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>isAsyncValue <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>handler <span class="token keyword">instanceof</span> <span class="token class-name">AsyncHandlerMethodReturnValueHandler</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span><span class="token function">supportsReturnType</span><span class="token punctuation">(</span>returnType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> handler<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/98/ec/qeyTiOY9_o.png" alt="image.png"></p> 
<hr> 
<h4><a id="Step8RequestResponseBodyMethodProcessorwriteWithMessageConverters_280"></a>Step8ã€RequestResponseBodyMethodProcessor#writeWithMessageConverters</h4> 
<p>æ¥ä¸Šå›ï¼Œè¿›å» RequestResponseBodyMethodProcessor è¿”å›å€¼å¤„ç†å™¨ã€‚<br> è¿™é‡Œè¿˜è¦å†ç»å†ä¸€æ¬¡æ¶ˆæ¯è½¬æ¢å™¨éå†ï¼Œæ‰¾åˆ°åˆé€‚çš„ï¼Œè¿›è¡Œé€»è¾‘å¤„ç†ã€‚<br> <img src="https://images2.imgbox.com/f4/e9/b4bNGGtY_o.png" alt="image.png"><br> <img src="https://images2.imgbox.com/36/ec/HvXMSRg2_o.png" alt="image.png"><br> æ¥ç€è¿›å…¥writeé€»è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œç»è¿‡<code>outputMessage.getBody().flush()</code>ï¼Œæ•°æ®å·²ç»è¾“å‡ºç»™è°ƒç”¨æ–¹äº†ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">T</span> t<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">MediaType</span> contentType<span class="token punctuation">,</span> <span class="token class-name">HttpOutputMessage</span> outputMessage<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMessageNotWritableException</span> <span class="token punctuation">{<!-- --></span>
    
	<span class="token keyword">final</span> <span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> outputMessage<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
	<span class="token function">addDefaultHeaders</span><span class="token punctuation">(</span>headers<span class="token punctuation">,</span> t<span class="token punctuation">,</span> contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
	<span class="token keyword">if</span> <span class="token punctuation">(</span>outputMessage <span class="token keyword">instanceof</span> <span class="token class-name">StreamingHttpOutputMessage</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">StreamingHttpOutputMessage</span> streamingOutputMessage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">StreamingHttpOutputMessage</span><span class="token punctuation">)</span> outputMessage<span class="token punctuation">;</span>
		streamingOutputMessage<span class="token punctuation">.</span><span class="token function">setBody</span><span class="token punctuation">(</span>outputStream <span class="token operator">-&gt;</span> <span class="token function">writeInternal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HttpOutputMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token annotation punctuation">@Override</span>
			<span class="token keyword">public</span> <span class="token class-name">OutputStream</span> <span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> outputStream<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token annotation punctuation">@Override</span>
			<span class="token keyword">public</span> <span class="token class-name">HttpHeaders</span> <span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> headers<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">writeInternal</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> outputMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
		outputMessage<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>write å®Œæ¯•ä¹‹åï¼Œè¯·æ±‚é“¾è·¯åˆå›åˆ°DispatcherServlet#doDispatchï¼Œå†æ¥åç½®æ‹¦æˆªå™¨ç­‰å¤„ç†ï¼Œè¿™è¾¹æš‚ä¸”ä¸ç»§ç»­å±•å¼€ã€‚</p> 
<hr> 
<h3><a id="_317"></a>è¯·æ±‚åˆ†æå¤ç›˜</h3> 
<h4><a id="_319"></a>æ•´ä¸ªæµç¨‹æ¢³ç†ï¼ˆç²¾ç®€ç‰ˆï¼‰</h4> 
<blockquote> 
 <p>Tipsï¼šä¸Šè¿°åˆ†ææµç¨‹ç²¾ç®€ä¸€ä¸‹ï¼Œå¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»“è®ºã€‚</p> 
</blockquote> 
<p>1ã€æ€»å…¥å£ DispatcherServletï¼Œæœ€åº•å±‚å…¶å®æ˜¯ HttpServlet#service<br> 2ã€æ ¹æ®è¯·æ±‚URLï¼Œæ‰¾åˆ°å¤„ç†æ–¹æ³•Methodï¼ŒDispatcherServlet#getHandler<br> 3ã€å‚æ•°å¤„ç†ï¼ŒHandlerMethodArgumentResolverï¼ŒRequestResponseBodyMethodProcessor<br> 4ã€æ‰§è¡ŒåŸæ–¹æ³•é€»è¾‘ï¼Œinvoke<br> 5ã€è¿”å›å€¼å¤„ç†ï¼ŒHandlerMethodReturnValueHandlerï¼ŒRequestResponseBodyMethodProcessor</p> 
<p><strong>ã€è¡¥å……ï¼šä¸Šè¿°æµç¨‹åˆ†æã€‘</strong><br> 1ã€HandlerMapping é˜¶æ®µï¼ŒåŒ¹é…åˆ°ä¸€ä¸ªHandlerMappingï¼Œé€šè¿‡Urlæ‰¾åˆ°æŸä¸ªcontrollerçš„æŸä¸ªæ–¹æ³•ã€‚è¿”å›HandlerExecutionChain å¯¹è±¡ï¼›<br> 2ã€æ ¹æ®HandlerMethodåŒ¹é…åˆ°æŸä¸ªHandlerAdapterï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„RequestMappingHandlerAdapterï¼›<br> 3ã€this.argumentResolvers.supportsParameter(parameter)åŒ¹é…å‚æ•°å¤„ç†å™¨ï¼Œè¿™é‡Œä¼šåŒ¹é…åˆ°RequestResponseBodyMethodProcessorï¼›<br> 4ã€ä»messageConvertersé›†åˆä¸­åŒ¹é…å‡ºå‚æ•°è½¬æ¢å™¨ï¼Œè¿™é‡Œæ˜¯MappingJackson2HttpMessageConverterã€‚è°ƒç”¨Jackson APIè½¬æ¢æˆå¯¹è±¡ï¼›<br> 5ã€å¾—åˆ°å‚æ•°åï¼Œåˆ©ç”¨åå°„æ‰§è¡ŒæŸä¸ªcontrollerä¸­æŸä¸ªæ–¹æ³•ï¼›<br> ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒSpringæ¡†æ¶æ˜¯ç›¸å½“çµæ´»çš„ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯è¢«å…¶å‘æŒ¥å¾—æ·‹æ¼“å°½è‡´ã€‚æ”¯æŒæˆ‘ä»¬è‡ªå®šä¹‰HandlerMappingã€HandlerAdapterã€messageConvertersç­‰ç­‰ï¼Œä»¥é€‚åº”æ›´å¤šçš„åº”ç”¨åœºæ™¯ã€‚</p> 
<blockquote> 
 <p>Tipsï¼šè™½ç„¶å¯ä»¥æ³¨å†Œå¤šä¸ª argumentResolver å’Œ messageConvertersï¼Œä½†æœ€ç»ˆåªä¼šé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ‰§è¡Œã€‚</p> 
</blockquote> 
<p><strong>ã€è¡¥å……ï¼š@RequestBody ä»‹ç»ã€‘</strong><br> @RequestBody æ³¨è§£æ˜¯ Spring MVC ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºæŒ‡ç¤ºæ§åˆ¶å™¨æ–¹æ³•å‚æ•°åº”è¯¥ç»‘å®šåˆ° HTTP è¯·æ±‚çš„ä¸»ä½“ï¼ˆbodyï¼‰éƒ¨åˆ†ã€‚å½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ POST æˆ– PUT è¯·æ±‚æ—¶ï¼Œè¯·æ±‚çš„æ•°æ®é€šå¸¸åŒ…å«åœ¨è¯·æ±‚ä¸»ä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ URL å‚æ•°ä¸­ã€‚@RequestBody æ³¨è§£å‘Šè¯‰ Spring MVC æ¡†æ¶å°†è¯·æ±‚ä¸»ä½“ä¸­çš„æ•°æ®ååºåˆ—åŒ–ä¸ºæŒ‡å®šçš„ Java å¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸ºæ–¹æ³•çš„å‚æ•°ä¼ é€’ç»™æ§åˆ¶å™¨æ–¹æ³•ã€‚<br> å…·ä½“æ¥è¯´ï¼Œ@RequestBody æ³¨è§£çš„ä½œç”¨åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š<br> ååºåˆ—åŒ–è¯·æ±‚ä¸»ä½“ï¼š å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªåŒ…å« JSONã€XML ç­‰æ ¼å¼çš„æ•°æ®ä¸»ä½“çš„ POST æˆ– PUT è¯·æ±‚æ—¶ï¼ŒSpring MVC æ¡†æ¶å°†è¯·æ±‚ä¸»ä½“ä¸­çš„æ•°æ®ååºåˆ—åŒ–ä¸ºæŒ‡å®šçš„ Java å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸ä½¿ç”¨ Jacksonã€JAXB ç­‰åº“æ¥å®Œæˆï¼Œå°†è¯·æ±‚ä¸»ä½“ä¸­çš„æ•°æ®è½¬æ¢ä¸ºç›¸åº”çš„ Java å¯¹è±¡ã€‚<br> ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ï¼š ååºåˆ—åŒ–åçš„ Java å¯¹è±¡å°†ä½œä¸º @RequestBody æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•å‚æ•°çš„å€¼ä¼ é€’ç»™æ§åˆ¶å™¨æ–¹æ³•ã€‚é€šè¿‡ä½¿ç”¨ @RequestBody æ³¨è§£ï¼Œä½ å¯ä»¥ç›´æ¥å°†è¯·æ±‚ä¸»ä½“ä¸­çš„æ•°æ®æ˜ å°„åˆ°æ–¹æ³•å‚æ•°ï¼Œè€Œä¸å¿…æ‰‹åŠ¨è§£æè¯·æ±‚ä¸»ä½“æˆ–å¤„ç†è¾“å…¥æµã€‚<br> å¤„ç†å¤šç§æ•°æ®æ ¼å¼ï¼š @RequestBody æ³¨è§£ä¸ä»…å¯ä»¥å¤„ç† JSON æ ¼å¼çš„æ•°æ®ï¼Œè¿˜å¯ä»¥å¤„ç† XMLã€è¡¨å•æ•°æ®ç­‰å¤šç§æ ¼å¼çš„æ•°æ®ã€‚Spring MVC æ¡†æ¶ä¼šæ ¹æ®è¯·æ±‚çš„ Content-Type å¤´éƒ¨æ¥ç¡®å®šè¯·æ±‚ä¸»ä½“çš„æ•°æ®æ ¼å¼ï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„æ¶ˆæ¯è½¬æ¢å™¨ï¼ˆMessageConverterï¼‰æ¥è¿›è¡Œååºåˆ—åŒ–ã€‚<br> ç»¼ä¸Šæ‰€è¿°ï¼Œ@RequestBody æ³¨è§£åœ¨ Spring MVC ä¸­çš„ä½œç”¨æ˜¯å°†è¯·æ±‚ä¸»ä½“ä¸­çš„æ•°æ®ååºåˆ—åŒ–ä¸ºæŒ‡å®šçš„ Java å¯¹è±¡ï¼Œå¹¶ç»‘å®šåˆ°æ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°ä¸Šï¼Œä½¿å¾—æ§åˆ¶å™¨æ–¹æ³•èƒ½å¤Ÿç›´æ¥å¤„ç†è¯·æ±‚ä¸»ä½“ä¸­çš„æ•°æ®ã€‚</p> 
<p><strong>ã€è¡¥å……ï¼šå…³äº HandlerMapping å’Œ HandlerAdapter çš„åˆå§‹åŒ–ã€‘</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initStrategies</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>çœç•¥<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//åˆå§‹åŒ–HandlerMappings</span>
	<span class="token function">initHandlerMappings</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//åˆå§‹åŒ–HandlerAdapters</span>
	<span class="token function">initHandlerAdapters</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>çœç•¥<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>HandlerMappingå’ŒHandlerAdapteræ˜¯å¯ä»¥å¤šä¸ªçš„ï¼ŒSpringé»˜è®¤ä¼šæ³¨å†Œå‡ ä¸ªHandlerMappingï¼ˆå¦‚BeanNameUrlHandlerMappingã€SimpleUrlHandlerMappingï¼‰ï¼Œæœ‰è¯·æ±‚æ¥çš„æ—¶å€™ï¼Œå»åŒ¹é…åˆ°åˆé€‚çš„é‚£ä¸ªã€‚<br> åœ¨Spring MVCæ—¶ä»£ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ˜¾å¼å»æ³¨å†Œä¸€ä¸ªHandlerMappingå’ŒHandlerAdapterï¼Œåˆ†åˆ«æ˜¯RequestMappingHandlerMappingå’ŒRequestMappingHandlerAdapterã€‚<br> å½“ç„¶è¦ä½¿ç”¨MappingJackson2HttpMessageConverterè½¬æ¢å™¨è¿˜éœ€è¦jackson-databindã€jackson-coreã€jackson-mapper-lgplã€jackson-mapper-aslã€jackson-core-lgplã€jackson-core-aslè¿™äº›JaråŒ…ã€‚<br> HandlerAdapter å’Œ HandlerMapping ä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘ï¼Œä¸€æ ·æ˜¯æ”¯æŒå¤šä¸ªï¼Œé»˜è®¤æ³¨å†ŒHttpRequestHandlerAdapterã€SimpleControllerHandlerAdapterã€‚</p> 
<hr> 
<h4><a id="doDispatch_364"></a>doDispatchï¼ˆéƒ¨åˆ†ä»£ç ï¼‰</h4> 
<pre><code class="prism language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
	<span class="token class-name">HttpServletRequest</span> processedRequest <span class="token operator">=</span> request<span class="token punctuation">;</span>
	<span class="token class-name">HandlerExecutionChain</span> mappedHandler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> multipartRequestParsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token class-name">Exception</span> dispatchException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// æ£€æŸ¥æ˜¯å¦æ˜¯æ–‡ä»¶ä¸Šä¼ çš„è¯·æ±‚</span>
			processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
			multipartRequestParsed <span class="token operator">=</span> <span class="token punctuation">(</span>processedRequest <span class="token operator">!=</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// æ‰¾å‡ºå¤„ç†è¿™ä¸ªè¯·æ±‚çš„æ‰§è¡Œé“¾å¯¹è±¡ HandlerExecutionChainï¼ŒåŒ…å«æ–¹æ³•å’Œæ‹¦æˆªå™¨</span>
			mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">noHandlerFound</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

            <span class="token comment">// æ ¹æ® HandlerMethod è·å–å¤„ç†å™¨ HandlerAdapter</span>
			<span class="token class-name">HandlerAdapter</span> ha <span class="token operator">=</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Process last-modified header, if supported by the handler.</span>
			<span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">boolean</span> isGet <span class="token operator">=</span> <span class="token string">"GET"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>isGet <span class="token operator">||</span> <span class="token string">"HEAD"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">//RequestMappingHandlerAdapter#getLastModifiedè¿”å›-1</span>
				<span class="token keyword">long</span> lastModified <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">getLastModified</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Last-Modified value for ["</span> <span class="token operator">+</span> <span class="token function">getRequestUri</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"] is: "</span> <span class="token operator">+</span> lastModified<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// æ£€æµ‹æ˜¯å¦æœªæ”¹å˜ å¹¶ä¸” æ˜¯getè¯·æ±‚</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletWebRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkNotModified</span><span class="token punctuation">(</span>lastModified<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> isGet<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">// æ‰§è¡Œæ‹¦æˆªå™¨çš„å‰ç½®å¤„ç†æ–¹æ³• applyPreHandle</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
				<span class="token comment">//ä¸ä¸ºtrueåˆ™return</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// æ‰§è¡Œå®é™…çš„å¤„ç†å™¨å¤„ç†è¯·æ±‚ï¼Œè¿™æ­¥éª¤æ˜¯æœ€æ ¸å¿ƒçš„</span>
			mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">// è§†å›¾å¯¹è±¡çš„å¤„ç†ï¼Œmvä¸ä¸ºnullå¹¶ä¸”viewä¸å­˜åœ¨åˆ™åº”ç”¨é»˜è®¤çš„viewName</span>
			<span class="token function">applyDefaultViewName</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
			<span class="token comment">// æ‰§è¡Œæ‹¦æˆªå™¨çš„åç½®å¤„ç†æ–¹æ³• postHandle</span>
			mappedHandler<span class="token punctuation">.</span><span class="token function">applyPostHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			dispatchException <span class="token operator">=</span> ex<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
        
		<span class="token comment">//è¯·æ±‚æˆåŠŸå“åº”ä¹‹åçš„æ–¹æ³•ï¼Œå³è¦è§£æä¸ºModelAndViewæˆ–å¼‚å¸¸ã€‚</span>
		<span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// ä¸»è¦æ˜¯å‘ç”Ÿå¼‚å¸¸æ—¶æ‰§è¡Œæ‹¦æˆªå™¨afterCompletionæ–¹æ³•</span>
		<span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Error</span> err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">triggerAfterCompletionWithError</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// æ‰§è¡Œæ‹¦æˆªå™¨ afterCompletion</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				mappedHandler<span class="token punctuation">.</span><span class="token function">applyAfterConcurrentHandlingStarted</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// Clean up any resources used by a multipart request.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>multipartRequestParsed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">cleanupMultipart</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="_459"></a>æ€»ç»“é™ˆè¯</h3> 
<p>æ­¤ç¯‡æ–‡ç« ä»‹ç»äº†<code>SpringMVC</code> è¯·æ±‚æµç¨‹çš„æºç åˆ†æï¼Œä»…ä¾›å‚è€ƒã€‚<br> æ— è®ºæ˜¯ handlerAdapters è¿˜æ˜¯ argumentResolversï¼Œæˆ–è€…å…¶ä»–ï¼ŒåŸºæœ¬å‡ ä¸ªç”¨æ³•éƒ½ç±»ä¼¼ã€‚</p> 
<ol><li>é¢„å…ˆåŠ è½½List</li><li>éå†Liståˆ¤æ–­æ˜¯å¦æ»¡è¶³</li><li>é€‚é…å™¨æ€æƒ³</li><li>ç¼“å­˜å¤ç”¨æ€æƒ³</li><li>ã€‚ã€‚ã€‚</li></ol> 
<p>ç¯‡å¹…æ‰€é™ï¼Œä¸»è¦ä»‹ç»äº†ä¸€ä¸ªå…·ä½“è¯·æ±‚çš„æµç¨‹ï¼Œåç»­ç³»åˆ—æ–‡ç« ä¼šé’ˆå¯¹å…¶ä¸­é‡è¦æ­¥éª¤ç»§ç»­å±•å¼€ä»‹ç»ï¼ŒåŒæ—¶æ·»åŠ å®æˆ˜è¯´æ˜ã€‚<br> ğŸ’— åç»­ä¼šé€æ­¥åˆ†äº«ä¼ä¸šå®é™…å¼€å‘ä¸­çš„å®æˆ˜ç»éªŒï¼Œæœ‰éœ€è¦äº¤æµçš„å¯ä»¥è”ç³»åšä¸»ã€‚</p> 
<p><img src="https://images2.imgbox.com/0a/03/FCajqpgx_o.gif" alt="CSDN_END.gif"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a8efd4c1d12b896772cdd9b7323d654/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">stringç±»ç®€å•æ¨¡æ‹Ÿå®ç°</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21eadf99ff106b104b8bdd9fdd969033/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">postmanæ¥å£æµ‹è¯•å·¥å…·ä»‹ç»ä¸ä½¿ç”¨</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>