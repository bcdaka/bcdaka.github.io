<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【前端5*】表格-表单1（弹窗在父组件）父子组件调用 vue element-ui - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4c9f8beaf8b0da0e2f57cfa258336d6c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【前端5*】表格-表单1（弹窗在父组件）父子组件调用 vue element-ui">
  <meta property="og:description" content="vue element-ui 中表单弹框的使用 写在最前面零、准备工作1.搭建 vue 环境2.安装 element-ui 组件3.在 main.js 引入 element-ui 组件4.把 App.vue 中的页面跳转注释掉 一、完成父组件-表单的前端、以及跳转逻辑0.事件处理与数据绑定1.前端 ui-固定列表格2.再写 import3.写 script 的方法：新增、编辑、查看、关闭4.提交确认方法：handleSummit5.写 template 的弹窗，包含表单的确认和取消按钮 二、完成子组件的表单1.前端 ui-表单验证2.声明 name，方便父组件调用3.必填校验 ruleForm4.写子组件给父组件传值5.验证是否传值成功6.页面渲染 三、页面显示模式（编辑和查看）逻辑1.接收父组件的值2.测试 type3.refs 方法需要监听4.子组件表单 编辑禁用5.回显数值6.更新数据 四、小结 🌈你好呀！我是 是Yu欸 🌌 2024每日百字篆刻时光，感谢你的陪伴与支持 ~ 🚀 欢迎一起踏上探险之旅，挖掘无限可能，共同成长！ 写在最前面 感谢神仙实习单位，老师手把手教O(∩_∩)O~感谢侃哥的讲解，感谢雅欣的讲解录制。
后面对着视频又看了一遍，然后重新写了一遍，梳理流程加快后面代码速度。
注意命名，写具体的如 addView，尽量不写 add
子组件命名需要为double word，每个word用首字母大写
梳理后代码，主要为：
（子组件）E:\ui\参考代码\demo-new\src\components\detail.vue
（父组件）E:\ui\参考代码\demo-new\src\views\Home.vue
在现代Web开发中，表格和表单是用户交互中最常见的元素。无论是数据展示、编辑，还是信息提交，都离不开表格与表单的有效结合。Vue.js作为一个渐进式的JavaScript框架，配合Element-UI这样强大的组件库，可以大大简化开发流程，提高开发效率。
在本系列的第一篇文章中，我们将梳理如何在Vue.js中使用Element-UI实现表格与表单的结合：如何在父组件中通过按钮触发弹窗，并在弹窗中调用子组件的表单。
这种设计模式在实际项目中非常常见，特别是在需要对数据进行增删改查操作时，能够有效地提升用户体验和代码可维护性。
本文将分为以下几个部分：
1、环境配置与基础介绍
2、父子组件的结构与数据传递
3、使用Element-UI实现弹窗与表单
4、完整示例代码与详细解析（后面一篇博客）
准备好了吗？让我们开始吧！
零、准备工作 1.搭建 vue 环境 参考：【前端环境 3】已有代码配置 vue 环境 &#43; 使用 vue ui 图形化界面创建 vue 项目 &#43; vue 项目目录结构">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-16T09:57:27+08:00">
    <meta property="article:modified_time" content="2024-07-16T09:57:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【前端5*】表格-表单1（弹窗在父组件）父子组件调用 vue element-ui</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>vue element-ui 中表单弹框的使用</h4> 
 <ul><li><a href="#_11" rel="nofollow">写在最前面</a></li><li><a href="#_40" rel="nofollow">零、准备工作</a></li><li><ul><li><a href="#1_vue__42" rel="nofollow">1.搭建 vue 环境</a></li><li><a href="#2_elementui__51" rel="nofollow">2.安装 element-ui 组件</a></li><li><a href="#3_mainjs__elementui__60" rel="nofollow">3.在 main.js 引入 element-ui 组件</a></li><li><a href="#4_Appvue__68" rel="nofollow">4.把 App.vue 中的页面跳转注释掉</a></li></ul> 
  </li><li><a href="#_73" rel="nofollow">一、完成父组件-表单的前端、以及跳转逻辑</a></li><li><ul><li><a href="#0_78" rel="nofollow">0.事件处理与数据绑定</a></li><li><a href="#1_ui_83" rel="nofollow">1.前端 ui-固定列表格</a></li><li><a href="#2_import_162" rel="nofollow">2.再写 import</a></li><li><a href="#3_script__182" rel="nofollow">3.写 script 的方法：新增、编辑、查看、关闭</a></li><li><a href="#4handleSummit_226" rel="nofollow">4.提交确认方法：handleSummit</a></li><li><a href="#5_template__248" rel="nofollow">5.写 template 的弹窗，包含表单的确认和取消按钮</a></li></ul> 
  </li><li><a href="#_278" rel="nofollow">二、完成子组件的表单</a></li><li><ul><li><a href="#1_ui_280" rel="nofollow">1.前端 ui-表单验证</a></li><li><a href="#2_name_408" rel="nofollow">2.声明 name，方便父组件调用</a></li><li><a href="#3_ruleForm_416" rel="nofollow">3.必填校验 ruleForm</a></li><li><a href="#4_452" rel="nofollow">4.写子组件给父组件传值</a></li><li><a href="#5_504" rel="nofollow">5.验证是否传值成功</a></li><li><a href="#6_513" rel="nofollow">6.页面渲染</a></li></ul> 
  </li><li><a href="#_551" rel="nofollow">三、页面显示模式（编辑和查看）逻辑</a></li><li><ul><li><a href="#1_558" rel="nofollow">1.接收父组件的值</a></li><li><a href="#2_type_575" rel="nofollow">2.测试 type</a></li><li><a href="#3refs__579" rel="nofollow">3.refs 方法需要监听</a></li><li><a href="#4__597" rel="nofollow">4.子组件表单 编辑禁用</a></li><li><a href="#5_637" rel="nofollow">5.回显数值</a></li><li><a href="#6_674" rel="nofollow">6.更新数据</a></li></ul> 
  </li><li><a href="#_685" rel="nofollow">四、小结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<p><img src="https://images2.imgbox.com/33/10/wuAZ1GVk_o.png" alt="请添加图片描述" width="100" height="100"></p> 
<center> 
 <font color="#FF77A9" face="STKaiti" size="4">🌈你好呀！我是 <a href="https://blog.csdn.net/WTYuong?spm=1010.2135.3001.5343">是Yu欸 </a></font> 
</center> 
<center> 
 <font color="#007FFF" face="KaiTi">🌌 2024每日百字篆刻时光，感谢你的陪伴与支持 ~</font> 
</center> 
<center> 
 <font color="#007FFF" face="KaiTi">🚀 欢迎一起踏上探险之旅，挖掘无限可能，共同成长！</font> 
</center> 
<hr> 
<h2><a id="_11"></a>写在最前面</h2> 
<p>感谢神仙实习单位，老师手把手教O(∩_∩)O~感谢侃哥的讲解，感谢雅欣的讲解录制。</p> 
<p>后面对着视频又看了一遍，然后重新写了一遍，梳理流程加快后面代码速度。</p> 
<p>注意命名，写具体的如 addView，尽量不写 add</p> 
<p>子组件命名需要为double word，每个word用首字母大写</p> 
<p>梳理后代码，主要为：<br> （子组件）E:\ui\参考代码\demo-new\src\components\detail.vue<br> （父组件）E:\ui\参考代码\demo-new\src\views\Home.vue</p> 
<p><img src="https://images2.imgbox.com/f5/0a/0r88X6s7_o.png" alt="在这里插入图片描述"></p> 
<p>在现代Web开发中，表格和表单是用户交互中最常见的元素。无论是数据展示、编辑，还是信息提交，都离不开表格与表单的有效结合。Vue.js作为一个渐进式的JavaScript框架，配合Element-UI这样强大的组件库，可以大大简化开发流程，提高开发效率。</p> 
<p>在本系列的第一篇文章中，我们将梳理如何在Vue.js中使用Element-UI实现表格与表单的结合：如何在父组件中通过按钮触发弹窗，并在弹窗中调用子组件的表单。<br> 这种设计模式在实际项目中非常常见，特别是在需要对数据进行增删改查操作时，能够有效地提升用户体验和代码可维护性。</p> 
<p>本文将分为以下几个部分：</p> 
<p>1、环境配置与基础介绍<br> 2、父子组件的结构与数据传递<br> 3、使用Element-UI实现弹窗与表单<br> 4、完整示例代码与详细解析（后面一篇博客）</p> 
<p>准备好了吗？让我们开始吧！</p> 
<h2><a id="_40"></a>零、准备工作</h2> 
<h3><a id="1_vue__42"></a>1.搭建 vue 环境</h3> 
<p>参考：【前端环境 3】已有代码配置 vue 环境 + 使用 vue ui 图形化界面创建 vue 项目 + vue 项目目录结构</p> 
<p><a href="https://blog.csdn.net/WTYuong/article/details/139917509">https://blog.csdn.net/WTYuong/article/details/139917509</a></p> 
<p><img src="https://images2.imgbox.com/e2/02/NCrnviCt_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_elementui__51"></a>2.安装 element-ui 组件</h3> 
<pre><code class="prism language-javascript">npm i element<span class="token operator">-</span>ui <span class="token operator">-</span><span class="token constant">S</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/47/c8/nzzauyot_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_mainjs__elementui__60"></a>3.在 main.js 引入 element-ui 组件</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">"element-ui"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">"element-ui/lib/theme-chalk/index.css"</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="4_Appvue__68"></a>4.把 App.vue 中的页面跳转注释掉</h3> 
<p><img src="https://images2.imgbox.com/79/00/kQBhyQz8_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_73"></a>一、完成父组件-表单的前端、以及跳转逻辑</h2> 
<p>父子组件的结构与数据传递</p> 
<p>在这个示例中，我们将创建两个组件：一个父组件和一个子组件。父组件将包含一个表格和一个触发弹窗的按钮，子组件则是弹窗中的表单。</p> 
<h3><a id="0_78"></a>0.事件处理与数据绑定</h3> 
<p>在父组件中，我们使用v-bind和v-on进行数据和事件的绑定：</p> 
<p>v-bind用于将数据从父组件传递到子组件。<br> v-on用于监听子组件触发的事件并在父组件中处理。</p> 
<h3><a id="1_ui_83"></a>1.前端 ui-固定列表格</h3> 
<p><a href="https://element.eleme.cn/#/zh-CN/component/table" rel="nofollow">https://element.eleme.cn/#/zh-CN/component/table</a></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>This is a form page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>table <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"tableData"</span> border style<span class="token operator">=</span><span class="token string">"width: 100%"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column fixed prop<span class="token operator">=</span><span class="token string">"date"</span> label<span class="token operator">=</span><span class="token string">"日期"</span> width<span class="token operator">=</span><span class="token string">"150"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"name"</span> label<span class="token operator">=</span><span class="token string">"姓名"</span> width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"province"</span> label<span class="token operator">=</span><span class="token string">"省份"</span> width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"city"</span> label<span class="token operator">=</span><span class="token string">"市区"</span> width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"address"</span> label<span class="token operator">=</span><span class="token string">"地址"</span> width<span class="token operator">=</span><span class="token string">"300"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column prop<span class="token operator">=</span><span class="token string">"zip"</span> label<span class="token operator">=</span><span class="token string">"邮编"</span> width<span class="token operator">=</span><span class="token string">"120"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column fixed<span class="token operator">=</span><span class="token string">"right"</span> label<span class="token operator">=</span><span class="token string">"操作"</span> width<span class="token operator">=</span><span class="token string">"100"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"handleClick(scope.row)"</span> type<span class="token operator">=</span><span class="token string">"text"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">&gt;</span>查看<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> size<span class="token operator">=</span><span class="token string">"small"</span><span class="token operator">&gt;</span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">tableData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">zip</span><span class="token operator">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1517 弄'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">zip</span><span class="token operator">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1519 弄'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">zip</span><span class="token operator">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-03'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">'上海'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">'普陀区'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1516 弄'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">zip</span><span class="token operator">:</span> <span class="token number">200333</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/09/5d/gCWk1ecL_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_import_162"></a>2.再写 import</h3> 
<p>注意 import 子组件</p> 
<p>如果是公共组件，则组件写在路径下 src\components\HelloWorld.vue</p> 
<p>如果是页面跳转组件，则在路径下 src\views\components\details.vue</p> 
<p><img src="https://images2.imgbox.com/5d/2b/r75yf8Jg_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> details <span class="token keyword">from</span> <span class="token string">'./details.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    details
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="3_script__182"></a>3.写 script 的方法：新增、编辑、查看、关闭</h3> 
<p>注意父组件给子组件传值</p> 
<p>写 methods</p> 
<p>注：detailType参数，详见<code>三、页面显示模式</code></p> 
<pre><code class="prism language-javascript"><span class="token comment">/**弹窗在父组件 */</span>
    <span class="token function">handleAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>detailType <span class="token operator">=</span> <span class="token string">"add"</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>componentKey <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleEdit</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>detailType <span class="token operator">=</span> <span class="token string">"edit"</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentRow <span class="token operator">=</span> row<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>componentKey <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleView</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentRow <span class="token operator">=</span> row<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>detailType <span class="token operator">=</span> <span class="token string">"view"</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>componentKey <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dialogVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token comment">// this.$refs.childRef.ruleForm = {};</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>注意data中的新名词定义，其中componentKey: Math.random()为给key取随机数</p> 
<pre><code class="prism language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">detailType</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token literal-property property">currentRow</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dialogVisible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">componentKey</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="4handleSummit_226"></a>4.提交确认方法：handleSummit</h3> 
<p>然后接收校验方法数据</p> 
<p><img src="https://images2.imgbox.com/91/85/5oAX60b0_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript"><span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>childRef<span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">"ruleForm"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>childRef<span class="token punctuation">.</span>ruleForm<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="5_template__248"></a>5.写 template 的弹窗，包含表单的确认和取消按钮</h3> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog
      title<span class="token operator">=</span><span class="token string">"子组件"</span>
      <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"dialogVisible"</span>
      width<span class="token operator">=</span><span class="token string">"30%"</span>
      @close<span class="token operator">=</span><span class="token string">"handleClose"</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span><span class="token keyword">if</span> 重新渲染子组件<span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>HelloWorld
        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"dialogVisible"</span>
        ref<span class="token operator">=</span><span class="token string">"childRef"</span>
        <span class="token operator">:</span>detail<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">"detailType"</span>
        <span class="token operator">:</span>currentRow<span class="token operator">=</span><span class="token string">"currentRow"</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>HelloWorld<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> key重新渲染子组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>HelloWorld
        ref<span class="token operator">=</span><span class="token string">"childRef"</span>
        <span class="token operator">:</span>detail<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">"detailType"</span>
        <span class="token operator">:</span>currentRow<span class="token operator">=</span><span class="token string">"currentRow"</span>
        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"componentKey"</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>HelloWorld<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"handleClose"</span><span class="token operator">&gt;</span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"handleSubmit"</span><span class="token operator">&gt;</span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="_278"></a>二、完成子组件的表单</h2> 
<h3><a id="1_ui_280"></a>1.前端 ui-表单验证</h3> 
<p><a href="https://element.eleme.cn/#/zh-CN/component/form" rel="nofollow">https://element.eleme.cn/#/zh-CN/component/form</a></p> 
<p>Form 组件提供了表单验证的功能，只需要通过 <code>rules</code> 属性传入约定的验证规则，并将 Form-Item 的 <code>prop</code> 属性设置为需校验的字段名即可。</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>This is a form page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"ruleForm"</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span> ref<span class="token operator">=</span><span class="token string">"ruleForm"</span> label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"demo-ruleForm"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"活动名称"</span> prop<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.name"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"活动区域"</span> prop<span class="token operator">=</span><span class="token string">"region"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.region"</span> placeholder<span class="token operator">=</span><span class="token string">"请选择活动区域"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>option label<span class="token operator">=</span><span class="token string">"区域一"</span> value<span class="token operator">=</span><span class="token string">"shanghai"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>option label<span class="token operator">=</span><span class="token string">"区域二"</span> value<span class="token operator">=</span><span class="token string">"beijing"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>select<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"活动时间"</span> required<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">"11"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"date1"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>date<span class="token operator">-</span>picker type<span class="token operator">=</span><span class="token string">"date"</span> placeholder<span class="token operator">=</span><span class="token string">"选择日期"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.date1"</span>
              style<span class="token operator">=</span><span class="token string">"width: 100%;"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>date<span class="token operator">-</span>picker<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"line"</span> <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">"11"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item prop<span class="token operator">=</span><span class="token string">"date2"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>time<span class="token operator">-</span>picker placeholder<span class="token operator">=</span><span class="token string">"选择时间"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.date2"</span> style<span class="token operator">=</span><span class="token string">"width: 100%;"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>time<span class="token operator">-</span>picker<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"即时配送"</span> prop<span class="token operator">=</span><span class="token string">"delivery"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span><span class="token keyword">switch</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.delivery"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span><span class="token keyword">switch</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"活动性质"</span> prop<span class="token operator">=</span><span class="token string">"type"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.type"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox label<span class="token operator">=</span><span class="token string">"美食/餐厅线上活动"</span> name<span class="token operator">=</span><span class="token string">"type"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox label<span class="token operator">=</span><span class="token string">"地推活动"</span> name<span class="token operator">=</span><span class="token string">"type"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox label<span class="token operator">=</span><span class="token string">"线下主题活动"</span> name<span class="token operator">=</span><span class="token string">"type"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>checkbox label<span class="token operator">=</span><span class="token string">"单纯品牌曝光"</span> name<span class="token operator">=</span><span class="token string">"type"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>checkbox<span class="token operator">-</span>group<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"特殊资源"</span> prop<span class="token operator">=</span><span class="token string">"resource"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.resource"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio label<span class="token operator">=</span><span class="token string">"线上品牌商赞助"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>radio label<span class="token operator">=</span><span class="token string">"线下场地免费"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>radio<span class="token operator">-</span>group<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"活动形式"</span> prop<span class="token operator">=</span><span class="token string">"desc"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"textarea"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.desc"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"submitForm('ruleForm')"</span><span class="token operator">&gt;</span>立即创建<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"resetForm('ruleForm')"</span><span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">ruleForm</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">date1</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">date2</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">delivery</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">resource</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入活动名称'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'长度在 3 到 5 个字符'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请选择活动区域'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">date1</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请选择日期'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">date2</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请选择时间'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请至少选择一个活动性质'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">resource</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请选择活动资源'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请填写活动形式'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'submit!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'error submit!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">resetForm</span><span class="token punctuation">(</span><span class="token parameter">formName</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span>formName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/e1/pmHRhhRD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_name_408"></a>2.声明 name，方便父组件调用</h3> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'DetailsForm'</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="3_ruleForm_416"></a>3.必填校验 ruleForm</h3> 
<p>取消确定方法在父组件，如何校验数据？<br> 调用子组件包含ref的ruleForm即可</p> 
<p>打印，由于是一个对象，所以都行<br> ①console.log(this.<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         e 
        
       
         f 
        
       
         s 
        
       
         [ 
        
       
         " 
        
       
         c 
        
       
         h 
        
       
         i 
        
       
         l 
        
       
         d 
        
       
         R 
        
       
         e 
        
       
         f 
        
       
         " 
        
       
         ] 
        
       
         ) 
        
       
         ; 
        
       
         ② 
        
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         o 
        
       
         l 
        
       
         e 
        
       
         . 
        
       
         l 
        
       
         o 
        
       
         g 
        
       
         ( 
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
         . 
        
       
      
        refs [ "childRef"]); ②console.log(this. 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord">"</span><span class="mord mathnormal">c</span><span class="mord mathnormal">hi</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord">"</span><span class="mclose">])</span><span class="mpunct">;</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">②</span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>refs.childRef);</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form
      ref<span class="token operator">=</span><span class="token string">"ruleForm"</span>
      label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span>
      <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"demo-ruleForm"</span>
      <span class="token literal-property property">inline</span>
      <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"ruleForm"</span>
      <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span>
      <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"detailType === 'view'"</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"日期"</span> prop<span class="token operator">=</span><span class="token string">"date"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.date"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"姓名"</span> prop<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.name"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"省份"</span> prop<span class="token operator">=</span><span class="token string">"province"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"ruleForm.province"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="4_452"></a>4.写子组件给父组件传值</h3> 
<p>() =&gt; {} 是一个使用箭头函数语法创建的空函数。在 JavaScript 和 Vue 中，这种语法用于定义一个没有参数且不执行任何操作的函数。<br> 这里定义了一个名为 currentRow 的 prop，其类型为 Object。如果没有为 currentRow 提供值，那么它的默认值将是一个空对象，这是通过调用 () =&gt; {}（一个返回空对象的箭头函数）来实现的。<br> 通过使用一个函数返回一个新的对象，每个组件实例将获得该对象的一个全新的、独立的副本。这样做既避免了共享状态的问题，也提供了一个安全的默认值。</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"HelloWorld"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">detailType</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">currentRow</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>有方法写方法，不要重复写 dis 显示</p> 
<p>传值：</p> 
<p>① 引用子组件的地方，写一样的名称。<br> type传的是字符串 :type传的是变量</p> 
<p>② 方法中写</p> 
<p>组件的自定义事件 ref</p> 
<ol><li>一种组件间通信的方式，适用于：子组件 ===&gt; 父组件</li><li>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（事件的回调在A中）。</li><li>绑定自定义事件：<br> a. 第一种方式，在父组件中：&lt;Demo @atguigu=“test”/&gt; 或 <br> b. 第二种方式，在父组件中：</li></ol> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>Demo ref<span class="token operator">=</span><span class="token string">"demo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">...</span><span class="token operator">...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>test<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>c. 若想让自定义事件只能触发一次，可以使用once修饰符，或<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         o 
        
       
         n 
        
       
         c 
        
       
         e 
        
       
         方法。 
        
       
         4. 
        
       
         触发自定义事件： 
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
         . 
        
       
      
        once方法。 4. 触发自定义事件：this. 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">ce</span><span class="mord cjk_fallback">方法。</span><span class="mord">4.</span><span class="mord cjk_fallback">触发自定义事件：</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>emit(‘atguigu’,数据)<br> 5. 解绑自定义事件this.<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         o 
        
       
         f 
        
       
         f 
        
        
        
          ( 
         
        
          ′ 
         
        
       
         a 
        
       
         t 
        
       
         g 
        
       
         u 
        
       
         i 
        
       
         g 
        
        
        
          u 
         
        
          ′ 
         
        
       
         ) 
        
       
         6. 
        
       
         组件上也可以绑定原生 
        
       
         D 
        
       
         O 
        
       
         M 
        
       
         事件，需要使用 
        
       
         n 
        
       
         a 
        
       
         t 
        
       
         i 
        
       
         v 
        
       
         e 
        
       
         修饰符。 
        
       
         7. 
        
       
         注意：通过 
        
       
         t 
        
       
         h 
        
       
         i 
        
       
         s 
        
       
         . 
        
       
      
        off('atguigu') 6. 组件上也可以绑定原生DOM事件，需要使用native修饰符。 7. 注意：通过this. 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0019em; vertical-align: -0.25em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mopen"><span class="mopen">(</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7519em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">gu</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7519em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">6.</span><span class="mord cjk_fallback">组件上也可以绑定原生</span><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="mord mathnormal" style="margin-right: 0.109em;">OM</span><span class="mord cjk_fallback">事件，需要使用</span><span class="mord mathnormal">na</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">修饰符。</span><span class="mord">7.</span><span class="mord cjk_fallback">注意：通过</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>refs.xxx.$on(‘atguigu’,回调)绑定自定义事件时，回调要么配置在methods中，要么用箭头函数，否则this指向会出问题！</p> 
<h3><a id="5_504"></a>5.验证是否传值成功</h3> 
<p>在控制台，确认是否给父组件传值成功</p> 
<p>注意数组和对象</p> 
<p><img src="https://images2.imgbox.com/f8/9d/UA8vT3pU_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6_513"></a>6.页面渲染</h3> 
<p>查看之后，点击新增（显示的是查看的数值）<br> ①created创建时，设置表单为空，但仍存在数值<br> 原因：加一个v-if，去刷新一下（弹窗已经加载，所以没有被设置为空）<br> ②实例给为空行</p> 
<p><img src="https://images2.imgbox.com/7b/51/SPjV0tWH_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript">    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog
      title<span class="token operator">=</span><span class="token string">"子组件"</span>
      <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"dialogVisible"</span>
      width<span class="token operator">=</span><span class="token string">"30%"</span>
      @close<span class="token operator">=</span><span class="token string">"handleClose"</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span><span class="token keyword">if</span> 重新渲染子组件<span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>HelloWorld
        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"dialogVisible"</span>
        ref<span class="token operator">=</span><span class="token string">"childRef"</span>
        <span class="token operator">:</span>detail<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">"detailType"</span>
        <span class="token operator">:</span>currentRow<span class="token operator">=</span><span class="token string">"currentRow"</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>HelloWorld<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> key重新渲染子组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>HelloWorld
        ref<span class="token operator">=</span><span class="token string">"childRef"</span>
        <span class="token operator">:</span>detail<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">"detailType"</span>
        <span class="token operator">:</span>currentRow<span class="token operator">=</span><span class="token string">"currentRow"</span>
        <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"componentKey"</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>HelloWorld<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"handleClose"</span><span class="token operator">&gt;</span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"handleSubmit"</span><span class="token operator">&gt;</span>确 定<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="_551"></a>三、页面显示模式（编辑和查看）逻辑</h2> 
<p>type写在方法的最前面，方便确认和更改值</p> 
<p>父组件赋值type方法<br> 子组件接收，type的值</p> 
<h3><a id="1_558"></a>1.接收父组件的值</h3> 
<p>props：{type}</p> 
<p>组件名应该是子组件传过去的</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"HelloWorld"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">detailType</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="2_type_575"></a>2.测试 type</h3> 
<p>可以在最前面写{<!-- -->{type}}</p> 
<h3><a id="3refs__579"></a>3.refs 方法需要监听</h3> 
<p>this.$refs[ “childRef” ].init( “add” ) ;<br> 注意子组件接受的是两个参数，所以这里应该是：</p> 
<pre><code class="prism language-javascript">  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/**弹窗在子组件 */</span>
    <span class="token function">handleAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">"childRef"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">"childRef"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">currentRow</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="4__597"></a>4.子组件表单 编辑禁用</h3> 
<p>在 input 上面写一个总的 el-form</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form
      ref<span class="token operator">=</span><span class="token string">"ruleForm"</span>
      label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span>
      <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"demo-ruleForm"</span>
      <span class="token literal-property property">inline</span>
      <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"ruleForm"</span>
      <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span>
      <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"detailType === 'view'"</span>
    <span class="token operator">&gt;</span>
</code></pre> 
<p>不能直接写 disable=“”，要先定义 type 的 data 和 methods</p> 
<p>init(type,row)</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"HelloWorld"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">detailType</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>detailType <span class="token operator">===</span> <span class="token string">"edit"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>detailType <span class="token operator">===</span> <span class="token string">"view"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ruleForm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentRow<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ruleForm <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="5_637"></a>5.回显数值</h3> 
<p>先打印 row 参数，看传值成功没</p> 
<p><img src="https://images2.imgbox.com/e2/be/YGBuVZqu_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"handleView(scope.row)"</span> type<span class="token operator">=</span><span class="token string">"text"</span> size<span class="token operator">=</span><span class="token string">"small"</span>
            <span class="token operator">&gt;</span>查看<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"text"</span> size<span class="token operator">=</span><span class="token string">"small"</span> @click<span class="token operator">=</span><span class="token string">"handleEdit(scope.row)"</span>
            <span class="token operator">&gt;</span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<p>传值：父组件先定义data，:data，<br> 子组件打印看能不能拿到，<br> created方法发音，然后在props里面</p> 
<p><img src="https://images2.imgbox.com/da/e1/hqepwwjf_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"HelloWorld"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">currentRow</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h3><a id="6_674"></a>6.更新数据</h3> 
<p>两种方法：</p> 
<p>① 拿到当前行的索引 index，传过去，再传回来，改数组的值</p> 
<p>② 用 init，但是需要对 vue 生命周期比较熟悉</p> 
<p>然后打印，看传值成功没</p> 
<p><img src="https://images2.imgbox.com/41/a1/KVPYWwyj_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_685"></a>四、小结</h2> 
<p>希望本文对你有所帮助。如果你有任何疑问或需要进一步的帮助，请在评论区留言。祝你开发顺利！</p> 
<hr> 
<blockquote> 
 <p>hello，我是 <a href="https://blog.csdn.net/WTYuong?spm=1010.2135.3001.5343">是Yu欸 </a>。如果你喜欢我的文章，欢迎三连给我鼓励和支持：👍点赞 📁 关注 💬评论，我会给大家带来更多有用有趣的文章。<br> 原文链接 👉 ，⚡️更新更及时。</p> 
</blockquote> 
<p>欢迎大家添加好友交流。</p> 
<center> 
 <img src="https://images2.imgbox.com/97/7b/TkdknnQb_o.png" width="50%"> 
</center>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0982c5eba79bae7e9cdfa810832f940f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">win10解决wps使用开发者工具vb编辑器提示vbe6ext.olb不能被加载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec22dcb4e69f49d38e01c23b1bd8cb61/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mac新手教程：程序坞里的启动台图标消失了如何解决？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>