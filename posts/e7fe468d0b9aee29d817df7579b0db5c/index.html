<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python魔法之旅-魔法方法(22) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e7fe468d0b9aee29d817df7579b0db5c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python魔法之旅-魔法方法(22)">
  <meta property="og:description" content="目录
一、概述
1、定义
2、作用
二、应用场景
1、构造和析构
2、操作符重载
3、字符串和表示
4、容器管理
5、可调用对象
6、上下文管理
7、属性访问和描述符
8、迭代器和生成器
9、数值类型
10、复制和序列化
11、自定义元类行为
12、自定义类行为
13、类型检查和转换
14、自定义异常
三、学习方法
1、理解基础
2、查阅文档
3、编写示例
4、实践应用
5、阅读他人代码
6、参加社区讨论
7、持续学习
8、练习与总结
9、注意兼容性
10、避免过度使用
四、魔法方法
68、__setattr__方法
68-1、语法
68-2、参数
68-3、功能
68-4、返回值
68-5、说明
68-6、用法
69、__setitem__方法
69-1、语法
69-2、参数
69-3、功能
69-4、返回值
69-5、说明
69-6、用法
70、__sizeof__方法
70-1、语法
70-2、参数
70-3、功能
70-4、返回值
70-5、说明
70-6、用法
五、推荐阅读
1、Python筑基之旅
2、Python函数之旅
3、Python算法之旅
4、博客个人主页
一、概述 1、定义 魔法方法(Magic Methods/Special Methods，也称特殊方法或双下划线方法)是Python中一类具有特殊命名规则的方法，它们的名称通常以双下划线(`__`)开头和结尾。
魔法方法用于在特定情况下自动被Python解释器调用，而不需要显式地调用它们，它们提供了一种机制，让你可以定义自定义类时具有与内置类型相似的行为。
2、作用 魔法方法允许开发者重载Python中的一些内置操作或函数的行为，从而为自定义的类添加特殊的功能。
二、应用场景 1、构造和析构 1-1、__init__(self, [args...])：在创建对象时初始化属性。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-08T11:40:59+08:00">
    <meta property="article:modified_time" content="2024-06-08T11:40:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python魔法之旅-魔法方法(22)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong><span style="color:#1a439c;">目录</span></strong></p> 
<p id="%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><strong><a href="#%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0" rel="nofollow"><span style="color:#1a439c;">一、概述</span></a></strong></p> 
<p id="1%E3%80%81%E5%AE%9A%E4%B9%89-toc" style="margin-left:80px;"><strong><a href="#1%E3%80%81%E5%AE%9A%E4%B9%89" rel="nofollow"><span style="color:#1a439c;">1、定义</span></a></strong></p> 
<p id="2%E3%80%81%E4%BD%9C%E7%94%A8-toc" style="margin-left:80px;"><strong><a href="#2%E3%80%81%E4%BD%9C%E7%94%A8" rel="nofollow"><span style="color:#1a439c;">2、作用</span></a></strong></p> 
<p id="%E4%BA%8C%E3%80%81%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:40px;"><strong><a href="#%E4%BA%8C%E3%80%81%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow"><span style="color:#1a439c;">二、应用场景</span></a></strong></p> 
<p id="1%E3%80%81%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84-toc" style="margin-left:80px;"><strong><a href="#1%E3%80%81%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84" rel="nofollow"><span style="color:#1a439c;">1、构造和析构</span></a></strong></p> 
<p id="2%E3%80%81%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD-toc" style="margin-left:80px;"><strong><a href="#2%E3%80%81%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD" rel="nofollow"><span style="color:#1a439c;">2、操作符重载</span></a></strong></p> 
<p id="3%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E8%A1%A8%E7%A4%BA-toc" style="margin-left:80px;"><strong><a href="#3%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E8%A1%A8%E7%A4%BA" rel="nofollow"><span style="color:#1a439c;">3、字符串和表示</span></a></strong></p> 
<p id="4%E3%80%81%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86-toc" style="margin-left:80px;"><strong><a href="#4%E3%80%81%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86" rel="nofollow"><span style="color:#1a439c;">4、容器管理</span></a></strong></p> 
<p id="5%E3%80%81%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1-toc" style="margin-left:80px;"><strong><a href="#5%E3%80%81%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1" rel="nofollow"><span style="color:#1a439c;">5、可调用对象</span></a></strong></p> 
<p id="6%E3%80%81%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86-toc" style="margin-left:80px;"><strong><a href="#6%E3%80%81%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86" rel="nofollow"><span style="color:#1a439c;">6、上下文管理</span></a></strong></p> 
<p id="7%E3%80%81%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE%E5%92%8C%E6%8F%8F%E8%BF%B0%E7%AC%A6-toc" style="margin-left:80px;"><strong><a href="#7%E3%80%81%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE%E5%92%8C%E6%8F%8F%E8%BF%B0%E7%AC%A6" rel="nofollow"><span style="color:#1a439c;">7、属性访问和描述符</span></a></strong></p> 
<p id="8%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8-toc" style="margin-left:80px;"><strong><a href="#8%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8" rel="nofollow"><span style="color:#1a439c;">8、迭代器和生成器</span></a></strong></p> 
<p id="9%E3%80%81%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px;"><strong><a href="#9%E3%80%81%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B" rel="nofollow"><span style="color:#1a439c;">9、数值类型</span></a></strong></p> 
<p id="10%E3%80%81%E5%A4%8D%E5%88%B6%E5%92%8C%E5%BA%8F%E5%88%97%E5%8C%96-toc" style="margin-left:80px;"><strong><a href="#10%E3%80%81%E5%A4%8D%E5%88%B6%E5%92%8C%E5%BA%8F%E5%88%97%E5%8C%96" rel="nofollow"><span style="color:#1a439c;">10、复制和序列化</span></a></strong></p> 
<p id="11%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B1%BB%E8%A1%8C%E4%B8%BA-toc" style="margin-left:80px;"><strong><a href="#11%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B1%BB%E8%A1%8C%E4%B8%BA" rel="nofollow"><span style="color:#1a439c;">11、自定义元类行为</span></a></strong></p> 
<p id="12%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E8%A1%8C%E4%B8%BA-toc" style="margin-left:80px;"><strong><a href="#12%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E8%A1%8C%E4%B8%BA" rel="nofollow"><span style="color:#1a439c;">12、自定义类行为</span></a></strong></p> 
<p id="13%E3%80%81%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%92%8C%E8%BD%AC%E6%8D%A2-toc" style="margin-left:80px;"><strong><a href="#13%E3%80%81%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%92%8C%E8%BD%AC%E6%8D%A2" rel="nofollow"><span style="color:#1a439c;">13、类型检查和转换</span></a></strong></p> 
<p id="14%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8-toc" style="margin-left:80px;"><strong><a href="#14%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8" rel="nofollow"><span style="color:#1a439c;">14、自定义异常</span></a></strong></p> 
<p id="%E4%B8%89%E3%80%81%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><strong><a href="#%E4%B8%89%E3%80%81%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">三、学习方法</span></a></strong></p> 
<p id="1%E3%80%81%E7%90%86%E8%A7%A3%E5%9F%BA%E7%A1%80-toc" style="margin-left:80px;"><strong><a href="#1%E3%80%81%E7%90%86%E8%A7%A3%E5%9F%BA%E7%A1%80" rel="nofollow"><span style="color:#1a439c;">1、理解基础</span></a></strong></p> 
<p id="2%E3%80%81%E6%9F%A5%E9%98%85%E6%96%87%E6%A1%A3-toc" style="margin-left:80px;"><strong><a href="#2%E3%80%81%E6%9F%A5%E9%98%85%E6%96%87%E6%A1%A3" rel="nofollow"><span style="color:#1a439c;">2、查阅文档</span></a></strong></p> 
<p id="3%E3%80%81%E7%BC%96%E5%86%99%E7%A4%BA%E4%BE%8B-toc" style="margin-left:80px;"><strong><a href="#3%E3%80%81%E7%BC%96%E5%86%99%E7%A4%BA%E4%BE%8B" rel="nofollow"><span style="color:#1a439c;">3、编写示例</span></a></strong></p> 
<p id="4%E3%80%81%E5%AE%9E%E8%B7%B5%E5%BA%94%E7%94%A8-toc" style="margin-left:80px;"><strong><a href="#4%E3%80%81%E5%AE%9E%E8%B7%B5%E5%BA%94%E7%94%A8" rel="nofollow"><span style="color:#1a439c;">4、实践应用</span></a></strong></p> 
<p id="5%E3%80%81%E9%98%85%E8%AF%BB%E4%BB%96%E4%BA%BA%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><strong><a href="#5%E3%80%81%E9%98%85%E8%AF%BB%E4%BB%96%E4%BA%BA%E4%BB%A3%E7%A0%81" rel="nofollow"><span style="color:#1a439c;">5、阅读他人代码</span></a></strong></p> 
<p id="6%E3%80%81%E5%8F%82%E5%8A%A0%E7%A4%BE%E5%8C%BA%E8%AE%A8%E8%AE%BA-toc" style="margin-left:80px;"><strong><a href="#6%E3%80%81%E5%8F%82%E5%8A%A0%E7%A4%BE%E5%8C%BA%E8%AE%A8%E8%AE%BA" rel="nofollow"><span style="color:#1a439c;">6、参加社区讨论</span></a></strong></p> 
<p id="7%E3%80%81%E6%8C%81%E7%BB%AD%E5%AD%A6%E4%B9%A0-toc" style="margin-left:80px;"><strong><a href="#7%E3%80%81%E6%8C%81%E7%BB%AD%E5%AD%A6%E4%B9%A0" rel="nofollow"><span style="color:#1a439c;">7、持续学习</span></a></strong></p> 
<p id="8%E3%80%81%E7%BB%83%E4%B9%A0%E4%B8%8E%E6%80%BB%E7%BB%93-toc" style="margin-left:80px;"><strong><a href="#8%E3%80%81%E7%BB%83%E4%B9%A0%E4%B8%8E%E6%80%BB%E7%BB%93" rel="nofollow"><span style="color:#1a439c;">8、练习与总结</span></a></strong></p> 
<p id="9%E3%80%81%E6%B3%A8%E6%84%8F%E5%85%BC%E5%AE%B9%E6%80%A7-toc" style="margin-left:80px;"><strong><a href="#9%E3%80%81%E6%B3%A8%E6%84%8F%E5%85%BC%E5%AE%B9%E6%80%A7" rel="nofollow"><span style="color:#1a439c;">9、注意兼容性</span></a></strong></p> 
<p id="10%E3%80%81%E9%81%BF%E5%85%8D%E8%BF%87%E5%BA%A6%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><strong><a href="#10%E3%80%81%E9%81%BF%E5%85%8D%E8%BF%87%E5%BA%A6%E4%BD%BF%E7%94%A8" rel="nofollow"><span style="color:#1a439c;">10、避免过度使用</span></a></strong></p> 
<p id="%E5%9B%9B%E3%80%81%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B-toc" style="margin-left:40px;"><strong><a href="#%E5%9B%9B%E3%80%81%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B" rel="nofollow"><span style="color:#1a439c;">四、魔法方法</span></a></strong></p> 
<p id="1%E3%80%81__abs__%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><strong><a href="#1%E3%80%81__abs__%E6%96%B9%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">68、__setattr__方法</span></a></strong></p> 
<p id="1-1%E3%80%81%E8%AF%AD%E6%B3%95-toc" style="margin-left:120px;"><strong><a href="#1-1%E3%80%81%E8%AF%AD%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">68-1、语法</span></a></strong></p> 
<p id="1-2%E3%80%81%E5%8F%82%E6%95%B0-toc" style="margin-left:120px;"><strong><a href="#1-2%E3%80%81%E5%8F%82%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">68-2、参数</span></a></strong></p> 
<p id="1-3%E3%80%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:120px;"><strong><a href="#1-3%E3%80%81%E5%8A%9F%E8%83%BD" rel="nofollow"><span style="color:#1a439c;">68-3、功能</span></a></strong></p> 
<p id="1-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC-toc" style="margin-left:120px;"><strong><a href="#1-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC" rel="nofollow"><span style="color:#1a439c;">68-4、返回值</span></a></strong></p> 
<p id="1-5%E3%80%81%E8%AF%B4%E6%98%8E-toc" style="margin-left:120px;"><strong><a href="#1-5%E3%80%81%E8%AF%B4%E6%98%8E" rel="nofollow"><span style="color:#1a439c;">68-5、说明</span></a></strong></p> 
<p id="1-6%E3%80%81%E7%94%A8%E6%B3%95-toc" style="margin-left:120px;"><strong><a href="#1-6%E3%80%81%E7%94%A8%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">68-6、用法</span></a></strong></p> 
<p id="2%E3%80%81__add__%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><strong><a href="#2%E3%80%81__add__%E6%96%B9%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">69、__setitem__方法</span></a></strong></p> 
<p id="17-1%E3%80%81%E8%AF%AD%E6%B3%95-toc" style="margin-left:120px;"><strong><a href="#17-1%E3%80%81%E8%AF%AD%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">69-1、语法</span></a></strong></p> 
<p id="36-2%E3%80%81%E5%8F%82%E6%95%B0-toc" style="margin-left:120px;"><strong><a href="#36-2%E3%80%81%E5%8F%82%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">69-2、参数</span></a></strong></p> 
<p id="36-3%E3%80%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:120px;"><strong><a href="#36-3%E3%80%81%E5%8A%9F%E8%83%BD" rel="nofollow"><span style="color:#1a439c;">69-3、功能</span></a></strong></p> 
<p id="36-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC-toc" style="margin-left:120px;"><strong><a href="#36-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC" rel="nofollow"><span style="color:#1a439c;">69-4、返回值</span></a></strong></p> 
<p id="36-5%E3%80%81%E8%AF%B4%E6%98%8E-toc" style="margin-left:120px;"><strong><a href="#36-5%E3%80%81%E8%AF%B4%E6%98%8E" rel="nofollow"><span style="color:#1a439c;">69-5、说明</span></a></strong></p> 
<p id="36-6%E3%80%81%E7%94%A8%E6%B3%95-toc" style="margin-left:120px;"><strong><a href="#36-6%E3%80%81%E7%94%A8%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">69-6、用法</span></a></strong></p> 
<p id="46%E3%80%81__lt__%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><strong><a href="#46%E3%80%81__lt__%E6%96%B9%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">70、__sizeof__方法</span></a></strong></p> 
<p id="46-1%E3%80%81%E8%AF%AD%E6%B3%95-toc" style="margin-left:120px;"><strong><a href="#46-1%E3%80%81%E8%AF%AD%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">70-1、语法</span></a></strong></p> 
<p id="37-2%E3%80%81%E5%8F%82%E6%95%B0-toc" style="margin-left:120px;"><strong><a href="#37-2%E3%80%81%E5%8F%82%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">70-2、参数</span></a></strong></p> 
<p id="37-3%E3%80%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:120px;"><strong><a href="#37-3%E3%80%81%E5%8A%9F%E8%83%BD" rel="nofollow"><span style="color:#1a439c;">70-3、功能</span></a></strong></p> 
<p id="37-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC-toc" style="margin-left:120px;"><strong><a href="#37-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC" rel="nofollow"><span style="color:#1a439c;">70-4、返回值</span></a></strong></p> 
<p id="37-5%E3%80%81%E8%AF%B4%E6%98%8E-toc" style="margin-left:120px;"><strong><a href="#37-5%E3%80%81%E8%AF%B4%E6%98%8E" rel="nofollow"><span style="color:#1a439c;">70-5、说明</span></a></strong></p> 
<p id="37-6%E3%80%81%E7%94%A8%E6%B3%95-toc" style="margin-left:120px;"><strong><a href="#37-6%E3%80%81%E7%94%A8%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">70-6、用法</span></a></strong></p> 
<p id="%E4%BA%94%E3%80%81%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB-toc" style="margin-left:40px;"><strong><a href="#%E4%BA%94%E3%80%81%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB" rel="nofollow"><span style="color:#1a439c;">五、推荐阅读</span></a></strong></p> 
<p id="1%E3%80%81Python%E7%AD%91%E5%9F%BA%E4%B9%8B%E6%97%85-toc" style="margin-left:80px;"><strong><a href="#1%E3%80%81Python%E7%AD%91%E5%9F%BA%E4%B9%8B%E6%97%85" rel="nofollow"><span style="color:#1a439c;">1、Python筑基之旅</span></a></strong></p> 
<p id="2%E3%80%81Python%E5%87%BD%E6%95%B0%E4%B9%8B%E6%97%85-toc" style="margin-left:80px;"><strong><a href="#2%E3%80%81Python%E5%87%BD%E6%95%B0%E4%B9%8B%E6%97%85" rel="nofollow"><span style="color:#1a439c;">2、Python函数之旅</span></a></strong></p> 
<p id="3%E3%80%81Python%E7%AE%97%E6%B3%95%E4%B9%8B%E6%97%85-toc" style="margin-left:80px;"><strong><a href="#3%E3%80%81Python%E7%AE%97%E6%B3%95%E4%B9%8B%E6%97%85" rel="nofollow"><span style="color:#1a439c;">3、Python算法之旅</span></a></strong></p> 
<p id="4%E3%80%81%E5%8D%9A%E5%AE%A2%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5-toc" style="margin-left:80px;"><strong><a href="#4%E3%80%81%E5%8D%9A%E5%AE%A2%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5" rel="nofollow"><span style="color:#1a439c;">4、博客个人主页</span></a></strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a0/24/bu09nlbW_o.gif"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4f/30/wz6NROJg_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/54/24/k4Axfd9a_o.gif"></p> 
<h3 id="%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0">一、概述</h3> 
<h4 id="1%E3%80%81%E5%AE%9A%E4%B9%89">1、定义</h4> 
<p>        <span style="color:#fe2c24;"><strong>魔法方法</strong></span><span style="color:#956fe7;"><strong>(Magic Methods/Special Methods，</strong></span><span style="color:#fe2c24;"><strong>也称特殊方法或双下划线方法</strong></span><span style="color:#956fe7;"><strong>)</strong></span>是Python中<span style="color:#fe2c24;"><strong>一类具有特殊命名规则的方法，它们的名称通常以双下划线(`__`)开头和结尾</strong>。</span></p> 
<p>        <span style="color:#fe2c24;"><strong>魔法方法</strong></span>用于在特定情况下<span style="color:#fe2c24;"><strong>自动被Python解释器调用，而不需要显式地调用它们，它们提供了一种机制，</strong></span>让你可以定义自定义类时具有与内置类型相似的行为。</p> 
<h4 id="2%E3%80%81%E4%BD%9C%E7%94%A8">2、作用</h4> 
<p>        <span style="color:#fe2c24;"><strong>魔法方法</strong></span>允许开发者<span style="color:#fe2c24;"><strong>重载Python中的一些内置操作或函数的行为，从而为自定义的类添加特殊的功能</strong>。</span></p> 
<h3 id="%E4%BA%8C%E3%80%81%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">二、应用场景</h3> 
<h4 id="1%E3%80%81%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84">1、构造和析构</h4> 
<p>1-1、__init__(self, [args...])：在创建对象时初始化属性。<br> 1-2、__new__(cls, [args...])：在创建对象时控制实例的创建过程(通常与元类一起使用)。<br> 1-3、__del__(self)：在对象被销毁前执行清理操作，如关闭文件或释放资源。</p> 
<h4 id="2%E3%80%81%E6%93%8D%E4%BD%9C%E7%AC%A6%E9%87%8D%E8%BD%BD">2、操作符重载</h4> 
<p>2-1、__add__(self, other)、__sub__(self, other)、__mul__(self, other)等：自定义对象之间的算术运算。<br> 2-2、__eq__(self, other)、__ne__(self, other)、__lt__(self, other)等：定义对象之间的比较操作。</p> 
<h4 id="3%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E8%A1%A8%E7%A4%BA">3、字符串和表示</h4> 
<p>3-1、__str__(self)：定义对象的字符串表示，常用于print()函数。<br> 3-2、__repr__(self)：定义对象的官方字符串表示，用于repr()函数和交互式解释器。</p> 
<h4 id="4%E3%80%81%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86">4、容器管理</h4> 
<p>4-1、__getitem__(self, key)、__setitem__(self, key, value)、__delitem__(self, key)：用于实现类似列表或字典的索引访问、设置和删除操作。<br> 4-2、__len__(self)：返回对象的长度或元素个数。</p> 
<h4 id="5%E3%80%81%E5%8F%AF%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1">5、可调用对象</h4> 
<p>5-1、__call__(self, [args...])：允许对象像函数一样被调用。</p> 
<h4 id="6%E3%80%81%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86">6、上下文管理</h4> 
<p>6-1、__enter__(self)、__exit__(self, exc_type, exc_val, exc_tb)：用于实现上下文管理器，如with语句中的对象。</p> 
<h4 id="7%E3%80%81%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE%E5%92%8C%E6%8F%8F%E8%BF%B0%E7%AC%A6">7、属性访问和描述符</h4> 
<p>7-1、__getattr__, __setattr__, __delattr__：这些方法允许对象在访问或修改不存在的属性时执行自定义操作。<br> 7-2、描述符(Descriptors)是实现了__get__, __set__, 和__delete__方法的对象，它们可以控制对另一个对象属性的访问。</p> 
<h4 id="8%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8">8、迭代器和生成器</h4> 
<p>8-1、__iter__和__next__：这些方法允许对象支持迭代操作，如使用for循环遍历对象。<br> 8-2、__aiter__, __anext__：这些是异步迭代器的魔法方法，用于支持异步迭代。</p> 
<h4 id="9%E3%80%81%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B">9、数值类型</h4> 
<p>9-1、__int__(self)、__float__(self)、__complex__(self)：定义对象到数值类型的转换。<br> 9-2、__index__(self)：定义对象用于切片时的整数转换。</p> 
<h4 id="10%E3%80%81%E5%A4%8D%E5%88%B6%E5%92%8C%E5%BA%8F%E5%88%97%E5%8C%96">10、复制和序列化</h4> 
<p>10-1、__copy__和__deepcopy__：允许对象支持浅复制和深复制操作。<br> 10-2、__getstate__和__setstate__：用于自定义对象的序列化和反序列化过程。</p> 
<h4 id="11%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%83%E7%B1%BB%E8%A1%8C%E4%B8%BA">11、自定义元类行为</h4> 
<p>11-1、__metaclass__(Python 2)或元类本身(Python 3)：允许自定义类的创建过程，如动态创建类、修改类的定义等。</p> 
<h4 id="12%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E8%A1%8C%E4%B8%BA">12、自定义类行为</h4> 
<p>12-1、__init__和__new__：用于初始化对象或控制对象的创建过程。<br> 12-2、__init_subclass__：在子类被创建时调用，允许在子类中执行一些额外的操作。</p> 
<h4 id="13%E3%80%81%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%92%8C%E8%BD%AC%E6%8D%A2">13、类型检查和转换</h4> 
<p>13-1、__instancecheck__和__subclasscheck__：用于自定义isinstance()和issubclass()函数的行为。</p> 
<h4 id="14%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8">14、自定义异常</h4> 
<p>14-1、你可以通过继承内置的Exception类来创建自定义的异常类，并定义其特定的行为。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/be/38/eNuErxoI_o.png"></p> 
<h3 id="%E4%B8%89%E3%80%81%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95">三、学习方法</h3> 
<p>        要学好Python的魔法方法，你可以遵循以下方法及步骤：</p> 
<h4 id="1%E3%80%81%E7%90%86%E8%A7%A3%E5%9F%BA%E7%A1%80">1、理解基础</h4> 
<p>        首先确保你对Python的基本语法、数据类型、类和对象等概念有深入的理解，这些是理解魔法方法的基础。</p> 
<h4 id="2%E3%80%81%E6%9F%A5%E9%98%85%E6%96%87%E6%A1%A3">2、查阅文档</h4> 
<p>        仔细阅读Python官方文档中关于魔法方法的部分，文档会详细解释每个魔法方法的作用、参数和返回值。你可以通过访问Python的官方网站或使用help()函数在Python解释器中查看文档。</p> 
<h4 id="3%E3%80%81%E7%BC%96%E5%86%99%E7%A4%BA%E4%BE%8B">3、编写示例</h4> 
<p>        为每个魔法方法编写简单的示例代码，以便更好地理解其用法和效果，通过实际编写和运行代码，你可以更直观地感受到魔法方法如何改变对象的行为。</p> 
<h4 id="4%E3%80%81%E5%AE%9E%E8%B7%B5%E5%BA%94%E7%94%A8">4、实践应用</h4> 
<p>        在实际项目中尝试使用魔法方法。如，你可以创建一个自定义的集合类，使用__getitem__、__setitem__和__delitem__方法来实现索引操作。只有通过实践应用，你才能更深入地理解魔法方法的用途和重要性。</p> 
<h4 id="5%E3%80%81%E9%98%85%E8%AF%BB%E4%BB%96%E4%BA%BA%E4%BB%A3%E7%A0%81">5、阅读他人代码</h4> 
<p>        阅读开源项目或他人编写的代码，特别是那些使用了魔法方法的代码，这可以帮助你学习如何在实际项目中使用魔法方法。通过分析他人代码中的魔法方法使用方式，你可以学习到一些新的技巧和最佳实践。</p> 
<h4 id="6%E3%80%81%E5%8F%82%E5%8A%A0%E7%A4%BE%E5%8C%BA%E8%AE%A8%E8%AE%BA">6、参加社区讨论</h4> 
<p>        参与Python社区的讨论，与其他开发者交流关于魔法方法的使用经验和技巧，在社区中提问或回答关于魔法方法的问题，这可以帮助你更深入地理解魔法方法并发现新的应用场景。</p> 
<h4 id="7%E3%80%81%E6%8C%81%E7%BB%AD%E5%AD%A6%E4%B9%A0">7、持续学习</h4> 
<p>        Python语言和其生态系统不断发展，新的魔法方法和功能可能会不断被引入，保持对Python社区的关注，及时学习新的魔法方法和最佳实践。</p> 
<h4 id="8%E3%80%81%E7%BB%83%E4%B9%A0%E4%B8%8E%E6%80%BB%E7%BB%93">8、练习与总结</h4> 
<p>        多做练习，通过编写各种使用魔法方法的代码来巩固你的理解，定期总结你学到的知识和经验，形成自己的知识体系。</p> 
<h4 id="9%E3%80%81%E6%B3%A8%E6%84%8F%E5%85%BC%E5%AE%B9%E6%80%A7">9、注意兼容性</h4> 
<p>        在使用魔法方法时，要注意不同Python版本之间的兼容性差异，确保你的代码在不同版本的Python中都能正常工作。</p> 
<h4 id="10%E3%80%81%E9%81%BF%E5%85%8D%E8%BF%87%E5%BA%A6%E4%BD%BF%E7%94%A8">10、避免过度使用</h4> 
<p>        虽然魔法方法非常强大，但过度使用可能会导致代码难以理解和维护，在编写代码时，要权衡使用魔法方法的利弊，避免滥用。</p> 
<p>        总之，学好Python的魔法方法需要不断地学习、实践和总结，只有通过不断地练习和积累经验，你才能更好地掌握这些强大的工具，并在实际项目中灵活运用它们。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/2b/b9/E6FmWIdF_o.png"></p> 
<h3 id="%E5%9B%9B%E3%80%81%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B">四、魔法方法</h3> 
<h4 id="1%E3%80%81__abs__%E6%96%B9%E6%B3%95">68、__setattr__方法</h4> 
<h5 id="1-1%E3%80%81%E8%AF%AD%E6%B3%95">68-1、语法</h5> 
<pre><code class="language-python">__setattr__(self, name, value, /)
    Implement setattr(self, name, value)
  </code></pre> 
<h5 id="1-2%E3%80%81%E5%8F%82%E6%95%B0">68-2、参数</h5> 
<p><span style="color:#fe2c24;"><strong>68-2-1、self</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>一个对实例对象本身的引用，在类的所有方法中都会自动传递。</p> 
<p><span style="color:#fe2c24;"><strong>68-2-2、name</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>一个字符串，表示要设置的属性的名称。</p> 
<p><span style="color:#fe2c24;"><strong>68-2-3、value</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>要设置给属性的新值。</p> 
<p><span style="color:#fe2c24;"><strong>68-2-4、 /</strong></span><span style="color:#956fe7;"><strong>(可选)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>这是从Python 3.8开始引入的参数注解语法，它表示这个方法不接受任何位置参数(positional-only parameters)之后的关键字参数(keyword arguments)。</p> 
<h5 id="1-3%E3%80%81%E5%8A%9F%E8%83%BD">68-3、功能</h5> 
<p>        用于在尝试为一个对象的属性赋值时被调用。</p> 
<h5 id="1-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC">68-4、返回值</h5> 
<p>       没有特定的返回值要求，其主要目的是执行某些操作，而不是返回任何值。</p> 
<h5 id="1-5%E3%80%81%E8%AF%B4%E6%98%8E">68-5、说明</h5> 
<p>        由于__setattr__是在设置属性时被调用的，因此它本身并不“返回”被设置的属性值；相反，它执行必要的操作来确保属性值被正确地设置。</p> 
<h5 id="1-6%E3%80%81%E7%94%A8%E6%B3%95">68-6、用法</h5> 
<pre><code class="language-python"># 068、__setattr__方法：
# 1、属性值范围限制
class RangeLimited:
    def __init__(self, min_value=0, max_value=100):
        self._min_value = min_value
        self._max_value = max_value
        self._data = {}
    def __setattr__(self, name, value):
        if name.startswith('_'):
            super().__setattr__(name, value)
        else:
            if self._min_value &lt;= value &lt;= self._max_value:
                self._data[name] = value
            else:
                raise ValueError(
                    f"Value {value} for attribute {name} is out of range ({self._min_value} to {self._max_value})")
    def __getattr__(self, name):
        return self._data.get(name)
if __name__ == '__main__':
    obj = RangeLimited(min_value=10, max_value=50)
    obj.value = 25  # 正常赋值
    print(obj.value)  # 输出：25
    # obj.value = 75  # 抛出异常：ValueError: Value 75 for attribute value is out of range (10 to 50)

# 2、属性依赖检查
class DependencyChecker:
    def __init__(self):
        self._data = {}
    def __setattr__(self, name, value):
        # 检查是否是_data字典的赋值，或者是否是_data字典之外的属性赋值
        if name == '_data':
            # 如果是_data字典的赋值，直接使用基类的__setattr__
            super().__setattr__(name, value)
        elif name == 'b' and 'a' not in self._data:
            # 如果尝试设置b属性但a属性尚未设置，则抛出异常
            raise AttributeError("Cannot set attribute 'b' before 'a' is set.")
        else:
            # 对于_data字典之外的其他属性，存储到_data字典中
            self._data[name] = value
if __name__ == '__main__':
    obj = DependencyChecker()
    obj.a = 10  # 正常赋值
    obj.b = 20  # 如果在设置obj.b之前没有设置obj.a，则会抛出AttributeError（但在这个示例中不会）
    # 尝试在没有设置a的情况下设置b，会抛出AttributeError
    # obj = DependencyChecker()
    # obj.b = 20  # 这会抛出AttributeError: Cannot set attribute 'b' before 'a' is set.</code></pre> 
<h4 id="2%E3%80%81__add__%E6%96%B9%E6%B3%95">69、__setitem__方法</h4> 
<h5 id="17-1%E3%80%81%E8%AF%AD%E6%B3%95">69-1、语法</h5> 
<pre><code class="language-python">__setitem__(self, key, value, /)
    Set self[key] to value</code></pre> 
<h5 id="36-2%E3%80%81%E5%8F%82%E6%95%B0"><strong>69-2、参数</strong></h5> 
<p><span style="color:#fe2c24;"><strong>69-2-1、self</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>一个对实例对象本身的引用，在类的所有方法中都会自动传递。</p> 
<p><span style="color:#fe2c24;"><strong>69-2-2、key</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>表示要设置的键，通常是一个可哈希(hashable)的对象，如整数、浮点数、字符串、元组等，在my_dict[key]=value这样的语句中，key就是你要设置的键。</p> 
<p><span style="color:#fe2c24;"><strong>69-2-3、value</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>表示要设置给键的新值，在my_dict[key]=value这样的语句中，value就是你要设置给键的值。</p> 
<p><span style="color:#fe2c24;"><strong>69-2-4、/</strong></span><span style="color:#956fe7;"><strong>(可选)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>这是从Python 3.8开始引入的参数注解语法，它表示这个方法不接受任何位置参数(positional-only parameters)之后的关键字参数(keyword arguments)。</p> 
<h5 id="36-3%E3%80%81%E5%8A%9F%E8%83%BD"><strong>69-3、功能</strong></h5> 
<p>        用于自定义字典(或类似字典的容器)在通过键(key)设置值(value)时的行为。</p> 
<h5 id="36-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC"><strong>69-4、返回值</strong></h5> 
<p>        没有返回值，即返回None。</p> 
<h5 id="36-5%E3%80%81%E8%AF%B4%E6%98%8E"><strong>69-5、说明</strong></h5> 
<p>        无</p> 
<h5 id="36-6%E3%80%81%E7%94%A8%E6%B3%95"><strong>69-6、用法</strong></h5> 
<pre><code class="language-python"># 069、__setitem__方法：
# 1、简单的键值存储
class SimpleDict:
    def __init__(self):
        self.data = {}
    def __setitem__(self, key, value):
        self.data[key] = value
if __name__ == '__main__':
    d = SimpleDict()
    d['a'] = 1

# 2、限制键类型的字典
class TypedDict:
    def __init__(self, key_type):
        self.key_type = key_type
        self.data = {}
    def __setitem__(self, key, value):
        if not isinstance(key, self.key_type):
            raise TypeError(f"Key must be of type {self.key_type}")
        self.data[key] = value
if __name__ == '__main__':
    td = TypedDict(str)
    td['hello'] = 'world'

# 3、自定义列表
class CustomList:
    def __init__(self):
        self.data = []

    def __setitem__(self, index, value):
        if index &lt; 0 or index &gt;= len(self.data):
            raise IndexError("Index out of range")
        self.data[index] = value
if __name__ == '__main__':
    cl = CustomList()
    cl.data.extend([0, 0, 0])
    cl[1] = 1

# 4、实现稀疏矩阵
class SparseMatrix:
    def __init__(self, rows, cols):
        self.rows = rows
        self.cols = cols
        self.data = {}
    def __setitem__(self, index, value):
        if value == 0:
            return  # 不存储零值
        row, col = index
        if 0 &lt;= row &lt; self.rows and 0 &lt;= col &lt; self.cols:
            self.data[(row, col)] = value
            # 还需要实现__getitem__等方法...
if __name__ == '__main__':
    sm = SparseMatrix(3, 3)
    sm[(1, 1)] = 1

# 5、实现优先队列
import heapq
class PriorityQueue:
    def __init__(self):
        self._queue = []
        self._index = 0
    def __setitem__(self, priority, item):
        heapq.heappush(self._queue, (-priority, self._index, item))
        self._index += 1
        # 还需要实现pop等方法...
if __name__ == '__main__':
    pq = PriorityQueue()
    pq[3] = 'c'
    pq[1] = 'a'
    pq[2] = 'b'

# 6、实现一个带有历史记录的字典
class HistoryDict:
    def __init__(self):
        self.data = {}
        self.history = []
    def __setitem__(self, key, value):
        if key in self.data:
            self.history.append((key, self.data[key]))  # 记录旧值
        self.data[key] = value
        self.history.append((key, value))  # 记录新值
if __name__ == '__main__':
    hd = HistoryDict()
    hd['key'] = 'value1'
    hd['key'] = 'value2'

# 7、实现一个只接受整数值的字典
class IntegerValueDict:
    def __init__(self):
        self.data = {}
    def __setitem__(self, key, value):
        if not isinstance(value, int):
            raise ValueError("Value must be an integer")
        self.data[key] = value
if __name__ == '__main__':
    ivd = IntegerValueDict()
    ivd['a'] = 10  # 正常设置
    # ivd['b'] = 'ten'  # 这会抛出 ValueError

# 8、实现一个带有自动排序功能的列表
class SortedList:
    def __init__(self):
        self.data = []
    def __setitem__(self, index, value):
        if index &lt; 0 or index &gt; len(self.data):
            raise IndexError("Index out of range")
        self.data.insert(index, value)
        self.data.sort()
    def __getitem__(self, index):
        return self.data[index]
    # 注意：这里插入元素后对整个列表进行排序可能不是最高效的，
    # 实际中可能会使用更复杂的数据结构（如平衡二叉搜索树）来实现自动排序。
if __name__ == '__main__':
    sl = SortedList()
    sl[0] = 3
    sl[1] = 1
    sl[2] = 2
    print(sl[0], sl[1], sl[2])  # 输出: 1 2 3

# 9、实现一个具有默认值的字典
class DefaultDict:
    def __init__(self, default_value):
        self.data = {}
        self.default_value = default_value
    def __setitem__(self, key, value):
        self.data[key] = value
    def __getitem__(self, key):
        return self.data.get(key, self.default_value)
if __name__ == '__main__':
    dd = DefaultDict(0)
    print(dd['a'])  # 输出: 0（因为'a'不在字典中，返回默认值0）
    dd['a'] = 1
    print(dd['a'])  # 输出: 1

# 10、实现一个二维数组(列表的列表)
class TwoDArray:
    def __init__(self, rows, cols):
        self.data = [[0] * cols for _ in range(rows)]
    def __setitem__(self, index, value):
        if not isinstance(index, tuple) or len(index) != 2:
            raise IndexError("Index must be a tuple of length 2")
        row, col = index
        if not (0 &lt;= row &lt; len(self.data) and 0 &lt;= col &lt; len(self.data[0])):
            raise IndexError("Index out of range")
        self.data[row][col] = value
if __name__ == '__main__':
    ta = TwoDArray(3, 3)
    ta[(1, 1)] = 5

# 11、实现一个具有最大容量限制的列表
class BoundedList:
    def __init__(self, max_size):
        self.data = []
        self.max_size = max_size
    def __setitem__(self, index, value):
        if index &lt; 0 or index &gt;= self.max_size:
            raise IndexError("Index out of range")
        if len(self.data) == self.max_size:
            self.data.pop(0)  # 移除第一个元素以保持最大容量
        self.data.append(None)  # 先在末尾添加一个占位符
        self.data[index] = value  # 设置值
    def __getitem__(self, index):
        if index &lt; 0 or index &gt;= len(self.data):
            raise IndexError("Index out of range")
        return self.data[index]
if __name__ == '__main__':
    bl = BoundedList(3)
    bl[0] = 'a'
    bl[1] = 'b'
    bl[2] = 'c'
    # bl[3] = 'd'  # 这会抛出异常：IndexError: Index out of range
</code></pre> 
<h4 id="46%E3%80%81__lt__%E6%96%B9%E6%B3%95">70、__sizeof__方法</h4> 
<h5 id="46-1%E3%80%81%E8%AF%AD%E6%B3%95">70-1、语法</h5> 
<pre><code class="language-python">__sizeof__(self, /)
    D.__sizeof__() -&gt; size of D in memory, in bytes # 以字节数的方式</code></pre> 
<h5 id="37-2%E3%80%81%E5%8F%82%E6%95%B0"><strong>70-2、参数</strong></h5> 
<p><span style="color:#fe2c24;"><strong>70-2-1、self</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>一个对实例对象本身的引用，在类的所有方法中都会自动传递。</p> 
<p><span style="color:#fe2c24;"><strong>70-2-2、/</strong></span><span style="color:#956fe7;"><strong>(可选)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>这是从Python 3.8开始引入的参数注解语法，它表示这个方法不接受任何位置参数(positional-only parameters)之后的关键字参数(keyword arguments)。</p> 
<h5 id="37-3%E3%80%81%E5%8A%9F%E8%83%BD"><strong>70-3、功能</strong></h5> 
<p>        用于返回对象在内存中占用的字节数。</p> 
<h5 id="37-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC"><strong>70-4、返回值</strong></h5> 
<p>        返回一个整数，表示对象在内存中占用的字节数。</p> 
<h5 id="37-5%E3%80%81%E8%AF%B4%E6%98%8E"><strong>70-5、说明</strong></h5> 
<p>        无</p> 
<h5 id="37-6%E3%80%81%E7%94%A8%E6%B3%95"><strong>70-6、用法</strong></h5> 
<pre><code class="language-python"># 070、__sizeof__方法：
# 1、自定义列表
class CustomList(list):
    def __sizeof__(self):
        size = super().__sizeof__()
        for item in self:
            size += sys.getsizeof(item)
        return size

# 2、自定义字典
import sys
class CustomDict(dict):
    def __sizeof__(self):
        size = super().__sizeof__()
        for key, value in self.items():
            size += sys.getsizeof(key) + sys.getsizeof(value)
        return size

# 3、自定义字符串类
class CustomString:
    def __init__(self, string):
        self.string = string
    def __sizeof__(self):
        return sys.getsizeof(self.string) + sys.getsizeof(self)

# 4、自定义整数类
class CustomInteger:
    def __init__(self, value):
        self.value = value
    def __sizeof__(self):
        return sys.getsizeof(self.value) + sys.getsizeof(self)

# 5、自定义浮点数类
class CustomFloat:
    def __init__(self, value):
        self.value = value
    def __sizeof__(self):
        return sys.getsizeof(self.value) + sys.getsizeof(self)

# 6、二维点类
class Point2D:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    def __sizeof__(self):
        return sys.getsizeof(self.x) + sys.getsizeof(self.y) + sys.getsizeof(self)

# 7、三维点类
class Point3D:
    def __init__(self, x, y, z):
        self.x = x
        self.y = y
        self.z = z
    def __sizeof__(self):
        return sys.getsizeof(self.x) + sys.getsizeof(self.y) + sys.getsizeof(self.z) + sys.getsizeof(self)

# 8、自定义矩阵类
class Matrix:
    def __init__(self, rows, cols, values=None):
        self.rows = rows
        self.cols = cols
        self.data = [[0 for _ in range(cols)] for _ in range(rows)]
        if values:
            for i, row in enumerate(values):
                for j, val in enumerate(row):
                    self.data[i][j] = val
    def __sizeof__(self):
        size = sys.getsizeof(self) + sys.getsizeof(self.rows) + sys.getsizeof(self.cols)
        for row in self.data:
            for val in row:
                size += sys.getsizeof(val)
        return size

# 9、自定义二叉树节点类
class TreeNode:
    def __init__(self, value):
        self.value = value
        self.left = None
        self.right = None
    def __sizeof__(self):
        size = sys.getsizeof(self) + sys.getsizeof(self.value)
        if self.left:
            size += self.left.__sizeof__()
        if self.right:
            size += self.right.__sizeof__()
        return size

# 10、自定义图像类
class Image:
    def __init__(self, width, height, data):
        self.width = width
        self.height = height
        self.data = data  # Assume data is a list of pixel values
    def __sizeof__(self):
        size = sys.getsizeof(self) + sys.getsizeof(self.width) + sys.getsizeof(self.height)
        for pixel in self.data:
            size += sys.getsizeof(pixel)
        return size

# 11、自定义文件缓存类
import os
class FileCache:
    def __init__(self, path):
        self.path = path
        self.cache = {}
    def __sizeof__(self):
        size = sys.getsizeof(self) + sys.getsizeof(self.path)
        for key, value in self.cache.items():
            size += sys.getsizeof(key) + os.path.getsize(value) if isinstance(value, str) and os.path.exists(
                value) else sys.getsizeof(value)
        return size
        # 注意：这里os.path.getsize()用于计算文件大小，但这可能不准确，因为self.cache中的值可能不是文件路径

# 12、自定义图形类(例如矩形)
class Rectangle:
    def __init__(self, width, height):
        self.width = width
        self.height = height
    def __sizeof__(self):
        return sys.getsizeof(self) + sys.getsizeof(self.width) + sys.getsizeof(self.height)
        # 注意：这里我们只计算了Rectangle对象本身和其属性占用的内存，没有考虑可能与之关联的图形缓冲区或渲染资源

# 13、自定义集合类
class CustomSet(set):
    def __sizeof__(self):
        size = super().__sizeof__()
        for item in self:
            size += sys.getsizeof(item)
        # 可能需要加上额外的哈希表开销，但这里为了简化我们忽略它
        return size

# 14、自定义日期范围类
from datetime import date
class DateRange:
    def __init__(self, start_date, end_date):
        self.start_date = start_date
        self.end_date = end_date
    def __sizeof__(self):
        return sys.getsizeof(self) + sys.getsizeof(self.start_date) + sys.getsizeof(self.end_date)

# 15、自定义栈类
class Stack:
    def __init__(self):
        self.items = []
    def push(self, item):
        self.items.append(item)
    def pop(self):
        if not self.is_empty():
            return self.items.pop()
        else:
            raise IndexError("Pop from an empty stack")
    def is_empty(self):
        return not bool(self.items)
    def __sizeof__(self):
        size = sys.getsizeof(self) + sys.getsizeof(self.items)
        for item in self.items:
            size += sys.getsizeof(item)
        return size
</code></pre> 
<h3 id="%E4%BA%94%E3%80%81%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">五、推荐阅读</h3> 
<h4 id="1%E3%80%81Python%E7%AD%91%E5%9F%BA%E4%B9%8B%E6%97%85">1、<a href="https://myelsa1024.blog.csdn.net/article/details/139241094?spm=1001.2014.3001.5502" rel="nofollow" title="Python筑基之旅">Python筑基之旅</a></h4> 
<h4 id="2%E3%80%81Python%E5%87%BD%E6%95%B0%E4%B9%8B%E6%97%85">2、<a href="https://myelsa1024.blog.csdn.net/article/details/138916144?spm=1001.2014.3001.5502" rel="nofollow" title="Python函数之旅">Python函数之旅</a></h4> 
<h4 id="3%E3%80%81Python%E7%AE%97%E6%B3%95%E4%B9%8B%E6%97%85">3、<a href="https://blog.csdn.net/ygb_1024/article/details/136889623?spm=1001.2014.3001.5501" title="Python算法之旅">Python算法之旅</a></h4> 
<h4 id="4%E3%80%81%E5%8D%9A%E5%AE%A2%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5">4、<a href="https://blog.csdn.net/ygb_1024?spm=1010.2135.3001.5421" title="博客个人主页">博客个人主页</a></h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/baee52187e04166acf34eab68bb24a40/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PHP超详细安装及应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/225a0a70af6f38e9c96a3d8de66c242d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">通过SSH远程登录华为设备</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>