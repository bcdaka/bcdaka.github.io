<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python爬虫实战：利用代理IP爬取百度翻译 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/68d538fd30e3bcfe69df6ae2c9887427/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python爬虫实战：利用代理IP爬取百度翻译">
  <meta property="og:description" content="文章目录 一、爬取目标二、环境准备三、代理IP获取3.1 爬虫和代理IP的关系3.2 巨量IP介绍3.3 超值企业极速池推荐3.4 IP领取3.5 代码获取IP 四、爬虫代码实战4.1分析网页4.2 寻找接口4.3 参数构建4.4 完整代码 一、爬取目标 本次目标网站：百度翻译（https://fanyi.baidu.com/），输入一个关键词后返回翻译结果：
二、环境准备 Python：3.10
编辑器：PyCharm
第三方模块，自行安装：
pip install requests # 网页数据爬取 三、代理IP获取 由于百度翻译限制很严，为了能正常获取数据这里必须使用到代理IP。
3.1 爬虫和代理IP的关系 爬虫和代理IP之间的关系是相互依存的。代理IP为爬虫提供了绕过IP限制、隐藏真实IP、提高访问速度等能力，使得爬虫能够更有效地进行数据抓取。然而，在使用时也需要注意合法性、稳定性、成本以及隐私保护等问题。
3.2 巨量IP介绍 巨量IP提供免费HTTP代理IP和长效静态IP、短效IP、动态IP代理、隧道代理等服务，支持按时、按量、按时按量3种计费方式，根据业务场景需求，让套餐的选择变得更灵活：巨量IP官网
3.3 超值企业极速池推荐 博主经常写爬虫代码使用的是巨量IP家的企业极速池，每日500万去重IP，单IP低至0.005元 （按量计费），并且充值加赠50%，不得不说真的很香：
经常使用爬虫的小伙伴推荐使用IP时效：1分钟的套餐性价比超高。
3.4 IP领取 巨量IP还提供每日1000个免费IP供大家使用：代理IP免费领取
3.5 代码获取IP 1、点击产品管理找到我们 购买或者领取 的套餐：
2、将自己电脑的IP添加为白名单能获取代理IP，点击授权信息：
3、依次点击修改授权》快速添加》确定
4、添加完成后，点击生成提取链接：
5、设置每次提取的数量，点击生成链接，并复制链接：
6、将复制链接，复制到地址栏就可以看到我们获取到的代理IP了：
7、代理获取IP（注意：下面url需要换成你的链接）：
import requests import time import random def get_ip(): url = &#34;这里放你自己的API链接&#34; while 1: try: r = requests.get(url, timeout=10) except: continue ip = r.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-06T13:36:00+08:00">
    <meta property="article:modified_time" content="2024-08-06T13:36:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python爬虫实战：利用代理IP爬取百度翻译</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_3" rel="nofollow">一、爬取目标</a></li><li><a href="#_9" rel="nofollow">二、环境准备</a></li><li><a href="#IP_23" rel="nofollow">三、代理IP获取</a></li><li><ul><li><a href="#31_IP_27" rel="nofollow">3.1 爬虫和代理IP的关系</a></li><li><a href="#32_IP_31" rel="nofollow">3.2 巨量IP介绍</a></li><li><a href="#33__37" rel="nofollow">3.3 超值企业极速池推荐</a></li><li><a href="#34_IP_45" rel="nofollow">3.4 IP领取</a></li><li><a href="#35_IP_51" rel="nofollow">3.5 代码获取IP</a></li></ul> 
  </li><li><a href="#_116" rel="nofollow">四、爬虫代码实战</a></li><li><ul><li><a href="#41_118" rel="nofollow">4.1分析网页</a></li><li><a href="#42__126" rel="nofollow">4.2 寻找接口</a></li><li><a href="#43__140" rel="nofollow">4.3 参数构建</a></li><li><a href="#44__159" rel="nofollow">4.4 完整代码</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_3"></a>一、爬取目标</h2> 
<p>本次目标网站：百度翻译（<a href="https://fanyi.baidu.com/" rel="nofollow">https://fanyi.baidu.com/</a>），输入一个关键词后返回翻译结果：</p> 
<p><img src="https://images2.imgbox.com/53/1f/BDPwv7xs_o.png" alt=""></p> 
<h2><a id="_9"></a>二、环境准备</h2> 
<p>Python：3.10</p> 
<p>编辑器：PyCharm</p> 
<p>第三方模块，自行安装：</p> 
<pre><code class="prism language-python">pip install requests <span class="token comment"># 网页数据爬取</span>
</code></pre> 
<h2><a id="IP_23"></a>三、代理IP获取</h2> 
<p><strong>由于百度翻译限制很严，为了能正常获取数据这里必须使用到代理IP。</strong></p> 
<h3><a id="31_IP_27"></a>3.1 爬虫和代理IP的关系</h3> 
<p>爬虫和代理IP之间的关系是相互依存的。代理IP为爬虫提供了绕过IP限制、隐藏真实IP、提高访问速度等能力，使得爬虫能够更有效地进行数据抓取。然而，在使用时也需要注意合法性、稳定性、成本以及隐私保护等问题。</p> 
<h3><a id="32_IP_31"></a>3.2 巨量IP介绍</h3> 
<p>巨量IP提供免费HTTP代理IP和长效静态IP、短效IP、动态IP代理、隧道代理等服务，支持按时、按量、按时按量3种计费方式，根据业务场景需求，让套餐的选择变得更灵活：<a href="https://www.juliangip.com/user/reg?inviteCode=1017310" rel="nofollow">巨量IP官网</a></p> 
<p><img src="https://images2.imgbox.com/89/44/07Z9l7eN_o.png" alt=""></p> 
<h3><a id="33__37"></a>3.3 超值企业极速池推荐</h3> 
<p>博主经常写爬虫代码使用的是巨量IP家的企业极速池，每日500万去重IP，单IP低至0.005元 （按量计费），并且充值加赠50%，不得不说真的很香：</p> 
<p><img src="https://images2.imgbox.com/5c/46/QIoNCm2Z_o.png" alt=""></p> 
<p>经常使用爬虫的小伙伴推荐使用IP时效：1分钟的套餐性价比超高。</p> 
<h3><a id="34_IP_45"></a>3.4 IP领取</h3> 
<p>巨量IP还提供每日1000个免费IP供大家使用：<a href="https://www.juliangip.com/user/reg?inviteCode=1017310" rel="nofollow">代理IP免费领取</a></p> 
<p><img src="https://images2.imgbox.com/25/3d/V1pxIRnT_o.png" alt=""></p> 
<h3><a id="35_IP_51"></a>3.5 代码获取IP</h3> 
<p>1、点击产品管理找到我们 购买或者领取 的套餐：</p> 
<p><img src="https://images2.imgbox.com/c1/ac/ko1GmVge_o.png" alt=""></p> 
<p>2、将自己电脑的IP添加为白名单能获取代理IP，点击授权信息：</p> 
<p><img src="https://images2.imgbox.com/f6/26/V3Hh6YZq_o.png" alt=""></p> 
<p>3、依次点击修改授权》快速添加》确定</p> 
<p><img src="https://images2.imgbox.com/79/fe/jHSFqFKq_o.png" alt=""></p> 
<p>4、添加完成后，点击生成提取链接：</p> 
<p><img src="https://images2.imgbox.com/19/f1/tim8FH9C_o.png" alt="">5、设置每次提取的数量，点击生成链接，并复制链接：</p> 
<p><img src="https://images2.imgbox.com/3f/17/GZaY73vw_o.png" alt=""></p> 
<p>6、将复制链接，复制到地址栏就可以看到我们获取到的代理IP了：</p> 
<p><img src="https://images2.imgbox.com/09/61/dgMWhp2i_o.png" alt=""></p> 
<p>7、代理获取IP（注意：下面url需要换成你的链接）：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> time
<span class="token keyword">import</span> random


<span class="token keyword">def</span> <span class="token function">get_ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">"这里放你自己的API链接"</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">continue</span>

        ip <span class="token operator">=</span> r<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token string">'请求过于频繁'</span> <span class="token keyword">in</span> ip<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'IP请求频繁'</span><span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
        <span class="token keyword">break</span>
    proxies <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'https'</span><span class="token punctuation">:</span> <span class="token string">'%s'</span> <span class="token operator">%</span> ip
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> proxies



<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    proxies <span class="token operator">=</span> get_ip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>proxies<span class="token punctuation">)</span>
</code></pre> 
<p>获取成功：</p> 
<p><img src="https://images2.imgbox.com/b0/ed/PFpK17ev_o.png" alt=""></p> 
<h2><a id="_116"></a>四、爬虫代码实战</h2> 
<h3><a id="41_118"></a>4.1分析网页</h3> 
<p>在翻译栏左侧输入内容，并不需要刷新网页，翻译结果可实时返回，说明该翻译网站为进行Ajax加载的网站：</p> 
<p><img src="https://images2.imgbox.com/06/c1/BSkCfxZD_o.png" alt=""></p> 
<p>Ajax（Asynchronous JavaScript and XML）是一种在无需重新加载整个网页的情况下，能够更新部分网页内容的技术。它通过在后台与服务器交换数据，并允许网页异步更新，从而提升了用户体验。</p> 
<h3><a id="42__126"></a>4.2 寻找接口</h3> 
<p>1、鼠标右击》检查》选择XHR，输入翻译内容，找到对应的翻译接口：</p> 
<p><img src="https://images2.imgbox.com/b3/55/LjyIFhEg_o.png" alt=""></p> 
<p>2、找到接口网址（https://fanyi.baidu.com/sug）和请求方式（Post请求）：</p> 
<p><img src="https://images2.imgbox.com/45/b5/RbaVUn7I_o.png" alt=""></p> 
<p>3、可以看到携带的参数就是我们输入的内容：</p> 
<p><img src="https://images2.imgbox.com/f2/98/bJmcb2i0_o.png" alt=""></p> 
<h3><a id="43__140"></a>4.3 参数构建</h3> 
<p>下面代码构建一个携带参数的post请求：</p> 
<pre><code class="prism language-python"><span class="token comment"># 1. 百度接口链接  </span>
post_url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/sug'</span>  
<span class="token comment"># 2. 创建post请求携带的参数，将手动输入需要翻译的单词传进去  </span>
data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
<span class="token string">'kw'</span><span class="token punctuation">:</span> kw  
<span class="token punctuation">}</span>  
<span class="token comment"># 3. 携带请求头  </span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
<span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51'</span><span class="token punctuation">}</span>  
<span class="token comment"># 使用post 请求（和get类似）  </span>
data_json <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>post_url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="44__159"></a>4.4 完整代码</h3> 
<p>注意下面代码需要修改 <code>get_ip()</code> 函数中 <code>url</code> 添加你自己的代理IP接口url（防止被识别到为爬虫）：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> time


<span class="token keyword">def</span> <span class="token function">get_ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string">"这里换成自己的代理IP接口url"</span>
    <span class="token keyword">while</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">#</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">continue</span>

        ip <span class="token operator">=</span> r<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token string">'请求过于频繁'</span> <span class="token keyword">in</span> ip<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'IP请求频繁'</span><span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
        <span class="token keyword">break</span>
    proxies <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'https'</span><span class="token punctuation">:</span> <span class="token string">'%s'</span> <span class="token operator">%</span> ip
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> proxies



<span class="token keyword">def</span> <span class="token function">get_data</span><span class="token punctuation">(</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 1. 百度接口链接</span>
    post_url <span class="token operator">=</span> <span class="token string">'https://fanyi.baidu.com/sug'</span>
    <span class="token comment"># 2. 创建post请求携带的参数，将手动输入需要翻译的单词传进去</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'kw'</span><span class="token punctuation">:</span> kw
    <span class="token punctuation">}</span>
    <span class="token comment"># 3. 携带请求头</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.51'</span><span class="token punctuation">}</span>
    <span class="token comment"># 4. 获取代理IP</span>
    proxies <span class="token operator">=</span> get_ip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 使用post 请求</span>
    data_json <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>post_url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>proxies<span class="token operator">=</span>proxies<span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># print(data_json)</span>
    <span class="token keyword">for</span> key <span class="token keyword">in</span> data_json<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data_json<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token comment"># 手动输入需要翻译的单词</span>
        kw <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入需要翻译的单词："</span><span class="token punctuation">)</span>
        get_data<span class="token punctuation">(</span>kw<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>可以看到中文翻译为英文，英文翻译为中文都可以轻松实现：</p> 
<p><img src="https://images2.imgbox.com/70/c3/JZLPTcmX_o.png" alt=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f23eebeb65dbb31ffb9d773a11918165/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis数据失效监听</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4ea20b629f913b692a21ea6b871c5490/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CSDN 僵尸粉 机器人</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>