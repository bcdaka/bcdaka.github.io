<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【5G】5G 核心网（5GC）基本架构 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/48b649a72893504941e818c883d639eb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【5G】5G 核心网（5GC）基本架构">
  <meta property="og:description" content="文章目录 前言5G 核心网（5GC）基本架构1. 5GC 的服务化架构（SBA）2. 5G 核心网的十大关键原则3. 不同场景下的网络架构3.1 非漫游参考架构3.2 漫游参考架构3.3 数据存储参考架构3.4 与 EPC 互通参考架构3.5 非 3GPP 接入参考架构 4. 基于服务的接口和参考点4.1 基于服务的接口4.2 参考点 总结 前言 本文旨在科普5G核心网相关知识，参考5G相关书籍《深入浅出：5G 移动通信标准与架构》及3GPP文章。
5G 核心网（5GC）基本架构 1. 5GC 的服务化架构（SBA） 什么是 SBA？就是服务化架构（SBA，Service Based Architecture），5G 核心网的控制面采用服务化架构设计。
初这样说起来可能大家还是不理解，看下图：
与以往有什么不同？以往是层级的拓扑网络结构，节点与节点之间是层级交错的网络关系，而且节点集成度很高，各种功能大包大揽，这样有它的好处，入网简单，但缺点也很明显：扩展性困难、升级困难，所以我们看到以前的核心网扩容，要么加新节点，要么在现有节点上升级，在现有节点上升级风险比较大，升级错误可能造成网络瘫痪，而且，升级只能在原硬件平台上进行。 而 SBA 架构则不同，由于将网络功能（NF）拆分了，而所有的 NF 又都通过接口接入到系统中，这样做得好处：
1、 负荷分担：相同的网络功能（NF）一起来承担和提供网络功能服务（NFS），负荷可以均衡分担。
2、 容灾：任何的网络功能（NF）出现故障，智能化的网络管理可以让它暂时退出服务，将服务转给其它相
同的网络功能（NF）上处理。
3、 扩容简单：只需要增加新的网络功能接入系统即可，丝毫不影响现网运行。
4、 升级容易：都是基于标准接口的接入，无论是硬件还是软件功能，需要推出新一代的，都可以直接接入，
旧的需要淘汰则直接退网。
5、 实现网络的开放能力，在标准接口下，其它系统也可以接入。
借鉴 IT 系统服务化的理念，通过模块化实现网络功能间的解耦和整合，各解耦后的网络功能（服务）可以独立扩容、独立演进、按需部署；各种服务采用服务注册、发现机制，实现了各自网络功能在 5G 核心网中的即插即用、自动化组网；同一服务可以被多种 NF 调用，提升服务的重用性，简化业务流程设计。SBA 设计的目标是以软
件服务重构核心网，实现核心网软件化、灵活化、开放化和智慧化。
SBA 的三大优点：
1、 拆分：网络功能独立，既可以独立自治，又能相互合作分担。
2、 直达：网络功能之间直达，不再需要像拓扑结构一样层级依赖，提高了传输效率。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-08T17:10:04+08:00">
    <meta property="article:modified_time" content="2023-09-08T17:10:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【5G】5G 核心网（5GC）基本架构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">前言</a></li><li><a href="#5G_5GC_11" rel="nofollow">5G 核心网（5GC）基本架构</a></li><li><a href="#1_5GC_SBA_12" rel="nofollow">1. 5GC 的服务化架构（SBA）</a></li><li><a href="#2_5G__51" rel="nofollow">2. 5G 核心网的十大关键原则</a></li><li><a href="#3___66" rel="nofollow">3. 不同场景下的网络架构</a></li><li><ul><li><a href="#31__87" rel="nofollow">3.1 非漫游参考架构</a></li><li><a href="#32__135" rel="nofollow">3.2 漫游参考架构</a></li><li><a href="#33__156" rel="nofollow">3.3 数据存储参考架构</a></li><li><a href="#34__EPC__186" rel="nofollow">3.4 与 EPC 互通参考架构</a></li><li><a href="#35__3GPP__198" rel="nofollow">3.5 非 3GPP 接入参考架构</a></li></ul> 
  </li><li><a href="#4__261" rel="nofollow">4. 基于服务的接口和参考点</a></li><li><ul><li><a href="#41__262" rel="nofollow">4.1 基于服务的接口</a></li><li><a href="#42__278" rel="nofollow">4.2 参考点</a></li></ul> 
  </li><li><a href="#_325" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_5"></a>前言</h2> 
<blockquote> 
 <p>本文旨在科普5G核心网相关知识，参考5G相关书籍《深入浅出：5G 移动通信标准与架构》及3GPP文章。</p> 
</blockquote> 
<hr> 
<h2><a id="5G_5GC_11"></a>5G 核心网（5GC）基本架构</h2> 
<h2><a id="1_5GC_SBA_12"></a>1. 5GC 的服务化架构（SBA）</h2> 
<p>什么是 SBA？就是服务化架构（SBA，Service Based Architecture），5G 核心网的控制面采用服务化架构设计。<br> 初这样说起来可能大家还是不理解，看下图：<br> <img src="https://images2.imgbox.com/f1/d5/hhmbV5rT_o.png" alt="在这里插入图片描述"><br> 与以往有什么不同？以往是层级的拓扑网络结构，节点与节点之间是层级交错的网络关系，而且节点集成度很高，各种功能大包大揽，这样有它的好处，入网简单，但缺点也很明显：扩展性困难、升级困难，所以我们看到以前的核心网扩容，要么加新节点，要么在现有节点上升级，在现有节点上升级风险比较大，升级错误可能造成网络瘫痪，而且，升级只能在原硬件平台上进行。 而 SBA 架构则不同，由于将网络功能（NF）拆分了，而所有的 NF 又都通过接口接入到系统中，这样做得好处：<br> 1、 负荷分担：相同的网络功能（NF）一起来承担和提供网络功能服务（NFS），负荷可以均衡分担。<br> 2、 容灾：任何的网络功能（NF）出现故障，智能化的网络管理可以让它暂时退出服务，将服务转给其它相<br> 同的网络功能（NF）上处理。<br> 3、 扩容简单：只需要增加新的网络功能接入系统即可，丝毫不影响现网运行。<br> 4、 升级容易：都是基于标准接口的接入，无论是硬件还是软件功能，需要推出新一代的，都可以直接接入，<br> 旧的需要淘汰则直接退网。<br> 5、 实现网络的开放能力，在标准接口下，其它系统也可以接入。<br> <img src="https://images2.imgbox.com/43/19/4a574V2J_o.png" alt="在这里插入图片描述"><br> 借鉴 IT 系统服务化的理念，通过模块化实现网络功能间的解耦和整合，各解耦后的网络功能（服务）可以独立扩容、独立演进、按需部署；各种服务采用服务注册、发现机制，实现了各自网络功能在 5G 核心网中的即插即用、自动化组网；同一服务可以被多种 NF 调用，提升服务的重用性，简化业务流程设计。SBA 设计的目标是以软<br> 件服务重构核心网，实现核心网软件化、灵活化、开放化和智慧化。</p> 
<p>SBA 的三大优点：<br> 1、 拆分：网络功能独立，既可以独立自治，又能相互合作分担。<br> 2、 直达：网络功能之间直达，不再需要像拓扑结构一样层级依赖，提高了传输效率。<br> 3、 智能化：在服务的分配上实现智能化，区别于以往核心网需要每个网元进行详细配置入网，在 SBA 架构<br> 下，注册、发现、状态检测都是自动化处理。</p> 
<p>服务化架构关键技术点如下：<br> （1）服务的提供通过生产者（Producer）与消费者（Consumer）之间的消息交互来达成。交互模式简化为两种：Request-Response、Subscribe- Notify，从而支持 NF 之间按照服务化接口交互， 1）Request-Response 模式下，NF_A（网络功能服务消费者）向 NF_B（网络功能服务生产者）请求特定的网络功能服务，服务内容可能是进行某种操作或提供一些信息；NF_B 根据 NF_A 发送的请求内容，返回相应的服务结果。<br> 2）Subscribe-Notify 模式下，NF_A（网络功能服务消费者）向 NF_B（网络功能服务生产者）订阅网络功能服务。NF_B 对所有订阅了该服务的 NF 发送通知并返回结果。消费者订阅的信息可以是按时间周期更新的信息，或特定事件触发的通知（例如请求的信息发生更改、达到了阈值等）。<br> （2）实现了服务的自动化注册和发现。NF 通过服务化接口，将自身的能力作为一种服务暴露到网络中，并被其他 NF 复用；NF 通过服务化接口的发现获取拥有所需 NF 服务的其它 NF 实例。这种注册和发现是通过 5G 核心网引入的新型网络功能 NRF 来实现的： NRF 接收其它 NF 发来的服务注册信息，维护 NF 实例的相关信息和支<br> 持的服务信息； NRF 接收其它 NF 发来的 NF 发现请求，返回对应的 NF 示例信息。<br> （3）采用统一服务化接口协议。 R15 阶段在设计接口协议时，考虑了适应 IT 化、虚拟化、微服务化的需求，目前定义的接口协议栈从下往上在传输层采用了 TCP，在应用层采用 HTTP/2.0 [3]，在序列化协议方面采用了 JSON，接口描述语言采用OpenAPI3.0， API 的设计方式采用 RESTFul。</p> 
<p>采用 SBA 对 5G 演进的好处：</p> 
<ol><li>服务以比传统网元更精细的粒度运行，并且彼此松耦合，允许升级单个服务，而对其他服务的影响最小。</li><li>每个服务可以通过轻量级服务接口直接与其他服务交互。</li><li>基于服务化接口的架构可以轻松扩展，同时服务化接口是开放的接口，任何其他 NF 和业务应用，都可<br> 以通过该接口使用 NF</li></ol> 
<p>5GC SBA 的这些优点，充分体现了网络架构的开放性，同时，各个 NF 之间松耦合，可以根据需要，增加或者修改 NF，而不会影响其他 NF；NF 之间采用轻量级的服务化接口，其他 NF 和业务应用很容易通过该接口调用 NF。该架构能够支持新业务的快速上线。5G 服务化架构是新一代移动核心网架构演进的起点，并将沿着该路线持续演进。</p> 
<p>值得一提的是，和以往设备商驱动一项新技术标准不同，SBA 架构由中国移动牵头联合全球 14 家运营商及华为等 12 家网络设备商联合提出。这种基于“服务”的架构设计方式使得 5G 网络真正面向云化（Cloud Native）设计，具备多方面优点，如便于网络快速升级、提升网络资源利用率、加速网络新能力引入，以及在授权的情况下<br> 开放给第三方等。</p> 
<h2><a id="2_5G__51"></a>2. 5G 核心网的十大关键原则</h2> 
<p>5G 系统架构被定义为支持数据连接和服务，使部署能够使用诸如网络功能虚拟化（NFV）和软件定义网络(SDN)之类的技术。5G 系统架构应利用已识别的控制平面（CP）网络功能之间基于服务的交互。</p> 
<p>十大关键原则和概念是：<br> 1、 将用户平面（UP）功能与控制平面（CP）功能分开，允许独立的可扩展性，演进和灵活部署，例如集中位置或分布式（远程）位置。<br> 2、 模块化功能设计，例如，以实现灵活和有效的网络切片。<br> 3、 在适用的情况下，将流程（即网络功能之间的交互集）定义为服务，以便可以重复使用它们。<br> 4、 如果需要，允许每个网络功能直接与其他 NF 交互。该体系结构不排除使用中间函数来帮助路由控制平面消息（例如像 DRA）。<br> 5、 最小化接入网络（AN）和核心网络（CN）之间的依赖关系。 该架构由融合核心网络和共同的 AN-CN 接口定义，该接口集成了不同的接入类型，例如 3GPP 接入和非 3GPP 接入。<br> 6、 支持统一的身份验证框架。<br> 7、 支持“无状态”NF，其中“计算”资源与“存储”资源分离。<br> 8、 支持网络能力对外开放（开放接口，非 3GPP 网络也可以接入）。<br> 9、 支持并发接入到本地和集中服务。为了支持低延迟服务接入到本地数据网络，UP 功能可以部署在接入网络附近。<br> 10、 支持漫游，包括归属路由区流量以及访问 PLMN 中的本地之外流量。</p> 
<h2><a id="3___66"></a>3. 不同场景下的网络架构</h2> 
<p>5G 核心网系统架构主要由网络功能（NF）组成，采用分布式的功能，根据实际需要部署，新的网络功能加入或撤<br> 出，并不影响整体网络的功能。这些网络功能的具体功能描述在第 6 章 5G 核心网的详细描述中讲解。</p> 
<ul><li>认证服务器功能（AUSF）</li><li>接入和移动管理功能（AMF）</li><li>数据网络（DN），例如运营商服务，互联网接入或第三方服务</li><li>非结构化数据存储功能（UDSF）</li><li>网络开放功能（NEF）</li><li>网络存储库功能（NRF）</li><li>网络切片选择功能（NSSF）</li><li>控制策略功能（PCF）</li><li>会话管理功能（SMF）</li><li>统一数据管理（UDM）</li><li>统一数据存储库（UDR）</li><li>用户平面功能（UPF）</li><li>应用功能（AF）</li><li>用户设备（UE）</li><li>接入网络（AN）或无线接入网（RAN）</li><li>5G 设备识别寄存器（5G-EIR）</li><li>安全边缘保护代理（SEPP）</li><li>网络数据分析功能（NWDAF）</li></ul> 
<h3><a id="31__87"></a>3.1 非漫游参考架构</h3> 
<p>基于服务接口的 5G 系统网络架构 <img src="https://images2.imgbox.com/26/12/8P3ySih4_o.png" alt="在这里插入图片描述"></p> 
<p>上描述了非漫游参考架构，基于服务的接口在控制平面内使用。其中黄色部分为控制面的网络功能（NF），<br> 蓝色为用户面的网络功能，Nnssf 等为网络功能之间的接口。我们可以看到，在控制面功能中，接口已经不是传统<br> 意义上的一对一，而是由一个总线结构接入，每个网络功能通过接口接入一个类似于计算机的总线结构，这个 5G<br> 看似简单的变更，却为网络部署带来极大的便利，因为每个网络功能的接入或撤走，只需要按规范进行即可，而<br> 不用顾及其它网络功能的影响，相当于总线建立了一个资源池。</p> 
<p><strong>基于参考点的 5G 系统网络架构</strong></p> 
<p>但同时，为了兼容以前的网络，也顺承了以前接口的概念，这里成为参考点（就是下图的 Nx）,如下图所示：<br> <img src="https://images2.imgbox.com/14/61/p3JbI9tc_o.png" alt="在这里插入图片描述"><br> 上图描述了非漫游情况下的 5G 系统架构，使用参考点表示，显示了各种网络功能如何相互作用。</p> 
<p>注意：</p> 
<ul><li>N9，N14 未在所有其他图中示出，但是它们也可适用于其他场景。</li><li>为了清楚地说明点对点图，未描述 UDSF，NEF 和 NRF。但是，所有描述的网络功能都可以根据需要与 DSF，UDR，NEF 和 NRF 进行交互。</li><li>UDM 使用用户数据和认证数据，PCF 使用可能存储在 UDR 中的策略数据。</li><li>为清楚起见，UDR 及其与其他 NF 的连接（例如 PCF）未在点对点和基于服务的架构图中描述。</li><li>为清楚起见，NWDAF 及其与其他 NF 的连接，例如 PCF，未在点对点和基于服务的架构图中描述。</li></ul> 
<p><strong>多个 PDU 会话接入两个数据网络</strong><br> 这也是 5G 的灵活之处，UE 可以进行多连接，到多个数据网络，以实现不同的功能，如下图：<br> <img src="https://images2.imgbox.com/33/c1/d2mkdNUC_o.png" alt="在这里插入图片描述"></p> 
<p>上图描述了 UE 使用参考点表示同时访问使用多个 PDU 会话的两个（例如本地和中央）数据网络的<br> 非漫游架构。此图显示了多个 PDU 会话的体系结构，其中为两个不同的 PDU 会话选择了两个 SMF。但是，每个 SMF还可以具有在 PDU 会话内控制本地和中央 UPF 的能力。</p> 
<p><strong>单个 PDU 会话接入两个数据网络</strong></p> 
<p>单个 PDU 会话，也可以接入多个数据网络，例如在密集热点地区，运营商提供了多个网络，那么用户单个 PDU<br> 会话接入多个数据网络，即使其中一个网络出现问题，并不会影响用户体验，这就为 5G 的可靠性提供了充足的保<br> 障。<br> <img src="https://images2.imgbox.com/c2/83/u1jVsCo8_o.png" alt="在这里插入图片描述"><br> 上图描述了在使用参考点表示在单个 PDU 会话内提供并发接入到两个（例如本地和中央）数据网络的情<br> 况下的非漫游体系结构。</p> 
<p><strong>网络开放的 5G 系统架构</strong></p> 
<p>5G 核心网中的网络功能 NEF（网络开放功能），向外提供其它网络的接入，同时，南向又可以接入所有的自<br> 有网络功能，既实现开放，又保障网络安全。<br> <img src="https://images2.imgbox.com/73/dc/EJs9SxjV_o.png" alt="在这里插入图片描述"><br> 上图中，NEF 的信任域与 SCEF 的信任域相同。<br> 上图中，3GPP 接口表示 NEF 和 5GC 网络功能之间的南向接口，例如 NEF 和 SMF 之间的 N29 接口，<br> NEF 和 PCF 之间的 N30 接口等。为简单起见，未示出 NEF 的所有南向接口。<br> <img src="https://images2.imgbox.com/1f/5c/VDwJ8npo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__135"></a>3.2 漫游参考架构</h3> 
<p>下图描述了 5G 系统漫游架构，在控制平面内具有基于服务的接口的本地分汇。<br> <img src="https://images2.imgbox.com/0a/5b/PbzOj2nL_o.png" alt="在这里插入图片描述"><br> 本地分汇漫游接入，指漫游用户通过拜访网络的网关 V-PGW 接入获取相应的业务，业务的提供者可以是归<br> 属网络，也可以是拜访网络。在 LBO 架构中，VPLMN 中的 PCF 可以与 AF 交互，以便为通过 VPLMN 传送的服务生成 PCC 规则。VPLMN 中的 PCF 根据与 HPLMN 运营商的漫游协议使用本地配置的策略作为 PCC 规则生成的输入，VPLMN 中的 PCF 没有来自 HPLMN 的用户策略信息的接入。</p> 
<p>下图描述了在控制平面内具有基于服务的接口的归属路由场景的情况下的 5G 系统漫游架构。<br> <img src="https://images2.imgbox.com/a9/c9/zIDF2QTH_o.png" alt="在这里插入图片描述"></p> 
<p>下图描述了使用参考点表示的本地分汇场景的 5G 系统漫游架构：<br> <img src="https://images2.imgbox.com/8e/1f/sEm7fHGD_o.png" alt="在这里插入图片描述"></p> 
<p>NRF 未在参考点架构图中描述。有关 NRF 和 NF 接口的详细信息，请参考下图。为清楚起见，在漫游参考<br> 点架构图中未描绘 SEPP。<br> <img src="https://images2.imgbox.com/01/99/6fPXo9UN_o.png" alt="在这里插入图片描述"></p> 
<p>下图 描述了在使用参考点表示的归属路由场景的情况下的 5G 系统漫游架构：<br> <img src="https://images2.imgbox.com/85/f4/oDE0Y1Mb_o.png" alt="在这里插入图片描述"></p> 
<p>对于上述漫游场景，每个 PLMN 实现代理功能以保护 PLMN 间接口上的互连和隐藏拓扑。</p> 
<h3><a id="33__156"></a>3.3 数据存储参考架构</h3> 
<p><strong>数据存储架构</strong><br> <img src="https://images2.imgbox.com/07/54/4CEEAvaj_o.png" alt="在这里插入图片描述"><br> 如图所示，5G 系统架构允许任何 NF 在 UDSF（例如 UE 上下文）中存储和检索其非结构化数据。 UDSF 属于网络功能所在的同一 PLMN，CP NF 可以共享用于存储它们各自的非结构化数据的 UDSF，或者每个可以具有它们自己的 UDSF（例如，UDSF 可以位于相应的 NF 附近）。3GPP 将指定（可能通过引用的方式）使<br> 用 N18 / Nudsf 接口。</p> 
<p><strong>数据存储架构</strong><br> <img src="https://images2.imgbox.com/03/d1/mCKsAZ70_o.png" alt="在这里插入图片描述"></p> 
<p>如图所示，5G 系统架构允许 UDM，PCF 和 NEF 在 UDR 中存储数据，包括 UDM 和 PCF 的用户数据和策略数据，用于开放和应用数据的结构化数据（包括数据包流） NEF 对应用检测的描述（PFD），多个 UE 的 AF 请<br> 求信息。<br> UDR 可以部署在每个 PLMN 中，它可以提供不同的功能，如下所示：</p> 
<ul><li>NEF 访问的 UDR 属于 NEF 所在的 PLMN。</li><li>如果 UDM 支持分离架构，则 UDM 访问的 UDR 属于 UDM 所在的同一 PLMN。</li><li>PCF 访问的 UDR 属于 PCF 所在的 PLMN。</li></ul> 
<p>部署在每个 PLMN 中的 UDR 都可以存储漫游用户的应用数据。可以在网络中部署多个 UDR，每个 UDR 可以容纳不同的数据集或子集（例如，用户数据，用户策略数据，用于展示的数据，应用数据）和/或服务于不同的 NF<br> 组。UDR 为单个 NF 提供服务并存储其数据，因此提供了灵活部署的可能性，可以灵活与 NF 集成的部署。上图 中 UDR 的内部结构仅供参考，具体根据网络需要部署。Nudr 接口是为网络功能（即 NF 服务用户）定义的，例<br> 如 UDM，PCF 和 NEF，接入是一组特定的数据存储和读取，更新（包括添加，修改），删除和用户 UDR 中相关数据变更的通知。通过 Nudr 访问 UDR 的每个 NF 服务用户应能够添加，修改，更新或删除它有权更改的数据。此授权应由 UDR 根据每个数据集和 NF 服务使用者基础执行，并且可能基于每个 UE 用户粒度执行。</p> 
<p>通过 Nudr 向相应的 NF 服务用户公开并存储的 UDR 集中的以下数据应标准化：</p> 
<ul><li>用户数据，</li><li>策略数据，</li><li>结构化数据开放，</li><li>应用数据：用于应用检测的分组流描述（PFD）和用于多个 UE 的 AF 请求信息。</li></ul> 
<p>基于服务的 Nudr 接口定义，由 3GPP 定义数据集公开信息单元的内容和格式/编码确定。此外，NF 服务用户<br> 可以从 UDR 获取接入操作员特定数据集以及每个数据集的操作员特定数据。值得注意的是，运营商特定数据和运<br> 营商特定数据集的内容和格式/编码不受标准化的约束，存储在 UDR 中的不同数据的组织形式，也不是标准化的。</p> 
<h3><a id="34__EPC__186"></a>3.4 与 EPC 互通参考架构</h3> 
<p><strong>与 EPC 互通非漫游架构</strong><br> <img src="https://images2.imgbox.com/17/4c/nOA6Ck6N_o.png" alt="在这里插入图片描述"></p> 
<p>上图表示 5GS 和 EPC / E-UTRAN 之间互通的非漫游架构，N26 接口是 MME 和 5GS AMF 之间的 CN间接口，以实现 EPC 和 NG 核心之间的互通。网络中支持 N26 接口是互通的可选项，N26 支持 S10 支持的功能子集（对互通至关重要）。PCF + PCRF，PGW-C + SMF 和 UPF + PGW-U 专用于 5GS 和 EPC 之间的互通，这是可选<br> 的，基于 UE MM 核心网络能力和 UE 用户。不受 5GS 和 EPC 互通的 UE 可以由不专用于互通的实体服务，即通过PGW / PCRF 或 SMF / UPF / PCF 服务。在 NG-RAN 和 UPF + PGW-U 之间可以存在另一个 UPF（在上图中未示出），即如果需要，UPF + PGW-U 可以支持 N9 朝向另外的 UPF。本规范中的图和流程描述的 SGW，没有区分 SGW是作为单片 SGW 部署，还是作为 SGW 分开其控制平面和用户平面功能。</p> 
<p><strong>与 EPC 互通漫游架构</strong><br> <img src="https://images2.imgbox.com/2f/b5/LSwyM8fB_o.png" alt="在这里插入图片描述"><br> 上图表示具有本地分汇的漫游架构，下图表示具有用于 5GS 和 EPC / E-UTRAN 之间的互通的归属路由流量的漫游架构。在 NG-RAN 和 UPF + PGW-U 之间可以存在另一个 UPF（在上图中未示出），即，如果需要，UPF + PGW-U 可以支持 N9 朝向附加 UPF。由于不存在已知部署，因此不需要来自 EPC 的 S9 接口。<br> <img src="https://images2.imgbox.com/39/97/AeVI3qWZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="35__3GPP__198"></a>3.5 非 3GPP 接入参考架构</h3> 
<p><strong>支持非 3GPP 接入的一般概念</strong></p> 
<p>5G 核心网络支持通过非 3GPP 接入网络（例如 WLAN 接入）连接 UE。本节中仅描述了部署在 NG-RAN 之<br> 外的非 3GPP 接入网络（称为“独立”非 3GPP 接入）的支持。在此版本的规范中，5G 核心网仅支持不受信任的非<br> 3GPP 访问。<br> **N3IWF 功能：**非 3GPP 接入网络应通过非 3GPP 互通功能（N3IWF）连接到 5G 核心网络。N3IWF 分别通过<br> N2 和 N3 接口连接 5G 核心网 CP 和 UP 功能。<br> N2 和 N3 参考点分别用于将独立的非 3GPP 接入连接到 5G 核心网络控制平面和用户平面功能。在 UE 连接<br> 之后，通过独立的非 3GPP 接入访问 5G 核心网的 UE 应使用 N1 参考点支持具有 5G 核心网控制平面功能的 NAS信令。当 UE 通过 NG-RAN 和独立的非 3GPP 接入连接时，UE 应存在多个 N1 实例，即 NG-RAN 上应有一个 N1实例，非 3GPP 接入上应有一个 N1 实例。</p> 
<p>如果所选择的 N3IWF 与 3GPP 接入位于相同的 PLMN 中，则通过 3GPP 接入和非 3GPP 接入同时连接到<br> PLMN 的相同 5G 核心网络的 UE 将由同一个 AMF 服务。当 UE 连接到 PLMN 的 3GPP 接入时，如果 UE 选择 N3IWF并且 N3IWF 位于与 3GPP 接入的 PLMN 不同的 PLMN 中，例如在不同的 VPLMN 或 HPLMN 中，则服务 UE 由两个 PLMN 分开。UE 注册了两个独立的 AMF，3GPP 接入上的 PDU 会话由 V-SMF 提供服务，不同于通过非 3GPP 接入服务 PDU 会话的 V-SMF。3GPP 接入的 PLMN 选择不依赖于 N3IWF 选择。如果 UE 通过非 3GPP 注册，则UE 独立于 N3IWF 所属的 PLMN 执行 3GPP 接入的 PLMN 选择。<br> UE 应与 N3IWF 建立 IPSec 通道，以通过不可信的非 3GPP 接入连接到 5G 核心网络。在 IPSec 通道建立过程<br> 中，UE 应由 5G 核心网络认证并连接到 5G 核心网络。有关 UE 通过不可信的非 3GPP 接入连接到 5G 核心网络的更多详细信息，我们在后面的核心网流程上会有更详细描述。在 UE 上通过该接入的所有 PDU 会话已经释放或移交给 3GPP 接入之后，应该可以通过非 3GPP 接入维持与 AMF 的 UE NAS 信令连接。<br> 独立非 3GPP 接入上的 N1 NAS 信令应使用与 3GPP 接入的 N1 相同的安全机制进行保护。支持 UE 和 N3IWF<br> 之间的用户平面 QoS 区分。</p> 
<p><strong>非 3GPP 访问的非漫游架构</strong> <img src="https://images2.imgbox.com/8d/8f/t9X7TCtX_o.png" alt="在这里插入图片描述"></p> 
<ul><li>图中的参考架构仅显示直接连接到非 3GPP 接入的架构和网络功能，架构的其他部分与上面<br> 3GPP 内部非漫游架构定义的相同。</li><li>图中的参考架构支持 AMF，SMF 和图中未示出的其他 NF 的基于服务的接口。</li><li>图 中的两个 N2 实例适用于 UE 的单个 AMF，它同时通过 3GPP 接入和非 3GPP 接入连接到同<br> 一个 5G 核心网络。</li><li>当通过 3GPP 接入和非 3GPP 接入建立不同的 PDU 会话时，图 2.2.2.5-1 中的两个 N3 实例可以应用于<br> 不同的 UPF。</li></ul> 
<p><strong>用于非 3GPP 访问的 LBO 漫游架构，与 3GPP 接入相同的 PLMN 中的 N3IWF</strong><br> <img src="https://images2.imgbox.com/2a/32/k0jl0jFb_o.png" alt="在这里插入图片描述"></p> 
<ul><li>图中的参考架构仅显示直接连接以支持非 3GPP 接入的架构和网络功能，架构的其他部分与第2.2 节中定义的相同。</li><li>图中的参考架构支持 AMF，SMF 和图中未示出的其他 NF 的基于服务的接口。</li><li>图中的两个 N2 实例适用于 UE 的单个 AMF，UE 通过 3GPP 接入和非 3GPP 接入同时连接到5G 核心网络。</li><li>当在 3GPP 接入和非 3GPP 接入上建立不同的 PDU 会话时，图 2.2.2.5-2 中的两个 N3 实例可以应用于<br> 不同的 UPF。</li></ul> 
<p><strong>用于非 3GPP 访问的归属路由漫游架构，N3IWF 在与 3GPP 接入相同的 PLMN 中</strong><br> <img src="https://images2.imgbox.com/6d/cb/ExR5jh6O_o.png" alt="在这里插入图片描述"></p> 
<ul><li>图中的参考架构仅显示直接连接以支持非 3GPP 接入的架构和网络功能，架构的其他部分与第2.2 节中定义的相同。</li><li>图中的两个 N2 实例适用于 UE 的单个 AMF，UE 通过 3GPP 接入和非 3GPP 接入同时连接到5G 核心网络。<br> <strong>用于非 3GPP 访问的 LBO 漫游架构，来自 3GPP 接入的不同 PLMN 中的 N3IWF</strong><br> <img src="https://images2.imgbox.com/6e/23/FIcDPyoj_o.png" alt="在这里插入图片描述"></li><li>图中的参考架构仅显示直接连接以支持非 3GPP 接入的架构和网络功能，架构的其他部分与第2.2 节中定义的相同。</li><li>图中的参考架构支持 AMF，SMF 和图中未示出的其他 NF 的基于服务的接口。</li><li>图中的两个 N2 实例适用于 UE 的两个不同 AMF，UE 通过 3GPP 接入和非 3GPP 接入同时连接到 5G 核心网络。</li></ul> 
<p><strong>用于非 3GPP 访问的归属路由漫游架构，来自 3GPP 接入的不同 PLMN 中的 N3IWF</strong><br> <img src="https://images2.imgbox.com/74/d3/KN7pF6xV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2e/e2/3yPMAkAa_o.png" alt="在这里插入图片描述"></p> 
<ul><li>上两图中的参考架构仅显示了直接连接的架构和网络功能，以支持非 3GPP 接入，并且架构的其他部分与 3GPP 内部架构相同。</li><li>上两图中的两个 N2 实例适用于 UE 的两个不同 AMF，UE 通过 3GPP 接入和非 3GPP<br> 接入同时连接到 5G 核心网络。</li></ul> 
<p><strong>非 3GPP 接入参考点</strong><br> 特定于非 3GPP 接入的参考点的描述：<br> N2，N3，N4，N6：这些在前面已有定义。<br> <strong>Y1</strong> UE 与非 3GPP 接入（例如 WLAN）之间的参考点。这取决于非 3GPP 接入技术，并且不在 3GPP 的范围<br> 内。<br> <strong>Y2</strong> 用于传输 NWu 流量的不可信的非 3GPP 接入和 N3IWF 之间的参考点。<br> NWu UE 和 N3IWF 之间用于在 UE 和 N3IWF 之间建立安全通道的参考点，以便在 UE 和 5G 核心网络之间交换<br> 的控制平面和用户平面通过不可信的非 3GPP 接入安全地传输。</p> 
<h2><a id="4__261"></a>4. 基于服务的接口和参考点</h2> 
<h3><a id="41__262"></a>4.1 基于服务的接口</h3> 
<p>5G 系统架构包含以下基于服务的接口：<br> NAMF：AMF 展示的基于服务的接口。<br> Nsmf：SMF 展示的基于服务的接口。<br> Nnef：NEF 展示的基于服务的接口。<br> NPCF：PCF 展示的基于服务的接口。<br> Nudm：UDM 展示的基于服务的接口。<br> NAF：AF 展示的基于服务的接口。<br> Nnrf：NRF 展示的基于服务的接口。<br> Nnssf：NSSF 展示的基于服务的接口。<br> Nausf：AUSF 展示的基于服务的接口。<br> Nudr：UDR 展示了基于服务的接口。<br> Nudsf：UDSF 展示的基于服务的接口。<br> N5g-EIR：5G-EIR 展示的基于服务的接口。<br> Nnwdaf：NWDAF 展示的基于服务的接口。<br> Nsmsf：SMSF 展示的基于服务的接口。</p> 
<h3><a id="42__278"></a>4.2 参考点</h3> 
<p>5G 系统架构包含以下参考点：<br> N1: UE 和 AMF 之间的参考点。<br> N2: （R）AN 和 AMF 之间的参考点。<br> N3: （R）AN 和 UPF 之间的参考点。<br> N4: SMF 和 UPF 之间的参考点。<br> N6: UPF 和数据网络之间的参考点。<br> 本规范的版本中未指定充当上行链路分类器的 UPF 与本地数据网络之间的 N6 的流量转发细节。<br> N9: 两个 UPF 之间的参考点。<br> 以下参考点显示了 NF 中 NF 服务之间存在的相互作用。这些参考点通过相应的基于 NF 服务的接口并通过指定所<br> 识别的用户和生产者 NF 服务以及它们的交互来实现，以便实现特定的系统过程。<br> N5: PCF 和 AF 之间的参考点。<br> N7: SMF 和 PCF 之间的参考点。<br> N24: 访问网络中的 PCF 与归属网络中的 PCF 之间的参考点。<br> N8: UDM 和 AMF 之间的参考点。<br> N10: UDM 和 SMF 之间的参考点。<br> N11: AMF 和 SMF 之间的参考点。<br> N12: AMF 和 AUSF 之间的参考点。<br> N13: UDM 和认证服务器之间的参考点用于 AUSF。<br> N14: 两个 AMF 之间的参考点。<br> N15: 在非漫游场景的情况下 PCF 和 AMF 之间的参考点，在访问网络中的 PCF 和在漫游场景的情况下的 AMF。<br> N16: 两个 SMF 之间的参考点（在访问网络中的 SMF 和归属网络中的 SMF 之间的漫游情况下）。<br> N17: AMF 和 5G-EIR 之间的参考点。<br> N18: 任何 NF 和 UDSF 之间的参考点。<br> N22: AMF 和 NSSF 之间的参考点。<br> N23: PCF 和 NWDAF 之间的参考点。<br> N24: NSSF 和 NWDAF 之间的参考点。<br> N27: 访问网络中的 NRF 与归属网络中的 NRF 之间的参考点。<br> N31: 访问网络中的 NSSF 与归属网络中的 NSSF 之间的参考点。<br> 在某些情况下，可能需要将几个 NF 相互关联以服务于 UE。</p> 
<p>除了上面的参考点之外，SMF 和计费系统（CDF 和 OCS）之间还有接口/参考点。在本说明书的架构图示中未描<br> 绘参考点。<br> N32: 拜访网络中的 SEPP 与归属网络中的 SEPP 之间的参考点。<br> N33: NEF 和 AF 之间的参考点。<br> N40: SMF 和 CHF 之间的参考点。<br> N50: AMF 和 CBCF 之间的参考点。</p> 
<p><strong>参考点支持 NAS 上的 SMS</strong><br> N1: 通过 NAS 在 UE 和 AMF 之间进行 SMS 传输的参考点。<br> 以下参考点通过基于服务的接口实现：<br> N8: AMF 和 UDM 之间的 SMS 用户数据检索的参考点。<br> N20: AMF 和 SMS 功能之间 SMS 传输的参考点。<br> N21: SMS 功能地址注册管理和 SMS 管理 SMS 功能和 UDM 之间的用户数据检索的参考点。</p> 
<hr> 
<h2><a id="_325"></a>总结</h2> 
<p>持续更新中…</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/729b69cffbee856b7fcbd84990a2c73b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Python GUI库】六个图形用户界面库优缺点及实例预览</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23690b06edf0bb8fb5142703994d7586/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BI软件概述以及FineBI安装并连接Hive（包含安装包和插件）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>