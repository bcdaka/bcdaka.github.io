<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>多表联合的查询（实例）、对于前端返回数据有很多表，可以分开操作、debug调试教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5042cb9b9fed2fdb2803b0ab53d50e6a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="多表联合的查询（实例）、对于前端返回数据有很多表，可以分开操作、debug调试教程">
  <meta property="og:description" content="2024.7.13 一、 对于多表的更深层的认识1. 认识2. 多表联合查询的列子：3. 对于多表查询的进一步认识4. 在实现功能的时候，原本对于省市县这样的表，对于项目的要求，是直接全部查询出来，然后开始使用，但我想着能不能直接用树形结构来操作，然后通过递归的形式来实现，让我们看看我的成果！！4.1 其他的都不看了，直接看service：4.2 解释 for (addDistrictDTO area : allDistrict)4.3 成果！ 二、 新增1. 先看需求！2. 新增的分析（查询和上面大差不差，直接返回就行，就不提了）3. 开始开发！！4. 对于不分开，直接进行插入，我没弄出来，一直报错，有机会我会写在这，如果真有人看，能指点我一下！！！5. 优化我的代码（递归，以及两个sql操作） 三、debug调试1. 第二步，debug启动！2. 第一步，对于错误的方法和地方打断点，查看当时的值和状态。（不用像我这样，哈哈哈，我这太夸张了）3. 第三步，通过这些按钮进行控制4. 查看数据 四、感谢大佬们的文章给我的提示，也感谢该死的GPT！！五、感悟 一、 对于多表的更深层的认识 1. 认识 我今天早上，基本上一直都在进行查询的书写，写了四五个查询的接口吧，根据着页面和F12进行推断，我需要哪些表，一开始很慢，因为要去找对应的字段，需要自己写xml。后面结合gpt就快很多了（不要依赖gpt，我就是因为太依赖gpt，导致于我在一个逻辑上，没有仔细想，出错了，就问他，他给我建议，离我最初的逻辑越来越偏！！！gpt只是工具。）
2. 多表联合查询的列子： &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt; &lt;!DOCTYPE mapper PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34; &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt; &lt;mapper namespace=&#34;com.hengyin.ship.mapper.AddMapper&#34;&gt; &lt;!-- Result Map 定义 --&gt; &lt;resultMap id=&#34;MaterialsResultMap&#34; type=&#34;com.hengyin.ship.domain.Materials&#34;&gt; &lt;result property=&#34;outTermShipBomNo&#34; column=&#34;out_term_ship_bom_no&#34; /&gt; &lt;result property=&#34;outTermShipBomName&#34; column=&#34;out_term_ship_bom_name&#34; /&gt; &lt;result property=&#34;outTermTypeName&#34; column=&#34;out_term_type_name&#34; /&gt; &lt;result property=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-13T21:59:10+08:00">
    <meta property="article:modified_time" content="2024-07-13T21:59:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">多表联合的查询（实例）、对于前端返回数据有很多表，可以分开操作、debug调试教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>2024.7.13</h4> 
 <ul><li><a href="#__1" rel="nofollow">一、 对于多表的更深层的认识</a></li><li><ul><li><a href="#1__2" rel="nofollow">1. 认识</a></li><li><a href="#2__4" rel="nofollow">2. 多表联合查询的列子：</a></li><li><a href="#3__117" rel="nofollow">3. 对于多表查询的进一步认识</a></li><li><a href="#4__121" rel="nofollow">4. 在实现功能的时候，原本对于省市县这样的表，对于项目的要求，是直接全部查询出来，然后开始使用，但我想着能不能直接用树形结构来操作，然后通过递归的形式来实现，让我们看看我的成果！！</a></li><li><a href="#41_service_122" rel="nofollow">4.1 其他的都不看了，直接看service：</a></li><li><a href="#42__for_addDistrictDTO_area__allDistrict_179" rel="nofollow">4.2 解释 for (addDistrictDTO area : allDistrict)</a></li><li><a href="#43__190" rel="nofollow">4.3 成果！</a></li></ul> 
  </li><li><a href="#__242" rel="nofollow">二、 新增</a></li><li><ul><li><a href="#1__243" rel="nofollow">1. 先看需求！</a></li><li><a href="#2___245" rel="nofollow">2. 新增的分析（查询和上面大差不差，直接返回就行，就不提了）</a></li><li><a href="#3___297" rel="nofollow">3. 开始开发！！</a></li><li><a href="#4__398" rel="nofollow">4. 对于不分开，直接进行插入，我没弄出来，一直报错，有机会我会写在这，如果真有人看，能指点我一下！！！</a></li><li><a href="#5_sql_399" rel="nofollow">5. 优化我的代码（递归，以及两个sql操作）</a></li></ul> 
  </li><li><a href="#debug_400" rel="nofollow">三、debug调试</a></li><li><ul><li><a href="#1_debug_401" rel="nofollow">1. 第二步，debug启动！</a></li><li><a href="#2__403" rel="nofollow">2. 第一步，对于错误的方法和地方打断点，查看当时的值和状态。（不用像我这样，哈哈哈，我这太夸张了）</a></li><li><a href="#3__405" rel="nofollow">3. 第三步，通过这些按钮进行控制</a></li><li><a href="#4___407" rel="nofollow">4. 查看数据</a></li></ul> 
  </li><li><a href="#GPT_409" rel="nofollow">四、感谢大佬们的文章给我的提示，也感谢该死的GPT！！</a></li><li><a href="#_416" rel="nofollow">五、感悟</a></li></ul> 
</div> 
<p></p> 
<h2><a id="__1"></a>一、 对于多表的更深层的认识</h2> 
<h3><a id="1__2"></a>1. 认识</h3> 
<p>我今天早上，基本上一直都在进行查询的书写，写了四五个查询的接口吧，根据着页面和F12进行推断，我需要哪些表，一开始很慢，因为要去找对应的字段，需要自己写xml。后面结合gpt就快很多了（<strong>不要依赖gpt，我就是因为太依赖gpt，导致于我在一个逻辑上，没有仔细想，出错了，就问他，他给我建议，离我最初的逻辑越来越偏！！！gpt只是工具。</strong>）</p> 
<h3><a id="2__4"></a>2. 多表联合查询的列子：</h3> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token punctuation">?</span><span class="token class-name">xml</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token punctuation">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper
        PUBLIC <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>mapper <span class="token keyword">namespace</span><span class="token operator">=</span><span class="token string">"com.hengyin.ship.mapper.AddMapper"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Result Map 定义 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">resultMap</span> id<span class="token operator">=</span><span class="token string">"MaterialsResultMap"</span> type<span class="token operator">=</span><span class="token string">"com.hengyin.ship.domain.Materials"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">result</span> property<span class="token operator">=</span><span class="token string">"outTermShipBomNo"</span> column<span class="token operator">=</span><span class="token string">"out_term_ship_bom_no"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">result</span> property<span class="token operator">=</span><span class="token string">"outTermShipBomName"</span> column<span class="token operator">=</span><span class="token string">"out_term_ship_bom_name"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">result</span> property<span class="token operator">=</span><span class="token string">"outTermTypeName"</span> column<span class="token operator">=</span><span class="token string">"out_term_type_name"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">result</span> property<span class="token operator">=</span><span class="token string">"outModelOuterName"</span> column<span class="token operator">=</span><span class="token string">"out_model_outer_name"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">result</span> property<span class="token operator">=</span><span class="token string">"outModelInnerName"</span> column<span class="token operator">=</span><span class="token string">"out_model_inner_name"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 查询语句定义 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">select</span> id<span class="token operator">=</span><span class="token string">"selectMaterials"</span> resultMap<span class="token operator">=</span><span class="token string">"MaterialsResultMap"</span><span class="token operator">&gt;</span>
        SELECT
            t1<span class="token punctuation">.</span>out_term_ship_bom_no<span class="token punctuation">,</span>
            t1<span class="token punctuation">.</span>out_term_ship_bom_name<span class="token punctuation">,</span>
            t1<span class="token punctuation">.</span>out_term_type_name<span class="token punctuation">,</span>
            t1<span class="token punctuation">.</span>out_model_outer_name<span class="token punctuation">,</span>
            t1<span class="token punctuation">.</span>out_model_inner_name
        FROM
            om_term_info t1
                JOIN
            out_term_ship t2 ON t1<span class="token punctuation">.</span>out_term_ship_bom_no <span class="token operator">=</span> t2<span class="token punctuation">.</span>bom_no
                JOIN
            out_bom_info t3 ON t1<span class="token punctuation">.</span>out_term_ship_bom_name <span class="token operator">=</span> t3<span class="token punctuation">.</span>bom_name
                JOIN
            out_term_type t4 ON t1<span class="token punctuation">.</span>out_term_type_name <span class="token operator">=</span> t4<span class="token punctuation">.</span>name
                JOIN
            out_model_outer t5 ON t1<span class="token punctuation">.</span>out_model_outer_name <span class="token operator">=</span> t5<span class="token punctuation">.</span>model_outer
                JOIN
            out_model_inner t6 ON t1<span class="token punctuation">.</span>out_model_inner_name <span class="token operator">=</span> t6<span class="token punctuation">.</span>model_inner
        WHERE
            t1<span class="token punctuation">.</span>out_term_ship_bom_no <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>outTermShipBomNo<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">select</span><span class="token operator">&gt;</span>




    <span class="token operator">&lt;</span><span class="token class-name">insert</span> id<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>
        INSERT <span class="token return-type class-name">INTO</span> om_term_info <span class="token return-type class-name"><span class="token punctuation">(</span>
            term_sn<span class="token punctuation">,</span>
            out_term_ship_bom_no<span class="token punctuation">,</span>
            out_term_ship_bom_name<span class="token punctuation">,</span>
            out_term_type_name<span class="token punctuation">,</span>
            out_model_outer_name<span class="token punctuation">,</span>
            out_model_inner_name<span class="token punctuation">,</span>
            out_custom_info_name<span class="token punctuation">,</span>
            out_sales_contract_sales_uid<span class="token punctuation">,</span>
            sub_branch_contacts<span class="token punctuation">,</span>
            out_region_id<span class="token punctuation">,</span>
            out_region_name<span class="token punctuation">,</span>
            out_region_parent_code<span class="token punctuation">,</span>
            ship_state<span class="token punctuation">,</span>
            out_term_ship_ship_time<span class="token punctuation">,</span>
            out_term_ship_take_address<span class="token punctuation">,</span>
            branch_name<span class="token punctuation">,</span>
            sub_branch_tel<span class="token punctuation">,</span>
            out_logistics_provider_info_id<span class="token punctuation">,</span>
            out_logistics_provider_info_name
        <span class="token punctuation">)</span></span>
        VALUES <span class="token punctuation">(</span>
                   <span class="token preprocessor property">#{termSn},</span>
                   <span class="token preprocessor property">#{outTermShipBomNo},</span>
                   <span class="token preprocessor property">#{outTermShipBomName},</span>
                   <span class="token preprocessor property">#{outTermTypeName},</span>
                   <span class="token preprocessor property">#{outModelOuterName},</span>
                   <span class="token preprocessor property">#{outModelInnerName},</span>
                   <span class="token preprocessor property">#{customName},</span>
                   <span class="token preprocessor property">#{salesUid},</span>
                   <span class="token preprocessor property">#{code},</span>
                   <span class="token preprocessor property">#{name},</span>
                    <span class="token preprocessor property">#{parentCode}</span>
                   <span class="token preprocessor property">#{shipState},</span>
                   <span class="token preprocessor property">#{shipTime, jdbcType=TIMESTAMP},</span>
                   <span class="token preprocessor property">#{takeAddress},</span>
                   <span class="token preprocessor property">#{branchName},</span>
                   <span class="token preprocessor property">#{bankContacts},</span>
                   <span class="token preprocessor property">#{bankTel},</span>
                   <span class="token preprocessor property">#{LoCode},</span>
                   <span class="token preprocessor property">#{LoName}</span>
               <span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">insert</span> id<span class="token operator">=</span><span class="token string">"addDTO"</span><span class="token operator">&gt;</span>
        INSERT <span class="token return-type class-name">INTO</span> om_term_info <span class="token return-type class-name"><span class="token punctuation">(</span>
            term_sn<span class="token punctuation">,</span> out_term_ship_bom_no<span class="token punctuation">,</span> out_term_ship_bom_name<span class="token punctuation">,</span>
            out_term_type_name<span class="token punctuation">,</span> out_model_outer_name<span class="token punctuation">,</span> out_model_inner_name<span class="token punctuation">,</span>
            custom_num<span class="token punctuation">,</span> out_sales_contract_sales_uid<span class="token punctuation">,</span> ship_state<span class="token punctuation">,</span> out_term_ship_ship_time<span class="token punctuation">,</span>
            out_term_ship_take_address<span class="token punctuation">,</span> branch_name<span class="token punctuation">,</span> sub_branch_contacts<span class="token punctuation">,</span> sub_branch_tel<span class="token punctuation">,</span>
            out_logistics_provider_info_name
        <span class="token punctuation">)</span></span> VALUES <span class="token punctuation">(</span>
                     <span class="token preprocessor property">#{termSn}, #{outTermShipBomNo}, #{outTermShipBomName},</span>
                     <span class="token preprocessor property">#{outTermTypeName}, #{outModelOuterName}, #{outModelInnerName},</span>
                     <span class="token preprocessor property">#{customName}, #{salesUid}, #{shipState}, #{shipTime},</span>
                     <span class="token preprocessor property">#{takeAddress}, #{branchName}, #{bankContacts}, #{bankTel},</span>
                     <span class="token preprocessor property">#{loName}</span>
                 <span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">update</span> id<span class="token operator">=</span><span class="token string">"addDistrict"</span><span class="token operator">&gt;</span>
        UPDATE om_term_info
        <span class="token class-name">SET</span>
            out_region_id <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>code<span class="token punctuation">}</span><span class="token punctuation">,</span>
            out_region_name <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span><span class="token punctuation">,</span>
            out_region_parent_code <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>parentCode<span class="token punctuation">}</span>
        <span class="token class-name">WHERE</span> term_sn <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>termSn<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>update<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="3__117"></a>3. 对于多表查询的进一步认识</h3> 
<p>我一直对于这种关联表和基础表认识的不是特别透彻，当我操作的一层表里有和基础表一样的数据的时候，我在想，他们两个关联，是不是证明，他们就会数据共享，我修改一个另一个也会修改？那我到底该操作哪个表？底层表还是我的一层表。（虽然现在我说出来，你可能会觉得，这不肯定是一层表吗？但我确实绕进去了，哈哈哈）<br> 然后开始理清楚，我可以从底层表里拿到数据，返回，也能从一层表拿啊，<strong>但底层表很多都是提供的公共数据，虽然我们小组成员之间会使用同一张表，但我们创建的数据，和修改的数据，不应该去修改底层表，而是应该修改自己的主表（主要操作的表）</strong>，比如我现在进行发货管理，对于发货信息表和信息台账表，**我看了一下，信息台账表里我需要的数据会更多，应该定为主表。**所以，在后面新增操作的时候，都是直接操作自己的一层表，<strong>对于查询的话，可能两个都会使用到。</strong></p> 
<h3><a id="4__121"></a>4. 在实现功能的时候，原本对于省市县这样的表，对于项目的要求，是直接全部查询出来，然后开始使用，但我想着能不能直接用树形结构来操作，然后通过递归的形式来实现，让我们看看我的成果！！</h3> 
<h3><a id="41_service_122"></a>4.1 其他的都不看了，直接看service：</h3> 
<pre><code class="prism language-csharp">@Service
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddServiceImpl</span> <span class="token return-type class-name">implements</span> AddService <span class="token punctuation">{<!-- --></span>
@Autowired
<span class="token keyword">private</span> <span class="token class-name">AddMapper</span> addMapper<span class="token punctuation">;</span>


    @Override
    <span class="token keyword">public</span> <span class="token return-type class-name">addLogistics</span> <span class="token function">selectLogistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> addMapper<span class="token punctuation">.</span><span class="token function">selectLogistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 构建层级结构的方法</span>
    <span class="token keyword">private</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>addDistrictDTO<span class="token punctuation">&gt;</span></span> <span class="token function">buildHierarchy</span><span class="token punctuation">(</span><span class="token class-name">List<span class="token punctuation">&lt;</span>addDistrictDTO<span class="token punctuation">&gt;</span></span> allDistrict<span class="token punctuation">,</span> <span class="token class-name">String</span> parentCode<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//这里开始进入方法，传入的是我们的allDistrict（含值的对象），和parentcode的值</span>
        <span class="token class-name">List<span class="token punctuation">&lt;</span>addDistrictDTO<span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ArrayList<span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//定义一个集合 result用于存放结果</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Building hierarchy for parentCode: "</span> <span class="token operator">+</span> parentCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 打印当前递归层级的父节点代码</span>

        <span class="token comment">// 遍历所有的地区对象</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">addDistrictDTO</span> area <span class="token punctuation">:</span> allDistrict<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Checking area: "</span> <span class="token operator">+</span> area<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", parentCode: "</span> <span class="token operator">+</span> area<span class="token punctuation">.</span><span class="token function">getParent_code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 打印正在检查的地区代码和其父节点代码</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parentCode <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> area<span class="token punctuation">.</span><span class="token function">getParent_code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>parentCode <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> parentCode<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>area<span class="token punctuation">.</span><span class="token function">getParent_code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//  如果是子地区，则递归调用 buildHierarchy 方法，构建子地区的树形结构</span>
                <span class="token class-name">List<span class="token punctuation">&lt;</span>addDistrictDTO<span class="token punctuation">&gt;</span></span> children <span class="token operator">=</span> <span class="token function">buildHierarchy</span><span class="token punctuation">(</span>allDistrict<span class="token punctuation">,</span> area<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 如果子地区列表不为空，将其设置为当前地区的子地区</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>children<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    area<span class="token punctuation">.</span><span class="token function">setChildren</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// 将当前地区加入结果列表</span>
                result<span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 打印当前父节点下构建的结果</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Result for parentCode "</span> <span class="token operator">+</span> parentCode <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    @Override
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>addDistrictDTO<span class="token punctuation">&gt;</span></span> <span class="token function">getAllDistrict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//这个是我们的切入点</span>
        <span class="token class-name">List<span class="token punctuation">&lt;</span>addDistrictDTO<span class="token punctuation">&gt;</span></span> allAllDistrict <span class="token operator">=</span> addMapper<span class="token punctuation">.</span><span class="token function">getAllDistrict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我们先调用getAllDistrict，查出所有的数据包含code，name,parent_id</span>
        <span class="token keyword">return</span> <span class="token function">buildHierarchy</span><span class="token punctuation">(</span>allAllDistrict<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//然后调用我们的递归。最开始的parentcode的值为null</span>
    <span class="token punctuation">}</span>

    @Override
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> addMapper<span class="token punctuation">.</span><span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @Override
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>Materials<span class="token punctuation">&gt;</span></span> <span class="token function">selectMaterials</span><span class="token punctuation">(</span><span class="token class-name">String</span> outTermShipBomNo<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> addMapper<span class="token punctuation">.</span><span class="token function">selectMaterials</span><span class="token punctuation">(</span>outTermShipBomNo<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h3><a id="42__for_addDistrictDTO_area__allDistrict_179"></a>4.2 解释 for (addDistrictDTO area : allDistrict)</h3> 
<p>解释：这段代码中的 for (addDistrictDTO area : allDistrict) 是 Java 中的增强型 for 循环，也称为 for-each 循环。它是一种简化遍历数组或集合的语法形式，其基本结构为：<br> addDistrictDTO 是迭代过程中每个元素的类型。<br> area 是循环每次迭代时，代表集合 allDistrict 中的一个元素。<br> allDistrict 是需要被遍历的集合，其中存储了 addDistrictDTO 类型的对象。</p> 
<pre><code class="prism language-csharp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ElementType</span> element <span class="token punctuation">:</span> collection<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 循环体内的操作</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="43__190"></a>4.3 成果！</h3> 
<pre><code class="prism language-csharp"><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"上海市"</span><span class="token punctuation">,</span>
        <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>
                <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"嘉定区"</span><span class="token punctuation">,</span>
                <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
                <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"贵州省"</span><span class="token punctuation">,</span>
        <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span>
                <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"六盘水市"</span><span class="token punctuation">,</span>
                <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
                <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"5"</span><span class="token punctuation">,</span>
                        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"盘州市"</span><span class="token punctuation">,</span>
                        <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span>
                        <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"6"</span><span class="token punctuation">,</span>
                <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"贵阳市"</span><span class="token punctuation">,</span>
                <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
                <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"7"</span><span class="token punctuation">,</span>
                        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"花溪区"</span><span class="token punctuation">,</span>
                        <span class="token string">"parent_code"</span><span class="token punctuation">:</span> <span class="token string">"6"</span><span class="token punctuation">,</span>
                        <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> 
<h2><a id="__242"></a>二、 新增</h2> 
<h3><a id="1__243"></a>1. 先看需求！</h3> 
<p><img src="https://images2.imgbox.com/84/f2/u8osme4E_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2___245"></a>2. 新增的分析（查询和上面大差不差，直接返回就行，就不提了）</h3> 
<p>首先，我对表进行了修改，因为我在我的基础表上，只有一两个字段没有（偷个懒，写入接口文档找关联吧），然后开始分析，因为返回的数据Json为：（这个json写的也真费劲，让gpt写，写的一点都不匹配！！！一定先修改json对于属性。）</p> 
<pre><code class="prism language-csharp"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"termSn"</span><span class="token punctuation">:</span> <span class="token string">"21"</span><span class="token punctuation">,</span>
    <span class="token string">"outTermShipBomNo"</span><span class="token punctuation">:</span> <span class="token string">"BOM123456"</span><span class="token punctuation">,</span>
    <span class="token string">"outTermShipBomName"</span><span class="token punctuation">:</span> <span class="token string">"Bom Name"</span><span class="token punctuation">,</span>
    <span class="token string">"outTermTypeName"</span><span class="token punctuation">:</span> <span class="token string">"Type Name"</span><span class="token punctuation">,</span>
    <span class="token string">"outModelOuterName"</span><span class="token punctuation">:</span> <span class="token string">"Outer Model Name"</span><span class="token punctuation">,</span>
    <span class="token string">"outModelInnerName"</span><span class="token punctuation">:</span> <span class="token string">"Inner Model Name"</span><span class="token punctuation">,</span>
    <span class="token string">"customName"</span><span class="token punctuation">:</span> <span class="token string">"Customer Name"</span><span class="token punctuation">,</span>
    <span class="token string">"salesUid"</span><span class="token punctuation">:</span> <span class="token number">1001</span><span class="token punctuation">,</span>
    <span class="token string">"phoneNumber"</span><span class="token punctuation">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>
    <span class="token string">"shipState"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"shipTime"</span><span class="token punctuation">:</span> <span class="token string">"2024-07-13"</span><span class="token punctuation">,</span>
    <span class="token string">"takeAddress"</span><span class="token punctuation">:</span> <span class="token string">"123 Shipping Address"</span><span class="token punctuation">,</span>
    <span class="token string">"branchName"</span><span class="token punctuation">:</span> <span class="token string">"Branch Name"</span><span class="token punctuation">,</span>
    <span class="token string">"bankContacts"</span><span class="token punctuation">:</span> <span class="token string">"Bank Contacts"</span><span class="token punctuation">,</span>
    <span class="token string">"bankTel"</span><span class="token punctuation">:</span> <span class="token string">"0987654321"</span><span class="token punctuation">,</span>
    <span class="token string">"loCode"</span><span class="token punctuation">:</span> <span class="token string">"LOG123"</span><span class="token punctuation">,</span>
    <span class="token string">"loName"</span><span class="token punctuation">:</span> <span class="token string">"Logistics Name"</span><span class="token punctuation">,</span>
    <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"110000"</span><span class="token punctuation">,</span>
            <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Beijing"</span><span class="token punctuation">,</span>
            <span class="token string">"parentCode"</span><span class="token punctuation">:</span> <span class="token string">"000000"</span><span class="token punctuation">,</span>
            <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"110100"</span><span class="token punctuation">,</span>
                    <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Beijing City"</span><span class="token punctuation">,</span>
                    <span class="token string">"parentCode"</span><span class="token punctuation">:</span> <span class="token string">"110000"</span><span class="token punctuation">,</span>
                    <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"120000"</span><span class="token punctuation">,</span>
            <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Tianjin"</span><span class="token punctuation">,</span>
            <span class="token string">"parentCode"</span><span class="token punctuation">:</span> <span class="token string">"000000"</span><span class="token punctuation">,</span>
            <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"120100"</span><span class="token punctuation">,</span>
                    <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Tianjin City"</span><span class="token punctuation">,</span>
                    <span class="token string">"parentCode"</span><span class="token punctuation">:</span> <span class="token string">"120000"</span><span class="token punctuation">,</span>
                    <span class="token string">"children"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3___297"></a>3. 开始开发！！</h3> 
<p>对于我们传回后端进行处理的数据里，有一个树形结构（也不知道我犟什么，不用这个早写完了），开始进行设计。<br> 我想到，我定义一个总的类（包含所有的属性），然后用行政区域的DTO把树形结构拿走，其他的再封装为一个DTO进行操作。然后实体类的DTO直接进行插入操作，然后行政区域的根据SN进行修改，开始操作！对了，我首先想到的就是 BeanUtils.copyProperties（a,b）用大去赋小，这样就可以把不用的省去，就不用stream流了。<br> 首先，树形数据也是需要进行递归把数据拿出来，插入到表里面，那我们老规矩，直接看service：</p> 
<pre><code class="prism language-csharp">   @Transactional
    @Override
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">add</span><span class="token punctuation">(</span><span class="token class-name">AddPage</span> addPage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AddPageDTO</span> addPageDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">AddPageDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Received addPage termSn: "</span> <span class="token operator">+</span> addPage<span class="token punctuation">.</span><span class="token function">getTermSn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取 termSn 并设置到 addPage 和 addPageDTO</span>
        <span class="token class-name">String</span> termSn <span class="token operator">=</span> addPage<span class="token punctuation">.</span><span class="token function">getTermSn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        addDistrict<span class="token punctuation">.</span><span class="token function">settermSn</span><span class="token punctuation">(</span>termSn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        addPageDTO<span class="token punctuation">.</span><span class="token function">setTermSn</span><span class="token punctuation">(</span>termSn<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">addDistrict</span> addDistrict <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">addDistrict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        BeanUtils<span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>addPage<span class="token punctuation">,</span> addPageDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span><span class="token keyword">out</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Received addPageDTO termSn: "</span> <span class="token operator">+</span> addPageDTO<span class="token punctuation">.</span><span class="token function">getTermSn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        BeanUtils<span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>addPage<span class="token punctuation">,</span> addDistrict<span class="token punctuation">)</span><span class="token punctuation">;</span>
        addDistrict<span class="token punctuation">.</span><span class="token function">setTermSn</span><span class="token punctuation">(</span>termSn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里把sn放到addDistrict中，下面查不到！！！</span>
        <span class="token comment">// 检查 termSn 字段是否有值</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>addPageDTO<span class="token punctuation">.</span><span class="token function">getTermSn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"termSn cannot be null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 插入主记录</span>
        addMapper<span class="token punctuation">.</span><span class="token function">addDTO</span><span class="token punctuation">(</span>addPageDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">addDistrictTree</span><span class="token punctuation">(</span>addPage<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> termSn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传递 termSn</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">addDistrictTree</span><span class="token punctuation">(</span><span class="token class-name">List<span class="token punctuation">&lt;</span>addDistrict<span class="token punctuation">&gt;</span></span> districts<span class="token punctuation">,</span> <span class="token class-name">String</span> termSn<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">addDistrict</span> district <span class="token punctuation">:</span> districts<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

            district<span class="token punctuation">.</span><span class="token function">setTermSn</span><span class="token punctuation">(</span>termSn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置 termSn</span>
            <span class="token comment">// 插入子记录</span>
            addMapper<span class="token punctuation">.</span><span class="token function">addDistrict</span><span class="token punctuation">(</span>district<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>district<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>district<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">addDistrictTree</span><span class="token punctuation">(</span>district<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> district<span class="token punctuation">.</span><span class="token function">getTermSn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传递当前节点的 termSn</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>然后就是XML！：</p> 
<pre><code class="prism language-csharp"> <span class="token operator">&lt;</span><span class="token class-name">insert</span> id<span class="token operator">=</span><span class="token string">"addDTO"</span><span class="token operator">&gt;</span>
        INSERT <span class="token return-type class-name">INTO</span> om_term_info <span class="token return-type class-name"><span class="token punctuation">(</span>
            term_sn<span class="token punctuation">,</span> out_term_ship_bom_no<span class="token punctuation">,</span> out_term_ship_bom_name<span class="token punctuation">,</span>
            out_term_type_name<span class="token punctuation">,</span> out_model_outer_name<span class="token punctuation">,</span> out_model_inner_name<span class="token punctuation">,</span>
            custom_num<span class="token punctuation">,</span> out_sales_contract_sales_uid<span class="token punctuation">,</span> ship_state<span class="token punctuation">,</span> out_term_ship_ship_time<span class="token punctuation">,</span>
            out_term_ship_take_address<span class="token punctuation">,</span> branch_name<span class="token punctuation">,</span> sub_branch_contacts<span class="token punctuation">,</span> sub_branch_tel<span class="token punctuation">,</span>
            out_logistics_provider_info_name
        <span class="token punctuation">)</span></span> VALUES <span class="token punctuation">(</span>
                     <span class="token preprocessor property">#{termSn}, #{outTermShipBomNo}, #{outTermShipBomName},</span>
                     <span class="token preprocessor property">#{outTermTypeName}, #{outModelOuterName}, #{outModelInnerName},</span>
                     <span class="token preprocessor property">#{customName}, #{salesUid}, #{shipState}, #{shipTime},</span>
                     <span class="token preprocessor property">#{takeAddress}, #{branchName}, #{bankContacts}, #{bankTel},</span>
                     <span class="token preprocessor property">#{loName}</span>
                 <span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">update</span> id<span class="token operator">=</span><span class="token string">"addDistrict"</span><span class="token operator">&gt;</span>
        UPDATE om_term_info
        <span class="token class-name">SET</span>
            out_region_id <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>code<span class="token punctuation">}</span><span class="token punctuation">,</span>
            out_region_name <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span><span class="token punctuation">,</span>
            out_region_parent_code <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>parentCode<span class="token punctuation">}</span>
        <span class="token class-name">WHERE</span> term_sn <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>termSn<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>update<span class="token operator">&gt;</span>
</code></pre> 
<p>这样就可以完美插入了，然后再让gpt生成一条查询这些语句的sql，来查看我们是否完成插入。</p> 
<pre><code class="prism language-csharp"><span class="token class-name">SELECT</span>
    term_sn<span class="token punctuation">,</span>
    out_term_ship_bom_no<span class="token punctuation">,</span>
    out_term_ship_bom_name<span class="token punctuation">,</span>
    out_term_type_name<span class="token punctuation">,</span>
    out_model_outer_name<span class="token punctuation">,</span>
    out_model_inner_name<span class="token punctuation">,</span>
    custom_num <span class="token class-name">AS</span> custom_name<span class="token punctuation">,</span> <span class="token operator">--</span> 注意这里假设myBatis中的#<span class="token punctuation">{<!-- --></span>customName<span class="token punctuation">}</span>对应于数据库中的custom_num
    out_sales_contract_sales_uid <span class="token class-name">AS</span> sales_uid<span class="token punctuation">,</span>
    ship_state<span class="token punctuation">,</span>
    out_term_ship_ship_time <span class="token class-name">AS</span> ship_time<span class="token punctuation">,</span>
    out_term_ship_take_address <span class="token class-name">AS</span> take_address<span class="token punctuation">,</span>
    branch_name<span class="token punctuation">,</span>
    sub_branch_contacts<span class="token punctuation">,</span>
    sub_branch_tel<span class="token punctuation">,</span>
    out_logistics_provider_info_name <span class="token class-name">AS</span> lo_name<span class="token punctuation">,</span>
    out_region_id<span class="token punctuation">,</span>
    out_region_name<span class="token punctuation">,</span>
    out_region_parent_code
FROM
    om_term_info
<span class="token class-name">WHERE</span>
        term_sn <span class="token operator">=</span> '<span class="token number">20</span>'<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/24/4f/B1affBVP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4__398"></a>4. 对于不分开，直接进行插入，我没弄出来，一直报错，有机会我会写在这，如果真有人看，能指点我一下！！！</h3> 
<h3><a id="5_sql_399"></a>5. 优化我的代码（递归，以及两个sql操作）</h3> 
<h2><a id="debug_400"></a>三、debug调试</h2> 
<h3><a id="1_debug_401"></a>1. 第二步，debug启动！</h3> 
<p><img src="https://images2.imgbox.com/8b/88/EFuAtpmx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__403"></a>2. 第一步，对于错误的方法和地方打断点，查看当时的值和状态。（不用像我这样，哈哈哈，我这太夸张了）</h3> 
<p><img src="https://images2.imgbox.com/d3/2d/bY9lfPgy_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__405"></a>3. 第三步，通过这些按钮进行控制</h3> 
<p><img src="https://images2.imgbox.com/31/c0/HhWsYlkp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4___407"></a>4. 查看数据</h3> 
<p><img src="https://images2.imgbox.com/c9/54/IBbsm9hO_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="GPT_409"></a>四、感谢大佬们的文章给我的提示，也感谢该死的GPT！！</h2> 
<p><a href="https://blog.csdn.net/humanpose/article/details/120498991#:~:text=IDEA%E4%B8%AD%E7%9A%84debug%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A71%EF%BC%9AShow%20Execution%20Point%20%28Alt%20+%20F10%29%EF%BC%9A%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%9A%84%E5%85%89%E6%A0%87%E5%9C%A8%E5%85%B6%E5%AE%83%E8%A1%8C%E6%88%96%E5%85%B6%E5%AE%83%E9%A1%B5%E9%9D%A2%EF%BC%8C%E7%82%B9%E5%87%BB%E8%BF%99%E4%B8%AA%E6%8C%89%E9%92%AE%E5%8F%AF%E8%B7%B3%E8%BD%AC%E5%88%B0%E5%BD%93%E5%89%8D%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E7%9A%84%E8%A1%8C%EF%BC%8C%E5%8D%B3%E6%96%AD%E7%82%B9%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%9B2%EF%BC%9AStep%20Over%20%28F8%29%EF%BC%9A%E6%AD%A5%E8%BF%87%EF%BC%8C%E4%B8%80%E8%A1%8C%E4%B8%80%E8%A1%8C%E5%9C%B0%E5%BE%80%E4%B8%8B%E8%B5%B0%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%99%E4%B8%80%E8%A1%8C%E4%B8%8A%E6%9C%89%E6%96%B9%E6%B3%95%E4%B8%8D%E4%BC%9A%E8%BF%9B%E5%85%A5%E6%96%B9%E6%B3%95%EF%BC%9B3%EF%BC%9AStep,Into%20%28F7%29%EF%BC%9A%E5%92%8C2%E5%8A%9F%E8%83%BD%E7%B1%BB%E4%BC%BC%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%BD%93%E5%89%8D%E8%A1%8C%E6%9C%89%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%BF%9B%E5%85%A5%E6%96%B9%E6%B3%95%E5%86%85%E9%83%A8%EF%BC%8C%E4%B8%80%E8%88%AC%E7%94%A8%E4%BA%8E%E8%BF%9B%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E5%86%85%EF%BC%8C%E4%B8%8D%E4%BC%9A%E8%BF%9B%E5%85%A5%E5%AE%98%E6%96%B9%E7%B1%BB%E5%BA%93%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%A6%82%E7%AC%AC25%E8%A1%8C%E7%9A%84put%E6%96%B9%E6%B3%95%EF%BC%9B4%EF%BC%9AForce%20Step%20Into%20%28Alt%20+%20Shift%20+_idea%E8%B7%B3%E5%88%B0%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%96%AD%E7%82%B9">Debug断点调试</a><br> <a href="https://blog.csdn.net/X_Saxon/article/details/113643952">DTO到entity赋值</a></p> 
<h2><a id="_416"></a>五、感悟</h2> 
<p>当你遇到问题的时候，一定要先独立思考，思考不出来，就要考虑换个思路，起来走走，问问别人，不要和gpt死磕，更多的用自己的思维。<br> 还有就是代码规范的问题，写的一点都不规范，命名和方法名称的规范一定要注意。新增模块还有需求，明天再写！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ba0509b6e16362550f65f62b49297524/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入解析【C&#43;&#43; list 容器】：高效数据管理的秘密武器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8eb35dc4734f85f127b539812097c641/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Linux 文件读写&amp;描述符&amp;重定向&amp; Linux 一切皆文件&amp;缓冲区】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>