<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>贪吃蛇游戏 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5f7cd27562d3bb92c152128444567e31/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="贪吃蛇游戏">
  <meta property="og:description" content="贪吃蛇 游戏背景游戏演示游戏目标技术要点Win32API介绍Win32API控制台程序控制台屏幕上的坐标COORDGetStdHandleGetConsoleCursorInfoCONSOLE_CURSOR_INFOSetConsoleCursorInfoSetConsoleCursorPositionGetAsyncKeyState 贪吃蛇游戏设计与分析地图&lt;locale.h&gt;本地化类项setlocale函数宽字符的打印地图坐标 蛇身和食物数据结构设计游戏流程设计 核心逻辑实现分析游戏的主逻辑（test.c）游戏头文件、函数定义、结构体创建（snake.h）游戏的实现（snake.c）游戏的初始化光标定位打印欢迎界面创建地图创建蛇创建食物 游戏运行打印帮助信息暂停下一个是食物吃食物下一个不是食物撞墙撞自己蛇的移动 游戏结束 游戏背景 贪吃蛇是久负盛名的游戏，它也和俄罗斯方块，扫雷等游戏位列经典游戏的行列。
游戏演示 贪吃蛇游戏
游戏目标 使用C语言在Windows环境的控制台中模拟实现经典小游戏贪吃蛇
实现基本的功能：
贪吃蛇地图绘制蛇吃食物的功能（上、下、左、右⽅向键控制蛇的动作）蛇撞墙死亡蛇撞自身死亡计算得分蛇⾝加速、减速暂停游戏 技术要点 C语言、数据结构（链表）、枚举、结构体、动态内存管理、预处理指令、win32API
Win32API介绍 Win32API Windows这个多作业系统除了协调应⽤程序的执行、分配内存、管理资源之外，它同时也是⼀个很大的服务中心，调用这个服务中心的各种服务（每⼀种服务就是⼀个函数），可以帮应用程式达到开启视窗、描绘图形、使用周边设备等目的，由于这些函数服务的对象是应用程序，所以便称之为Application Programming Interface，简称API函数。WIN32API也就Microsoft Windows32位平台的应用程序编程接口。
控制台程序 平常我们运行起来的黑框程序其实就是控制台程序
我们可以使用cmd命令来设置控制台窗口的长宽：设置控制台窗口的大小
#include&lt;stdio.h&gt; #include&lt;windows.h&gt; int main() { system(&#34;mode con cols=30 lines=30&#34;); return 0; } 正常窗口大小：
改变后窗口大小：
也可以通过命令设置控制台窗口的名字：
#include&lt;stdio.h&gt; #include&lt;windows.h&gt; int main() { system(&#34;title 贪吃蛇&#34;); return 0; } 正常窗口名字：
更改后窗口名字：
控制台屏幕上的坐标COORD COORD是WindowsAPI中定义的⼀种结构，表示一个字符在控制台屏幕上的坐标
typedef struct _COORD { SHORT X; SHORT Y; } COORD, *PCOORD; //给坐标赋值： COORD pos = { 10, 15 }; GetStdHandle GetStdHandle是⼀个WindowsAPI函数。它用于从⼀个特定的标准设备（标准输入、标准输出或标准错误）中取得⼀个句柄（用来标识不同设备的数值），使用这个句柄可以操作设备。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-20T10:46:54+08:00">
    <meta property="article:modified_time" content="2024-08-20T10:46:54+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">贪吃蛇游戏</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>贪吃蛇</h4> 
 <ul><li><a href="#_1" rel="nofollow">游戏背景</a></li><li><a href="#_3" rel="nofollow">游戏演示</a></li><li><a href="#_7" rel="nofollow">游戏目标</a></li><li><a href="#_19" rel="nofollow">技术要点</a></li><li><a href="#Win32API_21" rel="nofollow">Win32API介绍</a></li><li><ul><li><a href="#Win32API_22" rel="nofollow">Win32API</a></li><li><a href="#_26" rel="nofollow">控制台程序</a></li><li><a href="#COORD_60" rel="nofollow">控制台屏幕上的坐标COORD</a></li><li><a href="#GetStdHandle_74" rel="nofollow">GetStdHandle</a></li><li><a href="#GetConsoleCursorInfo_87" rel="nofollow">GetConsoleCursorInfo</a></li><li><a href="#CONSOLE_CURSOR_INFO_99" rel="nofollow">CONSOLE_CURSOR_INFO</a></li><li><a href="#SetConsoleCursorInfo_117" rel="nofollow">SetConsoleCursorInfo</a></li><li><a href="#SetConsoleCursorPosition_139" rel="nofollow">SetConsoleCursorPosition</a></li><li><a href="#GetAsyncKeyState_176" rel="nofollow">GetAsyncKeyState</a></li></ul> 
  </li><li><a href="#_189" rel="nofollow">贪吃蛇游戏设计与分析</a></li><li><ul><li><a href="#_190" rel="nofollow">地图</a></li><li><ul><li><a href="#localeh_207" rel="nofollow">&lt;locale.h&gt;本地化</a></li><li><a href="#_216" rel="nofollow">类项</a></li><li><a href="#setlocale_229" rel="nofollow">setlocale函数</a></li><li><a href="#_248" rel="nofollow">宽字符的打印</a></li><li><a href="#_267" rel="nofollow">地图坐标</a></li></ul> 
   </li><li><a href="#_270" rel="nofollow">蛇身和食物</a></li><li><a href="#_275" rel="nofollow">数据结构设计</a></li><li><a href="#_322" rel="nofollow">游戏流程设计</a></li></ul> 
  </li><li><a href="#_324" rel="nofollow">核心逻辑实现分析</a></li><li><ul><li><a href="#testc_326" rel="nofollow">游戏的主逻辑（test.c）</a></li><li><a href="#snakeh_362" rel="nofollow">游戏头文件、函数定义、结构体创建（snake.h）</a></li><li><a href="#snakec_458" rel="nofollow">游戏的实现（snake.c）</a></li><li><ul><li><a href="#_459" rel="nofollow">游戏的初始化</a></li><li><ul><li><a href="#_482" rel="nofollow">光标定位</a></li><li><a href="#_495" rel="nofollow">打印欢迎界面</a></li><li><a href="#_515" rel="nofollow">创建地图</a></li><li><a href="#_544" rel="nofollow">创建蛇</a></li><li><a href="#_586" rel="nofollow">创建食物</a></li></ul> 
    </li><li><a href="#_622" rel="nofollow">游戏运行</a></li><li><ul><li><a href="#_691" rel="nofollow">打印帮助信息</a></li><li><a href="#_705" rel="nofollow">暂停</a></li><li><a href="#_719" rel="nofollow">下一个是食物</a></li><li><a href="#_726" rel="nofollow">吃食物</a></li><li><a href="#_747" rel="nofollow">下一个不是食物</a></li><li><a href="#_768" rel="nofollow">撞墙</a></li><li><a href="#_782" rel="nofollow">撞自己</a></li><li><a href="#_799" rel="nofollow">蛇的移动</a></li></ul> 
    </li><li><a href="#_850" rel="nofollow">游戏结束</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>游戏背景</h2> 
<p>贪吃蛇是久负盛名的游戏，它也和俄罗斯方块，扫雷等游戏位列经典游戏的行列。</p> 
<h2><a id="_3"></a>游戏演示</h2> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="U8E8urO6-1724035265689" frameborder="0" src="https://live.csdn.net/v/embed/418283" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>贪吃蛇游戏</p> 
</div> 
<p></p> 
<h2><a id="_7"></a>游戏目标</h2> 
<p>使用C语言在Windows环境的控制台中模拟实现经典小游戏贪吃蛇<br> 实现基本的功能：</p> 
<ul><li>贪吃蛇地图绘制</li><li>蛇吃食物的功能（上、下、左、右⽅向键控制蛇的动作）</li><li>蛇撞墙死亡</li><li>蛇撞自身死亡</li><li>计算得分</li><li>蛇⾝加速、减速</li><li>暂停游戏</li></ul> 
<h2><a id="_19"></a>技术要点</h2> 
<p>C语言、数据结构（链表）、枚举、结构体、动态内存管理、预处理指令、win32API</p> 
<h2><a id="Win32API_21"></a>Win32API介绍</h2> 
<h3><a id="Win32API_22"></a>Win32API</h3> 
<p><code>Windows</code>这个多作业系统除了协调应⽤程序的执行、分配内存、管理资源之外，它同时也是⼀个很大的服务中心，调用这个服务中心的各种服务（每⼀种服务就是⼀个函数），可以帮应用程式达到开启视窗、描绘图形、使用周边设备等目的，由于这些函数服务的对象是应用程序，所以便称之为<code>Application Programming Interface</code>，简称<code>API</code>函数。<code>WIN32API</code>也就<code>Microsoft Windows32</code>位平台的应用程序编程接口。</p> 
<h3><a id="_26"></a>控制台程序</h3> 
<p>平常我们运行起来的黑框程序其实就是控制台程序<br> 我们可以使用<code>cmd</code>命令来设置控制台窗口的长宽：设置控制台窗口的大小</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;windows.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"mode con cols=30 lines=30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>正常窗口大小：<br> <img src="https://images2.imgbox.com/6f/ca/4QWT4kuU_o.png" alt="在这里插入图片描述"><br> 改变后窗口大小：<br> <img src="https://images2.imgbox.com/0f/1f/ueslv9GR_o.png" alt="在这里插入图片描述"><br> 也可以通过命令设置控制台窗口的名字：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;windows.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"title 贪吃蛇"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>正常窗口名字：<br> <img src="https://images2.imgbox.com/bb/02/yuw2wkXi_o.png" alt="在这里插入图片描述"><br> 更改后窗口名字：<br> <img src="https://images2.imgbox.com/eb/1d/eH2CnD0e_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="COORD_60"></a>控制台屏幕上的坐标COORD</h3> 
<p><code>COORD</code>是<code>WindowsAPI</code>中定义的⼀种结构，表示一个字符在控制台屏幕上的坐标</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_COORD</span> 
<span class="token punctuation">{<!-- --></span>
	SHORT X<span class="token punctuation">;</span>
 	SHORT Y<span class="token punctuation">;</span>
<span class="token punctuation">}</span> COORD<span class="token punctuation">,</span> <span class="token operator">*</span>PCOORD<span class="token punctuation">;</span>

 <span class="token comment">//给坐标赋值：</span>
COORD pos <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="GetStdHandle_74"></a>GetStdHandle</h3> 
<p><code>GetStdHandle</code>是⼀个<code>WindowsAPI</code>函数。它用于从⼀个特定的标准设备（标准输入、标准输出或标准错误）中取得⼀个句柄（用来标识不同设备的数值），使用这个句柄可以操作设备。</p> 
<blockquote> 
 <p>HANDLE GetStdHandle(DWORD nStdHandle);</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/e4/10/evAornIy_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c">HANDLE hOutput <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

<span class="token comment">//获取标准输出的句柄(用来标识不同设备的数值)</span>
hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="GetConsoleCursorInfo_87"></a>GetConsoleCursorInfo</h3> 
<p>检索有关指定控制台屏幕缓冲区的光标大小和可见性的信息<br> <img src="https://images2.imgbox.com/92/73/2J7oq3lf_o.png" alt="在这里插入图片描述"><br> 获取控制台光标信息：</p> 
<pre><code class="prism language-c">HANDLE hOutput <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token comment">//获取标准输出的句柄(用来标识不同设备的数值)</span>
hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>

CONSOLE_CURSOR_INFO CursorInfo<span class="token punctuation">;</span>
<span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> <span class="token operator">&amp;</span>CursorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="CONSOLE_CURSOR_INFO_99"></a>CONSOLE_CURSOR_INFO</h3> 
<p>这个结构体，包含有关控制台游标的信息</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_CONSOLE_CURSOR_INFO</span> <span class="token punctuation">{<!-- --></span>
	DWORD dwSize<span class="token punctuation">;</span>
	BOOL  bVisible<span class="token punctuation">;</span>
<span class="token punctuation">}</span> CONSOLE_CURSOR_INFO<span class="token punctuation">,</span> <span class="token operator">*</span> PCONSOLE_CURSOR_INFO<span class="token punctuation">;</span>
</code></pre> 
<ul><li><code>dwSize</code>，由光标填充的字符单元格的百分比。此值介于1到100之间。光标外观会变化，范围从完全填充单元格到单元底部的⽔平线条。</li><li><code>bVisible</code>，游标的可间性。如果光标可间，则此成员为<code>TRUE</code>。</li></ul> 
<p>隐藏光标：</p> 
<pre><code class="prism language-c">	CursorInfo<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> false<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="SetConsoleCursorInfo_117"></a>SetConsoleCursorInfo</h3> 
<p>设置指定控制台屏幕缓冲区的光标的大小和可见性。</p> 
<pre><code class="prism language-c">BOOL WINAPI <span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>
	HANDLE  hConsoleOutput<span class="token punctuation">,</span>
	<span class="token keyword">const</span> CONSOLE_CURSOR_INFO<span class="token operator">*</span> lpConsoleCursorInfo
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>影藏光标操作:</p> 
<pre><code class="prism language-c">HANDLE hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
CONSOLE_CURSOR_INFO CursorInfo<span class="token punctuation">;</span>
<span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> <span class="token operator">&amp;</span>CursorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取控制台光标信息</span>
CursorInfo<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> false<span class="token punctuation">;</span> <span class="token comment">//隐藏控制台光标</span>
<span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> <span class="token operator">&amp;</span>CursorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置控制台光标状态</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3a/86/Ewze1IiX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="SetConsoleCursorPosition_139"></a>SetConsoleCursorPosition</h3> 
<p>设置指定控制台屏幕缓冲区中的光标位置，我们将想要设置的坐标信息放在<code>COORD</code>类型的<code>pos</code>中，调用<code>SetConsoleCursorPosition</code>函数将光标位置设置到指定的位置。</p> 
<pre><code class="prism language-c">BOOL WINAPI <span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>
	HANDLE hConsoleOutput<span class="token punctuation">,</span>
	COORD  pos
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>改变光标的位置：</p> 
<pre><code class="prism language-c">COORD pos <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
HANDLE hOutput <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token comment">//获取标准输出的句柄(用来标识不同设备的数值)</span>
hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置标准输出上光标的位置为pos</span>
<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/84/MTya76BM_o.png" alt="在这里插入图片描述"><br> 由此，我们可以封装一个定位光标位置的函数SetPos：</p> 
<pre><code class="prism language-c"><span class="token comment">//设置光标的坐标</span>
<span class="token keyword">void</span> <span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token keyword">short</span> x<span class="token punctuation">,</span> <span class="token keyword">short</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	COORD pos <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span><span class="token punctuation">;</span>
	HANDLE hOutput <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token comment">//获取标准输出的句柄(用来标识不同设备的数值)</span>
	hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//设置标准输出上光标的位置为pos</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个函数在实现贪吃蛇时有大用处</p> 
<h3><a id="GetAsyncKeyState_176"></a>GetAsyncKeyState</h3> 
<p>获取按键情况，GetAsyncKeyState的函数原型如下：</p> 
<pre><code class="prism language-c">SHORT <span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span><span class="token keyword">int</span> vKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>将键盘上每个键的虚拟键值传递给函数，函数通过返回值来分辨按键的状态。<br> <code>GetAsyncKeyState</code> 的返回值是<code>short</code>类型，在上⼀次调用<code>GetAsyncKeyState</code> 函数后，如果返回的<code>16</code>位的<code>short</code>数据中，<strong>最高位是<code>1</code></strong>，说明<strong>按键的状态是按下</strong>，如果<strong>最高是<code>0</code></strong>，说明<strong>按键的状态是抬起</strong>；如果<strong>最低位被置为<code>1</code><strong>则说明，该</strong>按键被按过</strong>，否则为0。<br> <strong>判断一个键是否被按过，只需要取最低位，观察是否为1即可</strong>：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">KEY_PRESS</span><span class="token expression"><span class="token punctuation">(</span>VK<span class="token punctuation">)</span>  <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0x1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">)</span></span></span>
</code></pre> 
<h2><a id="_189"></a>贪吃蛇游戏设计与分析</h2> 
<h3><a id="_190"></a>地图</h3> 
<p>初始界面<br> <img src="https://images2.imgbox.com/b8/28/iM8SXZiQ_o.png" alt="在这里插入图片描述"><br> 提示界面<br> <img src="https://images2.imgbox.com/97/08/j4pbFy8B_o.png" alt="在这里插入图片描述"><br> 游戏界面<img src="https://images2.imgbox.com/67/f8/4RnmJtmi_o.png" alt="在这里插入图片描述"><br> 注意事项：</p> 
<ul><li>控制台窗口的坐标，横向的是X轴，从左向右依次增长，纵向是Y轴，从上到下依次增长。</li></ul> 
<p><img src="https://images2.imgbox.com/ac/60/CduBc7To_o.png" alt="在这里插入图片描述"></p> 
<ul><li>在游戏地图上，我们打印墙体使用宽字符：□，打印蛇使用宽字符●，打印食物使用宽字符★，普通的字符是占一个字节的，这类宽字符是占用2个字节。</li></ul> 
<blockquote> 
 <p>C语⾔字符默认是采⽤ASCII编码的，ASCII字符集采用的是单字节编码，且只使用了单字节中的低7位，最高位是没有使用的，可表示为<code>0xxxxxxxx</code>；可以看到，ASCII字符集共包含128个字符，在英语国家中，128个字符是基本够用的，但是，在其他国家语言中，比如，在法语中，字⺟上方有注音符号，它就无法用ASCII码表示。于是，⼀些欧洲国家就决定，利用字节中闲置的最高位编入新的符号。比如，法语中的<code>é</code>的编码为130（⼆进制10000 010）。这样一来，这些欧洲国家使用的编码体系，可以表示最多256个符号。但是，这里又出现了新的问题。不同的国家有不同的字⺟，因此，哪怕它们都使⽤256个符号的编码方式，代表的字母却不⼀样。比如，130在法语编码中代表了<code>é</code>，在希伯来语编码中却代表了字母<code>Gimel( )</code>，在俄语编码中又会代表另⼀个符号。但是不管怎样，所有这些编码方式中，0–127表示的符号是⼀样的，不⼀样的只是128–255的这⼀段。至于亚洲国家的文字，使用的符号就更多了，汉字就多达10万左右。⼀个字节只能表示256种符号，肯定是不够的，就必须使用多个字节表达⼀个符号。比如，简体中文常见的编码方式是<code>GB2312</code>，使用两个字节表示⼀个汉字，所以理论上最多可以表示256x256=65536个符号。</p> 
</blockquote> 
<p>后来为了使C语言适应国家化，C语言的标准中不断加入了国际化的支持。比如：加入和宽字符的类型<code>wchar_t</code> 和宽字符的输入和输出函数，加入和<code>&lt;locale.h&gt;</code>头文件，其中提供了允许程序员针对特定地区（通常是国家或者说某种特定语⾔的地理区域）调整程序行为的函数。</p> 
<h4><a id="localeh_207"></a>&lt;locale.h&gt;本地化</h4> 
<p>&lt;locale.h&gt;提供的函数用于控制C标准库中对于不同的地区会产生不⼀样行为的部分。<br> 在标准可以中，依赖地区的部分有以下几项：</p> 
<ul><li>数字量的格式</li><li>货币量的格式</li><li>字符集</li><li>⽇期和时间的表示形式</li></ul> 
<h4><a id="_216"></a>类项</h4> 
<p>通过修改地区，程序可以改变它的行为来适应世界的不同区域。但地区的改变可能会影响库的许多部分，其中⼀部分可能是我们不希望修改的。所以C语言支持针对不同的类项进行修改，下面的⼀个宏，指定⼀个类项：</p> 
<ul><li>LC_COLLATE</li><li>LC_CTYPE</li><li>LC_MONETARY</li><li>LC_NUMERIC</li><li>LC_TIME</li><li>LC_ALL-针对所有类项修改</li></ul> 
<p><img src="https://images2.imgbox.com/8b/17/vRe0qiO4_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="setlocale_229"></a>setlocale函数</h4> 
<pre><code class="prism language-c"><span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">setlocale</span> <span class="token punctuation">(</span><span class="token keyword">int</span> category<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>setlocale</code> 函数用于修改当前地区，可以针对⼀个类项修改，也可以针对所有类项。<br> <code>setlocale</code> 的第⼀个参数可以是前面说明的类项中的⼀个，那么每次只会影响⼀个类项，如果第⼀个参数是<code>LC_ALL</code>，就会影响所有的类项。<br> C标准给第⼆个参数仅定义了2种可能取值：<code>"C"和""</code>。<br> 在任意程序执行开始，都会隐藏式执行调用:</p> 
<pre><code class="prism language-c"><span class="token function">setlocale</span><span class="token punctuation">(</span>LC_ALL<span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>当地区设置为"C"时，库函数按正常方式执行，小数点是⼀个点。<br> 当程序运行起来后想改变地区，就只能显示调用<code>setlocale</code>函数。用<code>""</code>作为第2个参数，调用<code>setlocale</code>函数就可以切换到本地模式，这种模式下程序会适应本地环境。比如：切换到我们的本地模式后就支持宽字符（汉字）的输出等。</p> 
<pre><code class="prism language-c"><span class="token function">setlocale</span><span class="token punctuation">(</span>LC_ALL<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//切换到本地环境</span>
</code></pre> 
<h4><a id="_248"></a>宽字符的打印</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;locale.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	<span class="token function">setlocale</span><span class="token punctuation">(</span>LC_ALL<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%c\n"</span><span class="token punctuation">,</span> L<span class="token char">'●'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%c\n"</span><span class="token punctuation">,</span> L<span class="token char">'★'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%c\n"</span><span class="token punctuation">,</span> L<span class="token char">'贪'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%c\n"</span><span class="token punctuation">,</span> L<span class="token char">'吃'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%c\n"</span><span class="token punctuation">,</span> L<span class="token char">'蛇'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/da/1d/J6sJ2s9l_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/c5/8WUroETI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_267"></a>地图坐标</h4> 
<p>我们假设实现⼀个棋盘27行，58列的棋盘，再围绕地图画出墙，即可绘出贪吃蛇的地图。<br> <img src="https://images2.imgbox.com/53/ee/fLec5Szv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_270"></a>蛇身和食物</h3> 
<p>初始化状态，假设蛇的长度是5，蛇身的每个节点是<code>●</code>，在固定的⼀个坐标处开始出现蛇，连续5个结点。注意：蛇的每个结点的x坐标必须是2个倍数，否则可能会出现蛇的⼀个结点有⼀半出现在墙体中，另外⼀半在墙外的现象，坐标不好对齐。<br> 关于食物，就是在墙体内随机生成⼀个坐标（x坐标必须是2的倍数），坐标不能和蛇的身体重合，然后打印<code>★</code>。<br> <img src="https://images2.imgbox.com/8f/77/e5La0Q8s_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_275"></a>数据结构设计</h3> 
<p>在游戏运行的过程中，蛇每次吃⼀个食物，蛇的身体就会变长⼀节，如果我们使用链表存储蛇的信息，那么蛇的每⼀节其实就是链表的每个结点。每个结点只要记录好蛇身结点在地图上的坐标就行，所以舍蛇结点结构如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">SnakeNode</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> y<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">SnakeNode</span><span class="token operator">*</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>SnakeNode<span class="token punctuation">,</span><span class="token operator">*</span> pSnakeNode<span class="token punctuation">;</span>
</code></pre> 
<p>要管理整条贪吃蛇，我们再封装⼀个<code>Snake</code>的结构来维护整条贪吃蛇：</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Snake</span>
<span class="token punctuation">{<!-- --></span>
	pSnakeNode _pSanke<span class="token punctuation">;</span><span class="token comment">//维护整条蛇的指针</span>
	pSnakeNode _pFood<span class="token punctuation">;</span><span class="token comment">//维护食物的指针</span>
	<span class="token keyword">enum</span> <span class="token class-name">DIRECTION</span> _Dir<span class="token punctuation">;</span><span class="token comment">//蛇头的方向，默认是向右</span>
	<span class="token keyword">enum</span> <span class="token class-name">GAME_STATUS</span> _Status<span class="token punctuation">;</span><span class="token comment">//蛇的状态</span>
	<span class="token keyword">int</span> _Score<span class="token punctuation">;</span><span class="token comment">//得分</span>
	<span class="token keyword">int</span> _Food_Weight<span class="token punctuation">;</span><span class="token comment">//每个食物多少分</span>
	<span class="token keyword">int</span> _Sleeptime<span class="token punctuation">;</span><span class="token comment">//睡眠时间</span>
<span class="token punctuation">}</span>Snake<span class="token punctuation">,</span><span class="token operator">*</span> pSnake<span class="token punctuation">;</span>
</code></pre> 
<p>蛇的方向，可以一一列举，使用枚举：</p> 
<pre><code class="prism language-c"><span class="token keyword">enum</span> <span class="token class-name">DIRECTION</span>
<span class="token punctuation">{<!-- --></span>
	UP <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
	DOWN<span class="token punctuation">,</span>
	LEFT<span class="token punctuation">,</span>
	RIGHT
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>游戏状态，可以一一列举，使用枚举：</p> 
<pre><code class="prism language-c"><span class="token keyword">enum</span> <span class="token class-name">GAME_STATUS</span>
<span class="token punctuation">{<!-- --></span>
	OK<span class="token punctuation">,</span><span class="token comment">//正常运行</span>
	KILL_BY_WALL<span class="token punctuation">,</span><span class="token comment">//撞墙</span>
	KILL_BY_SELF<span class="token punctuation">,</span><span class="token comment">//咬到自己</span>
	END_NOMAL<span class="token comment">//正常结束</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_322"></a>游戏流程设计</h3> 
<p><img src="https://images2.imgbox.com/e9/76/aYflsmLk_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_324"></a>核心逻辑实现分析</h2> 
<p>游戏实现分为三个部分分别是：snake.h（游戏头文件、函数定义、结构体创建）、snake.c（游戏的实现）、test.c（游戏的主逻辑）</p> 
<h3><a id="testc_326"></a>游戏的主逻辑（test.c）</h3> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"snake.h"</span></span>

<span class="token keyword">void</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">do</span> 
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Snake snake <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">//游戏初始化</span>
		<span class="token function">GameStart</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>snake<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//游戏运行</span>
		<span class="token function">GameRun</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>snake<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//游戏结束</span>
		<span class="token function">GameEnd</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>snake<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"再来一局吗？(Y/N):"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'Y'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token char">'y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//修改当前地区为本地模式，为了支持中文宽字符的打印</span>
	<span class="token function">setlocale</span><span class="token punctuation">(</span>LC_ALL<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//测试代码</span>
	<span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="snakeh_362"></a>游戏头文件、函数定义、结构体创建（snake.h）</h3> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;locale.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;windows.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdbool.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Pos_X</span> <span class="token expression"><span class="token number">24</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Pos_Y</span> <span class="token expression"><span class="token number">5</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Wall</span> <span class="token expression">L</span><span class="token char">'□'</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BODY</span> <span class="token expression">L</span><span class="token char">'●'</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FOOD</span> <span class="token expression">L</span><span class="token char">'★'</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">KEY_PRESS</span><span class="token expression"><span class="token punctuation">(</span>VK<span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">0x1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>

<span class="token keyword">enum</span> <span class="token class-name">GAME_STATUS</span>
<span class="token punctuation">{<!-- --></span>
	OK<span class="token punctuation">,</span><span class="token comment">//正常运行</span>
	KILL_BY_WALL<span class="token punctuation">,</span><span class="token comment">//撞墙</span>
	KILL_BY_SELF<span class="token punctuation">,</span><span class="token comment">//咬到自己</span>
	END_NOMAL<span class="token comment">//正常结束</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//上下左右</span>
<span class="token keyword">enum</span> <span class="token class-name">DIRECTION</span>
<span class="token punctuation">{<!-- --></span>
	UP <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
	DOWN<span class="token punctuation">,</span>
	LEFT<span class="token punctuation">,</span>
	RIGHT
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//蛇身结点</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">SnakeNode</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> y<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">SnakeNode</span><span class="token operator">*</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>SnakeNode<span class="token punctuation">,</span><span class="token operator">*</span> pSnakeNode<span class="token punctuation">;</span>

<span class="token comment">//蛇的相关设置</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Snake</span>
<span class="token punctuation">{<!-- --></span>
	pSnakeNode _pSanke<span class="token punctuation">;</span><span class="token comment">//维护整条蛇的指针</span>
	pSnakeNode _pFood<span class="token punctuation">;</span><span class="token comment">//维护食物的指针</span>
	<span class="token keyword">enum</span> <span class="token class-name">DIRECTION</span> _Dir<span class="token punctuation">;</span><span class="token comment">//蛇头的方向，默认是向右</span>
	<span class="token keyword">enum</span> <span class="token class-name">GAME_STATUS</span> _Status<span class="token punctuation">;</span><span class="token comment">//蛇的状态</span>
	<span class="token keyword">int</span> _Score<span class="token punctuation">;</span><span class="token comment">//得分</span>
	<span class="token keyword">int</span> _Food_Weight<span class="token punctuation">;</span><span class="token comment">//每个食物多少分</span>
	<span class="token keyword">int</span> _Sleeptime<span class="token punctuation">;</span><span class="token comment">//睡眠时间</span>
<span class="token punctuation">}</span>Snake<span class="token punctuation">,</span><span class="token operator">*</span> pSnake<span class="token punctuation">;</span>

<span class="token comment">//光标定位</span>
<span class="token keyword">void</span> <span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//游戏的初始化</span>
<span class="token keyword">void</span> <span class="token function">GameStart</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//欢迎界面打印</span>
<span class="token keyword">void</span> <span class="token function">WelcomeToGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//绘制地图</span>
<span class="token keyword">void</span> <span class="token function">CreatMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//创建蛇</span>
<span class="token keyword">void</span> <span class="token function">InitSnake</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">//创建食物</span>
<span class="token keyword">void</span> <span class="token function">CreatFood</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//游戏运行</span>
<span class="token keyword">void</span> <span class="token function">GameRun</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//蛇的移动</span>
<span class="token keyword">void</span> <span class="token function">SnakeMove</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//下一个是食物</span>
bool <span class="token function">NextIsFood</span><span class="token punctuation">(</span>pSnakeNode cur<span class="token punctuation">,</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//吃食物</span>
<span class="token keyword">void</span> <span class="token function">EatFood</span><span class="token punctuation">(</span>pSnakeNode cur<span class="token punctuation">,</span> pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//下一个不是食物</span>
<span class="token keyword">void</span> <span class="token function">NoFood</span><span class="token punctuation">(</span>pSnakeNode cur<span class="token punctuation">,</span> pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//撞墙</span>
bool <span class="token function">KillByWall</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//撞自己</span>
bool <span class="token function">KillBySelf</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//游戏结束</span>
<span class="token keyword">void</span> <span class="token function">GameEnd</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="snakec_458"></a>游戏的实现（snake.c）</h3> 
<h4><a id="_459"></a>游戏的初始化</h4> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">GameStart</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//设置窗口大小</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"mode con cols=100 lines=30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"title 贪吃蛇"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//隐藏光标</span>
	HANDLE hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	CONSOLE_CURSOR_INFO CursorInfo<span class="token punctuation">;</span>
	<span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> <span class="token operator">&amp;</span>CursorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取控制台光标信息</span>
	CursorInfo<span class="token punctuation">.</span>bVisible<span class="token operator">=</span>false<span class="token punctuation">;</span> <span class="token comment">//隐藏控制台光标</span>
	<span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> <span class="token operator">&amp;</span>CursorInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置控制台光标状态</span>
	<span class="token comment">//打印欢迎界面</span>
	<span class="token function">WelcomeToGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//绘制地图</span>
	<span class="token function">CreatMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//创建蛇</span>
	<span class="token function">InitSnake</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//创建食物</span>
	<span class="token function">CreatFood</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_482"></a>光标定位</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	COORD pos <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>x<span class="token punctuation">,</span>y<span class="token punctuation">}</span><span class="token punctuation">;</span>
	HANDLE hOutput <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token comment">//获取标准输出的句柄(用来标识不同设备的数值)</span>
	hOutput <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//设置标准输出上光标的位置为pos</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hOutput<span class="token punctuation">,</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_495"></a>打印欢迎界面</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">WelcomeToGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"欢迎来到贪吃蛇小游戏\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"用↑.↓.←.→来控制蛇的移动，按F3加速，按F4减速\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"加速可以得到更高的分数\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_515"></a>创建地图</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">CreatMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//上</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">28</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span>Wall<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//下</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">28</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span> Wall<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//左</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">25</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span> Wall<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//右</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">25</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">56</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span> Wall<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_544"></a>创建蛇</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">InitSnake</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pSnakeNode cur <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cur <span class="token operator">=</span> <span class="token punctuation">(</span>pSnakeNode<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>SnakeNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"InitSnake()::malloc()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cur<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
		cur<span class="token operator">-&gt;</span>x <span class="token operator">=</span> Pos_X <span class="token operator">+</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
		cur<span class="token operator">-&gt;</span>y <span class="token operator">=</span> Pos_Y<span class="token punctuation">;</span>
		<span class="token comment">//头插</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_pSanke <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_pSanke <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			cur<span class="token operator">-&gt;</span>next <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
			ps<span class="token operator">-&gt;</span>_pSanke <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	cur <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>x<span class="token punctuation">,</span> cur<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span>BODY<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//设置蛇的属性</span>
	ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">=</span> RIGHT<span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_Food_Weight <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_Score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_Sleeptime <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_Status <span class="token operator">=</span> OK<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_586"></a>创建食物</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">CreatFood</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
again<span class="token operator">:</span>
	<span class="token comment">//x(2-54)  y(1-25)</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">53</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
		y <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">25</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	pSnakeNode cur <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	<span class="token comment">//避免食物与蛇身相重合</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>x <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">goto</span> again<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//打印食物</span>
	pSnakeNode food <span class="token operator">=</span> <span class="token punctuation">(</span>pSnakeNode<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>SnakeNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>food <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"CreatFood()::malloc()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	food<span class="token operator">-&gt;</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
	food<span class="token operator">-&gt;</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span> FOOD<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_pFood <span class="token operator">=</span> food<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_622"></a>游戏运行</h4> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">GameRun</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//打印右侧帮助信息</span>
	<span class="token function">PrintHelpInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"得分：%d "</span><span class="token punctuation">,</span> ps<span class="token operator">-&gt;</span>_Score<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"每个食物得分：%2d分"</span><span class="token punctuation">,</span> ps<span class="token operator">-&gt;</span>_Food_Weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//向上</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_UP<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">!=</span> DOWN<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">=</span> UP<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//向下</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_DOWN<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">!=</span> UP<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">=</span> DOWN<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//向左</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_LEFT<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">!=</span> RIGHT<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">=</span> LEFT<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//向右</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_RIGHT<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">!=</span> LEFT<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_Dir <span class="token operator">=</span> RIGHT<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//暂停</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Pause</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//退出</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_ESCAPE<span class="token punctuation">)</span> <span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_Status <span class="token operator">=</span> END_NOMAL<span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//加速</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_F3<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Sleeptime <span class="token operator">&gt;</span> <span class="token number">80</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				ps<span class="token operator">-&gt;</span>_Sleeptime <span class="token operator">-=</span> <span class="token number">30</span><span class="token punctuation">;</span>
				ps<span class="token operator">-&gt;</span>_Food_Weight <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//减速</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_F4<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Food_Weight <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				ps<span class="token operator">-&gt;</span>_Sleeptime <span class="token operator">+=</span> <span class="token number">30</span><span class="token punctuation">;</span>
				ps<span class="token operator">-&gt;</span>_Food_Weight <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//蛇每次一定之间要休眠的时间，时间短，蛇移动速度就快 </span>
		<span class="token function">SnakeMove</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">Sleep</span><span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Sleeptime<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Status <span class="token operator">==</span> OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_691"></a>打印帮助信息</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">PrintHelpInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"不能穿墙，不能咬到自己"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"用↑.↓.←.→分别控制蛇的移动"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"F3 为加速，F4 为减速\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"ESC ：退出游戏.space：暂停游戏."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_705"></a>暂停</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Pause</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">Sleep</span><span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Sleeptime<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">KEY_PRESS</span><span class="token punctuation">(</span>VK_SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_719"></a>下一个是食物</h5> 
<pre><code class="prism language-c">bool <span class="token function">NextIsFood</span><span class="token punctuation">(</span>pSnakeNode cur<span class="token punctuation">,</span> pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>x <span class="token operator">==</span> ps<span class="token operator">-&gt;</span>_pFood<span class="token operator">-&gt;</span>x <span class="token operator">&amp;&amp;</span> cur<span class="token operator">-&gt;</span>y <span class="token operator">==</span> ps<span class="token operator">-&gt;</span>_pFood<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_726"></a>吃食物</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">EatFood</span><span class="token punctuation">(</span>pSnakeNode cur<span class="token punctuation">,</span> pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//头插</span>
	cur<span class="token operator">-&gt;</span>next <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_pSanke <span class="token operator">=</span> cur<span class="token punctuation">;</span>
	<span class="token comment">//打印蛇</span>
	pSnakeNode pcur <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>pcur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span>pcur<span class="token operator">-&gt;</span>x<span class="token punctuation">,</span>pcur<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span> BODY<span class="token punctuation">)</span><span class="token punctuation">;</span>
		pcur <span class="token operator">=</span> pcur<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//计算总分</span>
	ps<span class="token operator">-&gt;</span>_Score <span class="token operator">+=</span> ps<span class="token operator">-&gt;</span>_Food_Weight<span class="token punctuation">;</span>
	<span class="token comment">//再次创建食物</span>
	<span class="token function">CreatFood</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_747"></a>下一个不是食物</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">NoFood</span><span class="token punctuation">(</span>pSnakeNode cur<span class="token punctuation">,</span> pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//头插</span>
	cur<span class="token operator">-&gt;</span>next <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	ps<span class="token operator">-&gt;</span>_pSanke <span class="token operator">=</span> cur<span class="token punctuation">;</span>
	<span class="token comment">//打印蛇</span>
	pSnakeNode pcur <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>pcur<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">SetPos</span><span class="token punctuation">(</span>pcur<span class="token operator">-&gt;</span>x<span class="token punctuation">,</span> pcur<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">wprintf</span><span class="token punctuation">(</span>L<span class="token string">"%lc"</span><span class="token punctuation">,</span> BODY<span class="token punctuation">)</span><span class="token punctuation">;</span>
		pcur <span class="token operator">=</span> pcur<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span>pcur<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>x<span class="token punctuation">,</span>pcur<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">free</span><span class="token punctuation">(</span>pcur<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pcur<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_768"></a>撞墙</h5> 
<pre><code class="prism language-c">bool <span class="token function">KillByWall</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x <span class="token operator">==</span> <span class="token number">56</span> <span class="token operator">||</span>
		ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y <span class="token operator">==</span> <span class="token number">26</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		ps<span class="token operator">-&gt;</span>_Status <span class="token operator">=</span> KILL_BY_WALL<span class="token punctuation">;</span>
		<span class="token keyword">return</span> true<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> false<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_782"></a>撞自己</h5> 
<pre><code class="prism language-c">bool <span class="token function">KillBySelf</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pSnakeNode cur <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>x<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ps<span class="token operator">-&gt;</span>_Status <span class="token operator">=</span> KILL_BY_SELF<span class="token punctuation">;</span>
			<span class="token keyword">return</span> true<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_799"></a>蛇的移动</h5> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">SnakeMove</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pSnakeNode cur <span class="token operator">=</span> <span class="token punctuation">(</span>pSnakeNode<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>SnakeNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"SnakeMove()::malloc()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Dir<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> UP<span class="token operator">:</span>
		<span class="token punctuation">{<!-- --></span>
			cur<span class="token operator">-&gt;</span>x <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x<span class="token punctuation">;</span>
			cur<span class="token operator">-&gt;</span>y <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> DOWN<span class="token operator">:</span>
		<span class="token punctuation">{<!-- --></span>
			cur<span class="token operator">-&gt;</span>x <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x<span class="token punctuation">;</span>
			cur<span class="token operator">-&gt;</span>y <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> LEFT<span class="token operator">:</span>
		<span class="token punctuation">{<!-- --></span>	
			cur<span class="token operator">-&gt;</span>x <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
			cur<span class="token operator">-&gt;</span>y <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> RIGHT<span class="token operator">:</span>
		<span class="token punctuation">{<!-- --></span>
			cur<span class="token operator">-&gt;</span>x <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>x <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
			cur<span class="token operator">-&gt;</span>y <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token operator">-&gt;</span>y<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">NextIsFood</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> ps<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">EatFood</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">NoFood</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">KillByWall</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">KillBySelf</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_850"></a>游戏结束</h4> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">GameEnd</span><span class="token punctuation">(</span>pSnake ps<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	pSnakeNode cur <span class="token operator">=</span> ps<span class="token operator">-&gt;</span>_pSanke<span class="token punctuation">;</span>
	<span class="token function">SetPos</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>ps<span class="token operator">-&gt;</span>_Status<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">case</span> KILL_BY_SELF<span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"您撞到自己了，游戏结束!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token keyword">case</span> KILL_BY_WALL<span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"您撞墙了,游戏结束!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token keyword">case</span> END_NOMAL<span class="token operator">:</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"您撞上自己了 ,游戏结束!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		pSnakeNode del <span class="token operator">=</span> cur<span class="token punctuation">;</span>
		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
		<span class="token function">free</span><span class="token punctuation">(</span>del<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7e2645a2d18166a73455c6c1cb275df9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【乐吾乐大屏可视化组态编辑器】事件交互-弹框</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a41f31700c3fc38be785ca997bce2c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【乐吾乐大屏可视化组态编辑器】事件交互-场景交互</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>