<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Java】Spring循环依赖：原因与解决方法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1930d142bebde0119db643e1e306c676/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Java】Spring循环依赖：原因与解决方法">
  <meta property="og:description" content="人不走空
🌈个人主页：人不走空 💖系列专栏：算法专题 ⏰诗词歌赋：斯是陋室，惟吾德馨 目录
🌈个人主页：人不走空 💖系列专栏：算法专题
⏰诗词歌赋：斯是陋室，惟吾德馨
什么是Spring循环依赖？
Spring循环依赖的解决方法
循环依赖的形成
1. 构造函数循环依赖
2. 属性循环依赖
解决方法
1. 使用构造函数注入
2. 使用@Lazy注解
3. 使用setter方法注入
结语
作者其他作品：
在Spring框架中，处理循环依赖一直备受关注。这是因为Spring团队在源代码中为了解决这个问题做了大量的处理和优化。同时，循环依赖也是Spring高级面试中的必考问题，对其深入了解可以成为面试中的制胜法宝。本文将详细介绍Spring循环依赖的产生原因、解决方法以及相关示例。
什么是Spring循环依赖？ Spring循环依赖指的是两个或多个Bean之间相互依赖，形成一个环状依赖的情况。简单来说，就是A依赖B，B依赖C，C依赖A，这样就形成了一个循环依赖的环。
Spring循环依赖通常会导致Bean无法正确地被实例化，从而导致应用程序无法正常启动或者出现异常。因此，Spring循环依赖是一种需要尽量避免的情况。
Spring循环依赖的解决方法 为了解决Spring循环依赖问题，我们可以采取以下几种方法：
构造函数注入： 在构造函数注入中，Spring会检查循环依赖，并在发现循环依赖时抛出异常，避免死循环。
使用@Lazy注解： @Lazy注解可以延迟Bean的实例化，从而避免循环依赖的问题。
使用setter方法
Spring框架为开发者提供了强大的依赖注入功能，然而，当不当使用时，就会出现循环依赖的问题。本文将介绍Spring循环依赖的形成原因以及解决方法。
循环依赖的形成 Spring循环依赖通常出现在两种情况下：
1. 构造函数循环依赖 构造函数循环依赖发生在Bean的构造函数中相互依赖的情况下。例如：
@Component public class A { private B b; public A(B b) { this.b = b; } } @Component public class B { private A a; public B(A a) { this.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-28T10:24:26+08:00">
    <meta property="article:modified_time" content="2024-02-28T10:24:26+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Java】Spring循环依赖：原因与解决方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="text-align:center;"> </h3> 
<div style="text-align:center;"> 
 <img src="https://images2.imgbox.com/16/17/4OKKUoHe_o.png" alt="dd3f5d43598c2a98a8352180c00a09de.png"> 
 <p><strong>人不走空</strong></p> 
</div> 
<p>                                                                      </p> 
<h3 style="text-align:center;">      🌈<strong>个人主页：<a href="https://blog.csdn.net/double222222?type=blog" title="人不走空">人不走空</a></strong><strong>      </strong></h3> 
<h3 style="text-align:center;"><strong>💖系列专栏：<a class="link-info" href="https://blog.csdn.net/double222222/category_12487653.html?spm=1001.2014.3001.5482" title="算法专题">算法专题</a></strong></h3> 
<h3 style="text-align:center;"><strong>⏰诗词歌赋：</strong>斯是陋室，惟吾德馨</h3> 
<p> </p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/32/b6/WXA2LefA_o.gif" alt="da14e5cf865a427ea959fca470d8245a.gif"></p> 
<p><strong>目录</strong></p> 
<p style="margin-left:40px;"> </p> 
<p style="margin-left:40px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%F0%9F%8C%88%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5%EF%BC%9A%E4%BA%BA%E4%B8%8D%E8%B5%B0%E7%A9%BA%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0" rel="nofollow">      🌈个人主页：人不走空      </a></p> 
<p style="margin-left:40px;"><a href="#%F0%9F%92%96%E7%B3%BB%E5%88%97%E4%B8%93%E6%A0%8F%EF%BC%9A%E7%AE%97%E6%B3%95%E4%B8%93%E9%A2%98" rel="nofollow">💖系列专栏：算法专题</a></p> 
<p style="margin-left:40px;"><a href="#%E2%8F%B0%E8%AF%97%E8%AF%8D%E6%AD%8C%E8%B5%8B%EF%BC%9A%E6%96%AF%E6%98%AF%E9%99%8B%E5%AE%A4%EF%BC%8C%E6%83%9F%E5%90%BE%E5%BE%B7%E9%A6%A8" rel="nofollow">⏰诗词歌赋：斯是陋室，惟吾德馨</a></p> 
<p style="margin-left:80px;"><a href="#%E4%BB%80%E4%B9%88%E6%98%AFSpring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%EF%BC%9F" rel="nofollow">什么是Spring循环依赖？</a></p> 
<p style="margin-left:80px;"><a href="#Spring%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95" rel="nofollow">Spring循环依赖的解决方法</a></p> 
<p style="margin-left:40px;"><a href="#%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84%E5%BD%A2%E6%88%90" rel="nofollow">循环依赖的形成</a></p> 
<p style="margin-left:80px;"><a href="#1.%20%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96" rel="nofollow">1. 构造函数循环依赖</a></p> 
<p style="margin-left:80px;"><a href="#2.%20%E5%B1%9E%E6%80%A7%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96" rel="nofollow">2. 属性循环依赖</a></p> 
<p style="margin-left:40px;"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95" rel="nofollow">解决方法</a></p> 
<p style="margin-left:80px;"><a href="#1.%20%E4%BD%BF%E7%94%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B3%A8%E5%85%A5" rel="nofollow">1. 使用构造函数注入</a></p> 
<p style="margin-left:80px;"><a href="#2.%20%E4%BD%BF%E7%94%A8%40Lazy%E6%B3%A8%E8%A7%A3" rel="nofollow">2. 使用@Lazy注解</a></p> 
<p style="margin-left:80px;"><a href="#3.%20%E4%BD%BF%E7%94%A8setter%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5" rel="nofollow">3. 使用setter方法注入</a></p> 
<p style="margin-left:40px;"><a href="#%E7%BB%93%E8%AF%AD" rel="nofollow">结语</a></p> 
<p style="margin-left:0px;"><a href="#%E4%BD%9C%E8%80%85%E5%85%B6%E4%BB%96%E4%BD%9C%E5%93%81%EF%BC%9A" rel="nofollow">作者其他作品：</a></p> 
<hr> 
<p><img src="https://images2.imgbox.com/c5/6c/FWXT4XET_o.png" alt="dcbdf479f358420dab9579f05afcded3.png"></p> 
<p>在Spring框架中，处理循环依赖一直备受关注。这是因为Spring团队在源代码中为了解决这个问题做了大量的处理和优化。同时，循环依赖也是Spring高级面试中的必考问题，对其深入了解可以成为面试中的制胜法宝。本文将详细介绍Spring循环依赖的产生原因、解决方法以及相关示例。</p> 
<h4>什么是Spring循环依赖？</h4> 
<p>Spring循环依赖指的是两个或多个Bean之间相互依赖，形成一个环状依赖的情况。简单来说，就是A依赖B，B依赖C，C依赖A，这样就形成了一个循环依赖的环。</p> 
<p>Spring循环依赖通常会导致Bean无法正确地被实例化，从而导致应用程序无法正常启动或者出现异常。因此，Spring循环依赖是一种需要尽量避免的情况。</p> 
<p><img src="https://images2.imgbox.com/55/99/8ZwhCGnj_o.png" alt="7783651b7e0f40b2bfe40deb656cc625.png"> </p> 
<h4>Spring循环依赖的解决方法</h4> 
<p>为了解决Spring循环依赖问题，我们可以采取以下几种方法：</p> 
<ol><li> <p><strong>构造函数注入：</strong> 在构造函数注入中，Spring会检查循环依赖，并在发现循环依赖时抛出异常，避免死循环。</p> </li><li> <p><strong>使用@Lazy注解：</strong> @Lazy注解可以延迟Bean的实例化，从而避免循环依赖的问题。</p> </li><li> <p><strong>使用setter方法</strong></p> </li></ol> 
<p>Spring框架为开发者提供了强大的依赖注入功能，然而，当不当使用时，就会出现循环依赖的问题。本文将介绍Spring循环依赖的形成原因以及解决方法。</p> 
<h3>循环依赖的形成</h3> 
<p>Spring循环依赖通常出现在两种情况下：</p> 
<h4>1. 构造函数循环依赖</h4> 
<p>构造函数循环依赖发生在Bean的构造函数中相互依赖的情况下。例如：</p> 
<pre><code class="language-java">@Component
public class A {
    private B b;
    public A(B b) {
        this.b = b;
    }
}

@Component
public class B {
    private A a;
    public B(A a) {
        this.a = a;
    }
}
</code></pre> 
<p>在这种情况下，A依赖B，B依赖A，形成了循环依赖。</p> 
<h4>2. 属性循环依赖</h4> 
<p>属性循环依赖发生在Bean的属性中相互依赖的情况下。例如：</p> 
<pre><code class="language-java">@Component
public class A {
    @Autowired
    private B b;
}

@Component
public class B {
    @Autowired
    private A a;
}
</code></pre> 
<p>同样地，在这种情况下，A依赖B，B依赖A，形成了循环依赖。</p> 
<h3>解决方法</h3> 
<h4>1. 使用构造函数注入</h4> 
<p>构造函数注入是一种相对保险的方式，因为在实例化Bean时，Spring会检查是否存在循环依赖，并在发现循环依赖时抛出异常，避免死循环。示例代码如下：</p> 
<pre><code class="language-java">@Component
public class A {
    private B b;
    public A(B b) {
        this.b = b;
    }
}

@Component
public class B {
    private A a;
    public B(A a) {
        this.a = a;
    }
}
</code></pre> 
<h4>2. 使用@Lazy注解</h4> 
<p>@Lazy注解可以延迟Bean的实例化，从而避免循环依赖的问题。示例代码如下：</p> 
<pre><code class="language-java">@Component
@Lazy
public class A {
    @Autowired
    private B b;
}

@Component
@Lazy
public class B {
    @Autowired
    private A a;
}
</code></pre> 
<h4>3. 使用setter方法注入</h4> 
<p>使用setter方法注入也可以解决循环依赖的问题，但要注意可能出现的空指针异常。示例代码如下：</p> 
<pre><code class="language-java">@Component
public class A {
    private B b;
    @Autowired
    public void setB(B b) {
        this.b = b;
    }
}

@Component
public class B {
    private A a;
    @Autowired
    public void setA(A a) {
        this.a = a;
    }
}
</code></pre> 
<h3>结语</h3> 
<p>Spring循环依赖是在应用中常见的问题，但通过合适的解决方法，我们可以避免出现这种情况，确保应用的正常运行。在实际开发中，根据具体情况选择合适的解决方案是十分重要的。</p> 
<hr> 
<h2>作者其他作品：</h2> 
<p><a href="https://blog.csdn.net/double222222/article/details/135858851?spm=1001.2014.3001.5501" title="【Redis】利用 Redis List 实现 Java 数据库分页快速查询-CSDN博客">【Redis】利用 Redis List 实现 Java 数据库分页快速查询-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135815535?spm=1001.2014.3001.5501" title="【前端】深入了解React JSX语法及实例应用-CSDN博客">【前端】深入了解React JSX语法及实例应用-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135711721?spm=1001.2014.3001.5501" title="【JVM】双亲委派机制详细解读（通俗易懂）-CSDN博客">【JVM】双亲委派机制详细解读（通俗易懂）-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135711691?spm=1001.2014.3001.5501" title="【浏览器】五大最好用的浏览器 最受欢迎的浏览器软件-CSDN博客">【浏览器】五大最好用的浏览器 最受欢迎的浏览器软件-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135737881?spm=1001.2014.3001.5501" title="【软件工程】单元测试：构建坚固软件基石的不可或缺一环-CSDN博客">【软件工程】单元测试：构建坚固软件基石的不可或缺一环-CSDN博客</a>   </p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135671320?spm=1001.2014.3001.5501" title="【JVM】深入理解Java引用类型：强引用、软引用、弱引用和虚引用-CSDN博客">【JVM】深入理解Java引用类型：强引用、软引用、弱引用和虚引用-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135601760?spm=1001.2014.3001.5501" title="【Linux】Linux 系统中的注销、重启和关机命令详解-CSDN博客">【Linux】Linux 系统中的注销、重启和关机命令详解-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135319173?spm=1001.2014.3001.5501" title="UDP协议：特点、应用场景及市面上常见软件案例-CSDN博客">UDP协议：特点、应用场景及市面上常见软件案例-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/double222222/article/details/135280922?spm=1001.2014.3001.5501" title="https://blog.csdn.net/double222222/article/details/135280922?spm=1001.2014.3001.5501">https://blog.csdn.net/double222222/article/details/135280922?spm=1001.2014.3001.5501</a></p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ce05bde75c5e8daa3a1cbc7acae0b781/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java实战：Spring Boot生成PDF</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5fe3c0d99ef0d970da4ec0a1ece1adec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot 整合 Redis 超详细教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>