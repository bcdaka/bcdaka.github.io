<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【萌宠案例】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d9f9f7930b26ab8050f847560eabfcdb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【萌宠案例】">
  <meta property="og:description" content="文章目录 页面布局调用萌宠API接口渲染到页面中previewImage图片预览和lazy-load懒加载对回调结果严格处理then_catch_finally用法完成下拉刷新和触底加载更多pageScrollTo滚动到顶部和刷新使用uni-ui扩展组件分段器组件实现点击切换萌宠类型 页面布局 &lt;template&gt; &lt;view class=&#34;container&#34;&gt; &lt;view class=&#34;layout&#34;&gt; &lt;view class=&#34;box&#34; v-for=&#34;item in 5&#34;&gt; &lt;view class=&#34;pic&#34;&gt; &lt;image src=&#34;../../static/logo.png&#34; mode=&#34;widthFix&#34;&gt;&lt;/image&gt; &lt;/view&gt; &lt;view class=&#34;text&#34;&gt;@@@@&lt;/view&gt; &lt;/view&gt; &lt;/view&gt; &lt;/view&gt; &lt;/template&gt; &lt;script setup&gt; &lt;/script&gt; &lt;style lang=&#34;scss&#34; scoped&gt; .container{ .layout{ padding: 50rpx; .box{ margin-bottom: 60rpx; box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08); border-radius: 15rpx; overflow: hidden; .pic{ iamge{ width: 100%; } } .text{ padding: 30rpx; } } } } &lt;/style&gt; 效果：
调用萌宠API接口渲染到页面中 随机猫咪API接口
代码如下：
&lt;template&gt; &lt;view class=&#34;container&#34;&gt; &lt;view class=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-28T09:25:32+08:00">
    <meta property="article:modified_time" content="2024-07-28T09:25:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【萌宠案例】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">页面布局</a></li><li><a href="#API_46" rel="nofollow">调用萌宠API接口渲染到页面中</a></li><li><a href="#previewImagelazyload_174" rel="nofollow">previewImage图片预览和lazy-load懒加载</a></li><li><a href="#then_catch_finally_251" rel="nofollow">对回调结果严格处理then_catch_finally用法</a></li><li><a href="#_347" rel="nofollow">完成下拉刷新和触底加载更多</a></li><li><a href="#pageScrollTo_457" rel="nofollow">pageScrollTo滚动到顶部和刷新</a></li><li><a href="#uniui_600" rel="nofollow">使用uni-ui扩展组件</a></li><li><a href="#_768" rel="nofollow">分段器组件实现点击切换萌宠类型</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>页面布局</h2> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="item in 5"&gt;
				&lt;view class="pic"&gt;
					&lt;image src="../../static/logo.png" mode="widthFix"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;@@@@&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
	
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
				}
			}
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/06/66/QvsVIijT_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="API_46"></a>调用萌宠API接口渲染到页面中</h2> 
<p><a href="https://api.thecatapi.com/v1/images/search?limit=1" rel="nofollow">随机猫咪API接口</a></p> 
<p>代码如下：</p> 
<pre><code>&lt;template&gt;
   &lt;view class="container"&gt;
   	&lt;view class="layout"&gt;
   		&lt;view class="box" v-for="item in pets" :key="item.id" &gt;
   			&lt;view class="pic"&gt;
   				&lt;image :src="item.url" mode="widthFix"&gt;&lt;/image&gt;
   			&lt;/view&gt;
   			&lt;view class="text"&gt;{<!-- -->{item.width}}*{<!-- -->{item.height}}&lt;/view&gt;
   		&lt;/view&gt;
   	&lt;/view&gt;
   &lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
   const pets = ref([]);
   function network(){
   	uni.request({
   		url:"https://api.thecatapi.com/v1/images/search",
   		data:{
   			limit:10
   		}
   	}).then(res=&gt;{
   		console.log(res.data); //只取数组
   		pets.value = res.data
   	})
   }
   
   network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
   .container{
   	.layout{
   		padding: 50rpx;
   		.box{
   			margin-bottom: 60rpx;
   			box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
   			border-radius: 15rpx;
   			overflow: hidden;
   			.pic{
   				iamge{
   					width: 100%;
   				}
   			}
   			.text{
   				padding: 30rpx;
   			}
   		}
   	}
   }       
&lt;/style&gt;

</code></pre> 
<p>效果如下，每次刷新都会有不同的猫咪图片出现：<br> <img src="https://images2.imgbox.com/58/fb/8pu7nWE8_o.gif" alt="在这里插入图片描述"><br> 换个接口试一下：</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="item in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image :src="item.url" mode="widthFix"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	function network(){
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:10
			}
		}).then(res=&gt;{
			console.log(res.data.data); 
			pets.value = res.data.data
		})
	}
	
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/a9/91/9nVnf23f_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="previewImagelazyload_174"></a>previewImage图片预览和lazy-load懒加载</h2> 
<p>增加图片预览和懒加载功能，代码如下：</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//发送网络请求
	function network(){
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:10
			}
		}).then(res=&gt;{
			console.log(res.data.data); 
			pets.value = res.data.data
		})
	}
	
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/89/3d/jslckhjd_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="then_catch_finally_251"></a>对回调结果严格处理then_catch_finally用法</h2> 
<p>对网络的回调结果做出判断，代码如下：</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//发送网络请求
	function network(){
		uni.showNavigationBarLoading()
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:10
			},
			header:{
				"access-key":"lp9899"
			}
		}).then(res=&gt;{
		if(res.data.errCode === 0){    //errCode = 0 ，才让它赋值
			pets.value = res.data.data
		}else if (res.data.errCode === 400){
			uni.showToast({
				title:res.data.errMsg,
				icon:"none",
				duration:3000,
			})
		}
		}).catch(err=&gt;{
			uni.showToast({
				title:"请求有误，请重新刷新",
				icon:"none",
				duration:3000,
			})
		}).finally(()=&gt;{
			uni.hideNavigationBarLoading()
		})
	}
	
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>.then即使用result做一些事情，.catch是用于处理错误的；.finally即无论是否成功，都会执行。</p> 
<h2><a id="_347"></a>完成下拉刷新和触底加载更多</h2> 
<p>下拉刷新的实现，即清空数组，然后重新加载。<br> 触底加载更多的实现，即将新加载内容与旧内容合并起来。</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//发送网络请求
	function network(){
		uni.showNavigationBarLoading()
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:5
			},
			header:{
				"access-key":"lp9899"
			}
		}).then(res=&gt;{
		if(res.data.errCode === 0){    //errCode = 0 ，才让它赋值
			pets.value = [...pets.value,...res.data.data]
			console.log(pets.value)
		}else if (res.data.errCode === 400){
			uni.showToast({
				title:res.data.errMsg,
				icon:"none",
				duration:3000,
			})
		}
		}).catch(err=&gt;{
			uni.showToast({
				title:"请求有误，请重新刷新",
				icon:"none",
				duration:3000,
			})
		}).finally(()=&gt;{
			uni.hideNavigationBarLoading()
			uni.stopPullDownRefresh()
		})
	}
	
	//触底加载更多
	onReachBottom(()=&gt;{
		network();
	})
	
	//下拉刷新
	onPullDownRefresh(()=&gt;{
		pets.value = [];
		network();
	})
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/3d/bb/cwZqaRUO_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="pageScrollTo_457"></a>pageScrollTo滚动到顶部和刷新</h2> 
<p>定义“刷新” “顶部” 两个按钮，为其设置CSS；然后定义点击刷新与界面滚动的方法。</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="float"&gt;
			&lt;view class="item" @click="onRefresh"&gt;刷新&lt;/view&gt;
			&lt;view class="item" @click="onTop"&gt;顶部&lt;/view&gt;
			
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	//点击预览
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//点击刷新
	const onRefresh = function(){
		uni.startPullDownRefresh();
	}
	//返回顶部
	const onTop = function(){
		uni.pageScrollTo({
			scrollTop:0,
			duration:100,
		})
	}
	//发送网络请求
	function network(){
		uni.showNavigationBarLoading()
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:5
			},
			header:{
				"access-key":"lp9899"
			}
		}).then(res=&gt;{
		if(res.data.errCode === 0){    //errCode = 0 ，才让它赋值
			pets.value = [...pets.value,...res.data.data]
			console.log(pets.value)
		}else if (res.data.errCode === 400){
			uni.showToast({
				title:res.data.errMsg,
				icon:"none",
				duration:3000,
			})
		}
		}).catch(err=&gt;{
			uni.showToast({
				title:"请求有误，请重新刷新",
				icon:"none",
				duration:3000,
			})
		}).finally(()=&gt;{
			uni.hideNavigationBarLoading()
			uni.stopPullDownRefresh()
		})
	}
	
	//触底加载更多
	onReachBottom(()=&gt;{
		network();
	})
	
	//下拉刷新
	onPullDownRefresh(()=&gt;{
		pets.value = [];
		network();
	})
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
		.float{
			position: fixed;
			right: 30rpx;
			bottom: 80rpx;
			padding: env(safe-area-inset-bottom);
			.item{
				width: 90rpx;
				height:90rpx;
				background: rgba(255, 255, 255, 0.9);
				border-radius: 50%;
				margin-bottom: 20rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				border: 1px solid #eee;
			}
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/76/a8/jlwGiJVB_o.gif" alt="加粗样式"></p> 
<h2><a id="uniui_600"></a>使用uni-ui扩展组件</h2> 
<p>去到官方文档中，选择uni-icons图标，使用前需要点击安装：<br> <img src="https://images2.imgbox.com/c8/c0/zEEIS662_o.png" alt="在这里插入图片描述"><br> 然后选择，下载插件并导入：<br> <img src="https://images2.imgbox.com/e1/48/d7gzlJRX_o.png" alt="在这里插入图片描述"><br> 导入成功后，会出现uni-modules文件夹：<br> <img src="https://images2.imgbox.com/bc/7d/9Ha0o0Ci_o.png" alt="在这里插入图片描述"><br> 用法：</p> 
<pre><code>&lt;uni-icons type="contact" size="30"&gt;&lt;/uni-icons&gt;

</code></pre> 
<p>导入uni-load-more 加载更多插件，用法：</p> 
<pre><code>&lt;uni-load-more status="more"&gt;&lt;/uni-load-more&gt;

</code></pre> 
<p>同时实现图标插件与加载更多插件，代码如下：</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="float"&gt;
			&lt;view class="item" @click="onRefresh"&gt;
				&lt;uni-icons type="refresh" size="26" color="#888"&gt;&lt;/uni-icons&gt;
			&lt;/view&gt;
			&lt;view class="item" @click="onTop"&gt;
				&lt;uni-icons type="arrow-up" size="26" color="#888"&gt;&lt;/uni-icons&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="loadMore"&gt;
			&lt;uni-load-more status="loading"&gt;&lt;/uni-load-more&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	//点击预览
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//点击刷新
	const onRefresh = function(){
		uni.startPullDownRefresh();
	}
	//返回顶部
	const onTop = function(){
		uni.pageScrollTo({
			scrollTop:0,
			duration:100,
		})
	}
	//发送网络请求
	function network(){
		uni.showNavigationBarLoading()
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:5,
				type:"cat"
			},
			header:{
				"access-key":"lp9899",
			}
		}).then(res=&gt;{
		if(res.data.errCode === 0){    //errCode = 0 ，才让它赋值
			pets.value = [...pets.value,...res.data.data]
			console.log(pets.value)
		}else if (res.data.errCode === 400){
			uni.showToast({
				title:res.data.errMsg,
				icon:"none",
				duration:3000,
			})
		}
		}).catch(err=&gt;{
			uni.showToast({
				title:"请求有误，请重新刷新",
				icon:"none",
				duration:3000,
			})
		}).finally(()=&gt;{
			uni.hideNavigationBarLoading()
			uni.stopPullDownRefresh()
		})
	}
	
	//触底加载更多
	onReachBottom(()=&gt;{
		network();
	})
	
	//下拉刷新
	onPullDownRefresh(()=&gt;{
		pets.value = [];
		network();
	})
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
		.float{
			position: fixed;
			right: 30rpx;
			bottom: 80rpx;
			padding: env(safe-area-inset-bottom);
			.item{
				width: 90rpx;
				height:90rpx;
				background: rgba(255, 255, 255, 0.9);
				border-radius: 50%;
				margin-bottom: 20rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				border: 1px solid #eee;
			}
		}
		.loadMore{
			padding-bottom: calc(env(safe-area-inset-bottom) + 50rpx);
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/75/2d/PIzNZ3EK_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="_768"></a>分段器组件实现点击切换萌宠类型</h2> 
<p>先实现分段器，代码如下：</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="menu"&gt;
			&lt;uni-segmented-control :current="1" :values="[11,22,33]" @clickItem="onClickItem" styleType="button" activeColor="#2B9939"&gt;&lt;/uni-segmented-control&gt;
		&lt;/view&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="float"&gt;
			&lt;view class="item" @click="onRefresh"&gt;
				&lt;uni-icons type="refresh" size="26" color="#888"&gt;&lt;/uni-icons&gt;
			&lt;/view&gt;
			&lt;view class="item" @click="onTop"&gt;
				&lt;uni-icons type="arrow-up" size="26" color="#888"&gt;&lt;/uni-icons&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="loadMore"&gt;
			&lt;uni-load-more status="loading"&gt;&lt;/uni-load-more&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue';
	const pets = ref([]);
	//点击菜单
	const onClickItem = function(e){
		console.log(e)
	}
	//点击预览
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//点击刷新
	const onRefresh = function(){
		uni.startPullDownRefresh();
	}
	//返回顶部
	const onTop = function(){
		uni.pageScrollTo({
			scrollTop:0,
			duration:100,
		})
	}
	//发送网络请求
	function network(){
		uni.showNavigationBarLoading()
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:5,
				type:"cat"
			},
			header:{
				"access-key":"lp9899",
			}
		}).then(res=&gt;{
		if(res.data.errCode === 0){    //errCode = 0 ，才让它赋值
			pets.value = [...pets.value,...res.data.data]
			console.log(pets.value)
		}else if (res.data.errCode === 400){
			uni.showToast({
				title:res.data.errMsg,
				icon:"none",
				duration:3000,
			})
		}
		}).catch(err=&gt;{
			uni.showToast({
				title:"请求有误，请重新刷新",
				icon:"none",
				duration:3000,
			})
		}).finally(()=&gt;{
			uni.hideNavigationBarLoading()
			uni.stopPullDownRefresh()
		})
	}
	
	//触底加载更多
	onReachBottom(()=&gt;{
		network();
	})
	
	//下拉刷新
	onPullDownRefresh(()=&gt;{
		pets.value = [];
		network();
	})
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.menu{
			padding: 50rpx 50rpx 0;
		}
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
		.float{
			position: fixed;
			right: 30rpx;
			bottom: 80rpx;
			padding: env(safe-area-inset-bottom);
			.item{
				width: 90rpx;
				height:90rpx;
				background: rgba(255, 255, 255, 0.9);
				border-radius: 50%;
				margin-bottom: 20rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				border: 1px solid #eee;
			}
		}
		.loadMore{
			padding-bottom: calc(env(safe-area-inset-bottom) + 50rpx);
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/c3/e9/iUbCumqC_o.png" alt="在这里插入图片描述"><br> 现在实现点击逻辑，分为三类：全部、猫猫、狗狗，点击后会显示相应的图片类型，在任意界面下拉刷新时回到全部界面</p> 
<pre><code>&lt;template&gt;
	&lt;view class="container"&gt;
		&lt;view class="menu"&gt;
			&lt;uni-segmented-control :current="current" :values="values" @clickItem="onClickItem" styleType="button" activeColor="#2B9939"&gt;&lt;/uni-segmented-control&gt;
		&lt;/view&gt;
		&lt;view class="layout"&gt;
			&lt;view class="box" v-for="(item,index) in pets" :key="item._id" &gt;
				&lt;view class="pic"&gt;
					&lt;image lazy-load :src="item.url" mode="widthFix" @click = "onPreview(index)"&gt;&lt;/image&gt;
				&lt;/view&gt;
				&lt;view class="text"&gt;{<!-- -->{item.content}}&lt;/view&gt;
				&lt;view class="author"&gt;——{<!-- -->{item.author}}&lt;/view&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="float"&gt;
			&lt;view class="item" @click="onRefresh"&gt;
				&lt;uni-icons type="refresh" size="26" color="#888"&gt;&lt;/uni-icons&gt;
			&lt;/view&gt;
			&lt;view class="item" @click="onTop"&gt;
				&lt;uni-icons type="arrow-up" size="26" color="#888"&gt;&lt;/uni-icons&gt;
			&lt;/view&gt;
		&lt;/view&gt;
		&lt;view class="loadMore"&gt;
			&lt;uni-load-more status="loading"&gt;&lt;/uni-load-more&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { computed, ref } from 'vue';
	const pets = ref([]);
	const current = ref(0);
	const classify = [{key:"all",value:"全部"},{key:"dog",value:"狗狗"},{key:"cat",value:"猫猫"}];
	const values = computed(()=&gt;classify.map(item=&gt;item.value))
	//点击菜单
	const onClickItem = function(e){
		current.value = e.currentIndex
		pets.value = []
		console.log()
		network()
	}
	//点击预览
	const onPreview = function (index){
		let urls = pets.value.map(item=&gt;item.url)
		
		uni.previewImage({
			current:index,
			urls
		})
	}
	//点击刷新
	const onRefresh = function(){
		uni.startPullDownRefresh();
	}
	//返回顶部
	const onTop = function(){
		uni.pageScrollTo({
			scrollTop:0,
			duration:100,
		})
	}
	//发送网络请求
	function network(){
		uni.showNavigationBarLoading()
		uni.request({
			url:"https://tea.qingnian8.com/tools/petShow",
			data:{
				size:5,
				type:classify[current.value].key
			},
			header:{
				"access-key":"lp9899",
			}
		}).then(res=&gt;{
		if(res.data.errCode === 0){    //errCode = 0 ，才让它赋值
			pets.value = [...pets.value,...res.data.data]
			console.log(pets.value)
		}else if (res.data.errCode === 400){
			uni.showToast({
				title:res.data.errMsg,
				icon:"none",
				duration:3000,
			})
		}
		}).catch(err=&gt;{
			uni.showToast({
				title:"请求有误，请重新刷新",
				icon:"none",
				duration:3000,
			})
		}).finally(()=&gt;{
			uni.hideNavigationBarLoading()
			uni.stopPullDownRefresh()
		})
	}
	
	//触底加载更多
	onReachBottom(()=&gt;{
		network();
	})
	
	//下拉刷新
	onPullDownRefresh(()=&gt;{
		pets.value = [];
		current.value = 0
		network();
	})
	network();
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
	.container{
		.menu{
			padding: 50rpx 50rpx 0;
		}
		.layout{
			padding: 50rpx;
			.box{
				margin-bottom: 60rpx;
				box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.08);
				border-radius: 15rpx;
				overflow: hidden;
				.pic{
					iamge{
						width: 100%;
					}
				}
				.text{
					padding: 30rpx;
					color:#333;
					font-size:36rpx;
				}
				.author{
					padding:0 30rpx 30rpx;
					text-align:right;
					color:#888;
					font-size:28rpx;
				}
			}
		}
		.float{
			position: fixed;
			right: 30rpx;
			bottom: 80rpx;
			padding: env(safe-area-inset-bottom);
			.item{
				width: 90rpx;
				height:90rpx;
				background: rgba(255, 255, 255, 0.9);
				border-radius: 50%;
				margin-bottom: 20rpx;
				display: flex;
				align-items: center;
				justify-content: center;
				border: 1px solid #eee;
			}
		}
		.loadMore{
			padding-bottom: calc(env(safe-area-inset-bottom) + 50rpx);
		}
	}       
&lt;/style&gt;

</code></pre> 
<p>效果：<br> <img src="https://images2.imgbox.com/1d/c7/yR4zL9et_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e850e47ebc5b0df06a4e8e674659d1ac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">湖仓一体架构解析：数仓架构选择（第48天）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c765d9cadaae1ea5d9346f00432d9caa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Spring Boot】自动配置源码解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>