<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>最全ElasticSearch启动失败问题（附解决方案） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/48ed1cda8f7ee0ab6e31171bae5e5949/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="最全ElasticSearch启动失败问题（附解决方案）">
  <meta property="og:description" content="1.内核过低 unable to install syscall filter: requires kernel 3.5&#43; with CONFIG SECCOM
原因：因为我们使用的是centos6，其linux内核版本为2.6。而Elasticsearch的插件要求至少3.5以上版本。不过没关系，我们禁 用这个插件即可。 解决方法：
修改elasticsearch.yml文件，在最下面添加如下配置 bootstrap.system_call_filter: false 2.文件权限不足 原因：我们用的是es用户，而不是root，所以文件权限不足
解决方法：
方案1：
sudo chmod -R 777 /usr/local/elasticsearch（直接给足权限，路径替换成你自己es安装目录） 方案2：
首先用root用户登录,然后修改配置文件: vim /etc/security/limits.conf 添加下面的内容：
* soft nofile 65536 * hard nofile 131072 * soft nproc 4096 * hard nproc 4096 3.线程数不够 max number of threads [1024] for user [es] is too low, increase to at least [4096] 解决方法：
vim /etc/security/limits.d/20-nproc.conf 修改下面的内容：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-27T22:08:53+08:00">
    <meta property="article:modified_time" content="2024-07-27T22:08:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">最全ElasticSearch启动失败问题（附解决方案）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>1.内核过低</h3> 
<p><img alt="" height="196" src="https://images2.imgbox.com/ba/00/eErQtc9f_o.png" width="972"></p> 
<p><span style="color:#fe2c24;"><strong>unable to install syscall filter: requires kernel 3.5+ with CONFIG SECCOM</strong></span></p> 
<p><strong>原因：</strong>因为我们使用的是centos6，其linux内核版本为2.6。而Elasticsearch的插件要求至少3.5以上版本。不过没关系，我们禁 用这个插件即可。<strong><span style="color:#ff9900;"> </span></strong></p> 
<p><span style="color:#ff9900;"><strong>解决方法：</strong></span></p> 
<blockquote> 
 <ul><li><strong><span style="color:#ff9900;">修改elasticsearch.yml文件，在最下面添加如下配置</span></strong></li><li> <pre><code class="language-javascript">bootstrap.system_call_filter: false </code></pre> </li></ul> 
</blockquote> 
<h3>2.文件权限不足</h3> 
<p><img alt="" height="21" src="https://images2.imgbox.com/12/0f/cRvAOOCY_o.png" width="1006"></p> 
<p><strong>原因：</strong><span style="color:#ff9900;">我们用的是es用户，而不是root，所以文件权限不足</span></p> 
<p><span style="color:#ff9900;"><strong>解决方法：</strong></span></p> 
<blockquote> 
 <p><span style="color:#ff9900;"><strong>方案1：</strong></span></p> 
 <ul><li><span style="color:#0d0016;">sudo chmod -R 777 /usr/local/elasticsearch（直接给足权限，路径替换成你自己es安装目录）</span></li></ul> 
 <p><strong><span style="color:#ff9900;">方案2：</span></strong></p> 
 <ul><li>首先用root用户登录,然后修改配置文件:</li><li> <pre><code class="language-javascript">vim /etc/security/limits.conf </code></pre> </li><li> <p>添加下面的内容：</p> </li><li> <pre><code class="language-javascript">* soft nofile 65536 
* hard nofile 131072 
* soft nproc 4096 
* hard nproc 4096 </code></pre> </li></ul> 
</blockquote> 
<h3>3.线程数不够</h3> 
<p><span style="color:#fe2c24;">max number of threads [1024] for user [es] is too low, increase to at least [4096] </span></p> 
<p><span style="color:#ff9900;"><strong>解决方法：</strong></span></p> 
<blockquote> 
 <ul><li> <pre><code class="language-javascript">vim /etc/security/limits.d/20-nproc.conf</code></pre> </li><li> <p><span style="color:#0d0016;">修改下面的内容：</span></p> </li><li> <pre><code class="language-javascript"> soft nproc 1024 改为 soft nproc 4096 </code></pre> </li><li>执行 <code>vim /etc/security/limits.conf</code>,在文件最后添加:</li><li> <pre><code class="language-javascript">* soft nproc 65535
* hard nproc 65535</code></pre> </li></ul> 
</blockquote> 
<h3>4.不能以root账户进行启动</h3> 
<p id="articleContentId"><span style="color:#fe2c24;">can not run elasticsearch as root</span></p> 
<p><strong>原因：</strong>意思是不能使用root账户启动，我们可以创建普通用户来进行Es的启动，操作指令如下，可根据自己实际情况而定</p> 
<p><strong><span style="color:#ff9900;">解决方法：</span></strong></p> 
<blockquote> 
 <ul><li>创建非root用户</li></ul> 
 <pre><code class="language-javascript">[root@localhost ~]# useradd es
[root@localhost ~]# passwd es
Changing password for user es.
New password:    【Wahaha123】
Retype new password: 
[root@localhost ~]# chmod 777 /usr/local   【授予es用户/usr/local目录  可读可写可执行权限】
[root@localhost ~]# su es
[es@localhost ~]$ </code></pre> 
</blockquote> 
<h3>5.<strong style="color:#4f4f4f;font-weight:bold;">进程虚拟内存不足</strong></h3> 
<p><strong>max virtual memory areas vm.max map count [65530l is too low,increase to at least [262144]</strong></p> 
<p><img alt="" height="321" src="https://images2.imgbox.com/82/3e/uWckYRnb_o.png" width="1197"></p> 
<p><strong><span style="color:#ff9900;">通过设置 vm.max_map_count：限制一个进程可以拥有的VMA(虚拟内存区域)的数量</span></strong></p> 
<blockquote> 
 <ul><li> <p>使用root用户，修改配置文件， <code>vim /etc/sysctl.conf</code> 添加下面内容：</p> </li><li> <pre><code class="language-javascript">vm.max_map_count=655360 </code></pre> </li></ul> 
 <ul><li> <p>修改完成之后在终端执行</p> </li><li> <pre><code class="language-javascript">##然后执行命令
sysctl -p </code></pre> </li></ul> 
</blockquote> 
<h3>6.未设置节点</h3> 
<p><span style="color:#fe2c24;">the default discovery settings are unsuitable for production use; at least one of [discovery.seed_ho...]</span></p> 
<h5><span style="color:#ff9900;">解决方法：</span></h5> 
<blockquote> 
 <ul><li>修改elasticsearch.yml</li><li> <pre><code class="language-javascript">cluster.name: my-application
node.name: node-1
cluster.initial_master_nodes: ["node-1"]</code></pre> </li></ul> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d75b212ad9cb5266ce5c5b4a9ec6b689/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C# 植物大战僵尸</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4c429d748b73f528bc5b99bafd9b2237/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">力扣刷题之3098.求出所有子序列的能量和</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>