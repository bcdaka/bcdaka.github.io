<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微服务部署上线过程总结 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ab54bc6a3978b07daf807384bbf3be6c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="微服务部署上线过程总结">
  <meta property="og:description" content="目录
一、找到适合自己的部署方式 二、开始部署，先安装需要的环境 2.1 梳理一下都需要安装什么软件
2.2 配置数据库环境
2.3 配置redis 2.4 配置nacos
2.5 配置rabbitmq
2.6 配置docker环境 三、环境配置好了，开始部署后端 3.1 梳理后端都有什么端口
3.2 部署后端
3.3 部署后端之前的项目配置
四、部署前端
五、域名配置 一、找到适合自己的部署方式 我使用的是宝塔linux部署，但是宝塔安装rabbitmq无法启动（暂时不知道什么原因），所以我最后选择在centos中部署项目。
选择centos部署的原因：
centos中原生部署有点麻烦，我选择在centos中安装了一个宝塔来部署，至于为什么我选择在centos中安装宝塔，是因为我宝塔启动不了rabbitmq，所以我打算在centos中安装rabbitmq，其他的软件都在宝塔安装就好了。（哈哈哈 投机取巧）
二、开始部署，先安装需要的环境 我使用的是腾讯云，在腾讯云买了一个2核8g的服务器，安装的是centos7.6的系统。
接下来就需要在centos中安装宝塔了，安装宝塔的详细步骤如下，跟着来就行了！
CentOS宝塔搭建（超详细）
宝塔搭建好了，就看下面步骤吧！！！ 2.1 梳理一下都需要安装什么软件 1. 需要数据库mysql8
2. 需要redis做缓存
3. 需要nacos做服务中心
4. 需要rabbitmq做消息队列
5. 我有个代码沙箱，所以还需要个docker 2.2 配置数据库环境 跟着我这篇博客一步一步来就好了，很简单 宝塔面板安装MySQL8数据库 2.3 配置redis 宝塔安装redis并且远程连接redis教程跟着我这篇博客一步一步来就好了，很简单 宝塔安装redis并且远程连接redis教程 2.4 配置nacos （1） 下载安装包 我需要2.2.0版本的，你需要什么版本自己去springcloud官网查看就行 地址 :http://https: github.com/alibaba/nacos/releases （2） 版本要选2.2.0.tar.gz （3）上传到服务器并安装
无脑安装：
进入目录 你放安装包的目录 cd /www/server/Nacos 解压 tar -xvf nacos-server-2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-28T22:46:40+08:00">
    <meta property="article:modified_time" content="2024-06-28T22:46:40+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微服务部署上线过程总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E6%89%BE%E5%88%B0%E9%80%82%E5%90%88%E8%87%AA%E5%B7%B1%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E6%89%BE%E5%88%B0%E9%80%82%E5%90%88%E8%87%AA%E5%B7%B1%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%C2%A0" rel="nofollow">一、找到适合自己的部署方式 </a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%EF%BC%8C%E5%85%88%E5%AE%89%E8%A3%85%E9%9C%80%E8%A6%81%E7%9A%84%E7%8E%AF%E5%A2%83%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%EF%BC%8C%E5%85%88%E5%AE%89%E8%A3%85%E9%9C%80%E8%A6%81%E7%9A%84%E7%8E%AF%E5%A2%83%C2%A0" rel="nofollow">二、开始部署，先安装需要的环境 </a></p> 
<p id="2.1%20%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E9%83%BD%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%E4%BB%80%E4%B9%88%E8%BD%AF%E4%BB%B6-toc" style="margin-left:40px;"><a href="#2.1%20%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E9%83%BD%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%E4%BB%80%E4%B9%88%E8%BD%AF%E4%BB%B6" rel="nofollow">2.1 梳理一下都需要安装什么软件</a></p> 
<p id="2.2%20%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#2.2%20%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83" rel="nofollow">2.2 配置数据库环境</a></p> 
<p id="2.3%20%E9%85%8D%E7%BD%AEredis%C2%A0-toc" style="margin-left:40px;"><a href="#2.3%20%E9%85%8D%E7%BD%AEredis%C2%A0" rel="nofollow">2.3 配置redis </a></p> 
<p id="2.4%20%E9%85%8D%E7%BD%AEnacos-toc" style="margin-left:40px;"><a href="#2.4%20%E9%85%8D%E7%BD%AEnacos" rel="nofollow">2.4 配置nacos</a></p> 
<p id="2.5%20%E9%85%8D%E7%BD%AErabbitmq-toc" style="margin-left:40px;"><a href="#2.5%20%E9%85%8D%E7%BD%AErabbitmq" rel="nofollow">2.5 配置rabbitmq</a></p> 
<p id="2.6%20%E9%85%8D%E7%BD%AEdocker%E7%8E%AF%E5%A2%83%C2%A0-toc" style="margin-left:40px;"><a href="#2.6%20%E9%85%8D%E7%BD%AEdocker%E7%8E%AF%E5%A2%83%C2%A0" rel="nofollow">2.6 配置docker环境 </a></p> 
<p id="%E4%B8%89%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E5%A5%BD%E4%BA%86%EF%BC%8C%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E5%A5%BD%E4%BA%86%EF%BC%8C%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%C2%A0" rel="nofollow">三、环境配置好了，开始部署后端 </a></p> 
<p id="3.1%20%E6%A2%B3%E7%90%86%E5%90%8E%E7%AB%AF%E9%83%BD%E6%9C%89%E4%BB%80%E4%B9%88%E7%AB%AF%E5%8F%A3-toc" style="margin-left:40px;"><a href="#3.1%20%E6%A2%B3%E7%90%86%E5%90%8E%E7%AB%AF%E9%83%BD%E6%9C%89%E4%BB%80%E4%B9%88%E7%AB%AF%E5%8F%A3" rel="nofollow">3.1 梳理后端都有什么端口</a></p> 
<p id="3.2%20%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF-toc" style="margin-left:40px;"><a href="#3.2%20%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF" rel="nofollow">3.2 部署后端</a></p> 
<p id="3.3%20%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#3.3%20%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE" rel="nofollow">3.3 部署后端之前的项目配置</a></p> 
<p id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF" rel="nofollow">四、部署前端</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE%C2%A0" rel="nofollow">五、域名配置 </a></p> 
<hr id="hr-toc"> 
<h2>一、找到适合自己的部署方式 </h2> 
<p>  我使用的是宝塔linux部署，但是宝塔安装rabbitmq无法启动（暂时不知道什么原因），所以我最后选择在centos中部署项目。</p> 
<blockquote> 
 <p><strong>选择centos部署的原因：</strong></p> 
 <p>  centos中原生部署有点麻烦，我选择在centos中安装了一个宝塔来部署，至于为什么我选择在centos中安装宝塔，是因为我宝塔启动不了rabbitmq，所以我打算在centos中安装rabbitmq，其他的软件都在宝塔安装就好了。<span style="color:#a2e043;">（哈哈哈 投机取巧）</span></p> 
</blockquote> 
<h2 id="%E4%BA%8C%E3%80%81%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%EF%BC%8C%E5%85%88%E5%AE%89%E8%A3%85%E9%9C%80%E8%A6%81%E7%9A%84%E7%8E%AF%E5%A2%83%C2%A0" style="background-color:transparent;">二、开始部署，先安装需要的环境 </h2> 
<p>   我使用的是腾讯云，在腾讯云买了一个2核8g的服务器，安装的是centos7.6的系统。</p> 
<p>   接下来就需要在centos中安装宝塔了，安装宝塔的详细步骤如下，跟着来就行了！</p> 
<p><a class="link-info" href="https://blog.csdn.net/weixin_47723549/article/details/124713812" title="   CentOS宝塔搭建（超详细）">   CentOS宝塔搭建（超详细）</a></p> 
<p> <strong>  宝塔搭建好了，就看下面步骤吧！！！ </strong></p> 
<h3 id="2.1%20%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E9%83%BD%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%E4%BB%80%E4%B9%88%E8%BD%AF%E4%BB%B6">2.1 梳理一下都需要安装什么软件</h3> 
<blockquote> 
 <p>1. 需要数据库mysql8</p> 
 <p>2. 需要redis做缓存</p> 
 <p>3. 需要nacos做服务中心</p> 
 <p>4. 需要rabbitmq做消息队列</p> 
 <p>5. 我有个代码沙箱，所以还需要个docker </p> 
</blockquote> 
<h3 id="2.2%20%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83">2.2 配置数据库环境</h3> 
<blockquote> 
 <p>跟着我这篇博客一步一步来就好了，很简单 </p> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135569988?spm=1001.2014.3001.5501" title="宝塔面板安装MySQL8数据库">宝塔面板安装MySQL8数据库</a> </p> 
</blockquote> 
<h3 id="2.3%20%E9%85%8D%E7%BD%AEredis%C2%A0">2.3 配置redis </h3> 
<blockquote> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135570310?spm=1001.2014.3001.5501" title="宝塔安装redis并且远程连接redis教程">宝塔安装redis并且远程连接redis教程</a>跟着我这篇博客一步一步来就好了，很简单 </p> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135570310?spm=1001.2014.3001.5501" title="宝塔安装redis并且远程连接redis教程">宝塔安装redis并且远程连接redis教程</a> </p> 
</blockquote> 
<h3 id="2.4%20%E9%85%8D%E7%BD%AEnacos">2.4 配置nacos</h3> 
<p>（1） <span style="color:#333333;">下载安装包 </span></p> 
<p>我需要2.2.0版本的，你需要什么版本自己去springcloud官网查看就行 </p> 
<blockquote> 
 <div> 
  <span style="color:#333333;">地址</span> 
  <span style="color:#333333;">:<a class="link-info" href="http://https/alibaba/nacos/releases" rel="nofollow" title="http://https: github.com/alibaba/nacos/releases">http://https: github.com/alibaba/nacos/releases</a></span> 
 </div> 
</blockquote> 
<p>（2） <span style="color:#333333;">版本要选</span><span style="color:#333333;">2.2.0.tar.gz </span></p> 
<p><img alt="" height="319" src="https://images2.imgbox.com/fc/51/Re33m3fO_o.png" width="727"></p> 
<p>（3）<span style="color:#333333;">上传到服务器并安装</span></p> 
<p><span style="color:#333333;">无脑安装：</span></p> 
<pre><code class="language-bash">进入目录 你放安装包的目录
cd /www/server/Nacos
解压
tar -xvf nacos-server-2.2.0.tar.gz
删除安装包
rm -rf nacos-server-2.2.0.tar.gz
进入目录
cd /www/server/Nacos/nacos/bin
运行 单机部署
sh startup.sh -m standalone
关闭
sh shutdown.sh #查看nacos运行状态
ps -ef | grep nacos #查看日志
cat /www/server/Nacos/nacos/logs/start.out</code></pre> 
<p> （4）防火墙开放8848端口，<span style="color:#333333;">本地连接</span><span style="color:#1f75ff;">http: ip:8848/nacos/index.html</span><span style="color:#333333;">，看看是否能够连接。切记服务器的防火墙的也要放行。账号</span><span style="color:#333333;">:nacos </span><span style="color:#333333;">密码</span><span style="color:#333333;">:nacos </span></p> 
<p> （5）<span style="color:#333333;">如果服务器内存不够也可以修改，nacos</span><span style="color:#333333;">启动占用的内存。默认是：</span><span style="color:#333333;">-Xms512m -Xmx512m - </span></p> 
<div> 
 <span style="color:#333333;">Xmn256m 查看教程:</span> 
 <span style="color:#1f75ff;">https: blog.csdn.net/weixin_48016395/article/details/124239230</span> 
</div> 
<p> </p> 
<h3 id="2.5%20%E9%85%8D%E7%BD%AErabbitmq">2.5 配置rabbitmq</h3> 
<blockquote> 
 <p>跟着教程无脑操作吧 </p> 
 <p><a class="link-info" href="https://blog.csdn.net/Siebert_Angers/article/details/127429611" title="Centos7安装配置RabbitMQ">Centos7安装配置RabbitMQ</a> </p> 
</blockquote> 
<h3 id="2.6%20%E9%85%8D%E7%BD%AEdocker%E7%8E%AF%E5%A2%83%C2%A0">2.6 配置docker环境 </h3> 
<blockquote> 
 <p>这里这个docker我配置在了另一个服务器上，另一个服务器是2核2g的，用的是ubuntu系统，</p> 
 <p>我弄完系统直接就是apt install docker.io了，然后配了个jdk1.8（因为要启动java）</p> 
</blockquote> 
<blockquote> 
 <p> 如果你想用centos配也行，下面教程无脑操作就行了</p> 
 <p><a class="link-info" href="https://blog.csdn.net/qq_27820913/article/details/128156684" title="Centos7安装docker详细教程">Centos7安装docker详细教程</a></p> 
</blockquote> 
<h2 id="%E4%B8%89%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E5%A5%BD%E4%BA%86%EF%BC%8C%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%C2%A0">三、环境配置好了，开始部署后端 </h2> 
<h3 id="3.1%20%E6%A2%B3%E7%90%86%E5%90%8E%E7%AB%AF%E9%83%BD%E6%9C%89%E4%BB%80%E4%B9%88%E7%AB%AF%E5%8F%A3">3.1 梳理后端都有什么端口</h3> 
<blockquote> 
 <p>网关服务 8101端口<br> 用户服务 8102端口<br> 题目服务 8103端口<br> 判题服务 8104端口</p> 
 <p>代码沙箱服务 8090端口</p> 
</blockquote> 
<h3 id="3.2%20%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF">3.2 部署后端</h3> 
<p>给每个项目进行打包，然后都上传到服务器上</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/e1/42/wiwHkRNV_o.png" width="951"></p> 
<blockquote> 
 <p>然后部署后端教程如下：</p> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135571370?spm=1001.2014.3001.5501" title="宝塔上线前后端项目操作">宝塔上线前后端项目操作</a> </p> 
</blockquote> 
<p>每个项目都像教程里部署好，因为环境已经安装完成了，接下来的挨个启动项目，如果启动失败，就点进去查看日志，如图所示</p> 
<p><img alt="" height="684" src="https://images2.imgbox.com/fd/a5/Dw7HJdDD_o.png" width="826"></p> 
<h3 id="3.3%20%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE">3.3 部署后端之前的项目配置</h3> 
<p> 给每个需要启动的项目配置一个新的yml，这个yml设置为application-prod.yml，prod是用于生产环境启动的配置，这个配置可以把之前yml的内容复制过来，然后改一下数据库的地址，是线上数据库地址，例如：</p> 
<pre><code class="language-bash">  # 数据库配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://线上地址/数据库名字
    username: root
    password: root</code></pre> 
<p>然后需要改rabbitmq的用户名和密码，如果你的rabbitmq用户名和密码自己改了的话</p> 
<p>接着如果你的redis配置了密码的话 也需要改。如果你还用了redisson那你redisson也需要加入密码：</p> 
<pre><code class="language-java">@Configuration
@ConfigurationProperties(prefix = "spring.redis")
@Data
public class RedissonConfig {

    private String host;
    private String port;
    private Integer database;
    private String password;

    @Bean
    public RedissonClient redissonClient(){
        Config config = new Config();
        config.useSingleServer()
                .setDatabase(3)
                .setAddress("redis://"+host+":"+port)
                .setPassword(password);
        RedissonClient redissonClient = Redisson.create(config);
        return redissonClient;
    }
}
</code></pre> 
<p> 这样应该就差不多了，都配置好之后直接打包就可以了。</p> 
<h2 id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF">四、部署前端</h2> 
<blockquote> 
 <p>前端部署也如教程操作：</p> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135571370?spm=1001.2014.3001.5501" title="宝塔上线前后端项目操作">宝塔上线前后端项目操作</a></p> 
</blockquote> 
<p>下一步： </p> 
<blockquote> 
 <p>如果你部署前端的时候nginx报错了，那就请看这个博客：</p> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135580274?spm=1001.2014.3001.5501" title="宝塔nginx部署前端页面刷新报404">宝塔nginx部署前端页面刷新报404</a> </p> 
</blockquote> 
<h2 id="%E4%BA%94%E3%80%81%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE%C2%A0">五、域名配置 </h2> 
<blockquote> 
 <p> 域名配置也如教程操作：很简单</p> 
 <p><a class="link-info" href="https://blog.csdn.net/m0_57209427/article/details/135571370?spm=1001.2014.3001.5501" title=" 宝塔上线前后端项目操作"> 宝塔上线前后端项目操作</a></p> 
</blockquote> 
<p><span style="color:#fe2c24;"><strong>到这里应该就没什么问题了，我这个是给自己写的笔记，随便记一下过程，如果对你有帮助的话，就给我来个三连吧，如果你还有问题就请在评论区留言，我回复很快的哦！ </strong></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e095e06a25b5a2e6b63fb3f1ba046b8e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">昇思25天学习打卡营第3天|数据集全攻略：加载、操作与自定义</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9e76419a4d3c5cd8f42144a00ed0a132/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Cyuyanzhong的内存函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>