<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;11深度剖析 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2aca8c2f2ebc6f1f8f5b263c58ff633c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C&#43;&#43;11深度剖析">
  <meta property="og:description" content="目录 🚀 前言：C&#43;&#43;11简介 一： 🔥 统一的列表初始化💫 2.1 ｛｝初始化 二： 🔥 std::initializer_list 💫 2.1 std::initializer_list是什么类型💫 2.2 std::initializer_list使用场景 三： 🔥 声明 💫 3.1 auto💫 3.2 decltype💫 3.3 nullptr 四： 🔥 范围for循环 五： 🔥 智能指针 六： 🔥 STL中一些变化 七： 🔥 右值引用和移动语义 💫 7.1 左值引用和右值引用💫 7.2 左值引用与右值引用比较💫 7.3 右值引用使用场景和意义💫 7.4 右值引用引用左值及其一些更深入的使用场景分析💫 7.5 完美转发7.5.1 模板中的 &amp;&amp; 万能引用7.5.2 完美转发 八： 🔥 新的类功能 九： 🔥 可变参数模板 💫 9.1 递归函数展开参数包💫 9.2 逗号表达式展开参数包💫 9.3 可变参数包结合完美转发的好处 十： 🔥 lambda表达式 💫 10.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-02T22:01:05+08:00">
    <meta property="article:modified_time" content="2024-08-02T22:01:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;11深度剖析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#font_colorDarkOrchid__C11_font_4" rel="nofollow"><font color="DarkOrchid"> 🚀 前言：C++11简介 </font></a></li><li><a href="#font_colorDarkOrchid__font_6" rel="nofollow"><font color="DarkOrchid">一： 🔥 统一的列表初始化</font></a></li><li><ul><li><a href="#_21__7" rel="nofollow">💫 2.1 ｛｝初始化</a></li></ul> 
  </li><li><a href="#font_colorDarkOrchid__stdinitializer_list_font_79" rel="nofollow"><font color="DarkOrchid">二： 🔥 std::initializer_list </font></a></li><li><ul><li><a href="#_21_stdinitializer_list_81" rel="nofollow">💫 2.1 std::initializer_list是什么类型</a></li><li><a href="#_22_stdinitializer_list_94" rel="nofollow">💫 2.2 std::initializer_list使用场景</a></li></ul> 
  </li><li><a href="#font_colorDarkOrchid___font_97" rel="nofollow"><font color="DarkOrchid">三： 🔥 声明 </font></a></li><li><ul><li><a href="#_31_auto_99" rel="nofollow">💫 3.1 auto</a></li><li><a href="#_32_decltype_117" rel="nofollow">💫 3.2 decltype</a></li><li><a href="#_33_nullptr_142" rel="nofollow">💫 3.3 nullptr</a></li></ul> 
  </li><li><a href="#font_colorDarkOrchid___for_font_155" rel="nofollow"><font color="DarkOrchid">四： 🔥 范围for循环 </font></a></li><li><a href="#font_colorDarkOrchid____font_157" rel="nofollow"><font color="DarkOrchid">五： 🔥 智能指针 </font></a></li><li><a href="#font_colorDarkOrchid___STL_font_160" rel="nofollow"><font color="DarkOrchid">六： 🔥 STL中一些变化 </font></a></li><li><a href="#font_colorDarkOrchid____font_173" rel="nofollow"><font color="DarkOrchid">七： 🔥 右值引用和移动语义 </font></a></li><li><ul><li><a href="#_71__174" rel="nofollow">💫 7.1 左值引用和右值引用</a></li><li><a href="#_72__221" rel="nofollow">💫 7.2 左值引用与右值引用比较</a></li><li><a href="#_73__262" rel="nofollow">💫 7.3 右值引用使用场景和意义</a></li><li><a href="#_74__401" rel="nofollow">💫 7.4 右值引用引用左值及其一些更深入的使用场景分析</a></li><li><a href="#_75__429" rel="nofollow">💫 7.5 完美转发</a></li><li><ul><li><a href="#751____430" rel="nofollow">7.5.1 模板中的 &amp;&amp; 万能引用</a></li><li><a href="#752__461" rel="nofollow">7.5.2 完美转发</a></li></ul> 
  </li></ul> 
  </li><li><a href="#font_colorDarkOrchid___font_489" rel="nofollow"><font color="DarkOrchid">八： 🔥 新的类功能 </font></a></li><li><a href="#font_colorDarkOrchid___font_530" rel="nofollow"><font color="DarkOrchid">九： 🔥 可变参数模板 </font></a></li><li><ul><li><a href="#__91__556" rel="nofollow">💫 9.1 递归函数展开参数包</a></li><li><a href="#__92__574" rel="nofollow">💫 9.2 逗号表达式展开参数包</a></li><li><a href="#__93__599" rel="nofollow">💫 9.3 可变参数包结合完美转发的好处</a></li></ul> 
  </li><li><a href="#font_colorDarkOrchid__lambda_font_648" rel="nofollow"><font color="DarkOrchid">十： 🔥 lambda表达式 </font></a></li><li><ul><li><a href="#_101_C98_649" rel="nofollow">💫 10.1 C++98中的一个例子</a></li><li><a href="#_102_lambda_705" rel="nofollow">💫 10.2 lambda表达式</a></li><li><a href="#_103_lambda_722" rel="nofollow">💫 10.3 lambda表达式语法</a></li><li><a href="#_104_lambda_786" rel="nofollow">💫 10.4 函数对象与lambda表达式底层原理</a></li></ul> 
  </li><li><a href="#font_colorDarkOrchid___font_819" rel="nofollow"><font color="DarkOrchid">十一： 🔥 包装器 </font></a></li><li><ul><li><a href="#_112_bind_1005" rel="nofollow">💫 11.2 bind</a></li></ul> 
  </li><li><a href="#font_colorDarkOrchid___font_1101" rel="nofollow"><font color="DarkOrchid"> 🚀 结尾 </font></a></li></ul> 
</div> 
<p></p> 
<img src="https://images2.imgbox.com/33/43/V4fPNx9K_o.gif" width="160%"> 
<h2><a id="font_colorDarkOrchid__C11_font_4"></a><font color="DarkOrchid"> 🚀 前言：C++11简介 </font></h2> 
<p>在2003年C++标准委员会曾经提交了一份技术勘误表(简称TC1)，使得C++03这个名字已经取代了C++98称为C++11之前的最新C++标准名称。不过由于C++03(TC1)主要是对C++98标准中的漏洞进行修复，语言的核心部分则没有改动，因此人们习惯性的把两个标准合并称为C++98/03标准。从C++0x到C++11，C++标准10年磨一剑，第二个真正意义上的标准珊珊来迟。<strong>相比于C++98 / 03，C++11则带来了数量可观的变化，其中包含了约140个新特性，以及对C++03标准中约600个缺陷的修正，这使得C++11更像是从C++98/03中孕育出的一种新语言。相比较而言，C++11能更好地用于系统开发和库开发、语法更加泛华和简单化、更加稳定和安全，不仅功能更强大，而且能提升程序员的开发效率，公司实际项目开发中也用得比较多，所以我们要作为一个重点去学习</strong>。C++11增加的语法特性非常篇幅非常多，我们这里没办法一一讲解，所以本文主要讲解实际中比较实用的语法</p> 
<h2><a id="font_colorDarkOrchid__font_6"></a><font color="DarkOrchid">一： 🔥 统一的列表初始化</font></h2> 
<h3><a id="_21__7"></a>💫 2.1 ｛｝初始化</h3> 
<ul><li>在C++98中，标准允许使用花括号 {} 对数组或者结构体元素进行统一的列表初始值设定。比如：</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">// c++98</span>
<span class="token keyword">struct</span> <span class="token class-name">Point</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> _x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> array1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> array2<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	Point p <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>C++11扩大了用大括号括起的列表(初始化列表)的使用范围，使其可用于所有的内置类型和用户自定义的类型，<strong>使用列表初始化时，可添加等号 ( = ) ，也可不添加。</strong><br> <mark>相信大家对这种改变也是仁者见仁， 智者见智</mark></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">Point</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> _x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> x2<span class="token punctuation">{<!-- --></span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> array1<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> array2<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	Point p<span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">// C++11中列表初始化也可以适用于new表达式中</span>
	<span class="token keyword">int</span><span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>创建对象时也可以使用列表初始化方式调用构造函数初始化</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token operator">:</span><span class="token function">_year</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_month</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_day</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Date(int year, int month, int day)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// old style</span>
	<span class="token comment">// C++11支持的列表初始化，这里会调用构造函数初始化</span>
	Date d2<span class="token punctuation">{<!-- --></span> <span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	Date d3 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="font_colorDarkOrchid__stdinitializer_list_font_79"></a><font color="DarkOrchid">二： 🔥 std::initializer_list </font></h2> 
<p><strong><a href="http://www.cplusplus.com/reference/initializer_list/initializer_list/" rel="nofollow">std::initializer_list的介绍文档</a></strong></p> 
<h3><a id="_21_stdinitializer_list_81"></a>💫 2.1 std::initializer_list是什么类型</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// the type of il is an initializer_list</span>
	<span class="token keyword">auto</span> il <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>il<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//输出： class std::initializer_list&lt;int&gt;</span>
</code></pre> 
<h3><a id="_22_stdinitializer_list_94"></a>💫 2.2 std::initializer_list使用场景</h3> 
<blockquote> 
 <p>std::initializer_list一般是作为构造函数的参数，C++11对STL中的不少容器就增加std::initializer_list作为参数的构造函数，这样初始化容器对象就更方便了。也可以作为operator=的参数，这样就可以用大括号赋值。</p> 
</blockquote> 
<h2><a id="font_colorDarkOrchid___font_97"></a><font color="DarkOrchid">三： 🔥 声明 </font></h2> 
<p><strong><code>c++11提供了多种简化声明的方式，尤其是在使用模板时。</code></strong></p> 
<h3><a id="_31_auto_99"></a>💫 3.1 auto</h3> 
<blockquote> 
 <p>在C++98中auto是一个存储类型的说明符，表明变量是局部自动存储类型，但是局部域中定义局部的变量默认就是自动存储类型，所以auto就没什么价值了。<strong>C++11中废弃auto原来的用法，将其用于实现自动类型判断。这样要求必须进行显示初始化，让编译器将定义对象的类型设置为初始化值的类型。</strong></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
	<span class="token keyword">auto</span> pf <span class="token operator">=</span> strcpy<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>pf<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span><span class="token string">"sort"</span><span class="token punctuation">,</span> <span class="token string">"排序"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"insert"</span><span class="token punctuation">,</span> <span class="token string">"插入"</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//map&lt;string, string&gt;::iterator it = dict.begin();</span>
	<span class="token keyword">auto</span> it <span class="token operator">=</span> dict<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_32_decltype_117"></a>💫 3.2 decltype</h3> 
<ul><li>关键字<strong>decltype</strong>将变量的类型声明为表达式指定的类型。</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">// decltype的一些使用使用场景</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T1</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T2</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">F</span><span class="token punctuation">(</span>T1 t1<span class="token punctuation">,</span> T2 t2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">decltype</span><span class="token punctuation">(</span>t1 <span class="token operator">*</span> t2<span class="token punctuation">)</span> ret<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token number">2.2</span><span class="token punctuation">;</span>
	<span class="token keyword">decltype</span><span class="token punctuation">(</span>x <span class="token operator">*</span> y<span class="token punctuation">)</span> ret<span class="token punctuation">;</span> <span class="token comment">// ret的类型是double</span>
	<span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span> p<span class="token punctuation">;</span> <span class="token comment">// p的类型是int*</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">F</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_33_nullptr_142"></a>💫 3.3 nullptr</h3> 
<blockquote> 
 <p>由于C++中NULL被定义成字面量0，这样就可能回带来一些问题，因为0既能指针常量，又能表示整形常量。<strong>所以出于清晰和安全的角度考虑，C++11中新增了nullptr，用于表示空指针。</strong></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression"><span class="token constant">NULL</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NULL</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NULL</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre> 
<h2><a id="font_colorDarkOrchid___for_font_155"></a><font color="DarkOrchid">四： 🔥 范围for循环 </font></h2> 
<p>这个相对简单之前的博客也有介绍，这里就不赘述了</p> 
<h2><a id="font_colorDarkOrchid____font_157"></a><font color="DarkOrchid">五： 🔥 智能指针 </font></h2> 
<p><code>这一部分在后面的博客中会详细讲解</code></p> 
<h2><a id="font_colorDarkOrchid___STL_font_160"></a><font color="DarkOrchid">六： 🔥 STL中一些变化 </font></h2> 
<p><strong>新容器</strong><br> 用橘色圈起来是C++11中的一些几个新容器，但是实际最有用的是unordered_map和unordered_set。这两个我们前面已经进行了非常详细的讲解，其他的大家了解一下即可。</p> 
<p><img src="https://images2.imgbox.com/16/bb/abKbCQqE_o.png" alt="在这里插入图片描述"><br> <strong>容器中的一些新方法</strong></p> 
<ul><li>如果我们再细细去看会发现基本每个容器中都增加了一些C++11的方法，但是其实很多都是用得比较少的。</li><li>比如提供了<strong>cbegin和cend方法返回const迭代器等等</strong>，但是实际意义不大，因为begin和end也是可以返回const迭代器的，这些都是属于锦上添花的操作。</li><li>实际上C++11更新后，容器中增加的新方法<strong>最后用的插入接口函数的右值引用版本。</strong></li></ul> 
<p><strong>但是这些接口到底意义在哪？网上都说他们能提高效率，他们是如何提高效率的？</strong><br> 请看下面的右值引用和移动语义章节的讲解。另外emplace还涉及模板的可变参数，也需要再继续深入学习后面章节的知识。</p> 
<h2><a id="font_colorDarkOrchid____font_173"></a><font color="DarkOrchid">七： 🔥 右值引用和移动语义 </font></h2> 
<h3><a id="_71__174"></a>💫 7.1 左值引用和右值引用</h3> 
<blockquote> 
 <p>传统的C++语法中就有引用的语法，而C++11中新增了的右值引用语法特性，所以从现在开始我们之前学习的引用就叫做左值引用。<strong>无论左值引用还是右值引用，都是给对象取别名。</strong></p> 
</blockquote> 
<p><strong>什么是左值？什么是左值引用?</strong></p> 
<ul><li>左值是一个表示数据的表达式(如变量名或解引用的指针)，<strong>我们可以获取它的地址 + 可以对它赋值，左值可以出现赋值符号的左边，右值不能出现在赋值符号左边。</strong> 定义时const修饰符后的左值，不能给他赋值，但是可以取它的地址。左值引用就是给左值的引用，给左值取别名。</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 以下的p、b、c、*p都是左值</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token comment">// 以下几个是对上面左值的左值引用</span>
	<span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&amp;</span> rp <span class="token operator">=</span> p<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> rb <span class="token operator">=</span> b<span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> rc <span class="token operator">=</span> c<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> pvalue <span class="token operator">=</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>什么是右值？什么是右值引用？</strong></p> 
<ul><li>右值也是一个表示数据的表达式，如：字面常量、表达式返回值，函数返回值(这个不能是左值引用返回)等等，<strong>右值可以出现在赋值符号的右边，但是不能出现出现在赋值符号的左边，右值不能取地址。右值引用就是对右值的引用，给右值取别名。</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token number">1.1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2.2</span><span class="token punctuation">;</span>
	<span class="token comment">// 以下几个都是常见的右值</span>
	<span class="token number">10</span><span class="token punctuation">;</span>
	x <span class="token operator">+</span> y<span class="token punctuation">;</span>
	<span class="token function">fmin</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 以下几个都是对右值的右值引用</span>
	<span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> rr1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> rr2 <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
	<span class="token keyword">double</span><span class="token operator">&amp;&amp;</span> rr3 <span class="token operator">=</span> <span class="token function">fmin</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 这里编译会报错：error C2106: “=”: 左操作数必须为左值</span>
	<span class="token number">10</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	x <span class="token operator">+</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token function">fmin</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>需要注意的是右值是不能取地址的，但是给右值取别名后，会导致右值被存储到特定位置，且可以取到该位置的地址，也就是说例如：不能取字面量10的地址，但是rr1引用后，可以对rr1取地址，也可以修改rr1。如果不想rr1被修改，可以用const int&amp;&amp; rr1 去引用，是不是感觉很神奇，这个了解一下实际中右值引用的使用场景并不在于此，这个特性也不重要。</strong></p> 
</blockquote> 
<h3><a id="_72__221"></a>💫 7.2 左值引用与右值引用比较</h3> 
<ul><li><code>左值引用总结：</code></li><li> 
  <ol><li><strong><code>左值引用只能引用左值，不能引用右值。</code></strong></li></ol> </li><li> 
  <ol start="2"><li><strong><code>但是const左值引用既可引用左值，也可引用右值</code></strong>(隐式类型转换产生的临时变量)</li></ol> </li><li><mark>这就是为什么很多成员函数参数中都要+const 这样子就可以传入右值参数（同时兼容左值和右值）</mark></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 左值引用只能引用左值，不能引用右值。</span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> ra1 <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// ra为a的别名</span>
	<span class="token comment">//int&amp; ra2 = 10; // 编译失败，因为10是右值</span>
	<span class="token comment">// const左值引用既可引用左值，也可引用右值。</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ra3 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ra4 <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>右值引用总结：</code></li><li>1.<strong><code> 右值引用只能右值，不能引用左值。</code></strong></li><li>2.<strong><code> 但是右值引用可以move以后的左值。</code></strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 右值引用只能右值，不能引用左值。</span>
	<span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	
	<span class="token comment">// error C2440: “初始化”: 无法从“int”转换为“int &amp;&amp;”</span>
	<span class="token comment">// message : 无法将左值绑定到右值引用</span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> r2 <span class="token operator">=</span> a<span class="token punctuation">;</span>
	
	<span class="token comment">// 右值引用可以引用move以后的左值</span>
	<span class="token keyword">int</span><span class="token operator">&amp;&amp;</span> r3 <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_73__262"></a>💫 7.3 右值引用使用场景和意义</h3> 
<p>这是一段示例代码</p> 
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> bit
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">class</span> <span class="token class-name">string</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span>_size<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//cout &lt;&lt; "string(char* str)" &lt;&lt; endl;</span>
			_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// s1.swap(s2)</span>
		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 拷贝构造</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"string(const string&amp; s) -- 深拷贝"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 赋值重载</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"string&amp; operator=(string s) -- 深拷贝"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 移动构造</span>
		<span class="token function">string</span><span class="token punctuation">(</span>string<span class="token operator">&amp;&amp;</span> s<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_size</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"string(string&amp;&amp; s) -- 移动语义"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 移动赋值</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>string<span class="token operator">&amp;&amp;</span> s<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"string&amp; operator=(string&amp;&amp; s) -- 移动语义"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>前面我们可以看到左值引用既可以引用左值和又可以引用右值，那为什么C++11还要提出右值引用呢？是不是化蛇添足呢？下面我们来看看左值引用的短板，右值引用是如何补齐这个短板的！</code></p> 
<p><strong>左值引用的使用场景：</strong><br> <mark>做参数和做返回值都可以提高效率</mark></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span>bit<span class="token double-colon punctuation">::</span>string s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">const</span> bit<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	bit<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// func1和func2的调用我们可以看到左值引用做参数减少了拷贝，提高效率的使用场景和价值</span>
	<span class="token function">func1</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">func2</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// string operator+=(char ch) 传值返回存在深拷贝</span>
	<span class="token comment">// string&amp; operator+=(char ch) 传左值引用没有拷贝提高了效率</span>
	s1 <span class="token operator">+=</span> <span class="token char">'!'</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>左值引用的短板：</strong></p> 
<ul><li><strong><code>但是当函数返回对象是一个局部变量，出了函数作用域就不存在了，就不能使用左值引用返回，只能传值返回。</code></strong> 例如：bit::string to_string(int value) 函数中可以看到，这里只能使用传值返回，传值返回会导致至少1次拷贝构造(如果是一些旧一点的编译器可能是两次拷贝构造)。</li></ul> 
<p><strong>右值引用和移动语义解决上述问题：</strong></p> 
<ul><li><strong><code>在bit::string中增加移动构造，移动构造本质是将参数右值的资源窃取过来，占位已有，那么就不用做深拷贝了，所以它叫做移动构造，就是窃取别人的资源来构造自己。</code></strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">// 移动构造</span>
<span class="token function">string</span><span class="token punctuation">(</span>string<span class="token operator">&amp;&amp;</span> s<span class="token punctuation">)</span>
	<span class="token operator">:</span><span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_size</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">,</span><span class="token function">_capacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"string(string&amp;&amp; s) -- 移动语义"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	bit<span class="token double-colon punctuation">::</span>string ret2 <span class="token operator">=</span> bit<span class="token double-colon punctuation">::</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>再运行上面bit::to_string的两个调用，我们会发现，这里没有调用深拷贝的拷贝构造，而是调用了移动构造，移动构造中没有新开空间，拷贝数据，所以效率提高了。</p> 
<p><strong>不仅仅有移动构造，还有移动赋值：</strong></p> 
<ul><li>在bit::string类中增加移动赋值函数，再去调用bit::to_string(1234)，不过这次将bit::to_string(1234)返回的右值对象赋值给ret1对象，这时调用的是移动构造</li></ul> 
<p><strong>STL中的容器都是增加了移动构造和移动赋值</strong></p> 
<pre><code class="prism language-cpp"><span class="token comment">// 移动赋值</span>
string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>string<span class="token operator">&amp;&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"string&amp; operator=(string&amp;&amp; s) -- 移动语义"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">swap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	bit<span class="token double-colon punctuation">::</span>string ret1<span class="token punctuation">;</span>
	ret1 <span class="token operator">=</span> bit<span class="token double-colon punctuation">::</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 运行结果：</span>
<span class="token comment">// string(string&amp;&amp; s) -- 移动语义</span>
<span class="token comment">// string&amp; operator=(string&amp;&amp; s) -- 移动语义</span>
</code></pre> 
<h3><a id="_74__401"></a>💫 7.4 右值引用引用左值及其一些更深入的使用场景分析</h3> 
<blockquote> 
 <p>按照语法，右值引用只能引用右值，但右值引用一定不能引用左值吗？因为：有些场景下，可能真的需要用右值去引用左值实现移动语义。<strong>当需要用右值引用引用一个左值时，可以通过move函数将左值转化为右值</strong>。C++11中，<strong>std::move()</strong> 函数位于头文件中，该函数名字具有迷惑性，<strong>它并不搬移任何东西，唯一的功能就是将一个左值强制转化为右值引用，然后实现移动语义。（移动拷贝和移动赋值）</strong></p> 
</blockquote> 
<ul><li><mark><strong>但要注意，被强制转化为右值的左值资源可能会被掠夺，掠夺之后不能在使用这些资源，否则会出错。</strong></mark></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	list<span class="token operator">&lt;</span>bit<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span> lt<span class="token punctuation">;</span>
	bit<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"1111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 这里调用的是拷贝构造</span>
	lt<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 下面调用都是移动构造</span>
	lt<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"2222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
    <span class="token comment">// 这里我们把s1 move处理以后, 会被当成右值，调用移动构造</span>
	<span class="token comment">// 但是这里要注意，一般是不要这样用的，因为我们会发现s1的</span>
	<span class="token comment">// 资源被转移给了s3，s1被置空了。</span>
    bit<span class="token double-colon punctuation">::</span>string <span class="token function">s3</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//lt.push_back(std::move(s1));</span>
 
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/a1/uiJAoW4m_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_75__429"></a>💫 7.5 完美转发</h3> 
<h4><a id="751____430"></a>7.5.1 模板中的 &amp;&amp; 万能引用</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"左值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"const 左值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"右值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"const 右值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>


<span class="token comment">// 模板中的&amp;&amp;不代表右值引用，而是万能引用，其既能接收左值又能接收右值。</span>
<span class="token comment">// 模板的万能引用只是提供了能够接收同时接收左值引用和右值引用的能力，</span>
<span class="token comment">// 但是引用类型的唯一作用就是限制了接收的类型，后续使用中都退化成了左值，</span>
<span class="token comment">// 我们希望能够在传递过程中保持它的左值或者右值的属性, 就需要用我们下面学习的完美转发</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">PerfectForward</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> t<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">Fun</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 右值</span>
	<span class="token keyword">int</span> a<span class="token punctuation">;</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 左值</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 右值</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// const 左值</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// const 右值</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="752__461"></a>7.5.2 完美转发</h4> 
<p><strong><code>std::forward 完美转发在传参的过程中保留对象原生类型属性</code></strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"左值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"const 左值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"右值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"const 右值引用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">// std::forward&lt;T&gt;(t)在传参的过程中保持了t的原生类型属性。</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">PerfectForward</span><span class="token punctuation">(</span>T<span class="token operator">&amp;&amp;</span> t<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">Fun</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 右值</span>
	<span class="token keyword">int</span> a<span class="token punctuation">;</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 左值</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 右值</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// const 左值</span>
	<span class="token function">PerfectForward</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// const 右值</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="font_colorDarkOrchid___font_489"></a><font color="DarkOrchid">八： 🔥 新的类功能 </font></h2> 
<p><strong>默认成员函数</strong><br> 原来C++类中，有6个默认成员函数：<br> <code>1. 构造函数</code><br> <code>2. 析构函数</code><br> <code>3. 拷贝构造函数</code><br> <code>4. 拷贝赋值重载</code><br> <code>5. 取地址重载</code><br> <code>6. const 取地址重载</code></p> 
<p>最后重要的是前4个，后两个用处不大。默认成员函数就是我们不写编译器会生成一个默认的。<br> C++11 新增了两个：移动构造函数和移动赋值运算符重载。</p> 
<p><mark>针对移动构造函数和移动赋值运算符重载有一些需要注意的点如下：</mark></p> 
<ul><li> 
  <ol><li>如果<strong>你没有自己实现移动构造函数，且没有实现析构函数 、拷贝构造、拷贝赋值重载中的任意一个。那么编译器会自动生成一个默认移动构造</strong>。默认生成的移动构造函数，对于内置类型成员会执行逐成员按字节拷贝，自定义类型成员，则需要看这个成员是否实现移动构造，如果实现了就调用移动构造，没有实现就调用拷贝构造。</li></ol> </li><li> 
  <ol start="2"><li>如果<strong>你没有自己实现移动赋值重载函数，且没有实现析构函数 、拷贝构造、拷贝赋值重载中的任意一个，那么编译器会自动生成一个默认移动赋值。</strong> 默认生成的移动构造函数，对于内置类型成员会执行逐成员按字节拷贝，自定义类型成员，则需要看这个成员是否实现移动赋值，如果实现了就调用移动赋值，没有实现就调用拷贝赋值。(默认移动赋值跟上面移动构造完全类似)如果你提供了移动构造或者移动赋值，编译器不会自动提供拷贝构造和拷贝赋值。</li></ol> </li></ul> 
<ol><li>类成员变量初始化</li></ol> 
<ul><li>C++11允许在类定义时给成员变量初始缺省值，默认生成构造函数会使用这些缺省值初始化，这个我们在类和对象默认就讲了，这里就不再细讲了。</li></ul> 
<ol start="2"><li>强制生成默认函数的关键字default:</li></ol> 
<ul><li>C++11可以让你更好的控制要使用的默认函数。假设你要使用某个默认的函数，但是因为一些原因这个函数没有默认生成。比如：我们提供了拷贝构造，就不会生成移动构造了，那么我们可使用default关键字显示指定移动构造生成。</li></ul> 
<pre><code class="prism language-cpp"><span class="token function">Person</span><span class="token punctuation">(</span>Person<span class="token operator">&amp;&amp;</span> p<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>禁止生成默认函数的关键字delete:</li></ol> 
<ul><li>如果能想要限制某些默认函数的生成，在C++98中，是该函数设置成private，并且只声明补已，这样只要其他人想要调用就会报错。在C++11中更简单，只需在该函数声明加上=delete即可，该语法指示编译器不生成对应函数的默认版本，称=delete修饰的函数为删除函数。</li></ul> 
<pre><code class="prism language-cpp"><span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">const</span> Person<span class="token operator">&amp;</span> p<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="4"><li>继承和多态中的final与override关键字</li></ol> 
<ul><li>这个我们在继承和多态博客已经进行了详细讲解这里就不再细讲，需要的话去复习继承和多态的博客吧。</li></ul> 
<h2><a id="font_colorDarkOrchid___font_530"></a><font color="DarkOrchid">九： 🔥 可变参数模板 </font></h2> 
<p><strong>C++11的新特性可变参数模板能够让您创建可以接受可变参数的函数模板和类模板</strong>，相比于C++98 / 03，类模版和函数模版中只能含固定数量的模版参数，可变模版参数无疑是一个巨大的改进。<br> <code>下面就是一个基本可变参数的函数模板。（我们掌握一些基础的可变参数模板特性就够我们用了）</code></p> 
<pre><code class="prism language-cpp"><span class="token comment">//可变参数，你传int，char，还是自定义都会自动给你推导</span>
<span class="token comment">// 可以包含0-任意个参数</span>
<span class="token comment">// Args是一个模板参数包，args是一个函数形参参数包</span>
<span class="token comment">// 声明一个参数包Args...args，这个参数包中可以包含0到任意个模板参数。</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">ShowList</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">ShowList</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>     <span class="token comment">//计算个数sizeof的写法</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'A'</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"sort"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>上面的参数args前面有省略号，所以它就是一个可变模版参数，我们把带省略号的参数称为“参数包”</strong>，它里面包含了 0 到 N（N &gt;= 0）个模版参数。我们无法直接获取参数包 args 中的每个参数的，<strong>只能通过展开参数包的方式来获取参数包中的每个参数，<strong>这是使用可变模版参数的一个主要特点，也是最大的难点，即如何展开可变模版参数。由于语法不支持使用 args[i] 这样方式获取可变参数，所以我们的用一些</strong>奇招来一一获取参数包的值。</strong></li></ul> 
<h3><a id="__91__556"></a>💫 9.1 递归函数展开参数包</h3> 
<pre><code class="prism language-cpp"><span class="token comment">//需要加上结尾函数   递归终止函数</span>
<span class="token keyword">void</span> <span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 展开函数</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">ShowList</span><span class="token punctuation">(</span>T value<span class="token punctuation">,</span> Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//不断调用自己，直到最后参数为空，调用上面的结尾函数</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="__92__574"></a>💫 9.2 逗号表达式展开参数包</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">PrintArg</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> t <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">ShowList</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 列表初始化</span>
	<span class="token comment">// {(printarg(args), 0)...}将会展开成((printarg(arg1),0), (printarg(arg2),0), (printarg(arg3),0), etc... )</span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">(</span><span class="token function">PrintArg</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ShowList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'A'</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"sort"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>在创建数组的过程中会先执行逗号表达式前面的部分printarg(args)打印出参数，也就是说在构造int数组的过程中就将参数包展开了</code>，<strong>这个数组的目的纯粹是为了在数组构造的过程展开参数包。</strong></li></ul> 
<h3><a id="__93__599"></a>💫 9.3 可变参数包结合完美转发的好处</h3> 
<blockquote> 
 <p><mark>直接就是普通构造函数的形式，不存在移动构造或者拷贝构造，节省空间</mark><br> STL容器中的empalce相关接口函数：</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">emplace_back</span> <span class="token punctuation">(</span>Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>首先我们看到的emplace系列的接口，支持模板的可变参数，并且万能引用。那么相对insert和<br> emplace系列接口的优势到底在哪里呢?</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	std<span class="token double-colon punctuation">::</span>list<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">&gt;&gt;</span> mylist<span class="token punctuation">;</span>
	
	<span class="token comment">// emplace_back支持可变参数，拿到构建pair对象的参数后自己去创建对象</span>
	<span class="token comment">// 那么在这里我们可以看到除了用法上，和push_back没什么太大的区别</span>
	mylist<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token char">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token char">'d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token char">'e'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> mylist<span class="token punctuation">)</span>
	cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 下面我们试一下带有拷贝构造和移动构造的bit::string，再试试呢</span>
	<span class="token comment">// 我们会发现其实差别也不大，emplace_back是直接构造了</span>
	<span class="token comment">// push_back是先构造，再移动构造，其实也还好。</span>
	std<span class="token double-colon punctuation">::</span>list<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> bit<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;&gt;</span> mylist<span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"sort"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">"sort"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">"sort"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	mylist<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">"sort"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>区别在于：</p> 
<ul><li><strong><code>emplace直接调用有参构造创建出临时对象，并且通过forward函数进行完美转发，原地完成添加数据。整个过程只构造一次、析构一次。</code></strong></li><li><strong><code>而push_back需要自身先调用默认构造生成临时对象，再通过移动构造生成一个临时副本，把这个临时副本再传给push_back。在传给push_back之前，多出了一次移动构造和析构，因此一共是两次构造两次析构。</code></strong></li></ul> 
<h2><a id="font_colorDarkOrchid__lambda_font_648"></a><font color="DarkOrchid">十： 🔥 lambda表达式 </font></h2> 
<h3><a id="_101_C98_649"></a>💫 10.1 C++98中的一个例子</h3> 
<p><code>在C++98中，如果想要对一个数据集合中的元素进行排序，可以使用std::sort方法</code></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;functional&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">// 默认按照小于比较，排出来结果是升序</span>
	std<span class="token double-colon punctuation">::</span><span class="token function">sort</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> array<span class="token operator">+</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 如果需要降序，需要改变元素的比较规则</span>
	std<span class="token double-colon punctuation">::</span><span class="token function">sort</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> array <span class="token operator">+</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">greater</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>如果待排序元素为自定义类型，需要用户定义排序时的比较规则</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">Goods</span>
<span class="token punctuation">{<!-- --></span>
	string _name<span class="token punctuation">;</span> <span class="token comment">// 名字</span>
	<span class="token keyword">double</span> _price<span class="token punctuation">;</span> <span class="token comment">// 价格</span>
	<span class="token keyword">int</span> _evaluate<span class="token punctuation">;</span> <span class="token comment">// 评价</span>
	<span class="token function">Goods</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> <span class="token keyword">double</span> price<span class="token punctuation">,</span> <span class="token keyword">int</span> evaluate<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_name</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_price</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_evaluate</span><span class="token punctuation">(</span>evaluate<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">ComparePriceLess</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> gl<span class="token punctuation">,</span> <span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> gr<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> gl<span class="token punctuation">.</span>_price <span class="token operator">&lt;</span> gr<span class="token punctuation">.</span>_price<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">ComparePriceGreater</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> gl<span class="token punctuation">,</span> <span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> gr<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> gl<span class="token punctuation">.</span>_price <span class="token operator">&gt;</span> gr<span class="token punctuation">.</span>_price<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	vector<span class="token operator">&lt;</span>Goods<span class="token operator">&gt;</span> v <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span> <span class="token string">"苹果"</span><span class="token punctuation">,</span> <span class="token number">2.1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"香蕉"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"橙子"</span><span class="token punctuation">,</span> <span class="token number">2.2</span><span class="token punctuation">,</span>
	<span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"菠萝"</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ComparePriceLess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ComparePriceGreater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>随着C++语法的发展，<strong>人们开始觉得上面的写法太复杂了，每次为了实现一个algorithm算法，都要重新去写一个类，如果每次比较的逻辑不一样，还要去实现多个类，特别是相同类的命名，这些都给编程者带来了极大的不便</strong>。因此，在C++11语法中出现了Lambda表达式。</p> 
<h3><a id="_102_lambda_705"></a>💫 10.2 lambda表达式</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	vector<span class="token operator">&lt;</span>Goods<span class="token operator">&gt;</span> v <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span> <span class="token string">"苹果"</span><span class="token punctuation">,</span> <span class="token number">2.1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"香蕉"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"橙子"</span><span class="token punctuation">,</span> <span class="token number">2.2</span><span class="token punctuation">,</span>
	<span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"菠萝"</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> g1<span class="token punctuation">,</span> <span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> g2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> g1<span class="token punctuation">.</span>_price <span class="token operator">&lt;</span> g2<span class="token punctuation">.</span>_price<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> g1<span class="token punctuation">,</span> <span class="token keyword">const</span> Goods<span class="token operator">&amp;</span> g2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> g1<span class="token punctuation">.</span>_price <span class="token operator">&gt;</span> g2<span class="token punctuation">.</span>_price<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上述代码就是使用C++11中的lambda表达式来解决，可以看出lambda表达式实际是一个匿名函数</p> 
<h3><a id="_103_lambda_722"></a>💫 10.3 lambda表达式语法</h3> 
<ol><li><font color="dark"><strong>lambda表达式书写格式：[capture-list] (parameters) mutable -&gt; return-type { statement }</strong> </font></li></ol> 
<p><strong>lambda</strong>表达式各部分说明:</p> 
<ol><li><font color="mOrchid"><strong>[capture-list]</strong> </font> : <strong>捕捉列表</strong>，该列表总是出现在 lambda 函数的开始位置，<strong>编译器根据[]来判断接来的代码是否为 lambda 函数，捕捉列表能够捕捉上下文中的变量供 lambda 函数使用。</strong></li><li><font color="mOrchid"> <strong>(parameters)</strong> </font> ：<strong>参数列表</strong>。与<strong>普通函数的参数列表一致</strong>，如果不需要参数传递，则可以连同()一起省略。</li><li><font color="mOrchid"><strong>mutable</strong></font> ：默认情况下，lambda 函数总是一个 const 函数，mutable 可以取消其常量性。使用该修饰符时，参数列表不可省略(即使参数为空)。</li><li><font color="mOrchid"> <strong>returntype</strong> </font> ：<strong>返回值类型</strong>。用<strong>追踪返回类型形式声明函数的返回值类型</strong>，没有返回值时此部分可省略。<strong>返回值类型明确情况下，也可省略，由编译器对返回类型进行推导。</strong></li><li><font color="mOrchid"><strong>{statement}</strong></font> ：<strong>函数体</strong>。在该函数体内，除了可以使用其参数外，还可以使用所有捕获到的变量。</li></ol> 
<p>注意：<br> <mark>在lambda函数定义中，<strong>参数列表和返回值类型都是可选部分，而捕捉列表和函数体可以为空</strong>。因此C++11中<strong>最简单的lambda函数为：[]{};</strong> 该lambda函数不能做任何事情。</mark></p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 最简单的lambda表达式, 该lambda表达式没有任何意义</span>
	<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">// 省略参数列表和返回值类型，返回值类型由编译器推导为int</span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
	<span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">// 省略了返回值类型，无返回值类型</span>
	<span class="token keyword">auto</span> fun1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>b <span class="token operator">=</span> a <span class="token operator">+</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">fun1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
	cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">// 各部分都很完善的lambda函数</span>
	<span class="token keyword">auto</span> fun2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">int</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> b <span class="token operator">+=</span> a<span class="token operator">+</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">// 复制捕捉x</span>
	<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> add_x <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token keyword">mutable</span> <span class="token punctuation">{<!-- --></span> x <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token keyword">return</span> a <span class="token operator">+</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">add_x</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<blockquote> 
 <p><strong>通过上述例子可以看出，lambda表达式实际上可以理解为无名函数，该函数无法直接调用，如果想要直接调用，可借助auto将其赋值给一个变量。</strong></p> 
</blockquote> 
<ol start="2"><li>捕获列表说明<br> <strong>捕捉列表描述了上下文中那些数据可以被lambda使用，以及使用的方式传值还是传引用。</strong></li></ol> 
<ul><li>[var]：表示值传递方式捕捉变量var。</li><li>[=]：表示值传递方式捕获所有父作用域中的变量(包括this)。</li><li>[&amp;var]：表示引用传递捕捉变量var。</li><li>[&amp;]：表示引用传递捕捉所有父作用域中的变量(包括this)。</li></ul> 
<p><code>注意：</code></p> 
<ol><li><strong>父作用域指包含lambda函数的语句块</strong></li><li><strong>语法上捕捉列表可由多个捕捉项组成，并以逗号分割。</strong><br> 比如：[=, &amp;a, &amp;b]：以引用传递的方式捕捉变量 a 和 b，值传递方式捕捉其他所有变量 [&amp;，a, this]：值传递方式捕捉变量a和this，引用方式捕捉其他变量。</li></ol> 
<pre><code class="prism language-cpp"><span class="token keyword">auto</span> fun1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>b <span class="token operator">=</span> a <span class="token operator">+</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">fun1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>捕捉列表不允许变量重复传递，否则就会导致编译错误。<br> <mark>比如：[=, a]：=已经以值传递方式捕捉了所有变量，捕捉a重复</mark></li><li><strong>在块作用域以外的lambda函数捕捉列表必须为空。</strong></li><li>在块作用域中的lambda函数仅能捕捉父作用域中局部变量，捕捉任何非此作用域或者非局部变量都会导致编译报错。</li><li><strong>lambda表达式之间不能相互赋值</strong>，即使看起来类型相同。</li></ol> 
<h3><a id="_104_lambda_786"></a>💫 10.4 函数对象与lambda表达式底层原理</h3> 
<blockquote> 
 <p><strong>函数对象，又称为仿函数，即可以想函数一样使用的对象，就是在类中重载了operator()运算符的类对象。</strong></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Rate</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Rate</span><span class="token punctuation">(</span><span class="token keyword">double</span> rate<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">_rate</span><span class="token punctuation">(</span>rate<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token keyword">double</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">,</span> <span class="token keyword">int</span> year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> money <span class="token operator">*</span> _rate <span class="token operator">*</span> year<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">double</span> _rate<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 函数对象</span>
	<span class="token keyword">double</span> rate <span class="token operator">=</span> <span class="token number">0.49</span><span class="token punctuation">;</span>
	Rate <span class="token function">r1</span><span class="token punctuation">(</span>rate<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">r1</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// lamber</span>
	<span class="token keyword">auto</span> r2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">double</span> monty<span class="token punctuation">,</span> <span class="token keyword">int</span> year<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">double</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> monty<span class="token operator">*</span>rate<span class="token operator">*</span>year<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">r2</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>从使用方式上来看，函数对象与lambda表达式完全一样。<br> 函数对象将rate作为其成员变量，在定义对象时给出初始值即可，lambda表达式通过捕获列表可以直接将该变量捕获到。</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/4e/c0/jBFGH1Qt_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>实际在底层编译器对于lambda表达式的处理方式，完全就是按照函数对象的方式处理的，即：如果定义了一个lambda表达式，编译器会自动生成一个类，在该类中重载了operator()。</strong></p> 
</blockquote> 
<h2><a id="font_colorDarkOrchid___font_819"></a><font color="DarkOrchid">十一： 🔥 包装器 </font></h2> 
<ul><li><strong>function包装器</strong> 也叫作适配器。C++中的function本质是一个类模板，也是一个包装器。</li></ul> 
<p>那么我们来看看，我们为什么需要function呢？</p> 
<pre><code class="prism language-cpp">ret <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 上面func可能是什么呢？那么func可能是函数名？函数指针？函数对象(仿函数对象)？也有可能</span>
是lamber表达式对象？所以这些都是可调用的类型！如此丰富的类型，可能会导致模板的效率低下！
为什么呢？我们继续往下看
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">F</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token function">useF</span><span class="token punctuation">(</span>F f<span class="token punctuation">,</span> T x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"count:"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">++</span>count <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"count:"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>count <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span> i<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">Functor</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">double</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> d <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 函数名</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">useF</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">11.11</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">// 函数对象</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">useF</span><span class="token punctuation">(</span><span class="token function">Functor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">11.11</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">// lamber表达式</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">useF</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">double</span><span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> d<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">11.11</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>通过上面的程序验证，我们会发现useF函数模板实例化了三份。</strong><br> 包装器可以很好的解决上面的问题</p> 
<blockquote> 
 <p>std::function在头文件 &lt;<strong>functional</strong>&gt;<br> // 类模板原型如下<br> <strong>template function; // undefined</strong><br> <strong>template &lt;class Ret, class… Args&gt;</strong><br> <strong>class function&lt;Ret(Args…)&gt;</strong></p> 
 <hr> 
 <p>模板参数说明：</p> 
 <ul><li><strong><code>Ret</code></strong> : <strong>被调用函数的返回类型</strong></li><li><strong><code>Args</code></strong>… ：<strong>被调用函数的形参</strong></li></ul> 
</blockquote> 
<p><code>使用方法如下</code></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;functional&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">struct</span> <span class="token class-name">Functor</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name">Plus</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">plusi</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">double</span> <span class="token function">plusd</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">double</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 包装可调用对象</span>
	<span class="token comment">//function&lt;int(int)&gt; f1 = f; //类型不匹配会报错的</span>
	function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f1 <span class="token operator">=</span> f<span class="token punctuation">;</span> <span class="token comment">//实例化方式</span>
	function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f2 <span class="token operator">=</span> <span class="token function">Functor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token comment">//由于成员函数的函数名受类域限制，因此下面我们需要指定函数名</span>
	<span class="token comment">// 包装静态成员函数</span>
	function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f4 <span class="token operator">=</span> <span class="token operator">&amp;</span>Plus<span class="token double-colon punctuation">::</span>plusi<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token comment">// 包装非静态成员函数</span>
	<span class="token comment">//非静态的成员函数要取函数指针的时候，需要加个&amp;，静态可以不加</span>
	<span class="token comment">//function&lt;double(double, double)&gt; f5 = &amp;Plus::plusd;  </span>
	
	<span class="token comment">//由于上面编译通过，因为其还有一个隐含的this参数，下面有两种解决方案</span>
	<span class="token comment">//方法一：传指针 `值得注意的是：对成员函数进行包装时，需要取地址`</span>
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span>Plus<span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f5 <span class="token operator">=</span> <span class="token operator">&amp;</span>Plus<span class="token double-colon punctuation">::</span>plusd<span class="token punctuation">;</span>
	Plus pd<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f5</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>pd<span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token comment">//方法二：不传指针，只传对象</span>
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span>Plus<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f6 <span class="token operator">=</span> <span class="token operator">&amp;</span>Plus<span class="token double-colon punctuation">::</span>plusd<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f6</span><span class="token punctuation">(</span>pd<span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f6</span><span class="token punctuation">(</span><span class="token function">Plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>值得注意的是：对成员函数进行包装时，需要取地址</code> 如：function&lt;double(Plus*, double, double)&gt; f5 = <strong><mark>&amp;Plus::plusd</mark></strong>。（语法规定：&amp;类域：：成员函数才能取到地址）<br> <code>有了包装器，如何解决模板的效率低下，实例化多份的问题呢？</code></p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">F</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span> 
T <span class="token function">useF</span><span class="token punctuation">(</span>F f<span class="token punctuation">,</span> T x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"count:"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">++</span>count <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"count:"</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>count <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span> i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token class-name">Functor</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">double</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> d <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 函数名</span>
	std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func1 <span class="token operator">=</span> f<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">useF</span><span class="token punctuation">(</span>func1<span class="token punctuation">,</span> <span class="token number">11.11</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">// 函数对象</span>
	std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func2 <span class="token operator">=</span> <span class="token function">Functor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">useF</span><span class="token punctuation">(</span>func2<span class="token punctuation">,</span> <span class="token number">11.11</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">// lamber表达式</span>
	std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">double</span> d<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">double</span><span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> d <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">useF</span><span class="token punctuation">(</span>func3<span class="token punctuation">,</span> <span class="token number">11.11</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>包装器的一些其他使用场景：</p> 
<p><strong><a href="https://leetcode.cn/classic/problems/evaluate-reverse-polish-notation/description" rel="nofollow">逆波兰表达式求值</a></strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">evalRPN</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> tokens<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        stack<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> st<span class="token punctuation">;</span>
        map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> function<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span> opFuncMap <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"+"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"-"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"*"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>e <span class="token operator">:</span> tokens<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//if(e == "+" || e == "-" || e == "*" || e == "/")</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>opFuncMap<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// == 1就是操作符</span>
                <span class="token keyword">int</span> r <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>st<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> l <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>st<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">int</span> ret <span class="token operator">=</span> opFuncMap<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
                st<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                st<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">stoi</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
 
        <span class="token keyword">return</span> st<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_112_bind_1005"></a>💫 11.2 bind</h3> 
<p><img src="https://images2.imgbox.com/1e/d4/CVm8ADLQ_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>std::bind函数定义在头文件中，<strong>是一个函数模板，它就像一个函数包装器(适配器)，接受一调用对象（callable object），生成一个新的可调用对象来“适应”原对象的参数列表</strong>。一般而言，我们用它可以把一个原本接收N个参数的函数fn，通过绑定一些参数，返回一个接收M个（M可以大于N，但这么做没什么意义）参数的新函数。同时，使用std::bind函数还可以实现参数顺序调整等操作。</p> 
</blockquote> 
<ul><li>可以将bind函数看作是一个通用的函数适配器，它接受一个可调用对象，生成一个新的可调用对象来“适应”原对象的参数列表。</li><li><strong><code>调用bind的一般形式：auto newCallable = bind(callable,arg_list);</code></strong></li><li>其中，newCallable本身是一个可调用对象，arg_list是一个逗号分隔的参数列表，对应给定的callable的参数。<strong>当我们调用newCallable时，newCallable会调用callable,并传给它arg_list中的参数。</strong></li><li>arg_list中的参数可能包含形如_n的名字，其中n是一个整数，这些参数是“占位符”，表示newCallable的参数，它们占据了传递给newCallable的参数的“位置”。数值n表示生成的可调用对象中参数的位置：_1为newCallable的第一个参数，_2为第二个参数，以此类推。</li></ul> 
<p><img src="https://images2.imgbox.com/c7/18/iKQDipua_o.png" alt="在这里插入图片描述"><br> <code>使用举例</code></p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">SubX</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">-</span> b <span class="token operator">-</span> c<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
 
<span class="token comment">//可以用命名空间展示出来</span>
<span class="token keyword">using</span> placeholders<span class="token double-colon punctuation">::</span>_1<span class="token punctuation">;</span>
<span class="token keyword">using</span> placeholders<span class="token double-colon punctuation">::</span>_2<span class="token punctuation">;</span>
<span class="token keyword">using</span> placeholders<span class="token double-colon punctuation">::</span>_3<span class="token punctuation">;</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//auto sub1 = bind(Sub,placeholders::_1,placeholders::_2);</span>
	<span class="token comment">// bind 本质返回的一个仿函数对象</span>
	<span class="token comment">// 调整参数顺序（不常用）</span>
	<span class="token comment">// _1代表第一个实参</span>
	<span class="token comment">// _2代表第二个实参</span>
 
	<span class="token keyword">auto</span> sub1 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>Sub<span class="token punctuation">,</span> _1<span class="token punctuation">,</span> _2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//代表Sub(_1, _2)</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token comment">//10 相当于_1, 5相当于_2</span>
 
	<span class="token keyword">auto</span> sub2 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>Sub<span class="token punctuation">,</span> _2<span class="token punctuation">,</span> _1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//代表Sub(_2, _1)</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">//5 相当于_2, 10相当于_1</span>
 
	<span class="token comment">//调整参数个数（常用）</span>
	<span class="token keyword">auto</span> sub3 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>Sub<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> _1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//代表Sub(100, _1)</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub3</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">//5 相当于_1</span>
 
	<span class="token keyword">auto</span> sub4 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>Sub<span class="token punctuation">,</span> _1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//代表Sub(_1, 10)</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub4</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">//5 相当于_1</span>
 
	<span class="token comment">// 分别绑死第123个参数</span>
	<span class="token keyword">auto</span> sub5 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>SubX<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> _1<span class="token punctuation">,</span> _2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub5</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token keyword">auto</span> sub6 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>SubX<span class="token punctuation">,</span> _1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> _2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub6</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token keyword">auto</span> sub7 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>SubX<span class="token punctuation">,</span> _1<span class="token punctuation">,</span> _2<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">sub7</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span>Plus<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f6 <span class="token operator">=</span> <span class="token operator">&amp;</span>Plus<span class="token double-colon punctuation">::</span>plusd<span class="token punctuation">;</span>
	Plus pd<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f6</span><span class="token punctuation">(</span>pd<span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f6</span><span class="token punctuation">(</span><span class="token function">Plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token comment">// bind一般用于，绑死一些固定参数</span>
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> f7 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Plus<span class="token double-colon punctuation">::</span>plusd<span class="token punctuation">,</span> <span class="token function">Plus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _1<span class="token punctuation">,</span> _2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">f7</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
 
	<span class="token comment">//auto func1 = [](double rate, double money, int year)-&gt;double {return monty * rate * year; }; //单利</span>
	<span class="token keyword">auto</span> func1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">double</span> rate<span class="token punctuation">,</span> <span class="token keyword">double</span> money<span class="token punctuation">,</span> <span class="token keyword">int</span> year<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token keyword">double</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//复利</span>
		<span class="token keyword">double</span> ret <span class="token operator">=</span> money<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> year<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			ret <span class="token operator">+=</span> ret <span class="token operator">*</span> rate<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
		<span class="token keyword">return</span> ret <span class="token operator">-</span> money<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func3_1_5 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>func1<span class="token punctuation">,</span> <span class="token number">0.015</span><span class="token punctuation">,</span> _1<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func5_1_5 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>func1<span class="token punctuation">,</span> <span class="token number">0.015</span><span class="token punctuation">,</span> _1<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func10_2_5 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>func1<span class="token punctuation">,</span> <span class="token number">0.025</span><span class="token punctuation">,</span> _1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	function<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func20_3_5 <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>func1<span class="token punctuation">,</span> <span class="token number">0.035</span><span class="token punctuation">,</span> _1<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">func3_1_5</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">func5_1_5</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">func10_2_5</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token function">func20_3_5</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
 
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>包装器的作用：统一可调用对象的类型，指明了参数和返回值类型</strong></p> 
<p>不包装前可能存在很多问题：</p> 
<ol><li>函数指针太复杂，不方便理解。</li><li>仿函数类型是一个类名，没有指明参数和返回值，需要去operator()才能看出来。</li><li>lambda表达式在语法层看不到类型。</li></ol> 
<h2><a id="font_colorDarkOrchid___font_1101"></a><font color="DarkOrchid"> 🚀 结尾 </font></h2> 
<p>以上就是本文的全部内容，需要我们好好掌握，觉得这篇博客对你有帮助的，可以点赞收藏关注支持一波~😉<br> <img src="https://images2.imgbox.com/b3/3e/NVlOHX51_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/990e9aa9afeb9f32d47a0715deb4b6af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">动态规划，蒙特卡洛，TD,Qlearing,Sars,DQN,REINFORCE算法对比</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b834a30f71275c5c4a39c999417c2c5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">模板进阶【C&#43;&#43;】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>