<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# 实现腾讯云 IM 常用 REST API 之群组管理 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/27c1b6c392ec9ae810f918c63e0b3327/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C# 实现腾讯云 IM 常用 REST API 之群组管理">
  <meta property="og:description" content="目录
关于腾讯 IM REST API 开发前准备
范例运行环境
常用群组管理API
创建群组
增加群成员
修改群基础资料
修改群成员资料
获取被禁言群成员列表
解散群组
小结
关于腾讯 IM REST API REST API 是腾讯即时通信 IM 提供给服务端的一组 HTTP 后台管理接口，如消息管理、群组管理、用户管理、会话管理等等。REST API 接口较为原始，管理能力强大。另外，为了安全性，REST API 仅提供 HTTPS 接口，本文将主要介绍常用的群组管理API。
开发前准备 (1）开发前需要申请 SDK 开发者 ID 及密钥，如何获取请参照如下链接：
腾讯IM即时通信控制台
(2）调用 REST API 之前，需要生成 UserSig ，UserSig 是用户登录即时通信 IM 的密码，其本质是对 UserID 等信息加密后得到的密文，如何生成 UserSig 请参照我的文章《C# 生成腾讯云 IM 之 TLSSigAPIv2 UserSig》，通过 TLSSigAPIv2 类进行创建，请参考如下代码：
string SDKAppId=&#34;申请的SDKAppID&#34;; string SDKAppIdSecret=&#34;申请的SDKAppIdSecret&#34;; string AppAdminId=&#34;IM平台超级管理员UserID&#34;; TLSSigAPIv2 sig = new TLSSigAPIv2(int.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-23T10:57:40+08:00">
    <meta property="article:modified_time" content="2024-05-23T10:57:40+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# 实现腾讯云 IM 常用 REST API 之群组管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong> </strong></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%85%B3%E4%BA%8E%E8%85%BE%E8%AE%AF%20IM%20REST%20API%C2%A0-toc" style="margin-left:40px;"><a href="#%E5%85%B3%E4%BA%8E%E8%85%BE%E8%AE%AF%20IM%20REST%20API%C2%A0" rel="nofollow">关于腾讯 IM REST API </a></p> 
<p id="%E6%95%88%E6%9E%9C%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA-toc" style="margin-left:40px;"><a href="#%E6%95%88%E6%9E%9C%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA" rel="nofollow">开发前准备</a></p> 
<p id="%E8%8C%83%E4%BE%8B%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#%E8%8C%83%E4%BE%8B%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83" rel="nofollow">范例运行环境</a></p> 
<p id="TLSSigAPIv2%20%E7%B1%BB-toc" style="margin-left:40px;"><a href="#TLSSigAPIv2%20%E7%B1%BB" rel="nofollow">常用群组管理API</a></p> 
<p id="%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E6%BA%90-toc" style="margin-left:80px;"><a href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E6%BA%90" rel="nofollow">创建群组</a></p> 
<p id="%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B-toc" style="margin-left:80px;"><a href="#%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B" rel="nofollow">增加群成员</a></p> 
<p id="%E5%88%A0%E9%99%A4%E5%A5%BD%E5%8F%8B-toc" style="margin-left:80px;"><a href="#%E5%88%A0%E9%99%A4%E5%A5%BD%E5%8F%8B" rel="nofollow">修改群基础资料</a></p> 
<p id="%E6%8B%89%E5%8F%96%E5%A5%BD%E5%8F%8B-toc" style="margin-left:80px;"><a href="#%E6%8B%89%E5%8F%96%E5%A5%BD%E5%8F%8B" rel="nofollow">修改群成员资料</a></p> 
<p id="%E5%88%A0%E9%99%A4%E5%B8%90%E6%88%B7-toc" style="margin-left:80px;"><a href="#%E5%88%A0%E9%99%A4%E5%B8%90%E6%88%B7" rel="nofollow">获取被禁言群成员列表</a></p> 
<p id="%E6%9F%A5%E8%AF%A2%E5%B8%90%E6%88%B7%E7%8A%B6%E6%80%81-toc" style="margin-left:80px;"><a href="#%E6%9F%A5%E8%AF%A2%E5%B8%90%E6%88%B7%E7%8A%B6%E6%80%81" rel="nofollow">解散群组</a></p> 
<p id="%E5%B0%8F%E7%BB%93-toc" style="margin-left:40px;"><a href="#%E5%B0%8F%E7%BB%93" rel="nofollow">小结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3>关于腾讯 IM REST API </h3> 
<p>REST API 是腾讯即时通信 IM 提供给服务端的一组 HTTP 后台管理接口，如消息管理、群组管理、用户管理、会话管理等等。REST API 接口较为原始，管理能力强大。另外，为了安全性，REST API 仅提供 HTTPS 接口，本文将主要介绍常用的群组管理API。</p> 
<h3 id="%E6%95%88%E6%9E%9C%E8%A7%86%E9%A2%91%E6%BC%94%E7%A4%BA">开发前准备</h3> 
<p>(1）开发前需要申请  SDK 开发者 ID 及密钥，如何获取请参照如下链接：</p> 
<p><a href="https://cloud.tencent.com/login?s_url=https%3A%2F%2Fconsole.cloud.tencent.com%2Fim" rel="nofollow" title="腾讯IM即时通信控制台">腾讯IM即时通信控制台</a></p> 
<p>(2）调用 REST API 之前，需要生成 UserSig ，UserSig 是用户登录即时通信 IM 的密码，其本质是对 UserID 等信息加密后得到的密文，如何生成 UserSig 请参照我的文章<a href="https://blog.csdn.net/michaelline/article/details/139083155" title="《C# 生成腾讯云 IM 之 TLSSigAPIv2 UserSig》">《C# 生成腾讯云 IM 之 TLSSigAPIv2 UserSig》</a>，通过 TLSSigAPIv2 类进行创建，请参考如下代码：</p> 
<pre><code class="language-cs">string SDKAppId="申请的SDKAppID";  
string SDKAppIdSecret="申请的SDKAppIdSecret";  
string AppAdminId="IM平台超级管理员UserID";

TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(SDKAppId),SDKAppIdSecret);
string _sig = sig.GenSig(AppAdminId);</code></pre> 
<p>(3）SDKAppID 及 SDKAppIdSecret 的获取在后续范例中均封装为 TCAcount 类，创建及访问示例如下：</p> 
<pre><code class="language-cs">TCAcount tca = new TCAcount();
string SDKAppId=tca.SDKAppId;
string SDKAppIdSecret=tca.SDKAppIdSecret;</code></pre> 
<p>(4) 用到两个时间戳函数，代码如下:</p> 
<pre><code class="language-cs">public string getTimestamp(int seconds)
{
        TimeSpan ts = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0);
        return Convert.ToInt64(ts.TotalSeconds + seconds).ToString();
}
public string GetTimeStamp(DateTime dtime)
{
        TimeSpan tspan = dtime.ToUniversalTime() - new DateTime(1970, 1, 1, 0, 0, 0, 0);
        return Convert.ToInt64(tspan.TotalSeconds).ToString();
}</code></pre> 
<p>(5) WebService 类实现访问 REST API URL 地址并 POST 数据，以获取返回结果 Json 的功能。具体实现请参照我的文章<a href="https://blog.csdn.net/michaelline/article/details/139123272" title="《C# 实现访问 Web API Url 提交数据并获取处理结果》">《C# 实现访问 Web API Url 提交数据并获取处理结果》</a></p> 
<p></p> 
<h3 id="%E8%8C%83%E4%BE%8B%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">范例运行环境</h3> 
<p>操作系统： Windows Server 2019 DataCenter</p> 
<p>.net版本： .netFramework4.0 或以上</p> 
<p>开发工具：VS2019  C# </p> 
<h3 id="TLSSigAPIv2%20%E7%B1%BB">常用群组管理API</h3> 
<h4 id="%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E6%BA%90">创建群组</h4> 
<p>CreateGroup 方法为 IM 应用系统创建一个群组。其关键属性方法说明如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="text-align:center;width:60px;">序号</th><th style="text-align:center;width:164px;">参数</th><th style="text-align:center;width:67px;">类型</th><th style="text-align:center;width:398px;">说明</th></tr></thead><tbody><tr><th style="text-align:center;width:60px;">1</th><td style="width:164px;">GroupId</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;"><strong>必填：</strong>群组ID</td></tr><tr><th style="text-align:center;width:60px;">2</th><td style="width:164px;">Owner_Account</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;">群主 ID（已存在的账号）。填写后自动添加到群成员中；如果不填，群没有群主；成员使用 AVChatroom（直播群）时，必须每次调用进群操作</td></tr><tr><th style="text-align:center;width:60px;">3</th><td style="width:164px;">Type</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;"><strong>必填：</strong>群组形态，包括 Public（陌生人社交群），Private（即 Work，好友工作群），ChatRoom（即 Meeting，会议群），AVChatRoom（直播群），Community（社群）</td></tr><tr><th style="text-align:center;width:60px;">4</th><td style="width:164px;">Name</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;"><strong>必填：</strong>群名称，最长30字节，使用 UTF-8 编码，1个汉字占3个字节</td></tr><tr><th style="text-align:center;width:60px;">5</th><td style="width:164px;">Introduction</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;">群简介，最长240字节，使用 UTF-8 编码，1个汉字占3个字节</td></tr><tr><th style="text-align:center;width:60px;">6</th><td style="width:164px;">Notification</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;">群公告，最长300字节，使用 UTF-8 编码，1个汉字占3个字节</td></tr><tr><th style="text-align:center;width:60px;">7</th><td style="width:164px;">FaceUrl</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;">群头像 URL，最长100字节</td></tr><tr><th style="text-align:center;width:60px;">8</th><td style="width:164px;">ApplyJoinOption</td><td style="text-align:center;width:67px;">string</td><td style="width:398px;"> <p>申请加群处理方式。包含 FreeAccess（自由加入），NeedPermission（需要验证），DisableApply（禁止加群），不填默认为 NeedPermission（需要验证）</p> <p>仅当创建支持申请加群的群组时，该字段有效。社群目前不支持此字段</p> </td></tr></tbody></table> 
<p>实现代码如下：</p> 
<pre><code class="language-cs">public string CreateGroup(string GroupId,string Owner_Account, string Type, string Name, string Introduction, string Notification, string FaceUrl, string ApplyJoinOption)
                {
                    ArrayList data = new ArrayList();
                    TCAcount tca = new TCAcount();
                    //请求地址
                    string settingUrl = "https://console.tim.qq.com/v4/group_open_http_svc/create_group?sdkappid={0}&amp;identifier={1}&amp;usersig={2}&amp;random={3}&amp;contenttype=json";
                    string AppAdminId = "administrator";
                    Random rnd = new Random();
                    string random = rnd.Next(0, 429496729).ToString();
                    TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(tca.SDKAppId), tca.SDKAppIdSecret);
                    string _sig = sig.GenSig(AppAdminId);
                    string content = "{\"Owner_Account\": \""+Owner_Account+"\", \"Type\": \""+Type+"\", \"GroupId\": \""+GroupId+"\",\"Name\": \""+Name+"\",\"Introduction\":\""+Introduction+"\"," +
                                     "\"Notification\": \""+Notification+"\",\"FaceUrl\": \""+FaceUrl+"\",\"ApplyJoinOption\": \""+ApplyJoinOption+"\"}";

                    settingUrl = string.Format(settingUrl, tca.SDKAppId, AppAdminId, _sig, random);
                    WebService ws = new WebService();

                    string resultStr = ws.GetResponseResult(settingUrl, Encoding.UTF8, "POST", content);
                    return resultStr;
                }</code></pre> 
<h4 id="%E6%B7%BB%E5%8A%A0%E5%A5%BD%E5%8F%8B">增加群成员</h4> 
<p>AddGroupUser 方法向指定的群中添加新成员用户。其关键属性方法说明如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="text-align:center;width:51px;">序号</th><th style="text-align:center;width:123px;">参数</th><th style="text-align:center;width:69px;">类型</th><th style="text-align:center;width:446px;">说明</th></tr></thead><tbody><tr><th style="text-align:center;width:51px;">1</th><td style="width:123px;">GroupId</td><td style="text-align:center;width:69px;">string</td><td style="width:446px;">要添加新成员的群组 ID</td></tr><tr><th style="text-align:center;width:51px;">2</th><td style="width:123px;">Account</td><td style="text-align:center;width:69px;">string</td><td style="width:446px;">要添加的群成员 UserID</td></tr><tr><th style="text-align:center;width:51px;">3</th><td style="width:123px;">Silence</td><td style="text-align:center;width:69px;">string</td><td style="width:446px;">是否静默加人。0：非静默加人；1：静默加人。不填该字段默认为0</td></tr></tbody></table> 
<p>实现代码如下：</p> 
<pre><code class="language-cs">//增加群成员
public string AddGroupUser(string GroupId, string Account, string Silence)
{
                    TCAcount tca = new TCAcount();
                    //请求地址
                    string settingUrl = "https://console.tim.qq.com/v4/group_open_http_svc/add_group_member?sdkappid={0}&amp;identifier={1}&amp;usersig={2}&amp;random={3}&amp;contenttype=json";
                    string AppAdminId = "administrator";
                    Random rnd = new Random();
                    string random = rnd.Next(0, 429496729).ToString();
                    TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(tca.SDKAppId), tca.SDKAppIdSecret);
                    string _sig = sig.GenSig(AppAdminId);
                    string content = "{\"GroupId\": \""+GroupId+"\",\"Silence\": "+Silence+",\"MemberList\": [ {\"Member_Account\": \""+Account+"\"}]}";

                    settingUrl = string.Format(settingUrl, tca.SDKAppId, AppAdminId, _sig, random);
                    WebService ws = new WebService();

                    string resultStr = ws.GetResponseResult(settingUrl, Encoding.UTF8, "POST", content);
                    return resultStr;
}</code></pre> 
<p></p> 
<h4 id="%E5%88%A0%E9%99%A4%E5%A5%BD%E5%8F%8B">修改群基础资料</h4> 
<p>ModifyGroupBaseInfo 方法可修改指定群组的基础信息。其关键属性方法说明如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="text-align:center;width:50px;">序号</th><th style="width:138px;">参数</th><th style="text-align:center;">类型</th><th>说明</th></tr></thead><tbody><tr><th style="text-align:center;width:50px;">1</th><td style="width:138px;">GroupId</td><td style="text-align:center;">string</td><td>要修改的群组 ID</td></tr><tr><th style="text-align:center;width:50px;">2</th><td style="width:138px;">Name</td><td style="text-align:center;">string</td><td>群名称，最长30字节，使用 UTF-8 编码，1个汉字占3个字节</td></tr><tr><th style="text-align:center;width:50px;">3</th><td style="width:138px;">Introduction</td><td style="text-align:center;">string</td><td>群简介，最长240字节，使用 UTF-8 编码，1个汉字占3个字节</td></tr><tr><th style="text-align:center;width:50px;">4</th><td style="width:138px;">FaceUrl</td><td style="text-align:center;">string</td><td>群头像 URL，最长100字节</td></tr><tr><th style="text-align:center;width:50px;">5</th><td style="width:138px;">ApplyJoinOption</td><td style="text-align:center;">string</td><td> <p>申请加群处理方式。包含 FreeAccess（自由加入），NeedPermission（需要验证），DisableApply（禁止加群），不填默认为 NeedPermission（需要验证）</p> <p>仅当创建支持申请加群的群组时，该字段有效。社群目前不支持此字段</p> </td></tr><tr><th style="text-align:center;width:50px;">6</th><td style="width:138px;">ShutUpAllMember</td><td style="text-align:center;">string</td><td>群内群成员禁言，只有群管理员和群主以及系统管理员可以发言，"On"开启，"Off"关闭</td></tr></tbody></table> 
<p>实现代码如下：</p> 
<pre><code class="language-cs">//修改群基础资料
public string ModifyGroupBaseInfo(string GroupId, string Name, string Introduction, string FaceUrl, string ApplyJoinOption, string ShutUpAllMember)
{
                    TCAcount tca = new TCAcount();
                    //请求地址
                    string settingUrl = "https://console.tim.qq.com/v4/group_open_http_svc/modify_group_base_info?sdkappid={0}&amp;identifier={1}&amp;usersig={2}&amp;random={3}&amp;contenttype=json";
                    string AppAdminId = "administrator";
                    Random rnd = new Random();
                    string random = rnd.Next(0, 429496729).ToString();
                    TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(tca.SDKAppId), tca.SDKAppIdSecret);
                    string _sig = sig.GenSig(AppAdminId);
                    string name = Name == "" ? "" : ", \"Name\":\"" + Name + "\"";
                    string intro = Introduction == "" ? "" : ", \"Introduction\":\"" + Introduction + "\"";
                    string faceurl = FaceUrl == "" ? "" : ", \"FaceUrl\":\"" + FaceUrl + "\"";
                    string joinoption = ApplyJoinOption == "" ? "" : ", \"ApplyJoinOption\":\"" + ApplyJoinOption + "\"";

                    string content = "{\"GroupId\":\""+GroupId+"\""+name+intro+faceurl+joinoption+"}";

                    settingUrl = string.Format(settingUrl, tca.SDKAppId, AppAdminId, _sig, random);
                    WebService ws = new WebService();

                    string resultStr = ws.GetResponseResult(settingUrl, Encoding.UTF8, "POST", content);
                    return resultStr;
} //edit_group_info
</code></pre> 
<p></p> 
<h4 id="%E6%8B%89%E5%8F%96%E5%A5%BD%E5%8F%8B">修改群成员资料</h4> 
<p>ModifyGroupUser 方法可以修改指定群成员用户的资料。其关键属性方法说明如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="text-align:center;width:49px;">序号</th><th style="width:106px;">参数</th><th style="text-align:center;width:82px;">类型</th><th style="width:452px;">说明</th></tr></thead><tbody><tr><th style="text-align:center;width:49px;">1</th><td style="width:106px;">GroupId</td><td style="text-align:center;width:82px;">string</td><td style="width:452px;">要修改操作的群组 ID</td></tr><tr><th style="text-align:center;width:49px;">2</th><td style="width:106px;">Account</td><td style="text-align:center;width:82px;">string</td><td style="width:452px;">要操作的群成员UserID</td></tr><tr><th style="text-align:center;width:49px;">3</th><td style="width:106px;">Role</td><td style="text-align:center;width:82px;">string</td><td style="width:452px;">成员身份，Admin/Member 分别为设置/取消管理员（不允许修改群主的身份）</td></tr><tr><th style="text-align:center;width:49px;">4</th><td style="width:106px;">MsgFlag</td><td style="text-align:center;width:82px;">string</td><td style="width:452px;">设置的指定成员消息屏蔽类型： AcceptAndNotify 代表接收并提示消息，Discard 代表不接收也不提示消息，AcceptNotNotify 代表接收消息但不提示。</td></tr><tr><th style="text-align:center;width:49px;">5</th><td style="width:106px;">NameCard</td><td style="text-align:center;width:82px;">string</td><td style="width:452px;">指定成员的群名片，最大不超过50个字节。</td></tr><tr><th style="text-align:center;width:49px;">6</th><td style="width:106px;">ShutUpTime</td><td style="text-align:center;width:82px;">int</td><td style="width:452px;">指定群成员的禁言时间，单位为秒。</td></tr></tbody></table> 
<p>实现代码如下：</p> 
<pre><code class="language-cs">public string ModifyGroupUser(string GroupId, string Account, string Role,string MsgFlag,string NameCard,int ShutUpTime)
{
                    TCAcount tca = new TCAcount();
                    //请求地址
                    string settingUrl = "https://console.tim.qq.com/v4/group_open_http_svc/modify_group_member_info?sdkappid={0}&amp;identifier={1}&amp;usersig={2}&amp;random={3}&amp;contenttype=json";
                    string AppAdminId = "administrator";
                    Random rnd = new Random();
                    string random = rnd.Next(0, 429496729).ToString();
                    TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(tca.SDKAppId), tca.SDKAppIdSecret);
                    string _sig = sig.GenSig(AppAdminId);
                    string role = Role == "" ? "" : ", \"Role\":\""+Role+"\"";
                    string msgflag = MsgFlag == "" ? "" : ", \"MsgFlag\":\"" + MsgFlag + "\"";
                    string namecard = NameCard == "" ? "" : ", \"NameCard\":\"" + NameCard + "\"";
                    string shutuptime = ShutUpTime == -1 ? "" : ", \"ShutUpTime\":" + ShutUpTime + "";

                    string content = "{\"GroupId\":\""+GroupId+"\", \"Member_Account\":\""+Account+"\""+role+msgflag+namecard+shutuptime+"}";

                    settingUrl = string.Format(settingUrl, tca.SDKAppId, AppAdminId, _sig, random);
                    WebService ws = new WebService();

                    string resultStr = ws.GetResponseResult(settingUrl, Encoding.UTF8, "POST", content);
                    return resultStr;
}</code></pre> 
<p></p> 
<h4 id="%E5%88%A0%E9%99%A4%E5%B8%90%E6%88%B7">获取被禁言群成员列表</h4> 
<p>GetGroupShuttedList 方法可获取根据群组 ID 获取群组中被禁言的用户列表。其关键属性方法说明如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th>序号</th><th>参数</th><th style="width:58px;">类型</th><th style="width:508px;">说明</th></tr></thead><tbody><tr><th>1</th><td>GroupId</td><td style="width:58px;">string</td><td style="width:508px;">要获取操作的群组 ID</td></tr></tbody></table> 
<p>实现代码如下：</p> 
<pre><code class="language-cs">public string GetGroupShuttedList(string GroupId)
{
                    TCAcount tca = new TCAcount();
                    //请求地址
                    string settingUrl = "https://console.tim.qq.com/v4/group_open_http_svc/get_group_shutted_uin?sdkappid={0}&amp;identifier={1}&amp;usersig={2}&amp;random={3}&amp;contenttype=json";
                    string AppAdminId = "administrator";
                    Random rnd = new Random();
                    string random = rnd.Next(0, 429496729).ToString();
                    TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(tca.SDKAppId), tca.SDKAppIdSecret);
                    string _sig = sig.GenSig(AppAdminId);

                    string content = "{\"GroupId\":\"" + GroupId + "\"}";

                    settingUrl = string.Format(settingUrl, tca.SDKAppId, AppAdminId, _sig, random);
                    WebService ws = new WebService();

                    string resultStr = ws.GetResponseResult(settingUrl, Encoding.UTF8, "POST", content);
                    return resultStr;
} </code></pre> 
<h4 id="%E6%9F%A5%E8%AF%A2%E5%B8%90%E6%88%B7%E7%8A%B6%E6%80%81">解散群组</h4> 
<p>DestoryGroup 方法可解散指定ID的群组。其关键属性方法说明如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th>序号</th><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><th>1</th><td>GroupId</td><td>string</td><td> <p>要解散的群组ID</p> </td></tr></tbody></table> 
<p>实现代码如下：</p> 
<pre><code class="language-cs">public string DestoryGroup(string GroupId)
{
                    ArrayList data = new ArrayList();
                    TCAcount tca = new TCAcount();
                    //请求地址
                    string settingUrl = "https://console.tim.qq.com/v4/group_open_http_svc/destroy_group?sdkappid={0}&amp;identifier={1}&amp;usersig={2}&amp;random={3}&amp;contenttype=json";
                    string AppAdminId = "administrator";
                    Random rnd = new Random();
                    string random = rnd.Next(0, 429496729).ToString();
                    TLSSigAPIv2 sig = new TLSSigAPIv2(int.Parse(tca.SDKAppId), tca.SDKAppIdSecret);
                    string _sig = sig.GenSig(AppAdminId);
                    string content = "{\"GroupId\": \"" + GroupId + "\"}";

                    settingUrl = string.Format(settingUrl, tca.SDKAppId, AppAdminId, _sig, random);
                    WebService ws = new WebService();

                    string resultStr = ws.GetResponseResult(settingUrl, Encoding.UTF8, "POST", content);
                    return resultStr;
}</code></pre> 
<p></p> 
<h3 id="%E5%B0%8F%E7%BB%93">小结</h3> 
<p>腾讯云 IM REST API 提供了非常丰富与完善的管理功能列表，在这里我们仅是以满足自身应用需要而提取的常用帐户管理功能，更多详情请参照如下链接：</p> 
<p><a href="https://www.tencentcloud.com/zh/document/product/1047/34621" rel="nofollow" title="REST API 接口列表 | 腾讯云">REST API 接口列表 | 腾讯云</a></p> 
<p>本文代码仅供您参考使用，您可以参照官方文档开发出更加贴合自身需求的应用，感谢您的阅读，希望本文能够对您有所帮助。</p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b7470dd9ada4bd53b405a7ddcf46f75e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【vs2022】安装copilot和reshaper</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/74a0b7dd55deaa056bf8e6b92e8db99c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C# 实现腾讯云 IM 常用 REST API 之消息管理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>