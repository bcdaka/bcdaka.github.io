<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[MySQL]数据库原理6——喵喵期末不挂科 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d285aa5631b3c4204be0732c494885d5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="[MySQL]数据库原理6——喵喵期末不挂科">
  <meta property="og:description" content="希望你开心，希望你健康，希望你幸福，希望你点赞！
最后的最后，关注喵，关注喵，关注喵，佬佬会看到更多有趣的博客哦！！！
喵喵喵，你对我真的很重要！
目录
前言
建立和管理索引
认识索引
索引分类
索引的设计原则
创建表时创建
用CREATE INDEX语句创建
创建普通索引
创建唯一性索引
创建多列索引
注
通过ALTER TABLE语句创建索引
通过ALTER TABLE语句创建索引
索引的查看
索引的删除
索引的删除
总结
前言 来了来了，回来了~
本任务将从认识索引、索引的分类以及索引的设计原则等方面着手，介绍创建和管理索引的方法。 索引并不是越多越好，要正确认识索引的重要性和设计原则，创建合适的索引。 建立和管理索引 认识索引 索引是一种特殊的数据库结构，可以用来快速查询数据库表中的特定记录。 在MySQL 中，所有的数据类型都可以被索引。 MySQL支持的索引主要有 Hash 索引和 B-Tree 索引 。但大部分都是以 B- 树（ BTREE ）方式存储， B-Tree 索引的存储结构在数据库的数据检索中有着非常优异的表现。 MySQL Hash 索引相对于 B-Tree 索引，检索效率要高上不少。 （1）MYISAM里所有键的长度仅支持1000字节，INNODB是767。
（2）BLOB和TEXT字段仅支持前缀索引。
（3）使用“! =”以及“&lt;&gt;”的时候，MySQL不使用索引。
（4）当字段使用函数的时候，MySQL无法使用索引；在连接条件字段类型不一致的时候，MySQL无法使用索引；在组合索引里使用非第一个索引时也不使用索引。
（5）在使用LIKE的时候，以“%”开头，即“%***”的时候无法使用索引；在使用OR的时候，要求or前后字段都有索引。
（6）索引是一个简单的表，MySQL将一个表的索引都保存在同一个索引文件中，所以索引也是要占用物理空间的。如果有大量的索引，索引文件可能会比数据文件更快地达到最大的文件尺寸。
（7）在更新表中索引列上的数据时，MySQL会自动地更新索引，索引树总是和表的内容保持一致。这样就降低了添加、删除、修改和其他写入操作的效率。表中的索引越多，则更新表的时间就越长。
（8）如果从表中删除了列，则索引可能会受到影响。如果所删除的列为索引的组成部分，则该列也会从索引中删除。如果组成索引的所有列都被删除，则整个索引将被删除。
索引分类 （1）普通索引（INDEX）
索引的关键字是INDEX，这是最基本的索引，它没有任何关键字限制。
（2）唯一性索引（UNIQUE）
索引列的值必须唯一，允许有空值。如果是组合索引，则列值的组合必须唯一。在一个表上可以创建多个UNIQUE索引。
（3）主键索引（PRIMARY KEY）
一种特殊的唯一索引，不允许有空值。一般在建表时同时，一个表只能有一个主键索引。
（4）全文索引（FULLTEXT）
只能对CHAR、VARCHAR和TEXT类型的列编制索引，并且只能在MyISAM表中编制。全文索引是一种特殊类类型索引，它查找的是文本中的关键词，而不是直接比较索引中的值。在MySQL默认情况下，对于中文作用不大。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-24T08:00:00+08:00">
    <meta property="article:modified_time" content="2024-03-24T08:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[MySQL]数据库原理6——喵喵期末不挂科</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> <img alt="" height="580" src="https://images2.imgbox.com/33/3d/PwSamTtK_o.png" width="589"> </p> 
<blockquote> 
 <p><span style="color:#fe2c24;">希望你开心，希望你健康，希望你幸福，希望你点赞！</span></p> 
 <p><span style="color:#fe2c24;">最后的最后，关注喵，关注喵，关注喵，佬佬会看到更多有趣的博客哦！！！</span></p> 
 <p><span style="color:#fe2c24;">喵喵喵，你对我真的很重要！</span></p> 
</blockquote> 
<p></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E5%BB%BA%E7%AB%8B%E5%92%8C%E7%AE%A1%E7%90%86%E7%B4%A2%E5%BC%95-toc" style="margin-left:0px;"><a href="#%E5%BB%BA%E7%AB%8B%E5%92%8C%E7%AE%A1%E7%90%86%E7%B4%A2%E5%BC%95" rel="nofollow">建立和管理索引</a></p> 
<p id="%E8%AE%A4%E8%AF%86%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#%E8%AE%A4%E8%AF%86%E7%B4%A2%E5%BC%95" rel="nofollow">认识索引</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB-toc" style="margin-left:40px;"><a href="#%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB" rel="nofollow">索引分类</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99-toc" style="margin-left:40px;"><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99" rel="nofollow">索引的设计原则</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E5%88%9B%E5%BB%BA-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E5%88%9B%E5%BB%BA" rel="nofollow">创建表时创建</a></p> 
<p id="%E7%94%A8CREATE%20INDEX%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA-toc" style="margin-left:80px;"><a href="#%E7%94%A8CREATE%20INDEX%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA" rel="nofollow">用CREATE INDEX语句创建</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95" rel="nofollow">创建普通索引</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E6%80%A7%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E6%80%A7%E7%B4%A2%E5%BC%95" rel="nofollow">创建唯一性索引</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E5%A4%9A%E5%88%97%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E5%A4%9A%E5%88%97%E7%B4%A2%E5%BC%95" rel="nofollow">创建多列索引</a></p> 
<p id="%E6%B3%A8-toc" style="margin-left:40px;"><a href="#%E6%B3%A8" rel="nofollow">注</a></p> 
<p id="%E9%80%9A%E8%BF%87ALTER%20TABLE%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#%E9%80%9A%E8%BF%87ALTER%20TABLE%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95" rel="nofollow">通过ALTER TABLE语句创建索引</a></p> 
<p id="%E9%80%9A%E8%BF%87ALTER%20TABLE%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95-toc" style="margin-left:40px;"><a href="#%E9%80%9A%E8%BF%87ALTER%20TABLE%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95" rel="nofollow">通过ALTER TABLE语句创建索引</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E7%9A%84%E6%9F%A5%E7%9C%8B-toc" style="margin-left:40px;"><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E6%9F%A5%E7%9C%8B" rel="nofollow">索引的查看</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4-toc" style="margin-left:40px;"><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4" rel="nofollow">索引的删除</a></p> 
<p id="%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4-toc" style="margin-left:40px;"><a href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4" rel="nofollow">索引的删除</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<h2>前言</h2> 
<blockquote> 
 <p>来了来了，回来了~</p> 
 <div style="margin-left:.38in;text-align:left;"> 
  <span style="color:#000000;">本任务将从认识索引、索引的分类以及索引的设计原则等方面着手，介绍创建和管理索引的方法。</span> 
 </div> 
 <div style="margin-left:.38in;text-align:left;"></div> 
 <div style="margin-left:.38in;text-align:left;"> 
  <span style="color:#000000;">索引并不是越多越好，要正确认识索引的重要性和设计原则，创建合适的索引。</span> 
 </div> 
</blockquote> 
<hr> 
<h2 id="%E5%BB%BA%E7%AB%8B%E5%92%8C%E7%AE%A1%E7%90%86%E7%B4%A2%E5%BC%95"><span style="color:#0d0016;">建立和管理索引</span></h2> 
<h3 id="%E8%AE%A4%E8%AF%86%E7%B4%A2%E5%BC%95"><span style="color:#0d0016;">认识索引</span></h3> 
<blockquote> 
 <div style="margin-left:.38in;text-align:left;"> 
  <span style="color:#000000;">索引是一种特殊的数据库结构，可以用来快速查询数据库表中的特定记录。</span> 
 </div> 
 <div style="margin-left:.38in;text-align:left;"></div> 
 <div style="margin-left:.38in;text-align:left;"> 
  <span style="color:#000000;">在MySQL</span> 
  <span style="color:#000000;">中，所有的数据类型都可以被索引。</span> 
 </div> 
 <div style="margin-left:.38in;text-align:left;"></div> 
 <div style="margin-left:.38in;text-align:left;"> 
  <span style="color:#000000;">MySQL支持的索引主要有</span> 
  <span style="color:#FF0000;">Hash</span> 
  <span style="color:#FF0000;">索引和</span> 
  <span style="color:#FF0000;">B-Tree</span> 
  <span style="color:#FF0000;">索引</span> 
  <span style="color:#000000;">。但大部分都是以</span> 
  <span style="color:#000000;">B-</span> 
  <span style="color:#000000;">树（</span> 
  <span style="color:#000000;">BTREE</span> 
  <span style="color:#000000;">）方式存储，</span> 
  <span style="color:#000000;">B-Tree</span> 
  <span style="color:#000000;">索引的存储结构在数据库的数据检索中有着非常优异的表现。</span> 
  <span style="color:#000000;">MySQL Hash</span> 
  <span style="color:#000000;">索引相对于</span> 
  <span style="color:#000000;">B-Tree</span> 
  <span style="color:#000000;">索引，检索效率要高上不少。</span> 
 </div> 
</blockquote> 
<p><img alt="" height="611" src="https://images2.imgbox.com/9b/79/ASgGiOKn_o.png" width="1200"></p> 
<p><img alt="" height="611" src="https://images2.imgbox.com/dc/94/5olJLmij_o.png" width="1200"></p> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（1</span><span style="color:#000000;">）</span><span style="color:#000000;">MYISAM</span><span style="color:#000000;">里所有键的长度仅支持</span><span style="color:#FF0000;">1000</span><span style="color:#FF0000;">字节</span><span style="color:#000000;">，</span><span style="color:#000000;">INNODB</span><span style="color:#000000;">是</span><span style="color:#FF0000;">767</span><span style="color:#000000;">。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（2</span><span style="color:#000000;">）</span><span style="color:#000000;">BLOB</span><span style="color:#000000;">和</span><span style="color:#000000;">TEXT</span><span style="color:#000000;">字段</span><span style="color:#FF0000;">仅支持前缀索引</span><span style="color:#000000;">。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（3</span><span style="color:#000000;">）使用“</span><span style="color:#000000;">!</span> <span style="color:#000000;">=</span><span style="color:#000000;">”以及“</span><span style="color:#000000;">&lt;&gt;</span><span style="color:#000000;">”的时候，</span><span style="color:#000000;">MySQL不使用索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（4</span><span style="color:#000000;">）当</span><span style="color:#FF0000;">字段使用函数</span><span style="color:#000000;">的时候，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">无法使用索引；在连接条件字段类型不一致的时候，</span><span style="color:#000000;">MySQL无法使用索引；在组合索引里使用非第一个索引时也不使用索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（5</span><span style="color:#000000;">）在使用</span><span style="color:#000000;">LIKE</span><span style="color:#000000;">的时候，</span><span style="color:#FF0000;">以“</span><span style="color:#FF0000;">%</span><span style="color:#FF0000;">”开头，即“</span><span style="color:#FF0000;">%***</span><span style="color:#FF0000;">”</span><span style="color:#000000;">的时候无法使用索引；在使用</span><span style="color:#000000;">OR</span><span style="color:#000000;">的时候，要求</span><span style="color:#FF0000;">or</span><span style="color:#FF0000;">前后字段</span><span style="color:#000000;">都有索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（6</span><span style="color:#000000;">）索引是一个简单的表，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">将一个表的索引都保存在同一个索引文件中，所以索引也是</span><span style="color:#FF0000;">要占用物理空间</span><span style="color:#000000;">的。如果有大量的索引，索引文件可能会比数据文件更快地达到最大的文件尺寸。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（7</span><span style="color:#000000;">）在更新表中索引列上的数据时，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">会</span><span style="color:#FF0000;">自动地更新</span><span style="color:#000000;">索引，索引树总是和表的内容保持一致。这样就降低了添加、删除、修改和其他写入操作的效率。表中的索引越多，则更新表的时间就越长。</span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（8</span><span style="color:#000000;">）如果从表中</span><span style="color:#FF0000;">删除了列</span><span style="color:#000000;">，则索引可能会受到影响。如果所删除的列为索引的组成部分，则</span><span style="color:#FF0000;">该列也会从索引中删除</span><span style="color:#000000;">。如果组成索引的</span><span style="color:#FF0000;">所有</span><span style="color:#000000;">列都被删除，则</span><span style="color:#FF0000;">整个</span><span style="color:#000000;">索引将被删除。</span></p> 
</blockquote> 
<hr> 
<h3 id="%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span style="color:#0d0016;">索引分类</span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（1</span><span style="color:#000000;">）普通索引（</span><span style="color:#FF0000;">INDEX</span><span style="color:#000000;">）</span></p> 
 <p style="margin-left:.38in;text-align:left;">  <span style="color:#000000;">索引的关键字是</span><span style="color:#000000;">INDEX，这是最基本的索引，它没有任何关键字限制。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（2</span><span style="color:#000000;">）唯一性索引（</span><span style="color:#FF0000;">UNIQUE</span><span style="color:#000000;">）</span></p> 
 <p style="margin-left:.38in;text-align:left;">  <span style="color:#000000;">索引列的值必须唯一，允许有空值。如果是组合索引，则列值的组合必须唯一。在一个表上可以创建多个</span><span style="color:#000000;">UNIQUE索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（3</span><span style="color:#000000;">）主键索引（</span><span style="color:#FF0000;">PRIMARY  KEY</span><span style="color:#000000;">）</span></p> 
 <p style="margin-left:.38in;text-align:left;">  <span style="color:#000000;">一种特殊的唯一索引，不允许有空值。一般在建表时同时，一个表只能有一个主键索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（4</span><span style="color:#000000;">）全文索引（</span><span style="color:#FF0000;">FULLTEXT</span><span style="color:#000000;">）</span></p> 
 <p style="margin-left:.38in;text-align:left;">  <span style="color:#000000;">只能对</span><span style="color:#000000;">CHAR</span><span style="color:#000000;">、</span><span style="color:#000000;">VARCHAR</span><span style="color:#000000;">和</span><span style="color:#000000;">TEXT</span><span style="color:#000000;">类型的列编制索引，并且只能在</span><span style="color:#000000;">MyISAM</span><span style="color:#000000;">表中编制。全文索引是一种特殊类类型索引，它查找的是文本中的关键词，而不是直接比较索引中的值。在</span><span style="color:#000000;">MySQL默认情况下，对于中文作用不大。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（5</span><span style="color:#000000;">）空间索引（</span><span style="color:#FF0000;">SPATIAL</span><span style="color:#000000;">）</span></p> 
 <p style="margin-left:.38in;text-align:left;">  <span style="color:#000000;">只能对空间列编制索引，并且只能在</span><span style="color:#000000;">MyISAM</span><span style="color:#000000;">表中编制。本书不讨论。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#FF0000;">注：按索引建立在一列还是多列上，又可以分为单列索引、多列索引（复合索引）</span></p> 
</blockquote> 
<hr> 
<h3 id="%E7%B4%A2%E5%BC%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span style="color:#0d0016;">索引的设计原则</span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（1</span><span style="color:#000000;">）在主键上创建索引，在</span><span style="color:#FF0000;">InnoDB</span><span style="color:#000000;">中如果通过主键来访问数据效率是非常高的。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（2</span><span style="color:#000000;">）为经常需要排序、分组和联合操作的字段建立索引，即那些将用于</span><span style="color:#FF0000;">JOIN</span><span style="color:#FF0000;">、</span><span style="color:#FF0000;"> GROUP BY</span><span style="color:#FF0000;">分组和</span><span style="color:#FF0000;">ORDER BY排序的字段上。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（3</span><span style="color:#000000;">）为</span><span style="color:#FF0000;">经常作为查询条件的字段</span><span style="color:#000000;">建立索引，如用于</span><span style="color:#000000;">JOIN</span><span style="color:#000000;">、</span><span style="color:#000000;"> WHERE</span><span style="color:#000000;">判断的字段。</span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（4</span><span style="color:#000000;">）尽量</span><span style="color:#FF0000;">不要对数据库中某个含有大量重复的值</span><span style="color:#000000;">的字段建立索引，如“性别”字段，在这样的字段上建立索引将不会有什么帮助；相反，还有可能降低数据库的性能。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（5）限制索引的数目。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（6）尽量使用数据量少的索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（7）尽量使用前缀来索引。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">（8</span><span style="color:#000000;">）</span><span style="color:#FF0000;">删除不再使用或者很少使用的索引</span></p> 
</blockquote> 
<hr> 
<h3 id="%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E5%88%9B%E5%BB%BA"><strong><span style="color:#0d0016;">创建表时创建</span></strong></h3> 
<pre><code class="hljs">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
		  [ ( [column_definition] , ... | [index_definition] ) ]
		  [table_option] [select_statement];
其中，index_definition为索引项。
	 [CONSTRAINT [symbol]]PRIMARY KEY [index_type] (index_col_name,...)	
	|{INDEX | KEY} [index_name] [index_type] (index_col_name,...)	
	| [CONSTRAINT [symbol]] UNIQUE [INDEX] [index_name] [index_type] (index_col_name,...)
	 | [FULLTEXT|SPATIAL] [INDEX] [index_name] (index_col_name,...) 
	| [CONSTRAINT [symbol]] FOREIGN KEY  [index_name] (index_col_name,...) [reference_definition]
		注：index_col_name:  col_name [(length)] [ASC | DESC]
</code></pre> 
<p><strong>举个例子</strong></p> 
<pre><code class="hljs">//创建student2表， s_no为主键索引，s_name为唯一性索引，并在adress列上前5位字符创建索引。
mysql&gt; CREATE TABLE IF NOT EXISTS student2 
		(s_no char(4) NOT NULL COMMENT '学号',
		s_name char(4) DEFAULT NULL COMMENT '姓名',
		sex char(2) DEFAULT '男' COMMENT '性别',
		birthday date DEFAULT NULL COMMENT '出生日期',
		d_no char(4) DEFAULT NULL COMMENT '所在系部', 
		address varchar(20) DEFAULT NULL COMMENT '家庭地址',
		phone varchar(12) DEFAULT NULL COMMENT '联系电话',
		photo blob COMMENT '照片', 
		PRIMARY KEY (s_no),
		UNIQUE index name_index(s_name),
		INDEX ad_index(address(5)))
		ENGINE=InnoDB   DEFAULT   CHARSET=gb2312;
</code></pre> 
<hr> 
<h4 id="%E7%94%A8CREATE%20INDEX%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA"> <span style="color:#0d0016;">用CREATE INDEX语句创建</span></h4> 
<blockquote> 
 <p>如果表已建好，可以使用CREATE INDEX语句建立索引。 基本形式如下。<br>           <br> CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX index_name<br>           [USING index_type]<br>           ON tbl_name (index_col_name,...)</p> 
 <p>其中，index_col_name的格式如下。<br>           col_name [(length)] [ASC | DESC]</p> 
</blockquote> 
<hr> 
<h3 id="%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95"><span style="color:#0d0016;">创建普通索引</span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">为便于按地址进行查询，为students</span><span style="color:#000000;">表的</span><span style="color:#000000;">address</span><span style="color:#000000;">列上的前</span><span style="color:#000000;">6</span><span style="color:#000000;">个字符建立一个升序索引</span><span style="color:#000000;">adress_index。</span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;">mysql&gt; CREATE INDEX adress_index</span></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">    ON students(address(6) ASC);</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">为经常作为查询条件的字段建立索引。</span> <span style="color:#000000;">例如，</span><span style="color:#000000;">STUDENTS</span><span style="color:#000000;">的</span><span style="color:#000000;">D_NO</span><span style="color:#000000;">字段经常作为查询条件，建立普通索引。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong> <span style="color:#000000;">mysql</span><span style="color:#000000;">&gt; CREATE INDEX D_N0_index</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">    ON students(D_NO);</span></strong></p> 
</blockquote> 
<hr> 
<h3 id="%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E6%80%A7%E7%B4%A2%E5%BC%95"><strong><span style="color:#0d0016;">创建唯一性索引</span></strong></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">像学生的姓名，课程表的课程名，部门表的部门名，商品表的商品名之类的字段，一般情况下是，可建立一个唯一性索引。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">在</span><span style="color:#000000;">course</span><span style="color:#000000;">表的</span><span style="color:#000000;">c_name</span><span style="color:#000000;">列上建立一个唯一性索引</span><span style="color:#000000;">c_name_index</span><span style="color:#000000;">。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">mysql</span><span style="color:#000000;">&gt; CREATE UNIQUE index </span><span style="color:#000000;">c_name_index</span> </strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">    ON course(</span><span style="color:#000000;">c_name</span><span style="color:#000000;">);</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">在</span><span style="color:#000000;">teachers</span><span style="color:#000000;">表的</span><span style="color:#000000;">t_name</span><span style="color:#000000;">字段建立一个唯一性索引</span><span style="color:#000000;">c_name_index</span><span style="color:#000000;">。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">mysql</span><span style="color:#000000;">&gt; CREATE UNIQUE index </span><span style="color:#000000;">t_name_index</span> </strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">    ON teachers(</span><span style="color:#000000;">t_name</span><span style="color:#000000;">);</span></strong></p> 
</blockquote> 
<hr> 
<h3 id="%E5%88%9B%E5%BB%BA%E5%A4%9A%E5%88%97%E7%B4%A2%E5%BC%95"><strong><span style="color:#0d0016;">创建多列索引</span></strong></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">可以在一个索引的定义中包含多个列，中间用逗号隔开，但是它们要属于同一个表。这样的索引叫做复合索引。</span></strong></p> 
 <div style="margin-left:.38in;text-align:left;"></div> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#990099;"> </span><span style="color:#000000;">在</span><span style="color:#000000;">score</span><span style="color:#000000;">表的</span><span style="color:#000000;">s_no</span><span style="color:#000000;">和</span><span style="color:#000000;">c_no</span><span style="color:#000000;">列上建立一个复合索引</span><span style="color:#000000;">score_index</span><span style="color:#000000;">。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">mysql</span><span style="color:#000000;">&gt; CREATE INDEX  </span><span style="color:#000000;">score_index</span> </strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">    ON  score(</span><span style="color:#000000;">s_no</span><span style="color:#000000;">, </span><span style="color:#000000;">c_no</span><span style="color:#000000;">)；</span></strong></p> 
</blockquote> 
<hr> 
<h3 id="%E6%B3%A8"><strong>注</strong></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">（</span><span style="color:#000000;">1</span><span style="color:#000000;">）对于</span><span style="color:#FF0000;">CHAR</span><span style="color:#FF0000;">和</span><span style="color:#FF0000;">VARCHAR</span><span style="color:#000000;">列，只用一列的一部分就可创建索引。创建索引时，使用</span><span style="color:#000000;">col_name</span><span style="color:#000000;">(length)</span><span style="color:#000000;">语法，对前缀编制索引。前缀包括每列值的前</span><span style="color:#000000;">length</span><span style="color:#000000;">个字符。</span><span style="color:#000000;">BLOB</span><span style="color:#000000;">和</span><span style="color:#000000;">TEXT</span><span style="color:#000000;">列也可以编制索引，但是必须给出前缀长度。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">（</span><span style="color:#000000;">2</span><span style="color:#000000;">）因为多数名称的</span><span style="color:#FF0000;">前</span><span style="color:#FF0000;">10</span><span style="color:#FF0000;">个字符通常不同</span><span style="color:#000000;">，所以前缀索引不会比使用列的全名创建的索引速度慢很多。另外，使用</span><span style="color:#FF0000;">列的一部分创建索引</span><span style="color:#000000;">可以使索引文件大大减小，从而节省了大量的磁盘空间，有可能提高</span><span style="color:#000000;">INSERT</span><span style="color:#000000;">操作的速度。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">（</span><span style="color:#000000;">3</span><span style="color:#000000;">）</span><span style="color:#FF0000;">CREATE INDEX</span><span style="color:#FF0000;">语句并不能创建主键</span><span style="color:#000000;">。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">（</span><span style="color:#000000;">4</span><span style="color:#000000;">）索引名可以不写 ，若不写索引名，默认与列名相同。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">（</span><span style="color:#000000;">5</span><span style="color:#000000;">）部分储存引擎允许在创建索引时指定索引类型，在索引名后面加上</span><span style="color:#000000;">USING </span><span style="color:#000000;">index_type</span><span style="color:#000000;">。如果列有多个索引类型，当没有指定</span><span style="color:#000000;">index_type</span><span style="color:#000000;">时，第一个类型是默认值。</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong>  <span style="color:#000000;">不同的储存引擎所支持的</span><span style="color:#000000;">type_name</span><span style="color:#000000;">值不同：</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong>  <span style="color:#000000;">MyISAM</span><span style="color:#000000;">：</span><span style="color:#000000;">BTREE</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong>  <span style="color:#FF0000;">InnoDB</span><span style="color:#FF0000;">：</span><span style="color:#FF0000;">BTREE</span></strong></p> 
 <p style="margin-left:.38in;text-align:left;"><strong><span style="color:#000000;">  MEMORY/HEAP</span><span style="color:#000000;">：</span><span style="color:#000000;">HASH</span><span style="color:#000000;">、</span><span style="color:#000000;">BTREE</span></strong></p> 
</blockquote> 
<hr> 
<h3 id="%E9%80%9A%E8%BF%87ALTER%20TABLE%E8%AF%AD%E5%8F%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span style="color:#0d0016;"><strong>通过ALTER TABLE语句创建索引</strong></span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>基本形式如下。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>ALTER  TABLE  </strong></span><span style="color:#000000;"><strong>tbl_name</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>  ADD [PRIMARY KEY| UNIQUE | FULLTEXT | SPATIAL ]   INDEX  </strong></span></p> 
 <p style="margin-left:.38in;text-align:left;">  <span style="color:#000000;"><strong>index_name</strong></span><span style="color:#000000;"><strong>（</strong></span><span style="color:#000000;"><strong>col_name</strong></span><span style="color:#000000;"><strong> [(length)]  [ASC|DESC]</strong></span><span style="color:#000000;"><strong>）</strong></span></p> 
</blockquote> 
<hr> 
<h3><span style="color:#0d0016;"><strong>通过ALTER TABLE语句创建索引</strong></span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>在</strong></span><span style="color:#000000;"><strong>teachers</strong></span><span style="color:#000000;"><strong>表上建立</strong></span><span style="color:#000000;"><strong>t_no</strong></span><span style="color:#000000;"><strong>主键索引（假说还未建立主键），建立</strong></span><span style="color:#000000;"><strong>t_name</strong></span><span style="color:#000000;"><strong>和</strong></span><span style="color:#000000;"><strong>d_no</strong></span><span style="color:#000000;"><strong>的复合索引，以加速表的检索速度。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>mysql</strong></span><span style="color:#000000;"><strong>&gt; ALTER TABLE teachers</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>    ADD PRIMARY KEY(</strong></span><span style="color:#000000;"><strong>t_no</strong></span><span style="color:#000000;"><strong>),</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>    ADD INDEX mark(</strong></span><span style="color:#000000;"><strong>t_name</strong></span><span style="color:#000000;"><strong>, </strong></span><span style="color:#000000;"><strong>d_no</strong></span><span style="color:#000000;"><strong>);</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>在</strong></span><span style="color:#000000;"><strong>departments</strong></span><span style="color:#000000;"><strong>表中的</strong></span><span style="color:#000000;"><strong>d_name</strong></span><span style="color:#000000;"><strong>创建唯一性索引。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>mysql</strong></span><span style="color:#000000;"><strong>&gt; ALTER TABLE departments</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>    ADD UNIQUE INDEX </strong></span><span style="color:#000000;"><strong>d_name_index</strong></span><span style="color:#000000;"><strong>(</strong></span><span style="color:#000000;"><strong>d_name</strong></span><span style="color:#000000;"><strong>);</strong></span></p> 
</blockquote> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>（</strong></span><span style="color:#000000;"><strong>1</strong></span><span style="color:#000000;"><strong>）主键索引必定是唯一的，唯一性索引不一定是主键。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>（</strong></span><span style="color:#000000;"><strong>2</strong></span><span style="color:#000000;"><strong>）一张表上只能一个主键，但</strong></span><span style="color:#FF0000;"><strong>可以有一个或者多个唯一性</strong></span><span style="color:#000000;"><strong>索引。</strong></span></p> 
</blockquote> 
<hr> 
<h3 id="%E7%B4%A2%E5%BC%95%E7%9A%84%E6%9F%A5%E7%9C%8B"><span style="color:#0d0016;"><strong>索引的查看</strong></span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>如果想要查看表中创建的索引的情况，可以使用</strong></span><span style="color:#000000;"><strong>SHOW INDEX FROM </strong></span><span style="color:#000000;"><strong>tbl_name</strong></span><span style="color:#000000;"><strong>语句，例如：</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>mysql</strong></span><span style="color:#000000;"><strong>&gt; SHOW INDEX FROM COURSE;</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"> <span style="color:#000000;"><strong>mysql</strong></span><span style="color:#000000;"><strong>&gt; SHOW INDEX FROM SCORE;</strong></span></p> 
</blockquote> 
<hr> 
<h3 id="%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%A0%E9%99%A4"><span style="color:#0d0016;"><strong>索引的删除</strong></span></h3> 
<blockquote> 
 <p><span style="color:#000000;"><strong>删除索引是指将表中已经存在的索引删除掉。一些不再使用的索引会降低表的更新速度，影响数据库的性能。对于这样的索引，应该将其删除。</strong></span></p> 
</blockquote> 
<hr> 
<h3 style="background-color:transparent;"><span style="color:#0d0016;"><strong>索引的删除</strong></span></h3> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#0d0016;"><strong>用DROP INDEX语句删除索引</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>语法格式：</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>    DROP  INDEX  </strong></span><span style="color:#000000;"><strong>index_name</strong></span><span style="color:#000000;"><strong>  ON  </strong></span><span style="color:#000000;"><strong>tbl_name</strong></span><span style="color:#000000;"><strong> ;</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;">   </p> 
 <p style="margin-left:.38in;text-align:left;">   <span style="color:#000000;"><strong>index_name</strong></span><span style="color:#000000;"><strong>为要删除的索引名</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>  tb1_name</strong></span><span style="color:#000000;"><strong>为索引所在的表。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>删除</strong></span><span style="color:#000000;"><strong>course</strong></span><span style="color:#000000;"><strong>表的</strong></span><span style="color:#000000;"><strong>mark</strong></span><span style="color:#000000;"><strong>索引。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;">    <span style="color:#000000;"><strong>mysql</strong></span><span style="color:#000000;"><strong>&gt; DROP INDEX mark ON course;</strong></span></p> 
</blockquote> 
<blockquote> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>（</strong></span><span style="color:#000000;"><strong>1</strong></span><span style="color:#000000;"><strong>）</strong></span><span style="color:#FF0000;"><strong>DROP INDEX</strong></span><span style="color:#000000;"><strong>子句可以删除各种类型的索引。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>（</strong></span><span style="color:#000000;"><strong>2</strong></span><span style="color:#000000;"><strong>）删除唯一性索引，如同删除普通索引一样，用</strong></span><span style="color:#000000;"><strong>DROP INDEX</strong></span><span style="color:#000000;"><strong>语句即可，不能写成</strong></span><span style="color:#000000;"><strong>DROP UNIQUE INDEX</strong></span><span style="color:#000000;"><strong>，但是创建唯一性索引要写成</strong></span><span style="color:#000000;"><strong>ADD UNIQUE INDEX</strong></span><span style="color:#000000;"><strong>。</strong></span></p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
 <p style="margin-left:.38in;text-align:left;"><span style="color:#000000;"><strong>（</strong></span><span style="color:#000000;"><strong>3</strong></span><span style="color:#000000;"><strong>）如要</strong></span><span style="color:#FF0000;"><strong>删除主键索引</strong></span><span style="color:#000000;"><strong>，则直接使用</strong></span><span style="color:#000000;"><strong>DROP PRIMARY KEY</strong></span><span style="color:#000000;"><strong>子句进行删除，不需要提供索引名称，因为一个表中只有一个主键。</strong></span> </p> 
 <p style="margin-left:.38in;text-align:left;"></p> 
</blockquote> 
<hr> 
<h2 id="%E6%80%BB%E7%BB%93"><strong>总结</strong></h2> 
<blockquote> 
 <p>人生苦短一天当作两天卷~</p> 
</blockquote> 
<hr> 
<blockquote> 
 <p><strong><span style="color:#fe2c24;">希望你开心，希望你健康，希望你幸福，希望你点赞！</span></strong></p> 
 <p><strong><span style="color:#fe2c24;">最后的最后，关注喵，关注喵，关注喵，佬佬会看到更多有趣的博客哦！！！</span></strong></p> 
 <p><strong><span style="color:#fe2c24;">喵喵喵，你对我真的很重要！</span></strong></p> 
</blockquote> 
<p><strong><img alt="" height="573" src="https://images2.imgbox.com/24/0c/ZSztnQ7B_o.png" width="581"></strong>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/11d7bfbec344c745848574babac7ae25/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DFS（深度优先遍历、N皇后问题、2N皇后问题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/60f185a4f2870472795aaf801b476603/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于Hive的招聘网站的大数据分析系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>