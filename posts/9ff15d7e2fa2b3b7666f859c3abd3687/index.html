<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>H5（uniapp）跳转至小程序页面 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9ff15d7e2fa2b3b7666f859c3abd3687/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="H5（uniapp）跳转至小程序页面">
  <meta property="og:description" content="当前场景：需要在H5页面点击跳转至微信小程序页面
主要参考方法：1、获取接口调用凭据 | 微信开放文档
2、获取scheme码 | 微信开放文档
需要解决的主要问题:
在对微信文档中的API接口进行调用的时候，不可避免的会出现跨域的问题,那么就需要在uniapp项目中对跨域进行处理，主要更改manifest.json下的h5进行配置：
&#34;h5&#34; : { ..... &#34;devServer&#34;: { &#34;proxy&#34;: {//配置代理服务器来解决跨域问题，uniapp不适用CORS方案和设置JSONP方案 &#34;/api/&#34;: {//映射域名 &#34;target&#34;: &#34;https://api.weixin.qq.com&#34;, &#34;pathRewrite&#34;: { &#34;^/api&#34;: &#34;&#34; } } } }, .... } 这样跨域问题就解决了，在请求API时就不需要对请求头进行跨域处理了。
主要步骤：(简单示例)
&lt;template&gt; &lt;view&gt; &lt;uni-link href=&#34;weiwx:xxxxxxxxx&#34; text=&#34;跳转至小程序&#34;&gt;&lt;/uni-link&gt; &lt;/view&gt; &lt;/template&gt; &lt;script&gt; export default { data(){ return{} }, onLoad() { this.getToken() }, methods:{ getToken(){ uni.request({ url: &#34;/api/cgi-bin/token&#34;, method: &#39;GET&#39;, data: { &#34;grant_type&#34;: &#34;client_credential&#34;, &#34;appid&#34;: &#34;小程序唯一凭证，即 AppID&#34;, &#34;secret&#34;: &#34;小程序唯一凭证密钥，即 AppSecret&#34; }, success: res =&gt; { console.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-13T14:46:47+08:00">
    <meta property="article:modified_time" content="2023-09-13T14:46:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">H5（uniapp）跳转至小程序页面</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>当前场景：需要在H5页面点击跳转至微信小程序页面</strong></p> 
<p><strong>主要参考方法</strong>：1、<a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html" rel="nofollow" title="获取接口调用凭据 | 微信开放文档">获取接口调用凭据 | 微信开放文档</a></p> 
<p>                         2、<a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/qrcode-link/url-scheme/generateScheme.html" rel="nofollow" title="获取scheme码 | 微信开放文档">获取scheme码 | 微信开放文档</a></p> 
<p><strong>需要解决的主要问题</strong>:</p> 
<p>在对微信文档中的API接口进行调用的时候，不可避免的会出现跨域的问题,那么就需要在uniapp项目中对跨域进行处理，主要更改manifest.json下的h5进行配置：</p> 
<pre><code class="language-javascript">    "h5" : {

        .....

        "devServer": {
            "proxy": {//配置代理服务器来解决跨域问题，uniapp不适用CORS方案和设置JSONP方案
                "/api/": {//映射域名
                    "target": "https://api.weixin.qq.com",
                    "pathRewrite": {
                        "^/api": ""
                    }
                }
            }
        },
     ....
    }</code></pre> 
<p>这样跨域问题就解决了，在请求API时就不需要对请求头进行跨域处理了。</p> 
<p>主要步骤：(简单示例)</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;view&gt;
       &lt;uni-link href="weiwx:xxxxxxxxx" text="跳转至小程序"&gt;&lt;/uni-link&gt;
  &lt;/view&gt;
&lt;/template&gt;


&lt;script&gt;
export default {
   data(){
     return{}
   },
   onLoad() {
      this.getToken()
   },
   methods:{
       getToken(){
           uni.request({
                url: "/api/cgi-bin/token",
                method: 'GET',
                data: {
                     "grant_type": "client_credential",
                     "appid": "小程序唯一凭证，即 AppID",
                     "secret": "小程序唯一凭证密钥，即 AppSecret"
                 },
                success: res =&gt; {
                   console.log(res);
                   this.getScheme(res.data. access_token)
                }
           })
       },
      getScheme(token){
             uni.request({
                url: `/api/wxa/generatescheme?access_token=${token}`,
                method: 'POST',
                data:{
                 "jump_wxa":
                     {
                         "path": "通过 scheme 码进入的小程序页面路径",
                         "query": "通过 scheme 码进入小程序时的 query",
                         "env_version": "默认值"release"。要打开的小程序版本"
                     },
                 "is_expire":true,
                 "expire_type":1,
                 "expire_interval":1
                } ,
                success: res =&gt; {
                   ....

                   //这里获取到openlink的就是可跳转的路径地址，把它赋值给href即可
                }
           })
      },
   }
}
&lt;/script&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/add75df695a5b06af82bf7d68790d1d2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端：纯css实现图片轮播（自动&#43;手动）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a1dbbfc78192b08b24f67b9ea58d0b97/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【hive】行转列—explode()/posexplode()/lateral view 函数使用场景</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>