<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android基础入门：dataBinding的简单使用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4390850074a889153703782c1059f900/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Android基础入门：dataBinding的简单使用">
  <meta property="og:description" content="2.DataBinding的使用
2.1属性更新
2.2``标签
2.2.1简单数据的定义与绑定
2.2.2复杂数据的定义与绑定
2.3事件绑定
2.3.1点击事件绑定
2.3.2点击事件回传数据
2.3.3动态改变对象数据在控件上显示
2.3.4动态改变基本数据在控件上显示
2.4与输入控件结合
2.5与图片控件结合
dataBinding是实现 view 和 data 绑定的工具，把数据映射到 view 的 xml中，可以在 xml 布局文件中实现 view 的赋值，方法调用。使用 DataBinding 后，我们不用再写 findViewById，不用再获取控件对象，不用再设置监听，可以节省我们 activity 中的很多获取控件，赋值，添加监听所需要的代码。
可以说MVP &#43; DataBinding就是MVVC（关于MVC，MVP，MVVC的区别可看往期文章）
1.前期准备
=========================================================================
1.1打开dataBinding
1.2修改布局文件
选中布局文件的第一行，按alter&#43;enter就会弹出提示，默认选中data binding layout
改造好的的新的布局文件里最大的变化就是多了一对&lt;data&gt;&lt;/data&gt;标签；很容易想到这是为了实现布局文件里数据和布局的分离，以及更好的实现数据与视图的双向绑定（这里文章后面会慢慢介绍）
1.3修改Activity方法
修改好布局文件之后，还需要对Activity文件做修改
使用了dataBinding之后，编译器会自动帮我们生成一个类名&#43;Binding的新类，这其实是编译器帮我们把布局文件转换成了一个java文件，可以看到我们通过ctrl&#43;鼠标左键点击这个类可以直接访问到布局文件
除此之外还需要为mainBinding这个对象赋初值，同样是通过setContentView方法，不过要传入两个参数，前者是Activity类，后者是布局文件的id
mainBinding=DataBindingUtil.setContentView(this,R.layout.activity_main); 2.DataBinding的使用
===================================================================================
2.1属性更新
那么如何使用dataBingding呢？
我们先在布局文件中新建几个控件，这里我的两个控件：文本控件的id是textview，按钮控件的id是button
回到Activity中，我们通过mainBInding对象可以看到，其下有两个值，textView和button，这正是我们刚刚两个组件的id，所以通过mainBinding对象我们可以轻松的取到我们布局文件里的组件，不再需要findViewById了
通过mainBinding获取到组件同样的可以设置这些控件的各种属性
2.2&lt;data&gt;标签
之前有提到在&lt;data&gt;&lt;/data&gt;标签中定义数据
在&lt;androidx.constraintlayout.widget.ConstraintLayout&gt;中定义布局并且绑定数据，这类似于前端vue框架中的数据视图双向绑定
2.2.1简单数据的定义与绑定 那么如何在data标签中定义数据呢？
通过标签，定义数据的名字name和类型type，这个类型可以是java中的所有基本类型
然后到布局中，用插值表达式将数据替代掉
不过现在什么也不会显示，因为这两个变量只定义了，没有赋值
看到这，我们也明白data标签的好处之一了，数据的定义都在data标签中，而constraint中就只管布局，通过插值表达式来绑定数据，不会出现数据。
那么data标签里的数据又如何初始化赋值呢？
这部分逻辑操作就交给Activity了。每定义一个varible，在布局的Binding类中都会生成此变量的get和set方法，通过这两个方法我们对数据进行初始化和更新。
所以有了dataBinding我们极大的减轻了Activity所要做的操作，Activity可以更专注于对数据与逻辑的处理，而UI的获取与数据和UI的绑定都交给了布局文件。
2.2.2复杂数据的定义与绑定 我们尝试一下类类型的数据的定义与绑定
先定义一个简单的实体类，简单的写两个属性
在data中定义一个类变量，name属性的同样是这个变量的名字，type属性就是这个包名.类名
数据的绑定也是一样的，通过类变量的名字.属性，所以我们可以把类变量person看成Person类new 出来的一个对象">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-27T14:54:44+08:00">
    <meta property="article:modified_time" content="2024-04-27T14:54:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android基础入门：dataBinding的简单使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <ul><li> <p>2.DataBinding的使用</p> </li><li> 
  <ul><li> <p>2.1属性更新</p> </li><li> <p>2.2``标签</p> </li><li> 
    <ul><li> <p>2.2.1简单数据的定义与绑定</p> </li><li> <p>2.2.2复杂数据的定义与绑定</p> </li></ul> </li><li> <p>2.3事件绑定</p> </li><li> 
    <ul><li> <p>2.3.1点击事件绑定</p> </li><li> <p>2.3.2点击事件回传数据</p> </li><li> <p>2.3.3动态改变对象数据在控件上显示</p> </li><li> <p>2.3.4动态改变基本数据在控件上显示</p> </li></ul> </li><li> <p>2.4与输入控件结合</p> </li><li> <p>2.5与图片控件结合</p> </li></ul> </li></ul> 
<hr> 
<p>dataBinding是实现 view 和 data 绑定的工具，把数据映射到 view 的 xml中，可以在 xml 布局文件中实现 view 的赋值，方法调用。使用 DataBinding 后，我们不用再写 findViewById，不用再获取控件对象，不用再设置监听，可以节省我们 activity 中的很多获取控件，赋值，添加监听所需要的代码。</p> 
<p>可以说MVP + DataBinding就是MVVC（关于MVC，MVP，MVVC的区别可看往期文章）</p> 
<p><a href="" rel="nofollow"></a>1.前期准备</p> 
<p>=========================================================================</p> 
<p><a href="" rel="nofollow"></a>1.1打开dataBinding</p> 
<hr> 
<p><img src="https://images2.imgbox.com/1d/3e/1Q7uBRIr_o.png" alt="image-20220602080856696"></p> 
<p><a href="" rel="nofollow"></a>1.2修改布局文件</p> 
<hr> 
<p>选中布局文件的第一行，按<code>alter+enter</code>就会弹出提示，默认选中<code>data binding layout</code></p> 
<p><img src="https://images2.imgbox.com/e5/a4/nxVwUUlO_o.gif" alt="AndroiddataBinding"></p> 
<p><img src="https://images2.imgbox.com/f5/fd/lClqsk2P_o.png" alt="image-20220602140306689"></p> 
<p>改造好的的新的布局文件里最大的变化就是多了一对<code>&lt;data&gt;&lt;/data&gt;</code>标签；很容易想到这是为了实现布局文件里数据和布局的分离，以及更好的实现<code>数据与视图的双向绑定</code>（这里文章后面会慢慢介绍）</p> 
<p><img src="https://images2.imgbox.com/79/ca/VnJF0mV5_o.png" alt="image-20220602142624501"></p> 
<p><a href="" rel="nofollow"></a>1.3修改Activity方法</p> 
<hr> 
<p>修改好布局文件之后，还需要对Activity文件做修改</p> 
<p>使用了dataBinding之后，编译器会自动帮我们生成一个<code>类名+Binding</code>的新类，这其实是编译器帮我们把布局文件转换成了一个java文件，可以看到我们<code>通过ctrl+鼠标左键</code>点击这个类可以直接访问到布局文件</p> 
<p><img src="https://images2.imgbox.com/7d/5f/mJ53diOm_o.png" alt="image-20220602140519092"></p> 
<p><img src="https://images2.imgbox.com/3f/5a/gBLM0CY1_o.gif" alt="AndroiddataBinding2"></p> 
<p>除此之外还需要为mainBinding这个对象赋初值，同样是通过<code>setContentView</code>方法，不过要传入两个参数，前者是Activity类，后者是布局文件的id</p> 
<pre><code>
mainBinding=DataBindingUtil.setContentView(this,R.layout.activity_main);



</code></pre> 
<p><img src="https://images2.imgbox.com/ed/52/6m7hhnco_o.png" alt="image-20220602141039360"></p> 
<p><img src="https://images2.imgbox.com/bf/41/1v6J5Tp6_o.png" alt="image-20220602081156094"></p> 
<p><a href="" rel="nofollow"></a>2.DataBinding的使用</p> 
<p>===================================================================================</p> 
<p><a href="" rel="nofollow"></a>2.1属性更新</p> 
<hr> 
<p>那么如何使用dataBingding呢？</p> 
<p>我们先在布局文件中新建几个控件，这里我的两个控件：文本控件的id是<code>textview</code>，按钮控件的id是<code>button</code></p> 
<p><img src="https://images2.imgbox.com/3b/c1/b74DtFWy_o.png" alt="image-20220602141418203"></p> 
<p>回到Activity中，我们通过mainBInding对象可以看到，其下有两个值，<code>textView</code>和<code>button</code>，这正是我们刚刚两个组件的id，所以通过mainBinding对象我们可以轻松的取到我们布局文件里的组件，不再需要<code>findViewById</code>了</p> 
<p><img src="https://images2.imgbox.com/97/94/R28Mqks0_o.png" alt=""></p> 
<p>通过mainBinding获取到组件同样的可以设置这些控件的各种属性</p> 
<p><img src="https://images2.imgbox.com/75/cd/VexmHn0G_o.png" alt="image-20220602142247143"></p> 
<p><a href="" rel="nofollow"></a>2.2<code>&lt;data&gt;</code>标签</p> 
<hr> 
<p>之前有提到在<code>&lt;data&gt;&lt;/data&gt;</code>标签中定义数据</p> 
<p>在<code>&lt;androidx.constraintlayout.widget.ConstraintLayout&gt;</code>中定义布局并且绑定数据，这类似于前端vue框架中的数据视图双向绑定</p> 
<h4><a id="_221_178"></a><a href="" rel="nofollow"></a>2.2.1简单数据的定义与绑定</h4> 
<p>那么如何在data标签中定义数据呢？</p> 
<p>通过标签，定义数据的<code>名字name和类型type</code>，这个类型可以是java中的所有基本类型</p> 
<p><img src="https://images2.imgbox.com/87/01/2k4aiYrp_o.png" alt="image-20220602144940501"></p> 
<p>然后到布局中，用<code>插值表达式</code>将数据替代掉</p> 
<p><img src="https://images2.imgbox.com/35/41/9JKoQ4lh_o.png" alt="image-20220602145243458"></p> 
<p>不过现在什么也不会显示，因为这两个变量只定义了，没有赋值</p> 
<p><img src="https://images2.imgbox.com/7d/98/K6maskip_o.png" alt="image-20220602145419501"></p> 
<p>看到这，我们也明白data标签的好处之一了，<strong>数据的定义都在data标签中，而constraint中就只管布局，通过插值表达式来绑定数据，不会出现数据。</strong></p> 
<p>那么data标签里的数据又如何初始化赋值呢？</p> 
<p>这部分逻辑操作就交给Activity了。每定义一个varible，在布局的Binding类中都会生成此变量的<code>get和set方法</code>，通过这两个方法我们对数据进行初始化和更新。</p> 
<p><img src="https://images2.imgbox.com/18/de/iubkPLY6_o.png" alt="image-20220602145847676"></p> 
<p><img src="https://images2.imgbox.com/89/67/kxGiqFSV_o.png" alt="image-20220602150141004"></p> 
<p>所以有了dataBinding我们极大的减轻了Activity所要做的操作，<strong>Activity可以更专注于对数据与逻辑的处理，而UI的获取与数据和UI的绑定都交给了布局文件。</strong></p> 
<h4><a id="_222_234"></a><a href="" rel="nofollow"></a>2.2.2复杂数据的定义与绑定</h4> 
<p>我们尝试一下类类型的数据的定义与绑定</p> 
<p>先定义一个简单的实体类，简单的写两个属性</p> 
<p><img src="https://images2.imgbox.com/9a/fc/WmOAuu6U_o.png" alt="image-20220602150900388"></p> 
<p>在data中定义一个类变量，name属性的同样是这个变量的名字，type属性就是这个<code>包名.类名</code></p> 
<p><img src="https://images2.imgbox.com/5f/a6/YjsHRmge_o.png" alt="image-20220602151129993"></p> 
<p>数据的绑定也是一样的，通过<code>类变量的名字.属性</code>，所以我们可以把类变量person看成Person类new 出来的一个对象</p> 
<p><img src="https://images2.imgbox.com/b1/7d/o7edLc74_o.png" alt="image-20220602151424656"></p> 
<p>回到Activity中对类变量进行初始化，运行可以看到UI上的数据已经更新了</p> 
<p><img src="https://images2.imgbox.com/40/a6/KAsYxeeE_o.png" alt="image-20220602152029525"></p> 
<p><a href="" rel="nofollow"></a>2.3事件绑定</p> 
<hr> 
<p>dataBinding可以把事件以数据的形式绑定到布局文件中</p> 
<h4><a id="_231_284"></a><a href="" rel="nofollow"></a>2.3.1点击事件绑定</h4> 
<p>首先我们在Activity中定义一个内部类</p> 
<p><img src="https://images2.imgbox.com/ae/c9/9kquLTC5_o.png" alt="image-20220602152649237"></p> 
<p>然后在data标签中定义这个内部类的变量</p> 
<p><img src="https://images2.imgbox.com/6f/6b/mxV9I6M5_o.png" alt="image-20220602152748209"></p> 
<p>通过<code>onClick</code>属性实现事件的绑定，值得注意的是<code>myclick.onClick</code>方法后没有括号；这样简单的几行代码就实现了事件的绑定。用户每点击一次按钮都会调用<code>MyClick类</code>中的<code>onClick()方法</code></p> 
<pre><code>
 android:onClick="@{myclick.onClick}"



</code></pre> 
<p><img src="https://images2.imgbox.com/97/a5/dzvv66IC_o.png" alt="image-20220602152950737"></p> 
<p>而Activity只需要做的事情就是初始化这个点击事件。因为此时事件已经被当成数据在使用了，通过set方法设置Myclick的值即可。然后打印日志查看运行效果</p> 
<pre><code>
mainBinding.setMyclick(new MyClick());



</code></pre> 
<p><img src="https://images2.imgbox.com/81/19/6LtXRbiB_o.png" alt="image-20220602153418460"></p> 
<p>可以看到每点击一次按钮都会打印一次日志，说明调用成功</p> 
<p><img src="https://images2.imgbox.com/75/1d/x0HOhMFP_o.png" alt="image-20220602153650965"></p> 
<h4><a id="_232_348"></a><a href="" rel="nofollow"></a>2.3.2点击事件回传数据</h4> 
<p>我们看到onClick()方法中，我们传入的是view参数，那可以传其他参数吗？</p> 
<pre><code>
public class MyClick{

        public void onClick(View view){

            Log.i("myclick", "onClick: 点赞成功！");

        }

    }



</code></pre> 
<p>当然是可以的而且我们是通过这一种方法事件点击回传数据。如我们把Person作为参数传入，并绑定点击事件，那么用户点击按钮，又可以将数据传回到Activity中。</p> 
<p>改造一下onClick()方法，传入参数改为Person</p> 
<p><img src="https://images2.imgbox.com/cc/d6/2nN2TStZ_o.png" alt="image-20220602155027810"></p> 
<p>并在布局文件中重新绑定，这里绑定事件也有点不同了，需要用到lambda表达式</p> 
<pre><code>
android:onClick="@{()-&gt;myclick.onClick(person)}"



</code></pre> 
<h4><a id="_399"></a>总结</h4> 
<p><strong>写到这里也结束了，在文章最后放上一个小小的福利，以下为小编自己在学习过程中整理出的一个关于Flutter的学习思路及方向，从事互联网开发，最主要的是要学好技术，而学习技术是一条慢长而艰苦的道路，不能靠一时激情，也不是熬几天几夜就能学好的，必须养成平时努力学习的习惯，更加需要准确的学习方向达到有效的学习效果。<br> 由于内容较多就只放上一个大概的大纲，需要更及详细的学习思维导图的<br> 还有高级UI、性能优化、架构师课程、NDK、混合式开发（ReactNative+Weex）微信小程序、Flutter全方面的Android进阶实践技术资料，并且还有技术大牛一起讨论交流解决问题。</strong></p> 
<p><img src="https://images2.imgbox.com/2c/c0/0H1RrLuL_o.png" alt="跨平台开发：Flutter.png"></p> 
<p><strong>网上学习资料一大堆，但如果学到的知识不成体系，遇到问题时只是浅尝辄止，不再深入研究，那么很难做到真正的技术提升。</strong></p> 
<p><strong><a href="https://bbs.csdn.net/topics/618156601">需要这份系统化学习资料的朋友，可以戳这里获取</a></strong></p> 
<p><strong>一个人可以走的很快，但一群人才能走的更远！不论你是正从事IT行业的老鸟或是对IT行业感兴趣的新人，都欢迎加入我们的的圈子（技术交流、学习资源、职场吐槽、大厂内推、面试辅导），让我们一起学习成长！</strong></p> 
<p>上一个大概的大纲，需要更及详细的学习思维导图的<br> 还有高级UI、性能优化、架构师课程、NDK、混合式开发（ReactNative+Weex）微信小程序、Flutter全方面的Android进阶实践技术资料，并且还有技术大牛一起讨论交流解决问题。**</p> 
<p>[外链图片转存中…(img-xC2fySIp-1714200874425)]</p> 
<p><strong>网上学习资料一大堆，但如果学到的知识不成体系，遇到问题时只是浅尝辄止，不再深入研究，那么很难做到真正的技术提升。</strong></p> 
<p><strong><a href="https://bbs.csdn.net/topics/618156601">需要这份系统化学习资料的朋友，可以戳这里获取</a></strong></p> 
<p><strong>一个人可以走的很快，但一群人才能走的更远！不论你是正从事IT行业的老鸟或是对IT行业感兴趣的新人，都欢迎加入我们的的圈子（技术交流、学习资源、职场吐槽、大厂内推、面试辅导），让我们一起学习成长！</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c297114af13f1e1193b3107f5c54d891/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Stable Diffusion Windows本地部署超详细教程（手动&#43;自动&#43;整合包三种方式）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb5937f5cf78703aa19a4a2dd89e0425/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">密度峰值聚类(DPC)算法（Python3实现）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>