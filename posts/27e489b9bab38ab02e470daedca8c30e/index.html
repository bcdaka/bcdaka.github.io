<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Webpack5 搭建 Vue3 &#43; TS 项目，web网页开发 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/27e489b9bab38ab02e470daedca8c30e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Webpack5 搭建 Vue3 &#43; TS 项目，web网页开发">
  <meta property="og:description" content="为何升级？除了折腾外，便是享受新版本带给我们的新特性体验。
Webpack5 的新特性
持久化缓存
moduleIds &amp; chunkIds 的优化
更智能的 tree shaking
Module Federation
…
Vue3 的新特性 更小
更快
加强 TypeScript 支持
加强 API 设计一致性
提高自身可维护性
开放更多底层功能
确定项目技术栈 编程语言：TypeScript 4.2.4
构建工具：[Webpack 5.33.2]()
前端框架：Vue 3.0.11
路由工具：Vue Router 4.0.6
状态管理：Vuex 4.0.0
CSS 预编译：Sass / Less
HTTP 工具：Axios
Git Hook 工具：Husky &#43; Lint-staged
代码规范：EditorConfig &#43; Prettier &#43; ESLint
提交规范：Commitlint
构建部署：Travis
3. 项目搭建
此文并不是从零搭建，而是在 createVue@v1.0.0 的基础上修改搭建，如若看不懂，可以先看《Webpack4 搭建 Vue 项目》，跟着一步步搭建，后再看此文升级
创建 createVue 文件夹，进入该文件夹， npm init 初始化项目">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-04T20:43:24+08:00">
    <meta property="article:modified_time" content="2024-04-04T20:43:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Webpack5 搭建 Vue3 &#43; TS 项目，web网页开发</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>为何升级？除了折腾外，便是享受新版本带给我们的新特性体验。</p> 
<p><strong>Webpack5 的新特性</strong></p> 
<ul><li> <p>持久化缓存</p> </li><li> <p>moduleIds &amp; chunkIds 的优化</p> </li><li> <p>更智能的 tree shaking</p> </li><li> <p>Module Federation</p> </li><li> <p>…</p> </li></ul> 
<h4><a id="Vue3__30"></a><strong>Vue3 的新特性</strong></h4> 
<ul><li> <p>更小</p> </li><li> <p>更快</p> </li><li> <p>加强 TypeScript 支持</p> </li><li> <p>加强 API 设计一致性</p> </li><li> <p>提高自身可维护性</p> </li><li> <p>开放更多底层功能</p> </li></ul> 
<h4><a id="_60"></a><strong>确定项目技术栈</strong></h4> 
<ul><li> <p>编程语言：TypeScript 4.2.4</p> </li><li> <p>构建工具：[Webpack 5.33.2]()</p> </li><li> <p>前端框架：Vue 3.0.11</p> </li><li> <p>路由工具：Vue Router 4.0.6</p> </li><li> <p>状态管理：Vuex 4.0.0</p> </li><li> <p>CSS 预编译：Sass / Less</p> </li><li> <p>HTTP 工具：Axios</p> </li><li> <p>Git Hook 工具：Husky + Lint-staged</p> </li><li> <p>代码规范：EditorConfig + Prettier + ESLint</p> </li><li> <p>提交规范：Commitlint</p> </li><li> <p>构建部署：Travis</p> </li></ul> 
<p><strong>3. 项目搭建</strong></p> 
<hr> 
<p>此文并不是从零搭建，而是在 createVue@v1.0.0 的基础上修改搭建，如若看不懂，可以先看《Webpack4 搭建 Vue 项目》，跟着一步步搭建，后再看此文升级</p> 
<p>创建 createVue 文件夹，进入该文件夹， npm init 初始化项目</p> 
<p>老规矩，安装 webpack 四件套<code>npm i webpack webpack-cli webpack-dev-server webpack-merge --save-dev</code></p> 
<p>当前使用版本：</p> 
<p>“webpack”: “^5.33.2”,</p> 
<p>“webpack-bundle-analyzer”: “^4.4.1”,</p> 
<p>“webpack-cli”: “^4.6.0”,</p> 
<p>“webpack-dev-server”: “^3.11.2”,</p> 
<p>“webpack-merge”: “^5.7.3”,</p> 
<p>webpack5 启动开发服务器命令与之前有所变化，从 <code>webpack-dev-server</code> 转变为 <code>webpack serve</code>, 因此 package.json 中 script 的 start 修改为： <code>"start": "webpack serve --progress --hot --inline --config build/webpack.dev.js"</code></p> 
<ol><li>创建相应文件</li></ol> 
<p>与之前没有太大差异。增加变动的有一下几点：</p> 
<p>1). 持久化缓存，增加 cache 配置. v5 中缓存默认是 memory，修改设置"filesystem"写入硬盘</p> 
<p>// webpack.dev.js</p> 
<p>module.exports = merge(common, {<!-- --></p> 
<p>cache: {<!-- --></p> 
<p>type: ‘filesystem’,</p> 
<p>}</p> 
<p>//…</p> 
<p>}</p> 
<p>2). 去除插件 clean-webpack-plugin（v5支持），webpack.HashedModuleIdsPlugin（v5更好的 moduleIds &amp; chunkIds），HardSourceWebpackPlugin（v5支持），happypack（v5不兼容）</p> 
<p>安装 vue 核心解析插件</p> 
<p>解析插件有所不同，从 <code>vue-template-compiler</code> 变成了 <code>@vue/compiler-sfc</code>, <code>vue-loader</code> 保持不变。 <code>npm i vue-loader @vue/compiler-sfc --save-dev</code></p> 
<p>// 当前我使用版本</p> 
<p>“vue-loader”: “^16.2.0”,</p> 
<p>“@vue/compiler-sfc”: “^3.0.11”,</p> 
<p>安装 vue3 及相关库，添加 vue 类型文件</p> 
<p><code>npm i vue@next vuex@4.0.0-rc.1 vue-router --save</code></p> 
<p>src 文件夹下添加 shims-vue.d.ts 文件，解决 vue 类型报错</p> 
<p>// shims-vue.d.ts</p> 
<p>declare module ‘*.vue’ {<!-- --></p> 
<p>import type { DefineComponent } from ‘vue’</p> 
<p>const component: DefineComponent&lt;{}, {}, any&gt;</p> 
<p>export default component</p> 
<p>}</p> 
<p>安装 html 模板解析插件</p> 
<p><code>npm i html-webpack-plugin --save-dev</code></p> 
<p>安装 typescript 及解析插件</p> 
<p><code>npm i typescript ts-loader --save-dev</code></p> 
<p>配置ts-loader解析：</p> 
<p>// webpack.base.js</p> 
<p>// rules</p> 
<p>{<!-- --></p> 
<p>test: /.(t|j)s$/,</p> 
<p>exclude: /node_modules/,</p> 
<p>use: [</p> 
<p>{<!-- --></p> 
<p>loader: ‘ts-loader’,</p> 
<p>options: {<!-- --></p> 
<p>// 指定特定的ts编译配置，为了区分脚本的ts配置</p> 
<p>configFile: path.resolve(__dirname, ‘…/tsconfig.loader.json’),</p> 
<p>// 对应文件添加个.ts或.tsx后缀</p> 
<p>appendTsSuffixTo: [/.vue$/],</p> 
<p>},</p> 
<p>},</p> 
<p>],</p> 
<p>}</p> 
<p>ts-loader 为单进程执行类型检查和转译，因此效率有些慢，可以用多进程方案：即关闭ts-loader的类型检查，类型检查由 <code>fork-ts-checker-webpack-plugin</code> 插件执行。<code>npm i fork-ts-checker-webpack-plugin --save-dev</code></p> 
<p>// webpack.base.js</p> 
<p>// rules</p> 
<p>{<!-- --></p> 
<p>test: /.(t|j)s$/,</p> 
<p>exclude: /node_modules/,</p> 
<p>use: [</p> 
<p>{<!-- --></p> 
<p>loader: ‘ts-loader’,</p> 
<p>options: {<!-- --></p> 
<p>// 指定特定的ts编译配置，为了区分脚本的ts配置</p> 
<p>configFile: path.resolve(__dirname, ‘…/tsconfig.loader.json’),</p> 
<p>// 对应文件添加个.ts或.tsx后缀</p> 
<p>appendTsSuffixTo: [/.vue$/],</p> 
<p>transpileOnly: true, // ? 关闭类型检查，即只进行转译</p> 
<p>},</p> 
<p>},</p> 
<p>],</p> 
<p>}</p> 
<p>// plugins push</p> 
<p>new ForkTsCheckerWebpackPlugin()</p> 
<p>至此项目基本可以跑起来了，那么有个问题了：Ts 可以编译为指定版本的 js，那么还需要 babel 么？</p> 
<p>tsc 的 target 只转译语法，不集成 polyfill，所以还是得要 babel。</p> 
<p>比如把箭头函数转成普通 function、aysnc + await 变成 Promise.then，这是语法转译；</p> 
<p>但你运行环境里如果没有 Promise.prototype.finally，那没有就还是没有。</p> 
<p>因此我们项目里还是需要 babel.</p> 
<p>Webpack 转译 Typescript 现有方案:</p> 
<p><img src="https://images2.imgbox.com/f8/b1/G9bNtdNa_o.png" alt=""></p> 
<p>综合考虑性能和扩展性，目前比较推荐的是 <code>babel+fork-ts-checker-webpack-plugin</code> 方案。</p> 
<p>在 babel7 之前，是需要同时使用 ts-loader 和 babel-loader 的，其编译过程 <code>TS &gt; TS 编译器 &gt; JS &gt; Babel &gt; JS</code> 。可见编译了两次js，效率有些低下。但是 babel7 出来之后有了解析 typescript 的能力，有了这一层面的支持，我们就可以只使用 babel，而不用再加一轮 ts 的编译流程了。</p> 
<p>在 babel 7 中，我们使用新的 <code>@babel/preset-typescript</code> 预设，结合一些插件便可以解析大部分的 ts 语法。</p> 
<p>那么，Babel 是如何处理 TypeScript 代码的呢？</p> 
<p>Babel 删除了所有 TypeScript，将其转换为常规的 JavaScript，并继续以它自己的方式处理。删除了 typescript 则不需要进行类型检查，不会有烦人的类型错误提醒，因此编译速度提升，开开心心编程???</p> 
<p>当然，类型安全性检查必不可少，我们可以统一在某个时间集中处理，增加 script：</p> 
<p>“check-types”: “tsc --watch”,</p> 
<p>添加 babel 解析 typescript</p> 
<p># 安装以下依赖 --save-dev</p> 
<p># webpack loader</p> 
<p>babel-loader</p> 
<p># babel 核心</p> 
<p>@babel/core</p> 
<p># 智能转换成目标运行环境代码</p> 
<p>@babel/preset-env</p> 
<p># 解析 typescript 的 babel 预设</p> 
<p>@babel/preset-typescript</p> 
<p># polyfill</p> 
<p>@babel/plugin-transform-runtime</p> 
<p># 支持 ts 类的写法</p> 
<p>@babel/plugin-proposal-class-properties</p> 
<p># 支持三点展开符</p> 
<p>@babel/plugin-proposal-object-rest-spread</p> 
<p># 安装以下依赖 --save</p> 
<p>@babel/runtime</p> 
<p>@babel/runtime-corejs3</p> 
<p>“core-js”: “^3.11.0”,</p> 
<p>删除 ts-loader, 添加 babel-loader</p> 
<p>{<!-- --></p> 
<p>test: /.(t|j)s$/,</p> 
<p>exclude: /node_modules/,</p> 
<p>use: [</p> 
<p>{<!-- --></p> 
<p>loader: ‘babel-loader’,</p> 
<p>},</p> 
<p>],</p> 
<p>}</p> 
<p>项目根目录添加 babel 配置文件 babel.config.js</p> 
<p>module.exports = {<!-- --></p> 
<p>presets: [</p> 
<p>[</p> 
<p>‘@babel/preset-env’,</p> 
<p>{<!-- --></p> 
<p>useBuiltIns: ‘usage’, // 按需引入 polyfill</p> 
<p>corejs: 3,</p> 
<p>},</p> 
<p>],</p> 
<p>[</p> 
<p>‘@babel/preset-typescript’, // 引用Typescript插件</p> 
<p>{<!-- --></p> 
<p>allExtensions: true, // 支持所有文件扩展名，否则在vue文件中使用ts会报错</p> 
<p>},</p> 
<p>],</p> 
<p>],</p> 
<p>plugins: [</p> 
<p>[</p> 
<p>‘@babel/plugin-transform-runtime’,</p> 
<p>{<!-- --></p> 
<p>corejs: 3,</p> 
<p>},</p> 
<p>],</p> 
<p>‘@babel/proposal-class-properties’,</p> 
<p>‘@babel/proposal-object-rest-spread’,</p> 
<p>],</p> 
<p>}</p> 
<p><strong>4. 代码规范</strong></p> 
<hr> 
<p>项目中代码规范集成了 EditorConfig， Prettier， ESLint， Husky， Lint-staged，以及如何解决 Prettier 和 ESLint 的冲突的问题，具体实现可以参考 《从 0 开始手把手带你搭建一套规范的 Vue3.x 项目工程环境》这篇文章，讲的很详细这里不再赘述。</p> 
<p><strong>5. 提交规范</strong></p> 
<hr> 
<p>利用 inquirer 选择配置好的提交类型，以及配合 commitlint 实现 commit 检查</p> 
<p>npm i inquirer shelljs @commitlint/{cli,config-conventional} -D</p> 
<p>添加 package.json 的 script ：</p> 
<p>“commitlint”: “commitlint -e”,</p> 
<p>“commit”: “node commit/git-commit.js”</p> 
<p>创建 commit/git-commit.js 文件</p> 
<p>const shell = require(‘shelljs’)</p> 
<p>const inquirer = require(‘inquirer’)</p> 
<p>const prompsConfig = {<!-- --></p> 
<p>ciType: [</p> 
<p>{<!-- --></p> 
<p>type: ‘list’,</p> 
<p>name: ‘type’,</p> 
<p>message: ‘请选择本次提交的类型:’,</p> 
<p>choices: [</p> 
<p>{<!-- --></p> 
<p>name: ‘引入新特性’,</p> 
<p>value: ‘feat’,</p> 
<p>},</p> 
<p>{<!-- --></p> 
<p>name: ‘改进代码的结构格式/样式’,</p> 
<p>value: ‘style’,</p> 
<p>},</p> 
<p>{<!-- --></p> 
<p>name: ‘修复 bug’,</p> 
<p>value: ‘fix’,</p> 
<p>},</p> 
<p>{<!-- --></p> 
<p>name: ‘提升性能’,</p> 
<p>value: ‘perf’,</p> 
<p>},</p> 
<p>{<!-- --></p> 
<p>name: ‘删除代码或文件’,</p> 
<p>value: ‘delete’,</p> 
<p>},</p> 
<p>{<!-- --></p> 
<p>name: ‘其他修改, 比如改变构建流程、或者增加依赖库、工具等’,</p> 
<p>value: ‘chore’,</p> 
<p>},</p> 
<p>{<!-- --></p> 
<p>name: ‘重构’,</p> 
<p><strong>自我介绍一下，小编13年上海交大毕业，曾经在小公司待过，也去过华为、OPPO等大厂，18年进入阿里一直到现在。</strong></p> 
<p><strong>深知大多数前端工程师，想要提升技能，往往是自己摸索成长或者是报班学习，但对于培训机构动则几千的学费，着实压力不小。自己不成体系的自学效果低效又漫长，而且极易碰到天花板技术停滞不前！</strong></p> 
<p><strong>因此收集整理了一份《2024年Web前端开发全套学习资料》，初衷也很简单，就是希望能够帮助到想自学提升又不知道该从何学起的朋友，同时减轻大家的负担。</strong></p> 
<p><img src="https://images2.imgbox.com/9d/c1/xw5y30B0_o.jpg" alt="img"></p> 
<p><img src="https://images2.imgbox.com/ab/0a/yAk0J1ov_o.png" alt=""></p> 
<p><strong>既有适合小白学习的零基础资料，也有适合3年以上经验的小伙伴深入学习提升的进阶课程，基本涵盖了95%以上前端开发知识点，真正体系化！</strong></p> 
<p><img src="https://images2.imgbox.com/fc/f8/4crJbNqi_o.png" alt=""></p> 
<p><strong>由于文件比较大，这里只是将部分目录截图出来，每个节点里面都包含大厂面经、学习笔记、源码讲义、实战项目、讲解视频，并且会持续更新！</strong></p> 
<p><strong>如果你觉得这些内容对你有帮助，可以扫码获取！！（备注：前端）</strong></p> 
<img src="https://images2.imgbox.com/1e/38/IXwIA9Xp_o.jpg"> 
<h4><a id="_714"></a>最后的最后</h4> 
<p>面试题千万不要死记，一定要自己理解，用自己的方式表达出来，在这里预祝各位成功拿下自己心仪的offer。<br> <strong>需要完整面试题的朋友可以<a href="https://bbs.csdn.net/topics/618191877">点击蓝色字体免费获取</a></strong></p> 
<p><img src="https://images2.imgbox.com/e5/42/e5o0H80m_o.png" alt="大厂面试题"></p> 
<p><img src="https://images2.imgbox.com/e3/be/bFN7upA6_o.png" alt="面试题目录"></p> 
<p><img src="https://images2.imgbox.com/d8/a1/WL0BFjF7_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/c5/1c/u26JK6Xo_o.png" alt=""></p> 
<p>自学提升又不知道该从何学起的朋友，同时减轻大家的负担。**</p> 
<p>[外链图片转存中…(img-7NirTWxN-1712234559064)]</p> 
<p>[外链图片转存中…(img-qBiQqOHt-1712234559064)]</p> 
<p><strong>既有适合小白学习的零基础资料，也有适合3年以上经验的小伙伴深入学习提升的进阶课程，基本涵盖了95%以上前端开发知识点，真正体系化！</strong></p> 
<p>[外链图片转存中…(img-cAFzHKxL-1712234559065)]</p> 
<p><strong>由于文件比较大，这里只是将部分目录截图出来，每个节点里面都包含大厂面经、学习笔记、源码讲义、实战项目、讲解视频，并且会持续更新！</strong></p> 
<p><strong>如果你觉得这些内容对你有帮助，可以扫码获取！！（备注：前端）</strong></p> 
<img src="https://images2.imgbox.com/e6/81/CpWjMGPy_o.jpg"> 
<h4><a id="_745"></a>最后的最后</h4> 
<p>面试题千万不要死记，一定要自己理解，用自己的方式表达出来，在这里预祝各位成功拿下自己心仪的offer。<br> <strong>需要完整面试题的朋友可以<a href="https://bbs.csdn.net/topics/618191877">点击蓝色字体免费获取</a></strong></p> 
<p>[外链图片转存中…(img-S59M6C01-1712234559065)]</p> 
<p>[外链图片转存中…(img-onaVxKZ5-1712234559065)]</p> 
<p>[外链图片转存中…(img-5TdM8kuB-1712234559066)]</p> 
<p>[外链图片转存中…(img-L6O0Kgc3-1712234559066)]</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ee999971bde3ff5c07d2b7bd58d70206/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">全流程演示通过百度AI实现语音识别——将文本转为语音（python实现）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ccbcd4b51f0165ec018af3a6c48d49b4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python 妙用运算符重载——玩出“点”花样来</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>