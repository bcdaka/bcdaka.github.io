<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【保姆级教程】使用SeaTunnel同步Kafka的数据到ClickHouse - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7f0de64bc3c32140fa5b744a9054ff70/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【保姆级教程】使用SeaTunnel同步Kafka的数据到ClickHouse">
  <meta property="og:description" content="1.Apache SeaTunnel依赖地址
2.SeaTunnel官网的Source/Sink模板
3.SeaTunnel的GitHub地址
在官网下载安装包之后，（注意：别下载apache-seatunnel-incubating-2.1.0-bin.tar.gz版本，依赖和功能都没有。)要使用apache-seatunnel-2.3.3-bin.tar.gz，但还需要配置环境和jar包，jar包需要联网。
从2.2.0-beta开始，二进制包默认不提供Connectors的依赖，因此在第一次使用它时，需要执行以下命令来安装连接器。当然，您也可以从Apache Maven Repository\[https://repo.maven.apache.org/maven2/org/apache/seatunnel/\]手动下载连接器，然后移动到Connectors/SeaTunnel目录)
sh bin/install-plugin.sh 如果需要指定connector的版本，以2.3.3版本为例，需要执行
sh bin/install-plugin.sh 2.3.3 也可以手动导入依赖
1.这个目录下放连接器
apache-seatunnel-2.3.3/connectors/seatunnel 2.这个目录下放MySQL和clickhouse连接驱动和SeaTunnel的Source包
/usr/local/mysql/module/seatunnel/apache-seatunnel-2.3.3/lib 3.这个目录下放配置文件
/usr/local/mysql/module/seatunnel/apache-seatunnel-2.3.3/config 注意这里有一个seatunnel-env.sh文件，是配置Flink或者Spark环境变量的文件需要配置
执行命令
注意这里bin目录下的启动脚本选择，启动先最好先看一下flink -v、环境变量文件seatunnel-env.sh的配置、脚本选择(Flink版本不同，启动脚本不同)，确保Flink的jobmannean和taskman都启动，然后再执行任务.
example08.conf配置文件中
env { execution.parallelism = 1 job.mode = &#34;STREAMING&#34; checkpoint.interval = 2000 } 这里使用flink一定要是STREAMING，不能是BATCH 具体配置格式参考上面的第2点——SeaTunnel官网的Source/Sink模板，最后注意执行任务可能需要几十分钟，但数据一定要等任务运行完毕后才能过去。
‘ 附件是Apache SeaTunnel2.3.3版本的完整目录，包含MySQL、clickhouse的连接驱动和配置文件，包括seatunnel-env.sh环境变量文件，根据数据同步链路和服务器参数改动 。
附件2是配置文件,从MySQL到ClickHouse，从MySQL到Kafka，从Kafka到ClickHouse。
执行一次命令同步一次。在数据同步过程中，确保目标表和源表都存在，并且源表内有数据是非常重要的，这样才能够在执行同步命令后在目标表中看到同步效果
java [root@172-xx-xxx-x bin]# ./start-seatunnel-flink-15-connector-v2.sh --config ../config/example07.conf SeaTunnel配置中的env {j:ob.mode = &#34;STREAMING&#34;}的STREAMING和BATCH的区别
本文由 白鲸开源科技 提供发布支持！">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-27T15:37:49+08:00">
    <meta property="article:modified_time" content="2024-03-27T15:37:49+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【保姆级教程】使用SeaTunnel同步Kafka的数据到ClickHouse</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>1.Apache  <a href="https://repo.maven.apache.org/maven2/org/apache/seatunnel/" rel="nofollow" title="seatunnel依赖地址">SeaTunnel依赖地址</a></p> 
 <p>2.<a href="https://seatunnel.apache.org/docs/connector-v2" rel="nofollow" title="seatunnel官网的source/sink模板">SeaTunnel官网的Source/Sink模板</a></p> 
 <p>3.SeaTunnel的<a href="https://so.csdn.net/so/search?q=GitHub&amp;spm=1001.2101.3001.7020" title="GitHub">GitHub</a>地址</p> 
</blockquote> 
<p>在官网下载安装包之后，（注意：别下载<code>apache-seatunnel-incubating-2.1.0-bin.tar.gz</code>版本，依赖和功能都没有。)要使用apache-seatunnel-2.3.3-bin.tar.gz，但还需要<a href="https://so.csdn.net/so/search?q=%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83&amp;spm=1001.2101.3001.7020" title="配置环境">配置环境</a>和jar包，jar包需要联网。</p> 
<p>        从2.2.0-beta开始，二进制包默认不提供Connectors的依赖，因此在第一次使用它时，需要执行以下命令来安装连接器。当然，您也可以从<code>Apache Maven Repository\[https://repo.maven.apache.org/maven2/org/apache/seatunnel/\]</code>手动下载连接器，然后移动到Connectors/SeaTunnel目录)</p> 
<pre><code class="language-java">sh bin/install-plugin.sh</code></pre> 
<p>如果需要指定connector的版本，以<strong>2.3.3版本</strong>为例，需要执行</p> 
<pre><code class="language-java">sh bin/install-plugin.sh 2.3.3</code></pre> 
<p>也可以手动导入依赖</p> 
<p>1.这个目录下放连接器</p> 
<pre><code class="language-java">apache-seatunnel-2.3.3/connectors/seatunnel</code></pre> 
<p><img src="https://images2.imgbox.com/9b/a8/1S3yeCZQ_o.png" alt="file"></p> 
<p>2.这个目录下放MySQL和<a href="https://so.csdn.net/so/search?q=clickhouse&amp;spm=1001.2101.3001.7020" title="clickhouse">clickhouse</a>连接驱动和SeaTunnel的Source包</p> 
<p><img src="https://images2.imgbox.com/77/f4/Srwf7pAB_o.png" alt="file"></p> 
<pre><code class="language-java">/usr/local/mysql/module/seatunnel/apache-seatunnel-2.3.3/lib</code></pre> 
<p>3.这个目录下放配置文件</p> 
<pre><code class="language-java">/usr/local/mysql/module/seatunnel/apache-seatunnel-2.3.3/config</code></pre> 
<p><img src="https://images2.imgbox.com/fb/52/gmKeeeM0_o.png" alt="file"></p> 
<p>注意这里有一个<code>seatunnel-env.sh</code>文件，是配置Flink或者Spark环境变量的文件需要配置</p> 
<p><img src="https://images2.imgbox.com/2e/46/EuD807wP_o.png" alt="file"></p> 
<p>执行命令</p> 
<p><img src="https://images2.imgbox.com/c1/80/pbUlQA3h_o.png" alt="file"> 注意这里<code>bin</code>目录下的启动脚本选择，启动先最好先看一下<code>flink -v</code>、环境变量文件<code>seatunnel-env.sh</code>的配置、脚本选择(Flink版本不同，启动脚本不同)，确保Flink的<code>jobmannean</code>和<code>taskman</code>都启动，然后再执行任务.</p> 
<p><img src="https://images2.imgbox.com/86/5f/zwET6agj_o.png" alt="file"></p> 
<p><code>example08.conf</code>配置文件中</p> 
<pre><code>env {
        execution.parallelism = 1
        job.mode = "STREAMING"
        checkpoint.interval = 2000
}
这里使用flink一定要是STREAMING，不能是BATCH</code></pre> 
<p>具体配置格式参考上面的第2点——SeaTunnel官网的Source/Sink模板，<strong>最后注意执行任务可能需要几十分钟</strong>，但数据一定要等任务运行完毕后才能过去。</p> 
<p><img src="https://images2.imgbox.com/37/96/wvjLX3ZP_o.png" alt="file"> ‘ 附件是Apache SeaTunnel2.3.3版本的完整目录，包含MySQL、clickhouse的连接驱动和配置文件，包括<code>seatunnel-env.sh</code>环境变量文件，根据数据同步链路和服务器参数改动 。</p> 
<p>附件2是配置文件,从MySQL到ClickHouse，从MySQL到Kafka，从Kafka到ClickHouse。</p> 
<p><strong>执行一次命令同步一次</strong>。在数据同步过程中，确保目标表和源表都存在，并且源表内有数据是非常重要的，这样才能够在执行同步命令后在目标表中看到同步效果</p> 
<pre><code>java
[root@172-xx-xxx-x bin]# ./start-seatunnel-flink-15-connector-v2.sh --config ../config/example07.conf </code></pre> 
<p>SeaTunnel配置中的<code>env {j:ob.mode = "STREAMING"}的STREAMING</code>和<code>BATCH</code>的区别</p> 
<p><img src="https://images2.imgbox.com/89/8e/UK14B3JL_o.png" alt="file"></p> 
<blockquote> 
 <p>本文由 <a href="http://www.whaleops.com" rel="nofollow">白鲸开源科技</a> 提供发布支持！</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/be53a0203487a5d098808bb345c1c8b3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">从根本上优雅地解决 VSCode 中的 Python 模块导入问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a38a6af81a98b2f60b34c6cd348ef8f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">灵神笔记(1)----动态规划篇</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>