<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【JaveWeb教程】（22） MySQL数据库开发之多表查询：内连接、外连接、子查询 详细代码示例讲解（最全面） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6ad1dc4be6361f530d6e907ecc5cce5a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【JaveWeb教程】（22） MySQL数据库开发之多表查询：内连接、外连接、子查询 详细代码示例讲解（最全面）">
  <meta property="og:description" content="目录 数据库开发-MySQL1. 多表查询1.1 概述1.1.1 数据准备1.1.2 介绍1.1.3 分类 1.2 内连接1.3 外连接1.4 子查询1.4.1 介绍1.4.2 标量子查询1.4.3 列子查询1.4.4 行子查询1.4.5 表子查询 1.5 案例 数据库开发-MySQL 1. 多表查询 1.1 概述 1.1.1 数据准备 SQL脚本：
#建议：创建新的数据库 create database db04; use db04; -- 部门表 create table tb_dept ( id int unsigned primary key auto_increment comment &#39;主键ID&#39;, name varchar(10) not null unique comment &#39;部门名称&#39;, create_time datetime not null comment &#39;创建时间&#39;, update_time datetime not null comment &#39;修改时间&#39; ) comment &#39;部门表&#39;; -- 部门表测试 insert into tb_dept (id, name, create_time, update_time) values (1, &#39;学工部&#39;, now(), now()), (2, &#39;教研部&#39;, now(), now()), (3, &#39;咨询部&#39;, now(), now()), (4, &#39;就业部&#39;, now(), now()), (5, &#39;人事部&#39;, now(), now()); -- 员工表 create table tb_emp ( id int unsigned primary key auto_increment comment &#39;ID&#39;, username varchar(20) not null unique comment &#39;用户名&#39;, password varchar(32) default &#39;123456&#39; comment &#39;密码&#39;, name varchar(10) not null comment &#39;姓名&#39;, gender tinyint unsigned not null comment &#39;性别, 说明: 1 男, 2 女&#39;, image varchar(300) comment &#39;图像&#39;, job tinyint unsigned comment &#39;职位, 说明: 1 班主任,2 讲师, 3 学工主管, 4 教研主管, 5 咨询师&#39;, entrydate date comment &#39;入职时间&#39;, dept_id int unsigned comment &#39;部门ID&#39;, create_time datetime not null comment &#39;创建时间&#39;, update_time datetime not null comment &#39;修改时间&#39; ) comment &#39;员工表&#39;; -- 员工表测试数据 INSERT INTO tb_emp(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) VALUES (1,&#39;jinyong&#39;,&#39;123456&#39;,&#39;金庸&#39;,1,&#39;1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-12T13:30:44+08:00">
    <meta property="article:modified_time" content="2024-01-12T13:30:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【JaveWeb教程】（22） MySQL数据库开发之多表查询：内连接、外连接、子查询 详细代码示例讲解（最全面）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#MySQL_3" rel="nofollow">数据库开发-MySQL</a></li><li><a href="#1__7" rel="nofollow">1. 多表查询</a></li><li><ul><li><a href="#11__9" rel="nofollow">1.1 概述</a></li><li><ul><li><a href="#111__11" rel="nofollow">1.1.1 数据准备</a></li><li><a href="#112__75" rel="nofollow">1.1.2 介绍</a></li><li><a href="#113__121" rel="nofollow">1.1.3 分类</a></li></ul> 
   </li><li><a href="#12__146" rel="nofollow">1.2 内连接</a></li><li><a href="#13__218" rel="nofollow">1.3 外连接</a></li><li><a href="#14__274" rel="nofollow">1.4 子查询</a></li><li><ul><li><a href="#141__276" rel="nofollow">1.4.1 介绍</a></li><li><a href="#142__308" rel="nofollow">1.4.2 标量子查询</a></li><li><a href="#143__361" rel="nofollow">1.4.3 列子查询</a></li><li><a href="#144__395" rel="nofollow">1.4.4 行子查询</a></li><li><a href="#145__424" rel="nofollow">1.4.5 表子查询</a></li></ul> 
   </li><li><a href="#15__448" rel="nofollow">1.5 案例</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/2e/26/fFtS1O13_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="MySQL_3"></a>数据库开发-MySQL</h2> 
<h2><a id="1__7"></a>1. 多表查询</h2> 
<h3><a id="11__9"></a>1.1 概述</h3> 
<h4><a id="111__11"></a>1.1.1 数据准备</h4> 
<p>SQL脚本：</p> 
<pre><code class="prism language-mysql">#建议：创建新的数据库
create database db04;
use db04;

-- 部门表
create table tb_dept
(
    id          int unsigned primary key auto_increment comment '主键ID',
    name        varchar(10) not null unique comment '部门名称',
    create_time datetime    not null comment '创建时间',
    update_time datetime    not null comment '修改时间'
) comment '部门表';
-- 部门表测试
insert into tb_dept (id, name, create_time, update_time)
values (1, '学工部', now(), now()),
       (2, '教研部', now(), now()),
       (3, '咨询部', now(), now()),
       (4, '就业部', now(), now()),
       (5, '人事部', now(), now());

-- 员工表
create table tb_emp
(
    id          int unsigned primary key auto_increment comment 'ID',
    username    varchar(20)      not null unique comment '用户名',
    password    varchar(32) default '123456' comment '密码',
    name        varchar(10)      not null comment '姓名',
    gender      tinyint unsigned not null comment '性别, 说明: 1 男, 2 女',
    image       varchar(300) comment '图像',
    job         tinyint unsigned comment '职位, 说明: 1 班主任,2 讲师, 3 学工主管, 4 教研主管, 5 咨询师',
    entrydate   date comment '入职时间',
    dept_id     int unsigned comment '部门ID',
    create_time datetime         not null comment '创建时间',
    update_time datetime         not null comment '修改时间'
) comment '员工表';
-- 员工表测试数据
INSERT INTO tb_emp(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) 
VALUES 
(1,'jinyong','123456','金庸',1,'1.jpg',4,'2000-01-01',2,now(),now()),
(2,'zhangwuji','123456','张无忌',1,'2.jpg',2,'2015-01-01',2,now(),now()),
(3,'yangxiao','123456','杨逍',1,'3.jpg',2,'2008-05-01',2,now(),now()),
(4,'weiyixiao','123456','韦一笑',1,'4.jpg',2,'2007-01-01',2,now(),now()),
(5,'changyuchun','123456','常遇春',1,'5.jpg',2,'2012-12-05',2,now(),now()),
(6,'xiaozhao','123456','小昭',2,'6.jpg',3,'2013-09-05',1,now(),now()),
(7,'jixiaofu','123456','纪晓芙',2,'7.jpg',1,'2005-08-01',1,now(),now()),
(8,'zhouzhiruo','123456','周芷若',2,'8.jpg',1,'2014-11-09',1,now(),now()),
(9,'dingminjun','123456','丁敏君',2,'9.jpg',1,'2011-03-11',1,now(),now()),
(10,'zhaomin','123456','赵敏',2,'10.jpg',1,'2013-09-05',1,now(),now()),
(11,'luzhangke','123456','鹿杖客',1,'11.jpg',5,'2007-02-01',3,now(),now()),
(12,'hebiweng','123456','鹤笔翁',1,'12.jpg',5,'2008-08-18',3,now(),now()),
(13,'fangdongbai','123456','方东白',1,'13.jpg',5,'2012-11-01',3,now(),now()),
(14,'zhangsanfeng','123456','张三丰',1,'14.jpg',2,'2002-08-01',2,now(),now()),
(15,'yulianzhou','123456','俞莲舟',1,'15.jpg',2,'2011-05-01',2,now(),now()),
(16,'songyuanqiao','123456','宋远桥',1,'16.jpg',2,'2007-01-01',2,now(),now()),
(17,'chenyouliang','123456','陈友谅',1,'17.jpg',NULL,'2015-03-21',NULL,now(),now());
</code></pre> 
<h4><a id="112__75"></a>1.1.2 介绍</h4> 
<p>多表查询：查询时从多张表中获取所需数据</p> 
<blockquote> 
 <p>单表查询的SQL语句：select 字段列表 from 表名;</p> 
 <p>那么要执行多表查询，只需要使用逗号分隔多张表即可，如： select 字段列表 from 表1, 表2;</p> 
</blockquote> 
<p>查询用户表和部门表中的数据：</p> 
<pre><code class="prism language-mysql">select * from  tb_emp , tb_dept;
</code></pre> 
<p><img src="https://images2.imgbox.com/8b/54/P6WhAsLi_o.png" alt="在这里插入图片描述"></p> 
<p>此时,我们看到查询结果中包含了大量的结果集，总共85条记录，而这其实就是员工表所有的记录(17行)与部门表所有记录(5行)的所有组合情况，这种现象称之为笛卡尔积。</p> 
<p>笛卡尔积：笛卡尔乘积是指在数学中，两个集合(A集合和B集合)的所有组合情况。</p> 
<p><img src="https://images2.imgbox.com/ae/a8/HYX6aXCx_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>在多表查询时，需要消除无效的笛卡尔积，只保留表关联部分的数据</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/4e/49/Nk4Ar1ox_o.png" alt="在这里插入图片描述"></p> 
<p>在SQL语句中，如何去除无效的笛卡尔积呢？只需要给多表查询加上连接查询的条件即可。</p> 
<pre><code class="prism language-mysql">select * from tb_emp , tb_dept where tb_emp.dept_id = tb_dept.id ;
</code></pre> 
<p><img src="https://images2.imgbox.com/96/c1/ET12xiFU_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>由于id为17的员工，没有dept_id字段值，所以在多表查询时，根据连接查询的条件并没有查询到。</p> 
</blockquote> 
<h4><a id="113__121"></a>1.1.3 分类</h4> 
<p>多表查询可以分为：</p> 
<ol><li> <p>连接查询</p> 
  <ul><li>内连接：相当于查询A、B交集部分数据</li></ul> <p><img src="https://images2.imgbox.com/89/a4/hMHcm7K1_o.png" alt="在这里插入图片描述"></p> </li><li> <p>外连接</p> 
  <ul><li> <p>左外连接：查询左表所有数据(包括两张表交集部分数据)</p> </li><li> <p>右外连接：查询右表所有数据(包括两张表交集部分数据)</p> </li></ul> </li><li> <p>子查询</p> </li></ol> 
<h3><a id="12__146"></a>1.2 内连接</h3> 
<p>内连接查询：查询两表或多表中交集部分数据。</p> 
<p>内连接从语法上可以分为：</p> 
<ul><li> <p>隐式内连接</p> </li><li> <p>显式内连接</p> </li></ul> 
<p>隐式内连接语法：</p> 
<pre><code class="prism language-mysql">select  字段列表   from   表1 , 表2   where  条件 ... ;
</code></pre> 
<p>显式内连接语法：</p> 
<pre><code class="prism language-mysql">select  字段列表   from   表1  [ inner ]  join 表2  on  连接条件 ... ;
</code></pre> 
<p>案例：查询员工的姓名及所属的部门名称</p> 
<ul><li>隐式内连接实现</li></ul> 
<pre><code class="prism language-mysql">select tb_emp.name , tb_dept.name -- 分别查询两张表中的数据
from tb_emp , tb_dept -- 关联两张表
where tb_emp.dept_id = tb_dept.id; -- 消除笛卡尔积
</code></pre> 
<ul><li>显式内连接实现</li></ul> 
<pre><code class="prism language-mysql">select tb_emp.name , tb_dept.name
from tb_emp inner join tb_dept
on tb_emp.dept_id = tb_dept.id;
</code></pre> 
<p><img src="https://images2.imgbox.com/95/e2/co8bVZ3Y_o.png" alt="在这里插入图片描述"></p> 
<p>多表查询时给表起别名：</p> 
<ul><li> <p>tableA as 别名1 , tableB as 别名2 ;</p> </li><li> <p>tableA 别名1 , tableB 别名2 ;</p> </li></ul> 
<p><img src="https://images2.imgbox.com/60/8a/ACi1plha_o.png" alt="在这里插入图片描述"></p> 
<p>使用了别名的多表查询：</p> 
<pre><code class="prism language-mysql">select emp.name , dept.name
from tb_emp emp inner join tb_dept dept
on emp.dept_id = dept.id;
</code></pre> 
<blockquote> 
 <p>注意事项:</p> 
 <p>一旦为表起了别名，就不能再使用表名来指定对应的字段了，此时只能够使用别名来指定字段。</p> 
</blockquote> 
<h3><a id="13__218"></a>1.3 外连接</h3> 
<p>外连接分为两种：左外连接 和 右外连接。</p> 
<p>左外连接语法结构：</p> 
<pre><code class="prism language-mysql">select  字段列表   from   表1  left  [ outer ]  join 表2  on  连接条件 ... ;
</code></pre> 
<blockquote> 
 <p>左外连接相当于查询表1(左表)的所有数据，当然也包含表1和表2交集部分的数据。</p> 
</blockquote> 
<p>右外连接语法结构：</p> 
<pre><code class="prism language-mysql">select  字段列表   from   表1  right  [ outer ]  join 表2  on  连接条件 ... ;
</code></pre> 
<blockquote> 
 <p>右外连接相当于查询表2(右表)的所有数据，当然也包含表1和表2交集部分的数据。</p> 
</blockquote> 
<p>案例：查询员工表中所有员工的姓名, 和对应的部门名称</p> 
<pre><code class="prism language-mysql">-- 左外连接：以left join关键字左边的表为主表，查询主表中所有数据，以及和主表匹配的右边表中的数据
select emp.name , dept.name
from tb_emp AS emp left join tb_dept AS dept 
     on emp.dept_id = dept.id;
</code></pre> 
<p><img src="https://images2.imgbox.com/56/6b/VlNyda5D_o.png" alt="在这里插入图片描述"></p> 
<p>案例：查询部门表中所有部门的名称, 和对应的员工名称</p> 
<pre><code class="prism language-mysql">-- 右外连接
select dept.name , emp.name
from tb_emp AS emp right join  tb_dept AS dept
     on emp.dept_id = dept.id;
</code></pre> 
<p><img src="https://images2.imgbox.com/50/4f/PNtL0OrI_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意事项：</p> 
 <p>左外连接和右外连接是可以相互替换的，只需要调整连接查询时SQL语句中表的先后顺序就可以了。而我们在日常开发使用时，更偏向于左外连接。</p> 
</blockquote> 
<h3><a id="14__274"></a>1.4 子查询</h3> 
<h4><a id="141__276"></a>1.4.1 介绍</h4> 
<p>SQL语句中嵌套select语句，称为嵌套查询，又称子查询。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span>  <span class="token operator">*</span>  <span class="token keyword">FROM</span>   t1   <span class="token keyword">WHERE</span>  column1 <span class="token operator">=</span>  <span class="token punctuation">(</span> <span class="token keyword">SELECT</span>  column1  <span class="token keyword">FROM</span>  t2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>子查询外部的语句可以是insert / update / delete / select 的任何一个，最常见的是 select。</p> 
</blockquote> 
<p>根据子查询结果的不同分为：</p> 
<ol><li> <p>标量子查询（子查询结果为单个值[一行一列]）</p> </li><li> <p>列子查询（子查询结果为一列，但可以是多行）</p> </li><li> <p>行子查询（子查询结果为一行，但可以是多列）</p> </li><li> <p>表子查询（子查询结果为多行多列[相当于子查询结果是一张表]）</p> </li></ol> 
<p>子查询可以书写的位置：</p> 
<ol><li>where之后</li><li>from之后</li><li>select之后</li></ol> 
<h4><a id="142__308"></a>1.4.2 标量子查询</h4> 
<p>子查询返回的结果是单个值(数字、字符串、日期等)，最简单的形式，这种子查询称为标量子查询。</p> 
<p>常用的操作符： = &lt;&gt; &gt; &gt;= &lt; &lt;=</p> 
<p>案例1：查询"教研部"的所有员工信息</p> 
<blockquote> 
 <p>可以将需求分解为两步：</p> 
 <ol><li>查询 “教研部” 部门ID</li><li>根据 “教研部” 部门ID，查询员工信息</li></ol> 
</blockquote> 
<pre><code class="prism language-mysql">-- 1.查询"教研部"部门ID
select id from tb_dept where name = '教研部';    #查询结果：2
-- 2.根据"教研部"部门ID, 查询员工信息
select * from tb_emp where dept_id = 2;

-- 合并出上两条SQL语句
select * from tb_emp where dept_id = (select id from tb_dept where name = '教研部');
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/2e/j7ZAxS58_o.png" alt="在这里插入图片描述"></p> 
<p>案例2：查询在 “方东白” 入职之后的员工信息</p> 
<blockquote> 
 <p>可以将需求分解为两步：</p> 
 <ol><li>查询 方东白 的入职日期</li><li>查询 指定入职日期之后入职的员工信息</li></ol> 
</blockquote> 
<pre><code class="prism language-mysql">-- 1.查询"方东白"的入职日期
select entrydate from tb_emp where name = '方东白';     #查询结果：2012-11-01
-- 2.查询指定入职日期之后入职的员工信息
select * from tb_emp where entrydate &gt; '2012-11-01';

-- 合并以上两条SQL语句
select * from tb_emp where entrydate &gt; (select entrydate from tb_emp where name = '方东白');
</code></pre> 
<p><img src="https://images2.imgbox.com/57/7c/qgUGs9X8_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="143__361"></a>1.4.3 列子查询</h4> 
<p>子查询返回的结果是一列(可以是多行)，这种子查询称为列子查询。</p> 
<p>常用的操作符：</p> 
<table><thead><tr><th><strong>操作符</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>IN</td><td>在指定的集合范围之内，多选一</td></tr><tr><td>NOT IN</td><td>不在指定的集合范围之内</td></tr></tbody></table> 
<p>案例：查询"教研部"和"咨询部"的所有员工信息</p> 
<blockquote> 
 <p>分解为以下两步：</p> 
 <ol><li>查询 “销售部” 和 “市场部” 的部门ID</li><li>根据部门ID, 查询员工信息</li></ol> 
</blockquote> 
<pre><code class="prism language-mysql">-- 1.查询"销售部"和"市场部"的部门ID
select id from tb_dept where name = '教研部' or name = '咨询部';    #查询结果：3,2
-- 2.根据部门ID, 查询员工信息
select * from tb_emp where dept_id in (3,2);

-- 合并以上两条SQL语句
select * from tb_emp where dept_id in (select id from tb_dept where name = '教研部' or name = '咨询部');
</code></pre> 
<p><img src="https://images2.imgbox.com/30/94/z7Ge6yh2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="144__395"></a>1.4.4 行子查询</h4> 
<p>子查询返回的结果是一行(可以是多列)，这种子查询称为行子查询。</p> 
<p>常用的操作符：= 、&lt;&gt; 、IN 、NOT IN</p> 
<p>案例：查询与"韦一笑"的入职日期及职位都相同的员工信息</p> 
<blockquote> 
 <p>可以拆解为两步进行：</p> 
 <ol><li>查询 “韦一笑” 的入职日期 及 职位</li><li>查询与"韦一笑"的入职日期及职位相同的员工信息</li></ol> 
</blockquote> 
<pre><code class="prism language-mysql">-- 查询"韦一笑"的入职日期 及 职位
select entrydate , job from tb_emp where name = '韦一笑';  #查询结果： 2007-01-01 , 2
-- 查询与"韦一笑"的入职日期及职位相同的员工信息
select * from tb_emp where (entrydate,job) = ('2007-01-01',2);

-- 合并以上两条SQL语句
select * from tb_emp where (entrydate,job) = (select entrydate , job from tb_emp where name = '韦一笑');
</code></pre> 
<p><img src="https://images2.imgbox.com/1c/c0/ga7Ner1d_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="145__424"></a>1.4.5 表子查询</h4> 
<p>子查询返回的结果是多行多列，常作为临时表，这种子查询称为表子查询。</p> 
<p>案例：查询入职日期是 “2006-01-01” 之后的员工信息 , 及其部门信息</p> 
<blockquote> 
 <p>分解为两步执行：</p> 
 <ol><li>查询入职日期是 “2006-01-01” 之后的员工信息</li><li>基于查询到的员工信息，在查询对应的部门信息</li></ol> 
</blockquote> 
<pre><code class="prism language-mysql">select * from emp where entrydate &gt; '2006-01-01';

select e.*, d.* from (select * from emp where entrydate &gt; '2006-01-01') e left join dept d on e.dept_id = d.id ;
</code></pre> 
<p><img src="https://images2.imgbox.com/05/b1/VhdctXLE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="15__448"></a>1.5 案例</h3> 
<p>基于之前设计的多表案例的表结构，我们来完成今天的多表查询案例需求。</p> 
<p><strong>准备环境</strong></p> 
<p>将资料中准备好的多表查询的数据准备的SQL脚本导入数据库中。</p> 
<p><img src="https://images2.imgbox.com/95/ff/RAC6jPK4_o.png" alt="在这里插入图片描述"></p> 
<ul><li>分类表：category</li><li>菜品表：dish</li><li>套餐表：setmeal</li><li>套餐菜品关系表：setmeal_dish</li></ul> 
<p><img src="https://images2.imgbox.com/51/25/bCtZpJpy_o.png" alt="在这里插入图片描述"></p> 
<p><strong>需求实现</strong></p> 
<ol><li>查询价格低于 10元 的菜品的名称 、价格 及其 菜品的分类名称</li></ol> 
<pre><code class="prism language-mysql">/*查询技巧：
     明确1：查询需要用到哪些字段
        菜品名称、菜品价格 、 菜品分类名
     明确2：查询的字段分别归属于哪张表
        菜品表：[菜品名称、菜品价格]
        分类表：[分类名]
     明确3：如查多表，建立表与表之间的关联
        菜品表.caategory_id = 分类表.id
     其他：（其他条件、其他要求）
        价格 &lt; 10
*/
select d.name , d.price , c.name
from dish AS d , category AS c
where d.category_id = c.id
      and d.price &lt; 10;
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/2d/r6vEOiWC_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>查询所有价格在 10元(含)到50元(含)之间 且 状态为"起售"的菜品名称、价格及其分类名称 (即使菜品没有分类 , 也要将菜品查询出来)</li></ol> 
<pre><code class="prism language-mysql">select d.name , d.price, c.name
from dish AS d left join category AS c on d.category_id = c.id
where d.price between 10 and 50
      and d.status = 1;
</code></pre> 
<p><img src="https://images2.imgbox.com/8d/5b/zZtAjEH1_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>查询每个分类下最贵的菜品, 展示出分类的名称、最贵的菜品的价格</li></ol> 
<pre><code class="prism language-mysql">select c.name , max(d.price)
from dish AS d , category AS c
where d.category_id = c.id
group by c.name;
</code></pre> 
<p><img src="https://images2.imgbox.com/8e/62/vHOyyNuF_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>查询各个分类下 菜品状态为 “起售” , 并且 该分类下菜品总数量大于等于3 的 分类名称</li></ol> 
<pre><code class="prism language-mysql">/*查询技巧：
     明确1：查询需要用到哪些字段
        分类名称、菜品总数量
     明确2：查询用到的字段分别归属于哪张表
        分类表：[分类名]
        菜品表：[菜品状态]
     明确3：如查多表，建立表与表之间的关联
        菜品表.caategory_id = 分类表.id
     其他：（其他条件、其他要求）
        条件：菜品状态 = 1 (1表示起售)
        分组：分类名
        分组后条件： 总数量 &gt;= 3
*/
select c.name , count(*)
from dish AS d , category AS c
where d.category_id = c.id
      and d.status = 1 -- 起售状态
group by c.name  -- 按照分类名分组
having count(*)&gt;=3; -- 各组后筛选菜品总数据&gt;=3
</code></pre> 
<p><img src="https://images2.imgbox.com/4e/96/WCVJsAky_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li>查询出 “商务套餐A” 中包含了哪些菜品 （展示出套餐名称、价格, 包含的菜品名称、价格、份数）</li></ol> 
<pre><code class="prism language-mysql">select s.name, s.price, d.name, d.price, sd.copies
from setmeal AS s , setmeal_dish AS sd , dish AS d
where s.id = sd.setmeal_id and sd.dish_id = d.id
      and s.name='商务套餐A';
</code></pre> 
<p><img src="https://images2.imgbox.com/c5/0d/9qXgWs63_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li>查询出低于菜品平均价格的菜品信息 (展示出菜品名称、菜品价格)</li></ol> 
<pre><code class="prism language-mysql">-- 1.计算菜品平均价格
select avg(price) from dish;    -- 查询结果：37.736842
-- 2.查询出低于菜品平均价格的菜品信息
select * from dish where price &lt; 37.736842;

-- 合并以上两条SQL语句
select * from dish where price &lt; (select avg(price) from dish);
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/9a/ea6p3Hch_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a87037e33798be68ad9d81c2b101d1de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">记录Stable-Diffusion-Webui 在Windows11的Anaconda环境下的避坑安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3023c69fff78a52f300eee4b23da3a01/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Kafka 命令行操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>