<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>zookeeper的环境搭建和配置 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4dff48ffdb647bbfa39f875d087e28eb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="zookeeper的环境搭建和配置">
  <meta property="og:description" content="zookeeper的环境搭建和配置 1. zookeeper下载2. zookeeper的安装和配置2.1 解压上传的压缩包到指定的目录位置2.2 配置zookeeper的环境变量，以及zookeeper配置文件2.3 创建zkdata文件夹2.4将zookeeper及其配置文件转发复制到其他的节点中2.5对其他两台节点的myid（服务器id值进行配置）2.6 运行测试 1. zookeeper下载 zookeeper官网链接: https://zookeeper.apache.org/
进入到其官网后，选择download下载对应的zookeeper版本即可（我这里以3.8.1为例子）。
这里直接选择Http的对应链接下载即可
点击之后就下载完啦，很快的…
2. zookeeper的安装和配置 首先，将三台节点启动（node-01,node-02,node-03）,同时使用XShell远程登录到三台主机上面去，然后打开Xftp将刚刚下载的安装包进行传输。
2.1 解压上传的压缩包到指定的目录位置 首先切换到上传的目录/export/software中，然后使用tar 命令将其解压到具体的位置，（我这里是/export/servers/）。
cd /export/software/ #切换目录 tar -zxvf apache-zookeeper-3.8.1.tar.gz -C /export/servers/ #解压到/export/servers/ cd /export/servers/ #切换目录 ll # 查看当前目录信息 mv apache-zookeeper-3.8.1 zookeeper-3.8.1 # 重命名 ll # 查看当前目录信息 2.2 配置zookeeper的环境变量，以及zookeeper配置文件 配置环境变量，使用vi编辑器对/etc/profile配置文件进行修改(vi /etc/profile)，在其配置文件中，添加下面的语句：
export ZK_HOME=/export/servers/zookeeper-3.8.1 export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$ZK_HOME/bin 修改完环境变量后，使用source命令刷新配置
source /etc/profile 然后切换到zookeeper的安装目录中，找到conf文件夹，里面有zoo-sample.cfg 文件，它为zookeeper的配置文件，将其重命名为zoo.cfg，然后使用 vi 编辑器将配置进行修改。
cd /export/servers/zookeeper-3.8.1/conf #切换到zookeeper的conf目录中 mv zoo-sample.cfg zoo.cfg #重命名 vi zoo.cfg #使用vi编辑器进行修改 修改的内容如下：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-03-24T15:10:56+08:00">
    <meta property="article:modified_time" content="2023-03-24T15:10:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">zookeeper的环境搭建和配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>zookeeper的环境搭建和配置</h4> 
 <ul><li><a href="#1_zookeeper_2" rel="nofollow">1. zookeeper下载</a></li><li><a href="#2_zookeeper_22" rel="nofollow">2. zookeeper的安装和配置</a></li><li><ul><li><a href="#21__33" rel="nofollow">2.1 解压上传的压缩包到指定的目录位置</a></li><li><a href="#22_zookeeperzookeeper_52" rel="nofollow">2.2 配置zookeeper的环境变量，以及zookeeper配置文件</a></li><li><a href="#23_zkdata_97" rel="nofollow">2.3 创建zkdata文件夹</a></li><li><a href="#24zookeeper_110" rel="nofollow">2.4将zookeeper及其配置文件转发复制到其他的节点中</a></li><li><a href="#25myidid_138" rel="nofollow">2.5对其他两台节点的myid（服务器id值进行配置）</a></li><li><a href="#26__159" rel="nofollow">2.6 运行测试</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_zookeeper_2"></a>1. zookeeper下载</h2> 
<p>zookeeper官网链接: <a href="https://zookeeper.apache.org/" rel="nofollow">https://zookeeper.apache.org/</a></p> 
<p>进入到其官网后，选择download下载对应的zookeeper版本即可（我这里以3.8.1为例子）。<br> <img src="https://images2.imgbox.com/f9/a1/sJsQiOsX_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/c1/66/sSFVDvZo_o.png" alt="在这里插入图片描述"></p> 
<p>这里直接选择Http的对应链接下载即可</p> 
<p><img src="https://images2.imgbox.com/08/98/psV9DSdk_o.png" alt="在这里插入图片描述"></p> 
<p>点击之后就下载完啦，很快的…</p> 
<p><img src="https://images2.imgbox.com/e7/26/erCCgSbV_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_zookeeper_22"></a>2. zookeeper的安装和配置</h2> 
<p>首先，将三台节点启动（node-01,node-02,node-03）,同时使用XShell远程登录到三台主机上面去，然后打开Xftp将刚刚下载的安装包进行传输。</p> 
<p><img src="https://images2.imgbox.com/88/e9/EmacjG36_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/db/05/fJlqGAR9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="21__33"></a>2.1 解压上传的压缩包到指定的目录位置</h3> 
<p>首先切换到上传的目录/export/software中，然后使用tar 命令将其解压到具体的位置，（我这里是/export/servers/）。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/software/ <span class="token comment">#切换目录</span>
<span class="token function">tar</span> -zxvf apache-zookeeper-3.8.1.tar.gz -C /export/servers/ <span class="token comment">#解压到/export/servers/</span>
<span class="token builtin class-name">cd</span> /export/servers/ <span class="token comment">#切换目录</span>
ll <span class="token comment"># 查看当前目录信息</span>
<span class="token function">mv</span> apache-zookeeper-3.8.1 zookeeper-3.8.1 <span class="token comment"># 重命名</span>
ll <span class="token comment"># 查看当前目录信息</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/68/65/4S3IL4Vb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9c/9f/9B4OdeJJ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_zookeeperzookeeper_52"></a>2.2 配置zookeeper的环境变量，以及zookeeper配置文件</h3> 
<p>配置环境变量，使用vi编辑器对/etc/profile配置文件进行修改(<strong>vi /etc/profile</strong>)，在其配置文件中，添加下面的语句：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">ZK_HOME</span><span class="token operator">=</span>/export/servers/zookeeper-3.8.1
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin:<span class="token variable">$ZK_HOME</span>/bin
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/63/rWafjIwh_o.png" alt="在这里插入图片描述"></p> 
<p><strong>修改完环境变量后，使用source命令刷新配置</strong></p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>然后切换到zookeeper的安装目录中，找到conf文件夹，里面有zoo-sample.cfg 文件，它为zookeeper的配置文件，将其重命名为zoo.cfg，然后使用 vi 编辑器将配置进行修改。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/servers/zookeeper-3.8.1/conf <span class="token comment">#切换到zookeeper的conf目录中</span>
<span class="token function">mv</span> zoo-sample.cfg zoo.cfg <span class="token comment">#重命名</span>
<span class="token function">vi</span> zoo.cfg <span class="token comment">#使用vi编辑器进行修改</span>
</code></pre> 
<p>修改的内容如下：</p> 
<pre><code class="prism language-shell"><span class="token comment"># 指定数据文件目录+数据持久化路径</span>
<span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/export/data/zookeeper/zkdata

<span class="token comment"># 配置zookeeper集群的服务器编号以及对应的主机名，选举端口号和通信端口号</span>
server.1<span class="token operator">=</span>node-01:2888:3888
server.2<span class="token operator">=</span>node-02:2888:3888
server.3<span class="token operator">=</span>node-03:2888:3888
</code></pre> 
<p><img src="https://images2.imgbox.com/97/7f/QVmKFSPF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23_zkdata_97"></a>2.3 创建zkdata文件夹</h3> 
<p>因为刚刚上面配置的/zookeeper/zkdata目录并不存在，所以我们需要创建zkdata文件夹，并且在里面创建myid的文件（myid用于设置服务器编号，选举leader的使用）。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/data/ <span class="token comment">#切换路径</span>
<span class="token function">mkdir</span> -p zookeeper/zkdata <span class="token comment">#直接创建多级目录</span>
ll <span class="token comment">#查看当前目录信息</span>
<span class="token builtin class-name">cd</span> zookeeper/zkdata
<span class="token builtin class-name">echo</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>myid <span class="token comment">#设定服务器编号为1</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/03/5a/5dGCxVie_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24zookeeper_110"></a>2.4将zookeeper及其配置文件转发复制到其他的节点中</h3> 
<p>使用scp命令来进行远程拷贝</p> 
<p>先将zookeeper安装的目录的文件远程拷贝到其他节点</p> 
<pre><code class="prism language-shell"><span class="token function">scp</span> -r /export/servers/zookeeper-3.8.1 node-02:/export/servers/
<span class="token function">scp</span> -r /export/servers/zookeeper-3.8.1 node-03:/export/servers/
</code></pre> 
<p>将zkdata（myid服务器编号的存放位置）拷贝到其他两台节点</p> 
<pre><code class="prism language-shell"><span class="token function">scp</span> -r /export/data/zookeeper/ node-02:/export/data/
<span class="token function">scp</span> -r /export/data/zookeeper/ node-03:/export/data/

</code></pre> 
<p>将zookeeper的环境变量配置文件远程拷贝到其他节点</p> 
<pre><code class="prism language-shell"><span class="token function">scp</span> -r /etc/profile node-02:/etc/profile
<span class="token function">scp</span> -r /etc/profile node-03:/etc/profile

</code></pre> 
<h3><a id="25myidid_138"></a>2.5对其他两台节点的myid（服务器id值进行配置）</h3> 
<p>分别将其他的两台节点的myid配置为2和3</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/data/zookeeper/zkdata/
<span class="token function">vi</span> myid
<span class="token comment"># 修改为2</span>
<span class="token function">cat</span> myid
</code></pre> 
<p><img src="https://images2.imgbox.com/46/47/PrJr7ax4_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/data/zookeeper/zkdata/
<span class="token function">vi</span> myid
<span class="token comment"># 修改为3</span>
<span class="token function">cat</span> myid
</code></pre> 
<p><img src="https://images2.imgbox.com/43/77/MYmmlFGI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="26__159"></a>2.6 运行测试</h3> 
<p>配置已经ok了，我们只需要启动zookeeper看它能否正常启动和停止，已经观察下里面的角色即可 。</p> 
<pre><code class="prism language-shell">zkServer.sh start <span class="token comment">#启动</span>
zkServer.sh status <span class="token comment"># 观察状态</span>
zkServer.sh stop <span class="token comment">#停止</span>
</code></pre> 
<p>tip:<code>Client port found: 2181. Client address: localhost. Client SSL: false. Error contacting service. It is probably not running.</code>如果报这个异常的话，就是jdk版本不兼容，更换高版本的jdk或者是低版本的zookeeper即可。</p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1c44f3b5bcb0a59edf686863ee881dac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Cookie和Session（会话技术）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9ca647a77833b6b297062d482a45187d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">考研408 王道计算机考研 (初试/复试) 网课笔记总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>