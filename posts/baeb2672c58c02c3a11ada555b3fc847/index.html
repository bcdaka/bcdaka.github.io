<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>å¤§æ•°æ® - Dorisç³»åˆ—ã€Šå››ã€‹- Doriså¸¸ç”¨å‡½æ•° - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/baeb2672c58c02c3a11ada555b3fc847/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="å¤§æ•°æ® - Dorisç³»åˆ—ã€Šå››ã€‹- Doriså¸¸ç”¨å‡½æ•°">
  <meta property="og:description" content="å¾€æœŸæ–‡ç« ï¼š
å¤§æ•°æ® - Dorisç³»åˆ—ã€Šä¸€ã€‹- Dorisç®€ä»‹_dorisè¯¦ç»†ä»‹ç»-CSDNåšå®¢
å¤§æ•°æ® - Dorisç³»åˆ—ã€ŠäºŒã€‹- Doriså®‰è£…ï¼ˆäº²æµ‹æˆåŠŸç‰ˆï¼‰_java8 please set vm.max_map_count to be 2000000 un-CSDNåšå®¢
å¤§æ•°æ® - Dorisç³»åˆ—ã€Šä¸‰ã€‹- æ•°æ®è¡¨è®¾è®¡ä¹‹è¡¨çš„åŸºæœ¬æ¦‚å¿µ_doris ä¸€å¼ è¡¨æœ€å¤šå­—æ®µ-CSDNåšå®¢
ç›®å½•
4.1.1æ¡ä»¶å‡½æ•°
4.1.1.1 ifå‡½æ•°
4.1.1.2 ifnull,nvl,coalesce,nullifå‡½æ•°
4.1.1.3 case
4.1.1.4 ç»ƒä¹ é¢˜
4.1.2èšåˆå‡½æ•°
4.1.2.1 min,max,sum,avg,count
4.1.2.2 min_byå’Œmax_by
ğŸ¥™4.1.2.3 group_concat
4.1.2.4 collect_listï¼Œcollect_set (1.2ç‰ˆæœ¬ä¸Šçº¿)
4.1.3 å­—ç¬¦ä¸²å‡½æ•°
4.1.3.1 lengthï¼Œlowerï¼Œupperï¼Œreverse
4.1.3.2 lpadï¼Œrpad
4.1.3.3 concatï¼Œconcat_ws
4.1.3.4 substr
4.1.3.5 ends_withï¼Œstarts_with
4.1.3.6 trimï¼Œltrimï¼Œrtrim
4.1.3.7 null_or_emptyï¼Œnot_null_or_empty
4.1.3.8 replace
4.1.3.9 split_part
4.1.3.10 money_format
4.1.1æ¡ä»¶å‡½æ•° 4.1.1.1 ifå‡½æ•° è¯­æ³•ç¤ºä¾‹ï¼š
if(boolean condition, type valueTrue, type valueFalseOrNull) --å¦‚æœè¡¨è¾¾å¼ condition æˆç«‹ï¼Œè¿”å›ç»“æœ valueTrueï¼›å¦åˆ™ï¼Œè¿”å›ç»“æœ valueFalseOrNull --è¿”å›å€¼ç±»å‹ï¼švalueTrue è¡¨è¾¾å¼ç»“æœçš„ç±»å‹ ç¤ºä¾‹ï¼š">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-30T08:30:00+08:00">
    <meta property="article:modified_time" content="2024-04-30T08:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">å¤§æ•°æ® - Dorisç³»åˆ—ã€Šå››ã€‹- Doriså¸¸ç”¨å‡½æ•°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>å¾€æœŸæ–‡ç« ï¼š</p> 
<p><a href="https://blog.csdn.net/weixin_40968325/article/details/135383624" title="å¤§æ•°æ® - Dorisç³»åˆ—ã€Šä¸€ã€‹- Dorisç®€ä»‹_dorisè¯¦ç»†ä»‹ç»-CSDNåšå®¢">å¤§æ•°æ® - Dorisç³»åˆ—ã€Šä¸€ã€‹- Dorisç®€ä»‹_dorisè¯¦ç»†ä»‹ç»-CSDNåšå®¢</a></p> 
<p><a href="https://blog.csdn.net/weixin_40968325/article/details/135397176" title="å¤§æ•°æ® - Dorisç³»åˆ—ã€ŠäºŒã€‹- Doriså®‰è£…ï¼ˆäº²æµ‹æˆåŠŸç‰ˆï¼‰_java8 please set vm.max_map_count to be 2000000 un-CSDNåšå®¢">å¤§æ•°æ® - Dorisç³»åˆ—ã€ŠäºŒã€‹- Doriså®‰è£…ï¼ˆäº²æµ‹æˆåŠŸç‰ˆï¼‰_java8 please set vm.max_map_count to be 2000000 un-CSDNåšå®¢</a></p> 
<p><a href="https://blog.csdn.net/weixin_40968325/article/details/135497951" title="å¤§æ•°æ® - Dorisç³»åˆ—ã€Šä¸‰ã€‹- æ•°æ®è¡¨è®¾è®¡ä¹‹è¡¨çš„åŸºæœ¬æ¦‚å¿µ_doris ä¸€å¼ è¡¨æœ€å¤šå­—æ®µ-CSDNåšå®¢">å¤§æ•°æ® - Dorisç³»åˆ—ã€Šä¸‰ã€‹- æ•°æ®è¡¨è®¾è®¡ä¹‹è¡¨çš„åŸºæœ¬æ¦‚å¿µ_doris ä¸€å¼ è¡¨æœ€å¤šå­—æ®µ-CSDNåšå®¢</a></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<p id="4.1.1%E6%9D%A1%E4%BB%B6%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#4.1.1%E6%9D%A1%E4%BB%B6%E5%87%BD%E6%95%B0" rel="nofollow">4.1.1æ¡ä»¶å‡½æ•°</a></p> 
<p id="4.1.1.1%20if%E5%87%BD%E6%95%B0-toc" style="margin-left:120px;"><a href="#4.1.1.1%20if%E5%87%BD%E6%95%B0" rel="nofollow">4.1.1.1 ifå‡½æ•°</a></p> 
<p id="4.1.1.2%20ifnull%2Cnvl%2Ccoalesce%2Cnullif%E5%87%BD%E6%95%B0-toc" style="margin-left:120px;"><a href="#4.1.1.2%20ifnull%2Cnvl%2Ccoalesce%2Cnullif%E5%87%BD%E6%95%B0" rel="nofollow">4.1.1.2 ifnull,nvl,coalesce,nullifå‡½æ•°</a></p> 
<p id="4.1.1.3%20case-toc" style="margin-left:120px;"><a href="#4.1.1.3%20case" rel="nofollow">4.1.1.3 case</a></p> 
<p id="4.1.1.4%20%E7%BB%83%E4%B9%A0%E9%A2%98-toc" style="margin-left:120px;"><a href="#4.1.1.4%20%E7%BB%83%E4%B9%A0%E9%A2%98" rel="nofollow">4.1.1.4 ç»ƒä¹ é¢˜</a></p> 
<p id="4.1.2%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#4.1.2%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0" rel="nofollow">4.1.2èšåˆå‡½æ•°</a></p> 
<p id="4.1.2.1%20min%2Cmax%2Csum%2Cavg%2Ccount-toc" style="margin-left:120px;"><a href="#4.1.2.1%20min%2Cmax%2Csum%2Cavg%2Ccount" rel="nofollow">4.1.2.1 min,max,sum,avg,count</a></p> 
<p id="4.1.2.2%20min_by%E5%92%8Cmax_by-toc" style="margin-left:120px;"><a href="#4.1.2.2%20min_by%E5%92%8Cmax_by" rel="nofollow">4.1.2.2 min_byå’Œmax_by</a></p> 
<p id="%F0%9F%A5%994.1.2.3%20group_concat-toc" style="margin-left:120px;"><a href="#%F0%9F%A5%994.1.2.3%20group_concat" rel="nofollow">ğŸ¥™4.1.2.3 group_concat</a></p> 
<p id="4.1.2.4%20collect_list%EF%BC%8Ccollect_set%20(1.2%E7%89%88%E6%9C%AC%E4%B8%8A%E7%BA%BF)-toc" style="margin-left:120px;"><a href="#4.1.2.4%20collect_list%EF%BC%8Ccollect_set%20%281.2%E7%89%88%E6%9C%AC%E4%B8%8A%E7%BA%BF%29" rel="nofollow">4.1.2.4 collect_listï¼Œcollect_set (1.2ç‰ˆæœ¬ä¸Šçº¿)</a></p> 
<p id="4.1.3%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#4.1.3%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0" rel="nofollow">4.1.3 å­—ç¬¦ä¸²å‡½æ•°</a></p> 
<p id="4.1.3.1%20length%EF%BC%8Clower%EF%BC%8Cupper%EF%BC%8Creverse-toc" style="margin-left:120px;"><a href="#4.1.3.1%20length%EF%BC%8Clower%EF%BC%8Cupper%EF%BC%8Creverse" rel="nofollow">4.1.3.1 lengthï¼Œlowerï¼Œupperï¼Œreverse</a></p> 
<p id="4.1.3.2%20lpad%EF%BC%8Crpad-toc" style="margin-left:120px;"><a href="#4.1.3.2%20lpad%EF%BC%8Crpad" rel="nofollow">4.1.3.2 lpadï¼Œrpad</a></p> 
<p id="4.1.3.3%20concat%EF%BC%8Cconcat_ws-toc" style="margin-left:120px;"><a href="#4.1.3.3%20concat%EF%BC%8Cconcat_ws" rel="nofollow">4.1.3.3 concatï¼Œconcat_ws</a></p> 
<p id="4.1.3.4%20substr-toc" style="margin-left:120px;"><a href="#4.1.3.4%20substr" rel="nofollow">4.1.3.4 substr</a></p> 
<p id="4.1.3.5%20ends_with%EF%BC%8Cstarts_with-toc" style="margin-left:120px;"><a href="#4.1.3.5%20ends_with%EF%BC%8Cstarts_with" rel="nofollow">4.1.3.5 ends_withï¼Œstarts_with</a></p> 
<p id="4.1.3.6%20trim%EF%BC%8Cltrim%EF%BC%8Crtrim-toc" style="margin-left:120px;"><a href="#4.1.3.6%20trim%EF%BC%8Cltrim%EF%BC%8Crtrim" rel="nofollow">4.1.3.6 trimï¼Œltrimï¼Œrtrim</a></p> 
<p id="4.1.3.7%20null_or_empty%EF%BC%8Cnot_null_or_empty-toc" style="margin-left:120px;"><a href="#4.1.3.7%20null_or_empty%EF%BC%8Cnot_null_or_empty" rel="nofollow">4.1.3.7 null_or_emptyï¼Œnot_null_or_empty</a></p> 
<p id="4.1.3.8%20replace-toc" style="margin-left:120px;"><a href="#4.1.3.8%20replace" rel="nofollow">4.1.3.8 replace</a></p> 
<p id="4.1.3.9%20split_part-toc" style="margin-left:120px;"><a href="#4.1.3.9%20split_part" rel="nofollow">4.1.3.9 split_part</a></p> 
<p id="4.1.3.10%20money_format-toc" style="margin-left:120px;"><a href="#4.1.3.10%20money_format" rel="nofollow">4.1.3.10 money_format</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 id="4.1.1%E6%9D%A1%E4%BB%B6%E5%87%BD%E6%95%B0" style="background-color:transparent;">4.1.1æ¡ä»¶å‡½æ•°</h4> 
<h5 id="4.1.1.1%20if%E5%87%BD%E6%95%B0">4.1.1.1 ifå‡½æ•°</h5> 
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">if(boolean condition, type valueTrue, type valueFalseOrNull)
--å¦‚æœè¡¨è¾¾å¼ condition æˆç«‹ï¼Œè¿”å›ç»“æœ valueTrueï¼›å¦åˆ™ï¼Œè¿”å›ç»“æœ valueFalseOrNull
--è¿”å›å€¼ç±»å‹ï¼švalueTrue è¡¨è¾¾å¼ç»“æœçš„ç±»å‹</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">mysql&gt; select  user_id, if(user_id = 1, "true", "false") as test_if from test;
+---------+---------+
| user_id | test_if |
+---------+---------+
| 1       | true    |
| 2       | false   |
+---------+---------+</code></pre> 
<h5 id="4.1.1.2%20ifnull%2Cnvl%2Ccoalesce%2Cnullif%E5%87%BD%E6%95%B0">4.1.1.2 ifnull,nvl,coalesce,nullifå‡½æ•°</h5> 
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">ifnull(expr1, expr2)
--å¦‚æœ expr1 çš„å€¼ä¸ä¸º NULL åˆ™è¿”å› expr1ï¼Œå¦åˆ™è¿”å› expr2

nvl(expr1, expr2)
--å¦‚æœ expr1 çš„å€¼ä¸ä¸º NULL åˆ™è¿”å› expr1ï¼Œå¦åˆ™è¿”å› expr2

coalesce(expr1, expr2, ...., expr_n))
--è¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºè¡¨è¾¾å¼ï¼ˆä»å·¦å‘å³ï¼‰

nullif(expr1, expr2)
-- å¦‚æœä¸¤ä¸ªå‚æ•°ç›¸ç­‰ï¼Œåˆ™è¿”å›NULLã€‚å¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">mysql&gt; select ifnull(1,0);
+--------------+
| ifnull(1, 0) |
+--------------+
|            1 |
+--------------+

mysql&gt; select nvl(null,10);
+------------------+
| nvl(null,10)     |
+------------------+
|               10 |
+------------------+

mysql&gt; select coalesce(NULL, null, '0000');
+--------------------------------+
| coalesce(NULL, '1111', '0000') |
+--------------------------------+
| 1111                           |
+--------------------------------+

mysql&gt; select coalesce(NULL, NULL,NULL,'0000', NULL);
+----------------------------------------+
| coalesce(NULL, NULL,NULL,'0000', NULL) |
+----------------------------------------+
| 0000                                   |
+----------------------------------------+

mysql&gt; select nullif(1,1);
+--------------+
| nullif(1, 1) |
+--------------+
|         NULL |
+--------------+

mysql&gt; select nullif(1,0);
+--------------+
| nullif(1, 0) |
+--------------+
|            1 |
+--------------+</code></pre> 
<h5 id="4.1.1.3%20case">4.1.1.3 case</h5> 
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">-- æ–¹å¼ä¸€
CASE expression
    WHEN condition1 THEN result1
    [WHEN condition2 THEN result2]
    ...
    [WHEN conditionN THEN resultN]
    [ELSE result]
END


-- æ–¹å¼äºŒ
CASE WHEN condition1 THEN result1
    [WHEN condition2 THEN result2]
    ...
    [WHEN conditionN THEN resultN]
    [ELSE result]
END

-- å°†è¡¨è¾¾å¼å’Œå¤šä¸ªå¯èƒ½çš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå½“åŒ¹é…æ—¶è¿”å›ç›¸åº”çš„ç»“æœ</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">mysql&gt; select user_id, 
case user_id 
when 1 then 'user_id = 1' 
when 2 then 'user_id = 2' 
else 'user_id not exist' 
end as test_case 
from test;
+---------+-------------+
| user_id | test_case   |
+---------+-------------+
| 1       | user_id = 1 |
| 2       | user_id = 2 |
| 3       | 'user_id not exist' |
+---------+-------------+
 
mysql&gt; select user_id, 
case 
when user_id = 1 then 'user_id = 1' 
when user_id = 2 then 'user_id = 2' 
else 'user_id not exist' 
end as test_case 
from test;
+---------+-------------+
| user_id | test_case   |
+---------+-------------+
| 1       | user_id = 1 |
| 2       | user_id = 2 |
+---------+-------------+</code></pre> 
<h5 id="4.1.1.4%20%E7%BB%83%E4%B9%A0%E9%A2%98">4.1.1.4 ç»ƒä¹ é¢˜</h5> 
<p><a href="https://leetcode.cn/problems/market-analysis-i/description/" rel="nofollow" title="SQL1158 å¸‚åœºåˆ†æI">SQL1158 å¸‚åœºåˆ†æI</a></p> 
<p></p> 
<h4 id="4.1.2%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0" style="background-color:transparent;">4.1.2èšåˆå‡½æ•°</h4> 
<h5 id="4.1.2.1%20min%2Cmax%2Csum%2Cavg%2Ccount">4.1.2.1 min,max,sum,avg,count</h5> 
<h5 id="4.1.2.2%20min_by%E5%92%8Cmax_by">4.1.2.2 min_byå’Œmax_by</h5> 
<pre><code class="hljs">MAX_BY(expr1, expr2)
è¿”å›expr2æœ€å¤§å€¼æ‰€åœ¨è¡Œçš„ expr1 ï¼ˆæ±‚åˆ†ç»„top1çš„ç®€ä»‹å‡½æ•°ï¼‰</code></pre> 
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">MySQL &gt; select * from tbl;
+------+------+------+------+
| k1   | k2   | k3   | k4   |
+------+------+------+------+
|    0 | 3    | 2    |  100 |
|    1 | 2    | 3    |    4 |
|    4 | 3    | 2    |    2 |
|    3 | 4    | 2    |    1 |
+------+------+------+------+

MySQL &gt; select max_by(k1, k4) from tbl;

select max_by(k1, k4) from tbl;
--å–k4è¿™ä¸ªåˆ—ä¸­çš„æœ€å¤§å€¼å¯¹åº”çš„k1è¿™ä¸ªåˆ—çš„å€¼
+--------------------+
| max_by(`k1`, `k4`) |
+--------------------+
|                  0 |
+--------------------+ </code></pre> 
<p>ç»ƒä¹ ï¼š</p> 
<pre><code class="hljs">name   subject   score 
zss,chinese,99
zss,math,89
zss,English,79
lss,chinese,88
lss,math,88
lss,English,22
www,chinese,99
www,math,45
zll,chinese,23
zll,math,88
zll,English,80
www,English,94



-- å»ºè¡¨è¯­å¥
create table score
(
name varchar(50),
subject varchar(50),
score double
)
DUPLICATE KEY(name)
DISTRIBUTED BY HASH(name) BUCKETS 1;

-- é€šè¿‡æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼å¯¼å…¥æ•°æ®
curl \
 -u root: \
 -H "label:salary" \
 -H "column_separator:," \
 -T /root/data/sorce.txt \
 http://linux01:8040/api/test/score/_stream_load


-- æ±‚æ¯é—¨è¯¾ç¨‹æˆç»©æœ€é«˜åˆ†çš„é‚£ä¸ªäºº
select  
subject,max_by(name,score) as name
from score
group by subject


+---------+------+
| subject | name |
+---------+------+
| English | www  |
| math    | lss  |
| chinese | www  |
+---------+------+</code></pre> 
<h5 id="%F0%9F%A5%994.1.2.3%20group_concat"><em><strong>ğŸ¥™</strong></em>4.1.2.3 group_concat</h5> 
<blockquote> 
 <p>æ±‚ï¼šæ¯ä¸€ä¸ªäººæœ‰è€ƒè¯•æˆç»©çš„æ‰€æœ‰ç§‘ç›®</p> 
 <p>select nameï¼Œ group_concat(subject,',') as all_subject from score group by name</p> 
</blockquote> 
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">VARCHAR GROUP_CONCAT([DISTINCT] VARCHAR åˆ—å[, VARCHAR sep]

è¯¥å‡½æ•°æ˜¯ç±»ä¼¼äºhiveä¸­collect_set()å’Œcollect_list()å‡½æ•°ï¼Œgroup_concat å°†ç»“æœé›†ä¸­çš„å¤šè¡Œç»“æœè¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²

-- group_concatå¯¹äºæ”¶é›†çš„å­—æ®µåªèƒ½æ˜¯stringï¼Œvarcharï¼Œcharç±»å‹  
--å½“ä¸æŒ‡å®šåˆ†éš”ç¬¦çš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨ ','

VARCHAR ï¼šä»£è¡¨GROUP_CONCATå‡½æ•°è¿”å›å€¼ç±»å‹
[DISTINCT]ï¼šå¯é€‰å‚æ•°ï¼Œé’ˆå¯¹éœ€è¦æ‹¼æ¥çš„åˆ—çš„å€¼è¿›è¡Œå»é‡  
[, VARCHAR sep]ï¼šæ‹¼æ¥æˆå­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ ','</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">--å»ºè¡¨
create table example(
id int,
name varchar(50),
age int,
gender string,
is_marry boolean,
marry_date date,
marry_datetime datetime
)engine = olap
distributed by hash(id) buckets 3;

--æ’å…¥æ•°æ®
insert into example values \
(1,'zss',18,'male',0,null,null),\
(2,'lss',28,'female',1,'2022-01-01','2022-01-01 11:11:11'),\
(3,'ww',38,'male',1,'2022-02-01','2022-02-01 11:11:11'),\
(4,'zl',48,'female',0,null,null),\
(5,'tq',58,'male',1,'2022-03-01','2022-03-01 11:11:11'),\
(6,'mly',18,'male',1,'2022-04-01','2022-04-01 11:11:11'),\
(7,null,18,'male',1,'2022-05-01','2022-05-01 11:11:11');


+--------+---------------+

</code></pre> 
<p><em>å½“æ”¶é›†çš„é‚£ä¸€åˆ—ï¼Œæœ‰å€¼ä¸ºnullæ—¶ï¼Œä»–ä¼šè‡ªåŠ¨å°†nullçš„å€¼è¿‡æ»¤æ‰</em></p> 
<pre><code class="hljs">select 
gender,
group_concat(name,',') as gc_name
from example 
group by gender;
+--------+---------------+
| gender | gc_name       |
+--------+---------------+
| female | zl,lss        |
| male   | zss,ww,tq,mly |
+--------+---------------+

select 
gender,
group_concat(DISTINCT cast(age as string)) as gc_age
from example 
group by gender;

+--------+------------+
| gender | gc_age     |
+--------+------------+
| female | 48, 28     |
| male   | 58, 38, 18 |
+--------+------------+</code></pre> 
<h5 id="4.1.2.4%20collect_list%EF%BC%8Ccollect_set%20(1.2%E7%89%88%E6%9C%AC%E4%B8%8A%E7%BA%BF)" style="background-color:transparent;">4.1.2.4 collect_listï¼Œcollect_set (1.2ç‰ˆæœ¬ä¸Šçº¿)</h5> 
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">ARRAY&lt;T&gt; collect_list(expr)
--è¿”å›ä¸€ä¸ªåŒ…å« expr ä¸­æ‰€æœ‰å…ƒç´ (ä¸åŒ…æ‹¬NULL)çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­å…ƒç´ é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚

ARRAY&lt;T&gt; collect_set(expr)
--è¿”å›ä¸€ä¸ªåŒ…å« expr ä¸­æ‰€æœ‰å»é‡åå…ƒç´ (ä¸åŒ…æ‹¬NULL)çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­å…ƒç´ é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚</code></pre> 
<h4 id="4.1.3%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0" style="background-color:transparent;">4.1.3 å­—ç¬¦ä¸²å‡½æ•°</h4> 
<h5 id="4.1.3.1%20length%EF%BC%8Clower%EF%BC%8Cupper%EF%BC%8Creverse">4.1.3.1 lengthï¼Œlowerï¼Œupperï¼Œreverse</h5> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">è·å–åˆ°å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¯¹å­—ç¬¦ä¸²è½¬å¤§å°å†™å’Œå­—ç¬¦ä¸²çš„åè½¬</code></pre> 
<h5 id="4.1.3.2%20lpad%EF%BC%8Crpad">4.1.3.2 lpadï¼Œrpad</h5> 
<p>è¯­æ³•ï¼š</p> 
<pre><code class="hljs">VARCHAR rpad(VARCHAR str, INT len, VARCHAR pad)

VARCHAR lpad(VARCHAR str, INT len, VARCHAR pad)

-- è¿”å› str ä¸­é•¿åº¦ä¸º lenï¼ˆä»é¦–å­—æ¯å¼€å§‹ç®—èµ·ï¼‰çš„å­—ç¬¦ä¸²ã€‚
--å¦‚æœ len å¤§äº str çš„é•¿åº¦ï¼Œåˆ™åœ¨ str çš„åé¢ä¸æ–­è¡¥å…… pad  å­—ç¬¦ï¼Œ
--ç›´åˆ°è¯¥å­—ç¬¦ä¸²çš„é•¿åº¦è¾¾åˆ° len ä¸ºæ­¢ã€‚å¦‚æœ len å°äº str çš„é•¿åº¦ï¼Œ
--è¯¥å‡½æ•°ç›¸å½“äºæˆªæ–­ str å­—ç¬¦ä¸²ï¼Œåªè¿”å›é•¿åº¦ä¸º len  çš„å­—ç¬¦ä¸²ã€‚
--len æŒ‡çš„æ˜¯å­—ç¬¦é•¿åº¦è€Œä¸æ˜¯å­—èŠ‚é•¿åº¦ã€‚</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">-- å‘å·¦è¾¹è¡¥é½
SELECT lpad("1", 5, "0");
+---------------------+
| lpad("1", 5, "0") |
+---------------------+
| 00001             |
+---------------------+

-- å‘å³è¾¹è¡¥é½
SELECT rpad('11', 5, '0');
+---------------------+
| rpad('11', 5, '0')  |
+---------------------+
| 11000               |
+---------------------+
</code></pre> 
<h5 id="4.1.3.3%20concat%EF%BC%8Cconcat_ws">4.1.3.3 concatï¼Œconcat_ws</h5> 
<p>è¯­æ³•ï¼š</p> 
<pre><code class="hljs">select concat("a", "b");
+------------------+
| concat('a', 'b') |
+------------------+
| ab               |
+------------------+

select concat("a", "b", "c");
+-----------------------+
| concat('a', 'b', 'c') |
+-----------------------+
| abc                   |
+-----------------------+

-- concatä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå€¼ä¸ºnullï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç»“æœå°±æ˜¯null
mysql&gt; select concat("a", null, "c");
+------------------------+
| concat('a', NULL, 'c') |
+------------------------+
| NULL                   |
+------------------------+


--ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•° sep ä½œä¸ºè¿æ¥ç¬¦
--å°†ç¬¬äºŒä¸ªå‚æ•°ä»¥åŠåç»­æ‰€æœ‰å‚æ•°(æˆ–ARRAYä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²)æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
-- å¦‚æœåˆ†éš”ç¬¦æ˜¯ NULLï¼Œè¿”å› NULLã€‚ concat_wså‡½æ•°ä¸ä¼šè·³è¿‡ç©ºå­—ç¬¦ä¸²ï¼Œä¼šè·³è¿‡ NULL å€¼ã€‚
mysql&gt; select concat_ws("_", "a", "b");
+----------------------------+
| concat_ws("_", "a", "b")   |
+----------------------------+
| a_b                        |
+----------------------------+

mysql&gt; select concat_ws(NULL, "d", "is");
+----------------------------+
| concat_ws(NULL, 'd', 'is') |
+----------------------------+
| NULL                       |
+----------------------------+
</code></pre> 
<h5 id="4.1.3.4%20substr">4.1.3.4 substr</h5> 
<p>è¯­æ³•ï¼š</p> 
<pre><code class="hljs">--æ±‚å­å­—ç¬¦ä¸²ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå‚æ•°æè¿°çš„å­—ç¬¦ä¸²ä¸­ä»startå¼€å§‹é•¿åº¦ä¸ºlençš„éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚
--é¦–å­—æ¯çš„ä¸‹æ ‡ä¸º1ã€‚
mysql&gt; select substr("Hello doris", 3, 5);
+-----------------------------+
| substr('Hello doris', 2, 1) |
+-----------------------------+
| e                           |
+-----------------------------+
mysql&gt; select substr("Hello doris", 1, 2);
+-----------------------------+
| substr('Hello doris', 1, 2) |
+-----------------------------+
| He                          |
+-----------------------------+</code></pre> 
<h5 id="4.1.3.5%20ends_with%EF%BC%8Cstarts_with">4.1.3.5 ends_withï¼Œstarts_with</h5> 
<p>è¯­æ³•ï¼š</p> 
<pre><code class="hljs">BOOLEAN ENDS_WITH (VARCHAR str, VARCHAR suffix)
--å¦‚æœå­—ç¬¦ä¸²ä»¥æŒ‡å®šåç¼€ç»“å°¾ï¼Œè¿”å›trueã€‚å¦åˆ™ï¼Œè¿”å›falseã€‚
--ä»»æ„å‚æ•°ä¸ºNULLï¼Œè¿”å›NULLã€‚

BOOLEAN STARTS_WITH (VARCHAR str, VARCHAR prefix)
--å¦‚æœå­—ç¬¦ä¸²ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´ï¼Œè¿”å›trueã€‚å¦åˆ™ï¼Œè¿”å›falseã€‚
--ä»»æ„å‚æ•°ä¸ºNULLï¼Œè¿”å›NULLã€‚</code></pre> 
<p>ç¤ºä¾‹ï¼š</p> 
<pre><code class="hljs">mysql&gt; select ends_with("Hello doris", "doris");
+-----------------------------------+
| ends_with('Hello doris', 'doris') |
+-----------------------------------+
|                                 1 | 
+-----------------------------------+

mysql&gt; select ends_with("Hello doris", "Hello");
+-----------------------------------+
| ends_with('Hello doris', 'Hello') |
+-----------------------------------+
|                                 0 | 
+-----------------------------------+


MySQL [(none)]&gt; select starts_with("hello world","hello");
+-------------------------------------+
| starts_with('hello world', 'hello') |
+-------------------------------------+
|                                   1 |
+-------------------------------------+

MySQL [(none)]&gt; select starts_with("hello world","world");
+-------------------------------------+
| starts_with('hello world', 'world') |
+-------------------------------------+
|                                   0 |
+-------------------------------------+</code></pre> 
<h5 id="4.1.3.6%20trim%EF%BC%8Cltrim%EF%BC%8Crtrim">4.1.3.6 trimï¼Œltrimï¼Œrtrim</h5> 
<p>è¯­æ³•ï¼š</p> 
<pre><code class="hljs">VARCHAR trim(VARCHAR str)
-- å°†å‚æ•° str ä¸­å·¦ä¾§å’Œå³ä¾§å¼€å§‹éƒ¨åˆ†è¿ç»­å‡ºç°çš„ç©ºæ ¼å»æ‰
mysql&gt; SELECT trim('   ab d   ') str;
+------+
| str  |
+------+
| ab d |
+------+

VARCHAR ltrim(VARCHAR str)
-- å°†å‚æ•° str ä¸­ä»å·¦ä¾§éƒ¨åˆ†å¼€å§‹éƒ¨åˆ†è¿ç»­å‡ºç°çš„ç©ºæ ¼å»æ‰
mysql&gt; SELECT ltrim('   ab d') str;
+------+
| str  |
+------+
| ab d |
+------+

VARCHAR rtrim(VARCHAR str)
--å°†å‚æ•° str ä¸­ä»å³ä¾§éƒ¨åˆ†å¼€å§‹éƒ¨åˆ†è¿ç»­å‡ºç°çš„ç©ºæ ¼å»æ‰

mysql&gt; SELECT rtrim('ab d   ') str;
+------+
| str  |
+------+
| ab d |
+------+</code></pre> 
<h5 id="4.1.3.7%20null_or_empty%EF%BC%8Cnot_null_or_empty">4.1.3.7 null_or_emptyï¼Œnot_null_or_empty</h5> 
<pre><code class="hljs">BOOLEAN NULL_OR_EMPTY (VARCHAR str)

-- å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºå­—ç¬¦ä¸²æˆ–è€…NULLï¼Œè¿”å›trueã€‚å¦åˆ™ï¼Œè¿”å›falseã€‚
MySQL [(none)]&gt; select null_or_empty(null);
+---------------------+
| null_or_empty(NULL) |
+---------------------+
|                   1 |
+---------------------+

MySQL [(none)]&gt; select null_or_empty("");
+-------------------+
| null_or_empty('') |
+-------------------+
|                 1 |
+-------------------+

MySQL [(none)]&gt; select null_or_empty("a");
+--------------------+
| null_or_empty('a') |
+--------------------+
|                  0 |
+--------------------+

BOOLEAN NOT_NULL_OR_EMPTY (VARCHAR str)
å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºå­—ç¬¦ä¸²æˆ–è€…NULLï¼Œè¿”å›falseã€‚å¦åˆ™ï¼Œè¿”å›trueã€‚

MySQL [(none)]&gt; select not_null_or_empty(null);
+-------------------------+
| not_null_or_empty(NULL) |
+-------------------------+
|                       0 |
+-------------------------+

MySQL [(none)]&gt; select not_null_or_empty("");
+-----------------------+
| not_null_or_empty('') |
+-----------------------+
|                     0 |
+-----------------------+

MySQL [(none)]&gt; select not_null_or_empty("a");
+------------------------+
| not_null_or_empty('a') |
+------------------------+
|                      1 |
+------------------------+</code></pre> 
<h5 id="4.1.3.8%20replace">4.1.3.8 replace</h5> 
<pre><code class="hljs">VARCHAR REPLACE (VARCHAR str, VARCHAR old, VARCHAR new)
-- å°†strå­—ç¬¦ä¸²ä¸­çš„oldå­ä¸²å…¨éƒ¨æ›¿æ¢ä¸ºnewä¸²

mysql&gt; select replace("http://www.baidu.com:9090", "9090", "");
+------------------------------------------------------+
| replace('http://www.baidu.com:9090', '9090', '') |
+------------------------------------------------------+
| http://www.baidu.com:                                |
+------------------------------------------------------+</code></pre> 
<h5 id="4.1.3.9%20split_part">4.1.3.9 split_part</h5> 
<pre><code class="hljs">VARCHAR split_part(VARCHAR content, VARCHAR delimiter, INT field)
-- æ ¹æ®åˆ†å‰²ç¬¦æ‹†åˆ†å­—ç¬¦ä¸², è¿”å›æŒ‡å®šçš„åˆ†å‰²éƒ¨åˆ†(ä»ä¸€å¼€å§‹è®¡æ•°)ã€‚

mysql&gt; select split_part("hello world", " ", 1);
+----------------------------------+
| split_part('hello world', ' ', 1) |
+----------------------------------+
| hello                            |
+----------------------------------+


mysql&gt; select split_part("hello world", " ", 2);
+----------------------------------+
| split_part('hello world', ' ', 2) |
+----------------------------------+
| world                             |
+----------------------------------+

mysql&gt; select split_part("2019å¹´7æœˆ8å·", "æœˆ", 1);
+-----------------------------------------+
| split_part('2019å¹´7æœˆ8å·', 'æœˆ', 1)     |
+-----------------------------------------+
| 2019å¹´7                                 |
+-----------------------------------------+

mysql&gt; select split_part("abca", "a", 1);
+----------------------------+
| split_part('abca', 'a', 1) |
+----------------------------+
|                            |
+----------------------------+</code></pre> 
<h5 id="4.1.3.10%20money_format">4.1.3.10 money_format</h5> 
<pre><code class="hljs">VARCHAR money_format(Number)
-- å°†æ•°å­—æŒ‰ç…§è´§å¸æ ¼å¼è¾“å‡ºï¼Œæ•´æ•°éƒ¨åˆ†æ¯éš”3ä½ç”¨é€—å·åˆ†éš”ï¼Œå°æ•°éƒ¨åˆ†ä¿ç•™2ä½

mysql&gt; select money_format(17014116);
+------------------------+
| money_format(17014116) |
+------------------------+
| 17,014,116.00          |
+------------------------+

mysql&gt; select money_format(1123.456);
+------------------------+
| money_format(1123.456) |
+------------------------+
| 1,123.46               |
+------------------------+

mysql&gt; select money_format(1123.4);
+----------------------+
| money_format(1123.4) |
+----------------------+
| 1,123.40             |
+----------------------+</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8be07dd39ba34a24c3d577774e42284b/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">è¶…è¯¦ç»†çš„ä¸‡å­—Gitåˆ†æ”¯æ•™ç¨‹ï¼ˆä¿å§†çº§åˆ«ï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4b09ddc8c3d755a8d8f50c3eed40506f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Vue 2 ä¸­ç»„ä»¶è¯¦è§£</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>