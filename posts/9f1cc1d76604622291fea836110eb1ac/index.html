<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>6. C&#43;&#43;中默认成员函数【取地址重载】【const成员函数】 【运算符重载】【实现一个日期类】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9f1cc1d76604622291fea836110eb1ac/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="6. C&#43;&#43;中默认成员函数【取地址重载】【const成员函数】 【运算符重载】【实现一个日期类】">
  <meta property="og:description" content="文章目录 一、【C&#43;&#43;】赋值运算符重载1.1 运算符重载【引入】1.2 运算符重载1.3 赋值运算符重载1.4 赋值 二、日期类的实现2.1 判断小于2.2 判断等于2.3 判断小于等于2.4 判断大于2.5 判断大于等于2.6 判断不等于2.7 日期加等天数首先要获取月份天数 2.8 日期加天数2.9 日期减等天数2.10 日期减天数 三、前置&#43;&#43; &amp;&amp; 后置&#43;&#43;3.1 日期减日期【返回天数】3.2 流插入3.3 流提取3.4 检查输入日期是否合法 四、日期类的实现【源码】五、const修饰5.1 const成员函数5.2 小结一下：5.3 默认成员函数【取地址及const取地址操作符重载】 一、【C&#43;&#43;】赋值运算符重载 1.1 运算符重载【引入】 C&#43;&#43;为了增强代码的可读性引入了运算符重载，运算符重载是具有特殊函数名的函数，也具有其返回值类型，函数名字以及参数列表，其返回值类型与参数列表与普通的函数类似。函数名字为：关键字operator后面接需要重载的运算符符号。函数原型：返回值类型 operator操作符(参数列表) 注意：
不能通过连接其他符号来创建新的操作符：比如operator@
重载操作符必须有一个类型参数【不能去重载运算符改变内置类型的行为】
用于内置类型的运算符，其含义不能改变，例如：内置的整型&#43;，不 能改变其含义
作为类成员函数重载时，其形参看起来比操作数数目少1个，因为成员函数的第一个参数为隐藏的this
.* :: sizeof ?: . 注意以上5个运算符不能重载。这里的是.*，不是*，这里经常在笔试选择题中出现。
当我们写了一个日期类，有没有可能要比较比较呢？
class Date { public: Date(int year = 1900, int month = 1, int day = 1) { _year = year; _month = month; _day = day; } //private: // 一会有解决方法 int _year; int _month; int _day; }; 我们写了一个比较相等的函数，如果是传值的话没有必要，我们形参直接写成&amp;，而且也不需要修改，所以再加上const bool DateEquel(const Date&amp; x, Date&amp; y) { return x.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-08T12:46:44+08:00">
    <meta property="article:modified_time" content="2024-07-08T12:46:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">6. C&#43;&#43;中默认成员函数【取地址重载】【const成员函数】 【运算符重载】【实现一个日期类】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#C_1" rel="nofollow">一、【C++】赋值运算符重载</a></li><li><ul><li><a href="#11__4" rel="nofollow">1.1 运算符重载【引入】</a></li><li><a href="#12__89" rel="nofollow">1.2 运算符重载</a></li><li><a href="#13__315" rel="nofollow">1.3 赋值运算符重载</a></li><li><a href="#14__357" rel="nofollow">1.4 赋值</a></li></ul> 
   </li><li><a href="#_423" rel="nofollow">二、日期类的实现</a></li><li><ul><li><a href="#21__431" rel="nofollow">2.1 判断小于</a></li><li><a href="#22__461" rel="nofollow">2.2 判断等于</a></li><li><a href="#23__475" rel="nofollow">2.3 判断小于等于</a></li><li><a href="#24__487" rel="nofollow">2.4 判断大于</a></li><li><a href="#25__498" rel="nofollow">2.5 判断大于等于</a></li><li><a href="#26__509" rel="nofollow">2.6 判断不等于</a></li><li><a href="#27__521" rel="nofollow">2.7 日期加等天数</a></li><li><ul><li><a href="#_524" rel="nofollow">首先要获取月份天数</a></li></ul> 
    </li><li><a href="#28__567" rel="nofollow">2.8 日期加天数</a></li><li><a href="#29__631" rel="nofollow">2.9 日期减等天数</a></li><li><a href="#210__655" rel="nofollow">2.10 日期减天数</a></li></ul> 
   </li><li><a href="#___668" rel="nofollow">三、前置++ &amp;&amp; 后置++</a></li><li><ul><li><a href="#31__693" rel="nofollow">3.1 日期减日期【返回天数】</a></li><li><a href="#32__718" rel="nofollow">3.2 流插入</a></li><li><a href="#33__766" rel="nofollow">3.3 流提取</a></li><li><a href="#34__787" rel="nofollow">3.4 检查输入日期是否合法</a></li></ul> 
   </li><li><a href="#_810" rel="nofollow">四、日期类的实现【源码】</a></li><li><a href="#const_1072" rel="nofollow">五、const修饰</a></li><li><ul><li><a href="#51_const_1075" rel="nofollow">5.1 const成员函数</a></li><li><a href="#52__1141" rel="nofollow">5.2 小结一下：</a></li><li><a href="#53_const_1158" rel="nofollow">5.3 默认成员函数【取地址及const取地址操作符重载】</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="C_1"></a>一、【C++】赋值运算符重载</h3> 
<h4><a id="11__4"></a>1.1 运算符重载【引入】</h4> 
<ul><li>C++为了增强代码的可读性引入了<strong>运算符重载</strong>，运算符重载是具有特殊函数名的函数，也具有其返回值类型，函数名字以及参数列表，其返回值类型与参数列表与普通的函数类似。</li><li>函数名字为：<strong>关键字operator后面接需要重载的运算符符号。</strong></li><li>函数原型：<strong>返回值类型 operator操作符(参数列表)</strong></li></ul> 
<p>注意：</p> 
<ul><li> <p>不能通过连接其他符号来创建新的操作符：比如<code>operator@</code></p> </li><li> <p>重载操作符必须有一个类型参数【不能去重载运算符改变内置类型的行为】</p> </li><li> <p>用于内置类型的运算符，其含义不能改变，例如：内置的整型+，不 能改变其含义</p> </li><li> <p><strong>作为类成员函数重载时，其形参看起来比操作数数目少1个</strong>，因为成员函数的第一个参数为隐藏的<code>this</code></p> </li><li> <p><code>.* :: sizeof ?: . </code>注意以上5个运算符不能重载。这里的是<code>.*</code>，不是<code>*</code>，这里经常在笔试选择题中出现。</p> </li></ul> 
<hr> 
<p>当我们写了一个<strong>日期类</strong>，有没有可能要比较比较呢？</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//private: // 一会有解决方法</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>我们写了一个比较相等的函数，如果是传值的话没有必要，我们形参直接写成<code>&amp;</code>，而且也不需要修改，所以再加上<code>const</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">DateEquel</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> x<span class="token punctuation">.</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year
		<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month
		<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>_day <span class="token operator">==</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>下面再实现一个函数【比较小于】</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">DateLess</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_year <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_month <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_day <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>上面有一些不好的地方，取名字的问题，取得很乱就不知道这个函数是干什么的</li></ul> 
<hr> 
<blockquote> 
 <p>下面我就要用一个新的符号：</p> 
</blockquote> 
<h4><a id="12__89"></a>1.2 运算符重载</h4> 
<ul><li>这里的<strong>运算符重载</strong> 和<strong>函数重载</strong>的重载不是一个意思</li><li>对运算符的行为重新定义</li></ul> 
<blockquote> 
 <p><code>operator+</code>运算符做函数名</p> 
</blockquote> 
<ul><li>刚刚上面写的代码就可以写成下面这样</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">// 比较等于</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> x<span class="token punctuation">.</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year
		<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month
		<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>_day <span class="token operator">==</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 比较小于</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_year <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_month <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_day <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>就可以这样使用了</li></ul> 
<p><img src="https://images2.imgbox.com/d0/fc/iWkoVniB_o.png" alt="在这里插入图片描述"></p> 
<p>还可以这样做：</p> 
<ul><li>这里必须要加括号，因为流插入的优先级很高</li></ul> 
<p><img src="https://images2.imgbox.com/56/45/SxXgBeKA_o.png" alt="在这里插入图片描述"></p> 
<ul><li>注意：<strong>参数不能反，左边的操作数对应的是左边</strong></li></ul> 
<p><img src="https://images2.imgbox.com/25/6d/dBpRpm9e_o.png" alt="在这里插入图片描述"></p> 
<ul><li>我们再次回到上面，我们一开始是将内置类型放开的</li></ul> 
<p><img src="https://images2.imgbox.com/30/e6/Dn9emPj5_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果将他设置成私有，类外面就不能访问了</li></ul> 
<p><img src="https://images2.imgbox.com/ab/ad/7vbqpQAQ_o.png" alt="在这里插入图片描述"></p> 
<p>我们这里有三种解决方法：</p> 
<ul><li>第一种就是在类里面搞一个Get函数，这样获取【Java就是这样做的】</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> <span class="token function">GetYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _year<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>	
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>第二种方法就是将函数放到类里面</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> x<span class="token punctuation">.</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year
			<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month
			<span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>_day <span class="token operator">==</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> x<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_year <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_month <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_day <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>	
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>然后我们又发现，函数的参数太多了，因为成员函数有一个隐含的<code>this</code>指针</li></ul> 
<p><img src="https://images2.imgbox.com/93/10/ac160DSy_o.png" alt="在这里插入图片描述"></p> 
<p>下面进行修改：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year
			<span class="token operator">&amp;&amp;</span> _month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month
			<span class="token operator">&amp;&amp;</span> _day <span class="token operator">==</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>Date<span class="token operator">&amp;</span> y<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">==</span> y<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> y<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_day <span class="token operator">&lt;</span> y<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>	
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>我们使用就可以这样使用了</li></ul> 
<p><img src="https://images2.imgbox.com/99/08/tsa4DTkE_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>我们通过查看反汇编再来了解一下</p> </li><li> <p>首先看一下内置类型的比较，是通过指令集的支持</p> </li></ul> 
<p><img src="https://images2.imgbox.com/6d/82/uYHjsktA_o.png" alt="在这里插入图片描述"></p> 
<ul><li>再来看自定义类型</li><li>可以看到两种写法的汇编代码是一样的，编译器会先转化，会一步到位的</li></ul> 
<p><img src="https://images2.imgbox.com/53/56/dBlVp4yV_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="13__315"></a>1.3 赋值运算符重载</h4> 
<ul><li>我们接着写日期类，下面写一个赋值运算符</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
	_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
	_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/92/d1/JwLzvVI3_o.png" alt="在这里插入图片描述"></p> 
<ul><li>但是我们写的这个又遇到新的问题了，就是连续赋值是无法完成的</li></ul> 
<p><img src="https://images2.imgbox.com/52/21/bDT2ANGk_o.png" alt="在这里插入图片描述"></p> 
<ul><li>其实连续赋值就是右操作的返回值，做操作的值再进行赋值</li><li>返回类型用传引用返回，类型用引用，效率会提高<code>Date&amp;</code>，返回的就是<code>*this</code>，不是<code>this</code>，这是个指针</li></ul> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
	_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
	_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>但是有可能有人这样写代码：<code>d1 = d1</code></li></ul> 
<pre><code class="prism language-cpp">d1 <span class="token operator">=</span> d1
</code></pre> 
<ul><li>这里我们就可以加上一个判断，两个相等的话直接返回即可</li></ul> 
<h4><a id="14__357"></a>1.4 赋值</h4> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<ul><li> <p>那么我们不写这个赋值，编译器不会不会自动生成一个呢？—&gt;<code>会的！</code></p> </li><li> <p>因为这个是那6个默认成员函数之一</p> </li><li> <p>内置类型会值拷贝，自定义类型会调用它的拷贝</p> </li></ul> 
<p><img src="https://images2.imgbox.com/8e/04/MiirUXzF_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/8d/32/5ZToYy7u_o.png" alt="在这里插入图片描述"></p> 
<p>总结：</p> 
<ol><li> <p>赋值运算符重载格式</p> 
  <ul><li> <p>参数类型：<strong>const T&amp;</strong>，传递引用可以提高传参效率</p> </li><li> <p>返回值类型：T&amp;，返回引用可以提高返回的效率，有返回值目的是为了支持连续赋值</p> </li><li> <p>检测<strong>是否自己给自己赋值</strong></p> </li><li> <p>返回*<strong>this</strong> ：要复合连续赋值的含义</p> </li></ul> </li></ol> 
<hr> 
<ol start="2"><li> <p>赋值运算符只能重载成类的成员函数不能重载成全局函数</p> 
  <ul><li>赋值运算符重载成全局函数，注意重载成全局函数时没有this指针了，需要给两个参数</li></ul> </li></ol> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Date<span class="token operator">&amp;</span> left<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> right<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>left <span class="token operator">!=</span> <span class="token operator">&amp;</span>right<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		left<span class="token punctuation">.</span>_year <span class="token operator">=</span> right<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
		left<span class="token punctuation">.</span>_month <span class="token operator">=</span> right<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		left<span class="token punctuation">.</span>_day <span class="token operator">=</span> right<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>原因：赋值运算符如果不显式实现，编译器会生成一个默认的。此时用户再在类外自己实现一个全局的赋值运算符重载，就和编译器在类中生成的默认赋值运算符重载冲突了，故赋值运算符重载只能是类的成员函数。</p> 
<p><img src="https://images2.imgbox.com/5b/bf/YFjxV7MZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_423"></a>二、日期类的实现</h3> 
<ul><li>前面实现了一些逻辑，接下来我们就实现剩下的</li><li>所有代码在最后~~</li></ul> 
<hr> 
<h4><a id="21__431"></a>2.1 判断小于</h4> 
<ul><li>在上面已经说明了，这里就直接写出来了</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_day <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="22__461"></a>2.2 判断等于</h4> 
<ul><li><strong>直接判断相不相等</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year
		<span class="token operator">&amp;&amp;</span> _month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month
		<span class="token operator">&amp;&amp;</span> _day <span class="token operator">==</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="23__475"></a>2.3 判断小于等于</h4> 
<ul><li>上面实现了<strong>小于</strong>，下面我们来实现一下<strong>小于等于</strong></li><li>既然上面都写了小于和等于了，我们这里就可以<strong>直接复用</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;=</span> d <span class="token operator">||</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="24__487"></a>2.4 判断大于</h4> 
<ul><li>这里的大于不就是小于<strong>等于的取反</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;=</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="25__498"></a>2.5 判断大于等于</h4> 
<ul><li>大于等于就是<strong>小于取反</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="26__509"></a>2.6 判断不等于</h4> 
<ul><li>不等于就是<strong>等于的取反</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="27__521"></a>2.7 日期加等天数</h4> 
<h5><a id="_524"></a>首先要获取月份天数</h5> 
<ul><li>在实现日期加天数的时候我们需要再先实现一个获取月份天数</li><li>因为这里的获取月份天数需要被频繁调用，我们这里使用<code>inline</code>，可以不写【在类内声明同时定义的成员函数自动转化为内联函数】</li><li>我们还将数组使用<code>static</code>修饰，避免了频繁开辟空间</li><li>然后再判断闰年的时候我们把判断月份放到了前面，首先判断月份是否为2，为真就继续判断下面的，否则每次都要执行那么一长串的判断闰年</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span><span class="token keyword">int</span> month<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>month <span class="token operator">&lt;</span> <span class="token number">13</span> <span class="token operator">&amp;&amp;</span> month <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 放到静态区</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> MonthDays<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">// 先判断月份</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">4</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">400</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token number">29</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> MonthDays<span class="token punctuation">[</span>month<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然后继续实现：</p> 
<ul><li>首先加上天数，然后判断当前月的天数和加上的天数</li><li>然后进行减掉天数，月份+1，如果月份等于了13，年就+1，月份赋值为1</li></ul> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 这里就直接修改了</span>
	_day <span class="token operator">+=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>_day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_day <span class="token operator">-=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>_month<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">++</span>_year<span class="token punctuation">;</span>
			_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="28__567"></a>2.8 日期加天数</h4> 
<ul><li>上面是实现了+=，+也就很好实现了，这里只需要另外开一块空间，修改别的空间就不会影响我这里的值</li><li>这里<strong>不可以用引用返回</strong>，<code>tmp</code>是一个临时对象，必须用传值返回</li></ul> 
<pre><code class="prism language-cpp">Date <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	tmp<span class="token punctuation">.</span>_day <span class="token operator">+=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">,</span> tmp<span class="token punctuation">.</span>_month<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tmp<span class="token punctuation">.</span>_day <span class="token operator">-=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">,</span> tmp<span class="token punctuation">.</span>_month<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>tmp<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_month <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">++</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
			tmp<span class="token punctuation">.</span>_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>上面那个+和+=的代码相似，我们也可以复用一下</li></ul> 
<pre><code class="prism language-cpp">Date <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	tmp <span class="token operator">+=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<ul><li>上面的代码是+复用+=，那么我们也可以用+=复用+</li></ul> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+</span> day<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<ul><li>那么这两种写法哪一种比较好呢？</li></ul> 
<p><img src="https://images2.imgbox.com/bf/c9/HRZR2T4g_o.png" alt="在这里插入图片描述"></p> 
<ul><li>这里左边的更好，右边的会复用+，而+里面会创建临时对象</li></ul> 
<p><img src="https://images2.imgbox.com/a1/87/sPaFwFQS_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="29__631"></a>2.9 日期减等天数</h4> 
<ul><li>经过上面的思考，我们先实现<strong>减等</strong></li></ul> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">-=</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_day <span class="token operator">-=</span> day<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>_day <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">--</span>_month<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">--</span>_year<span class="token punctuation">;</span>
			_month <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_day <span class="token operator">+=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="210__655"></a>2.10 日期减天数</h4> 
<pre><code class="prism language-cpp">Date <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	tmp <span class="token operator">-=</span> day<span class="token punctuation">;</span>

	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="___668"></a>三、前置++ &amp;&amp; 后置++</h3> 
<ul><li>前置++很简单</li></ul> 
<pre><code class="prism language-cpp">Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>后置++要返回++后的值【这里要注意，后置++的操作符是有一个**<code>int</code>区分的**</li><li>后置++相比前置++的效率是低一些的</li></ul> 
<pre><code class="prism language-cpp">Date <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="31__693"></a>3.1 日期减日期【返回天数】</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	Date max <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	Date min <span class="token operator">=</span> d<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		max <span class="token operator">=</span> d<span class="token punctuation">;</span>
		min <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 相差天数</span>
	<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>min <span class="token operator">!=</span> max<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">++</span>min<span class="token punctuation">;</span>
		<span class="token operator">++</span>n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> n <span class="token operator">*</span> flag<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="32__718"></a>3.2 流插入</h4> 
<ul><li> <p>对于内置类型可以流插入，那么内置类型也可以流插入</p> </li><li> <p>对于流插入<code>cout</code>，对于库里面全局的<code>ostream</code>类型的对象 --&gt;<a href="https://cplusplus.com/reference/" rel="nofollow">cplusplus.com</a></p> </li></ul> 
<p><img src="https://images2.imgbox.com/15/1d/QkPkU4Ff_o.png" alt="在这里插入图片描述"></p> 
<ul><li>这里我们在使用的时候就反了，第一个被this占用了</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>作为成员函数重载，this指针占据第一个参数，Date必须是在操作数</li></ul> 
<p><img src="https://images2.imgbox.com/d0/bb/TPOfj0Sy_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>所以我们就必须让<code>ostream</code>占据第一个位置</p> </li><li> <p>想要占据第一个参数，就不能写成成员函数，就要写成全局函数</p> </li><li> <p>当我们写成全局函数的时候，不能访问类的私有了，这里也要后面的<strong>友元</strong></p> </li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>这里想要改成多个插入，我们返回值就要改一下</li></ul> 
<pre><code class="prism language-cpp">ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/ab/LgkogkMb_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="33__766"></a>3.3 流提取</h4> 
<ul><li>流提取是<code>cin</code></li></ul> 
<p><img src="https://images2.imgbox.com/b7/cd/tKEO8YUo_o.png" alt="在这里插入图片描述"></p> 
<ul><li>这里就不能使用<code>const</code>了</li></ul> 
<pre><code class="prism language-cpp">istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请依次输入年月日:&gt;"</span><span class="token punctuation">;</span>
	in <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token keyword">return</span> in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/11/a1/7wUJy5Rr_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="34__787"></a>3.4 检查输入日期是否合法</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">CheckInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;=</span> <span class="token number">0</span>
		<span class="token operator">||</span> _month <span class="token operator">&lt;</span> <span class="token number">1</span>
		<span class="token operator">||</span> _month <span class="token operator">&gt;</span> <span class="token number">12</span>
		<span class="token operator">||</span> _day <span class="token operator">&lt;</span> <span class="token number">1</span>
		<span class="token operator">||</span> _day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span>_month<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>这个时候把可以该检查的地方就检查一下</li></ul> 
<h3><a id="_810"></a>四、日期类的实现【源码】</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;assert.h&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// 构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1900</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">CheckInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"构造日期非法"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 判断等于</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year
			<span class="token operator">&amp;&amp;</span> _month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month
			<span class="token operator">&amp;&amp;</span> _day <span class="token operator">==</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 判断小于</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">==</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_day <span class="token operator">&lt;</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 判断小于等于</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;=</span> d <span class="token operator">||</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> d<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 判断大于</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;=</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 判断大于等于</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 判断不等于</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 日期加等天数</span>

	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_day <span class="token operator">+=</span> day<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>_day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_day <span class="token operator">-=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>_month<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token operator">++</span>_year<span class="token punctuation">;</span>
				_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Date <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Date <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//Date tmp = *this;</span>
		tmp <span class="token operator">+=</span> day<span class="token punctuation">;</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 日期加天数</span>
	Date <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Date <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tmp<span class="token punctuation">.</span>_day <span class="token operator">+=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>d<span class="token punctuation">.</span>_day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">,</span> tmp<span class="token punctuation">.</span>_month<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			tmp<span class="token punctuation">.</span>_day <span class="token operator">-=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">,</span> tmp<span class="token punctuation">.</span>_month<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>tmp<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_month <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token operator">++</span>tmp<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
				tmp<span class="token punctuation">.</span>_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 日期-=天数</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">-=</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_day <span class="token operator">-=</span> day<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>_day <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">--</span>_month<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_month <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token operator">--</span>_year<span class="token punctuation">;</span>
				_month <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_day <span class="token operator">+=</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span> _month<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 日期减天数</span>
	Date <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		tmp <span class="token operator">-=</span> day<span class="token punctuation">;</span>

		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 前置++</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 后置++</span>
	Date <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Date tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 日期-日期</span>
	<span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		Date max <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		Date min <span class="token operator">=</span> d<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&lt;</span> d<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
			max <span class="token operator">=</span> d<span class="token punctuation">;</span>
			min <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>min <span class="token operator">!=</span> max<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">++</span>min<span class="token punctuation">;</span>
			<span class="token operator">++</span>n<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> n <span class="token operator">*</span> flag<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 获取月份天数[可以不写inline，类里默认就是]</span>
	<span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">assert</span><span class="token punctuation">(</span>month <span class="token operator">&lt;</span> <span class="token number">13</span> <span class="token operator">&amp;&amp;</span> month <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 放到静态区</span>
		<span class="token keyword">static</span> <span class="token keyword">int</span> MonthDays<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">// 先判断月份</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>month <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">4</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>year <span class="token operator">%</span> <span class="token number">400</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token number">29</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> MonthDays<span class="token punctuation">[</span>month<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 拷贝构造</span>
	Date<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>d<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_year <span class="token operator">=</span> d<span class="token punctuation">.</span>_year<span class="token punctuation">;</span>
			_month <span class="token operator">=</span> d<span class="token punctuation">.</span>_month<span class="token punctuation">;</span>
			_day <span class="token operator">=</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">friend</span> istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">bool</span> <span class="token function">CheckInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_year <span class="token operator">&lt;=</span> <span class="token number">0</span>
			<span class="token operator">||</span> _month <span class="token operator">&lt;</span> <span class="token number">1</span>
			<span class="token operator">||</span> _month <span class="token operator">&gt;</span> <span class="token number">12</span>
			<span class="token operator">||</span> _day <span class="token operator">&lt;</span> <span class="token number">1</span>
			<span class="token operator">||</span> _day <span class="token operator">&gt;</span> <span class="token function">GetMonthDay</span><span class="token punctuation">(</span>_year<span class="token punctuation">,</span>_month<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	out <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"年"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"月"</span> <span class="token operator">&lt;&lt;</span> d<span class="token punctuation">.</span>_day <span class="token operator">&lt;&lt;</span> <span class="token string">"日"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> Date<span class="token operator">&amp;</span> d<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请依次输入年月日:&gt;"</span><span class="token punctuation">;</span>
		in <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_year <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_month <span class="token operator">&gt;&gt;</span> d<span class="token punctuation">.</span>_day<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>d<span class="token punctuation">.</span><span class="token function">CheckInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输入非法日期，请重新输入"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="const_1072"></a>五、const修饰</h3> 
<h4><a id="51_const_1075"></a>5.1 const成员函数</h4> 
<ul><li>将<code>const</code>修饰的“成员函数”称之为<code>const</code>成员函数，<code>const</code>修饰类成员函数，实际修饰该成员函数隐含的<code>this指针</code>，表明在该成员函数中不能对类的任何成员进行修改。</li></ul> 
<p><img src="https://images2.imgbox.com/c3/e7/AH19qxDi_o.png" alt="在这里插入图片描述"></p> 
<ul><li>我们看下面这段代码</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Print()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"year:"</span> <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"month:"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"day:"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Print()const"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"year:"</span> <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"month:"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"day:"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span> <span class="token comment">// 年</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span> <span class="token comment">// 月</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span> <span class="token comment">// 日</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>这里会出现一个权限放大的问题</li></ul> 
<p><img src="https://images2.imgbox.com/6a/50/SvNgaFTe_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>那么在参数就需要改成<code>const Date*</code></p> </li><li> <p>为了解决这个问题，我们就要在函数后面的位置加上一个<code>const</code></p> </li><li> <p>修饰的是<strong>this指针</strong>指向的内容</p> </li></ul> 
<p><img src="https://images2.imgbox.com/4e/47/C8aSsUVj_o.png" alt="在这里插入图片描述"></p> 
<ul><li>那么不是下面方法调用也是可以的，因为这个是权限的缩小</li></ul> 
<p><img src="https://images2.imgbox.com/f6/bc/1blRwsuc_o.png" alt="在这里插入图片描述"></p> 
<ul><li><code>const</code>对象可以调用，非<code>const</code>对象也可以调用</li></ul> 
<hr> 
<ul><li>那么全部函数都可以加上<code>const</code>吗？—&gt;不可以！</li><li>如果函数内部要被修改，那肯定是不能加的</li><li><em>上面写的日期类的部分函数也可以加上~~</em></li></ul> 
<hr> 
<h4><a id="52__1141"></a>5.2 小结一下：</h4> 
<ul><li> <p><strong>成员函数</strong>如果是一个对成员变量只进行<strong>读</strong>访问的函数，<strong>建议加上<code>const</code></strong>，这样const对象和<code>非const</code>对象都可以访问</p> </li><li> <p><strong>成员函数</strong>如果是一个对成员变量进行<strong>读写</strong>访问的函数，<strong>不可以加上const</strong>，否则不能修改成员变量</p> </li></ul> 
<ol><li><code>const</code>对象可以调用<code>非const</code>成员函数吗？ --&gt; 不可以！【权限放大】</li><li><code>非const</code>对象可以调用<code>const</code>成员函数吗？–&gt; 可以！【权限缩小】</li><li><code>const</code>成员函数内可以调用其它的<code>非const</code>成员函数吗？–&gt; 不可以！【权限放大】</li><li><code>非const</code>成员函数内可以调用其它的<code>const</code>成员函数吗？–&gt; 可以！【权限缩小】</li></ol> 
<h4><a id="53_const_1158"></a>5.3 默认成员函数【取地址及const取地址操作符重载】</h4> 
<ul><li>前面章节学习了4个默认成员函数了，剩下两个再看一下</li></ul> 
<p><img src="https://images2.imgbox.com/09/0d/cSnIQFnP_o.png" alt="在这里插入图片描述"></p> 
<ul><li>这两个默认成员函数一般不用重新定义 ，编译器默认会生成。</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	Date<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">const</span> Date<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span> <span class="token comment">// 年</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span> <span class="token comment">// 月</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span> <span class="token comment">// 日</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>比如说不想让别人拿到我的地址，<strong>普通对象返回空，<code>const</code>对象返回假地址</strong></li><li>就可以这样写：</li></ul> 
<pre><code class="prism language-cpp">Date<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> Date<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">const</span> A<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>这两个运算符一般不需要重载，使用编译器生成的默认取地址的重载即可，只有特殊情况，才需要重载，比如想让别人获取到指定的内容！</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00e4061de8eb3d7aac2fbcc643d43ee6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python酷库之旅-第三方库Pandas(010)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6a2839e3b3c1575b452dff2e05b446c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【前端】css控制背景图片缩放</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>