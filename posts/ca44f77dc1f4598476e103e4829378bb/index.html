<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>初识指针（5）＜C语言＞ - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ca44f77dc1f4598476e103e4829378bb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="初识指针（5）＜C语言＞">
  <meta property="og:description" content="前言 在前几篇文章中，已经介绍了指针一些基本概念、用途和一些不同类型的指针，下文将介绍某些指针类型的运用。本文主要介绍函数指针数组、转移表（函数指针的用途）、回调函数、qsort使用举例等。
函数指针数组 函数指针数组即每个元素都是函数地址的数组。
//函数指针数组 int jia(int x, int y) {//加法函数 return x &#43; y; } int jian(int x, int y) {//减法函数 return x - y; } int cheng(int x, int y) {//乘法函数 return x * y; } int chu(int x, int y) {//除法函数 return x / y; } int main() { int (*p[4]) (int, int) = {jia,jian,cheng,chu}; //保证p与[]先结合成数组，之后再与*结合，构成指针数组，最后再和函数结合 return 0; } 转移表（函数指针的用途） 假如我们写个程序完成对两个数之间的简单数学运算（加减乘除），按照正常的写法，选择一种计算后进入判断环节，之后再输入数字，这样写每一种运算下都会有代码重复，有没有办法简化代码呢？
回调函数 即一个通过函数指针调用的函数。
通过回调函数，可以消除特定场景中因为多分支造成的重复代码，例如：一个实现加减乘除的程序中，每个分支下都有一种运算，每个运算可写成一个函数，我们可以再写一个函数将每种分支下的重复代码包含进去，通过传入函数指针来调用运算函数，从而完成运算。
//回调函数 int jia(int x, int y) { return x &#43; y; } int jian(int x, int y) { return x - y; } int cheng(int x, int y) { return x * y; } int chu(int x, int y) { return x / y; } void menu() { printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-13T14:51:00+08:00">
    <meta property="article:modified_time" content="2024-05-13T14:51:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">初识指针（5）＜C语言＞</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>前言</h4> 
<p>        在前几篇文章中，已经介绍了指针一些基本概念、用途和一些不同类型的指针，下文将介绍某些指针类型的运用。本文主要介绍函数指针数组、转移表（函数指针的用途）、回调函数、qsort使用举例等。</p> 
<hr> 
<h4>函数指针数组</h4> 
<p>        函数指针数组即每个元素都是函数地址的数组。</p> 
<pre><code class="language-cpp">//函数指针数组
int jia(int x, int y) {//加法函数
	return x + y;
}
int jian(int x, int y) {//减法函数
	return x - y;
}
int cheng(int x, int y) {//乘法函数
	return x * y;
}
int chu(int x, int y) {//除法函数
	return x / y;
}
int main() {
	int (*p[4]) (int, int) = {jia,jian,cheng,chu};
	//保证p与[]先结合成数组，之后再与*结合，构成指针数组，最后再和函数结合
	return 0;
}</code></pre> 
<hr> 
<h4> 转移表（函数指针的用途）</h4> 
<p>        假如我们写个程序完成对两个数之间的简单数学运算（加减乘除），按照正常的写法，选择一种计算后进入判断环节，之后再输入数字，这样写每一种运算下都会有代码重复，有没有办法简化代码呢？</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/af/e4/WGiU677a_o.png"></p> 
<hr> 
<h4>回调函数</h4> 
<p>        即一个通过函数指针调用的函数。</p> 
<p>        通过回调函数，可以消除特定场景中因为多分支造成的重复代码，例如：一个实现加减乘除的程序中，每个分支下都有一种运算，每个运算可写成一个函数，我们可以再写一个函数将每种分支下的重复代码包含进去，通过传入函数指针来调用运算函数，从而完成运算。</p> 
<pre><code class="language-cpp">//回调函数
int jia(int x, int y) {
	return x + y;
}
int jian(int x, int y) {
	return x - y;
}
int cheng(int x, int y) {
	return x * y;
}
int chu(int x, int y) {
	return x / y;
}
void menu() {
	printf("**********************\n");
	printf("***1.加法   2.减法****\n");
	printf("***3.乘法   4.除法****\n");
	printf("***    0.exit     ****\n");
	printf("**********************\n");
}
int hui(int(*p)(int, int)) {
	int x, y;
	printf("请输入操作数\n");
	scanf("%d%d", &amp;x, &amp;y);
	return p(x, y);
}
int main() {
	int i, x, y,ret;
	do {
		menu();
		printf("请选择—&gt;");
		scanf("%d", &amp;i);
		switch (i) {
		case 1:
			ret = hui(jia);
			printf("%d\n", ret);
			break;
		case 2:
			ret = hui(jian);
			printf("%d\n", ret);
			break;
		case 3:
			ret = hui(cheng);
			printf("%d\n", ret);
			break;
		case 4:
			ret = hui(chu);
			printf("%d\n", ret);
			break;
		case 0:
			printf("退出计算\n");
			break;
		default:
			printf("输入错误，重新输入\n");
			break;
		}
	} while (i);
	return 0;
}</code></pre> 
<hr> 
<h4>qsort使用举例</h4> 
<p>        qsort函数是C语言的库函数，包含在&lt;stdlib.h&gt;头文件中，它可用于对所有数据类型进行排序，包括结构体，使用这个库函数，必须再写个比较元素的函数，返回int型（大于0：大于、等于0：等于、小于0：小于），默认升序，如要进行逆序输出，则在比较函数中，交换操作数的位置。</p> 
<h5>排序整型数组</h5> 
<pre><code class="language-cpp">//qsort函数,排序整型数组
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
int  intcmp (const void* p1, const void* p2) {//比较函数，两个元素的比较
	return (*(int*)p1) - (*(int*)p2);
}
int main() {
	int arr[6] = { 3,6,2,0,3,8 };
	int sz = sizeof(arr) / sizeof(arr[1]);
	qsort(arr,//数据类型void*base,用于接受待排序的数组的数组名，也就是首元素的地址
		sz,//数据类型sizeof_t，待排序数组的元素个数
		sizeof(arr[0]),//数据类型sizeof_t,待排序数组元素字节大小
		intcmp);
//数据类型 int(*) (const void*,const void*),用于接收俩个元素比较的函数，
//返回值：大于0（表示大于），等于0（等于），小于0（小于）
	for (int i = 0; i &lt; sz; i++) {
		printf("%d ", arr[i]);
	}
	return 0;
}</code></pre> 
<p>运行结果：</p> 
<h5 style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c6/1c/RrMfQPzh_o.png"></h5> 
<h5>排序结构体</h5> 
<p>按字符排</p> 
<pre><code class="language-cpp">//qsort函数,结构体
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
struct stu {
	char name[100];
	int  age;
	int  height;
};
int namecmp(const void* p1, const void* p2) {//按名称排
	return strcmp((*(struct stu*)p1).name, (*(struct stu*)p2).name);
}
int main() {
	struct stu arr[] = { {"zk",18,163},{"tian",19,180},{"xing",17,170} };
	int sz = sizeof(arr) / sizeof(arr[1]);
	qsort(arr,sz,sizeof(arr[0]),namecmp);
	for (int i = 0; i &lt; sz; i++) {
		printf("%s %d %d\n", arr[i].name, arr[i].age, arr[i].height);
	}
	return 0;
}</code></pre> 
<p>运行结果</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/84/6f/unVtqi5A_o.png"></p> 
<p> 按照整形排</p> 
<pre><code class="language-cpp">//qsort函数,结构体
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
struct stu {
	char name[100];
	int  age;
	int  height;
};
//int namecmp(const void* p1, const void* p2) {//按名称排
//	return strcmp((*(struct stu*)p1).name, (*(struct stu*)p2).name);
//}
int agecmp(const void* p1, const void* p2) {//按照年龄排
	return (*(struct stu*)p1).age - (*(struct stu*)p2).age;
}
int main() {
	struct stu arr[] = { {"zk",18,163},{"tian",19,180},{"xing",17,170} };
	int sz = sizeof(arr) / sizeof(arr[1]);
	qsort(arr,sz,sizeof(arr[0]),agecmp);
	for (int i = 0; i &lt; sz; i++) {
		printf("%s %d %d\n", arr[i].name, arr[i].age, arr[i].height);
	}
	return 0;
}</code></pre> 
<p> 运行结果</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4a/e0/VL6nmE3T_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/da17a76925c31966e76012c45bcc4293/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iOS 面试题总结（可能是最全的！！！）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5dfc7c4df3276cc3f32f4a38637b118a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2024年前端最新Nginx入门知识【Nginx介绍，下载安装，基础命令，配置，具体应用，2024年最新大数据高频面试题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>