<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL导入/导出数据 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f0f23df2327715b1453d44377def205b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL导入/导出数据">
  <meta property="og:description" content="MySQL导入/导出数据 文章目录 MySQL导入/导出数据一、MySQL 导入数据1、mysql 命令导入2、source 命令导入3、使用 LOAD DATA 导入数据4、使用 mysqlimport 导入数据4.1、mysqlimport的常用选项介绍 二、MySQL 导出数据1、使用 SELECT ... INTO OUTFILE 语句导出数据2、mysqldump 导出表作为原始数据2.1、mysqldump 实例1. 导出整个数据库2. 导出特定表3. 导出数据库结构4. 导出压缩文件5.导出 SQL 格式的数据 3、将数据表及数据库拷贝至其他主机 一、MySQL 导入数据 1、mysql 命令导入 使用 mysql 命令导入语法格式为：
mysql -u your_username -p -h your_host -P your_port -D your_database your_username、your_host、your_port、your_database 分别为你的 MySQL 用户名、主机、端口和数据库。
实例：
# mysql -uroot -p123456 &lt; runoob.sql 以上命令将将备份的整个数据库 runoob.sql 导入。
执行上述命令后，系统将要求输入 MySQL 用户的密码。输入密码并按Enter键。
这样，MySQL 将执行 SQL 文件中的语句，将数据导入到指定的数据库中。
请注意，如果 SQL 文件包含创建数据库的语句，确保在执行导入之前数据库已经存在。如果文件包含创建表的语句，确保表不存在或者是空的，以免导入数据时发生冲突。
2、source 命令导入 source 命令导入数据库需要先登录到数库终端：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-17T18:54:46+08:00">
    <meta property="article:modified_time" content="2024-02-17T18:54:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL导入/导出数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MySQL_0"></a>MySQL导入/导出数据</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#MySQL_0" rel="nofollow">MySQL导入/导出数据</a></li><li><ul><li><a href="#MySQL__3" rel="nofollow">一、MySQL 导入数据</a></li><li><ul><li><a href="#1mysql__5" rel="nofollow">1、mysql 命令导入</a></li><li><a href="#2source__29" rel="nofollow">2、source 命令导入</a></li><li><a href="#3_LOAD_DATA__42" rel="nofollow">3、使用 LOAD DATA 导入数据</a></li><li><a href="#4_mysqlimport__73" rel="nofollow">4、使用 mysqlimport 导入数据</a></li><li><ul><li><a href="#41mysqlimport_100" rel="nofollow">4.1、mysqlimport的常用选项介绍</a></li></ul> 
   </li></ul> 
   </li><li><a href="#MySQL__115" rel="nofollow">二、MySQL 导出数据</a></li><li><ul><li><a href="#1_SELECT__INTO__OUTFILE__119" rel="nofollow">1、使用 SELECT ... INTO OUTFILE 语句导出数据</a></li><li><a href="#2mysqldump__185" rel="nofollow">2、mysqldump 导出表作为原始数据</a></li><li><ul><li><a href="#21mysqldump__215" rel="nofollow">2.1、mysqldump 实例</a></li><li><ul><li><a href="#1__217" rel="nofollow">1. 导出整个数据库</a></li><li><a href="#2__225" rel="nofollow">2. 导出特定表</a></li><li><a href="#3__239" rel="nofollow">3. 导出数据库结构</a></li><li><a href="#4__247" rel="nofollow">4. 导出压缩文件</a></li><li><a href="#5_SQL__255" rel="nofollow">5.导出 SQL 格式的数据</a></li></ul> 
    </li></ul> 
    </li><li><a href="#3_316" rel="nofollow">3、将数据表及数据库拷贝至其他主机</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="MySQL__3"></a>一、MySQL 导入数据</h3> 
<h4><a id="1mysql__5"></a>1、mysql 命令导入</h4> 
<p>使用 mysql 命令导入语法格式为：</p> 
<pre><code class="prism language-mysql">mysql -u your_username -p -h your_host -P your_port -D your_database
</code></pre> 
<p>your_username、your_host、your_port、your_database 分别为你的 MySQL 用户名、主机、端口和数据库。</p> 
<p>实例：</p> 
<pre><code class="prism language-mysql"># mysql -uroot -p123456 &lt; runoob.sql
</code></pre> 
<p>以上命令将将备份的整个数据库 runoob.sql 导入。</p> 
<p>执行上述命令后，系统将要求输入 MySQL 用户的密码。输入密码并按Enter键。</p> 
<p>这样，MySQL 将执行 SQL 文件中的语句，将数据导入到指定的数据库中。</p> 
<p>请注意，如果 SQL 文件包含创建数据库的语句，确保在执行导入之前数据库已经存在。如果文件包含创建表的语句，确保表不存在或者是空的，以免导入数据时发生冲突。</p> 
<h4><a id="2source__29"></a>2、source 命令导入</h4> 
<p>source 命令导入数据库需要先登录到数库终端：</p> 
<pre><code class="prism language-mysql">mysql&gt; create database abc;      # 创建数据库
mysql&gt; use abc;                  # 使用已创建的数据库 
mysql&gt; set names utf8;           # 设置编码
mysql&gt; source /home/abc/abc.sql  # 导入备份数据库
</code></pre> 
<p>使用 source 命令的好处是，你可以在 MySQL 命令行中直接执行，而无需退出 MySQL 并使用其他命令。</p> 
<h4><a id="3_LOAD_DATA__42"></a>3、使用 LOAD DATA 导入数据</h4> 
<p>MySQL 中提供了LOAD DATA INFILE语句来插入数据。 以下实例中将从当前目录中读取文件 dump.txt ，将该文件中的数据插入到当前数据库的 mytbl 表中。</p> 
<pre><code class="prism language-mysql">mysql&gt; LOAD DATA LOCAL INFILE 'dump.txt' INTO TABLE mytbl;
</code></pre> 
<p>如果指定LOCAL关键词，则表明从客户主机上按路径读取文件。如果没有指定，则文件在服务器上按路径读取文件。</p> 
<p>你能明确地在LOAD DATA语句中指出列值的分隔符和行尾标记，但是默认标记是定位符和换行符。</p> 
<p>两个命令的 FIELDS 和 LINES 子句的语法是一样的。两个子句都是可选的，但是如果两个同时被指定，FIELDS 子句必须出现在 LINES 子句之前。</p> 
<p>如果用户指定一个 FIELDS 子句，它的子句 （TERMINATED BY、[OPTIONALLY] ENCLOSED BY 和 ESCAPED BY) 也是可选的，不过，用户必须至少指定它们中的一个。</p> 
<pre><code class="prism language-mysql">mysql&gt; LOAD DATA LOCAL INFILE 'dump.txt' INTO TABLE mytbl
  -&gt; FIELDS TERMINATED BY ':'
  -&gt; LINES TERMINATED BY '\r\n';
</code></pre> 
<p>LOAD DATA 默认情况下是按照数据文件中列的顺序插入数据的，如果数据文件中的列与插入表中的列不一致，则需要指定列的顺序。</p> 
<p>如，在数据文件中的列顺序是 a,b,c，但在插入表的列顺序为b,c,a，则数据导入语法如下：</p> 
<pre><code class="prism language-mysql">mysql&gt; LOAD DATA LOCAL INFILE 'dump.txt' 
    -&gt; INTO TABLE mytbl (b, c, a);
</code></pre> 
<h4><a id="4_mysqlimport__73"></a>4、使用 mysqlimport 导入数据</h4> 
<p>mysqlimport 客户端提供了 LOAD DATA INFILEQL 语句的一个命令行接口。mysqlimport 的大多数选项直接对应 LOAD DATA INFILE 子句。</p> 
<p>从文件 dump.txt 中将数据导入到 mytbl 数据表中, 可以使用以下命令：</p> 
<pre><code class="prism language-mysql">$ mysqlimport -u root -p --local mytbl dump.txt
password *****
</code></pre> 
<p>mysqlimport 命令可以指定选项来设置指定格式,命令语句格式如下：</p> 
<pre><code class="prism language-mysql">$ mysqlimport -u root -p --local --fields-terminated-by=":" \
   --lines-terminated-by="\r\n"  mytbl dump.txt
password *****
</code></pre> 
<p>mysqlimport 语句中使用 --columns 选项来设置列的顺序：</p> 
<pre><code class="prism language-mysql">$ mysqlimport -u root -p --local --columns=b,c,a \
    mytbl dump.txt
password *****
</code></pre> 
<h5><a id="41mysqlimport_100"></a>4.1、mysqlimport的常用选项介绍</h5> 
<table><thead><tr><th align="left">选项</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left">-d or --delete</td><td align="left">新数据导入数据表中之前删除数据数据表中的所有信息</td></tr><tr><td align="left">-f or --force</td><td align="left">不管是否遇到错误，mysqlimport将强制继续插入数据</td></tr><tr><td align="left">-i or --ignore</td><td align="left">mysqlimport跳过或者忽略那些有相同唯一 关键字的行， 导入文件中的数据将被忽略。</td></tr><tr><td align="left">-l or -lock-tables</td><td align="left">数据被插入之前锁住表，这样就防止了， 你在更新数据库时，用户的查询和更新受到影响。</td></tr><tr><td align="left">-r or -replace</td><td align="left">这个选项与－i选项的作用相反；此选项将替代 表中有相同唯一关键字的记录。</td></tr><tr><td align="left">–fields-enclosed- by= char</td><td align="left">指定文本文件中数据的记录时以什么括起的， 很多情况下 数据以双引号括起。 默认的情况下数据是没有被字符括起的。</td></tr><tr><td align="left">–fields-terminated- by=char</td><td align="left">指定各个数据的值之间的分隔符，在句号分隔的文件中， 分隔符是句号。您可以用此选项指定数据之间的分隔符。 默认的分隔符是跳格符（Tab）</td></tr><tr><td align="left">–lines-terminated- by=str</td><td align="left">此选项指定文本文件中行与行之间数据的分隔字符串 或者字符。 默认的情况下mysqlimport以newline为行分隔符。 您可以选择用一个字符串来替代一个单个的字符： 一个新行或者一个回车。</td></tr></tbody></table> 
<p>mysqlimport 命令常用的选项还有 -v 显示版本（version）， -p 提示输入密码（password）等。</p> 
<h3><a id="MySQL__115"></a>二、MySQL 导出数据</h3> 
<p>MySQL 中可以使用 <strong>SELECT…INTO OUTFILE</strong> 语句来简单的导出数据到文本文件上。</p> 
<h4><a id="1_SELECT__INTO__OUTFILE__119"></a>1、使用 SELECT … INTO OUTFILE 语句导出数据</h4> 
<p><strong>SELECT…INTO OUTFILE</strong> 是 MySQL 中用于将查询结果导出到文件的语法。</p> 
<p><strong>SELECT…INTO OUTFILE</strong> 允许你将查询的结果写入一个文本文件，基本的使用方法：</p> 
<pre><code class="prism language-mysql">SELECT column1, column2, ...
INTO OUTFILE 'file_path'
FROM your_table
WHERE your_conditions;
</code></pre> 
<p>参数说明：</p> 
<ul><li><code>column1, column2, ...</code>: 要选择的列。</li><li><code>'file_path'</code>: 指定输出文件的路径和名称。</li><li><code>your_table</code>: 要查询的表。</li><li><code>your_conditions</code>: 查询条件。</li></ul> 
<p>以下是一个简单的实例：</p> 
<pre><code class="prism language-mysql">SELECT id, name, email
INTO OUTFILE '/tmp/user_data.csv'
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
FROM users;
</code></pre> 
<p>在以上 SQL 语句中，我们从 users 表中选择了 id、name 和 email 列，并将结果写入了 /tmp/user_data.csv 文件。FIELDS TERMINATED BY ‘,’ 指定了列之间的分隔符（逗号），LINES TERMINATED BY ‘\n’ 指定了行之间的分隔符（换行符）。</p> 
<p>需要注意的是，执行 <strong>SELECT…INTO OUTFILE</strong> 需要相应的权限，并且输出文件的目录需要是 MySQL 服务器可以写入的地方。</p> 
<p>以下实例中我们将数据表 runoob_tbl 数据导出到 /tmp/runoob.txt 文件中:</p> 
<pre><code class="prism language-mysql">mysql&gt; SELECT * FROM runoob_tbl 
    -&gt; INTO OUTFILE '/tmp/runoob.txt';
</code></pre> 
<p>你可以通过命令选项来设置数据输出的指定格式，以下实例为导出 CSV 格式：</p> 
<pre><code class="prism language-mysql">mysql&gt; SELECT * FROM passwd INTO OUTFILE '/tmp/runoob.txt'
    -&gt; FIELDS TERMINATED BY ',' ENCLOSED BY '"'
    -&gt; LINES TERMINATED BY '\r\n';
</code></pre> 
<p>在下面的例子中，生成一个文件，各值用逗号隔开。这种格式可以被许多程序使用。</p> 
<pre><code class="prism language-mysql">SELECT a,b,a+b INTO OUTFILE '/tmp/result.text'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
FROM test_table;
</code></pre> 
<p>SELECT … INTO OUTFILE 语句有以下属性:</p> 
<ul><li>LOAD DATA INFILE是SELECT … INTO OUTFILE的逆操作，SELECT句法。为了将一个数据库的数据写入一个文件，使用SELECT … INTO OUTFILE，为了将文件读回数据库，使用LOAD DATA INFILE。</li><li>SELECT…INTO OUTFILE 'file_name’形式的SELECT可以把被选择的行写入一个文件中。该文件被创建到服务器主机上，因此您必须拥有FILE权限，才能使用此语法。</li><li>输出不能是一个已存在的文件。防止文件数据被篡改。</li><li>你需要有一个登陆服务器的账号来检索文件。否则 SELECT … INTO OUTFILE 不会起任何作用。</li><li>在UNIX中，该文件被创建后是可读的，权限由MySQL服务器所拥有。这意味着，虽然你就可以读取该文件，但可能无法将其删除。</li></ul> 
<h4><a id="2mysqldump__185"></a>2、mysqldump 导出表作为原始数据</h4> 
<p>mysqldump 是 MySQL 提供的用于备份和导出数据库的命令行工具。</p> 
<p><strong>mysqldump</strong> 是 mysql 用于转存储数据库的实用程序。它主要产生一个 SQL 脚本，其中包含从头重新创建数据库所必需的命令 CREATE TABLE INSERT 等。</p> 
<p>使用 <strong>mysqldump</strong> 导出数据需要使用 <strong>–tab</strong> 选项来指定导出文件指定的目录，该目标必须是可写的。</p> 
<p>mysqldump 基本的用法：</p> 
<pre><code class="prism language-mysql">mysqldump -u username -p password -h hostname database_name &gt; output_file.sql
</code></pre> 
<p>参数说明：</p> 
<ul><li><code>-u</code>: 指定 MySQL 用户名。</li><li><code>-p</code>: 提示输入密码。</li><li><code>-h</code>: 指定 MySQL 主机名。</li><li><code>database_name</code>: 要导出的数据库名称。</li><li><code>output_file.sql</code>: 导出数据保存到的文件。</li></ul> 
<p>以下实例将数据表 runoob_tbl 导出到 /tmp 目录中：</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p --no-create-info \
            --tab=/tmp RUNOOB runoob_tbl
password ******
</code></pre> 
<h5><a id="21mysqldump__215"></a>2.1、mysqldump 实例</h5> 
<h6><a id="1__217"></a>1. 导出整个数据库</h6> 
<p>导出 mydatabase 数据库到 mydatabase_backup.sql 文件：</p> 
<pre><code class="prism language-mysql">mysqldump -u root -p mydatabase &gt; mydatabase_backup.sql
</code></pre> 
<h6><a id="2__225"></a>2. 导出特定表</h6> 
<p>如果你只想导出数据库中的某个表，可以使用以下命令：</p> 
<pre><code class="prism language-mysql">mysqldump -u username -p password -h hostname database_name table_name &gt; output_file.sql
</code></pre> 
<p>或：</p> 
<pre><code class="prism language-mysql">mysqldump -u root -p mydatabase mytable &gt; mytable_backup.sql
</code></pre> 
<h6><a id="3__239"></a>3. 导出数据库结构</h6> 
<p>如果只想导出数据库结构而不包括数据，可以使用 <strong>–no-data</strong> 选项：</p> 
<pre><code class="prism language-mysql">mysqldump -u username -p password -h hostname --no-data database_name &gt; output_file.sql
</code></pre> 
<h6><a id="4__247"></a>4. 导出压缩文件</h6> 
<p>你可以将导出的数据进行压缩，以减小文件大小。例如，使用 gzip：</p> 
<pre><code class="prism language-mysql">mysqldump -u username -p password -h hostname database_name | gzip &gt; output_file.sql.gz
</code></pre> 
<h6><a id="5_SQL__255"></a>5.导出 SQL 格式的数据</h6> 
<p>导出 SQL 格式的数据到指定文件，如下所示：</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p RUNOOB runoob_tbl &gt; dump.txt
password ******
</code></pre> 
<p>以上命令创建的文件内容如下：</p> 
<pre><code class="prism language-mysql">-- MySQL dump 8.23
--
-- Host: localhost    Database: RUNOOB
---------------------------------------------------------
-- Server version       3.23.58

--
-- Table structure for table `runoob_tbl`
--

CREATE TABLE runoob_tbl (
  runoob_id int(11) NOT NULL auto_increment,
  runoob_title varchar(100) NOT NULL default '',
  runoob_author varchar(40) NOT NULL default '',
  submission_date date default NULL,
  PRIMARY KEY  (runoob_id),
  UNIQUE KEY AUTHOR_INDEX (runoob_author)
) TYPE=MyISAM;

--
-- Dumping data for table `runoob_tbl`
--

INSERT INTO runoob_tbl 
       VALUES (1,'Learn PHP','John Poul','2007-05-24');
INSERT INTO runoob_tbl 
       VALUES (2,'Learn MySQL','Abdul S','2007-05-24');
INSERT INTO runoob_tbl 
       VALUES (3,'JAVA Tutorial','Sanjay','2007-05-06');
</code></pre> 
<p>如果你需要导出整个数据库的数据，可以使用以下命令：</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p RUNOOB &gt; database_dump.txt
password ******
</code></pre> 
<p>如果需要备份所有数据库，可以使用以下命令：</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p --all-databases &gt; database_dump.txt
password ******
</code></pre> 
<p>–all-databases 选项在 MySQL 3.23.12 及以后版本加入。</p> 
<p>该方法可用于实现数据库的备份策略。</p> 
<h4><a id="3_316"></a>3、将数据表及数据库拷贝至其他主机</h4> 
<p>如果你需要将数据拷贝至其他的 MySQL 服务器上, 你可以在 mysqldump 命令中指定数据库名及数据表。</p> 
<p>在源主机上执行以下命令，将数据备份至 dump.txt 文件中:</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p database_name table_name &gt; dump.txt
password *****
</code></pre> 
<p>如果完整备份数据库，则无需使用特定的表名称。</p> 
<p>如果你需要将备份的数据库导入到MySQL服务器中，可以使用以下命令，使用以下命令你需要确认数据库已经创建：</p> 
<pre><code class="prism language-mysql">$ mysql -u root -p database_name &lt; dump.txt
password *****
</code></pre> 
<p>你也可以使用以下命令将导出的数据直接导入到远程的服务器上，但请确保两台服务器是相通的，是可以相互访问的：</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p database_name \
       | mysql -h other-host.com database_name
</code></pre> 
<p>以上命令中使用了管道来将导出的数据导入到指定的远程主机上。</p> 
<p>则无需使用特定的表名称。</p> 
<p>如果你需要将备份的数据库导入到MySQL服务器中，可以使用以下命令，使用以下命令你需要确认数据库已经创建：</p> 
<pre><code class="prism language-mysql">$ mysql -u root -p database_name &lt; dump.txt
password *****
</code></pre> 
<p>你也可以使用以下命令将导出的数据直接导入到远程的服务器上，但请确保两台服务器是相通的，是可以相互访问的：</p> 
<pre><code class="prism language-mysql">$ mysqldump -u root -p database_name \
       | mysql -h other-host.com database_name
</code></pre> 
<p>以上命令中使用了管道来将导出的数据导入到指定的远程主机上。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f34b91f61d22f1d05b92441624fac1d3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AIGC从入门到入坑01（初学者适用版）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a8fba884358567a247c6375a2eec187b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Stable Diffusion webui安装详细教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>