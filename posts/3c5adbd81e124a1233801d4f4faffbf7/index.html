<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 原生安装最新版MySQL 8.4 不分发行版Linux系统通用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/3c5adbd81e124a1233801d4f4faffbf7/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Linux 原生安装最新版MySQL 8.4 不分发行版Linux系统通用">
  <meta property="og:description" content="文章目录 Linux 下安装最新版MySQL 8.4不分发行版 ```Linux系统通用```准备工作切换到root账户查看系统是否支持glibc2.28移除旧版本 安装mysql依赖下载MySQL开始安装mysql创建运行mysql的用户和用户组解压安装包修改权限创建目录初始化mysql 设置配置文件启动mysql修改默认密码 Linux 下安装最新版MySQL 8.4不分发行版 Linux系统通用 Linux下安装mysql8的方式很多通过系统带的包管理器apt|yum|dpkg 等工具安装简单快捷，但是每种方式多多少少有些区别懒得记，为什么就不统一呢？ 而且安装文件分布位置不是很清楚，管理服务命令还不一样 。想到这里我就要吐🤢🤢🤢🤢🤢🤢。
纯纯浪费我时间、脑容量。真的很无语！ 还好MySQL官方提供了二进制安装包可以在Linux系统下通用。无论是基于Debian的Ubuntu系列还是Redhat系列的CentOS是可以，终于可以只用专注一种安装方式了。
下面就使用MySQL 二进制安装包方式安装，我的软件目录、数据目录、配置文件目录、日志目录、PID文件目录 ，自己安装的都清楚知道。有一种更能掌握掌控的感觉，更放心！
亲测 CentOS 8、Ubuntu 20.04、Ubuntu 18.04 OK ！
准备工作 切换到root账户 ubuntu系统 执行 sudo -i 切换到root 方便操作
查看系统是否支持glibc2.28 因为安装的版本比较新需要新版glic2.28
redhat、centos系列使用以下命令
strings /lib64/libc.so.6 | grep GLIBC_2.28 有输出版本号证明支持
debian、ubuntu系列使用以下命令
strings /lib/x86_64-linux-gnu/libc.so.6 | grep GLIBC_2.28 若是不支持需要添加 GLIBC_2.28 查看这篇教程安装
移除旧版本 如果你安装过mysql 为了防止出现奇奇怪怪问题，我们把旧版本卸载删除相关包和残留文件
redhat、centos系列使用yum命令
# yum 查询已安装的 MySQL 相关包 rpm -qa | grep -i mysql # 卸载 MySQL 相关包 yum remove mysql-* # 卸载完再查询还有无相关包 rpm -qa | grep -i mysql debian、ubuntu系列使用apt命令">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-08T00:38:02+08:00">
    <meta property="article:modified_time" content="2024-06-08T00:38:02+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 原生安装最新版MySQL 8.4 不分发行版Linux系统通用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#Linux_MySQL_84_Linux_1" rel="nofollow">Linux 下安装最新版MySQL 8.4不分发行版 ```Linux系统通用```</a></li><li><ul><li><a href="#_8" rel="nofollow">准备工作</a></li><li><ul><li><a href="#root_9" rel="nofollow">切换到root账户</a></li><li><a href="#glibc228_11" rel="nofollow">查看系统是否支持glibc2.28</a></li><li><a href="#_31" rel="nofollow">移除旧版本</a></li></ul> 
    </li><li><a href="#mysql_63" rel="nofollow">安装mysql依赖</a></li><li><a href="#MySQL_78" rel="nofollow">下载MySQL</a></li><li><a href="#mysql_94" rel="nofollow">开始安装mysql</a></li><li><ul><li><a href="#mysql_95" rel="nofollow">创建运行mysql的用户和用户组</a></li><li><a href="#_102" rel="nofollow">解压安装包</a></li><li><a href="#_120" rel="nofollow">修改权限创建目录</a></li><li><a href="#mysql_134" rel="nofollow">初始化mysql</a></li></ul> 
    </li><li><a href="#_150" rel="nofollow">设置配置文件</a></li><li><a href="#mysql_187" rel="nofollow">启动mysql</a></li><li><a href="#_259" rel="nofollow">修改默认密码</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="Linux_MySQL_84_Linux_1"></a>Linux 下安装最新版MySQL 8.4不分发行版 <code>Linux系统通用</code></h3> 
<blockquote> 
 <p>    Linux下安装mysql8的方式很多通过系统带的包管理器<code>apt</code>|<code>yum</code>|<code>dpkg </code>等工具安装简单快捷，但是每种方式多多少少有些区别懒得记，为什么就不统一呢？ 而且安装文件分布位置不是很清楚，管理服务命令还不一样 。想到这里我就要吐🤢🤢🤢🤢🤢🤢。<br>     纯纯浪费我时间、脑容量。真的很无语！ 还好MySQL官方提供了二进制安装包可以在Linux系统下通用。无论是基于Debian的Ubuntu系列还是Redhat系列的CentOS是可以，终于可以只用专注一种安装方式了。<br>     下面就使用MySQL 二进制安装包方式安装，我的软件目录、数据目录、配置文件目录、日志目录、PID文件目录 ，自己安装的都清楚知道。有一种更能掌握掌控的感觉，更放心！<br>      亲测 CentOS 8、Ubuntu 20.04、Ubuntu 18.04 OK ！</p> 
</blockquote> 
<h4><a id="_8"></a>准备工作</h4> 
<h5><a id="root_9"></a>切换到root账户</h5> 
<p>ubuntu系统 执行 <code>sudo -i</code> 切换到root 方便操作</p> 
<h5><a id="glibc228_11"></a>查看系统是否支持glibc2.28</h5> 
<p>因为安装的版本比较新需要新版glic2.28</p> 
<p>redhat、centos系列使用以下命令</p> 
<pre><code class="prism language-bash">strings /lib64/libc.so.6 <span class="token operator">|</span> <span class="token function">grep</span> GLIBC_2.28
</code></pre> 
<p>有输出版本号证明支持<br> <img src="https://images2.imgbox.com/02/e6/AEZRmMuz_o.png" alt="在这里插入图片描述"></p> 
<p>debian、ubuntu系列使用以下命令</p> 
<pre><code class="prism language-bash">strings /lib/x86_64-linux-gnu/libc.so.6 <span class="token operator">|</span> <span class="token function">grep</span> GLIBC_2.28
</code></pre> 
<p>若是不支持需要添加 <code>GLIBC_2.28</code> <a href="https://blog.csdn.net/summer_lele/article/details/136166760">查看这篇教程安装</a><br> <img src="https://images2.imgbox.com/c3/63/vOcGsN6C_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_31"></a>移除旧版本</h5> 
<p>如果你安装过mysql 为了防止出现奇奇怪怪问题，我们把旧版本卸载删除相关包和残留文件</p> 
<p>redhat、centos系列使用yum命令</p> 
<pre><code class="prism language-bash">	<span class="token comment"># yum 查询已安装的 MySQL 相关包</span>
	<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql
	<span class="token comment"># 卸载 MySQL 相关包</span>
	yum remove mysql-*
	<span class="token comment"># 卸载完再查询还有无相关包</span>
	<span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> mysql

</code></pre> 
<p>debian、ubuntu系列使用apt命令</p> 
<pre><code class="prism language-bash">	<span class="token comment"># 卸载mysql相关</span>
    <span class="token function">apt-get</span> remove <span class="token parameter variable">--purge</span> mysql-*
    <span class="token comment"># 清除残留</span>
    <span class="token function">apt-get</span> autoremove
    <span class="token function">apt-get</span> autoclean
</code></pre> 
<p>删除相关配置文件和安装目录</p> 
<pre><code class="prism language-bash">   <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/my.cnf
   <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/mysql
   <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/mysql
</code></pre> 
<h4><a id="mysql_63"></a>安装mysql依赖</h4> 
<p>安装mysql所需要的依赖</p> 
<p>redhat、centos系列使用yum命令</p> 
<pre><code class="prism language-bash">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> libaio
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> ncurses-compat-libs
</code></pre> 
<p>debian、ubuntu系列使用apt命令</p> 
<pre><code class="prism language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> libaio1
</code></pre> 
<h4><a id="MySQL_78"></a>下载MySQL</h4> 
<p>去<a href="https://dev.mysql.com/downloads/mysql/" rel="nofollow">官网下载页面</a> 获取下载链接</p> 
<p>注意查看系统架构,地球人都知道查看系统架构命令 <code>uname -m</code>。如果你是arm架构选择arm版本的二进制包<br> <img src="https://images2.imgbox.com/b2/f9/y7KCWahf_o.png" alt="在这里插入图片描述"></p> 
<p>wget命令下载安装包</p> 
<pre><code class="prism language-bash"><span class="token comment"># -P 指定下载目录</span>
<span class="token function">wget</span> <span class="token parameter variable">-P</span> /soft https://cdn.mysql.com//Downloads/MySQL-8.4/mysql-8.4.0-linux-glibc2.28-x86_64.tar.xz
</code></pre> 
<p>.</p> 
<h4><a id="mysql_94"></a>开始安装mysql</h4> 
<h5><a id="mysql_95"></a>创建运行mysql的用户和用户组</h5> 
<pre><code class="prism language-bash"><span class="token function">groupadd</span> mysql
<span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-g</span> mysql <span class="token parameter variable">-s</span> /bin/false mysql
</code></pre> 
<h5><a id="_102"></a>解压安装包</h5> 
<p>解压到 <code>/usr/local/</code></p> 
<pre><code class="prism language-bash"><span class="token function">tar</span> xvf /soft/mysql-8.4.0-linux-glibc2.28-x86_64.tar.xz <span class="token parameter variable">-C</span> /usr/local/
</code></pre> 
<p>如果你的tar 命令不支持解压.xz格式 使用下面命令解压</p> 
<pre><code class="prism language-bash">xz <span class="token parameter variable">-dcv</span> /soft/mysql-8.4.0-linux-glibc2.28-x86_64.tar.xz <span class="token operator">|</span> <span class="token function">tar</span> x <span class="token parameter variable">-C</span> /usr/local/
</code></pre> 
<p>解压后目录名太长改成 mysql</p> 
<pre><code class="prism language-bash"><span class="token function">mv</span> /usr/local/mysql-8.4.0-linux-glibc2.28-x86_64 /usr/local/mysql
</code></pre> 
<h5><a id="_120"></a>修改权限创建目录</h5> 
<p>依次执行下面命令</p> 
<pre><code class="prism language-bash"><span class="token comment"># 创建数据目录，根据自己需求调整</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /disk/mysqldata

<span class="token builtin class-name">cd</span> /usr/local/mysql
<span class="token function">mkdir</span> mysql-files
<span class="token function">mkdir</span> log
<span class="token function">touch</span> log/error.log
<span class="token function">chmod</span> <span class="token number">750</span> mysql-files
<span class="token function">chown</span> mysql:mysql <span class="token parameter variable">-R</span> /usr/local/mysql/
<span class="token function">chown</span> mysql:mysql /disk/mysqldata
</code></pre> 
<h5><a id="mysql_134"></a>初始化mysql</h5> 
<pre><code class="prism language-bash"><span class="token comment">#--basedir 安装目录  --datadir数据存储目录 可以按需调整</span>
/usr/local/mysql/bin/mysqld <span class="token parameter variable">--initialize</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/usr/local/mysql <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/disk/mysqldata
</code></pre> 
<p>查看初始化日志 root账户的初始化密码输出在日志中</p> 
<pre><code class="prism language-bash"><span class="token comment">#初始化日志输出到 /usr/local/mysql/log/error.log 文件中</span>

<span class="token comment">#查看该文件</span>
<span class="token function">cat</span> /usr/local/mysql/log/error.log
</code></pre> 
<p><img src="https://images2.imgbox.com/0a/b6/RG8fQeqc_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_150"></a>设置配置文件</h4> 
<p>配置文件位于 <code>/etc/my.cnf</code><br> 创建配置文件<br> <code>vim /etc/my.cnf </code></p> 
<p>文件中写入以下内容（配置文件根据自己需要调整）</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>client<span class="token punctuation">]</span>
<span class="token comment"># 指定了客户端与服务器通信的套接字文件路径</span>
socket <span class="token operator">=</span> /tmp/mysql.sock

<span class="token punctuation">[</span>mysqld_safe<span class="token punctuation">]</span>
<span class="token comment"># 错误日志的存放位置。</span>
log_error <span class="token operator">=</span> /disk/mysqldata/error.log
<span class="token comment"># 存放服务器进程 ID 的文件</span>
pid_file <span class="token operator">=</span> /disk/mysqldata/mysqld.pid

<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
socket <span class="token operator">=</span> /tmp/mysql.sock

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment"># mysql 的运行用户 这里的用户一定要和初始化时的用户一致</span>
user <span class="token operator">=</span> mysql
<span class="token comment"># 指定 MySQL 服务监听的端口为 3306</span>
port <span class="token operator">=</span> <span class="token number">3306</span>
<span class="token comment"># 指定 MySQL 的安装目录</span>
basedir <span class="token operator">=</span> /usr/local/mysql
<span class="token comment"># 指定数据文件的存储位置。</span>
datadir <span class="token operator">=</span> /disk/mysqldata
socket  <span class="token operator">=</span> /tmp/mysql.sock
<span class="token comment"># 日志目录</span>
log_error <span class="token operator">=</span> /usr/local/mysql/log/error.log
<span class="token comment"># 设置SQL 模式</span>
<span class="token assign-left variable">sql_mode</span><span class="token operator">=</span><span class="token string">'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION'</span>

</code></pre> 
<h4><a id="mysql_187"></a>启动mysql</h4> 
<p>初始化后已经自动注册了系统服务 使用 <code>systemctl</code> 命令管理</p> 
<p>启动</p> 
<pre><code class="prism language-bash">systemctl start mysqld
</code></pre> 
<p>如果启动报错使用<code> journalctl -u mysqld.service</code> 命令查看日志</p> 
<p>查看状态</p> 
<pre><code class="prism language-bash">systemctl status mysqld
</code></pre> 
<p>active (running) 表示运行中<br> <img src="https://images2.imgbox.com/cd/5e/SRP3MS5j_o.png" alt="在这里插入图片描述"></p> 
<p>停止</p> 
<pre><code class="prism language-bash">systemctl stop mysqld
</code></pre> 
<p>重启</p> 
<pre><code class="prism language-bash">systemctl restart mysqld
</code></pre> 
<p>设置mysql开机自启</p> 
<pre><code class="prism language-bash">systemctl <span class="token builtin class-name">enable</span> mysqld
</code></pre> 
<p><code>若是不能执行 systemctl mysqld 相关命令，有的系统上mysql初始化完会自动创建单元服务配置文件，有的没有。 没有关系小问题。 没有自动创建我们就手动创建</code></p> 
<blockquote> 
 <p>创建单元服务配置文件</p> 
 <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">sudo</span> <span class="token function">vi</span> /lib/systemd/system/mysql.service
</code></pre> 
 <p>填入以下内容</p> 
 <pre><code class="prism language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>MySQL Server
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>simple
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/etc/my.cnf
<span class="token assign-left variable">User</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">Group</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">TimeoutSec</span><span class="token operator">=</span><span class="token number">300</span>
<span class="token assign-left variable">PrivateTmp</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target

</code></pre> 
 <p>然后重新加载单元配置</p> 
 <pre><code class="prism language-bash"><span class="token function">sudo</span> systemctl daemon-reload
</code></pre> 
 <p>现在就可以执行 <code>systemctl start mysqld</code> 相关命令了</p> 
</blockquote> 
<h4><a id="_259"></a>修改默认密码</h4> 
<p>登录mysql</p> 
<pre><code class="prism language-bash"><span class="token comment"># 回车后输入刚刚日志中的默认密码</span>
/usr/local/mysql/bin/mysql <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-p</span>
</code></pre> 
<p><code>若是报错 /usr/local/mysql/bin/mysql: error while loading shared libraries: libncurses.so.6: cannot open shared object file: No such file or directory </code><br> <code>需要安装 libncurses6</code></p> 
<p>修改密码</p> 
<pre><code class="prism language-sql"><span class="token comment"># 执行SQL 修改密码 BY 'root'; 这里就是设置的密码</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'root'</span><span class="token punctuation">;</span>
</code></pre> 
<p>设置root可远程连接，这样我们就可以使用navicat连接数据库了</p> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">select</span> host<span class="token punctuation">,</span> <span class="token keyword">user</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> host <span class="token operator">=</span> <span class="token string">'%'</span> <span class="token keyword">where</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> 
<p>Navicat 连接成功！ <code>若以上都没有问题还是连接不上请检查防火墙、安全组</code><br> <img src="https://images2.imgbox.com/0e/01/YtESIVb7_o.png" alt="在这里插入图片描述"></p> 
<p>完！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9801b3678ca49a2a8a9cc5ea4af2be8e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端三大主流框架</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f8058554dd9cd4501a2370161511dc3a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小程序如何刷新当前页面</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>