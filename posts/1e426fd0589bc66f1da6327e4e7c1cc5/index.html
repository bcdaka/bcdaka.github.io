<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue前端上传图片到阿里云OSS，超详细上传图片与视频教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1e426fd0589bc66f1da6327e4e7c1cc5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="vue前端上传图片到阿里云OSS，超详细上传图片与视频教程">
  <meta property="og:description" content="vue前端直传图片与视频到阿里云OSS 1. 简介与日常使用2. 为什么要这么干？是因为我司后端不行吗？？？（确实！）3. vue前端直传的操作4. 如何上传到阿里OSS指定文件夹呢? 1. 简介与日常使用 阿里云OSS是一款由阿里巴巴云计算有限公司开发的基于云端的对象存储服务。它为企业和个人存储海量数据提供了完美的解决方案。简单来说就是一台服务器，可以把静态资源放进去存储，比如图片，视频，各种库，然后会给你一个链接，访问数据。日常使用的话，一般用这个工具，很方便，要存什么东西，直接拖进去就行。选择对应资源，右键便可以看到信息 =&gt; 链接啥的，详细信息。
2. 为什么要这么干？是因为我司后端不行吗？？？（确实！） 这种场景是提供给用户使用的，他们在各种系统里面，点击上传图片的操作，我们需要让文件直接传入阿里oss服务器。总不能给每个用户都提供一个OSS工具吧，怕麻烦，也怕骂娘。其实后端也能做，文件通过接口传入后端，他们来操作，那只怕是展示不了咱们前端的牛逼了！再说一句：咱前端天下第一！！！
3. vue前端直传的操作 安装依赖 —— npm方式 npm install ali-oss 或者 —— yarn方式 yarn add ali-oss 如果很多地方都会用到，那么你可以封装到全局中去，比如这样：
const OSS = require(&#39;ali-oss&#39;); const client = new OSS({ // yourregion填写Bucket所在地域。以华东1（杭州）为例，Region填写为oss-cn-hangzhou。 region: &#39;yourregion&#39;, // 从环境变量中获取访问凭证 // 当然，以下两个也可以直接写死 accessKeyId: process.env.OSS_ACCESS_KEY_ID, accessKeySecret: process.env.OSS_ACCESS_KEY_SECRET, // 填写Bucket名称。 bucket: &#39;examplebucket&#39; }); 常用的就这么四个参数，如果你要更多，可以看文档
上面的参数如果不知道，问运维或者后端就行，一般是他们去处理，咱不干这破事。
接下来就是哪里用到，哪里引入就行。你的文件路径肯定跟我的不一样，别乱来啊，兄弟！
import { client } from &#34;@/utils/alioss.js&#34;; template 部分，这里没啥特别，用element ui的就行 &lt;el-upload class=&#34;avatar-uploader&#34; :on-preview=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-23T11:50:11+08:00">
    <meta property="article:modified_time" content="2023-12-23T11:50:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue前端上传图片到阿里云OSS，超详细上传图片与视频教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>vue前端直传图片与视频到阿里云OSS </h4> 
 <ul><li><ul><li><a href="#1__2" rel="nofollow">1. 简介与日常使用</a></li><li><a href="#2__10" rel="nofollow">2. 为什么要这么干？是因为我司后端不行吗？？？（确实！）</a></li><li><a href="#3_vue_17" rel="nofollow">3. vue前端直传的操作</a></li><li><a href="#4_OSS_89" rel="nofollow">4. 如何上传到阿里OSS指定文件夹呢?</a></li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/4d/4f/MdsYXEyE_o.png" alt="在这里插入图片描述"> 
<p></p> 
<h3><a id="1__2"></a>1. 简介与日常使用</h3> 
<ul><li>阿里云OSS是一款由阿里巴巴云计算有限公司开发的基于云端的对象存储服务。它为企业和个人存储海量数据提供了完美的解决方案。</li><li><strong>简单来说就是一台服务器，可以把静态资源放进去存储</strong>，比如图片，视频，各种库，然后会给你一个链接，访问数据。</li><li>日常使用的话，一般用这个工具，很方便，要存什么东西，直接拖进去就行。</li><li>选择对应资源，右键便可以看到信息 =&gt; 链接啥的，详细信息。<br> <img src="https://images2.imgbox.com/7b/11/Vr2Gcr4m_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="2__10"></a>2. 为什么要这么干？是因为我司后端不行吗？？？（确实！）</h3> 
<ul><li>这种场景是提供给用户使用的，他们在各种系统里面，点击上传图片的操作，我们需要让文件直接传入阿里oss服务器。</li><li>总不能给每个用户都提供一个OSS工具吧，怕麻烦，也怕骂娘。</li><li>其实后端也能做，文件通过接口传入后端，他们来操作，那只怕是<strong>展示不了咱们前端的牛逼了</strong>！</li><li><strong>再说一句：咱前端天下第一！！！</strong><br> <img src="https://images2.imgbox.com/e5/d9/dTgFDRim_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="3_vue_17"></a>3. vue前端直传的操作</h3> 
<ul><li>安装依赖 —— npm方式</li></ul> 
<pre><code class="prism language-javascript">npm install ali<span class="token operator">-</span>oss
</code></pre> 
<ul><li>或者 —— yarn方式</li></ul> 
<pre><code class="prism language-javascript">yarn add ali<span class="token operator">-</span>oss
</code></pre> 
<ul><li>如果很多地方都会用到，那么你可以封装到全局中去，比如这样：<br> <img src="https://images2.imgbox.com/5e/29/LCoZ50d6_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token constant">OSS</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ali-oss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// yourregion填写Bucket所在地域。以华东1（杭州）为例，Region填写为oss-cn-hangzhou。</span>
  <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">'yourregion'</span><span class="token punctuation">,</span>
  <span class="token comment">// 从环境变量中获取访问凭证</span>
  <span class="token comment">// 当然，以下两个也可以直接写死</span>
  <span class="token literal-property property">accessKeyId</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">OSS_ACCESS_KEY_ID</span><span class="token punctuation">,</span>
  <span class="token literal-property property">accessKeySecret</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">OSS_ACCESS_KEY_SECRET</span><span class="token punctuation">,</span>
  <span class="token comment">// 填写Bucket名称。</span>
  <span class="token literal-property property">bucket</span><span class="token operator">:</span> <span class="token string">'examplebucket'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li> <p>常用的就这么四个参数，如果你要更多，可以看文档<br> <img src="https://images2.imgbox.com/18/cf/OVcEBOwv_o.png" alt="在这里插入图片描述"></p> </li><li> <p>上面的参数如果不知道，问运维或者后端就行，一般是他们去处理，咱不干这破事。</p> </li><li> <p>接下来就是哪里用到，哪里引入就行。<strong>你的文件路径肯定跟我的不一样，别乱来啊，兄弟！</strong></p> </li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> client <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/alioss.js"</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>template 部分，这里没啥特别，用element ui的就行</li></ul> 
<pre><code class="prism language-javascript"> <span class="token operator">&lt;</span>el<span class="token operator">-</span>upload
   <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"avatar-uploader"</span>
   <span class="token operator">:</span>on<span class="token operator">-</span>preview<span class="token operator">=</span><span class="token string">"handlePictureCardPreview"</span>
   <span class="token operator">:</span>action<span class="token operator">=</span><span class="token string">"''"</span>
   <span class="token operator">:</span>http<span class="token operator">-</span>request<span class="token operator">=</span><span class="token string">"UploadFileFn"</span>
   <span class="token operator">:</span>on<span class="token operator">-</span>success<span class="token operator">=</span><span class="token string">"handleSuccess"</span>
   <span class="token operator">:</span>on<span class="token operator">-</span>error<span class="token operator">=</span><span class="token string">"handleError"</span>
   <span class="token operator">:</span>on<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"fileChange"</span>
   <span class="token operator">:</span>accept<span class="token operator">=</span><span class="token string">"'.img,.png,.jpg,.jpeg'"</span>
   <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"uploadImgData"</span>
   multiple
 <span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>需要注意的是，action置为空，使用 http-request。</li><li>on-success 是不会触发的。</li><li>js 部分</li></ul> 
<pre><code class="prism language-javascript"><span class="token function">UploadFileFn</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token comment">// 定义文件名 用时间戳，保证唯一性</span>
    <span class="token keyword">let</span> fileName <span class="token operator">=</span> <span class="token string">'demo'</span> <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">+</span><span class="token string">'.jpg'</span><span class="token punctuation">;</span> 
    <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">multipartUpload</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> file<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 这里会返回信息</span>
            <span class="token comment">// 如果返回了地址，而且能在浏览器打开看到文件就是ok了</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
            <span class="token comment">// 做你想做的事情，比如页面回显</span>
            <span class="token comment">// 或者获取其他信息，名字等等</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>imageUrl <span class="token operator">=</span> res<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_OSS_89"></a>4. 如何上传到阿里OSS指定文件夹呢?</h3> 
<ul><li>这里提供另一种写法，顺便封装一下，因为上传视频和上传图片都会用到。</li></ul> 
<pre><code class="prism language-javascript">   <span class="token function">UploadFilePublic</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> type<span class="token punctuation">,</span> suffix</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   	  <span class="token comment">// type用来判断 是图片还是视频</span>
   	  <span class="token comment">// suffix是后缀名</span>
      <span class="token keyword">let</span> fileName <span class="token operator">=</span> <span class="token string">"adver"</span> <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> suffix<span class="token punctuation">;</span>
      <span class="token keyword">let</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">"oss-cn-xxx"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">accessKeyId</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">accessKeySecret</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">bucket</span><span class="token operator">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 上传文件到指定文件夹</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"material/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">,</span> file<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> cal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"上传成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">// 这里是获取一些参数，顺便提供案例</span>
          <span class="token comment">// 不要的去掉即可</span>
          <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// fileDuration: 0,</span>
            <span class="token literal-property property">fileName</span><span class="token operator">:</span> fileName<span class="token punctuation">,</span>
            <span class="token literal-property property">filePath</span><span class="token operator">:</span> res<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
            <span class="token literal-property property">fileSize</span><span class="token operator">:</span> file<span class="token punctuation">.</span>file<span class="token punctuation">.</span>size<span class="token punctuation">,</span>
            <span class="token comment">// 后缀名</span>
            <span class="token literal-property property">fileSuffix</span><span class="token operator">:</span> res<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.[^.]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">fileSignature</span><span class="token operator">:</span> type <span class="token operator">==</span> <span class="token string">'img'</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imgMd5 <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoMd5
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token comment">// 图片上传</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">"img"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 做你想做的其他事情</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>imageUrl <span class="token operator">=</span> res<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// 视频上传</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">"video"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          	<span class="token comment">// 做你想做的其他事情</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>videoUrl <span class="token operator">=</span> res<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"上传失败:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<ul><li>推送到指定文件夹：</li><li>没有这个文件夹会自行创建，若怕出错可以先在阿里OSS工具上先创建好此文件夹。</li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"material/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">,</span> file<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>感谢大家的支持，最近尽量多更新一点，也希望大家能鼓励鼓励！</strong></p> 
<blockquote> 
 <p><strong>1. 希望本文能对大家有所帮助，如有错误，敬请指出</strong></p> 
 <p><strong>2. 原创不易，还请各位客官动动发财的小手支持一波（关注、评论、点赞、收藏）</strong><br> <strong>3. 拜谢各位！后续将继续奉献优质好文</strong><br> <strong>4. 如果存在疑问，可以私信我(主页有Q)</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/88/2b/2PPtHcCb_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/36e34eac84ecdff76061928a0431696b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">高级数据结构 ＜二叉搜索树＞</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51cb3ee02172ebfe2b916389a5881067/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43; Qt开发：Charts折线图绘制详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>