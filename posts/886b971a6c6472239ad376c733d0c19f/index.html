<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python（wordcloud）：根据文本数据（.txt文件）绘制词云图 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/886b971a6c6472239ad376c733d0c19f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python（wordcloud）：根据文本数据（.txt文件）绘制词云图">
  <meta property="og:description" content="一、前言 本文将介绍如何利用python来根据文本数据（.txt文件）绘制词云图，除了绘制常规形状的词云图（比如长方形），还可以指定词云图的形状。
二、相关库的介绍 1、安装相关的库 pip install jieba pip install matplotlib pip install wordcloud pip install numpy pip install Image 2、 导入相关的库 import jieba import matplotlib.pyplot as plt from wordcloud import WordCloud import numpy as np from PIL import Image # 图像处理 3、 相关库的介绍 jieba：
结巴分词库，一个中文分词库。由于中文文本的每个汉字都是连续书写的，因此需要对文本进行分词来获得中文文本的每个词组，即分词。
matplotlib.pyplot
图像展示库。用来创建画布以及相关的图像展示。在绘图前，需要创建一个figure对象，即需要一张画板才能开始绘图。
wordcloud ：
词云展示库，可以根据文本的词频,对内容进行词云图的可视化。
numpy
numpy是Python的一个开源的数值计算扩展库，主要用于处理大型多维数组和矩阵，以及进行高效的数学运算，广泛应用于数据分析、机器学习、信号处理等领域。
Image
Image模块是一个强大的图像处理工具，提供了对图像文件的读写和处理的功能。也提供了各种功能和方法来处理和操作图像，包括加载、保存、调整大小、旋转、裁剪、应用滤镜等。
三、数据处理 1、中文分词 中文分词可以将中文语句切割成单独的词组；中文分词的工具有很多，比如 python 的第三方库 jieba；jieba 支持三种分词模式：全模式、精确模式、搜索引擎模式。结巴分词最主
要的方法是 cut 方法 （1）精确模式
试图将句子最精确地切开，适合文本分析结巴分词默认为该模式 jieba.cut(&#34;文本内容&#34;,cut_all=False) （2）全模式
把句子中所有可以成词的词语都扫描出来，速度很快，但是不能解决歧义 jieba.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-04T14:20:03+08:00">
    <meta property="article:modified_time" content="2024-01-04T14:20:03+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python（wordcloud）：根据文本数据（.txt文件）绘制词云图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>一、前言</h3> 
<p>本文将介绍如何利用python来根据文本数据（.txt文件）绘制词云图，除了绘制常规形状的词云图（比如长方形），还可以指定词云图的形状。</p> 
<h3><a id="_3"></a>二、相关库的介绍</h3> 
<h5><a id="1_4"></a>1、安装相关的库</h5> 
<pre><code class="prism language-python">pip install jieba
pip install matplotlib
pip install wordcloud
pip install numpy
pip install Image 
</code></pre> 
<h5><a id="2__12"></a>2、 导入相关的库</h5> 
<pre><code class="prism language-python"><span class="token keyword">import</span> jieba
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image <span class="token comment"># 图像处理</span>
</code></pre> 
<h5><a id="3__20"></a>3、 相关库的介绍</h5> 
<ul><li> <p>jieba：<br> 结巴分词库，一个中文分词库。由于中文文本的每个汉字都是连续书写的，因此需要对文本进行分词来获得中文文本的每个词组，即分词。</p> </li><li> <p>matplotlib.pyplot<br> 图像展示库。用来创建画布以及相关的图像展示。在绘图前，需要创建一个figure对象，即需要一张画板才能开始绘图。</p> </li><li> <p>wordcloud ：<br> 词云展示库，可以根据文本的词频,对内容进行词云图的可视化。</p> </li><li> <p>numpy<br> numpy是Python的一个开源的数值计算扩展库，主要用于处理大型多维数组和矩阵，以及进行高效的数学运算，广泛应用于数据分析、机器学习、信号处理等领域。</p> </li><li> <p>Image<br> Image模块是一个强大的图像处理工具，提供了对图像文件的读写和处理的功能。也提供了各种功能和方法来处理和操作图像，包括加载、保存、调整大小、旋转、裁剪、应用滤镜等。</p> </li></ul> 
<h3><a id="_36"></a>三、数据处理</h3> 
<h5><a id="1_37"></a>1、中文分词</h5> 
<ul><li>中文分词可以将中文语句切割成单独的词组；</li><li>中文分词的工具有很多，比如 python 的第三方库 jieba；</li><li>jieba 支持三种分词模式：全模式、精确模式、搜索引擎模式。结巴分词最主<br> 要的方法是 cut 方法</li></ul> 
<p>（1）精确模式</p> 
<ul><li>试图将句子最精确地切开，适合文本分析</li><li>结巴分词默认为该模式</li></ul> 
<pre><code class="prism language-python">jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span><span class="token string">"文本内容"</span><span class="token punctuation">,</span>cut_all<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p>（2）全模式</p> 
<ul><li>把句子中所有可以成词的词语都扫描出来，速度很快，但是不能解决歧义</li></ul> 
<pre><code class="prism language-python">jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span><span class="token string">"文本内容"</span><span class="token punctuation">,</span>cut_all<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>（3）搜索引擎模式</p> 
<ul><li>在精确模式的基础上，对长词再次切分，提高召回率</li></ul> 
<h5><a id="2_58"></a>2、去除停用词</h5> 
<ul><li>对中文来说，包括像“的”、“和”、“在”、“是”等副词、量词、介词、叹词、数词都是停用词。这些词汇几乎在所有中文文本都会出现，不具有特殊性,没有区分度，所以通常会把这些词从文本中去除；</li><li>去除停用词需要一个停词表stopword.txt，将分词后的文本中每个词与停词字典中的条目进行匹配。如果匹配成功，该词将被删除；</li><li>直接百度搜索停词表并下载就好了<br> （由于本文用到的数据集的文本内容比较简单，因此没有执行去除停用词这一步的操作）</li></ul> 
<h3><a id="_63"></a>四、实现</h3> 
<h5><a id="1_64"></a>1、绘制基本词云图</h5> 
<h6><a id="1_65"></a>（1）核心</h6> 
<p>在以下代码中，根据实际更改文件的读取路径以及保存路径即可：<br> <img src="https://images2.imgbox.com/1e/88/MePKSTGR_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2WordCloud__68"></a>（2）WordCloud 参数解释</h6> 
<ul><li>参数解释</li></ul> 
<table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>width</td><td>词云图的宽度（默认400像素）</td></tr><tr><td>height</td><td>词云图的高度（默认200像素）</td></tr><tr><td>max_font_size</td><td>词云图字体的最大字号（根据图片高度自动调节）</td></tr><tr><td>min_font_size</td><td>词云图字体的最小字号（默认为4号字体）</td></tr><tr><td>max_words</td><td>词云图显示的最大单词数（默认200）</td></tr><tr><td>stop_words</td><td>不显示的词语、单词</td></tr><tr><td>mask</td><td>指定词云图的形状（默认为长方形）</td></tr><tr><td>background_color</td><td>词云图的背景颜色（默认为黑色）</td></tr><tr><td>font_path</td><td>字体文件的路径</td></tr></tbody></table> 
<ul><li>如果文本是中文的，需要设置字体，否则会乱码</li></ul> 
<pre><code class="prism language-python">font_path <span class="token operator">=</span> <span class="token string">"C:\Windows\Fonts\Microsoft YaHei UI\msyh.ttc"</span>
</code></pre> 
<h6><a id="3_88"></a>（3）完整代码：</h6> 
<pre><code class="prism language-python"><span class="token keyword">import</span> jieba
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud

<span class="token comment"># 读取文本文件</span>
text <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r"C:\Users\abc\Desktop\词云图数据\grape.txt"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 对文本进行分词，默认精确模式</span>
text1<span class="token operator">=</span>jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token comment"># 以空格作为分隔符，将分词后的所有字符串合并成一个新的字符串</span>
text <span class="token operator">=</span> <span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>text1<span class="token punctuation">)</span>
<span class="token comment"># 根据分词结果产生词云</span>
wc <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>font_path <span class="token operator">=</span> <span class="token string">"C:\Windows\Fonts\Microsoft YaHei UI\msyh.ttc"</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">"RGBA"</span><span class="token punctuation">,</span> background_color<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">.</span>generate<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token comment"># 以图片的形式显示词云</span>
plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wc<span class="token punctuation">,</span> interpolation<span class="token operator">=</span><span class="token string">"bilinear"</span><span class="token punctuation">)</span>
<span class="token comment"># 不显示图像坐标系</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">"off"</span><span class="token punctuation">)</span>
<span class="token comment"># 显示图像</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#保存词云图</span>
wc<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span><span class="token string">r"\Users\abc\Desktop\res.png"</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>以陈奕迅《葡萄成熟时》的歌词作为文本数据，词云图的结果如下：<br> <img src="https://images2.imgbox.com/3e/6b/sXFPjlAB_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="2_115"></a>2、绘制指定形状的词云图</h5> 
<ul><li>有时候需要指定词云图的形状，我们可以通过导入背景图片作为词云图的底图来实现</li><li>注意：背景图片的背景一定要是白色的，不可以是其他颜色或者透明</li><li>以下面的葡萄图片作为背景图片：<br> <img src="https://images2.imgbox.com/c0/17/P0wJF4i7_o.jpg" alt="在这里插入图片描述"></li></ul> 
<h6><a id="1_121"></a>（1）核心代码</h6> 
<p>需要使用numpy库以及Image库来对背景图片进行图像处理</p> 
<p><img src="https://images2.imgbox.com/56/b5/Jo82Oe2l_o.png" alt="在这里插入图片描述"></p> 
<ul><li>词云图的结果如下：<br> <img src="https://images2.imgbox.com/92/99/iS0rpsgW_o.png" alt="在这里插入图片描述"></li></ul> 
<h6><a id="2_128"></a>（2）词云图优化</h6> 
<ul><li>我们可以给背景图的轮廓进行清晰化，比如给轮廓添加粗度和颜色</li></ul> 
<p><img src="https://images2.imgbox.com/c1/00/lOMzFWfh_o.png" alt="在这里插入图片描述"></p> 
<ul><li>优化后的词云图如下：<br> <img src="https://images2.imgbox.com/28/7a/OVAQxCQZ_o.png" alt="在这里插入图片描述"></li></ul> 
<h6><a id="3_138"></a>（3）完整代码：</h6> 
<pre><code class="prism language-python"><span class="token keyword">import</span> wordcloud
<span class="token keyword">import</span> jieba
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image <span class="token comment"># 图像处理</span>

<span class="token comment">#打开背景图片</span>
pic <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"grape.jpg"</span><span class="token punctuation">)</span>
<span class="token comment"># 提取图片的轮廓</span>
shape <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>pic<span class="token punctuation">)</span>
<span class="token comment"># mask为图片背景，font_path为字体，若不设置可能乱码</span>
wc <span class="token operator">=</span> wordcloud<span class="token punctuation">.</span>WordCloud<span class="token punctuation">(</span>mask<span class="token operator">=</span>shape<span class="token punctuation">,</span> font_path<span class="token operator">=</span><span class="token string">"simkai.ttf"</span><span class="token punctuation">,</span> background_color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span> contour_color<span class="token operator">=</span><span class="token string">'purple'</span><span class="token punctuation">,</span>contour_width<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>
max_font_size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token comment">#读取要分词的文本文件</span>
text <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r'C:\Users\abc\Desktop\词云图数据\grape.txt'</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#结巴分词</span>
cut_text <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
result <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>cut_text<span class="token punctuation">)</span>
<span class="token comment">#生成词云图</span>
wc<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">#保存词云图</span>
wc<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span><span class="token string">"cloud.jpg"</span><span class="token punctuation">)</span>
<span class="token comment"># 以图片的形式显示词云</span>
plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wc<span class="token punctuation">,</span> interpolation<span class="token operator">=</span><span class="token string">"bilinear"</span><span class="token punctuation">)</span>
<span class="token comment"># 不显示图像坐标系</span>
plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">"off"</span><span class="token punctuation">)</span>
<span class="token comment"># 显示图像</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ea388122f0271478912bbb452e95a131/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决Hive不支持delete、update问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/218ea4919c0d9e8b2b2e5a2bbd6b03da/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot 整合多 Redis 数据源配置及操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>