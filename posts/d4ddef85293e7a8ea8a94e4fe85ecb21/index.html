<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spark on YARN - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d4ddef85293e7a8ea8a94e4fe85ecb21/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spark on YARN">
  <meta property="og:description" content="Apache Spark 和 Apache Hadoop YARN 是两个紧密相关的项目，它们经常一起使用来处理大规模数据集。下面我将解释 Spark 如何与 YARN 配合工作，以及如何在 YARN 上运行 Spark 应用程序。
Apache Spark Apache Spark 是一个快速通用的大规模数据处理引擎，支持多种计算模式，如批处理、流处理、机器学习和图形处理。Spark 提供了一个统一的编程模型，可以在单个集群上运行各种类型的应用程序。
Apache Hadoop YARN Apache Hadoop YARN (Yet Another Resource Negotiator) 是 Hadoop 的资源管理系统，它负责管理和调度集群上的资源（如 CPU、内存）。YARN 使 Hadoop 能够支持多种计算框架，而不仅仅是 MapReduce。
Spark on YARN Spark 可以在 YARN 上运行，这允许 Spark 应用程序利用 YARN 的资源管理和调度能力。以下是 Spark 在 YARN 上运行的一般流程：
提交 Spark 应用程序:
使用 spark-submit 命令提交 Spark 应用程序到 YARN。spark-submit 命令可以指定 --master yarn 来指示 Spark 应用程序将在 YARN 上运行。 YARN 资源管理:">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-27T21:09:18+08:00">
    <meta property="article:modified_time" content="2024-08-27T21:09:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spark on YARN</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Apache Spark 和 Apache Hadoop YARN 是两个紧密相关的项目，它们经常一起使用来处理大规模数据集。下面我将解释 Spark 如何与 YARN 配合工作，以及如何<span style="color:#fe2c24;">在 YARN 上运行 Spark 应用程序</span>。</p> 
<h4>Apache Spark</h4> 
<p>Apache Spark 是一个快速通用的大规模数据处理引擎，支持多种计算模式，如批处理、流处理、机器学习和图形处理。Spark 提供了一个统一的编程模型，可以在单个集群上运行各种类型的应用程序。</p> 
<h4>Apache Hadoop YARN</h4> 
<p>Apache Hadoop YARN (Yet Another Resource Negotiator) 是 Hadoop 的资源管理系统，它负责管理和调度集群上的资源（如 CPU、内存）。<span style="color:#fe2c24;">YARN 使 Hadoop 能够支持多种计算框架，而不仅仅是 MapReduce</span>。</p> 
<h4>Spark on YARN</h4> 
<p>Spark 可以在 YARN 上运行，这允许 Spark 应用程序利用 YARN 的资源管理和调度能力。以下是 Spark 在 YARN 上运行的一般流程：</p> 
<ol><li> <p><strong>提交 Spark 应用程序</strong>:</p> 
  <ul><li>使用 <code>spark-submit</code> 命令提交 Spark 应用程序到 YARN。</li><li><code>spark-submit</code> 命令可以指定 <code>--master yarn</code> 来指示 Spark 应用程序将在 YARN 上运行。</li></ul></li><li> <p><strong>YARN 资源管理</strong>:</p> 
  <ul><li>ResourceManager (RM) 负责接收应用程序提交请求，并将应用程序分配给可用的 NodeManagers (NMs)。</li><li>ResourceManager 通过 ApplicationMaster (AM) 来管理 Spark 应用程序的生命周期。</li></ul></li><li> <p><strong>ApplicationMaster (AM)</strong>:</p> 
  <ul><li>AM 是 Spark 应用程序在 YARN 上的一个代理，负责向 ResourceManager 请求资源，并协调 Executor 的启动和关闭。</li><li>AM 还负责监控 Executor 的状态，并向 ResourceManager 报告故障。</li></ul></li><li> <p><strong>Executor 启动</strong>:</p> 
  <ul><li>AM 会向 ResourceManager 请求资源来启动 Executor。</li><li>Executor 是 Spark 应用程序的工作单元，负责执行任务并在本地缓存数据。</li></ul></li><li> <p><strong>任务调度和执行</strong>:</p> 
  <ul><li>Spark 的 Driver Program 通过 AM 与 Executor 通信，发送任务并收集结果。</li><li>Executor 执行任务并将结果返回给 Driver Program。</li></ul></li></ol> 
<h4>示例：提交 Spark 应用程序到 YARN</h4> 
<p>要将 Spark 应用程序提交到 YARN，可以使用 <code>spark-submit</code> 命令，并指定一些必要的参数，例如：</p> 
<p>深色版本</p> 
<pre><code>1spark-submit \
2  --master yarn \
3  --deploy-mode cluster \
4  --class com.example.MySparkApp \
5  --conf spark.yarn.appMasterEnv.SPARK_HOME=/path/to/spark \
6  --conf spark.yarn.appMasterEnv.PYSPARK_PYTHON=/path/to/python \
7  --num-executors 10 \
8  --executor-memory 1g \
9  --executor-cores 2 \
10  --driver-memory 1g \
11  /path/to/app.jar</code></pre> 
<p>这里的关键参数包括：</p> 
<ul><li><code>--master yarn</code>: 指定使用 YARN 作为集群管理器。</li><li><code>--deploy-mode cluster</code>: 指定以集群模式部署，这意味着 Driver Program 也会在集群中运行。</li><li><code>--class</code>: 指定应用程序的主类。</li><li><code>--conf</code>: 设置环境变量或其他配置。</li><li><code>--num-executors</code>: 指定 Executor 的数量。</li><li><code>--executor-memory</code>: 指定每个 Executor 的内存大小。</li><li><code>--executor-cores</code>: 指定每个 Executor 的 CPU 核心数。</li><li><code>--driver-memory</code>: 指定 Driver Program 的内存大小。</li></ul> 
<h4>总结</h4> 
<p>Spark 在 YARN 上运行是一种常见的部署方式，特别是在企业环境中。这种方式充分利用了 YARN 的资源管理和调度能力，同时让 Spark 应用程序能够高效地运行在 Hadoop 集群上。如果你需要进一步的帮助或有关于具体配置的问题，请随时提问！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/43e9091c82b3660249526f82e2acb27f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二十个案例入门CSS3</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/59d35a497df2f677d6ec4555c0276ee1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DNS劫持问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>