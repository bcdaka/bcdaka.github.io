<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL超详细学习教程，2023年硬核学习路线 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0ed1af0658294b06c1d989d0e19ebe40/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL超详细学习教程，2023年硬核学习路线">
  <meta property="og:description" content="文章目录 前言1. 数据库的相关概念1.1 数据1.2 数据库1.3 数据库管理系统1.4 数据库系统1.5 SQL 2. MySQL数据库2.1 MySQL安装2.2 MySQL配置2.2.1 添加环境变量2.2.2 新建配置文件2.2.3 初始化MySQL2.2.4 注册MySQL服务2.2.5 启动MySQL服务 2.3 MySQL登录和退出2.4 MySQL卸载2.5 MySQL数据模型 3. SQL语句3.1 SQL简介3.2 通用语法3.3 SQL分类 4. DDL- 操作数据库4.1 查询4.2 创建数据库4.3 删除数据库4.4 使用数据库 5. DDL- 操作数据表5.1 数据类型5.2 查询表5.3 创建表5.4 删除表5.5 修改表 6. 实战案例详解7. DML- 增删改数据7.1 添加数据7.2 修改数据7.3 删除数据 8. DQL- 数据的查询操作8.1 基础查询1. 基础查询语法2. 基础查询练习 8.2 条件查询1. 条件查询语法2. 条件查询练习 8.3 排序查询1. 排序查询语法2. 排序查询练习 8.4 聚合函数1. 聚合函数语法2.聚合函数练习 8.5 分组查询1. 分组查询语法2. 分组查询练习 8.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-28T18:44:02+08:00">
    <meta property="article:modified_time" content="2023-12-28T18:44:02+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL超详细学习教程，2023年硬核学习路线</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">前言</a></li><li><a href="#1__6" rel="nofollow">1. 数据库的相关概念</a></li><li><ul><li><a href="#11__8" rel="nofollow">1.1 数据</a></li><li><a href="#12__11" rel="nofollow">1.2 数据库</a></li><li><a href="#13__18" rel="nofollow">1.3 数据库管理系统</a></li><li><a href="#14__25" rel="nofollow">1.4 数据库系统</a></li><li><a href="#15_SQL_28" rel="nofollow">1.5 SQL</a></li></ul> 
  </li><li><a href="#2_MySQL_33" rel="nofollow">2. MySQL数据库</a></li><li><ul><li><a href="#21_MySQL_34" rel="nofollow">2.1 MySQL安装</a></li><li><a href="#22_MySQL_40" rel="nofollow">2.2 MySQL配置</a></li><li><ul><li><a href="#221__42" rel="nofollow">2.2.1 添加环境变量</a></li><li><a href="#222___61" rel="nofollow">2.2.2 新建配置文件</a></li><li><a href="#223_MySQL_75" rel="nofollow">2.2.3 初始化MySQL</a></li><li><a href="#224_MySQL_84" rel="nofollow">2.2.4 注册MySQL服务</a></li><li><a href="#225_MySQL_90" rel="nofollow">2.2.5 启动MySQL服务</a></li></ul> 
   </li><li><a href="#23_MySQL_109" rel="nofollow">2.3 MySQL登录和退出</a></li><li><a href="#24_MySQL_127" rel="nofollow">2.4 MySQL卸载</a></li><li><a href="#25_MySQL_144" rel="nofollow">2.5 MySQL数据模型</a></li></ul> 
  </li><li><a href="#3_SQL_160" rel="nofollow">3. SQL语句</a></li><li><ul><li><a href="#31_SQL_162" rel="nofollow">3.1 SQL简介</a></li><li><a href="#32__166" rel="nofollow">3.2 通用语法</a></li><li><a href="#33_SQL_178" rel="nofollow">3.3 SQL分类</a></li></ul> 
  </li><li><a href="#4_DDL__193" rel="nofollow">4. DDL- 操作数据库</a></li><li><ul><li><a href="#41__197" rel="nofollow">4.1 查询</a></li><li><a href="#42__209" rel="nofollow">4.2 创建数据库</a></li><li><a href="#43__229" rel="nofollow">4.3 删除数据库</a></li><li><a href="#44__249" rel="nofollow">4.4 使用数据库</a></li></ul> 
  </li><li><a href="#5_DDL__269" rel="nofollow">5. DDL- 操作数据表</a></li><li><ul><li><a href="#51__273" rel="nofollow">5.1 数据类型</a></li><li><a href="#52__301" rel="nofollow">5.2 查询表</a></li><li><a href="#53__319" rel="nofollow">5.3 创建表</a></li><li><a href="#54__336" rel="nofollow">5.4 删除表</a></li><li><a href="#55__354" rel="nofollow">5.5 修改表</a></li></ul> 
  </li><li><a href="#6__390" rel="nofollow">6. 实战案例详解</a></li><li><a href="#7_DML__450" rel="nofollow">7. DML- 增删改数据</a></li><li><ul><li><a href="#71__452" rel="nofollow">7.1 添加数据</a></li><li><a href="#72__502" rel="nofollow">7.2 修改数据</a></li><li><a href="#73__526" rel="nofollow">7.3 删除数据</a></li></ul> 
  </li><li><a href="#8_DQL__546" rel="nofollow">8. DQL- 数据的查询操作</a></li><li><ul><li><a href="#81__601" rel="nofollow">8.1 基础查询</a></li><li><ul><li><a href="#1__603" rel="nofollow">1. 基础查询语法</a></li><li><a href="#2__629" rel="nofollow">2. 基础查询练习</a></li></ul> 
   </li><li><a href="#82__649" rel="nofollow">8.2 条件查询</a></li><li><ul><li><a href="#1__651" rel="nofollow">1. 条件查询语法</a></li><li><a href="#2__670" rel="nofollow">2. 条件查询练习</a></li></ul> 
   </li><li><a href="#83__699" rel="nofollow">8.3 排序查询</a></li><li><ul><li><a href="#1__701" rel="nofollow">1. 排序查询语法</a></li><li><a href="#2__709" rel="nofollow">2. 排序查询练习</a></li></ul> 
   </li><li><a href="#84__719" rel="nofollow">8.4 聚合函数</a></li><li><ul><li><a href="#1__721" rel="nofollow">1. 聚合函数语法</a></li><li><a href="#2_741" rel="nofollow">2.聚合函数练习</a></li></ul> 
   </li><li><a href="#85__767" rel="nofollow">8.5 分组查询</a></li><li><ul><li><a href="#1__769" rel="nofollow">1. 分组查询语法</a></li><li><a href="#2__777" rel="nofollow">2. 分组查询练习</a></li></ul> 
   </li><li><a href="#86__799" rel="nofollow">8.6 分页查询</a></li><li><ul><li><a href="#1__801" rel="nofollow">1. 分页查询语法</a></li><li><a href="#2__811" rel="nofollow">2. 分页查询练习</a></li></ul> 
  </li></ul> 
  </li><li><a href="#9__831" rel="nofollow">9. 约束的概念</a></li><li><a href="#10__835" rel="nofollow">10. 约束的分类</a></li><li><a href="#11__846" rel="nofollow">11. 非空约束</a></li><li><a href="#12__870" rel="nofollow">12. 唯一约束</a></li><li><a href="#13__900" rel="nofollow">13. 主键约束</a></li><li><a href="#14__928" rel="nofollow">14. 默认约束</a></li><li><a href="#15__950" rel="nofollow">15. 外键约束</a></li><li><a href="#16__978" rel="nofollow">16. 约束的案例练习</a></li><li><a href="#17__1089" rel="nofollow">17. 数据库设计</a></li><li><ul><li><a href="#171__1091" rel="nofollow">17.1 概念</a></li><li><a href="#172__1118" rel="nofollow">17.2 表的关系</a></li></ul> 
  </li><li><a href="#18__1232" rel="nofollow">18. 多表查询</a></li><li><ul><li><a href="#181__1278" rel="nofollow">18.1 内连接查询</a></li><li><a href="#182__1322" rel="nofollow">18.2 外连接查询</a></li><li><a href="#183__1368" rel="nofollow">18.3 子查询</a></li></ul> 
  </li><li><a href="#19__1411" rel="nofollow">19. 事务</a></li><li><ul><li><a href="#191__1413" rel="nofollow">19.1 概念</a></li><li><a href="#192__1424" rel="nofollow">19.2 语法</a></li><li><a href="#193__1490" rel="nofollow">19.3 特征</a></li></ul> 
  </li><li><a href="#20__1500" rel="nofollow">20. 总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>前言</h2> 
<p><code>这是一篇 MySQL 通关一篇过硬核</code><font size="4">经验学习路线</font><code>，包括数据库相关知识，SQL语句的使用，数据库约束，设计等。</code>整理的初衷是为了记录自己的成长，同时帮助到需要学习和查看的朋友。</p> 
<h2><a id="1__6"></a>1. 数据库的相关概念</h2> 
<h3><a id="11__8"></a>1.1 数据</h3> 
<p><code>数据</code>是指数据库中存储的基本对象，是描述事物的符号记录。</p> 
<h3><a id="12__11"></a>1.2 数据库</h3> 
<p><code>数据库</code>是指存放数据的仓库，长期存放在计算机内的有组织可共享的数据集合。</p> 
<p><img src="https://images2.imgbox.com/15/b7/tDXi2oKN_o.png" alt="在这里插入图片描述"></p> 
<p>数据库技术解决了数据的持久化存储问题，同时利用数据库管理系统解决了对大量数据操作繁琐的问题。</p> 
<h3><a id="13__18"></a>1.3 数据库管理系统</h3> 
<p><code>数据库管理系统</code>是指位于用户和操作系统之间的一层数据管理软件，科学的组织和存储，高效的获取和维护。</p> 
<p><img src="https://images2.imgbox.com/04/54/gFz8qAqM_o.png" alt="在这里插入图片描述"></p> 
<p>我们所说的 MySQL 数据库就是指 MySQL 数据库管理系统，在大家日常的使用习惯中把他叫做 MySQL 数据库。在我们的电脑安装好数据库管理系统软件以后就可以创建数据库来管理数据，同时也可以对数据库中的数据进行增删改查的操作。</p> 
<h3><a id="14__25"></a>1.4 数据库系统</h3> 
<p>数据库，数据库管理系统，应用程序和数据库管理员共同组成了<code>数据库系统</code>。</p> 
<h3><a id="15_SQL_28"></a>1.5 SQL</h3> 
<p>SQL的英文是 Structured Query Language，简称 SQL，是一种操作关系型数据库的结构化查询语言，我们在操作数据库时经常用到的操作就是查询操作。</p> 
<p><code>SQL定义了操作所有关系型数据库的统一标准</code>，可以使用 SQL 操作所有的关系型数据库管理系统，在使用其他的数据库管理系统时，也同样可以使用 SQL 来操作。</p> 
<h2><a id="2_MySQL_33"></a>2. MySQL数据库</h2> 
<h3><a id="21_MySQL_34"></a>2.1 MySQL安装</h3> 
<p>MySQL有很多的安装方式，这里可以使用绿色版，避免了安装版的一些繁琐的操作，直接在<a href="https://www.mysql.com/" rel="nofollow">官网</a>下载与自己电脑相对应的版本的压缩文件，然后将压缩文件解压到一个非中文的目录中。</p> 
<p><img src="https://images2.imgbox.com/b4/57/wm0JOnz4_o.png" alt="在这里插入图片描述"><br> 这里选择下载的产品版本是 <code>5.7.24</code> ，原因是各个库支持的最完善且相对于最新版本更加的稳定。</p> 
<h3><a id="22_MySQL_40"></a>2.2 MySQL配置</h3> 
<h4><a id="221__42"></a>2.2.1 添加环境变量</h4> 
<p><img src="https://images2.imgbox.com/fe/93/YCmiiND3_o.png" alt="在这里插入图片描述"></p> 
<p>右键此电脑 / 属性 / 高级系统设置 / 环境变量 ，在系统变量中新建变量，命名为 <code>MYSQL_HOME</code>，变量值为刚才 MySQL 的存放路径。</p> 
<p>双击系统变量中的 Path，值为 <code>%MySQL_HOME%\bin</code> 。添加环境变量的方式与前面学习配置 Java 环境变量大致相同。</p> 
<p><strong>那么，我们为什么要先配置环境变量呢？</strong></p> 
<p>平时，我们在命令行窗口中输入一个可执行程序的命令时，Windows 会先在环境变量中的<code>Path</code>所指的路径中寻找，如果找到就直接执行，没找到就在当前工作目录中寻找，如果还没找到，就会报错。</p> 
<p>我们添加环境变量的目的就是能够在任意路径下运行配置了环境变量的程序，而不用总是修改工作目录，大大简化了操作。</p> 
<p><strong>我们如何验证添加环境变量成功呢？</strong></p> 
<p>此时，我们只需要以管理员身份运行命令提示符工具，执行 mysql，如果提示 <code>Can't connect to MySQL server on 'localhost'</code>，则环境变量添加成功。</p> 
<blockquote> 
 <p>注：此时必须以管理员身份运行命令提示符工具，否则会报错。</p> 
</blockquote> 
<h4><a id="222___61"></a>2.2.2 新建配置文件</h4> 
<p>在MySQl的根目录中创建一个配置文件 <code>my.ini</code> ,其内容为：</p> 
<pre><code class="prism language-properties">[mysql]
default-character-set=utf8

[mysqld]
character-set-server=utf8
default-storage-engine=INNODB
sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
</code></pre> 
<p>主要目的是配置数据库的默认编码集为<code>utf-8</code>和默认存储引擎为<code>INNODB</code>。</p> 
<h4><a id="223_MySQL_75"></a>2.2.3 初始化MySQL</h4> 
<p>在命令提示符窗口中运行<code>mysqld --initialize-insecure</code>，如果没有出现报错，则证明data目录初始化成功。</p> 
<pre><code class="prism language-xml">mysqld --initialize-insecure
</code></pre> 
<p>此时当我们再打开查看MySQL目录，已经有<code>data</code>目录生成。</p> 
<h4><a id="224_MySQL_84"></a>2.2.4 注册MySQL服务</h4> 
<p>在命令提示符窗口中运行 <code>mysqld -install</code>，此时你的电脑就成功注册了MySQL服务，此时你的电脑就可以称为MySQL服务器。</p> 
<pre><code class="prism language-xml">mysqld -install
</code></pre> 
<h4><a id="225_MySQL_90"></a>2.2.5 启动MySQL服务</h4> 
<p>在命令提示符窗口中运行<code>net start mysql</code>，此时，我们已经成功启动MySQL服务。</p> 
<pre><code class="prism language-xml">net start mysql
</code></pre> 
<p>运行<code>net stop mysql</code>即可停止MySQL服务。</p> 
<pre><code class="prism language-xml">net stop mysql
</code></pre> 
<p>可以通过运行<code>mysqladmin -u root password 1234</code>修改默认账户密码，这里的<code>1234</code>指默认管理员(即root账户)的密码。</p> 
<pre><code class="prism language-xml">mysqladmin -u root password 1234
</code></pre> 
<h3><a id="23_MySQL_109"></a>2.3 MySQL登录和退出</h3> 
<p>在命令行中运行<code>mysql -uroot -p</code>,按照提示输入密码 ，即登录成功。</p> 
<pre><code class="prism language-xml">mysql -uroot -p密码
</code></pre> 
<p>登录命令中的参数：</p> 
<pre><code class="prism language-shell">mysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址<span class="token punctuation">(</span>默认127.0.0.1<span class="token punctuation">)</span> -P端口号<span class="token punctuation">(</span>默认3306<span class="token punctuation">)</span>
</code></pre> 
<p>退出MySQL时：</p> 
<pre><code class="prism language-xml">exit
quit
</code></pre> 
<h3><a id="24_MySQL_127"></a>2.4 MySQL卸载</h3> 
<p>我们只需要简单的三步就可以完成MySQL的卸载：</p> 
<p>第一步：运行<code>net stop mysql</code></p> 
<pre><code class="prism language-xml">net stop mysql
</code></pre> 
<p>第二步：运行<code>mysqld -remove mysql</code></p> 
<pre><code class="prism language-xml">mysqld -remove mysql
</code></pre> 
<p>第三步：删除MySQL目录及相关的环境变量。</p> 
<h3><a id="25_MySQL_144"></a>2.5 MySQL数据模型</h3> 
<p><code>MySQl 是一个关系型数据库</code>。关系型数据库是建立在关系模型基础上的数据库，简单来说，关系型数据库是由多张能互相连接的<strong>二维表</strong>组成的数据库。</p> 
<p>与关系型数据库对应的是非关系型数据库，关系型数据库有很多的优点，例如，都是使用表结构，格式一致，易于维护。使用通用的 SQL 语言操作，方便快捷，可用于复杂查询等。</p> 
<p><img src="https://images2.imgbox.com/c9/d2/g40e2xgw_o.png" alt="image-20230118150205180"></p> 
<p>我们通过客户端可以用数据库管理系统创建数据库，在数据库中创建表，在表中添加数据。创建的每一个数据库对应到磁盘上都是一个文件夹，而一个数据库下可以创建多张表，文件夹中的 .frm 就是表文件，.MYD是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。</p> 
<h2><a id="3_SQL_160"></a>3. SQL语句</h2> 
<h3><a id="31_SQL_162"></a>3.1 SQL简介</h3> 
<p>SQL被称为结构化查询语言，可以用于对所有的关系型数据库进行操作，即我们可以通过SQL语句对数据库、表、数据进行增删改查操作。</p> 
<p>SQL定义了操作关系型数据库的统一标准，但是，对于同一个需求，每一种数据库操作的方式可能会存在一些不一样的地方。</p> 
<h3><a id="32__166"></a>3.2 通用语法</h3> 
<p><img src="https://images2.imgbox.com/c7/3f/Xh72wr5I_o.png" alt="在这里插入图片描述"></p> 
<p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p> 
<p><strong>SQL 语句可以单行或多行书写，以分号结尾。</strong></p> 
<p><strong>注释：</strong></p> 
<ol><li> <p>单行注释: – 注释内容 或 #注释内容(MySQL 特有)</p> </li><li> <p>多行注释: /* 注释 */</p> </li></ol> 
<h3><a id="33_SQL_178"></a>3.3 SQL分类</h3> 
<p><img src="https://images2.imgbox.com/bf/78/oFcvHueb_o.png" alt="在这里插入图片描述"></p> 
<p>DDL： <strong>数据定义语言</strong>，用来定义数据库对象：数据库，表，列等</p> 
<p>DML： <strong>数据操作语言</strong>，用来对数据库中表的数据进行增删改</p> 
<p>DQL：<strong>数据查询语言</strong>，用来查询数据库中表的记录(数据)</p> 
<p>DCL：<strong>数据控制语言</strong>，用来定义数据库的访问权限和安全级别，及创建用户</p> 
<p>数据是数据库中非常重要的部分，所以在日后的操作中我们最常进行的是对数据的一些操作，即对数据进行怎删改查，所以最常用操作的是 <code>DML</code> 和 <code>DQL</code> 。</p> 
<p>总的来说DML用于对数据增删改，DQL用于对数据查询操作，DDL用于操作数据库，而DCL是用来控制权限。 SQL 的基本操作一般是指对数据库，数据表，数据的增删改查。</p> 
<h2><a id="4_DDL__193"></a>4. DDL- 操作数据库</h2> 
<p>首先要学习的是使用DDL来对数据库进行操作，主要是对数据库的增删改查操作。</p> 
<h3><a id="41__197"></a>4.1 查询</h3> 
<p>查询所有的数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/bc/a8/YqTcBoiq_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="42__209"></a>4.2 创建数据库</h3> 
<p>创建新的数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名称<span class="token punctuation">;</span>
</code></pre> 
<p>使用上面的方式创建新的数据库时，如果该数据库已经存在，则会出现错误，所以我们在创建新的数据库时一般会判断该数据库是否存在，如果已存在，则不会创建。</p> 
<p>创建新的数据库(判断数据库是否已经存在)：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> 数据库名称<span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/56/35/OPlJRvrQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="43__229"></a>4.3 删除数据库</h3> 
<p>删除数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span> 数据库名称<span class="token punctuation">;</span>
</code></pre> 
<p>和前面创建新的数据库相同，为了避免出现错误，我们一般会先判断该数据库是否存在，如果不存在，则不会删除。</p> 
<p>删除数据库(判断数据库是否已经存在)：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 数据库名称<span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/bd/3c/flloCVGD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="44__249"></a>4.4 使用数据库</h3> 
<p>现在我们已经成功创建了新的数据库，接下来，我们要在数据库中创建数据表，首先我们要明白是对哪一个数据库进行操作，此时我们要先学会使用数据库，才能对数据库中的表进行操作。</p> 
<p>使用数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> 数据库名称<span class="token punctuation">;</span>
</code></pre> 
<p>查询当前正在使用的数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/50/bf/38DWqHwz_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="5_DDL__269"></a>5. DDL- 操作数据表</h2> 
<p>同样，对数据表的操作无非就是增删改查，在学习相关操作之前，我们先要熟悉一下MySQL的数据类型。</p> 
<h3><a id="51__273"></a>5.1 数据类型</h3> 
<p>MySQL支持多种数据类型，但是大致可以分为3中，分别是数值型，日期型和字符串型。下面是比较常用的几种数据类型：</p> 
<p>数值：</p> 
<table><thead><tr><th>数据类型</th><th>解释</th></tr></thead><tbody><tr><td>tinyint</td><td>小整数型，占1个字节</td></tr><tr><td>int</td><td>大整数型，占4个字节</td></tr><tr><td>double</td><td>浮点类型</td></tr></tbody></table> 
<p>日期：</p> 
<table><thead><tr><th>数据类型</th><th>解释</th></tr></thead><tbody><tr><td>date</td><td>日期值，只包含年月日</td></tr><tr><td>datetime</td><td>混合日期和时间值，包含年月日时分秒</td></tr></tbody></table> 
<p>字符串：</p> 
<table><thead><tr><th>数据类型</th><th>解释</th></tr></thead><tbody><tr><td>char</td><td>定长字符串</td></tr><tr><td>varchar</td><td>变长字符串</td></tr></tbody></table> 
<p><code>定长字符串和变长字符串的区别：</code>字符串是我们在数据库中经常使用的数据类型，使用变长字符串，如果字符的长度没有达到指定的长度，那么实际的长度是多少就占用几个字符，这样的做法显然是使用时间换空间，而使用定长字符串虽然有时会出现浪费空间的情况，但是一般储存性能比较高。</p> 
<h3><a id="52__301"></a>5.2 查询表</h3> 
<p>查询当前数据库下所有的表：</p> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre> 
<p>查询表结构：</p> 
<pre><code class="prism language-sql"><span class="token keyword">desc</span> 表名称<span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/81/c6/0WiyoObG_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="53__319"></a>5.3 创建表</h3> 
<p>创建一个新的表：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名称<span class="token punctuation">(</span>
		字段名<span class="token number">1</span> 数据类型<span class="token punctuation">,</span>
		字段名<span class="token number">2</span> 数据类型<span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		字段名n 数据类型  <span class="token comment">#这里是不需要加上,的</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/31/5b/nvZmdEzC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="54__336"></a>5.4 删除表</h3> 
<p>删除表：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<p>删除表(判断表是否存在)：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/26/44/AjiKX2nv_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="55__354"></a>5.5 修改表</h3> 
<p>修改表名：</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">rename</span> <span class="token keyword">to</span> 新的表名<span class="token punctuation">;</span>
</code></pre> 
<p>增加一列：</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 列名 数据类型<span class="token punctuation">;</span>
</code></pre> 
<p>修改数据类型：</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 列名 新数据类型<span class="token punctuation">;</span>
</code></pre> 
<p>修改列名和数据类型：</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 列名 新列名 新数据类型<span class="token punctuation">;</span>
</code></pre> 
<p>删除列：</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> 列名<span class="token punctuation">;</span>
</code></pre> 
<p>例如：</p> 
<p><img src="https://images2.imgbox.com/0c/c5/5omG0GcL_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6__390"></a>6. 实战案例详解</h2> 
<p><strong>需求</strong>：设计包含如下信息的学生表，请注重数据类型、长度的合理性。</p> 
<ol><li>编号</li><li>姓名，姓名最长不超过10个汉字</li><li>性别，因为取值只有两种可能，因此最多一个汉字</li><li>生日，取值为年月日</li><li>成绩，小数点后保留两位</li><li>地址，最大长度不超过 64</li><li>学生状态（用数字表示，正常、休学、毕业…）</li></ol> 
<p>在完成这样一个案例前，首先要创建一个学生数据库，在数据库中创建一张新的表，创建表时注意语法格式，数据类型和长度的合理性。</p> 
<p>以管理员身份运行命令提示符cmd，启动Mysql服务，登录MySQL：</p> 
<p><img src="https://images2.imgbox.com/fe/87/zQRUvLc5_o.png" alt="在这里插入图片描述"></p> 
<p>创建学生信息数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/66/a2/jCHOoomB_o.png" alt="在这里插入图片描述"></p> 
<p>使用<code>student</code>数据库：</p> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> student<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/21/07/bYtG8DtG_o.png" alt="在这里插入图片描述"></p> 
<p>创建数据表：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
		id <span class="token keyword">int</span> <span class="token punctuation">,</span><span class="token comment">-- 编号</span>
		name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">-- 姓名</span>
		gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">-- 性别</span>
		birthday <span class="token keyword">date</span><span class="token punctuation">,</span><span class="token comment">-- 生日</span>
		score <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token comment">-- 分数</span>
		addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">-- 地址</span>
		<span class="token keyword">status</span> <span class="token keyword">tinyint</span><span class="token comment">-- 状态</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/d9/yOb7NPE2_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>现在，我们已经学会了写SQL来操作数据库，但是我们在命令行中写SQL时，往往有体验感差，效率低等问题，现在开始我们就要学习<code>在MySQL的图形化客户端Navicat中执行SQL语句</code>。</p> 
<p><img src="https://images2.imgbox.com/a7/a4/s0iwp87s_o.png" alt="在这里插入图片描述" width="240" height="240"></p> 
<p>Navicat 为数据库管理、开发和维护提供了一款直观而强大的图形化界面，大大的提高了工作效率，建议在学习中也使用这款开发工具。<code>接下来，在Navicat中新建数据库，新建查询，我们就可以编写SQL并且执行SQL语句了。</code></p> 
<h2><a id="7_DML__450"></a>7. DML- 增删改数据</h2> 
<h3><a id="71__452"></a>7.1 添加数据</h3> 
<p>给指定列添加数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>给全部列添加数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>批量添加数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>，<span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> 
<p>批量添加数据(省略字段名)：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>，<span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> 
<p>在开发过程中添加数据时是不建议省略字段名的，这样降低了代码的可读性，使效率下降。例如：</p> 
<p>查询表中的所有数据的方法是：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<p>后面会用到的。</p> 
<p>需求：往下面的<code>tb_user</code>表中添加一条数据。</p> 
<p><img src="https://images2.imgbox.com/e7/58/u5Q69UQG_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'李四'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>添加成功：</p> 
<p><img src="https://images2.imgbox.com/2b/58/JXkX1Ctl_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="72__502"></a>7.2 修改数据</h3> 
<p>修改表的数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 列名<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>在修改数据时，也可以不使用where条件，此时的操作是修改整列数据，这样的操作是很危险的。</p> 
<p>需求：把下面<code>tb_user</code>表中的张三的密码改为abc23</p> 
<p><img src="https://images2.imgbox.com/35/b2/dNahap6V_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> tb_user <span class="token keyword">set</span> passwor d <span class="token operator">=</span><span class="token string">'abc123'</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span>
</code></pre> 
<p>修改成功：</p> 
<p><img src="https://images2.imgbox.com/ed/17/lWgHjIed_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="73__526"></a>7.3 删除数据</h3> 
<p>删除表的数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>在删除某条数据时，如果不使用where条件，将会导致删除整个表的数据。</p> 
<p>需求：删除tb_user表中的李四记录。</p> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_user <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span>
</code></pre> 
<p>操作成功：</p> 
<p><img src="https://images2.imgbox.com/05/e5/2VP0jm2H_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="8_DQL__546"></a>8. DQL- 数据的查询操作</h2> 
<p><code>查询是数据操作至关重要的一部分，</code>比如说在所有商品中查找出价格在规定范围内的所有商品，要想把数据库中的数据在客户端中展示给用户，一般都进行了查询的操作。</p> 
<p>在实际开发中，我们要根据不同的需求，并且考虑查询的效率来决定怎样进行查询，学习查询前，可以先看看查询的完整语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span>
	字段列表
<span class="token keyword">FROM</span>
	表名列表
<span class="token keyword">WHERE</span>
	条件列表
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	分组字段
<span class="token keyword">HAVING</span>
	分组后条件
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	排序字段
<span class="token keyword">LIMIT</span>
	分页限定
</code></pre> 
<p>根据查询的完整语法中的关键字，我们分别来学习<code>基础查询，条件查询，排序查询，分组查询和分页查询。</code></p> 
<p>下面的练习中使用以下的案例学习单表查询：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除stu表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 创建stu表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu <span class="token punctuation">(</span>
id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token comment">-- 编号</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 姓名</span>
age <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token comment">-- 年龄</span>
gender <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 性别</span>
math <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 数学成绩</span>
english <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">-- 英语成绩</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'小张'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'小李'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'小陈'</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'小樊'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'小马'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'小赵'</span><span class="token punctuation">,</span><span class="token number">57</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在Navicat中选中SQL并执行：</p> 
<p><img src="https://images2.imgbox.com/de/3f/4BGS1vBn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="81__601"></a>8.1 基础查询</h3> 
<h4><a id="1__603"></a>1. 基础查询语法</h4> 
<p>查询多个字段：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<p>查询全部字段：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<p>去除重复记录：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">distinct</span> 字段列表 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<p>起别名操作：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段名 别名 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="2__629"></a>2. 基础查询练习</h4> 
<p>使用学生表进行基础查询练习：</p> 
<p>查询多个字段的练习：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> name<span class="token punctuation">,</span>math <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/22/af/UKJMm4IT_o.png" alt="在这里插入图片描述"></p> 
<p>起别名操作练习：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> name<span class="token punctuation">,</span>english 英语成绩 <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/76/4e/g0zyzzV3_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="82__649"></a>8.2 条件查询</h3> 
<h4><a id="1__651"></a>1. 条件查询语法</h4> 
<p>一般语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件列表<span class="token punctuation">;</span>
</code></pre> 
<p>条件查询一般配合运行符进行，下面是常见的几个运算符：</p> 
<table><thead><tr><th>运算符</th><th>功能描述</th></tr></thead><tbody><tr><td>&gt; &lt; = ！</td><td>大于 小于 等于 不等于</td></tr><tr><td>between…and…</td><td>在这个范围之内</td></tr><tr><td>in(…)</td><td>多选一</td></tr><tr><td>is null / is not null</td><td>是null / 不是null</td></tr><tr><td>and 或 &amp;&amp;</td><td>并且</td></tr><tr><td>or 或 ||</td><td>或者</td></tr></tbody></table> 
<h4><a id="2__670"></a>2. 条件查询练习</h4> 
<p>使用学生表进行条件查询练习：</p> 
<p>查询年龄大于20的学生信息：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> age<span class="token operator">&gt;</span><span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c7/6c/mfsih6Hf_o.png" alt="在这里插入图片描述">查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于21岁的学生信息：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> age <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d8/6a/eniYEWTy_o.png" alt="在这里插入图片描述"><strong>模糊查询使用like关键字，可以使用通配符进行占位:</strong></p> 
<ul><li>_ : 代表单个任意字符</li><li>% : 代表任意个数字符</li></ul> 
<p>查询姓名中含有张的学生信息：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%张%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/48/b8/pZBBFFku_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="83__699"></a>8.3 排序查询</h3> 
<h4><a id="1__701"></a>1. 排序查询语法</h4> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token keyword">order</span> <span class="token keyword">by</span> 排序字段名<span class="token number">1</span> <span class="token punctuation">[</span>排序方式<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><strong>注</strong>：排序方式有两种：分别是升序ASC和降序DESC，默认情况下是升序ASC。</p> 
</blockquote> 
<h4><a id="2__709"></a>2. 排序查询练习</h4> 
<p>使用学生表进行排序查询练习：</p> 
<p>查询学生信息，按照数学成绩降序排列：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">order</span> <span class="token keyword">by</span> math <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="84__719"></a>8.4 聚合函数</h3> 
<h4><a id="1__721"></a>1. 聚合函数语法</h4> 
<p>什么是聚合函数呢？在进行查询操作时，往往需要对一整列进行运算，例如可以计算一整列成绩数据的平均值，我们就要使用聚合函数。下面是常见的聚合函数：</p> 
<table><thead><tr><th>函数名</th><th>功能</th></tr></thead><tbody><tr><td>count(列名)</td><td>统计数量（一般选用不为null的列）</td></tr><tr><td>max(列名)</td><td>最大值</td></tr><tr><td>min(列名)</td><td>最小值</td></tr><tr><td>sum(列名)</td><td>求和</td></tr><tr><td>avg(列名)</td><td>平均值</td></tr></tbody></table> 
<p>一般语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 聚合函数 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>注：NULL值不参与聚合函数运算。</p> 
</blockquote> 
<h4><a id="2_741"></a>2.聚合函数练习</h4> 
<p>使用学生表进行聚合函数的练习：</p> 
<p>统计该表中一共有几个学生：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/25/e6/TRrD0PWk_o.png" alt="在这里插入图片描述"></p> 
<p>上面我们使用某一字段进行运算，这样做可能面临的问题是某一个值可能是NULL，所以我们一般使用 <code>*</code> 进行运算，因为一行中不可能所有的字段都是NULL。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre> 
<p>查询数学成绩的平均分:</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8b/b0/DmQc9Cv9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="85__767"></a>8.5 分组查询</h3> 
<h4><a id="1__769"></a>1. 分组查询语法</h4> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 分组前的条件限定<span class="token punctuation">]</span> <span class="token keyword">group</span> <span class="token keyword">by</span> 分组字段名 <span class="token punctuation">[</span><span class="token keyword">having</span> 分组后的条件过滤<span class="token punctuation">]</span>
</code></pre> 
<blockquote> 
 <p>注：分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义。</p> 
</blockquote> 
<h4><a id="2__777"></a>2. 分组查询练习</h4> 
<p>使用学生表进行分组查询练习：</p> 
<p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组:</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> gender<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> math <span class="token operator">&gt;</span> <span class="token number">70</span> <span class="token keyword">group</span> <span class="token keyword">by</span> gender<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fc/60/k82HTPXn_o.png" alt="在这里插入图片描述"></p> 
<p>查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的:</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> gender<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> math <span class="token operator">&gt;</span> <span class="token number">70</span> <span class="token keyword">group</span> <span class="token keyword">by</span> gender <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/cb/2rBUaReD_o.png" alt="在这里插入图片描述"></p> 
<p>注：<code>where 和 having</code> 执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。所以，where 不能对聚合函数进行判断，having 可以。</p> 
<h3><a id="86__799"></a>8.6 分页查询</h3> 
<h4><a id="1__801"></a>1. 分页查询语法</h4> 
<p>在我们的印象中，网页在展示大量的数据时，往往不是把数据一下全部展示出来，而是用分页展示的形式，其实就是对数据进行分页查询的操作，即每次只查询一页的数据展示到页面上。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名 <span class="token keyword">limit</span> 查询起始索引<span class="token punctuation">,</span>查询条目数<span class="token punctuation">;</span>
</code></pre> 
<p>在 <code>limit</code> 关键字中，查询起始索引这个参数是从0开始的。</p> 
<h4><a id="2__811"></a>2. 分页查询练习</h4> 
<p>使用学生表进行分页查询练习：</p> 
<p>从0开始查询，查询3条数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/23/xWMLSAgb_o.png" alt="在这里插入图片描述"><code>起始索引 = (当前页码 - 1) * 每页显示的条数</code></p> 
<p><code>在SQL标准中，一共规定了6种不同的约束，</code>包括非空约束，唯一约束和检查约束等，而在MySQL中是不支持检查约束的，所以这篇文章先对其余5种约束做一个详解和练习。</p> 
<h2><a id="9__831"></a>9. 约束的概念</h2> 
<p><code>约束是作用于表中列上的规则，用于限制加入表的数据。</code>例如，作为主键的列一定是非空的唯一的，否则将无法对数据进行区分。约束的存在保证了数据库中数据的正确性、有效性和完整性。所以约束在数据库设计中是非常重要的。</p> 
<h2><a id="10__835"></a>10. 约束的分类</h2> 
<p>前面说到SQL标准把约束分为了6大类，分别是非空约束，唯一约束，主键约束，检查约束，默认约束和外键约束，添加约束时我们只需要在SQL中添加关键词，便可以限制表中的数据。</p> 
<table><thead><tr><th>约束类型</th><th>功能</th></tr></thead><tbody><tr><td>非空约束 NOT NULL</td><td>保证列中所有的数据不能有null值</td></tr><tr><td>唯一约束 UNIQUE</td><td>保证列中所有数据各不相同</td></tr><tr><td>主键约束 PRIMARY KEY</td><td>主键是一行数据的唯一标识，要求非空且唯一</td></tr><tr><td>检查约束 CHECK</td><td>保证列中的值满足某一条件</td></tr><tr><td>默认约束 DEFAULT</td><td>保存数据时，未指定值则采用默认值</td></tr><tr><td>外键约束 FOREIGN KEY</td><td>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性</td></tr></tbody></table> 
<h2><a id="11__846"></a>11. 非空约束</h2> 
<p>目的：保证列中所有的数据不能有null值</p> 
<p>添加约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	…
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>建完表后添加非空约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型<span class="token punctuation">;</span>
</code></pre> 
<h2><a id="12__870"></a>12. 唯一约束</h2> 
<p>目的：保证列中所有数据各不相同</p> 
<p>添加约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型 <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span><span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">-- AUTO_INCREMENT: 当不指定值时自动增长</span>
	…
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型<span class="token punctuation">,</span>
	…
	<span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>约束名称<span class="token punctuation">]</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>建完表后添加唯有约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型 <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> 字段名<span class="token punctuation">;</span>
</code></pre> 
<h2><a id="13__900"></a>13. 主键约束</h2> 
<p>目的：主键是一行数据的唯一标识，要求非空且唯一</p> 
<p>添加约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">[</span><span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	…
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型<span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>约束名称<span class="token punctuation">]</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>建完表后添加主键约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="14__928"></a>14. 默认约束</h2> 
<p>目的：保存数据时，未指定值则采用默认值</p> 
<p>添加约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型 <span class="token keyword">DEFAULT</span> 默认值<span class="token punctuation">,</span>
	…
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>建完表后添加默认约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ALTER</span> 列名 <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> 默认值<span class="token punctuation">;</span>
</code></pre> 
<p>删除约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ALTER</span> 列名 <span class="token keyword">DROP</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="15__950"></a>15. 外键约束</h2> 
<p><code>当我们添加了外键以后，就在数据库层面建立了两张表的关系。</code></p> 
<p>目的：外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性</p> 
<p>添加约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	列名 数据类型<span class="token punctuation">,</span>
	…
	<span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>外键名称<span class="token punctuation">]</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>外键列名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表<span class="token punctuation">(</span>主表列名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>建完表后添加外键约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 外键名称 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>外键字段名称<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表名称<span class="token punctuation">(</span>主表列名称<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除约束：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> 外键名称<span class="token punctuation">;</span>
</code></pre> 
<h2><a id="16__978"></a>16. 约束的案例练习</h2> 
<p>首先，我们使用以下的案例来练习约束：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除stu表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> stu<span class="token punctuation">;</span>
<span class="token comment">-- 创建stu表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu <span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> <span class="token comment">-- 编号 主键</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span> <span class="token comment">-- 姓名 非空，唯一</span>
age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">-- 年龄 非空</span>
gender <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">-- 性别 非空</span>
math <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">-- 数学成绩  非空</span>
english <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token comment">-- 英语成绩 默认为0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bb/4f/fy5BkxEL_o.png" alt="在这里插入图片描述"></p> 
<p><strong>验证主键约束</strong>，其特点是非空且唯一，先添加一条数据：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'小张'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>添加第二条数据时，尝试 id 添加为空值：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'小李'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d7/83/QlBQCZMU_o.png" alt="在这里插入图片描述"></p> 
<p>尝试 id 添加为重复的值：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'小陈'</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/da/26/n8gsr6Z5_o.png" alt="在这里插入图片描述">我们已经验证了主键约束，当我们添加不合法的数据时，添加失败。</p> 
<p><strong>验证非空约束：</strong></p> 
<p>当我们添加以下的数据时：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5a/8d/gXYBeNVK_o.png" alt="在这里插入图片描述"><br> <strong>验证唯一约束：</strong></p> 
<p>当我们添加以下的数据时：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">,</span>english<span class="token punctuation">)</span> <span class="token keyword">values</span> 
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'小张'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/94/73/0AloxrMv_o.png" alt="在这里插入图片描述"><strong>验证默认约束：</strong></p> 
<p>当我们添加以下的数据时：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>math<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'小赵'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4e/e4/GgUymE3B_o.png" alt="在这里插入图片描述"></p> 
<p><strong>验证外键约束：</strong></p> 
<p>我们使用一下的案例来验证外键约束：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> emp<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> dept<span class="token punctuation">;</span>
<span class="token comment">-- 部门表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
dep_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
age <span class="token keyword">int</span><span class="token punctuation">,</span>
dep_id <span class="token keyword">int</span><span class="token punctuation">,</span>
<span class="token comment">-- 添加外键 dep_id,关联 dept 表的id主键</span>
<span class="token keyword">CONSTRAINT</span> fk_emp_dept <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>dep_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>此时，我们在员工表中添加了外键，相当于在数据库层面上建立了两张表的关系，此时如果员工表中有员工 a ，他属于 1 号部门，那么我们想要删除部门表中的 1 号部门就会删除失败，因为员工 a 是属于 1 号部门的，此时两张表建立了关系。</p> 
<p><img src="https://images2.imgbox.com/41/45/3V1vDG0L_o.png" alt="在这里插入图片描述"></p> 
<p>添加数据：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 添加 2 个部门</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept<span class="token punctuation">(</span>dep_name<span class="token punctuation">,</span>addr<span class="token punctuation">)</span> <span class="token keyword">values</span>
<span class="token punctuation">(</span><span class="token string">'研发部'</span><span class="token punctuation">,</span><span class="token string">'西安'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'销售部'</span><span class="token punctuation">,</span> <span class="token string">'成都'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加员工,dep_id 表示员工所在的部门</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp <span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> age<span class="token punctuation">,</span> dep_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>此时想要是删除销售部门时，发现删除失败。</p> 
<p><img src="https://images2.imgbox.com/c8/da/QiZAlYKe_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="17__1089"></a>17. 数据库设计</h2> 
<h3><a id="171__1091"></a>17.1 概念</h3> 
<p>数据库设计是软件研发过程中很重要的一个环节，在学习数据库设计之前，要先了解软件研发的步骤。</p> 
<p>一个成熟的软件，从想法的产生到成功上线，要经历需求调研及分析，设计，编码，测试和部署等过程，在开始阶段产品经理会根据客户的需求设计产品原型，而设计一般有架构师和开发工程师完成，这其中就包括数据库设计，还有软件结构设计，接口设计等，接着就是由开发工程师来编写代码，由测试工程师来测试，接着就可以部署上线。</p> 
<p><img src="https://images2.imgbox.com/c7/bb/xO5dZOLN_o.png" alt="image-20230118162804575"></p> 
<p>数据库设计就是根据业务系统的具体需求，结合我们所选用的 DBMS，为这个业务系统构造出最优的数据存储模型。通俗的说就是建立数据库中的表结构以及表与表之间的关联关系的过程，分析有哪些表，哪些字段等。</p> 
<p>数据库设计分为以下几个步骤：</p> 
<ul><li>需求分析</li><li>逻辑分析</li><li>物理分析</li><li>维护设计</li></ul> 
<h3><a id="172__1118"></a>17.2 表的关系</h3> 
<p>表和表之间的关系有一对一的关系，主要用于表的拆分，利于把常用数据和不常用数据分开存储，提高查询的效率。一对多或者多对一的关系，例如部门表和员工表的关系，多对多的关系，例如商品和订单的关系。</p> 
<p>一对多的关系中，在表示多的一方建立外键，指向另一方的主键，示例：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tb_emp<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tb_dept<span class="token punctuation">;</span>
<span class="token comment">-- 部门表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_dept<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
dep_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_emp<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
age <span class="token keyword">int</span><span class="token punctuation">,</span>
dep_id <span class="token keyword">int</span><span class="token punctuation">,</span>
<span class="token comment">-- 添加外键 dep_id,关联 dept 表的id主键</span>
<span class="token keyword">CONSTRAINT</span> fk_emp_dept <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>dep_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tb_dept<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>查看两表结构模型：</p> 
<p><img src="https://images2.imgbox.com/4d/a0/z8DTc29m_o.png" alt="image-20230118165220573"></p> 
<p>多对多的关系中，建立第三张中间表，中间表至少包含两个外键，分别关联两方主键，例如商品表和订单表。示例：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 删除表</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tb_order_goods<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tb_order<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tb_goods<span class="token punctuation">;</span>

<span class="token comment">-- 订单表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_order<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	payment <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	payment_type <span class="token keyword">TINYINT</span><span class="token punctuation">,</span>
	<span class="token keyword">status</span> <span class="token keyword">TINYINT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 商品表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_goods<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	price <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 订单商品中间表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_order_goods<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	order_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	goods_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	count <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 建完表后，添加外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> tb_order_goods <span class="token keyword">add</span> <span class="token keyword">CONSTRAINT</span> fk_order_id <span class="token keyword">FOREIGN</span> <span class="token keyword">key</span><span class="token punctuation">(</span>order_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span>
tb_order<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> tb_order_goods <span class="token keyword">add</span> <span class="token keyword">CONSTRAINT</span> fk_goods_id <span class="token keyword">FOREIGN</span> <span class="token keyword">key</span><span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span>
tb_goods<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>查看两表的结构模型：</p> 
<p><img src="https://images2.imgbox.com/f9/c6/ImMYvMEz_o.png" alt="image-20230118170159454"></p> 
<p>一对一的关系中，在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)，例如用户和用户详情。</p> 
<p>示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> tb_user_desc <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	city <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	edu <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	income <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">status</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	des <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tb_user <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	photo <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	nickname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	age <span class="token keyword">int</span><span class="token punctuation">,</span>
	gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	desc_id <span class="token keyword">int</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
<span class="token comment">-- 添加外键</span>
<span class="token keyword">CONSTRAINT</span> fk_user_desc <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>desc_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> tb_user_desc<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/89/Ob8PRq4b_o.png" alt="image-20230118170432408"></p> 
<h2><a id="18__1232"></a>18. 多表查询</h2> 
<p>前面学习查询操作时，一直是从一张表中查询数据，而数据库的多表查询操作也是非常重要的一部分。多表查询就是一次性从多张表中查询出需要的数据。</p> 
<p>在MySQL中多表查询分为连接查询和子查询，而连接查询又分为内连接查询和外连接查询，外连接查询的方式有左外连接查询和右外连接查询。下面对多表查询做一些基础的练习！</p> 
<p>下面是演示多表查询使用的 sql:</p> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> emp<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> dept<span class="token punctuation">;</span>

<span class="token comment"># 创建部门表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept<span class="token punctuation">(</span>
	did <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	dname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 创建员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 性别</span>
	salary <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span> <span class="token comment">-- 工资</span>
	dep_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>dep_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> dept<span class="token punctuation">(</span>did<span class="token punctuation">)</span> <span class="token comment">-- 外键，关联部门表(部门表的主键)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加部门数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dept <span class="token punctuation">(</span>dNAME<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'研发部'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'财务部'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'销售部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加员工数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>NAME<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>dep_id<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token string">'小张'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'小李'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">3600</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'小王'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">9000</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'小美'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>执行 sql ，创建表：</p> 
<p><img src="https://images2.imgbox.com/9c/9f/fzMUItHM_o.png" alt="image-20230118205616530"></p> 
<h3><a id="181__1278"></a>18.1 内连接查询</h3> 
<p>内连接查询分为隐式内连接查询和显式内连接查询，表示查询 A 集合和 B 集合的交集。</p> 
<p><img src="https://images2.imgbox.com/12/28/8pvu4GsO_o.png" alt="image-20230118211114307"></p> 
<p>语法：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 隐式内连接查询</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token keyword">FROM</span> 表<span class="token number">1</span><span class="token punctuation">,</span>表<span class="token number">2</span>… <span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span>

<span class="token comment">-- 显示内连接查询</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token keyword">FROM</span> 表<span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">INNER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token keyword">ON</span> 条件<span class="token punctuation">;</span>
</code></pre> 
<p>隐式内连接查询示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept <span class="token keyword">where</span> dep_id<span class="token operator">=</span>did<span class="token punctuation">;</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/11/e3/aJhfiSrR_o.png" alt="image-20230118205840002"></p> 
<p>显式内连接查询示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">inner</span> <span class="token keyword">join</span> dept <span class="token keyword">on</span> dep_id<span class="token operator">=</span>did<span class="token punctuation">;</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/86/cb/XuCtajoD_o.png" alt="image-20230118210058156"></p> 
<h3><a id="182__1322"></a>18.2 外连接查询</h3> 
<p>外连接查询分为作为连接查询和右外连接查询。左外连接查询：相当于查询A表所有数据和交集部分数据。</p> 
<p><img src="https://images2.imgbox.com/2e/35/FEVaZMLh_o.png" alt="image-20230118211519159"></p> 
<p>右外连接查询：相当于查询B表所有数据和交集部分数据。</p> 
<p><img src="https://images2.imgbox.com/3a/7d/ROSXIB1s_o.png" alt="image-20230118211713784"></p> 
<p>语法：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 左外连接</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token keyword">FROM</span> 表<span class="token number">1</span> <span class="token keyword">LEFT</span> <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token keyword">ON</span> 条件<span class="token punctuation">;</span>

<span class="token comment">-- 右外连接</span>
<span class="token keyword">SELECT</span> 字段列表 <span class="token keyword">FROM</span> 表<span class="token number">1</span> <span class="token keyword">RIGHT</span> <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token keyword">ON</span> 条件<span class="token punctuation">;</span>
</code></pre> 
<p>左外连接查询示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> dept <span class="token keyword">on</span> dep_id<span class="token operator">=</span>did<span class="token punctuation">;</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/cc/35/bUxoaHfD_o.png" alt="image-20230118212108078"></p> 
<p>右外连接查询示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> dept <span class="token keyword">on</span> dep_id<span class="token operator">=</span>did<span class="token punctuation">;</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/bf/23/aUCJwujH_o.png" alt="image-20230118212146475"></p> 
<h3><a id="183__1368"></a>18.3 子查询</h3> 
<p>子查询是指查询中嵌套有查询，以下的几种情况通常使用嵌套查询：</p> 
<p>子查询语句结果是单行单列，子查询语句作为条件值，使用 = != &gt; &lt; 等进行条件判断，例如查询员工中工资大于小李的员工信息：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> salary <span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> emp <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'小李'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/5d/50/fxmdQr3o_o.png" alt="image-20230118212801301"></p> 
<p>子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断，例如查询研发部和财务部员工信息：</p> 
<pre><code class="prism language-sql">
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> dep_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> did <span class="token keyword">from</span> dept <span class="token keyword">where</span> dname<span class="token operator">=</span><span class="token string">'研发部'</span> <span class="token operator">or</span> dname<span class="token operator">=</span> <span class="token string">'财务部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/94/3f/dr4VT6Nc_o.png" alt="image-20230118213728883"></p> 
<p>子查询语句结果是多行多列，子查询语句作为虚拟表，例如查询员工中工资大于3000的员工的信息和部门信息：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> salary<span class="token operator">&gt;</span><span class="token number">3000</span><span class="token punctuation">)</span> t1<span class="token punctuation">,</span> dept <span class="token keyword">where</span> t1<span class="token punctuation">.</span>dep_id<span class="token operator">=</span>dept<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/51/3b/kkv55tQw_o.png" alt="image-20230118214412049"></p> 
<h2><a id="19__1411"></a>19. 事务</h2> 
<h3><a id="191__1413"></a>19.1 概念</h3> 
<p>数据库的事务是一种机制，包含了一组数据库操作命令。事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令要么同时成功，要么同时失败。</p> 
<p>例如在进行转账操作时，张三转账给李四 500 元，首先会验证张三账户余额是否充足，如果是，则张三账户减少 500，李四账户增加 500 。如果在这过程中，由于某种原因出现错误，李四的账户没有增加 500 ，那么张三账户减少 500 的操作也不能完成。也就是要保证在这个过程中张三和李四账户余额总和要保持不变。</p> 
<p><img src="https://images2.imgbox.com/28/cd/K6KlMbHh_o.png" alt="image-20230118220346611"></p> 
<h3><a id="192__1424"></a>19.2 语法</h3> 
<p>开启事务：</p> 
<pre><code class="prism language-sql"><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
或者
<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
</code></pre> 
<p>回滚事务：</p> 
<pre><code class="prism language-sql"><span class="token keyword">commit</span><span class="token punctuation">;</span>
</code></pre> 
<p>提交事务：</p> 
<pre><code class="prism language-sql"><span class="token keyword">rollback</span><span class="token punctuation">;</span>
</code></pre> 
<p>小练习：张三转账给李四</p> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> account<span class="token punctuation">;</span>
<span class="token comment">-- 创建账户表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> account<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	money <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> account<span class="token punctuation">(</span>name<span class="token punctuation">,</span>money<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>添加事务：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 开启事务</span>
<span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token comment">-- 转账操作</span>
<span class="token comment">-- 1. 查询李四账户金额是否大于500</span>
<span class="token comment">-- 2. 张三账户 -500</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">set</span> money <span class="token operator">=</span> money <span class="token operator">-</span> <span class="token number">500</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span>
<span class="token number">3</span><span class="token operator">%</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">--出现异常</span>
<span class="token comment">-- 3. 李四账户 +500</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">set</span> money <span class="token operator">=</span> money <span class="token operator">+</span> <span class="token number">500</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span>
<span class="token comment">-- 提交事务</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
<span class="token comment">-- 回滚事务</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
</code></pre> 
<p>如果不添加事务，张三的账户就会减少 500 ，而李四的账户并不会增加 500，这样并不符合我们的实际生活。否则张三的 500 便不翼而飞了，哈哈哈！可见事务的重要性。</p> 
<h3><a id="193__1490"></a>19.3 特征</h3> 
<p>MySQl 事务具有四大特征，分别是：</p> 
<ul><li>原子性: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败</li><li>一致性 :事务完成时，必须使所有的数据都保持一致状态</li><li>隔离性: 多个事务之间，操作的可见性</li><li>持久性: 事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</li></ul> 
<h2><a id="20__1500"></a>20. 总结</h2> 
<p><code>科技发展，社会进步。</code>未来对数据的定义会不断地革新，生活的方方面面都会被列入数据的行列。从某种意义上来说，数据就是信息，只是数据不能直观地带来价值，而信息可以，但未来，这两者之间的距离会越来越缩小，直至划上等号。</p> 
<p>未来是一个数字化的时代，数据是我们最为宝贵的资源，不论是哪个专业出身，未来或多或少都会卷入数据时代的浪潮之中。而那些前提性的工作基本都是依靠<code>数据库</code>来完成。</p> 
<p>祝你事业有成！下期见。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cbb04be6d97324f7dd462d164daead81/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI数字人：最强声音驱动面部表情模型VideoReTalking</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/50eea7881086fd59e6c7da82c07e9d05/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">statsmodels专栏1——探索数据的起点：Python中的statsmodels库简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>