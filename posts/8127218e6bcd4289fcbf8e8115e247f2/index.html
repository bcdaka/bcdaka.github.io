<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;深度探索】unordered_set、unordered_map封装 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8127218e6bcd4289fcbf8e8115e247f2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;深度探索】unordered_set、unordered_map封装">
  <meta property="og:description" content="🔥 个人主页：大耳朵土土垚 🔥 所属专栏：C&#43;&#43;从入门至进阶 这里将会不定期更新有关C/C&#43;&#43;的内容，欢迎大家点赞，收藏，评论🥳🥳🎉🎉🎉 文章目录 前言1. unordered_set和unordered_map介绍✨unordered_map介绍✨unordered_set介绍 2. 修改哈希表3. 迭代器✨const迭代器 4. unordered_map的[]访问5. unordered_set和unordered_map封装✨修改后的哈希表✨unordered_map类✨unordered_set类 6. 结语 前言 前面我们学习过红黑树实现map、set的封装，而unordered_set和unordered_map的功能与map和set类似，所不同的是其存储元素是无序的，底层是使用哈希表，所以今天我们就可以利用之前学习过的哈希表的实现，来对C&#43;&#43;STL库中的unordered_set和unordered_map进行模拟实现。
1. unordered_set和unordered_map介绍 在C&#43;&#43;98中，STL提供了底层为红黑树结构的一系列关联式容器，例如：map、set。在查询时效率可达到 l o g 2 N log_2 N log2​N，即最差情况下需要比较红黑树的高度次，当树中的节点非常多时，查询效率也不理想。最好的查询是，进行很少的比较次数就能够将元素找到，因此在C&#43;&#43;11中，STL又提供了4个unordered系列的关联式容器，这四个容器与红黑树结构的关联式容器使用方式基本类似，只是其底层结构不同。
✨unordered_map介绍 介绍文档，点击跳转
unordered_map是存储&lt;key, value&gt;键值对的关联式容器，其允许通过key快速的索引到与其对应的value。在unordered_map中，键值通常用于惟一地标识元素，而映射值是一个对象，其内容与此键关联。键和映射值的类型可能不同。在内部,unordered_map没有对&lt;kye, value&gt;按照任何特定的顺序排序, 为了能在常数范围内找到key所对应的value，unordered_map将相同哈希值的键值对放在相同的桶中。unordered_map容器通过key访问单个元素要比map快，但它通常在遍历元素子集的范围迭代方面效率较低。unordered_maps实现了直接访问操作符(operator[])，它允许使用key作为参数直接访问value。 unordered_map和map核心功能重复90%，它们区别在于：
对键值对中key要求不同： map：key要支持比较大小unordered_map：key要支持转换成整型&#43;比较相等 map遍历有序，unordered_map遍历无序map有双向迭代器，unordered_map单向迭代器它们之间性能有差异 unordered_map常见接口：
函数声明功能介绍unordered_map()构造不同格式的unordered_map对象bool empty() const检测unordered_map是否为空size_t size() const获取unordered_map的有效元素个数begin返回unordered_map第一个元素的迭代器end返回unordered_map最后一个元素下一个位置的迭代器cbegin返回unordered_map第一个元素的const迭代器cend返回unordered_map最后一个元素下一个位置的const迭代器operator[]返回与key对应的valueiterator find(const K&amp; key)返回key在哈希桶中的位置size_t count(const K&amp; key)返回哈希桶中关键码为key的键值对的个数insert向容器中插入键值对erase删除容器中的键值对void clear()清空容器中有效元素个数void swap(unordered_map&amp;)交换两个容器中的元素size_t bucket_count()const返回哈希桶中桶的总个数size_t bucket_size(size_t n)const返回n号桶中有效元素的总个数size_t bucket(const K&amp; key)返回元素key所在的桶号 注意：operator[]函数中实际调用哈希桶的插入操作，用参数key与V()构造一个默认值往底层哈希桶中插入，如果key不在哈希桶中，插入成功，返回V()，插入失败，说明key已经在哈希桶中，将key对应的value返回。这与之前的map类似，插入函数返回一个键值对，键存放指针，对存放bool值，用来判断是否插入成功。
✨unordered_set介绍 文档介绍，点击跳转
unordered_set与unordered_map类似，不同在于前者储存单个数据，后者储存键值对，这里就不过多介绍。
2. 修改哈希表 因为我们要使用哈希表来实现对unordered_set和unordered_map的封装，之前实现的哈希表都是插入键值对，是没办法很好封装unordered_set的，所以我们先得对哈希表进行改造，改造类似于使用红黑树封装map和set对红黑树的改造，具体实现如下：
我们之前模拟实现过哈希表，插入的节点是键值对pair类型，而如果要使用哈希表来对unordered_set和unordered_map封装的话，unordered_set存储的应该是单个值，而不是键值对，所以我们就需要对哈希表进行修改，使得unordered_set和unordered_map都能适用：
首先哈希表存储节点的类需要从只能存储键值对改为能够存储任意数据： 修改前： template&lt;class K,class V&gt; struct HashNode { pair&lt;K, V&gt; _kv; HashNode&lt;K, V&gt;* _next; HashNode(const pair&lt;K, V&gt;&amp; kv) :_kv(kv) , _next(nullptr) {} }; 修改后： template&lt;class T&gt; struct HashNode { T _data; HashNode&lt;T&gt;* _next; HashNode(const T&amp; data) :_data(data) , _next(nullptr) {} }; 相应的，哈希表的模板参数也需要修改： 修改前： //哈希表类 template&lt;class K,class V, class Hash = HashFunc&lt;K&gt;&gt; class HashTable { public: typedef HashNode&lt;K,V&gt; Node; Node* Find(const K&amp; key);//查找函数 private: vector&lt;Node*&gt; _tables; size_t _n;//记录存储数据个数 }; 因为节点类只有一个模板参数了，所以哈希表前面两个模板参数有点多余，但是如果将哈希表的模板参数也改为一个，如下面代码所示：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-16T19:00:00+08:00">
    <meta property="article:modified_time" content="2024-08-16T19:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;深度探索】unordered_set、unordered_map封装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div align="center"> 
 <img src="https://images2.imgbox.com/a2/68/AnOPbmS1_o.jpg" width="800"> 
</div> 
<center> 
 <strong><font color="orange">🔥 个人主页：<a href="https://blog.csdn.net/Renswc?type=blog">大耳朵土土垚</a></font></strong> 
</center> 
<center> 
 <strong><font color="orange">🔥 所属专栏：<a href="https://blog.csdn.net/renswc/category_12630230.html">C++从入门至进阶</a></font></strong> 
</center> 
<br> 
<center> 
 <strong> 这里将会不定期更新有关C/C++的内容，欢迎大家点赞，收藏，评论🥳🥳🎉🎉🎉 </strong> 
 <div align="center"> 
  <img src="https://images2.imgbox.com/1b/43/4kWkbw3A_o.gif" width="800"> 
 </div> 
</center> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_11" rel="nofollow">前言</a></li><li><a href="#1_unordered_setunordered_map_18" rel="nofollow">1. unordered_set和unordered_map介绍</a></li><li><ul><li><a href="#unordered_map_24" rel="nofollow">✨unordered_map介绍</a></li><li><a href="#unordered_set_72" rel="nofollow">✨unordered_set介绍</a></li></ul> 
  </li><li><a href="#2__78" rel="nofollow">2. 修改哈希表</a></li><li><a href="#3__299" rel="nofollow">3. 迭代器</a></li><li><ul><li><a href="#const_484" rel="nofollow">✨const迭代器</a></li></ul> 
  </li><li><a href="#4_unordered_map_645" rel="nofollow">4. unordered_map的[]访问</a></li><li><a href="#5_unordered_setunordered_map_714" rel="nofollow">5. unordered_set和unordered_map封装</a></li><li><ul><li><a href="#_719" rel="nofollow">✨修改后的哈希表</a></li><li><a href="#unordered_map_1004" rel="nofollow">✨unordered_map类</a></li><li><a href="#unordered_set_1105" rel="nofollow">✨unordered_set类</a></li></ul> 
  </li><li><a href="#6__1217" rel="nofollow">6. 结语</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_11"></a>前言</h2> 
<p>  前面我们学习过<a href="https://blog.csdn.net/Renswc/article/details/140953307?spm=1001.2014.3001.5501">红黑树实现map、set的封装</a>，而<code>unordered_set</code>和<code>unordered_map</code>的功能与map和set类似，所不同的是其存储元素是无序的，底层是使用哈希表，所以今天我们就可以利用之前学习过的<a href="https://blog.csdn.net/Renswc/article/details/141037011?spm=1001.2014.3001.5501">哈希表的实现</a>，来对C++STL库中的<code>unordered_set</code>和<code>unordered_map</code>进行模拟实现。</p> 
<br> 
<h2><a id="1_unordered_setunordered_map_18"></a>1. unordered_set和unordered_map介绍</h2> 
<br> 
<p>  在C++98中，STL提供了底层为红黑树结构的一系列关联式容器，例如：<code>map、set</code>。在查询时效率可达到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         l 
        
       
         o 
        
        
        
          g 
         
        
          2 
         
        
       
         N 
        
       
      
        log_2 N 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span></span></span></span></span>，即最差情况下需要比较红黑树的高度次，当树中的节点非常多时，查询效率也不理想。最好的查询是，进行很少的比较次数就能够将元素找到，因此在C++11中，STL又提供了4个unordered系列的关联式容器，这四个容器与红黑树结构的关联式容器使用方式基本类似，只是其底层结构不同。</p> 
<h3><a id="unordered_map_24"></a>✨unordered_map介绍</h3> 
<p>  <a href="https://cplusplus.com/reference/unordered_map/unordered_map/?kw=unordered_map" rel="nofollow">介绍文档，点击跳转</a></p> 
<ol><li>unordered_map是存储&lt;key, value&gt;键值对的关联式容器，其允许通过key快速的索引到与其对应的value。</li><li>在unordered_map中，键值通常用于惟一地标识元素，而映射值是一个对象，其内容与此键关联。键和映射值的类型可能不同。</li><li>在内部,unordered_map没有对&lt;kye, value&gt;按照任何特定的顺序排序, 为了能在常数范围内找到key所对应的value，unordered_map将相同哈希值的键值对放在相同的桶中。</li><li>unordered_map容器通过key访问单个元素要比map快，但它通常在遍历元素子集的范围迭代方面效率较低。</li><li>unordered_maps实现了直接访问操作符(operator[])，它允许使用key作为参数直接访问value。</li></ol> 
<p><strong>unordered_map和map核心功能重复90%，它们区别在于：</strong></p> 
<ol><li>对键值对中key要求不同：</li></ol> 
<ul><li>map：key要支持比较大小</li><li>unordered_map：key要支持转换成整型+比较相等</li></ul> 
<ol start="2"><li>map遍历有序，unordered_map遍历无序</li><li>map有双向迭代器，unordered_map单向迭代器</li><li>它们之间性能有差异</li></ol> 
<p><strong>unordered_map常见接口：</strong></p> 
<table><thead><tr><th>函数声明</th><th>功能介绍</th></tr></thead><tbody><tr><td>unordered_map()</td><td>构造不同格式的unordered_map对象</td></tr><tr><td>bool empty() const</td><td>检测unordered_map是否为空</td></tr><tr><td>size_t size() const</td><td>获取unordered_map的有效元素个数</td></tr><tr><td>begin</td><td>返回unordered_map第一个元素的迭代器</td></tr><tr><td>end</td><td>返回unordered_map最后一个元素下一个位置的迭代器</td></tr><tr><td>cbegin</td><td>返回unordered_map第一个元素的const迭代器</td></tr><tr><td>cend</td><td>返回unordered_map最后一个元素下一个位置的const迭代器</td></tr><tr><td>operator[]</td><td>返回与key对应的value</td></tr><tr><td>iterator find(const K&amp; key)</td><td>返回key在哈希桶中的位置</td></tr><tr><td>size_t count(const K&amp; key)</td><td>返回哈希桶中关键码为key的键值对的个数</td></tr><tr><td>insert</td><td>向容器中插入键值对</td></tr><tr><td>erase</td><td>删除容器中的键值对</td></tr><tr><td>void clear()</td><td>清空容器中有效元素个数</td></tr><tr><td>void swap(unordered_map&amp;)</td><td>交换两个容器中的元素</td></tr><tr><td>size_t bucket_count()const</td><td>返回哈希桶中桶的总个数</td></tr><tr><td>size_t bucket_size(size_t n)const</td><td>返回n号桶中有效元素的总个数</td></tr><tr><td>size_t bucket(const K&amp; key)</td><td>返回元素key所在的桶号</td></tr></tbody></table> 
<p>注意：<code>operator[]</code>函数中实际调用哈希桶的插入操作，用参数key与V()构造一个默认值往底层哈希桶中插入，如果key不在哈希桶中，插入成功，返回V()，插入失败，说明key已经在哈希桶中，将key对应的value返回。这与之前的map类似，插入函数返回一个键值对，键存放指针，对存放<code>bool</code>值，用来判断是否插入成功。</p> 
<br> 
<h3><a id="unordered_set_72"></a>✨unordered_set介绍</h3> 
<p>  <a href="https://cplusplus.com/reference/unordered_set/unordered_set/?kw=unordered_set" rel="nofollow">文档介绍，点击跳转</a><br>   unordered_set与unordered_map类似，不同在于前者储存单个数据，后者储存键值对，这里就不过多介绍。</p> 
<br> 
<h2><a id="2__78"></a>2. 修改哈希表</h2> 
<br> 
<p>  因为我们要使用哈希表来实现对<code>unordered_set</code>和<code>unordered_map</code>的封装，之前实现的哈希表都是插入键值对，是没办法很好封装<code>unordered_set</code>的，所以我们先得对哈希表进行改造，改造类似于使用红黑树封装map和set对红黑树的改造，具体实现如下：</p> 
<br> 
<blockquote> 
 <p>我们之前模拟实现过哈希表，插入的节点是键值对<code>pair</code>类型，而如果要使用哈希表来对<code>unordered_set</code>和<code>unordered_map</code>封装的话，<code>unordered_set</code>存储的应该是单个值，而不是键值对，所以我们就需要对哈希表进行修改，使得<code>unordered_set</code>和<code>unordered_map</code>都能适用：</p> 
</blockquote> 
<ol><li>首先哈希表存储节点的类需要从只能存储<strong>键值对</strong>改为能够存储<strong>任意数据</strong>：</li></ol> 
<ul><li>修改前：</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashNode</span>
<span class="token punctuation">{<!-- --></span>
	pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span> _kv<span class="token punctuation">;</span>
	HashNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>

	<span class="token function">HashNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_kv</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>修改后：</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashNode</span>
<span class="token punctuation">{<!-- --></span>
	T _data<span class="token punctuation">;</span>
	HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>

	<span class="token function">HashNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<ol start="2"><li>相应的，哈希表的模板参数也需要修改：</li></ol> 
<ul><li>修改前：</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//哈希表类</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">V</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>V<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查找函数</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>
	vector<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">&gt;</span> _tables<span class="token punctuation">;</span>
	size_t _n<span class="token punctuation">;</span><span class="token comment">//记录存储数据个数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p> 因为节点类只有一个模板参数了，所以哈希表前面两个模板参数有点多余，但是如果将哈希表的模板参数也改为一个，如下面代码所示：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//哈希表</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>T<span class="token operator">&gt;&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span> 
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	Node<span class="token operator">*</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//？查找函数</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>
	vector<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">&gt;</span> _tables<span class="token punctuation">;</span>
	size_t _n<span class="token punctuation">;</span><span class="token comment">//记录存储数据个数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<p> 那么对于<code>class Hash</code>这个模板参数不可能也传入一个键值对，此外在实现查找上面代码中的Find函数时，对于<code>unordered_map</code>查找时Find函数参数就得传一个完整的键值对，我们不可能把完整的键值对全部传过去查找，这样查找就没有意义，我们只需要获得键值对的键查找到相应的键值对即可，所以我们还应该传一个模板参数用于传给<code>class Hash</code>、<code>Find</code>和<code>Erase</code>函数：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//哈希表</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span><span class="token comment">//K存储键，T存储键值对</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span> 
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span><span class="token comment">//传入键值对</span>
	Node<span class="token operator">*</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查找函数，只传键</span>
	pair<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//插入，传入T</span>
	<span class="token keyword">bool</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//删除，只传键</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	vector<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">&gt;</span> _tables<span class="token punctuation">;</span>
	size_t _n<span class="token punctuation">;</span><span class="token comment">//记录存储数据个数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>这样对于不同函数的需求就可以传入不同的模板参数了🥳🥳</p> 
</blockquote> 
<p> 如果是<code>unordered_map</code>存储的是键值对，我们就可以往哈希表的两个模板参数中传入一个键和一个键值对：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//unordered_map类</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">unordered_map</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>V<span class="token operator">&gt;&gt;</span> _ht<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>这样哈希表的第一个模板参数帮助我们解决仿函数传参、查找和删除函数传参的问题，第二个则是必须的，除了存储数据外，插入等函数也需要第二个模板参数</p> 
</blockquote> 
<p> 如果是<code>unordered_set</code>存储的不是键值对，我们也可以复用上面的代码，传入两个一样的参数即可：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//unordered_set类</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">unordered_set</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> K<span class="token operator">&gt;</span> _ht<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>虽然<code>unordered_set</code>看起来传了两个一模一样的参数是无意义的，但是这样就可以实现对哈希表的复用，不用单独为了<code>unordered_set</code>再写一个哈希表了，如下图所示：</p> 
</blockquote> 
<div align="center"> 
 <img src="https://images2.imgbox.com/a3/11/dbAzV1XG_o.jpg" width="800"> 
</div> 
<br> 
<ol start="3"><li>插入函数的参数也得从键值对改为任意数据：</li></ol> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span><span class="token comment">//之前：bool Insert(const pair&lt;K, V&gt;&amp; data)</span>
</code></pre> 
<p> 除此以外，我们在寻找插入的位置时不可避免需要通过节点中存储的<code>_data</code>使用哈希函数来获取插入的位置：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//通过Hash函数找到插入位置</span>
Hash hs<span class="token punctuation">;</span>
size_t addr <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>first<span class="token punctuation">)</span> <span class="token operator">%</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p> 我们发现之前插入键值对都是使用键值对的键来传给哈希函数获取哈希值，当我们将哈希表改成可以存储任意数据后，就不支持上述获取哈希值的方式了。<br>  因此为了实现代码的复用，我们需要传入一个新的模板参数，以便在不同情况下都能按照我们需要的方式进行获取哈希值，因为如果是<code>unordered_map</code>需要通过键来获取，<code>unordered_set</code>则直接通过数据进行获取，所以我们可以在set类和map类中各定义一个类来获取传给哈希函数的数据，再传给哈希表：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// unordered_map类</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">unordered_map</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//定义一个类获取键值对里面的键</span>
<span class="token keyword">struct</span> <span class="token class-name">MapKeyOfT</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> data<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
		HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span> _ht<span class="token punctuation">;</span><span class="token comment">//传给哈希表</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token comment">//unordered_set类</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">unordered_set</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//也定义一个类返回data即可，虽然有点多此一举，但是可以实现代码复用</span>
<span class="token keyword">struct</span> <span class="token class-name">SetKeyOfT</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span> _ht<span class="token punctuation">;</span><span class="token comment">//传给哈希表</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>看起来unordered_set定义的类似乎做了无用功，但是这一切都是为了能够实现哈希表的复用，unordered_map多传了一个参数，unordered_set也要多传。</p> 
</blockquote> 
<br> 
<p> 那么哈希表的模板参数也要修改一下：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	
<span class="token keyword">private</span><span class="token operator">:</span>
	vector<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">&gt;</span> _tables<span class="token punctuation">;</span>
	size_t _n<span class="token punctuation">;</span><span class="token comment">//记录存储数据个数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<p> 这样我们在插入函数进行比较时，就可以通过类模板KeyOfT定义一个对象然后使用括号来获取需要进行比较的数了：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	KeyOfT kot<span class="token punctuation">;</span><span class="token comment">//使用类模板，定义一个对象</span>
	Hash hs<span class="token punctuation">;</span>
	<span class="token comment">//1.先找是否已经插入过相同的值</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token comment">//2.判断是否需要扩容</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//3.通过Hash函数找到插入位置</span>
	size_t addr <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//...</span>

	<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这样就可以使用类模板定义的对象通过重载括号获取你想要的值，如果插入类型是键值对，那么就获得键值对中的键；如果不是键值对，括号返回的也是数据本身；这样不同的数据都可以传给哈希函数🥳🥳</p> 
</blockquote> 
<br> 
<h2><a id="3__299"></a>3. 迭代器</h2> 
<br> 
<p>  哈希表的迭代器与链表的迭代器类似，都是使用指针来构造：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//迭代器</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashTableIterator</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
	
	T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	T<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">!=</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">==</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//...</span>
	<span class="token punctuation">}</span>


	<span class="token comment">//构造</span>
		<span class="token function">HashTableIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<p><strong>✨对于<code>operator++</code>：</strong></p> 
<p> 因为哈希表中是使用哈希桶，当一个桶遍历完，就需要寻找下一个桶，所以我们得将哈希表传过去来寻找下一个桶：</p> 
<pre><code class="prism language-cpp">self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_next<span class="token punctuation">)</span>
		_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
	<span class="token comment">//如果当前桶走完了，找下一个桶</span>
	<span class="token comment">//1.先找到当前位置</span>
	KeyOfT kot<span class="token punctuation">;</span>
	Hash hs<span class="token punctuation">;</span>
	size_t hash <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">++</span>hash<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>hash <span class="token operator">&lt;</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		hash<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>hash <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		_node <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		_node <span class="token operator">=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">;</span>
		
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看出上述代码使用了KeyOfT和Hash类分别获得传给哈希函数的值和哈希函数计算的哈希值，所以迭代器模板也要传入这两个参数：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
truct HashTableIterator <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> HashTable<span class="token punctuation">;</span>
	<span class="token comment">//...</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>又因为获取哈希表需要传入四个参数，所以迭代器的参数也得包括这四个，所以除了KeyOfT和Hash还要传入K这个参数</p> 
</blockquote> 
<p>然后在迭代器中除了需要定义一个指针外，还需要一个哈希表的指针以便将哈希表传过去：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
truct HashTableIterator <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> HashTable<span class="token punctuation">;</span>

<span class="token comment">//构造</span>
	<span class="token function">HashTableIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">,</span> HashTable<span class="token operator">*</span> pht<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">_pht</span><span class="token punctuation">(</span>pht<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

	Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>
	HashTable<span class="token operator">*</span> _pht<span class="token punctuation">;</span><span class="token comment">//传入哈希表指针</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
</code></pre> 
<p>完整的普通迭代器类代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 前置声明，因为迭代器类中要使用哈希表所以需要前置声明</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span><span class="token punctuation">;</span>

<span class="token comment">//迭代器</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashTableIterator</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> HashTable<span class="token punctuation">;</span>
	T<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	T<span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">!=</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">==</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_next<span class="token punctuation">)</span>
			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token comment">//如果当前桶走完了，找下一个桶</span>
		<span class="token comment">//1.先找到当前位置</span>
		KeyOfT kot<span class="token punctuation">;</span>
		Hash hs<span class="token punctuation">;</span>
		size_t hash <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>hash<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>hash <span class="token operator">&lt;</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			hash<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hash <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			_node <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			_node <span class="token operator">=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">;</span>
			
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token comment">//构造</span>
		<span class="token function">HashTableIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">,</span> HashTable<span class="token operator">*</span> pht<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
			<span class="token punctuation">,</span><span class="token function">_pht</span><span class="token punctuation">(</span>pht<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>
		HashTable<span class="token operator">*</span> _pht<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
</code></pre> 
<br> 
<h3><a id="const_484"></a>✨const迭代器</h3> 
<br> 
<p>  相较于普通迭代器，const迭代器指向的内容不可以被修改，也就是说<code>operator*</code>和<code>operator-&gt;</code>返回值不可以修改，所以只要在其返回值前加<code>const</code>修饰即可，为了与普通迭代器复用同一个迭代器类，我们需要在迭代器类的模板参数中多加两个：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 前置声明</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span><span class="token punctuation">;</span>

<span class="token comment">//迭代器</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashTableIterator</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>T<span class="token punctuation">,</span>Ref<span class="token punctuation">,</span> Ptr<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> <span class="token keyword">const</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> HashTable<span class="token punctuation">;</span><span class="token comment">//注意这里是const</span>
	Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">!=</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">==</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_next<span class="token punctuation">)</span>
			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token comment">//如果当前桶走完了，找下一个桶</span>
		<span class="token comment">//1.先找到当前位置</span>
		KeyOfT kot<span class="token punctuation">;</span>
		Hash hs<span class="token punctuation">;</span>
		size_t hash <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>hash<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>hash <span class="token operator">&lt;</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			hash<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hash <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			_node <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			_node <span class="token operator">=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">;</span>
			
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token comment">//构造</span>
		<span class="token function">HashTableIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">,</span> HashTable<span class="token operator">*</span> pht<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
			<span class="token punctuation">,</span><span class="token function">_pht</span><span class="token punctuation">(</span>pht<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>
		HashTable<span class="token operator">*</span> _pht<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<p>  这样在哈希表中如果是普通迭代器就传<code>T，T&amp;，T*</code>这三个模板参数，如果是const迭代器就传<code>T，const T&amp;，const T*</code>这三个模板参数，这样就很好限制了const迭代器修改指向的内容：<br> <br></p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// 友元声明</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
	<span class="token keyword">friend</span> <span class="token keyword">struct</span> <span class="token class-name">HashTableIterator</span><span class="token punctuation">;</span>

	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>

	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> Iterator<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> Const_Iterator<span class="token punctuation">;</span>


	Iterator <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			i<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Iterator <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Const_Iterator <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			i<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">Const_Iterator</span><span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Const_Iterator <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token function">Const_Iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//...</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	vector<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">&gt;</span> _tables<span class="token punctuation">;</span>
	size_t _n<span class="token punctuation">;</span><span class="token comment">//记录存储数据个数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<blockquote> 
 <p>因为在迭代器类中要使用哈希表中的数据，所以我们将迭代器设置为哈希表类的友元类<br> <br></p> 
</blockquote> 
<p>  有了迭代器之后，Find查找函数的返回值就可以使用迭代器了🥳🥳:</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 检测哈希表中是否存在值为key的节点，存在返回该节点的迭代器，否则返回End()</span>
Iterator <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//先找到key对应的Hash值</span>
	KeyOfT kot<span class="token punctuation">;</span>
	Hash hs<span class="token punctuation">;</span>
	size_t ht <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">%</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Node<span class="token operator">*</span> cur <span class="token operator">=</span> _tables<span class="token punctuation">[</span>ht<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">==</span> key<span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里同样要注意，查找函数需要通过特定的值获取哈希值，所以我们可以利用之前在插入函数中使用的类模板继续创建一个对象来获取哈希值。</p> 
</blockquote> 
<br> 
<h2><a id="4_unordered_map_645"></a>4. unordered_map的[]访问</h2> 
<br> 
<p>  在<code>unordered_map</code>的使用介绍中，我们知道可以用[]来访问修改键值对以及插入数据：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//迭代器构造</span>
std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span> v <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span><span class="token string">"上"</span><span class="token punctuation">,</span> <span class="token string">"up"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"下"</span><span class="token punctuation">,</span> <span class="token string">"down"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"左"</span><span class="token punctuation">,</span> <span class="token string">"left"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"右"</span><span class="token punctuation">,</span> <span class="token string">"right"</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> <span class="token function">m</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//[]访问</span>
cout <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">[</span><span class="token string">"上"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">[</span><span class="token string">"下"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">[</span><span class="token string">"左"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">[</span><span class="token string">"右"</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

<span class="token comment">//[]修改</span>
m<span class="token punctuation">[</span><span class="token string">"右"</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token string">"tutu"</span><span class="token punctuation">;</span>

<span class="token comment">//[]插入</span>
m<span class="token punctuation">[</span><span class="token string">"中"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"center"</span><span class="token punctuation">;</span>

cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token string">"修改插入后："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> m<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token operator">++</span>it<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p>结果如下：</p> 
<div align="center"> 
 <img src="https://images2.imgbox.com/93/e9/0SI53f5T_o.png" width="800"> 
</div> 
<br> 
<p>  <code>unordered_map</code>的[]能够插入数据是因为其复用了插入函数，如果[]里面引用的值不存在<code>unordered_map</code>中就会插入并返回键值对的值，存在就直接返回键值对的值，而插入函数中恰好会先寻找合适的插入位置，并返回bool值，所以我们只需对插入函数返回的值进行修改，这与之前学习过的map类似：<br> <strong>我们将插入函数的返回值设为pair类型，如果插入成功就返回新节点的迭代器和true；如果插入失败，那么map中肯定以及有相同的值，那么返回该位置的迭代器和false</strong></p> 
<p>这样在[]中就可以复用插入函数完成插入和修改操作了：</p> 
<pre><code class="prism language-cpp">	V<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> ret <span class="token operator">=</span> _ht<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">.</span>first<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>插入函数只需要修改返回值即可：</p> 
<pre><code class="prism language-cpp">pair<span class="token operator">&lt;</span>Iterator<span class="token punctuation">,</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//...简写</span>
	<span class="token comment">//1.插入成功</span>
		<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">Iterator</span><span class="token punctuation">(</span>newnode<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//2.插入失败</span>
	<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//已有位置的迭代器</span>
<span class="token punctuation">}</span>

</code></pre> 
<br> 
<h2><a id="5_unordered_setunordered_map_714"></a>5. unordered_set和unordered_map封装</h2> 
<br> 
<p>  我们对于<code>unordered_set</code>和<code>unordered_map</code>封装需要各种新开一个头文件<code>unordered_set.h</code>和<code>unordered_map.h</code>来进行，并且都需要包含<code>Hash.h</code>头文件，放在自己的命名空间内，避免与STL标准库中的map和set弄混。</p> 
<h3><a id="_719"></a>✨修改后的哈希表</h3> 
<pre><code class="prism language-cpp"><span class="token comment">//哈希函数</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashFunc</span>
<span class="token punctuation">{<!-- --></span>
	size_t <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>size_t<span class="token punctuation">)</span>key<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 哈希表中支持字符串的操作</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashFunc</span><span class="token operator">&lt;</span>string<span class="token operator">&gt;</span>
<span class="token punctuation">{<!-- --></span>
	size_t <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		size_t hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> key<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			hash <span class="token operator">*=</span> <span class="token number">31</span><span class="token punctuation">;</span>
			hash <span class="token operator">+=</span> e<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> hash<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//哈希节点类</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashNode</span>
<span class="token punctuation">{<!-- --></span>
	T _data<span class="token punctuation">;</span>
	HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>

	<span class="token function">HashNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token operator">:</span><span class="token function">_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">,</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 前置声明</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">HashTable</span><span class="token punctuation">;</span>

<span class="token comment">//迭代器</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashTableIterator</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span>T<span class="token punctuation">,</span>Ref<span class="token punctuation">,</span> Ptr<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> <span class="token keyword">const</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> HashTable<span class="token punctuation">;</span>
	Ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">!=</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> t<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _node <span class="token operator">==</span> t<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_next<span class="token punctuation">)</span>
			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token comment">//如果当前桶走完了，找下一个桶</span>
		<span class="token comment">//1.先找到当前位置</span>
		KeyOfT kot<span class="token punctuation">;</span>
		Hash hs<span class="token punctuation">;</span>
		size_t hash <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>_node<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>hash<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>hash <span class="token operator">&lt;</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			hash<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hash <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			_node <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			_node <span class="token operator">=</span> _pht<span class="token operator">-&gt;</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">;</span>
			
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token comment">//构造</span>
		<span class="token function">HashTableIterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">,</span> HashTable<span class="token operator">*</span> pht<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
			<span class="token punctuation">,</span><span class="token function">_pht</span><span class="token punctuation">(</span>pht<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>
		HashTable<span class="token operator">*</span> _pht<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	

<span class="token comment">//哈希类</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
	<span class="token keyword">class</span> <span class="token class-name">HashTable</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token comment">// 友元声明</span>
		<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Ptr</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">KeyOfT</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span><span class="token operator">&gt;</span>
		<span class="token keyword">friend</span> <span class="token keyword">struct</span> <span class="token class-name">HashTableIterator</span><span class="token punctuation">;</span>

		<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>

		<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> Iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashTableIterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token punctuation">,</span> KeyOfT<span class="token punctuation">,</span> Hash<span class="token operator">&gt;</span> Const_Iterator<span class="token punctuation">;</span>


		Iterator <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				i<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		Iterator <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		Const_Iterator <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				i<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">Const_Iterator</span><span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		Const_Iterator <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token function">Const_Iterator</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token function">HashTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_tables<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token operator">~</span><span class="token function">HashTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 依次把每个桶释放</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				Node<span class="token operator">*</span> cur <span class="token operator">=</span> _tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					Node<span class="token operator">*</span> next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
					<span class="token keyword">delete</span> cur<span class="token punctuation">;</span>
					cur <span class="token operator">=</span> next<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		pair<span class="token operator">&lt;</span>Iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			KeyOfT kot<span class="token punctuation">;</span>
			<span class="token comment">//1.先找是否已经插入过相同的值</span>
			Iterator it <span class="token operator">=</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span>it<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			Hash hs<span class="token punctuation">;</span>
			<span class="token comment">//2.判断是否需要扩容</span>
			<span class="token comment">//如果负载因子为1就扩容</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> T<span class="token punctuation">,</span> KeyOfT<span class="token operator">&gt;</span> h<span class="token punctuation">;</span>
				h<span class="token punctuation">.</span>_tables<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//只需要将哈希桶插入即可</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					Node<span class="token operator">*</span> cur <span class="token operator">=</span> _tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
					<span class="token punctuation">{<!-- --></span>
						size_t hash <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> h<span class="token punctuation">.</span>_tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						Node<span class="token operator">*</span> Next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
						cur<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> h<span class="token punctuation">.</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span><span class="token punctuation">;</span>
						h<span class="token punctuation">.</span>_tables<span class="token punctuation">[</span>hash<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token punctuation">;</span>
						cur <span class="token operator">=</span> Next<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					_tables<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				_tables<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>_tables<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//3.通过Hash函数找到插入位置</span>

			size_t addr <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//4.头插到新表</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>addr<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token comment">//如果是空，_n就需要++</span>
				_n<span class="token operator">++</span><span class="token punctuation">;</span>
			Node<span class="token operator">*</span> newnode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			newnode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _tables<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">;</span>
			_tables<span class="token punctuation">[</span>addr<span class="token punctuation">]</span> <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">Iterator</span><span class="token punctuation">(</span>newnode<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		Iterator <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//先找到key对应的Hash值</span>
			Hash hs<span class="token punctuation">;</span>
			KeyOfT kot<span class="token punctuation">;</span>
			size_t ht <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">%</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> _tables<span class="token punctuation">[</span>ht<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">==</span> key<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">Iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">bool</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//1.先找到删除的位置</span>
			Hash hs<span class="token punctuation">;</span>
			KeyOfT kot<span class="token punctuation">;</span>
			size_t ht <span class="token operator">=</span> <span class="token function">hs</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">%</span> _tables<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> _tables<span class="token punctuation">[</span>ht<span class="token punctuation">]</span><span class="token punctuation">;</span>
			Node<span class="token operator">*</span> parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">kot</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token operator">==</span> key<span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				parent <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token comment">//2.删除对应节点</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
				parent<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				_tables<span class="token punctuation">[</span>ht<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

			<span class="token comment">//修改_n</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_tables<span class="token punctuation">[</span>ht<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
				_n<span class="token operator">--</span><span class="token punctuation">;</span>

			<span class="token comment">//3.释放原节点</span>
			<span class="token keyword">delete</span> cur<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token keyword">private</span><span class="token operator">:</span>
		vector<span class="token operator">&lt;</span>Node<span class="token operator">*</span><span class="token operator">&gt;</span> _tables<span class="token punctuation">;</span>
		size_t _n<span class="token punctuation">;</span><span class="token comment">//记录存储数据个数</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h3><a id="unordered_map_1004"></a>✨unordered_map类</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Hash.h"</span></span>
<span class="token comment">// unordered_map类</span>
<span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">V</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">unordered_map</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//定义一个类获取键值对里面的键</span>
	<span class="token keyword">struct</span> <span class="token class-name">MapKeyOfT</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> data<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">HashTable</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Iterator iterator<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">HashTable</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span> Const_Iterator const_iterator<span class="token punctuation">;</span>

	iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>kv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	V<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> ret <span class="token operator">=</span> _ht<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">.</span>first<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	iterator <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">bool</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Erase</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> MapKeyOfT<span class="token operator">&gt;</span> _ht<span class="token punctuation">;</span><span class="token comment">//传给哈希表</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//测试函数</span>
	<span class="token keyword">void</span> <span class="token function">test_map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> dict<span class="token punctuation">;</span>
		dict<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token string">"sort"</span><span class="token punctuation">,</span> <span class="token string">"排序"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dict<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dict<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token string">"right"</span><span class="token punctuation">,</span> <span class="token string">"右边"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		dict<span class="token punctuation">[</span><span class="token string">"left"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"左边，剩余"</span><span class="token punctuation">;</span>
		dict<span class="token punctuation">[</span><span class="token string">"insert"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"插入"</span><span class="token punctuation">;</span>
		dict<span class="token punctuation">[</span><span class="token string">"string"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> dict<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> dict<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>

			cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token operator">++</span>it<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>结果如下：</p> 
<div align="center"> 
 <img src="https://images2.imgbox.com/95/03/LdGhWs0N_o.png" width="800"> 
</div> 
<br> 
<h3><a id="unordered_set_1105"></a>✨unordered_set类</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Hash.h"</span></span>
<span class="token keyword">namespace</span> tutu<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">K</span><span class="token operator">&gt;</span>
	<span class="token keyword">class</span> <span class="token class-name">unordered_set</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">struct</span> <span class="token class-name">SetKeyOfT</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> key<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">HashTable</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Iterator iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> <span class="token keyword">typename</span> <span class="token class-name">HashTable</span><span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>Const_Iterator const_iterator<span class="token punctuation">;</span>


		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span> <span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">Find</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">bool</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _ht<span class="token punctuation">.</span><span class="token function">Erase</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token keyword">private</span><span class="token operator">:</span>
		HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token punctuation">,</span> SetKeyOfT<span class="token operator">&gt;</span> _ht<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> unordered_set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		unordered_set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>const_iterator it <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// *it += 1;</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>it<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">test_set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	unordered_set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> s<span class="token punctuation">;</span>
	<span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> a<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> e <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	unordered_set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//*it += 1;</span>

		cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>it<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token function">Print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>结果如下：</p> 
<div align="center"> 
 <img src="https://images2.imgbox.com/12/20/bj2Kwgsv_o.png" width="800"> 
</div> 
<br> 
<h2><a id="6__1217"></a>6. 结语</h2> 
<p>  <code>unordered_map</code>和<code>unordered_set</code>的底层都是使用哈希表来实现的，然后在外面套了一层壳，为了能够更好的实现代码复用，我们对哈希表进行了很多修改还使用了仿函数，封装了普通迭代器和<code>const</code>迭代器等，最终成功对<code>unordered_map</code>和<code>unordered_set</code>实现了封装，它们和使用红黑树对map和set封装非常类似，大家可以一起参考学习。以上就是今天所有的内容啦~ 完结撒花 ~🥳🎉🎉</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d3782f317cb26809aaeeb9e5aadd1aee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【JAVA多线程】JDK线程同步工具：Semaphore、CountDownLatch、CyclicBarrier</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c2a236b10838c6b6e8203acf64137bea/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Python快速入门和实践020】Python常用脚本-查看电脑基本信息</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>