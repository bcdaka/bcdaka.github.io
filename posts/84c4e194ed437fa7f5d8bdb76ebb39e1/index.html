<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot中实现规则引擎源码教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/84c4e194ed437fa7f5d8bdb76ebb39e1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spring Boot中实现规则引擎源码教程">
  <meta property="og:description" content="在软件开发中，我们经常需要应用一组规则或条件来过滤和处理数据。使用传统的 if 和 else 条件管理这些规则可能会变得繁琐且难以维护。规则引擎提供了一种更灵活、更有条理的方法来定义和执行这些规则。在本文中，我们将探讨如何使用 Java 函数式编程原理在 Spring Boot 项目中构建一个简单的规则引擎。
什么是规则引擎？
规则引擎是一个专家系统程序，它对输入数据运行规则，如果任何条件匹配，则执行相应的操作。
规则引擎负责管理一组规则，并将它们应用于一组对象。它根据定义的规则过滤对象并返回过滤结果。
案例
在这个应用程序中，首先我将创建一个UserController.java类并创建一个返回用户列表的Rest端点。
import com.example.spring_boot_rule_engine_demo.model.User; import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.GetMapping;
import java.util.ArrayList;
import java.util.List;
@RestController
@RequestMapping(&#34;/user&#34;)
public class UserController {
@GetMapping
public List getAllUser(){ return userData(); } private List userData() { List users = new ArrayList&lt;&gt;(); User user1 = new User(&#34;sumit&#34;, 33); User user2 = new User(&#34;agam&#34;, 13); User user3 = new User(&#34;mohit&#34;, 23); User user4 = new User(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-05T06:27:41+08:00">
    <meta property="article:modified_time" content="2024-06-05T06:27:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot中实现规则引擎源码教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在软件开发中，我们经常需要应用一组规则或条件来过滤和处理数据。使用传统的 if 和 else 条件管理这些规则可能会变得繁琐且难以维护。规则引擎提供了一种更灵活、更有条理的方法来定义和执行这些规则。在本文中，我们将探讨如何使用 Java 函数式编程原理在 Spring Boot 项目中构建一个简单的规则引擎。</p> 
<p><strong>什么是规则引擎？</strong><br> 规则引擎是一个专家系统程序，它对输入数据运行规则，如果任何条件匹配，则执行相应的操作。<br> 规则引擎负责管理一组规则，并将它们应用于一组对象。它根据定义的规则过滤对象并返回过滤结果。</p> 
<p>案例<br> 在这个应用程序中，首先我将创建一个UserController.java类并创建一个返回用户列表的Rest端点。</p> 
<p><strong>import</strong> com.example.spring_boot_rule_engine_demo.model.User; <br> <strong>import</strong> org.springframework.web.bind.annotation.RequestMapping;<br> <strong>import</strong> org.springframework.web.bind.annotation.RestController;<br> <strong>import</strong> org.springframework.web.bind.annotation.GetMapping;<br> <strong>import</strong> java.util.ArrayList;<br> <strong>import</strong> java.util.List;</p> 
<p>@RestController<br> @RequestMapping("/user")<br> <strong>public</strong> <strong>class</strong> UserController {<!-- --><br> <br> @GetMapping<br> <strong>public</strong> List 
 
   getAllUser(){ 
  <br> 
  <strong>return</strong> userData(); 
  <br> } 
 </p> 
<p>    <strong>private</strong> List 
 
   userData() { 
  <br> List 
  
    users = 
   <strong>new</strong> ArrayList&lt;&gt;(); 
   <br> User user1 = 
   <strong>new</strong> User("sumit", 33); 
   <br> User user2 = 
   <strong>new</strong> User("agam", 13); 
   <br> User user3 = 
   <strong>new</strong> User("mohit", 23); 
   <br> User user4 = 
   <strong>new</strong> User("kailash", 43); 
   <br> users.add(user1); 
   <br> users.add(user2); 
   <br> users.add(user3); 
   <br> users.add(user4); 
   <br> 
   <strong>return</strong> users; 
   <br> } 
   
 </p> 
<p>}</p> 
<p>现在，我们要求只获取年龄大于 30 岁、姓名以 sum 开头的用户。<br> 因此，现在我们需要创建两条规则，并在向客户端返回响应前应用这两条规则。</p> 
<p><strong>定义规则：</strong><br> 首先，我们将使用一个名为 Rule 的枚举来定义规则。枚举中的每条规则都代表我们要评估的特定条件或标准。</p> 
<p><strong>import</strong> com.example.spring_boot_rule_engine_demo.model.User;</p> 
<p><strong>import</strong> java.util.function.Predicate;</p> 
<p><strong>public</strong> enum Rule implements TestRule {<!-- --></p> 
<p>    AGE_GREATER_THAN_30(user -&gt; user.getAge() &gt; 30),<br> NAME_STARTS_WITH_SUM(user -&gt; user.getName().startsWith("sum"));</p> 
<p>    <strong>private</strong> <strong>final</strong> Predicate 
 
   predicate; 
 </p> 
<p>    Rule(Predicate 
 
   predicate) { 
  <br> 
  <strong>this</strong>.predicate = predicate; 
  <br> } 
 </p> 
<p>    <strong>public</strong> Predicate 
 
   getPredicate() { 
  <br> 
  <strong>return</strong> predicate; 
  <br> } 
  <br> } 
 </p> 
<p>让我创建一个 TestRule 接口来定义不需要实现的方法。</p> 
<p><strong>import</strong> java.util.function.Predicate;</p> 
<p><strong>public</strong> <strong>interface</strong> TestRule {<!-- --><br> 
 
   Predicate 
  
    getPredicate(); 
   <br> } 
   
 </p> 
<p><strong>创建自己的规则引擎：</strong><br> 接下来，我们创建 RuleEngine 类。该类将处理规则的管理和执行。它维护一个规则列表，并提供添加新规则和根据这些规则过滤对象的方法。</p> 
<p><strong>实现过滤逻辑</strong><br> 在 RuleEngine 类的过滤方法中，我们遍历对象列表，并使用 Java 8 Stream API 中的 allMatch 方法应用每条规则。该方法会检查给定对象是否通过了所有规则。如果所有规则都通过，我们就会将该对象添加到过滤列表中。</p> 
<p><strong>import</strong> com.example.spring_boot_rule_engine_demo.rule.TestRule;</p> 
<p><strong>import</strong> java.util.ArrayList;<br> <strong>import</strong> java.util.List;</p> 
<p><strong>public</strong> <strong>class</strong> RuleEngine 
 
   { 
  <br> 
  <strong>private</strong> List 
  
    rules; 
   
 </p> 
<p>    <strong>public</strong> RuleEngine() {<!-- --><br> <strong>this</strong>.rules = <strong>new</strong> ArrayList&lt;&gt;();<br> }</p> 
<p>    <strong>public</strong> <strong>void</strong> addRule(TestRule rule) {<!-- --><br> rules.add(rule);<br> }</p> 
<p>    <strong>public</strong> List 
 
   filter(List 
  
    items) { 
   <br> List 
   
     filteredItems = 
    <strong>new</strong> ArrayList&lt;&gt;(); 
    <br> 
    <strong>for</strong> (T item : items) { 
    <br> 
    <strong>if</strong> (rules.stream().allMatch(rule -&gt; rule.getPredicate().test(item))) { 
    <br> filteredItems.add(item); 
    <br> } 
    <br> } 
    <br> 
    <strong>return</strong> filteredItems; 
    <br> } 
    <br> } 
    <br> 
    <strong>public</strong> 
    <strong>class</strong> User { 
    
   
 </p> 
<p>    <strong>private</strong> String name;<br> <strong>private</strong> <strong>int</strong> age;</p> 
<p>    <strong>public</strong> User(String name, <strong>int</strong> age) {<!-- --><br> <strong>this</strong>.name = name;<br> <strong>this</strong>.age = age;<br> }</p> 
<p>    <strong>public</strong> User() {<!-- --></p> 
<p>    }</p> 
<p>    <strong>public</strong> String getName() {<!-- --><br> <strong>return</strong> name;<br> }</p> 
<p>    <strong>public</strong> <strong>void</strong> setName(String name) {<!-- --><br> <strong>this</strong>.name = name;<br> }</p> 
<p>    <strong>public</strong> <strong>int</strong> getAge() {<!-- --><br> <strong>return</strong> age;<br> }</p> 
<p>    <strong>public</strong> <strong>void</strong> setAge(<strong>int</strong> age) {<!-- --><br> <strong>this</strong>.age = age;<br> }<br> }</p> 
<p>在 UserController.java 类中创建的获取所有用户 API 中，我们演示了规则引擎的用法。我们创建了一个用户对象列表，并用两条规则初始化了规则引擎：AGE_GREATER_THAN_30 和 NAME_STARTS_WITH_SUM。然后，我们调用规则引擎的过滤器方法，并传递用户对象列表。规则引擎会对每个用户应用规则，并返回过滤后的列表。</p> 
<p>最后，我们遍历过滤后的列表，返回符合指定规则的用户列表。</p> 
<p><strong>import</strong> com.example.spring_boot_rule_engine_demo.engine.RuleEngine;<br> <strong>import</strong> com.example.spring_boot_rule_engine_demo.model.User;<br> <strong>import</strong> com.example.spring_boot_rule_engine_demo.rule.Rule;<br> <strong>import</strong> org.springframework.web.bind.annotation.RequestMapping;<br> <strong>import</strong> org.springframework.web.bind.annotation.RestController;<br> <strong>import</strong> org.springframework.web.bind.annotation.GetMapping;<br> <strong>import</strong> java.util.ArrayList;<br> <strong>import</strong> java.util.List;</p> 
<p>@RestController<br> @RequestMapping("/user")<br> <strong>public</strong> <strong>class</strong> UserController {<!-- --><br> <br> @GetMapping<br> <strong>public</strong> List 
 
   getAllUser(){ 
  <br> RuleEngine 
  
    ruleEngine = 
   <strong>new</strong> RuleEngine&lt;&gt;(); 
   <br> ruleEngine.addRule(Rule.AGE_GREATER_THAN_30); 
   <br> ruleEngine.addRule(Rule.NAME_STARTS_WITH_SUM); 
   <br> List 
   
     filteredUser = ruleEngine.filter(userData()); 
    <br> 
    <strong>return</strong> filteredUser; 
    <br> } 
    
   
 </p> 
<p>    <strong>private</strong> List 
 
   userData() { 
  <br> List 
  
    users = 
   <strong>new</strong> ArrayList&lt;&gt;(); 
   <br> User user1 = 
   <strong>new</strong> User("sumit", 33); 
   <br> User user2 = 
   <strong>new</strong> User("agam", 13); 
   <br> User user3 = 
   <strong>new</strong> User("mohit", 23); 
   <br> User user4 = 
   <strong>new</strong> User("kailash", 43); 
   <br> users.add(user1); 
   <br> users.add(user2); 
   <br> users.add(user3); 
   <br> users.add(user4); 
   <br> 
   <strong>return</strong> users; 
   <br> } 
   
 </p> 
<p>}</p> 
<p>源码：<a href="https://github.com/sumitMultani/spring-boot-rule-engine-demo">Github</a></p> 
<p>更多：<a href="https://www.jdon.com/73913.html" rel="nofollow">https://www.jdon.com/73913.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5977c852dc421de01230c8a80f8bf195/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI智能体｜一分钟教你学会使用扣子Coze工作流</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b6cdab68f7da96f2171658332cd279a6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一文教你在k8s中部署单机版kafka（保姆级教程）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>