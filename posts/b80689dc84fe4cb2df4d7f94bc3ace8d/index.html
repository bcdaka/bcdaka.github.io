<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>æœ¬åœ°éƒ¨ç½² Llama 3.1ï¼šOllamaã€OpenWeb UI å’Œ Spring AI çš„ç»¼åˆæŒ‡å— - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b80689dc84fe4cb2df4d7f94bc3ace8d/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="æœ¬åœ°éƒ¨ç½² Llama 3.1ï¼šOllamaã€OpenWeb UI å’Œ Spring AI çš„ç»¼åˆæŒ‡å—">
  <meta property="og:description" content="ã€
æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Ollama åœ¨æœ¬åœ°éƒ¨ç½² Llama 3.1:8B æ¨¡å‹ï¼Œå¹¶é€šè¿‡ OpenWeb UI å’Œ Spring AI æ¥å¢å¼ºæ¨¡å‹äº¤äº’ä½“éªŒå’Œç®€åŒ– API çš„è°ƒç”¨è¿‡ç¨‹ã€‚
Ollama Ollama æ˜¯ä¸€ä¸ªå¼€æºçš„å¤§è¯­è¨€æ¨¡å‹æœåŠ¡å·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–å¤§æ¨¡å‹çš„æœ¬åœ°éƒ¨ç½²å’Œè¿è¡Œè¿‡ç¨‹ã€‚ç”¨æˆ·åªéœ€è¦è¾“å…¥ä¸€è¡Œå‘½ä»¤ï¼ˆå¦‚ï¼š ollama run llama3.1 ï¼‰ï¼Œå³å¯åœ¨æœ¬åœ°ç¡¬ä»¶ç¯å¢ƒä¸­éƒ¨ç½²å’Œä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ã€‚Ollama è¿˜æä¾›äº† REST API æ¥å£ï¼Œä¸‹æ–‡ä¸­ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ Spring AI é›†æˆ Ollamaï¼Œå®ç°ä¸å¤§æ¨¡å‹ API æ¥å£çš„äº¤äº’ã€‚
Ollama æ”¯æŒä¸‹è½½ Llamaã€Gemmaã€qwen å’Œ glm4 ç­‰å¤šç§ä¸»æµå¤§è¯­è¨€æ¨¡å‹å’Œä»£ç è¯­è¨€æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ å®˜ç½‘ æŸ¥çœ‹ Ollama æ”¯æŒçš„æ‰€æœ‰æ¨¡å‹åŠå…¶ç›¸å…³ä¿¡æ¯å’Œä½¿ç”¨å‘½ä»¤ã€‚ æœ¬æœºè¿è¡Œ 7B å‚æ•°é‡çš„æ¨¡å‹è‡³å°‘éœ€è¦ 8GB å†…å­˜ï¼Œè¿è¡Œ 13B å‚æ•°é‡çš„æ¨¡å‹è‡³å°‘éœ€è¦ 16GB å†…å­˜ï¼Œè¿è¡Œ 33B å‚æ•°é‡çš„æ¨¡å‹è‡³å°‘éœ€è¦ 32GB å†…å­˜ã€‚
æ¨¡å‹å‚æ•°å¤§å°ä½¿ç”¨å‘½ä»¤Llama 3.18B4.7GBollama run llama3.1Llama 3.170B40GBollama run llama3.1:70bLlama 3.1405B231GBollama run llama3.1:405bGemma 29B5.5GBollama run gemma2Gemma 227B16GBollama run gemma2:27bqwen27B4.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-30T11:07:54+08:00">
    <meta property="article:modified_time" content="2024-07-30T11:07:54+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">æœ¬åœ°éƒ¨ç½² Llama 3.1ï¼šOllamaã€OpenWeb UI å’Œ Spring AI çš„ç»¼åˆæŒ‡å—</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ã€</p> 
<blockquote> 
 <p>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Ollama åœ¨æœ¬åœ°éƒ¨ç½² Llama 3.1:8B æ¨¡å‹ï¼Œå¹¶é€šè¿‡ OpenWeb UI å’Œ Spring AI æ¥å¢å¼ºæ¨¡å‹äº¤äº’ä½“éªŒå’Œç®€åŒ– API çš„è°ƒç”¨è¿‡ç¨‹ã€‚</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/c2/3e/HnucsvPF_o.png" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ "></p> 
<h2><a id="Ollama_6"></a>Ollama</h2> 
<p>Ollama æ˜¯ä¸€ä¸ªå¼€æºçš„å¤§è¯­è¨€æ¨¡å‹æœåŠ¡å·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–å¤§æ¨¡å‹çš„æœ¬åœ°éƒ¨ç½²å’Œè¿è¡Œè¿‡ç¨‹ã€‚ç”¨æˆ·åªéœ€è¦è¾“å…¥ä¸€è¡Œå‘½ä»¤ï¼ˆå¦‚ï¼š <code>ollama run llama3.1</code> ï¼‰ï¼Œå³å¯åœ¨æœ¬åœ°ç¡¬ä»¶ç¯å¢ƒä¸­éƒ¨ç½²å’Œä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ã€‚Ollama è¿˜æä¾›äº† REST API æ¥å£ï¼Œä¸‹æ–‡ä¸­ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ Spring AI é›†æˆ Ollamaï¼Œå®ç°ä¸å¤§æ¨¡å‹ API æ¥å£çš„äº¤äº’ã€‚</p> 
<p>Ollama æ”¯æŒä¸‹è½½ Llamaã€Gemmaã€qwen å’Œ glm4 ç­‰å¤šç§ä¸»æµå¤§è¯­è¨€æ¨¡å‹å’Œä»£ç è¯­è¨€æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Follama.com%2Flibrary" rel="nofollow" title="https://ollama.com/library">å®˜ç½‘</a> æŸ¥çœ‹ Ollama æ”¯æŒçš„æ‰€æœ‰æ¨¡å‹åŠå…¶ç›¸å…³ä¿¡æ¯å’Œä½¿ç”¨å‘½ä»¤ã€‚ <strong>æœ¬æœºè¿è¡Œ 7B å‚æ•°é‡çš„æ¨¡å‹è‡³å°‘éœ€è¦ 8GB å†…å­˜ï¼Œè¿è¡Œ 13B å‚æ•°é‡çš„æ¨¡å‹è‡³å°‘éœ€è¦ 16GB å†…å­˜ï¼Œè¿è¡Œ 33B å‚æ•°é‡çš„æ¨¡å‹è‡³å°‘éœ€è¦ 32GB å†…å­˜ã€‚</strong></p> 
<table><thead><tr><th>æ¨¡å‹</th><th>å‚æ•°</th><th>å¤§å°</th><th>ä½¿ç”¨å‘½ä»¤</th></tr></thead><tbody><tr><td>Llama 3.1</td><td>8B</td><td>4.7GB</td><td><code>ollama run llama3.1</code></td></tr><tr><td>Llama 3.1</td><td>70B</td><td>40GB</td><td><code>ollama run llama3.1:70b</code></td></tr><tr><td>Llama 3.1</td><td>405B</td><td>231GB</td><td><code>ollama run llama3.1:405b</code></td></tr><tr><td>Gemma 2</td><td>9B</td><td>5.5GB</td><td><code>ollama run gemma2</code></td></tr><tr><td>Gemma 2</td><td>27B</td><td>16GB</td><td><code>ollama run gemma2:27b</code></td></tr><tr><td>qwen2</td><td>7B</td><td>4.4GB</td><td><code>ollama run qwen2</code></td></tr><tr><td>qwen2</td><td>72B</td><td>41GB</td><td><code>ollama run qwen2:72b</code></td></tr><tr><td>glm4</td><td>9B</td><td>5.5GB</td><td><code>ollama run glm4</code></td></tr></tbody></table> 
<h3><a id="_24"></a>ä¸‹è½½</h3> 
<p>è®¿é—® <a href="https://link.juejin.cn/?target=https%3A%2F%2Follama.com%2Fdownload" rel="nofollow" title="https://ollama.com/download">Ollama å®˜ç½‘</a>ï¼Œé€‰æ‹©æ“ä½œç³»ç»Ÿï¼Œç„¶åç‚¹å‡» download æŒ‰é’®è¿›è¡Œä¸‹è½½ã€‚<strong>æ“ä½œç³»ç»Ÿè¦æ±‚ MacOS 11 å’Œ Windows 10 åŠä»¥ä¸Šç‰ˆæœ¬</strong>ã€‚ä¸‹è½½å®Œæˆåçš„ Ollama å…¶å®æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ Ollamaã€‚ï¼ˆæ‰§è¡Œ <code>ollama --help</code> å¯æŸ¥çœ‹ Ollama æä¾›çš„çš„å‘½ä»¤ï¼‰</p> 
<p><img src="https://images2.imgbox.com/5f/83/QDNLDKVw_o.png" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ "></p> 
<h3><a id="_Llama_31_31"></a>éƒ¨ç½² Llama 3.1</h3> 
<p>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ <code>ollama run llama3.1</code> ï¼Œå³å¯ä¸‹è½½ Llama3.1:8B æ¨¡å‹ã€‚æ¨¡å‹ä¸‹è½½å®Œæˆåï¼Œä¼šè‡ªåŠ¨å¯åŠ¨å¤§æ¨¡å‹ï¼Œè¿›å…¥å‘½ä»¤è¡Œäº¤äº’æ¨¡å¼ï¼Œç›´æ¥è¾“å…¥æŒ‡ä»¤ï¼Œå°±å¯ä»¥å’Œæ¨¡å‹è¿›è¡Œå¯¹è¯äº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/9e/cd/1xY2qwmp_o.png" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ "></p> 
<p>é€šè¿‡ Ollamaï¼Œæˆ‘ä»¬è½»æ¾çš„å®ç°äº†æœ¬åœ°å¤§æ¨¡å‹çš„éƒ¨ç½²å’Œå‘½ä»¤è¡Œå¼çš„äº¤äº’ï¼Œä½†æ˜¯ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨å¤§æ¨¡å‹ï¼Œä»¥åŠå¯¹å¤§æ¨¡å‹è¿›è¡Œç®¡ç†å’Œé…ç½®ç­‰æ–¹é¢çš„éœ€æ±‚ï¼Œå°±éœ€è¦å€ŸåŠ© Ollama ç¤¾åŒºä¸­ä¸€äº›å¼ºå¤§çš„å·¥å…·äº†ï¼Œå…¶ä¸­ä»£è¡¨æ€§çš„å·¥å…·ä¹‹ä¸€æ˜¯ OpenWeb UIï¼ˆä¹‹å‰ç§°ä¸º Ollama WebUIï¼‰ã€‚</p> 
<h2><a id="OpenWeb_UI_40"></a>OpenWeb UI</h2> 
<p>OpenWeb UI æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œä¸”æ˜“äºä½¿ç”¨çš„å¤§æ¨¡å‹ç®¡ç†å·¥å…·ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªç›´è§‚çš„å›¾å½¢åŒ–ç•Œé¢ï¼Œä»¥åŠå¹¿æ³›çš„åŠŸèƒ½å’Œçµæ´»çš„é…ç½®é€‰é¡¹ã€‚</p> 
<ul><li>æ–¹ä¾¿éƒ¨ç½²ï¼šä½¿ç”¨ Docker å®ç°ç®€å•å¿«æ·çš„éƒ¨ç½²ã€‚</li><li>ç”¨æˆ·å‹å¥½çš„é¡µé¢ï¼šå›½é™…åŒ–å¤šè¯­è¨€æ”¯æŒï¼Œæä¾›å¤šç§ä¸»é¢˜æ ·å¼ï¼Œå“åº”å¼è®¾è®¡ï¼Œæ¨¡å‹å‚æ•°ã€Prompt ç­‰ä¾¿æ·é…ç½®ã€‚</li><li>åŠŸèƒ½ä¸°å¯Œï¼šæœ¬åœ° RAG æ”¯æŒï¼ŒWeb æµè§ˆåŠŸèƒ½ï¼ˆå¯ä»¥åœ¨å¯¹è¯ä¸­è®¿é—®ç½‘ç«™ï¼‰ï¼Œè¯­éŸ³äº¤äº’ç­‰ã€‚</li><li>API æ”¯æŒï¼šæ”¯æŒ OpenAI API å’Œå…¶ä»–å…¼å®¹ APIã€‚</li><li>å¤šæ¨¡å‹æ”¯æŒï¼šæ”¯æŒåŒæ—¶ç®¡ç†å’Œæ“ä½œå¤šä¸ªå¤§è¯­è¨€æ¨¡å‹ã€‚</li></ul> 
<h3><a id="_51"></a>ä¸‹è½½</h3> 
<p>éƒ¨ç½² OpenWeb UI éœ€è¦ä½¿ç”¨ Docker ç¯å¢ƒï¼Œæˆ‘æœ¬æœºçš„ Docker ç‰ˆæœ¬æ˜¯ 24.0.2ã€‚OpenWeb UI æä¾›äº†é›†æˆ Ollama çš„éƒ¨ç½²æ–¹å¼ï¼Œ å› ä¸º Ollama å·²ç»ä¸‹è½½åˆ°æˆ‘æœ¬æœºä¸Šäº†ï¼Œæ‰€ä»¥åªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®Œæˆéƒ¨ç½²ã€‚</p> 
<pre><code>docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main

</code></pre> 
<p>å®¹å™¨å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥è®¿é—® 3000 ç«¯å£ï¼ŒæŸ¥çœ‹é¡µé¢ã€‚é¦–æ¬¡ç™»é™†éœ€è¦å…ˆå¡«å†™é‚®ç®±å’Œå¯†ç æ³¨å†Œè´¦å·ã€‚ç™»é™†è¿›æ¥åï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒOpenWeb UI å·²ç»è‡ªåŠ¨åŠ è½½åˆ°äº†æˆ‘ä»¬æœ¬åœ°éƒ¨ç½²çš„ Llama3.1 æ¨¡å‹ã€‚</p> 
<p><img src="https://images2.imgbox.com/4b/69/RlcvCu0A_o.png" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ "></p> 
<p>åœ¨æ¨¡å‹ç¼–è¾‘é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ¨¡å‹çš„é…ç½®å‚æ•°å’Œ Prompt ç­‰ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨ Document å’Œ Tools ç­‰å·¥å…·æ¥å¢å¼ºæ¨¡å‹çš„èƒ½åŠ›å’Œä½¿ç”¨ä½“éªŒã€‚</p> 
<p><img src="https://images2.imgbox.com/93/2e/oezayeuL_o.png" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ "></p> 
<h2><a id="Spring_AI_69"></a>Spring AI</h2> 
<p>Spring AI æ˜¯ Spring ç”Ÿæ€é‡Œäººå·¥æ™ºèƒ½æ–¹å‘çš„åº”ç”¨æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸å„ç§å¤§è¯­è¨€æ¨¡å‹äº¤äº’çš„é«˜çº§æŠ½è±¡æ¥å£ï¼Œæå¤§åœ°ç®€åŒ–äº†Java äººå·¥æ™ºèƒ½åº”ç”¨ç¨‹åºçš„å¼€å‘è¿‡ç¨‹ï¼Œè®© Java å¼€å‘è€…ä¹Ÿèƒ½å¤Ÿå¼€å‘ AI åº”ç”¨ã€‚</p> 
<p>æ¥ä¸‹æ¥å°†è¯¦ç»†ä»‹ç» Spring AI çš„ä½¿ç”¨æµç¨‹ï¼Œä»¥åŠå¦‚ä½•è°ƒç”¨ Ollama çš„ API æ¥å£ï¼Œä¸æˆ‘ä»¬æœ¬åœ°çš„ Llama 3.1 è¿›è¡Œäº¤äº’ã€‚</p> 
<h3><a id="_Ollama_76"></a>é›†æˆ Ollama</h3> 
<ol><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ Spring Boot é¡¹ç›®ï¼Œç‰ˆæœ¬è¦æ±‚ Spring Boot 3 + JDK 17ã€‚</li><li>å¼•å…¥ Spring AI + Ollama ä¾èµ–ã€‚</li></ol> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.3.1&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.cleaner&lt;/groupId&gt;
    &lt;artifactId&gt;culture-ai&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;Cleaner-ai&lt;/name&gt;
    &lt;description&gt;culture-ai&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
        &lt;spring-ai.version&gt;1.0.0-SNAPSHOT&lt;/spring-ai.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;!-- ollama --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
            &lt;artifactId&gt;spring-ai-ollama-spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
        &lt;!-- spring ai --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
                &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt;
                &lt;version&gt;${spring-ai.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;repositories&gt;
        &lt;!-- spring ai --&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;name&gt;Spring Snapshots&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
            &lt;releases&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/releases&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

&lt;/project&gt;

</code></pre> 
<ol start="3"><li>ç¼–å†™ application.yaml é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  Ollama çš„ç›¸å…³é…ç½®ã€‚</li></ol> 
<pre><code>server:
  port: 8888
spring:
  application:
    name: Cleaner-AI
  ai:
    ollama:
      # ollama API Server åœ°å€
      base-url: http://localhost:11434
      chat:
        enabled: true
        # ä½¿ç”¨çš„æ¨¡å‹åç§°
        model:
          llama3.1:8b
        options:
          temperature: 0.7

</code></pre> 
<ol start="4"><li>ç¼–å†™æ¥å£ã€‚</li></ol> 
<pre><code>package com.cleaner.ai.controller;

import jakarta.annotation.Resource;
import org.springframework.ai.chat.messages.UserMessage;
import org.springframework.ai.chat.model.ChatResponse;
import org.springframework.ai.chat.prompt.Prompt;
import org.springframework.ai.ollama.OllamaChatModel;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
import reactor.core.publisher.Flux;

@RestController
@RequestMapping("/ollama")
public class OllamaController {


    @Resource
    private OllamaChatModel ollamaChatModel;


    /**
     * æµå¼å¯¹è¯
     *
     * @param message ç”¨æˆ·æŒ‡ä»¤
     * @return
     */
    @GetMapping("/streamChat")
    public Flux&lt;ChatResponse&gt; generateStream(@RequestParam("message") String message) {
        message = "è¯·ä½¿ç”¨ä¸­æ–‡ç®€ä½“å›ç­”ï¼š" + message;
        Prompt prompt = new Prompt(new UserMessage(message));
        return ollamaChatModel.stream(prompt);
    }

    /**
     * æ™®é€šå¯¹è¯
     * @param message   ç”¨æˆ·æŒ‡ä»¤
     * @return
     */
    @GetMapping("/chat")
    public String generate(@RequestParam("message") String message) {
        message = "è¯·ä½¿ç”¨ä¸­æ–‡ç®€ä½“å›ç­”ï¼š" + message;
        Prompt prompt = new Prompt(new UserMessage(message));
        ChatResponse chatResponse = ollamaChatModel.call(prompt);
        String content = chatResponse.getResult().getOutput().getContent();
        System.out.println("content = " + content);
        return chatResponse.toString();
    }
}

</code></pre> 
<ol start="5"><li>è°ƒç”¨æ¥å£ï¼Œå¯ä»¥çœ‹åˆ° API æ¥å£è°ƒç”¨æˆåŠŸã€‚ï¼ˆ8B æ¨¡å‹ç”Ÿæˆçš„å›ç­”å†…å®¹è¿˜æ˜¯æ¯”è¾ƒæœ‰é™ï¼‰</li></ol> 
<p><img src="https://images2.imgbox.com/00/bf/mxvL2kSc_o.png" alt="å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ "></p> 
<h2><a id="_245"></a>æ€»ç»“</h2> 
<p>æœ¬åœ°éƒ¨ç½²çš„å¤§æ¨¡å‹å¯ä»¥è„±ç¦»ç½‘ç»œç¦»çº¿ä½¿ç”¨ï¼Œä½†æ˜¯è¦è¾¾åˆ°å®é™…ä½¿ç”¨çš„è¦æ±‚ï¼Œè¿˜éœ€è¦å¯¹æ¨¡å‹è¿›è¡Œç»†è‡´åŒ–çš„é…ç½®ï¼Œå½“ç„¶éƒ¨ç½²æ¨¡å‹çš„å‚æ•°é‡è¶Šå¤§ï¼Œä½¿ç”¨æ•ˆæœä¼šæ›´å¥½ï¼Œä½†ä¹Ÿè¦è€ƒè™‘æœ¬æœºç”µè„‘çš„é…ç½®é™åˆ¶ã€‚å¯¹äºå­¦ä¹ äº†è§£å¤§æ¨¡å‹åŠå…¶ç›¸å…³çš„æŠ€æœ¯çŸ¥è¯†è€Œè¨€ï¼Œåœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œæœ¬æœºéƒ¨ç½²ç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p> 
<h3><a id="AI_250"></a>å¦‚ä½•å­¦ä¹ AIå¤§æ¨¡å‹ï¼Ÿ</h3> 
<p>æˆ‘åœ¨ä¸€çº¿äº’è”ç½‘ä¼ä¸šå·¥ä½œåä½™å¹´é‡Œï¼ŒæŒ‡å¯¼è¿‡ä¸å°‘åŒè¡Œåè¾ˆã€‚å¸®åŠ©å¾ˆå¤šäººå¾—åˆ°äº†å­¦ä¹ å’Œæˆé•¿ã€‚</p> 
<p>æˆ‘æ„è¯†åˆ°æœ‰å¾ˆå¤šç»éªŒå’ŒçŸ¥è¯†å€¼å¾—åˆ†äº«ç»™å¤§å®¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æˆ‘ä»¬çš„èƒ½åŠ›å’Œç»éªŒè§£ç­”å¤§å®¶åœ¨äººå·¥æ™ºèƒ½å­¦ä¹ ä¸­çš„å¾ˆå¤šå›°æƒ‘ï¼Œæ‰€ä»¥åœ¨å·¥ä½œç¹å¿™çš„æƒ…å†µä¸‹è¿˜æ˜¯åšæŒå„ç§æ•´ç†å’Œåˆ†äº«ã€‚ä½†è‹¦äºçŸ¥è¯†ä¼ æ’­é€”å¾„æœ‰é™ï¼Œå¾ˆå¤šäº’è”ç½‘è¡Œä¸šæœ‹å‹æ— æ³•è·å¾—æ­£ç¡®çš„èµ„æ–™å¾—åˆ°å­¦ä¹ æå‡ï¼Œæ•…æ­¤å°†å¹¶å°†é‡è¦çš„AIå¤§æ¨¡å‹èµ„æ–™åŒ…æ‹¬AIå¤§æ¨¡å‹å…¥é—¨å­¦ä¹ æ€ç»´å¯¼å›¾ã€ç²¾å“AIå¤§æ¨¡å‹å­¦ä¹ ä¹¦ç±æ‰‹å†Œã€è§†é¢‘æ•™ç¨‹ã€å®æˆ˜å­¦ä¹ ç­‰å½•æ’­è§†é¢‘å…è´¹åˆ†äº«å‡ºæ¥ã€‚</p> 
<p><img src="https://images2.imgbox.com/ee/dd/Qm5kYBnI_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç¬¬ä¸€é˜¶æ®µï¼š ä»å¤§æ¨¡å‹ç³»ç»Ÿè®¾è®¡å…¥æ‰‹ï¼Œè®²è§£å¤§æ¨¡å‹çš„ä¸»è¦æ–¹æ³•ï¼›</p> 
<p>ç¬¬äºŒé˜¶æ®µï¼š åœ¨é€šè¿‡å¤§æ¨¡å‹æç¤ºè¯å·¥ç¨‹ä»Promptsè§’åº¦å…¥æ‰‹æ›´å¥½å‘æŒ¥æ¨¡å‹çš„ä½œç”¨ï¼›</p> 
<p>ç¬¬ä¸‰é˜¶æ®µï¼š å¤§æ¨¡å‹å¹³å°åº”ç”¨å¼€å‘å€ŸåŠ©é˜¿é‡Œäº‘PAIå¹³å°æ„å»ºç”µå•†é¢†åŸŸè™šæ‹Ÿè¯•è¡£ç³»ç»Ÿï¼›</p> 
<p>ç¬¬å››é˜¶æ®µï¼š å¤§æ¨¡å‹çŸ¥è¯†åº“åº”ç”¨å¼€å‘ä»¥LangChainæ¡†æ¶ä¸ºä¾‹ï¼Œæ„å»ºç‰©æµè¡Œä¸šå’¨è¯¢æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼›</p> 
<p>ç¬¬äº”é˜¶æ®µï¼š å¤§æ¨¡å‹å¾®è°ƒå¼€å‘å€ŸåŠ©ä»¥å¤§å¥åº·ã€æ–°é›¶å”®ã€æ–°åª’ä½“é¢†åŸŸæ„å»ºé€‚åˆå½“å‰é¢†åŸŸå¤§æ¨¡å‹ï¼›</p> 
<p>ç¬¬å…­é˜¶æ®µï¼š ä»¥SDå¤šæ¨¡æ€å¤§æ¨¡å‹ä¸ºä¸»ï¼Œæ­å»ºäº†æ–‡ç”Ÿå›¾å°ç¨‹åºæ¡ˆä¾‹ï¼›</p> 
<p>ç¬¬ä¸ƒé˜¶æ®µï¼š ä»¥å¤§æ¨¡å‹å¹³å°åº”ç”¨ä¸å¼€å‘ä¸ºä¸»ï¼Œé€šè¿‡æ˜Ÿç«å¤§æ¨¡å‹ï¼Œæ–‡å¿ƒå¤§æ¨¡å‹ç­‰æˆç†Ÿå¤§æ¨¡å‹æ„å»ºå¤§æ¨¡å‹è¡Œä¸šåº”ç”¨ã€‚</p> 
<p><img src="https://images2.imgbox.com/ed/05/fMI9YXng_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ğŸ‘‰å­¦ä¼šåçš„æ”¶è·ï¼šğŸ‘ˆ<br> â€¢ åŸºäºå¤§æ¨¡å‹å…¨æ ˆå·¥ç¨‹å®ç°ï¼ˆå‰ç«¯ã€åç«¯ã€äº§å“ç»ç†ã€è®¾è®¡ã€æ•°æ®åˆ†æç­‰ï¼‰ï¼Œé€šè¿‡è¿™é—¨è¯¾å¯è·å¾—ä¸åŒèƒ½åŠ›ï¼›</p> 
<p>â€¢ èƒ½å¤Ÿåˆ©ç”¨å¤§æ¨¡å‹è§£å†³ç›¸å…³å®é™…é¡¹ç›®éœ€æ±‚ï¼š å¤§æ•°æ®æ—¶ä»£ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå’Œæœºæ„éœ€è¦å¤„ç†æµ·é‡æ•°æ®ï¼Œåˆ©ç”¨å¤§æ¨¡å‹æŠ€æœ¯å¯ä»¥æ›´å¥½åœ°å¤„ç†è¿™äº›æ•°æ®ï¼Œæé«˜æ•°æ®åˆ†æå’Œå†³ç­–çš„å‡†ç¡®æ€§ã€‚å› æ­¤ï¼ŒæŒæ¡å¤§æ¨¡å‹åº”ç”¨å¼€å‘æŠ€èƒ½ï¼Œå¯ä»¥è®©ç¨‹åºå‘˜æ›´å¥½åœ°åº”å¯¹å®é™…é¡¹ç›®éœ€æ±‚ï¼›</p> 
<p>â€¢ åŸºäºå¤§æ¨¡å‹å’Œä¼ä¸šæ•°æ®AIåº”ç”¨å¼€å‘ï¼Œå®ç°å¤§æ¨¡å‹ç†è®ºã€æŒæ¡GPUç®—åŠ›ã€ç¡¬ä»¶ã€LangChainå¼€å‘æ¡†æ¶å’Œé¡¹ç›®å®æˆ˜æŠ€èƒ½ï¼Œ å­¦ä¼šFine-tuningå‚ç›´è®­ç»ƒå¤§æ¨¡å‹ï¼ˆæ•°æ®å‡†å¤‡ã€æ•°æ®è’¸é¦ã€å¤§æ¨¡å‹éƒ¨ç½²ï¼‰ä¸€ç«™å¼æŒæ¡ï¼›</p> 
<p>â€¢ èƒ½å¤Ÿå®Œæˆæ—¶ä¸‹çƒ­é—¨å¤§æ¨¡å‹å‚ç›´é¢†åŸŸæ¨¡å‹è®­ç»ƒèƒ½åŠ›ï¼Œæé«˜ç¨‹åºå‘˜çš„ç¼–ç èƒ½åŠ›ï¼š å¤§æ¨¡å‹åº”ç”¨å¼€å‘éœ€è¦æŒæ¡æœºå™¨å­¦ä¹ ç®—æ³•ã€æ·±åº¦å­¦ä¹ æ¡†æ¶ç­‰æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯çš„æŒæ¡å¯ä»¥æé«˜ç¨‹åºå‘˜çš„ç¼–ç èƒ½åŠ›å’Œåˆ†æèƒ½åŠ›ï¼Œè®©ç¨‹åºå‘˜æ›´åŠ ç†Ÿç»ƒåœ°ç¼–å†™é«˜è´¨é‡çš„ä»£ç ã€‚</p> 
<p><img src="https://images2.imgbox.com/fd/40/BpImhi2t_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p><em><strong>1.AIå¤§æ¨¡å‹å­¦ä¹ è·¯çº¿å›¾<br> 2.100å¥—AIå¤§æ¨¡å‹å•†ä¸šåŒ–è½åœ°æ–¹æ¡ˆ<br> 3.100é›†å¤§æ¨¡å‹è§†é¢‘æ•™ç¨‹<br> 4.200æœ¬å¤§æ¨¡å‹PDFä¹¦ç±<br> 5.LLMé¢è¯•é¢˜åˆé›†<br> 6.AIäº§å“ç»ç†èµ„æºåˆé›†</strong></em></p> 
</blockquote> 
<p>ğŸ‘‰è·å–æ–¹å¼ï¼š<br> ğŸ˜æœ‰éœ€è¦çš„å°ä¼™ä¼´ï¼Œå¯ä»¥ä¿å­˜å›¾ç‰‡åˆ°wxæ‰«æäºŒvç å…è´¹é¢†å–ã€ä¿è¯100%å…è´¹ã€‘ğŸ†“</p> 
<p><img src="https://images2.imgbox.com/1e/77/L24LeHG0_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9b580837c71f6c53db90a49de21b2352/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æˆ‘å‡ºä¸€é“é¢è¯•é¢˜ï¼Œçœ‹çœ‹ä½ èƒ½æ‹¿ 3k è¿˜æ˜¯ 30kï¼</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d95bbb4262a9799847b1eec299baac19/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ExcelJSï¼šè½»æ¾å®ç°Excelæ–‡ä»¶çš„è¯»å–ã€æ“ä½œä¸å†™å…¥</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>