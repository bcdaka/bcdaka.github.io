<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JDK 8 升级 17 及 springboot 2.x 升级 3.x 指南 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/dc6f82f8c89adec3b9f1f157657ebd65/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="JDK 8 升级 17 及 springboot 2.x 升级 3.x 指南">
  <meta property="og:description" content="JDK 8 升级 17 简介 从 JDK 8 升级到 JDK 17 的过程中，有几个主要的变化，特别是 Java Platform Module System (JPMS) 的引入，以及一些包路径的调整。以下是与 JDK 17 相关的一些重要变化：
Java Platform Module System (JPMS)
模块化：JDK 9 引入了模块系统，将标准 Java 库划分为多个模块。这影响了 JDK 17 中的包结构和类的组织方式。模块路径：JDK 11 引入了 --module-path 和 --add-modules 选项，允许用户指定模块路径和加载特定模块。 Java EE APIs 移除
JAX-RS：javax.ws.rs.* 包现在不在标准 Java SE 平台上。JAX-WS：javax.xml.ws.* 包现在不在标准 Java SE 平台上。JAX-B：javax.xml.bind.* 包现在不在标准 Java SE 平台上。 其他变化
JavaFX：JavaFX 已经从标准 Java SE 平台中移除，现在作为一个独立的模块存在。
如果应用使用了 JavaFX，确保已经添加了 JavaFX 模块到应用中
JSR 355：JSR 355 定义了一些与 JavaFX 相关的包，这些包也不再包含在标准 Java SE 平台上。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-29T14:23:02+08:00">
    <meta property="article:modified_time" content="2024-07-29T14:23:02+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JDK 8 升级 17 及 springboot 2.x 升级 3.x 指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="JDK_8__17_0"></a>JDK 8 升级 17</h2> 
<h3><a id="_2"></a>简介</h3> 
<p>从 JDK 8 升级到 JDK 17 的过程中，有几个主要的变化，特别是 Java Platform Module System (JPMS) 的引入，以及一些包路径的调整。以下是与 JDK 17 相关的一些重要变化：</p> 
<ul><li> <p><strong>Java Platform Module System (JPMS)</strong></p> 
  <ul><li><strong>模块化</strong>：JDK 9 引入了模块系统，将标准 Java 库划分为多个模块。这影响了 JDK 17 中的包结构和类的组织方式。</li><li><strong>模块路径</strong>：JDK 11 引入了 <code>--module-path</code> 和 <code>--add-modules</code> 选项，允许用户指定模块路径和加载特定模块。</li></ul> </li><li> <p><strong>Java EE APIs 移除</strong></p> 
  <ul><li><strong>JAX-RS</strong>：<code>javax.ws.rs.*</code> 包现在不在标准 Java SE 平台上。</li><li><strong>JAX-WS</strong>：<code>javax.xml.ws.*</code> 包现在不在标准 Java SE 平台上。</li><li><strong>JAX-B</strong>：<code>javax.xml.bind.*</code> 包现在不在标准 Java SE 平台上。</li></ul> </li><li> <p><strong>其他变化</strong></p> 
  <ul><li> <p><strong>JavaFX</strong>：JavaFX 已经从标准 Java SE 平台中移除，现在作为一个独立的模块存在。</p> <p>如果应用使用了 JavaFX，确保已经添加了 JavaFX 模块到应用中</p> </li><li> <p><strong>JSR 355</strong>：JSR 355 定义了一些与 JavaFX 相关的包，这些包也不再包含在标准 Java SE 平台上。</p> </li></ul> </li><li> <p><strong>JDK 17 中的新特性</strong></p> 
  <ul><li><strong>JEP 391: Foreign Function &amp; Memory API (Incubator)</strong>：提供了与外部代码和内存交互的能力。</li><li><strong>JEP 403: Sealed Classes</strong>：允许类声明为密封，以限制继承。</li><li><strong>JEP 404: Pattern Matching for switch (Preview)</strong>：引入了模式匹配支持到 <code>switch</code> 语句中。</li><li><strong>JEP 414: Vector API (Fourth Incubator)</strong>：提供了一种利用向量硬件指令的途径。</li></ul> </li></ul> 
<br> 
<h3><a id="javax__jakarta_34"></a>javax.* 包移到 jakarta.*</h3> 
<ul><li> <p>Jakarta EE 技术栈：随着 Java EE 转变为 Jakarta EE，许多 <code>javax.*</code> 包已经被迁移到 <code>jakarta.*</code>包下。这对于使用 Java Persistence API (JPA)、JSF、EJB 等技术的应用尤为重要。</p> 
  <ul><li><strong>javax.persistence.* -&gt; jakarta.persistence.</strong>*</li><li><strong>javax.faces.* -&gt; jakarta.faces.</strong>*</li><li><strong>javax.ejb.* -&gt; jakarta.ejb.</strong>*</li><li><strong>javax.servlet.* -&gt; jakarta.servlet.</strong>*</li><li><strong>javax.servlet.jsp.* -&gt; jakarta.servlet.jsp.</strong>*</li><li><strong>javax.websocket.* -&gt; jakarta.websocket.</strong>*</li><li><strong>javax.naming.* -&gt; jakarta.naming.</strong>*</li><li><strong>javax.sql.* -&gt; jakarta.sql.</strong>*</li><li><strong>javax.transaction.* -&gt; jakarta.transaction.</strong>*</li></ul> <p>JDK 8 升级到 JDK 17 需确保代码中引用了正确的包名。应该使用 <code>jakarta.*</code> 而不是 <code>javax.*</code>。</p> </li></ul> 
<br> 
<h3><a id="maven_pom__java__52"></a>maven pom 中更新 java 版本</h3> 
<ul><li> <p>建议在父项目添加全局变量 java.version，然后在 maven-compiler-plugin 引用</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.10.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>${java.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>${java.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ul> 
<br> 
<h2><a id="springboot_2x__3x_81"></a>springboot 2.x 升级 3.x</h2> 
<h3><a id="springboot__cloudalibabacloud__83"></a>spring-boot 与 cloud、alibaba-cloud 的版本对应</h3> 
<ul><li> <p>spring-cloud 与 spring-boot 的版本对应详见 <a href="" rel="nofollow">spring-cloud 官方文档</a></p> <p><img src="https://images2.imgbox.com/07/9a/VAW6Ss4P_o.png" alt="在这里插入图片描述"></p> </li><li> <p>spring-alibaba-cloud 与 spring-cloud、spring-boot 的版本对应详见 <a href="https://github.com/alibaba/spring-cloud-alibaba">spring-alibaba-cloud 官方文档</a></p> <p><img src="https://images2.imgbox.com/f6/78/7Xc4dVT1_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<br> 
<h3><a id="redis__97"></a>redis 默认配置调整</h3> 
<p>在 Springboot 2.x 的版本中，redis 的默认配置是 <code>spring.redis.*</code>，升级成 Springboot 3.x 以后，redis 的默认配置调整为了<code>spring.data.redis.*</code>。</p> 
<p>若继续使用 Springboot2.x 的 redis 配置，会导致获取不到 redis 的配置。</p> 
<br> 
<h3><a id="SpringBoot_3x__Querydsl_105"></a>SpringBoot 3.x 整合 Querydsl</h3> 
<p><strong>主要问题</strong>：springboot 升级 3.0，jpa 包路径从 <code>javax</code> 改成 <code>jakarta</code>，在默认情况下，无法生存 <strong>Q 类</strong>，也没办法使用<code>JPAQuery</code></p> 
<p><strong>解决方法</strong>：</p> 
<ol><li> <p>引入依赖。<strong>重点：classifier 标签</strong></p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.querydsl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>querydsl-jpa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classifier</span><span class="token punctuation">&gt;</span></span>jakarta<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classifier</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.querydsl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>querydsl-apt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>classifier</span><span class="token punctuation">&gt;</span></span>jakarta<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>classifier</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li><li> <p>引入 maven plugin</p> <pre><code class="prism language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysema.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>apt-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!--&lt;goals&gt;--&gt;</span>
		<span class="token comment">&lt;!--	&lt;goal&gt;process&lt;/goal&gt;--&gt;</span>
		<span class="token comment">&lt;!--&lt;/goals&gt;--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>target/generated-sources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>processor</span><span class="token punctuation">&gt;</span></span>com.querydsl.apt.jpa.JPAAnnotationProcessor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>processor</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>

</code></pre> <p><strong>注意</strong>：每个项目配置可能会有差别，在编译时可能会报错：<code>Attempt to recreate a file for type xxx</code>，导致此错误的情况也不太一致。可能的原因之一是因为配置了 <strong>goals</strong>，所以此处注释掉 goals，其他情况不一定能适用此方式。</p> </li></ol> 
<br> 
<h3><a id="_157"></a>其他注意事项</h3> 
<ul><li> <p><strong>依赖循环引用 报错</strong></p> <p>如果升级前的 Spring Boot 版本早于 2.6.0，且存在 spring ioc 对象的循环引用，则需要添加允许循环引用的配置，否则报错</p> <pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">allow-circular-references</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> </li><li> <p><strong>WebMvcConfigurerAdapter.class 找不到报错</strong></p> <p>Spring Boot 3 基于 Spring Framework 6，而在 Spring Framework 5.3 中，<code>WebMvcConfigurerAdapter</code> 类已经被弃用，并在后续版本中移除。</p> <p><strong>解决方案</strong></p> 
  <ol><li> <p><strong>使用 WebMvcConfigurer 接口</strong>：</p> <p><code>WebMvcConfigurerAdapter</code> 是一个抽象适配器类，用于实现 <code>WebMvcConfigurer</code> 接口。</p> <p>在 Spring Framework 6 中，可以直接实现 <code>WebMvcConfigurer</code> 接口来定制 Web MVC 的行为。</p> </li><li> <p><strong>创建自定义配置类</strong>：</p> <p>创建一个新的类，实现 <code>WebMvcConfigurer</code> 接口，并重写需要的方法。</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 自定义资源处理</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configurePathMatch</span><span class="token punctuation">(</span><span class="token class-name">PathMatchConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 自定义路径匹配</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 其他需要的方法</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> </li><li> <p><strong>Spring Boot 3.x 支持优雅退出</strong>，添加以下配置开启</p> <pre><code class="prism language-yaml"><span class="token comment"># 打开优雅退出</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">shutdown</span><span class="token punctuation">:</span> graceful
<span class="token comment"># 多长时间后强制杀掉进程</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">lifecycle</span><span class="token punctuation">:</span>
    <span class="token key atrule">timeout-per-shutdown-phase</span><span class="token punctuation">:</span> 30s
</code></pre> </li></ul> 
<br> 
<h2><a id="maven__maven__214"></a>maven 及 maven 插件的版本升级</h2> 
<h3><a id="maven__216"></a>maven 版本升级</h3> 
<p>为了确保 Maven 版本与 Java 17 兼容，应该使用一个较新的 Maven 版本。Java 17 是一个长期支持 (LTS) 版本，它是在 2021 年 9 月发布的。因此，应该使用 Maven 3.6.0 或更高版本来确保良好的兼容性。</p> 
<p>以下是几个推荐的 Maven 版本及其发布日期：</p> 
<ul><li>Maven 3.6.0 - 发布于 2019 年 2 月 10 日</li><li>Maven 3.6.3 - 发布于 2020 年 3 月 10 日</li><li>Maven 3.8.1 - 发布于 2021 年 2 月 18 日</li><li>Maven 3.8.5 - 发布于 2022 年 5 月 23 日</li></ul> 
<p>Maven 3.8.5 是一个较为推荐的版本，因为它包含了对 Java 17 的良好支持以及一些重要的安全修复和改进。</p> 
<br> 
<p><strong>升级 Maven 版本</strong></p> 
<ol><li> <p><strong>查看当前 Maven 版本</strong>:</p> <p>打开终端或命令提示符，运行以下命令来查看已安装的 Maven 版本：</p> <pre><code class="prism language-sh">mvn <span class="token parameter variable">--version</span>
</code></pre> <p>如果还没有安装 Maven，或者安装的版本较旧，可以按照下面的步骤安装或升级。</p> </li><li> <p><strong>安装或升级 Maven</strong>:</p> 
  <ul><li> <p><strong>Windows 用户</strong>:</p> 
    <ol><li>访问 <a href="https://maven.apache.org/download.cgi" rel="nofollow">Apache Maven 官方下载页面</a> 下载最新的 Maven 版本。</li><li>解压下载的文件到一个目录，例如 <code>C:\apache-maven-3.8.5</code>。</li><li>将 Maven 的 <code>bin</code> 目录添加到系统环境变量 <code>PATH</code> 中。</li><li>设置 <code>M2_HOME</code> 环境变量，值为 Maven 的安装目录。</li></ol> </li><li> <p><strong>Linux/macOS 用户</strong>:</p> 
    <ol><li> <p>使用包管理器安装 Maven，例如对于 Ubuntu/Debian 使用 <code>apt-get</code>，对于 macOS 使用 <code>brew</code>：</p> <pre><code class="prism language-sh"><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> maven
</code></pre> <p>或者使用 Homebrew：</p> <pre><code class="prism language-sh">brew <span class="token function">install</span> maven
</code></pre> </li><li> <p>或者从 Apache Maven 官网下载二进制分发包，解压缩到 <code>/usr/local</code> 或其他位置，并通过 <code>mvn --version</code> 确认安装成功。</p> </li></ol> </li></ul> </li><li> <p><strong>设置 Java 17 作为默认 JDK</strong>:</p> 
  <ul><li><strong>Windows 用户</strong>: 
    <ol><li>确保安装了 Java 17，并将其路径添加到环境变量 <code>JAVA_HOME</code> 中。</li><li>设置 <code>JAVA_HOME</code> 环境变量指向 Java 17 的安装目录。</li></ol> </li><li><strong>Linux/macOS 用户</strong>: 
    <ol><li>安装 Java 17，例如使用 <code>sdkman</code> 或者直接从 Oracle 或 Adoptium 下载。</li><li>设置 <code>JAVA_HOME</code> 环境变量指向 Java 17 的安装目录。</li><li>确保 <code>JAVA_HOME</code> 和 <code>PATH</code> 环境变量被正确设置。</li></ol> </li></ul> </li><li> <p><strong>验证 Maven 和 Java 版本</strong>:</p> <p>再次运行 <code>mvn --version</code> 命令，确保显示的 Java 版本为 17，并且 Maven 版本为 3.8.5 或更高。</p> </li><li> <p><strong>配置 Maven 以使用 Java 17</strong>:</p> <p>在 <code>pom.xml</code> 文件中指定 Java 17 编译和源代码版本，详见 maven-compiler-plugin 版本升级</p> </li></ol> 
<br> 
<h3><a id="mavencompilerplugin__289"></a>maven-compiler-plugin 版本升级</h3> 
<ul><li> <p>为了确保 Maven 编译插件 (<code>maven-compiler-plugin</code>) 与 Java 17 兼容并支持 Spring Boot 3 的需求，需要选择一个合适的 <code>maven-compiler-plugin</code> 版本。</p> <p>截至2023年，<code>maven-compiler-plugin</code> 的最新稳定版本是 3.10.1。该版本与 Java 17 兼容，并且适用于 Spring Boot 3。</p> </li><li> <p>下面是 <code>maven-compiler-plugin</code> 的一个示例配置，用于确保使用 Java 17 进行编译：</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.10.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> <p>这里的关键配置点包括：</p> 
  <ul><li><code>&lt;source&gt;</code> 和 <code>&lt;target&gt;</code> 都设置为 <code>17</code>，以指示使用 Java 17 进行编译。</li><li><code>&lt;version&gt;</code> 设置为 <code>3.10.1</code>，这是与 Java 17 兼容的一个版本。</li></ul> <p>**请注意，需要根据实际的 Maven 和 Spring Boot 版本进行适当的调整。**如果需要使用特定版本的 <code>maven-compiler-plugin</code>，请查阅官方文档或发布页面以确认版本的兼容性。`</p> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/12b3761ed567f8848dd8fa2a73af2856/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c&#43;&#43;----日期类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7025ee834b9bae55b3b8159d5d7cd576/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Sass警告】 Sass‘s behavior for declarations that appear after nestedrules will be changing to match t</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>