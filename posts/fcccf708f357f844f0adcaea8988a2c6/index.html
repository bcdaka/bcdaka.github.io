<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MYSQL】表的设计 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/fcccf708f357f844f0adcaea8988a2c6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【MYSQL】表的设计">
  <meta property="og:description" content="目录 数据库约束not null 约束unique （唯一）约束default 默认值约束primary key （主键）约束foreign key （外键）约束check 约束总结 表的设计三大范式第一范式第二范式第三范式 表的关系 数据库约束 是关系型数据库的一个重要功能，主要作用是保证数据的完整性，也可能理解数据的正确性（数据本身是否正确，关联关系是否正确），人工检查数据完整性的工作量非常的大，在数据表中定义一些约束，那么数据库写入数据的时候，数据库会帮我们做校验工作，约束一般是指定在列上的，使用在表的定义时在要约束的列的类型后加上。 not null 约束 表示该列不能存储null值。
如果存入null会报错。
unique （唯一）约束 表示该列中的数据不能重复（null）除外。
插入相同或者已有的值会报错。
default 默认值约束 指定列为空时的默认值。
primary key （主键）约束 相当于是not null 和 unique的结合，
表示该列中的数据既不能重复也不能为空。
如果存入null会报错。插入相同或者已有的值也会报错。
当主键是整型时，我们常常加上auto_increment让主键从当前最大值加1，
但是当插入错误时该值相当于被生成了，下一个从这个开始。
通俗将就是当前主键最大值为7，然后插入时报错了，改回来后插入行主键为9。
一张表中最多只能定义一个主键，定义超了就会报错，
要想多列为主键只能使用复合主键primary key (列名1, 列名2)。
使用复合主键，必须列值都相同才算重复，任一列值都不能为null。
foreign key （外键）约束 保证一个表中的数据匹配另一个表中的值的参照完整性。
就是将另一个表中的值作为该表中该列的范围。
被外键约束的列在约束前先定义，
语法是foreign key (列名) references 外表名(外列名)，
被外键约束的表还存在就不能删除外表。
check 约束 该约束在5.7版本不能使用，导致兼容性不好，所以一般不用。
使用了该约束后该列只能插入被约束的值。
总结 约束类型说明示例not null 约束使用not null指定列不能为空name varchar(20) not null,unique 约束指定列为唯一的、不重复的，null除外name varchar(20) unique,default 默认值约束指定列为空时的默认值age int default 20,primary key 主键约束not null 和 unique 的结合id int primary key,foreign key外键约束关联其他表的主键或唯一键foreign key (字段名) references 主表(列)check约束保证列中的值符合指定的条件check (gender = ‘男’ or gender =‘女’) 表的设计 一般我们编程流程如下：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-12T08:59:40+08:00">
    <meta property="article:modified_time" content="2024-08-12T08:59:40+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MYSQL】表的设计</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_3" rel="nofollow">数据库约束</a></li><li><ul><li><a href="#not_null__10" rel="nofollow">not null 约束</a></li><li><a href="#unique__18" rel="nofollow">unique （唯一）约束</a></li><li><a href="#default__25" rel="nofollow">default 默认值约束</a></li><li><a href="#primary_key__30" rel="nofollow">primary key （主键）约束</a></li><li><a href="#foreign_key__55" rel="nofollow">foreign key （外键）约束</a></li><li><a href="#check__69" rel="nofollow">check 约束</a></li><li><a href="#_77" rel="nofollow">总结</a></li></ul> 
  </li><li><a href="#_87" rel="nofollow">表的设计</a></li><li><ul><li><a href="#_96" rel="nofollow">三大范式</a></li><li><ul><li><a href="#_99" rel="nofollow">第一范式</a></li><li><a href="#_104" rel="nofollow">第二范式</a></li><li><a href="#_112" rel="nofollow">第三范式</a></li></ul> 
   </li><li><a href="#_118" rel="nofollow">表的关系</a></li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/1c/67/O0JfUT3s_o.gif" alt="
"> 
<p></p> 
<h2><a id="_3"></a>数据库约束</h2> 
<ul><li>是关系型数据库的一个重要功能，</li><li>主要作用是保证数据的完整性，也可能理解数据的正确性（数据本身是否正确，关联关系是否正确），</li><li>人工检查数据完整性的工作量非常的大，在数据表中定义一些约束，那么数据库写入数据的时候，数据库会帮我们做校验工作，</li><li>约束一般是指定在列上的，</li><li>使用在表的定义时在要约束的列的类型后加上。</li></ul> 
<h3><a id="not_null__10"></a>not null 约束</h3> 
<p>表示该列不能存储null值。</p> 
<p>如果存入null会报错。</p> 
<p><img src="https://images2.imgbox.com/2b/b0/D7kPlw4J_o.png" alt="
"></p> 
<h3><a id="unique__18"></a>unique （唯一）约束</h3> 
<p>表示该列中的数据不能重复（null）除外。</p> 
<p>插入相同或者已有的值会报错。</p> 
<p><img src="https://images2.imgbox.com/7b/22/8ElXJGyT_o.png" alt="
"></p> 
<h3><a id="default__25"></a>default 默认值约束</h3> 
<p>指定列为空时的默认值。<br> <img src="https://images2.imgbox.com/af/9d/QEjCJ63E_o.png" alt="
"></p> 
<h3><a id="primary_key__30"></a>primary key （主键）约束</h3> 
<p>相当于是not null 和 unique的结合，</p> 
<p>表示该列中的数据既不能重复也不能为空。</p> 
<p>如果存入null会报错。插入相同或者已有的值也会报错。</p> 
<p>当主键是整型时，我们常常加上<code>auto_increment</code>让主键从<strong>当前最大值</strong>加1，</p> 
<p>但是当插入错误时该值相当于被生成了，下一个从这个开始。</p> 
<p>通俗将就是当前主键最大值为7，然后插入时报错了，改回来后插入行主键为9。</p> 
<p><img src="https://images2.imgbox.com/6d/58/80xaf9uE_o.png" alt="
"></p> 
<p>一张表中最多只能定义一个主键，定义超了就会报错，</p> 
<p>要想多列为主键只能使用复合主键<code>primary key (列名1, 列名2)</code>。</p> 
<p>使用复合主键，必须列值都相同才算重复，任一列值都不能为null。</p> 
<p><img src="https://images2.imgbox.com/a2/79/P3gkIWy2_o.png" alt="
"></p> 
<h3><a id="foreign_key__55"></a>foreign key （外键）约束</h3> 
<p>保证一个表中的数据匹配另一个表中的值的参照完整性。</p> 
<p>就是将另一个表中的值作为该表中该列的范围。</p> 
<p>被外键约束的列在约束前先定义，</p> 
<p>语法是<code>foreign key (列名) references 外表名(外列名)</code>，</p> 
<p>被外键约束的表还存在就不能删除外表。</p> 
<p><img src="https://images2.imgbox.com/bd/d6/jjQXYgvF_o.png" alt="
"></p> 
<h3><a id="check__69"></a>check 约束</h3> 
<p>该约束在5.7版本不能使用，导致兼容性不好，所以一般不用。</p> 
<p>使用了该约束后该列只能插入被约束的值。</p> 
<p><img src="https://images2.imgbox.com/75/e3/aMX8hymi_o.png" alt="
"></p> 
<h3><a id="_77"></a>总结</h3> 
<table><thead><tr><th>约束类型</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>not null 约束</td><td>使用not null指定列不能为空</td><td>name varchar(20) not null,</td></tr><tr><td>unique 约束</td><td>指定列为唯一的、不重复的，null除外</td><td>name varchar(20) unique,</td></tr><tr><td>default 默认值约束</td><td>指定列为空时的默认值</td><td>age int default 20,</td></tr><tr><td>primary key 主键约束</td><td>not null 和 unique 的结合</td><td>id int primary key,</td></tr><tr><td>foreign key外键约束</td><td>关联其他表的主键或唯一键</td><td>foreign key (字段名) references 主表(列)</td></tr><tr><td>check约束</td><td>保证列中的值符合指定的条件</td><td>check (gender = ‘男’ or gender =‘女’)</td></tr></tbody></table> 
<h2><a id="_87"></a>表的设计</h2> 
<p>一般我们编程流程如下：</p> 
<blockquote> 
 <p>OOA面向对象分析 -》OOD面向对象设计 -》OOP面向对象编程</p> 
</blockquote> 
<p>设计表：</p> 
<ol><li>从需求中获得类，类对应到数据库中的实体，实体在数据库中就表现为一张一张的表，类中的属性就对应着表中的字段（列），</li><li>确定类与类之间的关系，</li><li>使用SQL去创建具体的表。</li></ol> 
<h3><a id="_96"></a>三大范式</h3> 
<p>设计表的时候我们一般要遵循一些规则，这些规则我们一般称之为三大范式。<br> 范式就是描述数据关系的模型，下面只介绍三大范式。</p> 
<h4><a id="_99"></a>第一范式</h4> 
<blockquote> 
 <p>第一范式就是表中的字段不可再拆分。</p> 
</blockquote> 
<p>第一范式是关系型数据库最基本的要求，不满足第一范式的数据库不是关系型数据库。<br> 也就是在定义表时每个字段都可以用一种数据类型来表示，那么这个表就是满足第一范式的。</p> 
<h4><a id="_104"></a>第二范式</h4> 
<blockquote> 
 <p>在满足第一范式的基础上，不存在非关键字段对任意候选字段存在部分函数依赖（存在于复合主键的情况下）</p> 
</blockquote> 
<p>非关键字段即非主键字段，候选字段可以理解为主键或者没有主键时的唯一键。</p> 
<p>对于由两个或多个关键字段（复合主键）决定一条记录的情况，如果一行数据中有些字段只与关键字段中的一个有关系，那么这种就说他只存在部分函数依赖。</p> 
<p>表中没有复合主键的表天然满足第二范式。</p> 
<h4><a id="_112"></a>第三范式</h4> 
<p>在第二范式的基础上，不存在非关键字段，对任一候选键的传递依赖。</p> 
<p>两个强相关关系存在传递现象，这种传递关系称为传递依赖。比如学生表中拿到学号，可以根据学号拿到学校，根据学校又可以拿到学院等信息。</p> 
<h3><a id="_118"></a>表的关系</h3> 
<ol><li>一对一：<br> 比如一个人只有一个身份证一样。</li><li>一对多：<br> 比如一个班级拥有多个学生一样。</li><li>多对多：<br> 比如一个学生选多个课程，一个课程被多个学生选一样。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/25dd5e234ec30f0f116756cecf292559/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;指南】缺省参数（默认参数）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/65daed308a1ebbfcfefbf2bf21aff926/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Typescript在AI产品中应用越来越广泛</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>