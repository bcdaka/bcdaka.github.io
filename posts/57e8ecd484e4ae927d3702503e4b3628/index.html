<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>语音深度鉴伪识别项目实战：基于深度学习的语音深度鉴伪识别算法模型(一)音频数据编码与预处理 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/57e8ecd484e4ae927d3702503e4b3628/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="语音深度鉴伪识别项目实战：基于深度学习的语音深度鉴伪识别算法模型(一)音频数据编码与预处理">
  <meta property="og:description" content="前言 深度学习技术在当今技术市场上面尚有余力和开发空间的，主流落地领域主要有：视觉，听觉，AIGC这三大板块。目前视觉板块的框架和主流技术在我上一篇基于Yolov7-LPRNet的动态车牌目标识别算法模型已有较为详细的解说。与AIGC相关联的，其实语音模块在近来市场上面活跃空间很大。从智能手机的语音助手到智能家居中的语音控制系统，再到银行和电信行业的语音身份验证，语音技术的应用日益广泛。那么对应现在ACG技术是可以利用原音频去进行训练学习，从而得到相对应的声音特征，从而进行模仿，甚至可以利用人工智能生成的语音可以以假乱真，给社会带来了严重的安全隐患。
当前，语音深度鉴伪识别技术已经取得了一定的进展。研究人员利用机器学习和深度学习方法，通过分析语音信号的特征，开发出了一系列鉴伪算法。然而，随着生成大模型和其他语音合成技术的不断进步，伪造语音的逼真度也在不断提高，使得语音鉴伪任务变得愈加复杂和具有挑战性。本项目系列文章将从最基础的语音数据存储和详细分析开始，由于本系列专栏是有详细解说过深度学习和机器学习内容的，音频数据处理和现主流技术语音分类模型和编码模型将会是本项目系列文章的主体内容，具体本项目系列要讲述的内容可参考下图：
语音模型的内容不是那么好掌握的，包含大量的数学理论知识以及大量的计算公式原理需要推理。且如果不进行实际操作很难够理解我们写的代码究极在神经网络计算框架中代表什么作用。不过我会尽可能将知识简化，转换为我们比较熟悉的内容，我将尽力让大家了解并熟悉神经网络框架，保证能够理解通畅以及推演顺利的条件之下，尽量不使用过多的数学公式和专业理论知识。以一篇文章快速了解并实现该算法，以效率最高的方式熟练这些知识。希望有需求的小伙伴不要错过笔者精心打造的专栏。
那么本系列文章第一节我们将解答音频常见存储载体和其特征，以及音频的数据保存形态有哪些？具体数据可视化展示为何种形式？也就是我们第一部要了解声音是如何转换为数据的，是如何编码保存的。
一、音频数据编码 音频数据的编码和解码是将声音信号转换为数字信号以及将数字信号还原为声音信号的过程。不同的音频文件格式采用不同的编码方式来保存音频数据。音频数据的编码方式主要有两类：未压缩编码和压缩编码。未压缩编码保留了原始音频数据，而压缩编码则通过各种算法减少音频数据的大小，可以是有损压缩或无损压缩。
1.1未压缩编码 未压缩编码保存音频数据的原始信息，主要采用脉冲编码调制（PCM）方式。
1.1.1 脉冲编码调制（PCM） PCM是最常见的未压缩音频编码方式。它直接对模拟信号进行采样、量化和编码，将声音波形转换为数字信号。总共有三步：
采样：以固定的时间间隔对模拟信号进行采样，得到离散的时间点。 将连续的模拟音频信号在时间上以固定的间隔进行采样，得到离散的时间点。采样频率（如44.1kHz）决定了每秒钟采样的次数。高采样率能够更准确地表示原始信号，但也会产生更多的数据。 量化：将每个采样点的幅值转换为最接近的离散值，通常使用16位或24位表示。 量化位数（如16位、24位）决定了每个采样点的精度，量化的过程会引入量化误差，位数越高，误差越小，音质越好。 编码：将量化后的值编码为二进制数，形成数字信号。 通常使用整型数表示量化后的幅值。 我们可以使用Python编码实现PCM编码：
import wave import numpy as np # 生成一个1秒的1kHz正弦波 sample_rate = 44100 # 采样率：44.1kHz，CD质量 frequency = 1000 # 频率：1kHz duration = 1.0 # 持续时间：1秒 t = np.linspace(0, duration, int(sample_rate * duration), endpoint=False) # 时间点 signal = 0.5 * np.sin(2 * np.pi * frequency * t) # 正弦波，幅值为0.5 # 量化为16位PCM signal_int16 = np.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-27T17:36:11+08:00">
    <meta property="article:modified_time" content="2024-05-27T17:36:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">语音深度鉴伪识别项目实战：基于深度学习的语音深度鉴伪识别算法模型(一)音频数据编码与预处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>深度学习技术在当今技术市场上面尚有余力和开发空间的，主流落地领域主要有：视觉，听觉，AIGC这三大板块。目前视觉板块的框架和主流技术在我上一篇基于Yolov7-LPRNet的动态车牌目标识别算法模型已有较为详细的解说。与AIGC相关联的，其实语音模块在近来市场上面活跃空间很大。从智能手机的语音助手到智能家居中的语音控制系统，再到银行和电信行业的语音身份验证，语音技术的应用日益广泛。那么对应现在ACG技术是可以利用原音频去进行训练学习，从而得到相对应的声音特征，从而进行模仿，甚至可以利用人工智能生成的语音可以以假乱真，给社会带来了严重的安全隐患。</p> 
<p>当前，语音深度鉴伪识别技术已经取得了一定的进展。研究人员利用机器学习和深度学习方法，通过分析语音信号的特征，开发出了一系列鉴伪算法。然而，随着生成大模型和其他语音合成技术的不断进步，伪造语音的逼真度也在不断提高，使得语音鉴伪任务变得愈加复杂和具有挑战性。本项目系列文章将从最基础的语音数据存储和详细分析开始，由于本系列专栏是有详细解说过深度学习和机器学习内容的，音频数据处理和现主流技术语音分类模型和编码模型将会是本项目系列文章的主体内容，具体本项目系列要讲述的内容可参考下图：<br> <img src="https://images2.imgbox.com/85/70/4Rfu46qQ_o.png" alt="在这里插入图片描述"><br> 语音模型的内容不是那么好掌握的，包含大量的数学理论知识以及大量的计算公式原理需要推理。且如果不进行实际操作很难够理解我们写的代码究极在神经网络计算框架中代表什么作用。不过我会尽可能将知识简化，转换为我们比较熟悉的内容，我将尽力让大家了解并熟悉神经网络框架，保证能够理解通畅以及推演顺利的条件之下，尽量不使用过多的数学公式和专业理论知识。以一篇文章快速了解并实现该算法，以效率最高的方式熟练这些知识。希望有需求的小伙伴不要错过笔者精心打造的专栏。</p> 
<p>那么本系列文章第一节我们将解答音频常见存储载体和其特征，以及音频的数据保存形态有哪些？具体数据可视化展示为何种形式？也就是我们第一部要了解声音是如何转换为数据的，是如何编码保存的。</p> 
<h2><a id="_9"></a>一、音频数据编码</h2> 
<p>音频数据的编码和解码是将声音信号转换为数字信号以及将数字信号还原为声音信号的过程。不同的音频文件格式采用不同的编码方式来保存音频数据。音频数据的编码方式主要有两类：未压缩编码和压缩编码。未压缩编码保留了原始音频数据，而压缩编码则通过各种算法减少音频数据的大小，可以是有损压缩或无损压缩。</p> 
<p><img src="https://images2.imgbox.com/3c/2c/t57Y5sfi_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="11_14"></a>1.1未压缩编码</h3> 
<p>未压缩编码保存音频数据的原始信息，主要采用脉冲编码调制（PCM）方式。</p> 
<h4><a id="111_PCM_18"></a>1.1.1 脉冲编码调制（PCM）</h4> 
<p>PCM是最常见的未压缩音频编码方式。它直接对模拟信号进行采样、量化和编码，将声音波形转换为数字信号。总共有三步：</p> 
<ol><li><strong>采样</strong>：以固定的时间间隔对模拟信号进行采样，得到离散的时间点。 
  <ul><li>将连续的模拟音频信号在时间上以固定的间隔进行采样，得到离散的时间点。采样频率（如44.1kHz）决定了每秒钟采样的次数。高采样率能够更准确地表示原始信号，但也会产生更多的数据。</li></ul> </li><li><strong>量化</strong>：将每个采样点的幅值转换为最接近的离散值，通常使用16位或24位表示。 
  <ul><li>量化位数（如16位、24位）决定了每个采样点的精度，量化的过程会引入量化误差，位数越高，误差越小，音质越好。</li></ul> </li><li><strong>编码</strong>：将量化后的值编码为二进制数，形成数字信号。 
  <ul><li>通常使用整型数表示量化后的幅值。</li></ul> </li></ol> 
<p>我们可以使用Python编码实现PCM编码：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> wave
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># 生成一个1秒的1kHz正弦波</span>
sample_rate <span class="token operator">=</span> <span class="token number">44100</span>  <span class="token comment"># 采样率：44.1kHz，CD质量</span>
frequency <span class="token operator">=</span> <span class="token number">1000</span>    <span class="token comment"># 频率：1kHz</span>
duration <span class="token operator">=</span> <span class="token number">1.0</span>      <span class="token comment"># 持续时间：1秒</span>
t <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>sample_rate <span class="token operator">*</span> duration<span class="token punctuation">)</span><span class="token punctuation">,</span> endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># 时间点</span>
signal <span class="token operator">=</span> <span class="token number">0.5</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi <span class="token operator">*</span> frequency <span class="token operator">*</span> t<span class="token punctuation">)</span>  <span class="token comment"># 正弦波，幅值为0.5</span>

<span class="token comment"># 量化为16位PCM</span>
signal_int16 <span class="token operator">=</span> np<span class="token punctuation">.</span>int16<span class="token punctuation">(</span>signal <span class="token operator">*</span> <span class="token number">32767</span><span class="token punctuation">)</span>  <span class="token comment"># 将幅值转换为16位整型数</span>

<span class="token comment"># 保存为WAV文件</span>
<span class="token keyword">with</span> wave<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'sine_wave.wav'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> wav_file<span class="token punctuation">:</span>
    wav_file<span class="token punctuation">.</span>setnchannels<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 单声道</span>
    wav_file<span class="token punctuation">.</span>setsampwidth<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># 采样位宽：16位（2字节）</span>
    wav_file<span class="token punctuation">.</span>setframerate<span class="token punctuation">(</span>sample_rate<span class="token punctuation">)</span>  <span class="token comment"># 采样率：44.1kHz</span>
    wav_file<span class="token punctuation">.</span>writeframes<span class="token punctuation">(</span>signal_int16<span class="token punctuation">.</span>tobytes<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 写入音频数据</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/7e/36/wrFuUXI3_o.png" alt="在这里插入图片描述"></p> 
<p>上述在音频处理和编码过程中这些采样率、频率、采样位宽等特征，我们在此作一个详细的介绍方便大家了解：</p> 
<h5><a id="Sample_Rate_59"></a>采样率（Sample Rate）</h5> 
<p>采样率是指每秒钟对连续的模拟音频信号进行采样的次数，单位是赫兹（Hz）。</p> 
<ul><li>常见值 
  <ul><li>8000 Hz：电话音频质量</li><li>16000 Hz：宽带电话</li><li>22050 Hz：广播质量</li><li>44100 Hz：CD音质</li><li>48000 Hz：专业音频和视频</li><li>96000 Hz：高分辨率音频</li></ul> </li></ul> 
<p>采样率决定了音频信号的频率范围和保真度。较高的采样率可以更精确地表示高频成分，提供更好的音质。根据奈奎斯特定理，采样率必须至少是音频信号最高频率的两倍，以避免混叠（aliasing）现象。</p> 
<h5><a id="Frequency_73"></a>频率（Frequency）</h5> 
<p>频率是指音频信号中波形的振动次数，通常以赫兹（Hz）为单位。频率决定了声音的音调。较高的频率对应较高的音调，较低的频率对应较低的音调。人耳能够听到的频率范围通常在20 Hz到20 kHz之间。</p> 
<h5><a id="Duration_77"></a>持续时间（Duration）</h5> 
<p>持续时间是指音频信号的总时长，通常以秒（s）为单位。持续时间决定了音频文件的长度。较长的持续时间会产生更大的数据量。</p> 
<h5><a id="Channels_81"></a>单声道和立体声（Channels）</h5> 
<p><strong>单声道（Mono）</strong>：单声道音频只有一个声道，所有的声音都来自一个方向，音频文件较小，常用于电话通信和某些广播应用。</p> 
<p><strong>立体声（Stereo）</strong>：立体声音频有两个声道，通常分别对应左声道和右声道。能够产生空间感和方向感，提供更逼真的音频体验，音频文件较大，常用于音乐和电影。</p> 
<h5><a id="Bits_Per_Sample_87"></a>采样位宽（Bits Per Sample）</h5> 
<p>采样位宽是指每个采样点使用的位数，通常为8位、16位或24位。</p> 
<ul><li>8位：256个可能的振幅级别</li><li>16位：65536个可能的振幅级别（CD质量）</li><li>24位：16777216个可能的振幅级别（高分辨率音频）</li></ul> 
<p>采样位宽决定了每个采样点的精度和动态范围。较高的采样位宽能够更精确地表示音频信号，减少量化误差，提供更好的音质。</p> 
<h5><a id="Time_Points_97"></a>时间点（Time Points）</h5> 
<p>时间点是指在特定时间间隔内对连续的模拟音频信号进行采样的位置。通过采样，我们将连续的时间信号转换为离散的时间信号。在固定的时间间隔对模拟信号进行采样，得到一系列离散的时间点。这些时间点决定了音频信号的采样率。时间点形成了音频信号的时间轴，每个时间点对应一个采样值。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

sample_rate <span class="token operator">=</span> <span class="token number">44100</span>  <span class="token comment"># 采样率：44.1kHz</span>
duration <span class="token operator">=</span> <span class="token number">1.0</span>      <span class="token comment"># 持续时间：1秒</span>

<span class="token comment"># 生成时间点</span>
t <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>sample_rate <span class="token operator">*</span> duration<span class="token punctuation">)</span><span class="token punctuation">,</span> endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

</code></pre> 
<p>上面的代码中：</p> 
<p><code>np.linspace(0, duration, int(sample_rate * duration), endpoint=False)</code>生成从0到持续时间（1秒）的时间点，总数为<code>sample_rate * duration</code>（44100个点），不包括终点。</p> 
<h5><a id="Sine_Wave_116"></a>正弦波（Sine Wave）</h5> 
<p>正弦波是一种最基本的周期信号，其数学表达式为：</p> 
<p><em>x</em>(<em>t</em>)=<em>A</em>sin(2<em>π<strong>f</strong>t</em>+<em>ϕ</em>) 其中：</p> 
<ul><li><em>A</em> 是振幅，决定了波的最大值和最小值。</li><li><em>f</em> 是频率，表示波每秒钟振荡的次数，单位是赫兹（Hz）。</li><li><em>t</em> 是时间点。</li><li><em>ϕ</em> 是初始相位。</li></ul> 
<p>正弦波是最简单的声音信号，用于模拟纯音（如音乐中的音符）。在音频处理中，正弦波可以用来生成纯音，用于测试和校准音频设备。通过组合不同频率和振幅的正弦波，可以合成出复杂的音频信号。</p> 
<pre><code class="prism language-python">frequency <span class="token operator">=</span> <span class="token number">1000</span>    <span class="token comment"># 频率：1kHz</span>
amplitude <span class="token operator">=</span> <span class="token number">0.5</span>     <span class="token comment"># 振幅：0.5</span>

<span class="token comment"># 生成正弦波</span>
signal <span class="token operator">=</span> amplitude <span class="token operator">*</span> np<span class="token punctuation">.</span>sin<span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi <span class="token operator">*</span> frequency <span class="token operator">*</span> t<span class="token punctuation">)</span>

</code></pre> 
<p>在上面的代码中：</p> 
<ul><li><code>amplitude</code>设置为0.5，表示正弦波的最大振幅为0.5。</li><li><code>frequency</code>设置为1000 Hz，表示正弦波的频率为1kHz。</li><li><code>np.sin(2 * np.pi * frequency * t)</code>生成对应时间点的正弦波值。</li></ul> 
<p>这些步骤和概念是音频信号生成、处理和存储的基础。通过理解这些特征，可以更好地掌握音频处理技术。</p> 
<p>查看一个WAV文件的数据特征，可以通过读取文件的元数据和音频数据，了解其采样率、声道数、采样位宽、持续时间等信息。可以使用Python的<code>wave</code>库和<code>librosa</code>库来读取WAV文件，并查看其数据特征。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> wave

<span class="token keyword">def</span> <span class="token function">print_wav_file_properties</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> wave<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> wav_file<span class="token punctuation">:</span>
        <span class="token comment"># 获取WAV文件的基本特征</span>
        num_channels <span class="token operator">=</span> wav_file<span class="token punctuation">.</span>getnchannels<span class="token punctuation">(</span><span class="token punctuation">)</span>
        sample_width <span class="token operator">=</span> wav_file<span class="token punctuation">.</span>getsampwidth<span class="token punctuation">(</span><span class="token punctuation">)</span>
        sample_rate <span class="token operator">=</span> wav_file<span class="token punctuation">.</span>getframerate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        num_frames <span class="token operator">=</span> wav_file<span class="token punctuation">.</span>getnframes<span class="token punctuation">(</span><span class="token punctuation">)</span>
        duration <span class="token operator">=</span> num_frames <span class="token operator">/</span> sample_rate

        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Number of Channels: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>num_channels<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Sample Width (bytes): </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>sample_width<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Sample Rate (Hz): </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>sample_rate<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Number of Frames: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>num_frames<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Duration (seconds): </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>duration<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token comment"># 示例：打印WAV文件的基本特征</span>
file_path <span class="token operator">=</span> <span class="token string">'sine_wave.wav'</span>
print_wav_file_properties<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>

</code></pre> 
<h6><a id="_172"></a>输出示例</h6> 
<pre><code class="prism language-bash">Number of Channels: <span class="token number">1</span>
Sample Width <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>: <span class="token number">2</span>
Sample Rate <span class="token punctuation">(</span>Hz<span class="token punctuation">)</span>: <span class="token number">44100</span>
Number of Frames: <span class="token number">44100</span>
Duration <span class="token punctuation">(</span>seconds<span class="token punctuation">)</span>: <span class="token number">1.00</span>
</code></pre> 
<h3><a id="12_182"></a>1.2压缩编码</h3> 
<p>压缩编码通过压缩算法减少音频数据的大小，可以是无损压缩或有损压缩。</p> 
<h4><a id="121_186"></a>1.2.1无损压缩</h4> 
<p>无损压缩保留了原始音频数据，解压缩后可以完全还原。常见格式有FLAC和ALAC。</p> 
<h5><a id="1211_FLACFree_Lossless_Audio_Codec_190"></a>1.2.1.1 <strong>FLAC（Free Lossless Audio Codec）</strong></h5> 
<p>FLAC（Free Lossless Audio Codec）是一种无损压缩音频格式，它通过高效的压缩算法减少音频文件的大小，但在解码时可以完全还原原始音频数据。FLAC的编码和解码可以通过Python中的相关库来实现，常用的库有<code>soundfile</code>和<code>pydub</code>。下面我将用soundfile<strong>读取WAV文件并保存为FLAC文件</strong>：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> soundfile <span class="token keyword">as</span> sf

<span class="token comment"># 读取WAV文件</span>
data<span class="token punctuation">,</span> samplerate <span class="token operator">=</span> sf<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'sine_wave.wav'</span><span class="token punctuation">)</span>

<span class="token comment"># 保存为FLAC文件</span>
sf<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'sine_wave.flac'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> samplerate<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'FLAC'</span><span class="token punctuation">)</span>
<span class="token comment"># 读取FLAC文件</span>
data<span class="token punctuation">,</span> samplerate <span class="token operator">=</span> sf<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'sine_wave.flac'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Sample Rate: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>samplerate<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Number of Samples: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Duration: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">/</span> samplerate<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> seconds"</span></span><span class="token punctuation">)</span>

</code></pre> 
<p>输出实例：</p> 
<pre><code class="prism language-bash">Sample Rate: <span class="token number">44100</span>
Number of Samples: <span class="token number">44100</span>
Duration: <span class="token number">1.00</span> seconds
</code></pre> 
<h5><a id="1212ALACApple_Lossless_Audio_Codec_219"></a>1.2.1.2<strong>ALAC（Apple Lossless Audio Codec）</strong></h5> 
<p>苹果公司开发的无损压缩格式，类似于FLAC。主要用于苹果设备和软件。这里不作展开，和上述FLAC一样。</p> 
<h4><a id="122_223"></a>1.2.2有损压缩</h4> 
<p>有损压缩通过去除人耳不敏感的音频信息来减少数据大小，不能完全还原原始音频。常见格式有MP3、AAC和OGG Vorbis。</p> 
<h5><a id="1211_MP3MPEG_Audio_Layer_III_227"></a>1.2.1.1 <strong>MP3（MPEG Audio Layer III）</strong></h5> 
<p>MP3通过心理声学模型、子带编码、离散余弦变换和哈夫曼编码等一系列复杂的算法，实现了高效的音频压缩。心理声学模型可以通过模拟人耳的听觉特性去除一些人耳不容易察觉的声音，从而减少数据量。比如有：</p> 
<ul><li><strong>掩蔽效应</strong>：当两个频率接近的声音同时存在时，较强的声音会掩蔽较弱的声音，人耳对较弱声音的感知能力下降。</li><li><strong>临界频带</strong>：人耳对不同频率的敏感度不同，MP3编码器将音频信号分为多个临界频带进行处理。</li><li><strong>绝对听觉阈值</strong>：人耳对不同频率声音的最低听觉阈值，低于该阈值的声音可以被忽略。</li></ul> 
<p>MP3将音频信号分解为多个子带，每个子带使用不同的量化和编码策略。通过子带分离，每个子带使用不同的量化和编码策略，MP3编码器可以更有效地利用心理声学模型进行压缩，而且MP3使用离散余弦变换（DCT）将时域信号转换为频域信号，方便应用心理声学模型和量化。实现MP3编码可以使用Python中的<code>pydub</code>库和<code>ffmpeg</code>工具。<code>pydub</code>是一个简单易用的音频处理库，<code>ffmpeg</code>是一个强大的多媒体处理工具，可以处理多种音频格式，包括MP3。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pydub <span class="token keyword">import</span> AudioSegment
<span class="token keyword">from</span> pydub<span class="token punctuation">.</span>utils <span class="token keyword">import</span> which

<span class="token comment"># 自动查找系统路径中的 ffmpeg</span>
ffmpeg_path <span class="token operator">=</span> which<span class="token punctuation">(</span><span class="token string">"ffmpeg"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> ffmpeg_path<span class="token punctuation">:</span>
    <span class="token comment"># 如果自动查找失败，手动指定路径（替换为实际路径）</span>
    ffmpeg_path <span class="token operator">=</span> <span class="token string">r"D:\ffmpeg\bin\ffmpeg.exe"</span>
AudioSegment<span class="token punctuation">.</span>converter <span class="token operator">=</span> ffmpeg_path

<span class="token comment"># 检查 FFmpeg 路径是否设置正确</span>
<span class="token keyword">if</span> AudioSegment<span class="token punctuation">.</span>converter<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Using FFmpeg from: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>AudioSegment<span class="token punctuation">.</span>converter<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">raise</span> RuntimeError<span class="token punctuation">(</span><span class="token string">"FFmpeg not found. Please ensure FFmpeg is installed and added to system PATH."</span><span class="token punctuation">)</span>

<span class="token comment"># 读取 WAV 文件</span>
audio <span class="token operator">=</span> AudioSegment<span class="token punctuation">.</span>from_wav<span class="token punctuation">(</span><span class="token string">'sine_wave.wav'</span><span class="token punctuation">)</span>

<span class="token comment"># 保存为 MP3 文件</span>
audio<span class="token punctuation">.</span>export<span class="token punctuation">(</span><span class="token string">'sine_wave.mp3'</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'mp3'</span><span class="token punctuation">,</span> bitrate<span class="token operator">=</span><span class="token string">'192k'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"WAV file has been successfully converted to MP3 format."</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/c1/5b/odya2tef_o.png" alt="在这里插入图片描述"></p> 
<p>MP3对转换后的频域信号进行非均匀量化，量化精度取决于心理声学模型的分析结果。量化后的数据通过哈夫曼编码进行压缩，以进一步减少数据量。</p> 
<h5><a id="1222AACAdvanced_Audio_Coding_267"></a>1.2.2.2<strong>AAC（Advanced Audio Coding）</strong></h5> 
<p>AAC（Advanced Audio Coding）是一种高效的有损音频压缩格式，属于MPEG-4标准的一部分。AAC设计旨在比MP3提供更好的音质和更高的压缩效率，是许多现代音频应用的首选格式，包括流媒体、音乐存储和数字广播。AAC支持多达48个声道，这使其在多声道音频（如环绕声系统）中具有优势。而且支持多种采样率和比特率，能够适应不同的应用场景，从低比特率的语音编码到高比特率的高保真音频。</p> 
<p>代码方式如上，需要修改的只有：</p> 
<pre><code class="prism language-python"><span class="token comment"># 保存为 AAC 文件</span>
audio<span class="token punctuation">.</span>export<span class="token punctuation">(</span><span class="token string">'sine_wave.aac'</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'aac'</span><span class="token punctuation">,</span> bitrate<span class="token operator">=</span><span class="token string">'192k'</span><span class="token punctuation">)</span>
</code></pre> 
<p>就好。</p> 
<p>本系列将从最基础的音频数据认知开始一直讲解到最终完成整个语音深度鉴别模型的落地使用，对此项目感兴趣的，对此领域感兴趣的不要错过，多谢大家的支持！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e05258d4aa331c8212b520d775ffbf6c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Excel转JSON加载项快速将单元格转换为JSON的教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e58c4c05d93ee228194f8e2e488ce04/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C&#43;&#43;】从零开始map与set的封装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>