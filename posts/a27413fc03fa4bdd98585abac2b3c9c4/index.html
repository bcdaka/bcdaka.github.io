<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C语言】qsort函数的介绍和使用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a27413fc03fa4bdd98585abac2b3c9c4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C语言】qsort函数的介绍和使用">
  <meta property="og:description" content="0. 引言 我们日常生活中经常能碰到需要给一组数据排序的情况，如将班上同学的身高，年龄从大到小排序，平时网上购物时对商品价格从低到高排序等等场景，那么电脑是根据什么程序完成这些排序的？接下来就来给大家介绍一下C语言中，可以实现排序的库函数 --- qsort。
1. qsort 是什么？ qsort 是 C语言 标准库 &lt;stdlib.h&gt; 中提供的一个排序函数。
它使用的是快速排序算法（Quick Sort）对数组进行排序。
参考链接：qsort - C&#43;&#43; Reference (cplusplus.com)
2、qsort 函数介绍 2.1 qsort 函数原型 void qsort(void *base, size_t num, size_t size, int (*compar)( const void *, const void * )); 下面是 qsort 函数的参数说明：
base：指向待排数组的第一个元素的指针。
num：base指向的待排数组中元素的个数。
size：base指向的待排数组中每个元素的大小，以字节为单位。
compar：函数指针，指向的就是两个元素的比较函数，该函数用于确定排序的顺序。
2.2 compar 比较函数 相信同学们对于qsort函数第四个参数是函数指针不是很了解，在这里给大家详细说说~
qsort 函数使用了一个回调函数。回调函数是什么呢？在计算机编程中，回调函数是一种作为参数传递给另一个函数的函数，以便在某个特定事件发生时由该函数调用。在 qsort 的上下文中，回调函数用于确定数组中元素的比较方式。
在 qsort 的定义中，int (*compar)(const void *, const void *) 是一个函数指针参数，它指向了一个compar 这样一个比较函数。当 qsort 需要比较数组中的两个元素时，它会调用这个比较函数。比较函数的返回值决定了 qsort 如何重新排列数组中的元素。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-05T21:42:25+08:00">
    <meta property="article:modified_time" content="2024-08-05T21:42:25+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C语言】qsort函数的介绍和使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>0. 引言</h2> 
<blockquote> 
 <p>我们日常生活中经常能碰到需要<strong>给一组数据排序</strong>的情况，如将班上同学的身高，年龄从大到小排序，平时网上购物时对商品价格从低到高排序等等场景，那么电脑是根据什么程序完成这些排序的？接下来就来给大家介绍一下<strong>C语言中，</strong><strong>可以实现排序</strong>的库函数 --- <strong>qsort。</strong></p> 
</blockquote> 
<h2><strong>1. qsort 是什么？</strong></h2> 
<p><strong>qsort 是 C语言 标准库 <span style="background-color:#f9eda6;">&lt;stdlib.h&gt;</span> 中提供的一个排序函数</strong>。</p> 
<p>它使用的是<strong>快速排序算法</strong>（Quick Sort）对数组进行排序。</p> 
<p> 参考链接：<a href="https://legacy.cplusplus.com/reference/cstdlib/qsort/?kw=qsort" rel="nofollow" title="qsort - C++ Reference (cplusplus.com)">qsort - C++ Reference (cplusplus.com)</a></p> 
<p><img alt="" height="634" src="https://images2.imgbox.com/c2/31/xQhur96M_o.png" width="1200"></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B%C2%A0">2、qsort 函数介绍</h2> 
<blockquote> 
 <h3><strong>2.1 qsort 函数原型</strong></h3> 
 <pre><code class="language-cpp">void qsort(void *base, size_t num, size_t size,
           int (*compar)( const void *, const void * ));</code></pre> 
 <p>下面是 qsort 函数的<strong>参数说明</strong>：</p> 
 <p><strong>base</strong>：指向待排数组的第一个元素的指针。<br><strong>num</strong>：base指向的待排数组中元素的个数。<br><strong>size</strong>：base指向的待排数组中每个元素的大小，以字节为单位。<br><strong>compar</strong>：函数指针，指向的就是两个元素的比较函数，该函数用于确定排序的顺序。</p> 
</blockquote> 
<h3>2.2 compar 比较函数</h3> 
<p>相信同学们对于qsort函数第四个参数是函数指针不是很了解，在这里给大家详细说说~</p> 
<p>qsort 函数使用了一个<strong><span style="color:#fe2c24;"><span style="background-color:#f9eda6;">回调函数</span></span></strong>。回调函数是什么呢？在计算机编程中，回调函数是一种作为参数传递给另一个函数的函数，以便在某个特定事件发生时由该函数调用。在 qsort 的上下文中，回调函数用于确定数组中元素的比较方式。</p> 
<p>在 qsort 的定义中，<span style="background-color:#fefcd8;">int (*compar)(const void *, const void *)</span> 是一个函数指针参数，它指向了一个compar 这样一个比较函数。当 qsort 需要比较数组中的两个元素时，它会调用这个比较函数。比较函数的返回值决定了 qsort 如何重新排列数组中的元素。</p> 
<blockquote> 
 <p></p> 
 <p>比较函数的原型如下：</p> 
 <pre><code class="language-cpp">int compar(const void* p1, const void* p2);</code></pre> 
 <p>这个比较函数需要返回以下三个值之一：</p> 
 <p><img alt="" height="309" src="https://images2.imgbox.com/b1/c1/IUxwJ4RS_o.png" width="1200"></p> 
 <p>其实意思是：</p> 
 <p><strong><span style="background-color:#f9eda6;">如果p1指向的内容小于p2小于指向的内容，则返回&lt;0的数字；</span></strong></p> 
 <p><strong><span style="background-color:#f9eda6;">如果p1指向的内容等于p2小于指向的内容，则返回=0的数字；</span></strong></p> 
 <p><strong><span style="background-color:#f9eda6;">如果p1指向的内容大于p2小于指向的内容，则返回&gt;0的数字</span></strong></p> 
</blockquote> 
<p> 所以一般比较函数都这样写，比如这里以一个比较两个整形的函数的话：</p> 
<pre><code class="language-cpp">int cmp_int(const void* p1, const void* p2);
//p1、p2强制类型转化成int*再解引用然后作差，它的值和0比较
return (*( int *)p1 - *(int *) p2);</code></pre> 
<h2>3. qsort函数使用示例 </h2> 
<h3 id="1.%E4%BD%BF%E7%94%A8qsort%E6%8E%92%E5%BA%8F%E6%95%B4%E5%BD%A2%E6%95%B0%E6%8D%AE">3.1 使用qsort排序整形数据</h3> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

//qsort函数的使⽤者得实现⼀个⽐较函数
int cmp_int (const void* p1, const void* p2)
{
	return (*(int*)p1 - *(int*)p2);
}

int main()
{
	int arr[] = { 9,7,5,3,1,8,6,4,2,0 };
    int sz = sizeof(arr) / sizeof(arr[0]);
	int i = 0;
 
	qsort(arr, sz, sizeof(arr[0]), cmp_int);

	for (i = 0; i &lt; sz; i++)
	{
		printf("%d ", arr[i]);
	}

	return 0;
}</code></pre> 
<p>运行结果如下：</p> 
<p><img alt="" height="647" src="https://images2.imgbox.com/16/a1/PTsiZltn_o.png" width="1200"></p> 
<h3 id="%C2%A02.%E4%BD%BF%E7%94%A8qsort%E6%8E%92%E5%BA%8F%E7%BB%93%E6%9E%84%E6%95%B0%E6%8D%AE">3.2 使用qsort排序结构数据</h3> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;


//定义一个学⽣的结构体类型
struct Stu 
{
	char name[20];//名字
	int age;//年龄 
};

//假设按照年龄来⽐较--整形比较
int cmp_stu_by_age(const void* e1, const void* e2)
{
	return ((struct Stu*)e1)-&gt;age - ((struct Stu*)e2)-&gt;age;
}

//假设按照名字来⽐较--字符串比较
int cmp_stu_by_name(const void* e1, const void* e2)
{
	return strcmp(((struct Stu*)e1)-&gt;name, ((struct Stu*)e2)-&gt;name);
}//strcmp是库函数，是专⻔⽤来⽐较两个字符串的比较大小(按字符串对应的字符的ASCII码进行比较)

 //按照年龄来排序
void test_age(struct Stu* s, int sz)//参数为结构体数组指针，数组长度
{
	qsort(s, sz, sizeof(s[0]), cmp_stu_by_age);
	// 打印排序后的结构体数组
	printf("按年龄排序：\n");
	for (int i = 0; i &lt; sz; i++)
	{
		printf("%s is %d years old.\n", s[i].name, s[i].age);
	}
}

//按照名字来排序
void test_name(struct Stu* s, int sz)//参数为结构体数组指针，数组长度
{
	qsort(s, sz, sizeof(s[0]), cmp_stu_by_name);
	// 打印排序后的结构体数组
	printf("\n按名字排序：\n");
	for (int i = 0; i &lt; sz; i++)
	{
		printf("%s is %d years old.\n", s[i].name, s[i].age);
	}
}

int main()
{
	struct Stu s[] = { {"zhangsan", 20}, {"lisi", 30}, {"wangwu", 15} };
	int sz = sizeof(s) / sizeof(s[0]);
	test_age(s, sz);
	test_name(s, sz);
	return 0;
}

</code></pre> 
<p>运行结果如下：</p> 
<p><img alt="" height="612" src="https://images2.imgbox.com/b8/4b/tTckW2Z5_o.png" width="1200"> </p> 
<h2 id="%E6%80%BB%E7%BB%93%C2%A0">4. 总结 </h2> 
<p>qsort 是 C 语言中一个强大且灵活的排序库函数。通过提供自定义的比较函数，我们可以对各种数据类型的数组进行排序。掌握 qsort 的用法，可以让我们的编程工作更加高效。</p> 
<p>希望本文能够帮助你更好地理解和运用 qsort 函数。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/99b9981ee555870f6d263dea5c6fc4a0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【数据结构】栈的概念、结构和实现详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4c374f8b468dd3580884a7670f3b1fd5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vscode开发avalonia</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>