<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java的三个接口Comparable,Comparator,Cloneable(浅拷贝与深拷贝) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1a2e438855d7495b3a5e021dfed8fe0d/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Java的三个接口Comparable,Comparator,Cloneable(浅拷贝与深拷贝)">
  <meta property="og:description" content="Comparable 当我们要进行对象的比较的时候，我们是不能直接用&gt;、&lt; 这些符号直接进行比较的。
由于这是引用类型变量也是自定义类型变量，直接进行比较的时候，我们是通过对象的地址进行比较的，我们可以使用==、!= 进行两个对象的地址是否相等，但是不能直接使用 &gt;、&lt; 进行比较，&gt;、&lt; 可以使用在基本的数据类型的比较中，因此 &gt;、&lt; 是不能用于地址的比较的
在Object 类中，我们知道可以使用equals方法来进行对象的比较，返回值是布尔值。如果我们要求返回值是整型的话，我们就要使用到Comparable接口。
使用 class Student implements Comparable&lt;Student&gt;{ public String name; public int age; public Student(String name, int age) { this.name = name; this.age = age; } @Override public int compareTo(Student o) { return this.age - o.age; } } 我们需要写上Comparable 接口，后面的&lt;&gt; 里面的内容写你要比较的对象的类型，这里包含泛型的知识，会在数据结构中讲解~~
我们先来看一下Comparable接口：
Comparable接口中包含 compareTo，因此我们需要重写这个方法，根据不同的比较需求来写不同的比较代码：
这里是实现age比较，如果是name比较，我们该怎么实现？
由于name是String类,String类有实现Comparable接口的，所以我们直接调用即可~~
多个同类型比较 如果我们有很多个学生需要进行比较排序，我们第一时间会想到使用数组来存放，然后通过数组排序（Array.sort()）来进行比较排序。
那Array.sort 是怎么进行排序的呢？
事实上Array.sort 是根据待排序的对象中的compareTo方法进行比较的
现在这个类没有Comparable接口：
我们一运行就会发生异常：
这是是Student类不能转化为Comparable，说明Array.sort的排序需要该类实现Comparable接口。
Array.sort 会调用 compareTo 方法进行比较。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-18T11:42:03+08:00">
    <meta property="article:modified_time" content="2024-06-18T11:42:03+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java的三个接口Comparable,Comparator,Cloneable(浅拷贝与深拷贝)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Comparable_0"></a>Comparable</h2> 
<p>当我们要进行对象的比较的时候，我们是不能直接用&gt;、&lt; 这些符号直接进行比较的。</p> 
<blockquote> 
 <p>由于这是<strong>引用类型变量也是自定义类型变量，直接进行比较的时候，我们是通过对象的地址进行比较的</strong>，<strong>我们可以使用==、!= 进行两个对象的地址是否相等</strong>，但是不能直接使用 &gt;、&lt; 进行比较，&gt;、&lt; 可以使用在基本的数据类型的比较中，因此 <strong>&gt;、&lt; 是不能用于地址的比较的</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/54/4b/RhrJWb3M_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/63/01/OXdNIADV_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/90/7e/xVAUphXr_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>在Object 类中，我们知道可以使用equals方法来进行对象的比较，返回值是布尔值。如果我们要求<strong>返回值是整型的话，我们就要使用到Comparable接口</strong>。</p> 
<h3><a id="_13"></a>使用</h3> 
<pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">-</span> o<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>我们需要写上Comparable 接口，后面的&lt;&gt; 里面的内容写你要比较的对象的类型，这里包含泛型的知识，会在数据结构中讲解~~</p> 
</blockquote> 
<p>我们先来看一下Comparable接口：</p> 
<p><img src="https://images2.imgbox.com/ca/f0/lYMrKlaj_o.png" alt="在这里插入图片描述"></p> 
<p>Comparable接口中包含 compareTo，因此我们需要重写这个方法，根据不同的比较需求来写不同的比较代码：<br> <img src="https://images2.imgbox.com/90/99/X0C61mE7_o.png" alt="在这里插入图片描述"><br> 这里是实现age比较，如果是name比较，我们该怎么实现？</p> 
<blockquote> 
 <p>由于name是String类,String类有实现Comparable接口的，所以我们直接调用即可~~</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/91/45/P4C9OatJ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/41/4f/k41ZGHZd_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ec/0c/NWvJnXQY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_48"></a>多个同类型比较</h3> 
<p>如果我们有很多个学生需要进行比较排序，我们第一时间会想到使用数组来存放，然后通过数组排序（Array.sort()）来进行比较排序。</p> 
<p>那Array.sort 是怎么进行排序的呢？</p> 
<blockquote> 
 <p>事实上Array.sort 是根据待排序的对象中的compareTo方法进行比较的</p> 
</blockquote> 
<hr> 
<p>现在这个类没有Comparable接口：<br> <img src="https://images2.imgbox.com/a6/ed/30ERPHMT_o.png" alt="在这里插入图片描述"><br> 我们一运行就会发生异常：</p> 
<p><img src="https://images2.imgbox.com/ff/f9/LwzPLFaz_o.png" alt="在这里插入图片描述"><br> 这是是Student类不能转化为Comparable，说明Array.sort的排序需要该类实现Comparable接口。</p> 
<p>Array.sort 会调用 compareTo 方法进行比较。</p> 
<hr> 
<h4><a id="Arraysort_66"></a>模拟实现Array.sort（冒泡排序法）</h4> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">mysort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> comparables<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> flag <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> comparables<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> comparables<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>comparables<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>comparables<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Comparable</span> tmp <span class="token operator">=</span> comparables<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    comparables<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> comparables<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                    comparables<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                    flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_84"></a>局限</h3> 
<p>由于<strong>compareTo 方法只能重写一次，实现不了重载</strong>，因为参数就是所在类的类型(也就意味着这是固定的参数)，所以它的局限性就是只能进行一种数值的比较，不能进行多种数值的比较，因此我们一般用在固定的比较，用在默认的比较上，如果要实现不同的数值的比较我们会用到比较器Comparator</p> 
<h2><a id="Comparator_86"></a>Comparator</h2> 
<p>我们可以使用Comparator<strong>实现不同属性比较的类</strong>，这里还是以学生类（包括姓名和年龄）作为例子：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NameComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o1<span class="token punctuation">,</span> <span class="token class-name">Student</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> o1<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AgeComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o1<span class="token punctuation">,</span> <span class="token class-name">Student</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> o1<span class="token punctuation">.</span>age <span class="token operator">-</span> o2<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>Comparator 后面也需要加上&lt;&gt;，里面填比较的类</strong><br> 还需要<strong>重写Comparator里面的compara方法</strong>~~</p> 
</blockquote> 
<p>之后我们就可以使用这些比较类的方法了，和类的使用是一样的，先创建对象，再使用里面的方法：</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu2 <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AgeComparator</span> ageComparator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AgeComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> ret <span class="token operator">=</span> ageComparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>stu1<span class="token punctuation">,</span>stu2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">NameComparator</span> nameComparator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NameComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ret <span class="token operator">=</span> nameComparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>stu1<span class="token punctuation">,</span>stu2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>如果你需要使用Array.sort的话，只需要再传比较类就可以了：</p> 
<pre><code class="prism language-java">        <span class="token class-name">AgeComparator</span> ageComparator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AgeComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>students<span class="token punctuation">,</span>ageComparator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">NameComparator</span> nameComparator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NameComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>students<span class="token punctuation">,</span>nameComparator<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="Cloneable_134"></a>Cloneable</h2> 
<p>当我们需要进行对象的克隆（复制）的时候，我们可以使用clone的接口，这是Object类的，在上一篇文章我们就提到其中的三个方法，现在我们就来将克隆方法（clone）</p> 
<p><img src="https://images2.imgbox.com/85/4e/A0d1u9E5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_138"></a>使用</h3> 
<p><img src="https://images2.imgbox.com/a5/68/HxG3kyZj_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>我们需要重写clone方法</strong><br> <img src="https://images2.imgbox.com/67/da/eRP12nBA_o.png" alt="在这里插入图片描述"><br> 因为clone方法这是protected修饰的，只能在同一个包下访问或者子类自己能访问，在Test类下是无法访问的，所以我们只能通过重写clone方法。</p> 
</blockquote> 
<p>快捷键如下：<br> <img src="https://images2.imgbox.com/e1/7a/9xXJFStW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ae/8f/A6OWxplP_o.png" alt="在这里插入图片描述"></p> 
<p>编译器会帮我们生成如下的代码：</p> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p><img src="https://images2.imgbox.com/a7/1d/hAjfVBFQ_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>强制类型转换，因为clone方法的放回值是Object类型的，我们需要强制类型转换为Student</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token class-name">Student</span> stu2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<p><img src="https://images2.imgbox.com/51/23/sqizrRqi_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>处理异常</strong>，异常我会在后续的文章中讲解，我们需要<strong>在调用clone方法的方法旁边写上throws CloneNotSupportedException</strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p>但是当我们运行的时候会发现下面的异常：<br> <img src="https://images2.imgbox.com/97/01/jgJbyvUI_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>这里写的是不支持clone，这时候我们就需要<strong>写上Cloneable接口</strong>，这是一个空的接口，目的就是来标记这个类是支持克隆的~~</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/7f/e1/xM76WGtA_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span>
</code></pre> 
<hr> 
<p>完成上述步骤我们就可以实现克隆了：</p> 
<p><img src="https://images2.imgbox.com/88/70/1RSdBeIv_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/9b/7b/OTXQKQHA_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<blockquote> 
 <p>当我们需要克隆的对象里面还包含一个对象的时候，如果我们不拷贝这个被包含的对象，那这就是浅拷贝，如果需要拷贝多一份新的被包含的对象时，那就是深拷贝。</p> 
</blockquote> 
<p>以下面的代码为例：<br> <img src="https://images2.imgbox.com/ab/54/9xFHtxr9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e0/89/ocTC7h4t_o.png" alt="在这里插入图片描述"><br> 我们来克隆一个per1：</p> 
<pre><code class="prism language-java"><span class="token class-name">Person</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"zhagnsan"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>浅拷贝示意图：</strong><br> <img src="https://images2.imgbox.com/e3/15/ai3BcIVG_o.png" alt="在这里插入图片描述"></p> 
<p><strong>深拷贝示意图:</strong><br> <img src="https://images2.imgbox.com/d2/bc/OexDfjc4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_211"></a>浅拷贝</h3> 
<blockquote> 
 <p>浅拷贝的实现和上面普通拷贝的实现是一样的，这里不赘述了，只有深拷贝有一些不一样</p> 
</blockquote> 
<p>通过上面的示意图，我们来做一下题目，说明下面的运行结果：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Money</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> m <span class="token operator">=</span> <span class="token number">9.99</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> money <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Money</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>
                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>
                <span class="token string">", money="</span> <span class="token operator">+</span> money <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Person</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"zhagnsan"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Person</span> per2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> per1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        per2<span class="token punctuation">.</span>money<span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token number">6.6</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"per1:"</span><span class="token operator">+</span>per1<span class="token punctuation">.</span>money<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"per2:"</span><span class="token operator">+</span>per2<span class="token punctuation">.</span>money<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/59/e3/DL4S58uq_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/51/f5/JijUVqaA_o.png" alt="在这里插入图片描述"></p> 
<p>这里显而易见，浅拷贝后per1和per2是共享money的，所以有一个人的money发生改变，另一个人的money也会发生改变。</p> 
<h3><a id="_265"></a>深拷贝</h3> 
<p>我们知道深拷贝需要再拷贝多一份全新的被包含的对象，所以我们需要实现被包含的对象的拷贝：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Money</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> m <span class="token operator">=</span> <span class="token number">9.99</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这是第一步，下一步我们需要在包含该类的类中的clone方法调用Money中的clone方法，才能实现完整的深拷贝工作：</p> 
<p>所以我们要修改Person中的clone方法：</p> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Person</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tmp<span class="token punctuation">.</span>money<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>money<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>现在再思考一下，下面的代码运行结果是什么？</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Money</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> m <span class="token operator">=</span> <span class="token number">9.99</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> money <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Money</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>
                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>
                <span class="token string">", money="</span> <span class="token operator">+</span> money <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Person</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tmp<span class="token punctuation">.</span>money<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>money<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Person</span> per1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"zhagnsan"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Person</span> per2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">)</span> per1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        per2<span class="token punctuation">.</span>money<span class="token punctuation">.</span>m <span class="token operator">=</span> <span class="token number">6.6</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"per1:"</span><span class="token operator">+</span>per1<span class="token punctuation">.</span>money<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"per2:"</span><span class="token operator">+</span>per2<span class="token punctuation">.</span>money<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/48/gAbiaXgH_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/71/93/29CjRVsz_o.png" alt="在这里插入图片描述"></p> 
<p>深拷贝已经重新将Money拷贝多一份了，所以per2的money改变了并不会影响到per1的money.</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5c9d124b8a8386911fcd32871cc00652/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">web系统数据库敏感数据处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/825e3b5e55d456979dc0271c45233306/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【机器学习】CART决策树算法的核心思想及其大数据时代银行贷款参考案例——机器认知外界的重要算法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>