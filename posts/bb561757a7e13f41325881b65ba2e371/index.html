<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java——常用JSON解析库详解（fastjson2、gson、jackson） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/bb561757a7e13f41325881b65ba2e371/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Java——常用JSON解析库详解（fastjson2、gson、jackson）">
  <meta property="og:description" content="目录 JSON解析1、概述2、fastjson22.1、Maven依赖2.2、API1)、常用API2)、序列化API3)、JSON字符串反序列化API 2.3、简单使用1)、JSON-&gt;JSONObject2)、JSON-&gt;JSONArray3)、JSON-&gt;Java Bean4)、Java Bean-&gt;JSON5)、JSONObject-&gt;Java Bean6)、Java Bean-&gt;JSONObject7)、JSONObject/JSONArray8)、嵌套对象 2.4、进阶使用1)、JSONB2)、JSONPath 2.5、注解1、JSONField定制序列化和反序列化时的属性名配置字段输出和反序列化的格式序列化/反序列化时忽略字段配置字段的序列化输出的的顺序配置序列化Features通过JSONField(value = true)配置JavaBean序列化字段和反序列化构造方式通过JSONField(value = true)配置Enum基于其中一个字段序列化和反序列化 2)、JSONType配置序列化和反序列化时忽略某些字段配置序列化时保持原生类字段顺序配置序列化时的JSONReader/JSONWriter的Features配置序列化时字段顺序 2.6、Features1)、JSONReader.Feature2)、JSONWriter.Feature 3、gson3.1、Maven依赖3.2、基本用法1)、创建Gson实例new Gson()GsonBuilder.build() 2)、Java对象-&gt;JSON3)、JSON-&gt;Java对象4)、美化输出5)、JSONArray -&gt; Java Array/List6)、Null值处理 3.3、注解1)、@Since2)、@SerializedName3)、@Expose 3.4、排除字段3.5、GsonBuilder1)、setPrettyPrinting2)、setFieldNamingPolicy3)、serializeNulls4)、setExclusionStrategies5)、setLenient 3.6、JsonReader1)、概述2)、Tokens3)、创建JsonReader4)、读取JSON流 3.7、JsonParser1)、创建JsonParser2)、转化JSON3)、JsonElement, JsonObject 和JsonArray4)、JsonParser 示例5)、使用fromJson() 获取JsonObject6)、迭代JSON树结构 3.8、自定义序列化1)、JsonSerializer接口2)、自定义序列化示例 3.9、自定义反序列化1)、JsonDeserializer接口2)、自定义反序列化示例 4、jackson4.1、Maven依赖4.2、简单使用1)、ObjectMapper2)、Java Bean-&gt;JSON3)、JSON-&gt;Java Bean4)、JSON-&gt;List/Map5)、字段忽略6)、日期格式化Date类型LocalDateTime类型 4.3、注解1)、序列化注解@JsonAnyGetter@JsonGetter@JsonPropertyOrder@JsonRawValue@JsonValue@JsonRootName@JsonSerialize 2)、反序列化注解@JsonCreator@JacksonInject@JsonAnySetter@JsonSetter@JsonDeserialize@JsonAlias 3)、属性注解@JsonIgnoreProperties@JsonIgnore@JsonIgnoreType@JsonInclude@JsonAutoDetect 4)、常用注解@JsonProperty@JsonFormat@JsonUnwrapped@JsonView@JsonManagedReference、@JsonBackReference@JsonIdentityInfo@JsonFilter 5)、其它注解@JacksonAnnotationsInside 4.4、配置属性 JSON解析 1、概述 JSON(JavaScript Object Notation)是一种轻量级的数据交换格式，相比xml数据交换格式来说，因为解析xml比较的复杂且需要编写大段的代码，所以客户端和服务器的数据交换格式往往通过JSON来进行交换。
JSON简单说就是javascript中的对象和数组，所以这两种结构就是对象和数组两种结构，通过这两种结构可以表示各种复杂的结构。
常用JSON解析库：
fastjson：阿里gson：谷歌jackson：SpringMVC自带 2、fastjson2 2.1、Maven依赖 &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;2.0.15&lt;/version&gt; &lt;/dependency&gt; 2.2、API 1)、常用API //把JSON文本parse为JSONObject或者JSONArray public static final Object parse(String text); //把JSON文本parse成JSONObject public static final JSONObject parseObject(String text); //把JSON文本parse为JavaBean public static final &lt;T&gt; T parseObject(String text, Class&lt;T&gt; clazz); //把JSON文本parse成JSONArray public static final JSONArray parseArray(String text); //把JSON文本parse成JavaBean集合 public static final &lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; clazz); //将JavaBean序列化为JSON文本 public static final String toJSONString(Object object); //将JavaBean序列化为带格式的JSON文本 public static final String toJSONString(Object object, boolean prettyFormat); //将JavaBean转换为JSONObject或者JSONArray。 public static final Object toJSON(Object javaObject); 2)、序列化API package com.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-07T23:19:49+08:00">
    <meta property="article:modified_time" content="2024-02-07T23:19:49+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java——常用JSON解析库详解（fastjson2、gson、jackson）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#JSON_2" rel="nofollow">JSON解析</a></li><li><ul><li><a href="#1_4" rel="nofollow">1、概述</a></li><li><a href="#2fastjson2_18" rel="nofollow">2、fastjson2</a></li><li><ul><li><a href="#21Maven_20" rel="nofollow">2.1、Maven依赖</a></li><li><a href="#22API_30" rel="nofollow">2.2、API</a></li><li><ul><li><a href="#1API_33" rel="nofollow">1)、常用API</a></li><li><a href="#2API_53" rel="nofollow">2)、序列化API</a></li><li><a href="#3JSONAPI_76" rel="nofollow">3)、JSON字符串反序列化API</a></li></ul> 
    </li><li><a href="#23_104" rel="nofollow">2.3、简单使用</a></li><li><ul><li><a href="#1JSONJSONObject_106" rel="nofollow">1)、JSON-&gt;JSONObject</a></li><li><a href="#2JSONJSONArray_121" rel="nofollow">2)、JSON-&gt;JSONArray</a></li><li><a href="#3JSONJava_Bean_138" rel="nofollow">3)、JSON-&gt;Java Bean</a></li><li><a href="#4Java_BeanJSON_162" rel="nofollow">4)、Java Bean-&gt;JSON</a></li><li><a href="#5JSONObjectJava_Bean_180" rel="nofollow">5)、JSONObject-&gt;Java Bean</a></li><li><a href="#6Java_BeanJSONObject_269" rel="nofollow">6)、Java Bean-&gt;JSONObject</a></li><li><a href="#7JSONObjectJSONArray_284" rel="nofollow">7)、JSONObject/JSONArray</a></li><li><a href="#8_326" rel="nofollow">8)、嵌套对象</a></li></ul> 
    </li><li><a href="#24_366" rel="nofollow">2.4、进阶使用</a></li><li><ul><li><a href="#1JSONB_368" rel="nofollow">1)、JSONB</a></li><li><a href="#2JSONPath_388" rel="nofollow">2)、JSONPath</a></li></ul> 
    </li><li><a href="#25_416" rel="nofollow">2.5、注解</a></li><li><ul><li><a href="#1JSONField_419" rel="nofollow">1、JSONField</a></li><li><ul><li><a href="#_423" rel="nofollow">定制序列化和反序列化时的属性名</a></li><li><a href="#_448" rel="nofollow">配置字段输出和反序列化的格式</a></li><li><a href="#_460" rel="nofollow">序列化/反序列化时忽略字段</a></li><li><a href="#_478" rel="nofollow">配置字段的序列化输出的的顺序</a></li><li><a href="#Features_492" rel="nofollow">配置序列化Features</a></li><li><a href="#JSONFieldvalue__trueJavaBean_515" rel="nofollow">通过JSONField(value = true)配置JavaBean序列化字段和反序列化构造方式</a></li><li><a href="#JSONFieldvalue__trueEnum_543" rel="nofollow">通过JSONField(value = true)配置Enum基于其中一个字段序列化和反序列化</a></li></ul> 
     </li><li><a href="#2JSONType_586" rel="nofollow">2)、JSONType</a></li><li><ul><li><a href="#_640" rel="nofollow">配置序列化和反序列化时忽略某些字段</a></li><li><a href="#_660" rel="nofollow">配置序列化时保持原生类字段顺序</a></li><li><a href="#JSONReaderJSONWriterFeatures_688" rel="nofollow">配置序列化时的JSONReader/JSONWriter的Features</a></li><li><a href="#_720" rel="nofollow">配置序列化时字段顺序</a></li></ul> 
    </li></ul> 
    </li><li><a href="#26Features_751" rel="nofollow">2.6、Features</a></li><li><ul><li><a href="#1JSONReaderFeature_770" rel="nofollow">1)、JSONReader.Feature</a></li><li><a href="#2JSONWriterFeature_859" rel="nofollow">2)、JSONWriter.Feature</a></li></ul> 
   </li></ul> 
   </li><li><a href="#3gson_1021" rel="nofollow">3、gson</a></li><li><ul><li><a href="#31Maven_1031" rel="nofollow">3.1、Maven依赖</a></li><li><a href="#32_1041" rel="nofollow">3.2、基本用法</a></li><li><ul><li><a href="#1Gson_1043" rel="nofollow">1)、创建Gson实例</a></li><li><ul><li><a href="#new_Gson_1048" rel="nofollow">new Gson()</a></li><li><a href="#GsonBuilderbuild_1054" rel="nofollow">GsonBuilder.build()</a></li></ul> 
     </li><li><a href="#2JavaJSON_1062" rel="nofollow">2)、Java对象-&gt;JSON</a></li><li><a href="#3JSONJava_1087" rel="nofollow">3)、JSON-&gt;Java对象</a></li><li><a href="#4_1108" rel="nofollow">4)、美化输出</a></li><li><a href="#5JSONArray__Java_ArrayList_1131" rel="nofollow">5)、JSONArray -&gt; Java Array/List</a></li><li><a href="#6Null_1166" rel="nofollow">6)、Null值处理</a></li></ul> 
    </li><li><a href="#33_1190" rel="nofollow">3.3、注解</a></li><li><ul><li><a href="#1Since_1192" rel="nofollow">1)、@Since</a></li><li><a href="#2SerializedName_1260" rel="nofollow">2)、@SerializedName</a></li><li><a href="#3Expose_1306" rel="nofollow">3)、@Expose</a></li></ul> 
    </li><li><a href="#34_1352" rel="nofollow">3.4、排除字段</a></li><li><a href="#35GsonBuilder_1414" rel="nofollow">3.5、GsonBuilder</a></li><li><ul><li><a href="#1setPrettyPrinting_1419" rel="nofollow">1)、setPrettyPrinting</a></li><li><a href="#2setFieldNamingPolicy_1432" rel="nofollow">2)、setFieldNamingPolicy</a></li><li><a href="#3serializeNulls_1467" rel="nofollow">3)、serializeNulls</a></li><li><a href="#4setExclusionStrategies_1482" rel="nofollow">4)、setExclusionStrategies</a></li><li><a href="#5setLenient_1509" rel="nofollow">5)、setLenient</a></li></ul> 
    </li><li><a href="#36JsonReader_1522" rel="nofollow">3.6、JsonReader</a></li><li><ul><li><a href="#1_1526" rel="nofollow">1)、概述</a></li><li><a href="#2Tokens_1532" rel="nofollow">2)、Tokens</a></li><li><a href="#3JsonReader_1549" rel="nofollow">3)、创建JsonReader</a></li><li><a href="#4JSON_1569" rel="nofollow">4)、读取JSON流</a></li></ul> 
    </li><li><a href="#37JsonParser_1628" rel="nofollow">3.7、JsonParser</a></li><li><ul><li><a href="#1JsonParser_1635" rel="nofollow">1)、创建JsonParser</a></li><li><a href="#2JSON_1642" rel="nofollow">2)、转化JSON</a></li><li><a href="#3JsonElement_JsonObject_JsonArray_1651" rel="nofollow">3)、JsonElement, JsonObject 和JsonArray</a></li><li><a href="#4JsonParser__1669" rel="nofollow">4)、JsonParser 示例</a></li><li><a href="#5fromJson_JsonObject_1688" rel="nofollow">5)、使用fromJson() 获取JsonObject</a></li><li><a href="#6JSON_1695" rel="nofollow">6)、迭代JSON树结构</a></li></ul> 
    </li><li><a href="#38_1729" rel="nofollow">3.8、自定义序列化</a></li><li><ul><li><a href="#1JsonSerializer_1731" rel="nofollow">1)、JsonSerializer接口</a></li><li><a href="#2_1747" rel="nofollow">2)、自定义序列化示例</a></li></ul> 
    </li><li><a href="#39_1783" rel="nofollow">3.9、自定义反序列化</a></li><li><ul><li><a href="#1JsonDeserializer_1785" rel="nofollow">1)、JsonDeserializer接口</a></li><li><a href="#2_1801" rel="nofollow">2)、自定义反序列化示例</a></li></ul> 
   </li></ul> 
   </li><li><a href="#4jackson_1853" rel="nofollow">4、jackson</a></li><li><ul><li><a href="#41Maven_1863" rel="nofollow">4.1、Maven依赖</a></li><li><a href="#42_1874" rel="nofollow">4.2、简单使用</a></li><li><ul><li><a href="#1ObjectMapper_1876" rel="nofollow">1)、ObjectMapper</a></li><li><a href="#2Java_BeanJSON_1886" rel="nofollow">2)、Java Bean-&gt;JSON</a></li><li><a href="#3JSONJava_Bean_1899" rel="nofollow">3)、JSON-&gt;Java Bean</a></li><li><a href="#4JSONListMap_1913" rel="nofollow">4)、JSON-&gt;List/Map</a></li><li><a href="#5_1931" rel="nofollow">5)、字段忽略</a></li><li><a href="#6_1953" rel="nofollow">6)、日期格式化</a></li><li><ul><li><a href="#Date_1957" rel="nofollow">Date类型</a></li><li><a href="#LocalDateTime_1995" rel="nofollow">LocalDateTime类型</a></li></ul> 
    </li></ul> 
    </li><li><a href="#43_2030" rel="nofollow">4.3、注解</a></li><li><ul><li><a href="#1_2036" rel="nofollow">1)、序列化注解</a></li><li><ul><li><a href="#JsonAnyGetter_2038" rel="nofollow">@JsonAnyGetter</a></li><li><a href="#JsonGetter_2087" rel="nofollow">@JsonGetter</a></li><li><a href="#JsonPropertyOrder_2105" rel="nofollow">@JsonPropertyOrder</a></li><li><a href="#JsonRawValue_2119" rel="nofollow">@JsonRawValue</a></li><li><a href="#JsonValue_2146" rel="nofollow">@JsonValue</a></li><li><a href="#JsonRootName_2175" rel="nofollow">@JsonRootName</a></li><li><a href="#JsonSerialize_2221" rel="nofollow">@JsonSerialize</a></li></ul> 
     </li><li><a href="#2_2269" rel="nofollow">2)、反序列化注解</a></li><li><ul><li><a href="#JsonCreator_2272" rel="nofollow">@JsonCreator</a></li><li><a href="#JacksonInject_2313" rel="nofollow">@JacksonInject</a></li><li><a href="#JsonAnySetter_2343" rel="nofollow">@JsonAnySetter</a></li><li><a href="#JsonSetter_2388" rel="nofollow">@JsonSetter</a></li><li><a href="#JsonDeserialize_2409" rel="nofollow">@JsonDeserialize</a></li><li><a href="#JsonAlias_2460" rel="nofollow">@JsonAlias</a></li></ul> 
     </li><li><a href="#3_2486" rel="nofollow">3)、属性注解</a></li><li><ul><li><a href="#JsonIgnoreProperties_2488" rel="nofollow">@JsonIgnoreProperties</a></li><li><a href="#JsonIgnore_2513" rel="nofollow">@JsonIgnore</a></li><li><a href="#JsonIgnoreType_2535" rel="nofollow">@JsonIgnoreType</a></li><li><a href="#JsonInclude_2582" rel="nofollow">@JsonInclude</a></li><li><a href="#JsonAutoDetect_2607" rel="nofollow">@JsonAutoDetect</a></li></ul> 
     </li><li><a href="#4_2634" rel="nofollow">4)、常用注解</a></li><li><ul><li><a href="#JsonProperty_2636" rel="nofollow">@JsonProperty</a></li><li><a href="#JsonFormat_2676" rel="nofollow">@JsonFormat</a></li><li><a href="#JsonUnwrapped_2711" rel="nofollow">@JsonUnwrapped</a></li><li><a href="#JsonView_2748" rel="nofollow">@JsonView</a></li><li><a href="#JsonManagedReferenceJsonBackReference_2802" rel="nofollow">@JsonManagedReference、@JsonBackReference</a></li><li><a href="#JsonIdentityInfo_2858" rel="nofollow">@JsonIdentityInfo</a></li><li><a href="#JsonFilter_2894" rel="nofollow">@JsonFilter</a></li></ul> 
     </li><li><a href="#5_2914" rel="nofollow">5)、其它注解</a></li><li><ul><li><a href="#JacksonAnnotationsInside_2916" rel="nofollow">@JacksonAnnotationsInside</a></li></ul> 
    </li></ul> 
    </li><li><a href="#44_2955" rel="nofollow">4.4、配置属性</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="JSON_2"></a>JSON解析</h2> 
<h3><a id="1_4"></a>1、概述</h3> 
<p>JSON(JavaScript Object Notation)是一种轻量级的数据交换格式，相比xml数据交换格式来说，因为解析xml比较的复杂且需要编写大段的代码，所以客户端和服务器的数据交换格式往往通过JSON来进行交换。</p> 
<p>JSON简单说就是javascript中的对象和数组，所以这两种结构就是对象和数组两种结构，通过这两种结构可以表示各种复杂的结构。</p> 
<p>常用JSON解析库：</p> 
<ul><li><strong>fastjson</strong>：阿里</li><li><strong>gson</strong>：谷歌</li><li><strong>jackson</strong>：SpringMVC自带</li></ul> 
<h3><a id="2fastjson2_18"></a>2、fastjson2</h3> 
<h4><a id="21Maven_20"></a>2.1、Maven依赖</h4> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="22API_30"></a>2.2、API</h4> 
<h5><a id="1API_33"></a>1)、常用API</h5> 
<pre><code class="prism language-java">    <span class="token comment">//把JSON文本parse为JSONObject或者JSONArray</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//把JSON文本parse成JSONObject</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">JSONObject</span> <span class="token function">parseObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//把JSON文本parse为JavaBean</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">parseObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//把JSON文本parse成JSONArray</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">JSONArray</span> <span class="token function">parseArray</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//把JSON文本parse成JavaBean集合</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">parseArray</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将JavaBean序列化为JSON文本</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将JavaBean序列化为带格式的JSON文本</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">,</span> <span class="token keyword">boolean</span> prettyFormat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将JavaBean转换为JSONObject或者JSONArray。</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token class-name">Object</span> javaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2API_53"></a>2)、序列化API</h5> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">JSON</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 将Java对象序列化为JSON字符串，支持各种各种Java基本类型和JavaBean</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">,</span> <span class="token class-name">SerializerFeature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将Java对象序列化为JSON字符串，返回JSON字符串的utf-8 bytes</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toJSONBytes</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">,</span> <span class="token class-name">SerializerFeature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将Java对象序列化为JSON字符串，写入到Writer中</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeJSONString</span><span class="token punctuation">(</span><span class="token class-name">Writer</span> writer<span class="token punctuation">,</span> 
                                       <span class="token class-name">Object</span> object<span class="token punctuation">,</span> 
                                       <span class="token class-name">SerializerFeature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将Java对象序列化为JSON字符串，按UTF-8编码写入到OutputStream中</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">writeJSONString</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span> os<span class="token punctuation">,</span>
                                            <span class="token class-name">Object</span> object<span class="token punctuation">,</span>
                                            <span class="token class-name">SerializerFeature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3JSONAPI_76"></a>3)、JSON字符串反序列化API</h5> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">JSON</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 将JSON字符串反序列化为JavaBean</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">parseObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> jsonStr<span class="token punctuation">,</span> 
                                    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> 
                                    <span class="token class-name">Feature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将JSON字符串反序列化为JavaBean</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">parseObject</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> jsonBytes<span class="token punctuation">,</span>  <span class="token comment">// UTF-8格式的JSON字符串</span>
                                    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> 
                                    <span class="token class-name">Feature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将JSON字符串反序列化为泛型类型的JavaBean</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">parseObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> 
                                    <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">,</span> 
                                    <span class="token class-name">Feature</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将JSON字符串反序列为JSONObject</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">JSONObject</span> <span class="token function">parseObject</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="23_104"></a>2.3、简单使用</h4> 
<h5><a id="1JSONJSONObject_106"></a>1)、JSON-&gt;JSONObject</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonToJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1, \"name\": \"tom\", \"age\": 18}"</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> jsonBytes <span class="token operator">=</span> jsonStr<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//将JSON解析为JSONObject，支持各种形式的JSON</span>
    <span class="token class-name">JSONObject</span> jsonObject1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">JSONObject</span> jsonObject2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//tom</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2JSONJSONArray_121"></a>2)、JSON-&gt;JSONArray</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonToJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"[\"one\", \"two\", \"three\"]"</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> jsonBytes <span class="token operator">=</span> jsonStr<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//将JSON解析为JSONArray，支持各种形式的JSON</span>
    <span class="token class-name">JSONArray</span> jsonArray1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">JSONArray</span> jsonArray2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>jsonBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonArray1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//two</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonArray2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//three</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3JSONJava_Bean_138"></a>3)、JSON-&gt;Java Bean</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonToJavaBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1, \"name\": \"三国演义\", \"author\": \"罗贯中\", \"price\": 24.6}"</span><span class="token punctuation">;</span>

    <span class="token comment">//将JSON解析为Java Bean</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//DemoTest.Book(id=1, name=三国演义, author=罗贯中, price=24.6)</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="4Java_BeanJSON_162"></a>4)、Java Bean-&gt;JSON</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">javaBeanToJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">10l</span><span class="token punctuation">,</span> <span class="token string">"水浒传"</span><span class="token punctuation">,</span> <span class="token string">"施耐庵"</span><span class="token punctuation">,</span> <span class="token number">33.33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//将JavaBean转换为Json</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> jsonBytes <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONBytes</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"author":"施耐庵","id":10,"name":"水浒传","price":33.33}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"author":"施耐庵","id":10,"name":"水浒传","price":33.33}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>jsonBytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="5JSONObjectJava_Bean_180"></a>5)、JSONObject-&gt;Java Bean</h5> 
<pre><code class="prism language-java"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> author<span class="token punctuation">,</span> <span class="token class-name">Double</span> price<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> author<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token class-name">String</span> author<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token class-name">Double</span> price<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Book{"</span> <span class="token operator">+</span>
                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", author='"</span> <span class="token operator">+</span> author <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", price="</span> <span class="token operator">+</span> price <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonObjectToJavaBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"水浒传"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"author"</span><span class="token punctuation">,</span> <span class="token string">"施耐庵"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">,</span> <span class="token number">33.33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//方式一：使用JSON.to()，实体对象必须要有无参构造和get/set方法</span>
    <span class="token class-name">Book</span> book1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> jsonObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//方式二：使用JsonObject.to()</span>
    <span class="token class-name">Book</span> book2 <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//方式三：JsonObject.getObject()，如果指定的key不存在，返回null</span>
    <span class="token class-name">Book</span> book3 <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//方式四：JSONObject-&gt;JSON-&gt;JavaBean</span>
    <span class="token class-name">Book</span> book4 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Book{id=10, name='水浒传', author='施耐庵', price=33.33}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Book{id=10, name='水浒传', author='施耐庵', price=33.33}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//null</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Book{id=10, name='水浒传', author='施耐庵', price=33.33}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="6Java_BeanJSONObject_269"></a>6)、Java Bean-&gt;JSONObject</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">javaBeanToJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"水浒传"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token string">"施耐庵"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token number">33.33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">)</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{"author":"施耐庵","id":1,"name":"水浒传","price":33.33}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="7JSONObjectJSONArray_284"></a>7)、JSONObject/JSONArray</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonObjectTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"name\": \"tom\",\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"age\": 18,\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"address\": {\n"</span> <span class="token operator">+</span>
            <span class="token string">"    \"city\": \"BeiJing\",\n"</span> <span class="token operator">+</span>
            <span class="token string">"    \"district\": \"ChaoYang\"\n"</span> <span class="token operator">+</span>
            <span class="token string">"  },\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"scores\": [\n"</span> <span class="token operator">+</span>
            <span class="token string">"    88.8,\n"</span> <span class="token operator">+</span>
            <span class="token string">"    77.7,\n"</span> <span class="token operator">+</span>
            <span class="token string">"    99.9\n"</span> <span class="token operator">+</span>
            <span class="token string">"  ]\n"</span> <span class="token operator">+</span>
            <span class="token string">"}\n"</span> <span class="token operator">+</span>
            <span class="token string">"\n"</span><span class="token punctuation">;</span>
    <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//读取简单属性</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Integer</span> age <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getInteger</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//18</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//tom</span>

    <span class="token comment">//读取数组</span>
    <span class="token class-name">JSONArray</span> jsonArray <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"scores"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonArray<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[88.8, 77.7, 99.9]</span>

    <span class="token comment">//读取数据元素</span>
    <span class="token class-name">Double</span> score <span class="token operator">=</span> jsonArray<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//88.8</span>

    <span class="token comment">//读取JavaBean</span>
    <span class="token class-name">Address</span> address <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">,</span> <span class="token class-name">Address</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Address{city='BeiJing', district='ChaoYang'}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="8_326"></a>8)、嵌套对象</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    roles<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    roles<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"db"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setRoles</span><span class="token punctuation">(</span>roles<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> desc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"aaa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"bbb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"ccc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setDesc</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//JavaBean -&gt; JSONObject</span>
    <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">)</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"desc":{"a":"aaa","b":"bbb","c":"ccc"},"id":1,"password":"123456","roles":["admin","db"],"username":"tom"}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//JavaBean -&gt; JSON</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"desc":{"a":"aaa","b":"bbb","c":"ccc"},"id":1,"password":"123456","roles":["admin","db"],"username":"tom"}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//JSONObject -&gt; JavaBean</span>
    <span class="token class-name">User</span> u1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> jsonObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//User{id=1, username='tom', password='123456', roles=[admin, db], desc={a=aaa, b=bbb, c=ccc}}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//JSON -&gt; JavaBean</span>
    <span class="token class-name">User</span> u2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//User{id=1, username='tom', password='123456', roles=[admin, db], desc={a=aaa, b=bbb, c=ccc}}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="24_366"></a>2.4、进阶使用</h4> 
<h5><a id="1JSONB_368"></a>1)、JSONB</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonbTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"水浒传"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token string">"施耐庵"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token number">33.33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//JavaBean -&gt; JSONB</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bookJSONB <span class="token operator">=</span> <span class="token constant">JSONB</span><span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//JSONB -&gt; JavaBean</span>
    <span class="token class-name">Book</span> b <span class="token operator">=</span> <span class="token constant">JSONB</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>bookJSONB<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Book{id=1, name='水浒传', author='施耐庵', price=33.33}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2JSONPath_388"></a>2)、JSONPath</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonpathTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"name\": \"tom\",\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"age\": 18,\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"address\": {\n"</span> <span class="token operator">+</span>
            <span class="token string">"    \"city\": \"BeiJing\",\n"</span> <span class="token operator">+</span>
            <span class="token string">"    \"district\": \"ChaoYang\"\n"</span> <span class="token operator">+</span>
            <span class="token string">"  },\n"</span> <span class="token operator">+</span>
            <span class="token string">"  \"scores\": [\n"</span> <span class="token operator">+</span>
            <span class="token string">"    88.8,\n"</span> <span class="token operator">+</span>
            <span class="token string">"    77.7,\n"</span> <span class="token operator">+</span>
            <span class="token string">"    99.9\n"</span> <span class="token operator">+</span>
            <span class="token string">"  ]\n"</span> <span class="token operator">+</span>
            <span class="token string">"}\n"</span> <span class="token operator">+</span>
            <span class="token string">"\n"</span><span class="token punctuation">;</span>

    <span class="token class-name">JSONPath</span> path <span class="token operator">=</span> <span class="token class-name">JSONPath</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"$.address.city"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">JSONReader</span> reader <span class="token operator">=</span> <span class="token class-name">JSONReader</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> city <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> path<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//BeiJing</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="25_416"></a>2.5、注解</h4> 
<h5><a id="1JSONField_419"></a>1、JSONField</h5> 
<p>JSONField是作用在Field、Method、Parameter上的Annotation，可以用来指定序列化字段的顺序、名字、格式、是否忽略、配置JSONReader/JSONWriter的Features等。</p> 
<h6><a id="_423"></a>定制序列化和反序列化时的属性名</h6> 
<p>可以通过JSONField.name来配置序列化输出的字段名和反序列化是映射的字段名。</p> 
<pre><code class="prism language-java"><span class="token comment">//方式一：配置在public field上</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{<!-- --></span>
      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"ID"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>


<span class="token comment">//方式二：配置在public getter/setter method上</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
 
      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"ID"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> id<span class="token punctuation">;</span><span class="token punctuation">}</span>

      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"ID"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_448"></a>配置字段输出和反序列化的格式</h6> 
<p>针对Date类型的字段，经常需要用定制的日期格式进行序列化和反序列化，可以通过JSONField.format来配置自定义日期格式。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VO</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 配置date序列化和反序列使用yyyyMMdd日期格式</span>
      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>format <span class="token operator">=</span> <span class="token string">"yyyyMMdd"</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">Date</span> date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_460"></a>序列化/反序列化时忽略字段</h6> 
<p>可以通过JSONField.serialize配置该字段是否要序列化，通过JSONField.deserialize配置该字段是否需要反序列化。</p> 
<pre><code class="prism language-java"><span class="token comment">//配置序列化时忽略特定字段</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VO</span> <span class="token punctuation">{<!-- --></span>
      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>serialize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">Date</span> date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//配置反序列化忽略特定字段</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VO</span> <span class="token punctuation">{<!-- --></span>
      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>deserialize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">Date</span> date<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_478"></a>配置字段的序列化输出的的顺序</h6> 
<p>可以通过JSONField.ordinal来配置序列化时输出的顺序。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">VO</span> <span class="token punctuation">{<!-- --></span>
      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span>

      <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token keyword">public</span> <span class="token class-name">String</span> templateId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="Features_492"></a>配置序列化Features</h6> 
<p>可以通过JSONField.serializeFeatures来指定序列化的Feature。</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson2<span class="token punctuation">.</span></span><span class="token class-name">JSON</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson2<span class="token punctuation">.</span></span><span class="token class-name">JSONWriter</span><span class="token punctuation">.</span><span class="token class-name">Feature</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>


<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Bean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bean<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"{\"id\":\"100\"}"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>serializeFeatures <span class="token operator">=</span> <span class="token class-name">Feature<span class="token punctuation">.</span>WriteNonStringValueAsString</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JSONFieldvalue__trueJavaBean_515"></a>通过JSONField(value = true)配置JavaBean序列化字段和反序列化构造方式</h6> 
<p>将@JSONField(value = true)配置在其中一个字段上，序列化时，会将对象序列化时按照该字段的值输出。将@JSONField(value = true)配置在构造函数参数上，而且该构造函数只有1个参数，就会按照这个参数来构造对象</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">int</span> code<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@JSONField</span> <span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Bean2</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bean2</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"101"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Bean2</span> bean1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token class-name">Bean2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span>code<span class="token punctuation">,</span> bean1<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JSONFieldvalue__trueEnum_543"></a>通过JSONField(value = true)配置Enum基于其中一个字段序列化和反序列化</h6> 
<p>将@JSONField(value = true)配置在enum字段上，序列化和序列化都会基于这个字段来进行，比如：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Type</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">X</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token string">"Big"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">M</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">,</span> <span class="token string">"Medium"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">S</span><span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token string">"Small"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token class-name">Type</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bean1</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">Type</span> type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Bean1</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bean1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bean<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token class-name">Type<span class="token punctuation">.</span>M</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"{\"type\":102}"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Bean1</span> bean1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token class-name">Bean1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span>type<span class="token punctuation">,</span> bean1<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2JSONType_586"></a>2)、JSONType</h5> 
<p>JSONType是配置在类/接口上的注解，可以配置改类的所有字段的NamingStrategy、序列化和反序列化忽略的字段、JSONReader/JSONWriter的Features等。</p> 
<table><thead><tr><th>JSONType注解支持方法</th><th>简介</th></tr></thead><tbody><tr><td>ignores</td><td>序列化时忽略某些字段</td></tr><tr><td>alphabetic</td><td>配置序列化时保持原生类字段顺序</td></tr><tr><td>serializeFeatures</td><td>配置序列化时<code>JSONWriter</code>的<code>Features</code> </td></tr><tr><td>deserializeFeatures</td><td>配置反序列化时<code>JSONReader</code>的<code>Features</code> </td></tr><tr><td>orders</td><td>配置序列化时的字段顺序</td></tr><tr><td>naming</td><td>配置字段名的<code>NamingStrategy</code>,详细内容请参考<code>PropertyNamingStrategy</code>枚举类</td></tr><tr><td>serializer</td><td>自定义序列化行为</td></tr><tr><td>deserializer</td><td>自定义反序列化行为</td></tr><tr><td>serializeFilters</td><td>通过自定义列化<code>Filters</code>控制序列化行为</td></tr></tbody></table> 
<h6><a id="_640"></a>配置序列化和反序列化时忽略某些字段</h6> 
<p>在下面的例子中，序列化输出只包括id1，忽略id2和id3。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@JSONType</span><span class="token punctuation">(</span>ignores <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"id2"</span><span class="token punctuation">,</span> <span class="token string">"id3"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">101</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">102</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token number">103</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_660"></a>配置序列化时保持原生类字段顺序</h6> 
<p>从2.0.13版本开始，您可以通过@JSONType(alphabetic = false)配置序列化时保持原生类字段顺序。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JSONTypeAlphabetic</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@JSONType</span><span class="token punctuation">(</span>alphabetic <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Bean</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> f3<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> f1<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> f2<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> f0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Bean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>f0 <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>f1 <span class="token operator">=</span> <span class="token number">102</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>f2 <span class="token operator">=</span> <span class="token number">103</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>f3 <span class="token operator">=</span> <span class="token number">104</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//{"f3":104,"f1":102,"f2":103,"f0":101}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JSONReaderJSONWriterFeatures_688"></a>配置序列化时的JSONReader/JSONWriter的Features</h6> 
<p>您可以通过@JSONType(serializeFeatures= …)或@JSONType(deserializeFeatures = …)注解配置序列化和反序列时JSONWriter/JSONReader的Features。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JSONTypeFeatures</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 反序列化时对字符串进行trim</span>
    <span class="token comment">// 序列化时输出为null的字段</span>
    <span class="token annotation punctuation">@JSONType</span><span class="token punctuation">(</span>deserializeFeatures <span class="token operator">=</span> <span class="token class-name">JSONReader<span class="token punctuation">.</span>Feature<span class="token punctuation">.</span>TrimString</span><span class="token punctuation">,</span> serializeFeatures <span class="token operator">=</span> <span class="token class-name">JSONWriter<span class="token punctuation">.</span>Feature<span class="token punctuation">.</span>WriteNulls</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">OrdersBean</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> filed1<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> filed2<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">OrdersBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrdersBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>filed1 <span class="token operator">=</span> <span class="token string">"fastjson2"</span><span class="token punctuation">;</span>
        
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//{"filed1":"fastjson2","filed2":null}</span>
        <span class="token class-name">String</span> json<span class="token operator">=</span><span class="token string">"{\"filed1\":\"   fastjson2   \",\"filed2\":\"2\"}"</span><span class="token punctuation">;</span>
        
        <span class="token class-name">OrdersBean</span> bean2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">OrdersBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>bean2<span class="token punctuation">.</span>filed1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//fastjson2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_720"></a>配置序列化时字段顺序</h6> 
<p>您可以通过@JSONType(orders = {“filed1”, “filed2”})注解指定序列化时的字段顺序。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JSONTypeOrders</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@JSONType</span><span class="token punctuation">(</span>orders <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"filed4"</span><span class="token punctuation">,</span> <span class="token string">"filed3"</span><span class="token punctuation">,</span> <span class="token string">"filed2"</span><span class="token punctuation">,</span> <span class="token string">"filed1"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">OrdersBean</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> filed1<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> filed2<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> filed3<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> filed4<span class="token punctuation">;</span>
  
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">OrdersBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrdersBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>filed1 <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>filed2 <span class="token operator">=</span> <span class="token string">"2"</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>filed3 <span class="token operator">=</span> <span class="token string">"3"</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span>filed4 <span class="token operator">=</span> <span class="token string">"4"</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//{"filed4":"4","filed3":"3","filed2":"2","filed1":"1"}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="26Features_751"></a>2.6、Features</h4> 
<p>在fastjson 2.x中，有两个Feature，分别用来配置序列化和反序列化的行为。</p> 
<ul><li><strong>JSONWriter.Feature</strong>配置序列化的行为</li><li><strong>JSONReader.Feature</strong>配置反序列化的行为</li></ul> 
<p>使用方式：</p> 
<pre><code class="prism language-java"><span class="token comment">//在JSON的toJSONString方法中使用JSONWriter.Feature</span>
<span class="token class-name">Bean</span> bean <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> <span class="token class-name">JSONWriter<span class="token punctuation">.</span>Feature<span class="token punctuation">.</span>WriteNulls</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出对象中值为null的字段</span>


<span class="token comment">//在JSON的parse方法中使用JSONReader.Feature</span>
<span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">JSONReader<span class="token punctuation">.</span>Feature<span class="token punctuation">.</span>UseBigDecimalForDoubles</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将小数数值读取为double</span>
</code></pre> 
<h5><a id="1JSONReaderFeature_770"></a>1)、JSONReader.Feature</h5> 
<table><thead><tr><th>JSONReader.Feature</th><th>介绍</th></tr></thead><tbody><tr><td>FieldBased</td><td>基于字段反序列化，如果不配置，会默认基于public的field和getter方法序列化。配置后，会基于非static的field（包括private）做反序列化。在fieldbase配置下会更安全</td></tr><tr><td>IgnoreNoneSerializable</td><td>反序列化忽略非Serializable类型的字段</td></tr><tr><td>SupportArrayToBean</td><td>支持数据映射的方式</td></tr><tr><td>InitStringFieldAsEmpty</td><td>初始化String字段为空字符串""</td></tr><tr><td>SupportAutoType</td><td>支持自动类型，要读取带"@type"类型信息的JSON数据，需要显式打开SupportAutoType</td></tr><tr><td>SupportSmartMatch</td><td>默认下是camel case精确匹配，打开这个后，能够智能识别camel/upper/pascal/snake/Kebab五中case</td></tr><tr><td>UseNativeObject</td><td>默认是使用JSONObject和JSONArray，配置后会使用LinkedHashMap和ArrayList</td></tr><tr><td>SupportClassForName</td><td>支持类型为Class的字段，使用Class.forName。为了安全这个是默认关闭的</td></tr><tr><td>IgnoreSetNullValue</td><td>忽略输入为null的字段</td></tr><tr><td>UseDefaultConstructorAsPossible</td><td>尽可能使用缺省构造函数，在fieldBase打开这个选项没打开的时候，会可能用Unsafe.allocateInstance来实现</td></tr><tr><td>UseBigDecimalForFloats</td><td>默认配置会使用BigDecimal来parse小数，打开后会使用Float</td></tr><tr><td>UseBigDecimalForDoubles</td><td>默认配置会使用BigDecimal来parse小数，打开后会使用Double</td></tr><tr><td>ErrorOnEnumNotMatch</td><td>默认Enum的name不匹配时会忽略，打开后不匹配会抛异常</td></tr><tr><td>TrimString</td><td>对读取到的字符串值做trim处理</td></tr><tr><td>ErrorOnNotSupportAutoType</td><td>遇到AutoType报错（缺省是忽略）</td></tr><tr><td>DuplicateKeyValueAsArray</td><td>重复Key的Value不是替换而是组合成数组</td></tr><tr><td>AllowUnQuotedFieldNames</td><td>支持不带双引号的字段名</td></tr><tr><td>NonStringKeyAsString</td><td>非String类型的Key当做String处理</td></tr><tr><td>Base64StringAsByteArray</td><td>将byte[]序列化为Base64格式的字符串</td></tr></tbody></table> 
<h5><a id="2JSONWriterFeature_859"></a>2)、JSONWriter.Feature</h5> 
<table><thead><tr><th>JSONWriter.Feature</th><th>介绍</th></tr></thead><tbody><tr><td>FieldBased</td><td>基于字段序列化，如果不配置，会默认基于public的field和getter方法序列化。配置后，会基于非static的field（包括private）做序列化。</td></tr><tr><td>IgnoreNoneSerializable</td><td>序列化忽略非Serializable类型的字段</td></tr><tr><td>BeanToArray</td><td>将对象序列为[101,"XX"]这样的数组格式，这样的格式会更小</td></tr><tr><td>WriteNulls</td><td>序列化输出空值字段</td></tr><tr><td>BrowserCompatible</td><td>在大范围超过JavaScript支持的整数，输出为字符串格式</td></tr><tr><td>NullAsDefaultValue</td><td>将空置输出为缺省值，Number类型的null都输出为0，String类型的null输出为""，数组和Collection类型的输出为[]</td></tr><tr><td>WriteBooleanAsNumber</td><td>将true输出为1，false输出为0</td></tr><tr><td>WriteNonStringValueAsString</td><td>将非String类型的值输出为String，不包括对象和数据类型</td></tr><tr><td>WriteClassName</td><td>序列化时输出类型信息</td></tr><tr><td>NotWriteRootClassName</td><td>打开WriteClassName的同时，不输出根对象的类型信息</td></tr><tr><td>NotWriteHashMapArrayListClassName</td><td>打开WriteClassName的同时，不输出类型为HashMap/ArrayList类型对象的类型信息，反序列结合UseNativeObject使用，能节省序列化结果的大小</td></tr><tr><td>NotWriteDefaultValue</td><td>当字段的值为缺省值时，不输出，这个能节省序列化后结果的大小</td></tr><tr><td>WriteEnumsUsingName</td><td>序列化enum使用name</td></tr><tr><td>WriteEnumUsingToString</td><td>序列化enum使用toString方法</td></tr><tr><td>IgnoreErrorGetter</td><td>忽略setter方法的错误</td></tr><tr><td>PrettyFormat</td><td>格式化输出</td></tr><tr><td>ReferenceDetection</td><td>打开引用检测，这个缺省是关闭的，和fastjson 1.x不一致</td></tr><tr><td>WriteNameAsSymbol</td><td>将字段名按照symbol输出，这个仅在JSONB下起作用</td></tr><tr><td>WriteBigDecimalAsPlain</td><td>序列化BigDecimal使用toPlainString，避免科学计数法</td></tr><tr><td>UseSingleQuotes</td><td>使用单引号</td></tr><tr><td>MapSortField</td><td>对Map中的KeyValue按照Key做排序后再输出。在有些验签的场景需要使用这个Feature</td></tr><tr><td>WriteNullListAsEmpty</td><td>将List类型字段的空值序列化输出为空数组"[]"</td></tr><tr><td>WriteNullStringAsEmpty</td><td>将String类型字段的空值序列化输出为空字符串""</td></tr><tr><td>WriteNullNumberAsZero</td><td>将Number类型字段的空值序列化输出为0</td></tr><tr><td>WriteNullBooleanAsFalse</td><td>将Boolean类型字段的空值序列化输出为false</td></tr><tr><td>NotWriteEmptyArray</td><td>数组类型字段当length为0时不输出</td></tr><tr><td>WriteNonStringKeyAsString</td><td>将Map中的非String类型的Key当做String类型输出</td></tr><tr><td>ErrorOnNoneSerializable</td><td>序列化非Serializable对象时报错</td></tr><tr><td>WritePairAsJavaBean</td><td>将 Apache Common 包中的Pair对象当做JavaBean序列化</td></tr><tr><td>BrowserSecure</td><td>浏览器安全，将会'&lt;' '&gt;' '(' ')'字符做转义输出</td></tr><tr><td>WriteLongAsString</td><td>将Long序列化为String</td></tr><tr><td>WriteEnumUsingOrdinal</td><td>序列化Enum使用Ordinal，缺省是name</td></tr><tr><td>WriteThrowableClassName</td><td>序列化Throwable时带上类型信息</td></tr><tr><td>LargeObject</td><td>这个是一个保护措施，是为了防止序列化有循环引用对象消耗过大资源的保护措施。</td></tr><tr><td>UnquoteFieldName</td><td>不带引号输出Key</td></tr><tr><td>NotWriteSetClassName</td><td>当打开WriteClassName时又不想输出Set的类型信息，使用这个Feature</td></tr><tr><td>NotWriteNumberClassName</td><td>当打开WriteClassName时又不想输出Number的类型信息，比如L/S/B/F/D这种后缀，使用这个Feature</td></tr></tbody></table> 
<h3><a id="3gson_1021"></a>3、gson</h3> 
<p>Gson是Java序列化/反序列化库，用于将 Java 对象转换为JSON并返回。 Gson由Google创建，供内部使用，后来开源。</p> 
<p>Gson具有三种API：</p> 
<ul><li><strong>数据绑定API</strong>：数据绑定 API 使用属性访问器将JSON与POJO之间进行转换。 Gson使用数据类型适配器处理 JSON 数据。 它类似于XML JAXB解析器</li><li><strong>树模型API</strong>：树模型 API创建JSON 文档的内存树表示。 它构建JsonElements的树。 它类似于XML DOM解析器</li><li><strong>流API</strong>：流 API是一种低级 API，它使用JsonReader和JsonWriter作为离散记号读取和写入 JSON 内容。 这些类将数据读取为JsonTokens。 该 API 具有最低的开销，并且在读/写操作中速度很快。 它类似于 XML 的 Stax 解析器</li></ul> 
<h4><a id="31Maven_1031"></a>3.1、Maven依赖</h4> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.google.code.gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="32_1041"></a>3.2、基本用法</h4> 
<h5><a id="1Gson_1043"></a>1)、创建Gson实例</h5> 
<p>创建Gson对象有两种方式：</p> 
<ul><li>使用 new Gson()</li><li>创建GsonBuilder实例，使用 create() 方法</li></ul> 
<h6><a id="new_Gson_1048"></a>new Gson()</h6> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="GsonBuilderbuild_1054"></a>GsonBuilder.build()</h6> 
<pre><code class="prism language-java"><span class="token class-name">GsonBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Gson</span> gson <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2JavaJSON_1062"></a>2)、Java对象-&gt;JSON</h5> 
<p>在Gson中的序列化即将Java对象转换为其JSON表示形式。 为了进行序列化，首先需要一个Gson对象，该对象可以处理转换。 接下来，需要调用函数toJson()方法并传入Java对象</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">toJsonTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> str1 <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"1":"a","2":"b","3":"c"}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">"水浒传"</span><span class="token punctuation">,</span> <span class="token string">"施耐庵"</span><span class="token punctuation">,</span> <span class="token number">22.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str2 <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":1,"name":"水浒传","author":"施耐庵","price":22.22}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3JSONJava_1087"></a>3)、JSON-&gt;Java对象</h5> 
<p>在Gson进行反序列指的是将JSON字符串转换为Java对象。 为了进行反序列化，我们需要使用Gson对象调用fromJson()函数，并在解析完成后传递两个参数，即JSON字符串和所需的Java类型。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fromJsonTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">"{\"id\": 1, \"name\": \"水浒传\", \"author\": \"施耐庵\", \"price\": 22.22}"</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">"{\"1\": \"a\", \"2\": \"b\", \"3\": \"c\"}"</span><span class="token punctuation">;</span>

    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Book{id=1, name='水浒传', author='施耐庵', price=22.22}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span> map <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{1=a, 2=b, 3=c}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="4_1108"></a>4)、美化输出</h5> 
<p>默认情况下，Gson以紧凑格式打印JSON，即字段名称及其值，对象字段以及JSON输出中数组内的对象等之间将没有空格。</p> 
<p>但是，这种紧凑的JSON可能很难阅读。因此，GSON提供了一个漂亮的打印选项，可以在其中打印JSON，以便于更加方便阅读。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prettyTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">"水浒传"</span><span class="token punctuation">,</span> <span class="token string">"施耐庵"</span><span class="token punctuation">,</span> <span class="token number">22.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// {<!-- --></span>
    <span class="token comment">//   "id": 1,</span>
    <span class="token comment">//   "name": "水浒传",</span>
    <span class="token comment">//   "author": "施耐庵",</span>
    <span class="token comment">//   "price": 22.22</span>
    <span class="token comment">// }</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="5JSONArray__Java_ArrayList_1131"></a>5)、JSONArray -&gt; Java Array/List</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonArrayToJavaArrayOrList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> jsonArray <span class="token operator">=</span> <span class="token string">"[\n"</span> <span class="token operator">+</span>
            <span class="token string">"  {\"id\": 1, \"name\": \"tom\"},\n"</span> <span class="token operator">+</span>
            <span class="token string">"  {\"id\": 2, \"name\": \"jerry\"},\n"</span> <span class="token operator">+</span>
            <span class="token string">"  {\"id\": 3, \"name\":  \"charles\"}\n"</span> <span class="token operator">+</span>
            <span class="token string">"]"</span><span class="token punctuation">;</span>

    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span><span class="token punctuation">[</span><span class="token punctuation">]</span> users <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonArray<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> users<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// User{id=1, name='tom'}</span>
    <span class="token comment">// User{id=2, name='jerry'}</span>
    <span class="token comment">// User{id=3, name='charles'}</span>


    <span class="token class-name">Type</span> type <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArrayList</span><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonArray<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// User{id=1, name='tom'}</span>
    <span class="token comment">// User{id=2, name='jerry'}</span>
    <span class="token comment">// User{id=3, name='charles'}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="6Null_1166"></a>6)、Null值处理</h5> 
<p>Gson中实现的默认行为是忽略空对象字段。如果需要允许序列化Null值，则需要使用GsonBuilder进行配置。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">nullsTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">"水浒传"</span><span class="token punctuation">,</span> <span class="token string">"施耐庵"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":1,"name":"水浒传","author":"施耐庵"}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//序列化null值</span>
    <span class="token class-name">Gson</span> gson2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">serializeNulls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str2 <span class="token operator">=</span> gson2<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":1,"name":"水浒传","author":"施耐庵","price":null}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="33_1190"></a>3.3、注解</h4> 
<h5><a id="1Since_1192"></a>1)、@Since</h5> 
<p>在Gson中，可以使用@Since注释维护同一对象的多个版本。可以在类，字段以及将来的方法中使用此注释。它采用单个参数ignoreVersionsAfter。</p> 
<p>当我们为Gson实例配置版本号“ M.N”时，所有标记有版本大于M.N的类字段都将被忽略。例如，如果我们将Gson配置为版本号“ 1.2”，则所有版本号更高的字段（例如1.3、1.4…）都将被忽略。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Since</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Since</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Since</span><span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>要创建使用过@Since注解的Gson实例，需要使用GsonBuilder.setVersion()方法:</p> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>让序列号以上的Employee对象序列化：</strong></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sinceTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Lokesh"</span><span class="token punctuation">,</span> <span class="token string">"Gupta"</span><span class="token punctuation">,</span> <span class="token string">"123@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// {<!-- --></span>
    <span class="token comment">//   "id": 1,</span>
    <span class="token comment">//   "firstName": "Lokesh",</span>
    <span class="token comment">//   "lastName": "Gupta"</span>
    <span class="token comment">// }</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>让序列号以上的JSON反序列化：</strong></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sinceTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"{\"id\": 1001, \"first\": \"Lokesh\", \"lastName\": \"Gupta\", \"email\": \"123@qq.com\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Employee(id=1001, firstName=null, lastName=Gupta, email=null)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2SerializedName_1260"></a>2)、@SerializedName</h5> 
<p>@SerializedName注解指示带注解的成员变量应使用提供的名称值作为其字段名称序列化为JSON。此注解将覆盖可能一直在使用GsonBuilder类的任何FieldNamingPolicy，包括默认的字段命名策略。</p> 
<blockquote> 
 <p>请注意，在此注解中指定的值必须是有效的JSON字段名称。</p> 
</blockquote> 
<p>注解包含属性：</p> 
<ul><li><strong>value</strong>：序列化或反序列化时所需的字段名称</li><li><strong>alternate</strong>：反序列化时字段的名称</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@SerializedName</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"emailId"</span><span class="token punctuation">,</span> alternate <span class="token operator">=</span> <span class="token string">"emailAddress"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serializedNameTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Lokesh"</span><span class="token punctuation">,</span> <span class="token string">"Gupta"</span><span class="token punctuation">,</span> <span class="token string">"123@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//序列化</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":1,"firstName":"Lokesh","lastName":"Gupta","emailId":"123@qq.com"}</span>

    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1001, \"firstName\": \"Lokesh\", \"lastName\": \"Gupta\", \"email\": \"123@qq.com\"}"</span><span class="token punctuation">;</span>
    <span class="token comment">//反序列化</span>
    <span class="token class-name">Employee</span> e <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Employee(id=1001, firstName=Lokesh, lastName=Gupta, email=null)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3Expose_1306"></a>3)、@Expose</h5> 
<p>@Expose注解可用于标记对象序列化或反序列化时是否公开（包括活不包括）的字段。</p> 
<p>注解包含属性：</p> 
<ul><li><strong>serialize</strong>：是否序列化该字段，默认true</li><li><strong>deserialize</strong>：是否反序列化该字段，默认true</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Expose</span><span class="token punctuation">(</span>serialize <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> deserialize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Expose</span><span class="token punctuation">(</span>serialize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> deserialize <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exposeTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Lokesh"</span><span class="token punctuation">,</span> <span class="token string">"Gupta"</span><span class="token punctuation">,</span> <span class="token string">"123@qq.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//需要使用GsonBuilder.excludeFieldsWithoutExposeAnnotation创建Gson实例</span>
    <span class="token comment">//才可以使@Expose注解生效</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">excludeFieldsWithoutExposeAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//序列化</span>
    <span class="token class-name">String</span> str <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{"firstName":"Lokesh"}</span>

    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1001, \"firstName\": \"Lokesh\", \"lastName\": \"Gupta\", \"email\": \"123@qq.com\"}"</span><span class="token punctuation">;</span>
    <span class="token comment">//反序列化</span>
    <span class="token class-name">Employee</span> e <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Employee(id=null, firstName=null, lastName=Gupta, email=null)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="34_1352"></a>3.4、排除字段</h4> 
<p>除了上述@Expose注解，还可以使用<code>transient</code>修饰符。效果等同于<code>serialize=false, deserialize=false</code>。</p> 
<p>还可以使用GsonBuilder的excludeFieldsWithModifiers()方法，我们可以排除具有某些公共修饰符的字段。</p> 
<p>例如，我们要排除一个类的所有静态成员，我们可以这样创建Gson对象：</p> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">excludeFieldsWithModifiers</span><span class="token punctuation">(</span><span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token constant">STATIC</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>可以使用任意数量的Modifier常量来“ excludeFieldsWithModifiers”方法。例如：</p> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">excludeFieldsWithModifiers</span><span class="token punctuation">(</span><span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token constant">STATIC</span><span class="token punctuation">,</span> 
                            <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token constant">TRANSIENT</span><span class="token punctuation">,</span> 
                            <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token constant">VOLATILE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>最后，如果以上任何一种技术都不适合我们，那么我们可以创建自己的策略。</p> 
<p><code>ExclusionStrategy</code>用于确定是否应将字段或顶级类作为JSON输出/输入的一部分进行序列化或反序列化。</p> 
<ul><li>对于序列化，如果shouldSkipClass（Class）或shouldSkipField（fieldAttributes）方法返回true，则该类或字段类型将不属于JSON输出。</li><li>对于反序列化，如果shouldSkipClass（Class）或shouldSkipField（fieldAttributes）方法返回true，则不会将其设置为Java对象结构的一部分。</li></ul> 
<p>例如，在ExclusionStrategy定义下面，将排除所有使用@Hidden注释注释的字段:</p> 
<pre><code class="prism language-java"><span class="token comment">//public @interface Hidden {<!-- --></span>
    <span class="token comment">// some implementation here</span>
<span class="token comment">//}</span>
 
<span class="token comment">// Excludes any field (or class) that is tagged with an "@Hidden"</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HiddenAnnotationExclusionStrategy</span> <span class="token keyword">implements</span> <span class="token class-name">ExclusionStrategy</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldSkipClass</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Hidden</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldSkipField</span><span class="token punctuation">(</span><span class="token class-name">FieldAttributes</span> f<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Hidden</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>要使用此排除策略，在GsonBuilder对象中进行设置:</p> 
<pre><code class="prism language-java"><span class="token class-name">GsonBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span><span class="token function">setExclusionStrategies</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">HiddenAnnotationExclusionStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token class-name">Gson</span> gson <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="35GsonBuilder_1414"></a>3.5、GsonBuilder</h4> 
<p>自定义Gson的行为，则可以使用GsonBuilder自定义的配置来创建新的Gson实例。</p> 
<h5><a id="1setPrettyPrinting_1419"></a>1)、setPrettyPrinting</h5> 
<p>默认情况下，Gson将创建紧凑的JSON字符串。这对于减少通过网络传输的数据量非常有用。</p> 
<p>但是，这种紧凑的JSON对开发人员进行开发/调试应用程序时不友好。使用漂亮的打印来格式化JSON输出：</p> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2setFieldNamingPolicy_1432"></a>2)、setFieldNamingPolicy</h5> 
<p><code>FieldNamingPolicy</code>枚举在序列化期间为JSON字段名称提供了几种标准命名约定。</p> 
<p>它有助于Gson实例将Java字段名称正确转换为所需的JSON字段名称。</p> 
<p>注意：以下任何命名约定均不会影响以@SerializedName注释的字段。我们将验证使用User类的每个策略生成的名称。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> first_Name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> _email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Lokesh"</span><span class="token punctuation">,</span> <span class="token string">"Gupta"</span><span class="token punctuation">,</span> <span class="token string">"admin@howtodoinjava.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
<span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFieldNamingPolicy</span><span class="token punctuation">(</span><span class="token class-name">FieldNamingPolicy</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li><strong>FieldNamingPolicy.IDENTITY</strong>：使用此命名策略字段名称不变。这个是默认的策略</li><li><strong>FieldNamingPolicy.LOWER_CASE_WITH_DASHES</strong>：Gson会将Java字段名称从其驼峰大小写形式修改为小写的字段名称，其中每个单词都用破折号（<code>-</code>）分隔</li><li><strong>FieldNamingPolicy.LOWER_CASE_WITH_DOTS</strong>：Gson会将Java字段名称从其驼峰大小写形式修改为小写的字段名称，其中每个单词都用点（<code>.</code>）分隔</li><li><strong>FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES</strong>：Gson会将Java字段名称从其驼峰大小写形式修改为小写的字段名称，其中每个单词都用下划线（<code>_</code>）分隔</li><li><strong>FieldNamingPolicy.UPPER_CAMEL_CASE</strong>：Gson将确保序列化为JSON格式的Java字段名称的第一个“字母”大写</li><li><strong>FieldNamingPolicy.UPPER_CAMEL_CASE_WITH_SPACES</strong>：Gson将确保在将Java字段名称的第一个“字母”序列化为JSON格式时将其大写，并且单词之间将使用<code>空格</code>分隔</li></ul> 
<h5><a id="3serializeNulls_1467"></a>3)、serializeNulls</h5> 
<p>默认情况下，Gson会在序列化过程中忽略null值。但是，有时我们想序列化具有空值的字段，以便它必须出现在JSON中。为此，可以使用serializeNulls()方法:</p> 
<pre><code class="prism language-java"><span class="token class-name">Employee</span> employeeObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Lokesh"</span><span class="token punctuation">,</span> <span class="token string">"Gupta"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 
<span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">serializeNulls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>employeeObj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="4setExclusionStrategies_1482"></a>4)、setExclusionStrategies</h5> 
<p><code>ExclusionStrategy</code>用于确定是否应将字段或顶级类作为JSON输出/输入的一部分进行序列化或反序列化。</p> 
<ul><li>对于序列化，如果shouldSkipClass（Class）方法返回true，则该类或字段类型将不会在JSON中输出。</li><li>对于反序列化，如果shouldSkipClass（Class）返回true，则不会将其设置为Java对象结构的一部分。</li></ul> 
<p>在下面的示例中，使用@NPI注解和属于Account类的实例的成员字段不会进行序列化和反序列化。</p> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setExclusionStrategies</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ExclusionStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldSkipField</span><span class="token punctuation">(</span><span class="token class-name">FieldAttributes</span> f<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token constant">NPI</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
 
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldSkipClass</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Account</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="5setLenient_1509"></a>5)、setLenient</h5> 
<p>在反序列化期间，Gson使用了一个宽松的JsonReader类。这意味着它仅接受兼容的JSON输入。</p> 
<p>如果JSON违反结构规则之一，它将抛出MalformedJsonException。如果我们将lenient设置为true，则它将忽视某些违规行为，并尝试读取格式不正确的JSON。</p> 
<pre><code class="prism language-java"><span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLenient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="36JsonReader_1522"></a>3.6、JsonReader</h4> 
<p>使用Gson JsonReader类，该类是基于拉式的流JSON解析器。它有助于将JSON作为令牌流读取。</p> 
<h5><a id="1_1526"></a>1)、概述</h5> 
<ul><li>JsonReader是流式JSON解析器，也是pull parser的示例。pull parser解析JSON令牌并将其推送到事件处理程序中。</li><li>它有助于读取JSON（RFC 7159）编码值作为令牌流。</li><li>它读取字面值（字符串，数字，布尔值和null）以及对象和数组的开始和结束定界符。</li><li>令牌以深度优先顺序遍历，与JSON文档中出现的顺序相同。</li></ul> 
<h5><a id="2Tokens_1532"></a>2)、Tokens</h5> 
<p>在流模式下，每个JSON数据都被视为一个单独的令牌。</p> 
<p>当我们使用JsonReader对其进行处理时，每个令牌将被顺序处理。例如：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
	<span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Lokesh"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在使用JsonReader进行解析时，以上JSON将生成4个令牌：</p> 
<pre><code>token1 = {
token2 = name
token3 = Lokesh
token4 = }
</code></pre> 
<h5><a id="3JsonReader_1549"></a>3)、创建JsonReader</h5> 
<p>我们可以使用它的简单构造函数创建一个JsonReader实例，该实例接受java.io.Reader类型的输入流。</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{}"</span><span class="token punctuation">;</span>
<span class="token class-name">JsonReader</span> jsonReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonReader</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们可以根据JSON流的来源使用以下阅读器之一：</p> 
<ul><li>BufferedReader</li><li>LineNumberReader</li><li>CharArrayReader</li><li>InputStreamReader</li><li>FileReader</li><li>FilterReader</li><li>PushbackReader</li><li>PipedReader</li><li>StringReader</li></ul> 
<h5><a id="4JSON_1569"></a>4)、读取JSON流</h5> 
<p>创建包含有效JSON源的JsonReader之后，我们可以开始遍历流令牌并查看令牌值。</p> 
<p>以下是使用JsonReader以令牌形式读取简单JSON的示例：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonReaderTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1001, \"firstName\": \"Lokesh\", \"lastName\": \"Gupta\", \"email\": null}"</span><span class="token punctuation">;</span>

    <span class="token class-name">JsonReader</span> jsonReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>jsonReader<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">JsonToken</span> nextToken <span class="token operator">=</span> jsonReader<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JsonToken</span><span class="token punctuation">.</span><span class="token constant">BEGIN_OBJECT</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nextToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            jsonReader<span class="token punctuation">.</span><span class="token function">beginObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JsonToken</span><span class="token punctuation">.</span><span class="token constant">NAME</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nextToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> jsonReader<span class="token punctuation">.</span><span class="token function">nextName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Token KEY &gt;&gt;&gt;&gt; "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JsonToken</span><span class="token punctuation">.</span><span class="token constant">STRING</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nextToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> jsonReader<span class="token punctuation">.</span><span class="token function">nextString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Token Value &gt;&gt;&gt;&gt; "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JsonToken</span><span class="token punctuation">.</span><span class="token constant">NUMBER</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nextToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">long</span> value <span class="token operator">=</span> jsonReader<span class="token punctuation">.</span><span class="token function">nextLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Token Value &gt;&gt;&gt;&gt; "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JsonToken</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nextToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            jsonReader<span class="token punctuation">.</span><span class="token function">nextNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Token Value &gt;&gt;&gt;&gt; null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">JsonToken</span><span class="token punctuation">.</span><span class="token constant">END_OBJECT</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nextToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            jsonReader<span class="token punctuation">.</span><span class="token function">endObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    jsonReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code>Token KEY &gt;&gt;&gt;&gt; id
Token Value &gt;&gt;&gt;&gt; 1001
Token KEY &gt;&gt;&gt;&gt; firstName
Token Value &gt;&gt;&gt;&gt; Lokesh
Token KEY &gt;&gt;&gt;&gt; lastName
Token Value &gt;&gt;&gt;&gt; Gupta
Token KEY &gt;&gt;&gt;&gt; email
Token Value &gt;&gt;&gt;&gt; null
</code></pre> 
<p>在上面的示例中：</p> 
<ul><li>如果JsonReader的hasNext（）方法具有更多令牌，则返回true。</li><li>peek（）方法返回下一个JSON令牌，但不移至该令牌。</li><li>随后多次调用peek（）将返回相同的JSON令牌。</li><li>可以使用JsonToken类的常量检查返回令牌的类型。</li><li>使用beginArray（）和endArray（）方法检查数组的左括号和右括号“ [”和“]”。使用beginObject（）和endObject（）方法检查对象的左括号和右括号“ {”和“}”。</li><li>令牌的密钥为JsonToken.NAME类型。使用nextName（）方法获取密钥名称。</li><li>确定令牌的类型后，使用诸如nextLong（），nextString（），nextInt（）等方法获取令牌的值。可以使用nextNull（）或skipValue（）使用空文字。</li><li>所有next …（）方法都返回当前标记的值，并将内部指针移至下一个。</li><li>当遇到未知名称时，严格的解析器应该失败，并带有异常。宽大的解析器应调用skipValue（）以递归地跳过该值的嵌套令牌，否则可能会发生冲突。</li></ul> 
<h4><a id="37JsonParser_1628"></a>3.7、JsonParser</h4> 
<p>Gson JsonParser用于将Json数据解析为JsonElement的解析树，从而解析为JsonObject。</p> 
<p>JsonObject可用于使用JSON字符串中的相应键来访问值。</p> 
<h5><a id="1JsonParser_1635"></a>1)、创建JsonParser</h5> 
<p>JsonParser类只有一个默认构造函数，并且不需要任何参数或配置。</p> 
<pre><code class="prism language-java"><span class="token class-name">JsonParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2JSON_1642"></a>2)、转化JSON</h5> 
<p>JsonParser类提供3种方法来提供JSON作为源并将其解析为JsonElements树。</p> 
<ul><li>JsonElement parse（JsonReader json）使用JsonReader读取JSON作为令牌流，并从JSON流中返回下一个值作为分析树。</li><li>JsonElement parse（java.io.Reader json）–使用指定的阅读器读取JSON并将JSON字符串解析为解析树。</li><li>JsonElement parse（java.lang.String json）–将指定的JSON字符串解析为解析树。</li></ul> 
<p>如果指定的文本不是有效的JSON，则这三个方法都将抛出JsonParseException和JsonSyntaxException。</p> 
<h5><a id="3JsonElement_JsonObject_JsonArray_1651"></a>3)、JsonElement, JsonObject 和JsonArray</h5> 
<p>在JsonElement树中解析了JSON字符串后，我们就可以使用它的各种方法来访问JSON数据元素。</p> 
<p>例如，使用一种类型检查方法找出它代表什么类型的JSON元素：</p> 
<pre><code class="prism language-java">jsonElement<span class="token punctuation">.</span><span class="token function">isJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jsonElement<span class="token punctuation">.</span><span class="token function">isJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jsonElement<span class="token punctuation">.</span><span class="token function">isJsonNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jsonElement<span class="token punctuation">.</span><span class="token function">isJsonPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们可以使用相应的方法将JsonElement转换为JsonObject和JsonArray：</p> 
<pre><code class="prism language-java"><span class="token class-name">JsonObject</span> jsonObject <span class="token operator">=</span> jsonElement<span class="token punctuation">.</span><span class="token function">getAsJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">JsonArray</span> jsonArray <span class="token operator">=</span> jsonElement<span class="token punctuation">.</span><span class="token function">getAsJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>一旦有了JsonObject或JsonArray实例，就可以使用其get（）方法从中提取字段。</p> 
<h5><a id="4JsonParser__1669"></a>4)、JsonParser 示例</h5> 
<p>使用JsonParser将JSON解析为JsonElement（和JsonObject），并使用键获取JSON值：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonParserTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1001, \"firstName\": \"Lokesh\", \"lastName\": \"Gupta\", \"email\": \"123@qq.com\"}"</span><span class="token punctuation">;</span>

    <span class="token class-name">JsonElement</span> jsonElement <span class="token operator">=</span> <span class="token class-name">JsonParser</span><span class="token punctuation">.</span><span class="token function">parseString</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">JsonObject</span> jsonObject <span class="token operator">=</span> jsonElement<span class="token punctuation">.</span><span class="token function">getAsJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"firstName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"lastName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"email"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="5fromJson_JsonObject_1688"></a>5)、使用fromJson() 获取JsonObject</h5> 
<pre><code class="prism language-java"><span class="token class-name">JsonObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">JsonObject</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="6JSON_1695"></a>6)、迭代JSON树结构</h5> 
<p>这是一个完整的示例，展示了如何迭代从JsonReader获得的JsonElement：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parserTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"name\": \"tom\", \"age\": 22, \"scores\": [70, 80, 90], \"address\": {\"a\": \"BeiJing\", \"b\": \"ShangHai\"}}"</span><span class="token punctuation">;</span>

    <span class="token class-name">JsonElement</span> jsonElement <span class="token operator">=</span> <span class="token class-name">JsonParser</span><span class="token punctuation">.</span><span class="token function">parseString</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonElement<span class="token punctuation">.</span><span class="token function">isJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">JsonObject</span> jsonObject <span class="token operator">=</span> jsonElement<span class="token punctuation">.</span><span class="token function">getAsJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">JsonElement</span> e1 <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonElement</span> e2 <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonElement</span> e3 <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"scores"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JsonElement</span> e4 <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e1<span class="token punctuation">.</span><span class="token function">getAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e2<span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e3<span class="token punctuation">.</span><span class="token function">isJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">JsonArray</span> arr <span class="token operator">=</span> e3<span class="token punctuation">.</span><span class="token function">getAsJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e4<span class="token punctuation">.</span><span class="token function">isJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">JsonObject</span> o <span class="token operator">=</span> e4<span class="token punctuation">.</span><span class="token function">getAsJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="38_1729"></a>3.8、自定义序列化</h4> 
<h5><a id="1JsonSerializer_1731"></a>1)、JsonSerializer接口</h5> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">JsonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">JsonElement</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token class-name">T</span> value<span class="token punctuation">,</span> <span class="token class-name">Type</span> type<span class="token punctuation">,</span>
            <span class="token class-name">JsonSerializationContext</span> jsonSerializationContext<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>为Json创建自定义序列化程序后，我们还需要通过GsonBuilder.registerTypeAdapter（Type，Object）注册该序列化程序。</p> 
<p>当Gson遇到指定类型的字段时，它会在序列化期间调用其回调方法serialize（）。</p> 
<h5><a id="2_1747"></a>2)、自定义序列化示例</h5> 
<p>假设我们遇到一种情况，我们必须将Java对象序列化为json，这样所有布尔值都应写为1或0，而不是打印true或false。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BooleanSerializer</span> <span class="token keyword">implements</span> <span class="token class-name">JsonSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">JsonElement</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span> src<span class="token punctuation">,</span> <span class="token class-name">Type</span> typeOfSrc<span class="token punctuation">,</span> <span class="token class-name">JsonSerializationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JsonPrimitive</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JsonPrimitive</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">registerTypeAdapter</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BooleanSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPrettyPrinting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// {<!-- --></span>
        <span class="token comment">//   "a": 1,</span>
        <span class="token comment">//   "b": 0,</span>
        <span class="token comment">//   "c": 1</span>
        <span class="token comment">// }</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="39_1783"></a>3.9、自定义反序列化</h4> 
<h5><a id="1JsonDeserializer_1785"></a>1)、JsonDeserializer接口</h5> 
<p>定制反序列化器必须实现JsonDeserializer接口。JsonDeserializer接口如下所示：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">JsonDeserializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> 
<span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token class-name">JsonElement</span> jsonElement<span class="token punctuation">,</span> 
        <span class="token class-name">Type</span> type<span class="token punctuation">,</span> <span class="token class-name">JsonDeserializationContext</span> jsonDeserializationContext<span class="token punctuation">)</span> 
        <span class="token keyword">throws</span> <span class="token class-name">JsonParseException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>为Json创建自定义反序列化器之后，我们还需要通过GsonBuilder.registerTypeAdapter（Type，Object）注册此反序列化器。</p> 
<p>当Gson遇到指定类型的字段时，它会在序列化期间调用其回调方法deserialize（）。</p> 
<h5><a id="2_1801"></a>2)、自定义反序列化示例</h5> 
<p>假设某些服务将日期字段分别分为天，月和年等部分分别返回给我们。在JSON字符串中，它们可能有意义，但是在Java中，它们只有作为单个java.time.LocalDate对象的一部分时才有意义。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> birthday<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDeserializer</span> <span class="token keyword">implements</span> <span class="token class-name">JsonDeserializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token class-name">JsonElement</span> json<span class="token punctuation">,</span> <span class="token class-name">Type</span> typeOfT<span class="token punctuation">,</span> <span class="token class-name">JsonDeserializationContext</span> context<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonParseException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">JsonObject</span> jsonObject <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">getAsJsonObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
            jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"month"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"day"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>
                jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                jsonObject<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                localDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//language=JSON</span>
        <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\n"</span> <span class="token operator">+</span>
                <span class="token string">"  \"id\": 1001,\n"</span> <span class="token operator">+</span>
                <span class="token string">"  \"name\": \"tom\",\n"</span> <span class="token operator">+</span>
                <span class="token string">"  \"year\": 2002,\n"</span> <span class="token operator">+</span>
                <span class="token string">"  \"month\": 11,\n"</span> <span class="token operator">+</span>
                <span class="token string">"  \"day\": 24\n"</span> <span class="token operator">+</span>
                <span class="token string">"}"</span><span class="token punctuation">;</span>
        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">registerTypeAdapter</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">UserDeserializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//User(id=1001, name=tom, birthday=2002-11-24)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4jackson_1853"></a>4、jackson</h3> 
<p>Jackson有三个核包，分别是 Streaming、Databid、Annotations，通过这些包可以方便的对 JSON 进行操作：</p> 
<ul><li>Streaming (opens new window)在 jackson-core 模块。 定义了一些流处理相关的 API 以及特定的 JSON 实现</li><li>Annotations (opens new window)在 jackson-annotations 模块，包含了 Jackson 中的注解</li><li>Databind (opens new window)在 jackson-databind 模块， 在 Streaming 包的基础上实现了数据绑定，依赖于 Streaming 和 Annotations 包</li></ul> 
<h4><a id="41Maven_1863"></a>4.1、Maven依赖</h4> 
<p>jackson-databind依赖 jackson-core 和 jackson-annotations，所以可以只显示地添加jackson-databind依赖。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.11.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="42_1874"></a>4.2、简单使用</h4> 
<h5><a id="1ObjectMapper_1876"></a>1)、ObjectMapper</h5> 
<p>ObjectMapper是Jackson 库中最常用的一个类，使用它可以进行 Java 对象和JSON字符串之间快速转换。</p> 
<ul><li><strong>readValue</strong>：进行JSON 的反序列化操作，比如可以将字符串、文件流、字节流、字节数组等将常见的内容转换成 Java 对象。</li><li><strong>writeValue</strong>：进行JSON 的序列化操作，可以将 Java 对象转换成 JSON 字符串。</li></ul> 
<blockquote> 
 <p>ObjectMapper的工作原理是通过 Java Bean 对象的 Get/Set 方法进行转换时映射的，所以Java对象的 Get/Set方法尤为重要。</p> 
</blockquote> 
<h5><a id="2Java_BeanJSON_1886"></a>2)、Java Bean-&gt;JSON</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">javaBeanToJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">"水浒传"</span><span class="token punctuation">,</span> <span class="token string">"施耐庵"</span><span class="token punctuation">,</span> <span class="token number">22.22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":1,"name":"水浒传","author":"施耐庵","price":22.22}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3JSONJava_Bean_1899"></a>3)、JSON-&gt;Java Bean</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonToJavaBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//language=JSON</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1, \"name\": \"水浒传\", \"author\": \"施耐庵\", \"price\": 22.22}"</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Book{id=1, name='水浒传', author='施耐庵', price=22.22}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="4JSONListMap_1913"></a>4)、JSON-&gt;List/Map</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonToListOrMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonList <span class="token operator">=</span> <span class="token string">"[1, 2, 3, 4, 5]"</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> jsonMap <span class="token operator">=</span> <span class="token string">"{\"a\": 1, \"b\": 2, \"c\": 3, \"d\": 4}"</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonList<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonMap<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//[1, 2, 3, 4, 5]</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{a=1, b=2, c=3, d=4}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="5_1931"></a>5)、字段忽略</h5> 
<p>如果在进行JSON 转 Java对象时，JSON中出现 Java 类中不存在的属性，那么在转换时会遇到<code>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException</code>异常。</p> 
<p>使用<code>objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false</code>)配置可以忽略不存在的属性。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ignoreField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> <span class="token string">"{\"id\": 1, \"name\": \"水浒传\", \"author\": \"施耐庵\", \"price\": 22.22, \"xxx\": \"XXX\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//配置字段忽略</span>
    objectMapper<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">DeserializationFeature</span><span class="token punctuation">.</span><span class="token constant">FAIL_ON_UNKNOWN_PROPERTIES</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">Book</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Book{id=1, name='水浒传', author='施耐庵', price=22.22}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="6_1953"></a>6)、日期格式化</h5> 
<p>开发中通常使用java.util.Date类或时间类java.time.LocalDateTime类(JDK8)，两者在Jackson中的处理略有不同。</p> 
<h6><a id="Date_1957"></a>Date类型</h6> 
<p>不使用@JsonFormat注解，可以正常的进行JSON的序列化与反序列化，但是JSON 中的时间是一个<code>时间戳格式</code></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dateTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"username":"tom","age":20,"createTime":1707214013642}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> u <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//User(username=tom, age=20, createTime=Tue Feb 06 18:06:53 CST 2024)</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用：<code>@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss", timezone = "Asia/Shanghai")</code></p> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span><span class="token string">"username"</span><span class="token operator">:</span><span class="token string">"Jack"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">"createTime"</span><span class="token operator">:</span><span class="token string">"2022-11-29 10:56:28"</span><span class="token punctuation">}</span>
<span class="token class-name">User</span><span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token class-name">Jack</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> createTime<span class="token operator">=</span><span class="token class-name">Tue</span> <span class="token class-name">Nov</span> <span class="token number">29</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">56</span><span class="token operator">:</span><span class="token number">28</span> <span class="token class-name">CST</span> <span class="token number">2022</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="LocalDateTime_1995"></a>LocalDateTime类型</h6> 
<p>默认情况下进行 LocalDateTime 类的 JSON 反序列化会遇到报错。异常信息：<code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException</code></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">localDateTimeTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User2</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User2</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> jsonStr <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//LocalDateTime被序列化为嵌套JSON</span>
    <span class="token comment">//{"username":"tom","age":20,"createTime":{"dayOfYear":37,"dayOfWeek":"TUESDAY","year":2024,"month":"FEBRUARY","nano":659000000,"monthValue":2,"dayOfMonth":6,"hour":20,"minute":56,"second":47,"chronology":{"id":"ISO","calendarType":"iso8601"}}}</span>


    <span class="token comment">//反序列化报错：com.fasterxml.jackson.databind.exc.InvalidDefinitionException:</span>
    <span class="token class-name">User2</span> u <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>jsonStr<span class="token punctuation">,</span> <span class="token class-name">User2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>解决此问题，需添加响应的数据绑定支持包：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.datatype<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-datatype-jsr310<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.11.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>义 ObjectMapper 时通过 findAndRegisterModules() 方法来注册依赖。</p> 
<pre><code class="prism language-java"><span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAndRegisterModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="43_2030"></a>4.3、注解</h4> 
<p>Jackson 根据它的默认方式序列化和反序列化 java 对象，若根据实际需要，灵活的调整它的默认方式，可以使用 Jackson 的注解。常用的注解及用法如下。</p> 
<h5><a id="1_2036"></a>1)、序列化注解</h5> 
<h6><a id="JsonAnyGetter_2038"></a>@JsonAnyGetter</h6> 
<p>@JsonAnyGetter注解 可以灵活地把类型为Map的属性作为标准属性序列化到JSON字符串中，有如下特点：</p> 
<ul><li>方法为非静态方法，并且方法不带任何参数,方法名没有特殊约定（随意定义方法名称）</li><li>方法返回值必须是Map类型</li><li>在一个实体类中只能用在一个方法上</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExtendableBean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonAnyGetter</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> properties<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">ExtendableBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonAnyGetterTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">ExtendableBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtendableBean</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bean<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"attr1"</span><span class="token punctuation">,</span> <span class="token string">"val1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bean<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"attr2"</span><span class="token punctuation">,</span> <span class="token string">"val2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"name":"bean","attr2":"val2","attr1":"val1"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonGetter_2087"></a>@JsonGetter</h6> 
<p>@JsonGetter注解 是@JsonProperty注解的替代方法，用于将方法标记为getter方法。</p> 
<p>下例中，<code>getTheName</code>方法被指定为<code>name</code>属性的<code>getter</code>方法：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@JsonGetter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTheName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonPropertyOrder_2105"></a>@JsonPropertyOrder</h6> 
<p>该注解可以指定实体属性序列化后的顺序。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@JsonPropertyOrder</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"id"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//序列化后结果：{ "name":"My bean", "id":1}</span>
<span class="token comment">//该注解有一个参数alphabetic, 如果为true, 表示按字母顺序序列化,此时输出结果:{ "id":1, "name":"My bean"}</span>
</code></pre> 
<h6><a id="JsonRawValue_2119"></a>@JsonRawValue</h6> 
<p>如果对象中某个字段的值是 JSON，在使用Jackson序列化时，输出的JSON会有问题，这时我们可以使用注解 @JsonRawValue将JSON值原样输出。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RawUser</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@JsonRawValue</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonRawValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> jsonString<span class="token operator">=</span><span class="token string">"{\"province\":\"广州\",\"city\":\"深圳\",\"area\":\"罗湖区\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">RawUser</span> rawUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RawUser</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span> jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>rawUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"name":"Tom","address":{"province":"广州","city":"深圳","area":"罗湖区"}}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonValue_2146"></a>@JsonValue</h6> 
<p>@JsonValue可以用在字段或者字段对应的get方法上，当加上@JsonValue注解时，序列化返回的不再是JSON字符串，而是字段对应的值。一个类中只能有一个@JsonValue注解。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserJsonValue</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@JsonValue</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span> 
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">JsonValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserJsonValue</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserJsonValue</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//John</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonRootName_2175"></a>@JsonRootName</h6> 
<p>正常情况下，我们定义一个User实体，并序列生成JSON字符串,输出结果如下：</p> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"John"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>但是，在某些情况下我们需要将JSON包装成如下形式：</p> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"user"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">"name"</span><span class="token operator">:</span><span class="token string">"John"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>针对以上问题，Jackson提供了很好的解决方案，即使用@JsonRootName注解。使用@JsonRootName注解指定要包装的root名称，并在ObjectMapper实例中启用包装。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@JsonRootName</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"user"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithRoot</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonRootName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithRoot</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithRoot</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//开启包装</span>
    mapper<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token class-name">SerializationFeature</span><span class="token punctuation">.</span><span class="token constant">WRAP_ROOT_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"user":{"id":1,"name":"John"}}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可选参数namespace，可用于XML等数据格式。如果添加它，就为xml前缀赋予了一个与某个命名空间相关联的限定名称。</p> 
<h6><a id="JsonSerialize_2221"></a>@JsonSerialize</h6> 
<p>@JsonSerialize表示在序列化时要使用自定义序列化器。</p> 
<p>我们定义一个需要序列化的实体Person,使用自定义序列化器:</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDateSerializer</span> <span class="token keyword">extends</span> <span class="token class-name">StdSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token keyword">private</span> <span class="token class-name">SimpleDateFormat</span> format <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">CustomDateSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">CustomDateSerializer</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> t<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">,</span> <span class="token class-name">JsonGenerator</span> jsonGenerator<span class="token punctuation">,</span> <span class="token class-name">SerializerProvider</span> serializerProvider<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        jsonGenerator<span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span>format<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@JsonSerialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">CustomDateSerializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthady<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonSerialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span><span class="token punctuation">,</span> <span class="token class-name">ParseException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">SimpleDateFormat</span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> toParse <span class="token operator">=</span> <span class="token string">"2020-05-19 02:30:00"</span><span class="token punctuation">;</span>
    <span class="token class-name">Date</span> date <span class="token operator">=</span> df<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>toParse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"name":"Tom","birthady":"2020-05-19 02:30:00"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2_2269"></a>2)、反序列化注解</h5> 
<h6><a id="JsonCreator_2272"></a>@JsonCreator</h6> 
<p>JSON反序列化为java对象时，@JsonCreator注解用于定义构造函数。反序列化时，默认选择类的无参构造函数创建对象，当没有无参构造函数时会报错，@JsonCreator作用就是指定反序列化时用的无参构造函数。构造方法的参数前面需要加上@JsonProperty,否则会报错。</p> 
<p>当我们需要反序列化某些与我们需要获取的目标实体不完全匹配的JSON时，此注解非常有用。</p> 
<p>我们需要反序列化以下JSON：</p> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"theName"</span><span class="token operator">:</span><span class="token string">"Jack"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>但是，目标实体中没有theName字段,只有一个name字段。而我们不想更改实体本身,Jackson针对此问题提供了很好的解决方案。我们只要使用@JsonCreator注解 构造函数并同时使用@JsonProperty注解 构造函数参数：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithCreator</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserWithCreator</span><span class="token punctuation">(</span><span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"theName"</span><span class="token punctuation">)</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonCreator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"id\":1,\"theName\":\"Jack\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserWithCreator</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">readerFor</span><span class="token punctuation">(</span><span class="token class-name">UserWithCreator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//UserWithCreator(id=1, name=Jack)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JacksonInject_2313"></a>@JacksonInject</h6> 
<p>在反序列化时，如果JSON中的字段少于目标java对象中的字段，被序列化后的对象将缺少字段设置为字段的默认值，而在某些需求中，我们希望自定义默认值，这时候我们就可以用到这个注解了，它的功能就是在反序列化的时候将没有的字段设置为我们期望的默认值。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWIthInject</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JacksonInject</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@JacksonInject</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonInject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"name\":\"Jack\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">InjectableValues<span class="token punctuation">.</span>Std</span> injectableValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InjectableValues<span class="token punctuation">.</span>Std</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    injectableValues<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token string">"北京"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    injectableValues<span class="token punctuation">.</span><span class="token function">addValue</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserWIthInject</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">reader</span><span class="token punctuation">(</span>injectableValues<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forType</span><span class="token punctuation">(</span><span class="token class-name">UserWIthInject</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//UserWIthInject(id=1, name=Jack, address=北京)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonAnySetter_2343"></a>@JsonAnySetter</h6> 
<p>一般情况下对象属性名都是确定的, 但有时候我们还需要给对象设定一些扩展属性, 这些扩展属性名称暂时不好确定, 通常使用 Map来存放这些扩展属性,针对此问题Jackson也提供了很好的解决方案。</p> 
<p>要把JSON数据中的扩展属性反序列化到类的Map中, 需要在类中增加一个K/V的setter方法, 而且这个setter方法要加上@JsonAnySetter注解。</p> 
<p>@JsonAnySette注意事项：</p> 
<ul><li>此注解用在非静态方法上，注解的方法必须有两个参数，第一个是json字段中的key，第二个是value，方法名随意。</li><li>此注解也可以用在Map对象属性上面，建议用在Map对象属性上面。</li><li>反序列化的时候将对应不上的字段全部放到Map里面。</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExtendableUser</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ExtendableUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">ExtendableUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@JsonAnySetter</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        properties<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonAnySetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"name\":\"Jack\",\"province\":\"四川\",\"city\":\"成都\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ExtendableUser</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">readerFor</span><span class="token punctuation">(</span><span class="token class-name">ExtendableUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//ExtendableUser(name=Jack, properties={province=四川, city=成都})</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonSetter_2388"></a>@JsonSetter</h6> 
<p>@JsonSetter 标注于 setter 方法上，类似 @JsonProperty ，也可以解决 json 键名称和 java 对象 字段名称不匹配的问题。</p> 
<p>例如，下例中将方法<code>setTheName</code>指定为<code>name</code>属性的<code>setter</code>方法：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithGetter</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@JsonSetter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTheName</span><span class="token punctuation">(</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//省略构造函数和其他方法</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonDeserialize_2409"></a>@JsonDeserialize</h6> 
<p>@JsonDeserialize注解指定使用自定义反序列化器。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomDateDeserializer</span> <span class="token keyword">extends</span> <span class="token class-name">StdDeserializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">SimpleDateFormat</span> formatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">CustomDateDeserializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token class-name">CustomDateDeserializer</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> vc<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>vc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token class-name">JsonParser</span> jsonParser<span class="token punctuation">,</span> <span class="token class-name">DeserializationContext</span> deserializationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> date <span class="token operator">=</span> jsonParser<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> formatter<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@JsonDeserialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">CustomDateDeserializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
 <span class="token comment">//省略 constructor  getters setters</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonDeserialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"name\":\"Jack\",\"birthday\":\"2020-05-20 02:30:00\"}"</span><span class="token punctuation">;</span>

    <span class="token class-name">SimpleDateFormat</span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span>mapper<span class="token punctuation">.</span><span class="token function">readerFor</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Person{name='Jack', birthday=Wed May 20 02:30:00 CST 2020}</span>
	<span class="token comment">//2020-05-20 02:30:00</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonAlias_2460"></a>@JsonAlias</h6> 
<p>@JsonAlias注解定义在反序列化过程中给属性设置一个或者多个别名。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliasUser</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JsonAlias</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"fName"</span><span class="token punctuation">,</span> <span class="token string">"f_name"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>给AliasUser类的字段firstName，定义了两个别名fName和f_name。在反序列化的过程中，如果JSON字段中存在fName或者f_name，都会将值映射到AliasUser类的firstName字段中。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonAlias</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">"{\"fName\": \"John\", \"lastName\": \"Green\"}"</span><span class="token punctuation">;</span>
    <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">AliasUser</span> aliasUser <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">readerFor</span><span class="token punctuation">(</span><span class="token class-name">AliasUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aliasUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//AliasUser(firstName=John, lastName=Green)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3_2486"></a>3)、属性注解</h5> 
<h6><a id="JsonIgnoreProperties_2488"></a>@JsonIgnoreProperties</h6> 
<p>@JsonIgnoreProperties是一个类级别的注解 ，作用是将java对象序列化为JSON时，忽略的一个或多个属性。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@JsonIgnoreProperties</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"id"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithIgnore</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonIgnoreProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithIgnore</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithIgnore</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"name":"Jack"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonIgnore_2513"></a>@JsonIgnore</h6> 
<p>@JsonIgnore是一个字段级别的注解 ，作用是在java对象序列化为JSON时，忽略此字段。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithIgnore</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JsonIgnore</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token comment">//省略 constructor  getters setters</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonIgnore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithIgnore</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithIgnore</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"name":"Jack"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonIgnoreType_2535"></a>@JsonIgnoreType</h6> 
<p>@JsonIgnoreType注解 要忽略注解 类型的所有属性。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithIgnoreType</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Name</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserWithIgnoreType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserWithIgnoreType</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">Name</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@JsonIgnoreType</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Name</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> firstName<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonIgnoreType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithIgnoreType<span class="token punctuation">.</span>Name</span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithIgnoreType<span class="token punctuation">.</span>Name</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token string">"Doe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserWithIgnoreType</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithIgnoreType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{"id":1}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonInclude_2582"></a>@JsonInclude</h6> 
<p>我们可以使用@JsonInclude排除具有empty/null/默认值的属性。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@JsonInclude</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude<span class="token punctuation">.</span>Include</span><span class="token punctuation">.</span><span class="token constant">NON_NULL</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IncludeUser</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonInclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">IncludeUser</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IncludeUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{"id":1}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonAutoDetect_2607"></a>@JsonAutoDetect</h6> 
<p>我们定义的类中的所有属性由private修饰，不提供对应的get,set方法，如果按照默认的属性发现规则我们将无法序列化和反序列化类的字段(如果没有get,set方法，只有被public修饰的属性才会被发现)。这时，我们可以通过修改@JsonAutoDetect的fieldVisibility来调整自动发现级别，为了使字段被自动发现，我们需要将级别调整为ANY。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@JsonAutoDetect</span><span class="token punctuation">(</span>fieldVisibility <span class="token operator">=</span> <span class="token class-name">Visibility</span><span class="token punctuation">.</span><span class="token constant">ANY</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrivateUser</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PrivateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PrivateUser</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonAutoDetect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">PrivateUser</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrivateUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//{"id":1,"name":"Jack"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="4_2634"></a>4)、常用注解</h5> 
<h6><a id="JsonProperty_2636"></a>@JsonProperty</h6> 
<p>@JsonProperty 注解用于属性上，作用是把该属性的名称序列化为另外一个名称，例如将theName属性序列化为name，使用@JsonProperty(“name”)注解 。</p> 
<p>@JsonProperty不仅仅是在序列化的时候有用，反序列化的时候也有用，比如有些接口返回的是json字符串，命名又不是标准的驼峰形式，在映射成对象的时候，在类的属性上加上@JsonProperty注解，里面写上返回的json串对应的名字即可。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithGetter</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTheName</span><span class="token punctuation">(</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@JsonProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTheName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//.....</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithGetter</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithGetter</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UserWithGetter</span> resultUser<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readerFor</span><span class="token punctuation">(</span><span class="token class-name">UserWithGetter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"age":25,"name":"Jack"}</span>
	<span class="token comment">//UserWithGetter{name='Jack', age=25}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonFormat_2676"></a>@JsonFormat</h6> 
<p>@JsonFormat注解指定序列化日期和时间的格式</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonWithFormat</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>shape <span class="token operator">=</span> <span class="token class-name">JsonFormat<span class="token punctuation">.</span>Shape</span><span class="token punctuation">.</span><span class="token constant">BINARY</span><span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
    <span class="token comment">//.....</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span><span class="token punctuation">,</span> <span class="token class-name">ParseException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">SimpleDateFormat</span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"dd-MM-yyyy hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    df<span class="token punctuation">.</span><span class="token function">setTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token string">"UTC"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> toParse <span class="token operator">=</span> <span class="token string">"20-05-2020 02:30:00"</span><span class="token punctuation">;</span>
    <span class="token class-name">Date</span> date <span class="token operator">=</span> df<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>toParse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PersonWithFormat</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonWithFormat</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code>{
    "name":"Jack",
    "birthday":"2020-05-20 02:30:00"
}
</code></pre> 
<h6><a id="JsonUnwrapped_2711"></a>@JsonUnwrapped</h6> 
<p>@JsonUnwrapped定义了在序列化/反序列化时,将嵌套的对象属性，序列化到JSON的同一级。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnwrappedUser</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonUnwrapped</span>
    <span class="token keyword">public</span> <span class="token class-name">Name</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Name</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Name</span><span class="token punctuation">(</span> <span class="token class-name">String</span> firstName<span class="token punctuation">,</span>  <span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonUnwrapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UnwrappedUser<span class="token punctuation">.</span>Name</span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnwrappedUser<span class="token punctuation">.</span>Name</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">,</span> <span class="token string">"Doe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UnwrappedUser</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnwrappedUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":1,"firstName":"John","lastName":"Doe"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonView_2748"></a>@JsonView</h6> 
<p>@JsonView注解作用是将java对象序列化为JSON时，过滤敏感字段或者不需要字段，使用步骤如下：</p> 
<p>声明视图：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Views</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UserDetailInfo</span> <span class="token keyword">extends</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>定义实体：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@JsonView</span><span class="token punctuation">(</span><span class="token class-name">Views<span class="token punctuation">.</span>UserInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonView</span><span class="token punctuation">(</span><span class="token class-name">Views<span class="token punctuation">.</span>UserDetailInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonView</span><span class="token punctuation">(</span><span class="token class-name">Views<span class="token punctuation">.</span>UserInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>测试：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jsonView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserInfo</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writerWithView</span><span class="token punctuation">(</span><span class="token class-name">Views<span class="token punctuation">.</span>UserInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"username":"Tom","age":27}</span>

    result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writerWithView</span><span class="token punctuation">(</span><span class="token class-name">Views<span class="token punctuation">.</span>UserDetailInfo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"username":"Tom","password":"123456","age":27}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonManagedReferenceJsonBackReference_2802"></a>@JsonManagedReference、@JsonBackReference</h6> 
<p>这两个注解通常配对使用, 可以解决两个不同类的属性的父子关系和循环引用。</p> 
<p>@JsonBackReference标注的属性在序列化时，会被忽略。而@JsonManagedReference标注的属性则会被序列化。在序列化时，@JsonBackReference的作用相当于@JsonIgnore，此时可以没有@JsonManagedReference。但在反序列化时，如果没有@JsonManagedReference，则不会自动注入@JsonBackReference标注的属性（被忽略的父或子）；如果有@JsonManagedReference，则会自动注入自动注入@JsonBackReference标注的属性。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItemWithRef</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> itemName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonManagedReference</span>
    <span class="token keyword">public</span> <span class="token class-name">UserWithRef</span> owner<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ItemWithRef</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> itemName<span class="token punctuation">,</span> <span class="token class-name">UserWithRef</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>itemName <span class="token operator">=</span> itemName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>owner <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithRef</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@JsonBackReference</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ItemWithRef</span><span class="token punctuation">&gt;</span></span> userItems<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserWithRef</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userItems <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addItem</span><span class="token punctuation">(</span><span class="token class-name">ItemWithRef</span> item<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userItems<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jacksonReferenceAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithRef</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithRef</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ItemWithRef</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ItemWithRef</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"book"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"id":2,"itemName":"book","owner":{"id":1,"name":"John"}}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="JsonIdentityInfo_2858"></a>@JsonIdentityInfo</h6> 
<p>@JsonIdentityInfo注解，作用于类或属性上，被用来在序列化/反序列化时为该对象或字段添加一个对象识别码，通常是用来解决循环嵌套的问题。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@JsonIdentityInfo</span><span class="token punctuation">(</span>generator <span class="token operator">=</span> <span class="token class-name">ObjectIdGenerators<span class="token punctuation">.</span>PropertyGenerator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItemWithIdentity</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> itemName<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">UserWithIdentity</span> owner<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@JsonIdentityInfo</span><span class="token punctuation">(</span>generator <span class="token operator">=</span> <span class="token class-name">ObjectIdGenerators<span class="token punctuation">.</span>PropertyGenerator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserWithIdentity</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ItemWithIdentity</span><span class="token punctuation">&gt;</span></span> userItems<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">jsonIdentityInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserWithIdentity</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserWithIdentity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ItemWithIdentity</span> item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ItemWithIdentity</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"book"</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code>{"id":2,"itemName":"book","owner":{"id":1,"name":"John","userItems":[2]}}
</code></pre> 
<h6><a id="JsonFilter_2894"></a>@JsonFilter</h6> 
<p>@JsonFilter注解的作用是在序列化的过程中过滤掉指定的属性，类似于@JsonIgnore注解。但是当有一堆字段需要配置，而且整个项目都需要统一处理的时候，@JsonFilter比较适合。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@JsonFilter</span><span class="token punctuation">(</span><span class="token string">"myFilter"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanWithFilter</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">whenSerializingUsingJsonFilter_thenCorrect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">BeanWithFilter</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanWithFilter</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"My bean"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token class-name">FilterProvider</span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFilterProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"myFilter"</span><span class="token punctuation">,</span>    
     						<span class="token class-name">SimpleBeanPropertyFilter</span><span class="token punctuation">.</span><span class="token function">filterOutAllExcept</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writer</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//{"name":"My bean"}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="5_2914"></a>5)、其它注解</h5> 
<h6><a id="JacksonAnnotationsInside_2916"></a>@JacksonAnnotationsInside</h6> 
<p>自定义Jackson注解.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@JacksonAnnotationsInside</span>
<span class="token annotation punctuation">@JsonInclude</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span><span class="token constant">NON_NULL</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@JsonPropertyOrder</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">,</span><span class="token string">"id"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">CustomAnnotation</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@CustomAnnotation</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserCustomAnnotation</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
 <span class="token comment">//省略 constructor  getters setters</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span> <span class="token comment">//测试自定义注解 </span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customAnnotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserCustomAnnotation</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserCustomAnnotation</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Jack"</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code>//添加注解 前
{"id":1,"name":"Jack","age":28}
//添加注解 后
{"name":"Jack","age":28,"id":1}
</code></pre> 
<h4><a id="44_2955"></a>4.4、配置属性</h4> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">jackson</span><span class="token punctuation">:</span>
    <span class="token comment"># 设置属性命名策略,对应jackson下PropertyNamingStrategy中的常量值，SNAKE_CASE-返回的json驼峰式转下划线，json body下划线传到后端自动转驼峰式</span>
    <span class="token key atrule">property-naming-strategy</span><span class="token punctuation">:</span> SNAKE_CASE
    <span class="token comment"># 全局设置@JsonFormat的格式pattern</span>
    <span class="token key atrule">date-format</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss
    <span class="token comment"># 当地时区</span>
    <span class="token key atrule">locale</span><span class="token punctuation">:</span> zh_CN
    <span class="token comment"># 设置全局时区</span>
    <span class="token key atrule">time-zone</span><span class="token punctuation">:</span> GMT+8
    <span class="token comment"># 常用，全局设置pojo或被@JsonInclude注解的属性的序列化方式</span>
    <span class="token key atrule">default-property-inclusion</span><span class="token punctuation">:</span> NON_NULL <span class="token comment">#不为空的属性才会序列化,具体属性可看JsonInclude.Include</span>
    <span class="token comment"># 常规默认,枚举类SerializationFeature中的枚举属性为key，值为boolean设置jackson序列化特性,具体key请看SerializationFeature源码</span>
    <span class="token key atrule">visibility</span><span class="token punctuation">:</span>
      <span class="token comment">#属性序列化的可见范围</span>
      <span class="token key atrule">getter</span><span class="token punctuation">:</span> non_private
      <span class="token comment">#属性反序列化的可见范围</span>
      <span class="token key atrule">setter</span><span class="token punctuation">:</span> protected_and_public
      <span class="token comment">#静态工厂方法的反序列化</span>
      <span class="token key atrule">CREATOR</span><span class="token punctuation">:</span> public_only
      <span class="token comment">#字段</span>
      <span class="token key atrule">FIELD</span><span class="token punctuation">:</span> public_only
      <span class="token comment">#布尔的序列化</span>
      <span class="token key atrule">IS_GETTER</span><span class="token punctuation">:</span> public_only
      <span class="token comment">#所有类型(即getter setter FIELD）不受影响,无意义</span>
      <span class="token key atrule">NONE</span><span class="token punctuation">:</span> public_only
      <span class="token comment">#所有类型(即getter setter FIELD）都受其影响（慎用）</span>
      <span class="token key atrule">ALL</span><span class="token punctuation">:</span> public_only
    <span class="token key atrule">serialization</span><span class="token punctuation">:</span>
      <span class="token comment">#反序列化是否有根节点</span>
      <span class="token key atrule">WRAP_ROOT_VALUE</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token comment">#是否使用缩进，格式化输出</span>
      <span class="token key atrule">INDENT_OUTPUT</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">FAIL_ON_EMPTY_BEANS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 对象不含任何字段时是否报错，默认true</span>
      <span class="token key atrule">FAIL_ON_SELF_REFERENCES</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#循环引用报错</span>
      <span class="token key atrule">WRAP_EXCEPTIONS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否包装异常</span>
      <span class="token key atrule">FAIL_ON_UNWRAPPED_TYPE_IDENTIFIERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#JsonUnwrapped标记的类有类型信息是否报错</span>
      <span class="token key atrule">WRITE_SELF_REFERENCES_AS_NULL</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#循环引用返回null</span>
      <span class="token key atrule">CLOSE_CLOSEABLE</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#若对象实现了CLOSEABLE接口，在序列化后是否调用Close方法</span>
      <span class="token key atrule">FLUSH_AFTER_WRITE_VALUE</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#流对象序列化之后是否强制刷新</span>
      <span class="token key atrule">WRITE_DATES_AS_TIMESTAMPS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 返回的java.util.date转换成时间戳</span>
      <span class="token key atrule">WRITE_DATES_WITH_ZONE_ID</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#2011-12-03T10:15:30+01:00[Europe/Paris]带时区id</span>
      <span class="token key atrule">WRITE_DURATIONS_AS_TIMESTAMPS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#将DURATIONS转换成时间戳</span>
      <span class="token key atrule">WRITE_CHAR_ARRAYS_AS_JSON_ARRAYS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否字符数组输出json数组 (false则输出字符串)</span>
      <span class="token key atrule">WRITE_ENUMS_USING_TO_STRING</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 将枚举输出toString</span>
      <span class="token key atrule">WRITE_ENUMS_USING_INDEX</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#枚举下标</span>
      <span class="token key atrule">WRITE_ENUM_KEYS_USING_INDEX</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#枚举key类似</span>
      <span class="token key atrule">WRITE_NULL_MAP_VALUES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否输出map中的空entry(此特性已过期，请使用JsonInclude注解)</span>
      <span class="token key atrule">WRITE_EMPTY_JSON_ARRAYS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 对象属性值是空集合是否输出空json数组</span>
      <span class="token key atrule">WRITE_SINGLE_ELEM_ARRAYS_UNWRAPPED</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否将单个元素的集合展开，（即：去除数组符号"[]"）</span>
      <span class="token key atrule">WRITE_BIGDECIMAL_AS_PLAIN</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否调用BigDecimal#toPlainString()输出</span>
      <span class="token key atrule">WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS</span><span class="token punctuation">:</span> <span class="token comment">#将timestamp输出为纳秒</span>
      <span class="token key atrule">ORDER_MAP_ENTRIES_BY_KEYS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#map序列化后，是否用key对其排序</span>
      <span class="token key atrule">EAGER_SERIALIZER_FETCH</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否马上获取序列化器</span>
      <span class="token key atrule">USE_EQUALITY_FOR_OBJECT_ID</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否使用objectId比较是否相等（在ORM框架Hibernate中有应用）</span>
 
    <span class="token comment"># 枚举类DeserializationFeature中的枚举属性为key，值为boolean设置jackson反序列化特性,具体key请看DeserializationFeature源码</span>
    <span class="token key atrule">deserialization</span><span class="token punctuation">:</span>
      <span class="token key atrule">USE_BIG_DECIMAL_FOR_FLOATS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#将浮点数反序列化为BIG_DECIMAL</span>
      <span class="token key atrule">USE_BIG_INTEGER_FOR_INTS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#将整数反序列化为BIG_INTEGER</span>
      <span class="token key atrule">USE_LONG_FOR_INTS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#将整型反序列化为长整</span>
      <span class="token key atrule">USE_JAVA_ARRAY_FOR_JSON_ARRAY</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#无明确类型时，是否将json数组反序列化为java数组（若是true，就对应Object[] ,反之就是List&lt;?&gt;）</span>
      <span class="token key atrule">FAIL_ON_UNKNOWN_PROPERTIES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 常用,json中含pojo不存在属性时是否失败报错,默认true</span>
      <span class="token key atrule">FAIL_ON_NULL_FOR_PRIMITIVES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#将null反序列化为基本数据类型是否报错</span>
      <span class="token key atrule">FAIL_ON_NUMBERS_FOR_ENUMS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#用整数反序列化为枚举是否报错</span>
      <span class="token key atrule">FAIL_ON_INVALID_SUBTYPE</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#找不至合适的子类否报错 （如注解JsonTypeInfo指定的子类型）</span>
      <span class="token key atrule">FAIL_ON_READING_DUP_TREE_KEY</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#出现重复的json字段是否报错</span>
      <span class="token key atrule">FAIL_ON_IGNORED_PROPERTIES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#如果json中出现了java实体字段中已显式标记应当忽略的字段，是否报错</span>
      <span class="token key atrule">FAIL_ON_UNRESOLVED_OBJECT_IDS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#如果反序列化发生了不可解析的ObjectId是否报错</span>
      <span class="token key atrule">FAIL_ON_MISSING_CREATOR_PROPERTIES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#如果缺少静态工厂方法的参数是否报错（false,则使用null代替需要的参数）</span>
      <span class="token key atrule">FAIL_ON_NULL_CREATOR_PROPERTIES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#将空值绑定到构造方法或静态工厂方法的参数是否报错</span>
      <span class="token key atrule">FAIL_ON_MISSING_EXTERNAL_TYPE_ID_PROPERTY</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#注解JsonTypeInfo.As#EXTERNAL_PROPERTY标记的属性缺失，是否报错</span>
      <span class="token key atrule">FAIL_ON_TRAILING_TOKENS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#出现尾随令牌是否报错（如果是true,则调用JsonParser#nextToken，检查json的完整性）</span>
      <span class="token key atrule">WRAP_EXCEPTIONS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否包装反序列化出现的异常</span>
      <span class="token key atrule">ACCEPT_SINGLE_VALUE_AS_ARRAY</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#反序列化时是否将一个对象封装成单元素数组</span>
      <span class="token key atrule">UNWRAP_SINGLE_VALUE_ARRAYS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#反序列化时是否将单元素数组展开为一个对象</span>
      <span class="token key atrule">UNWRAP_ROOT_VALUE</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否将取消根节点的包装</span>
      <span class="token key atrule">ACCEPT_EMPTY_STRING_AS_NULL_OBJECT</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否将空字符("")串当作null对象</span>
      <span class="token key atrule">ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否接受将空数组("[]")作为null</span>
      <span class="token key atrule">ACCEPT_FLOAT_AS_INT</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否接受将浮点数作为整数</span>
      <span class="token key atrule">READ_ENUMS_USING_TO_STRING</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#按照枚举toString()方法读取，（false则按枚举的name()方法读取）</span>
      <span class="token key atrule">READ_UNKNOWN_ENUM_VALUES_AS_NULL</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#读取到未知的枚举当作null</span>
      <span class="token key atrule">READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#读取到未知的枚举,将其当作被JsonEnumDefaultValue注解标记的枚举</span>
      <span class="token key atrule">READ_DATE_TIMESTAMPS_AS_NANOSECONDS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#将时间戳视为纳秒(false,则视为毫秒)</span>
      <span class="token key atrule">ADJUST_DATES_TO_CONTEXT_TIME_ZONE</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#反序列化是否会适应DeserializationContext#getTimeZone()提供的时区 （此特性仅对java8的时间/日期有效）</span>
      <span class="token key atrule">EAGER_DESERIALIZER_FETCH</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#是否马上获取反序列化器</span>
    <span class="token comment"># 枚举类MapperFeature中的枚举属性为key，值为boolean设置jackson ObjectMapper特性</span>
    <span class="token comment"># ObjectMapper在jackson中负责json的读写、json与pojo的互转、json tree的互转,具体特性请看MapperFeature,常规默认即可</span>
    <span class="token key atrule">mapper</span><span class="token punctuation">:</span>
      <span class="token key atrule">USE_ANNOTATIONS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否使用注解自省（检查JsonProperties这些）</span>
      <span class="token comment"># 使用getter取代setter探测属性，这是针对集合类型，可以直接修改集合的属性</span>
      <span class="token key atrule">USE_GETTERS_AS_SETTERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#默认false</span>
      <span class="token key atrule">PROPAGATE_TRANSIENT_MARKER</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#如何处理transient字段，如果true(不能访问此属性) ，若是false则不能通过字段访问（还是可以使用getter和setter访问）</span>
      <span class="token key atrule">AUTO_DETECT_CREATORS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否自动检测构造方法或单参且名为valueOf的静态工厂方法</span>
      <span class="token key atrule">AUTO_DETECT_FIELDS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否自动检测字段 （若true,则将所有public实例字段视为为属性）</span>
      <span class="token key atrule">AUTO_DETECT_GETTERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#确定是否根据标准 Bean 命名约定自动检测常规“getter”方法的（不包括is getter）</span>
      <span class="token key atrule">AUTO_DETECT_IS_GETTERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#确定是否根据标准 Bean 命名约定自动检测“is getter”方法</span>
      <span class="token key atrule">AUTO_DETECT_SETTERS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 确定是否根据标准 Bean 命名约定自动检测“setter”方法</span>
      <span class="token key atrule">REQUIRE_SETTERS_FOR_GETTERS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#getter方法必需要有对应的setter或字段或构造方法参数，才能视为一个属性</span>
      <span class="token key atrule">ALLOW_FINAL_FIELDS_AS_MUTATORS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否可以修改final成员字段</span>
      <span class="token key atrule">INFER_PROPERTY_MUTATORS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否能推断属性，(即使用字段和setter是不可见的，但getter可见即可推断属性)</span>
      <span class="token key atrule">INFER_CREATOR_FROM_CONSTRUCTOR_PROPERTIES</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否自动推断ConstructorProperties注解</span>
      <span class="token key atrule">CAN_OVERRIDE_ACCESS_MODIFIERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#调用AccessibleObject#setAccessible设为true .将原来不可见的属性，变为可见</span>
      <span class="token key atrule">OVERRIDE_PUBLIC_ACCESS_MODIFIERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#对所有的属性调用AccessibleObject#setAccessible设为true .（即使用是公共的）</span>
      <span class="token key atrule">USE_STATIC_TYPING</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#序列化使用声明的静态类型还是动态类型  JsonSerialize#typing注解可覆盖它</span>
      <span class="token key atrule">USE_BASE_TYPE_AS_DEFAULT_IMPL</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 反序列化是否使用基本类作为默实现 @JsonTypeInfo.defaultImpl</span>
      <span class="token key atrule">DEFAULT_VIEW_INCLUSION</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#没有JsonView注解标记的属性是否会被包含在json序列化视图中</span>
      <span class="token key atrule">SORT_PROPERTIES_ALPHABETICALLY</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#按字母表顺序序列化字段（若false，按字段声明的顺序）</span>
      <span class="token key atrule">ACCEPT_CASE_INSENSITIVE_PROPERTIES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#反序列化属性时不区分大小写 （true时，会影响性能）</span>
      <span class="token key atrule">ACCEPT_CASE_INSENSITIVE_ENUMS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#枚举反序列化不区别大小写</span>
      <span class="token key atrule">ACCEPT_CASE_INSENSITIVE_VALUES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#允许解析一些枚举的基于文本的值类型但忽略反序列化值的大小写 如日期/时间类型反序列化器</span>
      <span class="token key atrule">USE_WRAPPER_NAME_AS_PROPERTY_NAME</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 使用包装器名称覆盖属性名称 AnnotationIntrospector#findWrapperName指定的</span>
      <span class="token key atrule">USE_STD_BEAN_NAMING</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 是否以强制与 Bean 名称自省严格兼容的功能，若开启后（getURL()）变成URL （jackson默认false, url）</span>
      <span class="token key atrule">ALLOW_EXPLICIT_PROPERTY_RENAMING</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许JsonProperty注解覆盖PropertyNamingStrategy</span>
      <span class="token key atrule">ALLOW_COERCION_OF_SCALARS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 是否允许强制使用文本标题 ，即将字符串的"true"当作布尔的true ,字符串的"1.0"当作"double"</span>
      <span class="token key atrule">IGNORE_DUPLICATE_MODULE_REGISTRATIONS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#如果模块相同（Module#getTypeId()返回值相同），只有第一次能会真正调用注册方法</span>
      <span class="token key atrule">IGNORE_MERGE_FOR_UNMERGEABLE</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#在合并不能合并的属性时是否忽略错误</span>
      <span class="token key atrule">BLOCK_UNSAFE_POLYMORPHIC_BASE_TYPES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#阻止不安全的基类（如Object Closeable Cloneable AutoCloseable Serializable）</span>
    <span class="token key atrule">parser</span><span class="token punctuation">:</span>
      <span class="token key atrule">AUTO_CLOSE_SOURCE</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否自动关闭不属于解析器的底层输入流</span>
      <span class="token key atrule">ALLOW_COMMENTS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许json注解（Json规范是不能加注释的，但这里可以配置）</span>
      <span class="token key atrule">ALLOW_YAML_COMMENTS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许出现yaml注释</span>
      <span class="token key atrule">ALLOW_UNQUOTED_FIELD_NAMES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许出现字段名不带引号</span>
      <span class="token key atrule">ALLOW_SINGLE_QUOTES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 是否允许出现单引号,默认false</span>
      <span class="token key atrule">ALLOW_UNQUOTED_CONTROL_CHARS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许出现未加转义的控制字符</span>
      <span class="token key atrule">ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许对所有字符都可加反斜杠转义</span>
      <span class="token key atrule">ALLOW_NUMERIC_LEADING_ZEROS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许前导的零 000001</span>
      <span class="token key atrule">ALLOW_LEADING_DECIMAL_POINT_FOR_NUMBERS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许前导的小点数 如 ".04314"会被解析成"0.04314"</span>
      <span class="token key atrule">ALLOW_NON_NUMERIC_NUMBERS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否允许NaN型的浮点数 （"INF"当作正无穷  "-INF"当作负无穷 "NaN"非数字，类型于除数为0）</span>
      <span class="token key atrule">ALLOW_MISSING_VALUES</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 是否允许json数组中出现缺失值 （如["value1",,"value3",]将被反序列化为["value1", null, "value3", null]）</span>
      <span class="token key atrule">ALLOW_TRAILING_COMMA</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 是否允许json尾部有逗号 （如{"a": true,}）</span>
      <span class="token key atrule">STRICT_DUPLICATE_DETECTION</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否启用严格的字段名重复检查（开启后会增加20-30%左右的性能开销）</span>
      <span class="token key atrule">IGNORE_UNDEFINED</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#属性定义未找到是否报错（这不是针对json,是针对Avro, protobuf等需要Schema的格式）</span>
      <span class="token key atrule">INCLUDE_SOURCE_IN_LOCATION</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否包含其源信息（如总字节数，总字符数 行号 列号 ）</span>
    <span class="token key atrule">generator</span><span class="token punctuation">:</span>
      <span class="token key atrule">AUTO_CLOSE_TARGET</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否自动关闭不属于生成器的底层输出流</span>
      <span class="token key atrule">AUTO_CLOSE_JSON_CONTENT</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否自动补全json(当有不匹配的JsonToken#START_ARRAY JsonToken#START_OBJECT时)</span>
      <span class="token key atrule">FLUSH_PASSED_TO_STREAM</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否刷新generator</span>
      <span class="token key atrule">QUOTE_FIELD_NAMES</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#是否为字段名添加引号</span>
      <span class="token key atrule">QUOTE_NON_NUMERIC_NUMBERS</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#对于NaN浮点数是否加引号</span>
      <span class="token key atrule">ESCAPE_NON_ASCII</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#非ASCII码是否需要转义</span>
      <span class="token key atrule">WRITE_NUMBERS_AS_STRINGS</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#将数字当作字符串输出 （防止Javascript长度限制被截断）</span>
      <span class="token key atrule">WRITE_BIGDECIMAL_AS_PLAIN</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#按BigDecimal的toPlainString()输出</span>
      <span class="token key atrule">STRICT_DUPLICATE_DETECTION</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#是否启用严格的字段名重复检查</span>
      <span class="token key atrule">IGNORE_UNKNOWN</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">#属性定义未找到是否报错（这不是针对json,是针对Avro, protobuf等需要Schema的格式）</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/768313c79bf7b76756a4e97bf70d015d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">物流|基于Springboot的物流管理系统设计与实现(源码&#43;数据库&#43;文档)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9cfcd540ade1eb71768894f87d653db0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">深入理解Spark BlockManager：定义、原理与实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>