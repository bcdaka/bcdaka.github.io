<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>11.Spring AOP - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/fadacd7c9d0e70559445ba71bd3368bb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="11.Spring AOP">
  <meta property="og:description" content="文章目录 1.什么是 Spring AOP？2.为什要用 AOP？3.Spring AOP 应该怎么学习呢？3.1 AOP 组成3.1.1 切⾯（Aspect）= 切点 &#43; 通知3.1.2 连接点（Join Point）3.1.3 切点（Pointcut）3.1.4 通知（Advice） 3.2 Spring AOP 实现3.2.1五大通知类型3.2.2 @Order注解解析3.2.3切点表达式3.2.4@annotation 3.3 Spring AOP 实现原理 - 代理模式(静态代理，动态代理)3.3.1静态代理 代码实现3.3.1动态代理 代码实现3.3.1.1jdk 动态代理实现3.3.1.2CGLIB 动态代理实现 3.3.2面试题 大家好，我是晓星航。今天为大家带来的是 Spring AOP 相关的讲解！😀
1.什么是 Spring AOP？ Spring两大核心思想：Ioc Aop
在介绍 Spring AOP 之前，⾸先要了解⼀下什么是 AOP？
AOP（Aspect Oriented Programming）：⾯向切⾯编程，它是⼀种思想，它是对某⼀类事情的集中处理。⽐如⽤户登录权限的效验，没学 AOP 之前，我们所有需要判断⽤户登录的⻚⾯（中的⽅法），都要各⾃实现或调⽤⽤户验证的⽅法，然⽽有了 AOP 之后，我们只需要在某⼀处配 置⼀下，所有需要判断⽤户登录⻚⾯（中的⽅法）就全部可以实现⽤户登录验证了，不再需要每个⽅法中都写相同的⽤户登录验证了。 ⽽ AOP 是⼀种思想，
⽽ Spring AOP 是⼀个框架，提供了⼀种对 AOP 思想的实现，它们的关系和 IoC 与 DI 类似。
2.为什要用 AOP？ 想象⼀个场景，我们在做后台系统时，除了登录和注册等⼏个功能不需要做⽤户登录验证之外，其他⼏ 乎所有⻚⾯调⽤的前端控制器（ Controller）都需要先验证⽤户登录的状态，那这个时候我们要怎么处理呢？">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-09T12:05:59+08:00">
    <meta property="article:modified_time" content="2024-06-09T12:05:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">11.Spring AOP</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_Spring_AOP_4" rel="nofollow">1.什么是 Spring AOP？</a></li><li><a href="#2_AOP_16" rel="nofollow">2.为什要用 AOP？</a></li><li><a href="#3Spring_AOP__32" rel="nofollow">3.Spring AOP 应该怎么学习呢？</a></li><li><ul><li><a href="#31_AOP__36" rel="nofollow">3.1 AOP 组成</a></li><li><ul><li><a href="#311_Aspect____38" rel="nofollow">3.1.1 切⾯（Aspect）= 切点 + 通知</a></li><li><a href="#312_Join_Point_44" rel="nofollow">3.1.2 连接点（Join Point）</a></li><li><a href="#313_Pointcut_50" rel="nofollow">3.1.3 切点（Pointcut）</a></li><li><a href="#314_Advice_58" rel="nofollow">3.1.4 通知（Advice）</a></li></ul> 
   </li><li><a href="#32_Spring_AOP__74" rel="nofollow">3.2 Spring AOP 实现</a></li><li><ul><li><a href="#321_94" rel="nofollow">3.2.1五大通知类型</a></li><li><a href="#322_Order_124" rel="nofollow">3.2.2 @Order注解解析</a></li><li><a href="#323_136" rel="nofollow">3.2.3切点表达式</a></li><li><a href="#324annotation_152" rel="nofollow">3.2.4@annotation</a></li></ul> 
   </li><li><a href="#33_Spring_AOP____197" rel="nofollow">3.3 Spring AOP 实现原理 - 代理模式(静态代理，动态代理)</a></li><li><ul><li><a href="#331__246" rel="nofollow">3.3.1静态代理 代码实现</a></li><li><a href="#331__266" rel="nofollow">3.3.1动态代理 代码实现</a></li><li><ul><li><a href="#3311jdk__268" rel="nofollow">3.3.1.1jdk 动态代理实现</a></li><li><a href="#3312CGLIB__282" rel="nofollow">3.3.1.2CGLIB 动态代理实现</a></li></ul> 
    </li><li><a href="#332_305" rel="nofollow">3.3.2面试题</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><strong>大家好，我是晓星航。今天为大家带来的是 Spring AOP 相关的讲解！😀</strong></p> 
<h2><a id="1_Spring_AOP_4"></a>1.什么是 Spring AOP？</h2> 
<p>Spring两大核心思想：Ioc Aop</p> 
<p>在介绍 Spring AOP 之前，⾸先要了解⼀下什么是 AOP？</p> 
<p>AOP（Aspect Oriented Programming）：⾯向切⾯编程，它是⼀种思想，<strong>它是对某⼀类事情的集中处理</strong>。⽐如⽤户登录权限的效验，没学 AOP 之前，我们所有需要判断⽤户登录的⻚⾯（中的⽅法），都要各⾃实现或调⽤⽤户验证的⽅法，然⽽有了 AOP 之后，我们只需要在某⼀处配 置⼀下，所有需要判断⽤户登录⻚⾯（中的⽅法）就全部可以实现⽤户登录验证了，不再需要每个⽅法中都写相同的⽤户登录验证了。 ⽽ AOP 是⼀种思想，</p> 
<p>⽽ Spring AOP 是⼀个框架，提供了⼀种对 AOP 思想的实现，它们的关系和 IoC 与 DI 类似。</p> 
<h2><a id="2_AOP_16"></a>2.为什要用 AOP？</h2> 
<p>想象⼀个场景，我们在做后台系统时，除了登录和注册等⼏个功能不需要做⽤户登录验证之外，其他⼏ 乎所有⻚⾯调⽤的前端控制器（ Controller）都需要先验证⽤户登录的状态，那这个时候我们要怎么处理呢？</p> 
<p>我们之前的处理⽅式是每个 Controller 都要写⼀遍⽤户登录验证，然⽽当你的功能越来越多，那么你要写的登录验证也越来越多，⽽这些⽅法⼜是相同的，这么多的⽅法就会代码修改和维护的成本。那有没 有简单的处理⽅案呢？答案是有的，<strong>对于这种功能统⼀，且使⽤的地⽅较多的功能，就可以考虑 AOP 来统⼀处理了</strong>。</p> 
<p>除了统⼀的⽤户登录判断之外，AOP 还可以实现：</p> 
<ul><li>统⼀⽇志记录</li><li>统⼀⽅法执⾏时间统计</li><li>统⼀的返回格式设置</li><li>统⼀的异常处理</li><li>事务的开启和提交等</li></ul> 
<p>也就是说使⽤ AOP 可以扩充多个对象的某个能⼒，所以 AOP 可以说是 OOP（Object Oriented Programming，⾯向对象编程）的补充和完善。</p> 
<h2><a id="3Spring_AOP__32"></a>3.Spring AOP 应该怎么学习呢？</h2> 
<p><img src="https://images2.imgbox.com/d5/d5/VfQWazd4_o.png" alt="image-20240331165857684"></p> 
<h3><a id="31_AOP__36"></a>3.1 AOP 组成</h3> 
<h4><a id="311_Aspect____38"></a>3.1.1 切⾯（Aspect）= 切点 + 通知</h4> 
<p>切⾯（Aspect）由切点（Pointcut）和通知（Advice）组成，它既包含了横切逻辑的定义，也包 括了连接点的定义。</p> 
<blockquote> 
 <p>切⾯是包含了：通知、切点和切⾯的类，相当于 AOP 实现的某个功能的集合。</p> 
</blockquote> 
<h4><a id="312_Join_Point_44"></a>3.1.2 连接点（Join Point）</h4> 
<p>应⽤执⾏过程中能够插⼊切⾯的⼀个点，这个点可以是⽅法调⽤时，抛出异常时，甚⾄修改字段 时。切⾯代码可以利⽤这些点插⼊到应⽤的正常流程之中，并添加新的⾏为。</p> 
<blockquote> 
 <p>连接点相当于需要被增强的某个 AOP 功能的所有⽅法。</p> 
</blockquote> 
<h4><a id="313_Pointcut_50"></a>3.1.3 切点（Pointcut）</h4> 
<p>Pointcut 是匹配 Join Point 的谓词。</p> 
<p>Pointcut 的作⽤就是提供⼀组规则（使⽤ AspectJ pointcut expression language 来描述）来 匹配 Join Point，给满⾜规则的 Join Point 添加 Advice。</p> 
<blockquote> 
 <p>切点相当于保存了众多连接点的⼀个集合（如果把切点看成⼀个表，⽽连接点就是表中⼀条⼀条 的数据）。</p> 
</blockquote> 
<h4><a id="314_Advice_58"></a>3.1.4 通知（Advice）</h4> 
<p>切⾯也是有⽬标的 ——它必须完成的⼯作。在 AOP 术语中，<strong>切⾯的⼯作被称之为通知</strong>。</p> 
<p>通知：定义了切⾯是什么，何时使⽤，其描述了切⾯要完成的⼯作，还解决何时执⾏这个⼯作的问题。</p> 
<p>Spring 切⾯类中，可以在⽅法上使⽤以下注解，会设置⽅法为通知⽅法，在满⾜条件后会通知本 ⽅法进⾏调⽤：</p> 
<ul><li><strong>前置通知</strong>使⽤ @Before：通知⽅法会在⽬标⽅法调⽤之前执⾏。</li><li><strong>后置通知</strong>使⽤ @After：通知⽅法会在⽬标⽅法返回或者抛出异常后调⽤。</li><li><strong>返回之后通知</strong>使⽤ @AfterReturning：通知⽅法会在⽬标⽅法返回后调⽤。</li><li><strong>抛异常后通知</strong>使⽤ @AfterThrowing：通知⽅法会在⽬标⽅法抛出异常后调⽤。</li><li><strong>环绕通知</strong>使⽤ @Around：通知包裹了被通知的⽅法，在被通知的⽅法通知之前和调⽤之后执 ⾏⾃定义的⾏为。</li></ul> 
<blockquote> 
 <p>切点相当于要增强的⽅法。</p> 
</blockquote> 
<h3><a id="32_Spring_AOP__74"></a>3.2 Spring AOP 实现</h3> 
<img src="https://images2.imgbox.com/e3/5c/EriAbcPx_o.png" alt="image-20240331193129624"> 
<img src="https://images2.imgbox.com/0c/21/A3wgZ05T_o.png" alt="image-20240331193139439"> 
<p>加了Aop方法后，查询消耗的时间：</p> 
<p><img src="https://images2.imgbox.com/4a/48/aCaLj7zB_o.png" alt="image-20240331194035125"></p> 
<p>概念理解：</p> 
<p><img src="https://images2.imgbox.com/c9/27/PG32CuZ2_o.png" alt="image-20240331194656711"></p> 
<p>代码图解：</p> 
<p><img src="https://images2.imgbox.com/d9/ee/S2KVBzuI_o.png" alt="image-20240331195020533"></p> 
<h4><a id="321_94"></a>3.2.1五大通知类型</h4> 
<p>Spring中AOP的通知类型有以下几种:</p> 
<ul><li>@Around:环绕通知,此注解标注的通知方法在目标方法前,后都被执行</li><li>@Before:前置通知，此注解标注的通知方法在目标方法前被执行</li><li>@After: 后置通知,此注解标注的通知方法在目标方法后被执行,无论是否有异常都会执行</li><li>@AfterReturning:返回后通知,此注解标注的通知方法在目标方法后被执行,有异常不会执行</li><li>@AfterThrowing:异常后通知,此注解标注的通知方法发生异常后执行</li></ul> 
<p><img src="https://images2.imgbox.com/e3/a5/9IllPQXK_o.png" alt="image-20240331210300225"></p> 
<p><img src="https://images2.imgbox.com/71/cc/wZqemo68_o.png" alt="image-20240331210651926"></p> 
<p>定义五个方法：</p> 
<p><img src="https://images2.imgbox.com/fd/ba/xfnruZDR_o.png" alt="image-20240331211420360"></p> 
<p>切点</p> 
<p><img src="https://images2.imgbox.com/4c/5d/5bE2nTKA_o.png" alt="image-20240331211248832"></p> 
<p>自定义切点pt</p> 
<p><img src="https://images2.imgbox.com/55/82/mX4dB6Vd_o.png" alt="image-20240331211406918"></p> 
<p>多个切面执行顺序</p> 
<p><img src="https://images2.imgbox.com/e6/08/z9PQXfxA_o.png" alt="image-20240331212525726"></p> 
<h4><a id="322_Order_124"></a>3.2.2 @Order注解解析</h4> 
<p>如果我们每次使用切面都要算顺序未免会很麻烦，为了解决这个问题我们引入了 <code>@Order</code></p> 
<img src="https://images2.imgbox.com/70/26/j6OZFPqO_o.png" alt="image-20240331212745657"> 
<p>从结果可以看出，我们给Order传参的数字越小，优先级越高</p> 
<p><img src="https://images2.imgbox.com/42/e2/C1A3dSCS_o.png" alt="image-20240331212755786"></p> 
<img src="https://images2.imgbox.com/20/05/ipUKUCcm_o.png" alt="image-20240331212833026"> 
<h4><a id="323_136"></a>3.2.3切点表达式</h4> 
<p><img src="https://images2.imgbox.com/bb/50/HHbYY598_o.png" alt="image-20240331213150501"></p> 
<p><img src="https://images2.imgbox.com/f3/dc/JzDhyhGJ_o.png" alt="image-20240331213200893"></p> 
<p><img src="https://images2.imgbox.com/19/ca/Q2yhQqwl_o.png" alt="image-20240331213207198"></p> 
<p>切点表达式支持通配符表达:</p> 
<p><img src="https://images2.imgbox.com/53/5a/59RJ92QB_o.png" alt="image-20240331213409018"></p> 
<h4><a id="324annotation_152"></a>3.2.4@annotation</h4> 
<p>execution表达式更适用有规则的,如果我们要匹配多个无规则的方法呢,比如:TestController中的t1()和UserController中的u1()这两个方法.</p> 
<p>这个时候我们使用execution这种切点表达式来描述就不是很方便了</p> 
<p>我们可以借助自定义注解的方式以及另一种切点表达式 <code>@annotation</code> 来描述这一类的切点</p> 
<p>实现步骤:</p> 
<ol><li>编写自定义注解</li><li>使用 <code>@annotation</code> 表达式来描述切点</li><li>在连接点的方法上添加自定义注解</li></ol> 
<p><strong>准备测试代码:</strong></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RestMapping</span><span class="token punctuation">(</span><span class="token string">"/t1"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"t1"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@RestMapping</span><span class="token punctuation">(</span><span class="token string">"/t2"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">t2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>自定义注解声明： — MyAspect</p> 
<img src="https://images2.imgbox.com/73/e2/oUMZiDsH_o.png" alt="image-20240401190838189"> 
<p>自定义注解使用：</p> 
<img src="https://images2.imgbox.com/d1/6c/TXb4pZlf_o.png" alt="image-20240401190803670"> 
<p>注意这里的@MyAspect就是我们自定义的@Before生效注解</p> 
<p><img src="https://images2.imgbox.com/65/a9/HuLrQ2Ay_o.png" alt="image-20240401191329947"></p> 
<p>idea运行结果</p> 
<h3><a id="33_Spring_AOP____197"></a>3.3 Spring AOP 实现原理 - 代理模式(静态代理，动态代理)</h3> 
<p>基于动态代理来实现的</p> 
<p>代理模式：静态代理模式、动态代理模式</p> 
<p>使用代理前：</p> 
<p><img src="https://images2.imgbox.com/0f/e5/rdQ12HaS_o.png" alt="image-20240401195301717"></p> 
<p>使用代理后：</p> 
<p><img src="https://images2.imgbox.com/d8/6c/Da6Uqiqa_o.png" alt="image-20240401195318711"></p> 
<p><strong>生活中的代理</strong></p> 
<ul><li>艺人经纪人:广告商找艺人拍广告，需要经过经纪人,由经纪人来和艺人进行沟通</li><li>房屋中介:房屋进行租赁时，卖方会把房屋授权给中介，由中介来代理看房,房屋咨询等服务</li><li>经销商:厂商不直接对外销售产品，由经销商负责代理销售</li><li>秘书/助理:合作伙伴找老板谈合作，需要先经过秘书/助理预约</li></ul> 
<p>静态代理：在程序运行前，代理对象就已经对目标对象进行了步骤的<strong>预执行代码</strong></p> 
<p>例如：我们在结账时买完东西老板会给我们拿袋子装东西，静态代理就是提前把袋子拿好，而动态代理则是需要时再拿，不提前分配。</p> 
<p><strong>代理模式的主要角色</strong></p> 
<ol><li>Subject: 业务接口类,可以是抽象类或者接口(不一定有)</li><li>RealSubject: 业务实现类，具体的业务执行,也就是被代理对象,</li><li>Proxy: 代理类. RealSubject的代理</li></ol> 
<blockquote> 
 <p>比如房屋租赁<br> Subject 就是提前定义了房东做的事情,交给中介代理,也是中介要做的事情<br> RealSubject:房东<br> Proxy: 中介</p> 
</blockquote> 
<p>UML类图如下：</p> 
<p><img src="https://images2.imgbox.com/a4/45/KSkfheYE_o.png" alt="image-20240401201237749"></p> 
<p>代理模式可以在不修改被代理对象的基础上，通过扩展代理类,进行一些功能的附加与增强.</p> 
<p>根据代理的创建时期，代理模式分为<strong>静态代理</strong>和<strong>动态代理</strong></p> 
<ul><li>静态代理:由程序员创建代理类或特定工具自动生成源代码再对其编译,在程序运行前代理类的.class 文件就已经存在了.</li><li>动态代理:在程序运行时，运用反射机制动态创建而成.</li></ul> 
<h4><a id="331__246"></a>3.3.1静态代理 代码实现</h4> 
<p>房东接口：</p> 
<img src="https://images2.imgbox.com/cd/18/9BX1gK17_o.png" alt="image-20240401202622123"> 
<p>房东类：</p> 
<img src="https://images2.imgbox.com/4c/9e/P85zhIWl_o.png" alt="image-20240401202655742"> 
<p>中介：</p> 
<img src="https://images2.imgbox.com/77/e0/HnxFhUQH_o.png" alt="image-20240401202723033"> 
<p>主函数：</p> 
<img src="https://images2.imgbox.com/41/a5/PmJAqaCG_o.png" alt="image-20240401202750149"> 
<h4><a id="331__266"></a>3.3.1动态代理 代码实现</h4> 
<h5><a id="3311jdk__268"></a>3.3.1.1jdk 动态代理实现</h5> 
<p>jdk代理类代码：</p> 
<p><img src="https://images2.imgbox.com/9e/09/1iB1G4Rz_o.png" alt="image-20240401203714893"></p> 
<p>主函数：</p> 
<p><img src="https://images2.imgbox.com/52/d2/OHt7Ns7c_o.png" alt="image-20240401204646157"></p> 
<p><img src="https://images2.imgbox.com/77/c1/fenhAyZY_o.png" alt="image-20240402174814753"></p> 
<p>JDK只能代理接口，不能代理类</p> 
<h5><a id="3312CGLIB__282"></a>3.3.1.2CGLIB 动态代理实现</h5> 
<p>CGLIB代理类代码：</p> 
<p><img src="https://images2.imgbox.com/7a/ff/5XigJR9S_o.png" alt="image-20240402174439013"></p> 
<p>主函数：</p> 
<pre><code class="prism language-java"><span class="token comment">//CGLib 动态代理</span>
        <span class="token class-name">HouseSubject</span> proxy3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HouseSubject</span><span class="token punctuation">)</span> <span class="token class-name">Enhancer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CGLibIntercepter</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxy3<span class="token punctuation">.</span><span class="token function">rentHouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//CGLib 代理类</span>

        <span class="token class-name">HouseSubjectClass</span> proxy4 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HouseSubjectClass</span><span class="token punctuation">)</span> <span class="token class-name">Enhancer</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>subjectClass<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CGLibIntercepter</span><span class="token punctuation">(</span>subjectClass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxy4<span class="token punctuation">.</span><span class="token function">rentHouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cf/97/9pOLKuGv_o.png" alt="image-20240402174846130"></p> 
<p>CGLIB既可以代理类，又可以代理接口</p> 
<h4><a id="332_305"></a>3.3.2面试题</h4> 
<p>1.Spring AOP是怎么实现的？</p> 
<p>答：基于动态代理实现的。</p> 
<p>2.动态代理是怎么实现的？</p> 
<p>答：Spirng动态代理是基于JDK和CGlib实现的</p> 
<p>3.Spring 使用的哪个动态代理？</p> 
<p>答：JDK和CGLIb都用</p> 
<p>4.什么时候用JDK，什么时候用CGLIb？</p> 
<p>答：代理类只能使用CGlib。代理接口可以使用JDK，也可以使用CGLib。</p> 
<p>5.JDK和CGLib有什么区别？</p> 
<p>答：SpringBoot 2.X以后，默认使用CGLIB代理<br> spring.aop.proxy-target-class=false 设置JDK代理</p> 
<p><img src="https://images2.imgbox.com/ac/49/5Z6qkY6p_o.png" alt="image-20240402175756909"></p> 
<p><em>感谢各位读者的阅读，本文章有任何错误都可以在评论区发表你们的意见，我会对文章进行改正的。如果本文章对你有帮助请动一动你们敏捷的小手点一点赞，你的每一次鼓励都是作者创作的动力哦！😘</em></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/285883c75cce6f5b18629ed6fa29a302/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">You are applying Flutter‘s app_plugin_loader Gradle plugin imperatively using the apply script metho</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/46537ae925a047e9ddf0dea7becec9c6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何从 Android 图库中恢复误删除的照片</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>