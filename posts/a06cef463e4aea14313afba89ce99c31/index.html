<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】类和对象（三）构造与析构 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a06cef463e4aea14313afba89ce99c31/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】类和对象（三）构造与析构">
  <meta property="og:description" content="文章目录 一、类的6个默认成员函数二、 构造函数干嘛的？语法定义特性综上总结什么是默认构造函数？ 三、析构函数干嘛的 ？语法定义析构顺序 一、类的6个默认成员函数 如果一个类中什么成员都没有，简称为空类。空类中并不是真的什么都没有。任何类在什么都不写时，编译器会自动生成以下6个默认成员函数。
默认成员函数：用户没有显式实现，编译器会生成的成员函数称为默认成员函数。
二、 构造函数 干嘛的？ 构造函数是特殊的成员函数 用来初始化对象 。
语法定义 1️⃣函数名和类名相同
2️⃣没有返回值（不需要写）
代码演示：
class Date { public: //函数名与类名相同 没有返回值 不用写void Date() { _year = 1; _month = 1; _day = 1; } void Print() { cout &lt;&lt; _year &lt;&lt; &#34;-&#34; &lt;&lt; _month &lt;&lt; &#34;-&#34; &lt;&lt; _day &lt;&lt; endl; } private: int _year; int _month; int _day; }; int main() { Date d1; d1.Print(); return 0; } 3️⃣对象实例化时 编译器自动调用该函数，如果没有构造函数可调，会报错。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-20T14:50:18+08:00">
    <meta property="article:modified_time" content="2024-06-20T14:50:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】类和对象（三）构造与析构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#6_1" rel="nofollow">一、类的6个默认成员函数</a></li><li><a href="#__7" rel="nofollow">二、 构造函数</a></li><li><ul><li><a href="#_8" rel="nofollow">干嘛的？</a></li><li><a href="#_11" rel="nofollow">语法定义</a></li><li><a href="#_130" rel="nofollow">特性</a></li><li><ul><li><a href="#_241" rel="nofollow">综上总结</a></li><li><a href="#_251" rel="nofollow">什么是默认构造函数？</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_302" rel="nofollow">三、析构函数</a></li><li><ul><li><a href="#__303" rel="nofollow">干嘛的 ？</a></li><li><a href="#_306" rel="nofollow">语法定义</a></li><li><a href="#_364" rel="nofollow">析构顺序</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="6_1"></a>一、类的6个默认成员函数</h2> 
<p>如果一个类中什么成员都没有，简称为空类。空类中并不是真的什么都没有。任何类在什么都不写时，编译器会自动生成以下6个默认成员函数。<br> 默认成员函数：用户没有显式实现，编译器会生成的成员函数称为默认成员函数。</p> 
<p><img src="https://images2.imgbox.com/aa/92/OhLqDui4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="__7"></a>二、 构造函数</h2> 
<h3><a id="_8"></a>干嘛的？</h3> 
<p>构造函数是<font color="#7F72F7"><strong>特殊的成员函数</strong> </font>用来<strong>初始化对象</strong> 。</p> 
<h3><a id="_11"></a>语法定义</h3> 
<p>1️⃣函数名和类名相同<br> 2️⃣没有返回值（不需要写）<br> 代码演示：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//函数名与类名相同 没有返回值 不用写void </span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>3️⃣对象<font color="#7F72F7"><strong>实例化时 编译器自动调用该函数</strong></font>，如果没有构造函数可调，会报错。<br> 反汇编演示自动调用：<br> <img src="https://images2.imgbox.com/2c/9a/RkNYBP2A_o.png" alt="在这里插入图片描述"><br> 4️⃣构造函数可以重载(重载：函数名相同，参数不同)</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//构造函数可以重载</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b2/e7/qtbZGsn6_o.png" alt="在这里插入图片描述"></p> 
<p>注意：无参的构造函数 和 全缺省的构造函数 可以同时存在类的定义里，但一般不这样写，因为调用会存在 歧义。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">//无参的构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
		_day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//全缺省的构造函数</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> month <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> day <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>比如会出现如下报错：<br> <img src="https://images2.imgbox.com/05/93/UL4eSkdz_o.png" alt="在这里插入图片描述"><br> 构造函数可以带参数、也可以不带参数<br> 带参数的情况：实例化对象时，直接把参数跟在对象后面就可以。<br> 无参数的情况：实例化对象时，不能跟空括号（）在对象后面，原因是：改写法无法跟函数声明区分开。</p> 
<p><strong>实践中，更多的情况直接用全缺省的构造函数</strong></p> 
<h3><a id="_130"></a>特性</h3> 
<p>思考下面的日期类我们没提供构造函数的情况是否会被初始化？</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0e/86/DFt2mh7V_o.png" alt="在这里插入图片描述"></p> 
<p>1、构造函数 ，是默认成员函数，程序员不写，<strong>编译器会生成一个</strong>,但是自动生成的构造函数初始化出的成员变量没有默认值(<strong>具体根据成员变量的类型而定</strong>)。</p> 
<blockquote> 
 <p><font color="black"><strong>tips:C++ 中 数据类型分为</strong></font></p> 
 <p>内置类型(基本类型)： int /char /doube/指针… 语言自身定义的类型<br> 自定义类型: struct /class</p> 
</blockquote> 
<p><strong>C++98</strong> 规定 ，编译器自动生成的 构造函数 对于<strong>内置类型</strong>不做处理，<strong>自定义类型</strong>会去调用他的默认构造函数。<br> 演示代码：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 内置类型 不做处理</span>
	<span class="token keyword">int</span> _year <span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month <span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
	<span class="token comment">// 自定义类型 调默认构造</span>
	A _aa<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/44/52/TQ1KboNJ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>C++11</strong> 委员会对这个语法进行打补丁，对于<strong>内置类型</strong> <strong>在成员变量声明位置 可以给缺省值</strong> ，编译器自动生成的构造函数就会用程序员给出的这个缺省值初始化成员变量。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// C++11 内置类型 声明位置可以给缺省值</span>
	<span class="token keyword">int</span> _year <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
	<span class="token comment">// 自定义类型 调默认构造</span>
	A _aa<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b2/01/KyqwiqIl_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_241"></a>综上总结</h4> 
<p>编译器自动生成的构造函数 在进行对象实例化时 对成员变量的初始化操作：</p> 
<p>若成员变量<strong>是内置类型</strong>：编译器不做处理，程序员可以<strong>在成员变量声明位置 可以给缺省值</strong> ，编译器自动生成的构造函数就会用程序员给出的这个缺省值初始化成员变量。</p> 
<p>若成员变量<strong>是自定义类型</strong>：编译器自动生成的构造函数就会<strong>调用他的默认构造函数</strong></p> 
<p>程序员需要自己分析类型成员和初始化需求，绝大多数场景都需要程序员自己实现构造函数！</p> 
<h4><a id="_251"></a>什么是默认构造函数？</h4> 
<p><strong>编译器自动生成的构造函数</strong>只是 默认构造函数之一。<strong>无参数的构造函数</strong>，<strong>全缺省的构造函数</strong> 也属于默认构造函数</p> 
<p><strong>总结：不需要传参 就可以调用的构造函数 ➡️默认构造函数</strong>，默认构造函数只能有一个</p> 
<p>❓问题遗留：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Time</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">// 没有默认构造函数</span>
	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token keyword">int</span> hour<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Time()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		_hour <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		_minute <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		_second <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _hour<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _minute<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _second<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 基本类型(内置类型)</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>

	<span class="token comment">// 自定义类型</span>
	Time _t<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码问题描述：<br> 当前time类中 我们显示定义了构造函数 ，则编译器不会自动生成默认构造函数。Data类包含time类，time类没有默认构造函数，导致Data类编译器也无法为这个类自动生成默认构造函数。</p> 
<p>报错如下：<img src="https://images2.imgbox.com/28/db/5WBjuy1b_o.png" alt="在这里插入图片描述"><br> 此时，我们只能显示实现构造函数，详见 下期知识点<strong>初始化列表</strong></p> 
<h2><a id="_302"></a>三、析构函数</h2> 
<h3><a id="__303"></a>干嘛的 ？</h3> 
<p>清理资源，类似于 Desdory .</p> 
<h3><a id="_306"></a>语法定义</h3> 
<p>1、析构函数名实在类名前面加上~</p> 
<p>2、无参数无返回值类型</p> 
<p>3、一个类只能有一个析构函数。程序员没定义，编译器自动生成析构函数。析构函数不能重载。</p> 
<p>4、对象声明周期结束的时候，编译器自动调用</p> 
<p>因为在函数栈帧里，所以<strong>先定义的后析构</strong>，<strong>后定义的先析构</strong>。</p> 
<p>代码示例：我们创建不同生命周期不同作用域的对象，注意观察他们的析构顺序</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Date</span><span class="token punctuation">(</span><span class="token keyword">int</span> year <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token operator">~</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~Date()-&gt;"</span><span class="token operator">&lt;&lt;</span>_year<span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 基本类型(内置类型)</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d3</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> Date <span class="token function">d4</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Date <span class="token function">d5</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> Date <span class="token function">d7</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Date <span class="token function">d6</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> Date <span class="token function">d8</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 局部对象（后定义先析构） -》 局部的静态 -》全局对象（后定义先析构）</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date <span class="token function">d1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Date <span class="token function">d2</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_364"></a>析构顺序</h3> 
<p>局部对象（后定义先析构） ➡️ 局部的静态 ​ ➡️ 全局对象（无论静态or非静态 都是后定义先析构）</p> 
<p><img src="https://images2.imgbox.com/06/4a/VPBphJq0_o.png" alt="在这里插入图片描述"></p> 
<p>默认生成的析构函数跟构造函数类似，</p> 
<p>如果要清理的资源是内置类型，则不做处理。若是自定义类型的成员，则编译器去调用它的析构函数</p> 
<p>其他的默认成员函数我们会在下节介绍~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e7f940733ff4cc640643399d4458fba0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Android】Android Studio版本手动升级到指定版本方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d15b70c0297bb320f3fd23632f51f71d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【漏洞复现】红帆iOffice.net wssRtSyn接口处存在SQL注入</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>