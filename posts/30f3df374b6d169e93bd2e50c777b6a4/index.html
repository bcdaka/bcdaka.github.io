<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Kotlin 标准函数 with、run、apply 的定义和使用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/30f3df374b6d169e93bd2e50c777b6a4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Kotlin 标准函数 with、run、apply 的定义和使用">
  <meta property="og:description" content="Kotlin 标准函数 with、run、apply 的定义和使用 1. with 函数 定义：
with 函数允许你在一个对象的上下文中执行一个 lambda 表达式，而不需要在 lambda 表达式中重复引用该对象。
@kotlin.internal.InlineOnly public inline fun &lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R = receiver.block() 使用场景：
当你需要在多个地方引用同一个对象，并且不想每次都显式地写出这个对象名时，可以使用 with 函数。
示例：
val stringBuilder = StringBuilder() with(stringBuilder) { append(&#34;Hello&#34;) append(&#34;, &#34;) append(&#34;World!&#34;) } println(stringBuilder) // 输出 &#34;Hello, World!&#34; 2. run 函数 定义：
run 是 Kotlin 中所有类的成员函数，用于在当前对象的上下文中执行一个 lambda 表达式，但不返回任何值（返回 Unit）。
虽然这不是显式定义的函数，但它是通过扩展函数为所有类隐式提供的。
使用场景：
当你需要在对象的上下文中执行一些操作，但不需要返回任何结果时，可以使用 run。
示例（虽然不常见，因为可以直接在对象上调用方法）：
val stringBuilder = StringBuilder() stringBuilder.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-27T22:32:47+08:00">
    <meta property="article:modified_time" content="2024-05-27T22:32:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Kotlin 标准函数 with、run、apply 的定义和使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>Kotlin 标准函数 <code>with</code>、<code>run</code>、<code>apply</code> 的定义和使用</h4> 
<h5>1. <code>with</code> 函数</h5> 
<p><strong>定义</strong>：</p> 
<p><code>with</code> 函数允许你在一个对象的上下文中执行一个 lambda 表达式，而不需要在 lambda 表达式中重复引用该对象。</p> 
<table><tbody><tr><td></td><td><code>@kotlin.internal.InlineOnly </code></td></tr><tr><td></td><td><code>public inline fun &lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R = receiver.block()</code></td></tr></tbody></table> 
<p><strong>使用场景</strong>：</p> 
<p>当你需要在多个地方引用同一个对象，并且不想每次都显式地写出这个对象名时，可以使用 <code>with</code> 函数。</p> 
<p><strong>示例</strong>：</p> 
<table><tbody><tr><td></td><td><code>val stringBuilder = StringBuilder() </code></td></tr><tr><td></td><td><code>with(stringBuilder) { </code></td></tr><tr><td></td><td><code>append("Hello") </code></td></tr><tr><td></td><td><code>append(", ") </code></td></tr><tr><td></td><td><code>append("World!") </code></td></tr><tr><td></td><td><code>} </code></td></tr><tr><td></td><td><code>println(stringBuilder) // 输出 "Hello, World!"</code></td></tr></tbody></table> 
<h5>2. <code>run</code> 函数</h5> 
<p><strong>定义</strong>：</p> 
<p><code>run</code> 是 Kotlin 中所有类的成员函数，用于在当前对象的上下文中执行一个 lambda 表达式，但不返回任何值（返回 <code>Unit</code>）。</p> 
<p>虽然这不是显式定义的函数，但它是通过扩展函数为所有类隐式提供的。</p> 
<p><strong>使用场景</strong>：</p> 
<p>当你需要在对象的上下文中执行一些操作，但不需要返回任何结果时，可以使用 <code>run</code>。</p> 
<p><strong>示例</strong>（虽然不常见，因为可以直接在对象上调用方法）：</p> 
<table><tbody><tr><td></td><td><code>val stringBuilder = StringBuilder() </code></td></tr><tr><td></td><td><code>stringBuilder.run { </code></td></tr><tr><td></td><td><code>append("Hello") </code></td></tr><tr><td></td><td><code>append(", ") </code></td></tr><tr><td></td><td><code>append("World!") </code></td></tr><tr><td></td><td><code>} </code></td></tr><tr><td></td><td><code>println(stringBuilder) // 输出 "Hello, World!"</code></td></tr></tbody></table> 
<h5>3. <code>apply</code> 函数</h5> 
<p><strong>定义</strong>：</p> 
<p><code>apply</code> 是 Kotlin 的一个扩展函数，它执行给定的 lambda 表达式，并返回调用它的对象本身。</p> 
<table><tbody><tr><td></td><td><code>public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T { block(); return this }</code></td></tr></tbody></table> 
<p><strong>使用场景</strong>：</p> 
<p>当你需要在对象的上下文中执行一些操作，并希望返回该对象以便进行链式调用时，可以使用 <code>apply</code>。</p> 
<p><strong>示例</strong>：</p> 
<pre></pre> 
<table style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;"><tbody><tr><td></td><td><code>val stringBuilder = StringBuilder().apply { </code></td></tr><tr><td></td><td><code>append("Hello") </code></td></tr><tr><td></td><td><code>append(", ") </code></td></tr><tr><td></td><td><code>append("World!") </code></td></tr><tr><td></td><td><code>} </code></td></tr><tr><td></td><td><code>println(stringBuilder) // 输出 "Hello, World!"</code></td></tr></tbody></table> 
<h5>区别</h5> 
<ul><li><code>with</code>：接受一个对象和一个 lambda 表达式，在 lambda 表达式中可以直接调用该对象的方法，无需前缀。返回 lambda 表达式的返回值。</li><li><code>run</code>：是类的成员函数，接受一个 lambda 表达式，在 lambda 表达式中可以直接调用该对象的方法。返回 <code>Unit</code>。</li><li><code>apply</code>：是扩展函数，接受一个 lambda 表达式，在 lambda 表达式中可以直接调用该对象的方法。返回调用它的对象本身。</li></ul> 
<h4>定义静态方法</h4> 
<p>在 Kotlin 中，没有直接的“静态方法”概念，但你可以通过以下几种方式实现类似的功能：</p> 
<ol><li><strong>顶层函数</strong>：在文件的顶层定义的函数可以在没有类实例的情况下调用。</li></ol> 
<pre></pre> 
<table style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;"><tbody><tr><td></td><td><code>// MyUtils.kt </code></td></tr><tr><td></td><td><code>fun staticLikeFunction() { </code></td></tr><tr><td></td><td><code>// ... </code></td></tr><tr><td></td><td><code>} </code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>// 在其他文件中 </code></td></tr><tr><td></td><td><code>MyUtilsKt.staticLikeFunction() // 注意：Kotlin 会为顶层函数生成一个包含文件名的类（除非你用 @file:JvmName 指定一个名称）</code></td></tr></tbody></table> 
<ol><li><strong>对象表达式或对象声明</strong>：你可以创建一个单例对象，并在其中定义函数。</li></ol> 
<table><tbody><tr><td></td><td><code>object MyUtils { </code></td></tr><tr><td></td><td><code>@JvmStatic // 如果你希望这个函数在 Java 中看起来像静态的 </code></td></tr><tr><td></td><td><code>fun staticLikeFunction() { </code></td></tr><tr><td></td><td><code>// ... </code></td></tr><tr><td></td><td><code>} </code></td></tr><tr><td></td><td><code>} </code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>// 调用 </code></td></tr><tr><td></td><td><code>MyUtils.staticLikeFunction()</code></td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/98d48eab3e25ecd66b329752ea071d4e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SqlSugar:基于SQLSugar框架在 .Net环境中搭建PostgreSQL数据库访问、操作的框架，C#连接访问PostgreSQL数据库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf968f396c987e5965008edb789c6066/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">电脑找不到opencl.dll原因分析及5种详细的解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>