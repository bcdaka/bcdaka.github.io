<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>鸿蒙开发实战-手写文心一言AI对话APP - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/35f2359a689b71aa4fae800bc1882be5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="鸿蒙开发实战-手写文心一言AI对话APP">
  <meta property="og:description" content="运行环境 （后面附有API9版本，可修改后在HarmonyOS4设备上运行）
DAYU200:4.0.10.16
SDK：4.0.10.15
IDE：4.0.600
在DAYU200:4.0.10.16上运行 一、创建应用 1.点击File-&gt;new File-&gt;Create Progect
2.选择模版
【OpenHarmony】Empty Ability
3.填写项目名，WenXinTalk，应用包名com.WenXinTalk,应用存储位置XXX（不要有中文，特殊字符，空格）
Compile SDK10，Model ：Stage
Device Type 默认就可以。
node，建议16.20.1
完成以上配置以后点击Finish
4.选择在新窗口打开，等待依赖加载完毕。如图所示。
如果大家加载依赖报错的话，检查自己的网络。
二、运行HelloWord 1.给开发板供电，并连接开发板到电脑，如图所示
2.签名
签名的步骤：
点击File-&gt;Project struct
点击Apply或者ok就可以，。
现在点击按钮运行项目。
控制台打印信息
01/12 16:13:40: Launching com.myapplication $ hdc uninstall com.myapplication $ hdc shell mkdir data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279 $ hdc file send &#34;E:\study\HarmonyOS\project\WenXinTalk\entry\build\default\outputs\default\entry-default-signed.hap&#34; &#34;data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279&#34; $ hdc shell bm install -p data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279 $ hdc shell rm -rf data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279 $ hdc shell aa start -a EntryAbility -b com.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-24T18:01:03+08:00">
    <meta property="article:modified_time" content="2024-01-24T18:01:03+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">鸿蒙开发实战-手写文心一言AI对话APP</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_1"></a>运行环境</h3> 
<p>（后面附有API9版本，可修改后在HarmonyOS4设备上运行）</p> 
<p>DAYU200:4.0.10.16</p> 
<p>SDK：4.0.10.15</p> 
<p>IDE：4.0.600</p> 
<h3><a id="DAYU200401016_11"></a>在DAYU200:4.0.10.16上运行</h3> 
<h4><a id="_13"></a>一、创建应用</h4> 
<p>1.点击File-&gt;new File-&gt;Create Progect</p> 
<p><img src="https://images2.imgbox.com/fe/bc/ZvQhZJNB_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_HarmonyOS"></p> 
<p>2.选择模版</p> 
<p>【OpenHarmony】Empty Ability</p> 
<p><img src="https://images2.imgbox.com/0b/19/VKjpyef0_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_02"></p> 
<p>3.填写项目名，WenXinTalk，应用包名com.WenXinTalk,应用存储位置XXX（不要有中文，特殊字符，空格）</p> 
<p>Compile SDK10，Model ：Stage</p> 
<p>Device Type 默认就可以。</p> 
<p>node，建议16.20.1</p> 
<p>完成以上配置以后点击Finish</p> 
<p><img src="https://images2.imgbox.com/f2/8d/xKA5Ja0N_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_03"></p> 
<p>4.选择在新窗口打开，等待依赖加载完毕。如图所示。</p> 
<p><img src="https://images2.imgbox.com/ab/1c/Dx9hvMvk_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_OpenHarmony_04"></p> 
<p>如果大家加载依赖报错的话，检查自己的网络。</p> 
<h4><a id="HelloWord_43"></a>二、运行HelloWord</h4> 
<p>1.给开发板供电，并连接开发板到电脑，如图所示</p> 
<p><img src="https://images2.imgbox.com/da/cf/MPbIKX4B_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_05"></p> 
<p>2.签名</p> 
<p>签名的步骤：</p> 
<p>点击File-&gt;Project struct</p> 
<p><img src="https://images2.imgbox.com/f4/24/6p6JMGL8_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_06"></p> 
<p>点击Apply或者ok就可以，。</p> 
<p>现在点击按钮运行项目。</p> 
<p><img src="https://images2.imgbox.com/95/0e/MjQYitCk_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_大语言模型_07"></p> 
<p>控制台打印信息</p> 
<pre><code class="prism language-shell">01/12 <span class="token number">16</span>:13:40: Launching com.myapplication
$ hdc uninstall com.myapplication
$ hdc shell <span class="token function">mkdir</span> data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279
$ hdc <span class="token function">file</span> send <span class="token string">"E:\study\HarmonyOS\project\WenXinTalk<span class="token entity" title="\e">\e</span>ntry<span class="token entity" title="\b">\b</span>uild\default\outputs\default<span class="token entity" title="\e">\e</span>ntry-default-signed.hap"</span> <span class="token string">"data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279"</span>
$ hdc shell bm <span class="token function">install</span> -p data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279 
$ hdc shell <span class="token function">rm</span> -rf data/local/tmp/39ca9a16978647c98d8ac8bdf4a45279
$ hdc shell aa start -a EntryAbility -b com.myapplication


</code></pre> 
<p>证明项目已经成功运行在开发板上。</p> 
<p>如果报错</p> 
<pre><code class="prism language-html">01/09 14:38:39: Install Failed: error: failed to install bundle.
code:9568320
error: no signature file.
Open signing configs
Error while Deploy Hap


</code></pre> 
<p>则需要去签名</p> 
<p><img src="https://images2.imgbox.com/fc/3f/ui3vSgNw_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_08"></p> 
<h4><a id="_96"></a>三、修改图标和名称</h4> 
<h4><a id="_98"></a>修改应用图标和名称：</h4> 
<p>目录在AppScope/app.json5</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"app"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"bundleName"</span><span class="token operator">:</span> <span class="token string">"com.myapplication"</span><span class="token punctuation">,</span>
    <span class="token string">"vendor"</span><span class="token operator">:</span> <span class="token string">"example"</span><span class="token punctuation">,</span>
    <span class="token string">"versionCode"</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
    <span class="token string">"versionName"</span><span class="token operator">:</span> <span class="token string">"1.0.1"</span><span class="token punctuation">,</span>
    <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"$media:iconAi"</span><span class="token punctuation">,</span>
    <span class="token string">"label"</span><span class="token operator">:</span> <span class="token string">"$string:app_name"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>修改完毕之后如图所示</p> 
<p><img src="https://images2.imgbox.com/d0/0a/fa4iBJm9_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_09"></p> 
<p>修改成功之后，如图所示</p> 
<p>打开方式，在设置-应用管理一栏。</p> 
<p><img src="https://images2.imgbox.com/a6/04/XY9j0nyM_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_10"></p> 
<h4><a id="_126"></a>修改桌面图标和名称</h4> 
<p>修改src/main/module.json5中如图所示的label和icon。</p> 
<p>我们修改label的时候，修改中文目录下的就可以</p> 
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"module"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"requestPermissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"ohos.permission.INTERNET"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"entry"</span><span class="token punctuation">,</span>
    <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"entry"</span><span class="token punctuation">,</span>
    <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"$string:module_desc"</span><span class="token punctuation">,</span>
    <span class="token string">"mainElement"</span><span class="token operator">:</span> <span class="token string">"EntryAbility"</span><span class="token punctuation">,</span>
    <span class="token string">"deviceTypes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"default"</span><span class="token punctuation">,</span>
      <span class="token string">"tablet"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"deliveryWithInstall"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">"installationFree"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">"pages"</span><span class="token operator">:</span> <span class="token string">"$profile:main_pages"</span><span class="token punctuation">,</span>
    <span class="token string">"abilities"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"EntryAbility"</span><span class="token punctuation">,</span>
        <span class="token string">"srcEntry"</span><span class="token operator">:</span> <span class="token string">"./ets/entryability/EntryAbility.ets"</span><span class="token punctuation">,</span>
        <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"$string:EntryAbility_desc"</span><span class="token punctuation">,</span>
        <span class="token string">"icon"</span><span class="token operator">:</span> <span class="token string">"$media:iconAi"</span><span class="token punctuation">,</span>
        <span class="token string">"label"</span><span class="token operator">:</span> <span class="token string">"$string:EntryAbility_label"</span><span class="token punctuation">,</span>
        <span class="token string">"startWindowIcon"</span><span class="token operator">:</span> <span class="token string">"$media:startIcon"</span><span class="token punctuation">,</span>
        <span class="token string">"startWindowBackground"</span><span class="token operator">:</span> <span class="token string">"$color:start_window_background"</span><span class="token punctuation">,</span>
        <span class="token string">"exported"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">"skills"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token string">"entities"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"entity.system.home"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">"actions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">"action.system.home"</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/68/0c/NdzCepXY_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_OpenHarmony_11"></p> 
<p>修改中文目录的即可</p> 
<p><img src="https://images2.imgbox.com/94/4f/VWrxTBBc_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_OpenHarmony_12"></p> 
<p>修改结果如下</p> 
<p><img src="https://images2.imgbox.com/a1/50/1XQRWrDn_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_大语言模型_13"></p> 
<h4><a id="_188"></a>四、添加相关权限</h4> 
<p>因为需要用到网络数据，所以添加initent权限。</p> 
<p>在src/main/module.json5中modele中添加配置，然后按sync就可以。</p> 
<pre><code class="prism language-js">   <span class="token string">"requestPermissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
      <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"ohos.permission.INTERNET"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/0b/c3/iytzSNA5_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_HarmonyOS_14"></p> 
<h4><a id="_203"></a>五、定义数据模型</h4> 
<p>1.在ets目录下新建model文件夹</p> 
<p><img src="https://images2.imgbox.com/78/79/Jk2wOuNf_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_15"></p> 
<p>2.新建TS File</p> 
<p><img src="https://images2.imgbox.com/0a/e1/99XrvgHU_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_16"></p> 
<pre><code class="prism language-js"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">WenXinReturn</span> <span class="token punctuation">{<!-- --></span>
  id<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  object<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  created<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  result<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  is_truncated<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span>
  need_clear_history<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">false</span>
  finish_reason<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  usage<span class="token operator">:</span> Usage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Usage</span> <span class="token punctuation">{<!-- --></span>
  prompt_tokens<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">0</span>
  completion_tokens<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">0</span>
  total_tokens<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MsgOutput</span> <span class="token punctuation">{<!-- --></span>
  content<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MsgInput</span> <span class="token punctuation">{<!-- --></span>
  id<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  role<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
  content<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">""</span>
<span class="token punctuation">}</span>


</code></pre> 
<h4><a id="_245"></a>六、加载网络数据</h4> 
<h4><a id="_247"></a>接口说明</h4> 
<p>准备好数据，</p> 
<p>接口地址：<a href="https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions_pro" rel="nofollow"> https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions_pro</a></p> 
<p>请求方法：POST</p> 
<p>请求参数：</p> 
<h5><a id="Header_257"></a>Header参数</h5> 
<table><thead><tr><th>名称</th><th>值</th></tr></thead><tbody><tr><td>Content-Type</td><td>application/json</td></tr></tbody></table> 
<h5><a id="Query_263"></a>Query参数</h5> 
<table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>access_token</td><td>string</td><td>是</td><td>通过API Key和Secret Key获取的access_token，参考<a href="https://cloud.baidu.com/doc/WENXINWORKSHOP/s/Ilkkrb0i5" rel="nofollow"> Access Token获取</a></td></tr></tbody></table> 
<h5><a id="Body_269"></a>Body参数</h5> 
<table><thead><tr><th>名称</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td>messages</td><td>List(message)</td><td>是</td><td>聊天上下文信息。说明： （1）messages成员不能为空，1个成员表示单轮对话，多个成员表示多轮对话 （2）最后一个message为当前请求的信息，前面的message为历史对话信息 （3）必须为奇数个成员，成员中message的role必须依次为user(or function)、assistant （4）最后一个message的content长度（即此轮对话的问题）不能超过2400 token；如果messages中content总长度大于2400 token，系统会依次遗忘最早的历史会话，直到content的总长度不超过2400 token</td></tr><tr><td>temperature</td><td>float</td><td>否</td><td>说明： （1）较高的数值会使输出更加随机，而较低的数值会使其更加集中和确定 （2）默认0.95，范围 (0, 1.0]，不能为0 （3）建议该参数和top_p只设置1个 （4）建议top_p和temperature不要同时更改</td></tr><tr><td>top_p</td><td>float</td><td>否</td><td>说明： （1）影响输出文本的多样性，取值越大，生成文本的多样性越强 （2）默认0.8，取值范围 [0, 1.0] （3）建议该参数和temperature只设置1个 （4）建议top_p和temperature不要同时更改</td></tr><tr><td>penalty_score</td><td>float</td><td>否</td><td>通过对已生成的token增加惩罚，减少重复生成的现象。说明： （1）值越大表示惩罚越大 （2）默认1.0，取值范围：[1.0, 2.0]</td></tr><tr><td>stream</td><td>bool</td><td>否</td><td>是否以流式接口的形式返回数据，默认false</td></tr><tr><td>system</td><td>string</td><td>否</td><td>模型人设，主要用于人设设定，例如，你是xxx公司制作的AI助手，说明： （1）长度限制1024个字符 （2）如果使用functions参数，不支持设定人设system</td></tr><tr><td>user_id</td><td>string</td><td>否</td><td>表示最终用户的唯一标识符，可以监视和检测滥用行为，防止接口恶意调用</td></tr></tbody></table> 
<p>在这个WenXinTalk App中我们主要使用参数messages</p> 
<h4><a id="_283"></a>测试接口</h4> 
<p>测试如图所示</p> 
<p><img src="https://images2.imgbox.com/51/8b/1UW4Ilrg_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_HarmonyOS_17"></p> 
<p>返回数据</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"id"</span><span class="token operator">:</span> <span class="token string">"as-7gxj35bftb"</span><span class="token punctuation">,</span>
    <span class="token string">"object"</span><span class="token operator">:</span> <span class="token string">"chat.completion"</span><span class="token punctuation">,</span>
    <span class="token string">"created"</span><span class="token operator">:</span> <span class="token number">1705068746</span><span class="token punctuation">,</span>
    <span class="token string">"result"</span><span class="token operator">:</span> <span class="token string">"您好，我是文心一言，英文名是ERNIE Bot。我能够与人对话互动，回答问题，协助创作，高效便捷地帮助人们获取信息、知识和灵感。"</span><span class="token punctuation">,</span>
    <span class="token string">"is_truncated"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">"need_clear_history"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">"finish_reason"</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
    <span class="token string">"usage"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"prompt_tokens"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token string">"completion_tokens"</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
        <span class="token string">"total_tokens"</span><span class="token operator">:</span> <span class="token number">36</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="HTTP_309"></a>创建HTTP请求</h4> 
<p>1.导入http模块</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">'@ohos.net.http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> BusinessError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ohos.base'</span><span class="token punctuation">;</span>

</code></pre> 
<p>2.创建createHttp</p> 
<pre><code class="prism language-html">let httpRequest = http.createHttp();

</code></pre> 
<p>3.填写HTTP地址</p> 
<pre><code class="prism language-js">   httpRequest<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions_pro?access_token=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>access_token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        method<span class="token operator">:</span> http<span class="token punctuation">.</span>RequestMethod<span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span>
        header<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
          <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        extraData<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"messages"</span><span class="token operator">:</span> MsgArray
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

</code></pre> 
<p>4.对网络数据的处理</p> 
<pre><code class="prism language-js">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        
        <span class="token keyword">let</span> MsgReturn<span class="token operator">:</span> WenXinReturn <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MsgResult<span class="token punctuation">.</span>content <span class="token operator">=</span> MsgReturn<span class="token punctuation">.</span>result
        <span class="token keyword">let</span> MsgIn<span class="token operator">:</span> MsgInput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        MsgIn<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">"assistant"</span> <span class="token comment">//文心一言返回的结果中令role为"assistant"</span>
        MsgIn<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MsgResult<span class="token punctuation">.</span>content
        MsgIn<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//id作为MsgArray中的标识，用以后续循环渲染</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>MsgIn<span class="token punctuation">)</span> <span class="token comment">//将文心一言返回的结果同样作为参数加入到MsgArray的末尾</span>
        httpRequest<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error:'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpRequest<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'headersReceive'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 当该请求使用完毕时，调用destroy方法主动销毁</span>
        httpRequest<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

</code></pre> 
<p>完成以上配置以后</p> 
<p>5.在应用程序里测试网络请求</p> 
<pre><code class="prism language-js">  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"测试网络请求"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">httpData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>Center<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>如图所示</p> 
<p><img src="https://images2.imgbox.com/af/e1/bMVcsOwb_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_HarmonyOS_18"></p> 
<p>测试成功</p> 
<p>如果2300006错误码，请检查网络</p> 
<p><strong>如果201错误码，请检查module.json中网络权限是否配置！</strong></p> 
<h4><a id="UI_394"></a>七、UI</h4> 
<p>数据获取到之后，我们就剩在页面上显示了。</p> 
<h4><a id="_398"></a>首页</h4> 
<p>U I布局如图所示。</p> 
<pre><code class="prism language-js"> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">Scroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> MsgInput<span class="token punctuation">,</span> index<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token function">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"50%"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">"#95EC69"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                  <span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">"app.media.user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">objectFit</span><span class="token punctuation">(</span>ImageFit<span class="token punctuation">.</span>Fill<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> left<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">alignItems</span><span class="token punctuation">(</span>VerticalAlign<span class="token punctuation">.</span>Top<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>End<span class="token punctuation">)</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token string">"assistant"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">"app.media.iconAi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">objectFit</span><span class="token punctuation">(</span>ImageFit<span class="token punctuation">.</span>Fill<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> left<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                  <span class="token function">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"50%"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> right<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">alignItems</span><span class="token punctuation">(</span>VerticalAlign<span class="token punctuation">.</span>Top<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>Start<span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> MsgInput</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//循环渲染时，键值匹配规则使用item.id</span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> bottom<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">"#EDEDED"</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

      <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          placeholder<span class="token operator">:</span> <span class="token string">"来和文心一言聊天吧"</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> msg
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> bottom<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"提交"</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">let</span> MsgIn<span class="token operator">:</span> MsgInput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            MsgIn<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            MsgIn<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">"user"</span>
            MsgIn<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message
            <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>MsgIn<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">httpData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">""</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">"#F7F7F7"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>SpaceBetween<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/9d/3e/0Z3fD1uC_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_19"></p> 
<h4><a id="_495"></a>八、完整源码</h4> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> MsgInput<span class="token punctuation">,</span> MsgOutput<span class="token punctuation">,</span> WenXinReturn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../model/WexXinClass'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">'@ohos.net.http'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> BusinessError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@ohos.base'</span><span class="token punctuation">;</span>

@Entry
@Component
struct Index <span class="token punctuation">{<!-- --></span>
  @State message<span class="token operator">:</span> string <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>
  @State WXReturn<span class="token operator">:</span> WenXinReturn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WenXinReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  @State MsgResult<span class="token operator">:</span> MsgOutput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  @State MsgInputSample<span class="token operator">:</span> MsgInput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  @State MsgArray<span class="token operator">:</span> Array<span class="token operator">&lt;</span>MsgInput<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token function">aboutToAppear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"请介绍一下你自己"</span>
  <span class="token punctuation">}</span>

  <span class="token function">httpData</span><span class="token punctuation">(</span><span class="token parameter">MsgArray<span class="token operator">:</span> Array<span class="token operator">&lt;</span>MsgInput<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> httpRequest <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    httpRequest<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>
      <span class="token string">"https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions_pro?access_token=24.c8909e4016b8a223464e02f463f1d1ac.2592000.1707464478.282335-46746495"</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        method<span class="token operator">:</span> http<span class="token punctuation">.</span>RequestMethod<span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">,</span>
        header<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
          <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        extraData<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"messages"</span><span class="token operator">:</span> MsgArray
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token operator">:</span> BusinessError<span class="token punctuation">,</span> data<span class="token operator">:</span> http<span class="token punctuation">.</span>HttpResponse</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">let</span> MsgReturn<span class="token operator">:</span> WenXinReturn <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MsgResult<span class="token punctuation">.</span>content <span class="token operator">=</span> MsgReturn<span class="token punctuation">.</span>result
        <span class="token keyword">let</span> MsgIn<span class="token operator">:</span> MsgInput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        MsgIn<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">"assistant"</span>
        MsgIn<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MsgResult<span class="token punctuation">.</span>content
        MsgIn<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>MsgIn<span class="token punctuation">)</span>
        httpRequest<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error:'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpRequest<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'headersReceive'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 当该请求使用完毕时，调用destroy方法主动销毁</span>
        httpRequest<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">Scroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> MsgInput<span class="token punctuation">,</span> index<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token string">"user"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token function">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"50%"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">"#95EC69"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                  <span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">"app.media.user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">objectFit</span><span class="token punctuation">(</span>ImageFit<span class="token punctuation">.</span>Fill<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> left<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">alignItems</span><span class="token punctuation">(</span>VerticalAlign<span class="token punctuation">.</span>Top<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>End<span class="token punctuation">)</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token string">"assistant"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">"app.media.iconAi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">objectFit</span><span class="token punctuation">(</span>ImageFit<span class="token punctuation">.</span>Fill<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> left<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                  <span class="token function">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"50%"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token number">15.5</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> right<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">alignItems</span><span class="token punctuation">(</span>VerticalAlign<span class="token punctuation">.</span>Top<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>Start<span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span> MsgInput</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span> bottom<span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">"#EDEDED"</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

      <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          placeholder<span class="token operator">:</span> <span class="token string">"来和文心一言聊天吧"</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>White<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> msg
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> bottom<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> left<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"提交"</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">layoutWeight</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">let</span> MsgIn<span class="token operator">:</span> MsgInput <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MsgInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            MsgIn<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span>length<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            MsgIn<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">"user"</span>
            MsgIn<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message
            <span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>MsgIn<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">httpData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>MsgArray<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">""</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">"#F7F7F7"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>SpaceBetween<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="HarmonyOS_40_640"></a>在HarmonyOS 4.0设备上运行</h3> 
<p><strong>（主要介绍与在OpenHarmony中开发时的不同，相同点不在赘述）</strong></p> 
<h4><a id="_644"></a>运行环境</h4> 
<p>HUAWEI Mate 40 : HarmonyOS 4.0.0</p> 
<p>SDK：3.1.0（API 9）</p> 
<p>IDE：4.0.600</p> 
<h4><a id="_652"></a>一、在创建应用时选择第一个</h4> 
<p>如图</p> 
<p><img src="https://images2.imgbox.com/39/96/ooe8uiaF_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_文心一言_20"></p> 
<p><img src="https://images2.imgbox.com/1c/28/7s8hYiXi_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_HarmonyOS_21"></p> 
<h4><a id="_660"></a>二、签名</h4> 
<p>签名时选择support HarmonyOS</p> 
<p><img src="https://images2.imgbox.com/9b/68/gOx6erdo_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_大语言模型_22"></p> 
<p>需要登录华为账号后继续签名</p> 
<p><img src="https://images2.imgbox.com/2c/6e/3lkwYTcW_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_大语言模型_23"></p> 
<h4><a id="API_9_670"></a>三、注释掉源码中不支持API 9的部分</h4> 
<p><img src="https://images2.imgbox.com/75/25/n5kpGAqy_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_大语言模型_24"></p> 
<p>网络声明时直接使用即可</p> 
<p><img src="https://images2.imgbox.com/44/5e/r1yVbfiU_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_大语言模型_25"></p> 
<h4><a id="_678"></a>其余部分与在开发板上运行都相同，直接运行即可</h4> 
<p><img src="https://images2.imgbox.com/c8/71/rcAfZ1zv_o.png" alt="#星计划#OpenHarmony+文心一言对话APP WenXinTalk_OpenHarmony_26"></p> 
<h3><a id="_682"></a>九、总结</h3> 
<p>本文我们学习使用了基本组件的使用，网络请求以及状态管理，使用了ForEach循环渲染来构建对话界面。并且在HarmonyOS设备上成功运行，<strong>更多的鸿蒙开发实战学习，可以前往我的主页学习更多，下面分享鸿蒙的开发知识体系曲线图</strong>：</p> 
<p><img src="https://images2.imgbox.com/ea/45/0hcKsKsd_o.png" alt=""></p> 
<p><strong>鸿蒙OpenHarmony技术进阶包看主页</strong></p> 
<p><img src="https://images2.imgbox.com/03/36/yQO3RfmF_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/18/ab/ho6VHZdQ_o.png" alt=""></p> 
<h3><a id="FAQ_698"></a>十、FAQ</h3> 
<h4><a id="2300006__700"></a>2300006 域名解析失败</h4> 
<p><strong>错误信息</strong></p> 
<p>Couldn’t resolve host name.</p> 
<p><strong>错误描述</strong></p> 
<p>服务器的域名无法解析。</p> 
<p><strong>可能原因</strong></p> 
<p>1.传入的服务器的URL不正确。</p> 
<p>2.网络不通畅。</p> 
<p><strong>处理步骤</strong></p> 
<p>1.请检查输入的服务器的URL是否合理。</p> 
<p>2.请检查网络连接情况</p> 
<h4><a id="201_722"></a>201错误码</h4> 
<p>检查moudle.json5的网络权限是否添加</p> 
<pre><code class="prism language-js"><span class="token string">"requestPermissions"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"ohos.permission.INTERNET"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4dd0213da23a99696b5eeb1ba6a72427/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python GUI框架---- PySide6安装与使用 - 打包部署</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69472d862733c60e282f57f52681b10d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【跟着暴躁哥学 Python】 http.server：快速搭建你的本地服务器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>