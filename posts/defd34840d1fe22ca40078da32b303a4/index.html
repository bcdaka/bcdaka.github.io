<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>树莓派最新的安装，设置与教程，助你一次性设置完毕树莓派。(以macOS为例，包含windows和linux）史上最详细！一次性完成所有设置！ - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/defd34840d1fe22ca40078da32b303a4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="树莓派最新的安装，设置与教程，助你一次性设置完毕树莓派。(以macOS为例，包含windows和linux）史上最详细！一次性完成所有设置！">
  <meta property="og:description" content="前言 最近刚入手了树莓派，但是发现网上的资料总是松松散散，找寻起来很麻烦，正好自己完成了设置和安装，于是写下来作为回顾与教程。本文采用的是无屏幕无网线的方式，不过会介绍其他情况。不定期更新，敬请期待！第一次写csdn blog，很多地方有不足，而且略显啰嗦，请多见谅。
一.树莓派的简单介绍 树莓派，（英语：Raspberry Pi，简写为RPi，别名为RasPi / RPI） [1] 是为学习计算机编程教育而设计，只有信用卡大小的微型电脑，其系统基于Linux。随着Windows 10 IoT的发布，用户可以用上运行Windows的树莓派。
树莓派自问世以来，受众多计算机发烧友和创客的追捧，曾经一“派”难求。别看其外表“娇小”，内“芯”却很强大，视频、音频等功能通通皆有，可谓是“麻雀虽小，五脏俱全”。
（来自百度百科）
二.安装官方外壳与官方风扇： 将官方风扇插入官方壳上盖中，风扇正面朝下，然后将树莓派插入官方壳底座中，确保安装牢固，然后将风扇连线至gpio接口，同时将官方壳盖上。
详细安装视频：
​​​​​​​​​​​​​​
树莓派官方外壳与官方风扇安装视频
风扇接线图：红色线接4号口，黑色线接6号，蓝色线接gpio14。
如图：
三.树莓派系统的安装（以raspberry pi OS 64位为例） 树莓派系统包括很多，这里以64位的raspberry pi os64位为例，3b以上机型强烈推荐安装64位系统，以保证最佳性能。
1.需要准备的工具： 1.树莓派4B一块（运存任意）
2.读卡器一个
3.tf卡一张（建议在16G以上，作者用的是闪迪32GB卡）
4.电脑一个（macos和windows都可以，linux没试过，不过应该可以，本文采用macOS）
5.良好的网络条件
6.树莓派烧录器
2.烧录系统过程： 1. 下载烧录软件 首先去树莓派官方网站（Raspberry Pi OS – Raspberry Pi）下载对应系统的镜像烧录软件。
作者此处用的是MacBook，因此选择for macos版本下载。
2.选择合适的镜像文件 打开树莓派烧录器后，点击CHOOSE OS（选择操作系统）进入系统下载界面，选择你所需要下载的系统并确定。（64位的pi os需要点击raspbe pi os（other），选择raspberry pi os（64-bit））。作者在此选择的是pi os lite（64-bit）。
镜像文件分类介绍：
pi os （32bit/64-bit）：32位或64位的树莓派os系统，带桌面UI
pi os lite：树莓派os系统，不带图形化桌面。
pi os full：带有桌面和预装软件的系统
pi os legacy：基于buster的系统，一般不推荐选择此系统。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-15T12:10:47+08:00">
    <meta property="article:modified_time" content="2023-09-15T12:10:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">树莓派最新的安装，设置与教程，助你一次性设置完毕树莓派。(以macOS为例，包含windows和linux）史上最详细！一次性完成所有设置！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言  </h2> 
<p>最近刚入手了树莓派，但是发现网上的资料总是松松散散，找寻起来很麻烦，正好自己完成了设置和安装，于是写下来作为回顾与教程。本文采用的是无屏幕无网线的方式，不过会介绍其他情况。不定期更新，敬请期待！第一次写csdn blog，很多地方有不足，而且略显啰嗦，请多见谅。</p> 
<h2>一.树莓派的简单介绍</h2> 
<p>树莓派，（英语：Raspberry Pi，简写为RPi，别名为RasPi / RPI） [1] 是为学习<a href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA/140338?fromModule=lemma_inlink" rel="nofollow" title="计算机">计算机</a><a href="https://baike.baidu.com/item/%E7%BC%96%E7%A8%8B/139828?fromModule=lemma_inlink" rel="nofollow" title="编程">编程</a>教育而设计，只有信用卡大小的<a href="https://baike.baidu.com/item/%E5%BE%AE%E5%9E%8B%E7%94%B5%E8%84%91/9821341?fromModule=lemma_inlink" rel="nofollow" title="微型电脑">微型电脑</a>，其系统基于<a href="https://baike.baidu.com/item/Linux/27050?fromModule=lemma_inlink" rel="nofollow" title="Linux">Linux</a>。随着<a href="https://baike.baidu.com/item/Windows%2010/6877791?fromModule=lemma_inlink" rel="nofollow" title="Windows 10">Windows 10</a> IoT的发布，用户可以用上运行<a href="https://baike.baidu.com/item/Windows/165458?fromModule=lemma_inlink" rel="nofollow" title="Windows">Windows</a>的树莓派<strong>。</strong></p> 
<p>树莓派自问世以来，受众多计算机发烧友和<a href="https://baike.baidu.com/item/%E5%88%9B%E5%AE%A2/84167?fromModule=lemma_inlink" rel="nofollow" title="创客">创客</a>的追捧，曾经一“派”难求。别看其外表“娇小”，内“芯”却很强大，视频、音频等功能通通皆有，可谓是“麻雀虽小，五脏俱全”。</p> 
<p>（来自百度百科）</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/82/68/mJIIWPjk_o.png"></p> 
<h2>二.安装官方外壳与官方风扇：</h2> 
<p>将官方风扇插入官方壳上盖中，风扇正面朝下，然后将树莓派插入官方壳底座中，确保安装牢固，然后将风扇连线至gpio接口，同时将官方壳盖上。</p> 
<p>详细安装视频：</p> 
<p>​​​​​​​​​​​​​​</p> 
<div class="csdn-video-box"> 
 <iframe id="6bdp0Oax-1694612105344" frameborder="0" src="https://live.csdn.net/v/embed/328084" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>树莓派官方外壳与官方风扇安装视频</p> 
</div> 
<p></p> 
<p>风扇接线图：红色线接4号口，黑色线接6号，蓝色线接gpio14。</p> 
<p>如图：<img alt="" src="https://images2.imgbox.com/d9/ed/ZvmJyG9w_o.jpg"></p> 
<p></p> 
<h2>三.树莓派系统的安装（以raspberry pi OS 64位为例）</h2> 
<p>树莓派系统包括很多，这里以64位的raspberry pi os64位为例，3b以上机型强烈推荐安装64位系统，以保证最佳性能。</p> 
<h3>1.需要准备的工具：</h3> 
<p>1.树莓派4B一块（运存任意）</p> 
<p>2.读卡器一个</p> 
<p>3.tf卡一张（建议在16G以上，作者用的是闪迪32GB卡）</p> 
<p>4.电脑一个（macos和windows都可以，linux没试过，不过应该可以，本文采用macOS）</p> 
<p>5.良好的网络条件</p> 
<p>6.树莓派烧录器</p> 
<h3>2.烧录系统过程：</h3> 
<h4>1. 下载烧录软件</h4> 
<p>首先去树莓派官方网站（<a href="https://www.raspberrypi.com/software/" rel="nofollow" title="Raspberry Pi OS – Raspberry Pi">Raspberry Pi OS – Raspberry Pi</a>）下载对应系统的镜像烧录软件。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/54/9c/4A1acL8l_o.png">        </p> 
<p>作者此处用的是MacBook，因此选择for macos版本下载。</p> 
<h4>2.选择合适的镜像文件</h4> 
<p>打开树莓派烧录器后，点击CHOOSE OS（选择操作系统）进入系统下载界面，选择你所需要下载的系统并确定。（64位的pi os需要点击raspbe pi os（other），选择raspberry pi os（64-bit））。作者在此选择的是pi os lite（64-bit）。</p> 
<p>镜像文件分类介绍：</p> 
<p>pi os （32bit/64-bit）：32位或64位的树莓派os系统，带桌面UI</p> 
<p>pi os lite：树莓派os系统，不带图形化桌面。</p> 
<p>pi os full：带有桌面和预装软件的系统</p> 
<p>pi os legacy：基于buster的系统，一般不推荐选择此系统。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cd/2c/91QNXgRk_o.png"></p> 
<h4>3.选择存储介质</h4> 
<p>将tf卡插入读卡器，并将读卡器连接电脑，在树莓派烧录器中选择sd卡。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0a/30/YNWfmGX9_o.png"></p> 
<h4>4.设置基础系统</h4> 
<p>点击右下角的齿轮按钮，进入系统设置选项。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d7/58/sO18ny1Y_o.png"></p> 
<p>勾选设置主机名（方便查找ip）</p> 
<p>勾选开启ssh服务，并选择使用密码登陆。选择配置用户名与密码，并填入你的账户和密码（自己设置）。</p> 
<p>勾选配置Wi-Fi，并输入路由器的名称与密码（这一步是为了没网线没屏幕时能够连接网络），Wi-Fi国家选择CN（中国），默认GB（英国）好像也可以，没发现什么区别。</p> 
<p>勾选语言设置，选择aisa/shanghai，键盘布局默认us。</p> 
<p>点击保存完成设置。</p> 
<h4>5.烧录系统</h4> 
<p>点击烧录开始烧录，进行系统的烧录（macos可能会提示输入密码），静静等待烧录完成。</p> 
<p>直到出现烧录完成的界面，代表系统烧录成功，此时拔出tf卡。将树莓派连接至电源（推荐官方的5v3a电源，很好看），没有的话用大于5v2a的充电器与type-c线连接树莓派供电。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/76/3a/okv8gwmQ_o.png"></p> 
<h2>四.ssh连接系统与换源</h2> 
<h3>1.为什么要换源？</h3> 
<p>答：因为树莓派的官方源在国外，在国内访问速度慢或者无法访问，因此要进行换源设置。</p> 
<h3>2.如何连接电脑？</h3> 
<h4>1.有屏幕</h4> 
<p>有屏幕的树莓派，可以通过microhdmi转hdmi线连接至屏幕，或者通过其他方式连接，根据设备不同采用不同连接方式，具体可以咨询屏幕卖家。</p> 
<h4>2.无屏幕有网线</h4> 
<p>通过ssh连接，详情请往下看。</p> 
<h4>3.无屏幕无网线</h4> 
<p>这个就用到了我们一开始设置的Wi-Fi，当我们启动树莓派时，树莓派会自动连接至我们先前设定的Wi-Fi网络。通过ssh连接。</p> 
<p>ssh连接步骤（以苹果电脑为例）（windows电脑请下载：putty）:</p> 
<p>树莓派ip寻找办法：</p> 
<p>1.ping</p> 
<p>打开终端，在终端输入：</p> 
<pre><code class="language-bash">ping raspberrypi.local</code></pre> 
<p>ping+先前设置的主机名。</p> 
<p>返回的数据中的ip地址就是树莓派的ip地址。（本例中为192.168.252.253）</p> 
<p><img alt="" src="https://images2.imgbox.com/ac/ca/LgwuMpN1_o.png"></p> 
<p>2.nmap扫描</p> 
<p>如果有linux系统，如kali，ubuntu等，可以通过nmap来实现对ip的扫描。</p> 
<p>debian系统安装nmap：</p> 
<pre><code class="language-bash">sudo apt install nmap
</code></pre> 
<p>红帽系统安装：</p> 
<pre><code class="language-bash">sudo yum install nmap
</code></pre> 
<p>安装nmap完成后，输入</p> 
<pre><code class="language-bash">ip route</code></pre> 
<p>来查看当前Wi-Fi路由器的ip地址。</p> 
<p>指令将反馈几个条目，如下图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ba/13/UbM2X4mR_o.png"></p> 
<p>第一行的default via后显示的便是网关地址，也就是路由器地址。</p> 
<p>获取到路由器ip地址后，在终端中输入：</p> 
<pre><code class="language-bash">nmap -sP 192.168.252.1/24</code></pre> 
<p>nmap -sP 路由器ip/24</p> 
<p>扫描后会列出局域网网络下所有设备的ip，从中寻找树莓派ip地址。</p> 
<p>3.路由器寻找</p> 
<p>打开路由器的设置界面直接寻找ip地址</p> 
<p></p> 
<p>得到ip地址后，就可以进行ssh到树莓派了。</p> 
<p>在终端内，输入</p> 
<pre><code class="language-bash">ssh zekun@192.168.252.253</code></pre> 
<p>ssh + 用户名@树莓派ip地址</p> 
<p>第一次时询问是否继续，输入yes继续，然后输入密码即可进入树莓派。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e2/d3/J1e7jqMt_o.png"></p> 
<p>如图所示，已经成功连接上了树莓派。</p> 
<p>如要退出ssh，输入exit便可返回。</p> 
<h3>3.修改root密码并进入root模式</h3> 
<p>连接上树莓派后，在终端输入：</p> 
<pre><code class="language-bash">sudo passwd root</code></pre> 
<p>并按提示输入两遍密码，完成root密码设置。</p> 
<p>然后在终端输入</p> 
<pre><code class="language-bash">su root
</code></pre> 
<p>进入终端的root模式（在此模式下，不用输入sudo，下列代码的sudo都可以省略）</p> 
<p></p> 
<p></p> 
<h3>4.配置与更换国内源</h3> 
<p>树莓派64位的系统默认不带vim，因此我们需要使用nano来进行编辑。</p> 
<p>如果网速足够快也可以先安装vim，输入：</p> 
<pre><code class="language-bash">sudo apt update &amp;&amp; apt install vim
</code></pre> 
<p>来安装vim。</p> 
<h4>nano换源：</h4> 
<p>在终端输入：</p> 
<pre><code class="language-bash">sudo nano /etc/apt/sources.list
</code></pre> 
<p>打开sources.list界面，如图所示：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9f/fd/KNTdxqPV_o.png"></p> 
<p>将前三句代码用#注释掉（推荐注释掉，而不是直接删除，这样以后便于恢复）</p> 
<p>然后在最后添加如下代码：</p> 
<pre><code class="language-bash">deb https://mirrors.aliyun.com/debian/ bullseye main non-free contrib
deb-src https://mirrors.aliyun.com/debian/ bullseye main non-free contrib
deb https://mirrors.aliyun.com/debian-security/ bullseye-security main
deb-src https://mirrors.aliyun.com/debian-security/ bullseye-security main
deb https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib
deb-src https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib
deb https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib
deb-src https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib</code></pre> 
<p>这个是阿里云的源，也可以更换其他的源，此处只列举阿里云源，如有需要请自行寻找。</p> 
<p>添加完如下代码后，按ctrl（control）+o，提示是否保存，按回车键进行保存，然后按ctrl（control）+x退出编辑。</p> 
<p>然后输入：</p> 
<pre><code class="language-bash">sudo nano /etc/apt/sources.list.d/raspi.list</code></pre> 
<p>打开raspi.list，继续用#注释掉官方源，然后在最下方键入：</p> 
<pre><code class="language-bash">deb http://mirrors.aliyun.com/raspberrypi/ buster main ui</code></pre> 
<p>同上，按ctrl+o保存，ctrl+x退出，至此nano配置源完成。输入：</p> 
<pre><code class="language-bash">sudo apt update &amp;&amp; apt upgrade
</code></pre> 
<p>进行源和软件的更新。记得输入</p> 
<pre><code class="language-bash">sudo apt install vim</code></pre> 
<p>下载vim，以后我们配置都用vim来进行。</p> 
<h4>vim换源：</h4> 
<p>如果已经下好了vim，可以用vim进行换源操作。<br> 在终端内输入:</p> 
<pre><code class="language-bash">sudo vim /etc/apt/sources.list</code></pre> 
<p>打开sources.list，然后按i键进入insert模式（在左下角会显示insert），#注释掉官方源，输入阿里源</p> 
<pre><code class="language-bash">deb https://mirrors.aliyun.com/debian/ bullseye main non-free contrib
deb-src https://mirrors.aliyun.com/debian/ bullseye main non-free contrib
deb https://mirrors.aliyun.com/debian-security/ bullseye-security main
deb-src https://mirrors.aliyun.com/debian-security/ bullseye-security main
deb https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib
deb-src https://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib
deb https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib
deb-src https://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib</code></pre> 
<p>然后按esc键进入命令模式，输入：wq进行保存退出（：也要输入）</p> 
<p>然后输入：</p> 
<pre><code class="language-bash">sudo vim /etc/apt/sources.list.d/raspi.list</code></pre> 
<p>#注释掉官方源，然后输入阿里源：</p> 
<pre><code class="language-bash">deb http://mirrors.aliyun.com/raspberrypi/ buster main ui</code></pre> 
<p>同上方法保存退出，换源完毕。</p> 
<p>换源完毕后，输入：</p> 
<pre><code class="language-bash">sudo apt update &amp;&amp; apt upgrade
</code></pre> 
<p>进行源和软件更新。</p> 
<h2>五.启用ssh的root登陆与免密码登陆</h2> 
<p>在此章节，我们将进行ssh的修改，让其可以允许root登陆，避免了登陆之后在su root的麻烦，同时设置免密码登陆，让以后连接树莓派不必一次次的输密码。</p> 
<h3>1.配置ssh的root登陆选项</h3> 
<p>在终端内输入以下代码，打开ssh的配置文件。</p> 
<pre><code class="language-bash">vim /etc/ssh/sshd_config</code></pre> 
<p>找到以下的代码：（vim中，在命令模式下输入/你要寻找的内容 可以进行查找，如/settings，就是查找包含settings字符串的内容）</p> 
<pre><code class="language-bash">#PermitRootLogin prohibit-password</code></pre> 
<p>如下所示，修改PermitRootLogin字段的值为yes，如果前面有#号，请去掉。然后重启ssh服务：</p> 
<pre><code class="language-bash">sudo service ssh restart</code></pre> 
<p>然后就可以发现用root账户可以登陆ssh了。</p> 
<pre><code class="language-bash">ssh root@树莓派的ip地址</code></pre> 
<p>输入以上的字符便可以直接连接至树莓派的root账户。</p> 
<h3>2.配置ssh的免密码登陆(macOS与Linux，windows不知道能不能用）</h3> 
<p>退回到主机（你的电脑）终端，输入:</p> 
<pre><code class="language-bash">ssh-keygen</code></pre> 
<p>然后不用管他说什么，一路回车就行。指令完成后，输入</p> 
<p></p> 
<pre><code class="language-bash">cd ~/.ssh
ls</code></pre> 
<p>不出意外的话，会反馈4个文件（或者两个）</p> 
<p>id_rsa     id_rsa.pub.  known_hosts.   known_hosts.old</p> 
<p>后面两个可能有可能没有，只要有前两个就行。</p> 
<p>确认文件存在后，在终端内输入以下字符来讲密钥上传至树莓派。</p> 
<pre><code class="language-bash">ssh-copy-id -i id_rsa.pub root@192.168.252.253</code></pre> 
<p>ssh-copy-id -i id_rsa.pub 你的账户名(可以是root)@树莓派的ip地址,如上图，期间可能会让你输入账户密码。如果运行成功，会显示如下图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/69/a3/PiiqU9sG_o.png"></p> 
<p>我们只需要注意最后两行，with后面的字符串，就是你可以不用密码连接的指令。如我这里是ssh root@192.168.252.253,意思为以root账户登陆树莓派。</p> 
<h2>六.更换zsh终端并配置oh-my-zsh</h2> 
<p>到此我们算是基本设置的差不多了，不过你可能会注意到，通过ssh连接后，终端没有颜色，因此我们现在要给终端美化一下，让他可以高亮代码，自动补充。</p> 
<p>raspberry pi OS默认的终端是bash，而我们要换成zsh，zsh是一个非常强大的终端，但是配置很麻烦，因此我们需要oh-my-zsh来进行配置。</p> 
<p>oh-my-zsh介绍：</p> 
<ul><li><strong>Oh My Zsh</strong> 是一款社区驱动的命令行工具，正如它的主页上说的</li><li><strong>Oh My Zsh</strong> 是一种生活方式。它基于 <strong>zsh</strong> 命令行，提供了主题配置，插件机制，已经内置的便捷操作。给我们一种全新的方式使用命令行。</li><li><strong>Oh My Zsh</strong> 是基于 <strong>zsh</strong> 命令行的一个扩展工具集，提供了丰富的扩展功能。</li></ul> 
<h3>1.安装并切换zsh</h3> 
<p>现在我们来配置终端。pi os默认不带zsh，因此我们需要下载zsh，并切换至zsh。</p> 
<p>在终端内输入以下字符来查看当前所用的终端。</p> 
<pre><code class="language-bash">echo $SHELL</code></pre> 
<p>pi os 会反馈：/bin/bash，说明我们现在用的是bash终端。</p> 
<p>在终端输入来查看所有安装的终端。</p> 
<pre><code class="language-bash">cat /etc/shells</code></pre> 
<p>可以看到，我们没有安装zsh（/bin/zsh或者usr/bin/zsh)，因此现在开始安装zsh。</p> 
<p>在终端输入来进行安装。</p> 
<pre><code class="language-bash">sudo apt install zsh
</code></pre> 
<p>安装完成后，输入</p> 
<pre><code class="language-bash">chsh -s /bin/zsh</code></pre> 
<p>来将默认的终端切换为zsh，然后输入</p> 
<pre><code class="language-bash">reboot</code></pre> 
<p>重启树莓派。重启后再次输入</p> 
<pre><code class="language-bash">echo $SHELL
</code></pre> 
<p>来查看终端是否更换为zsh，如果反馈结果为/bin/zsh便代表更改成功，若不成功请再次重复操作。</p> 
<h3>2.安装oh-my-zsh</h3> 
<p>成功切换终端之后，现在就该安装oh-my-zsh了。但是因为服务器都在国外，你懂的（滑稽），因此我们选择国内镜像来进行安装。</p> 
<p>首先在<a href="https://gitee.com" rel="nofollow" title="Gitee - 企业级 DevOps 研发效能平台">Gitee - 企业级 DevOps 研发效能平台</a>注册一个账号，一会安装可能会用到。</p> 
<p>然后在树莓派终端输入</p> 
<pre><code class="language-bash">wget https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh
chmod +x install.sh
</code></pre> 
<p>第一行是下载install.sh文件，第二行是给予相关权限。</p> 
<p>如果直接执行install.sh，你会发现很慢或者直接卡住不动，因此我们还需要进行配置。</p> 
<pre><code class="language-bash">vim install.sh</code></pre> 
<p>输入上述指令打开install.sh，找到以下的部分（别忘了可以vim用/搜索）：</p> 
<pre><code class="language-bash">#Default settings
ZSH=${ZSH:-~/.oh-my-zsh}
REPO=${REPO:-ohmyzsh/ohmyzsh}
REMOTE=${REMOTE:-https://github.com/${REPO}.git}
BRANCH=${BRANCH:-master}
</code></pre> 
<p>将中间两行修改为下述字符，其他两行不要动。</p> 
<pre><code class="language-bash">REPO=${REPO:-mirrors/oh-my-zsh}
REMOTE=${REMOTE:-https://gitee.com/${REPO}.git}
</code></pre> 
<p>修改完成后输入：wq保存退出。然后执行</p> 
<pre><code class="language-bash">./install.sh</code></pre> 
<p>如果提示：git is not installed，则代表未安装git，需要我们先安装git，输入以下安装：</p> 
<pre><code class="language-bash">sudo apt install git
</code></pre> 
<p>安装完git后重新执行./install.sh命令。</p> 
<p>不出意外的话就会出现oh-my-zsh的彩色界面。</p> 
<p>至此，oh-my-zsh安装完成。</p> 
<h3>3.配置oh-my-zsh</h3> 
<p>虽然安装完成了，但是总感觉不够炫酷，所以我们来配置ohmyzsh的界面让他更炫酷。</p> 
<p>首先我们先对主题进行配置，输入</p> 
<pre><code class="language-bash">vim ~/.zshrc</code></pre> 
<p>打开zsh的配置文件，找到ZSH_THEME="robbyrussell"，这个是主题设置，这里推荐ys主题，当然你也可以更改其他主题，使用如下的命令，可以列出所有主题。</p> 
<pre><code class="language-bash"> ls ~/.oh-my-zsh/themes
</code></pre> 
<p>这里以ys主题为例，再次vim ~./zshrc打开配置文件，将ZSH_THEME="robbyrussell"改为ZSH_THEME="ys"，然后：wq保存退出</p> 
<p>ps：你也可以将ZSH_THEME设置为random，这表示每次打开终端，都会随机应用主题，每次主题各不同。</p> 
<p>配置完成后，输入</p> 
<pre><code class="language-bash">source ~/.zshrc</code></pre> 
<p>重新加载终端配置，成功的话终端会发生变化。</p> 
<h3>4.安装插件</h3> 
<p>虽然现在主题很炫酷了，你可以还是会注意到，终端缺少自动补全，代码高亮等功能，因此我们需要安装插件来实现。</p> 
<p>插件1:zsh-syntax-highlighting</p> 
<p>这是一个为 shell zsh 提供语法高亮显示的插件。当命令在 <code>zsh</code> 提示符下输入到交互式终端时，它可以突出显示命令。这有助于在运行命令之前检查命令，特别是捕获语法错误。当你输入的指令错误或者不存在时，他是红色，而合法的命令会变成绿色。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d1/39/KwfX4IqN_o.png"></p> 
<p>在终端输入</p> 
<pre><code class="language-bash">git clone https://gitee.com/Annihilater/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting
</code></pre> 
<p>进行安装，安装完成后先不用管，我们接下来进行下一个插件的安装。</p> 
<p></p> 
<p>插件2:zsh-autosuggestions</p> 
<p>这<em>一款自动提示命令的插件</em>,插件会从之前的历史命令中选取匹配度最高的一条命令置于待选区 当我们频繁执行一种命令的时候,这个插件能节省我们很多的输入时间。当我们输入一个曾经用过的指令时，会弹出来灰色的提示，如果此时按下方向键右，就可以自动补全。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/13/33/lnTBgYYV_o.png"></p> 
<p>在终端输入</p> 
<pre><code>git clone https://gitee.com/phpxxo/zsh-autosuggestions.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions</code></pre> 
<p>安装插件，完成后依旧先不管，继续安装下一个插件。</p> 
<p></p> 
<p>插件3:autojump</p> 
<p>它的用法是输入 <code>j 目录名</code> 或 <code>j 目录名包含的字符</code>（这个目录必须是之前 cd 访问过的），就可直接切换到相应的目录。不用再各种<code>cd</code>啦～</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/75/18/1PlGdzA9_o.jpg"></p> 
<p>在终端输入（终于不用git clone了！）：</p> 
<pre><code class="language-bash">sudo apt install autojump
</code></pre> 
<p>等待其安装结束。</p> 
<p>至此，推荐的插件安装完成，现在我们来激活这些插件，我们先</p> 
<pre><code class="language-bash">vim ~/.zshrc
</code></pre> 
<p>打开zsh的配置文档，然后在其中寻找(别忘了vim的/搜索功能哦）:</p> 
<pre><code class="language-bash">plugins=(git)</code></pre> 
<p>将其改为：</p> 
<pre><code class="language-bash">plugins=(git zsh-autosuggestions zsh-syntax-highlighting autojump)</code></pre> 
<p>:wq保存退出。</p> 
<p>然后我们需要重新载入配置文件</p> 
<pre><code class="language-bash">source ~/.zshrc</code></pre> 
<p>载入完成后便可使用插件功能。</p> 
<p></p> 
<h2>七.VNC的配置（可以连接图形化界面）</h2> 
<p>我相信很多同学看到现在，对命令行指令已经是很不耐烦了，没有屏幕的同学都期待着快点用到图形化界面，那么接下来就是配置vnc使其可以连接图形化界面咯！</p> 
<h3>1.vnc介绍</h3> 
<p>VNC是Virtual Network Computing的缩写，也叫虚拟网络计算，是一种通过远程网络控制其他计算机桌面的软件。VNC软件采用客户端/服务器模式工作，服务器端将屏幕内容传输到客户端，并等待接收客户端的鼠标和键盘输入。它可以实现多平台之间的远程桌面共享，并且跨平台兼容性很强，能够在不同的操作系统平台之间无缝连接。</p> 
<h3>2.下载vnc软件</h3> 
<p>mac电脑不知道为什么，如果使用自带的vnc软件的话，会提示版本不兼容，不确定是不是只有我的mac有这个问题。如果大家想试一下的话，我讲macOS原生vnc的连接方法告诉大家：</p> 
<p>首先打开safari浏览器，直接在网址栏（不是搜索框）里输入以下字段便可直接连接。</p> 
<pre><code class="language-bash">vnc://192.168.252.253
</code></pre> 
<p>即 vnc://你的树莓派ip地址</p> 
<p>不过我们在此下载第三方软件，VNC-Viewer</p> 
<p>首先打开<a href="https://www.realvnc.com/en/connect/download/viewer/" rel="nofollow" title="Download VNC Viewer | VNC® Connect">Download VNC Viewer | VNC® Connect</a> 选择对应的版本进行下载，这一点我估计大家都会，就不赘述了。</p> 
<h3>3.打开树莓派的VNC功能</h3> 
<p>在终端内输入：</p> 
<pre><code class="language-bash">sudo raspi-config
</code></pre> 
<p>打开树莓派的configurator，他会提示你设置不能用默认用户，因此需要把pi改成你的用户名.</p> 
<p>这会打开一个灰色的图形界面</p> 
<p><img alt="" src="https://images2.imgbox.com/10/50/2mdaoJhy_o.png"></p> 
<p>我们点击Interface Options-VNC-yes</p> 
<p>系统便会自动开始安装vnc环境</p> 
<p>安装完毕后按tab键，然后选择finish关闭设置</p> 
<p>然后在终端输入</p> 
<pre><code class="language-bash">vncserver</code></pre> 
<p>这时会出现一大段文字，我们不需要管，我们只管最后一行就行。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a9/ce/NKg91XyF_o.png"></p> 
<p>最后这一行显示raspberrypi：1 （192.168.252.253:1）就是我们用vnc viewer要连接的地址，其中：1表示端口。</p> 
<p>然后我们输入reboot将树莓派重启。</p> 
<h3>4.连接vnc</h3> 
<p>我们打开之前下载的vnc-viewer，在上方的输入框中输入刚才得到的ip(不用输入：1），回车</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a4/42/BSiOg3qw_o.png"></p> 
<p>连接过程中需要确认连接，选择continue就行，也可能会要你输入帐号密码，输入你的账户密码即可访问。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/43/53/Wyx9kxlJ_o.png"></p> 
<p>如图，我们成功连接上了树莓派的图形界面。（我选择的是pi OS lite，不包含图形界面，因此显示这条信息，如果你选择的是正常的树莓派系统，就会显示图形界面）</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/08/a1/fePi3aEA_o.jpg"></p> 
<p>如果有图形界面连接后会是这样：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/27/6b/19IhUXF8_o.png"></p> 
<p>至此，我们成功开启并配置了vnc服务，以后可以不用hdmi线就可以快乐的玩耍啦！</p> 
<p></p> 
<h2>八.树莓派设置中文,地区和时间</h2> 
<p>很多同学可能注意到，图形界面虽然可以进去，但是里面都是英文，很不方便，而且时区的设置也不对，于是就想进行设置，下面我来带大家设置。</p> 
<h3>1.设置时区</h3> 
<p>首先打开树莓派的configurator，输入</p> 
<pre><code class="language-bash">sudo raspi-config</code></pre> 
<p>即可打开。</p> 
<p>然后选择Localisation Options Configure language and regional settings</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/70/af/UefRo4Mn_o.png"></p> 
<p>选择timezone（时区设置），然后选择Asia（亚洲），选择shanghai（上海），时区就设置在上海啦（不知道为什么没有北京时间）。在终端输入</p> 
<pre><code class="language-bash">timedatectl</code></pre> 
<p>来查看时间（适用于没有图形界面的系统），如果和北京时间一致就说明设置完成啦！</p> 
<h3>2.设置中文</h3> 
<p>在configurator的界面里，继续选择Localisation Options Configure language and regional settings，然后点击locale进入地区设置。</p> 
<p>找到en_GB.UTF-8 UTF-8，按空格取消勾选，然后勾选“zh_CN GB2312”、“zh_CN.CB18030 GB18030”、“zh_CN.GBK GBK” 、“zh_CN.UTF-8 UTF-8”，并按tab键选择ok，按回车进入下一步设置。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d9/07/sfX3njcT_o.png"></p> 
<p>在这个界面，选择zh_CN.UTF-8 UTF-8（选这个不会乱码），然后确定，重启树莓派，这样中文就设置好啦。</p> 
<p>有可能会遇到乱码问题，如果遇到乱码问题，就安装字体库：</p> 
<pre><code class="language-bash">sudo apt install ttf-wqy-zenhei</code></pre> 
<p>reboot重启树莓派完成设置。</p> 
<h3>3.设置中文输入法</h3> 
<p>安装中文输入法：</p> 
<pre><code class="language-bash">sudo apt install scim-pinyin</code></pre> 
<p>reboot重启完成设置。</p> 
<p>#输入法切换是ctrl+空格</p> 
<p></p> 
<h2>九.关于raspi-config的一些设置</h2> 
<h3>1.拓展空间</h3> 
<p>在安装完系统后，可以看到，根目录的大小远远低于使用的存储卡，所以要使用这个选项来扩展文件系统，将树莓派的更分区扩展到整个SD卡。</p> 
<p>首先还是老样子，</p> 
<pre><code class="language-bash">sudo rasp-config</code></pre> 
<p>进入设置界面，然后选择advanced options，选择expand filesystem，回车确定，最后重启来变更设置。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0d/36/lcmT2RjZ_o.png"></p> 
<h3>2.设置温度控制风扇</h3> 
<p>我们买的官方的小风扇或者自己装的一些小风扇，总是24小时不间断的运行，既耗电又乱，我们来设置一下，到了指定温度的时候才会开启风扇。</p> 
<p>首先还是打开熟悉的灰色界面，选择Performance Options，里面有个Fan，点进去进行设置。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/28/0e/MEjZo8Ji_o.png"></p> 
<p>你是否开启风扇温度控制？yes</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/13/ed/tEaknbl0_o.png"></p> 
<p>你的风扇连接的哪个gpio接口？</p> 
<p>如果是按照我的教程来安装的话，就是默认14，如果接入到了其他的gpio口，根据以下的gpio引脚图自行判断。</p> 
<p><img alt="" src="https://images2.imgbox.com/e5/f9/xlGa8zCx_o.gif"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9c/17/JyGsKQ4p_o.png"></p> 
<p>什么温度时，风扇开启？范围是60-120之间，根据个人喜好和需求修改，我不希望树莓派太热，所以我选择的60度，如果不希望风扇老转，可以改到75度左右。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c7/37/Z3trWGEJ_o.png"></p> 
<p>引脚14会在60度开启。设置完成，重启就可以应用了，如果温度不高，重启就会发现树莓派的风扇没声音了。（好耶！妈妈再也不用担心晚上睡觉风扇一直转吵醒舍友啦！）</p> 
<h3>3.升级raspi-config</h3> 
<p>config那么有用，当然要保持最新状态，以有更多的功能可以体验。</p> 
<p>打开熟悉的灰色面板，选择update就可以一键升级。</p> 
<p>当然，如果平时有apt update &amp;&amp; apt upgrade的好习惯，那么config也会保持最新状态。</p> 
<h3>4.其他设置</h3> 
<p>关于SPI,I2C,SP,GPIO等串口引脚的使用和开启，还有外接屏幕摄像头暂时不讲，以后写项目的时候会一点点讲。目前这些设置完成之后就没什么其他可以设置的了。保存重启，raspi-config的任务就完成啦，然后就可以进行下一章节的学习啦。</p> 
<h2>五.分辨率的设置</h2> 
<p>新版本的raspi-config去掉了分辨率的修改，我们只能用手动设置的方式来设置分辨率了。</p> 
<p>首先打开config文件：</p> 
<pre><code class="language-bash">sudo vim /boot/config.txt</code></pre> 
<p>在里面找到以下的字符串：</p> 
<pre><code class="language-bash">#framebuffer_width=1280
#framebuffer_height=720 
hdmi_force_hotplug=1
hdmi_group=1
hdmi_mode=1
</code></pre> 
<p>将这些修改如下（记得去掉#）：</p> 
<pre><code class="language-bash">framebuffer_width=1920   # 你要设置的分辨率(这里是1920*1080）
framebuffer_height=1080
hdmi_force_hotplug=1     # 关闭hdmi的检测
hdmi_group=1
hdmi_mode=5
hdmi_ignore_edit=0xa5000080        # 这行要手动添加
# “hdmi_ignore_edid”，是命令树莓派不检测HDMI设备的任何信息，只按照我们指定的分辨率输出。</code></pre> 
<p>:wq保存后，reboot重启变更设定。</p> 
<h2>六.树莓派4b的超频</h2> 
<p>众所周知，树莓派出场时的设置是很保守的，而其搭载的cpu有极大的超频空间，为了发挥出更多的性能，我们可以对其进行超频。</p> 
<h3>1.cpu频率测试</h3> 
<pre><code class="language-bash">sudo cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_max_freq  #最大频率
sudo cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_min_freq  #最小频率
sudo cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq  #当前频率</code></pre> 
<p>或</p> 
<pre><code class="language-bash">lscpu    #查看cpu详细信息，但是无法查看当前频率</code></pre> 
<h3>2.超频</h3> 
<p>下面我们对其进行超频的设置：</p> 
<p>在终端内打开config文件:</p> 
<pre><code class="language-bash">vim /boot/config.txt</code></pre> 
<p>根据情况添加如下代码：</p> 
<pre><code class="language-bash">#平衡模式，cpu温度在40-55℃
#over_voltage=6
#arm_freq=1800
#gpu_freq=600

#性能模式，cpu温度在55-65℃，需要加风扇散热
#over_voltage=6
#arm_freq=2000
#gpu_freq=700

#野兽模式，cpu温度最低70℃，必需加风扇散热，否则烧板，下文有亲测散热方案，最高压在60℃左右
#over_voltage=6
#arm_freq=2200
#gpu_freq=750

#数值不唯一，根据个人情况设定，此数值仅供参考
#不建议超频过于2000，若散热不好，有烧板子的风险
#超频散热一定要跟上
#over_voltage 表示增加电压，建议为6
#arm_freq cpu频率，单位为mhz
#gpu_freq gpu频率，单位为mhz
#树莓派可以超频 GPU，但官方人员说作用很小 </code></pre> 
<p>不超频也足以应对大多数场景，且超频后保修失效，请谨慎超频。</p> 
<h3>3.安装监控程序(pi-dashboard)</h3> 
<h4>1.<strong>安装php7.4和nginx</strong></h4> 
<pre><code class="language-bash">sudo apt install nginx php7.4-fpm php7.4-cli php7.4-curl php7.4-gd php7.4-cgi vim -y
sudo systemctl restart nginx php7.4-fpm</code></pre> 
<h4>2.<strong>.配置nginx</strong></h4> 
<p>如果安装成功，可通过 http://树莓派IP 访问到 Nginx 的默认页。Nginx 的根目录在 /var/www/html。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/20/a5/jiC0TCWD_o.png"></p> 
<p></p> 
<p>进行以下操作来让 Nginx 能处理 PHP。</p> 
<pre><code class="language-bash">sudo vim /etc/nginx/sites-available/default</code></pre> 
<p>将其中的如下内容</p> 
<pre><code class="language-bash">location / {
 # First attempt to serve request as file, then
 # as directory, then fall back to displaying a 404.
 try_files $uri $uri/ =404;
 }
</code></pre> 
<p>替换为</p> 
<pre><code class="language-bash">location / {
index  index.html index.htm index.php default.html default.htm default.php;
}
location ~\.php$ {
fastcgi_pass unix:/run/php/php7.4-fpm.sock;
#fastcgi_pass 127.0.0.1:9000;
fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
include fastcgi_params;
}</code></pre> 
<p>：wq保存退出</p> 
<p>在此可以先检查一下Nginx的配置是否正常</p> 
<pre><code class="language-bash">nginx -t</code></pre> 
<p>出现下列文字代表配置正常：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f6/ea/3MHMLazy_o.png"><br> ​​​​​​​</p> 
<p>然后重启服务</p> 
<pre><code class="language-bash">sudo systemctl restart nginx </code></pre> 
<h4>3.<strong>下载pi-dashboard文件</strong></h4> 
<pre><code class="language-bash">cd /var/www/html
sudo git clone https://gitee.com/team_space/pi-dashboard.git
sudo chown -R www-data pi-dashboard</code></pre> 
<h3>4.压力测试（s-tui)</h3> 
<p>压力测试可以知道cpu的压力情况，超频后进行测试有助于减少烧板概率的发生。</p> 
<p>首先安装s-tui</p> 
<pre><code class="language-bash">sudo apt install s-tui &amp;&amp; apt install stress s-tui</code></pre> 
<p>安装完成后运行</p> 
<pre><code class="language-bash">s-tui
</code></pre> 
<p>选择stress，按空格键开始</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c2/be/eDQflhJs_o.jpg"></p> 
<h3>5.检测性能指标</h3> 
<p>在浏览器输入下列命令进入dashboard来检测性能指标。</p> 
<pre><code class="language-bash">树莓派的ip地址/pi-dashboard
#如 192.168.252.253/pi-dashboard
</code></pre> 
<h2>七.常用检测命令</h2> 
<pre><code class="language-bash">top    #可以获取当前Cpu使用状态、RAM使用率等信息，但是只能查看，无法长时间运行时保存下来
df    #可以获得文件系统占用的详情
vcgencmd measure_temp    #检测cpu的温度

#其他常用的慢慢补充，目前就知道这三个</code></pre> 
<h2>八.WIFI的管理与切换</h2> 
<h3 style="background-color:transparent;">1.有图形化界面的设置</h3> 
<p>带有图形化桌面的树莓派是有专门的图形化Wi-Fi管理系统，一般在右上角，可以和windows或者mac那样轻松设置Wi-Fi.</p> 
<h3>2.没有图形化界面的设置</h3> 
<h4>1.通过配置文件修改(简化方案，如果想深入请自行百度）</h4> 
<p>如果没有图形化界面，可以通过配置文件来进行wifi的修改和添加（如果连接后就不进行Wi-Fi的扫描等操作可以用这个方案）。</p> 
<p>操作如下：</p> 
<p>首先安装wpasupplicant</p> 
<pre><code>sudo apt install wpasupplicant
#目前版本的树莓派系统默认就包含了这个软件，我们在烧录镜像时就是用的这个软件进行的连接.</code></pre> 
<p>安装完成后，就可以配置wifi文件啦，输入以下代码</p> 
<pre><code>sudo vim /etc/wpa_supplicant/wpa_supplicant.conf</code></pre> 
<p>打开配置表。</p> 
<p>如果没有内容的话，添加以下代码：</p> 
<pre><code class="language-bash">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=CN
network={
    ssid="WiFi网络名称"
    scan_ssid=1    #如果Wi-Fi是隐藏的需要这句，不隐藏可以去掉
    psk="密码"    #密码需要加双引号
    priority=1    #wifi优先级，数值越高越优先
}</code></pre> 
<p></p> 
<p>不过我们烧录镜像时填入过一次Wi-Fi，正常的话应该是会显示一些信息，如下图所示</p> 
<p><img alt="" src="https://images2.imgbox.com/a7/69/XZSj1Ola_o.png"><br> 我们要配置的就是network后面的那一大长串,如果不需要连接默认的Wi-Fi时可以直接修改，如果想要配置一个新的Wi-Fi的话。可以添加如下代码。（ssid代表你的wifi名称，psk是你的Wi-Fi密码，输入你的Wi-Fi密码就好，我这里采用了加密密码模式，直接输入原始密码是一样的）</p> 
<p>可以添加如下代码：</p> 
<pre><code class="language-bash">network={
    ssid="WiFi网络名称"
    scan_ssid=1    #如果Wi-Fi名是隐藏的，这条必不可少，如果不隐藏可以去掉这句 
    psk="密码"    #如果使用原始密码记得加“”，用加密密码不需要加
    priority=1    #wifi优先级，数值越大越优先
}</code></pre> 
<p>这样就配置好了一个新的Wi-Fi连接。</p> 
<p>接下来我们应用此配置。如果第一次下载这个软件，输入这个启动服务。</p> 
<pre><code class="language-bash">wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf</code></pre> 
<p>然后我们重新启动网络服务：</p> 
<pre><code class="language-bash">service dhclient restart</code></pre> 
<p>不出意外的话，就配置好了。</p> 
<p>如果已经安装过软件了，可能会报错，我们直接reboot重启就能应用新的配置。（其实也有其他办法，但是这里不深入讨论）</p> 
<p>虽然这个wpa软件很强大，但是用法稍显复杂，而且对新手并不友好，因此我更推荐以下的方案。</p> 
<h3 style="background-color:transparent;">2.通过network-manager进行配置(推荐)</h3> 
<p>network-manager是一个很强大的软件，可以支持图形化配置Wi-Fi等操作，适合我们频繁切换Wi-Fi时候使用。</p> 
<p>但是树莓派默认是不开启nm软件的，如果输入nmcli会提示nm未运行，如果有屏幕或者网线的好说，但是如果我们一开始就用的Wi-Fi的ssh，如果直接开启nm的话，会导致网络中断，而切换的nm未配置，并不会自动连接Wi-Fi，导致ssh无法进行，从而卡死在这一步无法继续。</p> 
<p></p> 
<p>经过一整天的尝试，我找到了办法，现在教给大家。</p> 
<p>首先介绍一款新的应用：Netplan</p> 
<p>Netplan是一个在linux系统上轻松配置网络的实用工具。您只需创建所需网络接口的<a href="https://so.csdn.net/so/search?q=YAML&amp;spm=1001.2101.3001.7020" title="YAML">YAML</a>描述以及每个接口应配置的功能。根据此描述，Netplan将为您选择的渲染器工具生成所有必要的配置。即可以通过配置netplan，来配置nm的网络连接并切换至nm。</p> 
<p>树莓派默认是不带有Netplan的，需要我们自行安装。</p> 
<pre><code class="hljs">sudo apt install netplan.io
</code></pre> 
<p>安装完成后，netplan就已经启用了。为了更好的使用，我们还需要安装wireless-tools和wpasupplicant，不过这两个树莓派里默认安装，如果没有安装请安装：</p> 
<pre><code class="hljs">apt install wpasupplicant wireless-tools</code></pre> 
<p>安装完成后，我们使用ifconfig -a来查看wifi的硬件名称，一般情况下都是wlan0。如果没有显示无线网卡，可能是没有启动，输入</p> 
<pre><code class="hljs">sudo ifconfig wlan0 up</code></pre> 
<p>来启动wlan0.</p> 
<p>然后我们可以进行Wi-Fi的扫描（如果知道Wi-Fi名字可以略过此步骤）</p> 
<pre><code class="hljs">sudo iwlist wlan0 scan | grep ESSID #这个命令是仅查看Wi-Fi的名称
                                    #记得将wlan0改为你自己的Wi-Fi网卡</code></pre> 
<p>scan时会有一段时间的卡顿，请耐心等待，不要关闭。</p> 
<p>scan完成后，就会列出很多的Wi-Fi名称，从中选取你需要的。</p> 
<p>然后我们开始进行netplan的配置。</p> 
<pre><code class="hljs">cd /etc/netplan/
ls
#这里会列出配置文件，不过树莓派大概率是没有的，需要我们自己建立。</code></pre> 
<p>现在我们自己建立一个配置文件：</p> 
<pre><code class="hljs">sudo vim /etc/netplan/01-netcgf.yaml    #01表示最高优先级，多个文件时优先运行01文件</code></pre> 
<p>然后在打开的空白界面内输入：</p> 
<pre><code class="hljs">network:
  version: 2    #版本号，目前为2
  renderer: NetworkManager    #选择所要使用的管理程序，这里我们选择nm

  ethernets:    #这些抄上去就行，不用管
    eth0:
      dhcp4: true
      optional: true

  wifis:    #在这里开始配置Wi-Fi了
    wlan0:    #你的网卡名
      dhcp4: true    #自动分配ip地址
      access-points:
        "你的wifi名字":    #在双引号中用自己的Wi-Fi名称替换掉文字
          password: "你的Wi-Fi密码"    #在双引号中用Wi-Fi密码替换文字</code></pre> 
<p>然后我们的配置就结束了，现在先不着急立刻运行，先检查一下配置文件是否正确。</p> 
<pre><code class="hljs">sudo netplan try</code></pre> 
<p>当返回如下所示时，代表配置文件无错误。(也会等待一小段时间，不要关闭）<img alt="" src="https://images2.imgbox.com/42/fe/RfLnGrpg_o.png"></p> 
<p>完成检测后，按回车进行确认,出现Configuration accepted.代表配置完成。</p> 
<p>然后我们重启服务，并切换至nm.</p> 
<pre><code class="hljs">sudo netplan generate  # 生成 renderers 所需的配置文件
sudo netplan apply  # 应用 netplan 新配置，将自动重启 network-manager 使修改生效</code></pre> 
<p>输入这些命令后，会短暂卡顿一会，因为网络断开，只需要静静等几分钟，等待它自动重启就可以。重启后会自动连接至ssh，如果没有，就再次用ssh连接一次。连接完成后就ok了。</p> 
<p>我们试试输入以下字母查看nm是不是运行了：</p> 
<pre><code class="hljs">nmcli network    #运行一下，如果显示了enable为正常。
#此命令也可以写作 nmcli n</code></pre> 
<p>现在我们便已经成功的切换至了nm软件。</p> 
<p>我们添加使其开机自动运行。</p> 
<pre><code class="hljs">sudo systemctl enable NetworkManager.service</code></pre> 
<p>接下来介绍几个基本命令</p> 
<pre><code class="hljs">nmcli network connectivity    #网络连接状态
    #网络连接状态的五种输出结果： 
        #full:网络正常连接 
        #limited：以连接网络，但无法上网 
        #portal：以连接网络，但需要认证登录后才能上网 
        #none：没有连网 
        #unknown：无法识别网络


nmcli connection reload        #重置连接
                            </code></pre> 
<p>因为nm内置了图形化界面，所以我们就介绍这些，平时用图形化界面来设置，当然，如果你对命令行更喜欢，可以自行百度nmcli的基本命令。</p> 
<p>输入一下命令进入图形化界面：</p> 
<pre><code class="hljs">nmtui</code></pre> 
<p>第一个是设置，第二个是连接Wi-Fi，第三个是设置主机名。</p> 
<p>如果没有屏幕的话，选择第二个Wi-Fi连接，选中后回车会卡死，因为连接新的Wi-Fi时旧Wi-Fi会断开从而导致ssh中断。如果不小心按到了，直接拔掉树莓派电源进行重启。</p> 
<p>但是即使没有屏幕和网线，如果我们还是想切换Wi-Fi怎么办呢？方法很简单</p> 
<p>首先进去第二个选项，在Wi-Fi列表内找到你想要的Wi-Fi，记下名字（不要回车）</p> 
<p>然后回到刚才的界面，选择第一个选项，选择add（添加），在弹出的窗口里选择Wi-Fi，然后进入配置，第一个是文件名，为了方便区分最好输入Wi-Fi名，Device里填入wlan0（你的网卡名），然后在下面的ssid里输入你的Wi-Fi名字（不要有错），没有密码的话直接选择最下面的ok保存，如果有密码，选择security，再打开的窗口内选择你的Wi-Fi的加密方式，目前家用的都是WPA&amp;WPA2 Persona，少数更高级的Wi-Fi支持WPA3 Personal，根据你的Wi-Fi来自行选择。然后在password选项里输入密码，然后选择最下方的ok保存。这样我们就配置好了文件。切换Wi-Fi的话，退回到一开始的界面，然后选择你想切换的Wi-Fi，回车。（如果切换不同Wi-Fi会卡死，这是正常的，因为树莓派连接至了另一个Wi-Fi的局域网，这时候你只要将电脑连接至新的Wi-Fi，然后用之前讲过的办法来查找ip并连接树莓派）。由此大功告成！</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c4900d7ec27f3d2e05e8b8933853b942/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springmvc中WebMvcConfigurationSupport中addInterceptor使用详解及方法详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53e4b2125c03a54b4503db80f666cfeb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决 Axios 跨域问题，轻松实现接口调用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>