<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ElasticSearch常见用法，看这一篇就够了 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ba86e72b7e052d7443e1ec812ac06a6f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="ElasticSearch常见用法，看这一篇就够了">
  <meta property="og:description" content="2024送书福利正式起航 关注「哪吒编程」，提升Java技能 文末送3本《一本书讲透Elasticsearch：原理、进阶与工程实践》 大家好，我是哪吒。
ElasticSearch是一款由Java开发的开源搜索引擎，它以其出色的实时搜索、稳定可靠、快速安装和方便使用的特性，在Java开发社区中赢得了广泛的认可和应用。
Elasticsearch为Java开发者提供了一个强大的搜索解决方案。无论是对于小型项目还是大型企业级应用，Elasticsearch都能提供高效的搜索功能，帮助开发者快速检索和处理大量数据。通过其简单的RESTful API接口，开发者可以轻松地集成Elasticsearch到他们的Java项目中，实现实时更新文档库，并从文档中快速检索出符合用户搜索条件的数据。
Elasticsearch的分布式特性使得它在处理海量数据时具有出色的性能。与传统的数据库系统相比，Elasticsearch的实时查询处理能力更强，能够应对大规模并发搜索请求。同时，它还提供了灵活的伸缩性配置，可以根据搜索数据规模的增长进行扩展，确保系统的稳定性和可用性。
Elasticsearch还具备全文搜索的能力，能够将复杂的搜索功能如布尔查询、短语查询、过滤器、排序、分页等都封装进一个平台。这使得Java开发者能够轻松地实现复杂的搜索需求，提升用户体验和系统的功能性。
下面是ElasticSearch的基本操作样例，学习新技术，先用起来，其它的再说~
一、索引 1、创建 # 1.创建索引 - PUT /索引名 ====&gt; PUT /products - 注意: 1.ES中索引健康转态 red(索引不可用) 、yellwo(索引可用,存在风险)、green(健康) 2.默认ES在创建索引时回为索引创建1个备份索引和一个primary索引 # 2.创建索引 进行索引分片配置 - PUT /products { &#34;settings&#34;: { &#34;number_of_shards&#34;: 1, #指定主分片的数量 &#34;number_of_replicas&#34;: 0 #指定副本分片的数量 } } 字符串类型: keyword 关键字 关键词 、text 一段文本
数字类型：integer long
小数类型：float double
布尔类型：boolean
日期类型：date
① 创建索引&amp;映射
PUT /products { &#34;settings&#34;: { &#34;number_of_shards&#34;: 1, &#34;number_of_replicas&#34;: 0 }, &#34;mappings&#34;: { &#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-18T07:52:15+08:00">
    <meta property="article:modified_time" content="2024-03-18T07:52:15+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ElasticSearch常见用法，看这一篇就够了</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <center> 
 <strong><font face="楷体" size="4" color="#FF7D00"> 2024送书福利正式起航 </font></strong> 
</center> 
<center> 
 <strong><font face="楷体" size="4" color="#FF7D00"> 关注「哪吒编程」，提升Java技能 </font></strong> 
</center> 
<center> 
 <strong><font face="楷体" size="5" color="#FF7D00"> 文末送3本《一本书讲透Elasticsearch：原理、进阶与工程实践》 </font></strong> 
</center> 
<p>大家好，我是哪吒。</p> 
<p>ElasticSearch是一款由Java开发的开源搜索引擎，它以其出色的实时搜索、稳定可靠、快速安装和方便使用的特性，在Java开发社区中赢得了广泛的认可和应用。</p> 
<p>Elasticsearch为Java开发者提供了一个强大的搜索解决方案。无论是对于小型项目还是大型企业级应用，Elasticsearch都能提供高效的搜索功能，帮助开发者快速检索和处理大量数据。通过其简单的RESTful API接口，开发者可以轻松地集成Elasticsearch到他们的Java项目中，实现实时更新文档库，并从文档中快速检索出符合用户搜索条件的数据。</p> 
<p>Elasticsearch的分布式特性使得它在处理海量数据时具有出色的性能。与传统的数据库系统相比，Elasticsearch的实时查询处理能力更强，能够应对大规模并发搜索请求。同时，它还提供了灵活的伸缩性配置，可以根据搜索数据规模的增长进行扩展，确保系统的稳定性和可用性。</p> 
<p>Elasticsearch还具备全文搜索的能力，能够将复杂的搜索功能如布尔查询、短语查询、过滤器、排序、分页等都封装进一个平台。这使得Java开发者能够轻松地实现复杂的搜索需求，提升用户体验和系统的功能性。</p> 
<p>下面是ElasticSearch的基本操作样例，学习新技术，先用起来，其它的再说~</p> 
<h3><a id="_19"></a>一、索引</h3> 
<h4><a id="1_21"></a>1、创建</h4> 
<pre><code class="prism language-java"># <span class="token number">1.</span>创建索引
<span class="token operator">-</span> <span class="token constant">PUT</span> <span class="token operator">/</span>索引名 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span> <span class="token constant">PUT</span> <span class="token operator">/</span>products
<span class="token operator">-</span> 注意<span class="token operator">:</span> 
 <span class="token number">1.</span><span class="token constant">ES</span>中索引健康转态  <span class="token function">red</span><span class="token punctuation">(</span>索引不可用<span class="token punctuation">)</span> 、<span class="token function">yellwo</span><span class="token punctuation">(</span>索引可用<span class="token punctuation">,</span>存在风险<span class="token punctuation">)</span>、<span class="token function">green</span><span class="token punctuation">(</span>健康<span class="token punctuation">)</span>
 <span class="token number">2.</span>默认<span class="token constant">ES</span>在创建索引时回为索引创建<span class="token number">1</span>个备份索引和一个primary索引
		
# <span class="token number">2.</span>创建索引 进行索引分片配置
<span class="token operator">-</span> <span class="token constant">PUT</span> <span class="token operator">/</span>products
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"settings"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"number_of_shards"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> #指定主分片的数量
    <span class="token string">"number_of_replicas"</span><span class="token operator">:</span> <span class="token number">0</span> #指定副本分片的数量
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>字符串类型: keyword 关键字 关键词 、text 一段文本</p> 
<p>数字类型：integer long</p> 
<p>小数类型：float double</p> 
<p>布尔类型：boolean</p> 
<p>日期类型：date</p> 
<p>① 创建索引&amp;映射</p> 
<pre><code class="prism language-java"><span class="token constant">PUT</span> <span class="token operator">/</span>products
<span class="token punctuation">{<!-- --></span> 
  <span class="token string">"settings"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"number_of_shards"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"number_of_replicas"</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token string">"mappings"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"title"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"price"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"double"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"created_at"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"description"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/84/95/gZkrSfIj_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>说明: ES中支持字段类型非常丰富，如：text、keyword、integer、long、ip 等。更多参见https://www.elastic.co/guide/en/elasticsearch/reference/7.15/mapping-types.html</p> 
</blockquote> 
<h4><a id="2_82"></a>2、查询</h4> 
<pre><code class="prism language-java"># 查询索引
<span class="token operator">-</span> <span class="token constant">GET</span> <span class="token operator">/</span>_cat<span class="token operator">/</span>indices<span class="token operator">?</span>v
</code></pre> 
<p><img src="https://images2.imgbox.com/73/c7/HBT31Kx7_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token comment">// 查看某个索引的映射</span>
<span class="token constant">GET</span> <span class="token operator">/</span>索引名<span class="token operator">/</span>_mapping <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_mapping
</code></pre> 
<p><img src="https://images2.imgbox.com/4b/74/S8357xjQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_100"></a>3、删除</h4> 
<pre><code class="prism language-java"># <span class="token number">3.</span>删除索引
<span class="token operator">-</span> <span class="token constant">DELETE</span> <span class="token operator">/</span>索引名 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token constant">DELETE</span> <span class="token operator">/</span>products
<span class="token operator">-</span> <span class="token constant">DELETE</span> <span class="token comment">/*     `*代表通配符,代表所有索引`
</span></code></pre> 
<p><img src="https://images2.imgbox.com/ab/59/YMdfyjia_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_110"></a>二、文档</h3> 
<h4><a id="1_112"></a>1、添加文档</h4> 
<pre><code class="prism language-java"><span class="token constant">POST</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span> #指定文档id 
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone13"</span><span class="token punctuation">,</span>
  <span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999.99</span><span class="token punctuation">,</span>
  <span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span>
  <span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 13屏幕采用6.1英寸OLED屏幕。"</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token constant">POST</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span> #自动生成文档id
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone14"</span><span class="token punctuation">,</span>
  <span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999.99</span><span class="token punctuation">,</span>
  <span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span>
  <span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 13屏幕采用6.8英寸OLED屏幕"</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"_index"</span> <span class="token operator">:</span> <span class="token string">"products"</span><span class="token punctuation">,</span>
  <span class="token string">"_type"</span> <span class="token operator">:</span> <span class="token string">"_doc"</span><span class="token punctuation">,</span>
  <span class="token string">"_id"</span> <span class="token operator">:</span> <span class="token string">"sjfYnXwBVVbJgt24PlVU"</span><span class="token punctuation">,</span>
  <span class="token string">"_version"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string">"result"</span> <span class="token operator">:</span> <span class="token string">"created"</span><span class="token punctuation">,</span>
  <span class="token string">"_shards"</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"total"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"successful"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"failed"</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"_seq_no"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token string">"_primary_term"</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2_151"></a>2、查询文档</h4> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"_index"</span> <span class="token operator">:</span> <span class="token string">"products"</span><span class="token punctuation">,</span>
  <span class="token string">"_type"</span> <span class="token operator">:</span> <span class="token string">"_doc"</span><span class="token punctuation">,</span>
  <span class="token string">"_id"</span> <span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
  <span class="token string">"_version"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string">"_seq_no"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string">"_primary_term"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string">"found"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">"_source"</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"iphone13"</span><span class="token punctuation">,</span>
    <span class="token string">"price"</span> <span class="token operator">:</span> <span class="token number">8999.99</span><span class="token punctuation">,</span>
    <span class="token string">"created_at"</span> <span class="token operator">:</span> <span class="token string">"2021-09-15"</span><span class="token punctuation">,</span>
    <span class="token string">"description"</span> <span class="token operator">:</span> <span class="token string">"iPhone 13屏幕采用6.1英寸OLED屏幕"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="3_175"></a>3、删除文档</h4> 
<pre><code class="prism language-java"><span class="token constant">DELETE</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span><span class="token number">1</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"_index"</span> <span class="token operator">:</span> <span class="token string">"products"</span><span class="token punctuation">,</span>
  <span class="token string">"_type"</span> <span class="token operator">:</span> <span class="token string">"_doc"</span><span class="token punctuation">,</span>
  <span class="token string">"_id"</span> <span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
  <span class="token string">"_version"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token string">"result"</span> <span class="token operator">:</span> <span class="token string">"deleted"</span><span class="token punctuation">,</span>
  <span class="token string">"_shards"</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"total"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"successful"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string">"failed"</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"_seq_no"</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token string">"_primary_term"</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="4_198"></a>4、更新文档</h4> 
<pre><code class="prism language-java"><span class="token constant">PUT</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span>sjfYnXwBVVbJgt24PlVU
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphon15"</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>说明: 这种更新方式是先删除原始文档,再将更新文档以新的内容插入。</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token constant">POST</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span>sjfYnXwBVVbJgt24PlVU<span class="token operator">/</span>_update
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"doc"</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"title"</span> <span class="token operator">:</span> <span class="token string">"iphon15"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>说明: 这种方式可以将数据原始内容保存,并在此基础上更新。</p> 
</blockquote> 
<h4><a id="5_220"></a>5、批量操作</h4> 
<pre><code class="prism language-java"><span class="token constant">POST</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span>_bulk #批量索引两条文档
 	<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token operator">:</span><span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  		<span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone14"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999.99</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 13屏幕采用6.8英寸OLED屏幕"</span><span class="token punctuation">}</span>
	<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token operator">:</span><span class="token string">"2"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  		<span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone15"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999.99</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 15屏幕采用10.8英寸OLED屏幕"</span><span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token constant">POST</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span>_bulk #更新文档同时删除文档
	<span class="token punctuation">{<!-- --></span><span class="token string">"update"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token operator">:</span><span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
		<span class="token punctuation">{<!-- --></span><span class="token string">"doc"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone17"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{<!-- --></span><span class="token string">"delete"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token string">"_id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
	<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span>
		<span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone19"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999.99</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 19屏幕采用61.8英寸OLED屏幕"</span><span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>说明：批量时不会因为一个失败而全部失败,而是继续执行后续操作,在返回时按照执行的状态返回！</p> 
</blockquote> 
<h3><a id="_241"></a>三、高级查询</h3> 
<p>ES中提供了一种强大的检索数据方式,这种检索方式称之为Query DSL,Query DSL是利用Rest API传递JSON格式的请求体(Request Body)数据与ES进行交互，这种方式的丰富查询语法让ES检索变得更强大，更简洁。</p> 
<h4><a id="1_245"></a>1、语法</h4> 
<pre><code class="prism language-java"># <span class="token constant">GET</span> <span class="token operator">/</span>索引名<span class="token operator">/</span>_doc<span class="token operator">/</span>_search <span class="token punctuation">{<!-- --></span>json格式请求体数据<span class="token punctuation">}</span>
# <span class="token constant">GET</span> <span class="token operator">/</span>索引名<span class="token operator">/</span>_search <span class="token punctuation">{<!-- --></span>json格式请求体数据<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2_252"></a>2、测试数据</h4> 
<pre><code class="prism language-java"># <span class="token number">1.</span>创建索引 映射
<span class="token constant">PUT</span> <span class="token operator">/</span>products<span class="token operator">/</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"mappings"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"title"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"price"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"double"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"created_at"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span><span class="token string">"date"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"description"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">"type"</span><span class="token operator">:</span><span class="token string">"text"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
# <span class="token number">2.</span>测试数据
<span class="token constant">PUT</span> <span class="token operator">/</span>products<span class="token operator">/</span>_doc<span class="token operator">/</span>_bulk
<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone12 pro"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2020-10-23"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 12 Pro采用超瓷晶面板和亚光质感玻璃背板，搭配不锈钢边框，有银色、石墨色、金色、海蓝色四种颜色。宽度:71.5毫米，高度:146.7毫米，厚度:7.4毫米，重量：187克"</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone12"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">4999</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2020-10-23"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 12 高度：146.7毫米；宽度：71.5毫米；厚度：7.4毫米；重量：162克（5.73盎司） [5]  。iPhone 12设计采用了离子玻璃，以及7000系列铝金属外壳。"</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone13"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">6000</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 13屏幕采用6.1英寸OLED屏幕；高度约146.7毫米，宽度约71.5毫米，厚度约7.65毫米，重量约173克。"</span><span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span><span class="token string">"index"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">{<!-- --></span><span class="token string">"title"</span><span class="token operator">:</span><span class="token string">"iphone13 pro"</span><span class="token punctuation">,</span><span class="token string">"price"</span><span class="token operator">:</span><span class="token number">8999</span><span class="token punctuation">,</span><span class="token string">"created_at"</span><span class="token operator">:</span><span class="token string">"2021-09-15"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token operator">:</span><span class="token string">"iPhone 13Pro搭载A15 Bionic芯片，拥有四种配色，支持5G。有128G、256G、512G、1T可选，售价为999美元起。"</span><span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_287"></a>四、常见检索</h3> 
<h4><a id="1match_all_289"></a>1、查询所有[match_all]</h4> 
<blockquote> 
 <p>match_all关键字: 返回索引中的全部文档</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2term_302"></a>2、关键词查询(term)</h4> 
<p>term 关键字: 用来使用关键词查询</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
 <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token string">"term"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
     <span class="token string">"price"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
       <span class="token string">"value"</span><span class="token operator">:</span> <span class="token number">4999</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>NOTE1: 通过使用term查询得知ES中默认使用分词器为标准分词器(StandardAnalyzer),标准分词器对于英文单词分词,对于中文单字分词。</p> 
<p>NOTE2: 通过使用term查询得知,在ES的Mapping Type 中 keyword , date ,integer, long , double , boolean or ip 这些类型不分词，只有text类型分词。</p> 
<h4><a id="3range_324"></a>3、范围查询[range]</h4> 
<p>range 关键字: 用来指定查询指定范围内的文档</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"range"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"price"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"gte"</span><span class="token operator">:</span> <span class="token number">1400</span><span class="token punctuation">,</span>
        <span class="token string">"lte"</span><span class="token operator">:</span> <span class="token number">9999</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="4prefix_342"></a>4、前缀查询[prefix]</h4> 
<p>prefix 关键字: 用来检索含有指定前缀的关键词的相关文档</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"prefix"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"title"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"ipho"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="5wildcard_359"></a>5、通配符查询[wildcard]</h4> 
<p>wildcard 关键字: 通配符查询 ? 用来匹配一个任意字符 * 用来匹配多个任意字符</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"wildcard"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"description"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"iphon*"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="6idids_376"></a>6、多id查询[ids]</h4> 
<p>ids 关键字 : 值为数组类型,用来根据一组id获取多个对应的文档</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"ids"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"verUq3wBOTjuBizqAegi"</span><span class="token punctuation">,</span><span class="token string">"vurUq3wBOTjuBizqAegk"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="7fuzzy_391"></a>7、模糊查询[fuzzy]</h4> 
<p>fuzzy 关键字: 用来模糊查询含有指定关键字的文档</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"fuzzy"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"iphooone"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注意: fuzzy 模糊查询 最大模糊错误 必须在0-2之间</p> 
<ol><li>搜索关键词长度为 2 不允许存在模糊</li><li>搜索关键词长度为3-5 允许一次模糊</li><li>搜索关键词长度大于5 允许最大2模糊</li></ol> 
<h4><a id="8bool_412"></a>8、布尔查询[bool]</h4> 
<ol><li>bool 关键字: 用来组合多个条件实现复杂查询</li><li>must: 相当于&amp;&amp; 同时成立</li><li>should: 相当于|| 成立一个就行</li><li>must_not: 相当于! 不能满足任何一个</li></ol> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"bool"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"must"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token string">"term"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string">"price"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"value"</span><span class="token operator">:</span> <span class="token number">4999</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="9multi_match_436"></a>9、多字段查询[multi_match]</h4> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"multi_match"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"query"</span><span class="token operator">:</span> <span class="token string">"iphone13 毫"</span><span class="token punctuation">,</span>
      <span class="token string">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
注意<span class="token operator">:</span> 字段类型分词<span class="token punctuation">,</span>将查询条件分词之后进行查询改字段  如果该字段不分词就会将查询条件作为整体进行查询
</code></pre> 
<h4><a id="10query_string_451"></a>10、默认字段分词查询[query_string]</h4> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"query_string"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"default_field"</span><span class="token operator">:</span> <span class="token string">"description"</span><span class="token punctuation">,</span>
      <span class="token string">"query"</span><span class="token operator">:</span> <span class="token string">"屏幕真的非常不错"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
注意<span class="token operator">:</span> 查询字段分词就将查询条件分词查询  查询字段不分词将查询条件不分词查询
</code></pre> 
<h4><a id="11highlight_466"></a>11、高亮查询[highlight]</h4> 
<p>（1）highlight 关键字: 可以让符合条件的文档中的关键词高亮</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"term"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"description"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"iphone"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"highlight"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"fields"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"*"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>（2）自定义高亮html标签: 可以在highlight中使用pre_tags和post_tags</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"term"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"description"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"iphone"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"highlight"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"post_tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;/span&gt;"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
    <span class="token string">"pre_tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;span style='color:red'&gt;"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"fields"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"*"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>（3）多字段高亮 使用require_field_match开启多个字段高亮</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"term"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"description"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"value"</span><span class="token operator">:</span> <span class="token string">"iphone"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"highlight"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"require_field_match"</span><span class="token operator">:</span> <span class="token string">"false"</span><span class="token punctuation">,</span>
    <span class="token string">"post_tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;/span&gt;"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
    <span class="token string">"pre_tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;span style='color:red'&gt;"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"fields"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">"*"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="12size_533"></a>12、返回指定条数[size]</h4> 
<p>size 关键字: 指定查询结果中返回指定条数。 默认返回值10条</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">5</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="13form_547"></a>13、分页查询[form]</h4> 
<p>from 关键字: 用来指定起始返回位置，和size关键字连用可实现分页效果</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token string">"from"</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="14sort_562"></a>14、指定字段排序[sort]</h4> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"sort"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string">"price"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"order"</span><span class="token operator">:</span> <span class="token string">"desc"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="15_source_580"></a>15、返回指定字段[_source]</h4> 
<p>_source 关键字: 是一个数组,在数组中用来指定展示那些字段</p> 
<pre><code class="prism language-java"><span class="token constant">GET</span> <span class="token operator">/</span>products<span class="token operator">/</span>_search
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"query"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"_source"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">,</span><span class="token string">"description"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="Elasticsearch_595"></a>五、一本书讲透Elasticsearch：原理、进阶与工程实践</h3> 
<h4><a id="1_597"></a>1、内容简介</h4> 
<p>这是一本关于Elasticsearch技术实战的教程，全面覆盖了Elastic Stack技术体系知识，旨在帮助读者深入了解Elasticsearch的核心技术和应用场景，同时掌握分布式搜索与分析引擎的设计思想和实现原理。</p> 
<p>本书共20章，分为4大部分：</p> 
<p><strong>第1部分Elastic Stack全局概览（第1～3章）</strong>：主要讨论Elastic Stack的重要组成部分与应用场景，以及Elasticsearch的独特优势。同时，初步探索搜索引擎的基础知识及Elasticsearch的核心概念，如集群、节点、索引等。最后，详细介绍Elasticsearch单节点、多节点集群部署以及Kibana部署等内容。</p> 
<p><strong>第2部分Elasticsearch核心技术（第4～14章）</strong>：从从底层原理和实现方法两个层面切入，深入解读索引、映射、分词、数据预处理、文档、脚本、检索、聚合、集群、安全和运维等核心</p> 
<p><strong>第3部分Elasticsearch进阶指南（第15～17章）</strong>：主要讨论Elasticsearch各关键操作的基本原理、性能优化方案及实战“避坑”指南等进阶话题。不仅对文档版本冲突及并发控制策略，以及更新/删除、写入、段合并、检索等常见操作实现提供了解决方案，还从通用、写入、检索3个维度提供了性能优化建议，并且讨论了分片、线程池和队列、热点线程、集群规划、客户端选型、缓存、数据建模、性能测试等热点技术，提供了Elasticsearch的应用场景和优化方法，为企业级实战保驾护航。</p> 
<p><strong>第4部分 Elasticsearch项目实战（第18～20章）</strong>：带领读者将实战Elasticsearch三大核心业务场景——知识库检索系统、大数据可视化系统、日志系统，融会贯通理论知识和实践技能。</p> 
<h4><a id="2_611"></a>2、作者简介</h4> 
<p>杨昌玉</p> 
<p>10多年工作经验的高级工程师，擅长大数据存储和检索。</p> 
<p>曾任职于上市公司、科研院所等，主导过PB级数据存储与检索系统项目，拥有多年Elasticsearch培训及咨询经验。Elastic认证专家、Elasticsearch中国合作培训讲师、Elasticsearch 中文社区2018年、2023年杰出贡献奖（排名Top5）获得者、阿里云MVP（大数据领域最有价值专家）、CSDN博客专家（排名Top150）、CSDN 2020年度优秀创作者。博客累计阅读量超1000万，并被阿里云、腾讯云、华为云、360doc、51CTO等知名媒体平台全量转载，在CSDN 2013年及2016年的博客征文大赛中获特等奖。“死磕Elasticsearch”知识星球发起人，拥有近2000名付费用户。“铭毅天下Elasticsearch”公众号及博客总计拥有近5万名关注者。成功指导近200人通过Elastic认证专家考试。</p> 
<p><a href="https://item.jd.com/14342998.html" rel="nofollow"><strong>购书传送门</strong></a></p> 
<p><img src="https://images2.imgbox.com/bf/e1/FQWdSwEL_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_3_Elasticsearch_622"></a>3、送 3 本《一本书讲透Elasticsearch：原理、进阶与工程实践》</h4> 
<center> 
 <strong><font face="楷体" size="4" color="#FF7D00"> 2024送书福利正式起航 </font></strong> 
</center> 
<center> 
 <strong><font face="楷体" size="4" color="#FF7D00"> 关注「哪吒编程」，提升Java技能 </font></strong> 
</center> 
<center> 
 <strong><font face="楷体" size="5" color="#FF7D00"> 点击下方名片，回复 星球，即可参与 </font></strong> 
</center> 
<center> 
 <strong><font face="楷体" size="4" color="#808080"> 活动截止时间：2024-3-20 21:00:00 </font></strong> 
</center> 
<center> 
 <strong><font face="楷体" size="4" color="#808080"> 哪吒会在朋友圈公布中奖名单 </font></strong> 
</center> 
<h4><a id="4strongfont_face_size4__color008080___fontstrong___httpsbbscsdnnettopics614261188_635"></a>4、<strong><font face="楷体" size="4" color="#008080"> 学习传送门 &gt;&gt;&gt; </font></strong> <a href="https://bbs.csdn.net/topics/614261188"><strong>哪吒编程，陪伴学习，共同优秀</strong></a></h4> 
<p>每天分享Java硬核干货，包含Java基础、数据库、SSM、SpringBoot、微服务、设计模式、算法等系列文章。一起学习打卡，遇到问题，发到群里，一起讨论学习，比一个人学习效率高的多。</p> 
<p>坚持每日学习打卡，养成持续学习、持续成长的好习惯。</p> 
<p>成功秘诀只有一个，那就是卷，督促和鞭策自己，永不放弃。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e54ae51da8befcac66a835f89e42651/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">全能AI抠图模型RMBG v1.4：最强开源AI一键抠图工具，超准抠图新体验</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2f0b09c62feac4f81cd722e8a9caf24f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">R语言系列5——R语言中的时间序列分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>