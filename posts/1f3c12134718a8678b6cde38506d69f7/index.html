<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mac配置双网卡 mac同时使用内网和外网 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1f3c12134718a8678b6cde38506d69f7/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="mac配置双网卡 mac同时使用内网和外网">
  <meta property="og:description" content="在公司办公通常都会连内网，而连内网最大的限制就是不可以使用外网，那遇到问题也就不能google，而当连接无线的时候，内网的东西就不可以访问，也就不能正常办公，对于我这种小白来说，工作中遇到的问题数不胜数，又不能什么事都请教同事，这可真是让人头大~~~~
那我们是不是可以内外网同时访问呢，答案当然是可以的，解决方法本质上就是 由于内网网段的个数是有限个的，所以内网网段设置本地静态路由，即添加内网网段指向对应内网的网关，让内网网段全部走对应内网路由，默认网段全部走默认外网路由
简单说就是 访问内网网站使用内网，其余所有网站默认使用外网，这样你的电脑就可以内外网均可访问了。
这边总结一下关于mac怎么配置同时使用内网和外网，以下双网卡配置方法是针对外网用WIFI，内网用有线，但是要注意的是双网卡也可以都是有线或者都是无线，其配置思路本质也是一样的。
话不多说，请严格按照以下步骤设置：
第一步：设置正确的网卡服务顺序 进入 系统偏好设置 - 网络 - 设定服务顺序，拖动来进行网络优先级设置。使连接外网的网卡位于内网网卡之上。此时可以正常访问外网
第二步：查看内网网卡的网关地址 路由器IP即为下一步设置需要用到的网关地址
子网掩码下一步设置也需要用到
第三步：设置本地静态路由，添加内网网段指向对应内网的网关 （这一步需要在MacOS的终端内执行命令，打开终端的方式参考 MacOS如何打开终端）
先介绍2条关于添加和删除的命令，下面有具体例子
添加：
sudo route add -net 10.0.0.0 -netmask 255.0.0.0 10.0.2.1 sudo route add -net 30.1.0.0 -netmask 255.255.0.0 10.0.2.1 删除：
sudo route delete -net 10.0.0.0 -netmask 255.0.0.0 10.0.2.1 sudo route delete -net 30.1.0.0 -netmask 255.255.0.0 10.0.2.1 net参数对应网段IP，netmask是子网掩码。最后的IP是内网网关，即上一步看到的路由器IP地址
比如内网想访问的网址是 http://10.90.20.27/fh，内网网关也就是刚才看到的路由器IP地址为 172.16.84.254，则使用以下命令添加和删除
添加
sudo route add -net 10.90.20.0 -netmask 255.255.255.0 172.16.84.254 删除">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-13T14:01:50+08:00">
    <meta property="article:modified_time" content="2023-11-13T14:01:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mac配置双网卡 mac同时使用内网和外网</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在公司办公通常都会连内网，而连内网最大的限制就是不可以使用外网，那遇到问题也就不能google，而当连接无线的时候，内网的东西就不可以访问，也就不能正常办公，对于我这种小白来说，工作中遇到的问题数不胜数，又不能什么事都请教同事，这可真是让人头大~~~~</p> 
<p>那我们是不是可以内外网同时访问呢，答案当然是可以的，解决方法本质上就是 由于内网网段的个数是有限个的，所以内网网段设置本地静态路由，即添加内网网段指向对应内网的网关，让内网网段全部走对应内网路由，默认网段全部走默认外网路由<br> 简单说就是 访问内网网站使用内网，其余所有网站默认使用外网，这样你的电脑就可以内外网均可访问了。</p> 
<p>这边总结一下关于mac怎么配置同时使用内网和外网，以下双网卡配置方法是针对外网用WIFI，内网用有线，但是要注意的是双网卡也可以都是有线或者都是无线，其配置思路本质也是一样的。</p> 
<p>话不多说，请严格按照以下步骤设置：</p> 
<h4><strong>第一步：设置正确的网卡服务顺序</strong></h4> 
<p>进入 系统偏好设置 - 网络 - 设定服务顺序，拖动来进行网络优先级设置。使连接外网的网卡位于内网网卡之上。此时可以正常<span style="color:#fe2c24;">访问外网</span></p> 
<h4><img alt="" height="1200" src="https://images2.imgbox.com/29/fb/fWwD3tIW_o.png" width="1200"><br><strong>第二步：查看内网网卡的网关地址</strong></h4> 
<p>路由器IP即为下一步设置需要用到的网关地址<br> 子网掩码下一步设置也需要用到</p> 
<h4><img alt="" height="1152" src="https://images2.imgbox.com/a1/23/fzJw1KSO_o.png" width="1200"><br><strong>第三步：设置本地静态路由，添加内网网段指向对应内网的网关</strong></h4> 
<p>（这一步需要在MacOS的终端内执行命令，打开终端的方式参考 MacOS如何打开终端）<br> 先介绍2条关于添加和删除的命令，下面有具体例子<br> 添加：</p> 
<pre><code class="language-ruby">sudo route add -net 10.0.0.0 -netmask 255.0.0.0 10.0.2.1
sudo route add -net 30.1.0.0 -netmask 255.255.0.0 10.0.2.1</code></pre> 
<p><br> 删除：</p> 
<pre><code class="language-ruby">sudo route delete -net 10.0.0.0 -netmask 255.0.0.0 10.0.2.1
sudo route delete -net 30.1.0.0 -netmask 255.255.0.0 10.0.2.1</code></pre> 
<p><br> net参数对应网段IP，netmask是子网掩码。最后的IP是内网网关，即上一步看到的路由器IP地址</p> 
<p>比如内网想访问的网址是 http://10.90.20.27/fh，内网网关也就是刚才看到的路由器IP地址为 172.16.84.254，则使用以下命令添加和删除<br> 添加</p> 
<pre><code class="language-ruby">sudo route add -net 10.90.20.0 -netmask 255.255.255.0 172.16.84.254</code></pre> 
<p>删除</p> 
<pre><code class="language-ruby">sudo route delete -net 10.90.20.0 -netmask 255.255.255.0 172.16.84.254</code></pre> 
<p>其实不妨把10网段的全部网址都设置一下，（主要就是注意一下网段(10.0.0.0)和子网掩码(255.0.0.0)对应关系就好），用以下命令添加</p> 
<pre><code class="language-ruby">sudo route add -net 10.0.0.0 -netmask 255.0.0.0 172.16.84.254</code></pre> 
<p>至此内外网路由是已经配置好了。</p> 
<h4>第四步：配置内网域名和内网DNS解析</h4> 
<p>在MacOS系统中，不支持同时添加内网和外网DNS服务器地址到外网网卡来起到解析内网地址的作用，因此我们要把内网域名和对应的ip地址写到/etc/hosts文件中进行本地解析。</p> 
<p>较为方便的方法是：先关闭外网网卡，进入纯内网模式，ping内网域名得到内网IP地址，再将IP地址和域名写入到hosts中，操作步骤如下。</p> 
<p>通过ping命令，获取对应域名的IP地址</p> 
<pre><code class="language-ruby">MacBook-Pro:root# ping aaa.bbb.com
PING aaa.bbb.com (10.12.8.25): 56 data bytes
64 bytes from 10.12.8.25: icmp_seq=0 ttl=61 time=15.934 ms
64 bytes from 10.12.8.25: icmp_seq=1 ttl=61 time=16.219 ms
64 bytes from 10.12.8.25: icmp_seq=2 ttl=61 time=15.713 ms
64 bytes from 10.12.8.25: icmp_seq=3 ttl=61 time=15.755 ms</code></pre> 
<p>将IP地址和对应的域名写入 /etc/hosts 文件中</p> 
<pre><code class="language-ruby">MacBook-Pro:root# echo "10.12.8.25 aaa.bbb.com" &gt;&gt;/etc/hosts    </code></pre> 
<p>细心一点，一定要注意不要写错了！！</p> 
<p>至此，就已经完成配置完成啦，此时你的mac就可以内外网均可访问了，但是要注意重启后，需要重新设置。</p> 
<p><br> 原文链接：https://blog.csdn.net/weixin_44637703/article/details/121626312</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/75fb54ee889fdb516f4f46c5493a326a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【springboot】Failed to start bean ‘webServerStartStop‘；</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/63c69bb5a0e56a20e821d6f8062827b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">编译版本问题androidx.appcompat:appcompat-resources 引用错误</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>