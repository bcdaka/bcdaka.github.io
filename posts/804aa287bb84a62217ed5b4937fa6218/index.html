<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python日志记录库——loguru - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/804aa287bb84a62217ed5b4937fa6218/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python日志记录库——loguru">
  <meta property="og:description" content="文章目录 一. 概述二、基本使用2.1 安装2.2 日志输出 三、进阶用法3.1 显示格式3.2 写入文件3.3 模块名参数化3.4 日志留存、压缩与清理3.5 序列化为json格式3.6 并发安全 参考资料 一. 概述 在 Python 中用到日志记录，那就不可避免地会用到内置的 logging标准库 。虽然logging 库采用的是模块化设计，你可以设置不同的 handler 来进行组合，但是在配置上通常较为繁琐；而且如果不是特别处理，在一些多线程或多进程的场景下使用 logging还会导致日志记录会出现错乱或是丢失的情况。
关于Python内置的 logging标准库介绍可参见博客：Python 日志记录工具logging
标准库logging的替代品是loguru，loguru使用起来就简单的多。它不仅能够减少繁琐的配置过程还能实现和logging类似的功能，同时还能保证日志记录的线程进程安全，又能够和logging 相兼容，并进一步追踪异常也能进行代码回溯。
loguru默认的输出格式是：时间、级别、模块、行号以及日志内容。loguru不需要手动创建 logger，开箱即用；另外，日志输出内置了彩色功能，颜色和非颜色控制很方便，更加友好。
loguru官方文档：https://loguru.readthedocs.io/en/stable/index.html
二、基本使用 2.1 安装 loguru是非标准库，需要事先安装，命令是：
pip install loguru logger 本身就是一个已经实例化好的对象，如果没有特殊的配置需求，那么自身就已经带有通用的配置参数；同时它的用法和 logging库输出日志时的用法一致。
2.2 日志输出 （1）输出到控制台
安装后，最简单的使用样例如下：
from loguru import logger logger.debug(&#39;hello, this debug loguru&#39;) logger.info(&#39;hello, this is info loguru&#39;) logger.warning(&#39;hello, this is warning loguru&#39;) logger.error(&#39;hello, this is error loguru&#39;) logger.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-27T10:18:04+08:00">
    <meta property="article:modified_time" content="2024-02-27T10:18:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python日志记录库——loguru</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#__1" rel="nofollow">一. 概述</a></li><li><a href="#_14" rel="nofollow">二、基本使用</a></li><li><ul><li><a href="#21__16" rel="nofollow">2.1 安装</a></li><li><a href="#22__25" rel="nofollow">2.2 日志输出</a></li></ul> 
  </li><li><a href="#_63" rel="nofollow">三、进阶用法</a></li><li><ul><li><a href="#31__64" rel="nofollow">3.1 显示格式</a></li><li><a href="#32__101" rel="nofollow">3.2 写入文件</a></li><li><a href="#33__131" rel="nofollow">3.3 模块名参数化</a></li><li><a href="#34__165" rel="nofollow">3.4 日志留存、压缩与清理</a></li><li><a href="#35_json_210" rel="nofollow">3.5 序列化为json格式</a></li><li><a href="#36__228" rel="nofollow">3.6 并发安全</a></li></ul> 
  </li><li><a href="#_236" rel="nofollow">参考资料</a></li></ul> 
</div> 
<p></p> 
<h2><a id="__1"></a>一. 概述</h2> 
<p>在 Python 中用到日志记录，那就不可避免地会用到内置的 logging标准库 。虽然logging 库采用的是模块化设计，你可以设置不同的 handler 来进行组合，但是在配置上通常较为繁琐；而且如果不是特别处理，在一些多线程或多进程的场景下使用 logging还会导致日志记录会出现错乱或是丢失的情况。</p> 
<p>关于Python内置的 logging标准库介绍可参见博客：<a href="https://blog.csdn.net/u012856866/article/details/119992046">Python 日志记录工具logging</a></p> 
<p>标准库logging的替代品是loguru，loguru使用起来就简单的多。它不仅能够减少繁琐的配置过程还能实现和logging类似的功能，同时还能保证日志记录的线程进程安全，又能够和logging 相兼容，并进一步追踪异常也能进行代码回溯。</p> 
<p>loguru默认的输出格式是：时间、级别、模块、行号以及日志内容。loguru不需要手动创建 logger，开箱即用；另外，日志输出内置了彩色功能，颜色和非颜色控制很方便，更加友好。</p> 
<p><strong>loguru官方文档</strong>：<a href="https://loguru.readthedocs.io/en/stable/index.html" rel="nofollow">https://loguru.readthedocs.io/en/stable/index.html</a><br> <img src="https://images2.imgbox.com/ef/65/f6T9dsrh_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_14"></a>二、基本使用</h2> 
<h3><a id="21__16"></a>2.1 安装</h3> 
<p>loguru是非标准库，需要事先安装，命令是：</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> loguru
</code></pre> 
<p>logger 本身就是一个已经实例化好的对象，如果没有特殊的配置需求，那么自身就已经带有通用的配置参数；同时它的用法和 logging库输出日志时的用法一致。</p> 
<h3><a id="22__25"></a>2.2 日志输出</h3> 
<p><strong>（1）输出到控制台</strong></p> 
<p>安装后，最简单的使用样例如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> loguru <span class="token keyword">import</span> logger

logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'hello, this debug loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'hello, this is info loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'hello, this is warning loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'hello, this is error loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'hello, this is critical loguru'</span><span class="token punctuation">)</span>
</code></pre> 
<p>上述代码输出：<br> <img src="https://images2.imgbox.com/ae/e7/VxbOA8RF_o.png" alt="在这里插入图片描述"></p> 
<p><strong>（2）输出到控制台+文件</strong></p> 
<p>日志打印到文件的用法也很简单，代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> loguru <span class="token keyword">import</span> logger

logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'myloguru.log'</span><span class="token punctuation">)</span>

logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'hello, this debug loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'hello, this is info loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'hello, this is warning loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'hello, this is error loguru'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'hello, this is critical loguru'</span><span class="token punctuation">)</span>
</code></pre> 
<p>上述代码运行时，可以打印到console，也可以打印到文件中去。<br> <img src="https://images2.imgbox.com/94/04/9wTtQZSC_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_63"></a>三、进阶用法</h2> 
<h3><a id="31__64"></a>3.1 显示格式</h3> 
<p>loguru默认格式是时间、级别、名称+模块和日志内容，其中名称+模块是写死的，是当前文件的__name__变量，此变量最好不要修改。</p> 
<p>工程比较复杂的情况下，自定义模块名称，是非常有用的，容易定界定位，避免陷入细节中。我们可以通过logger.configure手工指定模块名称。如下如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys

<span class="token keyword">from</span> loguru <span class="token keyword">import</span> logger

logger<span class="token punctuation">.</span>configure<span class="token punctuation">(</span>handlers<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"sink"</span><span class="token punctuation">:</span> sys<span class="token punctuation">.</span>stderr<span class="token punctuation">,</span>
        <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"{time:YYYY-MM-DD HH:mm:ss.SSS} |&lt;lvl&gt;{level:8}&lt;/&gt;| {name} : {module}:{line:4} | &lt;cyan&gt;mymodule&lt;/&gt; | - &lt;lvl&gt;{message}&lt;/&gt;"</span><span class="token punctuation">,</span>
        <span class="token string">"colorize"</span><span class="token punctuation">:</span> <span class="token boolean">True</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'this is debug'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'this is info'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'this is warning'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'this is error'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'this is critical'</span><span class="token punctuation">)</span>
</code></pre> 
<p>上述代码中：</p> 
<ul><li>handlers：表示日志输出句柄或者目的地，sys.stderr表示输出到命令行终端。</li><li>“sink”: sys.stderr，表示输出到终端</li><li>“format”:表示日志格式化。{level:8}&lt;/&gt;表示按照日志级别显示颜色。8表示输出宽度为8个字符。</li><li>“colorize”: True**：表示显示颜色。</li></ul> 
<p>上述代码的输出为：<br> <img src="https://images2.imgbox.com/0b/17/HetiPLSK_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>这里写死了模块名称，每个日志都这样设置也是比较繁琐。下面会介绍指定不同模块名称的方法。</p> 
</blockquote> 
<h3><a id="32__101"></a>3.2 写入文件</h3> 
<p>日志一般需要持久化，除了输出到命令行终端外，还需要写入文件。标准日志库可以通过配置文件配置logger，在代码中也可以实现，但过程比较繁琐。loguru相对而已就显得稍微简单一些，我们看下在代码中如何实现此功能。日志代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys

<span class="token keyword">from</span> loguru <span class="token keyword">import</span> logger

logger<span class="token punctuation">.</span>configure<span class="token punctuation">(</span>handlers<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"sink"</span><span class="token punctuation">:</span> sys<span class="token punctuation">.</span>stderr<span class="token punctuation">,</span>
        <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"{time:YYYY-MM-DD HH:mm:ss.SSS} |&lt;lvl&gt;{level:8}&lt;/&gt;| {name} : {module}:{line:4} | &lt;cyan&gt;mymodule&lt;/&gt; | - &lt;lvl&gt;{message}&lt;/&gt;"</span><span class="token punctuation">,</span>
        <span class="token string">"colorize"</span><span class="token punctuation">:</span> <span class="token boolean">True</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"sink"</span><span class="token punctuation">:</span> <span class="token string">'first.log'</span><span class="token punctuation">,</span>
        <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"{time:YYYY-MM-DD HH:mm:ss.SSS} |{level:8}| {name} : {module}:{line:4} | mymodule | - {message}"</span><span class="token punctuation">,</span>
        <span class="token string">"colorize"</span><span class="token punctuation">:</span> <span class="token boolean">False</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'this is debug'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'this is info'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'this is warning'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'this is error'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'this is critical'</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>与3.1 唯一不同的地方，logger.configure新增了一个handler，写入到日志文件中去。用法很简单。</p> 
</blockquote> 
<h3><a id="33__131"></a>3.3 模块名参数化</h3> 
<p>上述只是通过logger.configure设置日志格式，但是模块名不是可变的，实际项目开发中，不同模块写日志，需要指定不同的模块名称。因此，模块名称需要参数化，这样实用性更强。样例代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys

<span class="token keyword">from</span> loguru <span class="token keyword">import</span> logger

logger<span class="token punctuation">.</span>configure<span class="token punctuation">(</span>handlers<span class="token operator">=</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"sink"</span><span class="token punctuation">:</span> sys<span class="token punctuation">.</span>stderr<span class="token punctuation">,</span>
        <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"{time:YYYY-MM-DD HH:mm:ss.SSS} |&lt;lvl&gt;{level:8}&lt;/&gt;| {name} : {module}:{line:4} | &lt;cyan&gt;{extra[module_name]}&lt;/&gt; | - &lt;lvl&gt;{message}&lt;/&gt;"</span><span class="token punctuation">,</span>
        <span class="token string">"colorize"</span><span class="token punctuation">:</span> <span class="token boolean">True</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"sink"</span><span class="token punctuation">:</span> <span class="token string">'first.log'</span><span class="token punctuation">,</span>
        <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token string">"{time:YYYY-MM-DD HH:mm:ss.SSS} |{level:8}| {name} : {module}:{line:4} | {extra[module_name]} | - {message}"</span><span class="token punctuation">,</span>
        <span class="token string">"colorize"</span><span class="token punctuation">:</span> <span class="token boolean">False</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

log <span class="token operator">=</span> logger<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>module_name<span class="token operator">=</span><span class="token string">'my-loguru'</span><span class="token punctuation">)</span>
log<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">"this is hello, module is my-loguru"</span><span class="token punctuation">)</span>

log2 <span class="token operator">=</span> logger<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>module_name<span class="token operator">=</span><span class="token string">'my-loguru2'</span><span class="token punctuation">)</span>
log2<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"this is hello, module is my-loguru2"</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>logger.bind(module_name=‘my-loguru’)通过bind方法，实现module_name的参数化。bind返回一个日志对象，可以通过此对象进行日志输出，这样就可以实现不同模块的日志格式。<br> loguru中自定义模块名称的功能比标准日志库有点不同。通过bind方法，可以轻松实现标准日志logging的功能。而且，可以通过bind和logger.configure，轻松实现结构化日志。</p> 
</blockquote> 
<p>上述代码的输出如下：<br> <img src="https://images2.imgbox.com/a1/f1/60rMR0t4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="34__165"></a>3.4 日志留存、压缩与清理</h3> 
<p>通常来说如果程序或服务的量级较大，那么就可以通过集成的日志平台或数据库来对日志信息进行存储和留存，后续有需要的话也方便进行日志分析。</p> 
<p>但对我们个人或者一些中小型项目来说，通常只需要以文件的形式留存输出的日志即可。</p> 
<p>尽管我们需要将日志写入到相应的文件中，如果是少量的日志那还好，但是如果是日志输出或记录时间较长的情况，那么单个日志文件就十分之大，倘若仍然是将日志都写入到一个文件中，那么当日志中的内容增长到一定数量时我们想要读取并查找相应的部分时就十分困难。这时候我们就需要对日志文件进行留存、压缩，甚至在必要时及时进行清理。</p> 
<p>基于以上，我们可以通过对<code>rotation</code> 、<code>compression</code> 和<code>retention</code> 三个参数进行设定来满足我们的需要：</p> 
<ul><li><strong>rotation</strong> ：rotation参数能够帮助我们将日志记录以文件大小、时间等方式进行分割或划分。</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 设置每天 0 点新创建一个 log 文件：</span>
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token string">'00:00'</span><span class="token punctuation">)</span>

<span class="token comment"># 设置超过 500 MB 新创建一个 log 文件：</span>
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token string">"500 MB"</span><span class="token punctuation">)</span>

<span class="token comment"># 设置每隔一个周新创建一个 log 文件：</span>
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token string">'1 week'</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>compression</strong> ：随着分割文件的数量越来越多之后，我们也可以进行压缩对日志进行留存，这里就要使用到 compression参数，该参数只要你传入通用的压缩文件扩展名即可，如zip、tar、gz等。</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 设置使用 zip 文件格式保存</span>
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> compression<span class="token operator">=</span><span class="token string">'zip'</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li><strong>retention</strong> ：如果你不想对日志进行留存，或者只想保留一段时间内的日志并对超期的日志进行删除，那么可以使用 retention 参数。</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 设置日志文件最长保留 15 天：</span>
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> retention<span class="token operator">=</span><span class="token string">'15 days'</span><span class="token punctuation">)</span>

<span class="token comment"># 设置日志文件最多保留 10 个：</span>
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> retention<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment"># retention的参数也可以是一个 datetime.timedelta 对象，比如设置日志文件最多保留 5 个小时：</span>
<span class="token keyword">import</span> datetime
logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'runtime_{time}.log'</span><span class="token punctuation">,</span> retention<span class="token operator">=</span>datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="35_json_210"></a>3.5 序列化为json格式</h3> 
<p>如果在实际中你不太喜欢以文件的形式保留日志，那么你也可以通过 serialize 参数将其转化成序列化的json格式，最后将导入类似于MongoDB、ElasticSearch 这类数NoSQL 数据库中用作后续的日志分析。</p> 
<p>loguru保存成结构化json格式非常简单，只需要设置serialize=True参数即可。代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> loguru <span class="token keyword">import</span> logger

logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'json.log'</span><span class="token punctuation">,</span> serialize<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'this is debug message'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'this is info message'</span><span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'this is error message'</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出内容如下：<br> <img src="https://images2.imgbox.com/44/59/CQmP9lAJ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="36__228"></a>3.6 并发安全</h3> 
<p>loguru默认是线程安全的，但不是多进程安全的，如果使用了多进程安全，需要添加参数enqueue=True，样例代码如下：</p> 
<pre><code class="prism language-python">logger<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"somefile.log"</span><span class="token punctuation">,</span> enqueue<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_236"></a>参考资料</h2> 
<ul><li><a href="https://blog.csdn.net/KiteRunner/article/details/129760831">Python学习：loguru日志库</a></li><li><a href="https://zhuanlan.zhihu.com/p/446232870" rel="nofollow">loguru简单且强大的日志记录库</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1f2d0f241ff269faeb5ac245c6d95a58/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">利用 Coze 快速搭建 AI 技术原型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/17b2243b6a0a3e98d642039fb3d28ea5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">boto3：Python连接S3对象存储并进行文件操作（上传、下载、删除）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>