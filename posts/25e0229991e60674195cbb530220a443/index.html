<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaWeb实现模拟数据库实现购物车功能 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/25e0229991e60674195cbb530220a443/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="JavaWeb实现模拟数据库实现购物车功能">
  <meta property="og:description" content="一， 创建JavaWeb项目 1.1在空文件里创建一个文件加例如我创建的是web02文件夹 1.2 idea中创建JavaWeb项目 1.3 选择刚刚创建的文件夹 1.4 创建文件初始化工程文件目录 二，创建POJO类 Product类 ，是一共父类后续物品都继承它
package com.best.pojo; // 商品类 public class Product { private int id; private String name; private double price; private Integer quantity; public Product(int id, String name, double price) { this.id = id; this.name = name; this.price = price; this.quantity = 0; } public Integer getQuantity() { return quantity; } public void setQuantity(Integer quantity) { this.quantity = quantity; } public int getId() { return id; } public void setId(int id) { this.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-06T23:06:55+08:00">
    <meta property="article:modified_time" content="2024-05-06T23:06:55+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaWeb实现模拟数据库实现购物车功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2></h2> 
<p></p> 
<h2>一， 创建JavaWeb项目</h2> 
<h3>1.1在空文件里创建一个文件加例如我创建的是web02文件夹</h3> 
<p><img alt="" height="213" src="https://images2.imgbox.com/a4/f1/WgIc9Zxy_o.png" width="568"></p> 
<h3>1.2 idea中创建JavaWeb项目</h3> 
<p><img alt="" height="768" src="https://images2.imgbox.com/0a/71/cwSrYDqm_o.png" width="1200"></p> 
<h3>1.3 选择刚刚创建的文件夹</h3> 
<p><img alt="" height="816" src="https://images2.imgbox.com/3a/f3/F5TjzM43_o.png" width="802"></p> 
<h3>1.4 创建文件初始化工程文件目录</h3> 
<p><img alt="" height="449" src="https://images2.imgbox.com/9b/d6/JL524ZEH_o.png" width="489"></p> 
<h2>二，创建POJO类</h2> 
<p>Product类 ，是一共父类后续物品都继承它</p> 
<pre><code class="language-java">package com.best.pojo;

// 商品类
public class Product {
    private int id;
    private String name;
    private double price;
    private Integer quantity;


    public Product(int id, String name, double price) {
        this.id = id;
        this.name = name;
        this.price = price;
        this.quantity = 0;
    }

    public Integer getQuantity() {
        return quantity;
    }

    public void setQuantity(Integer quantity) {
        this.quantity = quantity;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public double getPrice() {
        return price;
    }

    public void setPrice(double price) {
        this.price = price;
    }
}



</code></pre> 
<h3>2.1  Clothing, Flower,HDD,USB 类都继承Product类</h3> 
<p><img alt="" height="160" src="https://images2.imgbox.com/ff/80/6NQSaj37_o.png" width="273"></p> 
<h4>2.1.1 Clothing</h4> 
<pre><code class="language-java">package com.best.pojo;

// 服装类
public class Clothing extends Product {
    public Clothing(int id, String name, double price) {
        super(id, name, price);
    }
}</code></pre> 
<h4> 2.1.2 HDD</h4> 
<pre><code class="language-java">package com.best.pojo;

// 移动硬盘类
public class HDD extends Product {
    public HDD(int id, String name, double price) {
        super(id, name, price);
    }
}
</code></pre> 
<h4>2.1.3 USB</h4> 
<pre><code class="language-java">package com.best.pojo;

// U盘类
public class USB extends Product {
    public USB(int id, String name, double price) {
        super(id, name, price);
    }
}</code></pre> 
<h4>2.1.4 Flower</h4> 
<pre><code class="language-java">package com.best.pojo;

// 鲜花类
public class Flower extends Product {
    public Flower(int id, String name, double price) {
        super(id, name, price);
    }
}</code></pre> 
<h2>三 模拟数据库数据data </h2> 
<p><img alt="" height="189" src="https://images2.imgbox.com/6f/2f/TzzamfiU_o.png" width="393"></p> 
<p>Data.java</p> 
<pre><code class="language-java">package com.best.data;

import com.best.pojo.*;

import java.util.HashMap;
import java.util.Map;

public class Database {
    private static Map&lt;Integer, Product&gt; products = new HashMap&lt;&gt;();

    static {

        products.put(1, new USB(1, "USB 闪存盘", 1002));
        products.put(2, new HDD(2, "外置硬盘", 3009));
        products.put(3, new Flower(3, "玫瑰花束", 75));
        products.put(4, new Clothing(4, "T恤衫", 99));
    }

    public static Product getProductById(int id) {
        return products.get(id);
    }

    public static Map&lt;Integer, Product&gt; getAllProducts() {
        return products;
    }
}</code></pre> 
<h2>四， 写servlet核心类</h2> 
<h3><span style="color:#fe2c24;">4.1 增加到购物车的业务逻辑</span></h3> 
<h2><span style="color:#fe2c24;">AddToCartServlet.java</span></h2> 
<pre><code class="language-java">package com.best.servlet;

import com.best.data.Database;
import com.best.pojo.Product;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet("/addToCart")
public class AddToCartServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException {
        int productId = Integer.parseInt(request.getParameter("id"));

        HttpSession session = request.getSession();
        List&lt;Product&gt; cart = (List&lt;Product&gt;) session.getAttribute("cart");
        if (cart == null) {
            cart = new ArrayList&lt;&gt;();
            session.setAttribute("cart", cart);
        }


        // 检查购物车中是否已存在相同商品，如果存在则增加数量，否则添加新商品到购物车
        boolean found = false;
        for (Product product : cart) {
            if (product.getId() == productId) {
                product.setQuantity(product.getQuantity() + 1);
                found = true;
                break;
            }
        }

        if (!found) {
            Product product = Database.getProductById(productId);
            product.setQuantity(1);
            cart.add(product);
        }

        response.sendRedirect("displayProducts.jsp");
    }
}</code></pre> 
<p></p> 
<h3><span style="color:#fe2c24;">4.2 删除购物车的业务逻辑</span></h3> 
<h2><span style="color:#fe2c24;">RemoveFromCartServlet.java</span></h2> 
<p></p> 
<pre><code class="language-java">package com.best.servlet;

import com.best.pojo.Product;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;

@WebServlet("/removeFromCart")
public class RemoveFromCartServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // 获取要移除的商品 id
        int productId = Integer.parseInt(request.getParameter("id"));

        // 从 session 中获取购物车列表
        List&lt;Product&gt; cart = (List&lt;Product&gt;) request.getSession().getAttribute("cart");

        // 在购物车中查找要移除的商品，并移除它
        if (cart != null) {
            Iterator&lt;Product&gt; iterator = cart.iterator();
            while (iterator.hasNext()) {
                Product product = iterator.next();
                if (product.getId() == productId) {
                    // 更新商品的数量
                    int quantity = product.getQuantity();
                    if (quantity &gt; 1) {
                        product.setQuantity(quantity - 1);
                    } else {
                        iterator.remove(); // 如果数量为1，则直接移除商品
                    }
                    break;
                }
            }
        }

        // 重定向到查看购物车页面
        response.sendRedirect("viewCart.jsp");
    }
}</code></pre> 
<h2>五，渲染数据 到jsp页面</h2> 
<p><img alt="" height="152" src="https://images2.imgbox.com/10/67/CpKm3pVM_o.png" width="429"></p> 
<h3>5.1 浏览商品的页面  displayProducts.jsp</h3> 
<pre><code class="language-java">&lt;%@ page import="com.best.pojo.Product" %&gt;
&lt;%@ page import="java.util.Map" %&gt;
&lt;%@ page import="com.best.data.Database" %&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;商品&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h2&gt;商品:&lt;/h2&gt;
&lt;ul&gt;
    &lt;%
        Map&lt;Integer, Product&gt; products = Database.getAllProducts();
        for (Product product : products.values()) {
    %&gt;
    &lt;li&gt;&lt;%= product.getName() %&gt; - ￥&lt;%= product.getPrice() %&gt; &lt;a href='addToCart?id=&lt;%= product.getId() %&gt;&amp;viewCart=true'&gt;添加购物车&lt;/a&gt;&lt;/li&gt;
    &lt;% } %&gt;
&lt;/ul&gt;
&lt;a href="viewCart.jsp"&gt;查看购物车&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h3> 5.2 购物车页面 viewCart.jsp</h3> 
<pre><code class="language-java">&lt;%@ page import="java.util.List" %&gt;
&lt;%@ page import="com.best.pojo.Product" %&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;查看购物车&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h2&gt;购物车内容:&lt;/h2&gt;
&lt;ul&gt;
    &lt;%
        int totalCount = 0; // 总数量
        double totalPrice = 0; // 总价钱
        List&lt;Product&gt; cart = (List&lt;Product&gt;) session.getAttribute("cart");
        if (cart != null &amp;&amp; cart.size() &gt; 0) {
            for (Product product : cart) {
                totalCount += product.getQuantity(); // 累加每个商品的数量
                totalPrice += product.getPrice() * product.getQuantity(); // 累加每个商品的总价钱
    %&gt;
    &lt;li&gt;&lt;%= product.getName() %&gt; - ￥&lt;%= product.getPrice()*product.getQuantity() %&gt; - 数量：&lt;%= product.getQuantity() %&gt; &lt;a href='removeFromCart?id=&lt;%= product.getId() %&gt;'&gt;移除&lt;/a&gt;&lt;/li&gt;
    &lt;%
        }
    } else {
    %&gt;
    &lt;li&gt;您的购物车为空&lt;/li&gt;
    &lt;%
        }
    %&gt;
&lt;/ul&gt;
&lt;p&gt;购物车中共有 &lt;%= totalCount %&gt; 件商品。&lt;/p&gt;
&lt;p&gt;购物车总价钱为 ￥&lt;%= totalPrice %&gt;&lt;/p&gt;
&lt;a href="displayProducts.jsp"&gt;继续购物&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<h2>六 最终实现效果</h2> 
<p><img alt="" height="851" src="https://images2.imgbox.com/74/26/zY4IUYSR_o.png" width="1200"></p> 
<p></p> 
<p><img alt="" height="778" src="https://images2.imgbox.com/fc/96/tP4l6ZeG_o.png" width="1033"></p> 
<p>视频演示</p> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="iXMJyJuk-1714995559367" frameborder="0" src="https://live.csdn.net/v/embed/383681" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>javaweb购物车案例</p> 
</div> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f545a5abf16c7acb75abc2312603d6eb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【LeetCode例141】【c语言】环形链表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/823ee295c574098db846049a133d9a5d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2024年前端最新vue大屏开发系列—列表无缝滚动之vue-seamless-scroll，前端开发关键技术</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>