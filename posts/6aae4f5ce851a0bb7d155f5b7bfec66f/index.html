<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python中的递归详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6aae4f5ce851a0bb7d155f5b7bfec66f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python中的递归详解">
  <meta property="og:description" content="文章目录 1.递归函数2.递归流程图3.递归总结4.递归注意事项5.内存栈区堆区(了解内容)6.递归案例1.使用递归实现任意数n的阶乘普通实现递归实现 2. 使用尾递归来实现任意数的阶乘（1） 优化代码1（2）优化代码2 [把尾递归需要的参数值隐藏起来,避免篡改.]（3）优化代码3(扩展) 3.使用递归来完成斐波那契数列 1.递归函数 工作中，我们可能经常会遇到递归函数的使用，今天我们就来深入讲讲什么是递归。
递归函数 : 在函数内部，可以调用其他函数。如果一个函数在内部自己调用自己，这个函数就是递归函数。必须由出口
递 : 去
归 : 回
一去一回叫做递归
def digui(n): print(n,&#34;&lt;==1==&gt;&#34;) if n &gt; 0: digui(n-1) print(n,&#34;&lt;==2==&gt;&#34;) digui(5) #此递归函数开辟了6层空间。去的过程
n = 5 print(5,&#34;&lt;==1==&gt;&#34;) if 5 &gt; 0: digui(5-1) =&gt; digui(4) 代码阻塞在第12行，下面的代码不再执行 n = 4 print(4,&#34;&lt;==1==&gt;&#34;) if 4 &gt; 0: digui(4-1) =&gt; digui(3) 代码阻塞在第12行 n = 3 print(3,&#34;&lt;==1==&gt;&#34;) if 3 &gt; 0: digui(3-1) =&gt; digui(2) 代码阻塞在第12行 n = 2 print(2,&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-24T13:35:58+08:00">
    <meta property="article:modified_time" content="2024-01-24T13:35:58+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python中的递归详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_1" rel="nofollow">1.递归函数</a></li><li><a href="#2_47" rel="nofollow">2.递归流程图</a></li><li><a href="#3_56" rel="nofollow">3.递归总结</a></li><li><a href="#4_82" rel="nofollow">4.递归注意事项</a></li><li><a href="#5_99" rel="nofollow">5.内存栈区堆区(了解内容)</a></li><li><a href="#6_124" rel="nofollow">6.递归案例</a></li><li><ul><li><a href="#1n_125" rel="nofollow">1.使用递归实现任意数n的阶乘</a></li><li><ul><li><a href="#_127" rel="nofollow">普通实现</a></li><li><a href="#_142" rel="nofollow">递归实现</a></li></ul> 
   </li><li><a href="#2__180" rel="nofollow">2. 使用尾递归来实现任意数的阶乘</a></li><li><ul><li><a href="#1_1_213" rel="nofollow">（1） 优化代码1</a></li><li><a href="#22__221" rel="nofollow">（2）优化代码2 [把尾递归需要的参数值隐藏起来,避免篡改.]</a></li><li><a href="#33_231" rel="nofollow">（3）优化代码3(扩展)</a></li></ul> 
   </li><li><a href="#3_251" rel="nofollow">3.使用递归来完成斐波那契数列</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_1"></a>1.递归函数</h2> 
<p>工作中，我们可能经常会遇到递归函数的使用，今天我们就来深入讲讲什么是递归。</p> 
<p>递归函数 : 在函数内部，可以调用其他函数。如果一个函数在内部自己调用自己，这个函数就是递归函数。必须由出口<br> 递 : 去<br> 归 : 回<br> 一去一回叫做递归</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">digui</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        digui<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span>

digui<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre> 
<p>#此递归函数开辟了6层空间。去的过程</p> 
<pre><code class="prism language-python">n <span class="token operator">=</span> <span class="token number">5</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token number">5</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>   digui<span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  digui<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> 代码阻塞在第<span class="token number">12</span>行，下面的代码不再执行
n <span class="token operator">=</span> <span class="token number">4</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token number">4</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>   digui<span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  digui<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> 代码阻塞在第<span class="token number">12</span>行
n <span class="token operator">=</span> <span class="token number">3</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token number">3</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>   digui<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  digui<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 代码阻塞在第<span class="token number">12</span>行
n <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token number">2</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>   digui<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  digui<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 代码阻塞在第<span class="token number">12</span>行
n <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>   digui<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  digui<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> 代码阻塞在第<span class="token number">12</span>行
n <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"&lt;==1==&gt;"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span> 不成立 <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span> 到此最后一层函数空间彻底执行完毕   这是在一个空间里面打印的

<span class="token comment"># 回的过程，从阻塞的地方代码往下走</span>
回到上一层函数空间  n <span class="token operator">=</span> <span class="token number">1</span> 代码在第<span class="token number">12</span>行的位置<span class="token punctuation">,</span>继续往下执行  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span>
回到上一层函数空间  n <span class="token operator">=</span> <span class="token number">2</span> 代码在第<span class="token number">12</span>行的位置<span class="token punctuation">,</span>继续往下执行  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span>
回到上一层函数空间  n <span class="token operator">=</span> <span class="token number">3</span> 代码在第<span class="token number">12</span>行的位置<span class="token punctuation">,</span>继续往下执行  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span>
回到上一层函数空间  n <span class="token operator">=</span> <span class="token number">4</span> 代码在第<span class="token number">12</span>行的位置<span class="token punctuation">,</span>继续往下执行  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span>
回到上一层函数空间  n <span class="token operator">=</span> <span class="token number">5</span> 代码在第<span class="token number">12</span>行的位置<span class="token punctuation">,</span>继续往下执行  <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"&lt;==2==&gt;"</span><span class="token punctuation">)</span>
</code></pre> 
<p>到此递归函数执行结束…<br> 打印 543210012345</p> 
<p>调用函数就得开辟空间，每次开辟的栈帧空间,代码必须全部执行完毕之后才释放空间,再回到上一个栈帧执行没结束的代码<br> <img src="https://images2.imgbox.com/2b/b8/VzF9R9bB_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_47"></a>2.递归流程图</h2> 
<p><img src="https://images2.imgbox.com/39/a7/FKOFwPR8_o.png" alt="在这里插入图片描述"></p> 
<p>每次调用函数时,都要单独在内存当中开辟空间,叫做栈帧空间,以运行函数中的代码</p> 
<h2><a id="3_56"></a>3.递归总结</h2> 
<pre><code>(1)递归实际上是不停的开辟栈帧空间和释放栈帧空间的过程,开辟就是去的过程,释放就是回的过程
(2)递归什么时候触发归的过程:
    1.当最后一层栈帧空间执行结束的时候,触发归的过程.
    2.当遇到return返回值的时候终止当前函数,触发归的过程.
(3)递归不能无限的去开辟空间,可能造成内存溢出,蓝屏死机的情况, 所以一定要给予跳出的条件(如果递归的层数太大,不推荐使用)
(4)开辟的一个个栈帧空间,数据是彼此独立不共享的.
</code></pre> 
<p>递归不能不限开辟空间<br> 官方说法最大默认是1000层. 但实际要看具体设备硬件性能<br> <img src="https://images2.imgbox.com/7b/e4/B7UvO6YK_o.png" alt="在这里插入图片描述"></p> 
<p>def deepfunc():<br> deepfunc()<br> deepfunc()</p> 
<p>可以通过sys.setrecursionlimit()进行设置,但是一般默认不会超过3925-3929这个范围。</p> 
<p>我这台电脑最大递归深度996层<br> <img src="https://images2.imgbox.com/a5/bc/A11MjuVa_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4_82"></a>4.递归注意事项</h2> 
<pre><code>函数调用的过程就是开辟栈帧和释放栈帧的过程,调用时开辟栈帧空间,结束时释放
(言外之意不结束这层栈帧不释放)
递归每次调用都会开辟一个栈帧,如果递归的层数过多,不建议使用,容易内存溢出
每次开辟的栈帧空间,代码必须全部执行完毕之后才释放空间,在回到上一个栈帧执行没结束的代码
如果使用递归 , 需要给与一个跳出的条件,不能无限递归
</code></pre> 
<p>尾递归:<br> 在函数返回的时候，调用其本身，并且，return语句不包含表达式。<br> (简单来说是递归函数,且只调用自己的非表达式)<br> 尾递归意义:<br> 使递归本身无论调用多少次，都只占用一个栈帧，不会出现栈溢出的情况.(需要Python解释器支持)</p> 
<p>尾递归流程：<br> <img src="https://images2.imgbox.com/b1/6d/QeEOLsaK_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="5_99"></a>5.内存栈区堆区(了解内容)</h2> 
<p>单独讲栈堆是数据结构<br> 栈:后进先出的一种数据结构<br> 堆:排序后的一种树状数据结构</p> 
<p>栈区堆区是内存空间<br> 栈区:按照后进先出的数据结构(栈),无论创建或销毁都是自动为数据分配内存,释放内存<br> (系统自动做的)<br> 堆区:按照排序后的树状数据结构(堆),可优先取出必要数据,无论创建或销毁都是手动分配内存,释放内存(程序员手动做的)<br> –内存中的栈区 : 自动分配 自动释放<br> –内存中的堆区 : 手动分配 手动释放</p> 
<p>运行程序时在内存中执行,会因为数据类型的不同而在内存的不同区域运行<br> 因不同语言对内存划分的机制不一,但大体来讲,有如下四大区域</p> 
<p>–栈区: 分配局部变量空间.<br> –堆区: 是用于手动分配程序员申请的内存空间.<br> –静态区(全局栈区): 分配静态变量，全局变量空间.<br> –代码区(只读区,常量区): 分配常量和程序代码空间的.</p> 
<p>栈区 堆区 静态区 代码区 都是内存中的一段空间</p> 
<h2><a id="6_124"></a>6.递归案例</h2> 
<h3><a id="1n_125"></a>1.使用递归实现任意数n的阶乘</h3> 
<h4><a id="_127"></a>普通实现</h4> 
<pre><code class="prism language-python">
<span class="token comment"># 5! =5 *4*3*2*1</span>
n <span class="token operator">=</span> <span class="token number">5</span>
total <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    total <span class="token operator">*=</span> i
<span class="token keyword">print</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token comment"># 120</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e5/7f/KHUOwUir_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_142"></a>递归实现</h4> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">jiecheng</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token keyword">return</span> jiecheng<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> n
    
<span class="token keyword">print</span><span class="token punctuation">(</span>jiecheng<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># jiecheng(1) =&gt; 1 </span>
<span class="token comment"># jiecheng(2) =&gt; jiecheng(1) * 2 =&gt; 1 * 2</span>
<span class="token comment"># jiecheng(3) =&gt; jiecheng(2) * 3 =&gt; 1 * 2 * 3</span>
<span class="token comment"># jiecheng(4) =&gt; jiecheng(3) * 4 =&gt; 1 * 2 * 3 * 4</span>
<span class="token comment"># jiecheng(5) =&gt; jiecheng(4) * 5 =&gt; 1 * 2 * 3 * 4 * 5</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>jiecheng<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>代码解析:<br> 去的过程:<br> n = 5 return jiecheng(n-1) * n =&gt; jiecheng(4) * 5<br> n = 4 return jiecheng(n-1) * n =&gt; jiecheng(3) * 4<br> n = 3 return jiecheng(n-1) * n =&gt; jiecheng(2) * 3<br> n = 2 return jiecheng(n-1) * n =&gt; jiecheng(1) * 2<br> n = 1 return 1</p> 
<p>回的过程:<br> n = 2 return jiecheng(1) * 2 =&gt; 1 * 2<br> n = 3 return jiecheng(2) * 3 =&gt; 1 * 2 * 3<br> n = 4 return jiecheng(3) * 4 =&gt; 1 * 2 * 3 * 4<br> n = 5 return jiecheng(4) * 5 =&gt; 1 * 2 * 3 * 4 * 5</p> 
<p>到此程序结束:<br> 返回 1 * 2 * 3 * 4 * 5</p> 
<p>print(“&lt;====================&gt;”)</p> 
<h3><a id="2__180"></a>2. 使用尾递归来实现任意数的阶乘</h3> 
<p>return 在哪调用,在哪返回<br> 自己调用自己,且返回时非运算表达式,只是函数本身<br> 特点:<br> 尾递归只开辟一个空间,不会无限的开辟,在一个空间里面去计算最后的结果进行返回,比较节省空间,有的解释器支持尾递归的调用特点<br> 但是cpython解释器目前不支持<br> 写法:<br> 所有运算的值都在函数的参数中计算完毕,最后返回运算的参数;</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">jiecheng</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>endval<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> endval
    <span class="token keyword">return</span> jiecheng<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">,</span> n <span class="token operator">*</span> endval<span class="token punctuation">)</span>
res <span class="token operator">=</span> jiecheng<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 5*4*3*2*1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/09/e8/AzVc4bdx_o.png" alt="在这里插入图片描述"></p> 
<p>代码解析:<br> 去的过程<br> n = 5 ,endval = 1 return jiecheng(n-1 , n * endval) =&gt; jiecheng(4,5<em>1) =&gt; 5</em>1<em>4</em>3<em>2<br> n = 4 ,endval = 5</em>1 return jiecheng(n-1 , n * endval) =&gt; jiecheng(3,5<em>1</em>4) =&gt; 5<em>1</em>4<em>3</em>2<br> n = 3 ,endval = 5<em>1</em>4 return jiecheng(n-1 , n * endval) =&gt; jiecheng(2,5<em>1</em>4<em>3) =&gt; 5</em>1<em>4</em>3<em>2<br> n = 2 ,endval = 5</em>1<em>4</em>3 return jiecheng(n-1 , n * endval) =&gt; jiecheng(1,5<em>1</em>4<em>3</em>2) =&gt; 5<em>1</em>4<em>3</em>2<br> n = 1 ,endval = 5<em>1</em>4<em>3</em>2 if n &lt;= 1 成立 return endval<br> endval = 5<em>1</em>4<em>3</em>2<br> 最下层空间的返回值 是 5<em>4</em>3<em>2</em>1 最上层接收到的返回值也是 5<em>4</em>3<em>2</em>1<br> 最下层和最上层返回的结果是一致的,所以对于尾递归来说,只需要考虑去的过程,无需考虑回的过程即可完成;</p> 
<h4><a id="1_1_213"></a>（1） 优化代码1</h4> 
<p>def jiecheng(n,endval=1):<br> if n &lt;= 1:<br> return endval<br> return jiecheng(n-1 , n * endval)<br> res = jiecheng(5,100) # 5<em>4</em>3<em>2</em>1<br> print(res,“&lt;00000&gt;”)</p> 
<h4><a id="22__221"></a>（2）优化代码2 [把尾递归需要的参数值隐藏起来,避免篡改.]</h4> 
<p>def outer(n):<br> def jiecheng(n,endval=1):<br> if n &lt;= 1:<br> return endval<br> return jiecheng(n-1 , n * endval)<br> return jiecheng(n,1)# 120 返回的是结果，不是闭包<br> print(outer(5))</p> 
<h4><a id="33_231"></a>（3）优化代码3(扩展)</h4> 
<p>闭包实现</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    endval <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">def</span> <span class="token function">jiecheng</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">nonlocal</span> endval
        <span class="token keyword">if</span> n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> endval
        endval <span class="token operator">*=</span> n 
        <span class="token keyword">return</span> jiecheng<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jiecheng
func <span class="token operator">=</span> outer<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"&lt;===111==&gt;"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"&lt;================&gt;"</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3_251"></a>3.使用递归来完成斐波那契数列</h3> 
<p>1 1 2 3 5 8 13 21 34 …</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">feib</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
        
    <span class="token comment"># 上一个结果 + 上上个结果</span>
    <span class="token keyword">return</span> feib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> feib<span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>feib<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>代码解析:<br> n = 5 feib(5) =&gt; 3 + 2 =&gt; return 5<br> feib(4) + feib(3)<br> feib(3)+feib(2) feib(2)+feib(1) =&gt; 1 + 1 =&gt; 2<br> feib(2)+feib(1)+feib(2) =&gt; 1 + 1 + 1 =&gt; 3</p> 
<p>可以直接计算出来斐波那契数列 第几个值是多少<br> <img src="https://images2.imgbox.com/bf/8d/JKWaqtIt_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cd157850276b72358404d28b3f3e615d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MacOS X 安装免费的 LaTex 环境</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/07183cb2a9bcc074dc0b261e8ffeb6cb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python 学习之 request 库的基本使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>