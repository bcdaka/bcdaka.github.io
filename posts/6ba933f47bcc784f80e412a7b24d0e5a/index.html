<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C语言】【数据结构】项目实践——贪吃蛇游戏（超详细） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6ba933f47bcc784f80e412a7b24d0e5a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C语言】【数据结构】项目实践——贪吃蛇游戏（超详细）">
  <meta property="og:description" content="前言
本篇博客我们来实现一个小游戏项目——贪吃蛇，相信肯定很多人都玩过，那么整个贪吃蛇是怎么实现出来的那，这个项目用到了很多方面的知识：C语言函数、枚举、结构体、动态内存管理、预处理指令、链表、Win32 API等。我们就通过这篇博客一步一步去分析，实现贪吃蛇。
​💓 个人主页：小张同学zkf
⏩ 文章专栏：数据结构 C语言
若有问题 评论区见📝
🎉欢迎大家点赞👍收藏⭐文章
目录
1.游戏背景
2.Win32 API介绍
2.1Win32 API
2.2控制台程序
2.3控制台屏幕上的坐标COORD
2.4GetStdHandle
2.5GetConsoleCursorInfo
2.6CONSOLE_CURSOR_INFO
2.7SetConsoleCursorInfo
2.8SetConsoleCursorPosition
2.9GetAsyncKeyState 3.贪吃蛇游戏思路 3.1游戏窗口
3.1.1本地化
3.1.2类项
3.1.3setlocale函数
3.1.4宽字符的打印
3.1.5地图坐标
3.2蛇身和食物
3.3数据结构设计 3.4游戏流程设计
4.核心逻辑分析
4.1游戏主逻辑
4.2 游戏开始（GameStart）
4.2.1打印欢迎界面
4.2.2创建地图 4.2.3初始化蛇身
4.2.4创建第一个食物
4.3游戏运行（GameRun）
4.3.1KEY_PRESS
4.3.2PrintHelpInfo
4.3.3蛇身移动（SnakeMove）
4.3.3.1NextIsFood
4.3.3.2 EatFood
4.3.3.3NoFood
4.3.3.4KillByWall
4.3.3.5KillBySelf
4.4游戏结束
5.参考代码
1.游戏背景 贪吃蛇是一款休闲益智类游戏，有PC和手机等多平台版本。既简单又耐玩。该游戏通过控制蛇头方向吃食物，从而使得蛇变得越来越长，贪吃蛇是久负盛名的游戏，它也和俄罗斯方块，扫雷等游戏位列经典游戏的行列。 2.Win32 API介绍 实现贪吃蛇不仅需要C语言与数据结构的一些知识，还要会使用到的一些Win32 API知识，接下来我们就看一下需要用到哪些知识 2.1Win32 API Windows 这个多作业系统除了协调应用程序的执行、分配内存、管理资源之外， 它同时也是一个很大的服务中心，调用这个服务中心的各种服务（每一种服务就是一个函数），可以帮应用程序达到开启视窗、描绘图形、使用周边设备等目的，由于这些函数服务的对象是应用程序(Application)， 所以便称之为 Application Programming Interface，简称 API 函数 。 WIN32 API也就是Microsoft Window32位平台的应用程序编程接口 。 2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-10T15:43:11+08:00">
    <meta property="article:modified_time" content="2024-05-10T15:43:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C语言】【数据结构】项目实践——贪吃蛇游戏（超详细）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#4da8ee;">前言</span></p> 
 <p><span style="color:#0d0016;">本篇博客我们来实现一个小游戏项目——贪吃蛇，相信肯定很多人都玩过，那么整个贪吃蛇是怎么实现出来的那，这个项目用到了很多方面的知识：</span><span style="color:#1f2329;">C语言函数、枚举、结构体、动态内存管理、预处理指令、链表、Win32 API等。</span><span style="color:#0d0016;">我们就通过这篇博客一步一步去分析，实现贪吃蛇。</span></p> 
 <p><span style="color:#0d0016;">​💓 个人主页：<a class="link-info" href="https://blog.csdn.net/m0_74091744?spm=1010.2135.3001.5421" title="小张同学zkf">小张同学zkf</a><br> ⏩ 文章专栏：<a class="link-info" href="https://blog.csdn.net/m0_74091744/category_12630139.html?spm=1001.2014.3001.5482" title="数据结构">数据结构</a>   <a class="link-info" href="https://blog.csdn.net/m0_74091744/category_12586559.html?spm=1001.2014.3001.5482" title="C语言">C语言</a><br> 若有问题 评论区见📝<br> 🎉欢迎大家点赞👍收藏⭐文章</span></p> 
 <p style="text-align:center;"><span style="color:#0d0016;"><img alt="" class="left" src="https://images2.imgbox.com/32/8f/AiYc4JOW_o.gif"></span></p> 
</blockquote> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bf/8e/lBrLlPsK_o.gif"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/da/36/RBd7hsKT_o.gif"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E6%B8%B8%E6%88%8F%E8%83%8C%E6%99%AF-toc" style="margin-left:0px;"><a href="#1.%E6%B8%B8%E6%88%8F%E8%83%8C%E6%99%AF" rel="nofollow">1.游戏背景</a></p> 
<p id="2.Win32%20API%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#2.Win32%20API%E4%BB%8B%E7%BB%8D" rel="nofollow">2.Win32 API介绍</a></p> 
<p id="2.1Win32%20API-toc" style="margin-left:40px;"><a href="#2.1Win32%20API" rel="nofollow">2.1Win32 API</a></p> 
<p id="2.2%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F-toc" style="margin-left:40px;"><a href="#2.2%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F" rel="nofollow">2.2控制台程序</a></p> 
<p id="2.3%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E5%9D%90%E6%A0%87COORD-toc" style="margin-left:40px;"><a href="#2.3%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E5%9D%90%E6%A0%87COORD" rel="nofollow">2.3控制台屏幕上的坐标COORD</a></p> 
<p id="2.4GetStdHandle-toc" style="margin-left:40px;"><a href="#2.4GetStdHandle" rel="nofollow">2.4GetStdHandle</a></p> 
<p id="2.5GetConsoleCursorInfo-toc" style="margin-left:40px;"><a href="#2.5GetConsoleCursorInfo" rel="nofollow">2.5GetConsoleCursorInfo</a></p> 
<p id="2.6CONSOLE_CURSOR_INFO-toc" style="margin-left:40px;"><a href="#2.6CONSOLE_CURSOR_INFO" rel="nofollow">2.6CONSOLE_CURSOR_INFO</a></p> 
<p id="2.7SetConsoleCursorInfo-toc" style="margin-left:40px;"><a href="#2.7SetConsoleCursorInfo" rel="nofollow">2.7SetConsoleCursorInfo</a></p> 
<p id="2.8SetConsoleCursorPosition-toc" style="margin-left:40px;"><a href="#2.8SetConsoleCursorPosition" rel="nofollow">2.8SetConsoleCursorPosition</a></p> 
<p id="2.9GetAsyncKeyState%20%C2%A0-toc" style="margin-left:40px;"><a href="#2.9GetAsyncKeyState%20%C2%A0" rel="nofollow">2.9GetAsyncKeyState  </a></p> 
<p id="3.%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E6%80%9D%E8%B7%AF%C2%A0-toc" style="margin-left:0px;"><a href="#3.%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E6%80%9D%E8%B7%AF%C2%A0" rel="nofollow">3.贪吃蛇游戏思路 </a></p> 
<p id="3.1%E6%B8%B8%E6%88%8F%E7%AA%97%E5%8F%A3-toc" style="margin-left:40px;"><a href="#3.1%E6%B8%B8%E6%88%8F%E7%AA%97%E5%8F%A3" rel="nofollow">3.1游戏窗口</a></p> 
<p id="3.1.1%3Clocale.h%3E%E6%9C%AC%E5%9C%B0%E5%8C%96-toc" style="margin-left:80px;"><a href="#3.1.1%3Clocale.h%3E%E6%9C%AC%E5%9C%B0%E5%8C%96" rel="nofollow">3.1.1本地化</a></p> 
<p id="3.1.2%E7%B1%BB%E9%A1%B9-toc" style="margin-left:80px;"><a href="#3.1.2%E7%B1%BB%E9%A1%B9" rel="nofollow">3.1.2类项</a></p> 
<p id="3.1.3setlocale%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#3.1.3setlocale%E5%87%BD%E6%95%B0" rel="nofollow">3.1.3setlocale函数</a></p> 
<p id="%C2%A03.1.4%E5%AE%BD%E5%AD%97%E7%AC%A6%E7%9A%84%E6%89%93%E5%8D%B0-toc" style="margin-left:80px;"><a href="#%C2%A03.1.4%E5%AE%BD%E5%AD%97%E7%AC%A6%E7%9A%84%E6%89%93%E5%8D%B0" rel="nofollow"> 3.1.4宽字符的打印</a></p> 
<p id="3.1.5%E5%9C%B0%E5%9B%BE%E5%9D%90%E6%A0%87-toc" style="margin-left:80px;"><a href="#3.1.5%E5%9C%B0%E5%9B%BE%E5%9D%90%E6%A0%87" rel="nofollow">3.1.5地图坐标</a></p> 
<p id="%C2%A03.2%E8%9B%87%E8%BA%AB%E5%92%8C%E9%A3%9F%E7%89%A9-toc" style="margin-left:40px;"><a href="#%C2%A03.2%E8%9B%87%E8%BA%AB%E5%92%8C%E9%A3%9F%E7%89%A9" rel="nofollow"> 3.2蛇身和食物</a></p> 
<p id="3.3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%20%C2%A0-toc" style="margin-left:40px;"><a href="#3.3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%20%C2%A0" rel="nofollow">3.3数据结构设计  </a></p> 
<p id="3.4%E6%B8%B8%E6%88%8F%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1-toc" style="margin-left:40px;"><a href="#3.4%E6%B8%B8%E6%88%8F%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1" rel="nofollow">3.4游戏流程设计</a></p> 
<p id="4.%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%E5%88%86%E6%9E%90-toc" style="margin-left:0px;"><a href="#4.%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%E5%88%86%E6%9E%90" rel="nofollow">4.核心逻辑分析</a></p> 
<p id="4.1%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91-toc" style="margin-left:40px;"><a href="#4.1%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91" rel="nofollow">4.1游戏主逻辑</a></p> 
<p id="4.2%C2%A0%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B%EF%BC%88GameStart%EF%BC%89-toc" style="margin-left:40px;"><a href="#4.2%C2%A0%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B%EF%BC%88GameStart%EF%BC%89" rel="nofollow">4.2 游戏开始（GameStart）</a></p> 
<p id="4.2.1%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px;"><a href="#4.2.1%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E7%95%8C%E9%9D%A2" rel="nofollow">4.2.1打印欢迎界面</a></p> 
<p id="4.2.2%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%C2%A0-toc" style="margin-left:80px;"><a href="#4.2.2%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%C2%A0" rel="nofollow">4.2.2创建地图 </a></p> 
<p id="4.2.3%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87%E8%BA%AB-toc" style="margin-left:80px;"><a href="#4.2.3%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87%E8%BA%AB" rel="nofollow">4.2.3初始化蛇身</a></p> 
<p id="4.2.4%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A3%9F%E7%89%A9-toc" style="margin-left:80px;"><a href="#4.2.4%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A3%9F%E7%89%A9" rel="nofollow">4.2.4创建第一个食物</a></p> 
<p id="%C2%A04.3%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C%EF%BC%88GameRun%EF%BC%89-toc" style="margin-left:40px;"><a href="#%C2%A04.3%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C%EF%BC%88GameRun%EF%BC%89" rel="nofollow"> 4.3游戏运行（GameRun）</a></p> 
<p id="4.3.1KEY_PRESS-toc" style="margin-left:80px;"><a href="#4.3.1KEY_PRESS" rel="nofollow">4.3.1KEY_PRESS</a></p> 
<p id="4.3.2PrintHelpInfo-toc" style="margin-left:80px;"><a href="#4.3.2PrintHelpInfo" rel="nofollow">4.3.2PrintHelpInfo</a></p> 
<p id="%C2%A04.3.3%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8%EF%BC%88SnakeMove%EF%BC%89-toc" style="margin-left:80px;"><a href="#%C2%A04.3.3%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8%EF%BC%88SnakeMove%EF%BC%89" rel="nofollow"> 4.3.3蛇身移动（SnakeMove）</a></p> 
<p id="4.3.3.1NextIsFood-toc" style="margin-left:120px;"><a href="#4.3.3.1NextIsFood" rel="nofollow">4.3.3.1NextIsFood</a></p> 
<p id="4.3.3.2%C2%A0EatFood-toc" style="margin-left:120px;"><a href="#4.3.3.2%C2%A0EatFood" rel="nofollow">4.3.3.2 EatFood</a></p> 
<p id="4.3.3.3NoFood-toc" style="margin-left:120px;"><a href="#4.3.3.3NoFood" rel="nofollow">4.3.3.3NoFood</a></p> 
<p id="4.3.3.4KillByWall-toc" style="margin-left:120px;"><a href="#4.3.3.4KillByWall" rel="nofollow">4.3.3.4KillByWall</a></p> 
<p id="4.3.3.5KillBySelf-toc" style="margin-left:120px;"><a href="#4.3.3.5KillBySelf" rel="nofollow">4.3.3.5KillBySelf</a></p> 
<p id="4.4%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F-toc" style="margin-left:40px;"><a href="#4.4%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F" rel="nofollow">4.4游戏结束</a></p> 
<p id="5.%E5%8F%82%E8%80%83%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#5.%E5%8F%82%E8%80%83%E4%BB%A3%E7%A0%81" rel="nofollow">5.参考代码</a></p> 
<p id="%C2%A0-toc" style="margin-left:80px;"><a href="#%C2%A0" rel="nofollow"> </a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<h2 id="1.%E6%B8%B8%E6%88%8F%E8%83%8C%E6%99%AF">1.游戏背景</h2> 
<p>贪吃蛇是一款休闲益智类游戏，有PC和手机等多平台版本。既简单又耐玩。该游戏通过控制蛇头方向吃食物，从而使得蛇变得越来越长，<span style="color:#1f2329;">贪吃蛇是久负盛名的游戏，它也和俄罗斯方块，扫雷等游戏位列经典游戏的行列。 </span></p> 
<p><img alt="" src="https://images2.imgbox.com/16/e1/kAfW1XtF_o.gif"></p> 
<hr> 
<p></p> 
<h2 id="2.Win32%20API%E4%BB%8B%E7%BB%8D"><span style="color:#1f2329;">2.Win32 API介绍</span></h2> 
<div> 
 <span style="color:#1f2329;">实现贪吃蛇不仅需要C语言与数据结构的一些知识，还要会使用到的一些Win32 API知识，接下来我们就看一下需要用到哪些知识</span> 
</div> 
<div> 
 <hr> 
 <p></p> 
</div> 
<h3 id="2.1Win32%20API"><span style="color:#1f2329;">2.1Win32 API </span></h3> 
<div> 
 <span style="color:#1f2329;">Windows 这个多作业系统除了协调应用程序的执行、分配内存、管理资源之外， 它同时也是一个很大的服务中心，调用这个服务中心的各种服务（每一种服务就是一个函数），可以帮应用程序达到开启视窗、描绘图形、使用周边设备等目的，由于这些函数服务的对象是应用程序(Application)， 所以便称之为 Application Programming Interface，简称 </span> 
 <strong><span style="color:#fe2c24;">API 函数</span></strong> 
 <span style="color:#1f2329;">。</span> 
 <strong><span style="color:#fe2c24;"><span style="background-color:#38d8f0;">WIN32 API也就是Microsoft Window32位平台的应用程序编程接口</span></span></strong> 
 <span style="color:#1f2329;">。</span> 
</div> 
<div> 
 <hr> 
 <p></p> 
</div> 
<h3 id="2.2%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F"><span style="color:#1f2329;">2.2控制台程序</span></h3> 
<div> 
 <span style="color:#1f2329;">平常我们运行起来的黑框程序其实就是控制台程序 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">我们可以使用cmd命令来设置控制台窗口的长宽：设置控制台窗口的大小，30行，100列</span> 
</div> 
<div> 
 <img alt="" height="779" src="https://images2.imgbox.com/08/c9/WvMowuNQ_o.png" width="1200"> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">mode con cols=</span> 
   <span style="color:#986801;">100</span> 
   <span style="color:#2b2f36;"> lines=</span> 
   <span style="color:#986801;">30 </span> 
  </div> 
 </div> 
</blockquote> 
<p> 通过这个命令可以把屏幕控制在100列的长度，30行宽度</p> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/mode" rel="nofollow" title="mode命令">mode命令</a></p> 
<div> 
 <span style="color:#1f2329;">也可以通过命令设置控制台窗口的名字</span> 
</div> 
<blockquote> 
 <p><span style="color:#2b2f36;">title </span><span style="color:#2b2f36;">贪吃蛇</span></p> 
</blockquote> 
<p><img alt="" height="79" src="https://images2.imgbox.com/b6/37/xEYglHXK_o.png" width="465"></p> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/title" rel="nofollow" title="title命令">title命令</a></p> 
<p><span style="color:#1f2329;">这些能在控制台窗口执行的命令，也可以调用C语言函数system来执行。例如：</span></p> 
<blockquote> 
 <p></p> 
 <div> 
  <span style="color:#4078f2;">#</span> 
  <span style="color:#a626a4;">include </span> 
  <span style="color:#50a14f;">&lt;stdio.h&gt; </span> 
 </div> 
 <div> 
  <span style="color:#986801;">int </span> 
  <span style="color:#4078f2;">main</span> 
  <span style="color:#2b2f36;">() </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{<!-- --></span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置控制台窗⼝的⻓</em></span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>宽：设置控制台窗⼝的⼤⼩，</em></span> 
   <span style="color:#a0a1a7;"><em>30</em></span> 
   <span style="color:#a0a1a7;"><em>⾏，</em></span> 
   <span style="color:#a0a1a7;"><em>100</em></span> 
   <span style="color:#a0a1a7;"><em>列 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">system(</span> 
   <span style="color:#50a14f;">"mode con cols=100 lines=30"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置</em></span> 
   <span style="color:#a0a1a7;"><em>cmd</em></span> 
   <span style="color:#a0a1a7;"><em>窗⼝名称 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">system(</span> 
   <span style="color:#50a14f;">"title </span> 
   <span style="color:#50a14f;">贪吃蛇</span> 
   <span style="color:#50a14f;">"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">return </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">}</span> 
  </div> 
 </div> 
</blockquote> 
<hr> 
<h3 id="2.3%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E5%9D%90%E6%A0%87COORD">2.3<span style="color:#1f2329;">控制台屏幕上的坐标</span><span style="color:#fe2c24;">COORD</span></h3> 
<div> 
 <span style="color:#1f2329;">COORD </span> 
 <span style="color:#fe2c24;">是Windows API中定义的一个结构体</span> 
 <span style="color:#1f2329;">，表示一个字符在控制台屏幕幕缓冲区上的坐标，坐标系(0，0) 的原点位于缓冲区的顶部左侧单元格。</span> 
</div> 
<div> 
 <img alt="" height="371" src="https://images2.imgbox.com/2e/6b/cQiTXvgm_o.png" width="600"> 
</div> 
<div></div> 
<div></div> 
<p><span style="color:#1f2329;">COORD类型的声明： </span></p> 
<blockquote> 
 <div> 
  <span style="color:#a626a4;">typedef struct</span> 
  <span style="color:#2b2f36;"> _</span> 
  <span style="color:#4078f2;">COORD</span> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">SHORT X; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">SHORT Y; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} COORD, *PCOORD; </span> 
 </div> 
</blockquote> 
<p><span style="color:#1f2329;">给坐标赋值： </span> </p> 
<blockquote> 
 <div> 
  <span style="color:#2b2f36;">COORD pos = { </span> 
  <span style="color:#986801;">10</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">15</span> 
  <span style="color:#2b2f36;"> };</span> 
 </div> 
</blockquote> 
<hr> 
<h3 id="2.4GetStdHandle">2.4GetStdHandle</h3> 
<blockquote> 
 <div> 
  <span style="color:#646a73;">GetStdHandle是一个Windows API函数。它用于从一个特定的标准设备（标准输入、标准输出或标准错误）中取得一个</span> 
  <strong><span style="color:#fe2c24;">句柄</span></strong> 
  <span style="color:#646a73;">（用来标识不同设备的数值），使用这个句柄可以操作设备。 </span> 
 </div> 
</blockquote> 
<p> 参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/console/getstdhandle" rel="nofollow" title="GetStdHandle">GetStdHandle</a></p> 
<blockquote> 
 <div></div> 
 <div> 
  <span style="color:#2b2f36;">HANDLE </span> 
  <span style="color:#4078f2;">GetStdHandle</span> 
  <span style="color:#2b2f36;">(DWORD nStdHandle); </span> 
 </div> 
</blockquote> 
<p>实例：</p> 
<blockquote> 
 <div> 
  <span style="color:#2b2f36;">HANDLE hOutput = </span> 
  <span style="color:#0184bb;">NULL</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>获取标准输出的句柄</em></span> 
  <span style="color:#a0a1a7;"><em>(</em></span> 
  <span style="color:#a0a1a7;"><em>⽤来标识不同设备的数值</em></span> 
  <span style="color:#a0a1a7;"><em>) </em></span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">hOutput = GetStdHandle(STD_OUTPUT_HANDLE); </span> 
 </div> 
</blockquote> 
<hr> 
<h3 id="2.5GetConsoleCursorInfo">2.5<span style="color:#0d0016;">GetConsoleCursorInfo</span><span style="color:#336df4;"> </span></h3> 
<p><span style="color:#1f2329;">这个也是API函数，作用是检索有关指定控制台屏幕缓冲区的</span><strong><span style="color:#fe2c24;">光标大小</span></strong><span style="color:#1f2329;">和</span><strong><span style="color:#fe2c24;">可见性</span></strong><span style="color:#1f2329;">的信息 </span></p> 
<blockquote> 
 <p></p> 
 <div> 
  <span style="color:#2b2f36;">BOOL WINAPI </span> 
  <span style="color:#4078f2;">GetConsoleCursorInfo</span> 
  <span style="color:#2b2f36;">( </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> HANDLE hConsoleOutput, </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> PCONSOLE_CURSOR_INFO lpConsoleCursorInfo </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">PCONSOLE_CURSOR_INFO </span> 
  <span style="color:#2b2f36;">是指向 </span> 
  <span style="color:#336df4;">CONSOLE_CURSOR_INFO </span> 
  <span style="color:#2b2f36;">结构的指针，该结构接收有关主机游标（光标）的信息</span> 
 </div> 
</blockquote> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/console/getconsolecursorinfo" rel="nofollow" title="GetConsoleCursorInfo">GetConsoleCursorInfo</a></p> 
<p>实例</p> 
<blockquote> 
 <div> 
  <span style="color:#2b2f36;">HANDLE hOutput = </span> 
  <span style="color:#0184bb;">NULL</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>获取标准输出的句柄</em></span> 
  <span style="color:#a0a1a7;"><em>(</em></span> 
  <span style="color:#a0a1a7;"><em>⽤来标识不同设备的数值</em></span> 
  <span style="color:#a0a1a7;"><em>) </em></span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">hOutput = </span> 
  <span style="color:#c18401;">GetStdHandle</span> 
  <span style="color:#2b2f36;">(STD_OUTPUT_HANDLE); </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">CONSOLE_CURSOR_INFO CursorInfo; </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#c18401;">GetConsoleCursorInfo</span> 
  <span style="color:#2b2f36;">(hOutput, &amp;CursorInfo);</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>获取控制台光标信息 </em></span> 
 </div> 
</blockquote> 
<hr> 
<h3 id="2.6CONSOLE_CURSOR_INFO">2.6<span style="color:#1f2329;">CONSOLE_CURSOR_INFO</span></h3> 
<p><span style="color:#1f2329;">这个结构体，包含有关控制台光标的信息</span></p> 
<blockquote> 
 <div> 
  <span style="color:#a626a4;">typedef struct</span> 
  <span style="color:#2b2f36;"> _</span> 
  <span style="color:#4078f2;">CONSOLE_CURSOR_INFO</span> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">DWORD dwSize; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">BOOL bVisible; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} CONSOLE_CURSOR_INFO, *PCONSOLE_CURSOR_INFO;</span> 
 </div> 
</blockquote> 
<div>
  这个结构体的俩成员 
</div> 
<div> 
 <span style="color:#1456f0;"><span style="background-color:#a2e043;">• </span></span> 
 <span style="color:#1f2329;"><span style="background-color:#a2e043;">dwSize，由光标填充的字符单元格的百分比。 此值介于1到100之间。 光标外观会变化，范围从完全填充单元格到单元底部的水平线条。 </span></span> 
</div> 
<div> 
 <span style="color:#1456f0;"><span style="background-color:#a2e043;">• </span></span> 
 <span style="color:#1f2329;"><span style="background-color:#a2e043;">bVisible，游标的可见性。 如果光标可见，则此成员为TRUE。 </span></span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#2b2f36;">CursorInfo.bVisible = </span> 
  <span style="color:#0184bb;">false</span> 
  <span style="color:#2b2f36;">; </span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>隐藏控制台光标 </em></span> 
 </div> 
</blockquote> 
<div>
  参考： 
 <a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/console/console-cursor-info-str" rel="nofollow" title="CONSOLE_CURSOR_INFO">CONSOLE_CURSOR_INFO</a> 
</div> 
<div> 
 <hr> 
 <h3 id="2.7SetConsoleCursorInfo">2.7<span style="color:#0d0016;">SetConsoleCursorInfo </span></h3> 
 <p><span style="color:#1f2329;">设置指定控制台屏幕缓冲区的光标的大小和可见性。 </span></p> 
 <blockquote> 
  <div> 
   <span style="color:#2b2f36;">BOOL WINAPI </span> 
   <span style="color:#4078f2;">SetConsoleCursorInfo</span> 
   <span style="color:#2b2f36;">( </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">HANDLE hConsoleOutput, </span> 
  </div> 
  <div> 
   <span style="color:#986801;">const</span> 
   <span style="color:#2b2f36;"> CONSOLE_CURSOR_INFO *lpConsoleCursorInfo </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">);</span> 
  </div> 
 </blockquote> 
</div> 
<div>
  实例： 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">HANDLE hOutput = </span> 
   <span style="color:#c18401;">GetStdHandle</span> 
   <span style="color:#2b2f36;">(STD_OUTPUT_HANDLE); </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>影藏光标操作 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">CONSOLE_CURSOR_INFO CursorInfo; </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">GetConsoleCursorInfo</span> 
   <span style="color:#2b2f36;">(hOutput, &amp;CursorInfo);</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>获取控制台光标信息 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">CursorInfo.bVisible = </span> 
   <span style="color:#0184bb;">false</span> 
   <span style="color:#2b2f36;">; </span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>隐藏控制台光标 </em></span> 
  </div> 
  <div> 
   <span style="color:#c18401;">SetConsoleCursorInfo</span> 
   <span style="color:#2b2f36;">(hOutput, &amp;CursorInfo);</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置控制台光标状态</em></span> 
  </div> 
 </div> 
</blockquote> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/console/setconsolecursorinfo" rel="nofollow" title="SetConsoleCursorInfo">SetConsoleCursorInfo</a> </p> 
<hr> 
<h3 id="2.8SetConsoleCursorPosition">2.8<span style="color:#000000;">SetConsoleCursorPosition </span></h3> 
<div> 
 <span style="color:#1f2329;">设置指定控制台屏幕缓冲区中的光标位置，我们将想要设置的坐标信息放在COORD类型的pos中，调用SetConsoleCursorPosition函数将光标位置设置到指定的位置。 </span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">BOOL WINAPI </span> 
   <span style="color:#4078f2;">SetConsoleCursorPosition</span> 
   <span style="color:#2b2f36;">( </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> HANDLE hConsoleOutput, </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> COORD pos </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
 </div> 
</blockquote> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/console/setconsolecursorposition" rel="nofollow" title="SetConsoleCursorPosition">SetConsoleCursorPosition</a> </p> 
<p>实例：</p> 
<blockquote> 
 <div> 
  <span style="color:#2b2f36;">COORD pos = { </span> 
  <span style="color:#986801;">10</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">5</span> 
  <span style="color:#2b2f36;">}; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> HANDLE hOutput = </span> 
  <span style="color:#0184bb;">NULL</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>获取标准输出的句柄</em></span> 
  <span style="color:#a0a1a7;"><em>(</em></span> 
  <span style="color:#a0a1a7;"><em>⽤来标识不同设备的数值</em></span> 
  <span style="color:#a0a1a7;"><em>) </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> hOutput = </span> 
  <span style="color:#c18401;">GetStdHandle</span> 
  <span style="color:#2b2f36;">(STD_OUTPUT_HANDLE); </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>设置标准输出上光标的位置为</em></span> 
  <span style="color:#a0a1a7;"><em>pos </em></span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetConsoleCursorPosition</span> 
  <span style="color:#2b2f36;">(hOutput, pos);</span> 
 </div> 
</blockquote> 
<p>SetPos: <span style="color:#1f2329;">封装一个设置光标位置的函数 </span></p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>/</em></span> 
  <span style="color:#a0a1a7;"><em>设置光标的坐标 </em></span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">short</span> 
  <span style="color:#2b2f36;"> x, </span> 
  <span style="color:#986801;">short</span> 
  <span style="color:#2b2f36;"> y) </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> COORD pos = { x, y }; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> HANDLE hOutput = </span> 
  <span style="color:#0184bb;">NULL</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>获取标准输出的句柄</em></span> 
  <span style="color:#a0a1a7;"><em>(</em></span> 
  <span style="color:#a0a1a7;"><em>⽤来标识不同设备的数值</em></span> 
  <span style="color:#a0a1a7;"><em>) </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> hOutput = </span> 
  <span style="color:#c18401;">GetStdHandle</span> 
  <span style="color:#2b2f36;">(STD_OUTPUT_HANDLE); </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>设置标准输出上光标的位置为</em></span> 
  <span style="color:#a0a1a7;"><em>pos </em></span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetConsoleCursorPosition</span> 
  <span style="color:#2b2f36;">(hOutput, pos); </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">}</span> 
 </div> 
</blockquote> 
<hr> 
<h3 id="2.9GetAsyncKeyState%20%C2%A0">2.9<span style="color:#0d0016;">GetAsyncKeyState </span> </h3> 
<div> 
 <span style="color:#1f2329;">这个函数就是获取按键情况，GetAsyncKeyState的函数原型如下： </span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">SHORT </span> 
   <span style="color:#4078f2;">GetAsyncKeyState</span> 
   <span style="color:#2b2f36;">( </span> 
  </div> 
  <div>
      
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> vKey </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">);</span> 
  </div> 
 </div> 
</blockquote> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/win32/api/winuser/nf-winuser-getasynckeystate" rel="nofollow" title="GetAsyncKeyState">GetAsyncKeyState</a> </p> 
<div> 
 <span style="color:#1f2329;">将键盘上每个键的虚拟键值传递给函数，函数通过返回值来分辨按键的状态。 </span> 
</div> 
<div> 
 <div> 
  <span style="color:#1f2329;">GetAsyncKeyState </span> 
  <span style="color:#1f2329;">的返回值是short类型，在上一次调用 GetAsyncKeyState </span> 
  <span style="color:#1f2329;">函数后，<span style="background-color:#38d8f0;">如果 </span></span> 
 </div> 
 <div> 
  <span style="color:#1f2329;"><span style="background-color:#38d8f0;">返回的16位的short数据中，最高位是1，说明按键的状态是按下，如果最高是0，说明按键的状态是抬起</span>；<span style="background-color:#ffd900;">如果最低位被置为1则说明，该按键被按过，否则为0。如果我们要判断一个键是否被按过，可以检测GetAsyncKeyState返回值的最低值是否为1</span></span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">对与贪吃蛇来说，按过就行了，所以我们只需要确定键位按过，即判断返回值最低位是否是1</span> 
 </div> 
 <blockquote> 
  <div> 
   <span style="color:#4078f2;">#</span> 
   <span style="color:#a626a4;">define</span> 
   <span style="color:#4078f2;"> KEY_PRESS(VK) ( (GetAsyncKeyState(VK) &amp; 0x1) ? 1 : 0 )</span> 
  </div> 
 </blockquote> 
</div> 
<p>我们可以定一个宏专门判断最低位是否是1</p> 
<p>参考：<a class="link-info" href="https://learn.microsoft.com/zh-cn/windows/win32/inputdev/virtual-key-codes" rel="nofollow" title="虚拟键码（Winuser.h) - Win32 apps">虚拟键码（Winuser.h) - Win32 apps</a> </p> 
<div> 
 <span style="color:#1f2329;">实例：检测数字键</span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#4078f2;">#</span> 
  <span style="color:#a626a4;">include </span> 
  <span style="color:#50a14f;">&lt;stdio.h&gt; </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#4078f2;">#</span> 
  <span style="color:#a626a4;">include </span> 
  <span style="color:#50a14f;">&lt;windows.h&gt; </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#986801;">int </span> 
  <span style="color:#4078f2;">main</span> 
  <span style="color:#2b2f36;">() </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">while</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#986801;">1</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x30</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"0\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x31</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"1\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x32</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"2\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x33</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"3\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x34</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"4\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x35</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"5\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
  <span style="color:#986801;">0x36</span> 
  <span style="color:#2b2f36;">)）</span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"6\n"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">else if</span> 
   <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
   <span style="color:#986801;">0x37</span> 
   <span style="color:#2b2f36;">)) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"7\n"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">else if</span> 
   <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
   <span style="color:#986801;">0x38</span> 
   <span style="color:#2b2f36;">)) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"8\n"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">else if</span> 
   <span style="color:#2b2f36;"> (KEY_PRESS(</span> 
   <span style="color:#986801;">0x39</span> 
   <span style="color:#2b2f36;">)) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"9\n"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">return </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
 </div> 
</blockquote> 
<hr> 
<h2 id="3.%E8%B4%AA%E5%90%83%E8%9B%87%E6%B8%B8%E6%88%8F%E6%80%9D%E8%B7%AF%C2%A0">3.贪吃蛇游戏思路 </h2> 
<h3 id="3.1%E6%B8%B8%E6%88%8F%E7%AA%97%E5%8F%A3">3.1游戏窗口</h3> 
<div> 
 <span style="color:#1f2329;">这里不得不说一下控制台窗口的一些知识，如果想在控制台的窗口中指定位置输出信息，我们得知道该位置的坐标，所以首先介绍一下控制台窗口的坐标知识。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">控制台窗口的坐标如下所示，横向的是X轴，从左向右依次增长，纵向是Y轴，从上到下依次增长。 </span> 
</div> 
<div> 
 <img alt="" height="808" src="https://images2.imgbox.com/37/f9/oXYyDzjS_o.png" width="1162"> 
</div> 
<div></div> 
<div> 
 <span style="color:#1f2329;">在游戏地图上，我们打印墙体使用宽字符：□，打印蛇使用宽字符●，打印食物使用宽字符★ </span> 
</div> 
<div> 
 <span style="color:#1f2329;">普通的字符是占一个字节的，这类宽字符是占用2个字节。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">这里再简单说一下C语言的国际化特性相关的知识，过去C语言并不适合非英语国家（地区）使用。C语言最初假定字符都是单字节的。但是这些假定并不是在世界的任何地方都适用。 </span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#646a73;">C语言字符默认是采用ASCII编码的，ASCII字符集采用的是单字节编码，且只使用了单字节中的低7位，最高位是没有使用的，可表示为0xxxxxxxx；可以看到，ASCII字符集共包含128个字符，在英语国家中，128个字符是基本够用的，但是，在其他国家语言中，比如，在法语中，字母上方有注音符号，它就无法用 ASCII 码表示。于是，一些欧洲国家就决定，利用字节中闲置的最高位编入新的符号。比如，法语中的é的编码为130（二进制10000010）。这样一来，这些欧洲国家使用的编码体系，可以表示最多256个符号。但是，这里又出现了新的问题。不同的国家有不同的字母，因此，哪怕它们都使用256个符号的编码方式，代表的字母却不一样。比如，130在法语编码中代表了é，在希伯来语编码中却代表了字母Gimel (），</span> 
  <span style="color:#646a73;">在俄语编码中又会代表另一个符号。但是不管怎样，所有这</span> 
  <span style="color:#646a73;">些编码方式中，0--127表⽰的符号是一样的，不一样的只是128--255的这一段。至于亚洲国家的文字，使用的符号就更多了，汉字就多达10万左右。一个字节只能表示256种符号， 肯定是不够的，就必须使用多个字节表达一个符号。比如，简体中文常见的编码方式是 GB2312，使用两个字节表示一个汉字，所以理论上最多可以表示 256 x 256 = 65536 个符号。</span> 
 </div> 
 <div> 
  <img alt="" height="421" src="https://images2.imgbox.com/c6/a8/PrAYncQP_o.png" width="616"> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#1f2329;">后来为了使C语言适应国际化，C语言的标准中不断加入了国际化的支持。比如：加入了宽字符的类型wchar_t 和宽字符的输入和输出函数，加入了&lt;locale.h&gt;头文件，其中提供了允许程序员针对特定地区（通常是国家或者说某种特定语言的地理区域）调整程序行为的函数。</span> 
</div> 
<p></p> 
<hr> 
<h4 id="3.1.1%3Clocale.h%3E%E6%9C%AC%E5%9C%B0%E5%8C%96"><span style="color:#1f2329;">3.1.1&lt;locale.h&gt;本地化</span></h4> 
<div> 
 <span style="color:#1f2329;">&lt;locale.h&gt;提供的函数用于控制C标准库中对于不同的地区会产生不一样行为的部分。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">在标准中，依赖地区的部分有以下几项： </span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">数字量的格式 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">货币量的格式 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">字符集 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#0d0016;">日</span> 
  <span style="color:#1f2329;">期和时间的表示形式</span> 
 </div> 
</blockquote> 
<hr> 
<h4 id="3.1.2%E7%B1%BB%E9%A1%B9">3.1.2<span style="color:#1f2329;">类项</span></h4> 
<div> 
 <span style="color:#1f2329;">通过修改地区，程序可以改变它的行为来适应世界的不同区域。但地区的改变可能会影响库的许多部分，其中一部分可能是我们不希望修改的。所以C语言支持针对不同的类项进行修改，下面的一个宏， 指定一个类项： </span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">LC_COLLATE：影响字符串比较函数 </span> 
   <span style="color:#d83931;">strcoll() </span> 
   <span style="color:#1f2329;">和 </span> 
   <span style="color:#d83931;">strxfrm() </span> 
   <span style="color:#1f2329;">。 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">LC_CTYPE：影响字符处理函数的行为。 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">LC_MONETARY：影响货币格式。 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">LC_NUMERIC：影响 </span> 
   <span style="color:#d83931;">printf() </span> 
   <span style="color:#1f2329;">的数字格式。 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">LC_TIME：影响时间格式 </span> 
   <span style="color:#d83931;">strftime() </span> 
   <span style="color:#1f2329;">和 </span> 
   <span style="color:#d83931;">wcsftime() </span> 
   <span style="color:#1f2329;">。 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">LC_ALL - 针对所有类项修改，将以上所有类别设置为给定的语言环境</span> 
  </div> 
 </div> 
</blockquote> 
<p>详细介绍：<a class="link-info" href="https://learn.microsoft.com/zh-cn/cpp/c-runtime-library/reference/setlocale-wsetlocale?view=msvc-170" rel="nofollow" title="https://learn.microsoft.com/zh-cn/cpp/c-runtime-library/reference/setlocale-wsetlocale?view=msvc-170">https://learn.microsoft.com/zh-cn/cpp/c-runtime-library/reference/setlocale-wsetlocale?view=msvc-170</a> </p> 
<hr> 
<h4 id="3.1.3setlocale%E5%87%BD%E6%95%B0">3.1.3<span style="color:#0d0016;">setlocale函数 </span></h4> 
<blockquote> 
 <div> 
  <span style="color:#986801;">char</span> 
  <span style="color:#2b2f36;">* </span> 
  <span style="color:#4078f2;">setlocale</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#986801;">int</span> 
  <span style="color:#2b2f36;"> category, </span> 
  <span style="color:#986801;">const char</span> 
  <span style="color:#2b2f36;">* locale); </span> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#1f2329;">setlocale 函数用于修改当前地区，可以针对一个类项修改，也可以针对所有类项。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">setlocale 的第一个参数可以是前面说明的类项中的一个，那么每次只会影响一个类项，如果第一个参数是LC_ALL，就会影响所有的类项。 C标准给第二个参数仅定义了2种可能取值：</span> 
 <span style="color:#d83931;">"C"</span> 
 <span style="color:#1f2329;">（正常模式）和</span> 
 <span style="color:#d83931;">" "</span> 
 <span style="color:#1f2329;">（本地模式）。 在任意程序执行开始，都会隐藏式执行调用:</span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#c18401;">setlocale</span> 
   <span style="color:#2b2f36;">(LC_ALL, </span> 
   <span style="color:#50a14f;">"C"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#1f2329;">当地区设置为"C"时，库函数按正常方式执行，小数点是一个点。 当程序运行起来后想改变地区，就只能显示调用setlocale函数。用" "作为第2个参数，调用setlocale函数就可以切换到本地模式，这种模式下程序会适应本地环境。 比如：</span> 
 <strong><span style="color:#fe2c24;">切换到我们的本地模式后就支持宽字符（汉字）的输出等</span></strong> 
 <span style="color:#1f2329;">。</span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#c18401;">setlocale</span> 
   <span style="color:#2b2f36;">(LC_ALL, </span> 
   <span style="color:#50a14f;">" "</span> 
   <span style="color:#2b2f36;">);</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>切换到本地环境 </em></span> 
  </div> 
 </div> 
</blockquote> 
<hr> 
<h4 id="%C2%A03.1.4%E5%AE%BD%E5%AD%97%E7%AC%A6%E7%9A%84%E6%89%93%E5%8D%B0"> 3.1.4<span style="color:#1f2329;">宽字符的打印 </span></h4> 
<div> 
 <span style="color:#1f2329;">那如果想在屏幕上打印宽字符，怎么打印呢？ </span> 
</div> 
<div> 
 <span style="color:#1f2329;">宽字符的字面量必须加上前缀“L”，否则 C 语言会把字面量当作窄字符类型处理。前缀“L”在单引 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">号前面，表示宽字符，对应 </span> 
 <span style="color:#d83931;">wprintf() </span> 
 <span style="color:#1f2329;">的占位符为 </span> 
 <span style="color:#d83931;">%lc </span> 
 <span style="color:#1f2329;">；在双引号前面，表示宽字符串，对应 </span> 
</div> 
<div> 
 <span style="color:#d83931;">wprintf() </span> 
 <span style="color:#1f2329;">的占位符为 </span> 
 <span style="color:#d83931;">%ls </span> 
 <span style="color:#1f2329;">。 </span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#4078f2;">#</span> 
   <span style="color:#a626a4;">include </span> 
   <span style="color:#50a14f;">&lt;stdio.h&gt; </span> 
  </div> 
  <div> 
   <span style="color:#4078f2;">#</span> 
   <span style="color:#a626a4;">include</span> 
   <span style="color:#50a14f;">&lt;locale.h&gt; </span> 
  </div> 
  <div> 
   <span style="color:#986801;">int </span> 
   <span style="color:#4078f2;">main</span> 
   <span style="color:#2b2f36;">() { </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">setlocale</span> 
   <span style="color:#2b2f36;">(LC_ALL, </span> 
   <span style="color:#50a14f;">""</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#986801;">wchar_t</span> 
   <span style="color:#2b2f36;"> ch1 = </span> 
   <span style="color:#50a14f;">L'</span> 
   <span style="color:#50a14f;">●</span> 
   <span style="color:#50a14f;">'</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#986801;">wchar_t</span> 
   <span style="color:#2b2f36;"> ch2 = </span> 
   <span style="color:#50a14f;">L'</span> 
   <span style="color:#50a14f;">★</span> 
   <span style="color:#50a14f;">'</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"%c%c\n"</span> 
   <span style="color:#2b2f36;">, </span> 
   <span style="color:#50a14f;">'a'</span> 
   <span style="color:#2b2f36;">, </span> 
   <span style="color:#50a14f;">'b'</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div></div> 
  <div> 
   <span style="color:#c18401;">wprintf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">L"%lc\n"</span> 
   <span style="color:#2b2f36;">, ch1); </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">wprintf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">L"%lc\n"</span> 
   <span style="color:#2b2f36;">, ch2); </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">return </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
 </div> 
</blockquote> 
<p>这样一些好看的图案就可以在屏幕上打印了，宽字符占两个字节</p> 
<hr> 
<h4 id="3.1.5%E5%9C%B0%E5%9B%BE%E5%9D%90%E6%A0%87">3.1.5<span style="color:#1f2329;">地图坐标</span></h4> 
<p> <span style="color:#1f2329;">我们假设实现一个棋盘27行，58列的棋盘（行和列可以根据自己的情况修改），再围绕地图画出墙，如下：</span></p> 
<p><img alt="" height="508" src="https://images2.imgbox.com/ef/0a/TKWj7MHw_o.png" width="533"></p> 
<p>这样我们根据坐标就可以将墙给表示出来了</p> 
<hr> 
<h3 id="%C2%A03.2%E8%9B%87%E8%BA%AB%E5%92%8C%E9%A3%9F%E7%89%A9"> 3.2<span style="color:#1f2329;">蛇身和食物</span></h3> 
<div> 
 <span style="color:#1f2329;">初始化状态，假设蛇的长度是5，蛇身的每个节点是●，在固定的一个坐标处，比如(24, 5)处开始出现蛇，连续5个节点。 </span> 
</div> 
<div></div> 
<blockquote> 
 <div style="text-align:center;"> 
  <span style="color:#fe2c24;"><strong><span style="background-color:#38d8f0;"><img alt="" class="left" src="https://images2.imgbox.com/b2/23/vWiGnxhO_o.jpg">注意：蛇的每个节点的x坐标必须是2个倍数，否则可能会出现蛇的一个节点有一半儿出现在墙体中，另外一般在墙外的现象，坐标不好对齐！！！</span></strong></span> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#1f2329;">关于食物，就是在墙体内随机生成一个坐标（x坐标必须是2的倍数），坐标不能和蛇的身体重合，然后打印★。</span> 
</div> 
<div> 
 <img alt="" height="558" src="https://images2.imgbox.com/77/74/v34bUYpH_o.png" width="585"> 
</div> 
<hr> 
<h3 id="3.3%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%20%C2%A0">3.3<span style="color:#1f2329;">数据结构设计 </span> </h3> 
<div> 
 <span style="color:#1f2329;">在游戏运行的过程中，蛇每次吃一个食物，蛇的身体就会变长一节，如果我们</span> 
 <span style="color:#fe2c24;"><strong><span style="background-color:#38d8f0;">使用链表存储蛇的信 </span></strong></span> 
</div> 
<div> 
 <span style="color:#fe2c24;"><strong><span style="background-color:#38d8f0;">息，那么蛇的每一节其实就是链表的每个节点</span></strong></span> 
 <span style="color:#1f2329;">。每个节点只要记录好蛇身节点在地图上的坐标就行，所以蛇节点结构如下： </span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#a626a4;">typedef struct </span> 
   <span style="color:#4078f2;">SnakeNode </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div>
      
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> x; </span> 
  </div> 
  <div>
      
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> y; </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">struct </span> 
   <span style="color:#4078f2;">SnakeNode</span> 
   <span style="color:#2b2f36;">* next; </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">}SnakeNode, * pSnakeNode; </span> 
  </div> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#1f2329;">要管理整条贪吃蛇，我们再封装一个Snake的结构来维护整条贪吃蛇，那我们想象一下，这个蛇有关的信息有哪些：整条蛇指针，食物指针，蛇头方向，游戏状态，总分，每一个食物分，每一步的休眠时间，大概有这些，代码如下：</span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#a626a4;">typedef struct </span> 
   <span style="color:#4078f2;">Snake </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pSnakeNode _pSnake;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>维护整条蛇的指针 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pSnakeNode _pFood;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>维护⻝物的指针 </em></span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">enum </span> 
   <span style="color:#4078f2;">DIRECTION</span> 
   <span style="color:#2b2f36;"> _Dir;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>蛇头的⽅向</em></span> 
   <span style="color:#a0a1a7;"><em>,</em></span> 
   <span style="color:#a0a1a7;"><em>默认是向右 </em></span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">enum </span> 
   <span style="color:#4078f2;">GAME_STATUS</span> 
   <span style="color:#2b2f36;"> _Status;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>游戏状态 </em></span> 
  </div> 
  <div> 
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> _Socre;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>游戏当前获得分数 </em></span> 
  </div> 
  <div> 
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> _foodWeight;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>默认每个⻝物</em></span> 
   <span style="color:#a0a1a7;"><em>10</em></span> 
   <span style="color:#a0a1a7;"><em>分 </em></span> 
  </div> 
  <div> 
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> _SleepTime;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>每⾛⼀步休眠时间 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">}Snake, * pSnake; </span> 
  </div> 
 </div> 
</blockquote> 
<p><span style="color:#1f2329;">蛇的方向，分为上，下，左，右可以列举，使用枚举</span> </p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>⽅向 </em></span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">enum </span> 
  <span style="color:#4078f2;">DIRECTION </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">UP = </span> 
  <span style="color:#986801;">1</span> 
  <span style="color:#2b2f36;">, </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">DOWN, </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">LEFT, </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">RIGHT </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">};</span> 
 </div> 
</blockquote> 
<p> <span style="color:#1f2329;">游戏状态，分为正常运行，撞墙，咬到自己，正常结束可以列举，使用枚举</span></p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>游戏状态 </em></span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">enum </span> 
  <span style="color:#4078f2;">GAME_STATUS </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">OK,</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>正常运⾏ </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">KILL_BY_WALL,</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>撞墙 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">KILL_BY_SELF,</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>咬到⾃⼰ </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">END_NOMAL</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>正常结束 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">};</span> 
 </div> 
</blockquote> 
<hr> 
<h3 id="3.4%E6%B8%B8%E6%88%8F%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1">3.4<span style="color:#1f2329;">游戏流程设计</span></h3> 
<p><img alt="" height="925" src="https://images2.imgbox.com/bb/64/mZwUBHrT_o.png" width="1200"></p> 
<hr> 
<h2 id="4.%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%E5%88%86%E6%9E%90">4.核心逻辑分析</h2> 
<h3 id="4.1%E6%B8%B8%E6%88%8F%E4%B8%BB%E9%80%BB%E8%BE%91">4.1游戏主逻辑</h3> 
<div> 
 <span style="color:#1f2329;">首先，程序开始就设置程序支持本地模式，然后进入游戏的主逻辑，有了主逻辑，才能有了明确的方向。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">主逻辑分为3个过程：</span>  
</div> 
<blockquote> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">游戏开始（GameStart）完成游戏的初始化 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">游戏运行（GameRun）完成游戏运行逻辑的实现 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">游戏结束（GameEnd）完成游戏结束的说明，实现资源释放</span> 
 </div> 
</blockquote> 
<blockquote> 
 <div> 
  <span style="color:#4078f2;">#</span> 
  <span style="color:#a626a4;">include </span> 
  <span style="color:#50a14f;">&lt;locale.h&gt; </span> 
 </div> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">test</span> 
  <span style="color:#2b2f36;">() </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#986801;">int</span> 
  <span style="color:#2b2f36;"> ch = </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">srand</span> 
  <span style="color:#2b2f36;">((</span> 
  <span style="color:#986801;">unsigned int</span> 
  <span style="color:#2b2f36;">)</span> 
  <span style="color:#c18401;">time</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#0184bb;">NULL</span> 
  <span style="color:#2b2f36;">)); </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">do </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">Snake snake = { </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;"> }; </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">GameStart</span> 
  <span style="color:#2b2f36;">(&amp;snake); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">GameRun</span> 
  <span style="color:#2b2f36;">(&amp;snake); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">GameEnd</span> 
  <span style="color:#2b2f36;">(&amp;snake); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">20</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">15</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">再来⼀局吗？</span> 
  <span style="color:#50a14f;">(Y/N):"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">ch = </span> 
  <span style="color:#c18401;">getchar</span> 
  <span style="color:#2b2f36;">(); </span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#c18401;">getchar</span> 
   <span style="color:#2b2f36;">();</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>清</em></span> 
   <span style="color:#a0a1a7;"><em>理</em></span> 
   <span style="color:#a0a1a7;"><em>\n </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
   <span style="color:#a626a4;">while</span> 
   <span style="color:#2b2f36;"> (ch == </span> 
   <span style="color:#50a14f;">'Y'</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">SetPos</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">, </span> 
   <span style="color:#986801;">27</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#986801;">int </span> 
   <span style="color:#4078f2;">main</span> 
   <span style="color:#2b2f36;">() </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>修改当前地区为本地模式，为了⽀持中⽂宽字符的打印 </em></span> 
  </div> 
  <div> 
   <span style="color:#c18401;">setlocale</span> 
   <span style="color:#2b2f36;">(LC_ALL, </span> 
   <span style="color:#50a14f;">""</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>测试逻辑 </em></span> 
  </div> 
  <div> 
   <span style="color:#c18401;">test</span> 
   <span style="color:#2b2f36;">(); </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">return </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">}</span> 
  </div> 
 </div> 
</blockquote> 
<p>注意：getchar()是获取字符信息，若此刻你没有输出任何字符，相当于运行上的一个暂停。</p> 
<hr> 
<h3 id="4.2%C2%A0%E6%B8%B8%E6%88%8F%E5%BC%80%E5%A7%8B%EF%BC%88GameStart%EF%BC%89">4.2 <span style="color:#1f2329;">游戏开始（GameStart）</span></h3> 
<div> 
 <span style="color:#1f2329;">这个模块完成游戏的初始化任务： </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">控制台窗口大小的设置 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">控制台窗口名字的设置 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#0d0016;">鼠</span> 
 <span style="color:#1f2329;">标光标的隐藏 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">打印欢迎界面</span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">创建地图 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">初始化第蛇 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">创建第一个食物</span> 
</div> 
<div> 
 <span style="color:#1f2329;">有了上面的API函数的了解，这些就简单写了</span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#986801;">void </span> 
   <span style="color:#4078f2;">GameStart</span> 
   <span style="color:#2b2f36;">(pSnake ps) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置控制台窗⼝的⼤⼩，</em></span> 
   <span style="color:#a0a1a7;"><em>30</em></span> 
   <span style="color:#a0a1a7;"><em>⾏，</em></span> 
   <span style="color:#a0a1a7;"><em>100</em></span> 
   <span style="color:#a0a1a7;"><em>列 </em></span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//mode </em></span> 
   <span style="color:#a0a1a7;"><em>为</em></span> 
   <span style="color:#a0a1a7;"><em>DOS</em></span> 
   <span style="color:#a0a1a7;"><em>命令 </em></span> 
  </div> 
  <div> 
   <span style="color:#c18401;">system</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"mode con cols=100 lines=30"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置</em></span> 
   <span style="color:#a0a1a7;"><em>cmd</em></span> 
   <span style="color:#a0a1a7;"><em>窗⼝名称 </em></span> 
  </div> 
  <div> 
   <span style="color:#c18401;">system</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"title </span> 
   <span style="color:#50a14f;">贪吃蛇</span> 
   <span style="color:#50a14f;">"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>获取标准输出的句柄</em></span> 
   <span style="color:#a0a1a7;"><em>(</em></span> 
   <span style="color:#a0a1a7;"><em>⽤来标识不同设备的数值</em></span> 
   <span style="color:#a0a1a7;"><em>) </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">HANDLE hOutput = </span> 
   <span style="color:#c18401;">GetStdHandle</span> 
   <span style="color:#2b2f36;">(STD_OUTPUT_HANDLE); </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>影藏光标操作 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">CONSOLE_CURSOR_INFO CursorInfo; </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">GetConsoleCursorInfo</span> 
   <span style="color:#2b2f36;">(hOutput, &amp;CursorInfo);</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>获取控制台光标信息 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">CursorInfo.bVisible = </span> 
   <span style="color:#0184bb;">false</span> 
   <span style="color:#2b2f36;">; </span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>隐藏控制台光标 </em></span> 
  </div> 
  <div> 
   <span style="color:#c18401;">SetConsoleCursorInfo</span> 
   <span style="color:#2b2f36;">(hOutput, &amp;CursorInfo);</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置控制台光标状态 </em></span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#a0a1a7;"><em>//</em></span> 
    <span style="color:#a0a1a7;"><em>打印欢迎界⾯ </em></span> 
   </div> 
   <div> 
    <span style="color:#c18401;">WelcomeToGame</span> 
    <span style="color:#2b2f36;">(); </span> 
   </div> 
   <div> 
    <span style="color:#a0a1a7;"><em>//</em></span> 
    <span style="color:#a0a1a7;"><em>打印地图 </em></span> 
   </div> 
   <div> 
    <span style="color:#c18401;">CreateMap</span> 
    <span style="color:#2b2f36;">(); </span> 
   </div> 
   <div> 
    <span style="color:#a0a1a7;"><em>//</em></span> 
    <span style="color:#a0a1a7;"><em>初始化蛇 </em></span> 
   </div> 
   <div> 
    <span style="color:#c18401;">InitSnake</span> 
    <span style="color:#2b2f36;">(ps); </span> 
   </div> 
   <div> 
    <span style="color:#a0a1a7;"><em>//</em></span> 
    <span style="color:#a0a1a7;"><em>创造第⼀个⻝物 </em></span> 
   </div> 
   <div> 
    <span style="color:#c18401;">CreateFood</span> 
    <span style="color:#2b2f36;">(ps); </span> 
   </div> 
   <div> 
    <span style="color:#2b2f36;">}</span> 
   </div> 
  </div> 
 </div> 
</blockquote> 
<p></p> 
<hr> 
<h4 id="4.2.1%E6%89%93%E5%8D%B0%E6%AC%A2%E8%BF%8E%E7%95%8C%E9%9D%A2">4.2.1<span style="color:#1f2329;">打印欢迎界面</span></h4> 
<p> <span style="color:#1f2329;">在游戏正式开始之前，做一些功能提醒 </span></p> 
<blockquote> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">WelcomeToGame</span> 
  <span style="color:#2b2f36;">() </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">40</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">15</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">欢迎来到贪吃蛇⼩游戏</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">40</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">25</span> 
  <span style="color:#2b2f36;">);</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>让按任意键继续的出现的位置好看点 </em></span> 
 </div> 
 <div> 
  <span style="color:#c18401;">system</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"pause"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">system</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"cls"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">25</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">12</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">⽤ </span> 
  <span style="color:#50a14f;">↑</span> 
  <span style="color:#50a14f;"> . </span> 
  <span style="color:#50a14f;">↓</span> 
  <span style="color:#50a14f;"> . </span> 
  <span style="color:#50a14f;">←</span> 
  <span style="color:#50a14f;"> . </span> 
  <span style="color:#50a14f;">→ </span> 
  <span style="color:#50a14f;">分别控制蛇的移动，</span> 
  <span style="color:#50a14f;"> F3</span> 
  <span style="color:#50a14f;">为加速，</span> 
  <span style="color:#50a14f;">F4</span> 
  <span style="color:#50a14f;">为减速</span> 
  <span style="color:#50a14f;">\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">25</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">13</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">加速将能得到更⾼的分数。</span> 
  <span style="color:#50a14f;">\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">40</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">25</span> 
  <span style="color:#2b2f36;">);</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>让按任意键继续的出现的位置好看点 </em></span> 
 </div> 
 <div> 
  <span style="color:#c18401;">system</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"pause"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">system</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"cls"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">}</span> 
 </div> 
</blockquote> 
<p> <img alt="" height="647" src="https://images2.imgbox.com/42/d5/KOf0O4ww_o.png" width="1200"></p> 
<p> <span style="color:#c18401;">system</span><span style="color:#2b2f36;">(</span><span style="color:#50a14f;">"pause"</span><span style="color:#2b2f36;">)这个就是按任意键继续的功能与</span><span style="color:#c18401;">system</span><span style="color:#2b2f36;">(</span><span style="color:#50a14f;">"cls"</span><span style="color:#2b2f36;">)（清空屏幕的功能）一连用就达到了切换页面的效果。</span></p> 
<hr> 
<h4 id="4.2.2%E5%88%9B%E5%BB%BA%E5%9C%B0%E5%9B%BE%C2%A0">4.2.2<span style="color:#1f2329;">创建地图</span> </h4> 
<p> <span style="color:#1f2329;">创建地图就是将墙打印出来，因为是宽字符打印，所有使用wprintf函数，</span><strong><span style="color:#fe2c24;">打印格式串前使用L</span></strong><span style="color:#1f2329;"> </span></p> 
<div> 
 <span style="color:#1f2329;">打印地图的关键是要算好坐标，才能在想要的位置打印墙体。</span> 
</div> 
<div> 
 <div> 
  <span style="color:#1f2329;">墙体打印的宽字符：</span> 
 </div> 
 <blockquote> 
  <div> 
   <div> 
    <span style="color:#4078f2;">#</span> 
    <span style="color:#a626a4;">define</span> 
    <span style="color:#4078f2;"> WALL </span> 
    <span style="color:#50a14f;">L'</span> 
    <span style="color:#50a14f;">□</span> 
    <span style="color:#50a14f;">'</span> 
   </div> 
  </div> 
 </blockquote> 
</div> 
<p> <span style="color:#d83931;">易错点：</span><span style="color:#1f2329;">就是坐标的计算</span></p> 
<blockquote> 
 <div> 
  <span style="color:#1f2329;">上：（0,0）到（56,0） </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">下：（0,26）到（56,26） </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">左：（0,1）到（0,25） </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">右：（56,1）到（56,25） </span> 
 </div> 
</blockquote> 
<p> <span style="color:#1f2329;">创建地图函数CreateMap</span></p> 
<blockquote> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">CreateMap</span> 
  <span style="color:#2b2f36;">() </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#986801;">int</span> 
  <span style="color:#2b2f36;"> i = </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>上</em></span> 
  <span style="color:#a0a1a7;"><em>(0,0)-(56, 0) </em></span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">for</span> 
  <span style="color:#2b2f36;"> (i = </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">; i &lt; </span> 
  <span style="color:#986801;">58</span> 
  <span style="color:#2b2f36;">; i += </span> 
  <span style="color:#986801;">2</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">wprintf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">L"%c"</span> 
  <span style="color:#2b2f36;">, WALL); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>下</em></span> 
  <span style="color:#a0a1a7;"><em>(0,26)-(56, 26) </em></span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">26</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">for</span> 
  <span style="color:#2b2f36;"> (i = </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">; i &lt; </span> 
  <span style="color:#986801;">58</span> 
  <span style="color:#2b2f36;">; i += </span> 
  <span style="color:#986801;">2</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">wprintf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">L"%c"</span> 
  <span style="color:#2b2f36;">, WALL); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>左 </em></span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//x</em></span> 
  <span style="color:#a0a1a7;"><em>是</em></span> 
  <span style="color:#a0a1a7;"><em>0</em></span> 
  <span style="color:#a0a1a7;"><em>，</em></span> 
  <span style="color:#a0a1a7;"><em>y</em></span> 
  <span style="color:#a0a1a7;"><em>从</em></span> 
  <span style="color:#a0a1a7;"><em>1</em></span> 
  <span style="color:#a0a1a7;"><em>开始增⻓ </em></span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">for</span> 
  <span style="color:#2b2f36;"> (i = </span> 
  <span style="color:#986801;">1</span> 
  <span style="color:#2b2f36;">; i &lt; </span> 
  <span style="color:#986801;">26</span> 
  <span style="color:#2b2f36;">; i++) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">, i); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">wprintf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">L"%c"</span> 
  <span style="color:#2b2f36;">, WALL); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//x</em></span> 
  <span style="color:#a0a1a7;"><em>是</em></span> 
  <span style="color:#a0a1a7;"><em>56</em></span> 
  <span style="color:#a0a1a7;"><em>，</em></span> 
  <span style="color:#a0a1a7;"><em>y</em></span> 
  <span style="color:#a0a1a7;"><em>从</em></span> 
  <span style="color:#a0a1a7;"><em>1</em></span> 
  <span style="color:#a0a1a7;"><em>开始增⻓ </em></span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">for</span> 
  <span style="color:#2b2f36;"> (i = </span> 
  <span style="color:#986801;">1</span> 
  <span style="color:#2b2f36;">; i &lt; </span> 
  <span style="color:#986801;">26</span> 
  <span style="color:#2b2f36;">; i++) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">56</span> 
  <span style="color:#2b2f36;">, i); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">wprintf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">L"%c"</span> 
  <span style="color:#2b2f36;">, WALL); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">}</span> 
 </div> 
</blockquote> 
<hr> 
<h4 id="4.2.3%E5%88%9D%E5%A7%8B%E5%8C%96%E8%9B%87%E8%BA%AB">4.2.3<span style="color:#1f2329;">初始化蛇身</span></h4> 
<div> 
 <span style="color:#1f2329;">蛇最开始长度为5节，每节对应链表的一个节点，蛇身的每一个节点都有自己的坐标。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">创建5个节点，然后将每个节点存放在链表中进行管理。创建完蛇身后，将蛇的每一节打印在屏幕上。 </span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">蛇的初始位置从 (24,5) 开始。 </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">  再设置当前游戏的状态，蛇移动的速度，默认的方向，初始成绩，每个食物的分数。 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">游戏状态是：OK </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">蛇的移动速度：200毫秒 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">蛇的默认方向：RIGHT </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">初始成绩：0 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">每个食物的分数：10</span> 
 </div> 
</blockquote> 
<div> 
 <span style="color:#1f2329;">蛇身打印的宽字符： </span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#4078f2;">#</span> 
   <span style="color:#a626a4;">define</span> 
   <span style="color:#4078f2;"> BODY </span> 
   <span style="color:#50a14f;">L'</span> 
   <span style="color:#50a14f;">●</span> 
  </div> 
 </div> 
</blockquote> 
<div> 
 <div> 
  <span style="color:#1f2329;">初始化蛇身函数：InitSnake </span> 
 </div> 
 <blockquote> 
  <div> 
   <span style="color:#986801;">void </span> 
   <span style="color:#4078f2;">InitSnake</span> 
   <span style="color:#2b2f36;">(pSnake ps) </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> pSnakeNode cur = </span> 
   <span style="color:#0184bb;">NULL</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div>
      
   <span style="color:#986801;">int</span> 
   <span style="color:#2b2f36;"> i = </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>创建蛇⾝节点，并初始化坐标 </em></span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>头插法 </em></span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">for</span> 
   <span style="color:#2b2f36;"> (i = </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; i &lt; </span> 
   <span style="color:#986801;">5</span> 
   <span style="color:#2b2f36;">; i++) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>创建蛇⾝的节点 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur = (pSnakeNode)</span> 
   <span style="color:#c18401;">malloc</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#c18401;">sizeof</span> 
   <span style="color:#2b2f36;">(SnakeNode)); </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">if</span> 
   <span style="color:#2b2f36;"> (cur == </span> 
   <span style="color:#0184bb;">NULL</span> 
   <span style="color:#2b2f36;">) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">perror</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"InitSnake()::malloc()"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">return</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>设置坐标 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur-&gt;next = </span> 
   <span style="color:#0184bb;">NULL</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur-&gt;x = POS_X + i * </span> 
   <span style="color:#986801;">2</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur-&gt;y = POS_Y; </span> 
  </div> 
  <div></div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>头插法 </em></span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">if</span> 
   <span style="color:#2b2f36;"> (ps-&gt;_pSnake == </span> 
   <span style="color:#0184bb;">NULL</span> 
   <span style="color:#2b2f36;">) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_pSnake = cur; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">else </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur-&gt;next = ps-&gt;_pSnake; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_pSnake = cur; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div></div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>打印蛇的⾝体 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur = ps-&gt;_pSnake; </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">while</span> 
   <span style="color:#2b2f36;"> (cur) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">SetPos</span> 
   <span style="color:#2b2f36;">(cur-&gt;x, cur-&gt;y); </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">wprintf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">L"%lc"</span> 
   <span style="color:#2b2f36;">, BODY); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur = cur-&gt;next; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div></div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>初始化贪吃蛇数据 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_SleepTime = </span> 
   <span style="color:#986801;">200</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_Socre = </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_Status = OK; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_Dir = RIGHT;</span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#2b2f36;">ps-&gt;_foodWeight =</span> 
    <span style="color:#986801;">10</span> 
    <span style="color:#2b2f36;">; </span> 
   </div> 
   <div> 
    <span style="color:#2b2f36;">} </span> 
   </div> 
  </div> 
 </blockquote> 
 <div>
   对于这个初始化蛇身的函数，我们要用到单链表的头插，将蛇通过单链表的方式连接到一起，然后一个个遍历，打印宽字符就行了 
 </div> 
 <div> 
  <img alt="" height="381" src="https://images2.imgbox.com/dc/a2/Jkz1ORkN_o.png" width="368"> 
 </div> 
 <div> 
  <hr> 
  <h4 id="4.2.4%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A3%9F%E7%89%A9">4.2.4<span style="color:#1f2329;">创建第一个食物 </span></h4> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">先随机生成食物的坐标 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">       ◦ </span> 
   <span style="color:#1f2329;">x坐标必须是2的倍数 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">       ◦ </span> 
   <span style="color:#0d0016;">食</span> 
   <span style="color:#1f2329;">物的坐标不能和蛇身每个节点的坐标重复 </span> 
  </div> 
  <div> 
   <span style="color:#1456f0;">• </span> 
   <span style="color:#1f2329;">创建食物节点，打印食物</span> 
  </div> 
  <div> 
   <div> 
    <span style="color:#1f2329;">食物打印的宽字符: </span> 
   </div> 
   <blockquote> 
    <div> 
     <div> 
      <span style="color:#4078f2;">#</span> 
      <span style="color:#a626a4;">define</span> 
      <span style="color:#4078f2;"> FOOD </span> 
      <span style="color:#50a14f;">L'</span> 
      <span style="color:#50a14f;">★</span> 
      <span style="color:#50a14f;">' </span> 
     </div> 
    </div> 
   </blockquote> 
  </div> 
 </div> 
 <div> 
  <div> 
   <span style="color:#1f2329;">创建食物的函数：CreateFood </span> 
  </div> 
  <div></div> 
 </div> 
 <blockquote> 
  <div> 
   <div> 
    <span style="color:#986801;">void </span> 
    <span style="color:#4078f2;">CreateFood</span> 
    <span style="color:#2b2f36;">(pSnake ps) </span> 
   </div> 
   <div> 
    <span style="color:#2b2f36;">{ </span> 
   </div> 
   <div> 
    <span style="color:#986801;">int</span> 
    <span style="color:#2b2f36;"> x = </span> 
    <span style="color:#986801;">0</span> 
    <span style="color:#2b2f36;">;</span> 
   </div> 
   <div> 
    <div> 
     <span style="color:#986801;">int</span> 
     <span style="color:#2b2f36;"> y = </span> 
     <span style="color:#986801;">0</span> 
     <span style="color:#2b2f36;">; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">again: </span> 
    </div> 
    <div> 
     <span style="color:#a0a1a7;"><em>//</em></span> 
     <span style="color:#a0a1a7;"><em>产⽣的</em></span> 
     <span style="color:#a0a1a7;"><em>x</em></span> 
     <span style="color:#a0a1a7;"><em>坐标应该是</em></span> 
     <span style="color:#a0a1a7;"><em>2</em></span> 
     <span style="color:#a0a1a7;"><em>的倍数，这样才可能和蛇头坐标对⻬。 </em></span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">do </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">{ </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">x = </span> 
     <span style="color:#c18401;">rand</span> 
     <span style="color:#2b2f36;">() % </span> 
     <span style="color:#986801;">53</span> 
     <span style="color:#2b2f36;"> + </span> 
     <span style="color:#986801;">2</span> 
     <span style="color:#2b2f36;">; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">y = </span> 
     <span style="color:#c18401;">rand</span> 
     <span style="color:#2b2f36;">() % </span> 
     <span style="color:#986801;">25</span> 
     <span style="color:#2b2f36;"> + </span> 
     <span style="color:#986801;">1</span> 
     <span style="color:#2b2f36;">; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">} </span> 
     <span style="color:#a626a4;">while</span> 
     <span style="color:#2b2f36;"> (x % </span> 
     <span style="color:#986801;">2</span> 
     <span style="color:#2b2f36;"> != </span> 
     <span style="color:#986801;">0</span> 
     <span style="color:#2b2f36;">); </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">pSnakeNode cur = ps-&gt;_pSnake;</span> 
     <span style="color:#a0a1a7;"><em>//</em></span> 
     <span style="color:#a0a1a7;"><em>获取指向蛇头的指针 </em></span> 
    </div> 
    <div> 
     <span style="color:#a0a1a7;"><em>//</em></span> 
     <span style="color:#a0a1a7;"><em>⻝物不能和蛇⾝冲突 </em></span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">while</span> 
     <span style="color:#2b2f36;"> (cur) </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">{ </span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">if</span> 
     <span style="color:#2b2f36;"> (cur-&gt;x == x &amp;&amp; cur-&gt;y == y) </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">{ </span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">goto</span> 
     <span style="color:#2b2f36;"> again; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">} </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">cur = cur-&gt;next; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">} </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">pSnakeNode pFood = (pSnakeNode)</span> 
     <span style="color:#c18401;">malloc</span> 
     <span style="color:#2b2f36;">(</span> 
     <span style="color:#c18401;">sizeof</span> 
     <span style="color:#2b2f36;">(SnakeNode)); </span> 
     <span style="color:#a0a1a7;"><em>//</em></span> 
     <span style="color:#a0a1a7;"><em>创建⻝物 </em></span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">if</span> 
     <span style="color:#2b2f36;"> (pFood == </span> 
     <span style="color:#0184bb;">NULL</span> 
     <span style="color:#2b2f36;">) </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">{ </span> 
    </div> 
    <div> 
     <span style="color:#c18401;">perror</span> 
     <span style="color:#2b2f36;">(</span> 
     <span style="color:#50a14f;">"CreateFood::malloc()"</span> 
     <span style="color:#2b2f36;">); </span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">return</span> 
     <span style="color:#2b2f36;">; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">} </span> 
    </div> 
    <div> 
     <span style="color:#a626a4;">else </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">{ </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">pFood-&gt;x = x; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">pFood-&gt;y = y; </span> 
    </div> 
    <div> 
     <span style="color:#c18401;">SetPos</span> 
     <span style="color:#2b2f36;">(pFood-&gt;x, pFood-&gt;y); </span> 
    </div> 
    <div> 
     <span style="color:#c18401;">wprintf</span> 
     <span style="color:#2b2f36;">(</span> 
     <span style="color:#50a14f;">L"%c"</span> 
     <span style="color:#2b2f36;">, FOOD); </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">ps-&gt;_pFood = pFood; </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">} </span> 
    </div> 
    <div> 
     <span style="color:#2b2f36;">}</span> 
    </div> 
   </div> 
  </div> 
 </blockquote> 
</div> 
<p>生成食物的函数，用rand随机生成但要注意不要越过墙的坐标范围，而且不能随机生成到蛇身上，也就是说随机坐标要有这俩判断条件，我们这个代码，中间生成的随机值与蛇身重合，就可以用goto语句来重新来一遍循环，将食物节点下一个next值置为空，别忘了，将食物节点，储存到蛇的结构体中</p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/86/1d/yNc7PqHU_o.png" width="367"></p> 
<hr> 
<h3 id="%C2%A04.3%E6%B8%B8%E6%88%8F%E8%BF%90%E8%A1%8C%EF%BC%88GameRun%EF%BC%89"> 4.3<span style="color:#1f2329;">游戏运行（GameRun）</span></h3> 
<div> 
 <span style="color:#1f2329;">游戏运行期间，右侧打印帮助信息，提示玩家，坐标开始位置(64, 15) </span> 
</div> 
<div> 
 <span style="color:#1f2329;">根据游戏状态检查游戏是否继续，如果是状态是OK，游戏继续，否则游戏结束。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">如果游戏继续，就是检测按键情况，确定蛇下一步的方向，或者是否加速减速，是否暂停或者退出游戏。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">需要的虚拟按键的罗列： </span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">上：VK_UP </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">下：VK_DOWN </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">左：VK_LEFT </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">右：VK_RIGHT </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">空格：VK_SPACE </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">ESC：VK_ESCAPE </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">F3：VK_F3 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">F4：VK_F4</span> 
 </div> 
</blockquote> 
<p> <span style="color:#1f2329;">确定了蛇的方向和速度，蛇就可以移动了。</span></p> 
<blockquote> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">GameRun</span> 
  <span style="color:#2b2f36;">(pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>打印右侧帮助信息 </em></span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">PrintHelpInfo</span> 
  <span style="color:#2b2f36;">(); </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">do </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">64</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">10</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">得分：</span> 
  <span style="color:#50a14f;">%d "</span> 
  <span style="color:#2b2f36;">, ps-&gt;_Socre); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">每个⻝物得分：</span> 
  <span style="color:#50a14f;">%d</span> 
  <span style="color:#50a14f;">分</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#2b2f36;">, ps-&gt;_foodWeight); </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_UP) &amp;&amp; ps-&gt;_Dir != DOWN) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_Dir = UP; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_DOWN) &amp;&amp; ps-&gt;_Dir != UP) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_Dir = DOWN; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_LEFT) &amp;&amp; ps-&gt;_Dir != RIGHT) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_Dir = LEFT; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_RIGHT) &amp;&amp; ps-&gt;_Dir != LEFT) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_Dir = RIGHT; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_SPACE)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">pause</span> 
  <span style="color:#2b2f36;">(); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_ESCAPE)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_Status = END_NOMAL; </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">break</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_F3)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">if</span> 
  <span style="color:#2b2f36;"> (ps-&gt;_SleepTime &gt;= </span> 
  <span style="color:#986801;">80</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_SleepTime -= </span> 
  <span style="color:#986801;">30</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_foodWeight += </span> 
  <span style="color:#986801;">2</span> 
  <span style="color:#2b2f36;">;</span> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>⼀个⻝物分数最⾼是</em></span> 
  <span style="color:#a0a1a7;"><em>20</em></span> 
  <span style="color:#a0a1a7;"><em>分 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">else if</span> 
  <span style="color:#2b2f36;"> (</span> 
  <span style="color:#c18401;">KEY_PRESS</span> 
  <span style="color:#2b2f36;">(VK_F4)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">if</span> 
  <span style="color:#2b2f36;"> (ps-&gt;_SleepTime &lt; </span> 
  <span style="color:#986801;">320</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_SleepTime += </span> 
  <span style="color:#986801;">30</span> 
  <span style="color:#2b2f36;">;</span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">ps-&gt;_foodWeight -= </span> 
   <span style="color:#986801;">2</span> 
   <span style="color:#2b2f36;">;</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>⼀个⻝物分数最低是</em></span> 
   <span style="color:#a0a1a7;"><em>2</em></span> 
   <span style="color:#a0a1a7;"><em>分 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>蛇每次⼀定之间要休眠的时间，时间短，蛇移动速度就快 </em></span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">Sleep</span> 
   <span style="color:#2b2f36;">(ps-&gt;_SleepTime); </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">SnakeMove</span> 
   <span style="color:#2b2f36;">(ps); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
   <span style="color:#a626a4;">while</span> 
   <span style="color:#2b2f36;"> (ps-&gt;_Status == OK); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">}</span> 
  </div> 
 </div> 
</blockquote> 
<p>这个函数我们根据虚拟键位值返回的值判断方向，但我们在玩贪吃蛇时，假如蛇方向在上，你不能按下的键，与它方向相反的键你按了不管用，改变不了蛇的状态，在加速减速中，我们通过控制睡眠时间长短，来控制蛇的速度，此外我们还需要确定蛇移动函数，注意：<strong><span style="color:#fe2c24;">这些信息一定是在游戏正常运行时才能出现的 </span></strong></p> 
<hr> 
<h4 id="4.3.1KEY_PRESS">4.3.1<span style="color:#1f2329;">KEY_PRESS </span></h4> 
<p><span style="color:#1f2329;">检测按键状态，我们封装了⼀个宏</span></p> 
<blockquote> 
 <div> 
  <span style="color:#4078f2;">#</span> 
  <span style="color:#a626a4;">define</span> 
  <span style="color:#4078f2;"> KEY_PRESS(VK) ((GetAsyncKeyState(VK)&amp;0x1) ? 1 : 0) </span> 
 </div> 
</blockquote> 
<hr> 
<h4 id="4.3.2PrintHelpInfo">4.3.2PrintHelpInfo</h4> 
<p>我们可以在游戏运行时，右边放些提示信息，来方便我们玩游戏</p> 
<blockquote> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">PrintHelpInfo</span> 
  <span style="color:#2b2f36;">() </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>打印提⽰信息 </em></span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">64</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">15</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">不能穿墙，不能咬到⾃⼰</span> 
  <span style="color:#50a14f;">\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">64</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">16</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">⽤</span> 
  <span style="color:#50a14f;">↑</span> 
  <span style="color:#50a14f;">.</span> 
  <span style="color:#50a14f;">↓</span> 
  <span style="color:#50a14f;">.</span> 
  <span style="color:#50a14f;">←</span> 
  <span style="color:#50a14f;">.</span> 
  <span style="color:#50a14f;">→</span> 
  <span style="color:#50a14f;">分别控制蛇的移动</span> 
  <span style="color:#50a14f;">."</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">64</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">17</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"F3 </span> 
  <span style="color:#50a14f;">为加速，</span> 
  <span style="color:#50a14f;">F4 </span> 
  <span style="color:#50a14f;">为减速</span> 
  <span style="color:#50a14f;">\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">64</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">18</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"ESC </span> 
  <span style="color:#50a14f;">：退出游戏</span> 
  <span style="color:#50a14f;">.space</span> 
  <span style="color:#50a14f;">：暂停游戏</span> 
  <span style="color:#50a14f;">."</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
</blockquote> 
<hr> 
<h4 id="%C2%A04.3.3%E8%9B%87%E8%BA%AB%E7%A7%BB%E5%8A%A8%EF%BC%88SnakeMove%EF%BC%89"> 4.3.3<span style="color:#1f2329;">蛇身移动（SnakeMove）</span></h4> 
<p><span style="color:#1f2329;">上面游戏运行过程中我们不是需要定义一个蛇移动的函数嘛</span></p> 
<div> 
 <span style="color:#1f2329;">先创建下一个节点，根据移动方向和蛇头的坐标，蛇移动到下一个位置的坐标。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">确定了下一个位置后，看下一个位置是否是食物（NextIsFood），是食物就做吃食物处理 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">（EatFood），如果不是食物则做前进一步的处理（NoFood）。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">蛇身移动后，判断此次移动是否会造成撞墙（KillByWall）或者撞上自己蛇身（KillBySelf），从而影响游戏的状态。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">那NextIsFood，EatFood，NoFood，KillByWall，KillBySelf函数我们都需要一一定义</span> 
</div> 
<blockquote> 
 <div> 
  <div> 
   <span style="color:#986801;">void </span> 
   <span style="color:#4078f2;">SnakeMove</span> 
   <span style="color:#2b2f36;">(pSnake ps) </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>创建下⼀个节点 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> pSnakeNode pNextNode = (pSnakeNode)</span> 
   <span style="color:#c18401;">malloc</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#c18401;">sizeof</span> 
   <span style="color:#2b2f36;">(SnakeNode)); </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">if</span> 
   <span style="color:#2b2f36;"> (pNextNode == </span> 
   <span style="color:#0184bb;">NULL</span> 
   <span style="color:#2b2f36;">) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">perror</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"SnakeMove()::malloc()"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">return</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>确定下⼀个节点的坐标，下⼀个节点的坐标根据，蛇头的坐标和⽅向确定 </em></span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">switch</span> 
   <span style="color:#2b2f36;"> (ps-&gt;_Dir) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">case</span> 
   <span style="color:#2b2f36;"> UP: </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y - </span> 
   <span style="color:#986801;">1</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">break</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">case</span> 
   <span style="color:#2b2f36;"> DOWN: </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y + </span> 
   <span style="color:#986801;">1</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">break</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">case</span> 
   <span style="color:#2b2f36;"> LEFT: </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x - </span> 
   <span style="color:#986801;">2</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">break</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">case</span> 
   <span style="color:#2b2f36;"> RIGHT: </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x + </span> 
   <span style="color:#986801;">2</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">break</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>如果下⼀个位置就是⻝物 </em></span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">if</span> 
   <span style="color:#2b2f36;"> (</span> 
   <span style="color:#c18401;">NextIsFood</span> 
   <span style="color:#2b2f36;">(pNextNode, ps)) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">EatFood</span> 
   <span style="color:#2b2f36;">(pNextNode, ps); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#a626a4;">else</span> 
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>如果没有⻝物 </em></span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">{ </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">NoFood</span> 
   <span style="color:#2b2f36;">(pNextNode, ps); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">KillByWall</span> 
   <span style="color:#2b2f36;">(ps); </span> 
  </div> 
  <div> 
   <span style="color:#c18401;">KillBySelf</span> 
   <span style="color:#2b2f36;">(ps); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">} </span> 
  </div> 
 </div> 
</blockquote> 
<hr> 
<h5 id="4.3.3.1NextIsFood">4.3.3.1<span style="color:#1f2329;">NextIsFood </span></h5> 
<p>假如下一个坐标是食物，我们需要返回1或0,1就代表是食物，0就代表不是食物，方便If判断</p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>//pSnakeNode psn </em></span> 
  <span style="color:#a0a1a7;"><em>是下⼀个节点的地址 </em></span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//pSnake ps </em></span> 
  <span style="color:#a0a1a7;"><em>维护蛇的指针 </em></span> 
 </div> 
 <div> 
  <span style="color:#986801;">int </span> 
  <span style="color:#4078f2;">NextIsFood</span> 
  <span style="color:#2b2f36;">(pSnakeNode psn, pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">return</span> 
  <span style="color:#2b2f36;"> (psn-&gt;x == ps-&gt;_pFood-&gt;x) &amp;&amp; (psn-&gt;y == ps-&gt;_pFood-&gt;y); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
</blockquote> 
<hr> 
<h5 id="4.3.3.2%C2%A0EatFood">4.3.3.2 <span style="color:#1f2329;">EatFood</span></h5> 
<p><span style="color:#1f2329;">这个就是吃掉事物的函数，假如下一个坐标是食物，我们吃掉它，我们蛇身需要增长，我们想一下，我们可以直接用食物的节点头插到我们蛇身，成为我们新蛇头节点，这样就可以让蛇身增长了</span></p> 
<p><span style="color:#1f2329;">吃完之后，得需要再打印一遍蛇，吃掉的话，总分就会加食物分，我们不要忘记</span></p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>//pSnakeNode psn </em></span> 
  <span style="color:#a0a1a7;"><em>是下⼀个节点的地址 </em></span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//pSnake ps </em></span> 
  <span style="color:#a0a1a7;"><em>维护蛇的指针 </em></span> 
 </div> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">EatFood</span> 
  <span style="color:#2b2f36;">(pSnakeNode psn, pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>头插法 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">psn-&gt;next = ps-&gt;_pSnake; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">ps-&gt;_pSnake = psn; </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>打印蛇 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">pSnakeNode cur = ps-&gt;_pSnake; </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">while</span> 
  <span style="color:#2b2f36;"> (cur) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(cur-&gt;x, cur-&gt;y); </span> 
 </div> 
 <div> 
  <span style="color:#c18401;">wprintf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">L"%c"</span> 
  <span style="color:#2b2f36;">, BODY); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">cur = cur-&gt;next; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">ps-&gt;_Socre += ps-&gt;_foodWeight; </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>释放⻝物节点 </em></span> 
 </div> 
 <div> 
  <span style="color:#c18401;">free</span> 
  <span style="color:#2b2f36;">(ps-&gt;_pFood); </span> 
 </div> 
 <div> 
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>创建新的⻝物 </em></span> 
 </div> 
 <div> 
  <span style="color:#c18401;">CreateFood</span> 
  <span style="color:#2b2f36;">(ps); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
</blockquote> 
<p><img alt="" height="499" src="https://images2.imgbox.com/e9/f5/EDjdgqqK_o.png" width="518"></p> 
<hr> 
<h5 id="4.3.3.3NoFood">4.3.3.3<span style="color:#1f2329;">NoFood </span></h5> 
<div> 
 <span style="color:#1f2329;">这个函数就是下一步不是食物时，将下一个节点头插入蛇的身体，并将之前蛇身最后一个节点打印为空格，释放掉蛇身的最后一个节点。 </span> 
</div> 
<div> 
 <span style="color:#d83931;">易错点：</span> 
 <span style="color:#1f2329;"><span style="background-color:#a2e043;">这里最容易错误的是，释放最后一个结点后，还得将指向在最后一个结点的指针改为NULL， 保证蛇尾打印可以正常结束，不会越界访问。 </span></span> 
</div> 
<div> 
 <span style="color:#1f2329;">相当于整体思路：先头插-&gt;再打印蛇(不打印最后一个节点)-&gt;再打印空格-&gt;最后释放掉最后一个节点空间</span> 
</div> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>//pSnakeNode psn </em></span> 
  <span style="color:#a0a1a7;"><em>是下⼀个节点的地址 </em></span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#a0a1a7;"><em>//pSnake ps </em></span> 
  <span style="color:#a0a1a7;"><em>维护蛇的指针 </em></span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">NoFood</span> 
  <span style="color:#2b2f36;">(pSnakeNode psn, pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>头插法 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> psn-&gt;next = ps-&gt;_pSnake; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> ps-&gt;_pSnake = psn; </span> 
 </div> 
 <div></div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>打印蛇 </em></span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> pSnakeNode cur = ps-&gt;_pSnake; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(cur-&gt;x, cur-&gt;y); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">wprintf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">L"%c"</span> 
  <span style="color:#2b2f36;">, BODY); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> cur = cur-&gt;next; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> } </span> 
 </div> 
 <div></div> 
 <div>
     
  <span style="color:#a0a1a7;"><em>//</em></span> 
  <span style="color:#a0a1a7;"><em>最后⼀个位置打印空格，然后释放节点 </em></span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(cur-&gt;next-&gt;x, cur-&gt;next-&gt;y); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">" "</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">free</span> 
  <span style="color:#2b2f36;">(cur-&gt;next); </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> cur-&gt;next = </span> 
  <span style="color:#0184bb;">NULL</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
</blockquote> 
<p><img alt="" height="524" src="https://images2.imgbox.com/07/98/bXibQ4Ez_o.png" width="558"></p> 
<hr> 
<h5 id="4.3.3.4KillByWall">4.3.3.4<span style="color:#1f2329;">KillByWall</span></h5> 
<p> <span style="color:#1f2329;">判断蛇头的坐标是否和墙的坐标冲突函数</span></p> 
<p><span style="color:#1f2329;">这个函数目的就在于若蛇头坐标与墙坐标重叠就将游戏状态变为因撞墙而结束</span></p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>//pSnake ps </em></span> 
  <span style="color:#a0a1a7;"><em>维护蛇的指针 </em></span> 
 </div> 
 <div> 
  <span style="color:#986801;">int </span> 
  <span style="color:#4078f2;">KillByWall</span> 
  <span style="color:#2b2f36;">(pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">if</span> 
  <span style="color:#2b2f36;"> ((ps-&gt;_pSnake-&gt;x == </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">|| (ps-&gt;_pSnake-&gt;x == </span> 
  <span style="color:#986801;">56</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">|| (ps-&gt;_pSnake-&gt;y == </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">|| (ps-&gt;_pSnake-&gt;y == </span> 
  <span style="color:#986801;">26</span> 
  <span style="color:#2b2f36;">)) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">ps-&gt;_Status = KILL_BY_WALL; </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">return </span> 
  <span style="color:#986801;">1</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">} </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">return </span> 
  <span style="color:#986801;">0</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">}</span> 
 </div> 
</blockquote> 
<p><img alt="" height="361" src="https://images2.imgbox.com/ef/00/AhyHTqak_o.png" width="364"></p> 
<hr> 
<h5 id="4.3.3.5KillBySelf">4.3.3.5<span style="color:#1f2329;">KillBySelf </span></h5> 
<p> <span style="color:#1f2329;">判断蛇头的坐标是否和蛇身体的坐标冲突，若冲突，就将游戏状态变为因撞到蛇身而结束</span></p> 
<blockquote> 
 <div> 
  <span style="color:#a0a1a7;"><em>/pSnake ps </em></span> 
  <span style="color:#a0a1a7;"><em>维护蛇的指针 </em></span> 
 </div> 
 <div> 
  <span style="color:#986801;">int </span> 
  <span style="color:#4078f2;">KillBySelf</span> 
  <span style="color:#2b2f36;">(pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">pSnakeNode cur = ps-&gt;_pSnake-&gt;next; </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">while</span> 
  <span style="color:#2b2f36;"> (cur) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#a626a4;">if</span> 
  <span style="color:#2b2f36;"> ((ps-&gt;_pSnake-&gt;x == cur-&gt;x)</span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#2b2f36;">&amp;&amp; (ps-&gt;_pSnake-&gt;y == cur-&gt;y)) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> ps-&gt;_Status = KILL_BY_SELF; </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">return </span> 
   <span style="color:#986801;">1</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur = cur-&gt;next; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">return </span> 
   <span style="color:#986801;">0</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#646a73;"> </span> 
   <span style="color:#2b2f36;">}</span> 
  </div> 
 </div> 
</blockquote> 
<p><img alt="" height="372" src="https://images2.imgbox.com/b6/65/8sxQcy1H_o.png" width="371"></p> 
<p></p> 
<hr> 
<h3 id="4.4%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F">4.4游戏结束</h3> 
<p> <span style="color:#1f2329;">游戏状态不再是OK（游戏继续）的时候，要告知游戏结束的原因，并且释放蛇身节点。</span></p> 
<blockquote> 
 <div> 
  <span style="color:#986801;">void </span> 
  <span style="color:#4078f2;">GameEnd</span> 
  <span style="color:#2b2f36;">(pSnake ps) </span> 
 </div> 
 <div> 
  <span style="color:#646a73;"> </span> 
  <span style="color:#2b2f36;">{ </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> pSnakeNode cur = ps-&gt;_pSnake; </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">SetPos</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#986801;">24</span> 
  <span style="color:#2b2f36;">, </span> 
  <span style="color:#986801;">12</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">switch</span> 
  <span style="color:#2b2f36;"> (ps-&gt;_Status) </span> 
 </div> 
 <div> 
  <span style="color:#2b2f36;"> { </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">case</span> 
  <span style="color:#2b2f36;"> END_NOMAL: </span> 
 </div> 
 <div>
     
  <span style="color:#c18401;">printf</span> 
  <span style="color:#2b2f36;">(</span> 
  <span style="color:#50a14f;">"</span> 
  <span style="color:#50a14f;">您主动退出游戏</span> 
  <span style="color:#50a14f;">\n"</span> 
  <span style="color:#2b2f36;">); </span> 
 </div> 
 <div>
     
  <span style="color:#a626a4;">break</span> 
  <span style="color:#2b2f36;">; </span> 
 </div> 
 <div> 
  <div> 
   <span style="color:#a626a4;">case</span> 
   <span style="color:#2b2f36;"> KILL_BY_SELF: </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"</span> 
   <span style="color:#50a14f;">您撞上⾃⼰了</span> 
   <span style="color:#50a14f;"> ,</span> 
   <span style="color:#50a14f;">游戏结束</span> 
   <span style="color:#50a14f;">!\n"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">break</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">case</span> 
   <span style="color:#2b2f36;"> KILL_BY_WALL: </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">printf</span> 
   <span style="color:#2b2f36;">(</span> 
   <span style="color:#50a14f;">"</span> 
   <span style="color:#50a14f;">您撞墙了</span> 
   <span style="color:#50a14f;">,</span> 
   <span style="color:#50a14f;">游戏结束</span> 
   <span style="color:#50a14f;">!\n"</span> 
   <span style="color:#2b2f36;">); </span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">break</span> 
   <span style="color:#2b2f36;">; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div>
      
   <span style="color:#a0a1a7;"><em>//</em></span> 
   <span style="color:#a0a1a7;"><em>释放蛇⾝的节点 </em></span> 
  </div> 
  <div>
      
   <span style="color:#a626a4;">while</span> 
   <span style="color:#2b2f36;"> (cur) </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> { </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> pSnakeNode del = cur; </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> cur = cur-&gt;next; </span> 
  </div> 
  <div>
      
   <span style="color:#c18401;">free</span> 
   <span style="color:#2b2f36;">(del); </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;"> } </span> 
  </div> 
  <div> 
   <span style="color:#2b2f36;">}</span> 
  </div> 
 </div> 
</blockquote> 
<div> 
 <hr> 
 <h2 id="5.%E5%8F%82%E8%80%83%E4%BB%A3%E7%A0%81">5.参考代码</h2> 
 <p>Snake.h</p> 
 <pre><code>#define _CRT_SECURE_NO_WARNINGS 1
#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;stdlib.h&gt;
#define POS_X 24
#define POS_Y 5

#define WALL L'□'
#define BODY L'●'
#define FOOD L'★'
enum DIRECTION//舌头方向的枚举类型的定义
{
	UP = 1,//上
	DOWN,//下
	LEFT,//左
	RIGHT//右
};
enum GAME_STATUS
{
	OK,//游戏状态正常运行
	KILL_BY_WALL,//撞到墙结束
	KILL_BY_SELE,//撞到自身结束
	END_NOMAL//正常运行结束
};
typedef struct SnakeNode//蛇身的每一个节点结构体，其实蛇身就是个单链表
{
	int x;//蛇身每一个节点在地图上的坐标
	int y;
	struct SnakeNode* next;
}SnakeNode, *pSnakeNode;
//用一个结构体来维护整条贪吃蛇
typedef struct Snake
{
	pSnakeNode _pSnake;//蛇头指针
	pSnakeNode _pFood;//食物指针
	enum DIRECTION _Dir;//蛇头方向的枚举，默认是向右
	enum GAME_STATUS _Status;//游戏状态的枚举
	int _Socre;//游戏当前获得分数
	int _foodWeight;//我们默认每个事物10分
	int _SleepTime;//每走一步休眠时间
}Snake,*pSnake;
void GameStart(pSnake ps);//游戏开始初始化函数声明
void WelcomeToGame();//欢迎界面的函数声明
void CreateMap();//地图函数的声明
void InitSnake(pSnake ps);//蛇初始化函数
void CreateFood(ps);//创建食物
void GameRun(pSnake ps);//运行游戏
void Pause();//暂停函数
void SnakeMove(pSnake ps);//蛇每走一步
int NextFood(pSnakeNode pNextNode, pSnake ps);//检测下一个坐标是否是食物
void EatFood(pSnakeNode pn, pSnake ps);//吃掉食物
void NoFood(pSnakeNode pn, pSnake ps);//下一个坐标不是食物的函数
//检测是否撞到墙
void KillByWall(pSnake ps);
//检测是否撞到自己
void KillBySelf(pSnake ps);
void GameEnd(pSnake ps);//游戏结束主逻辑函数</code></pre> 
 <div> 
  <span style="color:#1f2329;">Snake.c</span> 
 </div> 
 <div> 
  <pre><code>#define _CRT_SECURE_NO_WARNINGS 1
#include "Snake.h"
void SetPos(short x, short y)//创建SetPos函数用来控制光标位置
{
	HANDLE houtput = NULL;
	houtput = GetStdHandle(STD_OUTPUT_HANDLE);//获得标准输出设备的句柄
	//定位光标的位置
	COORD pos = { x, y };	
	SetConsoleCursorPosition(houtput, pos);//将光标位置通过句柄设置到标准输出设备中
}
void color(int c) {
	SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), c);
}
void WelcomeToGame()//欢迎界面的函数定义
{
	SetPos(40, 14);
	color(4);
	wprintf(L"欢迎来到贪吃蛇小游戏");
	SetPos(40, 20);//让按任意键继续出现的位置好看些
	system("pause");//暂停，按任意键继续
	system("cls");//清空屏幕
	SetPos(25, 14);
	color(6);
	wprintf(L"用←.→.↑.↓分别控制蛇的移动，F3为加速，F4为减速\n");
	SetPos(25, 15);
	color(8);
	wprintf(L"●代表蛇，★代表食物，□代表墙\n");
	SetPos(25, 16);
	color(9);
	wprintf(L"加速能够得到更高的分数\n");
	SetPos(42, 20);
	color(11);
	system("pause");
	system("cls");
}
void CreateMap()//地图函数的定义
{
	color(4);
	int i = 0;
	//最上面横一道墙
	for (i = 0; i &lt; 29; i++)
	{
		wprintf(L"%lc", L'□');
	}
	//最下面横一道墙
	SetPos(0, 26);
	for (i = 0; i &lt; 29; i++)
	{
		wprintf(L"%lc", L'□');
	}
	//最左面竖一道墙
	for (i = 1; i &lt; 26; i++)
	{
		SetPos(0, i);
		wprintf(L"%lc", L'□');
	}
	//最右面竖一道墙
	for (i = 1; i &lt; 26; i++)
	{
		SetPos(56, i);
		wprintf(L"%lc", L'□');
	}
}
void InitSnake(pSnake ps)//蛇初始化函数的定义
{
	int i = 0;
	pSnakeNode cur=NULL;
	for (int i = 0; i &lt; 5; i++)
	{
		cur = (pSnakeNode)malloc(sizeof(SnakeNode));//创建节点空间
		if (cur == NULL)
		{
			perror("InitSnake()::malloc()");
			return;
		}
		cur-&gt;next = NULL;
		cur-&gt;y = POS_Y;
		cur-&gt;x = POS_X + 2 * i;
		//头插法插入链表
		if (ps-&gt;_pSnake == NULL)
		{
			ps-&gt;_pSnake = cur;
		}
		else//链表不为空时
		{
			cur-&gt;next = ps-&gt;_pSnake;
			ps-&gt;_pSnake = cur;
		}
		cur = ps-&gt;_pSnake;//打印蛇的身体
		while (cur)
		{
			color(13);
			SetPos(cur-&gt;x, cur-&gt;y);
			wprintf(L"%lc", BODY);
			cur = cur-&gt;next;
		}
	}
	//设置游戏属性
	ps-&gt;_foodWeight = 10;
	ps-&gt;_Socre = 0;
	ps-&gt;_SleepTime = 200;
	ps-&gt;_Dir = RIGHT;
	ps-&gt;_Status = OK;
}
void CreateFood(pSnake ps)
{
	int x = 0;
	int y = 0;
	//x的值为2的倍数，范围2~54
	//y的范围是1~25
	again:
	do
	{
		x = rand() % 53 + 2;
		y = rand() % 25 + 1;
	} while (x % 2 != 0);//生成随机坐标
	pSnakeNode cur = ps-&gt;_pSnake;
	while (cur)//判断生成的食物节点坐标是否与蛇坐标重叠
	{
		if (cur-&gt;x == x || cur-&gt;y == y)
		{
			goto again;
		}
		cur = cur-&gt;next;
	}
	//创建食物的节点
	pSnakeNode pFood = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pFood == NULL)
	{
		perror("CreateFood()::malloc()");
		return;
	}
	pFood-&gt;x = x;
	pFood-&gt;y = y;
	pFood-&gt;next = NULL;
	SetPos(x, y);
	color(11);
	wprintf(L"%lc", FOOD);//打印食物
	ps-&gt;_pFood = pFood;
}
void GameStart(pSnake ps)//游戏开始初始化函数定义
{
	/*控制台窗⼝⼤⼩的设置
		• 控制台窗⼝名字的设置
		• ⿏标光标的隐藏
		• 打印欢迎界⾯
		• 创建地图
		• 初始化第蛇
		• 创建第⼀个⻝物*/
	system("mode con cols=100 lines=30");//控制台窗口的设置
	system("title 贪吃蛇");//控制台窗口名字的设置
	HANDLE houtput = GetStdHandle(STD_OUTPUT_HANDLE);//获得标准输出屏幕的句柄
	//鼠标光标的隐藏
	CONSOLE_CURSOR_INFO CursorInfo;//光标信息结构体变量创建
	GetConsoleCursorInfo(houtput, &amp;CursorInfo);//将标准输出屏幕的光标信息存放变量中
	CursorInfo.bVisible = FALSE;//隐藏控制光标
	SetConsoleCursorInfo(houtput, &amp;CursorInfo);//将修改的光标信息设置到标准输出屏幕中
	//打印游戏开始界面
	WelcomeToGame();
	//打印地图
	CreateMap();
	//初始化蛇
	InitSnake(ps);
	//创造一个食物
	CreateFood(ps);
}
#define KEY_PRESS(vk)  ((GetAsyncKeyState(vk)&amp;1)?1:0)//键位虚拟值判断的宏
void PrintfHelp()//提示信息函数的定义
{
	color(6);
	SetPos(64, 14);
	wprintf(L"%ls", L"1.不能穿墙，不能咬到自己");
	SetPos(64, 15);
	wprintf(L"%ls",L"2.用 ↑. ↓ . ← . → 来控制蛇的移动");
	SetPos(64, 16);
	wprintf(L"%ls",L"3.按F3加速，F4减速");
	SetPos(64, 17);
	wprintf(L"%ls",L"4.按ESC退出游戏，按空格暂停游戏");
	SetPos(64, 18);
	wprintf(L"%ls",L"5.小张同学制作");
	
}
void Pause()//暂停函数的定义
{
	while (1)
	{
		Sleep(200);
		if (KEY_PRESS(VK_SPACE))
		{
			break;
		}
	}
}
int NextFood(pSnakeNode pn, pSnake ps)//检测下一个节点坐标的函数
{
	return (pn-&gt;x == ps-&gt;_pFood-&gt;x &amp;&amp; pn-&gt;y == ps-&gt;_pFood-&gt;y);
}
void EatFood(pSnakeNode pn, pSnake ps)//吃掉食物的函数
{
	//将食物节点作为新节点头插到蛇头
	ps-&gt;_pFood-&gt;next = ps-&gt;_pSnake;
	ps-&gt;_pSnake = ps-&gt;_pFood;
	//将下一个节点释放
	free(pn);
	pn = NULL;
	pSnakeNode cur = ps-&gt;_pSnake;
	//打印吃掉后的蛇
	while (cur)
	{
		SetPos(cur-&gt;x, cur-&gt;y);
		color(13);
		wprintf(L"%lc", BODY);
		cur = cur-&gt;next;
	}
	//分数增加
	ps-&gt;_Socre += ps-&gt;_foodWeight;
	//重新创建食物
	CreateFood(ps);
}
void NoFood(pSnakeNode pn, pSnake ps)
{
	//将下一个坐标头插到蛇
	pn-&gt;next = ps-&gt;_pSnake;
	ps-&gt;_pSnake = pn;
	//打印移动后的蛇
	pSnakeNode cur = ps-&gt;_pSnake;
	while (cur-&gt;next-&gt;next!=NULL)
	{
		SetPos(cur-&gt;x, cur-&gt;y);
		color(13);
		wprintf(L"%lc", BODY);
		cur = cur-&gt;next;
	}
	//把最后一个节点打印成空格
	SetPos(cur-&gt;next-&gt;x, cur-&gt;next-&gt;y);
	printf("  ");
	//释放最后一个节点
	free(cur-&gt;next);
	//把倒数第二个节点next置为空
	cur-&gt;next = NULL;
}
//检测是否撞到墙
void KillByWall(pSnake ps)
{
	if (ps-&gt;_pSnake-&gt;x == 0 || ps-&gt;_pSnake-&gt;y == 0 || ps-&gt;_pSnake-&gt;y == 26 || ps-&gt;_pSnake-&gt;x == 56)
	{
		ps-&gt;_Status = KILL_BY_WALL;
	}
}
//检测是否撞到自己
void KillBySelf(pSnake ps)
{
	pSnakeNode cur = ps-&gt;_pSnake-&gt;next;
	while (cur)
	{
		if (cur-&gt;x == ps-&gt;_pSnake-&gt;x &amp;&amp; cur-&gt;y == ps-&gt;_pSnake-&gt;y)
		{
			ps-&gt;_Status = KILL_BY_SELE;
			break;
		}
		cur = cur-&gt;next;
	}
}
void SnakeMove(pSnake ps)//蛇每走一步的函数的定义
{
	pSnakeNode pNextNode = (pSnakeNode)malloc(sizeof(SnakeNode));//创建走的下一个节点
	if (pNextNode == NULL)
	{
		perror("SnakeMove()::malloc()");
		return;
	}
	switch (ps-&gt;_Dir)//方向判断
	{
	case UP:
		pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x;
		pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y-1;
		break;
	case DOWN:
		pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x;
		pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y + 1;
		break;
	case LEFT:
		pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x-2;
		pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y;
		break;
	case RIGHT:
		pNextNode-&gt;x = ps-&gt;_pSnake-&gt;x+2;
		pNextNode-&gt;y = ps-&gt;_pSnake-&gt;y;
		break;
	}
	//检测下一个坐标是否是食物
	if (NextFood(pNextNode, ps))
	{
		EatFood(pNextNode, ps);
	}
	else
	{
		NoFood(pNextNode, ps);
	}
	//检测是否撞到墙
	KillByWall(ps);
	//检测是否撞到自己
	KillBySelf(ps);
}

//运行游戏主逻辑函数的定义
void GameRun(pSnake ps)
{
	PrintfHelp();//打印帮助信息
	color(9);
	do
	{
		//打印总分数与食物分数的信息
		SetPos(64, 10);
		printf("总分数:%d\n", ps-&gt;_Socre);
		SetPos(64, 11);
		color(9);
		printf("当前食物的分数：%2d\n", ps-&gt;_foodWeight);
		//键位的操作
		if (KEY_PRESS(VK_UP) &amp;&amp; ps-&gt;_Dir != DOWN)//↑键，是蛇头方向向上
		{
			ps-&gt;_Dir = UP;
		}
		else if (KEY_PRESS(VK_DOWN) &amp;&amp; ps-&gt;_Dir != UP)//↓键，是蛇头方向向下
		{
			ps-&gt;_Dir = DOWN;
		}
		else if (KEY_PRESS(VK_LEFT) &amp;&amp; ps-&gt;_Dir != RIGHT)//→键，是蛇头方向向右
		{
			ps-&gt;_Dir = LEFT;
		}
		else if (KEY_PRESS(VK_RIGHT) &amp;&amp; ps-&gt;_Dir != LEFT)//←键，是蛇头方向向左
		{
			ps-&gt;_Dir = RIGHT;
		}
		else if (KEY_PRESS(VK_SPACE))//空格键，表示暂停
		{
			Pause();//暂停函数
		}
		else if (KEY_PRESS(VK_F3))//F3加速
		{
			if(ps-&gt;_SleepTime &gt; 60)
			{
				ps-&gt;_SleepTime -= 30;
				ps-&gt;_foodWeight += 2;
			}
		}
		else if (KEY_PRESS(VK_F4))//F4减速
		{
			if (ps-&gt;_foodWeight &gt; 2)
			{
				ps-&gt;_SleepTime += 30;
				ps-&gt;_foodWeight -= 2;
			}
		}
		else if (KEY_PRESS(VK_ESCAPE))//Esc键表示游戏结束
		{
			ps-&gt;_Status = END_NOMAL;
		}
		SnakeMove(ps);//蛇每走一步的函数
		Sleep(ps-&gt;_SleepTime);//睡眠时间

	} while (ps-&gt;_Status == OK);
	
}
void GameEnd(pSnake ps)//游戏结束主逻辑函数
{
	SetPos(24, 12);
	switch (ps-&gt;_Status)
	{
	case END_NOMAL:
		color(8);
		wprintf(L"你主动退出游戏\n");
		break;
	case KILL_BY_WALL:
		color(8);
		wprintf(L"你撞到墙上，游戏结束\n");
		break;
	case KILL_BY_SELE:
		color(8);
		wprintf(L"你撞到了自己，游戏结束\n");
		break;
	}
	//释放蛇身链表
	pSnakeNode cur = ps-&gt;_pSnake;
	while (cur)
	{
		pSnakeNode del = cur;
		cur = cur-&gt;next;
		free(del);
	}

}</code></pre> 
  <div> 
   <span style="color:#1f2329;">text.c</span> 
  </div> 
  <div> 
   <pre><code>#define _CRT_SECURE_NO_WARNINGS 1
#include "Snake.h"
#include &lt;locale.h&gt;
void test()
{
	int ch = 0;
	do
	{
		system("cls");
		//创建贪吃蛇
		Snake snake = { 0 };
		//初始化游戏
		//1.打印环境界面
		//2.功能介绍
		//3.绘制地图
		//4.创建蛇
		//5.创建食物
		//设置游戏的相关信息
		GameStart(&amp;snake);
		//运行游戏
		GameRun(&amp;snake);
		GameEnd(&amp;snake);
		SetPos(20, 15);
		printf("再来一局吗?(Y/N):");
		ch = getchar();
		while (getchar() != '\n');
	} while (ch == 'Y' || ch == 'y');
	SetPos(0, 27);
}
int main()
{
	srand((unsigned int)time(NULL));//生成随机值
	setlocale(LC_ALL, "");//修改当前地区为本地模式,为了方便打印宽字符
	test();
	return 0;
}</code></pre> 
   <hr> 
   <blockquote> 
    <p><span style="color:#4da8ee;">结束语</span></p> 
    <p><span style="color:#0d0016;">贪吃蛇博客就总结完了，有什么问题，欢迎各位大佬评论，总的来说，结合了C语言知识，数据结构知识，API函数方面有关函数等，只要思路顺清楚还是比较简单的。</span></p> 
    <p><span style="color:#0d0016;">OK，感谢观看！！！</span></p> 
    <p style="text-align:center;"><span style="color:#0d0016;"><img alt="" class="left" height="100" src="https://images2.imgbox.com/fd/59/IDht0E8V_o.gif" width="100"></span><img alt="" src="https://images2.imgbox.com/31/b2/NYTwQoDr_o.gif"><img alt="" class="right" src="https://images2.imgbox.com/79/17/dRKJL6VC_o.gif"></p> 
   </blockquote> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4b4a67fa4c105cdf83fb8c8cd468683d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">回顾苹果 AI 布局：迟到的王，迎接关键一战</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e47caab00796d51826aee94c743213a4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python 第三方 PyQt5 库使用PyQt5-tools的依赖包安装和 Qt Designer、PyUIC、PyRcc三个工具的设置以及QT Designer实现拖拽进行可视化UI界面开发</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>