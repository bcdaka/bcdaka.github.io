<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springmvc中WebMvcConfigurationSupport中addInterceptor使用详解及方法详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c4900d7ec27f3d2e05e8b8933853b942/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="springmvc中WebMvcConfigurationSupport中addInterceptor使用详解及方法详解">
  <meta property="og:description" content="1. addInterceptor简介 在Spring MVC中，WebMvcConfigurationSupport是一个类，可以通过继承它来进行自定义的MVC配置。在这个类中，可以使用addInterceptor方法来添加拦截器到请求处理链中。
下面是关于addInterceptor方法的说明：
java复制代码protected void addInterceptor(InterceptorRegistry registry) addInterceptor方法是WebMvcConfigurationSupport中的方法之一，用于添加拦截器。在子类中重写这个方法，可以向注册表（InterceptorRegistry）中添加拦截器。通过注册表，可以指定拦截器要拦截的路径、优先级等信息。 总之，addInterceptors(InterceptorRegistry registry)：用于注册拦截器。我们可以通过重写这个方法，将自定义的拦截器添加到 registry 中。
2. InterceptorRegistry 方法详解 2.1 addPathPatterns(String… patterns) 通过这个方法，我们可以指定要拦截的请求路径模式，使拦截器只对符合指定路径模式的请求进行拦截。
以下是关于 addPathPatterns 方法的说明：
addPathPatterns 方法接受一个或多个字符串参数作为路径模式。路径模式可以使用通配符来匹配多个路径，例如 &#34;/*&#34; 表示根路径和其子路径都会被拦截。该方法可以在添加拦截器时使用，用于指定需要被拦截器处理的路径。拦截的路径模式将被应用于已经设置的拦截路径上。 @Override public void addInterceptors(InterceptorRegistry registry) { registry.addInterceptor(new CustomInterceptor()) .addPathPatterns(&#34;/api/**&#34;); // 拦截 /api 下的所有请求 } 在上面的示例中，首先通过 addInterceptor 方法添加了一个自定义拦截器 CustomInterceptor，然后使用 addPathPatterns 方法指定了要拦截的路径模式 /api/**。
这样配置之后，拦截器将会对所有以 /api/ 开头的请求进行拦截处理。
通过使用 addPathPatterns 方法，我们可以更加细粒度地指定拦截器的应用范围，根据具体需求选择性地拦截某些路径。如果不调用 addPathPatterns 方法，则拦截器将对所有请求生效。
2.2 addPathPatterns(List patterns) 通过这个方法，我们可以指定要拦截的请求路径模式列表，使拦截器只对符合指定路径模式的请求进行拦截。
以下是关于 addPathPatterns 方法的说明：
addPathPatterns 方法接受一个字符串列表作为路径模式。
路径模式可以使用通配符来匹配多个路径，例如 &#34;/*&#34; 表示根路径和其子路径都会被拦截。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-15T07:30:00+08:00">
    <meta property="article:modified_time" content="2023-09-15T07:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springmvc中WebMvcConfigurationSupport中addInterceptor使用详解及方法详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_addInterceptor_0"></a>1. addInterceptor简介</h2> 
<p>在Spring MVC中，<code>WebMvcConfigurationSupport</code>是一个类，可以通过继承它来进行自定义的MVC配置。在这个类中，可以使用<code>addInterceptor</code>方法来添加拦截器到请求处理链中。</p> 
<p>下面是关于<code>addInterceptor</code>方法的说明：</p> 
<pre><code>java复制代码protected void addInterceptor(InterceptorRegistry registry)
</code></pre> 
<ul><li><code>addInterceptor</code>方法是<code>WebMvcConfigurationSupport</code>中的方法之一，用于添加拦截器。</li><li>在子类中重写这个方法，可以向注册表（<code>InterceptorRegistry</code>）中添加拦截器。</li><li>通过注册表，可以指定拦截器要拦截的路径、优先级等信息。</li></ul> 
<p>总之，<code>addInterceptors(InterceptorRegistry registry)</code>：用于注册拦截器。我们可以通过重写这个方法，将自定义的拦截器添加到 <code>registry</code> 中。</p> 
<h2><a id="2_InterceptorRegistry__16"></a>2. InterceptorRegistry 方法详解</h2> 
<h3><a id="21_addPathPatternsString_patterns_18"></a>2.1 addPathPatterns(String… patterns)</h3> 
<p>通过这个方法，我们可以指定要拦截的请求路径模式，使拦截器只对符合指定路径模式的请求进行拦截。</p> 
<p>以下是关于 <code>addPathPatterns</code> 方法的说明：</p> 
<ul><li><code>addPathPatterns</code> 方法接受一个或多个字符串参数作为路径模式。</li><li>路径模式可以使用通配符来匹配多个路径，例如 <code>"/*"</code> 表示根路径和其子路径都会被拦截。</li><li>该方法可以在添加拦截器时使用，用于指定需要被拦截器处理的路径。</li><li>拦截的路径模式将被应用于已经设置的拦截路径上。</li></ul> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拦截 /api 下的所有请求</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>在上面的示例中，首先通过 <code>addInterceptor</code> 方法添加了一个自定义拦截器 <code>CustomInterceptor</code>，然后使用 <code>addPathPatterns</code> 方法指定了要拦截的路径模式 <code>/api/**</code>。</p> 
<p>这样配置之后，拦截器将会对所有以 <code>/api/</code> 开头的请求进行拦截处理。</p> 
<p>通过使用 <code>addPathPatterns</code> 方法，我们可以更加细粒度地指定拦截器的应用范围，根据具体需求选择性地拦截某些路径。如果不调用 <code>addPathPatterns</code> 方法，则拦截器将对所有请求生效。</p> 
<h3><a id="22_addPathPatternsListString_patterns_43"></a>2.2 addPathPatterns(List patterns)</h3> 
<p>通过这个方法，我们可以指定要拦截的请求路径模式列表，使拦截器只对符合指定路径模式的请求进行拦截。</p> 
<p>以下是关于 <code>addPathPatterns</code> 方法的说明：</p> 
<ul><li> <p><code>addPathPatterns</code> 方法接受一个字符串列表作为路径模式。</p> </li><li> <p>路径模式可以使用通配符来匹配多个路径，例如 <code>"/*"</code> 表示根路径和其子路径都会被拦截。</p> </li><li> <p>该方法可以在添加拦截器时使用，用于指定需要被拦截器处理的路径。</p> </li><li> <p>拦截的路径模式将被应用于已经设置的拦截路径上。</p> </li></ul> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">,</span> <span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拦截 /api 和 /admin 下的所有请求</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>在上面的示例中，首先通过 <code>addInterceptor</code> 方法添加了一个自定义拦截器 <code>CustomInterceptor</code>，然后使用 <code>addPathPatterns</code> 方法传入一个路径模式列表，包含了要拦截的路径模式 <code>"/api/**"</code> 和 <code>"/admin/**"</code>。</p> 
<p>这样配置之后，拦截器将会对所有以 <code>/api/</code> 或 <code>/admin/</code> 开头的请求进行拦截处理。</p> 
<p>通过使用 <code>addPathPatterns</code> 方法，我们可以更加灵活地指定拦截器的应用范围，根据具体需求选择性地拦截某些路径。如果不调用 <code>addPathPatterns</code> 方法，则拦截器将对所有请求生效。</p> 
<h3><a id="23_excludePathPatternsString_patterns_73"></a>2.3 excludePathPatterns(String… patterns)</h3> 
<p>通过这个方法，我们可以指定要排除（不拦截）的请求路径模式，使拦截器不对这些路径的请求进行拦截。</p> 
<p>以下是关于 <code>excludePathPatterns</code> 方法的说明：</p> 
<ul><li><code>excludePathPatterns</code> 方法接受一个或多个字符串参数作为路径模式。</li><li>路径模式可以使用通配符来匹配多个路径，例如 <code>"/*"</code> 表示根路径和其子路径都会被排除。</li><li>该方法可以在添加拦截器时使用，用于指定哪些路径不需要被拦截器处理。</li><li>排除的路径模式将被应用于已经设置的拦截路径上。</li></ul> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span> <span class="token comment">// 拦截 /api 下的所有请求</span>
                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/public/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 排除 /api/public 下的请求</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>在上面的示例中，首先通过 <code>addInterceptor</code> 方法添加了一个自定义拦截器 <code>CustomInterceptor</code>，然后使用 <code>addPathPatterns</code> 方法指定了要拦截的路径模式 <code>/api/**</code>，接着使用 <code>excludePathPatterns</code> 方法指定了要排除的路径模式 <code>/api/public/**</code>。</p> 
<p>这样配置之后，拦截器将会对所有以 <code>/api/</code> 开头的请求进行拦截，但是会排除以 <code>/api/public/</code> 开头的请求，即不会对这些请求进行拦截处理。</p> 
<p>通过使用 <code>excludePathPatterns</code> 方法，我们可以更加细粒度地控制拦截器的应用范围，根据具体需求选择性地排除某些路径。</p> 
<h3><a id="24_excludePathPatternsListString_patterns_99"></a>2.4 excludePathPatterns(List patterns)</h3> 
<p>通过这个方法，我们可以指定要排除（不拦截）的请求路径模式列表，使拦截器不对这些路径的请求进行拦截。</p> 
<p>以下是关于 <code>excludePathPatterns</code> 方法的说明：</p> 
<ul><li><code>excludePathPatterns</code> 方法接受一个字符串列表作为路径模式。</li><li>路径模式可以使用通配符来匹配多个路径，例如 <code>"/*"</code> 表示根路径和其子路径都会被排除。</li><li>该方法可以在添加拦截器时使用，用于指定哪些路径不需要被拦截器处理。</li><li>排除的路径模式将被应用于已经设置的拦截路径上。</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span> <span class="token comment">// 拦截 /api 下的所有请求</span>
                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"/api/public/**"</span><span class="token punctuation">,</span> <span class="token string">"/api/open/**"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 排除 /api/public 和 /api/open 下的请求</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>在上面的示例中，首先通过 <code>addInterceptor</code> 方法添加了一个自定义拦截器 <code>CustomInterceptor</code>，然后使用 <code>addPathPatterns</code> 方法指定了要拦截的路径模式 <code>/api/**</code>，接着使用 <code>excludePathPatterns</code> 方法传入一个排除的路径模式列表，包含了要排除的路径模式 <code>"/api/public/**"</code> 和 <code>"/api/open/**"</code>。</p> 
<p>这样配置之后，拦截器将会对所有以 <code>/api/</code> 开头的请求进行拦截，但是会排除以 <code>/api/public/</code> 和 <code>/api/open/</code> 开头的请求，即不会对这些请求进行拦截处理。</p> 
<p>通过使用 <code>excludePathPatterns</code> 方法，我们可以更加细粒度地控制拦截器的应用范围，根据具体需求选择性地排除某些路径。如果不调用 <code>excludePathPatterns</code> 方法，则拦截器将对所有符合拦截路径模式的请求生效。</p> 
<h3><a id="25_pathMatcherPathMatcher_pathMatcher_125"></a>2.5 pathMatcher(PathMatcher pathMatcher)</h3> 
<p>该方法用于设置拦截器注册表使用的路径匹配器（PathMatcher）。</p> 
<p>以下是关于 <code>pathMatcher(PathMatcher pathMatcher)</code> 方法的说明：</p> 
<ul><li> <p><code>pathMatcher(PathMatcher pathMatcher)</code> 方法接受一个 <code>PathMatcher</code> 对象作为参数，用于设置拦截器注册表使用的路径匹配器。</p> </li><li> <p>路径匹配器（PathMatcher）用于判断请求路径是否与设置的路径模式匹配。</p> </li><li> <p>默认情况下，Spring MVC 使用的是 Ant 风格的路径匹配器 <code>AntPathMatcher</code>。</p> </li><li> <p>可以通过自定义实现 <code>PathMatcher</code> 接口来创建自己的路径匹配器，例如使用正则表达式等。</p> </li><li> <p>通过设置路径匹配器，可以控制拦截器对请求路径的匹配方式。</p> <pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/public/**"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">pathMatcher</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegexPathMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置自定义的路径匹配器或者使用AntPathMatcher</span>
    <span class="token punctuation">}</span>
</code></pre> <p>在上述示例中，首先通过 <code>addInterceptor</code> 方法添加了一个自定义拦截器 <code>CustomInterceptor</code>，然后使用 <code>addPathPatterns</code> 方法指定了要拦截的路径模式 <code>/api/**</code>，使用 <code>excludePathPatterns</code> 方法指定了要排除的路径模式 <code>/api/public/**</code>，最后使用 <code>pathMatcher</code> 方法传入了一个自定义的路径匹配器 <code>RegexPathMatcher</code>。</p> <p>通过设置自定义的路径匹配器，我们可以根据具体需求更灵活地控制拦截器对请求路径的匹配方式。</p> </li></ul> 
<h3><a id="26_orderint_order_155"></a>2.6 order(int order)</h3> 
<p>它用于设置拦截器的执行顺序。参数是一个整数值，表示侦听器的优先级或执行顺序。<code>order(int order)``InterceptorRegistry``order</code></p> 
<p>在 Spring 中，拦截器根据其分配的订单值以特定顺序执行。首先执行具有较低阶值的拦截器，然后执行具有较高阶值的拦截器。这允许您控制将侦听器应用于请求的顺序。</p> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">MyInterceptor</span> myInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>myInterceptor<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set the order to 1</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>在此示例中，对于与“/api/**”模式匹配的请求，将以 1 的顺序执行。如果您有多个拦截器，则可以分配不同的订单值来控制其执行顺序。<code>MyInterceptor</code></p> 
<p>请务必注意，如果没有为拦截器显式设置顺序，则会为其分配默认订单值 ，这意味着它将在拦截器链中最后执行。<code>Ordered.LOWEST_PRECEDENCE</code></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14bda27402c134b785b79546652fa7ed/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot使用AOP详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/defd34840d1fe22ca40078da32b303a4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">树莓派最新的安装，设置与教程，助你一次性设置完毕树莓派。(以macOS为例，包含windows和linux）史上最详细！一次性完成所有设置！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>