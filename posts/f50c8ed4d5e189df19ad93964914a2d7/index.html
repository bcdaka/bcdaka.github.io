<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一条sql 在MySQL中是如何执行的 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f50c8ed4d5e189df19ad93964914a2d7/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="一条sql 在MySQL中是如何执行的">
  <meta property="og:description" content="在 MySQL 中，SQL 查询的执行涉及多个内存区域和处理步骤，以确保查询能够高效地执行和返回结果。以下是 SQL 查询在 MySQL 中执行时通常会经过的内存路径：
1. 客户端内存 - SQL 文本发送 ：SQL 查询首先从客户端发送到 MySQL 服务器。客户端内存用于存储和发送 SQL 查询文本。
2. 网络缓冲区 - 接收和处理请求 ：SQL 查询通过网络传输到 MySQL 服务器，在服务器端进入网络缓冲区（Network Buffer），等待处理。
3. 解析器和优化器内存 -SQL 解析 ：MySQL 解析器将 SQL 查询解析为语法树。此过程使用解析器内存来存储中间数据结构。
- 查询优化 ：MySQL 优化器会生成多个查询执行计划，并选择最优的执行路径。这一过程使用优化器内存来计算和存储执行计划的相关信息。
4.查询缓存（可选） - 查询缓存检查 ：MySQL 在执行查询之前，会检查是否在查询缓存中已有结果（如果查询缓存启用）。如果查询结果已缓存且未过期，则直接从查询缓存中返回结果，从而跳过后续的处理步骤。
5.表缓存（Table Cache） - 表打开和管理 ：如果查询涉及的表没有被打开，MySQL 将会在表缓存中检查并尝试打开表文件。表缓存内存用于存储已打开表的元数据和文件句柄。
6.内存表（Memory Tables） -内存临时表 ：某些复杂查询，如带有 `GROUP BY`、`ORDER BY`、或 `DISTINCT` 的查询，可能需要 MySQL 在内存中创建临时表来存储中间结果。如果数据量过大，临时表可能会被存储到磁盘。
7.InnoDB 缓冲池（Buffer Pool） -数据页缓存 ：MySQL 使用 InnoDB 缓冲池来缓存表数据和索引页。查询过程中涉及到的表数据首先在缓冲池中查找，如果未命中，则从磁盘加载相应的数据页到缓冲池。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-19T08:40:38+08:00">
    <meta property="article:modified_time" content="2024-08-19T08:40:38+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一条sql 在MySQL中是如何执行的</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在 MySQL 中，SQL 查询的执行涉及多个内存区域和处理步骤，以确保查询能够高效地执行和返回结果。以下是 SQL 查询在 MySQL 中执行时通常会经过的内存路径：</p> 
<h4>       1. 客户端内存</h4> 
<p>            - SQL 文本发送    ：SQL 查询首先从客户端发送到 MySQL 服务器。客户端内存用于存储和发送 SQL 查询文本。</p> 
<h4>       2. 网络缓冲区</h4> 
<p>           - 接收和处理请求    ：SQL 查询通过网络传输到 MySQL 服务器，在服务器端进入网络缓冲区（Network Buffer），等待处理。</p> 
<h4>       3. 解析器和优化器内存</h4> 
<p>           -SQL 解析    ：MySQL 解析器将 SQL 查询解析为语法树。此过程使用解析器内存来存储中间数据结构。<br>    -     查询优化    ：MySQL 优化器会生成多个查询执行计划，并选择最优的执行路径。这一过程使用优化器内存来计算和存储执行计划的相关信息。</p> 
<h4>       4.查询缓存（可选）</h4> 
<p>            - 查询缓存检查    ：MySQL 在执行查询之前，会检查是否在查询缓存中已有结果（如果查询缓存启用）。如果查询结果已缓存且未过期，则直接从查询缓存中返回结果，从而跳过后续的处理步骤。</p> 
<h4>       5.表缓存（Table Cache）</h4> 
<p>           - 表打开和管理    ：如果查询涉及的表没有被打开，MySQL 将会在表缓存中检查并尝试打开表文件。表缓存内存用于存储已打开表的元数据和文件句柄。</p> 
<h4>       6.内存表（Memory Tables）    </h4> 
<p>            -内存临时表    ：某些复杂查询，如带有 `GROUP BY`、`ORDER BY`、或 `DISTINCT` 的查询，可能需要 MySQL 在内存中创建临时表来存储中间结果。如果数据量过大，临时表可能会被存储到磁盘。</p> 
<h4>       7.InnoDB 缓冲池（Buffer Pool）    </h4> 
<p>        -数据页缓存    ：MySQL 使用 InnoDB 缓冲池来缓存表数据和索引页。查询过程中涉及到的表数据首先在缓冲池中查找，如果未命中，则从磁盘加载相应的数据页到缓冲池。<br>    -     索引和数据访问    ：缓冲池用于存储经常访问的索引和表数据，以减少磁盘 I/O 操作，提高查询速度。</p> 
<h4>       8.排序缓冲区（Sort Buffer）    </h4> 
<p>        -排序操作    ：如果查询中包含排序操作（`ORDER BY`），MySQL 可能会使用排序缓冲区来存储需要排序的数据。这个缓冲区大小可以通过配置参数调整。</p> 
<h4>       9.连接缓冲区（Join Buffer）    </h4> 
<p>        -表连接操作    ：在处理多表连接（尤其是嵌套循环连接）时，MySQL 可能会使用连接缓冲区来存储中间结果。</p> 
<h4>       10.服务器内存    </h4> 
<p>         -执行查询计划    ：最终，MySQL 根据优化器生成的执行计划进行查询执行。执行过程中，数据从磁盘读取到内存中进行处理，并通过不同的内存区域（如缓冲池、排序缓冲区、连接缓冲区等）进行操作。</p> 
<h4>       11.结果集生成    </h4> 
<p>         -生成最终结果    ：查询执行完毕后，生成结果集并将其放入结果缓存中，以便发送回客户端。</p> 
<h4>       12.网络缓冲区    </h4> 
<p>        -发送结果集    ：结果集通过服务器端的网络缓冲区发送回客户端。</p> 
<h4>       13.客户端内存    </h4> 
<p>        -接收和显示结果    ：最终，客户端接收到查询结果，并在客户端内存中存储和处理这些数据。</p> 
<p>       总结<br> MySQL 的查询执行过程涉及多个内存区域，从解析和优化查询到处理数据和生成结果，每个步骤都在特定的内存区域中完成。这种内存路径设计旨在最大化查询执行的效率，并尽量减少磁盘 I/O 以提升性能。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fcd8a4e6e34bd623ad1d91d37ae157f8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android常见控件(一)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7d9c236ea33398da243eddd41fe6c2a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【python】python代码打包工具cx_Freeze的介绍、原理、用法及实战案例分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>