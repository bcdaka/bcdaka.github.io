<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>react-starter脚手架搭建过程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/22271d2153e34bb0e8cd9eafa30955df/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="react-starter脚手架搭建过程">
  <meta property="og:description" content="本文献给一些 react 新手，不对，应该说针对想要通过 react 进入前端世界的程序猿们~
背景 公司的项目需要使用 react，两三个月前还是一个基本不怎么懂前端，当时的我除了 jquery 什么都不知道，但是公司要求使用 react 开发新的项目，完全不懂前端的我只能去试着学习使用 react 进行开发，然后什么 nodejs/webpack/es5/es6/babel/jsx 一堆堆全部涌过来，讲真，彻底被前端的复杂世界搞懵逼了，从来没想过前端是这么的复杂。然后匆匆忙忙的开始学习，循环往复十来天。接着公司要求写项目了，我擦，我还什么都没学会，没办法，硬着头皮上，去全球最大同性交友网站（#雾）瞅了瞅，找了个 star 很多的脚手架，开始了开发之旅，其中的痛苦真的是不忍赘述，经常为了目标熬夜赶工，结果还是各种拖拖踏踏，一直没能完成。还好一个月后被叫去做其他项目，不然真的是崩崩崩。接下来的时间开始了真正的探索 react 路途…一两个月的工作之余熬夜苦学之后，尝试了很多不同的脚手架之后，开始有了自己对于开发、编译的需求，处于对于想要将一个技术完全征服的欲望，于是开始准备搭建自己的 react 脚手架
准备工作 知识准备 react 自不必说，首先是去了解nodejs、webpack、babel、es6等等，多学习源生 js，彻底抛弃 jquery 才能真正感受到源生 js 带来的魅力，了解一些 js 规范，比如commonjs之类的。一定要用心去感悟（笑）。
需求准备 对于个人的一路走来的感觉来说，前端开发经验少的人，应该还是先使用别人的脚手架，多读读人家的 readme 的说明，了解了解别人对于本项目的一些规范或者需求，这里推荐一个react starter kit，感觉确实很全面，不过里面没有使用 jsx 语法定义路由，而是使用的webpack 的 api 来实现的按需加载，开始可能会让人有点昏，不过多去了解了解也就没什么障碍，官方也给出了很好的解释。多写写，多动手，就会明白自己的一些需求了。这里列出我自己的一些想要的需求。
开发模式下：
热加载（没它开发会累哭）能与后台交互时的解决跨域问题 生产模式下：
能把 react 模块分开能自动将生成 js 文件绑定到 html 页面压缩 js、css 代码想要使用 ant design 开发，但是 antd 样式文件较大，能够按需加载 通用的：
使用 es6、jsx 语法能生成 map 文件能加载各种文件：json，图片，字体，css，scss，less找路径不要那么麻烦的使用 &#39;…/…/&#39;之类的，能直接从项目跟路径找。命令能够兼容 linux 或者 windows使用 eslint 进行代码检查使用 esformatter 进行代码格式化能自动处理 css 样式兼容性问题 开始搭建 虽然我搭建环境有时候在 linux 有时候在 windows，不过写此文的时候处于 windows 环境下，懒得切系统，所以统一使用 windows 环境，一般来说 linux 没什么不同，想起来有不同的时候我会说。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-21T12:42:07+08:00">
    <meta property="article:modified_time" content="2024-05-21T12:42:07+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">react-starter脚手架搭建过程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本文献给一些 react 新手，不对，应该说针对想要通过 react 进入前端世界的程序猿们~</p> 
<h3><a id="E8838CE699AF_2"></a><a href="#%E8%83%8C%E6%99%AF" rel="nofollow"></a>背景</h3> 
<p>公司的项目需要使用 react，两三个月前还是一个基本不怎么懂前端，当时的我除了 jquery 什么都不知道，但是公司要求使用 react 开发新的项目，完全不懂前端的我只能去试着学习使用 react 进行开发，然后什么 nodejs/webpack/es5/es6/babel/jsx 一堆堆全部涌过来，讲真，彻底被前端的复杂世界搞懵逼了，从来没想过前端是这么的复杂。然后匆匆忙忙的开始学习，循环往复十来天。接着公司要求写项目了，我擦，我还什么都没学会，没办法，硬着头皮上，去全球最大同性交友网站（#雾）瞅了瞅，找了个 star 很多的脚手架，开始了开发之旅，其中的痛苦真的是不忍赘述，经常为了目标熬夜赶工，结果还是各种拖拖踏踏，一直没能完成。还好一个月后被叫去做其他项目，不然真的是崩崩崩。接下来的时间开始了真正的探索 react 路途…一两个月的工作之余熬夜苦学之后，尝试了很多不同的脚手架之后，开始有了自己对于开发、编译的需求，处于对于想要将一个技术完全征服的欲望，于是开始准备搭建自己的 react 脚手架</p> 
<h3><a id="E58786E5A487E5B7A5E4BD9C_6"></a><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow"></a>准备工作</h3> 
<h3><a id="E79FA5E8AF86E58786E5A487_8"></a><a href="#%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87" rel="nofollow"></a>知识准备</h3> 
<p>react 自不必说，首先是去了解<a href="http://www.runoob.com/nodejs/nodejs-tutorial.html" rel="nofollow">nodejs</a>、<a href="https://webpack.js.org/" rel="nofollow">webpack</a>、<a href="http://babeljs.cn/" rel="nofollow">babel</a>、<a href="http://es6.ruanyifeng.com/" rel="nofollow">es6</a>等等，多学习源生 js，彻底抛弃 jquery 才能真正感受到源生 js 带来的魅力，了解一些 js 规范，比如<a href="http://javascript.ruanyifeng.com/nodejs/module.html" rel="nofollow">commonjs</a>之类的。一定要用心去感悟（笑）。</p> 
<h3><a id="E99C80E6B182E58786E5A487_12"></a><a href="#%E9%9C%80%E6%B1%82%E5%87%86%E5%A4%87" rel="nofollow"></a>需求准备</h3> 
<p>对于个人的一路走来的感觉来说，前端开发经验少的人，应该还是先使用别人的脚手架，多读读人家的 readme 的说明，了解了解别人对于本项目的一些规范或者需求，这里推荐一个<a href="https://github.com/bodyno/react-starter-kit">react starter kit</a>，感觉确实很全面，不过里面没有使用 jsx 语法定义路由，而是使用的<a href="https://webpack.js.org/guides/code-splitting-require/" rel="nofollow">webpack 的 api 来实现的按需加载</a>，开始可能会让人有点昏，不过多去了解了解也就没什么障碍，官方也给出了很好的解释。多写写，多动手，就会明白自己的一些需求了。这里列出我自己的一些想要的需求。</p> 
<p>开发模式下：</p> 
<ol><li>热加载（没它开发会累哭）</li><li>能与后台交互时的解决跨域问题</li></ol> 
<p>生产模式下：</p> 
<ol><li>能把 react 模块分开</li><li>能自动将生成 js 文件绑定到 html 页面</li><li>压缩 js、css 代码</li><li>想要使用 ant design 开发，但是 antd 样式文件较大，能够按需加载</li></ol> 
<p>通用的：</p> 
<ol><li>使用 es6、jsx 语法</li><li>能生成 map 文件</li><li>能加载各种文件：json，图片，字体，css，scss，less</li><li>找路径不要那么麻烦的使用 '…/…/'之类的，能直接从项目跟路径找。</li><li>命令能够兼容 linux 或者 windows</li><li>使用 eslint 进行代码检查</li><li>使用 esformatter 进行代码格式化</li><li>能自动处理 css 样式兼容性问题</li></ol> 
<h3><a id="E5BC80E5A78BE690ADE5BBBA_39"></a><a href="#%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA" rel="nofollow"></a>开始搭建</h3> 
<p>虽然我搭建环境有时候在 linux 有时候在 windows，不过写此文的时候处于 windows 环境下，懒得切系统，所以统一使用 windows 环境，一般来说 linux 没什么不同，想起来有不同的时候我会说。</p> 
<h3><a id="E5B7A5E585B7E68EA8E88D90_43"></a><a href="#%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90" rel="nofollow"></a>工具推荐</h3> 
<p>强烈推荐 vscode，支持得真的好=-=，虽然我还不是很用的来。</p> 
<h3><a id="E5889DE5A78BE58C96_47"></a><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96" rel="nofollow"></a>初始化</h3> 
<p>安装 nodejs，我使用 nvm 来管理不同的 nodejs 版本，而且通过 nvm 安装 nodejs 也超级简单，所以推荐用这种方式吧，<a href="https://github.com/coreybutler/nvm-windows/releases">下载地址</a>。下载安装，配置环境变量，搞定，具体教程自行百度。然后使用 nvm 安装最新的 nodejs 稳定版，目前是 6.10.0。 <code>nvm install 6.10.0</code>，然后等安装完毕，新建一个 react-start 文件夹，cd 进去， 使用命令 <code>nvm use 6.10.0</code> ，强烈建议安装 cnpm 配置淘宝源，这样安装依赖会快得多，否则等秃（#雾，使用命令 <code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>,使用<code>cnpm init</code>初始化项目，基本上可以一路回车下去。完成初始化，安装全局 webpack 依赖<code>cnpm install webpack -g</code></p> 
<h3><a id="E690ADE5BBBAE9AAA8E69EB6_51"></a><a href="#%E6%90%AD%E5%BB%BA%E9%AA%A8%E6%9E%B6" rel="nofollow"></a>搭建骨架</h3> 
<p>跟路径新建 webpack.config.js，webpack 会默认读取这个文件，先编写个大概，然后慢慢去补</p> 
<pre><code class="prism language-js"><span class="token string">'use strict'</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> rootPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
<span class="token keyword">const</span> srcPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">rootPath</span><span class="token operator">:</span> rootPath<span class="token punctuation">,</span>
  <span class="token literal-property property">srcPath</span><span class="token operator">:</span> srcPath<span class="token punctuation">,</span>
  <span class="token literal-property property">dist</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">indexHtml</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">staticDir</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'static'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> common<span class="token punctuation">.</span>entry<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> common<span class="token punctuation">.</span>dist<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> webpackConfig
</code></pre> 
<p>新建 src 文件夹，我们编写的 js 源代码文件就写在这里面了 进入 src 文件夹，新建 index.js</p> 
<pre><code class="prism language-js"><span class="token keyword">var</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>根目录新建 dist 文件夹，这是我们生成编译后的代码文件夹，新建 index.html</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>react-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>根目录运行<code>webpack</code>，等待编译完成，浏览器打开 index.html，打开控制台就能够看到 hello world 啦。</p> 
<h3><a id="E68C89E785A7E99C80E6B182E5AE89E8A385E4BE9DE8B596E7BC96E58699webpackconfigjs_webpackconfigjs_105"></a><a href="#%E6%8C%89%E7%85%A7%E9%9C%80%E6%B1%82%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E7%BC%96%E5%86%99-webpackconfigjs" rel="nofollow"></a>按照需求安装依赖编写 webpack.config.js</h3> 
<p>为了能够将项目迁移到其他电脑，本地安装 webpack<code>cnpm install webpack --save-dev</code></p> 
<h4><a id="E58AA0E585A5E78EAFE5A283E58F98E9878F_109"></a><a href="#%E5%8A%A0%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow"></a>加入环境变量</h4> 
<p>为了实现 linux 和 windows 都能设置环境变量，安装 cross-env，<code>cnpm install cross-env --save-dev</code> 修改 config，加入</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> isDev <span class="token operator">=</span> env <span class="token operator">===</span> <span class="token string">'development'</span>
</code></pre> 
<h4><a id="E5AE9EE78EB0E783ADE58AA0E8BDBD_118"></a><a href="#%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD" rel="nofollow"></a>实现热加载</h4> 
<p>安装 webpack-dev-server,<code>cnpm install webpack-dev-server</code>，编写 config，</p> 
<pre><code class="prism language-js"><span class="token string">'use strict'</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> rootPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
<span class="token keyword">const</span> srcPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> isDev <span class="token operator">=</span> env <span class="token operator">===</span> <span class="token string">'development'</span>

<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">rootPath</span><span class="token operator">:</span> rootPath<span class="token punctuation">,</span>
  <span class="token literal-property property">srcPath</span><span class="token operator">:</span> srcPath<span class="token punctuation">,</span>
  <span class="token literal-property property">dist</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">indexHtml</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">staticDir</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'static'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//开发模式下修改入口文件</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'react-hot-loader/patch'</span><span class="token punctuation">,</span>
    <span class="token comment">// activate HMR for React</span>

    <span class="token string">'webpack-dev-server/client?http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for webpack-dev-server and connect to the provided endpoint</span>

    <span class="token string">'webpack/hot/only-dev-server'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for hot reloading only- means to only hot reload for</span>
    <span class="token comment">// successful updates</span>

    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> common<span class="token punctuation">.</span>entry<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> common<span class="token punctuation">.</span>dist<span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">//让HMR知道在哪里加载热更新块所必需的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//开发模式下添加devServer字段</span>
<span class="token comment">//devServer候选字段参考https://webpack.js.org/configuration/dev-server/</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  webpackConfig<span class="token punctuation">.</span>devServer <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clientLogLevel</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span> <span class="token comment">//日志</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//压缩</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'/api/*'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> webpackConfig
</code></pre> 
<h4><a id="E6B7BBE58AA0es6E8AFADE6B395E694AFE68C81_es6__192"></a><a href="#%E6%B7%BB%E5%8A%A0-es6-%E8%AF%AD%E6%B3%95%E6%94%AF%E6%8C%81" rel="nofollow"></a>添加 es6 语法支持</h4> 
<p>webpack2.0 好像默认支持 es6 语法，不过稳妥起见，还是使用 Babel 进行 es2016 转换</p> 
<p>安装 babel 系列，<code>cnpm install --save-dev babel-core babel-loader babel-preset-es2015 babel-preset-stage-0</code> 支持到 js 标准的 stage 0 阶段, webpackConfig 中添加 module 字段</p> 
<pre><code class="prism language-js"><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//webpack1.0中可以省略 '-loader'，但是官方说法为了有明确的区分，在webpack2.0中，不能再省略</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//转换src路径下的代码</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//忽略node_modules路径代码</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="E6B7BBE58AA0react_react_214"></a><a href="#%E6%B7%BB%E5%8A%A0-react" rel="nofollow"></a>添加 react</h4> 
<p>安装 react，<code>cnpm install --save react react-dom react-router</code> ，<code>cnpm install babel-preset-react react-hot-loader@^3.0.0-beta.6 babel-plugin-transform-runtime babel-preset-react babel-preset-react-optimize --save-dev</code>,继续修改 webpackConfig,在上一个修改的代码中的 test 字段中，修改为：<code>test: /\.(js|jsx)$/,</code> 根目录新建.babelrc</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"es2015"</span><span class="token punctuation">,</span> <span class="token string">"stage-0"</span><span class="token punctuation">,</span> <span class="token string">"react"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"transform-runtime"</span><span class="token punctuation">,</span> <span class="token string">"react-hot-loader/babel"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"env"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"production"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"react-optimize"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>编写 config</p> 
<pre><code class="prism language-js"><span class="token string">'use strict'</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'path'</span> <span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'webpack'</span> <span class="token punctuation">)</span>

<span class="token keyword">const</span> rootPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname <span class="token punctuation">)</span>
<span class="token keyword">const</span> srcPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span> <span class="token punctuation">)</span>

<span class="token keyword">const</span> env <span class="token operator">=</span> process
  <span class="token punctuation">.</span>env
  <span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
  <span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> isDev <span class="token operator">=</span> <span class="token punctuation">(</span>env <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">rootPath</span><span class="token operator">:</span> rootPath<span class="token punctuation">,</span>
  <span class="token literal-property property">srcPath</span><span class="token operator">:</span> srcPath<span class="token punctuation">,</span>
  <span class="token literal-property property">dist</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> rootPath<span class="token punctuation">,</span> <span class="token string">'dist'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">indexHtml</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> srcPath<span class="token punctuation">,</span> <span class="token string">'index.html'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">staticDir</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> rootPath<span class="token punctuation">,</span> <span class="token string">'static'</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> isDev <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'react-hot-loader/patch'</span><span class="token punctuation">,</span>
    <span class="token comment">// activate HMR for React</span>

    <span class="token string">'webpack-dev-server/client?http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for webpack-dev-server and connect to the provided endpoint</span>

    <span class="token string">'webpack/hot/only-dev-server'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for hot reloading only- means to only hot reload for</span>
    <span class="token comment">// successful updates</span>

    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span> <span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> isDev <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// HMR全局启用</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 在HMR更新的浏览器控制台中打印更易读的模块名称</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> common<span class="token punctuation">.</span>entry<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> common<span class="token punctuation">.</span>dist<span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">//让HMR知道在哪里加载热更新块所必需的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span> <span class="token string">'src'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//webpack1.0中可以省略 '-loader'，但是官方说法为了有明确的区分，在webpack2.0中，不能再省略</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> common<span class="token punctuation">.</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//转换src路径下的代码</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//忽略node_modules路径代码</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> isDev <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  webpackConfig<span class="token punctuation">.</span>devServer <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clientLogLevel</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span> <span class="token comment">//日志</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//压缩</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'/api/*'</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> webpackConfig
</code></pre> 
<p>在 html 文件中加入 <code>&lt;div id="root"&gt;&lt;/div&gt;</code></p> 
<p>新建/src/components 文件夹 新建/src/components/index.js</p> 
<pre><code class="prism language-jsx">	import React,{Component} from 'react'
    export const App = ()=&gt;(
    	&lt;div&gt;hello world!&lt;div&gt;
    )
</code></pre> 
<p>编写/src/index.js</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> AppContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-hot-loader'</span>
<span class="token comment">// AppContainer is a necessary wrapper component for HMR</span>

<span class="token keyword">const</span> Root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> isDev <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> Routes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./routes/index'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default
  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>AppContainer<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>AppContainer<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    Root
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>devToolsExtension<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    window<span class="token punctuation">.</span>devToolsExtension<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Development render functions</span>
    <span class="token keyword">const</span> renderApp <span class="token operator">=</span> render

    <span class="token comment">// Wrap render in try/catch</span>
    <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">renderApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Setup hot module replacement</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./components'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span>Root<span class="token punctuation">)</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Hot Module Replacement API</span>
<span class="token comment">// if (module.hot) {<!-- --></span>
<span class="token comment">//   module</span>
<span class="token comment">//     .hot</span>
<span class="token comment">//     .accept('./', () =&gt; {<!-- --></span>
<span class="token comment">//       render(Routers)</span>
<span class="token comment">//     })</span>
<span class="token comment">// }</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行命令 <code>cross-env NODE_ENV=development webpack-dev-server</code> 打开浏览器，输入 localhost:3000 看看是不是已经有了 hell world 啦？在源文件中将 hello world 修改成其他字样，看看是不是已经能够自动刷新网页了？可喜可贺~</p> 
<h4><a id="E694AFE68C81E59084E7A78DE69687E4BBB6E58AA0E8BDBD_395"></a><a href="#%E6%94%AF%E6%8C%81%E5%90%84%E7%A7%8D%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD" rel="nofollow"></a>支持各种文件加载</h4> 
<p>在 webpack 概念中，各种文件都可以通过 loader 达到 all in js 的效果，从而让 js 能够做各种操作 所以接下来要安装各种 loader， <code>cnpm install --save css-loader file-loader html-loader json-loader less less-loader node-sass sass-loader style-loader url-loader</code></p> 
<p>简单说明（一下省略 “-loader”）：</p> 
<ul><li>style:将 css 样式转换成 css in js，也就是说没有单独的 css 文件，全部都在 js 文件中夹杂着，这里引入主要是为了热加载</li><li>css、file、html、json、less、sass：顾名思义就是将这些类型文件加载到 js 中</li><li>less、node-sass：因为 less 和 sass 是预处理语言，要使其发挥作用，必须加入这些支持</li><li>url-loader:file-loader 的加强版，可以使用 limit 参数，主要用来加载图片</li></ul> 
<p>修改 config</p> 
<pre><code class="prism language-js"><span class="token comment">/**
 * webpack2.0 配置文件
 * @authors wuhongxu (wuhongxu1208@gmail.com)
 * @date    2017-03-10 01:52:00
 * @version 1.0.0
 * @link &lt;link&gt;https://zido.site/&lt;/link&gt;
 *
 */</span>

<span class="token string">'use strict'</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'path'</span> <span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'webpack'</span> <span class="token punctuation">)</span>

<span class="token keyword">const</span> rootPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname <span class="token punctuation">)</span>
<span class="token keyword">const</span> srcPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span> <span class="token punctuation">)</span>

<span class="token keyword">const</span> env <span class="token operator">=</span> process
  <span class="token punctuation">.</span>env
  <span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
  <span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> isDev <span class="token operator">=</span> <span class="token punctuation">(</span>env <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">rootPath</span><span class="token operator">:</span> rootPath<span class="token punctuation">,</span>
  <span class="token literal-property property">srcPath</span><span class="token operator">:</span> srcPath<span class="token punctuation">,</span>
  <span class="token literal-property property">dist</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> rootPath<span class="token punctuation">,</span> <span class="token string">'dist'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">indexHtml</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> srcPath<span class="token punctuation">,</span> <span class="token string">'index.html'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">staticDir</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> rootPath<span class="token punctuation">,</span> <span class="token string">'static'</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> isDev <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'react-hot-loader/patch'</span><span class="token punctuation">,</span>
    <span class="token comment">// activate HMR for React</span>

    <span class="token string">'webpack-dev-server/client?http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for webpack-dev-server and connect to the provided endpoint</span>

    <span class="token string">'webpack/hot/only-dev-server'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for hot reloading only- means to only hot reload for</span>
    <span class="token comment">// successful updates</span>

    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span> <span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styleLoaders <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'style-loader'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//将css进行hash编码，保证模块性，保证单独使用，而不会污染全局</span>
      <span class="token comment">// modules: true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> common<span class="token punctuation">.</span>entry<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> common<span class="token punctuation">.</span>dist<span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">//让HMR知道在哪里加载热更新块所必需的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span> <span class="token string">'src'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//webpack1.0中可以省略 '-loader'，但是官方说法为了有明确的区分，在webpack2.0中，不能再省略</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> common<span class="token punctuation">.</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//转换src路径下的代码</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//忽略node_modules路径代码</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'json-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'html-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]-[hash:6].[ext]'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]-[hash:6].[ext]'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">(</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span> extractCss<span class="token punctuation">,</span> <span class="token punctuation">[</span>
          styleLoaders<span class="token punctuation">.</span>style<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>css<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>postcss
        <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">(</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span> extractScss<span class="token punctuation">,</span> <span class="token punctuation">[</span>
          styleLoaders<span class="token punctuation">.</span>style<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>css<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>postcss<span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'sass-loader'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">(</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span> extractLess<span class="token punctuation">,</span> <span class="token punctuation">[</span>
          styleLoaders<span class="token punctuation">.</span>style<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>css<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>postcss<span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> isDev <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  webpackConfig<span class="token punctuation">.</span>devServer <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clientLogLevel</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span> <span class="token comment">//日志</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//压缩</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'/api/*'</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> webpackConfig

</code></pre> 
<h4><a id="E5A484E79086cssE6A0B7E5BC8FE585BCE5AEB9E680A7E5BC80E58F91E6A8A1E5BC8FE4B88BE5B086cssE58D95E78BACE587BAE69DA5_css__css__577"></a><a href="#%E5%A4%84%E7%90%86-css-%E6%A0%B7%E5%BC%8F%E5%85%BC%E5%AE%B9%E6%80%A7%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%B0%86-css-%E5%8D%95%E7%8B%AC%E5%87%BA%E6%9D%A5" rel="nofollow"></a>处理 css 样式兼容性，开发模式下将 css 单独出来</h4> 
<p>此时需要引入 css 后处理器 postcss，然后使用<a href="https://github.com/postcss/autoprefixer">autoprefixer</a>来进行前缀配置，css 文件单独出来需要使用 webpack 的插件 extractPlugin ，安装依赖，<code>cnpm install autoprefixer-loader extract-text-webpack-plugin postcss-loader --save-dev</code> 编写 postcss.config.js</p> 
<pre><code class="prism language-js"><span class="token comment">//处理css前缀，用来更好的兼容各种浏览器</span>
<span class="token comment">//在 package.json中 使用 browserslist 字段已经定义好了浏览器适配（官方推荐）</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在 package.json 中添加字段</p> 
<pre><code class="prism language-json">  <span class="token string-property property">"browserslist"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"&gt; 1%"</span><span class="token punctuation">,</span>
    <span class="token string">"last 2 versions"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> 
<p>编写 webpack.config.js</p> 
<pre><code class="prism language-js"><span class="token string">'use strict'</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

<span class="token comment">//使用插件</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> extractCss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'style/[name]-css-[hash:6].css'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> extractScss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'style/[name]-scss-[hash:6].css'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> extractLess <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'style/[name]-less-[hash:6].css'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> rootPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>
<span class="token keyword">const</span> srcPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> isDev <span class="token operator">=</span> env <span class="token operator">===</span> <span class="token string">'development'</span>

<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">rootPath</span><span class="token operator">:</span> rootPath<span class="token punctuation">,</span>
  <span class="token literal-property property">srcPath</span><span class="token operator">:</span> srcPath<span class="token punctuation">,</span>
  <span class="token literal-property property">dist</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">indexHtml</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">staticDir</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>rootPath<span class="token punctuation">,</span> <span class="token string">'static'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'react-hot-loader/patch'</span><span class="token punctuation">,</span>
    <span class="token comment">// activate HMR for React</span>

    <span class="token string">'webpack-dev-server/client?http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for webpack-dev-server and connect to the provided endpoint</span>

    <span class="token string">'webpack/hot/only-dev-server'</span><span class="token punctuation">,</span>
    <span class="token comment">// bundle the client for hot reloading only- means to only hot reload for</span>
    <span class="token comment">// successful updates</span>

    path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>srcPath<span class="token punctuation">,</span> <span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> common<span class="token punctuation">.</span>indexHtml<span class="token punctuation">,</span>
      <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// HMR全局启用</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 在HMR更新的浏览器控制台中打印更易读的模块名称</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  common<span class="token punctuation">.</span>plugins <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> common<span class="token punctuation">.</span>indexHtml<span class="token punctuation">,</span>
      <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NoEmitOnErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// stataic目录下静态资源的复制</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">context</span><span class="token operator">:</span> common<span class="token punctuation">.</span>rootPath<span class="token punctuation">,</span>
        <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token string">'static/*'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ignore</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*.md'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'vendor.bundle.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

common<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">'process.env'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token constant">NODE_ENV</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">const</span> styleLoaders <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//将css进行hash编码，保证模块性，保证单独使用，而不会污染全局</span>
      <span class="token comment">// modules: true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">postcss</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//css后处理器，这里主要是为了加载 autoprefixer 用来处理css前缀</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span><span class="token parameter">plugin<span class="token punctuation">,</span> list</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//如果不是开发模式，删除数组中的第一个元素，并使用extrat-plugin将样式额外打包</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> plugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> list
<span class="token punctuation">}</span>

<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> common<span class="token punctuation">.</span>entry<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> common<span class="token punctuation">.</span>dist<span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">//让HMR知道在哪里加载热更新块所必需的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">context</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span><span class="token operator">:</span> isDev <span class="token operator">?</span> <span class="token string">'cheap-module-eval-source-map'</span> <span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//webpack1.0中可以省略 '-loader'，但是官方说法为了有明确的区分，在webpack2.0中，不能再省略</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">emitWarning</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">emitError</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token comment">//failOnWarning: false, failOnError: true,</span>
          <span class="token literal-property property">useEslintrc</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token comment">// configFile: path.join(__dirname, "eslint_conf.js")</span>
          <span class="token literal-property property">configFile</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'.eslintrc.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>common<span class="token punctuation">.</span>rootPath<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//转换src路径下的代码</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">//忽略node_modules路径代码</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token string">'import'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">'antd'</span><span class="token punctuation">,</span> <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">'css'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//按需加载antd 样式，有效小包大小</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'json-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]-[hash:6].[ext]'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|gif|svg)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]-[hash:6].[ext]'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span>extractCss<span class="token punctuation">,</span> <span class="token punctuation">[</span>styleLoaders<span class="token punctuation">.</span>style<span class="token punctuation">,</span> styleLoaders<span class="token punctuation">.</span>css<span class="token punctuation">,</span> styleLoaders<span class="token punctuation">.</span>postcss<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span>extractScss<span class="token punctuation">,</span> <span class="token punctuation">[</span>
          styleLoaders<span class="token punctuation">.</span>style<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>css<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>postcss<span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token function">handleStyle</span><span class="token punctuation">(</span>extractLess<span class="token punctuation">,</span> <span class="token punctuation">[</span>
          styleLoaders<span class="token punctuation">.</span>style<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>css<span class="token punctuation">,</span>
          styleLoaders<span class="token punctuation">.</span>postcss<span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">Root</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">Components</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/components'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">Layouts</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/layouts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">Routes</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/routes'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//为某些路径设置别名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//如果是开发模式不将样式文件进行分离。tip:为了实现热加载</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token keyword">return</span> common<span class="token punctuation">.</span>plugins
    common<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>extractCss<span class="token punctuation">)</span>
    common<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>extractLess<span class="token punctuation">)</span>
    common<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>extractScss<span class="token punctuation">)</span>
    <span class="token comment">//返回组装完成后的plugins</span>
    <span class="token keyword">return</span> common<span class="token punctuation">.</span>plugins
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isDev<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  webpackConfig<span class="token punctuation">.</span>devServer <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">contentBase</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">clientLogLevel</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span> <span class="token comment">//日志</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//压缩</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stats</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">colors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'/api/*'</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> webpackConfig
</code></pre> 
<h4><a id="E4BDBFE794A8eslintE5928Cesformatter_eslint__esformatter_849"></a><a href="#%E4%BD%BF%E7%94%A8-eslint-%E5%92%8C-esformatter" rel="nofollow"></a>使用 eslint 和 esformatter</h4> 
<p>这一步的作用其实不是很大，更多的是自定义一个 js 代码的规范，其实不标准照样可以运行 安装 eslint 和 esformatter 的各项依赖，<code>cnpm install --save-dev eslint esformatter es-strip-semicolons eslint-config-airbnb eslint-loader eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react</code></p> 
<p>根目录新建.esformatter,这里的代码太长且不重要，这里不贴了，<a href="https://github.com/Userwu/react-starter/blob/master/.esformatter">github 地址</a>,请自行查看</p> 
<p>根目录新建 .eslintrc.json 同上，<a href="https://github.com/Userwu/react-starter/blob/master/.eslintrc.json">github 地址</a></p> 
<p>编写 webpack.config.js</p> 
<p>在 module.rules 里面新增</p> 
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">emitWarning</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">emitError</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token comment">//failOnWarning: false, failOnError: true,</span>
          <span class="token literal-property property">useEslintrc</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token comment">// configFile: path.join(__dirname, "eslint_conf.js")</span>
          <span class="token literal-property property">configFile</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span> <span class="token string">'.eslintrc.json'</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>这样会强制在运行前检查 js 代码，非常严格，一旦有错将不能运行，如果觉得没必要，可以去掉这一段代码</p> 
<h4><a id="E585B6E4BB96E7BB86E88A82_880"></a><a href="#%E5%85%B6%E4%BB%96%E7%BB%86%E8%8A%82" rel="nofollow"></a>其他细节</h4> 
<p>其他小的细节，是一看就懂的，这里就不再赘述步骤。</p> 
<p>项目的<a href="https://github.com/Userwu/react-starter">github 地址</a></p> 
<h3><a id="E8818AE8818AE585B6E4B8ADE79A84E69BB2E68A98E5928CE694B6E88EB7_886"></a><a href="#%E8%81%8A%E8%81%8A%E5%85%B6%E4%B8%AD%E7%9A%84%E6%9B%B2%E6%8A%98%E5%92%8C%E6%94%B6%E8%8E%B7" rel="nofollow"></a>聊聊其中的曲折和收获</h3> 
<p>其实本来这个项目开始是使用 webpack1.x 搭建的，结果搭建好之后，才知道，喵蛋的，2.x 都出来了，于是果断放弃之前的，将项目速度改进到 2.x 版本。</p> 
<p>很多东西都是根据其他的项目而来，但是那些版本都太老旧了，很多的依赖都是我看了名字之后，转而去 github 或者 npm 查看新版本的用法，这段是最费时间，最费眼睛的了（因为我的英文实在是差劲 QAQ，要不是 chrome 的翻译插件，我估计我已经崩了），对于我这种特别崇尚最新的人来说，用老旧的东西，是我非常非常不能忍受的，所以我用的依赖基本上都是最新的，其中有些除了 github 上面，其他地方基本都么有相关资料。</p> 
<p>说实话，做出来之后，还能很好的运行，我真的是长长的出了一口大气，很舒心的感觉，终于特么的我走通一回了，好气啊~~~</p> 
<p>最大的收获，就是这一份走通的感觉了吧，个人前端后端都在弄，一直依赖都是两边奔波却基本上都没怎么摸透过。感觉暂时前端终于能稍微放一下，继续搞后端，目标分布式和并发，走起！</p> 
<p>写完这篇都特么快五点了，必须得睡觉了。顺便也请各位纠纠错，其实写的时候也没多仔细，难免会有所遗漏与错误。</p> 
<h3><a id="E69C80E5908E_898"></a><a href="#%E6%9C%80%E5%90%8E" rel="nofollow"></a>最后</h3> 
<p>最新最新的 react 脚手架<a href="https://github.com/Userwu/react-starter">react-starter</a>，算是提供个思路和参考吧，有用请 star~ 也请大佬们能够帮我修改修改 <img src="https://images2.imgbox.com/49/a7/C9rKtbeY_o.png" alt="外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bea11fa318bbb13ba4c23db9f343eaba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ubuntu22.04系统python多版本安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/798992cf48356d6c1aaa8e9becde67f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一分钟上手AI神器——Kimi (附_ 官方提示词)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>