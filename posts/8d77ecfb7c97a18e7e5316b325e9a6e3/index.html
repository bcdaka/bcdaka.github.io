<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>链表经典面试题--链表修至圆满 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8d77ecfb7c97a18e7e5316b325e9a6e3/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="链表经典面试题--链表修至圆满">
  <meta property="og:description" content="目录
1.环形链表
a.为什么一定会相遇，有没有可能会错过，永远追不上？请证明
b.slow一次走1步，fast走3步 4步 5步 n步还一定追得上吗 请证明
2.环形链表2
3.随机链表的复制
1.环形链表 141. 环形链表 - 力扣（LeetCode）
思路：
快慢指针，慢指针走一步，快指针走两步
进环以后快指针开始追击慢指针
当快指针能追上慢指针就证明链表带环
bool hasCycle(struct ListNode *head) { struct ListNode*fast=head,*slow=head; while(fast&amp;&amp;fast-&gt;next) { slow=slow-&gt;next; fast=fast-&gt;next-&gt;next; if(fast==slow) { return true; } } return false; } 面试问题：
a.为什么一定会相遇，有没有可能会错过，永远追不上？请证明 假设slow进环时，fast跟slow距离时N，fast追击slow的过程中距离变化如下：
N
N-1
N-2
...
2
1
0
每追击一次，距离缩小1，距离为0就是追上了
b.slow一次走1步，fast走3步 4步 5步 n步还一定追得上吗 请证明 假设slow进环时，fast跟slow距离时N，
fast追击slow得过程只距离变化如下：
偶数 奇数
N N
N-2 N-2
N-4 N-4
... ....
4 3">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-20T11:31:17+08:00">
    <meta property="article:modified_time" content="2024-06-20T11:31:17+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">链表经典面试题--链表修至圆满</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8-toc" style="margin-left:0px;"><a href="#1.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8" rel="nofollow">1.环形链表</a></p> 
<p id="a.%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E5%AE%9A%E4%BC%9A%E7%9B%B8%E9%81%87%EF%BC%8C%E6%9C%89%E6%B2%A1%E6%9C%89%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%94%99%E8%BF%87%EF%BC%8C%E6%B0%B8%E8%BF%9C%E8%BF%BD%E4%B8%8D%E4%B8%8A%EF%BC%9F%E8%AF%B7%E8%AF%81%E6%98%8E-toc" style="margin-left:40px;"><a href="#a.%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E5%AE%9A%E4%BC%9A%E7%9B%B8%E9%81%87%EF%BC%8C%E6%9C%89%E6%B2%A1%E6%9C%89%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%94%99%E8%BF%87%EF%BC%8C%E6%B0%B8%E8%BF%9C%E8%BF%BD%E4%B8%8D%E4%B8%8A%EF%BC%9F%E8%AF%B7%E8%AF%81%E6%98%8E" rel="nofollow">a.为什么一定会相遇，有没有可能会错过，永远追不上？请证明</a></p> 
<p id="%C2%A0b.slow%E4%B8%80%E6%AC%A1%E8%B5%B01%E6%AD%A5%EF%BC%8Cfast%E8%B5%B03%E6%AD%A5%C2%A0%204%E6%AD%A5%C2%A0%205%E6%AD%A5%C2%A0%20n%E6%AD%A5%E8%BF%98%E4%B8%80%E5%AE%9A%E8%BF%BD%E5%BE%97%E4%B8%8A%E5%90%97%C2%A0%20%E8%AF%B7%E8%AF%81%E6%98%8E-toc" style="margin-left:40px;"><a href="#%C2%A0b.slow%E4%B8%80%E6%AC%A1%E8%B5%B01%E6%AD%A5%EF%BC%8Cfast%E8%B5%B03%E6%AD%A5%C2%A0%204%E6%AD%A5%C2%A0%205%E6%AD%A5%C2%A0%20n%E6%AD%A5%E8%BF%98%E4%B8%80%E5%AE%9A%E8%BF%BD%E5%BE%97%E4%B8%8A%E5%90%97%C2%A0%20%E8%AF%B7%E8%AF%81%E6%98%8E" rel="nofollow"> b.slow一次走1步，fast走3步  4步  5步  n步还一定追得上吗  请证明</a></p> 
<p id="2.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A82-toc" style="margin-left:0px;"><a href="#2.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A82" rel="nofollow">2.环形链表2</a></p> 
<p id="3.%E9%9A%8F%E6%9C%BA%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6-toc" style="margin-left:0px;"><a href="#3.%E9%9A%8F%E6%9C%BA%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6" rel="nofollow">3.随机链表的复制</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8">1.环形链表</h2> 
<p><a href="https://leetcode.cn/problems/linked-list-cycle/" rel="nofollow" title="141. 环形链表 - 力扣（LeetCode）">141. 环形链表 - 力扣（LeetCode）</a></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/64/9d/yRbf472F_o.png"></p> 
<p> 思路：</p> 
<blockquote> 
 <p>快慢指针，慢指针走一步，快指针走两步</p> 
 <p>进环以后快指针开始追击慢指针</p> 
 <p>当快指针能追上慢指针就证明链表带环</p> 
</blockquote> 
<pre><code>bool hasCycle(struct ListNode *head) {
    struct ListNode*fast=head,*slow=head;
    while(fast&amp;&amp;fast-&gt;next)
    {
        slow=slow-&gt;next;
        fast=fast-&gt;next-&gt;next;
        if(fast==slow)
        {
        return true;
        }
    }
    
    return false;
}</code></pre> 
<p>面试问题：</p> 
<h3 id="a.%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%80%E5%AE%9A%E4%BC%9A%E7%9B%B8%E9%81%87%EF%BC%8C%E6%9C%89%E6%B2%A1%E6%9C%89%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%94%99%E8%BF%87%EF%BC%8C%E6%B0%B8%E8%BF%9C%E8%BF%BD%E4%B8%8D%E4%B8%8A%EF%BC%9F%E8%AF%B7%E8%AF%81%E6%98%8E">a.为什么一定会相遇，有没有可能会错过，永远追不上？请证明</h3> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/13/14/pOws48mC_o.png"></p> 
<p> 假设slow进环时，fast跟slow距离时N，fast追击slow的过程中距离变化如下：</p> 
<blockquote> 
 <p>N</p> 
 <p>N-1</p> 
 <p>N-2</p> 
 <p>...</p> 
 <p>2</p> 
 <p>1</p> 
 <p>0</p> 
</blockquote> 
<p> 每追击一次，距离缩小1，距离为0就是追上了</p> 
<p></p> 
<h3 id="%C2%A0b.slow%E4%B8%80%E6%AC%A1%E8%B5%B01%E6%AD%A5%EF%BC%8Cfast%E8%B5%B03%E6%AD%A5%C2%A0%204%E6%AD%A5%C2%A0%205%E6%AD%A5%C2%A0%20n%E6%AD%A5%E8%BF%98%E4%B8%80%E5%AE%9A%E8%BF%BD%E5%BE%97%E4%B8%8A%E5%90%97%C2%A0%20%E8%AF%B7%E8%AF%81%E6%98%8E"> b.slow一次走1步，fast走3步  4步  5步  n步还一定追得上吗  请证明</h3> 
<p>假设slow进环时，fast跟slow距离时N，</p> 
<p>fast追击slow得过程只距离变化如下：</p> 
<blockquote> 
 <p>偶数        奇数</p> 
 <p>N                N</p> 
 <p>N-2             N-2</p> 
 <p>N-4             N-4</p> 
 <p>...                ....</p> 
 <p>4                   3</p> 
 <p>2                   1</p> 
 <p>0                   -1</p> 
 <p>追上了          错过了----&gt;进行新得一轮追击，距离变成C-1（假设C是环得长度）</p> 
 <p>                        两种情况：1.C-1是偶数  2.C-1是奇数</p> 
</blockquote> 
<blockquote> 
 <p> 总结：</p> 
 <p>1.N是偶数，第一轮就追上了</p> 
 <p>2.N是奇数，第一轮追击会错过，距离变成C-1</p> 
 <p>        a、如果C-1是偶数下一轮就追上了</p> 
 <p>        b、如果C-1是奇数，那么就永远追不上</p> 
 <p>结论：如果同时存在N是奇数且C是偶数，那么就永远追不上</p> 
</blockquote> 
<p> 那么，N是奇数且C是偶数的情况是否一定存在呢？</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/96/c8/rCF74cVv_o.png"></p> 
<blockquote> 
 <p> 假设slow进环时，fast跟slow距离时N，</p> 
 <p>slow走的距离是：L</p> 
 <p>slow进环时，假设fast已经在环里面转了x圈</p> 
 <p>fast走的距离 :<strong> <span style="color:#fe2c24;">L + x * C + C - N</span></strong></p> 
</blockquote> 
<blockquote> 
 <p> 假设fast走的距离是slow的3倍</p> 
 <p>3*L = L + x*C + C - N</p> 
 <p>||</p> 
 <p>2*L = (x+1)*C + C + N</p> 
 <p>||</p> 
 <p>偶数=（x+1）*偶数 - 奇数</p> 
</blockquote> 
<p> 由此，N是1奇数时，C也是奇数；N是偶数是，C也是偶数</p> 
<p>只有奇数-奇数才能等于偶数</p> 
<p>（x+1）*偶数一定等于偶数</p> 
<p>所以，N是奇数且C是偶数不能同时存在，<span style="color:#fe2c24;">永远追不上的条件不成立</span></p> 
<blockquote> 
 <p>结论：<span style="color:#fe2c24;"><strong>一定能追上</strong></span></p> 
 <p>N是偶数第一轮就追上了</p> 
 <p>N是奇数第一轮追不上，C-1是偶数第二轮就追上了</p> 
</blockquote> 
<h2 id="2.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A82">2.环形链表2</h2> 
<p><a href="https://leetcode.cn/problems/linked-list-cycle-ii/" rel="nofollow" title="142. 环形链表 II - 力扣（LeetCode）">142. 环形链表 II - 力扣（LeetCode）</a></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7d/21/ZnPtgwg8_o.png"></p> 
<p> 与上面一样</p> 
<p>相遇时：slow走的路程：L+N; fast走的路程：L+x*C  + N</p> 
<blockquote> 
 <p>假设fast走的路程时slow2倍</p> 
 <p>2*(L+N) = L+x*C + N</p> 
 <p>||</p> 
 <p>L+N=x*C</p> 
 <p>||</p> 
 <p>L=x*C-N</p> 
 <p>||</p> 
 <p>L=(x-1)C + C - N</p> 
</blockquote> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/27/73/zwHB0PBE_o.png"></p> 
<p> 由此，slow走到开始入环的第一个节点时<span style="color:#fe2c24;">恰好</span>是head走到开始入环的第一个节点处</p> 
<pre><code>struct ListNode *detectCycle(struct ListNode *head) {
    struct ListNode* fast=head,*slow=head;
    while(fast&amp;&amp;fast-&gt;next)
    {
        slow=slow-&gt;next;
        fast=fast-&gt;next-&gt;next;
        
        if(fast==slow)
        {
            struct ListNode* a=slow;
            while(a!=head)
            {
                a=a-&gt;next;
                head=head-&gt;next;
            }
            return a;
        }
        
    }
    return NULL;
}</code></pre> 
<h2 id="3.%E9%9A%8F%E6%9C%BA%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6">3.随机链表的复制</h2> 
<p><a href="https://leetcode.cn/problems/copy-list-with-random-pointer/" rel="nofollow" title="138. 随机链表的复制 - 力扣（LeetCode）">138. 随机链表的复制 - 力扣（LeetCode）</a> <img alt="" src="https://images2.imgbox.com/55/3b/MNq7Qlhl_o.png"></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/e1/16/MBMnUG9e_o.png"></p> 
<p> 思路：</p> 
<blockquote> 
 <p>把每个拷贝节点连接到原节点的后面</p> 
 <p>控制random</p> 
 <p>把拷贝节点拿下来尾插成新链表，恢复原链表</p> 
</blockquote> 
<pre><code>struct Node* copyRandomList(struct Node* head) {
	//把每个拷贝节点连接到原节点的后面
    struct Node* cur=head;
    while(cur)
    {
        struct Node* copy=(struct Node*)malloc(sizeof(struct Node));
        copy-&gt;val=cur-&gt;val;
        copy-&gt;next=cur-&gt;next;
        cur-&gt;next=copy;

        cur=copy-&gt;next;
    }
    //控制random
    cur=head;
    while(cur)
    {
        struct Node* copy = cur-&gt;next;//拷贝节点已经连接到原节点的后面
        if(cur-&gt;random==NULL)
        {
            copy-&gt;random=NULL;
        }
        else
        {
            copy-&gt;random=cur-&gt;random-&gt;next;//复制链表random指向原链表random指向的节点的拷贝节点
            //copy-&gt;random=cur-&gt;random;//错误，不能指向原链表的节点
        }
        cur=copy-&gt;next;//继续往下遍历
    }
    //把拷贝节点拿下来尾插成新链表，恢复原链表
    struct Node* copyhead=NULL;//新链表头节点
    struct Node* copytail=NULL;//新链表尾节点
    cur=head;
    
    while(cur)
    {
        struct Node* copy=cur-&gt;next;
        struct Node* next=copy-&gt;next;
        if(copytail==NULL)
        {
            copyhead=copytail=copy;
        }
        else
        {
            copytail-&gt;next=copy;
            copytail=copytail-&gt;next;
        }
        cur-&gt;next=next;//恢复原链表
        cur=next;
    }
    return copyhead;
}</code></pre> 
<blockquote> 
 <p><span style="color:#1a439c;">感谢观看，再见</span></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7eca2c7f656225b8481be417c9901c63/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">智能化升级 —— 巧妙运用AI工具，提升职场与学习中的个人竞争力</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b336c7a9577d48d28a972ad62d04b97/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hadoop学习</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>