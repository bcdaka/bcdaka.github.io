<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>红黑树(数据结构篇) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9f197629f2ff3f2f613b4769c8b4fa1b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="红黑树(数据结构篇)">
  <meta property="og:description" content="数据结构之红黑树 前言 红黑树是一个相对比较复杂的数据结构，单从文字来讲解，还是会有很难理解的地方对此，我很早之前就在B站中就出了讲解视频，大家可以通过这篇文章以及视频辅助理解，B站个人地址 红黑树(RB-tree) 概念：
红黑树是AVL树的变种，它是每一个节点或者着成红色，或者着成黑色的一棵二叉查找树。对红黑树的操作在最坏情形下花费O(logN)时间，它的插入操作使用的是非递归形式实现红黑树的高度最多是2log(N&#43;1) 特性：
红黑树是具有着色性质的二叉查找树，也就意味着树的节点值是有序的，且每个节点只可能是红色或者黑色红黑树的根是黑色的如果一个节点是红色的，那么它的子节点必须是黑色的从一个节点到一个空指针的每一条路径必须包含相同数目的黑色节点 自顶向下插入操作：
如果使用自底向上插入的话还需要进行逐步递归是他们保证满足红黑树特性，效率就降低了。
令X为新插入节点(在下面的第三操作中为当前节点)，P为X的父节点，G为P的父节点(也就是X的祖父节点)，GP为G的父节点(也就是P的祖父节点，X的曾祖父节点)
因为红黑树是一颗二叉查找树，因此在插入时需要查找要插入的值的正确位置，在这个查找路径中，如果遇到节点(X)为黑色而子节点全部为红色，我们就进行翻转操作，也就是将该节点(X)着成红色，子节点全部着成黑色。翻转后:
如果翻转后发现P和X节点都是红色就需要根据树的结构进行旋转操作
如果X，P，G形成&#34;一字形&#34;，则对P的父节点G(也就是X的祖父节点)与P进行单旋转，并将新根也就是P着成黑色，新根的子节点都着成红色。如果X，P，G形成&#34;之字形&#34;，则对G与X节点进行双旋转，并将新根着成黑色(也就是X节点)，然后将新根的子节点着成红色 如果该节点(X)是黑色则继续将X下降，直到找到红色节点继续翻转，或者找到指定插入位置，找到指定位置也就是当前节点位置X就进行插入，新节点也是红色，需要重新判断其父节点是否为红色，为红色又需要进行翻转操作来调整。
自顶向下删除操作
自顶向下删除也需要保证红黑树的性质，插入是插入一片红色的叶子节点，那么反过来我们删除一个红色叶子节点就不会破坏红黑树性质，自顶向下插入的翻转操作是将红色节点减少，并将红色节点上浮，因为删除是插入的逆过程，因此删除的翻转操作就是要将树中的红色节点增多，并将红色节点下沉，这样我们删除红色叶子节点的概率更大，并且不会破坏红黑树性质
删除操作一共有5种情况需要解决
要删除节点cur跟其兄弟节点s原本颜色为黑色，父亲节点p为红色s的两个儿子都是红色，这样双旋转和单旋转都可以，这里优先选择ps单选转调整，情况1-case4s的左儿子为红色，需要ps.l双旋转调整(s.l为s的左儿子)，情况2-case1s的右儿子为红色，需要ps单旋转调整，情况3-case2s有两个黑色儿子，直接cur,p,s颜色翻转操作调整，情况4-case3p和cur为黑色，s为红色，需要交换sp节点的颜色，并且sp单旋转调整，情况5-case5cur为红色，可以继续将cur下降，也就是当前cur指向原本cur的子节点，如果为红色继续下降，如果为黑色就判断是否需要操作 tomove指向要删除节点也就是目标节点，而p指向真正要删除的叶子节点，cur则while循环完后则是指向nil节点，因为将tomove标记完，就进行cur和p就查找tomove右子树的最小值节点进行删除，而while循环终止条件为cur==nil情况，因此p指向真正要删除的节点
找到tomove和p后，将tomove的data等于p的data，将p删除，因为p为叶子节点，将p的父节点指向nil。
情况2-case1
情况3-case2
情况4-case3
情况1-case4
情况5-case5
计算红黑树层数：
需要对log2(树中总共节点数&#43;1)向上取整 代码：
int Height(const int count){ return std::ceil(std::log2(count&#43;1)); } 代码实现：
#include &lt;iostream&gt; #include &lt;queue&gt; #include &lt;math.h&gt; #include &lt;limits.h&gt; using namespace std; typedef enum {red,black} colortype; struct RBNode{ int data; RBNode *left,*right,*parent; colortype color; //颜色 RBNode(const int val,RBNode* l,RBNode* r,RBNode* p,colortype c=red):data(val), left(l),right(r),parent(p),color(c){}; }; class RBtree{ public: RBtree(){ nil=new RBNode(INT_MAX, nullptr, nullptr, nullptr,black); root= nullptr; t=new RBNode(INT_MIN,nil,nil,nil,black); size=0; } ~RBtree(){ clear(); delete t; delete nil; }; void insert(const int val); //插入操作 void del(const int val); //删除操作 RBNode* find(const int val); //查找操作 void print(); //打印操作,层序遍历 //清空操作 void clear(){ clear(root); root= nullptr; t-&gt;right=nil; size=0; } protected: void overturnred(const int val,RBNode* &amp;cur); //翻转操作,将当前节点变成红色，子节点变成黑色 void overturnblack(int val,RBNode* &amp;cur); //翻转操作，将当前节点变成黑色，子节点变成红色 RBNode* SingleRotatewithleft(RBNode* &amp;k1); RBNode* SingleRotatewithright(RBNode* &amp;k1); RBNode* Rotate(const int val,RBNode* &amp;k1){ if(val&lt;k1-&gt;data){ return k1-&gt;left=val&lt;k1-&gt;left-&gt;data?">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-23T21:06:22+08:00">
    <meta property="article:modified_time" content="2024-06-23T21:06:22+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">红黑树(数据结构篇)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_2"></a>数据结构之红黑树</h2> 
<h3><a id="_5"></a>前言</h3> 
<ul><li>红黑树是一个相对比较复杂的数据结构，单从文字来讲解，还是会有很难理解的地方</li><li>对此，我很早之前就在B站中就出了讲解视频，大家可以通过这篇文章以及视频辅助理解，<a href="https://space.bilibili.com/473234321?spm_id_from=333.1007.0.0" rel="nofollow">B站个人地址</a></li></ul> 
<h3><a id="RBtree_10"></a>红黑树(RB-tree)</h3> 
<p><strong>概念</strong>：</p> 
<ul><li><strong>红黑树</strong>是AVL树的变种，它<strong>是每一个节点或者着成红色，或者着成黑色的一棵二叉查找树。</strong></li><li>对红黑树的操作<strong>在最坏情形下花费O(logN)时间</strong>，它的插入操作使用的是非递归形式实现</li><li>红黑树的<strong>高度最多是2log(N+1)</strong></li></ul> 
<p><strong>特性</strong>：</p> 
<ul><li>红黑树是具有<strong>着色性质</strong>的<strong>二叉查找树</strong>，也就意味着树的节点值是<strong>有序的</strong>，且每个节点<strong>只可能是红色或者黑色</strong></li><li>红黑树的<strong>根是黑色的</strong></li><li>如果<strong>一个节点是红色的</strong>，那么它的<strong>子节点必须是黑色的</strong></li><li>从<strong>一个节点到一个空指针</strong>的<strong>每一条路径必须包含相同数目的黑色节点</strong></li></ul> 
<p><strong>自顶向下插入操作</strong>：</p> 
<ol><li> <p>如果使用自底向上插入的话还需要进行逐步递归是他们保证满足红黑树特性，效率就降低了。</p> </li><li> <p>令<em>X为新插入节点(在下面的第三操作中为当前节点)，P为X的父节点，G为P的父节点(也就是X的祖父节点)，GP为G的父节点(也就是P的祖父节点，X的曾祖父节点)</em></p> </li><li> <p>因为红黑树是一颗二叉查找树，因此在<strong>插入时需要查找要插入的值的正确位置</strong>，在这个<strong>查找路径中</strong>，如果<strong>遇到节点(X)为黑色而子节点全部为红色</strong>，我们就进行<code>翻转操作</code>，也就是<strong>将该节点(X)着成红色，子节点全部着成黑色</strong>。<strong>翻转后</strong>:</p> 
  <blockquote> 
   <p>如果翻转后发现<strong>P和X节点都是红色</strong>就需要根据树的结构进行<code>旋转操作</code></p> 
   <ol><li>如果<strong>X，P，G形成"一字形"</strong>，则<strong>对P的父节点G</strong>(也就是X的祖父节点)<strong>与P进行</strong><code>单旋转</code>，并<strong>将新根也就是P着成黑色，新根的子节点都着成红色</strong>。</li><li>如果<strong>X，P，G形成"之字形"</strong>，则对<strong>G与X节点</strong>进行<code>双旋转</code>，并<strong>将新根着成黑色(也就是X节点)</strong>，然后<strong>将新根的子节点着成红色</strong></li></ol> 
  </blockquote> </li><li> <p>如果<strong>该节点(X)是黑色则继续将X下降</strong>，直到<strong>找到红色节点继续翻转</strong>，<strong>或者找到指定插入位置</strong>，找到指定位置也就是当前节点位置X就进行插入，<strong>新节点也是红色，需要重新判断其父节点是否为红色，为红色又需要进行翻转操作来调整</strong>。</p> </li></ol> 
<p><strong>自顶向下删除操作</strong></p> 
<ol><li> <p>自顶向下删除也需要保证红黑树的性质，插入是插入一片红色的叶子节点，那么反过来<strong>我们删除一个红色叶子节点就不会破坏红黑树性质</strong>，<strong>自顶向下插入的翻转操作是将红色节点减少，并将红色节点上浮</strong>，因为<strong>删除是插入的逆过程，因此删除的翻转操作就是要将树中的红色节点增多，并将红色节点下沉，这样我们删除红色叶子节点的概率更大，并且不会破坏红黑树性质</strong></p> </li><li> <p>删除操作一共有5种情况需要解决</p> 
  <blockquote> 
   <ol><li>要<strong>删除节点cur跟其兄弟节点s原本颜色为黑色</strong>，<strong>父亲节点p为红色</strong></li><li><strong>s的两个儿子都是红色</strong>，这样双旋转和单旋转都可以，这里优先选择<code>ps单选转</code>调整，<em>情况1-case4</em></li><li><strong>s的左儿子为红色</strong>，需要<code>ps.l双旋转</code>调整(s.l为s的左儿子)，<em>情况2-case1</em></li><li><strong>s的右儿子为红色</strong>，需要<code>ps单旋转</code>调整，<em>情况3-case2</em></li><li><strong>s有两个黑色儿子</strong>，直接<code>cur,p,s颜色翻转操作</code>调整，<em>情况4-case3</em></li><li><strong>p和cur为黑色</strong>，<strong>s为红色</strong>，需要<code>交换sp节点的颜色</code>，并且sp<code>单旋转</code>调整，<em>情况5-case5</em></li><li><strong>cur为红色</strong>，可以继续<code>将cur下降</code>，也就是当前cur指向原本cur的子节点，如果为红色继续下降，如果为黑色就判断是否需要操作</li></ol> 
  </blockquote> </li><li> <p><strong>tomove指向要删除节点也就是目标节点，而p指向真正要删除的叶子节点</strong>，cur则while循环完后则是指向nil节点，因为将tomove标记完，就进行cur和p就查找tomove右子树的最小值节点进行删除，而while循环终止条件为cur==nil情况，因此p指向真正要删除的节点</p> </li><li> <p><strong>找到tomove和p后，将tomove的data等于p的data，将p删除</strong>，因为p为叶子节点，将p的父节点指向nil。</p> </li></ol> 
<p><img src="https://images2.imgbox.com/b4/1d/zilm9Hou_o.png" alt="image"> <em>情况2-case1</em></p> 
<p><img src="https://images2.imgbox.com/b1/41/KKmPETkA_o.png" alt="image"> <em>情况3-case2</em></p> 
<p><img src="https://images2.imgbox.com/66/be/gL1FmTk0_o.png" alt="image"> <em>情况4-case3</em></p> 
<p><img src="https://images2.imgbox.com/49/dd/bcLkJceL_o.png" alt="image-20240502001308851"> <em>情况1-case4</em></p> 
<p><img src="https://images2.imgbox.com/a0/eb/cgLztNUw_o.png" alt="image"> <em>情况5-case5</em></p> 
<p><strong>计算红黑树层数</strong>：</p> 
<ul><li>需要<strong>对log2(树中总共节点数+1)向上取整</strong></li></ul> 
<p>代码：</p> 
<pre><code class="prism language-c++">int Height(const int count){
    return std::ceil(std::log2(count+1));
}
</code></pre> 
<p><strong>代码实现</strong>：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;queue&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;limits.h&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">enum</span> <span class="token punctuation">{<!-- --></span>red<span class="token punctuation">,</span>black<span class="token punctuation">}</span> colortype<span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">RBNode</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> data<span class="token punctuation">;</span>
    RBNode <span class="token operator">*</span>left<span class="token punctuation">,</span><span class="token operator">*</span>right<span class="token punctuation">,</span><span class="token operator">*</span>parent<span class="token punctuation">;</span>
    colortype color<span class="token punctuation">;</span>   <span class="token comment">//颜色</span>
    <span class="token function">RBNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> l<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> r<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> p<span class="token punctuation">,</span>colortype c<span class="token operator">=</span>red<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">data</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                                        <span class="token function">left</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">right</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">parent</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">color</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">RBtree</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">RBtree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        nil<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">RBNode</span><span class="token punctuation">(</span>INT_MAX<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span>black<span class="token punctuation">)</span><span class="token punctuation">;</span>
        root<span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        t<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">RBNode</span><span class="token punctuation">(</span>INT_MIN<span class="token punctuation">,</span>nil<span class="token punctuation">,</span>nil<span class="token punctuation">,</span>nil<span class="token punctuation">,</span>black<span class="token punctuation">)</span><span class="token punctuation">;</span>
        size<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">RBtree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> t<span class="token punctuation">;</span>
        <span class="token keyword">delete</span> nil<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//插入操作</span>
    <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//删除操作</span>
    RBNode<span class="token operator">*</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//查找操作</span>
    <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//打印操作,层序遍历</span>
    <span class="token comment">//清空操作</span>
    <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">clear</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
        root<span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        t<span class="token operator">-&gt;</span>right<span class="token operator">=</span>nil<span class="token punctuation">;</span>
        size<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">overturnred</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//翻转操作,将当前节点变成红色，子节点变成黑色</span>
    <span class="token keyword">void</span> <span class="token function">overturnblack</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//翻转操作，将当前节点变成黑色，子节点变成红色</span>
    RBNode<span class="token operator">*</span> <span class="token function">SingleRotatewithleft</span><span class="token punctuation">(</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>k1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    RBNode<span class="token operator">*</span> <span class="token function">SingleRotatewithright</span><span class="token punctuation">(</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>k1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    RBNode<span class="token operator">*</span> <span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>k1<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>k1<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> k1<span class="token operator">-&gt;</span>left<span class="token operator">=</span>val<span class="token operator">&lt;</span>k1<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>data<span class="token operator">?</span> <span class="token function">SingleRotatewithleft</span><span class="token punctuation">(</span>k1<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">SingleRotatewithright</span><span class="token punctuation">(</span>k1<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> k1<span class="token operator">-&gt;</span>right<span class="token operator">=</span>val<span class="token operator">&lt;</span>k1<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>data<span class="token operator">?</span> <span class="token function">SingleRotatewithleft</span><span class="token punctuation">(</span>k1<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">SingleRotatewithright</span><span class="token punctuation">(</span>k1<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>rt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 计算红黑树层数</span>
    <span class="token keyword">int</span> <span class="token function">Height</span><span class="token punctuation">(</span><span class="token keyword">int</span> nodeCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 红黑树的层数为 log2(nodeCount+1)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>std<span class="token double-colon punctuation">::</span><span class="token function">ceil</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">log2</span><span class="token punctuation">(</span>nodeCount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    RBNode<span class="token operator">*</span> root<span class="token punctuation">;</span>
    RBNode<span class="token operator">*</span> nil<span class="token punctuation">;</span>   <span class="token comment">//空节点，color为黑色</span>
    RBNode<span class="token operator">*</span> t<span class="token punctuation">;</span>  <span class="token comment">//根标记，用于删除操作的便捷</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

RBNode<span class="token operator">*</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">SingleRotatewithleft</span><span class="token punctuation">(</span>RBNode <span class="token operator">*</span><span class="token operator">&amp;</span>k1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    RBNode<span class="token operator">*</span> k2<span class="token punctuation">;</span>
    k2<span class="token operator">=</span>k1<span class="token operator">-&gt;</span>left<span class="token punctuation">;</span>
    k1<span class="token operator">-&gt;</span>left<span class="token operator">=</span>k2<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
    k2<span class="token operator">-&gt;</span>right<span class="token operator">=</span>k1<span class="token punctuation">;</span>
    <span class="token keyword">return</span> k2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

RBNode<span class="token operator">*</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">SingleRotatewithright</span><span class="token punctuation">(</span>RBNode <span class="token operator">*</span><span class="token operator">&amp;</span>k1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    RBNode<span class="token operator">*</span> k2<span class="token punctuation">;</span>
    k2<span class="token operator">=</span>k1<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
    k1<span class="token operator">-&gt;</span>right<span class="token operator">=</span>k2<span class="token operator">-&gt;</span>left<span class="token punctuation">;</span>
    k2<span class="token operator">-&gt;</span>left<span class="token operator">=</span>k1<span class="token punctuation">;</span>
    <span class="token keyword">return</span> k2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//翻转操作</span>
<span class="token keyword">void</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">overturnred</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">,</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    cur<span class="token operator">-&gt;</span>color<span class="token operator">=</span>red<span class="token punctuation">;</span>
    cur<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>color<span class="token operator">=</span>cur<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>
    RBNode<span class="token operator">*</span> p<span class="token operator">=</span>cur<span class="token operator">-&gt;</span>parent<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>color<span class="token operator">==</span>red<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        RBNode<span class="token operator">*</span> g<span class="token operator">=</span>p<span class="token operator">-&gt;</span>parent<span class="token punctuation">;</span>
        g<span class="token operator">-&gt;</span>color<span class="token operator">=</span>red<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>g<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>     <span class="token comment">//双旋转</span>
            p<span class="token operator">=</span> <span class="token function">Rotate</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cur<span class="token operator">=</span> <span class="token function">Rotate</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>g<span class="token operator">-&gt;</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cur<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    root<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//插入操作</span>
<span class="token keyword">void</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        root<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">RBNode</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>nil<span class="token punctuation">,</span>nil<span class="token punctuation">,</span> t<span class="token punctuation">,</span>black<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token operator">-&gt;</span>right<span class="token operator">=</span>root<span class="token punctuation">;</span>
        size<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    RBNode <span class="token operator">*</span>cur<span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">;</span>
    cur<span class="token operator">=</span>p<span class="token operator">=</span>root<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">!=</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        p<span class="token operator">=</span>cur<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>color<span class="token operator">==</span>red<span class="token operator">&amp;&amp;</span>cur<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>color<span class="token operator">==</span>red<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">overturnred</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cur<span class="token operator">=</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token operator">?</span>p<span class="token operator">-&gt;</span>left<span class="token operator">:</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">!=</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cur<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">RBNode</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> nil<span class="token punctuation">,</span> nil<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        p<span class="token operator">-&gt;</span>left<span class="token operator">=</span>cur<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        p<span class="token operator">-&gt;</span>right<span class="token operator">=</span>cur<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">overturnred</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">overturnblack</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">,</span> RBNode <span class="token operator">*</span><span class="token operator">&amp;</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    cur<span class="token operator">-&gt;</span>color<span class="token operator">=</span>red<span class="token punctuation">;</span>
    RBNode<span class="token operator">*</span> p<span class="token operator">=</span>cur<span class="token operator">-&gt;</span>parent<span class="token punctuation">;</span>
    RBNode<span class="token operator">*</span> s<span class="token operator">=</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token operator">?</span>p<span class="token operator">-&gt;</span>left<span class="token operator">:</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
    <span class="token comment">//case4:要删除节点cur跟其兄弟节点s原本颜色为黑色，父亲节点p为红色，s的两个儿子都是红色，这样双旋转和单旋转都可以，这里优先选择ps单选转</span>
    <span class="token comment">//case2:要删除节点cur跟其兄弟节点s原本颜色为黑色，父亲节点p为红色，s的右儿子为红色情况，需要ps单旋转调整</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>color<span class="token operator">==</span>red<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        val<span class="token operator">=</span>s<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//case1:要删除节点cur跟其兄弟节点s原本颜色为黑色，父亲节点p为红色，s的左儿子为红色的情况,需要ps.l双旋转调整</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>color<span class="token operator">==</span>red<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        val<span class="token operator">=</span>s<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        <span class="token comment">//case3:要删除节点cur跟其兄弟节点s原本颜色为黑色，父亲节点p为红色，s有两个黑儿子(nil节点也是黑色),直接将颜色翻转即可</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//翻转操作</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">!=</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            s<span class="token operator">-&gt;</span>color<span class="token operator">=</span>red<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        p<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>s<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">Rotate</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    RBNode<span class="token operator">*</span> g<span class="token operator">=</span>p<span class="token operator">-&gt;</span>parent<span class="token punctuation">;</span>
    <span class="token function">Rotate</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将调整完的cur的新祖父也就是s或者s的左儿子变成红色，也就是删除完cur后将颜色调整到之前cur在翻转前的情况</span>
    g<span class="token operator">-&gt;</span>color<span class="token operator">=</span>red<span class="token punctuation">;</span>
    g<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>color<span class="token operator">=</span>g<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    RBNode<span class="token operator">*</span> tomove<span class="token operator">=</span>nil<span class="token punctuation">;</span>  <span class="token comment">//找到删除节点</span>
    RBNode <span class="token operator">*</span>g<span class="token punctuation">,</span><span class="token operator">*</span>p<span class="token punctuation">,</span><span class="token operator">*</span>s<span class="token punctuation">,</span><span class="token operator">*</span>cur<span class="token punctuation">;</span>
    g<span class="token operator">=</span>p<span class="token operator">=</span>t<span class="token punctuation">,</span>s<span class="token operator">=</span>t<span class="token operator">-&gt;</span>left<span class="token punctuation">,</span>cur<span class="token operator">=</span>root<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">!=</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//翻转颜色</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>left<span class="token operator">-&gt;</span>color<span class="token operator">==</span>black<span class="token operator">&amp;&amp;</span>cur<span class="token operator">-&gt;</span>right<span class="token operator">-&gt;</span>color<span class="token operator">==</span>black<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">overturnblack</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            g<span class="token operator">=</span>p<span class="token punctuation">;</span>p<span class="token operator">=</span>cur<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                cur<span class="token operator">=</span>p<span class="token operator">-&gt;</span>left<span class="token punctuation">,</span>s<span class="token operator">=</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
                tomove<span class="token operator">=</span>cur<span class="token punctuation">,</span>cur<span class="token operator">=</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">,</span>s<span class="token operator">=</span>p<span class="token operator">-&gt;</span>left<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//case5:此时肯定p和cur都为黑色，因为如果p为红色早就翻转了，s肯定是红色，将s变成黑色，p变为红色，sp单旋转调整</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>color<span class="token operator">==</span>black<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                s<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>
                p<span class="token operator">-&gt;</span>color<span class="token operator">=</span>red<span class="token punctuation">;</span>
                <span class="token comment">//单旋转完，cur新祖父变为s,将s重新更改</span>
                g<span class="token operator">=</span> <span class="token function">Rotate</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
                s<span class="token operator">=</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token operator">?</span>p<span class="token operator">-&gt;</span>left<span class="token operator">:</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
                <span class="token comment">//调整完该情况就重新检查上述操作</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//else，cur一定为红色，则可以直接继续将cur继续下降</span>
        <span class="token punctuation">}</span>
        g<span class="token operator">=</span>p<span class="token punctuation">;</span>p<span class="token operator">=</span>cur<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>val<span class="token operator">&lt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cur<span class="token operator">=</span>p<span class="token operator">-&gt;</span>left<span class="token punctuation">,</span>s<span class="token operator">=</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
            tomove<span class="token operator">=</span>cur<span class="token punctuation">,</span>cur<span class="token operator">=</span>p<span class="token operator">-&gt;</span>right<span class="token punctuation">,</span>s<span class="token operator">=</span>p<span class="token operator">-&gt;</span>left<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    root<span class="token operator">-&gt;</span>color<span class="token operator">=</span>black<span class="token punctuation">;</span>   <span class="token comment">//保证红黑树性质2不被破坏，也就是根一定为黑色</span>

    <span class="token comment">//判断是否找到真正要删除的节点，如果找不到就退出</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>tomove<span class="token operator">==</span>nil<span class="token operator">&amp;&amp;</span>tomove<span class="token operator">-&gt;</span>data<span class="token operator">!=</span>val<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"未找到要删除对应值的节点"</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//tomove是要删除的节点，而p指向的是真正要删除的节点</span>
    tomove<span class="token operator">-&gt;</span>data<span class="token operator">=</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>g<span class="token operator">-&gt;</span>left<span class="token operator">==</span>p<span class="token punctuation">)</span> g<span class="token operator">-&gt;</span>left<span class="token operator">=</span>nil<span class="token punctuation">;</span>
    <span class="token keyword">else</span> g<span class="token operator">-&gt;</span>right<span class="token operator">=</span>nil<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> p<span class="token punctuation">;</span>
    size<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

RBNode<span class="token operator">*</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        RBNode<span class="token operator">*</span> cur<span class="token operator">=</span>root<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">!=</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>data<span class="token operator">==</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span> cur<span class="token punctuation">;</span>
            cur<span class="token operator">=</span>val<span class="token operator">&lt;</span>cur<span class="token operator">-&gt;</span>data<span class="token operator">?</span>cur<span class="token operator">-&gt;</span>left<span class="token operator">:</span>cur<span class="token operator">-&gt;</span>right<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">==</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"树中没有指定值节点"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> root<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"树为空"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    queue<span class="token operator">&lt;</span>RBNode<span class="token operator">*</span><span class="token operator">&gt;</span>q<span class="token punctuation">;</span>
    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> cnt<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ans<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> h<span class="token operator">=</span> <span class="token function">Height</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ans<span class="token operator">==</span>h<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        RBNode<span class="token operator">*</span> cur<span class="token operator">=</span>q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"null"</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>color<span class="token operator">==</span>red<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"\033[31m"</span><span class="token operator">&lt;&lt;</span>cur<span class="token operator">-&gt;</span>data<span class="token operator">&lt;&lt;</span><span class="token string">"\033[0m"</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token operator">==</span>nil<span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span><span class="token string">"nil"</span><span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>cur<span class="token operator">-&gt;</span>data<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cnt<span class="token operator">==</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>ans<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        cnt<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">RBtree</span><span class="token double-colon punctuation">::</span><span class="token function">clear</span><span class="token punctuation">(</span>RBNode<span class="token operator">*</span> <span class="token operator">&amp;</span>rt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>rt<span class="token operator">!=</span>nil<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">clear</span><span class="token punctuation">(</span>rt<span class="token operator">-&gt;</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">clear</span><span class="token punctuation">(</span>rt<span class="token operator">-&gt;</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> rt<span class="token punctuation">;</span>
        rt<span class="token operator">=</span>nil<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    RBtree rBtree<span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rBtree<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_437"></a>尾言</h3> 
<p>完整版笔记也就是数据结构与算法专栏完整版可到我的博客进行查看，或者在github库中自取(包含源代码)</p> 
<blockquote> 
 <ul><li>博客1： <a href="https://codebooks.xyz" rel="nofollow">codebooks.xyz</a></li><li>博客2：<a href="https://moonfordream.github.io" rel="nofollow">moonfordream.github.io</a></li><li>github项目地址：<a href="https://github.com/MoonforDream/Data-Structure-and-Algorithms">Data-Structure-and-Algorithms</a></li></ul> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6dd3a99f1de0be184e7dbb693fe7f308/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;记录程序运行时间的4方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/022067e82a7abbd3b85459775081436d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">allWebPlugin助力iWebOffice2015插件在高版本浏览器使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>