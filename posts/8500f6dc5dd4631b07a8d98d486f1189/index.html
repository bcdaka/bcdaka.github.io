<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SQL Server 创建用户并授权 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8500f6dc5dd4631b07a8d98d486f1189/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SQL Server 创建用户并授权">
  <meta property="og:description" content="创建用户前需要有一个数据库，创建数据库命令如下：
CREATE DATABASE [数据库名称];
CREATE DATABASE database1; 一、创建登录用户 方式1：SQL命令 命令格式：CREATE LOGIN [用户名] WITH PASSWORD = &#39;密码&#39;;
例如，创建登录用户名sa1，密码123456 的用户，命令如下：
CREATE LOGIN [sa1] WITH PASSWORD = &#39;123456&#39; 方式2：使用SSMS创建 选择管理员账户--【安全性】--【登录名】--右键--【新建登录名】
二、数据库中创建用户 方式1：SQL命令 命令格式：USE [数据库名称];
CREATE USER [用户名] FOR LOGIN [用户名];
例如，在数据库BLSH中创建用户sa1，命令如下：
USE BLSH CREATE USER sa1 方式2：使用SSMS创建 选择要创建用户的数据库--【安全性】--【用户】--右键--【新建用户】
例如，在数据库test中创建用户sa1，操作如下：
三、给用户授权 方式1：SQL命令 使用 GRANT 命令来授予相应的权限，使用REVOKE命令来撤销相应的权限
授权对表的 SELECT, INSERT, UPDATE 和 DELETE 权限格式：
USE [数据库名称];
GRANT [权限] ON [表名] TO [用户名];
-- 授权对表的 SELECT, INSERT, UPDATE 和 DELETE 权限 GRANT SELECT, INSERT, UPDATE, DELETE ON dt_users TO sa1; -- 对存储过程授予执行权限 GRANT EXECUTE ON YourStoredProcedure TO sa1; -- 撤销对表的 SELECT, INSERT, UPDATE 和 DELETE 权限 REVOKE SELECT, INSERT, UPDATE, DELETE ON dt_users FROM sa1; -- 撤销对存储过程的执行权限 REVOKE EXECUTE ON YourStoredProcedure FROM sa1; -- 撤销创建表的权限 REVOKE CREATE TABLE FROM sa1; -- 撤销创建视图的权限 REVOKE CREATE VIEW FROM sa1; -- 撤销连接数据库的权限 REVOKE CONNECT FROM sa1; -- 查询用户当前权限 SELECT * FROM sys.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-13T11:05:47+08:00">
    <meta property="article:modified_time" content="2024-07-13T11:05:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SQL Server 创建用户并授权</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>创建用户前需要有一个数据库，创建数据库命令如下：</p> 
<p>CREATE DATABASE [数据库名称];</p> 
<pre><code class="language-sql">CREATE DATABASE database1;</code></pre> 
<h2>一、创建登录用户</h2> 
<h3>方式1：SQL命令</h3> 
<p>命令格式：CREATE LOGIN [用户名] WITH PASSWORD = '密码';</p> 
<p>例如，创建登录用户名sa1，密码123456 的用户，命令如下：</p> 
<pre><code class="language-sql">CREATE LOGIN [sa1] WITH PASSWORD = '123456' </code></pre> 
<h3>方式2：使用SSMS创建</h3> 
<p>选择管理员账户--【安全性】--【登录名】--右键--【新建登录名】</p> 
<p><img alt="" height="195" src="https://images2.imgbox.com/75/90/JBQ2TiAk_o.png" width="260"><img alt="" height="365" src="https://images2.imgbox.com/e8/6f/32FNcErk_o.png" width="420"></p> 
<h2>二、数据库中创建用户</h2> 
<h3>方式1：SQL命令</h3> 
<p>命令格式：USE [数据库名称];<br> CREATE USER [用户名] FOR LOGIN [用户名];</p> 
<p>例如，在数据库BLSH中创建用户sa1，命令如下：</p> 
<pre><code class="language-sql">USE BLSH
CREATE USER sa1</code></pre> 
<h3>方式2：使用SSMS创建</h3> 
<p>选择要创建用户的数据库--【安全性】--【用户】--右键--【新建用户】</p> 
<p>例如，在数据库test中创建用户sa1，操作如下：</p> 
<p><img alt="" height="309" src="https://images2.imgbox.com/2c/d7/ZWO9aYfC_o.png" width="221"><img alt="" height="391" src="https://images2.imgbox.com/22/c7/shM7nzpF_o.png" width="450"></p> 
<h2>三、给用户授权</h2> 
<h3>方式1：SQL命令</h3> 
<p>使用 GRANT 命令来授予相应的权限，使用REVOKE命令来撤销相应的权限</p> 
<p>授权对表的 SELECT, INSERT, UPDATE 和 DELETE 权限格式：<br> USE [数据库名称];<br> GRANT [权限] ON [表名] TO [用户名];</p> 
<pre><code class="language-sql">-- 授权对表的 SELECT, INSERT, UPDATE 和 DELETE 权限
GRANT SELECT, INSERT, UPDATE, DELETE ON dt_users TO sa1;

-- 对存储过程授予执行权限
GRANT EXECUTE ON YourStoredProcedure TO sa1;
 
-- 撤销对表的 SELECT, INSERT, UPDATE 和 DELETE 权限
REVOKE SELECT, INSERT, UPDATE, DELETE ON dt_users FROM sa1;
 
-- 撤销对存储过程的执行权限
REVOKE EXECUTE ON YourStoredProcedure FROM sa1;
 
-- 撤销创建表的权限
REVOKE CREATE TABLE FROM sa1;
 
-- 撤销创建视图的权限
REVOKE CREATE VIEW FROM sa1;
 
-- 撤销连接数据库的权限
REVOKE CONNECT FROM sa1;

-- 查询用户当前权限
SELECT * FROM sys.database_permissions WHERE grantee_principal_id = USER_ID('sa1');</code></pre> 
<h3>方式2：使用SSMS创建</h3> 
<h4>* 对整个数据库授权</h4> 
<p>选择管理员用户--【安全性】--【登录名】--在要授权的登录名上右键--【属性】</p> 
<p>例如，给sa1账户授予test数据库所有用户表的查询权限，操作如下：</p> 
<p><img alt="" height="351" src="https://images2.imgbox.com/60/61/psClL4sS_o.png" width="227"> <img alt="" height="370" src="https://images2.imgbox.com/87/ff/keWdIp9q_o.png" width="450"><img alt="" height="412" src="https://images2.imgbox.com/31/e3/GWS0rDir_o.png" width="500"></p> 
<p>注：public为可以连接该数据库，db_datareader为可以读取该数据库的数据，其他数据库角色含义请点击查看<a class="link-info" href="https://blog.csdn.net/lied1663634806/article/details/140383791" title="数据库角色含义">数据库角色含义</a></p> 
<h4>* 对数据库表单独授权</h4> 
<p>选择要授权的数据库--【安全性】--【用户】--在要授权的用户上右键--【属性】</p> 
<p>例如，给sa1_1用户授予test数据库CRM_Shops表的查询权限，操作如下：</p> 
<p><img alt="" height="337" src="https://images2.imgbox.com/11/88/4dG0jxog_o.png" width="200"><img alt="" height="395" src="https://images2.imgbox.com/1e/7f/Ccj6bQtR_o.png" width="480"><img alt="" height="412" src="https://images2.imgbox.com/d3/7e/QaDqjkN2_o.png" width="500"></p> 
<p>查询表时出现以下提示表示没有查询权限：</p> 
<p><img alt="" height="141" src="https://images2.imgbox.com/50/58/0uzymOKY_o.png" width="500"></p> 
<p>操作数据库时出现以下提示表示没有给该用户开通此数据库的任何权限：</p> 
<p><img alt="" height="239" src="https://images2.imgbox.com/fb/be/Dsq8DFwo_o.png" width="808"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/88cb4076b5af1bb34fd8fef356173493/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">懒人福音：Java版Webhook机器人，一键开启‘躺赢’模式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2b4e8919b52dd9fd69e25c13179e55e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot中的 6 种API请求参数读取方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>