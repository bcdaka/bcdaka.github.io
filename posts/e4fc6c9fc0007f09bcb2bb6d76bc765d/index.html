<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java ä¸ MySQL æ‰“é€ é«˜æ•ˆå®¡æ‰¹æµç¨‹ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e4fc6c9fc0007f09bcb2bb6d76bc765d/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="Java ä¸ MySQL æ‰“é€ é«˜æ•ˆå®¡æ‰¹æµç¨‹">
  <meta property="og:description" content="1æµç¨‹æ€è·¯åˆ†æ
å®¡æ‰¹æµç¨‹ğŸ±â€ğŸ’» 1.ä¸²è¡Œæµç¨‹ å½“å‰èŠ‚ç‚¹å®¡æ‰¹å®Œæˆåï¼Œä¸‹ä¸€æ¬¡èŠ‚ç‚¹æ‰èƒ½è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ç»ç†é€šè¿‡ä¹‹åï¼Œæ€»ç›‘æ‰èƒ½å®¡æ‰¹ï¼›
å›¾ç‰‡
2.å¹¶è¡Œæµç¨‹ ä¸€ä¸ªå®¡æ‰¹èŠ‚ç‚¹éœ€è¦å¤šäººè”å®¡ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼šä¼šç­¾ã€æˆ–ç­¾ï¼›
å›¾ç‰‡
ä¼šç­¾ï¼š
æ³¨æ„ï¼šåˆ«è·Ÿä¸²è¡Œå®¡æ‰¹æ··æ·†ã€‚ä¼šç­¾çš„å¤šä¸ªè§’è‰²æ˜¯å¹³è¡Œçš„ï¼Œæ²¡æœ‰ä¸Šä¸‹çº§å…³ç³»ã€å‰åé¡ºåºã€‚
ä¾‹å¦‚ï¼šåœ¨æŸé¡¹æ–‡ä»¶ã€åˆåŒã€å†³ç­–æˆ–å…¶ä»–é‡è¦äº‹é¡¹ä¸Šï¼Œéœ€è¦å¤šä¸ªç›¸å…³äººå‘˜è¿›è¡Œç¡®è®¤ã€æ‰¹å‡†æˆ–ç­¾ç½²çš„æƒ…å†µä¸‹ï¼Œå‚ä¸è¯¥è¿‡ç¨‹çš„äººå‘˜åŒæ—¶æ‰¹å‡†ï¼Œè¿™æ—¶ä¼šç­¾å°±èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜æ•ˆç‡ï¼Œé¡ºä¾¿ä¹Ÿèƒ½è§£å†³äººæƒ…ä¸–æ•…çš„é—®é¢˜ï½ï½ã€‚
ä¼šç­¾æ”¯æŒå¹¶ç­¾ï¼š
ä¸šåŠ¡æ¨¡å¼æ”¯æŒï¼šâ€œå…¨éƒ¨æŠ•ç¥¨â€ã€â€œæŒ‰æŠ•ç¥¨æ¯”ä¾‹â€ã€â€œæŒ‰æŠ•ç¥¨é€šè¿‡æ¯”ä¾‹â€ã€æ”¯æŒè®¾ç½® â€œç™¾åˆ†æ¯”â€ å’Œ â€œåˆ†æ•°â€ ä¸¤ç§æ–¹å¼ã€‚
æˆ–ç­¾(ä¹Ÿæœ‰å«&#34;ç«ç­¾&#34;ã€â€œä¸²ç­¾â€)ï¼šæŒ‡åŒä¸€ä¸ªå®¡æ‰¹èŠ‚ç‚¹è®¾ç½®å¤šä¸ªäººï¼Œå¦‚ABCä¸‰äººï¼Œä¸‰äººä¼šåŒæ—¶æ”¶åˆ°å®¡æ‰¹ï¼Œåªè¦å…¶ä¸­ä»»æ„ä¸€äººå®¡æ‰¹å³å¯åˆ°ä¸‹ä¸€å®¡æ‰¹èŠ‚ç‚¹ï¼›
3.æ¡ä»¶æµç¨‹ æ ¹æ®ä¸åŒè§„åˆ™ï¼Œèµ°ä¸åŒæµç¨‹
å›¾ç‰‡
ä¾‹å¦‚æŠ¥é”€5000ä»¥ä¸‹ç›´å±é¢†å¯¼å®¡æ‰¹å°±è¡Œï¼Œ5000~10000éœ€è¦æ€»ç›‘å®¡æ‰¹ã€‚
4.æ··åˆæµç¨‹ å°±æ˜¯ä¸Šè¿°çš„æµç¨‹æ··åˆè¿ç”¨ï¼›
å›¾ç‰‡
ä¾‹å¦‚è¯·å‡çš„æ­£å¸¸æµç¨‹æ˜¯åˆ°ç›´å±é¢†å¯¼å®¡æ‰¹ï¼Œ3å¤©ä»¥ä¸Šéœ€è¦æ€»ç›‘å®¡æ‰¹ã€‚5å¤©ä»¥ä¸Šéœ€è¦æ€»è£å®¡æ‰¹ã€‚
å®¡æ‰¹åŠ¨ä½œğŸ™‹â€â™€ï¸ é€šè¿‡ï¼šÂ é€šè¿‡ç”³è¯·ï¼Œæµè½¬åˆ°ä¸‹ä¸€äººã€‚åŸå› é€‰å¡«ã€‚é©³å›ï¼šÂ é©³å›åˆ°å‘èµ·äººã€é©³å›åˆ°ä¸Šä¸€ç¯èŠ‚ã€é©³å›åˆ°ä¹‹å‰çš„æŸä¸€ç¯èŠ‚ä¿å­˜ï¼šÂ ä¿å­˜å½“å‰å¡«å†™çš„ä¿¡æ¯ã€‚è½¬äº¤ï¼šÂ è½¬äº¤ç»™æŸäººå®¡æ‰¹åŠ ç­¾ï¼šÂ å¤„ç†è€…å¯ä»¥åœ¨å®¡æ‰¹æ—¶ä¸´æ—¶å¢åŠ å®¡æ ¸äººå‘˜æŠ„é€ï¼šÂ æŠ„é€äººä¼šçŸ¥æ™“å®¡æ ¸è¿‡ç¨‹ï¼Œä½†ä¸è¿›è¡Œæ“ä½œ æ‰§è¡ŒåŠ¨ä½œğŸ‘©â€ğŸ“ ç”³è¯·ï¼šÂ é’ˆå¯¹å½“å‰ä¸šåŠ¡è¡¨å•ä¿¡æ¯å‘èµ·ç”³è¯·ï¼Œå¼€å§‹å®¡æ‰¹æµç¨‹çš„ä¼ é€’ã€‚åˆ†ä¸º2éƒ¨åˆ†ï¼šç”±ç”³è¯·æäº¤äººæ‰‹åŠ¨å‘èµ·ç”³è¯·ã€ç”±ç¨‹åºè‡ªåŠ¨åˆ¤æ–­æ»¡è¶³è§¦å‘è§„åˆ™çš„æ•°æ®è‡ªåŠ¨å‘èµ·ç”³è¯·ï¼›å¦å¤–è¿˜è¦æ³¨æ„çš„2ç‚¹ï¼šæ˜¯å¦å…è®¸æäº¤äººæ’¤é”€ï¼ˆæ˜¯ã€å¦ï¼‰ã€è®°å½•ç¼–è¾‘ï¼ˆä¸å¯ç¼–è¾‘ã€ç®¡ç†å‘˜å¯ç¼–è¾‘ã€ç®¡ç†å‘˜å’Œå®¡æ‰¹äººéƒ½å¯ç¼–è¾‘ ï¼‰ï¼›
é€šè¿‡ï¼šÂ å½“å‰æ­¥éª¤å¤„ç†é€šè¿‡ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥éª¤ï¼Œè‹¥ä¸ºæœ«æ­¥éª¤ï¼Œåˆ™æµç¨‹å¤„ç†å®Œæˆï¼›
é€€å›ï¼šÂ å°†æ­¥éª¤é€€å›è‡³ä¸Šä¸€æ­¥éª¤ï¼Œå³è¿”å›è‡³ä¸Šä¸€å¤„ç†äººå¤„ï¼Œè‹¥ä¸ºé¦–æ­¥éª¤ï¼Œåˆ™ä¸è¿›è¡Œé€€å›ï¼›
å¦å†³ï¼šÂ å°†æ­¥éª¤ç›´æ¥ç»“æŸï¼Œæ‰§è¡Œç»“æŸåŠ¨ä½œæ‹’ç»æ´»åŠ¨ï¼Œä¸å†è¿›è¡Œæ“ä½œï¼Œæˆ–è€…å›é€€è‡³ç¬¬ä¸€æ­¥éª¤ï¼›
æ’¤å›ï¼šÂ è‹¥å½“å‰æ­¥éª¤å·²å¤„ç†ï¼Œä¸‹ä¸€å¤„ç†äººæœªå¤„ç†çš„æƒ…å†µä¸‹å¯è¿›è¡Œæ’¤å›æ“ä½œã€‚
å›¾ç‰‡
èŠ‚ç‚¹çŠ¶æ€ğŸ•µï¸â€â™€ï¸ æäº¤äººï¼šÂ æœªæäº¤ã€å·²æäº¤ã€å¤„ç†ä¸­ã€å·²ç»“æŸã€‚
å¤„ç†äººï¼šÂ å¾…å¤„ç†ã€å·²å¤„ç†ã€‚
åˆ›å»ºä¸šåŠ¡å·¥å•ï¼šÂ æäº¤äººç™»å½•ç³»ç»Ÿä¹‹åï¼Œé€‰æ‹©æƒ³è¦å‘èµ·çš„ä¸šåŠ¡å·¥å•ï¼Œå¡«å†™ä¸šåŠ¡å·¥å•ã€‚å¡«å†™å®Œæˆå¯ä»¥é€‰æ‹©æäº¤æˆ–è€…ä¿å­˜ï¼›
æœªæäº¤ï¼šÂ åˆ—è¡¨ä¸­æ˜¾ç¤ºæ‰€æœ‰ä¿å­˜ä½†æœªæäº¤çš„ä¸šåŠ¡å·¥å•ï¼Œæœªæäº¤åˆ—è¡¨ä¸­çš„ä¸šåŠ¡å·¥å•éƒ½æ²¡æœ‰ä¸šåŠ¡å·¥å•ç¼–å·ï¼ˆå”¯ä¸€ï¼‰ï¼ŒçŠ¶æ€ä¸ºâ€œæœªæäº¤â€ã€‚æäº¤äººå¯ä»¥é€‰æ‹©æŸä¸ªä¸šåŠ¡å·¥å•åèƒ½æ–¹ä¾¿å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€åˆ é™¤å’Œæäº¤ï¼›
å·²æäº¤ï¼šÂ åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å·²ç»æäº¤çš„ä¸šåŠ¡å·¥å•ï¼Œæœ‰ä¸šåŠ¡å·¥å•ç¼–å·ï¼Œå¹¶æ˜¾ç¤ºï¼ˆæœªå¤„ç†ï¼‰ã€‚æäº¤åçš„ä¸šåŠ¡å·¥å•è¿›å…¥å¤„ç†æµç¨‹ï¼Œæäº¤äººæ— æ³•è¿›è¡Œä¿®æ”¹å’Œåˆ é™¤ï¼›
å¤„ç†ä¸­ï¼šÂ åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰æäº¤å¹¶å·²ç»æœ‰èŠ‚ç‚¹å¤„ç†çš„ä¸šåŠ¡å·¥å•ï¼Œæäº¤äººå¯ä»¥æŸ¥è¯¢æŸä¸ªä¸šåŠ¡å·¥å•çš„å¤„ç†è¿›åº¦ï¼›
å·²ç»“æŸï¼šÂ åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å·²ç»å¤„ç†å®Œæˆçš„ä¸šåŠ¡å·¥å•ï¼›
å¾…å¤„ç†ï¼šÂ åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å¾…å¤„ç†ä¸šåŠ¡å·¥å•ï¼›
å·²å¤„ç†ï¼šÂ åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å½“å‰å¤„ç†äººå·²å¤„ç†çš„ä¸šåŠ¡å·¥å•ï¼Œæ—¢è¢«å½“å‰å¤„ç†äººæµè½¬åˆ°ä¸‹ä¸€ä¸ªæµç¨‹èŠ‚ç‚¹çš„ä¸šåŠ¡å·¥å•ï¼›
2UIé¢„è§ˆğŸ›¹ å›¾ç‰‡
å›¾ç‰‡">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-01T16:11:57+08:00">
    <meta property="article:modified_time" content="2024-04-01T16:11:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java ä¸ MySQL æ‰“é€ é«˜æ•ˆå®¡æ‰¹æµç¨‹</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1æµç¨‹æ€è·¯åˆ†æ</p> 
<h4><a id="_3"></a>å®¡æ‰¹æµç¨‹ğŸ±â€ğŸ’»</h4> 
<h6><a id="1_5"></a>1.ä¸²è¡Œæµç¨‹</h6> 
<p>å½“å‰èŠ‚ç‚¹å®¡æ‰¹å®Œæˆåï¼Œä¸‹ä¸€æ¬¡èŠ‚ç‚¹æ‰èƒ½è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ç»ç†é€šè¿‡ä¹‹åï¼Œæ€»ç›‘æ‰èƒ½å®¡æ‰¹ï¼›</p> 
<p><img src="https://images2.imgbox.com/2d/4a/ONcRIADt_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<h6><a id="2_13"></a>2.å¹¶è¡Œæµç¨‹</h6> 
<p>ä¸€ä¸ªå®¡æ‰¹èŠ‚ç‚¹éœ€è¦å¤šäººè”å®¡ã€‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼šä¼šç­¾ã€æˆ–ç­¾ï¼›</p> 
<p><img src="https://images2.imgbox.com/7e/69/HwloWDBo_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p><strong>ä¼šç­¾ï¼š</strong></p> 
<p>æ³¨æ„ï¼šåˆ«è·Ÿä¸²è¡Œå®¡æ‰¹æ··æ·†ã€‚ä¼šç­¾çš„å¤šä¸ªè§’è‰²æ˜¯å¹³è¡Œçš„ï¼Œæ²¡æœ‰ä¸Šä¸‹çº§å…³ç³»ã€å‰åé¡ºåºã€‚</p> 
<p>ä¾‹å¦‚ï¼šåœ¨æŸé¡¹æ–‡ä»¶ã€åˆåŒã€å†³ç­–æˆ–å…¶ä»–é‡è¦äº‹é¡¹ä¸Šï¼Œéœ€è¦å¤šä¸ªç›¸å…³äººå‘˜è¿›è¡Œç¡®è®¤ã€æ‰¹å‡†æˆ–ç­¾ç½²çš„æƒ…å†µä¸‹ï¼Œå‚ä¸è¯¥è¿‡ç¨‹çš„äººå‘˜åŒæ—¶æ‰¹å‡†ï¼Œè¿™æ—¶ä¼šç­¾å°±èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜æ•ˆç‡ï¼Œé¡ºä¾¿ä¹Ÿèƒ½è§£å†³äººæƒ…ä¸–æ•…çš„é—®é¢˜ï½ï½ã€‚</p> 
<p><strong>ä¼šç­¾æ”¯æŒå¹¶ç­¾ï¼š</strong></p> 
<p>ä¸šåŠ¡æ¨¡å¼æ”¯æŒï¼šâ€œå…¨éƒ¨æŠ•ç¥¨â€ã€â€œæŒ‰æŠ•ç¥¨æ¯”ä¾‹â€ã€â€œæŒ‰æŠ•ç¥¨é€šè¿‡æ¯”ä¾‹â€ã€æ”¯æŒè®¾ç½® â€œç™¾åˆ†æ¯”â€ å’Œ â€œåˆ†æ•°â€ ä¸¤ç§æ–¹å¼ã€‚</p> 
<p>æˆ–ç­¾(ä¹Ÿæœ‰å«"ç«ç­¾"ã€â€œä¸²ç­¾â€)ï¼šæŒ‡åŒä¸€ä¸ªå®¡æ‰¹èŠ‚ç‚¹è®¾ç½®å¤šä¸ªäººï¼Œå¦‚ABCä¸‰äººï¼Œä¸‰äººä¼šåŒæ—¶æ”¶åˆ°å®¡æ‰¹ï¼Œåªè¦å…¶ä¸­ä»»æ„ä¸€äººå®¡æ‰¹å³å¯åˆ°ä¸‹ä¸€å®¡æ‰¹èŠ‚ç‚¹ï¼›</p> 
<h6><a id="3_33"></a>3.æ¡ä»¶æµç¨‹</h6> 
<p>æ ¹æ®ä¸åŒè§„åˆ™ï¼Œèµ°ä¸åŒæµç¨‹</p> 
<p><img src="https://images2.imgbox.com/1d/70/tzACBRum_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p>ä¾‹å¦‚æŠ¥é”€5000ä»¥ä¸‹ç›´å±é¢†å¯¼å®¡æ‰¹å°±è¡Œï¼Œ5000~10000éœ€è¦æ€»ç›‘å®¡æ‰¹ã€‚</p> 
<h6><a id="4_43"></a>4.æ··åˆæµç¨‹</h6> 
<p>å°±æ˜¯ä¸Šè¿°çš„æµç¨‹æ··åˆè¿ç”¨ï¼›</p> 
<p><img src="https://images2.imgbox.com/42/bd/Rce4CjGN_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p>ä¾‹å¦‚è¯·å‡çš„æ­£å¸¸æµç¨‹æ˜¯åˆ°ç›´å±é¢†å¯¼å®¡æ‰¹ï¼Œ3å¤©ä»¥ä¸Šéœ€è¦æ€»ç›‘å®¡æ‰¹ã€‚5å¤©ä»¥ä¸Šéœ€è¦æ€»è£å®¡æ‰¹ã€‚</p> 
<h4><a id="_53"></a>å®¡æ‰¹åŠ¨ä½œğŸ™‹â€â™€ï¸</h4> 
<ol><li><strong>é€šè¿‡ï¼š</strong>Â é€šè¿‡ç”³è¯·ï¼Œæµè½¬åˆ°ä¸‹ä¸€äººã€‚åŸå› é€‰å¡«ã€‚</li><li><strong>é©³å›ï¼š</strong>Â é©³å›åˆ°å‘èµ·äººã€é©³å›åˆ°ä¸Šä¸€ç¯èŠ‚ã€é©³å›åˆ°ä¹‹å‰çš„æŸä¸€ç¯èŠ‚</li><li><strong>ä¿å­˜ï¼š</strong>Â ä¿å­˜å½“å‰å¡«å†™çš„ä¿¡æ¯ã€‚</li><li><strong>è½¬äº¤ï¼š</strong>Â è½¬äº¤ç»™æŸäººå®¡æ‰¹</li><li><strong>åŠ ç­¾ï¼š</strong>Â å¤„ç†è€…å¯ä»¥åœ¨å®¡æ‰¹æ—¶ä¸´æ—¶å¢åŠ å®¡æ ¸äººå‘˜</li><li><strong>æŠ„é€ï¼š</strong>Â æŠ„é€äººä¼šçŸ¥æ™“å®¡æ ¸è¿‡ç¨‹ï¼Œä½†ä¸è¿›è¡Œæ“ä½œ</li></ol> 
<h4><a id="_62"></a>æ‰§è¡ŒåŠ¨ä½œğŸ‘©â€ğŸ“</h4> 
<p><strong>ç”³è¯·ï¼š</strong>Â é’ˆå¯¹å½“å‰ä¸šåŠ¡è¡¨å•ä¿¡æ¯å‘èµ·ç”³è¯·ï¼Œå¼€å§‹å®¡æ‰¹æµç¨‹çš„ä¼ é€’ã€‚åˆ†ä¸º2éƒ¨åˆ†ï¼šç”±ç”³è¯·æäº¤äººæ‰‹åŠ¨å‘èµ·ç”³è¯·ã€ç”±ç¨‹åºè‡ªåŠ¨åˆ¤æ–­æ»¡è¶³è§¦å‘è§„åˆ™çš„æ•°æ®è‡ªåŠ¨å‘èµ·ç”³è¯·ï¼›å¦å¤–è¿˜è¦æ³¨æ„çš„2ç‚¹ï¼šæ˜¯å¦å…è®¸æäº¤äººæ’¤é”€ï¼ˆæ˜¯ã€å¦ï¼‰ã€è®°å½•ç¼–è¾‘ï¼ˆä¸å¯ç¼–è¾‘ã€ç®¡ç†å‘˜å¯ç¼–è¾‘ã€ç®¡ç†å‘˜å’Œå®¡æ‰¹äººéƒ½å¯ç¼–è¾‘ ï¼‰ï¼›</p> 
<p><strong>é€šè¿‡ï¼š</strong>Â å½“å‰æ­¥éª¤å¤„ç†é€šè¿‡ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥éª¤ï¼Œè‹¥ä¸ºæœ«æ­¥éª¤ï¼Œåˆ™æµç¨‹å¤„ç†å®Œæˆï¼›</p> 
<p><strong>é€€å›ï¼š</strong>Â å°†æ­¥éª¤é€€å›è‡³ä¸Šä¸€æ­¥éª¤ï¼Œå³è¿”å›è‡³ä¸Šä¸€å¤„ç†äººå¤„ï¼Œè‹¥ä¸ºé¦–æ­¥éª¤ï¼Œåˆ™ä¸è¿›è¡Œé€€å›ï¼›</p> 
<p><strong>å¦å†³ï¼š</strong>Â å°†æ­¥éª¤ç›´æ¥ç»“æŸï¼Œæ‰§è¡Œç»“æŸåŠ¨ä½œæ‹’ç»æ´»åŠ¨ï¼Œä¸å†è¿›è¡Œæ“ä½œï¼Œæˆ–è€…å›é€€è‡³ç¬¬ä¸€æ­¥éª¤ï¼›</p> 
<p><strong>æ’¤å›ï¼š</strong>Â è‹¥å½“å‰æ­¥éª¤å·²å¤„ç†ï¼Œä¸‹ä¸€å¤„ç†äººæœªå¤„ç†çš„æƒ…å†µä¸‹å¯è¿›è¡Œæ’¤å›æ“ä½œã€‚</p> 
<p><img src="https://images2.imgbox.com/92/9c/6vRvdMmu_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<h4><a id="_78"></a>èŠ‚ç‚¹çŠ¶æ€ğŸ•µï¸â€â™€ï¸</h4> 
<p><strong>æäº¤äººï¼š</strong>Â æœªæäº¤ã€å·²æäº¤ã€å¤„ç†ä¸­ã€å·²ç»“æŸã€‚</p> 
<p><strong>å¤„ç†äººï¼š</strong>Â å¾…å¤„ç†ã€å·²å¤„ç†ã€‚</p> 
<p><strong>åˆ›å»ºä¸šåŠ¡å·¥å•ï¼š</strong>Â æäº¤äººç™»å½•ç³»ç»Ÿä¹‹åï¼Œé€‰æ‹©æƒ³è¦å‘èµ·çš„ä¸šåŠ¡å·¥å•ï¼Œå¡«å†™ä¸šåŠ¡å·¥å•ã€‚å¡«å†™å®Œæˆå¯ä»¥é€‰æ‹©æäº¤æˆ–è€…ä¿å­˜ï¼›</p> 
<p><strong>æœªæäº¤ï¼š</strong>Â åˆ—è¡¨ä¸­æ˜¾ç¤ºæ‰€æœ‰ä¿å­˜ä½†æœªæäº¤çš„ä¸šåŠ¡å·¥å•ï¼Œæœªæäº¤åˆ—è¡¨ä¸­çš„ä¸šåŠ¡å·¥å•éƒ½æ²¡æœ‰ä¸šåŠ¡å·¥å•ç¼–å·ï¼ˆå”¯ä¸€ï¼‰ï¼ŒçŠ¶æ€ä¸ºâ€œæœªæäº¤â€ã€‚æäº¤äººå¯ä»¥é€‰æ‹©æŸä¸ªä¸šåŠ¡å·¥å•åèƒ½æ–¹ä¾¿å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€åˆ é™¤å’Œæäº¤ï¼›</p> 
<p><strong>å·²æäº¤ï¼š</strong>Â åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å·²ç»æäº¤çš„ä¸šåŠ¡å·¥å•ï¼Œæœ‰ä¸šåŠ¡å·¥å•ç¼–å·ï¼Œå¹¶æ˜¾ç¤ºï¼ˆæœªå¤„ç†ï¼‰ã€‚æäº¤åçš„ä¸šåŠ¡å·¥å•è¿›å…¥å¤„ç†æµç¨‹ï¼Œæäº¤äººæ— æ³•è¿›è¡Œä¿®æ”¹å’Œåˆ é™¤ï¼›</p> 
<p><strong>å¤„ç†ä¸­ï¼š</strong>Â åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰æäº¤å¹¶å·²ç»æœ‰èŠ‚ç‚¹å¤„ç†çš„ä¸šåŠ¡å·¥å•ï¼Œæäº¤äººå¯ä»¥æŸ¥è¯¢æŸä¸ªä¸šåŠ¡å·¥å•çš„å¤„ç†è¿›åº¦ï¼›</p> 
<p><strong>å·²ç»“æŸï¼š</strong>Â åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å·²ç»å¤„ç†å®Œæˆçš„ä¸šåŠ¡å·¥å•ï¼›</p> 
<p><strong>å¾…å¤„ç†ï¼š</strong>Â åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å¾…å¤„ç†ä¸šåŠ¡å·¥å•ï¼›</p> 
<p><strong>å·²å¤„ç†ï¼š</strong>Â åˆ—è¡¨æ˜¾ç¤ºæ‰€æœ‰å½“å‰å¤„ç†äººå·²å¤„ç†çš„ä¸šåŠ¡å·¥å•ï¼Œæ—¢è¢«å½“å‰å¤„ç†äººæµè½¬åˆ°ä¸‹ä¸€ä¸ªæµç¨‹èŠ‚ç‚¹çš„ä¸šåŠ¡å·¥å•ï¼›</p> 
<h3><a id="2UI_98"></a>2UIé¢„è§ˆğŸ›¹</h3> 
<p><img src="https://images2.imgbox.com/f8/64/HTnxDFuU_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p><img src="https://images2.imgbox.com/2c/f3/tjaDPF0R_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p><img src="https://images2.imgbox.com/15/ce/WTJFcxQ6_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p><img src="https://images2.imgbox.com/41/58/R8N1dKmn_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<p><img src="https://images2.imgbox.com/2b/8e/CU1degW1_o.png" alt=""></p> 
<p>å›¾ç‰‡</p> 
<h3><a id="3_120"></a>3è¡¨è®¾è®¡ğŸš§</h3> 
<h4><a id="_122"></a>æµç¨‹é…ç½®è¡¨ğŸš—</h4> 
<pre><code>CREATEÂ TABLEÂ `approval_config`Â (
Â Â `approval_config_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'é›ªèŠ±ç®—æ³•',
Â Â `corp_id`Â varchar(100)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'ä¼ä¸šID',
Â Â `node_name`Â varchar(100)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'èŠ‚ç‚¹åç§°',
Â Â `form_id`Â varchar(50)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'è¡¨å•IDÂ å±äºé‚£ä¸ªè¡¨å•çš„æµç¨‹',
Â Â `approval_auto_pass`Â tinyint(1)Â DEFAULTÂ '0'Â COMMENTÂ 'å®¡æ‰¹èŠ‚ç‚¹äººå‘˜ç›¸åŒæ—¶è‡ªåŠ¨é€šè¿‡[1ï¼štrueï¼›0ï¼šfalse]',
Â Â `current_node_approver_type`Â tinyintÂ DEFAULTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹äººç±»å‹[1:å‘èµ·äººè‡ªå·±ï¼›2:æŒ‡å®šè§’è‰²ï¼›3:æŒ‡å®šäººå‘˜ï¼›4:è¡¨å•å†…äººå‘˜]ï¼›æ³¨ï¼š1/3/4å­˜useridã€2å­˜roleId',
Â Â `current_node_approver`Â varchar(255)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'å¾…å®¡æ‰¹äººå¦‚æœæ˜¯è§’è‰²å°±æ˜¯è§’è‰²IDï¼Œå¦‚æœæ˜¯å…¶ä»–åˆ™æ˜¯userIdæ ¼å¼ï¼š[xxx,xxx]',
Â Â `care_of`Â tinyint(1)Â DEFAULTÂ NULLÂ COMMENTÂ 'å…è®¸å®¡æ‰¹äººè½¬äº¤[1ï¼štrue;2ï¼šfalse]',
Â Â `approval_type`Â tinyintÂ DEFAULTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹ç±»å‹[1:ä¼šç­¾ï¼š2ï¼šæˆ–ç­¾]',
Â Â `approval_node`Â intÂ DEFAULTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹èŠ‚ç‚¹[å–å€¼ï¼š1~N ä»å°åˆ°å¤§ï¼›0ï¼šå‘èµ·èŠ‚ç‚¹Â ã€1ï¼šæ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€ 2ï¼šç¬¬äºŒä¸ªèŠ‚ç‚¹ Nï¼šæ˜¯ç¬¬Nä¸ªèŠ‚ç‚¹ï¼›æœ€å¤§çš„æ˜¯ç»“æŸèŠ‚ç‚¹]',
Â Â `carbon_copy_recipients_type`Â tinyintÂ DEFAULTÂ '1'Â COMMENTÂ 'æŠ„é€äººç±»å‹[1:å‘èµ·äººè‡ªå·±ï¼›2:æŒ‡å®šè§’è‰²ï¼›3:æŒ‡å®šäººå‘˜ï¼›4:è¡¨å•å†…äººå‘˜]',
Â Â `carbon_copy_recipients`Â varchar(255)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'æŠ„é€äººuserIdÂ æ•°ç»„æ ¼å¼',
Â Â `create_time`Â datetimeÂ DEFAULTÂ NULLÂ COMMENTÂ 'è§„åˆ™åˆ›å»ºæ—¶é—´ï¼›é»˜è®¤æ‹¿æœ€æ–°çš„',
Â Â `group_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'åˆ†ç»„[æ ‡è¯†é‚£äº›èŠ‚ç‚¹æ˜¯åŒä¸€ä¸ªç»„çš„]',
Â Â `visible_fields`Â jsonÂ DEFAULTÂ NULLÂ COMMENTÂ 'å¯è§å­—æ®µï¼š[{"bt": false, "kj": true, "kx": true, "field":Â "create_time", "children":Â "purchase_requisition_details"}];\r\nkj:å¯è§ï¼›kx:å¯å†™ï¼›kb:å¿…å¡«ã€‚å¦‚æœæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±éœ€è¦å•ç‹¬æ‹‰ä¸€ä¸ªé…ç½®',
Â Â PRIMARYÂ KEYÂ (`approval_config_id`)
)Â ENGINE=InnoDBÂ DEFAULTÂ CHARSET=utf8mb4Â COLLATE=utf8mb4_general_ciÂ COMMENT='å®¡æ‰¹æµç¨‹èŠ‚ç‚¹è§„åˆ™é…ç½®è¡¨';
</code></pre> 
<h4><a id="_145"></a>å®¡æ‰¹æµç¨‹å‘èµ·è¡¨ğŸš“</h4> 
<pre><code>CREATEÂ TABLEÂ `approval_info`Â (
Â Â `approval_info_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'é›ªèŠ±ç®—æ³•',
Â Â `corp_id`Â varchar(50)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'ä¼ä¸šID',
Â Â `approval_config_group_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'è§„åˆ™è¡¨çš„groupID',
Â Â `form_id`Â varchar(50)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'è¡¨å•IDÂ å±äºé‚£ä¸ªè¡¨å•',
Â Â `founder`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'å‘èµ·äºº',
Â Â `launch_time`Â datetimeÂ NOTÂ NULLÂ COMMENTÂ 'å‘èµ·æ—¶é—´',
Â Â `end_state`Â tinyint(1)Â DEFAULTÂ '0'Â COMMENTÂ 'æ˜¯å¦ç»“æŸæµç¨‹[1æ˜¯]',
Â Â `end_time`Â datetimeÂ DEFAULTÂ NULLÂ COMMENTÂ 'æµç¨‹ç»“æŸæ—¶é—´',
Â Â `object_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'å…³è”æŸæ¡æ•°æ®',
Â Â `process_progress`Â intÂ DEFAULTÂ '0'Â COMMENTÂ 'ç”¨æ¥è®°å½•æ•´ä¸ªæµç¨‹è¿›è¡Œåˆ°é‚£ä¸ªèŠ‚ç‚¹',
Â Â `record_node_history`Â varchar(255)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'è®°å½•å†å²ç»å†èŠ‚ç‚¹,è‹±æ–‡é€—å·åˆ†éš”0,1,2,1,2,3Â æœ€åä¸€ä¸ªå€¼å’Œå½“å‰èŠ‚ç‚¹åŒæ­¥',
Â Â PRIMARYÂ KEYÂ (`approval_info_id`)
)Â ENGINE=InnoDBÂ DEFAULTÂ CHARSET=utf8mb4Â COLLATE=utf8mb4_general_ciÂ COMMENT='å®¡æ‰¹æµç¨‹å‘èµ·è¡¨';
</code></pre> 
<h4><a id="_164"></a>å®¡æ‰¹è®°å½•è¡¨ğŸš•</h4> 
<pre><code>CREATEÂ TABLEÂ `approval_record`Â (
Â Â `approval_record_id`Â varchar(50)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'é›ªèŠ±ç®—æ³•',
Â Â `corp_id`Â varchar(50)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'ä¼ä¸šID',
Â Â `approval_info_id`Â varchar(50)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹å‘èµ·è¡¨approval_info',
Â Â `form_id`Â varchar(50)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'è¡¨å•IDÂ å±äºé‚£ä¸ªè¡¨å•çš„æµç¨‹',
Â Â `approver_user_id`Â varchar(50)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹äººorÂ è½¬äº¤äººÂ userId',
Â Â `approver_time`Â datetimeÂ NOTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹æ—¶é—´',
Â Â `approver_opinions`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹æ„è§',
Â Â `approver_result`Â tinyintÂ NOTÂ NULLÂ COMMENTÂ 'å®¡æ‰¹ç»“æœ[1:åŒæ„ï¼›2:æ‹’ç»ï¼š3:è½¬äº¤]',
Â Â `transferee`Â varchar(50)Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'è¢«è½¬äº¤äººuserIdï¼›approver_result=3æ—¶å¿…å¡«',
Â Â `transferee_text`Â varchar(255)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'è½¬äº¤å¤‡æ³¨(æ­¤å­—æ®µæš‚æ—¶æ— ç”¨)',
Â Â `accessory_url`Â varchar(255)Â CHARACTERÂ SETÂ utf8mb4Â COLLATEÂ utf8mb4_general_ciÂ DEFAULTÂ NULLÂ COMMENTÂ 'é™„ä»¶æ•°ç»„',
Â Â `approver_node`Â tinyintÂ NOTÂ NULLÂ COMMENTÂ 'å±äºä¸ªèŠ‚ç‚¹çš„å®¡æ‰¹è®°å½•',
Â Â `approver_count`Â tinyintÂ DEFAULTÂ '1'Â COMMENTÂ 'å®¡æ‰¹æ¬¡æ•°é»˜è®¤1;Â ä¾‹ï¼šå½“èŠ‚ç‚¹Bæ˜¯ä¼šç­¾,ä¸”æœ‰äººåŒæ„,æœ‰äººæ‹’ç»ï¼Œå½“æ‹’ç»åä¼šè¿”å›ä¸Šä¸€ä¸ªèŠ‚ç‚¹Aã€‚å½“å†æ¬¡è¿›å…¥èŠ‚ç‚¹Bæ—¶ï¼Œç”¨æ¥åŒºåˆ†,æ­¤å®¡æ‰¹è®°å½•æ˜¯ç¬¬ä¸€æ¬¡è®°å½•è¿˜æ˜¯ç¬¬äºŒæ¬¡å®¡æ‰¹è®°å½•æˆ–è€…ç¬¬Næ¬¡',
Â Â PRIMARYÂ KEYÂ (`approval_record_id`)
)Â ENGINE=InnoDBÂ DEFAULTÂ CHARSET=utf8mb4Â COLLATE=utf8mb4_general_ciÂ COMMENT='å®¡æ‰¹è®°å½•è¡¨';
</code></pre> 
<h4><a id="_185"></a>æŠ„é€è®°å½•è¡¨ğŸ›º</h4> 
<pre><code>CREATEÂ TABLEÂ `approval_carbon_copy`Â (
Â Â `carbon_copy_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'é›ªèŠ±',
Â Â `corp_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'ä¼ä¸šID',
Â Â `form_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'å±äºé‚£ä¸ªè¡¨å•',
Â Â `approval_info_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'æ¨é€é‚£æ¡å®¡æ‰¹çš„ID',
Â Â `user_id`Â varchar(255)Â COLLATEÂ utf8mb4_general_ciÂ NOTÂ NULLÂ COMMENTÂ 'æ¥æ”¶æŠ„é€äºº',
Â Â `create_time`Â datetimeÂ NOTÂ NULLÂ COMMENTÂ 'æŠ„é€æ—¶é—´',
Â Â `read`Â tinyint(1)Â NOTÂ NULLÂ DEFAULTÂ '0'Â COMMENTÂ 'æ˜¯å¦å·²è¯»[1:å·²è¯»ï¼›0:æœªè¯»]',
Â Â `approval_node`Â tinyintÂ NOTÂ NULLÂ COMMENTÂ 'é‚£ä¸ªèŠ‚ç‚¹æŠ„é€çš„',
Â Â PRIMARYÂ KEYÂ (`carbon_copy_id`)
)Â ENGINE=InnoDBÂ DEFAULTÂ CHARSET=utf8mb4Â COLLATE=utf8mb4_general_ciÂ COMMENT='å®¡æ‰¹æŠ„é€è®°å½•è¡¨';
</code></pre> 
<h3><a id="4_201"></a>4æ€è·¯ğŸ‘©â€ğŸ“ğŸ‘©â€ğŸ“</h3> 
<h4><a id="_203"></a>æµç¨‹é…ç½®</h4> 
<p>1.é€šè¿‡æµç¨‹èŠ‚ç‚¹è§„åˆ™é…ç½®è¡¨ï¼Œé…ç½®æ¯ä¸ªèŠ‚ç‚¹çš„å®¡æ‰¹äººã€æŠ„é€äººã€å®¡æ‰¹è§„åˆ™ã€å¯è§ã€å¯å†™ã€å¿…å¡«å­—æ®µçš„è§„åˆ™ç­‰(å¯ä»¥ç»™ä¸åŒçš„è¡¨å•é…ç½®ä¸åŒçš„å®¡æ‰¹è§„åˆ™)ã€‚</p> 
<p>2.é…ç½®å®Œæ¯•å³å¯ï¼Œæ¯æ¬¡æ–°å¢æ•°æ®ï¼Œè¯»å–æµç¨‹è§„åˆ™é…ç½®è¡¨ï¼Œç”Ÿæˆä¸€æ¡å®¡æ‰¹æµç¨‹å‘èµ·è®°å½•ï¼Œè®°å½•å‘èµ·äººï¼Œå‘èµ·æ—¶é—´ï¼Œå…³è”æŸæ¡æµç¨‹è§„åˆ™(æ—§æ•°æ®è¿˜æ˜¯ä½¿ç”¨æ—§æµç¨‹)ï¼Œæµç¨‹å½“å‰èŠ‚ç‚¹ç­‰ã€‚</p> 
<p>3.æ¯ä¸ªèŠ‚ç‚¹çš„å®¡æ‰¹äººã€æŠ„é€äººã€å¯è§ã€å¯å†™ã€å¿…å¡«å­—æ®µéƒ½æ˜¯æ ¹æ®æµç¨‹è§„åˆ™é…ç½®è¡¨ä¸­åŠ¨æ€é…ç½®ã€‚</p> 
<h3><a id="5_211"></a>5ä»£ç ğŸ¥‡</h3> 
<h4><a id="_213"></a>å®¡æ‰¹æŒ‰é’®</h4> 
<pre><code>@Transactional(rollbackForÂ =Â Exception.class)
publicÂ ResultUtilsÂ approval(StringÂ token,Â ApprovalDTOÂ param)Â {
Â Â Â Â StringÂ corpIdÂ =Â TokenUtils.getCorpId(token);
Â Â Â Â StringÂ userIdÂ =Â TokenUtils.getUserId(token);
Â Â Â Â LocalDateTimeÂ timeÂ =Â LocalDateTime.now();

Â Â Â Â //Â æ‰¾åˆ°å½“å‰æ•°æ®å¾…å®¡æ‰¹èŠ‚ç‚¹,æ˜¯å¦éœ€è¦è‡ªå·±å®¡æ‰¹,æˆ–è€…å·²ç»å®¡æ‰¹è¿‡
Â Â Â Â ApprovalInfoÂ infoÂ =Â approvalInfoMapper.selectOne(newÂ QueryWrapper&lt;ApprovalInfo&gt;().eq("corp_id",Â corpId).eq("object_id",Â param.getObjectId())
Â Â Â Â Â Â Â Â Â Â Â Â .eq("form_id",Â param.getFormId()).select("approval_info_id",Â "process_progress",Â "record_node_history",Â "end_state",
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "approval_config_group_id","founder"));
Â Â Â Â Assert.isFalse(info.getEndState(),Â ErrorMsg.msg18);
Â Â Â Â IntegerÂ currentNodeÂ =Â info.getProcessProgress();//Â å½“å‰èŠ‚ç‚¹

Â Â Â Â //Â æ¯ä¸ªèŠ‚ç‚¹çš„å®¡æ‰¹è®¾ç½®
Â Â Â Â List&lt;ApprovalConfig&gt;Â approvalConfigsÂ =Â approvalConfigMapper.selectList(newÂ QueryWrapper&lt;ApprovalConfig&gt;().eq("corp_id",Â corpId)
Â Â Â Â Â Â Â Â Â Â Â Â .eq("group_id",Â info.getApprovalConfigGroupId())
Â Â Â Â Â Â Â Â Â Â Â Â .eq("form_id",Â param.getFormId()).select("approval_auto_pass",Â "current_node_approver_type",Â "visible_fields",
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "current_node_approver",Â "care_of",Â "approval_type",Â "approval_node",Â "carbon_copy_recipients_type",Â "carbon_copy_recipients"));

Â Â Â Â Map&lt;Integer,Â ApprovalConfig&gt;Â configMapÂ =Â approvalConfigs.stream().collect(Collectors.toMap(ApprovalConfig::getApprovalNode,Â ApprovalConfigÂ -&gt;Â ApprovalConfig));
Â Â Â Â ApprovalConfigÂ configÂ =Â configMap.get(info.getProcessProgress());

Â Â Â Â List&lt;String&gt;Â historyNodeÂ =Â Lists.newArrayList(info.getRecordNodeHistory().split(","));
Â Â Â Â //Â å†å²èŠ‚ç‚¹éœ€è¦å‰”é™¤æœ€åä¸€ä¸ª
Â Â Â Â historyNode.remove(historyNode.size()Â -Â 1);
Â Â Â Â BagÂ bagÂ =Â newÂ HashBag(historyNode);
Â Â Â Â intÂ countÂ =Â bag.getCount(currentNode.toString());//Â è¿™ä¸ªèŠ‚ç‚¹å†å²æ˜¯å¦å‡ºç°è¿‡
Â Â Â Â countÂ =Â countÂ ==Â 0Â ?Â 1Â :Â (countÂ +Â 1);Â //Â ç”¨äºæ ‡æ³¨è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦å¤šæ¬¡å®¡æ‰¹

Â Â Â Â ifÂ (param.getType()Â ==Â 3)Â {
Â Â Â Â Â Â Â Â //Â è½¬äº¤
Â Â Â Â Â Â Â Â ApprovalRecordÂ recordÂ =Â newÂ ApprovalRecord();
Â Â Â Â Â Â Â Â record.setApprovalRecordId(SnowFlakeUtil.getDefaultSnowFlakeId()Â +Â "");
Â Â Â Â Â Â Â Â record.setCorpId(corpId);
Â Â Â Â Â Â Â Â record.setApprovalInfoId(info.getApprovalInfoId());
Â Â Â Â Â Â Â Â record.setFormId(param.getFormId());
Â Â Â Â Â Â Â Â record.setApproverUserId(userId);
Â Â Â Â Â Â Â Â record.setApproverTime(time);
Â Â Â Â Â Â Â Â record.setApproverOpinions(param.getMessage());
Â Â Â Â Â Â Â Â record.setApproverResult(param.getType());
Â Â Â Â Â Â Â Â record.setTransferee(param.getTransfereeUserId());
Â Â Â Â Â Â Â Â ifÂ (ObjectUtil.isNotEmpty(param.getAccessoryUrl()))Â {
Â Â Â Â Â Â Â Â Â Â Â Â record.setAccessoryUrl(JSONUtil.toJsonStr(param.getAccessoryUrl()));
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â record.setApproverNode(info.getProcessProgress().byteValue());
Â Â Â Â Â Â Â Â record.setApproverCount(newÂ Byte(countÂ +Â ""));
Â Â Â Â Â Â Â Â approvalRecordMapper.insertSelective(record);
Â Â Â Â Â Â Â Â returnÂ ResultUtils.success();
Â Â Â Â }

Â Â Â Â ApprovalRecordÂ recordsÂ =Â approvalRecordMapper.selectOne(newÂ QueryWrapper&lt;ApprovalRecord&gt;()
Â Â Â Â Â Â Â Â Â Â Â Â .eq("corp_id",Â corpId).eq("form_id",Â param.getFormId())
Â Â Â Â Â Â Â Â Â Â Â Â .eq("approver_user_id",Â userId).eq("approval_info_id",Â info.getApprovalInfoId())
Â Â Â Â Â Â Â Â Â Â Â Â .eq("approver_node",Â currentNode).eq("approver_count",Â count));
Â Â Â Â Assert.isFalse(ObjectUtil.isNotEmpty(records)Â &amp;&amp;Â StrUtil.isNotBlank(records.getTransferee()),Â ErrorMsg.msg29);

Â Â Â Â Assert.isFalse(ObjectUtil.isNotEmpty(records),Â ErrorMsg.msg16);
Â Â Â Â //Â æŸ¥è¯¢æ˜¯å¦æ˜¯è¢«è½¬äº¤äºº
Â Â Â Â List&lt;String&gt;Â transfereesÂ =Â approvalRecordMapper.findTransferee(corpId,Â param.getFormId(),Â info.getApprovalInfoId(),Â currentNode,Â count);
Â Â Â Â ifÂ (CollUtil.isEmpty(transferees))Â {
Â Â Â Â Â Â Â Â //Â 1.æ˜¯å¦éœ€è¦è‡ªå·±å®¡æ‰¹
Â Â Â Â Â Â Â Â ifÂ (config.getCurrentNodeApproverType()Â ==Â 2)Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šè§’è‰²
Â Â Â Â Â Â Â Â Â Â Â Â //Â æŸ¥è¯¢è‡ªå·±æ‹¥æœ‰é‚£äº›è§’è‰²
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;UserRole&gt;Â userRolesÂ =Â userRoleMapper.selectList(newÂ QueryWrapper&lt;UserRole&gt;().eq("user_id",Â userId).eq("corp_id",Â corpId)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .select("role_id"));
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;String&gt;Â roleIdsÂ =Â userRoles.stream().map(keyÂ -&gt;Â key.getRoleId()).collect(Collectors.toList());
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;Integer&gt;Â currentNodeApproverRoleIdÂ =Â JSONUtil.toList(config.getCurrentNodeApprover().toString(),Â Integer.class);
Â Â Â Â Â Â Â Â Â Â Â Â ArrayList&lt;String&gt;Â integersÂ =Â newÂ ArrayList&lt;&gt;(roleIds);
Â Â Â Â Â Â Â Â Â Â Â Â booleanÂ bÂ =Â integers.retainAll(currentNodeApproverRoleId);//Â å­˜åœ¨äº¤é›†åˆ™è¿”å›true
Â Â Â Â Â Â Â Â Â Â Â Â Assert.isFalse(!b,Â ErrorMsg.msg17);
Â Â Â Â Â Â Â Â }Â elseÂ ifÂ (config.getCurrentNodeApproverType()==3){
Â Â Â Â Â Â Â Â Â Â Â Â //Â æŒ‡å®šäººå‘˜Â ç”¨æˆ·ID
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;String&gt;Â currentNodeApproverUserIdÂ =Â JSONUtil.toList(config.getCurrentNodeApprover().toString(),Â String.class);
Â Â Â Â Â Â Â Â Â Â Â Â booleanÂ containsÂ =Â currentNodeApproverUserId.contains(userId);
Â Â Â Â Â Â Â Â Â Â Â Â Assert.isFalse(!contains,Â ErrorMsg.msg17);
Â Â Â Â Â Â Â Â }Â elseÂ ifÂ (config.getCurrentNodeApproverType()Â ==Â 1)Â {
Â Â Â Â Â Â Â Â Â Â Â //Â å‘èµ·äººè‡ªå·±
Â Â Â Â Â Â Â Â Â Â Â Â Assert.isFalse(!info.getFounder().equals(userId),Â ErrorMsg.msg17);
Â Â Â Â Â Â Â Â }
Â Â Â Â }
Â Â Â Â ifÂ (param.getType()Â ==Â 2)Â {
Â Â Â Â Â Â Â Â //Â æ‹’ç»
Â Â Â Â Â Â Â Â approvalRefuse(info,Â approvalConfigs,Â param,Â userId,Â corpId,Â count,Â time);
Â Â Â Â Â Â Â Â returnÂ ResultUtils.success();
Â Â Â Â }

Â Â Â Â //Â åˆ¤æ–­äº†éœ€è¦è‡ªå·±å®¡æ‰¹ä¹‹å,å…ˆç¼–è¾‘æ•°æ®,ç„¶ååœ¨è¿›è¡Œå®¡æ‰¹æ“ä½œ
Â Â Â Â JSONObjectÂ paramDataÂ =Â param.getMainData();
Â Â Â Â approvalEditData(corpId,Â paramData,Â time,Â userId,Â param.getFormId());

Â Â Â Â //Â è¿›è¡Œå®¡æ‰¹æ“ä½œ
Â Â Â Â ifÂ (param.getType()Â ==Â 1)Â {
Â Â Â Â Â Â Â Â //Â åŒæ„
Â Â Â Â Â Â Â Â approvalAgreeing(currentNode,Â info,Â configMap,Â param,Â userId,Â corpId,Â time,Â param.getObjectId());
Â Â Â Â }
Â Â Â Â returnÂ ResultUtils.success();
}
</code></pre> 
<h4><a id="_316"></a>å®¡æ‰¹æŒ‰é’®-æ‹’ç»</h4> 
<pre><code>/**
Â *Â å®¡æ‰¹æŒ‰é’®-æ‹’ç»
Â *
Â *Â @paramÂ infoÂ Â Â Â Â Â Â Â Â Â Â Â å½“å‰æ•°æ®çš„å®¡æ‰¹è¯¦æƒ…
Â *Â @paramÂ approvalConfigsÂ å®¡æ‰¹è§„åˆ™
Â *Â @paramÂ paramÂ Â Â Â Â Â Â Â Â Â Â å‚æ•°
Â *Â @paramÂ userIdÂ Â Â Â Â Â Â Â Â Â å½“å‰å®¡æ‰¹äººid
Â *Â @paramÂ corpIdÂ Â Â Â Â Â Â Â Â Â ä¼ä¸šid
Â *Â @paramÂ countÂ Â Â Â Â Â Â Â Â Â Â å®¡æ‰¹æ¬¡æ•°
Â */
privateÂ voidÂ approvalRefuse(ApprovalInfoÂ info,Â List&lt;ApprovalConfig&gt;Â approvalConfigs,Â ApprovalDTOÂ param,Â StringÂ userId,Â StringÂ corpId,Â intÂ count,Â LocalDateTimeÂ time)Â {
Â Â Â Â //Â ç”Ÿæˆå®¡æ‰¹è®°å½•
Â Â Â Â ApprovalRecordÂ recordÂ =Â newÂ ApprovalRecord();
Â Â Â Â record.setApprovalRecordId(SnowFlakeUtil.getDefaultSnowFlakeId()Â +Â "");
Â Â Â Â record.setCorpId(corpId);
Â Â Â Â record.setApprovalInfoId(info.getApprovalInfoId());
Â Â Â Â record.setFormId(param.getFormId());
Â Â Â Â record.setApproverUserId(userId);
Â Â Â Â record.setApproverTime(time);
Â Â Â Â record.setApproverOpinions(param.getMessage());
Â Â Â Â record.setApproverResult(param.getType());
Â Â Â Â ifÂ (ObjectUtil.isNotEmpty(param.getAccessoryUrl()))Â {
Â Â Â Â Â Â Â Â record.setAccessoryUrl(JSONUtil.toJsonStr(param.getAccessoryUrl()));
Â Â Â Â }
Â Â Â Â record.setApproverNode(info.getProcessProgress().byteValue());
Â Â Â Â record.setApproverCount(newÂ Byte(countÂ +Â ""));
Â Â Â Â approvalRecordMapper.insertSelective(record);

Â Â Â Â //Â å›æ»šä¸Šä¸€ä¸ªèŠ‚ç‚¹
Â Â Â Â info.setProcessProgress(info.getProcessProgress()Â -Â 1);
Â Â Â Â info.setRecordNodeHistory(info.getRecordNodeHistory()Â +Â ","Â +Â info.getProcessProgress());
Â Â Â Â //Â info.setCurrentState(1);
Â Â Â Â approvalInfoMapper.updateByPrimaryKeySelective(info);

Â Â Â Â ifÂ (info.getProcessProgress()Â ==Â 0)Â {
Â Â Â Â Â Â Â Â //Â å¦‚æœå›åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹,æ•°æ®çŠ¶æ€åˆ™å˜æˆåˆå§‹
Â Â Â Â Â Â Â Â StringÂ formCodeÂ =Â fromConfigMapper.findFormCode(corpId,Â param.getFormId());
Â Â Â Â Â Â Â Â commonMapper.updateDataState(formCode,Â 0,Â param.getObjectId(),Â corpId);


Â Â Â Â }
}
</code></pre> 
<h4><a id="_363"></a>å®¡æ‰¹æŒ‰é’®-åŒæ„</h4> 
<pre><code>/**
Â *Â å®¡æ‰¹æŒ‰é’®-åŒæ„
Â *
Â *Â @paramÂ currentNodeÂ å¤„ç†çš„å½“å‰èŠ‚ç‚¹
Â *Â @paramÂ infoÂ Â Â Â Â Â Â Â æµç¨‹è¯¦æƒ…
Â *Â @param configMap Â Â é…ç½®é›†åˆ key=èŠ‚ç‚¹ï¼›val=é…ç½®
Â *Â @paramÂ paramÂ Â Â Â Â Â Â å‚æ•°
Â *Â @paramÂ userIdÂ Â Â Â Â Â å½“å‰å®¡æ‰¹äººuserId
Â *Â @paramÂ corpIdÂ Â Â Â Â Â ä¼ä¸šID
Â *Â @paramÂ timeÂ Â Â Â Â Â Â Â å½“å‰æ—¶é—´
Â */
privateÂ voidÂ approvalAgreeing(IntegerÂ currentNode,Â ApprovalInfoÂ info,Â Map&lt;Integer,Â ApprovalConfig&gt;Â configMap,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ApprovalDTOÂ param,Â StringÂ userId,Â StringÂ corpId,Â LocalDateTimeÂ time,Â StringÂ objectId)Â {
Â Â Â Â //Â æŸ¥è¯¢è¿™ä¸ªèŠ‚ç‚¹ä»¥å‰æ˜¯å¦å®¡æ‰¹è¿‡
Â Â Â Â List&lt;String&gt;Â historyNodeÂ =Â Lists.newArrayList(info.getRecordNodeHistory().split(","));//Â å†å²èŠ‚ç‚¹éœ€è¦å‰”é™¤æœ€åä¸€ä¸ª
Â Â Â Â historyNode.remove(historyNode.size()Â -Â 1);
Â Â Â Â BagÂ bagÂ =Â newÂ HashBag(historyNode);
Â Â Â Â intÂ countÂ =Â bag.getCount(currentNode.toString());//Â è¿™ä¸ªèŠ‚ç‚¹å†å²æ˜¯å¦å‡ºç°è¿‡
Â Â Â Â countÂ =Â countÂ ==Â 0Â ?Â 1Â :Â countÂ +Â 1;Â //Â ç”¨äºæ ‡æ³¨è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦å¤šæ¬¡å®¡æ‰¹

Â Â Â Â //Â ç”Ÿæˆå®¡æ‰¹è®°å½•
Â Â Â Â ApprovalRecordÂ record2Â =Â newÂ ApprovalRecord();
Â Â Â Â record2.setApprovalRecordId(SnowFlakeUtil.getDefaultSnowFlakeId()Â +Â "");
Â Â Â Â record2.setCorpId(corpId);
Â Â Â Â record2.setApprovalInfoId(info.getApprovalInfoId());
Â Â Â Â record2.setFormId(param.getFormId());
Â Â Â Â record2.setApproverUserId(userId);
Â Â Â Â record2.setApproverTime(time);
Â Â Â Â record2.setApproverOpinions(param.getMessage());
Â Â Â Â record2.setApproverResult(param.getType());
Â Â Â Â ifÂ (ObjectUtil.isNotEmpty(param.getAccessoryUrl()))Â {
Â Â Â Â Â Â Â Â record2.setAccessoryUrl(JSONUtil.toJsonStr(param.getAccessoryUrl()));
Â Â Â Â }
Â Â Â Â record2.setApproverNode(currentNode.byteValue());
Â Â Â Â record2.setApproverCount(newÂ Byte(countÂ +Â ""));
Â Â Â Â approvalRecordMapper.insertSelective(record2);
Â Â Â Â //Â è·å–å½“å‰èŠ‚ç‚¹é…ç½®
Â Â Â Â ApprovalConfigÂ currentConfigÂ =Â configMap.get(currentNode);
Â Â Â Â ifÂ (currentConfig.getApprovalType()Â ==Â 1)Â {//Â 1ä¼šç­¾
Â Â Â Â Â Â Â Â //Â åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªå®¡æ‰¹çš„,å¦‚æœä¸æ˜¯returnå‡ºå»
Â Â Â Â Â Â Â Â List&lt;String&gt;Â userIdsÂ =Â null;
Â Â Â Â Â Â Â Â ifÂ (currentConfig.getCurrentNodeApproverType()Â ==Â 2)Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â è§’è‰²id
Â Â Â Â Â Â Â Â Â Â Â Â //Â æŸ¥è¯¢è‡ªå·±æ‹¥æœ‰é‚£äº›è§’è‰²
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;UserRole&gt;Â userRolesÂ =Â userRoleMapper.selectList(newÂ QueryWrapper&lt;UserRole&gt;().eq("user_id",Â userId)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .eq("corp_id",Â corpId).select("user_id"));
Â Â Â Â Â Â Â Â Â Â Â Â userIdsÂ =Â userRoles.stream().map(keyÂ -&gt;Â key.getUserId()).collect(Collectors.toList());
Â Â Â Â Â Â Â Â }Â elseÂ ifÂ (currentConfig.getCurrentNodeApproverType()==3){
Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨æˆ·ID
Â Â Â Â Â Â Â Â Â Â Â Â userIdsÂ =Â JSONUtil.toList(currentConfig.getCurrentNodeApprover().toString(),Â String.class);
Â Â Â Â Â Â Â Â }Â elseÂ ifÂ (currentConfig.getCurrentNodeApproverType()Â ==Â 1)Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â å‘èµ·äººè‡ªå·±
Â Â Â Â Â Â Â Â Â Â Â Â userIdsÂ =Â Arrays.asList(info.getFounder());
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â //Â æŸ¥è¯¢å·²ç»å®¡æ‰¹çš„äºº!=å¾…å®¡æ‰¹äººæ•°åˆ™ä¸æ˜¯æœ€åä¸€ä¸ªäºº
Â Â Â Â Â Â Â Â //Â 1.æŸ¥è¯¢å·²ç»å®¡æ‰¹çš„äººæ•°
Â Â Â Â Â Â Â Â IntegerÂ count1Â =Â approvalRecordMapper.selectCount(newÂ QueryWrapper&lt;ApprovalRecord&gt;().eq("corp_id",Â corpId).eq("approval_info_id",Â info.getApprovalInfoId())
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .eq("form_id",Â param.getFormId()).eq("approver_node",Â currentNode).eq("approver_count",Â count));
Â Â Â Â Â Â Â Â ifÂ (userIds.size()Â !=Â count1)Â {
Â Â Â Â Â Â Â Â Â Â Â Â return;//Â ä¸æ˜¯æœ€åä¸€ä¸ªå¯ä»¥é€€å‡º
Â Â Â Â Â Â Â Â }
Â Â Â Â }
Â Â Â Â IntegerÂ nextNodeÂ =Â currentNodeÂ +Â 1;
Â Â Â Â //Â æ›´æ–°æµç¨‹ä¿¡æ¯
Â Â Â Â info.setProcessProgress(nextNode);
Â Â Â Â info.setRecordNodeHistory(info.getRecordNodeHistory()Â +Â ","Â +Â info.getProcessProgress());
Â Â Â Â //Â info.setCurrentState(2);
Â Â Â Â //Â åˆ°è¿™é‡Œå¦‚æœä¸æ˜¯æˆ–ç­¾,å°±æ˜¯ä¼šç­¾æ˜¯æœ€åä¸€ä¸ªäººåŒæ„å¯ä»¥åˆ¤æ–­è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
Â Â Â Â //Â Â åˆ¤æ–­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹,å¦‚æœæ˜¯å¯ä»¥ç»“æŸèŠ‚ç‚¹äº†,ä¸æ˜¯åˆ™ç»§ç»­å¾€ä¸‹é€’å½’
Â Â Â Â ifÂ ((configMap.keySet().size()Â -Â 1)Â ==Â nextNode)Â {
Â Â Â Â Â Â Â Â info.setEndTime(time);
Â Â Â Â Â Â Â Â info.setEndState(true);//Â Â ç»“æŸæµç¨‹
Â Â Â Â Â Â Â Â approvalInfoMapper.updateByPrimaryKeySelective(info);
Â Â Â Â Â Â Â Â //Â æ•°æ®çŠ¶æ€å˜æˆç”Ÿæ•ˆ
Â Â Â Â Â Â Â Â StringÂ formCodeÂ =Â fromConfigMapper.findFormCode(corpId,Â param.getFormId());
Â Â Â Â Â Â Â Â commonMapper.updateDataState(formCode,Â 2,Â objectId,Â corpId);
Â Â Â Â Â Â Â Â return;
Â Â Â Â }
Â Â Â Â approvalInfoMapper.updateByPrimaryKeySelective(info);


Â Â Â Â //Â æ ¡éªŒä¸‹ä¸€ä¸ªé…ç½®æ˜¯å¦éœ€è¦å®¡æ‰¹
Â Â Â Â ApprovalConfigÂ nextConfigÂ =Â configMap.get(nextNode);//Â ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é…ç½®

Â Â Â Â List&lt;RuleVO&gt;Â ruleÂ =Â JSONUtil.toList(JSONUtil.parseArray(nextConfig.getVisibleFields()),Â RuleVO.class);
Â Â Â Â forÂ (RuleVOÂ ruleVOÂ :Â rule)Â {
Â Â Â Â Â Â Â Â ifÂ (ruleVO.getKx())Â {
Â Â Â Â Â Â Â Â Â Â Â Â return;//Â åˆ¤æ–­æ˜¯å¦å¼€äº†å¯å†™,å¦‚æœå¼€äº†å¯å†™,ä¸ç®¡æœ‰æ²¡æœ‰å¼€ç›¸åŒå®¡æ‰¹äººè‡ªåŠ¨é€šè¿‡,éƒ½ä¸èƒ½å¾€ä¸‹èµ°
Â Â Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â ifÂ (nextConfig.getApprovalAutoPass())Â {
Â Â Â Â Â Â Â Â //Â å¼€äº†Â å®¡æ‰¹äººå‘˜ç›¸åŒè‡ªåŠ¨é€šè¿‡
Â Â Â Â Â Â Â Â //Â 1.æ˜¯å¦éœ€è¦è‡ªå·±å®¡æ‰¹
Â Â Â Â Â Â Â Â ifÂ (nextConfig.getCurrentNodeApproverType()Â ==Â 2)Â {
Â Â Â Â Â Â Â Â Â Â Â Â //Â è§’è‰²id
Â Â Â Â Â Â Â Â Â Â Â Â //Â æŸ¥è¯¢è‡ªå·±æ‹¥æœ‰é‚£äº›è§’è‰²
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;UserRole&gt;Â userRolesÂ =Â userRoleMapper.selectList(newÂ QueryWrapper&lt;UserRole&gt;().eq("user_id",Â userId).eq("corp_id",Â corpId).select("role_id"));
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;String&gt;Â roleIdsÂ =Â userRoles.stream().map(keyÂ -&gt;Â key.getRoleId()).collect(Collectors.toList());
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;Integer&gt;Â currentNodeApproverRoleIdÂ =Â JSONUtil.toList(nextConfig.getCurrentNodeApprover().toString(),Â Integer.class);
Â Â Â Â Â Â Â Â Â Â Â Â ArrayList&lt;String&gt;Â integersÂ =Â newÂ ArrayList&lt;&gt;(roleIds);
Â Â Â Â Â Â Â Â Â Â Â Â booleanÂ bÂ =Â integers.retainAll(currentNodeApproverRoleId);//Â å­˜åœ¨äº¤é›†è¿”å›true
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (!b)Â return;
Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â //Â ç”¨æˆ·ID
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;String&gt;Â currentNodeApproverUserIdÂ =Â JSONUtil.toList(nextConfig.getCurrentNodeApprover().toString(),Â String.class);
Â Â Â Â Â Â Â Â Â Â Â Â booleanÂ containsÂ =Â currentNodeApproverUserId.contains(userId);
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (!contains)Â return;
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â //Â éœ€è¦è‡ªå·±å®¡æ‰¹
Â Â Â Â Â Â Â Â approvalAgreeing(nextNode,Â info,Â configMap,Â param,Â userId,Â corpId,Â time,Â objectId);
Â Â Â Â }
Â Â Â Â //Â approvalRecordMapper.insertSelective(record2);

}
</code></pre> 
<h4><a id="_483"></a>åˆå¹¶æƒé™(å¦‚æœæœ€åä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨å¤šä¸ªè‡ªå®šä¹‰æƒé™ç»„,å°±éœ€è¦åˆå¹¶)</h4> 
<pre><code>/**
Â *Â åˆå¹¶æƒé™ç»„
Â *
Â *Â @paramÂ roleIdsÂ Â Â Â Â Â å½“å‰ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²
Â *Â @paramÂ dbPowerGroupÂ è‡ªå®šä¹‰æƒé™ç»„
Â */
privateÂ List&lt;RuleVO&gt;Â mergePowerGroup(List&lt;String&gt;Â roleIds,Â List&lt;PowerGroup&gt;Â dbPowerGroup)Â {
Â Â Â Â List&lt;RuleVO&gt;Â resultÂ =Â newÂ ArrayList&lt;&gt;();
Â Â Â Â //Â åˆ¤æ–­å½“å‰è‡ªå®šä¹‰æƒé™ç»„æ˜¯å¦åŒ…å«Â å½“å‰ç”¨æˆ·çš„è§’è‰²
Â Â Â Â forÂ (PowerGroupÂ powerÂ :Â dbPowerGroup)Â {
Â Â Â Â Â Â Â Â List&lt;Integer&gt;Â dbRoleIdsÂ =Â JSONUtil.toList(power.getRoleId().toString(),Â Integer.class);
Â Â Â Â Â Â Â Â List&lt;String&gt;Â retainAllÂ =Â newÂ ArrayList&lt;&gt;(roleIds);
Â Â Â Â Â Â Â Â retainAll.retainAll(dbRoleIds);
Â Â Â Â Â Â Â Â ifÂ (retainAll.size()Â !=Â 0)Â {//Â å­˜åœ¨äº¤é›†,è¯æ˜è¿™ä¸ªè‡ªå®šä¹‰æƒé™ç»„æœ‰å½“å‰æ“ä½œç”¨æˆ·
Â Â Â Â Â Â Â Â Â Â Â Â List&lt;RuleVO&gt;Â ruleÂ =Â JSONUtil.toList(JSONUtil.parseArray(power.getVisibleFields()),Â RuleVO.class);
Â Â Â Â Â Â Â Â Â Â Â Â Map&lt;String,Â RuleVO&gt;Â tempMapDBÂ =Â rule.stream().collect(Collectors.toMap(ruleVoÂ -&gt;Â ruleVo.getChildren()Â +Â ruleVo.getField(),Â RuleVOÂ -&gt;Â RuleVO));
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (CollUtil.isEmpty(result))Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â resultÂ =Â rule;
Â Â Â Â Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Map&lt;String,Â RuleVO&gt;Â tempListMapÂ =Â result.stream().collect(Collectors.toMap(ruleVoÂ -&gt;Â ruleVo.getChildren()Â +Â ruleVo.getField(),Â RuleVOÂ -&gt;Â RuleVO));
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (tempMapDB.keySet().size()Â &gt;Â result.size())Â {//Â å¦‚æœBæƒé™ç»„å­—æ®µæ¯”Aæƒé™ç»„å¤š,å°±æ‹¿å¤šçš„ä¸€æ–¹è¿›è¡Œå¾ªç¯
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â forÂ (RuleVOÂ itemÂ :Â rule)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â RuleVOÂ ruleVOÂ =Â tempListMap.get(item.getChildren()Â +Â item.getField());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (ruleVO.getBt())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â item.setBt(ruleVO.getBt());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (ruleVO.getKj())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â item.setKj(ruleVO.getKj());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (ruleVO.getKx())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â item.setKx(ruleVO.getKx());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â resultÂ =Â rule;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â å¦åˆ™å°±æ‹¿Aæƒé™ç»„éå†
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â forÂ (RuleVOÂ itemÂ :Â result)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â åˆå¹¶ç»„æˆæ–°çš„è§„åˆ™,å¦‚æœAè§„åˆ™ä¸ºtrue,Bè§„åˆ™ä¸ºfalse,åˆ™å–trueçš„ä¸€æ–¹
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â RuleVOÂ ruleDBÂ =Â tempMapDB.get(item.getChildren()Â +Â item.getField());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (ruleDB.getBt())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â item.setBt(ruleDB.getBt());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (ruleDB.getKj())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â item.setKj(ruleDB.getKj());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (ruleDB.getKx())Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â item.setKx(ruleDB.getKx());
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â }
Â Â Â Â }
Â Â Â Â returnÂ result;
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1e66e4b15ca088a33d98fd7f10f577ed/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Stable Diffusionï¼šRoopæ¢è„¸æ’ä»¶å®‰è£…</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/31451bbe589a905598ace17e0927831c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ã€JAVASEã€‘å¸¦ä½ äº†è§£è¿ç®—ç¬¦å¥¥ç§˜ï¼ˆJavaå…¨éƒ¨è¿ç®—ç¬¦ï¼‰</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>