<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# GetField 方法应用实例 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/18889bf5bba926b2df0d40d430d35c24/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C# GetField 方法应用实例">
  <meta property="og:description" content="目录
关于 C# Type 类
GetField 方法应用
应用举例
心理CT设计题
类设计
DPCT类实现代码
小结
关于 C# Type 类 Type表示类型声明：类类型、接口类型、数组类型、值类型、枚举类型、类型参数、泛型类型定义，以及开放或封闭构造的泛型类型。调用 this.GetType() 方法得到Type对象，可获取成员信息，如方法名、变量名。更多学习请参照以下链接：
Type 类 (System) | Microsoft Learn
本文以数据采集应用实例介绍 Type.GetField 方法的实际应用。
GetField 方法应用 GetField 是获取当前 Type 的特定方法，我们在这里介绍 GetField(String, BindingFlags) 即使用指定的绑定约束搜索指定的字段变量。
其中 string name 表示要搜索的方法名称，System.Reflection.BindingFlags 枚举可见下表：
序号筛选器标志说明1BindingFlags.Instance 或 BindingFlags.Static 必须指定实例或静态方可有效返回2BindingFlags.Public搜索当前 Type 中包含的公共方法3BindingFlags.NonPublic搜索当前 Type 中包含的非公共方法 、私有方法、内部方法和保护方法4BindingFlags.FlattenHierarchy在层次结构中的包括 public 和 protected 静态成员; private 继承类中的静态成员不包括在层次结构中5BindingFlags.IgnoreCase忽略方法name的大小写进行搜索6BindingFlags.DeclaredOnly如果只搜索 Type 声明的方法，则搜索只是继承的方法 应用举例 心理CT设计题 假设我们有一组心理测评题目，共计10题，每题有 A、B、C、D、E、F 共计六个单选项，分六个维度进行计分，各初始维度得分均为0，如果符合条件则&#43;1分，该维度如下表：
序号变量名类型说明1轻躁狂int其特征包括：气质昂扬，爱说、精力充沛、易怒、思维奔逸、抑郁气短等。 初始值为02妄想狂int为了区分那些被判断为具有关系妄想、被害妄想、夸大自我概念、猜疑心、过度地敏感、意见和态度生硬等偏执性人格而制定。初始值为03抑郁int抑郁的特征是缺乏干劲，对未来没有希望，一般对自己的生活状况极其不满。 初始值为04癔病int癔病的特征是心因性的不随意肌体机能丧失和机能障碍。 初始值为05疑病int其特征是对自己的身体健康的一种过度的关心，担心自己有病或不健康。初始值为06精神分裂int其特征包括：思维、感情和行为混乱。初始值为0 初始化代码如下：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-25T23:04:09+08:00">
    <meta property="article:modified_time" content="2024-04-25T23:04:09+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# GetField 方法应用实例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%85%B3%E4%BA%8E%20C%23%20Type%20%E7%B1%BB-toc" style="margin-left:40px;"><a href="#%E5%85%B3%E4%BA%8E%20C%23%20Type%20%E7%B1%BB" rel="nofollow">关于 C# Type 类</a></p> 
<p id="GetMethod%20%E6%96%B9%E6%B3%95%E5%BA%94%E7%94%A8-toc" style="margin-left:40px;"><a href="#GetMethod%20%E6%96%B9%E6%B3%95%E5%BA%94%E7%94%A8" rel="nofollow">GetField 方法应用</a></p> 
<p id="%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B-toc" style="margin-left:80px;"><a href="#%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B" rel="nofollow">应用举例</a></p> 
<p id="%E7%B1%BB%E8%AE%BE%E8%AE%A1-toc" style="margin-left:120px;"><a href="#%E7%B1%BB%E8%AE%BE%E8%AE%A1" rel="nofollow">心理CT设计题</a></p> 
<p id="%E7%B1%BB%E8%AE%BE%E8%AE%A1-toc" style="margin-left:120px;"><a href="#%E7%B1%BB%E8%AE%BE%E8%AE%A1" rel="nofollow">类设计</a></p> 
<p id="DPCT%E7%B1%BB%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81-toc" style="margin-left:120px;"><a href="#DPCT%E7%B1%BB%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81" rel="nofollow">DPCT类实现代码</a></p> 
<p id="%E5%B0%8F%E7%BB%93-toc" style="margin-left:40px;"><a href="#%E5%B0%8F%E7%BB%93" rel="nofollow">小结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E5%85%B3%E4%BA%8E%20C%23%20Type%20%E7%B1%BB">关于 C# Type 类</h3> 
<p>Type表示类型声明：类类型、接口类型、数组类型、值类型、枚举类型、类型参数、泛型类型定义，以及开放或封闭构造的泛型类型。调用 this.GetType() 方法得到Type对象，可获取成员信息，如方法名、变量名。更多学习请参照以下链接：</p> 
<p><a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.type?view=net-8.0" rel="nofollow" title="Type 类 (System) | Microsoft Learn">Type 类 (System) | Microsoft Learn</a></p> 
<p>本文以数据采集应用实例介绍 Type.GetField 方法的实际应用。</p> 
<h3 id="GetMethod%20%E6%96%B9%E6%B3%95%E5%BA%94%E7%94%A8">GetField 方法应用</h3> 
<p>GetField 是获取当前 Type 的特定方法，我们在这里介绍 GetField(String, BindingFlags) 即使用指定的绑定约束搜索指定的字段变量。</p> 
<p>其中 string name 表示要搜索的方法名称，System.Reflection.BindingFlags 枚举可见下表：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th>序号</th><th>筛选器标志</th><th>说明</th></tr></thead><tbody><tr><th>1</th><td>BindingFlags.Instance 或 BindingFlags.Static </td><td>必须指定实例或静态方可有效返回</td></tr><tr><th>2</th><td>BindingFlags.Public</td><td>搜索当前 Type 中包含的公共方法</td></tr><tr><th>3</th><td>BindingFlags.NonPublic</td><td>搜索当前 Type 中包含的非公共方法 、私有方法、内部方法和保护方法</td></tr><tr><th>4</th><td>BindingFlags.FlattenHierarchy</td><td>在层次结构中的包括 public 和 protected 静态成员; private 继承类中的静态成员不包括在层次结构中</td></tr><tr><th>5</th><td>BindingFlags.IgnoreCase</td><td>忽略方法name的大小写进行搜索</td></tr><tr><th>6</th><td>BindingFlags.DeclaredOnly</td><td>如果只搜索 Type 声明的方法，则搜索只是继承的方法</td></tr></tbody></table> 
<h4 id="%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B">应用举例</h4> 
<h5 id="%E7%B1%BB%E8%AE%BE%E8%AE%A1">心理CT设计题</h5> 
<p>假设我们有一组心理测评题目，共计10题，每题有 A、B、C、D、E、F 共计六个单选项，分六个维度进行计分，各初始维度得分均为0，如果符合条件则+1分，该维度如下表：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:700px;"><thead><tr><th style="text-align:center;width:57px;">序号</th><th style="text-align:center;width:87px;">变量名</th><th style="text-align:center;width:48px;">类型</th><th style="text-align:center;width:505px;">说明</th></tr></thead><tbody><tr><th style="text-align:center;width:57px;">1</th><td style="text-align:center;width:87px;">轻躁狂</td><td style="text-align:center;width:48px;">int</td><td style="width:505px;">其特征包括：气质昂扬，爱说、精力充沛、易怒、思维奔逸、抑郁气短等。 初始值为0</td></tr><tr><th style="text-align:center;width:57px;">2</th><td style="text-align:center;width:87px;">妄想狂</td><td style="text-align:center;width:48px;">int</td><td style="width:505px;">为了区分那些被判断为具有关系妄想、被害妄想、夸大自我概念、猜疑心、过度地敏感、意见和态度生硬等偏执性人格而制定。初始值为0</td></tr><tr><th style="text-align:center;width:57px;">3</th><td style="text-align:center;width:87px;">抑郁</td><td style="text-align:center;width:48px;">int</td><td style="width:505px;">抑郁的特征是缺乏干劲，对未来没有希望，一般对自己的生活状况极其不满。 初始值为0</td></tr><tr><th style="text-align:center;width:57px;">4</th><td style="text-align:center;width:87px;">癔病</td><td style="text-align:center;width:48px;">int</td><td style="width:505px;">癔病的特征是心因性的不随意肌体机能丧失和机能障碍。 初始值为0</td></tr><tr><th style="text-align:center;width:57px;">5</th><td style="text-align:center;width:87px;">疑病</td><td style="text-align:center;width:48px;">int</td><td style="width:505px;">其特征是对自己的身体健康的一种过度的关心，担心自己有病或不健康。初始值为0</td></tr><tr><th style="text-align:center;width:57px;">6</th><td style="text-align:center;width:87px;">精神分裂</td><td style="text-align:center;width:48px;">int</td><td style="width:505px;">其特征包括：思维、感情和行为混乱。初始值为0</td></tr></tbody></table> 
<p>初始化代码如下：</p> 
<pre><code class="language-cs">int 轻躁狂=0;
int 妄想狂=0;
int 抑郁=0;
int 癔病=0;
int 疑病=0;
int 精神分裂=0;</code></pre> 
<p>基本的设计如下，通过被测试者对题目的理解，回答其中的选项（单选），则采集后的数据拼接为10个字母组合，如下：</p> 
<pre><code class="language-cs">string key1="BACCEDFABCD";</code></pre> 
<p>其中 key1 字符串即为被测试者的答案。</p> 
<p>建立代码对应维度的字典变量        Dictionary&lt;string, string&gt; descript = new Dictionary&lt;string, string&gt;() ，如下代码：</p> 
<pre><code class="language-cs">            descript.Add("A", "轻躁狂");
            descript.Add("B", "妄想狂");
            descript.Add("C", "抑郁");
            descript.Add("D", "癔病");
            descript.Add("E", "疑病");
            descript.Add("F", "精神分裂");
</code></pre> 
<p>建立 Dictionary&lt;string, int&gt; dpct = new Dictionary&lt;string, int&gt;();  字典变量，用于存储模型的运算值（每一题均不同），如下代码：</p> 
<pre><code class="language-cs">            dpct.Add("A1", 1);
            dpct.Add("B1", 1);
            dpct.Add("C1", 1);
            dpct.Add("D1", 1);
            dpct.Add("E1", 1);
            dpct.Add("F1", 1);

            dpct.Add("A2", 0);
            dpct.Add("B2", 0);
            dpct.Add("C2", 0);
            dpct.Add("D2", 0);
            dpct.Add("E2", 0);
            dpct.Add("F2", 0);

            dpct.Add("A3", 0);
            dpct.Add("B3", 1);
            dpct.Add("C3", 0);
            dpct.Add("D3", 0);
            dpct.Add("E3", 0);
            dpct.Add("F3", 1);

            dpct.Add("A4", 1);
            dpct.Add("B4", 0);
            dpct.Add("C4", 0);
            dpct.Add("D4", 0);
            dpct.Add("E4", 1);
            dpct.Add("F4", 0);

            dpct.Add("A5", 0);
            dpct.Add("B5", 1);
            dpct.Add("C5", 0);
            dpct.Add("D5", 1);
            dpct.Add("E5", 1);
            dpct.Add("F5", 1);

            dpct.Add("A6", 1);
            dpct.Add("B6", 1);
            dpct.Add("C6", 1);
            dpct.Add("D6", 0);
            dpct.Add("E6", 1);
            dpct.Add("F6", 0);

            dpct.Add("A7", 0);
            dpct.Add("B7", 0);
            dpct.Add("C7", 0);
            dpct.Add("D7", 0);
            dpct.Add("E7", 1);
            dpct.Add("F7", 0);

            dpct.Add("A8", 0);
            dpct.Add("B8", 1);
            dpct.Add("C8", 0);
            dpct.Add("D8", 0);
            dpct.Add("E8", 0);
            dpct.Add("F8", 0);

            dpct.Add("A9", 1);
            dpct.Add("B9", 1);
            dpct.Add("C9", 0);
            dpct.Add("D9", 1);
            dpct.Add("E9", 1);
            dpct.Add("F9", 1);

            dpct.Add("A10", 1);
            dpct.Add("B10", 1);
            dpct.Add("C10", 1);
            dpct.Add("D10", 0);
            dpct.Add("E10", 1);
            dpct.Add("F10", 1);
</code></pre> 
<h5><br> 类设计</h5> 
<p>创建一个 DPCT 类用于计算各维度的得分情况，该类设计如下：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="width:46px;">序号</th><th style="width:440px;">成员</th><th style="width:61px;">类型</th><th style="width:141px;">说明</th></tr></thead><tbody><tr><th style="width:46px;text-align:center;">1</th><td style="width:440px;">int 轻躁狂=0;<br> int 妄想狂=0;<br> int 抑郁=0;<br> int 癔病=0;<br> int 疑病=0;<br> int 精神分裂=0;</td><td style="width:61px;">属性</td><td style="width:141px;">6维度初始值，均为0；</td></tr><tr><th style="width:46px;text-align:center;">2</th><td style="width:440px;">Dictionary&lt;string, string&gt; descript = new Dictionary&lt;string, string&gt;()</td><td style="width:61px;">属性</td><td style="width:141px;">用于选项代码与唯度对应的字典</td></tr><tr><th style="width:46px;text-align:center;">3</th><td style="width:440px;">Dictionary&lt;string, int&gt; dpct = new Dictionary&lt;string, int&gt;(); </td><td style="width:61px;">属性</td><td style="width:141px;">存储每题答案对应的计算得分</td></tr><tr><th style="width:46px;text-align:center;">4</th><td style="width:440px;">string key1="";</td><td style="width:61px;">方法</td><td style="width:141px;">接收用户的答案组合字符串</td></tr><tr><th style="width:46px;text-align:center;">5</th><td style="width:440px;">public string countScrore()</td><td style="width:61px;">方法</td><td style="width:141px;">计算各维度变量的得分</td></tr></tbody></table> 
<h5 id="DPCT%E7%B1%BB%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81">DPCT类实现代码</h5> 
<p>完整的DPCT类示例代码如下：</p> 
<pre><code class="language-cs">public class DPCT
{
    int 轻躁狂=0;
    int 妄想狂=0;
    int 抑郁=0;
    int 癔病=0;
    int 疑病=0;
    int 精神分裂=0;

    public string key1 = "";

    Dictionary&lt;string, string&gt; descript = new Dictionary&lt;string, string&gt;();
    Dictionary&lt;string, int&gt; dpct = new Dictionary&lt;string, int&gt;();

    public DPCT()
    {
            descript.Add("A", "轻躁狂");
            descript.Add("B", "妄想狂");
            descript.Add("C", "抑郁");
            descript.Add("D", "癔病");
            descript.Add("E", "疑病");
            descript.Add("F", "精神分裂");

            dpct.Add("A1", 1);
            dpct.Add("B1", 1);
            dpct.Add("C1", 1);
            dpct.Add("D1", 1);
            dpct.Add("E1", 1);
            dpct.Add("F1", 1);

            dpct.Add("A2", 0);
            dpct.Add("B2", 0);
            dpct.Add("C2", 0);
            dpct.Add("D2", 0);
            dpct.Add("E2", 0);
            dpct.Add("F2", 0);

            dpct.Add("A3", 0);
            dpct.Add("B3", 1);
            dpct.Add("C3", 0);
            dpct.Add("D3", 0);
            dpct.Add("E3", 0);
            dpct.Add("F3", 1);

            dpct.Add("A4", 1);
            dpct.Add("B4", 0);
            dpct.Add("C4", 0);
            dpct.Add("D4", 0);
            dpct.Add("E4", 1);
            dpct.Add("F4", 0);

            dpct.Add("A5", 0);
            dpct.Add("B5", 1);
            dpct.Add("C5", 0);
            dpct.Add("D5", 1);
            dpct.Add("E5", 1);
            dpct.Add("F5", 1);

            dpct.Add("A6", 1);
            dpct.Add("B6", 1);
            dpct.Add("C6", 1);
            dpct.Add("D6", 0);
            dpct.Add("E6", 1);
            dpct.Add("F6", 0);

            dpct.Add("A7", 0);
            dpct.Add("B7", 0);
            dpct.Add("C7", 0);
            dpct.Add("D7", 0);
            dpct.Add("E7", 1);
            dpct.Add("F7", 0);

            dpct.Add("A8", 0);
            dpct.Add("B8", 1);
            dpct.Add("C8", 0);
            dpct.Add("D8", 0);
            dpct.Add("E8", 0);
            dpct.Add("F8", 0);

            dpct.Add("A9", 1);
            dpct.Add("B9", 1);
            dpct.Add("C9", 0);
            dpct.Add("D9", 1);
            dpct.Add("E9", 1);
            dpct.Add("F9", 1);

            dpct.Add("A10", 1);
            dpct.Add("B10", 1);
            dpct.Add("C10", 1);
            dpct.Add("D10", 0);
            dpct.Add("E10", 1);
            dpct.Add("F10", 1);
      }
   public string countScrore() 
   {
         for (int i = 0; i &lt; key1.Length; i++)
         {
            string anwser = key1.Substring(i, 1);
            string varname = descript[anwser];
            FieldInfo fi=this.GetType().GetField(varname, BindingFlags.NonPublic| BindingFlags.Instance);
            fi.SetValue(this, (int)fi.GetValue(this) + dpct[anwser+(i+1).ToString()]);
         }
   }
}

</code></pre> 
<p>countScore 核心方法取出每一个答案选项字母，根据代码与维度对应关系，取出要计算值的变量名称字符串，然后通过GetField方法查找到变量，并根据模型添加分值。</p> 
<p>其基本设计如下图所示：</p> 
<p><img alt="" height="885" src="https://images2.imgbox.com/83/ce/xBxstxcQ_o.png" width="1200"></p> 
<p>调用 GetField 方法 得到 FieldInfo 对象，然后 FieldInfo 对象再执行 SetValue 和 GetValue 方法执行增加值操作。</p> 
<h3 id="%E5%B0%8F%E7%BB%93">小结</h3> 
<p>GetField 方法的更多详情介绍，可参考如下链接：</p> 
<p><a class="link-info" href="https://learn.microsoft.com/zh-cn/dotnet/api/system.type.getfield?view=net-8.0" rel="nofollow" title="https://learn.microsoft.com/zh-cn/dotnet/api/system.type.getfield?view=net-8.0">https://learn.microsoft.com/zh-cn/dotnet/api/system.type.getfield?view=net-8.0</a></p> 
<p>类代码在这里仅做为 GetField 方法实例讲解参考，不做为实际的测评数据和测评效果。</p> 
<p>感谢您的阅读，希望本文能够对您有所帮助。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ef0c62f790ca4a258f52294daf4ce360/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RabbitMQ最全使用教程-小白也能看懂</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03746eaedd9bd20f1804c75f490522e7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MATLAB 2024a软件下载安装教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>