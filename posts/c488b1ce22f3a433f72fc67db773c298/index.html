<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>模拟实现string【C&#43;&#43;】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c488b1ce22f3a433f72fc67db773c298/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="模拟实现string【C&#43;&#43;】">
  <meta property="og:description" content="文章目录 全部的实现代码放在了文章末尾准备工作包含头文件定义命名空间和类类的成员变量 构造函数默认构造拷贝构造 重载赋值拷贝函数析构函数迭代器和获取迭代器迭代器获取迭代器 resize【调整size】图解 reserve【调整capacity】empty【判断串是否为空】operator[]appendpush_backoperator&#43;=insert【在pos之前插入字符串】erase【删除从pos开始的len个字符】swapfindsubstroperator&#43;compare比较运算符重载operator&gt;operator==operator&lt;operator&gt;operator&lt;=operator!= c_stroperator&lt;&lt;【输出运算符重载】operator&gt;&gt;【输入运算符重载】全部代码mystring.hmystring.cpp 全部的实现代码放在了文章末尾 准备工作 创建三个文件，一个头文件mystring.h，两个源文件mystring.cpp tesr.cpp
【因为是简单实现，所以只实现了string里放char这一种实现，就没有用模板了】
mystring.h：存放包含的头文件，命名空间的定义mystring.cpp：存放成员函数和命名空间中的函数的定义test.cpp：存放main函数，以及测试代码 包含头文件 iostream：用于输入输出string.h：C语言的头文件，用于使用其中的操作字符数组的函数assert.h：用于使用报错函数 定义命名空间和类 在文件mystring.h和mystring.cpp中都定义上一个命名空间mystring
把mystring.h中类的声明放进命名空间，把mystring中的函数实现也放进命名空间
注意：
不同源文件的同名的命名空间经过编译链接之后可以合成在一起
类的成员变量 构造函数 默认构造 给默认构造的str加上缺省值（“”）就可以实现不传参数时就是空串了
拷贝构造 因为成员str申请了堆区空间，所以要手写拷贝构造，并且要实现深拷贝
重载赋值拷贝函数 因为成员str申请了堆区空间，所以要手写赋值拷贝，并且要实现深拷贝
为什么要防止自己给自己赋值？
【this指针指向接收赋值的对象，所以只要this与传入的参数的地址相等就是自己赋值给自己】
因为要深拷贝，所以要把一个对象中的所有成员都拷贝一遍，时间复杂度是
O（N）,所以有必要防止自己给自己赋值
析构函数 因为成员str申请了堆区空间，所以要手写析构，不能用编译器给的默认析构
迭代器和获取迭代器 迭代器 因为存放字符的空间的地址是连续的，且只是简单模拟
所以我用了char*作为普通迭代器，const char*作为const迭代器
直接把char*重命名为iterator，把const char*重命名为const_iterator就完成了迭代器的实现
获取迭代器 因为使用了char*作为迭代器
所以str就是第一个有效元素，str&#43;size就是最后一个有效字符的下一个位置(\0)
又因为const修饰的对象只能调用const修饰的成员函数
所以如果是const修饰的对象调用begin()和end()的时候，就会自动调用到const修饰的begin和end.
resize【调整size】 void string::resize(size_t n,char c=&#39;\0&#39;) { if (n &gt; _capacity) 当要调整的容量n大于最大容量时，就要扩容 { char* tmp = new char[n &#43;1];申请size&#43;1个空间，那多出来的1是给&#39;\0&#39;的 strcpy(tmp, _str);拷贝字符串（把右参数拷贝给左参数） delete[] _str;释放扩容前str指向的空间 _str = tmp;完成扩容 for (; _size &lt;n; _size&#43;&#43;)把多出来的有效字符用c补上 { _str[_size] = c; } _str[_size] = &#39;\0&#39;; 补完之后加上字符串结束标志&#39;\0&#39; _capacity = n;更新最大容量 } else { if (n &gt; _size)如果调整之后的size 大于 原来的size 就要把少（n-size)的有效字符用c补上 { for (; _size &lt; n; _size&#43;&#43;)把多出来的有效字符用c补上 { _str[_size] = c; } _str[_size] = &#39;\0&#39;;补完之后加上字符串结束标志&#39;\0&#39; } else 如果调整之后的size 小于 原来的size 就要把多的字符删除 { _size = n;调整有效字符大小 _str[_size] = &#39;\0&#39;;直接把n位置改成&#39;\0&#39;即可删除多余字符 } } } 图解 reserve【调整capacity】 empty【判断串是否为空】 operator[] 返回值要是char&amp;这样才能像字符数组一样访问和修改串中的字符">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-28T10:04:51+08:00">
    <meta property="article:modified_time" content="2024-06-28T10:04:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">模拟实现string【C&#43;&#43;】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">全部的实现代码放在了文章末尾</a></li><li><a href="#_4" rel="nofollow">准备工作</a></li><li><ul><li><a href="#_14" rel="nofollow">包含头文件</a></li><li><a href="#_21" rel="nofollow">定义命名空间和类</a></li><li><ul><li><a href="#_28" rel="nofollow">类的成员变量</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_33" rel="nofollow">构造函数</a></li><li><ul><li><a href="#_35" rel="nofollow">默认构造</a></li><li><a href="#_43" rel="nofollow">拷贝构造</a></li></ul> 
  </li><li><a href="#_50" rel="nofollow">重载赋值拷贝函数</a></li><li><a href="#_61" rel="nofollow">析构函数</a></li><li><a href="#_68" rel="nofollow">迭代器和获取迭代器</a></li><li><ul><li><a href="#_70" rel="nofollow">迭代器</a></li><li><a href="#_77" rel="nofollow">获取迭代器</a></li></ul> 
  </li><li><a href="#resizesize_89" rel="nofollow">resize【调整size】</a></li><li><ul><li><a href="#_135" rel="nofollow">图解</a></li></ul> 
  </li><li><a href="#reservecapacity_144" rel="nofollow">reserve【调整capacity】</a></li><li><a href="#empty_150" rel="nofollow">empty【判断串是否为空】</a></li><li><a href="#operator_155" rel="nofollow">operator[]</a></li><li><a href="#append_164" rel="nofollow">append</a></li><li><a href="#push_back_171" rel="nofollow">push_back</a></li><li><a href="#operator_177" rel="nofollow">operator+=</a></li><li><a href="#insertpos_185" rel="nofollow">insert【在pos之前插入字符串】</a></li><li><a href="#eraseposlen_192" rel="nofollow">erase【删除从pos开始的len个字符】</a></li><li><a href="#swap_198" rel="nofollow">swap</a></li><li><a href="#find_209" rel="nofollow">find</a></li><li><a href="#substr_215" rel="nofollow">substr</a></li><li><a href="#operator_220" rel="nofollow">operator+</a></li><li><a href="#compare_229" rel="nofollow">compare</a></li><li><a href="#_234" rel="nofollow">比较运算符重载</a></li><li><ul><li><a href="#operator_236" rel="nofollow">operator&gt;</a></li><li><a href="#operator_242" rel="nofollow">operator==</a></li><li><a href="#operator_249" rel="nofollow">operator&lt;</a></li><li><a href="#operator_255" rel="nofollow">operator&gt;</a></li><li><a href="#operator_262" rel="nofollow">operator&lt;=</a></li><li><a href="#operator_270" rel="nofollow">operator!=</a></li></ul> 
  </li><li><a href="#c_str_277" rel="nofollow">c_str</a></li><li><a href="#operator_286" rel="nofollow">operator&lt;&lt;【输出运算符重载】</a></li><li><a href="#operator_301" rel="nofollow">operator&gt;&gt;【输入运算符重载】</a></li><li><a href="#_347" rel="nofollow">全部代码</a></li><li><ul><li><a href="#mystringh_348" rel="nofollow">mystring.h</a></li><li><a href="#mystringcpp_428" rel="nofollow">mystring.cpp</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>全部的实现代码放在了文章末尾</h2> 
<h2><a id="_4"></a>准备工作</h2> 
<p>创建三个文件，一个头文件<code>mystring.h</code>，两个源文件<code>mystring.cpp</code> <code>tesr.cpp</code><br> 【<mark>因为是简单实现，所以只实现了string里放char这一种实现</mark>，就<code>没有用模板了</code>】</p> 
<ol><li>mystring.h：存放包含的头文件，命名空间的定义</li><li>mystring.cpp：存放成员函数和命名空间中的函数的定义</li><li>test.cpp：存放main函数，以及测试代码</li></ol> 
<hr> 
<h3><a id="_14"></a>包含头文件</h3> 
<ol><li>iostream：用于输入输出</li><li>string.h：C语言的头文件，用于使用其中的操作字符数组的函数</li><li>assert.h：用于使用报错函数</li></ol> 
<hr> 
<h3><a id="_21"></a>定义命名空间和类</h3> 
<p>在文件<code>mystring.h</code>和<code>mystring.cpp</code>中都定义上一个命名空间<code>mystring</code><br> 把<code>mystring.h</code>中类的声明放进命名空间，把<code>mystring</code>中的函数实现也放进命名空间</p> 
<p>注意：<br> <mark>不同源文件的<code>同名的命名空间</code>经过编译链接之后<code>可以合成在一起</code></mark></p> 
<h4><a id="_28"></a>类的成员变量</h4> 
<p><img src="https://images2.imgbox.com/78/42/sfKcPBMf_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_33"></a>构造函数</h2> 
<h3><a id="_35"></a>默认构造</h3> 
<p><img src="https://images2.imgbox.com/77/7a/wCSt1BDZ_o.png" alt="在这里插入图片描述"></p> 
<p><mark>给默认构造的str加上缺省值（“”）就可以实现不传参数时就是空串了</mark></p> 
<hr> 
<h3><a id="_43"></a>拷贝构造</h3> 
<p><mark>因为成员str申请了堆区空间，所以<code>要手写拷贝构造</code>，并且要实现<code>深拷贝</code></mark><br> <img src="https://images2.imgbox.com/91/91/IrLCpTX4_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_50"></a>重载赋值拷贝函数</h2> 
<p><mark>因为成员str申请了堆区空间，所以<code>要手写赋值拷贝</code>，并且要实现<code>深拷贝</code></mark><br> <img src="https://images2.imgbox.com/0b/e6/CuEQunEN_o.png" alt="在这里插入图片描述"><br> 为什么要防止自己给自己赋值？<br> 【this指针指向接收赋值的对象，所以只要<code>this</code>与<code>传入的参数的地址</code>相等就是自己赋值给自己】</p> 
<p><mark>因为要深拷贝，所以要把一个对象中的所有成员都拷贝一遍，时间复杂度是<br> O（N）,所以有必要防止自己给自己赋值</mark></p> 
<hr> 
<h2><a id="_61"></a>析构函数</h2> 
<p><mark>因为成员str申请了堆区空间，所以<code>要手写析构</code>，不能用编译器给的默认析构</mark></p> 
<p><img src="https://images2.imgbox.com/02/ec/edp6yw12_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_68"></a>迭代器和获取迭代器</h2> 
<h3><a id="_70"></a>迭代器</h3> 
<p>因为<code>存放字符的空间的地址是连续的</code>，且只是简单模拟<br> 所以我用了<code>char*</code>作为普通迭代器，<code>const char*</code>作为const迭代器</p> 
<p>直接把<code>char*</code>重命名为<code>iterator</code>，把<code>const char*</code>重命名为<code>const_iterator</code>就完成了迭代器的实现</p> 
<hr> 
<h3><a id="_77"></a>获取迭代器</h3> 
<p><img src="https://images2.imgbox.com/4e/44/H3q21ZPK_o.png" alt="在这里插入图片描述"><br> 因为使用了char*作为迭代器<br> <mark>所以str就是第一个有效元素，str+size就是最后一个有效字符的下一个位置(\0)</mark></p> 
<p>又因为const修饰的对象只能调用const修饰的成员函数<br> <mark>所以如果是const修饰的对象调用begin()和end()的时候，就会自动调用到const修饰的begin和end.</mark><br> <img src="https://images2.imgbox.com/97/ad/w7PdMuFM_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="resizesize_89"></a>resize【调整size】</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span><span class="token keyword">char</span> c<span class="token operator">=</span><span class="token char">'\0'</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span> 当要调整的容量n大于最大容量时，就要扩容
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>申请size<span class="token operator">+</span><span class="token number">1</span>个空间，那多出来的<span class="token number">1</span>是给<span class="token char">'\0'</span>的

        <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>拷贝字符串（把右参数拷贝给左参数）

        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>释放扩容前str指向的空间

        _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>完成扩容

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> _size <span class="token operator">&lt;</span>n<span class="token punctuation">;</span> _size<span class="token operator">++</span><span class="token punctuation">)</span>把多出来的有效字符用c补上
        <span class="token punctuation">{<!-- --></span>
            _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span> 补完之后加上字符串结束标志<span class="token char">'\0'</span>

        _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>更新最大容量
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _size<span class="token punctuation">)</span>如果调整之后的size  大于  原来的size
                      就要把少（n<span class="token operator">-</span>size<span class="token punctuation">)</span>的有效字符用c补上
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> _size <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> _size<span class="token operator">++</span><span class="token punctuation">)</span>把多出来的有效字符用c补上
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>补完之后加上字符串结束标志<span class="token char">'\0'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> 如果调整之后的size  小于  原来的size
            就要把多的字符删除
        <span class="token punctuation">{<!-- --></span>
            _size <span class="token operator">=</span> n<span class="token punctuation">;</span>调整有效字符大小

            _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>直接把n位置改成<span class="token char">'\0'</span>即可删除多余字符
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_135"></a>图解</h3> 
<p><img src="https://images2.imgbox.com/92/02/gDcCJAMx_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/4a/8d/pHRwQvln_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="reservecapacity_144"></a>reserve【调整capacity】</h2> 
<p><img src="https://images2.imgbox.com/25/0c/J6YQmb2r_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="empty_150"></a>empty【判断串是否为空】</h2> 
<p><img src="https://images2.imgbox.com/fb/4e/1qqJWssa_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="operator_155"></a>operator[]</h2> 
<p><mark>返回值要是<code>char&amp;</code>这样才能像字符数组一样访问和修改串中的字符</mark><br> <img src="https://images2.imgbox.com/1a/ec/a0SgeGHl_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="append_164"></a>append</h2> 
<p><img src="https://images2.imgbox.com/0e/be/Txde3EQn_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/59/49/YxFqRtnF_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="push_back_171"></a>push_back</h2> 
<p><mark>可以直接服用append</mark><br> <img src="https://images2.imgbox.com/47/16/EYd3JGyb_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="operator_177"></a>operator+=</h2> 
<p><mark>也可以直接服用append</mark></p> 
<p><img src="https://images2.imgbox.com/bd/ef/j3dgO2qp_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="insertpos_185"></a>insert【在pos之前插入字符串】</h2> 
<p><img src="https://images2.imgbox.com/ea/b4/ui8tmjAN_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="eraseposlen_192"></a>erase【删除从pos开始的len个字符】</h2> 
<p><img src="https://images2.imgbox.com/bf/92/IOYwIgXZ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="swap_198"></a>swap</h2> 
<p><mark>因为存放字符串的空间是在堆区开辟的，用成员str去指向的<br> 所以直接交换两个对象的str中存放的地址就可以完成存储的字符串的交换了</mark><br> <code>不需要拷贝</code><br> <img src="https://images2.imgbox.com/a4/03/PXfAUPLY_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b9/bc/CH7nKF46_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="find_209"></a>find</h2> 
<p><img src="https://images2.imgbox.com/05/99/tP4XnS84_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="substr_215"></a>substr</h2> 
<p><img src="https://images2.imgbox.com/e8/a3/Ucvee7GJ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="operator_220"></a>operator+</h2> 
<p>直接复用<code>operator+=</code><br> <mark>因为+不改变字符串本身，所以要用一个临时对象存储+=之后的字符，再用传值返回即可</mark></p> 
<p><img src="https://images2.imgbox.com/09/c2/xZCgiQxr_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="compare_229"></a>compare</h2> 
<p><img src="https://images2.imgbox.com/69/d7/WFISsKe2_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_234"></a>比较运算符重载</h2> 
<h3><a id="operator_236"></a>operator&gt;</h3> 
<p>复用<code>compare</code><br> <img src="https://images2.imgbox.com/4e/81/0bk5U6qH_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="operator_242"></a>operator==</h3> 
<p>复用<code>compare</code><br> <img src="https://images2.imgbox.com/25/cb/lpUArVWP_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="operator_249"></a>operator&lt;</h3> 
<p><mark>复用<code>operator&gt;</code>和<code>operator==</code></mark><br> <img src="https://images2.imgbox.com/27/5c/n6Kffh37_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="operator_255"></a>operator&gt;</h3> 
<p><mark>复用<code>operator&gt;</code>和<code>operator==</code></mark><br> <img src="https://images2.imgbox.com/f2/02/Rmu1P12d_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="operator_262"></a>operator&lt;=</h3> 
<p><mark>复用<code>operator&gt;</code></mark></p> 
<p><img src="https://images2.imgbox.com/fd/44/tG5qqv2D_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="operator_270"></a>operator!=</h3> 
<p><mark>复用<code>operator==</code></mark><br> <img src="https://images2.imgbox.com/be/e7/vkXoc8Tv_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="c_str_277"></a>c_str</h2> 
<p>作用是获取string对象中的str成员。</p> 
<p><mark>一般是要在C++中使用C语言函数时使用，因为C语言不支持string，所以只能用字符指针代替一下</mark></p> 
<p><img src="https://images2.imgbox.com/83/bf/lXkPH4fY_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="operator_286"></a>operator&lt;&lt;【输出运算符重载】</h2> 
<p>重载了之后就可以<br> <mark>直接用cout输出string实例化的对象了</mark></p> 
<p>例</p> 
<pre><code class="prism language-cpp">string <span class="token function">a</span><span class="token punctuation">(</span>“aaaaa”<span class="token punctuation">)</span><span class="token punctuation">;</span>
cout<span class="token operator">&lt;&lt;</span>a<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9a/ec/vAfOlw3p_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="operator_301"></a>operator&gt;&gt;【输入运算符重载】</h2> 
<p>重载了之后就可以<br> <mark>直接用cin把字符串输入到string实例化的对象里面了</mark></p> 
<pre><code class="prism language-cpp">istream是输入流对象，比如我们常用的  cin  就是  istream实例化的对象

istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  存储  输入的  每一行的字符

    <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  使用sum记录输入的  每一行  的字符个数
    <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    \n是换行符（回车），所以  没遇到  \n就  没换行
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span>  一次读取一个字符
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">==</span> <span class="token number">99</span><span class="token punctuation">)</span>  当sum等于<span class="token number">99</span>时说明  str数组存不下了
        <span class="token punctuation">{<!-- --></span>
            str<span class="token punctuation">[</span>sum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>  末尾加上了\<span class="token number">0</span>才是字符串

            obj <span class="token operator">+=</span> str<span class="token punctuation">;</span>  使用<span class="token operator">+=</span>把str数组中的字符先加上去

            sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  sum置成<span class="token number">0</span>，继续记录
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>  否则
        <span class="token punctuation">{<!-- --></span>
            把读取到的字符存进str数组里
            str<span class="token punctuation">[</span>sum<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    sum<span class="token operator">!=</span><span class="token number">0</span>说明最后输入的最后一行字符个数  小于<span class="token number">99</span>个，没有<span class="token operator">+=</span>上
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        str<span class="token punctuation">[</span>sum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>  末尾加上了\<span class="token number">0</span>才是字符串

        obj <span class="token operator">+=</span> str<span class="token punctuation">;</span>  使用<span class="token operator">+=</span>把str数组中的字符先加上去
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> is<span class="token punctuation">;</span>  为支持链式编程，返回  输入流对象  的引用
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_347"></a>全部代码</h2> 
<h3><a id="mystringh_348"></a>mystring.h</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;assert.h&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> mystring
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">class</span> <span class="token class-name">string</span>
    <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span><span class="token operator">:</span>
        <span class="token keyword">typedef</span> <span class="token keyword">char</span><span class="token operator">*</span> iterator<span class="token punctuation">;</span>
        <span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> const_iterator<span class="token punctuation">;</span>
        

        <span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

        iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

        size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        size_t <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token operator">=</span><span class="token char">'\0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_t n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

        <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>

        string<span class="token operator">&amp;</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        string<span class="token operator">&amp;</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        string <span class="token function">substr</span><span class="token punctuation">(</span>size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
        string <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        string <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span>obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>
       
    <span class="token keyword">private</span><span class="token operator">:</span>
        <span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span><span class="token comment">//指向存放字符串的堆区空间的指针</span>
        size_t _size<span class="token punctuation">;</span><span class="token comment">//字符串的有效字符个数</span>
        size_t _capacity<span class="token punctuation">;</span><span class="token comment">//字符串的最大容量</span>

        <span class="token keyword">static</span> <span class="token keyword">const</span> size_t npos<span class="token punctuation">;</span><span class="token comment">//理论上可以存储的最大字符个数</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span>string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h3><a id="mystringcpp_428"></a>mystring.cpp</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"string.h"</span></span>

<span class="token keyword">namespace</span> mystring
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> size_t string<span class="token double-colon punctuation">::</span>npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    string<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token comment">//因为成员在堆区申请了空间所以要写深拷贝的拷贝构造</span>
    <span class="token punctuation">{<!-- --></span>
        _str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>obj<span class="token punctuation">.</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 申请size + 1个空间，那多出来的1是给'\0'的</span>


        <span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用该函数把字符串把obj中的字符串拷贝过来</span>


        _capacity <span class="token operator">=</span> obj<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>


        _size <span class="token operator">=</span> obj<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span> <span class="token comment">//让str的缺省值为""（空字符串）</span>

        <span class="token operator">:</span><span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//构造函数会先走成员初始化列表，借此先计算出size</span>
    <span class="token punctuation">{<!-- --></span>
         <span class="token function">assert</span><span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//防止传入的字符指针是空的</span>

         _str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//申请size+1个空间，那多出来的1是给'\0'的</span>

         <span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用该函数把字符串str中的字符拷贝过来</span>

         _capacity <span class="token operator">=</span> _size<span class="token punctuation">;</span><span class="token comment">//设置初始最大容量和size一样大</span>
    <span class="token punctuation">}</span>

    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>obj<span class="token punctuation">)</span><span class="token comment">//防止自己赋值给自己</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span><span class="token comment">//先释放接收赋值之前str指向的堆区空间</span>
                          <span class="token comment">//因为接收赋值之后，str中存放的地址就被覆盖了</span>

            _str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>obj<span class="token punctuation">.</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//申请size+1个空间，那多出来的1是给'\0'的</span>

            <span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝字符串（把右参数拷贝给左参数）</span>

            _size <span class="token operator">=</span> obj<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>

            _capacity <span class="token operator">=</span> obj<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token class-name">string</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span><span class="token comment">//释放str指向的堆区空间</span>

        _str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

        _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    string<span class="token double-colon punctuation">::</span>iterator string<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//普通起始迭代器</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string<span class="token double-colon punctuation">::</span>const_iterator string<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token comment">//const起始迭代器</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string<span class="token double-colon punctuation">::</span>iterator  string<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//普通结束迭代器</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string<span class="token double-colon punctuation">::</span>const_iterator  string<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token comment">//const结束迭代器</span>
    <span class="token punctuation">{<!-- --></span>    
        <span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    size_t  string<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span><span class="token comment">//当要调整的size，n大于最大容量时，就要扩容</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//申请size+1个空间，那多出来的1是给'\0'的</span>

            <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝字符串（把右参数拷贝给左参数）</span>

            <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span><span class="token comment">//释放扩容前str指向的空间</span>

            _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span><span class="token comment">//完成扩容</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> _size <span class="token operator">&lt;</span>n<span class="token punctuation">;</span> _size<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//把多出来的有效字符用c补上</span>
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span> <span class="token comment">//补完之后加上字符串结束标志'\0'</span>

            _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span><span class="token comment">//更新最大容量</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _size<span class="token punctuation">)</span><span class="token comment">//如果调整之后的size  大于  原来的size</span>
                          <span class="token comment">//就要把少（n-size)的有效字符用c补上</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> _size <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> _size<span class="token operator">++</span><span class="token punctuation">)</span><span class="token comment">//把多出来的有效字符用c补上</span>
                <span class="token punctuation">{<!-- --></span>
                    _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//补完之后加上字符串结束标志'\0'</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token comment">//如果调整之后的size  小于  原来的size</span>
                <span class="token comment">//就要把多的字符删除</span>
            <span class="token punctuation">{<!-- --></span>
                _size <span class="token operator">=</span> n<span class="token punctuation">;</span><span class="token comment">//调整有效字符大小</span>

                _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//直接把n位置改成'\0'即可删除多余字符</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    size_t string<span class="token double-colon punctuation">::</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _capacity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span><span class="token comment">//注意：n是指元素个数，不是字节数</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span><span class="token comment">//当要调整的容量n大于capacity时,才扩容</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//申请size+1个空间，那多出来的1是给'\0'的</span>

            <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝字符串（把右参数拷贝给左参数）</span>

            <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span><span class="token comment">//拷贝之后再释放旧空间</span>

            _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span><span class="token comment">//指向新开辟的空间</span>

            _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span><span class="token comment">//更改最大容量</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        _str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//如果size==0就为真，就会return true</span>
                          <span class="token comment">//如果size!=0就为假，就会return false</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">char</span><span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">assert</span><span class="token punctuation">(</span>pos<span class="token operator">&lt;</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//防止越界访问</span>



        <span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//因为存放字符的空间是连续的</span>
                         <span class="token comment">//所以直接像数组一样，使用pos位置的字符就可以</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//const修饰的对象会自动调用下面这个</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//防止越界访问</span>


        <span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//在串尾加上一个string对象或者  字符串【可以隐式类型转换为string对象】</span>
    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">&lt;</span> obj<span class="token punctuation">.</span>_size <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token comment">//如果容量不够了</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">reserve</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>_size <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//就扩容</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//从指定地址开始  拷贝字符串（把右参数拷贝给左参数）</span>
        <span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>

        _size <span class="token operator">+=</span> obj<span class="token punctuation">.</span>_size<span class="token punctuation">;</span><span class="token comment">//改变有效字符个数</span>

        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//在串尾加上一个字符</span>
    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">&lt;</span>_size<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//如果容量不够了</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//就扩容</span>
        <span class="token punctuation">}</span>

        _str<span class="token punctuation">[</span>_size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>

        _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//\0被ch覆盖了，再加回来</span>

        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>

        <span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//复用append，尾插一个字符c</span>

    <span class="token punctuation">}</span>

    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">append</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//复用append，尾插一个string对象/字符串</span>

        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">append</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//复用append，尾插一个字符c</span>

        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">&lt;</span> obj<span class="token punctuation">.</span>_size <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token comment">//如果容量不够了</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">reserve</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>_size <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//就扩容</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//从要插入的pos位置开始，把pos和其之后的字符都</span>
        <span class="token comment">//向后移动  传入的对象的size个位置</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> _size<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> pos<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _str<span class="token punctuation">[</span>i <span class="token operator">+</span> obj<span class="token punctuation">.</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//把字符串插入进去</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> pos<span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>obj<span class="token punctuation">.</span>_size<span class="token operator">+</span>pos<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span>j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        _size <span class="token operator">+=</span> obj<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
        _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//再补上\0</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">&lt;</span> _size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> _size<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> pos<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _str<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos <span class="token punctuation">,</span> size_t len<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> _size <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token comment">//如果len大于pos及其之后的字符的长度  或者 len==npos</span>
        <span class="token punctuation">{<!-- --></span>
            _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//就直接把pos及其之后的字符  全部删除</span>

            _size <span class="token operator">=</span> pos<span class="token punctuation">;</span><span class="token comment">//把size更改成新的有效长度</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token comment">//否则</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//把从pos开始的字符都  用它+len之后的字符进行覆盖，即可完成删除</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span>_size<span class="token operator">-</span>len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>i <span class="token operator">+</span> len<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            _size <span class="token operator">-=</span> len<span class="token punctuation">;</span><span class="token comment">//把size更改成新的有效长度</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//使用库里面的swap把 两个对象的成员变量交换即可</span>
        std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//获取string对象中的  str成员</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> string<span class="token double-colon punctuation">::</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//从pos位置开始查找字符串</span>
    size_t string<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span>obj<span class="token punctuation">,</span> size_t pos<span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">//p为找到的字符串的首地址</span>

        <span class="token comment">//使用string.h里面的strstr查找子串，如果  找不到  就返回NULL</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token operator">=</span><span class="token function">strstr</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> npos<span class="token punctuation">;</span><span class="token comment">//找不到  就返回  npos</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> p <span class="token operator">-</span> _str<span class="token punctuation">;</span><span class="token comment">//返回下标，p为找到的字符串的  首地址</span>
                            <span class="token comment">//p-字符数组的首地址str  等于str到p之前的元素个数-1，即下标</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>



    size_t string<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">,</span> size_t pos <span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>_str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> npos<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//把从pos开始的长度为len的子串  作为一个新的字符串返回</span>
    string string<span class="token double-colon punctuation">::</span><span class="token function">substr</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len<span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> _size <span class="token operator">-</span> pos<span class="token punctuation">)</span><span class="token comment">//如果len大于pos及其之后的所有 字符的长度或者len==npos</span>
        <span class="token punctuation">{<!-- --></span>
            string <span class="token function">tmp</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//直接用默认构造把pos及其之后的字符全部  做新串返回</span>

            <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token comment">//否则</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//申请长度为len+1的空间，多出的1是给\0的</span>
            <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token function">strncpy</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> _str<span class="token operator">+</span>pos<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把从pos开始的长度为len的子串拷贝给p</span>

            p<span class="token punctuation">[</span>len<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>

            string <span class="token function">tmp</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用默认构造创建出新字符串</span>

            <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//比较两个字符串的大小</span>
    <span class="token comment">//返回值大于0就是  左&gt;右</span>
    <span class="token comment">// 返回值等于0就是  左=右</span>
    <span class="token comment">// 返回值小于0就是  左&lt;右</span>
    <span class="token keyword">int</span> string<span class="token double-colon punctuation">::</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span> <span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//使用string.h里面的  strcmp即可完成判断</span>
        <span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    string string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        string <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝构造出一个临时对象</span>

        tmp <span class="token operator">+=</span> obj<span class="token punctuation">;</span><span class="token comment">//让临时对象去+=，就不会改变字符串自己了</span>

        <span class="token keyword">return</span> tmp<span class="token punctuation">;</span><span class="token comment">//传值返回</span>
    <span class="token punctuation">}</span>



    string string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        string <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//拷贝构造出一个临时对象</span>

        tmp <span class="token operator">+=</span> c<span class="token punctuation">;</span>

        <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compare</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//返回值大于0就是  左&gt;右</span>
                             <span class="token comment">//即调用函数的对象&gt;传入的对象</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;=</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// &lt; 就是&gt;=取反</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//大于等于  是  大于或者等于</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;</span> obj <span class="token operator">||</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span>

            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>

            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//小于等于就是  不大于，即大于取反</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compare</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//返回值大于0就是  左=右</span>
                              <span class="token comment">//即调用函数的对象=传入的对象</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>

            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//不等于就是  等于取反</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token operator">==</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>

            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ostream是输出流对象，比如我们常用的cout就是  ostream实例化的对象</span>
    ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取string对象中的 str成员</span>

        os <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">;</span><span class="token comment">//可以用字符指针直接输出  它指向  的字符串</span>

        <span class="token keyword">return</span> os<span class="token punctuation">;</span><span class="token comment">//为支持链式编程，返回输出流对象的引用</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//istream是输入流对象，比如我们常用的  cin  就是  istream实例化的对象</span>
    istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//存储  输入的  每一行的字符</span>

        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//使用sum记录输入的  每一行  的字符个数</span>
        <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">//\n是换行符（回车），所以  没遇到  \n就  没换行</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span><span class="token comment">//一次读取一个字符</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">==</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token comment">//当sum等于99时说明  str数组存不下了</span>
            <span class="token punctuation">{<!-- --></span>
                str<span class="token punctuation">[</span>sum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//末尾加上了\0才是字符串</span>

                obj <span class="token operator">+=</span> str<span class="token punctuation">;</span><span class="token comment">//使用+=把str数组中的字符先加上去</span>

                sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//把sum置成0，继续记录</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span><span class="token comment">//否则</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//把读取到的字符存进str数组里</span>
                str<span class="token punctuation">[</span>sum<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//sum!=0说明最后输入的最后一行字符个数  小于99个，没有+=上</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            str<span class="token punctuation">[</span>sum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span><span class="token comment">//末尾加上了\0才是字符串</span>

            obj <span class="token operator">+=</span> str<span class="token punctuation">;</span><span class="token comment">//使用+=把str数组中的字符先加上去</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> is<span class="token punctuation">;</span><span class="token comment">//为支持链式编程，返回  输入流对象  的引用</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b685e6a4221fc005c3cbc3b97faa14fe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">知乎正通过乱码来干扰必应/谷歌等爬虫，从而限制中文数据集被用于AI训练</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ded6e11733a06f82f6737aa0a0e33ec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在 Java 中的使用Selenium 测试框架</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>