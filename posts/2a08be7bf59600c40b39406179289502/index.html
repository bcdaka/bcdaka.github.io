<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AndroidAutomotive模块介绍（一）整体介绍 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2a08be7bf59600c40b39406179289502/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="AndroidAutomotive模块介绍（一）整体介绍">
  <meta property="og:description" content="前言 Android Automotive 是一个基本 Android 平台，可运行 IVI 系统中预安装的 Android 应用以及可选的第二方和第三方 Android 应用。
本系列文档将会系统的介绍 Android Automotive 的功能、架构、逻辑等。模块逻辑将从 应用api接口、系统服务、底层服务，各层展开介绍。本篇文档将从整体的角度描述 Android Automotive，例如，定义、功能、架构等，后续将从各层展开详细描述。
下一篇：AndroidAutomotive模块介绍（二）应用及接口介绍
正文 1、介绍 1.1 定义 什么是 Android Automotive？
Android Automotive 是一个基本 Android 平台，可运行 IVI （In-Vehicle Infotainment）系统中预安装的 Android 应用以及可选的第二方和第三方 Android 应用。
Android Automotive 可为车载信息娱乐系统和车机提供开放性、自定义和规模化特性。开放性在免费的开源代码库中提供基本的车载信息娱乐功能，可进一步提升效率。借助自定义特性，实现人员能够在适当的情况下实现商品的差异化。规模化特性是通过 Android 的通用框架、语言和 API 来实现的，所有这些都使得全球数十万 Android 开发者的开发专长和成品软件得以重复使用。
1.2 发展 1.2.1 Android O 版本特性 Google 在 Android O 版本上新增了 Treble 化，对 Android 系统的框架进行了一次较大的改变，打算彻底解决 Android 系统碎片化的问题，让制造商以更低的成本、更轻松、更快速的将设备升级到新版的 Android 系统，Google 称这个架构为 Treble 架构。Android O 版本之前的系统架构中，Android Framework 与 Android Hal 是打包成一个 system.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-12T10:24:42+08:00">
    <meta property="article:modified_time" content="2024-04-12T10:24:42+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AndroidAutomotive模块介绍（一）整体介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>Android Automotive 是一个基本 Android 平台，可运行 IVI 系统中预安装的 Android 应用以及可选的第二方和第三方 Android 应用。</p> 
<p>本系列文档将会系统的介绍 Android Automotive 的功能、架构、逻辑等。模块逻辑将从 应用api接口、系统服务、底层服务，各层展开介绍。本篇文档将从整体的角度描述 Android Automotive，例如，定义、功能、架构等，后续将从各层展开详细描述。<br> 下一篇：<a href="https://blog.csdn.net/Yang_Mao_Shan/article/details/137669721?spm=1001.2014.3001.5502">AndroidAutomotive模块介绍（二）应用及接口介绍</a></p> 
<h2><a id="_7"></a>正文</h2> 
<h3><a id="1_9"></a>1、介绍</h3> 
<h4><a id="11__11"></a>1.1 定义</h4> 
<p>什么是 Android Automotive？</p> 
<p>Android Automotive 是一个基本 Android 平台，可运行 IVI （In-Vehicle Infotainment）系统中预安装的 Android 应用以及可选的第二方和第三方 Android 应用。</p> 
<p>Android Automotive 可为车载信息娱乐系统和车机提供开放性、自定义和规模化特性。开放性在免费的开源代码库中提供基本的车载信息娱乐功能，可进一步提升效率。借助自定义特性，实现人员能够在适当的情况下实现商品的差异化。规模化特性是通过 Android 的通用框架、语言和 API 来实现的，所有这些都使得全球数十万 Android 开发者的开发专长和成品软件得以重复使用。</p> 
<h4><a id="12__19"></a>1.2 发展</h4> 
<h5><a id="121_Android_O__21"></a>1.2.1 Android O 版本特性</h5> 
<p>Google 在 Android O 版本上新增了 Treble 化，对 Android 系统的框架进行了一次较大的改变，打算彻底解决 Android 系统碎片化的问题，让制造商以更低的成本、更轻松、更快速的将设备升级到新版的 Android 系统，Google 称这个架构为 Treble 架构。Android O 版本之前的系统架构中，Android Framework 与 Android Hal 是打包成一个 system.img 的，Framework 与 Hal 之间是紧耦合的，通过链接对应的硬件 so 库的方式建立功能交互，所以 Android Framework 的升级的同时也需要对 Android Hal 进行升级。</p> 
<p>Android O 版本之前通信架构：<br> <img src="https://images2.imgbox.com/28/a3/9kb9Ij2A_o.png" alt="在这里插入图片描述"></p> 
<p>Android O 之后的版本，Android 更新了系统框架设计，成为 Treble 架构，架构将 Hal 层与 Framework 层分离，将 Android 系统层服务打包到 system.img 中，Android Hal 打包到 vendor.img 中。引入了 HIDL 的接口语言来处理 Framework 与 Hal 之间的通信。</p> 
<p>Android O 版本之后的通信架构：<br> <img src="https://images2.imgbox.com/e5/fe/cyTFbjzh_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="122_Android_Automotive__35"></a>1.2.2 Android Automotive 发展</h5> 
<p>Android O 版本中推出了 Treble 架构的同时又推出了 Android Automotive 功能，该功能是专门为车载而设计的一个功能模块。同时也表示 Google 正式进军汽车车载领域。</p> 
<p>Android Automotive 就是 Android 平台，在 Android 强大的功能基础上扩展了 Android 在车载上的功能，增加了对汽车特定要求、功能和技术的支持，成为一个一站式全栈车载信息娱乐平台。</p> 
<p>Google 在多年前已经布局车载领域，2014 年推出了 Android Auto，专门为驾驶环境而设计的一个 APP。功能是将手机端的应用投屏到车机上，在有线或者无线连接的基础上，将手机端的应用、信息、界面显示到车机屏幕上，扩展车机的功能使用。</p> 
<p>基于手机端的 Android Auto 方案，Google 将适合车载的功能集成在车载 Android 系统，推出了 Android Automotive，这样解决了需要有线或者无线连接的通信介质，这样开发的重点就在车机端，可以和车身信号进行交互，做到车机与各 ECU 件之间功能的完美融合，但是对于应用来说，车机端的应用还是依赖各厂商的定制，提供的原生应用比较少。</p> 
<h3><a id="2_45"></a>2、架构</h3> 
<h4><a id="21__47"></a>2.1 原生架构图</h4> 
<p>这里引用一张原生的架构图，来看下 Android Automotive 架构：<br> <img src="https://images2.imgbox.com/f9/38/5fpdyjdW_o.png" alt="在这里插入图片描述"></p> 
<p>从上面的原生架构图中，我们可以发现，Google 把 Android Automotive 分为 System Apps、Android Framewrok API、Android System Servies、Vehicle Hal 四层功能。</p> 
<ul><li>System Apps：车载上层的应用软件，主要用于实现人机交互功能，包括空调显示、车辆健康、泊车辅助等。</li><li>Android Framework API：提供给上层应用的车辆 API 接口。</li><li>Android System Services：系统中与车相关的服务，可以统称为 CarService，由很多个子 Service 组成，包括 CarHavcService、CarSensorService 等。</li><li>Vehicle Hal：用于定义 OEM 可以实现的车辆属性的接口。Android Automotive 的硬件抽象层 (HAL) 为 Android 框架提供了一致的接口。系统集成商可以将特定于功能的平台 HAL 接口（如 HVAC）与特定于技术的网络接口（如 CAN 总线）连接，以实现车载 HAL 模块。典型的实现可能包括运行专有实时操作系统 (RTOS) 的专用微控制器单元 (MCU)，该微控制器单元用于 CAN 总线访问或类似操作，可通过串行链路连接到运行 Android Automotive 的 CPU。除了专用 MCU，还可以将总线访问作为虚拟 CPU 来实现。只要实现符合车载 HAL 的接口要求，每个合作伙伴都可以选择适合硬件的架构。</li></ul> 
<h4><a id="22__60"></a>2.2 架构图</h4> 
<p>那么将原生架构图扩展开来，整体架构图如下所示：<br> <img src="https://images2.imgbox.com/56/43/Ww4eSBxX_o.png" alt="在这里插入图片描述"></p> 
<p>上图中是 Android Automotive 的架构图，上层的 CarServiceApp 通过 CarServiceApi 接口调用到 Framework 服务中，中间通过 Aidl 通信方式交互。Framework CarService 服务通过 android.hardware.automotive.vehicle 库 Hidl 方式与 Vehicle Hal 层交互。Vehicle Hal 层下是与 OEM 厂商建立交互逻辑，实现方式多样。<br> <img src="https://images2.imgbox.com/1c/f0/0QTEt0Vl_o.png" alt="在这里插入图片描述"></p> 
<p>上图在架构上对于 Car API 与 Car Service 展开子模块描述，Android Automotive 中 APP、Service 包含许多子模块，后续将会展开描述</p> 
<h4><a id="23__72"></a>2.3 架构简要描述</h4> 
<h5><a id="231_Car_Service_App_74"></a>2.3.1 Car Service App</h5> 
<p>Car Service App 代码路径为：/android/packages/apps/Car。</p> 
<p>路径下包含许多应用，Android Automotive 为系统定制了一些专门适用车载系统的应用，以代替传统的手机应用模块。<br> <img src="https://images2.imgbox.com/b4/40/T6xGAK6q_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="232_Car_Service_Api_82"></a>2.3.2 Car Service Api</h5> 
<p>Car Service Api 代码路径为：/android/packages/services/Car/car-lib。</p> 
<p>系统应用或者 OEM 三方应用通过 Car Service Api 调用 Car Service 功能。<br> <img src="https://images2.imgbox.com/3c/4e/ZDIWNcOj_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="233_Car_Service_90"></a>2.3.3 Car Service</h5> 
<p>Car Service 代码路径为：/android/packages/services/Car。</p> 
<p>系统框架层提供了多个模块，来对 Android Automotive 进行支持，最重要的有一个服务CarService (com.android.car)。</p> 
<p>CarService 是一个类似 Android 系统中 SystemSever 的服务。它由一个服务启动，而里面又控制着数十个子模块服务。CarService 中 CarService 只作为服务的入口，具体的业务逻辑都在内部的子服务中处理。<br> <img src="https://images2.imgbox.com/39/96/CVAUEMQP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c8/d2/FN7NamFl_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="234_Vehicle_Hal_103"></a>2.3.4 Vehicle Hal</h5> 
<p>Vehicle Hal 代码路径为：/android/hardware/interfaces/automotive。</p> 
<p>VehicleService是一个native服务，代码实现在目录 /android/hardware/interfaces/automotive/vehicle/2.0/default。</p> 
<p>硬件抽象层主要是提供了一个native服务android.hardware.automotive.vehicle@2.0-service，负责处理车辆相关的业务。</p> 
<h4><a id="3_111"></a>3、总结</h4> 
<p>本篇文档中主要从整体的角度分析 Android Automotive，包括系统架构以及架构各层之间的交互，简要描述架构各层的功能及代码路径。后续将会对于各层功能展开描述。</p> 
<p>下一篇：<a href="https://blog.csdn.net/Yang_Mao_Shan/article/details/137669721?spm=1001.2014.3001.5502">AndroidAutomotive模块介绍（二）应用及接口介绍</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b15463825080d95e8281d3b0ce75c06/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AndroidAutomotive模块介绍（四）VehicleHal介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cdda99e7dceb00a4fbd59d0e3e6d01b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">大数据入门系列 2：全网最全，VMware 虚拟机上安装 Ubuntu 完整步骤及需要注意的问题_ubuntu虚拟机硬件兼容性选哪个</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>