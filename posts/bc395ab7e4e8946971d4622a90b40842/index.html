<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前端开发实战：利用Web Speech API之speechSynthesis实现文字转语音功能 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/bc395ab7e4e8946971d4622a90b40842/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="前端开发实战：利用Web Speech API之speechSynthesis实现文字转语音功能">
  <meta property="og:description" content="文章目录 一、Web Speech 的概念及用法二、Web Speech 的 API 接口1、SpeechSynthesis属性方法 2、SpeechSynthesisUtterance属性方法 三、Web Speech 的 用法用法演示一用法演示二htmljs 四、扩展 一、Web Speech 的概念及用法 在开发业务系统时，有时候可能需要使用语音播报一段文字。
目前文字转语音即语音合成技术现在已经很成熟了，像百度、讯飞等都提供了相关的服务，支持将文字转换成各种形式的语音，通常这些服务都需要付费使用，如果对语音要求不高，并且又想节约成本，那么可以直接使用浏览器的语音合成功能。
Web Speech API 使你能够将语音数据合并到 Web 应用程序中。Web Speech API 有两个部分：SpeechSynthesis 语音合成（文本到语音 TTS）和 SpeechRecognition 语音识别（异步语音识别）。
SpeechSynthesisUtterance是HTML5中新增的API，用于将指定文字合成为对应的语音。它包含一些配置项，可以指定如何去阅读（如语言、音量、音调等）。
Web Speech API 使 Web 应用能够处理语音数据，该项 API 包含以下两个部分：
语音识别通过 SpeechRecognition (en-US) 接口进行访问，它提供了识别从音频输入（通常是设备默认的语音识别服务）中识别语音情景的能力。一般来说，你将使用该接口的构造函数来构造一个新的 SpeechRecognition (en-US) 对象，该对象包含了一系列有效的对象处理函数来检测识别设备麦克风中的语音输入。SpeechGrammar 接口则表示了你应用中想要识别的特定文法。文法则通过 JSpeech Grammar Format (JSGF.) 来定义。
语音合成通过 SpeechSynthesis 接口进行访问，它提供了文字到语音（TTS）的能力，这使得程序能够读出它们的文字内容（通常使用设备默认的语音合成器）。不同的声音类类型通过 SpeechSynthesisVoice (en-US) 对象进行表示，不同部分的文字则由 SpeechSynthesisUtterance (en-US) 对象来表示。你可以将它们传递给 SpeechSynthesis.speak() (en-US) 方法来产生语音。
二、Web Speech 的 API 接口 1、SpeechSynthesis SpeechSynthesis是语音服务的控制接口；它可以用于获取设备上关于可用的合成声音的信息，开始、暂停语音，或除此之外的其他命令。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-28T17:17:47+08:00">
    <meta property="article:modified_time" content="2024-03-28T17:17:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前端开发实战：利用Web Speech API之speechSynthesis实现文字转语音功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#Web_Speech__2" rel="nofollow">一、Web Speech 的概念及用法</a></li><li><a href="#Web_Speech__API__19" rel="nofollow">二、Web Speech 的 API 接口</a></li><li><ul><li><a href="#1SpeechSynthesis_21" rel="nofollow">1、SpeechSynthesis</a></li><li><ul><li><a href="#_24" rel="nofollow">属性</a></li><li><a href="#_34" rel="nofollow">方法</a></li></ul> 
     </li><li><a href="#2SpeechSynthesisUtterance_51" rel="nofollow">2、SpeechSynthesisUtterance</a></li><li><ul><li><a href="#_54" rel="nofollow">属性</a></li><li><a href="#_63" rel="nofollow">方法</a></li></ul> 
    </li></ul> 
    </li><li><a href="#Web_Speech___74" rel="nofollow">三、Web Speech 的 用法</a></li><li><ul><li><a href="#_76" rel="nofollow">用法演示一</a></li><li><a href="#_83" rel="nofollow">用法演示二</a></li><li><ul><li><a href="#html_85" rel="nofollow">html</a></li><li><a href="#js_91" rel="nofollow">js</a></li></ul> 
    </li></ul> 
    </li><li><a href="#_112" rel="nofollow">四、扩展</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="Web_Speech__2"></a>一、Web Speech 的概念及用法</h4> 
<p>在开发业务系统时，有时候可能需要使用语音播报一段文字。</p> 
<p>目前文字转语音即语音合成技术现在已经很成熟了，像百度、讯飞等都提供了相关的服务，支持将文字转换成各种形式的语音，通常这些服务都需要付费使用，如果对语音要求不高，并且又想节约成本，那么可以直接使用浏览器的语音合成功能。</p> 
<p>Web Speech API 使你能够将语音数据合并到 Web 应用程序中。Web Speech API 有两个部分：SpeechSynthesis 语音合成（文本到语音 TTS）和 SpeechRecognition 语音识别（异步语音识别）。</p> 
<p>SpeechSynthesisUtterance是HTML5中新增的API，用于将指定文字合成为对应的语音。它包含一些配置项，可以指定如何去阅读（如语言、音量、音调等）。</p> 
<p>Web Speech API 使 Web 应用能够处理语音数据，该项 API 包含以下两个部分：</p> 
<ul><li> <p>语音识别通过 SpeechRecognition (en-US) 接口进行访问，它提供了识别从音频输入（通常是设备默认的语音识别服务）中识别语音情景的能力。一般来说，你将使用该接口的构造函数来构造一个新的 SpeechRecognition (en-US) 对象，该对象包含了一系列有效的对象处理函数来检测识别设备麦克风中的语音输入。SpeechGrammar 接口则表示了你应用中想要识别的特定文法。文法则通过 JSpeech Grammar Format (JSGF.) 来定义。</p> </li><li> <p>语音合成通过 SpeechSynthesis 接口进行访问，它提供了文字到语音（TTS）的能力，这使得程序能够读出它们的文字内容（通常使用设备默认的语音合成器）。不同的声音类类型通过 SpeechSynthesisVoice (en-US) 对象进行表示，不同部分的文字则由 SpeechSynthesisUtterance (en-US) 对象来表示。你可以将它们传递给 SpeechSynthesis.speak() (en-US) 方法来产生语音。</p> </li></ul> 
<h4><a id="Web_Speech__API__19"></a>二、Web Speech 的 API 接口</h4> 
<h5><a id="1SpeechSynthesis_21"></a>1、SpeechSynthesis</h5> 
<p>SpeechSynthesis是语音服务的控制接口；它可以用于获取设备上关于可用的合成声音的信息，开始、暂停语音，或除此之外的其他命令。</p> 
<h6><a id="_24"></a>属性</h6> 
<p>SpeechSynthesis.paused 只读<br> 当SpeechSynthesis 处于暂停状态时， Boolean 值返回 true 。</p> 
<p>SpeechSynthesis.pending 只读<br> 当语音播放队列到目前为止保持没有说完的语音时， Boolean 值返回 true 。</p> 
<p>SpeechSynthesis.speaking 只读<br> 当语音谈话正在进行的时候，即使SpeechSynthesis处于暂停状态， Boolean 返回 true 。</p> 
<h6><a id="_34"></a>方法</h6> 
<p>SpeechSynthesis.cancel()<br> 取消语音播放。</p> 
<p>SpeechSynthesis.getVoices()<br> 返回当前设备所有可用声音的 SpeechSynthesisVoice列表。</p> 
<p>SpeechSynthesis.pause()<br> 把 SpeechSynthesis 暂停语音播放。</p> 
<p>SpeechSynthesis.resume()<br> 把 SpeechSynthesis 对象置为一个非暂停状态：如果已经暂停了则继续。</p> 
<p>SpeechSynthesis.speak()<br> 添加语音到播放列队，将会在其他语音播放完后自动播放。</p> 
<h5><a id="2SpeechSynthesisUtterance_51"></a>2、SpeechSynthesisUtterance</h5> 
<p>SpeechSynthesisUtterance 表示一次发音请求，其中包含了将由语音服务朗读的内容，以及如何朗读它（例如：语种、音高、音量）。</p> 
<h6><a id="_54"></a>属性</h6> 
<p>lang：获取并设置话语的语言<br> pitch：获取并设置话语的音调（0-2，值越大越尖锐，越低越低沉）<br> rate：获取并设置说话的速度（0.1-10，值越大语速越快，越小语速越慢）<br> text：获取并设置说话时的文本<br> voice：获取并设置说话的声音（0-1）<br> volume：获取并设置说话的音量</p> 
<h6><a id="_63"></a>方法</h6> 
<p>onboundary：当播放至一个词或句子结尾时触发<br> onend：语音播放结束时触发<br> onerror：语音播放错误时触发<br> onmark：当语音播放至 mark 标记时触发<br> onpause：暂停语音播放时触发<br> onresume：恢复语音播放时触发<br> onstart：开始语音播放时触发</p> 
<h4><a id="Web_Speech___74"></a>三、Web Speech 的 用法</h4> 
<h5><a id="_76"></a>用法演示一</h5> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> synth <span class="token operator">=</span> window<span class="token punctuation">.</span>speechSynthesis<span class="token punctuation">;</span>
<span class="token keyword">let</span> utterThis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeechSynthesisUtterance</span><span class="token punctuation">(</span><span class="token string">'支付宝到账5元'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
synth<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span>utterThis<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_83"></a>用法演示二</h5> 
<h6><a id="html_85"></a>html</h6> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">startAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>播放语音<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h6><a id="js_91"></a>js</h6> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">startAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 检查浏览器是否支持Web Speech API  </span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'speechSynthesis'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
	    <span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
		<span class="token comment">// 创建一个新的SpeechSynthesisUtterance对象 </span>
	    <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeechSynthesisUtterance</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
	    msg<span class="token punctuation">.</span>volume <span class="token operator">=</span> <span class="token number">5</span> <span class="token comment">//音量</span>
	    msg<span class="token punctuation">.</span>rate <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">//语速</span>
	    msg<span class="token punctuation">.</span>text <span class="token operator">=</span> input<span class="token punctuation">.</span>value <span class="token comment">//文字</span>
	    speechSynthesis<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token comment">//播放语音</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>  
	    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'浏览器不支持Web Speech API'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个示例会使用默认的语音合成引擎（如果有的话）将"输入框的内容"转换为语音。如果浏览器支持Web Speech API，你应该能够听到这句话被读出来。如果浏览器不支持Web Speech API，这个示例会在控制台输出一条错误消息。</p> 
<h4><a id="_112"></a>四、扩展</h4> 
<p>除了使用Web Speech API之外，还有使用第三方文字转语音（TTS）库的方法，例如使用百度文字转语音开放API或iSpeech TTS引擎。</p> 
<p>使用百度文字转语音开放API的方法需要调用其提供的接口，传入要转换的文字，并设置语言、语速等参数。使用iSpeech TTS引擎则需要引入相应的JavaScript库，并使用其提供的API将文字转换为语音。</p> 
<p>此外，还可以使用浏览器自带的语音助手或插件来实现文字转语音的功能，例如Siri、Alexa等。这些工具通常需要用户进行一些设置和配置，以便能够正确地将文字转换为语音。</p> 
<p>百度文字转语音开放API的调用示例代码如下：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">var</span> text <span class="token operator">=</span> <span class="token string">'你好，世界！'</span><span class="token punctuation">;</span> <span class="token comment">// 要转换为语音的文本  </span>
<span class="token keyword">var</span> apikey <span class="token operator">=</span> <span class="token string">'你的API密钥'</span><span class="token punctuation">;</span> <span class="token comment">// 百度提供的API密钥  </span>
  
<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token literal-property property">text</span><span class="token operator">:</span> text<span class="token punctuation">,</span>  
    <span class="token literal-property property">apikey</span><span class="token operator">:</span> apikey<span class="token punctuation">,</span>  
    <span class="token literal-property property">engine</span><span class="token operator">:</span> <span class="token string">'paddle'</span><span class="token punctuation">,</span> <span class="token comment">// 选择语音合成引擎，支持'paddle'和'deepizone'两种引擎  </span>
    <span class="token literal-property property">voice</span><span class="token operator">:</span> <span class="token string">'zh_cn'</span><span class="token punctuation">,</span> <span class="token comment">// 选择语音类型，支持'zh_cn'和'en'两种类型  </span>
    <span class="token literal-property property">speed</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 语速，取值范围为0-10，数字越大语速越快  </span>
    <span class="token literal-property property">vol</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// 音量，取值范围为0-10，数字越大音量越大  </span>
    <span class="token literal-property property">per</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// 音色，取值范围为0-19，不同数字代表不同音色  </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://tts.baidu.com/text2audio?'</span> <span class="token operator">+</span> $<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将参数拼接成URL  </span>
$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 发送GET请求获取语音数据  </span>
    <span class="token keyword">var</span> audio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Audio</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建Audio对象并播放语音  </span>
    audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bcbf2950e0b1d8eb5a0f71095ab0f55b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android studio未指定模块，无法运行，解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5dd27e790f8683f3b10af27b16e88533/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Unity AI Navigation自动寻路</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>