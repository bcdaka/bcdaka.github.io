<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 使用adb操作WiFi相关指令 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/61bf45b01f4e1294098d6c15e05a7bd1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Android 使用adb操作WiFi相关指令">
  <meta property="og:description" content="没有系统原生设置应用又需要调试WiFi功能时，可以使用如下指令来验证WiFi相关功能
最常用的就是 svc wifi enable/disable，再使用wpa_supplicant/wpa_cli来验证，但对于AP功能就没办法验证了，其实Android有组很强大的shell指令集，包含各个方便，这里只记录下平时使用的WiFi相关指令
1、adb shell cmd wifi -h
查看WiFi所有指令以及参数
2、打开关闭WLAN
adb shell cmd wifi set-wifi-enabled enabled
adb shell cmd wifi set-wifi-enabled disabled
3、扫描WiFi
adb shell cmd wifi start-scan //扫描
adb shell cmd wifi list-scan-results //查看扫描结果
4、连接WiFi
adb shell cmd wifi connect-network TP-LINK_5G_0FE1 wpa2 12345678
//TP-LINK_5G_0FE1 连接WiFi名称
//wpa2 加密方式
//12345678 密码
5、查看WiFi状态
adb shell cmd wifi status
6、打开关闭热点
adb shell cmd wifi start-softap ap_ssidxx wpa2 12345678 -b5
// ap_ssidxx 热点名称">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-13T17:04:31+08:00">
    <meta property="article:modified_time" content="2024-03-13T17:04:31+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 使用adb操作WiFi相关指令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>没有系统原生设置应用又需要调试WiFi功能时，可以使用如下指令来验证WiFi相关功能</p> 
<p>最常用的就是 svc wifi enable/disable，再使用wpa_supplicant/wpa_cli来验证，但对于AP功能就没办法验证了，其实Android有组很强大的shell指令集，包含各个方便，这里只记录下平时使用的WiFi相关指令</p> 
<p>1、adb shell cmd wifi -h</p> 
<p>查看WiFi所有指令以及参数</p> 
<p></p> 
<p>2、打开关闭WLAN</p> 
<p>adb shell cmd wifi set-wifi-enabled enabled</p> 
<p>adb shell cmd wifi set-wifi-enabled disabled</p> 
<p></p> 
<p>3、扫描WiFi</p> 
<p>adb shell cmd wifi start-scan             //扫描</p> 
<p>adb shell cmd wifi list-scan-results    //查看扫描结果</p> 
<p></p> 
<p>4、连接WiFi</p> 
<p>adb shell cmd wifi connect-network TP-LINK_5G_0FE1 wpa2 12345678</p> 
<p>//TP-LINK_5G_0FE1 连接WiFi名称</p> 
<p>//wpa2 加密方式</p> 
<p>//12345678 密码</p> 
<p></p> 
<p>5、查看WiFi状态</p> 
<p>adb shell cmd wifi status</p> 
<p></p> 
<p>6、打开关闭热点</p> 
<p>adb shell cmd wifi start-softap ap_ssidxx wpa2 12345678 -b5</p> 
<p>// ap_ssidxx  热点名称</p> 
<p>// wpa2 加密方式</p> 
<p>//12345678 密码</p> 
<p>//-b5 5G频段</p> 
<p>adb shell cmd wifi stop-softap</p> 
<p></p> 
<p>其他可以指令可以使用adb shell cmd wifi -h查看，如果需要连接WiFi以外的相关指令可以使用adb shell cmd -l(小写L)</p> 
<pre><code class="hljs">Wi-Fi (wifi) commands:
  help or -h
    Print this help text.
  get-country-code
    Gets country code as a two-letter string
  set-wifi-enabled enabled|disabled
    Enables/disables Wifi on this device.
  set-scan-always-available enabled|disabled
    Sets whether scanning should be available even when wifi is off.
  list-scan-results
    Lists the latest scan results
  start-scan
    Start a new scan
  list-networks
    Lists the saved networks
  connect-network &lt;ssid&gt; open|owe|wpa2|wpa3 [&lt;passphrase&gt;] [-m] [-d] [-b &lt;bssid&gt;]
    Connect to a network with provided params and add to saved networks list
    &lt;ssid&gt; - SSID of the network
    open|owe|wpa2|wpa3 - Security type of the network.
        - Use 'open' or 'owe' for networks with no passphrase
           - 'open' - Open networks (Most prevalent)
           - 'owe' - Enhanced open networks
        - Use 'wpa2' or 'wpa3' for networks with passphrase
           - 'wpa2' - WPA-2 PSK networks (Most prevalent)
           - 'wpa3' - WPA-3 PSK networks
    -m - Mark the network metered.
    -d - Mark the network autojoin disabled.
    -b &lt;bssid&gt; - Set specific BSSID.
  add-network &lt;ssid&gt; open|owe|wpa2|wpa3 [&lt;passphrase&gt;] [-m] [-d] [-b &lt;bssid&gt;]
    Add/update saved network with provided params
    &lt;ssid&gt; - SSID of the network
    open|owe|wpa2|wpa3 - Security type of the network.
        - Use 'open' or 'owe' for networks with no passphrase
           - 'open' - Open networks (Most prevalent)
           - 'owe' - Enhanced open networks
        - Use 'wpa2' or 'wpa3' for networks with passphrase
           - 'wpa2' - WPA-2 PSK networks (Most prevalent)
           - 'wpa3' - WPA-3 PSK networks
    -m - Mark the network metered.
    -d - Mark the network autojoin disabled.
    -b &lt;bssid&gt; - Set specific BSSID.
  forget-network &lt;networkId&gt;
    Remove the network mentioned by &lt;networkId&gt;
        - Use list-networks to retrieve &lt;networkId&gt; for the network
  status
    Current wifi status
  set-verbose-logging enabled|disabled
    Set the verbose logging enabled or disabled
  add-suggestion &lt;ssid&gt; open|owe|wpa2|wpa3 [&lt;passphrase&gt;] [-u] [-m] [-s] [-d][-b &lt;bssid&gt;]
    Add a network suggestion with provided params
    Use 'network-suggestions-set-user-approved com.android.shell yes' to approve suggestions added via shell (Needs root access)
    &lt;ssid&gt; - SSID of the network
    open|owe|wpa2|wpa3 - Security type of the network.
        - Use 'open' or 'owe' for networks with no passphrase
           - 'open' - Open networks (Most prevalent)
           - 'owe' - Enhanced open networks
        - Use 'wpa2' or 'wpa3' for networks with passphrase
           - 'wpa2' - WPA-2 PSK networks (Most prevalent)
           - 'wpa3' - WPA-3 PSK networks
    -u - Mark the suggestion untrusted.
    -m - Mark the suggestion metered.
    -s - Share the suggestion with user.
    -d - Mark the suggestion autojoin disabled.
    -b &lt;bssid&gt; - Set specific BSSID.
  remove-suggestion &lt;ssid&gt;
    Remove a network suggestion with provided SSID of the network
  remove-all-suggestions
    Removes all suggestions added via shell
  list-suggestions
    Lists the suggested networks added via shell
  set-connected-score &lt;score&gt;
    Set connected wifi network score (to choose between LTE &amp; Wifi for default route).
    This turns off the active connected scorer (default or external).
    Only works while connected to a wifi network. This score will stay in effect until you call reset-connected-score or the device disconnects from the current network.
    &lt;score&gt; - Integer score should be in the range of 0 - 60
  reset-connected-score
    Turns on the default connected scorer.
    Note: Will clear any external scorer set.
  start-softap &lt;ssid&gt; (open|wpa2) &lt;passphrase&gt; [-b 2|5|6|any]
    Start softap with provided params
    Note that the shell command doesn't activate internet tethering. In some devices, internet sharing is possible when Wi-Fi STA is also enabled and isassociated to another AP with internet access.
    &lt;ssid&gt; - SSID of the network
    open|wpa2 - Security type of the network.
        - Use 'open' for networks with no passphrase
        - Use 'wpa2' for networks with passphrase
    -b 2|5|6|any - select the preferred band.
        - Use '2' to select 2.4GHz band as the preferred band
        - Use '5' to select 5GHz band as the preferred band
        - Use '6' to select 6GHz band as the preferred band
        - Use 'any' to indicate no band preference
    Note: If the band option is not provided, 2.4GHz is the preferred band.
          The exact channel is auto-selected by FW unless overridden by force-softap-channel command
  stop-softap
    Stop softap (hotspot)
  set-ipreach-disconnect enabled|disabled
    Sets whether CMD_IP_REACHABILITY_LOST events should trigger disconnects.
  get-ipreach-disconnect
    Gets setting of CMD_IP_REACHABILITY_LOST events triggering disconnects.
  set-poll-rssi-interval-msecs &lt;int&gt;
    Sets the interval between RSSI polls to &lt;int&gt; milliseconds.
  get-poll-rssi-interval-msecs
    Gets current interval between RSSI polls, in milliseconds.
  force-hi-perf-mode enabled|disabled
    Sets whether hi-perf mode is forced or left for normal operation.
  force-low-latency-mode enabled|disabled
    Sets whether low latency mode is forced or left for normal operation.
  network-suggestions-set-user-approved &lt;package name&gt; yes|no
    Sets whether network suggestions from the app is approved or not.
  network-suggestions-has-user-approved &lt;package name&gt;
    Queries whether network suggestions from the app is approved or not.
  imsi-protection-exemption-set-user-approved-for-carrier &lt;carrier id&gt; yes|no
    Sets whether Imsi protection exemption for carrier is approved or not
  imsi-protection-exemption-has-user-approved-for-carrier &lt;carrier id&gt;
    Queries whether Imsi protection exemption for carrier is approved or not
  imsi-protection-exemption-clear-user-approved-for-carrier &lt;carrier id&gt;
    Clear the user choice on Imsi protection exemption for carrier
  network-requests-remove-user-approved-access-points &lt;package name&gt;
    Removes all user approved network requests for the app.
  clear-user-disabled-networks
    Clears the user disabled networks list.
  send-link-probe
    Manually triggers a link probe.
  force-softap-channel enabled &lt;int&gt; | disabled
    Sets whether soft AP channel is forced to &lt;int&gt; MHz
    or left for normal   operation.
  force-country-code enabled &lt;two-letter code&gt; | disabled
    Sets country code to &lt;two-letter code&gt; or left for normal value
  set-wifi-watchdog enabled|disabled
    Sets whether wifi watchdog should trigger recovery
  get-wifi-watchdog
    Gets setting of wifi watchdog trigger recovery.
  get-softap-supported-features
    Gets softap supported features. Will print 'wifi_softap_acs_supported'
    and/or 'wifi_softap_wpa3_sae_supported', each on a separate line.
  settings-reset
    Initiates wifi settings reset
  add-request &lt;ssid&gt; open|owe|wpa2|wpa3 [&lt;passphrase&gt;] [-b &lt;bssid&gt;]
    Add a network request with provided params
    Use 'network-requests-set-user-approved android yes' to pre-approve requests added via rooted shell (Not persisted)
    &lt;ssid&gt; - SSID of the network
    open|owe|wpa2|wpa3 - Security type of the network.
        - Use 'open' or 'owe' for networks with no passphrase
           - 'open' - Open networks (Most prevalent)
           - 'owe' - Enhanced open networks
        - Use 'wpa2' or 'wpa3' for networks with passphrase
           - 'wpa2' - WPA-2 PSK networks (Most prevalent)
           - 'wpa3' - WPA-3 PSK networks
    -b &lt;bssid&gt; - Set specific BSSID.
  remove-request &lt;ssid&gt;
    Remove a network request with provided SSID of the network
  remove-all-requests
    Removes all active requests added via shell
  list-requests
    Lists the requested networks added via shell
  network-requests-set-user-approved &lt;package name&gt; yes|no
    Sets whether network requests from the app is approved or not.
    Note: Only 1 such app can be approved from the shell at a time
  network-requests-has-user-approved &lt;package name&gt;
    Queries whether network requests from the app is approved or not.
    Note: This only returns whether the app was set via the 'network-requests-set-user-approved' shell command
  qca-list-ifaces
    Lists active STA/AP interfaces (could be bridge interfaces). Command to set bridge iface will only apply to the first internal iface
  qca-set-txpower &lt;iface&gt; &lt;power in dBm&gt;
    Sets max txpower in dBm, and &lt;iface&gt; is from 'qca-list-ifaces'
  qca-set-ani-level &lt;iface&gt; &lt;auto|fixed&gt; [&lt;ofdmlvl&gt;]
    Sets ani level, and &lt;iface&gt; is from 'qca-list-ifaces'
  qca-get-thermal-info &lt;iface&gt;
    Gets thermal info, and &lt;iface&gt; is from 'qca-list-ifaces'
  qca-dump-thermal-events
    Dump thermal events from driver/firmware after boot
  qca-set-congestion-report &lt;iface&gt; &lt;enable|disable&gt; [&lt;threshold&gt; [interval]]
    Sets congestion report, and &lt;iface&gt; is AP iface from 'qca-list-ifaces'
  qca-dump-congestion-events
    Dump congestion events from driver/firmware after boot</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/305adf7caf799c23b58f4798e7902ceb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序入门到实战\小程序项目\小程序开发（保姆级）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c88b732be1f8cb5b06ca24c5f390103e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL用法---MySQL Workbench创建数据库和表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>