<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一个项目，用十款数据库？ - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ca95b52fb5825f233e590e9ac22e4fcb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="一个项目，用十款数据库？">
  <meta property="og:description" content="大家好，我是豆小匠。
关于数据库，大学的时候只知道MySQL，学习深入点也就是用到了Redis、MongoDB等非关系型数据库。
然而，工作中用到的数据库实在太多，每种数据库都有自身的优势和局限性。所以在这里梳理下日常常用数据库和适用场景，走起！
1. 常用数据库 1.1. 关系型数据库 关系型数据库通常是业务型项目的主力数据库，原因以下：
方便业务建模，表的关系和业务之间的关联是类似的。数据一致性，关系型数据库一般支持ACID特性，可用于核心业务场景的数据持久化。 关系型数据库的基本单位是表，表与表之间通过键关联，比如学生表和班级表，可以通过班级ID，把学生和班级关联起来。
关系型数据库的经典代表：MySQL、Orcle、PostgreSQL、SQLite等。
1.2. 非关系型数据库 非关系型数据库其实只是一个比较笼统的叫法，实际分类下有非常多，这里只介绍键值对、文档、列式存储、图形结构等几种。
1.2.1. KV数据库 KV数据库以键值对的形式存储数据，常见底层数据结构实现是哈希表，读数据复杂度是O(1)。
keyvaluebeangoodmilkbad key-value存储的数据通常单个key-value就是一个条独立的数据，很方便水平扩展，可以根据key散列到不同的分片，且读的性能极好，因此常用于做缓存。
经典的代表有Redis、Memcached和LevelDB等。
1.2.2. 文档型数据库 文档型数据库的数据以文档的形式存储数据，每个文档类似一个JSON对象。
相比于KV存储，文档型数据库同样对水平扩展友好，且具有更好的查询性能，支持复杂查询，而KV存储几乎只通过key来读取数据。
经典的文档型数据库有MongoDB，CouchDB和Elasticsearch等。
1.2.3. 列式存储数据库 经典的列式存储数据库有HBase、Druid、ClickHouse等，不同列式数据库的底层实现差别挺大的，它们的共同点是按列存储。
比如说MySQL存一个学生信息，有学号和姓名等，这两个字段在同一行，存放也是在一起的；但是列式数据库会按列划分存储，把学号和姓名分开存储，相同的数据类型有利于进行数据压缩、聚合操作等。
下面是HBase的一条数据组成解析，一个Row Key（行键）下有多个Column Family（列族），列族下面有Column Qualifier（列限定符），最后会根据设置保存若干个版本，形成Timestamp/version: Cell Value的键值对。这里我们只需要知道不同的列族是分开存储的就行了。
1.2.4. 图数据库 图数据库的基本单元是点和边，经典的图数据库包括Neo4j、OrientDB、TigerGraph等。
简单来说点表示实体，而边则表示实体间的关系，组成一个整体后，可以形成知识图谱、社交网络、金融风控网络等。
比如存储了上图关系，可以直接查询关注了豆小匠Coding的用户：
MATCH (user:User {name: &#39;豆小匠Coding&#39;})&lt;-[:FOLLOWS]-(follower:User) RETURN follower.name 上述查询使用了 Neo4j 的图查询语言 Cypher。它首先通过 MATCH 子句找到名为豆小匠的用户节点 user，然后通过 -[:FOLLOWS]-&gt; 关系查找所有关注了该用户的节点 follower。最后，通过 RETURN 子句返回关注者的姓名。
2. 场景下的数据库 2.1. Demo项目 SQLite，一个轻量级的数据库，不需要独立服务器或者系统级别的配置，只需要一个文件，就可以存储数据库所有数据，适用于小型设备或者嵌入式系统等。
如果你只是做一个demo级别的项目，也可以使用SQLite，然后使用ORM框架来操作数据，后面切换MySQL也只需要修改数据库连接逻辑。
2.2. MySQL遇到瓶颈 如果是单机MySQL遭遇性能瓶颈，可以通过主从架构读写分离，堆机器的方式解决，另一个方向是增加缓存，如Redis等，减少打到物理存储的请求量。
如果是数据量太大，单表查询性能下降，可以考虑分库分表，但是分库分表在开发时需要考虑更多分布式事务、水平扩展等因素，对研发效率有影响。因此，这个时候可以考虑使用分布式数据库，如TiDB等。
2.3. 场景专用数据库 随着业务的复杂，我们会发现不同场景下对数据库的要求差异会很大：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-30T19:30:00+08:00">
    <meta property="article:modified_time" content="2023-12-30T19:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一个项目，用十款数据库？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>大家好，我是豆小匠。</p> 
<p>关于数据库，大学的时候只知道MySQL，学习深入点也就是用到了Redis、MongoDB等非关系型数据库。</p> 
<p>然而，工作中用到的数据库实在太多，每种数据库都有自身的优势和局限性。所以在这里梳理下日常常用数据库和适用场景，走起！</p> 
<hr> 
<h2><a id="1__8"></a>1. 常用数据库</h2> 
<h3><a id="11__10"></a>1.1. 关系型数据库</h3> 
<p><strong>关系型数据库通常是业务型项目的主力数据库</strong>，原因以下：</p> 
<ol><li>方便业务建模，表的关系和业务之间的关联是类似的。</li><li>数据一致性，关系型数据库一般支持ACID特性，可用于核心业务场景的数据持久化。</li></ol> 
<p>关系型数据库的基本单位是<strong>表</strong>，表与表之间通过<strong>键</strong>关联，比如学生表和班级表，可以通过班级ID，把学生和班级关联起来。</p> 
<p><img src="https://images2.imgbox.com/93/ce/lKTHEdoX_o.png" alt="关系型数据库"></p> 
<p>关系型数据库的经典代表：MySQL、Orcle、PostgreSQL、SQLite等。</p> 
<h3><a id="12__23"></a>1.2. 非关系型数据库</h3> 
<p>非关系型数据库其实只是一个比较笼统的叫法，实际分类下有非常多，这里只介绍<strong>键值对</strong>、<strong>文档</strong>、<strong>列式存储</strong>、<strong>图形结构</strong>等几种。</p> 
<h4><a id="121_KV_27"></a>1.2.1. KV数据库</h4> 
<p>KV数据库以键值对的形式存储数据，常见底层数据结构实现是哈希表，读数据复杂度是O(1)。</p> 
<table><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><td>bean</td><td>good</td></tr><tr><td>milk</td><td>bad</td></tr></tbody></table> 
<p>key-value存储的数据通常单个key-value就是一个条独立的数据，很方便水平扩展，可以根据key散列到不同的分片，且读的性能极好，因此常用于做缓存。</p> 
<p>经典的代表有Redis、Memcached和LevelDB等。</p> 
<h4><a id="122__40"></a>1.2.2. 文档型数据库</h4> 
<p>文档型数据库的数据以文档的形式存储数据，每个文档类似一个JSON对象。</p> 
<p>相比于KV存储，文档型数据库同样对水平扩展友好，<strong>且具有更好的查询性能，支持复杂查询</strong>，而KV存储几乎只通过key来读取数据。</p> 
<p><img src="https://images2.imgbox.com/8a/02/xLUCqQ6w_o.png" alt="数据分片"></p> 
<p>经典的文档型数据库有MongoDB，CouchDB和Elasticsearch等。</p> 
<h4><a id="123__50"></a>1.2.3. 列式存储数据库</h4> 
<p>经典的列式存储数据库有HBase、Druid、ClickHouse等，不同列式数据库的底层实现差别挺大的，它们的共同点是按列存储。</p> 
<p>比如说MySQL存一个学生信息，有学号和姓名等，这两个字段在同一行，存放也是在一起的；但是列式数据库会按列划分存储，把学号和姓名分开存储，<strong>相同的数据类型有利于进行数据压缩、聚合操作等</strong>。</p> 
<p>下面是HBase的一条数据组成解析，一个Row Key（行键）下有多个Column Family（列族），列族下面有Column Qualifier（列限定符），最后会根据设置保存若干个版本，形成Timestamp/version: Cell Value的键值对。<strong>这里我们只需要知道不同的列族是分开存储的就行了</strong>。</p> 
<p><img src="https://images2.imgbox.com/50/a0/gw35aGs2_o.png" alt="HBase数据结构"></p> 
<h4><a id="124__60"></a>1.2.4. 图数据库</h4> 
<p>图数据库的基本单元是<strong>点</strong>和<strong>边</strong>，经典的图数据库包括Neo4j、OrientDB、TigerGraph等。</p> 
<p>简单来说点表示实体，而边则表示实体间的关系，组成一个整体后，可以形成知识图谱、社交网络、金融风控网络等。</p> 
<p><img src="https://images2.imgbox.com/c4/0f/JpPyKkDl_o.png" alt="图数据库"></p> 
<p>比如存储了上图关系，可以直接查询关注了豆小匠Coding的用户：</p> 
<pre><code class="prism language-Cypher">MATCH (user:User {name: '豆小匠Coding'})&lt;-[:FOLLOWS]-(follower:User)
RETURN follower.name
</code></pre> 
<p>上述查询使用了 Neo4j 的图查询语言 Cypher。它首先通过 MATCH 子句找到名为豆小匠的用户节点 user，然后通过 <code>-[:FOLLOWS]-&gt;</code> 关系查找所有关注了该用户的节点 follower。最后，通过 RETURN 子句返回关注者的姓名。</p> 
<h2><a id="2__77"></a>2. 场景下的数据库</h2> 
<h3><a id="21_Demo_79"></a>2.1. Demo项目</h3> 
<p>SQLite，<strong>一个轻量级的数据库，不需要独立服务器或者系统级别的配置</strong>，只需要一个文件，就可以存储数据库所有数据，适用于小型设备或者嵌入式系统等。</p> 
<p>如果你只是做一个demo级别的项目，也可以使用SQLite，然后使用ORM框架来操作数据，后面切换MySQL也只需要修改数据库连接逻辑。</p> 
<h3><a id="22_MySQL_85"></a>2.2. MySQL遇到瓶颈</h3> 
<p>如果是单机MySQL遭遇性能瓶颈，可以通过主从架构读写分离，堆机器的方式解决，另一个方向是增加缓存，如Redis等，减少打到物理存储的请求量。</p> 
<p>如果是数据量太大，单表查询性能下降，可以考虑分库分表，但是分库分表在开发时需要考虑更多分布式事务、水平扩展等因素，对研发效率有影响。<strong>因此，这个时候可以考虑使用分布式数据库，如TiDB等</strong>。</p> 
<h3><a id="23__91"></a>2.3. 场景专用数据库</h3> 
<p>随着业务的复杂，我们会发现不同场景下对数据库的要求差异会很大：</p> 
<ol><li>一致性优先，选用关系型数据库。</li><li>高性能全文搜索，使用Elasticsearch。</li><li>非关键数据，读多写少，量大，选用列式存储。</li><li>离线数据分析，Hive。</li></ol> 
<hr> 
<p>这期就喵到这！能读到这里的朋友，点个赞呗！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6dd8db8ca81c6488db04e8637bc1827a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入探索AIGC技术：原理、应用与未来发展</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b64641949db48afb1d6a545ebff48731/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AndroidStudio调用第三方so库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>