<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Docker】Docker 仓库管理和Docker Dockerfile - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d4eb3c25455294b7aade2af52ba4d353/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Docker】Docker 仓库管理和Docker Dockerfile">
  <meta property="og:description" content="作者简介： 辭七七，目前大二，正在学习C/C&#43;&#43;，Java，Python等
作者主页： 七七的个人主页
文章收录专栏： 七七的闲谈
欢迎大家点赞 👍 收藏 ⭐ 加关注哦！💖💖
Docker 仓库管理和Docker Dockerfile Docker 仓库管理Docker Hub Docker Dockerfile Docker 仓库管理 仓库（Repository）是集中存放镜像的地方。以下介绍一下 Docker Hub。当然不止 docker hub，只是远程的服务商不一样，操作都是一样的。
Docker Hub 目前 Docker 官方维护了一个公共仓库 Docker Hub。
大部分需求都可以通过在 Docker Hub 中直接下载镜像来实现。
注册
在下载地址免费注册一个 Docker 账号。
登录和退出
登录需要输入用户名和密码，登录成功后，我们就可以从 docker hub 上拉取自己账号下的全部镜像。
$ docker login 退出
退出 docker hub 可以使用以下命令：
$ docker logout 拉取镜像
你可以通过 docker search 命令来查找官方仓库中的镜像，并利用 docker pull 命令来将它下载到本地。
以 ubuntu 为关键词进行搜索：
$ docker search ubuntu 使用 docker pull 将官方 ubuntu 镜像下载到本地：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-25T17:33:27+08:00">
    <meta property="article:modified_time" content="2023-11-25T17:33:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Docker】Docker 仓库管理和Docker Dockerfile</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><strong>作者简介：</strong> 辭七七，目前大二，正在学习C/C++，Java，Python等<br> <strong>作者主页：</strong> <a href="https://blog.csdn.net/2201_75366661?spm=1000.2115.3001.5343">七七的个人主页</a><br> <strong>文章收录专栏：</strong> <a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12284357">七七的闲谈</a><br> 欢迎大家点赞 👍 收藏 ⭐ 加关注哦！💖💖</p> 
</blockquote> 
<hr> 
<p><img src="https://images2.imgbox.com/ca/e3/lbG5cgkk_o.png" alt="在这里插入图片描述"><br> </p> 
<div class="toc"> 
 <h4>Docker 仓库管理和Docker Dockerfile</h4> 
 <ul><li><a href="#Docker__9" rel="nofollow">Docker 仓库管理</a></li><li><ul><li><a href="#Docker_Hub_11" rel="nofollow">Docker Hub</a></li></ul> 
  </li><li><a href="#Docker_Dockerfile_66" rel="nofollow">Docker Dockerfile</a></li></ul> 
</div> 
<p></p> 
<h2><a id="Docker__9"></a>Docker 仓库管理</h2> 
<p>仓库（Repository）是集中存放镜像的地方。以下介绍一下 Docker Hub。当然不止 docker hub，只是远程的服务商不一样，操作都是一样的。</p> 
<h3><a id="Docker_Hub_11"></a>Docker Hub</h3> 
<p>目前 Docker 官方维护了一个公共仓库 Docker Hub。</p> 
<p>大部分需求都可以通过在 Docker Hub 中直接下载镜像来实现。</p> 
<p>注册<br> 在<a href="https://docs.docker.com/engine/install/fedora/" rel="nofollow">下载地址</a>免费注册一个 Docker 账号。</p> 
<p>登录和退出<br> 登录需要输入用户名和密码，登录成功后，我们就可以从 docker hub 上拉取自己账号下的全部镜像。</p> 
<pre><code class="prism language-java">$ docker login
</code></pre> 
<p><img src="https://images2.imgbox.com/06/9b/IFgXz6BP_o.png" alt="在这里插入图片描述"><br> 退出</p> 
<p>退出 docker hub 可以使用以下命令：</p> 
<pre><code class="prism language-java">$ docker logout
</code></pre> 
<p>拉取镜像<br> 你可以通过 docker search 命令来查找官方仓库中的镜像，并利用 docker pull 命令来将它下载到本地。</p> 
<p>以 ubuntu 为关键词进行搜索：</p> 
<pre><code class="prism language-java">$ docker search ubuntu
</code></pre> 
<p><img src="https://images2.imgbox.com/1d/76/yvVfxxZN_o.png" alt="在这里插入图片描述"><br> 使用 docker pull 将官方 ubuntu 镜像下载到本地：</p> 
<pre><code class="prism language-java">$ docker pull ubuntu 
</code></pre> 
<p><img src="https://images2.imgbox.com/ef/37/PtAjOwcU_o.png" alt="在这里插入图片描述"><br> 推送镜像<br> 用户登录后，可以通过 docker push 命令将自己的镜像推送到 Docker Hub。</p> 
<p>以下命令中的 username 请替换为你的 Docker 账号用户名。</p> 
<pre><code class="prism language-java">$ docker tag ubuntu<span class="token operator">:</span><span class="token number">18.04</span> username<span class="token operator">/</span>ubuntu<span class="token operator">:</span><span class="token number">18.04</span>
$ docker image ls

<span class="token constant">REPOSITORY</span>      <span class="token constant">TAG</span>        <span class="token constant">IMAGE</span> <span class="token constant">ID</span>            <span class="token constant">CREATED</span>           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
ubuntu          <span class="token number">18.04</span>      <span class="token number">275d</span><span class="token number">79972</span>a86        <span class="token number">6</span> days ago        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
username<span class="token operator">/</span>ubuntu <span class="token number">18.04</span>      <span class="token number">275d</span><span class="token number">79972</span>a86        <span class="token number">6</span> days ago        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  
$ docker push username<span class="token operator">/</span>ubuntu<span class="token operator">:</span><span class="token number">18.04</span>
$ docker search username<span class="token operator">/</span>ubuntu

<span class="token constant">NAME</span>             <span class="token constant">DESCRIPTION</span>       <span class="token constant">STARS</span>         <span class="token constant">OFFICIAL</span>    <span class="token constant">AUTOMATED</span>
username<span class="token operator">/</span>ubuntu
</code></pre> 
<h2><a id="Docker_Dockerfile_66"></a>Docker Dockerfile</h2> 
<p>什么是 Dockerfile？<br> Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。</p> 
<p>使用 Dockerfile 定制镜像<br> 这里仅讲解如何运行 Dockerfile 文件来定制一个镜像，具体 Dockerfile 文件内指令详解，将在下一节中介绍，这里你只要知道构建的流程即可。</p> 
<p><strong>1、下面以定制一个 nginx 镜像（构建好的镜像内会有一个 /usr/share/nginx/html/index.html 文件）</strong></p> 
<p>在一个空目录下，新建一个名为 Dockerfile 文件，并在文件内添加以下内容：</p> 
<pre><code class="prism language-java"><span class="token constant">FROM</span> nginx
<span class="token constant">RUN</span> echo '这是一个本地构建的nginx镜像' <span class="token operator">&gt;</span> <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token operator">/</span>index<span class="token punctuation">.</span>html
</code></pre> 
<p><img src="https://images2.imgbox.com/59/b7/InkVJiL8_o.png" alt="在这里插入图片描述"><br> <strong>2、FROM 和 RUN 指令的作用</strong></p> 
<p>FROM：定制的镜像都是基于 FROM 的镜像，这里的 nginx 就是定制需要的基础镜像。后续的操作都是基于 nginx。</p> 
<p>RUN：用于执行后面跟着的命令行命令。有以下俩种格式：</p> 
<p>shell 格式：</p> 
<pre><code class="prism language-java"><span class="token constant">RUN</span> <span class="token operator">&lt;</span>命令行命令<span class="token operator">&gt;</span>
# <span class="token operator">&lt;</span>命令行命令<span class="token operator">&gt;</span> 等同于，在终端操作的 shell 命令。
</code></pre> 
<p>exec 格式：</p> 
<pre><code class="prism language-java"><span class="token constant">RUN</span> <span class="token punctuation">[</span><span class="token string">"可执行文件"</span><span class="token punctuation">,</span> <span class="token string">"参数1"</span><span class="token punctuation">,</span> <span class="token string">"参数2"</span><span class="token punctuation">]</span>
# 例如：
# <span class="token constant">RUN</span> <span class="token punctuation">[</span><span class="token string">"./test.php"</span><span class="token punctuation">,</span> <span class="token string">"dev"</span><span class="token punctuation">,</span> <span class="token string">"offline"</span><span class="token punctuation">]</span> 等价于 <span class="token constant">RUN</span> <span class="token punctuation">.</span>/test<span class="token punctuation">.</span>php dev offline
</code></pre> 
<p>注意：Dockerfile 的指令每执行一次都会在 docker 上新建一层。所以过多无意义的层，会造成镜像膨胀过大。例如：</p> 
<pre><code class="prism language-java"><span class="token constant">FROM</span> centos
<span class="token constant">RUN</span> yum <span class="token operator">-</span>y install wget
<span class="token constant">RUN</span> wget <span class="token operator">-</span><span class="token class-name">O</span> redis<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token string">"http://download.redis.io/releases/redis-5.0.3.tar.gz"</span>
<span class="token constant">RUN</span> tar <span class="token operator">-</span>xvf redis<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
<p>以上执行会创建 3 层镜像。可简化为以下格式：</p> 
<pre><code class="prism language-java"><span class="token constant">FROM</span> centos
<span class="token constant">RUN</span> yum <span class="token operator">-</span>y install wget \
    <span class="token operator">&amp;&amp;</span> wget <span class="token operator">-</span><span class="token class-name">O</span> redis<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token string">"http://download.redis.io/releases/redis-5.0.3.tar.gz"</span> \
    <span class="token operator">&amp;&amp;</span> tar <span class="token operator">-</span>xvf redis<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre> 
<p>如上，以 &amp;&amp; 符号连接命令，这样执行后，只会创建 1 层镜像。</p> 
<p><strong>开始构建镜像</strong><br> 在 Dockerfile 文件的存放目录下，执行构建动作。</p> 
<p>以下示例，通过目录下的 Dockerfile 构建一个 nginx:v3（镜像名称:镜像标签）。</p> 
<pre><code class="prism language-java">$ docker build <span class="token operator">-</span>t nginx<span class="token operator">:</span>v3 <span class="token punctuation">.</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/13/00/skdWool3_o.png" alt="在这里插入图片描述"><br> 以上显示，说明已经构建成功。</p> 
<p>上下文路径<br> 上一节中，有提到指令最后一个 . 是上下文路径，那么什么是上下文路径呢？</p> 
<pre><code class="prism language-java">$ docker build <span class="token operator">-</span>t nginx<span class="token operator">:</span>v3 <span class="token punctuation">.</span>
</code></pre> 
<blockquote> 
 <p>上下文路径，是指 docker 在构建镜像，有时候想要使用到本机的文件（比如复制），<code>docker build</code>命令得知这个路径后，会将路径下的所有内容打包。</p> 
 <p><strong>解析</strong>：由于 docker 的运行模式是 C/S。我们本机是 C，docker 引擎是 S。实际的构建过程是在 docker引擎下完成的，所以这个时候无法用到我们本机的文件。这就需要把我们本机的指定目录下的文件一起打包提供给 docker 引擎使用。</p> 
 <p>如果未说明最后一个参数，那么默认上下文路径就是 Dockerfile 所在的位置。</p> 
 <p><strong>注意</strong>：上下文路径下不要放无用的文件，因为会一起打包发送给 docker 引擎，如果文件过多会造成过程缓慢。</p> 
</blockquote> 
<blockquote> 
 <p>  关于 【Docker】Docker 仓库管理和Docker Dockerfile的详细讲解，七七就先分享到这里了，如果你认为这篇文章对你有帮助，请给七七点个赞吧，如果发现什么问题，欢迎评论区留言！！💕💕</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b76788b0431231aa429867a13837544f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java连接SQL Server教程(详细教程)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1c74d7252de2fbbad7cccdf3f35cf5df/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mac/iPad/iPhone跨设备复制粘贴失效</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>