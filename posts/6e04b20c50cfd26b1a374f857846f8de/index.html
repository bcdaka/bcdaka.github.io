<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序引入unocss - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6e04b20c50cfd26b1a374f857846f8de/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="微信小程序引入unocss">
  <meta property="og:description" content="今天刚新建一个微信小程序，之前写过一篇《原子化CSS：Unocss的使用》，想着“偷懒”不想定义各种css样式类，于是准备把unocss引入进来使用。
安装与配置 1.安装依赖
npm add -D unocss unocss-preset-weapp 2.配置unocss.config.ts
import { defineConfig } from &#34;unocss&#34;; import presetWeapp from &#39;unocss-preset-weapp&#39; const include = [/\.wxml$/] export default defineConfig({ content:{ pipeline:{ include } }, presets: [ presetWeapp(), ], // 自定义规则 rules: [], separators:&#39;__&#39; }) 3.在 package.json 中添加脚本命令，用于监听 wxml 文件并生成 wxss 文件：
&#34;scripts&#34;: { &#34;unocss&#34;: &#34;unocss pages/**/*.wxml -c unocss.config.js --watch -o unocss.wxss&#34; } 4.插入app.wxss中：
@import &#39;/unocss.wxss&#39;; 5.自定义组件中如果需要的话还得再配置一下，否则写了也不生效：
Component({ options: { addGlobalClass: true }, }) 6.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-29T18:18:59+08:00">
    <meta property="article:modified_time" content="2024-08-29T18:18:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序引入unocss</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>今天刚新建一个微信小程序，之前写过一篇《<a href="https://blog.csdn.net/q1003675852/article/details/134844339">原子化CSS：Unocss的使用</a>》，想着“偷懒”不想定义各种css样式类，于是准备把unocss引入进来使用。</p> 
<h3><a id="_2"></a>安装与配置</h3> 
<p>1.安装依赖</p> 
<pre><code>npm add -D unocss unocss-preset-weapp
</code></pre> 
<p>2.配置unocss.config.ts</p> 
<pre><code>import { defineConfig } from "unocss";
import presetWeapp from 'unocss-preset-weapp'
const include = [/\.wxml$/]

export default defineConfig({
  content:{
    pipeline:{
      include
    }
  },
  presets: [
    presetWeapp(),
  ],
  // 自定义规则
  rules: [],
  separators:'__'
})

</code></pre> 
<p>3.在 package.json 中添加脚本命令，用于监听 wxml 文件并生成 wxss 文件：</p> 
<pre><code>  "scripts": {
    "unocss": "unocss pages/**/*.wxml -c unocss.config.js --watch -o unocss.wxss"
  }
</code></pre> 
<p>4.插入app.wxss中：</p> 
<pre><code>@import '/unocss.wxss';
</code></pre> 
<p>5.<code>自定义组件</code>中如果需要的话还得再配置一下，否则写了也不生效：</p> 
<pre><code>
Component({
  options: {
    addGlobalClass: true
  },
})

</code></pre> 
<p>6.启动监听：</p> 
<pre><code>npm run unocss
</code></pre> 
<h3><a id="_63"></a>可能遇到的问题</h3> 
<p>1.单位换算不统一：</p> 
<p>使用过程中会发现，对于width/height和padding/magin的单位换算是不一样的，比如：w-400和p-40:<br> <img src="https://images2.imgbox.com/c5/b7/L1saCgiM_o.png" alt="在这里插入图片描述"></p> 
<p>关于这个问题，在github上的issues中也有人提到了：</p> 
<p>① <a href="https://github.com/MellowCo/unocss-preset-weapp/issues/123">https://github.com/MellowCo/unocss-preset-weapp/issues/123</a></p> 
<p>②<a href="https://github.com/MellowCo/unocss-preset-weapp/issues/116">https://github.com/MellowCo/unocss-preset-weapp/issues/116</a></p> 
<p>当然在<a href="https://github.com/MellowCo/unocss-preset-weapp">unocss-preset-weapp文档</a>中也简略的说了如何解决这个问题：</p> 
<p><img src="https://images2.imgbox.com/da/d3/2UBvbdhu_o.png" alt="在这里插入图片描述"></p> 
<p>因此只要在unocss.config.ts中定义rules进行覆盖就可以了，最终unocss.config.ts配置：</p> 
<pre><code>import { defineConfig } from "unocss";
import presetWeapp from 'unocss-preset-weapp'
const include = [/\.wxml$/]

export default defineConfig({
  content:{
    pipeline:{
      include
    }
  },
  presets: [
    presetWeapp(),
  ],
  rules: [
    [/^p-(\d+)$/, ([, d]) =&gt; ({ padding: `${d}rpx` })],
    [/^pt-(\d+)$/, ([, d]) =&gt; ({ 'padding-top': `${d}rpx` })],
    [/^pb-(\d+)$/, ([, d]) =&gt; ({ 'padding-bottom': `${d}rpx` })],
    [/^pl-(\d+)$/, ([, d]) =&gt; ({ 'padding-left': `${d}rpx` })],
    [/^pr-(\d+)$/, ([, d]) =&gt; ({ 'padding-right': `${d}rpx` })],
    [/^m-(\d+)$/, ([, d]) =&gt; ({ margin: `${d}rpx` })],
    [/^mt-(\d+)$/, ([, d]) =&gt; ({ 'margin-top': `${d}rpx` })],
    [/^mb-(\d+)$/, ([, d]) =&gt; ({ 'margin-bottom': `${d}rpx` })],
    [/^ml-(\d+)$/, ([, d]) =&gt; ({ 'margin-left': `${d}rpx` })],
    [/^mr-(\d+)$/, ([, d]) =&gt; ({ 'margin-right': `${d}rpx` })] 
  ],
  separators:'__'
})
</code></pre> 
<p>效果预览：</p> 
<p><img src="https://images2.imgbox.com/18/23/Vn3bpEN2_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/77769e8b2cb9e2a797e2d7f4d783fb5f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度理解指针（5）----指针完结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/103fca9d0616dac63410e95a339f594d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从 7000 余项目脱颖而出，飞轮科技《新一代实时分析数据仓库解决方案》荣获 HICOOL 2024 全球创业大赛二等奖</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>