<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>æŠ€æœ¯é€Ÿé€’ï½œä½¿ç”¨é»˜è®¤ lambda å‚æ•°é‡æ„ä»£ç  - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f5175cf0c961ff7d5b83212cfae7e61a/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="æŠ€æœ¯é€Ÿé€’ï½œä½¿ç”¨é»˜è®¤ lambda å‚æ•°é‡æ„ä»£ç ">
  <meta property="og:description" content="ä½œè€…ï¼šDavid Pine
æ’ç‰ˆï¼šAlan Wang
æœ¬æ–‡æ˜¯æ¢è®¨ C# 12çš„å„ç§åŠŸèƒ½çš„å››ç¯‡ç³»åˆ—æ–‡ç« ä¸­çš„æœ€åä¸€ç¯‡ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨â€œé»˜è®¤ lambda å‚æ•°â€åŠŸèƒ½ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨é»˜è®¤å‚æ•°å€¼ã€‚æœ¬ç³»åˆ—æ¶µç›–äº†å¾ˆå¤šå†…å®¹ï¼š
ä½¿ç”¨ä¸»æ„é€ å‡½æ•°é‡æ„ C# ä»£ç ä½¿ç”¨é›†åˆè¡¨è¾¾å¼é‡æ„ C# ä»£ç ä½¿ç”¨ä»»æ„ç±»å‹åˆ«åé‡æ„ C#ä»£ç ä½¿ç”¨é»˜è®¤ lambda å‚æ•°é‡æ„ä»£ç ï¼ˆæœ¬ç¯‡æ–‡ç« ï¼‰ è¿™äº›åŠŸèƒ½æ˜¯æˆ‘ä»¬ä¸æ–­åŠªåŠ›æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„ä¸€éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬è¯¦ç»†æ¢ç´¢å®ƒä»¬ï¼
é»˜è®¤ Lambda å‚æ•° é»˜è®¤ lambda å‚æ•°æ˜¯ C# 12 ä¸­çš„ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œå…è®¸å¼€å‘äººå‘˜åœ¨ lambda ä¸­è¡¨è¾¾é»˜è®¤å‚æ•°å€¼ã€‚æ­¤åŠŸèƒ½æ˜¯ C# æ–¹æ³•ä¸­ç°æœ‰é»˜è®¤å‚æ•°åŠŸèƒ½çš„è‡ªç„¶æ‰©å±•ã€‚
C# 12 ä¹‹å‰ åœ¨ C# 12 ä¹‹å‰ï¼Œå½“æ‚¨å®šä¹‰éœ€è¦æä¾›æŸç§é»˜è®¤è¡Œä¸ºçš„ lambda è¡¨è¾¾å¼æ—¶ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ç©ºåˆå¹¶è¿ç®—ç¬¦ (??) æˆ–æ¡ä»¶è¿ç®—ç¬¦ (?ğŸ˜ƒã€‚è¯·æŸ¥çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š
var IncrementBy = static (int source, int? increment) =&gt; { // Same as source &#43; (increment.HasValue ? increment.Value : 1) return source &#43; (increment ?">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-08T21:52:51+08:00">
    <meta property="article:modified_time" content="2024-07-08T21:52:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">æŠ€æœ¯é€Ÿé€’ï½œä½¿ç”¨é»˜è®¤ lambda å‚æ•°é‡æ„ä»£ç </h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ä½œè€…ï¼šDavid Pine<br> æ’ç‰ˆï¼šAlan Wang</p> 
</blockquote> 
<p>æœ¬æ–‡æ˜¯æ¢è®¨ C# 12çš„å„ç§åŠŸèƒ½çš„å››ç¯‡ç³»åˆ—æ–‡ç« ä¸­çš„æœ€åä¸€ç¯‡ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨â€œé»˜è®¤ lambda å‚æ•°â€åŠŸèƒ½ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨é»˜è®¤å‚æ•°å€¼ã€‚æœ¬ç³»åˆ—æ¶µç›–äº†å¾ˆå¤šå†…å®¹ï¼š</p> 
<ul><li><a href="https://blog.csdn.net/MicrosoftReactor/article/details/139337251">ä½¿ç”¨ä¸»æ„é€ å‡½æ•°é‡æ„ C# ä»£ç </a></li><li><a href="https://blog.csdn.net/MicrosoftReactor/article/details/139249702">ä½¿ç”¨é›†åˆè¡¨è¾¾å¼é‡æ„ C# ä»£ç </a></li><li><a href="https://devblogs.microsoft.com/dotnet/refactor-your-code-using-alias-any-type/" rel="nofollow">ä½¿ç”¨ä»»æ„ç±»å‹åˆ«åé‡æ„ C#ä»£ç </a></li><li>ä½¿ç”¨é»˜è®¤ lambda å‚æ•°é‡æ„ä»£ç ï¼ˆæœ¬ç¯‡æ–‡ç« ï¼‰</li></ul> 
<p>è¿™äº›åŠŸèƒ½æ˜¯æˆ‘ä»¬ä¸æ–­åŠªåŠ›æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„ä¸€éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬è¯¦ç»†æ¢ç´¢å®ƒä»¬ï¼</p> 
<h3><a id="_Lambda__12"></a>é»˜è®¤ Lambda å‚æ•°</h3> 
<p>é»˜è®¤ lambda å‚æ•°æ˜¯ C# 12 ä¸­çš„ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œå…è®¸å¼€å‘äººå‘˜åœ¨ lambda ä¸­è¡¨è¾¾é»˜è®¤å‚æ•°å€¼ã€‚æ­¤åŠŸèƒ½æ˜¯ C# æ–¹æ³•ä¸­ç°æœ‰é»˜è®¤å‚æ•°åŠŸèƒ½çš„è‡ªç„¶æ‰©å±•ã€‚</p> 
<h4><a id="C_12__15"></a>C# 12 ä¹‹å‰</h4> 
<p>åœ¨ C# 12 ä¹‹å‰ï¼Œå½“æ‚¨å®šä¹‰éœ€è¦æä¾›æŸç§é»˜è®¤è¡Œä¸ºçš„ lambda è¡¨è¾¾å¼æ—¶ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ç©ºåˆå¹¶è¿ç®—ç¬¦ (??) æˆ–æ¡ä»¶è¿ç®—ç¬¦ (?ğŸ˜ƒã€‚è¯·æŸ¥çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> IncrementBy <span class="token operator">=</span> <span class="token keyword">static</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> source<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> increment<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Same as source + (increment.HasValue ? increment.Value : 1)</span>
    <span class="token keyword">return</span> source <span class="token operator">+</span> <span class="token punctuation">(</span>increment <span class="token operator">??</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementBy</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementBy</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 7</span>
</code></pre> 
<h4><a id="_C_12__28"></a>ä½¿ç”¨ C# 12 ğŸ¤“</h4> 
<p>ç›¸åï¼Œä½¿ç”¨é»˜è®¤ lambda å‚æ•°åï¼Œæ‚¨å¯ä»¥ç›´æ¥åœ¨ lambda è¡¨è¾¾å¼ä¸­å®šä¹‰ lambda å‚æ•°çš„é»˜è®¤å€¼ã€‚é»˜è®¤ lambda å‚æ•°çš„è¯­æ³•ç±»ä¼¼äºæ–¹æ³•ä¸­é»˜è®¤å‚æ•°çš„è¯­æ³•ã€‚é»˜è®¤å€¼åœ¨å‚æ•°åç§°å’Œç­‰å· (=) åæŒ‡å®šã€‚è¯·æŸ¥çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> IncrementBy <span class="token operator">=</span> <span class="token keyword">static</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> source<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> increment <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">return</span> source <span class="token operator">+</span> increment<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementBy</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 11</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementBy</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>
</code></pre> 
<p>å½“æ¶‰åŠé»˜è®¤å‚æ•°æ—¶ï¼ŒLambda è¡¨è¾¾å¼éµå¾ªä¸æ–¹æ³•ç›¸åŒçš„è§„åˆ™ã€‚é»˜è®¤å€¼å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¹¶ä¸”å¿…é¡»ä¸å‚æ•°å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚é»˜è®¤å€¼åœ¨ç¼–è¯‘æ—¶è¿›è¡Œè®¡ç®—ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨ lambda è¡¨è¾¾å¼æ—¶å‚æ•°æ˜¯å¯é€‰çš„ã€‚</p> 
<pre><code class="prism language-csharp"><span class="token keyword">delegate</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> arg1<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> arg2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™æ„å‘³ç€ï¼Œä»æŠ€æœ¯ä¸Šè®²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‚æ•°çš„åç§°è°ƒç”¨Lambdaè¡¨è¾¾å¼ï¼Œä½†å®ƒå¿…é¡»æ˜¯åŒ¿åå‡½æ•°ç”Ÿæˆçš„åç§°ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ‰©å±•ç¤ºä¾‹ï¼š</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> IncrementByWithOffset <span class="token operator">=</span> <span class="token keyword">static</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> source<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> increment <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> offset <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">return</span> source <span class="token operator">+</span> increment <span class="token operator">+</span> offset<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementByWithOffset</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// 111</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementByWithOffset</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 130</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementByWithOffset</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 30</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementByWithOffset</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">arg2</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token function">IncrementByWithOffset</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">arg3</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 11</span>
</code></pre> 
<h4><a id="ASPNET_Core_Minimal_API__57"></a>ASP.NET Core Minimal API ç¤ºä¾‹</h4> 
<p>è®©æˆ‘ä»¬ç ”ç©¶ä¸€ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨é»˜è®¤ lambda å‚æ•°çš„ ASP.NET Core Minimal APIã€‚æ¥åˆ° Visual Studio 2022 ä¸­çš„æ–‡ä»¶ &gt; æ–°å»º &gt; é¡¹ç›®çš„å¯¹è¯æ¡†ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ ASP.NET Core Web API é¡¹ç›®ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ .NET CLI å‘½ä»¤æ¥åˆ›å»ºæ–°é¡¹ç›®ï¼š</p> 
<pre><code class="prism language-csharp">dotnet <span class="token keyword">new</span> webapi <span class="token operator">-</span>n WebApi
</code></pre> 
<p>æ­¤æ¨¡æ¿åˆ›å»ºä¸€ä¸ªå…·æœ‰å•ä¸ª /weatherforecast ç«¯ç‚¹çš„æ–° ASP.NET Core Web API é¡¹ç›®ã€‚ /weatherforecast ç«¯ç‚¹è¿”å›äº”ä¸ªéšæœºå¤©æ°”é¢„æŠ¥çš„æ•°ç»„ï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹ Program.cs æ–‡ä»¶ä¸­çš„æ¨¡æ¿ä»£ç ï¼š</p> 
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å°†æœåŠ¡æ·»åŠ åˆ°å®¹å™¨ä¸­ã€‚.</span>
<span class="token comment">// äº†è§£æœ‰å…³é…ç½® Swagger/OpenAPI çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/aspnetcore/swashbuckle</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddEndpointsApiExplorer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// é…ç½® HTTP è¯·æ±‚ç®¡é“ã€‚</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>Environment<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    app<span class="token punctuation">.</span><span class="token function">UseSwagger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">UseHttpsRedirection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> summaries <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token string">"Freezing"</span><span class="token punctuation">,</span> <span class="token string">"Bracing"</span><span class="token punctuation">,</span> <span class="token string">"Chilly"</span><span class="token punctuation">,</span> <span class="token string">"Cool"</span><span class="token punctuation">,</span> <span class="token string">"Mild"</span><span class="token punctuation">,</span> <span class="token string">"Warm"</span><span class="token punctuation">,</span> <span class="token string">"Balmy"</span><span class="token punctuation">,</span> <span class="token string">"Hot"</span><span class="token punctuation">,</span> <span class="token string">"Sweltering"</span><span class="token punctuation">,</span> <span class="token string">"Scorching"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/weatherforecast"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name"><span class="token keyword">var</span></span> forecast <span class="token operator">=</span> Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>index <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeatherForecast</span>
        <span class="token punctuation">(</span>
            DateOnly<span class="token punctuation">.</span><span class="token function">FromDateTime</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">AddDays</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Random<span class="token punctuation">.</span>Shared<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            summaries<span class="token punctuation">[</span>Random<span class="token punctuation">.</span>Shared<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>summaries<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> forecast<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">WithName</span><span class="token punctuation">(</span><span class="token string">"GetWeatherForecast"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">WithOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">internal</span> <span class="token keyword">record</span> <span class="token class-name">WeatherForecast</span><span class="token punctuation">(</span><span class="token class-name">DateOnly</span> Date<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> TemperatureC<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Summary<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> TemperatureF <span class="token operator">=&gt;</span> <span class="token number">32</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>TemperatureC <span class="token operator">/</span> <span class="token number">0.5556</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€‹è¿™é‡Œæœ‰ä¸€æ®µæ¥è‡ªæ¨¡æ¿çš„ä»£ç ï¼Œä½†å®ƒå¹¶ä¸æ˜¯æˆ‘ä»¬çœŸæ­£è¦å…³æ³¨çš„é‡ç‚¹ã€‚æˆ‘ä»¬åªéœ€å…³æ³¨ MapGet æ–¹æ³•ï¼Œå› ä¸ºå®ƒå°†æˆ‘ä»¬çš„ lambda åŠŸèƒ½æ˜ å°„åˆ° HTTP GET è°ƒç”¨ã€‚</p> 
<pre><code class="prism language-csharp">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/weatherforecast"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name"><span class="token keyword">var</span></span> forecast <span class="token operator">=</span> Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>index <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeatherForecast</span>
        <span class="token punctuation">(</span>
            DateOnly<span class="token punctuation">.</span><span class="token function">FromDateTime</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">AddDays</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Random<span class="token punctuation">.</span>Shared<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            summaries<span class="token punctuation">[</span>Random<span class="token punctuation">.</span>Shared<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>summaries<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> forecast<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">WithName</span><span class="token punctuation">(</span><span class="token string">"GetWeatherForecast"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">WithOpenApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>â€‹/weatherforecast ç«¯ç‚¹è¿”å›ä¸€ä¸ªåŒ…å«äº”ä¸ªå¤©æ°”é¢„æŠ¥çš„æ•°ç»„ã€‚Enumerable.Range(1, 5) æ–¹æ³•è°ƒç”¨ä¸­çš„ç¡¬ç¼–ç  5 å¯ä»¥è¢«é»˜è®¤ lambda å‚æ•°æ›¿æ¢ï¼Œä»¥ä¸‹æ˜¯æ›´æ–°åçš„ä»£ç ç‰‡æ®µï¼š</p> 
<pre><code class="prism language-csharp">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">"/weatherforecast"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> days <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// å®‰å…¨æ£€æŸ¥ä»¥ç¡®ä¿å¤©æ•°å‚æ•°è‡³å°‘ä¸º 1ï¼Œä½†ä¸è¶…è¿‡ 50ã€‚</span>
    <span class="token class-name"><span class="token keyword">var</span></span> count <span class="token operator">=</span> days <span class="token keyword">is</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">and</span> <span class="token operator">&lt;=</span> <span class="token number">50</span> 
        <span class="token punctuation">?</span> days
        <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> forecast <span class="token operator">=</span> Enumerable<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>index <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeatherForecast</span>
        <span class="token punctuation">(</span>
            DateOnly<span class="token punctuation">.</span><span class="token function">FromDateTime</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">AddDays</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            Random<span class="token punctuation">.</span>Shared<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            summaries<span class="token punctuation">[</span>Random<span class="token punctuation">.</span>Shared<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>summaries<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ToArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> forecast<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>ä½¿ç”¨ä¿®æ”¹åçš„ä»£ç åï¼ŒMapGet æ–¹æ³•ç°åœ¨æ¥å—ä¸€ä¸ªé»˜è®¤å€¼ä¸º 5 çš„å¯é€‰ days å‚æ•°ã€‚å› æ­¤ï¼Œè™½ç„¶ä»ç„¶å­˜åœ¨ç›¸åŒçš„é»˜è®¤è¡Œä¸ºï¼Œä½†æˆ‘ä»¬å‘æ¶ˆè´¹è€…å…¬å¼€äº†æ­¤å‚æ•°ã€‚days å‚æ•°å¯ä»¥ä½œä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²ä¼ é€’ç»™ APIã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ HTTP è¯·æ±‚ï¼Œè¯¥è¯·æ±‚è¯·æ±‚21å¤©çš„å¤©æ°”é¢„æŠ¥ï¼š</p> 
<pre><code class="prism language-csharp">GET <span class="token operator">/</span>weatherforecast<span class="token punctuation">?</span>days<span class="token operator">=</span><span class="token number">21</span> HTTP<span class="token operator">/</span><span class="token number">1.1</span>
Host<span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">7240</span>
Scheme<span class="token punctuation">:</span> https
</code></pre> 
<p>å½“æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­æœªæä¾› days å‚æ•°æ—¶ï¼Œå°†ä½¿ç”¨æ­¤é»˜è®¤å€¼ã€‚days å‚æ•°ç”¨äºæŒ‡å®šåº”ç”Ÿæˆå¤©æ°”é¢„æŠ¥çš„å¤©æ•°ã€‚æœ‰å…³ ASP.NET Core Minimal API çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/parameter-binding?view=aspnetcore-8.0#optional-parameters" rel="nofollow">å¯é€‰å‚æ•°</a>ã€‚</p> 
<h3><a id="_149"></a>ä¸‹ä¸€æ­¥è®¡åˆ’</h3> 
<p>è¿™å°±æ˜¯å…³äº C# 12 éƒ¨åˆ†æ–°ç‰¹æ€§ç³»åˆ—æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ï¼ï¼æˆ‘å¸Œæœ›æ‚¨å–œæ¬¢äº†è§£è¿™äº›æ–°åŠŸèƒ½ä»¥åŠå®ƒä»¬å¦‚ä½•å¸®åŠ©æ‚¨é‡æ„ä»£ç ã€‚</p> 
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨äº†è§£äº† C# 12 ä¸­çš„é»˜è®¤ lambda å‚æ•°åŠŸèƒ½ã€‚æ­¤åŠŸèƒ½å…è®¸å¼€å‘äººå‘˜åœ¨ lambda ä¸­è¡¨è¾¾é»˜è®¤å‚æ•°å€¼ã€‚è¯·åŠ¡å¿…åœ¨æ‚¨è‡ªå·±çš„ä»£ç ä¸­å°è¯•ä¸€ä¸‹ï¼å¦‚éœ€æ›´å¤šèµ„æºï¼Œæˆ‘å»ºè®®æ‚¨æŸ¥çœ‹ä»¥ä¸‹é“¾æ¥ï¼š</p> 
<ul><li><a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/operators/lambda-expressions" rel="nofollow">C# è¯­è¨€å‚è€ƒï¼šLambda è¡¨è¾¾å¼</a></li><li><a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-12.0/lambda-method-group-defaults" rel="nofollow">C# è¯­è¨€å‚è€ƒï¼šLambda æ–¹æ³•ç»„é»˜è®¤å€¼</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/97b147ca9b23e7da9f434614e2c3f182/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€C&#43;&#43; STLã€‘æ¨¡æ‹Ÿå®ç° vector</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/93c95bcc2ebb9cfe6104b2d890af13f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">iOS å¼€å‘è€…çš„ Flutter å…¥é—¨è¯¾</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>