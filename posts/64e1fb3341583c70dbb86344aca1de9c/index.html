<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Oracle JSON 函数详解与实战 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/64e1fb3341583c70dbb86344aca1de9c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Oracle JSON 函数详解与实战">
  <meta property="og:description" content="Oracle 数据库提供了丰富的 JSON 函数集，使得开发者可以高效地处理 JSON 数据。本文将详细介绍这些函数，包括它们的语法、使用场景、具体示例，以及在实际项目中的应用。
文章目录 JSON_VALUE语法参数说明示例 JSON_QUERY语法示例 JSON_TABLE语法示例 JSON_EXISTS语法示例 JSON_OBJECT语法示例 JSON_ARRAY语法示例 JSON_MERGEPATCH语法示例 JSON_OBJECTAGG语法示例 JSON_ARRAYAGG语法示例 JSON_SCALAR语法示例 JSON_DATAGUIDE语法示例 实战应用场景场景一：从复杂 JSON 结构中提取多层嵌套数据示例数据查询示例 场景二：合并和更新 JSON 文档示例数据合并示例 JSON_VALUE JSON_VALUE 函数用于从 JSON 文档中提取单个标量值（如字符串、数字、布尔值）。它特别适合用于提取具体的字段值。
语法 JSON_VALUE(expression, path RETURNING data_type DEFAULT default_value ON ERROR error_clause) 参数说明 expression: JSON 数据的列或文本。path: JSON 路径表达式，指向要提取的值。data_type: 返回的数据类型。default_value: 如果未找到值时的默认值。error_clause: 发生错误时的处理方式。 示例 从 JSON 文档中提取名称为 “name” 的值，并指定返回类型为 VARCHAR2：
SELECT JSON_VALUE(&#39;{&#34;name&#34;: &#34;John&#34;, &#34;age&#34;: 30}&#39;, &#39;$.name&#39; RETURNING VARCHAR2) AS name FROM dual; JSON_QUERY JSON_QUERY 函数用于从 JSON 文档中提取 JSON 对象或数组，而不是单个标量值。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-22T17:56:31+08:00">
    <meta property="article:modified_time" content="2024-05-22T17:56:31+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Oracle JSON 函数详解与实战</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Oracle 数据库提供了丰富的 JSON 函数集，使得开发者可以高效地处理 JSON 数据。本文将详细介绍这些函数，包括它们的语法、使用场景、具体示例，以及在实际项目中的应用。</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#JSON_VALUE_4" rel="nofollow">JSON_VALUE</a></li><li><ul><li><a href="#_8" rel="nofollow">语法</a></li><li><a href="#_13" rel="nofollow">参数说明</a></li><li><a href="#_20" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_QUERY_27" rel="nofollow">JSON_QUERY</a></li><li><ul><li><a href="#_31" rel="nofollow">语法</a></li><li><a href="#_36" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_TABLE_43" rel="nofollow">JSON_TABLE</a></li><li><ul><li><a href="#_47" rel="nofollow">语法</a></li><li><a href="#_54" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_EXISTS_68" rel="nofollow">JSON_EXISTS</a></li><li><ul><li><a href="#_72" rel="nofollow">语法</a></li><li><a href="#_77" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_OBJECT_84" rel="nofollow">JSON_OBJECT</a></li><li><ul><li><a href="#_88" rel="nofollow">语法</a></li><li><a href="#_93" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_ARRAY_100" rel="nofollow">JSON_ARRAY</a></li><li><ul><li><a href="#_104" rel="nofollow">语法</a></li><li><a href="#_109" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_MERGEPATCH_116" rel="nofollow">JSON_MERGEPATCH</a></li><li><ul><li><a href="#_120" rel="nofollow">语法</a></li><li><a href="#_125" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_OBJECTAGG_132" rel="nofollow">JSON_OBJECTAGG</a></li><li><ul><li><a href="#_136" rel="nofollow">语法</a></li><li><a href="#_141" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_ARRAYAGG_149" rel="nofollow">JSON_ARRAYAGG</a></li><li><ul><li><a href="#_153" rel="nofollow">语法</a></li><li><a href="#_158" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_SCALAR_166" rel="nofollow">JSON_SCALAR</a></li><li><ul><li><a href="#_170" rel="nofollow">语法</a></li><li><a href="#_175" rel="nofollow">示例</a></li></ul> 
    </li><li><a href="#JSON_DATAGUIDE_182" rel="nofollow">JSON_DATAGUIDE</a></li><li><ul><li><a href="#_186" rel="nofollow">语法</a></li><li><a href="#_191" rel="nofollow">示例</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_198" rel="nofollow">实战应用场景</a></li><li><ul><li><a href="#_JSON__200" rel="nofollow">场景一：从复杂 JSON 结构中提取多层嵌套数据</a></li><li><ul><li><a href="#_204" rel="nofollow">示例数据</a></li><li><a href="#_235" rel="nofollow">查询示例</a></li></ul> 
    </li><li><a href="#_JSON__255" rel="nofollow">场景二：合并和更新 JSON 文档</a></li><li><ul><li><a href="#_259" rel="nofollow">示例数据</a></li><li><a href="#_275" rel="nofollow">合并示例</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_282" rel="nofollow"></a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="JSON_VALUE_4"></a>JSON_VALUE</h4> 
<p><code>JSON_VALUE</code> 函数用于从 JSON 文档中提取单个标量值（如字符串、数字、布尔值）。它特别适合用于提取具体的字段值。</p> 
<h5><a id="_8"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_VALUE<span class="token punctuation">(</span>expression<span class="token punctuation">,</span> path <span class="token keyword">RETURNING</span> data_type <span class="token keyword">DEFAULT</span> default_value <span class="token keyword">ON</span> ERROR error_clause<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_13"></a>参数说明</h5> 
<ul><li><code>expression</code>: JSON 数据的列或文本。</li><li><code>path</code>: JSON 路径表达式，指向要提取的值。</li><li><code>data_type</code>: 返回的数据类型。</li><li><code>default_value</code>: 如果未找到值时的默认值。</li><li><code>error_clause</code>: 发生错误时的处理方式。</li></ul> 
<h5><a id="_20"></a>示例</h5> 
<p>从 JSON 文档中提取名称为 “name” 的值，并指定返回类型为 <code>VARCHAR2</code>：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_VALUE<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30}'</span><span class="token punctuation">,</span> <span class="token string">'$.name'</span> <span class="token keyword">RETURNING</span> VARCHAR2<span class="token punctuation">)</span> <span class="token keyword">AS</span> name
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_QUERY_27"></a>JSON_QUERY</h4> 
<p><code>JSON_QUERY</code> 函数用于从 JSON 文档中提取 JSON 对象或数组，而不是单个标量值。</p> 
<h5><a id="_31"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_QUERY<span class="token punctuation">(</span>expression<span class="token punctuation">,</span> path <span class="token punctuation">[</span> <span class="token keyword">RETURNING</span> data_type <span class="token punctuation">]</span> <span class="token punctuation">[</span> PRETTY <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token keyword">WITH</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">KEYS</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> error_clause <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_36"></a>示例</h5> 
<p>从 JSON 文档中提取地址对象：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_QUERY<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30, "address": {"city": "New York", "zipcode": "10001"}}'</span><span class="token punctuation">,</span> <span class="token string">'$.address'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> address
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_TABLE_43"></a>JSON_TABLE</h4> 
<p><code>JSON_TABLE</code> 函数将 JSON 数据展开为关系表形式，允许你使用 SQL 查询 JSON 数据的各个部分。</p> 
<h5><a id="_47"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_TABLE<span class="token punctuation">(</span>expression<span class="token punctuation">,</span> path
  <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>column_name column_type PATH <span class="token string">'json_path'</span> <span class="token punctuation">[</span> <span class="token keyword">DEFAULT</span> default_expr <span class="token punctuation">]</span> <span class="token punctuation">[</span> error_clause <span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_54"></a>示例</h5> 
<p>将 JSON 数组展开为表格：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> jt<span class="token punctuation">.</span>title<span class="token punctuation">,</span> jt<span class="token punctuation">.</span><span class="token keyword">key</span><span class="token punctuation">,</span> jt<span class="token punctuation">.</span><span class="token keyword">level</span>
<span class="token keyword">FROM</span> json_table<span class="token punctuation">,</span>
     JSON_TABLE<span class="token punctuation">(</span>json_column<span class="token punctuation">,</span> <span class="token string">'$[*]'</span>
       <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>
         title VARCHAR2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> PATH <span class="token string">'$.title'</span><span class="token punctuation">,</span>
         <span class="token keyword">key</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> PATH <span class="token string">'$.key'</span><span class="token punctuation">,</span>
         <span class="token keyword">level</span> NUMBER PATH <span class="token string">'$.level'</span>
       <span class="token punctuation">)</span>
     <span class="token punctuation">)</span> jt<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_EXISTS_68"></a>JSON_EXISTS</h4> 
<p><code>JSON_EXISTS</code> 函数用于检查 JSON 文档中是否存在指定的路径。</p> 
<h5><a id="_72"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_EXISTS<span class="token punctuation">(</span>expression<span class="token punctuation">,</span> path <span class="token punctuation">[</span> error_clause <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_77"></a>示例</h5> 
<p>检查 JSON 文档中是否存在 “address” 对象：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_EXISTS<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30, "address": {"city": "New York", "zipcode": "10001"}}'</span><span class="token punctuation">,</span> <span class="token string">'$.address'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> address_exists
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_OBJECT_84"></a>JSON_OBJECT</h4> 
<p><code>JSON_OBJECT</code> 函数用于生成一个 JSON 对象，它允许将键值对转换为 JSON 格式。</p> 
<h5><a id="_88"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_OBJECT<span class="token punctuation">(</span><span class="token keyword">key</span> <span class="token keyword">VALUE</span> <span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">key</span> <span class="token keyword">VALUE</span> <span class="token keyword">value</span> <span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_93"></a>示例</h5> 
<p>生成一个 JSON 对象：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_OBJECT<span class="token punctuation">(</span><span class="token string">'name'</span> <span class="token keyword">VALUE</span> <span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token string">'age'</span> <span class="token keyword">VALUE</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> json_object
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_ARRAY_100"></a>JSON_ARRAY</h4> 
<p><code>JSON_ARRAY</code> 函数用于生成一个 JSON 数组，支持多种类型的值。</p> 
<h5><a id="_104"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_ARRAY<span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">value</span> <span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_109"></a>示例</h5> 
<p>生成一个 JSON 数组：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_ARRAY<span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> json_array
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_MERGEPATCH_116"></a>JSON_MERGEPATCH</h4> 
<p><code>JSON_MERGEPATCH</code> 函数用于将两个 JSON 文档合并。它遵循 JSON Merge Patch 标准，适合用于部分更新 JSON 文档。</p> 
<h5><a id="_120"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_MERGEPATCH<span class="token punctuation">(</span>target<span class="token punctuation">,</span> patch<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_125"></a>示例</h5> 
<p>将两个 JSON 文档合并：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_MERGEPATCH<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30}'</span><span class="token punctuation">,</span> <span class="token string">'{"age": 31, "city": "New York"}'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> merged_json
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_OBJECTAGG_132"></a>JSON_OBJECTAGG</h4> 
<p><code>JSON_OBJECTAGG</code> 函数用于将一组键值对聚合成一个 JSON 对象，通常用于 GROUP BY 查询中。</p> 
<h5><a id="_136"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_OBJECTAGG<span class="token punctuation">(</span><span class="token keyword">key</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_141"></a>示例</h5> 
<p>将一组键值对聚合成 JSON 对象：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_OBJECTAGG<span class="token punctuation">(</span>department_name<span class="token punctuation">,</span> department_id<span class="token punctuation">)</span> <span class="token keyword">AS</span> departments_json
<span class="token keyword">FROM</span> departments
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> some_column<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_ARRAYAGG_149"></a>JSON_ARRAYAGG</h4> 
<p><code>JSON_ARRAYAGG</code> 函数用于将一组值聚合成一个 JSON 数组，类似于 SQL 的 <code>ARRAY_AGG</code> 函数。</p> 
<h5><a id="_153"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_ARRAYAGG<span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_158"></a>示例</h5> 
<p>将一组值聚合成 JSON 数组：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_ARRAYAGG<span class="token punctuation">(</span>employee_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> employees_json
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> some_column<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_SCALAR_166"></a>JSON_SCALAR</h4> 
<p><code>JSON_SCALAR</code> 函数将标量值转换为 JSON 标量值，适合用于需要将 SQL 标量值转换为 JSON 格式的场景。</p> 
<h5><a id="_170"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_SCALAR<span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_175"></a>示例</h5> 
<p>将字符串转换为 JSON 标量值：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_SCALAR<span class="token punctuation">(</span><span class="token string">'Hello, World!'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> json_scalar
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="JSON_DATAGUIDE_182"></a>JSON_DATAGUIDE</h4> 
<p><code>JSON_DATAGUIDE</code> 函数用于生成 JSON 数据指南，描述 JSON 文档的结构。它对于了解和管理复杂的 JSON 数据非常有用。</p> 
<h5><a id="_186"></a>语法</h5> 
<pre><code class="prism language-sql">JSON_DATAGUIDE<span class="token punctuation">(</span>expression<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_191"></a>示例</h5> 
<p>生成 JSON 数据指南：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_DATAGUIDE<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30, "address": {"city": "New York", "zipcode": "10001"}}'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> data_guide
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_198"></a>实战应用场景</h3> 
<h4><a id="_JSON__200"></a>场景一：从复杂 JSON 结构中提取多层嵌套数据</h4> 
<p>假设我们有一个复杂的 JSON 结构，包含嵌套的对象和数组。我们需要从中提取某些特定的信息并进行统计分析。</p> 
<h5><a id="_204"></a>示例数据</h5> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"employees"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      <span class="token string-property property">"department"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Sales"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"location"</span><span class="token operator">:</span> <span class="token string">"New York"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">"projects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Project A"</span><span class="token punctuation">,</span> <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token string">"Completed"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Project B"</span><span class="token punctuation">,</span> <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token string">"Ongoing"</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">35</span><span class="token punctuation">,</span>
      <span class="token string-property property">"department"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"HR"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"location"</span><span class="token operator">:</span> <span class="token string">"Chicago"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">"projects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Project C"</span><span class="token punctuation">,</span> <span class="token string-property property">"status"</span><span class="token operator">:</span> <span class="token string">"Ongoing"</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_235"></a>查询示例</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>age<span class="token punctuation">,</span> d<span class="token punctuation">.</span>name <span class="token keyword">AS</span> department_name<span class="token punctuation">,</span> d<span class="token punctuation">.</span>location<span class="token punctuation">,</span> p<span class="token punctuation">.</span>name <span class="token keyword">AS</span> project_name<span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token keyword">status</span>
<span class="token keyword">FROM</span> json_table t<span class="token punctuation">,</span>
     JSON_TABLE<span class="token punctuation">(</span>t<span class="token punctuation">.</span>json_column<span class="token punctuation">,</span> <span class="token string">'$.employees[*]'</span>
       <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>
         name VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> PATH <span class="token string">'$.name'</span><span class="token punctuation">,</span>
         age NUMBER PATH <span class="token string">'$.age'</span><span class="token punctuation">,</span>
         NESTED PATH <span class="token string">'$.department'</span> <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>
           department_name VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> PATH <span class="token string">'$.name'</span><span class="token punctuation">,</span>
           location VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> PATH <span class="token string">'$.location'</span>
         <span class="token punctuation">)</span><span class="token punctuation">,</span>
         NESTED PATH <span class="token string">'$.projects[*]'</span> <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>
           project_name VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> PATH <span class="token string">'$.name'</span><span class="token punctuation">,</span>
           <span class="token keyword">status</span> VARCHAR2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> PATH <span class="token string">'$.status'</span>
         <span class="token punctuation">)</span>
       <span class="token punctuation">)</span>
     <span class="token punctuation">)</span> e<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_JSON__255"></a>场景二：合并和更新 JSON 文档</h4> 
<p>假设我们有两个 JSON 文档，表示不同时间点的用户信息更新。我们需要合并这些文档以生成最新的用户信息。</p> 
<h5><a id="_259"></a>示例数据</h5> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  <span class="token string-property property">"address"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">"city"</span><span class="token operator">:</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string-property property">"zipcode"</span><span class="token operator">:</span> <span class="token string">"10001"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">31</span><span class="token punctuation">,</span>
  <span class="token string-property property">"address"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">"city"</span><span class="token operator">:</span> <span class="token string">"San Francisco"</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_275"></a>合并示例</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_MERGEPATCH<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30, "address": {"city": "New York", "zipcode": "10001"}}'</span><span class="token punctuation">,</span>
                       <span class="token string">'{"age": 31, "address": {"city": "San Francisco"}}'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> merged_json
<span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_282"></a></h3> 
<p>结论</p> 
<p>Oracle 提供了全面的 JSON 函数集，允许开发者高效地处理 JSON 数据。无论是提取、查询、生成还是合并 JSON 数据，这些函数都能满足各种实际需求。通过掌握这些函数，开发者可以更好地在 Oracle 数据库中处理和分析 JSON 数据。希望本文能帮助你更好地理解和应用这些强大的工具。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3ac57b8f16eb07057df8910f69e97789/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2024 好用免费的 AI 工具介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/771d6928384c7e218da66ea860fa9fd0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android network — 进程指定网络发包</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>