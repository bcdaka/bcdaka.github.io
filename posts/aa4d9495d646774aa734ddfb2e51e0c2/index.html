<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>内网穿透 篇五：通过 ddns-go 动态域名解析 实现公网访问内网服务 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/aa4d9495d646774aa734ddfb2e51e0c2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="内网穿透 篇五：通过 ddns-go 动态域名解析 实现公网访问内网服务">
  <meta property="og:description" content="本文首发于只抄博客，欢迎点击原文链接了解更多内容。
前言 如今 IPv6 的普及度越来越高，与 IPv4 不同的是，大部分人获取到的 IPv6 是公网 IP 并且每一个设备都有一个属于自己的公网 IPv6，因此我们无需再进行内网穿透、端口转发等操作，直接通过设备的公网 IPv6 就可以成功访问到内网服务。
但是直接记住这么长 IPv6 的地址来访问显然不现实，我们可以将域名通过 AAAA 解析到我们的 IPv6 地址上，这样访问时，只需要输入域名，DNS 就会帮我们解析到响应的 IP 地址了。
即便如此，几天之后你就会发现域名又无法访问了，这是因为运营商分配的 IPv6 地址是动态的，过几天 IPv6 就会变动一次，所以就需要 DDNS 了，它可以定时获取我们当前的 IPv6 地址，并将该地址同步到 DNS 服务商。
安装 ddns-go ddns-go 是一个使用 Go 语言编写的 DDNS 客户端，支持多种 DNS 服务商，通过 Docker 可以直接安装
docker run -d --name ddns-go --restart=always --net=host -v /opt/ddns-go:/root jeessy/ddns-go 使用 ddns-go 在使用 DDNS 之前，需要确保正常获取到 IPv6，并能正常访问 IPv6，通过 http://[ipv6]:port 的形式，能够访问即可。若访问失败，则需要检查光猫或路由器的 IPv6 防火墙配置是否正确。
在浏览器中打开 http://ip:9876 即可进入到 ddns-go 的管理界面，按照以下步骤依次配置：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-22T20:07:04+08:00">
    <meta property="article:modified_time" content="2024-04-22T20:07:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">内网穿透 篇五：通过 ddns-go 动态域名解析 实现公网访问内网服务</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>本文首发于只抄博客，欢迎点击<a href="" rel="nofollow">原文链接</a>了解更多内容。</p> 
</blockquote> 
<h3><a id="_1"></a>前言</h3> 
<p>如今 IPv6 的普及度越来越高，与 IPv4 不同的是，大部分人获取到的 IPv6 是公网 IP 并且每一个设备都有一个属于自己的公网 IPv6，因此我们无需再进行内网穿透、端口转发等操作，直接通过设备的公网 IPv6 就可以成功访问到内网服务。</p> 
<p>但是直接记住这么长 IPv6 的地址来访问显然不现实，我们可以将域名通过 AAAA 解析到我们的 IPv6 地址上，这样访问时，只需要输入域名，DNS 就会帮我们解析到响应的 IP 地址了。</p> 
<p>即便如此，几天之后你就会发现域名又无法访问了，这是因为运营商分配的 IPv6 地址是动态的，过几天 IPv6 就会变动一次，所以就需要 DDNS 了，它可以定时获取我们当前的 IPv6 地址，并将该地址同步到 DNS 服务商。</p> 
<h3><a id="_ddnsgo_9"></a>安装 ddns-go</h3> 
<p>ddns-go 是一个使用 Go 语言编写的 DDNS 客户端，支持多种 DNS 服务商，通过 Docker 可以直接安装</p> 
<pre><code class="prism language-sh"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> ddns-go <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--net</span><span class="token operator">=</span>host <span class="token parameter variable">-v</span> /opt/ddns-go:/root jeessy/ddns-go
</code></pre> 
<h3><a id="_ddnsgo_17"></a>使用 ddns-go</h3> 
<p>在使用 DDNS 之前，需要确保正常获取到 IPv6，并能正常访问 IPv6，通过 <code>http://[ipv6]:port</code> 的形式，能够访问即可。若访问失败，则需要检查光猫或路由器的 IPv6 防火墙配置是否正确。</p> 
<p>在浏览器中打开 <code>http://ip:9876</code> 即可进入到 ddns-go 的管理界面，按照以下步骤依次配置：</p> 
<ol><li>首先，选择对应的 DNS 服务商，本文以 Cloudflare 为例，点击 <strong>创建令牌 -&gt; 编辑区域 DNS (使用模板)</strong> 跳转到 Cloudflare 创建一个 Token</li></ol> 
<p><img src="https://images2.imgbox.com/c2/d9/gWyAlYDQ_o.png" alt="ddns-go1"></p> 
<ol start="2"><li>点击 Create Token 创建 Token</li></ol> 
<p><img src="https://images2.imgbox.com/00/b1/evBO8jV9_o.png" alt="ddns-go2"></p> 
<ol start="3"><li>选择 Edit zone DNS，点击 Use template</li></ol> 
<p><img src="https://images2.imgbox.com/6b/f0/VIcCk4sU_o.png" alt="ddns-go3"></p> 
<ol start="4"><li>选择自己需要的域名</li></ol> 
<p><img src="https://images2.imgbox.com/96/7a/VgoHIrqU_o.png" alt="ddns-go4"></p> 
<ol start="5"><li>最后会出现一个 Token，将该值填入到 ddns-go 中即可</li></ol> 
<p><img src="https://images2.imgbox.com/4c/64/vyZ0ZkUq_o.png" alt="ddns-go5"></p> 
<ol start="6"><li>返回 ddns-go，来到下方的 IPv4 与 IPv6 设置，一般没有公网 IPv4 的可以取消勾选 IPv4，勾选 IPv6，将域名填入下方的 Domains 中，稍等片刻，就可以直接用该域名访问到内网服务了（部分地区80、443端口没有开放，需要使用非标端口）</li></ol> 
<p><img src="https://images2.imgbox.com/6b/02/epTVCXIH_o.png" alt="ddns-go6"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/39d8ad530719f4b2b9bb9ac8eda0bdcb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL的创建用户以及用户权限</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/095e5f3b780cc5a148f3fde8680369f7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring AI教程（二）Chat API之流式输出</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>