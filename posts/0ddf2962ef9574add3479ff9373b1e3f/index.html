<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Android Studio】Webview 内核升级得三种方法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0ddf2962ef9574add3479ff9373b1e3f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Android Studio】Webview 内核升级得三种方法">
  <meta property="og:description" content="【Android Studio】Webview 内核升级得三种方法 前言X5 腾讯组件crosswalk开源项目webview升级加载的内核（完美解决）总结 前言 在APP 中进行网页加载，一般采用原生自带的Webview 组件，但在需要加载高版本网页的时候，有时候会遇到加载失败的情况，究其原因主要是内核版本太低，导致加载失败。该组件使用的内核在Android 4.4 （API 19）前 ，主要用得是webkit 的内核；Android 4.4后，直接使用的是Chrome内核。目前Chrome内核已经到了120&#43;，时常会遇到问题，谷歌浏览器可以正常加载网页，但内嵌网页加载就是不行。因此，基于这种情况，考虑进行Webview 组件内核的升级。
可用于检测内核版本的网址： https://liulanmi.com/labs/core.html
关于内核升级，目前主要有3种方法 ：
用 X5 腾讯组件，替换Webview 加载网页用intel 的crosswalk开源项目在Webview 基础上升级加载的内核 X5 腾讯组件 它跟webview 很像，在进行布局构建时，组件选择 com.tencent.smtt.sdk.WebView ，然后其余方法基本使用跟webview 一样。在腾讯TBS开发指引 里面有很清楚的介绍，而且还可以下载最新的SDK。
&lt;com.tencent.smtt.sdk.WebView android:id=&#34;@&#43;id/web&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:fitsSystemWindows=&#34;true&#34; app:layout_constraintBottom_toBottomOf=&#34;parent&#34; app:layout_constraintEnd_toEndOf=&#34;parent&#34; app:layout_constraintStart_toStartOf=&#34;parent&#34; app:layout_constraintTop_toTopOf=&#34;parent&#34; /&gt; 但是运行后会发现，依旧无法加载网页，虽然导入了 SDK 库，但无法进行内核下载，故无法使用。直接访问说明中的内核下载连接，不能访问。在网上找了一圈，是由于X5内核开始收费了，所以该方法无法解决问题。
crosswalk开源项目 用这个方案，一开头就碰到问题，crosswalk的官方网站不能进了，那么库也就不能下，刚好碰到Intel 服务器崩了，我都怀疑是不是因为这个原因。后来到是在CSDN上下载了 支持ARM 和X86 的 crosswalk-23.53.589.4.aar ，但导入后，运行是正常了，但显示内核版本更低了，离要求的远远达不到。后来查看了原因，原来是这个项目早就停了…
&lt;org.xwalk.core.XWalkView android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:id=&#34;@&#43;id/web&#34;/&gt; 而且这边发现原生的都比它高，当然也有可能跟加载的crosswalk-23.53.589.4.aar版本低有关系吧，由于无法进官网，导致这个也无法确定原因。
webview升级加载的内核（完美解决） 这个只能说真得是强得离谱，直接用外部下载的内核去进行webview 替换，然后每次初始化内核时，进行加载。而且可以选择arm 或者x86 ，内核版本目前都是120&#43;的，很舒服。webview 使用还是跟之前的一模一样，只是加了内核升级这一过程。
&lt;WebView android:id=&#34;@&#43;id/webview&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-08T23:50:03+08:00">
    <meta property="article:modified_time" content="2024-08-08T23:50:03+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Android Studio】Webview 内核升级得三种方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>【Android Studio】Webview 内核升级得三种方法</h4> 
 <ul><li><a href="#_2" rel="nofollow">前言</a></li><li><a href="#X5__15" rel="nofollow">X5 腾讯组件</a></li><li><a href="#crosswalk_33" rel="nofollow">crosswalk开源项目</a></li><li><a href="#webview_48" rel="nofollow">webview升级加载的内核（完美解决）</a></li><li><a href="#_61" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>前言</h2> 
<p>在APP 中进行网页加载，一般采用原生自带的Webview 组件，但在需要加载高版本网页的时候，有时候会遇到加载失败的情况，究其原因主要是<strong>内核版本太低</strong>，导致加载失败。该组件使用的内核在Android 4.4 （API 19）前 ，主要用得是webkit 的内核；Android 4.4后，直接使用的是Chrome内核。目前Chrome内核已经到了120+，时常会遇到问题，<strong>谷歌浏览器可以正常加载网页，但内嵌网页加载就是不行</strong>。因此，基于这种情况，考虑进行Webview 组件内核的升级。</p> 
<p>可用于检测内核版本的网址： <strong>https://liulanmi.com/labs/core.html</strong></p> 
<p>关于内核升级，目前主要有3种方法 ：</p> 
<ul><li>用 X5 腾讯组件，替换Webview 加载网页</li><li>用intel 的crosswalk开源项目</li><li>在Webview 基础上升级加载的内核</li></ul> 
<h2><a id="X5__15"></a>X5 腾讯组件</h2> 
<p>它跟webview 很像，在进行布局构建时，组件选择 <code>com.tencent.smtt.sdk.WebView</code> ，然后其余方法基本使用跟webview 一样。在<a href="https://x5.tencent.com/docs/access.html" rel="nofollow">腾讯TBS开发指引</a> 里面有很清楚的介绍，而且还可以下载最新的SDK。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.tencent.smtt.sdk.WebView</span>
         <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/web<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">android:</span>fitsSystemWindows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintBottom_toBottomOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintEnd_toEndOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintStart_toStartOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">app:</span>layout_constraintTop_toTopOf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>parent<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>但是运行后会发现，依旧无法加载网页，虽然导入了 SDK 库，但无法进行内核下载，故无法使用。直接访问说明中的内核下载连接，不能访问。在网上找了一圈，是由于<strong>X5内核开始收费了，所以该方法无法解决问题</strong>。</p> 
<h2><a id="crosswalk_33"></a>crosswalk开源项目</h2> 
<p>用这个方案，一开头就碰到问题，crosswalk的官方网站不能进了，那么库也就不能下，刚好碰到Intel 服务器崩了，我都怀疑是不是因为这个原因。后来到是在CSDN上下载了 支持ARM 和X86 的 <strong>crosswalk-23.53.589.4.aar</strong> ，但导入后，运行是正常了，但显示内核版本更低了，离要求的远远达不到。后来查看了原因，原来是这个项目早就停了…</p> 
<p><img src="https://images2.imgbox.com/d4/64/YNvtKaEa_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>org.xwalk.core.XWalkView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/web<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>而且这边发现原生的都比它高，当然也有可能跟加载的<strong>crosswalk-23.53.589.4.aar</strong>版本低有关系吧，由于无法进官网，导致这个也无法确定原因。<br> <img src="https://images2.imgbox.com/f6/56/VVBIQtFc_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="webview_48"></a>webview升级加载的内核（完美解决）</h2> 
<p>这个只能说真得是强得离谱，直接用外部下载的内核去进行webview 替换，然后每次初始化内核时，进行加载。而且可以选择arm 或者x86 ，内核版本目前都是120+的，很舒服。webview 使用还是跟之前的一模一样，只是加了内核升级这一过程。</p> 
<p><img src="https://images2.imgbox.com/14/e4/Dl5KOHmQ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WebView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/webview<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<h2><a id="_61"></a>总结</h2> 
<ul><li> <p>目前三个方案的demo ，已经都整理，直接可以运行使用。</p> </li><li> <p>升级的内核资源已经都下载，方便后续直接内嵌，目前demo 里面是采用在线下载这个方式，当然也是可以的。</p> </li><li> <p>在采用<strong>在Webview 基础上升级加载的内核</strong> 方案时，由于第三库是开源的，我已经从github上下载下来，可以方便阅读理解。</p> </li><li> <p>对这些文件的说明，以及研究内核升级过程中借鉴的资料链接，已经都整理在了 <strong>说明</strong> 中，方便后续查看。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/a4/f1/vgs1JcVl_o.png" alt="在这里插入图片描述"></p> 
<ul><li>资源已经上传，有需要自行下载即可。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53b8cef0313c8ac5f4583756d9c7f073/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【大模型从入门到精通13】openAI API 构建和评估大型语言模型（LLM）应用1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/496a4c2fe26c172e254851c4024ddf1c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[Qt][信号与槽][下]详细讲解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>