<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Ubuntu22.04 使用stable-diffusion-webui 秋叶整合包 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a186b5b351e1d6d90f2861be0b3fc766/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="在Ubuntu22.04 使用stable-diffusion-webui 秋叶整合包">
  <meta property="og:description" content="背景 众所周知，赛博菩萨已经发布了windows下的整合包，开箱即用，且集成度较高。
那我为啥非要在Ubuntu下使用呢？ 当然是因为主力机就是Ubuntu系统啦。而且涉及到sd webui API 的调用，在Ubuntu 下调试更加方便一点。
那有没有可以在Ubuntu下使用的方式呢？
两种思路：
使用SD-WebUI 的安装脚本，安装好之后，将插件等复制一份过去。直接复制整个包，然后小小改造一下。 相比之下，方法一可能还会遇到一些网络问题，所以，我选择了更偷懒的方法二。
分析一下整合包的内容，其实就多了windows 下的git 和 python 的环境。
git Ubuntu 自带，windows 的python, Ubuntu也用不了，所以这两个直接删了，就可以进行改造了。
创建python 环境 我因为习惯用conda 管理，就用conda 创建了。SD-WebUI 是用python venv 管理的，在 webui-user.sh 中配置
conda 脚本
conda create -n sdweb python=3.10.6 conda activate sdweb venv
# python3.10 -m venv &lt;env name&gt; python3 -m venv venv # 启动 source ./venv/bin/activate # 退出 deactivate 安装所需环境 执行启动脚本，就会安装缺失的python包了。
bash webui.sh 需要注意，这里是bash， 不是sh
如果你选择从头安装的话，如下命令
wget -q https://raw.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-23T12:39:40+08:00">
    <meta property="article:modified_time" content="2024-06-23T12:39:40+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Ubuntu22.04 使用stable-diffusion-webui 秋叶整合包</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_2"></a>背景</h2> 
<p>众所周知，赛博菩萨已经发布了windows下的<a href="https://www.bilibili.com/video/BV1iM4y1y7oA/" rel="nofollow">整合包</a>，开箱即用，且集成度较高。<br> 那我为啥非要在Ubuntu下使用呢？ 当然是因为主力机就是Ubuntu系统啦。而且涉及到sd webui API 的调用，在Ubuntu 下调试更加方便一点。</p> 
<p>那有没有可以在Ubuntu下使用的方式呢？<br> 两种思路：</p> 
<ol><li>使用SD-WebUI 的安装脚本，安装好之后，将插件等复制一份过去。</li><li>直接复制整个包，然后小小改造一下。</li></ol> 
<p>相比之下，方法一可能还会遇到一些网络问题，所以，我选择了更偷懒的方法二。</p> 
<p>分析一下整合包的内容，其实就多了windows 下的git 和 python 的环境。</p> 
<p><img src="https://images2.imgbox.com/01/40/OqQbVpus_o.png" alt="在这里插入图片描述"></p> 
<p>git Ubuntu 自带，windows 的python, Ubuntu也用不了，所以这两个直接删了，就可以进行改造了。</p> 
<h3><a id="python__22"></a>创建python 环境</h3> 
<p>我因为习惯用conda 管理，就用conda 创建了。SD-WebUI 是用python venv 管理的，在 webui-user.sh 中配置</p> 
<p>conda 脚本</p> 
<pre><code class="prism language-bash">conda create <span class="token parameter variable">-n</span> sdweb <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.10</span>.6        
conda activate sdweb
</code></pre> 
<p>venv</p> 
<pre><code class="prism language-bash"><span class="token comment"># python3.10 -m venv &lt;env name&gt;</span>
python3 <span class="token parameter variable">-m</span> venv venv
<span class="token comment"># 启动</span>
<span class="token builtin class-name">source</span> ./venv/bin/activate
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment"># 退出</span>
deactivate
</code></pre> 
<h3><a id="_47"></a>安装所需环境</h3> 
<p>执行启动脚本，就会安装缺失的python包了。</p> 
<pre><code class="prism language-bash">
<span class="token function">bash</span> webui.sh 
</code></pre> 
<p>需要注意，这里是bash， 不是sh</p> 
<p>如果你选择从头安装的话，如下命令</p> 
<pre><code class="prism language-bash"><span class="token function">wget</span> <span class="token parameter variable">-q</span> https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-webui/master/webui.sh
</code></pre> 
<h3><a id="_64"></a>启动</h3> 
<p>再次启动，需要重新激活</p> 
<pre><code class="prism language-bash">conda activate sdweb
<span class="token function">bash</span> webui.sh
</code></pre> 
<p>就是这么简单。。。 就可以在Ubuntu 下使用了</p> 
<h2><a id="_75"></a>可能遇到问题</h2> 
<p>如出现出现这个问题<code>ValueError: Unknown scheme for proxy URL URL('socks://127.0.0.1:7897/')</code><br> 应该是你上了科技<br> 执行 <code>unset all_proxy; unset ALL_PROXY</code> 即可</p> 
<h2><a id="REF_81"></a>REF</h2> 
<ul><li><a href="https://www.cnblogs.com/wangguishe/p/17381926.html" rel="nofollow">ubuntu22.04 部署 stable-diffusion-webui v1.1.0</a></li><li><a href="https://blog.csdn.net/supperman_009/article/details/130618045">基于趋动云部署秋葉aaaki的Stable Diffusion整合包v4–linux版</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23ccfb11a528a435f3e98895feab5f06/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Java&#43;SpringBoot&#43;Mysql学生成绩管理系统设计与实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/adc89f20f510d5d0e0d9a1083ad93e7a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">模板初阶【C&#43;&#43;】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>