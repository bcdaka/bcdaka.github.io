<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java 数据库连接（JDBC）的使用，包括连接数据库、执行SQL语句等 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0a4f45d168394ff7f8ffffda8301867c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Java 数据库连接（JDBC）的使用，包括连接数据库、执行SQL语句等">
  <meta property="og:description" content="一、简介 Java Database Connectivity（JDBC）是Java应用程序与关系数据库进行交互的一种API。它提供了一组用于访问和操作数据库的标准接口，使开发人员能够使用Java代码执行数据库操作，如查询、插入、更新和删除等。
二、JDBC架构 JDBC由两部分组成：
JDBC API：由Java SE平台提供的接口和类集合，用于定义与数据库交互的标准。JDBC Driver API：由数据库供应商提供的具体实现，用于实际连接和操作数据库。 三、JDBC的核心组件 DriverManager：管理一组数据库驱动程序的基本服务。Connection：表示与特定数据库的连接。Statement：用于执行SQL语句的对象，分为Statement、PreparedStatement、CallableStatement。ResultSet：保存由Statement对象执行SQL查询返回的结果集。SQLException：处理数据库访问出错或其他错误的异常。 四、使用JDBC的步骤 加载驱动程序建立数据库连接创建SQL语句执行SQL语句处理结果集关闭连接 五、具体实现 1. 加载驱动程序 在JDBC 4.0之后，驱动程序通常会自动加载，但为了兼容性，手动加载仍然常见。
try { Class.forName(&#34;com.mysql.cj.jdbc.Driver&#34;); } catch (ClassNotFoundException e) { e.printStackTrace(); } 2. 建立数据库连接 使用DriverManager获取数据库连接。
String url = &#34;jdbc:mysql://localhost:3306/mydatabase&#34;; String user = &#34;root&#34;; String password = &#34;password&#34;; Connection connection = null; try { connection = DriverManager.getConnection(url, user, password); } catch (SQLException e) { e.printStackTrace(); } 3. 创建SQL语句 使用Statement或PreparedStatement对象创建SQL语句。
Statement statement = connection.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-07T10:14:10+08:00">
    <meta property="article:modified_time" content="2024-06-07T10:14:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java 数据库连接（JDBC）的使用，包括连接数据库、执行SQL语句等</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h5>一、简介</h5> 
<p>Java Database Connectivity（JDBC）是Java应用程序与关系数据库进行交互的一种API。它提供了一组用于访问和操作数据库的标准接口，使开发人员能够使用Java代码执行数据库操作，如查询、插入、更新和删除等。</p> 
<h5>二、JDBC架构</h5> 
<p>JDBC由两部分组成：</p> 
<ol><li>JDBC API：由Java SE平台提供的接口和类集合，用于定义与数据库交互的标准。</li><li>JDBC Driver API：由数据库供应商提供的具体实现，用于实际连接和操作数据库。</li></ol> 
<h5>三、JDBC的核心组件</h5> 
<ol><li><strong>DriverManager</strong>：管理一组数据库驱动程序的基本服务。</li><li><strong>Connection</strong>：表示与特定数据库的连接。</li><li><strong>Statement</strong>：用于执行SQL语句的对象，分为<code>Statement</code>、<code>PreparedStatement</code>、<code>CallableStatement</code>。</li><li><strong>ResultSet</strong>：保存由<code>Statement</code>对象执行SQL查询返回的结果集。</li><li><strong>SQLException</strong>：处理数据库访问出错或其他错误的异常。</li></ol> 
<h5>四、使用JDBC的步骤</h5> 
<ol><li><strong>加载驱动程序</strong></li><li><strong>建立数据库连接</strong></li><li><strong>创建SQL语句</strong></li><li><strong>执行SQL语句</strong></li><li><strong>处理结果集</strong></li><li><strong>关闭连接</strong></li></ol> 
<h5>五、具体实现</h5> 
<h6>1. 加载驱动程序</h6> 
<p>在JDBC 4.0之后，驱动程序通常会自动加载，但为了兼容性，手动加载仍然常见。</p> 
<pre><code class="language-java">try {
    Class.forName("com.mysql.cj.jdbc.Driver");
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}
</code></pre> 
<h6>2. 建立数据库连接</h6> 
<p>使用<code>DriverManager</code>获取数据库连接。</p> 
<pre><code class="language-java">String url = "jdbc:mysql://localhost:3306/mydatabase";
String user = "root";
String password = "password";

Connection connection = null;

try {
    connection = DriverManager.getConnection(url, user, password);
} catch (SQLException e) {
    e.printStackTrace();
}
</code></pre> 
<h6>3. 创建SQL语句</h6> 
<p>使用<code>Statement</code>或<code>PreparedStatement</code>对象创建SQL语句。</p> 
<pre><code class="language-java">Statement statement = connection.createStatement();
String sql = "SELECT * FROM users";
</code></pre> 
<p>对于参数化查询，使用<code>PreparedStatement</code>。</p> 
<pre><code class="language-java">String sql = "SELECT * FROM users WHERE id = ?";
PreparedStatement preparedStatement = connection.prepareStatement(sql);
preparedStatement.setInt(1, 1);
</code></pre> 
<h6>4. 执行SQL语句</h6> 
<p>根据SQL语句的类型，使用<code>executeQuery</code>或<code>executeUpdate</code>方法执行。</p> 
<p>查询操作：</p> 
<pre><code class="language-java">ResultSet resultSet = statement.executeQuery(sql);
</code></pre> 
<p>更新操作：</p> 
<pre><code class="language-java">String updateSql = "UPDATE users SET name = 'John' WHERE id = 1";
int rowsAffected = statement.executeUpdate(updateSql);
</code></pre> 
<h6>5. 处理结果集</h6> 
<p><code>ResultSet</code>对象包含查询结果，可以通过<code>next</code>方法迭代访问。</p> 
<pre><code class="language-java">while (resultSet.next()) {
    int id = resultSet.getInt("id");
    String name = resultSet.getString("name");
    System.out.println("ID: " + id + ", Name: " + name);
}
</code></pre> 
<h6>6. 关闭连接</h6> 
<p>为了防止资源泄露，必须关闭数据库连接、语句和结果集。</p> 
<pre><code class="language-java">try {
    if (resultSet != null) resultSet.close();
    if (statement != null) statement.close();
    if (connection != null) connection.close();
} catch (SQLException e) {
    e.printStackTrace();
}
</code></pre> 
<h5>六、示例代码</h5> 
<p>以下是一个完整的JDBC示例程序，展示了如何连接到MySQL数据库，执行查询并处理结果集。</p> 
<pre><code class="language-java">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class JDBCDemo {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/mydatabase";
        String user = "root";
        String password = "password";

        Connection connection = null;
        Statement statement = null;
        ResultSet resultSet = null;

        try {
            // 加载驱动程序
            Class.forName("com.mysql.cj.jdbc.Driver");

            // 建立连接
            connection = DriverManager.getConnection(url, user, password);

            // 创建语句
            statement = connection.createStatement();
            String sql = "SELECT * FROM users";

            // 执行查询
            resultSet = statement.executeQuery(sql);

            // 处理结果集
            while (resultSet.next()) {
                int id = resultSet.getInt("id");
                String name = resultSet.getString("name");
                System.out.println("ID: " + id + ", Name: " + name);
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            // 关闭连接
            try {
                if (resultSet != null) resultSet.close();
                if (statement != null) statement.close();
                if (connection != null) connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
</code></pre> 
<h5>七、使用<code>PreparedStatement</code>防止SQL注入</h5> 
<p>与<code>Statement</code>相比，<code>PreparedStatement</code>可以有效防止SQL注入。</p> 
<pre><code class="language-java">String sql = "SELECT * FROM users WHERE id = ?";
PreparedStatement preparedStatement = connection.prepareStatement(sql);
preparedStatement.setInt(1, 1);
ResultSet resultSet = preparedStatement.executeQuery();

while (resultSet.next()) {
    int id = resultSet.getInt("id");
    String name = resultSet.getString("name");
    System.out.println("ID: " + id + ", Name: " + name);
}
</code></pre> 
<h5>八、事务处理</h5> 
<p>JDBC默认是自动提交模式。可以通过关闭自动提交模式来手动管理事务。</p> 
<pre><code class="language-java">try {
    connection.setAutoCommit(false);

    // 执行多个更新操作
    statement.executeUpdate("INSERT INTO users (name) VALUES ('Alice')");
    statement.executeUpdate("INSERT INTO users (name) VALUES ('Bob')");

    // 提交事务
    connection.commit();
} catch (SQLException e) {
    try {
        // 回滚事务
        connection.rollback();
    } catch (SQLException ex) {
        ex.printStackTrace();
    }
} finally {
    try {
        connection.setAutoCommit(true);
    } catch (SQLException e) {
        e.printStackTrace();
    }
}
</code></pre> 
<h5>九、使用连接池</h5> 
<p>为了提高性能，减少连接的频繁创建和销毁，推荐使用连接池。常用的连接池实现有Apache DBCP、C3P0和HikariCP。</p> 
<p>以下是使用HikariCP的示例：</p> 
<pre><code class="language-java">import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class HikariCPDemo {
    public static void main(String[] args) {
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl("jdbc:mysql://localhost:3306/mydatabase");
        config.setUsername("root");
        config.setPassword("password");
        DataSource dataSource = new HikariDataSource(config);

        try (Connection connection = dataSource.getConnection()) {
            String sql = "SELECT * FROM users";
            PreparedStatement preparedStatement = connection.prepareStatement(sql);
            ResultSet resultSet = preparedStatement.executeQuery();

            while (resultSet.next()) {
                int id = resultSet.getInt("id");
                String name = resultSet.getString("name");
                System.out.println("ID: " + id + ", Name: " + name);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
</code></pre> 
<p>JDBC是Java与数据库交互的重要工具，掌握其使用方法对于开发高效、可靠的Java应用程序至关重要。通过学习JDBC的基本概念、核心组件和使用步骤，结合具体的代码示例，可以更好地理解和应用JDBC，提升数据库编程能力。</p> 
<p>掌握事务处理和连接池的使用可以进一步提高应用程序的性能和稳定性。在实际项目中，通常会结合ORM框架（如Hibernate）来简化数据库操作，但JDBC的基本知识仍是必备的基础技能。</p> 
<p><a href="https://www.wjx.cn/vm/YVkgwlo.aspx#%C2%A0" rel="nofollow" title="黑马程序员免费预约咨询">黑马程序员免费预约咨询</a></p> 
<p><img alt="" height="383" src="https://images2.imgbox.com/ca/bf/0Yeewaon_o.png" width="900"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2c25d2c2c48ec580f17f4445abb3524b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Stable-Diffusion的WebUI部署</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/da10704d97fc5fcfba91849e975eff34/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C语言】学生管理系统：完整模拟与实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>