<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;BFS 回溯】756. 金字塔转换矩阵 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0a1f6642f03bb0dc16be3613e25c78e5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;BFS 回溯】756. 金字塔转换矩阵">
  <meta property="og:description" content="本文涉及知识点 C&#43;&#43;BFS算法
C&#43;&#43;回溯
LeetCode756. 金字塔转换矩阵 你正在把积木堆成金字塔。每个块都有一个颜色，用一个字母表示。每一行的块比它下面的行 少一个块 ，并且居中。
为了使金字塔美观，只有特定的 三角形图案 是允许的。一个三角形的图案由 两个块 和叠在上面的 单个块 组成。模式是以三个字母字符串的列表形式 allowed 给出的，其中模式的前两个字符分别表示左右底部块，第三个字符表示顶部块。
例如，“ABC” 表示一个三角形图案，其中一个 “C” 块堆叠在一个 ‘A’ 块(左)和一个 ‘B’ 块(右)之上。请注意，这与 “BAC” 不同，“B” 在左下角，“A” 在右下角。
你从底部的一排积木 bottom 开始，作为一个单一的字符串，你 必须 使用作为金字塔的底部。
在给定 bottom 和 allowed 的情况下，如果你能一直构建到金字塔顶部，使金字塔中的 每个三角形图案 都是允许的，则返回 true ，否则返回 false 。
示例 1：
输入：bottom = “BCD”, allowed = [“BCC”,“CDE”,“CEA”,“FFF”]
输出：true
解释：允许的三角形模式显示在右边。
从最底层(第3层)开始，我们可以在第2层构建“CE”，然后在第1层构建“E”。
金字塔中有三种三角形图案，分别是“BCC”、“CDE”和“CEA”。都是允许的。
示例 2：
输入：bottom = “AAAA”, allowed = [“AAB”,“AAC”,“BCD”,“BBE”,“DEF”]
输出：false
解释：允许的三角形模式显示在右边。
从最底层(游戏邦注:即第4个关卡)开始，创造第3个关卡有多种方法，但如果尝试所有可能性，你便会在创造第1个关卡前陷入困境。
提示：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-18T07:00:00+08:00">
    <meta property="article:modified_time" content="2024-07-18T07:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;BFS 回溯】756. 金字塔转换矩阵</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>本文涉及知识点</h2> 
<p><a href="https://blog.csdn.net/he_zhidan/article/details/133380813">C++BFS算法</a><br> <a href="https://blog.csdn.net/he_zhidan/article/details/138675233">C++回溯</a></p> 
<h2><a id="LeetCode756__3"></a>LeetCode756. 金字塔转换矩阵</h2> 
<p>你正在把积木堆成金字塔。每个块都有一个颜色，用一个字母表示。每一行的块比它下面的行 少一个块 ，并且居中。<br> 为了使金字塔美观，只有特定的 三角形图案 是允许的。一个三角形的图案由 两个块 和叠在上面的 单个块 组成。模式是以三个字母字符串的列表形式 allowed 给出的，其中模式的前两个字符分别表示左右底部块，第三个字符表示顶部块。<br> 例如，“ABC” 表示一个三角形图案，其中一个 “C” 块堆叠在一个 ‘A’ 块(左)和一个 ‘B’ 块(右)之上。请注意，这与 “BAC” 不同，“B” 在左下角，“A” 在右下角。<br> 你从底部的一排积木 bottom 开始，作为一个单一的字符串，你 必须 使用作为金字塔的底部。<br> 在给定 bottom 和 allowed 的情况下，如果你能一直构建到金字塔顶部，使金字塔中的 每个三角形图案 都是允许的，则返回 true ，否则返回 false 。<br> 示例 1：</p> 
<p><img src="https://images2.imgbox.com/a8/b7/kI8Cmj0Q_o.jpg" alt="在这里插入图片描述"></p> 
<p>输入：bottom = “BCD”, allowed = [“BCC”,“CDE”,“CEA”,“FFF”]<br> 输出：true<br> 解释：允许的三角形模式显示在右边。<br> 从最底层(第3层)开始，我们可以在第2层构建“CE”，然后在第1层构建“E”。<br> 金字塔中有三种三角形图案，分别是“BCC”、“CDE”和“CEA”。都是允许的。<br> 示例 2：</p> 
<p><img src="https://images2.imgbox.com/0f/79/6LPuT8fN_o.jpg" alt="在这里插入图片描述"></p> 
<p>输入：bottom = “AAAA”, allowed = [“AAB”,“AAC”,“BCD”,“BBE”,“DEF”]<br> 输出：false<br> 解释：允许的三角形模式显示在右边。<br> 从最底层(游戏邦注:即第4个关卡)开始，创造第3个关卡有多种方法，但如果尝试所有可能性，你便会在创造第1个关卡前陷入困境。</p> 
<p>提示：<br> 2 &lt;= bottom.length &lt;= 6<br> 0 &lt;= allowed.length &lt;= 216<br> allowed[i].length == 3<br> 所有输入字符串中的字母来自集合 {‘A’, ‘B’, ‘C’, ‘D’, ‘E’, ‘F’, ‘G’}。<br> allowed 中所有值都是 唯一的</p> 
<h2><a id="CBFS_37"></a>C++BFS(极端情况超时)</h2> 
<p>BFS的状态表示：leves[i]记录倒数第0层所有可能。所有的状态数为：m<sup>n</sup>,n = bottom.length， ,m = 7(A到G)即空间复杂度为：O(m<sup>n</sup>)。<br> BFS的后续状态：所有可能的倒数i+1层。一个状态对应的后续状态：(n-1)<sup>m</sup>。每种状态：组织字符串，时间复杂度O(n),出重大约O(10)，故总时间复杂度为：O(m<sup>n</sup>n<sup>m</sup>10n)，理论上严重超时，实际略微超时。<br> BFS的初始状态：leves = {<!-- -->{bottom}}。<br> BFS的返回值：任意leves[i]为空，返回false；否则返回true。<br> BFS的重复处理： leves[i]的长度为：bottom.length - i，故当i <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ≠ 
        
       
      
        \neq 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span></span></span></span></span> j是，leves[i]的任意元素不会和leves[j]相同。只需要处理leves[i]内部的重复。<br> unorder_map&lt;string,vector&gt; mAllow。 key是：allower.substr(0,2) value是：allower[2]。</p> 
<h3><a id="_44"></a>代码</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">public</span><span class="token operator">:</span>
			<span class="token keyword">bool</span> <span class="token function">pyramidTransition</span><span class="token punctuation">(</span>string bottom<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> allowed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;&gt;</span> mAllow<span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> str <span class="token operator">:</span> allowed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					mAllow<span class="token punctuation">[</span>str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>				
				vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;&gt;</span> leves <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span>bottom<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;</span> bottom<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					unordered_set<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> nexts<span class="token punctuation">;</span>
					std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span><span class="token punctuation">,</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> BackTrack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> cur<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> cur<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">==</span> str<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> nexts<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>						
							<span class="token keyword">return</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> ch <span class="token operator">:</span> mAllow<span class="token punctuation">[</span>cur<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>begin<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							str<span class="token punctuation">[</span>begin<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
							<span class="token function">BackTrack</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> cur <span class="token operator">:</span> leves<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						string <span class="token function">str</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">BackTrack</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>nexts<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
					leves<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>nexts<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nexts<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_79"></a>单元测试</h3> 
<pre><code class="prism language-cpp">		string bottom<span class="token punctuation">;</span>
		vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> allowed<span class="token punctuation">;</span>
		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod1<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"BCD"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"BCC"</span><span class="token punctuation">,</span> <span class="token string">"CDE"</span><span class="token punctuation">,</span> <span class="token string">"CEA"</span><span class="token punctuation">,</span> <span class="token string">"FFF"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod2<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"AAAA"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"AAB"</span><span class="token punctuation">,</span> <span class="token string">"AAC"</span><span class="token punctuation">,</span> <span class="token string">"BCD"</span><span class="token punctuation">,</span> <span class="token string">"BBE"</span><span class="token punctuation">,</span> <span class="token string">"DEF"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod3<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"AA"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod4<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"AA"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"AAB"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod5<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"AAB"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"AAB"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod6<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"FDBACE"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"EEF"</span><span class="token punctuation">,</span><span class="token string">"BFE"</span><span class="token punctuation">,</span><span class="token string">"EDD"</span><span class="token punctuation">,</span><span class="token string">"EFB"</span><span class="token punctuation">,</span><span class="token string">"EFC"</span><span class="token punctuation">,</span><span class="token string">"DCE"</span><span class="token punctuation">,</span><span class="token string">"CCE"</span><span class="token punctuation">,</span><span class="token string">"ABB"</span><span class="token punctuation">,</span><span class="token string">"BBB"</span><span class="token punctuation">,</span><span class="token string">"EDC"</span><span class="token punctuation">,</span><span class="token string">"ADD"</span><span class="token punctuation">,</span><span class="token string">"AFE"</span><span class="token punctuation">,</span><span class="token string">"CAF"</span><span class="token punctuation">,</span><span class="token string">"DEF"</span><span class="token punctuation">,</span><span class="token string">"ABE"</span><span class="token punctuation">,</span><span class="token string">"BBD"</span><span class="token punctuation">,</span><span class="token string">"CBB"</span><span class="token punctuation">,</span><span class="token string">"ADB"</span><span class="token punctuation">,</span><span class="token string">"ABD"</span><span class="token punctuation">,</span><span class="token string">"EDF"</span><span class="token punctuation">,</span><span class="token string">"FAE"</span><span class="token punctuation">,</span><span class="token string">"CAA"</span><span class="token punctuation">,</span><span class="token string">"CFB"</span><span class="token punctuation">,</span><span class="token string">"BCA"</span><span class="token punctuation">,</span><span class="token string">"BDC"</span><span class="token punctuation">,</span><span class="token string">"EAB"</span><span class="token punctuation">,</span><span class="token string">"FFE"</span><span class="token punctuation">,</span><span class="token string">"FBF"</span><span class="token punctuation">,</span><span class="token string">"EFF"</span><span class="token punctuation">,</span><span class="token string">"AFD"</span><span class="token punctuation">,</span><span class="token string">"DFA"</span><span class="token punctuation">,</span><span class="token string">"BED"</span><span class="token punctuation">,</span><span class="token string">"BDD"</span><span class="token punctuation">,</span><span class="token string">"ABA"</span><span class="token punctuation">,</span><span class="token string">"FCB"</span><span class="token punctuation">,</span><span class="token string">"CBD"</span><span class="token punctuation">,</span><span class="token string">"CDC"</span><span class="token punctuation">,</span><span class="token string">"CEC"</span><span class="token punctuation">,</span><span class="token string">"ECC"</span><span class="token punctuation">,</span><span class="token string">"ECA"</span><span class="token punctuation">,</span><span class="token string">"EBC"</span><span class="token punctuation">,</span><span class="token string">"DFD"</span><span class="token punctuation">,</span><span class="token string">"FFB"</span><span class="token punctuation">,</span><span class="token string">"BDE"</span><span class="token punctuation">,</span><span class="token string">"DBD"</span><span class="token punctuation">,</span><span class="token string">"EBB"</span><span class="token punctuation">,</span><span class="token string">"DEB"</span><span class="token punctuation">,</span><span class="token string">"BEF"</span><span class="token punctuation">,</span><span class="token string">"FFA"</span><span class="token punctuation">,</span><span class="token string">"AEA"</span><span class="token punctuation">,</span><span class="token string">"CCC"</span><span class="token punctuation">,</span><span class="token string">"BFF"</span><span class="token punctuation">,</span><span class="token string">"DCD"</span><span class="token punctuation">,</span><span class="token string">"BBA"</span><span class="token punctuation">,</span><span class="token string">"CFF"</span><span class="token punctuation">,</span><span class="token string">"ECD"</span><span class="token punctuation">,</span><span class="token string">"CBF"</span><span class="token punctuation">,</span><span class="token string">"CCD"</span><span class="token punctuation">,</span><span class="token string">"FAA"</span><span class="token punctuation">,</span><span class="token string">"EDA"</span><span class="token punctuation">,</span><span class="token string">"ADF"</span><span class="token punctuation">,</span><span class="token string">"ECE"</span><span class="token punctuation">,</span><span class="token string">"FCF"</span><span class="token punctuation">,</span><span class="token string">"FFF"</span><span class="token punctuation">,</span><span class="token string">"FCE"</span><span class="token punctuation">,</span><span class="token string">"BFC"</span><span class="token punctuation">,</span><span class="token string">"CCF"</span><span class="token punctuation">,</span><span class="token string">"ACD"</span><span class="token punctuation">,</span><span class="token string">"FDB"</span><span class="token punctuation">,</span><span class="token string">"DBA"</span><span class="token punctuation">,</span><span class="token string">"AED"</span><span class="token punctuation">,</span><span class="token string">"FDD"</span><span class="token punctuation">,</span><span class="token string">"BDF"</span><span class="token punctuation">,</span><span class="token string">"FBE"</span><span class="token punctuation">,</span><span class="token string">"DCB"</span><span class="token punctuation">,</span><span class="token string">"ACE"</span><span class="token punctuation">,</span><span class="token string">"FBC"</span><span class="token punctuation">,</span><span class="token string">"FEF"</span><span class="token punctuation">,</span><span class="token string">"FDF"</span><span class="token punctuation">,</span><span class="token string">"AEF"</span><span class="token punctuation">,</span><span class="token string">"DDB"</span><span class="token punctuation">,</span><span class="token string">"CFA"</span><span class="token punctuation">,</span><span class="token string">"BCB"</span><span class="token punctuation">,</span><span class="token string">"EFA"</span><span class="token punctuation">,</span><span class="token string">"EAC"</span><span class="token punctuation">,</span><span class="token string">"FBD"</span><span class="token punctuation">,</span><span class="token string">"CFC"</span><span class="token punctuation">,</span><span class="token string">"AEE"</span><span class="token punctuation">,</span><span class="token string">"CEB"</span><span class="token punctuation">,</span><span class="token string">"AFA"</span><span class="token punctuation">,</span><span class="token string">"CCA"</span><span class="token punctuation">,</span><span class="token string">"BFD"</span><span class="token punctuation">,</span><span class="token string">"BAC"</span><span class="token punctuation">,</span><span class="token string">"BAA"</span><span class="token punctuation">,</span><span class="token string">"CEE"</span><span class="token punctuation">,</span><span class="token string">"DAB"</span><span class="token punctuation">,</span><span class="token string">"AFC"</span><span class="token punctuation">,</span><span class="token string">"DBE"</span><span class="token punctuation">,</span><span class="token string">"BEE"</span><span class="token punctuation">,</span><span class="token string">"DAF"</span><span class="token punctuation">,</span><span class="token string">"DCA"</span><span class="token punctuation">,</span><span class="token string">"EEA"</span><span class="token punctuation">,</span><span class="token string">"BDB"</span><span class="token punctuation">,</span><span class="token string">"EEB"</span><span class="token punctuation">,</span><span class="token string">"EAA"</span><span class="token punctuation">,</span><span class="token string">"BEC"</span><span class="token punctuation">,</span><span class="token string">"DED"</span><span class="token punctuation">,</span><span class="token string">"CDE"</span><span class="token punctuation">,</span><span class="token string">"CDB"</span><span class="token punctuation">,</span><span class="token string">"EEE"</span><span class="token punctuation">,</span><span class="token string">"DAC"</span><span class="token punctuation">,</span><span class="token string">"EBF"</span><span class="token punctuation">,</span><span class="token string">"EBD"</span><span class="token punctuation">,</span><span class="token string">"FDE"</span><span class="token punctuation">,</span><span class="token string">"ABC"</span><span class="token punctuation">,</span><span class="token string">"ACB"</span><span class="token punctuation">,</span><span class="token string">"DBC"</span><span class="token punctuation">,</span><span class="token string">"FBA"</span><span class="token punctuation">,</span><span class="token string">"BAE"</span><span class="token punctuation">,</span><span class="token string">"EFE"</span><span class="token punctuation">,</span><span class="token string">"BBC"</span><span class="token punctuation">,</span><span class="token string">"CBC"</span><span class="token punctuation">,</span><span class="token string">"FED"</span><span class="token punctuation">,</span><span class="token string">"FEA"</span><span class="token punctuation">,</span><span class="token string">"ACF"</span><span class="token punctuation">,</span><span class="token string">"DCF"</span><span class="token punctuation">,</span><span class="token string">"FDA"</span><span class="token punctuation">,</span><span class="token string">"BCC"</span><span class="token punctuation">,</span><span class="token string">"ADE"</span><span class="token punctuation">,</span><span class="token string">"DAE"</span><span class="token punctuation">,</span><span class="token string">"DCC"</span><span class="token punctuation">,</span><span class="token string">"EDB"</span><span class="token punctuation">,</span><span class="token string">"AFB"</span><span class="token punctuation">,</span><span class="token string">"CEA"</span><span class="token punctuation">,</span><span class="token string">"DFE"</span><span class="token punctuation">,</span><span class="token string">"BAD"</span><span class="token punctuation">,</span><span class="token string">"FEC"</span><span class="token punctuation">,</span><span class="token string">"EEC"</span><span class="token punctuation">,</span><span class="token string">"EBE"</span><span class="token punctuation">,</span><span class="token string">"CEF"</span><span class="token punctuation">,</span><span class="token string">"EAD"</span><span class="token punctuation">,</span><span class="token string">"ABF"</span><span class="token punctuation">,</span><span class="token string">"EFD"</span><span class="token punctuation">,</span><span class="token string">"AAB"</span><span class="token punctuation">,</span><span class="token string">"AAD"</span><span class="token punctuation">,</span><span class="token string">"FAB"</span><span class="token punctuation">,</span><span class="token string">"FEE"</span><span class="token punctuation">,</span><span class="token string">"CBE"</span><span class="token punctuation">,</span><span class="token string">"BBE"</span><span class="token punctuation">,</span><span class="token string">"ADC"</span><span class="token punctuation">,</span><span class="token string">"FAD"</span><span class="token punctuation">,</span><span class="token string">"DBB"</span><span class="token punctuation">,</span><span class="token string">"CAB"</span><span class="token punctuation">,</span><span class="token string">"CDA"</span><span class="token punctuation">,</span><span class="token string">"AAF"</span><span class="token punctuation">,</span><span class="token string">"DBF"</span><span class="token punctuation">,</span><span class="token string">"FCA"</span><span class="token punctuation">,</span><span class="token string">"DEE"</span><span class="token punctuation">,</span><span class="token string">"EDE"</span><span class="token punctuation">,</span><span class="token string">"FFC"</span><span class="token punctuation">,</span><span class="token string">"DDD"</span><span class="token punctuation">,</span><span class="token string">"DDA"</span><span class="token punctuation">,</span><span class="token string">"DEC"</span><span class="token punctuation">,</span><span class="token string">"DFF"</span><span class="token punctuation">,</span><span class="token string">"BCD"</span><span class="token punctuation">,</span><span class="token string">"ECF"</span><span class="token punctuation">,</span><span class="token string">"DDF"</span><span class="token punctuation">,</span><span class="token string">"AEB"</span><span class="token punctuation">,</span><span class="token string">"BDA"</span><span class="token punctuation">,</span><span class="token string">"FBB"</span><span class="token punctuation">,</span><span class="token string">"BCE"</span><span class="token punctuation">,</span><span class="token string">"DAA"</span><span class="token punctuation">,</span><span class="token string">"ACC"</span><span class="token punctuation">,</span><span class="token string">"CCB"</span><span class="token punctuation">,</span><span class="token string">"FAC"</span><span class="token punctuation">,</span><span class="token string">"BAF"</span><span class="token punctuation">,</span><span class="token string">"BEA"</span><span class="token punctuation">,</span><span class="token string">"CFD"</span><span class="token punctuation">,</span><span class="token string">"EBA"</span><span class="token punctuation">,</span><span class="token string">"ACA"</span><span class="token punctuation">,</span><span class="token string">"DAD"</span><span class="token punctuation">,</span><span class="token string">"BFB"</span><span class="token punctuation">,</span><span class="token string">"ECB"</span><span class="token punctuation">,</span><span class="token string">"CAD"</span><span class="token punctuation">,</span><span class="token string">"DDC"</span><span class="token punctuation">,</span><span class="token string">"FCC"</span><span class="token punctuation">,</span><span class="token string">"BEB"</span><span class="token punctuation">,</span><span class="token string">"FAF"</span><span class="token punctuation">,</span><span class="token string">"BBF"</span><span class="token punctuation">,</span><span class="token string">"AAA"</span><span class="token punctuation">,</span><span class="token string">"AAC"</span><span class="token punctuation">,</span><span class="token string">"CED"</span><span class="token punctuation">,</span><span class="token string">"AAE"</span><span class="token punctuation">,</span><span class="token string">"CDD"</span><span class="token punctuation">,</span><span class="token string">"DDE"</span><span class="token punctuation">,</span><span class="token string">"DEA"</span><span class="token punctuation">,</span><span class="token string">"FFD"</span><span class="token punctuation">,</span><span class="token string">"DFC"</span><span class="token punctuation">,</span><span class="token string">"CFE"</span><span class="token punctuation">,</span><span class="token string">"FEB"</span><span class="token punctuation">,</span><span class="token string">"FDC"</span><span class="token punctuation">,</span><span class="token string">"ADA"</span><span class="token punctuation">,</span><span class="token string">"BCF"</span><span class="token punctuation">,</span><span class="token string">"AFF"</span><span class="token punctuation">,</span><span class="token string">"EAE"</span><span class="token punctuation">,</span><span class="token string">"AEC"</span><span class="token punctuation">,</span><span class="token string">"CAC"</span><span class="token punctuation">,</span><span class="token string">"CDF"</span><span class="token punctuation">,</span><span class="token string">"BAB"</span><span class="token punctuation">,</span><span class="token string">"EED"</span><span class="token punctuation">,</span><span class="token string">"CAE"</span><span class="token punctuation">,</span><span class="token string">"FCD"</span><span class="token punctuation">,</span><span class="token string">"BFA"</span><span class="token punctuation">,</span><span class="token string">"EAF"</span><span class="token punctuation">,</span><span class="token string">"CBA"</span><span class="token punctuation">,</span><span class="token string">"DFB"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">TEST_METHOD</span><span class="token punctuation">(</span>TestMethod7<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			bottom <span class="token operator">=</span> <span class="token string">"DBCDA"</span><span class="token punctuation">,</span> allowed <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"DBD"</span><span class="token punctuation">,</span><span class="token string">"BCC"</span><span class="token punctuation">,</span><span class="token string">"CDD"</span><span class="token punctuation">,</span><span class="token string">"DAD"</span><span class="token punctuation">,</span><span class="token string">"DDA"</span><span class="token punctuation">,</span><span class="token string">"AAC"</span><span class="token punctuation">,</span><span class="token string">"CCA"</span><span class="token punctuation">,</span><span class="token string">"BCD"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token keyword">auto</span> res <span class="token operator">=</span> <span class="token function">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pyramidTransition</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span> allowed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">AssertEx</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="CBFS_129"></a>C++BFS（总时间超时)</h2> 
<p>mAllow 用二维数组替换。leves记录字符串编码，然后利用数组出重。 O(10n)变成O(1)。单个测试用例不超时，总时间超时。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">public</span><span class="token operator">:</span>
			<span class="token keyword">bool</span> <span class="token function">pyramidTransition</span><span class="token punctuation">(</span>string bottom<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> allowed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> bottom<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> mAllow<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> str <span class="token operator">:</span> allowed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					mAllow<span class="token punctuation">[</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>	
				queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> que<span class="token punctuation">;</span>				
				vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> codes<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> iCodeCnt <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> len <span class="token operator">&lt;=</span> N<span class="token punctuation">;</span> len<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					iCodeCnt <span class="token operator">*=</span> <span class="token number">7</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> code <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> code <span class="token operator">&lt;</span> iCodeCnt<span class="token punctuation">;</span> code<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> tmp<span class="token punctuation">;</span>
						<span class="token keyword">int</span> remain <span class="token operator">=</span> code<span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							tmp<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token char">'A'</span> <span class="token operator">+</span> remain <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							remain <span class="token operator">/=</span> <span class="token number">7</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						string <span class="token function">str</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						codes<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">==</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							que<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>							
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> N<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> nextQue<span class="token punctuation">;</span>
					vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">vis</span><span class="token punctuation">(</span>codes<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>que<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">const</span> <span class="token keyword">auto</span> cur <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> BackTrack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> cur<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> cur<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>code<span class="token punctuation">]</span><span class="token punctuation">)</span>
								<span class="token punctuation">{<!-- --></span>
									nextQue<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
									vis<span class="token punctuation">[</span>code<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
								<span class="token keyword">return</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
							<span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> v <span class="token operator">=</span> mAllow<span class="token punctuation">[</span>cur<span class="token punctuation">[</span>begin<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">[</span>begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> num <span class="token operator">:</span> v<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token function">BackTrack</span><span class="token punctuation">(</span>code <span class="token operator">*</span> <span class="token number">7</span> <span class="token operator">+</span> num<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token function">BackTrack</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> codes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					que<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>nextQue<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> que<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="CBFS_191"></a>C++BFS</h2> 
<p>codes变成全局变量，所有测试用例只初始化一次。</p> 
<pre><code class="prism language-cpp">vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> codes<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">public</span><span class="token operator">:</span>
			<span class="token keyword">bool</span> <span class="token function">pyramidTransition</span><span class="token punctuation">(</span>string bottom<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> allowed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> bottom<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> mAllow<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> str <span class="token operator">:</span> allowed<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					mAllow<span class="token punctuation">[</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>	
				<span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> que<span class="token punctuation">;</span>				
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> code <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> code <span class="token operator">&lt;</span> codes<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>code<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>codes<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>code<span class="token punctuation">]</span> <span class="token operator">==</span> bottom<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						que<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> N<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> nextQue<span class="token punctuation">;</span>
					vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">vis</span><span class="token punctuation">(</span>codes<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">while</span> <span class="token punctuation">(</span>que<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">const</span> <span class="token keyword">auto</span> cur <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						std<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> BackTrack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> cur<span class="token punctuation">,</span> <span class="token keyword">int</span> begin<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>begin <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> cur<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>code<span class="token punctuation">]</span><span class="token punctuation">)</span>
								<span class="token punctuation">{<!-- --></span>
									nextQue<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
									vis<span class="token punctuation">[</span>code<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
								<span class="token keyword">return</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
							<span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> v <span class="token operator">=</span> mAllow<span class="token punctuation">[</span>cur<span class="token punctuation">[</span>begin<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">[</span>begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'A'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">auto</span><span class="token operator">&amp;</span> num <span class="token operator">:</span> v<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
								<span class="token function">BackTrack</span><span class="token punctuation">(</span>code <span class="token operator">*</span> <span class="token number">7</span> <span class="token operator">+</span> num<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> begin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token function">BackTrack</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> codes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					que<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>nextQue<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				
				<span class="token keyword">return</span> que<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>codes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
				<span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
				<span class="token keyword">int</span> iCodeCnt <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> len <span class="token operator">&lt;=</span> N<span class="token punctuation">;</span> len<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					iCodeCnt <span class="token operator">*=</span> <span class="token number">7</span><span class="token punctuation">;</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> code <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> code <span class="token operator">&lt;</span> iCodeCnt<span class="token punctuation">;</span> code<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> tmp<span class="token punctuation">;</span>
						<span class="token keyword">int</span> remain <span class="token operator">=</span> code<span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
							tmp<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span><span class="token char">'A'</span> <span class="token operator">+</span> remain <span class="token operator">%</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							remain <span class="token operator">/=</span> <span class="token number">7</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						string <span class="token function">str</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						codes<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>						
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>			
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_260"></a>总结</h2> 
<p>如果不考虑性能，本题很简单。考虑性质就复杂多了。</p> 
<p><img src="https://images2.imgbox.com/10/88/FWUyjzlF_o.gif" alt=""><br> 如果有不明白的，请加文末QQ群。如果要打包下载源码（CSDN下载频道偶尔审核不通过，原因未知），也请加QQ群。</p> 
<h2><a id="_266"></a>扩展阅读</h2> 
<h4><a id="_268"></a>视频课程</h4> 
<p>先学简单的课程，请移步CSDN学院，听白银讲师（也就是鄙人）的讲解。<br> <a href="https://edu.csdn.net/course/detail/38771">https://edu.csdn.net/course/detail/38771</a></p> 
<p>如何你想快速形成战斗了，为老板分忧，请学习C#入职培训、C++入职培训等课程<br> <a href="https://edu.csdn.net/lecturer/6176">https://edu.csdn.net/lecturer/6176</a></p> 
<h4><a id="_276"></a>相关推荐</h4> 
<table><thead><tr><th>我想对大家说的话</th></tr></thead><tbody><tr><td>《<a href="https://download.csdn.net/download/he_zhidan/88348653">喜缺全书算法册</a>》以原理、正确性证明、总结为主。</td></tr><tr><td>按类别查阅鄙人的算法文章，请点击《<a href="https://blog.csdn.net/he_zhidan/article/details/137131684">算法与数据汇总</a>》。</td></tr><tr><td>有效学习：明确的目标 及时的反馈 拉伸区（难度合适） 专注</td></tr><tr><td>闻缺陷则喜(喜缺)是一个美好的愿望，早发现问题，早修改问题，给老板节约钱。</td></tr><tr><td>子墨子言之：事无终始，无务多业。也就是我们常说的专业的人做专业的事。</td></tr><tr><td>如果程序是一条龙，那算法就是他的是睛</td></tr></tbody></table> 
<h4><a id="_286"></a>测试环境</h4> 
<p>操作系统：win7 开发环境： VS2019 <strong>C++17</strong><br> 或者 操作系统：win10 开发环境： VS2022 <strong>C++17</strong><br> 如无特殊说明，本<strong>算法</strong>用**C++**实现。</p> 
<p><img src="https://images2.imgbox.com/2e/2f/JpfiZkW5_o.gif" alt=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65b6d575855362f76d6702a23c58f6ff/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【AI大数据计算原理与代码实例讲解】流处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79da4fdeeeece8f0f4a1b15a9b18e2ce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI智能名片S2B2C商城小程序在社群去中心化管理中的应用与价值深度探索</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>