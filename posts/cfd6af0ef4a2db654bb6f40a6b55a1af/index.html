<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>文心一言API调用，保姆级案例分享 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cfd6af0ef4a2db654bb6f40a6b55a1af/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="文心一言API调用，保姆级案例分享">
  <meta property="og:description" content="分享一个调用文心一言API的案例。今天自己用程序去过去文心一言模型中获取结果。 文心一言API调用如何收费？ 官方给送了20块钱的体验券！
后续收费规则如下
如何开通所需要要的 API key 和 Secret key？ api调用需要先在千帆平台开通API key 。这里根据教程中一步一步操作即可开通成功。
文心一言API使用教程（python版） - 百度智能云千帆社区
调用文心一言的代码 python 这里是调用文心一言的代码。包含引入依赖。都有提供。
使用langchain接入文心一言API - 百度智能云千帆社区
验证效果 我的测试代码 我的需求是根据一段文本内容，生成QA对儿。
from langchain.schema import ( AIMessage, HumanMessage, ) from langchain_wenxin import ChatWenxin WENXIN_APP_Key = &#34;your app key&#34; WENXIN_APP_SECRET = &#34;your secret key&#34; chat_model = ChatWenxin( temperature=0.9, model=&#34;ernie-bot-turbo&#34;, baidu_api_key = WENXIN_APP_Key, baidu_secret_key = WENXIN_APP_SECRET, verbose=True, ) # 这里是我的需求，我需要根据一段内容，生成QA。 response = chat_model( [ HumanMessage(content=&#34;请根据以下内容为我生成3-5个相关的问题，注意一定要根据我给的内容生成问题和答案。并给出对应的答案，答案要根据我给的内容生成不要自己生成。问题和答案，请给我json格式。内容如下“第三章 调查准备第十条 中国人民银行及其省一级分支机构发现符合本实施细则第六条的可疑交易活动时，应当登记，作为反洗钱调查的原始材料，妥善保管、存档备查。第十一条 中国人民银行及其省一级分支机构对可疑交易活动进行初步审查，认为需要调查核实的，应填写《反洗钱调查审批表》(见附 2)，报行长(主任)或者主管副行长(副主任)批准”&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-10T18:13:31+08:00">
    <meta property="article:modified_time" content="2024-01-10T18:13:31+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">文心一言API调用，保姆级案例分享</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <div>
   分享一个调用文心一言API的案例。今天自己用程序去过去文心一言模型中获取结果。 
 </div> 
</blockquote> 
<div></div> 
<div> 
 <div> 
  <h2 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">文心</span></strong><strong><span style="color:#1a1a1a;">一言API调用</span></strong><strong><span style="color:#1a1a1a;">如何收费？</span></strong></h2> 
  <p style="margin-left:0;text-align:left;"><span style="color:#333333;">官方给送了20块钱的体验券！</span></p> 
  <p style="margin-left:0;text-align:left;"><img alt="" height="513" src="https://images2.imgbox.com/41/31/jVQme4q3_o.png" width="994"></p> 
  <p style="margin-left:0;text-align:left;"><span style="color:#333333;">后续收费规则如下</span></p> 
  <p style="margin-left:0;text-align:left;"><img alt="" height="405" src="https://images2.imgbox.com/f3/e9/4Dlaz0SU_o.png" width="1012"></p> 
  <p style="margin-left:0;text-align:left;"></p> 
  <p style="margin-left:0;text-align:left;"></p> 
  <h2 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">如何开通所需要要的 API key 和 Secret key？</span></strong></h2> 
  <p style="margin-left:0;text-align:left;"><span style="color:#333333;">api调用需要先在千帆平台开通API key 。这里根据教程中一步一步操作即可开通成功。</span></p> 
  <p style="margin-left:0;text-align:left;"><a href="https://cloud.baidu.com/qianfandev/topic/268184" rel="nofollow" title="文心一言API使用教程（python版） - 百度智能云千帆社区">文心一言API使用教程（python版） - 百度智能云千帆社区</a></p> 
  <p style="margin-left:0;text-align:left;"></p> 
  <h2 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">调用文心一言的代码 python</span></strong></h2> 
  <p style="margin-left:0;text-align:left;"><span style="color:#333333;">这里是调用文心一言的代码。包含引入依赖。都有提供。</span></p> 
  <p style="margin-left:0;text-align:left;"><a href="https://cloud.baidu.com/qianfandev/topic/267250" rel="nofollow" title="使用langchain接入文心一言API - 百度智能云千帆社区">使用langchain接入文心一言API - 百度智能云千帆社区</a></p> 
  <p style="margin-left:0;text-align:left;"></p> 
  <h2 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">验证效果</span></strong></h2> 
  <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">我的测试代码</span></strong></h3> 
  <p style="margin-left:0;text-align:left;"><span style="color:#333333;">我的需求是</span><span style="color:#333333;">根据一段文本内容，生成QA</span><span style="color:#333333;">对儿。</span></p> 
  <pre><span style="background-color:#fafafa;"><code><span style="color:#000000;">from langchain.schema import </span><span style="color:#999999;">(</span>
<span style="color:#000000;">    AIMessage,</span>
<span style="color:#000000;">    HumanMessage,</span>
<span style="color:#999999;">)</span>
<span style="color:#000000;">from langchain_wenxin import ChatWenxin</span>

<span style="color:#000000;">WENXIN_APP_Key </span><span style="color:#9a6e3a;">=</span> <span style="color:#669900;">"your</span><span style="color:#669900;"> app key</span><span style="color:#669900;">"</span>
<span style="color:#000000;">WENXIN_APP_SECRET </span><span style="color:#9a6e3a;">=</span> <span style="color:#669900;">"your</span><span style="color:#669900;"> secret key</span><span style="color:#669900;">"</span>

<span style="color:#000000;">chat_model </span><span style="color:#9a6e3a;">=</span><span style="color:#000000;"> ChatWenxin</span><span style="color:#999999;">(</span>
<span style="color:#000000;">    temperature</span><span style="color:#9a6e3a;">=</span><span style="color:#000000;">0.9,</span>
<span style="color:#000000;">    model</span><span style="color:#9a6e3a;">=</span><span style="color:#669900;">"ernie-bot-turbo"</span><span style="color:#000000;">,</span>
<span style="color:#000000;">    baidu_api_key </span><span style="color:#9a6e3a;">=</span><span style="color:#000000;"> WENXIN_APP_Key,</span>
<span style="color:#000000;">    baidu_secret_key </span><span style="color:#9a6e3a;">=</span><span style="color:#000000;"> WENXIN_APP_SECRET,</span>
<span style="color:#000000;">    verbose</span><span style="color:#9a6e3a;">=</span><span style="color:#000000;">True,</span>
<span style="color:#999999;">)</span>
<span style="color:#708090;">#</span><span style="color:#708090;"> 这里是我的需求，我需要根据一段内容，生成QA。</span>
<span style="color:#000000;">response </span><span style="color:#9a6e3a;">=</span><span style="color:#000000;"> chat_model</span><span style="color:#999999;">(</span>
<span style="color:#000000;">    [</span>
<span style="color:#000000;">        HumanMessage</span><span style="color:#999999;">(</span><span style="color:#000000;">content</span><span style="color:#9a6e3a;">=</span><span style="color:#669900;">"请根据以下内容为我生成3-5个相关的问题，注意一定要根据我给的内容生成问题和答案。并给出对应的答案，答案要根据我给的内容生成不要自己生成。问题和答案，请给我json格式。内容如下“第三章 调查准备第十条 中国人民银行及其省一级分支机构发现符合本实施细则第六条的可疑交易活动时，应当登记，作为反洗钱调查的原始材料，妥善保管、存档备查。第十一条 中国人民银行及其省一级分支机构对可疑交易活动进行初步审查，认为需要调查核实的，应填写《反洗钱调查审批表》(见附 2)，报行长(主任)或者主管副行长(副主任)批准”"</span><span style="color:#999999;">)</span>
<span style="color:#000000;">    ]</span>
<span style="color:#999999;">)</span>
<span style="color:#000000;">print</span><span style="color:#999999;">(</span><span style="color:#000000;">response</span><span style="color:#999999;">)</span>
</code></span></pre> 
  <p></p> 
  <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">文心一言的回答情况</span></strong></h3> 
  <p style="margin-left:0;text-align:left;">最后给我返回了一个json，给我json数组，是我想要的结构。</p> 
  <pre><span style="background-color:#fafafa;"><code><span style="color:#000000;">content</span><span style="color:#9a6e3a;">=</span><span style="color:#669900;">'以下是根据内容生成的JSON格式问题与答案：\n\n\n```json\n[\n  {\n    "问题": "第三章 调查准备第十条中提到，中国人民银行及其省一级分支机构发现符合本实施细则第六条的可疑交易活动时，应该如何处理？",\n    "答案": "中国人民银行及其省一级 分支机构发现符合本实施细则第六条的可疑交易活动时，应当登记，作为反洗钱调查的原始材料，妥善保管、存档备查。"\n  },\n  {\n    "问题": "第三章 调查准备第十一条中提到，中国人民银行及其省一级分支机构对可疑交易活动进行初步审查后，认为需要调查核实的，应该如何操作？",\n    "答案": "中国人民银行及其省一级分支机构对可疑交易活动进行初步审查，认为需要调查核实的，应填写 《反洗钱调查审批表》，报行长(主任)或者主管副行长(副主任)批准。"\n  },\n  {\n    "问题": "如果《反洗钱调查审批表》未获批 准，会发生什么情况？",\n    "答案": "如果《反洗钱调查审批表》未获批准，则相关可疑交易活动可能不会被进一步调查，但仍需要 继续关注其潜在的洗钱风险。"\n  }\n]```\n以上问题和答案根据给定的内容生成，并针对内容进行了回答。'</span>
</code></span></pre> 
  <p></p> 
  <p style="margin-left:0;text-align:left;"></p> 
  <p style="margin-left:0;text-align:left;"><span style="color:#333333;">到这里至少是调通了。</span></p> 
  <p style="margin-left:0;text-align:left;"></p> 
  <p style="margin-left:0;text-align:left;"><img alt="" height="175" src="https://images2.imgbox.com/18/7c/OKhRSPMA_o.png" width="1200"></p> 
  <p style="margin-left:0;text-align:left;"></p> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/99816a69769cfb2d8dae900f50b9d230/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spark on YARN部署模式保姆级教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/16ad84f7e38eeaa270733f0fbc88fdf7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">(适合新手上机)关于navicat基本使用，以及sql的事务的基础使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>