<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在男朋友的 Mac 上部署 Stable Diffusion（超详细，含踩坑点，AI 绘画入门保姆级教程） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9b0782cccab2de5c19945f32ae231451/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="在男朋友的 Mac 上部署 Stable Diffusion（超详细，含踩坑点，AI 绘画入门保姆级教程）">
  <meta property="og:description" content="一、 引言 这周工作不是很饱和（嘘），所以相继在两个云平台 Kaggle 和 AutoDL 上部署了 Stable Diffusion 后，决定再在 Mac 本地部署一下 Stable Diffusion！
其实看 Stable Diffusion WebUI 的 Github 官网，步骤还是比较清晰简单的。
但实际部署过程中，确实还是遇到了不少问题，所以顺便将踩过的坑一一记录了下来，应该涵盖了大部分同学都会遇到的问题，是的，全帮你们填平了，有的问题还给出了多种解决方案。
所以，Mac 党的朋友，想在本地部署 Stable Diffusion，拿着这份保姆级教程，直接冲就完事！
由于我的 Mac 太渣了（2015 年款），于是抢了男朋友的 Mac 来搞一下。
二、 Mac 的配置 MacBook Pro（2021 年）
芯片：Apple M1 Pro
核总数：8 &#43; 14
内存：16GB
存储：512GB
macOS：Ventura 13.3.1
这个配置下，出图的效率怎么样呢？
文章的第五部分「性能测试」中，基于同一模型、不同采样方法，在进行了多组测试后，出图效率简单记录了一下，大家可以参考~
三、 安装步骤 1. 安装 Homebrew 方式一：官方安装（可能会因网络问题导致失败） /bin/bash -c &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&#34; 输入 brew -v 验证 Homebrew 是否安装成功：出现版本号说明 Homebrew 已经安装成功了。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-02T10:02:21+08:00">
    <meta property="article:modified_time" content="2024-04-02T10:02:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在男朋友的 Mac 上部署 Stable Diffusion（超详细，含踩坑点，AI 绘画入门保姆级教程）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="__2"></a>一、 引言</h2> 
<p>这周工作不是很饱和（嘘），所以相继在两个云平台 <strong>Kaggle</strong> 和 <strong>AutoDL</strong> 上部署了 Stable Diffusion 后，决定再在 Mac 本地部署一下 Stable Diffusion！</p> 
<p>其实看 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FAUTOMATIC1111%2Fstable-diffusion-webui%2Fwiki%2FInstallation-on-Apple-Silicon" rel="nofollow" title="https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Installation-on-Apple-Silicon">Stable Diffusion WebUI 的 Github 官网</a>，步骤还是比较清晰简单的。</p> 
<p><img src="https://images2.imgbox.com/12/12/orFWt1iZ_o.png" alt=""></p> 
<p>但实际部署过程中，确实还是遇到了不少问题，所以顺便将踩过的坑一一记录了下来，应该涵盖了大部分同学都会遇到的问题，是的，全帮你们填平了，有的问题还给出了多种解决方案。</p> 
<p>所以，Mac 党的朋友，想在本地部署 Stable Diffusion，拿着这份保姆级教程，直接冲就完事！</p> 
<p>由于我的 Mac 太渣了（2015 年款），于是抢了男朋友的 Mac 来搞一下。</p> 
<h2><a id="_Mac__17"></a>二、 Mac 的配置</h2> 
<p>MacBook Pro（2021 年）</p> 
<p><strong>芯片</strong>：Apple M1 Pro</p> 
<p><strong>核总数</strong>：8 + 14</p> 
<p><strong>内存</strong>：16GB</p> 
<p><strong>存储</strong>：512GB</p> 
<p><strong>macOS</strong>：Ventura 13.3.1</p> 
<p>这个配置下，<strong>出图的效率怎么样呢</strong>？</p> 
<p>文章的第五部分「性能测试」中，基于同一模型、不同采样方法，在进行了多组测试后，出图效率简单记录了一下，大家可以参考~</p> 
<h2><a id="__36"></a>三、 安装步骤</h2> 
<h3><a id="1__Homebrewhttpslinkjuejincntargethttps3A2F2Fbrewsh2F_httpsbrewsh_39"></a>1. 安装 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fbrew.sh%2F" rel="nofollow" title="https://brew.sh/">Homebrew</a></h3> 
<h4><a id="_42"></a>方式一：官方安装（可能会因网络问题导致失败）</h4> 
<pre><code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

</code></pre> 
<p><img src="https://images2.imgbox.com/d5/87/v9Pd6SgN_o.png" alt=""></p> 
<p>输入 <code>brew -v</code> 验证 Homebrew 是否安装成功：出现版本号说明 Homebrew 已经安装成功了。</p> 
<p><img src="https://images2.imgbox.com/f9/12/DwKPTKWk_o.png" alt=""></p> 
<p><strong>补充知识：</strong></p> 
<ul><li>Homebrew 官网：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fbrew.sh%2F" rel="nofollow" title="https://brew.sh/">brew.sh/</a></li><li>通过官网方式安装的，卸载 Homebrew 的方式如下（注意：如果是国内镜像安装的，不用这个命令卸载）：</li></ul> 
<pre><code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall.sh)"

</code></pre> 
<h4><a id="_65"></a>方式二：国内镜像安装</h4> 
<p>如果用第一种方式输入命令没有反应，或者是安装过程中出错了，多数是因为网络问题。可以用国内镜像进行 Homebrew 的安装。</p> 
<pre><code>/bin/bash -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"

</code></pre> 
<p><img src="https://images2.imgbox.com/00/62/VACL2soN_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/95/90/7huWW7SW_o.png" alt=""></p> 
<p>Core、Cask、services 是 Homebrew 的其他组件，应该不是部署 Stable Diffusion WebUI 必须的。为了保险起见，这里直接都装了。</p> 
<p><img src="https://images2.imgbox.com/fe/0b/Jar3TM7A_o.png" alt=""></p> 
<p>有些电脑 xcode 和 git 混乱，再运行一次，此处如果有 error 正常。</p> 
<p><img src="https://images2.imgbox.com/4e/c1/UDSLQilK_o.png" alt=""></p> 
<p>安装成功后，需要<strong>重启终端</strong>或者运行 <code>source /Users/your_user_name/.zprofile</code> 才能生效。</p> 
<p>输入 <code>brew -v</code> 验证 Homebrew 是否安装成功：出现版本号说明 Homebrew 已经安装成功了。</p> 
<p><img src="https://images2.imgbox.com/cf/54/RE003IAx_o.png" alt=""></p> 
<p><strong>补充知识</strong></p> 
<ul><li> <p>如果之前安装过 Homebrew，会将之前的 Homebrew 备份在桌面的 Old_Homebrew 文件夹里。如果里面没有你需要的可以删除。</p> </li><li> <p><strong>常用命令</strong></p> 
  <ul><li>查看版本：brew -v</li><li>更新 brew 版本：brew update</li><li>查找：brew search xxx（其中 xxx 替换为要查找的关键字）</li><li>安装：brew install xxx</li><li>查看本地软件库列表：brew ls</li></ul> </li><li> <p><strong>卸载 Homebrew</strong> 如果是通过国内镜像安装的 Homebrew，用这个命令卸载:</p> </li></ul> 
<pre><code>/bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)"

</code></pre> 
<ul><li> <p><strong>安装位置</strong> 在 Mac M1 上，Homebrew 的安装位置不是在以前的 /usr/local/，而是在 /opt/homebrew，这个大家注意。</p> </li><li> <p>如果安装过程中还遇到了其他问题，可以看文章的第四部分 <strong>可能会遇到的问题</strong>，看看有没有解释。</p> </li></ul> 
<h3><a id="2__Python__116"></a>2. 安装 Python 等环境依赖</h3> 
<p>cmake、protobuf、rust、python@3.10、git、wget，这些都是在后面安装 Stable Diffusion WebUI 时需要用到的依赖，这里通过一条命令直接安装了。</p> 
<pre><code>brew install cmake protobuf rust python@3.10 git wget

</code></pre> 
<p>Stable Diffusion WebUI 的 github 中建议使用 3.10.6，因为高版本的 Python 不支持 torch：</p> 
<blockquote> 
 <p>Install <a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.python.org%2Fdownloads%2Frelease%2Fpython-3106%2F" rel="nofollow" title="https://www.python.org/downloads/release/python-3106/">Python 3.10.6</a> (Newer version of Python does not support torch), checking “Add Python to PATH”.</p> 
</blockquote> 
<p>文章写于 2023 年 7 月，后续应该会支持吧~</p> 
<h3><a id="3__132"></a>3. 克隆</h3> 
<p>上一步执行成功后，我们进行 Stable Diffusino WebUI 的克隆。</p> 
<pre><code>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui

</code></pre> 
<p>这一步可能会遇到下载不下来，或者下载过程中出错的问题，可以看文章的第四部分 <em><strong>可能会遇到的问题</strong></em>，看看有没有解释。</p> 
<p>如果依然没有解决，直接，干脆，进到 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FAUTOMATIC1111%2Fstable-diffusion-webui" rel="nofollow" title="https://github.com/AUTOMATIC1111/stable-diffusion-webui">SDW Github 主页</a>，直接下载 Zip 到本地，然后解压就好了。</p> 
<p><img src="https://images2.imgbox.com/30/d9/PDoOEgiL_o.png" alt=""></p> 
<h3><a id="4__148"></a>4. 下载模型</h3> 
<p>这里包括三大类：大模型、Lora 模型以及 VAE 模型。（当然还有其他细分小模型，后续介绍）</p> 
<p>这一步可以先扔一个大模型上去，后续有需要可以再慢慢下载其他的。</p> 
<p>不想自己下载的话，可以找我要网盘链接。</p> 
<p><strong>大模型</strong></p> 
<p>放在 stable-diffusion-webui/models/Stable-diffusion 下面</p> 
<p>文件后缀：ckpt 或者 safetensors</p> 
<p><strong>Lora 模型</strong></p> 
<p>放在 stable-diffusion-webui/models/Lora 下面（在没有执行 ./webui.sh 前，是没有 Lora 这个目录的，可以先不放）</p> 
<p><strong>VAE 模型</strong></p> 
<p>Variational Auto Encoder</p> 
<p>可以简单理解为滤镜</p> 
<p>放在 stable-diffusion-webui/models/VAE 下面</p> 
<h4><a id="_C_httpslinkjuejincntargethttps3A2F2Fcivitaicom2F_httpscivitaicom_175"></a>下载方式一：从 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fcivitai.com%2F" rel="nofollow" title="https://civitai.com/">C 站</a>下载（需要特殊网络）</h4> 
<p>选中「Models」-「筛选」- 选择「Model types」（是大模型、还是 LoRA、还是 VAE等） - 然后选择一个模型点进去。</p> 
<p>如果知道要下载的模型的名称的话，也可以直接在搜索框搜索模型名字，然后点进模型。</p> 
<p><img src="https://images2.imgbox.com/77/35/OyLU6NVM_o.png" alt=""></p> 
<p>直接点「Download」按钮进行下载。</p> 
<p><img src="https://images2.imgbox.com/7b/c9/JTYUgqoM_o.png" alt=""></p> 
<h4><a id="_huggingfacehttpslinkjuejincntargethttps3A2F2Fhuggingfaceco2Fmodels3Fpipeline_tag3Dtexttoimage26sort3Ddownloads_httpshuggingfacecomodelspipeline_tagtexttoimagesortdownloads__187"></a>下载方式二：从 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fhuggingface.co%2Fmodels%3Fpipeline_tag%3Dtext-to-image%26sort%3Ddownloads" rel="nofollow" title="https://huggingface.co/models?pipeline_tag=text-to-image&amp;sort=downloads">huggingface</a> 下载</h4> 
<p>如果登不上 C 站，可以试试 huggingface，方式也比较简单。</p> 
<p>选择「Text-to-Image」，按下载量排序，我们选第一个下载量最多的，然后点进去。</p> 
<p><img src="https://images2.imgbox.com/9d/5b/RoY8R9KC_o.png" alt=""></p> 
<p>切换到「Files and versions」，下面四个后缀为 satetensors 或 ckpt 的就是大模型了，随意下载一个就好。</p> 
<p>其中 v1-5-pruned-emaonly 比较小，4 个多 GB，需要的显存少，适合于推理。</p> 
<p>v1-5-pruned 比较小，7个多 GB，需要的更多的显存，适合于微调。</p> 
<p><img src="https://images2.imgbox.com/ca/3b/vMr6YZtn_o.png" alt=""></p> 
<h3><a id="5__WebUI_203"></a>5. 启动 WebUI</h3> 
<p>进到 Stable Diffusion WebUI 对应的安装目录：</p> 
<pre><code> cd stable-diffusion-webui

</code></pre> 
<p>启动 Stable Diffusion WebUI：</p> 
<pre><code>./webui.sh

</code></pre> 
<p>第一次启动，会下载一些组件库和依赖，可能会比较慢，大家耐心等待。</p> 
<blockquote> 
 <p><strong>注意</strong></p> 
 <p>如果上一步没有下载模型，这里也会自动帮我们下载一个默认的模型。因为大模型一般都好几个 GB，下起来比较慢，所以推荐大家还是在上一步中自己先将模型下载下来（至少放一个大模型进去，这样这一步就不会再自动去下模型了）。</p> 
</blockquote> 
<p>当然出错最多的也是在启动 WebUI 这个过程。这个过程中会遇到各种各样的报错。我们需要多次停下、解决、再重新执行 <code>./webui.sh</code>。</p> 
<p><strong>不过不用担心之前的安装都白费了，因为它会从你上次安装到的地方接着往下安装。</strong></p> 
<p>如果安装过程中报错了，可以看文章的第四部分「可能会遇到的问题」，看看有没有相应的解释。</p> 
<p>当出现 Running on local URL: <a href="https://link.juejin.cn/?target=http%3A%2F%2F127.0.0.1%3A7860" rel="nofollow" title="http://127.0.0.1:7860">http://127.0.0.1:7860</a> 的时候，说明 Stable Diffusion WebUI 已经启动好了。</p> 
<p><img src="https://images2.imgbox.com/b2/ac/BAQ6H8mA_o.png" alt=""></p> 
<p>在浏览器中输入 <a href="https://link.juejin.cn/?target=http%3A%2F%2F127.0.0.1%3A7860" rel="nofollow" title="http://127.0.0.1:7860">http://127.0.0.1:7860</a> 就可以看到 Stable Diffusion WebUI 的界面了。</p> 
<p><img src="https://images2.imgbox.com/c5/de/nfymSrwp_o.png" alt=""></p> 
<p><strong>温馨提示</strong></p> 
<ol><li> <p>在运行过程中，不要关闭 Terminal，否则页面就打不开了。</p> </li><li> <p>下次再启动，进到 Stable Diffusion WebUI 对应的目录，执行 <code>./webui.sh</code> 即可。</p> </li><li> <p>如果安装过程中报错了，可以看文章的第四部分「可能会遇到的问题」，看看有没有解释。</p> </li></ol> 
<h2><a id="__249"></a>四、 可能会遇到的问题</h2> 
<h3><a id="1__Homebrew__252"></a>1. 用国内镜像安装 Homebrew 可能出现的问题</h3> 
<p><strong>问题描述</strong></p> 
<p><img src="https://images2.imgbox.com/ec/49/VPqXzcKU_o.png" alt=""></p> 
<p><strong>解决</strong></p> 
<p>大概翻译一下，意思是说，在 “/opt/homebrew/Library/Taps/homebrew/homebrew-core” 的仓库中检测到可疑的所有权，若要为此目录添加异常，请调用：</p> 
<p>git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-core。</p> 
<p>下面另一个错误，也是类似的意思。所以我们只需要按照上面的提示，在命令行中输入这两行，就完美解决了。当再执行 brew -v 就不报错了！</p> 
<pre><code>git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-core
git config --global --add safe.directory /opt/homebrew/Library/Taps/homebrew/homebrew-cask

</code></pre> 
<p><img src="https://images2.imgbox.com/80/e5/DVMKQaOI_o.png" alt=""></p> 
<h3><a id="2_HTTP2_stream_1_was_not_closed_cleanly_before_end_of_the_underlying_stream_275"></a>2. HTTP/2 stream 1 was not closed cleanly before end of the underlying stream</h3> 
<p><strong>问题描述</strong></p> 
<p>在 git clone 的时候报：</p> 
<p>致命错误：无法访问 '<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FAUTOMATIC1111%2Fstable-diffusion-webui%2F%27%25EF%25BC%259AHTTP%2F2" rel="nofollow" title="https://github.com/AUTOMATIC1111/stable-diffusion-webui/'%EF%BC%9AHTTP/2">github.com/AUTOMATIC11…</a> stream 1 was not closed cleanly before end of the underlying stream</p> 
<p><img src="https://images2.imgbox.com/2e/8c/gFxGyZc4_o.png" alt=""></p> 
<p><strong>解决：将通信协议改成 http/1.1</strong></p> 
<pre><code>git config --global http.version HTTP/1.1

</code></pre> 
<p>将通信协议改成 http/1.1 之后，发现可以正常下载了。</p> 
<p><img src="https://images2.imgbox.com/78/22/wyN4izNk_o.png" alt=""></p> 
<h3><a id="3_Couldnt_install_torch_297"></a>3. Couldn’t install torch.</h3> 
<p>在执行完 <code>./webui.sh</code> 后报 “RuntimeError: Couldn’t install torch.”</p> 
<p><img src="https://images2.imgbox.com/9c/43/1UP4nxUh_o.png" alt=""></p> 
<p>在 modules/launch_utils.py 中看到了这段注释：</p> 
<p><img src="https://images2.imgbox.com/a6/dc/bRpymwbi_o.png" alt=""></p> 
<p>这段注释是说，如果遇到了 “RuntimeError: Couldn’t install torch.” 或者其他问题，可能是 Python 版本的问题，升级或者降级到 3.10 的最新版本，然后删掉 WebUI 目录下的 venv 目录再重试。</p> 
<p>但是上面我们明明执行过 <code>brew install cmake protobuf rust python@3.10 git wget</code> 这个命令，其中安装了 Python 3.10 呀。按理说不应该呀。</p> 
<p>怀着怀疑的态度我在命令行里输入 <code>python3 -V</code> 进行查看。</p> 
<p>咦，一看不得了，这版本咋是 3.9.6？</p> 
<p><img src="https://images2.imgbox.com/a9/40/TEKcE4Ve_o.png" alt=""></p> 
<p>这个 3.9 的 Python 版本，应该是 Mac 自带的 Python。可能就是因为这个原因导致启动时下载库出错。</p> 
<p>于是又从 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.python.org%2Fdownloads%2Fmacos%2F" rel="nofollow" title="https://www.python.org/downloads/macos/">Python 官网</a>下载了 Python 3.10.10 这个版本。按提示傻瓜式安装就好了。之后还配置了一下环境变量。</p> 
<pre><code># 编辑 ~/.bash_profile
vim ~/.bash_profile

</code></pre> 
<p>文件中加入这三行</p> 
<pre><code>PATH="/opt/homebrew/bin/:${PATH}"
export PATH=${PATH}
alias python="/opt/homebrew/bin/python3.10"

</code></pre> 
<pre><code># 使配置生效
source ~/.bash_profile

</code></pre> 
<p>这时版本就成 3.10.10 了。</p> 
<p><img src="https://images2.imgbox.com/9c/59/bUviQag6_o.png" alt=""></p> 
<p>然后删掉 WebUI 目录下的 venv 目录，再执行 <code>./webui.sh</code>，终于不报错了！就是下的有些慢～</p> 
<p><img src="https://images2.imgbox.com/d3/f4/YZKZErY9_o.png" alt=""></p> 
<h3><a id="4_Couldnt_install_gfpgan_350"></a>4. Couldn’t install gfpgan.</h3> 
<p>在执行完 <code>./webui.sh</code> 后报 “RuntimeError: Couldn’t install gfpgan.”</p> 
<p>其实是因为没有下载下来 gfpgan。我们可以从报错信息中找到下载链接，如下图中横线部分，然后 copy 这个链接到浏览器中进行下载，然后将下载好的 zip 文件加压，并将目录名改成 GFPGAN，然后拖到 stable-diffusion-webui 这个目录下就好了。当再次执行 <code>./webui.sh</code> 时，发现已经跨过 GFPGAN，继续下载其他依赖了。完美解决！</p> 
<p><img src="https://images2.imgbox.com/b5/8f/AaXNt9V8_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/84/18/ElUt7581_o.png" alt=""></p> 
<h3><a id="5_Couldnt_install_clip_361"></a>5. Couldn’t install clip.</h3> 
<p>在执行完 <code>./webui.sh</code> 后报 “RuntimeError: Couldn’t install clip.”</p> 
<p>可以手动下载后安装，就像解决 “Couldn’t install gfpgan” 这个问题一样。但是这里我们换一种解决方式。</p> 
<p>打开 modules/launch_utils.py，搜索 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2F" rel="nofollow" title="https://github.com/">github.com/</a> ，在每一处前面都加上 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fghproxy.com%2F" rel="nofollow" title="https://ghproxy.com/">ghproxy.com/</a> ，加完后是这样的 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fghproxy.com%2Fhttps%3A%2F%2Fgithub.com%2Fxxxxx" rel="nofollow" title="https://ghproxy.com/https://github.com/xxxxx">ghproxy.com/https://git…</a> ，如下图。</p> 
<p><img src="https://images2.imgbox.com/76/f8/y4XEik2P_o.png" alt=""></p> 
<p>一共是 7 处，修改完成后保存。再执行 <code>./webui.sh</code>，就没有问题了。</p> 
<blockquote> 
 <p>为什么这里不用上面解决 gfpgan 的手动下载的方式呢？</p> 
</blockquote> 
<p>看 <code>prepare_environment()</code> 这个方法里，一共定义了 7 处下载地址，如果不用添加代理的方式，大概率接下来在下载 K-diffusion、CodeFormer、BLIP 的时候，也是会报错的。所以这里一起改掉，万事大吉！</p> 
<p>这种方法也可以解决以下报错：</p> 
<p>Couldn’t install K-diffusion</p> 
<p>Couldn’t install CodeFormer</p> 
<p>Couldn’t install BLIP</p> 
<h3><a id="6_Couldnt_install_Kdiffusion_386"></a>6. Couldn’t install K-diffusion</h3> 
<p>见 5 解决方法。</p> 
<h3><a id="7_Couldnt_install_CodeFormer_391"></a>7. Couldn’t install CodeFormer</h3> 
<p>见 5 解决方法。</p> 
<h3><a id="8_Couldnt_install_BLIP_396"></a>8. Couldn’t install BLIP</h3> 
<p>见 5 解决方法。</p> 
<h2><a id="__401"></a>五、 性能测试</h2> 
<p>大模型：dreamshaper</p> 
<p>Euler：出一张 512 * 512 的图，约 20 ~ 30s</p> 
<p>DPM++ SDE Karras：出一张 512 * 512 的图，约 1 ~ 1.5 min</p> 
<h2><a id="__410"></a>六、 结束语</h2> 
<p>Stable Diffusion 本地部署相对于 Stable Diffusion 云部署，最大的两个<strong>优点</strong>就是：</p> 
<p><strong>更自由（懂的都懂）！</strong></p> 
<p><strong>不花钱，完全免费！</strong></p> 
<p>Kaggle 虽然每月可白嫖 30 个小时的算力，但太容易被封，稍微画得上头一些，就被封了。我的账号就被祭了。</p> 
<p><img src="https://images2.imgbox.com/3c/fa/DL74nnhG_o.png" alt=""></p> 
<p>Kaggle 被封后，又转战到了 AutoDL，相比于 Kaggle 来说，不那么容易被封，但是需要花钱。大部分机器实例在 1～2 元 / 小时，也不算贵，但是用完后一旦忘记给实例关机，一天几十就出去了。呃，这。。。</p> 
<p><img src="https://images2.imgbox.com/a0/f1/BMIW6u6w_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/75/22/LCmrukc7_o.png" alt=""></p> 
<p>所以这周，一顿操作猛如虎，终于在 Mac 上成功部署了 Stable Diffusion，<strong>实现了 Stable Diffusion 自由</strong>！也将所有踩过的坑，一一填平并记录了下来。希望可以帮到想在 Mac 上部署 Stable Diffusion 的同学。</p> 
<p>其实在 Mac 本地部署 Stable Diffusion 遇到的大部分问题，基本都是网络造成的。每个人的电脑配置及网络环境都不一样，所以有时会遇到试了好几个解决方案都无法解决的情况。其实我也是。网友说他这么改成功了，而我那么改，依然不起作用。</p> 
<p>所以最后想对大家说的是，<strong>耐心一点，再耐心一点，方法总是有的，问题总会解决！</strong></p> 
<p>大家加油！也希望这篇教程可以真的帮到大家！</p> 
<h3><a id="_438"></a>写在最后</h3> 
<p><font face="幼圆" size="4" color="red">感兴趣的小伙伴，赠送全套AIGC学习资料，包含AI绘画、AI人工智能等前沿科技教程和软件工具，具体看这里。<br> ​<img src="https://images2.imgbox.com/1e/11/z8xzRw2m_o.jpg"></font></p> 
<p>AIGC技术的未来发展前景广阔，随着人工智能技术的不断发展，AIGC技术也将不断提高。未来，AIGC技术将在游戏和计算领域得到更广泛的应用，使游戏和计算系统具有更高效、更智能、更灵活的特性。同时，AIGC技术也将与人工智能技术紧密结合，在更多的领域得到广泛应用，对程序员来说影响至关重要。未来，AIGC技术将继续得到提高，同时也将与人工智能技术紧密结合，在更多的领域得到广泛应用。<br>  <br> <img src="https://images2.imgbox.com/fa/3a/8zGNUOGk_o.png" alt="在这里插入图片描述"></p> 
<p><strong>一、AIGC所有方向的学习路线</strong></p> 
<p>AIGC所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照下面的知识点去找对应的学习资源，保证自己学得较为全面。</p> 
<p><img src="https://images2.imgbox.com/f9/67/9lhvS11s_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/40/6c/b0gHAott_o.png" alt="在这里插入图片描述"></p> 
<p><strong>二、AIGC必备工具</strong></p> 
<p>工具都帮大家整理好了，安装就可直接上手！<br> <img src="https://images2.imgbox.com/e7/a5/5E3WsIiE_o.png" alt="在这里插入图片描述"></p> 
<p><strong>三、最新AIGC学习笔记</strong></p> 
<p>当我学到一定基础，有自己的理解能力的时候，会去阅读一些前辈整理的书籍或者手写的笔记资料，这些笔记详细记载了他们对一些技术点的理解，这些理解是比较独到，可以学到不一样的思路。<br> <img src="https://images2.imgbox.com/f1/f2/q283rcKG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b5/ae/8tr33Bkx_o.png" alt="在这里插入图片描述"></p> 
<p><strong>四、AIGC视频教程合集</strong></p> 
<p>观看全面零基础学习视频，看视频学习是最快捷也是最有效果的方式，跟着视频中老师的思路，从基础到深入，还是很容易入门的。</p> 
<p><img src="https://images2.imgbox.com/64/93/Lbkfsfn9_o.png" alt="在这里插入图片描述"></p> 
<p><strong>五、实战案例</strong></p> 
<p>纸上得来终觉浅，要学会跟着视频一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。<br> <img src="https://images2.imgbox.com/f9/74/9p17H4bp_o.png" alt="在这里插入图片描述"><br> ​<img src="https://images2.imgbox.com/d3/fa/yJSrHDjx_o.jpg"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8ef4bec419b1eb92c004c61aab2651c8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《编程菜鸟学 Python 数据分析》让工作自动化起来！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9e05d7eafbd1148945621be577c613c5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">漏洞扫描神器：Netsparker 保姆级教程（附链接）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>