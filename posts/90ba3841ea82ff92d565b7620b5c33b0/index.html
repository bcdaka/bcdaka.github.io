<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Flutter]设置应用包名、名称、版本号、最低支持版本、Icon、启动页以及环境判断、平台判断和打包 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/90ba3841ea82ff92d565b7620b5c33b0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="[Flutter]设置应用包名、名称、版本号、最低支持版本、Icon、启动页以及环境判断、平台判断和打包">
  <meta property="og:description" content="一、设置应用包名 在Flutter开发中，修改应用程序的包名（也称作Application ID）涉及几个步骤，因为包名是在项目的Android和iOS平台代码中分别配置的。请按照以下步骤操作：
1.Android Flutter工程中全局搜索替换包名 首先，打开您的 android/app/build.gradle 文件，搜索&#34;applicationId&#34;，查看当前android工程使用的包名。
然后，快捷键Command &#43; Shift &#43; F全局搜索使用的包名，全部替换成新包名。
2.iOS 方式1：Flutter工程中全局搜索替换包名 首先，打开您的 ios/Runner.xcodeproj/project.pbxproj 文件，搜索PRODUCT_BUNDLE_IDENTIFIER，查看当前iOS使用的包名。
然后，快捷键Command &#43; Shift &#43; F全局搜索使用的包名，全部替换成新包名。
方式2：用Xcode打开iOS工程在Signing &amp; Capabilities标签页修改 Bundle Identifier 打开您的Flutter项目的 ios/Runner.xcodeproj 文件，或者如果您使用的是xcworkspace，打开 ios/Runner.xcworkspace。
在Xcode中，选择项目的根目录然后选择 Runner 项目。
在 Signing&amp;Capabilities 标签页，修改 Bundle Identifier 至您的新包名。
如果有必要的话，修改 Info.plist 文件中的引用。
二、设置应用名称 在Flutter开发中，设置应用程序的名称，需要去更新Android/iOS 特定的配置文件。
1.Android 编辑 android/app/src/main/AndroidManifest.xml 文件，并设置`android:label` 属性：
&lt;manifest xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&gt; &lt;application android:label=&#34;Your App Name&#34; android:name=&#34;${applicationName}&#34; android:icon=&#34;@mipmap/ic_launcher&#34;&gt; ... &lt;/application&gt; &lt;/manifest&gt; 2.iOS 打开您的 ios/Runner/Info.plist 文件，并设置CFBundleDisplayName和CFBundleName：
&lt;key&gt;CFBundleDisplayName&lt;/key&gt; &lt;string&gt;Your App Display Name&lt;/string&gt; &lt;key&gt;CFBundleName&lt;/key&gt; &lt;string&gt;BundleName&lt;/string&gt; 在 Xcode 中，CFBundleName 和 CFBundleDisplayName 是应用程序的两个属性，用于指定应用程序的名称。它们有以下区别：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-31T14:34:16+08:00">
    <meta property="article:modified_time" content="2024-03-31T14:34:16+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Flutter]设置应用包名、名称、版本号、最低支持版本、Icon、启动页以及环境判断、平台判断和打包</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、设置应用包名</h2> 
<p>在Flutter开发中，修改应用程序的包名（也称作Application ID）涉及几个步骤，因为包名是在项目的Android和iOS平台代码中分别配置的。请按照以下步骤操作：</p> 
<h3>1.Android</h3> 
<h4>Flutter工程中全局搜索替换包名</h4> 
<p>首先，打开您的 <code>android/</code>app<code>/</code>build.gradle 文件，搜索"applicationId"，查看当前android工程使用的包名。</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/e3/90/HjEvdPdg_o.png"></p> 
<p>然后，快捷键Command + Shift + F全局搜索使用的包名，全部替换成新包名。</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/bd/9d/q0iaajC9_o.png"></p> 
<p></p> 
<h3>2.iOS</h3> 
<h4>方式1：Flutter工程中全局搜索替换包名</h4> 
<p>首先，打开您的 <code>ios/</code>Runner.xcodeproj<code>/</code>project.pbxproj 文件，搜索PRODUCT_BUNDLE_IDENTIFIER，查看当前iOS使用的包名。</p> 
<p style="text-align:center;"><img alt="" class="left" height="303" src="https://images2.imgbox.com/09/f0/xq3Ysraw_o.png" width="600"></p> 
<p>然后，快捷键Command + Shift + F全局搜索使用的包名，全部替换成新包名。</p> 
<p style="text-align:center;"><img alt="" class="left" height="282" src="https://images2.imgbox.com/b1/7c/KK7fQ6cs_o.png" width="600"></p> 
<h4>方式2：用Xcode打开iOS工程<code>在Signing &amp; Capabilities</code>标签页修改 <code>Bundle Identifier</code></h4> 
<blockquote> 
 <ol><li> <p>打开您的Flutter项目的 <code>ios/Runner.xcodeproj</code> 文件，或者如果您使用的是<code>xcworkspace</code>，打开 <code>ios/Runner.xcworkspace</code>。</p> </li><li> <p>在Xcode中，选择项目的根目录然后选择 <code>Runner</code> 项目。</p> </li><li> <p>在 <code>Signing&amp;Capabilities</code> 标签页，修改 <code>Bundle Identifier</code> 至您的新包名。</p> </li><li> <p>如果有必要的话，修改 <code>Info.plist</code> 文件中的引用。</p> </li></ol> 
</blockquote> 
<p></p> 
<h2>二、设置应用名称</h2> 
<p>在Flutter开发中，设置应用程序的名称，需要去更新Android/iOS 特定的配置文件。</p> 
<h3><strong>1.Android</strong></h3> 
<p>编辑 <code>android/app/src/main/</code><strong>AndroidManifest.xml</strong> 文件，并设置`<strong>android:label</strong>` 属性：</p> 
<pre><code class="language-bash">&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;application
        android:label="Your App Name"
        android:name="${applicationName}"
        android:icon="@mipmap/ic_launcher"&gt;
        ...
    &lt;/application&gt;
&lt;/manifest&gt;</code></pre> 
<h3><strong>2.iOS</strong></h3> 
<p>打开您的 <code>ios/Runner/Info.plist</code> 文件，并设置CFBundleDisplayName和CFBundleName：</p> 
<pre><code class="language-bash">&lt;key&gt;CFBundleDisplayName&lt;/key&gt;
&lt;string&gt;Your App Display Name&lt;/string&gt;
&lt;key&gt;CFBundleName&lt;/key&gt;
&lt;string&gt;BundleName&lt;/string&gt;</code></pre> 
<blockquote> 
 <p>在 Xcode 中，<code>CFBundleName</code> 和 <code>CFBundleDisplayName</code> 是应用程序的两个属性，用于指定应用程序的名称。它们有以下区别：</p> 
 <ol><li> <p><code>CFBundleName</code>：<code>CFBundleName</code> 是应用程序的内部名称，通常用作程序包标识符的一部分。它是在应用程序的 Info.plist 文件中定义的一个键。<code>CFBundleName</code> 的值是一个字符串，用于在文件系统中标识应用程序的文件夹和可执行文件。它通常是一个简短的、不包含特殊字符的名称，可以用于标识应用程序的唯一性。例如，如果应用程序的 Bundle Identifier 是 <code>com.example.myapp</code>，那么 <code>CFBundleName</code> 可能是 "MyApp"。</p> </li><li> <p><code>CFBundleDisplayName</code>：<code>CFBundleDisplayName</code> 是应用程序的用户可见名称，用于显示在设备上的主屏幕或应用程序列表中。它也是在应用程序的 Info.plist 文件中定义的一个键。<code>CFBundleDisplayName</code> 的值是一个字符串，用于提供给用户一个有意义的应用程序名称。它通常是一个更加友好和描述性的名称，可以包含特殊字符和空格。例如，应用程序的 <code>CFBundleDisplayName</code> 可以是 "My App"。</p> </li></ol> 
 <p>总结起来，<code>CFBundleName</code> 是应用程序的内部标识符，用于文件系统中的标识和唯一性。而 <code>CFBundleDisplayName</code> 是应用程序的用户可见名称，用于在设备上显示给用户。在大多数情况下，开发者会将 <code>CFBundleDisplayName</code> 设置为更友好和描述性的名称，以便用户能够轻松识别和使用应用程序。</p> 
</blockquote> 
<p></p> 
<h2>三、设置应用版本号</h2> 
<p>在 <code>pubspec.yaml</code> 文件中，您可以使用 <code>version</code> 字段来设置版本号和构建号。格式是 <code>version: major.minor.patch+build</code>，其中 <code>major</code>、<code>minor</code> 和 <code>patch</code> 表示不同的发布级别，<code>build</code> 是构建号。</p> 
<pre><code class="language-bash">version: 1.0.0+1</code></pre> 
<p>这里 <code>1.0.0</code> 是版本号，<code>+1</code> 是构建号。每次发布新版本到应用程序商店时，您都应该至少增加构建号。</p> 
<p>在 <strong>Android</strong> 的 <code>android/app/build.gradle</code> 文件中，<code>versionCode</code> 和 <code>versionName</code> 通常从 <code>pubspec.yaml</code> 文件中自动获取：</p> 
<pre><code class="language-bash">android {
    ...
    defaultConfig {
        ...
        versionCode flutterVersionCode.toInteger()
        versionName flutterVersionName
    }
}</code></pre> 
<p>在 <strong>iOS</strong> 中，Flutter也会自动更新项目的 <code>Info.plist</code> 文件，但如果您需要手动更新，您可以编辑 <code>CFBundleShortVersionString</code>（版本号）和 <code>CFBundleVersion</code>（构建号）：</p> 
<pre><code class="language-XML">&lt;key&gt;CFBundleShortVersionString&lt;/key&gt;
&lt;string&gt;1.0.0&lt;/string&gt;
&lt;key&gt;CFBundleVersion&lt;/key&gt;
&lt;string&gt;1&lt;/string&gt;</code></pre> 
<p>确保在更新版本并构建发布版本之前提交了这些更改。在Flutter中运行构建命令时，这些值将被用来构建最终的应用程序包。</p> 
<p></p> 
<h2>四、设置最低支持系统版本和目标版本</h2> 
<p>在Flutter开发中，设置应用的最低支持系统版本和目标版本需要在特定平台的项目设置中进行。这里分别介绍如何为Android和iOS设置这些版本。</p> 
<h3>1.Android</h3> 
<p>在Android中，你需要修改<code>android/app/build.gradle</code>文件。在这个文件中，你可以找到<code>defaultConfig</code>部分，然后设置<code>minSdkVersion</code>和<code>targetSdkVersion</code>：</p> 
<pre><code class="language-java">android {
    ...

    defaultConfig {
        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).
        applicationId "com.example.myapp"
        minSdkVersion 16  // 最低支持版本
        targetSdkVersion 30  // 目标版本
        versionCode flutterVersionCode.toInteger()
        versionName flutterVersionName
    }

    ...
}</code></pre> 
<p>Android SDK版本查询 <a class="link-info" href="https://developer.android.google.cn/tools/releases/platforms?hl=zh-cn" rel="nofollow" title="https://developer.android.google.cn/tools/releases/platforms?hl=zh-cn">https://developer.android.google.cn/tools/releases/platforms?hl=zh-cn</a></p> 
<p><strong>注意：</strong> 在此示例中，<code>minSdkVersion</code>设置为16表示应用程序最低支持Android 4.1（Jelly Bean）。<code>targetSdkVersion</code>设置为30表示应用程序针对的是Android 11。你应该根据实际需要设置这些值。</p> 
<h3>2.iOS</h3> 
<h4>方式1：全局搜索替换</h4> 
<p style="text-align:center;">Command + Shift + F 全局搜索IPHONEOS_DEPLOYMENT_TARGET， 然后修改部署目标版本。<br><img alt="" class="left" height="231" src="https://images2.imgbox.com/a4/98/lhYHZfAl_o.png" width="600"></p> 
<h4>方式2：通过Xcode来设置</h4> 
<blockquote> 
 <ol><li>打开你的Flutter项目目录下的<code>ios/Runner.xcworkspace</code>文件。</li><li>在Xcode中，选择项目导航器中的<code>Runner</code>项目。</li><li>在项目编辑器中，选择<code>Runner</code>目标，然后选择<code>General</code>标签。</li><li>在<code>Deployment Info</code>部分，你可以设置<code>iOS Deployment Target</code>，这相当于应用的最低支持系统版本。</li></ol> 
</blockquote> 
<p>对于目标版本，一般默认设置为Xcode当前支持的最新SDK。</p> 
<p><strong>注意：</strong> 在Xcode中设置最低支持系统版本时，确保你的Flutter插件也支持这个版本，否则可能会出现兼容性问题。</p> 
<h3>3.更新pubspec.yaml</h3> 
<p>在某些情况下，Flutter插件可能需要特定版本的平台SDK。这些要求通常在插件的pubspec.yaml文件中指定。确保你的项目pubspec.yaml文件中列出的所有依赖项都支持你设置的最低平台版本。查询最低支持，Flutter Packages 网站（<a href="https://pub.dev" rel="nofollow" title="https://pub.dev">https://pub.dev</a>）。</p> 
<p></p> 
<p></p> 
<h2>五、设置应用Icon</h2> 
<p>在Flutter中更改应用图标涉及更新每个平台（Android和iOS）的项目资源。以下是两个平台上修改应用图标的基本步骤：</p> 
<h3>1.Android</h3> 
<blockquote> 
 <ol><li> <p>准备你的图标文件。Android通常需要多个图标大小以适应不同的设备屏幕密度。图标通常放在 <code>android/app/src/main/res/</code> 目录下的不同的 <code>mipmap-</code> 文件夹中。</p> </li><li> <p>替换所有的 <code>mipmap-</code> 文件夹中的 <code>ic_launcher.png</code> 文件（如 <code>mipmap-hdpi</code>, <code>mipmap-mdpi</code>, <code>mipmap-xhdpi</code>, 等）为你自己的图标文件。</p> </li><li> <p>确保你的图标文件名保持为 <code>ic_launcher.png</code>，除非你计划改变 AndroidManifest.xml 中的配置。</p> </li><li> <p>如果你的图标名称或位置有所不同，更新 <code>android/app/src/main/AndroidManifest.xml</code> 文件中的 <code>&lt;application&gt;</code> 标签的 <code>android:icon</code> 属性。</p> </li></ol> 
</blockquote> 
<h3>2.iOS</h3> 
<blockquote> 
 <ol><li> <p>准备你的图标文件。iOS需要一系列不同大小的图标来适应不同的设备和屏幕。</p> </li><li> <p>打开你的Flutter项目中的 <code>ios/Runner.xcworkspace</code> 文件来使用Xcode。</p> </li><li> <p>在Xcode中，选择项目导航器中的 <code>Runner</code> 项目，然后选择 <code>Assets.xcassets</code>。</p> </li><li> <p>找到 <code>AppIcon</code> 资源集，你将看到许多不同大小的槽位准备放置你的图标。</p> </li><li> <p>将你的图标拖放到对应的槽位中或者通过右键点击AppIcon来选择新的图像进行替换。</p> </li></ol> 
</blockquote> 
<h3>3.使用自动化工具</h3> 
<p>你也可以使用第三方工具来自动化这一过程。例如，<code>flutter_launcher_icons</code> 包提供了一种简单的方式来同时为Android和iOS生成应用图标。</p> 
<p>要使用此工具，请按照以下步骤操作：</p> 
<p>将 <code>flutter_launcher_icons</code> 添加到你的 <code>pubspec.yaml</code> 文件中的 <code>dev_dependencies</code> 部分：</p> 
<pre><code class="language-Dart">dev_dependencies:
  flutter_launcher_icons: "^0.9.2"

flutter_icons:
  android: true
  ios: true
  image_path: "assets/icon/app_icon.png"
  # 你也可以为不同的平台指定不同的图标文件
  # image_path_android: "assets/icon/app_icon_android.png"
  # image_path_ios: "assets/icon/app_icon_ios.png"
  # 可以添加更多的配置项，如适用于Android的adaptive_icon_background等</code></pre> 
<p>然后，你可以运行以下命令来生成应用图标：</p> 
<pre><code class="language-Dart">flutter pub get
flutter pub run flutter_launcher_icons</code></pre> 
<p>运行上述命令后，flutter_launcher_icons 将根据你指定的源图标文件 app_icon.png 自动生成需要的各种尺寸的图标，并替换 iOS 和 Android 项目中的现有图标。</p> 
<p>对于 iOS，它会更新 Assets.xcassets/AppIcon.appiconset 中的图标集合。  对于 Android，它会替换 android/app/src/main/res/mipmap-*/ 目录中的 ic_launcher.png 文件，并可能更新 android/app/src/main/res/values/ic_launcher_background.xml 文件（如果你使用了自适应图标的话）。</p> 
<p>这样，你就不需要手动进入 Xcode 或 Android Studio 设置应用图标，flutter_launcher_icons 已经为你自动完成了这些步骤。不过，请确保在运行上述命令之前关闭 Xcode 和 Android Studio，因为这些工具可能会锁定一些文件，导致 flutter_launcher_icons 无法正确写入新图标。</p> 
<p></p> 
<h4>运行flutter pub run flutter_launcher_icons报错</h4> 
<blockquote> 
 <p>192:app_teleprompter gamin$ dart run flutter_launcher_icons:main<br> Building package executable... (5.9s)<br> Built flutter_launcher_icons:main.<br>   ════════════════════════════════════════════<br>      FLUTTER LAUNCHER ICONS (v0.9.3)                               <br>   ════════════════════════════════════════════<br>  </p> 
 <p>✓ Successfully generated launcher icons<br> Unhandled exception:</p> 
 <p>✗ ERROR: InvalidConfigException<br> Cannot not find minSdk from android/app/build.gradle or android/local.propertiesSpecify minSdk in either android/app/build.gradle or android/local.properties<br> #0      createIconsFromConfig (package:flutter_launcher_icons/main.dart:96:7)<br> #1      createIconsFromArguments (package:flutter_launcher_icons/main.dart:60:7)<br> #2      main (file:///Users/gamin/.pub-cache/hosted/pub.flutter-io.cn/flutter_launcher_icons-0.9.3/bin/main.dart:7:26)<br> #3      _delayEntrypointInvocation.&lt;anonymous closure&gt; (dart:isolate-patch/isolate_patch.dart:294:33)<br> #4      _RawReceivePort._handleMessage (dart:isolate-patch/isolate_patch.dart:189:12)</p> 
</blockquote> 
<p>出现的错误信息表示 flutter_launcher_icons 遇到了一个 InvalidConfigException，具体是找不到 Android 的 minSdk 版本设置。这通常是在 android/app/build.gradle 文件或 android/local.properties 文件中指定的。参照前面序号4设置</p> 
<p></p> 
<h2>六、设置启动页</h2> 
<h3>1.Android</h3> 
<p>在 Android 中，启动页通常是一个名为 "splash screen" 的 XML 布局文件，它被设置在应用的 <code>styles.xml</code> 文件中。以下是一个简单的例子。</p> 
<p>在 <code>res/drawable</code> 目录下创建一个名为 <code>launch_background.xml</code> 的文件，并添加以下内容，以显示一个纯色背景和中间的应用图标：</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;layer-list xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;item android:drawable="@color/splash_color"/&gt; &lt;!-- Background color --&gt;
    &lt;item&gt;
        &lt;bitmap
            android:gravity="center"
            android:src="@mipmap/launcher_icon"/&gt; &lt;!-- Replace 'launcher_icon' with your app icon --&gt;
    &lt;/item&gt;
&lt;/layer-list&gt;</code></pre> 
<p>在 <code>res/values/colors.xml</code> 中定义 <code>splash_color</code>：</p> 
<pre><code class="language-java">&lt;resources&gt;
    &lt;color name="splash_color"&gt;#FFFFFF&lt;/color&gt; &lt;!-- Replace '#FFFFFF' with your desired background color --&gt;
&lt;/resources&gt;</code></pre> 
<p>在 <code>res/values/styles.xml</code> 中定义一个新的 theme，它使用了刚才创建的 <code>launch_background.xml</code>：</p> 
<pre><code class="language-java">&lt;resources&gt;
    &lt;style name="LaunchTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;
        &lt;item name="android:windowBackground"&gt;@drawable/launch_background&lt;/item&gt;
    &lt;/style&gt;
&lt;/resources&gt;</code></pre> 
<p> 在 <code>AndroidManifest.xml</code> 中，将 <code>MainActivity</code> 的 <code>theme</code> 设置为刚才创建的 <code>LaunchTheme</code>：</p> 
<pre><code class="language-java">&lt;activity
    android:name=".MainActivity"
    android:theme="@style/LaunchTheme"
    ...&gt;
    ...
&lt;/activity&gt;</code></pre> 
<p></p> 
<h3>2.iOS</h3> 
<p>在 iOS 中，启动页可以通过故事板（Storyboard）来配置。</p> 
<p></p> 
<blockquote> 
 <p>在 Xcode 中，打开 <code>Runner</code> 工作区。</p> 
 <p>选择 <code>Runner</code> 目录下的 <code>Assets.xcassets</code>，将启动图拖入其中。</p> 
 <p>项目目录中，添加一个新的故事板（LaunchScreen.storyboard）。</p> 
 <p>在故事板中设置你的启动页布局。</p> 
 <p>在项目设置中将启动页设置为你添加的故事板。</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" class="left" height="277" src="https://images2.imgbox.com/52/0e/PwMA2LNL_o.png" width="600"></p> 
<p>包括用下面的插件配置的启动页，很多时候都需要到LaunchScreen.storyboard来调整UIImageView的Content Model. 这里选择的Aspect Fill表示图片比例不变填满屏幕，超过部分剪切掉。</p> 
<p></p> 
<h3>3.使用<code>flutter_native_splash插件</code>设置</h3> 
<p><a href="https://pub.dev/packages/flutter_native_splash" rel="nofollow" title="https://pub.dev/packages/flutter_native_splash">https://pub.dev/packages/flutter_native_splash</a></p> 
<p><code>flutter_native_splash</code> 是一个流行的 Flutter 插件，用于轻松地生成和配置本地化的启动页。以下是使用 <code>flutter_native_splash</code> 插件设置启动页的步骤：</p> 
<h4>添加依赖</h4> 
<p>首先，你需要在你的 Flutter 项目的 <code>pubspec.yaml</code> 文件中添加 <code>flutter_native_splash</code> 作为一个开发依赖项。确保使用最新版本：</p> 
<pre><code class="language-bash">dev_dependencies:
  flutter_native_splash: ^2.3.7</code></pre> 
<h4>配置启动页</h4> 
<p>在 <code>pubspec.yaml</code> 文件中，你可以配置启动页的各种属性，如背景颜色、图片、文字等。例如：</p> 
<pre><code class="language-bash">flutter_native_splash:
  color: "#42a5f5"
  image: assets/splash.png
  android: true
  ios: true

    # 从 Android 12 开始，在所有应用的冷启动和温启动期间，系统一律会应用 Android 系统的默认启动画面。默认情况下，此系统默认启动画面由应用的启动器图标元素和主题的 windowBackground（如果是单色）构成。
    # 官网说明https://developer.android.google.cn/develop/ui/views/launch/splash-screen?hl=zh-cn
  android_12:
    # image参数设置闪屏图标图像。 如果不指定该参数，
    # 将使用应用程序的启动器图标。
    # 请注意，初始屏幕将被裁剪为屏幕中心的圆圈。
    # 带有图标背景的应用程序图标：这应该是 960×960 像素，并且适合一个圆圈
    # 没有图标背景的应用程序图标：这应该是 1152×1152 像素，并且适合一个圆圈
    image: "assets/icons/icon_launch.jpg"
    # 启动画面背景颜色。
    color: "#161517"
    # 应用程序图标背景颜色。
    #icon_background_color: "#111111"
    # 品牌属性允许您指定在启动屏幕中用作品牌的图像。
    #branding: assets/dart.png</code></pre> 
<p>在这个例子中，<code>color</code> 定义了启动页的背景颜色，<code>image</code> 指定了启动页中心显示的图片，<code>android</code> 和 <code>ios</code> 表示启动页将同时为这两个平台生成。</p> 
<p>确保你已经将 <code>splash.png</code> 图片添加到你的资产目录中，并在 <code>pubspec.yaml</code> 中引用了这个资产。</p> 
<h4>生成启动页</h4> 
<p>配置好 <code>pubspec.yaml</code> 文件后，运行以下命令以生成启动页：</p> 
<pre><code class="language-bash">flutter pub get
dart run flutter_native_splash:create

</code></pre> 
<h4>恢复 Flutter 默认的白色启动页</h4> 
<pre><code class="language-bash">dart run flutter_native_splash:remove</code></pre> 
<h4>注意事项</h4> 
<ul><li>如果你需要不同的配置，<code>flutter_native_splash</code> 支持许多其他定制选项。查看插件的文档获取完整的配置选项。</li><li>某些配置可能需要在原生代码中额外的步骤，如修改 Android 的 <code>styles.xml</code> 或 iOS 的 LaunchScreen.storyboard。</li><li>如果你在使用此插件后更新了应用图标或其他资源，你可能需要重新运行 <code>flutter_native_splash</code> 命令来更新启动页。</li></ul> 
<h4>运行到iPhone报错CocoaPods is installed but broken. Skipping pod install.</h4> 
<p>运行到Android手机没问题，运行到iPhone就报错。</p> 
<p>经过测试，我Mac电脑终端flutter doctor检测的CocoaPods是正常的，在flutter项目中flutter doctor检测报错flutter doctor还是会报错CocoaPods installed but not working.</p> 
<p>导致<code>添加flutter_native_splash后就运行报错。</code></p> 
<blockquote> 
 <p>Warning: CocoaPods is installed but broken. Skipping pod install.</p> 
 <p>You appear to have CocoaPods installed but it is not working.</p> 
 <p>This can happen if the version of Ruby that CocoaPods was installed with is different from the one being used to invoke it.</p> 
 <p>This can usually be fixed by re-installing CocoaPods.</p> 
 <p>To re-install see https://guides.cocoapods.org/using/getting-started.html#installation for instructions.</p> 
 <p>Exception: CocoaPods not installed or not in valid state.</p> 
</blockquote> 
<p></p> 
<p>问题如下，每次重启终端和Flutter项目都需要重新执行$ source ~/.rvm/scripts/rvm不然flutter doctor会报错CocoaPods installed but not working.</p> 
<blockquote> 
 <p>192:~ gamin$ rvm -v<br> -bash: rvm: command not found<br> 192:~ gamin$ source ~/.rvm/scripts/rvm<br> 192:~ gamin$ rvm -v<br> rvm 1.29.12 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]</p> 
</blockquote> 
<p>这意味着RVM的环境设置没有正确添加到你的shell配置文件中。为了解决这个问题，你需要将RVM的环境初始化命令永久添加到你的shell配置文件中。</p> 
<p>根据你使用的终端shell（比如 Bash 或 Zsh），你可以按照以下步骤操作：</p> 
<h5>对于<strong>Bash</strong>用户</h5> 
<p>1).打开你的 <code>.bash_profile</code> 或者 <code>.bashrc</code> 文件。你可以使用文本编辑器或者在终端中使用如下命令：</p> 
<pre><code class="language-bash">$ open -a TextEdit ~/.bash_profile</code></pre> 
<p>或者</p> 
<pre><code class="language-bash">$ open -a TextEdit ~/.bashrc</code></pre> 
<p>2).在文件的末尾添加以下内容：</p> 
<pre><code class="language-bash">[[ -s "$HOME/.rvm/scripts/rvm" ]] &amp;&amp; source "$HOME/.rvm/scripts/rvm"</code></pre> 
<p>3).保存并关闭文件。</p> 
<p>4).为了使更改生效，你可以重新加载配置文件，通过运行：</p> 
<pre><code class="language-bash">$ source ~/.bash_profile</code></pre> 
<p>或者</p> 
<pre><code class="language-bash">$ source ~/.bashrc</code></pre> 
<h5>对于<strong>Zsh</strong>用户</h5> 
<p>1).打开你的 <code>.zshrc</code> 文件：</p> 
<pre><code class="language-bash">$ open -a TextEdit ~/.zshrc</code></pre> 
<p>2).同样在文件的末尾添加：</p> 
<pre><code class="language-bash">[[ -s "$HOME/.rvm/scripts/rvm" ]] &amp;&amp; source "$HOME/.rvm/scripts/rvm"</code></pre> 
<p>3).保存并关闭文件。</p> 
<p>4).重新加载配置文件：</p> 
<pre><code class="language-bash">$ source ~/.zshrc</code></pre> 
<p>完成这些步骤后，每次你打开一个新的终端会话时，RVM都会自动初始化，这样你就不需要每次都手动运行 <code>source ~/.rvm/scripts/rvm</code> 了。</p> 
<p></p> 
<h2 style="background-color:transparent;">七、环境判断</h2> 
<p>在Flutter中，你可以通过几种方式来判断应用是在开发环境还是生产环境。一种常见的做法是在编译应用时使用不同的入口点，或者根据编译模式（debug或release）来设置环境。</p> 
<h3>1.使用编译模式</h3> 
<p>详细介绍参见另一文<a href="https://blog.csdn.net/wsyx768/article/details/137119615" title="https://blog.csdn.net/wsyx768/article/details/137119615">https://blog.csdn.net/wsyx768/article/details/137119615</a></p> 
<p>Flutter为我们提供了<code>kReleaseMode</code>、<code>kDebugMode</code>和<code>kProfileMode</code>常量，它们可以告诉我们应用当前的编译模式。这些常量位于<code>foundation</code>库中。</p> 
<pre><code class="language-Dart">import 'package:flutter/foundation.dart';

void main() {
  if (kReleaseMode) {
    // 这里是生产环境
    runApp(MyAppProduction());
  } else {
    // 这里是开发环境
    runApp(MyAppDevelopment());
  }
}</code></pre> 
<p>在上面的示例中，当应用在生产环境下编译时（即以release模式编译），<code>kReleaseMode</code>会被设置为<code>true</code>。如果是在debug模式下编译，那么<code>kDebugMode</code>会被设置为<code>true</code>。</p> 
<p>请注意，<code>kProfileMode</code>是用于性能分析时的特殊编译模式，通常你不会在代码逻辑中用到它。</p> 
<h3>2.使用不同的main入口</h3> 
<p>在实际项目中，你可能会有多个main文件，分别用于开发和生产环境。例如，你可以创建<code>main_dev.dart</code>和<code>main_prod.dart</code>两个文件，分别为开发环境和生产环境配置不同的设置。</p> 
<pre><code class="language-Dart">// main_dev.dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyAppDevelopment());
}

// main_prod.dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyAppProduction());
}</code></pre> 
<p>在运行或构建时，你可以指定使用哪个入口点文件：</p> 
<pre><code class="language-bash"># 对于开发环境
$ flutter run -t lib/main_dev.dart

# 对于生产环境
$ flutter run --release -t lib/main_prod.dart</code></pre> 
<p>或者在构建时：</p> 
<pre><code class="language-bash"># 构建开发环境的APK
$ flutter build apk --debug -t lib/main_dev.dart

# 构建生产环境的APK
$ flutter build apk --release -t lib/main_prod.dart</code></pre> 
<h3>3.使用环境配置</h3> 
<p>另一种方法是使用不同的环境配置文件。例如，你可以有一个<code>.env.dev</code>文件用于开发环境的设置，以及一个<code>.env.prod</code>文件用于生产环境。然后你可以使用<code>flutter_dotenv</code>这样的包来加载不同的环境文件。</p> 
<pre><code class="language-Dart">import 'package:flutter/material.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';

Future&lt;void&gt; main() async {
  // 加载不同的环境配置
  await dotenv.load(fileName: kReleaseMode ? ".env.prod" : ".env.dev");

  runApp(kReleaseMode ? MyAppProduction() : MyAppDevelopment());
}</code></pre> 
<p>在上面的示例中，你需要添加<code>flutter_dotenv</code>依赖，并创建不同的环境配置文件。这种方法提供了更多灵活性，允许你根据环境设置不同的变量。</p> 
<p>无论哪种方法，关键是在编译时确定应用的环境，并据此配置相应的设置。记得始终在发布应用之前彻底测试以确保环境配置的正确性。</p> 
<p></p> 
<h2>八、平台判断</h2> 
<p>在Flutter中，你可以使用<code>Platform</code>类来检测应用程序正在哪个操作系统平台上运行。这个类位于<code>dart:io</code>库中。下面是如何使用<code>Platform</code>类来确定操作系统平台的例子：</p> 
<pre><code class="language-Dart">import 'dart:io' show Platform;

void main() {
  if (Platform.isAndroid) {
    // Android平台的代码
  } else if (Platform.isIOS) {
    // iOS平台的代码
  } else if (Platform.isLinux) {
    // Linux平台的代码
  } else if (Platform.isMacOS) {
    // macOS平台的代码
  } else if (Platform.isWindows) {
    // Windows平台的代码
  } else if (Platform.isFuchsia) {
    // Fuchsia平台的代码
  }

  // 运行Flutter应用
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // ...构建Flutter应用的UI
  }
}</code></pre> 
<p>Flutter还提供了<code>Theme</code>类中的一些其他属性和方法，这些可以帮助你确定当前的设计语言，比如Material Design或Cupertino，这通常与平台相关（Android通常使用Material Design，iOS通常使用Cupertino）。例如：</p> 
<pre><code class="language-Dart">import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final ThemeData theme = Theme.of(context);
    if (theme.platform == TargetPlatform.iOS) {
      // iOS样式的代码
    } else if (theme.platform == TargetPlatform.android) {
      // Android样式的代码
    }
    // ...构建Flutter应用的UI
  }
}</code></pre> 
<p>另外，<code>flutter/foundation.dart</code>库提供了<code>kIsWeb</code>常量来判断应用是否在web平台上运行。</p> 
<pre><code class="language-Dart">import 'package:flutter/foundation.dart';

void main() {
  if (kIsWeb) {
    // Web平台的代码
  } else {
    // 移动或桌面平台的代码
  }

  // 运行Flutter应用
  runApp(MyApp());
}</code></pre> 
<p>这些检查可以帮助你为不同的平台编写特定的代码，例如使用平台特有的插件或者调整UI来匹配用户的期望。确保在多平台上充分测试你的应用，以确保每个平台上都提供良好的用户体验。</p> 
<p></p> 
<h2>九、打包APP</h2> 
<p>在Flutter中打包APP分为两个主要的平台：Android和iOS。以下是为两个平台打包应用程序的基本步骤：</p> 
<h3>1.Android</h3> 
<p>使用Android Studio打包的话参见另一文<a href="https://blog.csdn.net/wsyx768/article/details/137050386" title="https://blog.csdn.net/wsyx768/article/details/137050386">https://blog.csdn.net/wsyx768/article/details/137050386</a></p> 
<p>或者直接看官方文档</p> 
<p><a href="https://developer.android.com/studio/publish" rel="nofollow" title="https://developer.android.com/studio/publish">https://developer.android.com/studio/publish</a></p> 
<p></p> 
<p>下面介绍用Flutter打包</p> 
<p>要将 APK 上传到应用商店（如 Google Play 商店），您需要先对 APK 进行签名。在 Android 平台上，未签名的 APK 无法安装到用户设备上，也不能发布到应用商店。</p> 
<p>打包 Android 应用 (APK或AAB)</p> 
<h4><strong>生成一个</strong>秘钥库<strong>（keystore）</strong></h4> 
<p>如果您还没有密钥库文件，您可以使用 <code>keytool</code> 命令来生成一个。这个工具包含在 Java Development Kit (JDK) 中。运行以下命令来生成密钥库：</p> 
<pre><code class="language-bash">$ keytool -genkey -v -keystore /path/to/your_keystore.jks -keyalg RSA -keysize 2048 -validity 10000 -alias your_key_alias</code></pre> 
<p>将/path/to/your_keystore.jks改成你实际的位置和命名，将your_key_alias换成你真是的别名。</p> 
<p>然后回车，按照提示设置密码和相关信息。</p> 
<h4><strong>在您的 Flutter 项目中创建密钥配置文件</strong></h4> 
<p>在项目的 <code>android</code> 目录下创建一个名为 <code>key.properties</code> 的文件，将您的密钥库信息添加到该文件中：</p> 
<pre><code class="language-bash">storePassword=your_keystore_password
keyPassword=your_key_alias_password
keyAlias=your_key_alias
storeFile=/path/to/your_keystore.jks</code></pre> 
<p>这个文件包含敏感信息，不应该被提交到版本控制系统中。</p> 
<h4><strong>配置 <code>build.gradle</code> 文件</strong></h4> 
<p>在项目的 <code>android/app</code> 目录下的 <code>build.gradle</code> 文件中，配置签名信息。您需要修改 <code>buildTypes</code> 部分以使用 <code>key.properties</code> 中的信息：</p> 
<pre><code class="language-bash">android {
    ...
    signingConfigs {
        release {
            keyAlias keystoreProperties['keyAlias']
            keyPassword keystoreProperties['keyPassword']
            storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null
            storePassword keystoreProperties['storePassword']
        }
    }
    buildTypes {
        release {
            signingConfig signingConfigs.release
        }
    }
}</code></pre> 
<p>在 <code>build.gradle</code> 文件的顶部，您还需要添加代码来加载 <code>key.properties</code> 文件：</p> 
<pre><code class="language-bash">def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('key.properties')
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}</code></pre> 
<h4><strong>更新应用版本</strong></h4> 
<p>更新您的<code>pubspec.yaml</code>文件中的版本号。</p> 
<h4><strong>构建签名的 APK</strong></h4> 
<p>使用以下命令来生成APK或AAB：</p> 
<p>生成APK：</p> 
<pre><code class="language-bash">$ flutter build apk
或
$ flutter build apk --release</code></pre> 
<p>生成适用于Google Play的AAB：</p> 
<pre><code class="language-bash">$ flutter build appbundle</code></pre> 
<h4><strong>找到生成的文件</strong></h4> 
<p>打包完成后，您可以在项目目录下的<code>build/app/outputs/flutter-apk/</code>或<code>build/app/outputs/bundle/release/</code>中找到APK或AAB文件。</p> 
<h4><strong>上传到</strong>Android应用市场</h4> 
<p>完成这些步骤后，您将得到一个已签名的 APK 文件，可以上传到 Android 应用市场。确保您遵循每个应用商店的具体指南来发布您的应用。</p> 
<p>如果要上传到Google Play，您需要打包的成AAB，这样才可以上传到Google Play Console进行分发。</p> 
<p></p> 
<h3 style="background-color:transparent;">2.iOS</h3> 
<p>详见另一文</p> 
<p><a href="https://gamin.blog.csdn.net/article/details/137187579" rel="nofollow" title="https://gamin.blog.csdn.net/article/details/137187579">https://gamin.blog.csdn.net/article/details/137187579</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13ce0032849879555796f81a3f606c04/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据库课程设计-工资管理系统-MySQL</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b0cf12b8c12e3021567bd0054a956764/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux安装JDK详细教程（附图）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>