<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言之指针详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6f25713a05e59d0ea2e5e0f41d379c8e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C语言之指针详解">
  <meta property="og:description" content="文章目录 1 指针1.1 简介1.2 什么是指针1.2.1 定义1.2.2 指针表示1.2.3 为什么*p=&amp;a不正确 1.3 使用指针1.3.1 简单使用1.3.2 NULL 指针1.3.3 指针算术运算1.3.3.1 定义1.3.3.2 遍历数组：递增一个指针1.3.3.3 遍历数组：递减一个指针1.3.3.4 指针的比较 1.3.4 指针数组1.3.4.1 简单示例1.3.4.2 字符串指针数组问题 1.3.5 指向数组的指针1.3.6 指向指针的指针 1.4 函数和指针关系1.4.1 传递指针给函数1.4.2 从函数返回指针1.4.3 函数指针1.4.4 回调函数 1 指针 1.1 简介 当初学C语言，指针是最头疼的地方，难以理解，不过时间长了就自然明白了
通过指针，可以简化一些 C 编程任务的执行，还有一些任务，如动态内存分配，没有指针是无法执行的。
每一个变量都有一个内存位置，每一个内存位置都定义了可使用 &amp; 运算符访问的地址，它表示了在内存中的一个地址。
注意：用register修饰的变量是没法取到地址的，没有内存位置
1.2 什么是指针 1.2.1 定义 指针也就是内存地址，指针变量是用来存放内存地址的变量。就像其他变量或常量一样，必须在使用指针存储其他变量地址之前，对其进行声明。指针变量声明的一般形式为： type *var_name;
type 是指针的基类型，它必须是一个有效的 C 数据类型var_name 是指针变量的名称。用来声明指针的星号 * 与乘法中使用的星号是相同的。但是，在这个语句中，星号是用来指定一个变量是指针。 所有实际数据类型，不管是整型、浮点型、字符型，还是其他的数据类型，对应指针的值的类型都是一样的，都是一个代表内存地址的长的十六进制数。
不同数据类型的指针之间唯一的不同是，指针所指向的变量或常量的数据类型不同。
1.2.2 指针表示 请看下面的实例，它将输出定义的变量地址：
#include &lt;stdio.h&gt; int main () { int var_runoob = 10; int *p; // 定义指针变量 p = &amp;var_runoob; printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-18T11:52:21+08:00">
    <meta property="article:modified_time" content="2024-01-18T11:52:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言之指针详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__1" rel="nofollow">1 指针</a></li><li><ul><li><a href="#11__2" rel="nofollow">1.1 简介</a></li><li><a href="#12__7" rel="nofollow">1.2 什么是指针</a></li><li><ul><li><a href="#121__8" rel="nofollow">1.2.1 定义</a></li><li><a href="#122__18" rel="nofollow">1.2.2 指针表示</a></li><li><a href="#123_pa_37" rel="nofollow">1.2.3 为什么*p=&amp;a不正确</a></li></ul> 
   </li><li><a href="#13__44" rel="nofollow">1.3 使用指针</a></li><li><ul><li><a href="#131__45" rel="nofollow">1.3.1 简单使用</a></li><li><a href="#132_NULL__69" rel="nofollow">1.3.2 NULL 指针</a></li><li><a href="#133__92" rel="nofollow">1.3.3 指针算术运算</a></li><li><ul><li><a href="#1331__93" rel="nofollow">1.3.3.1 定义</a></li><li><a href="#1332__102" rel="nofollow">1.3.3.2 遍历数组：递增一个指针</a></li><li><a href="#1333__133" rel="nofollow">1.3.3.3 遍历数组：递减一个指针</a></li><li><a href="#1334__164" rel="nofollow">1.3.3.4 指针的比较</a></li></ul> 
    </li><li><a href="#134__198" rel="nofollow">1.3.4 指针数组</a></li><li><ul><li><a href="#1341__199" rel="nofollow">1.3.4.1 简单示例</a></li><li><a href="#1342__255" rel="nofollow">1.3.4.2 字符串指针数组问题</a></li></ul> 
    </li><li><a href="#135__341" rel="nofollow">1.3.5 指向数组的指针</a></li><li><a href="#136__393" rel="nofollow">1.3.6 指向指针的指针</a></li></ul> 
   </li><li><a href="#14__435" rel="nofollow">1.4 函数和指针关系</a></li><li><ul><li><a href="#141__436" rel="nofollow">1.4.1 传递指针给函数</a></li><li><a href="#142__504" rel="nofollow">1.4.2 从函数返回指针</a></li><li><a href="#143__577" rel="nofollow">1.4.3 函数指针</a></li><li><a href="#144__618" rel="nofollow">1.4.4 回调函数</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1__1"></a>1 指针</h2> 
<h3><a id="11__2"></a>1.1 简介</h3> 
<p>当初学C语言，指针是最头疼的地方，难以理解，不过时间长了就自然明白了<br> 通过指针，可以简化一些 C 编程任务的执行，还有一些任务，如动态内存分配，没有指针是无法执行的。<br> 每一个变量都有一个内存位置，每一个内存位置都定义了可使用 <code>&amp;</code> 运算符访问的地址，它表示了在内存中的一个地址。<br> <code>注意：</code>用<code>register</code>修饰的变量是没法取到地址的，没有内存位置</p> 
<h3><a id="12__7"></a>1.2 什么是指针</h3> 
<h4><a id="121__8"></a>1.2.1 定义</h4> 
<p><code>指针</code>也就是<code>内存地址</code>，指针变量是用来存放内存地址的变量。就像其他变量或常量一样，必须在使用指针存储其他变量地址之前，对其进行声明。指针变量声明的一般形式为： <code>type *var_name;</code></p> 
<ul><li><code>type</code> 是指针的基类型，它必须是一个有效的 C 数据类型</li><li><code>var_name</code> 是指针变量的名称。用来声明指针的星号 <code>*</code> 与乘法中使用的星号是相同的。但是，在这个语句中，星号是用来指定<code>一个变量是指针</code>。</li></ul> 
<p>所有实际数据类型，不管是整型、浮点型、字符型，还是其他的数据类型，对应指针的值的类型都是一样的，都是一个代表内存地址的长的十六进制数。</p> 
<p>不同数据类型的指针之间唯一的不同是，指针所指向的变量或常量的数据类型不同。</p> 
<h4><a id="122__18"></a>1.2.2 指针表示</h4> 
<p>请看下面的实例，它将输出定义的变量地址：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> var_runoob <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>              <span class="token comment">// 定义指针变量</span>
    p <span class="token operator">=</span> <span class="token operator">&amp;</span>var_runoob<span class="token punctuation">;</span>
 
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"var_runoob 变量的地址： %p\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
var_runoob 变量的地址： <span class="token number">0x7ffeeaae08d8</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/03/NvJQmoPJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="123_pa_37"></a>1.2.3 为什么*p=&amp;a不正确</h4> 
<p><code>int *p=&amp;a</code>是对的，但是<code>*p=&amp;a；</code>却不对？<br> <code>int *p=&amp;a;</code>这一句定义了一个<code>变量p</code>，<code>p</code>是一个指向<code>int型</code>的<code>指针</code>，即<code>p</code>的数据类型是<code>int*</code>，而<code>&amp;a</code>的数据类型也是<code>int*</code>。这条语句可以分写为 <code>int *p;p=&amp;a;</code>所以这一句没问题。<br> <code>*p=&amp;a;</code> 这一句是对(<code>*p</code>)进行赋值操作，(<code>*p</code>)的数据类型是<code>int型</code>，而<code>&amp;a</code>的数据类型是<code>int*</code>，两者类型不同，无法进行赋值，所以语句是错的。</p> 
<p><code>*p=a</code>和<code>p=&amp;a</code>是正确的，<code>*p=a</code>的意思：将<code>a的值</code>赋给<code>p指针</code>指向的地址的值；<code>p=&amp;a</code>的意思是：将<code>a的地址</code>赋给<code>指针p</code>；<br> 区别：<code>*p</code>是一个<code>值</code>；<code>p</code>是一个<code>地址</code>；两者完全不相同，<code>*</code>代表着<code>p</code>指向的地址的值，简单来说就是取值；<code>&amp;</code>是<code>取地址</code>符号，取的是<code>地址</code>；<code>p</code>是<code>指针</code>，可以理解为所指向的值的地址，<code>*p</code>就是取<code>p指针</code>指向的地址的值，<code>&amp;a</code>就是取a的地址。</p> 
<h3><a id="13__44"></a>1.3 使用指针</h3> 
<h4><a id="131__45"></a>1.3.1 简单使用</h4> 
<p>使用指针时会频繁进行以下几个操作：定义一个指针变量、把变量地址赋值给指针、访问指针变量中可用地址的值。这些是通过使用一元运算符 <code>*</code> 来返回位于操作数所指定地址的变量的值。下面的实例涉及到了这些操作：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>   <span class="token comment">/* 实际变量的声明 */</span>
   <span class="token keyword">int</span>  <span class="token operator">*</span>ip<span class="token punctuation">;</span>        <span class="token comment">/* 指针变量的声明 */</span>
    ip <span class="token operator">=</span> <span class="token operator">&amp;</span>var<span class="token punctuation">;</span>  <span class="token comment">/* 在指针变量中存储 var 的地址 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"var 变量的地址: %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>var  <span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token comment">/* 在指针变量中存储的地址 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ip 变量存储的地址: %p\n"</span><span class="token punctuation">,</span> ip <span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token comment">/* 使用指针访问值 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*ip 变量的值: %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>ip <span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
var 变量的地址<span class="token operator">:</span> <span class="token number">0x7ffeeef168d8</span>
ip 变量存储的地址<span class="token operator">:</span> <span class="token number">0x7ffeeef168d8</span>
<span class="token operator">*</span>ip 变量的值<span class="token operator">:</span> <span class="token number">20</span>
</code></pre> 
<h4><a id="132_NULL__69"></a>1.3.2 NULL 指针</h4> 
<p>在变量声明的时候，如果没有确切的地址可以赋值，为指针变量赋一个 <code>NULL</code> 值是一个良好的编程习惯。<br> 赋为 <code>NULL</code> 值的指针被称为<code>空指针</code>。<br> <code>NULL</code> 指针是一个定义在标准库中的值为零的常量</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> 
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ptr 的地址是 %p\n"</span><span class="token punctuation">,</span> ptr  <span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
ptr 的地址是 <span class="token number">0x0</span>
</code></pre> 
<p>在大多数的操作系统上，程序不允许访问地址为<code>0</code> 的内存，因为该内存是操作系统保留的。然而，内存地址 <code>0</code> 有特别重要的意义，它表明该指针不指向一个可访问的内存位置。但按照惯例，如果指针包含空值（零值），则假定它不指向任何东西。</p> 
<p>如需检查一个空指针，可以使用 if 语句，如下所示：</p> 
<pre><code class="prism language-c"><span class="token keyword">if</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span>     <span class="token comment">/* 如果 p 非空，则完成 */</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ptr<span class="token punctuation">)</span>    <span class="token comment">/* 如果 p 为空，则完成 */</span>
</code></pre> 
<h4><a id="133__92"></a>1.3.3 指针算术运算</h4> 
<h5><a id="1331__93"></a>1.3.3.1 定义</h5> 
<p>C 指针是一个用<code>数值</code>表示的<code>地址</code>。因此，可以对指针执行算术运算。可以对指针进行四种算术运算：<code>++、--、+、-</code></p> 
<ul><li> <p>整型指针：假设 ptr 是一个指向地址 1000 的整型指针，是一个 32 位的整数，让我们对该指针执行下列的算术运算：<code>ptr++</code>，在执行完上述的运算之后，<code>ptr</code> 将指向位置 <code>1004</code>，因为 ptr 每增加一次，它都将指向下一个<code>整数位置</code>，即 <strong><code>当前位置往后移 4 字节</code></strong>。这个运算会在不影响内存位置中实际值的情况下，移动指针到下一个内存位置。</p> </li><li> <p>字符型指针：如果 ptr 指向一个地址为 1000 的<code>字符</code>，上面的运算会导致指针指向位置 1001，因为下一个字符位置是在 1001。</p> </li><li> <p>指针的每一次递增，它其实会指向下一个元素的存储单元。<br> 指针的每一次递减，它都会指向前一个元素的存储单元。<br> <strong><code>指针在递增和递减时跳跃的字节数取决于指针所指向变量数据类型长度</code></strong>，比如 int 就是 4 个字节。</p> </li></ul> 
<h5><a id="1332__102"></a>1.3.3.2 遍历数组：递增一个指针</h5> 
<p>我们喜欢在程序中使用指针代替数组，因为变量指针可以递增，而数组不能递增，数组可以看成一个指针常量。<br> 下面的程序递增变量指针，以便顺序访问数组中的每一个元素：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>  i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span> 
   <span class="token comment">/* 指针中的数组地址 */</span>
   ptr <span class="token operator">=</span> var<span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span> 
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"存储地址：var[%d] = %p\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> ptr <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"存储值：var[%d] = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr <span class="token punctuation">)</span><span class="token punctuation">;</span> 
      <span class="token comment">/* 指向下一个位置 */</span>
      ptr<span class="token operator">++</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
存储地址：var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> e4a298cc
存储值：var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
存储地址：var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> e4a298d0
存储值：var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
存储地址：var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> e4a298d4
存储值：var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">200</span>
</code></pre> 
<h5><a id="1333__133"></a>1.3.3.3 遍历数组：递减一个指针</h5> 
<p>同样地，对指针进行递减运算，即把值减去其数据类型的字节数，如下所示：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>  i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span> 
   <span class="token comment">/* 指针中最后一个元素的地址 */</span>
   ptr <span class="token operator">=</span> <span class="token operator">&amp;</span>var<span class="token punctuation">[</span>MAX<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> MAX<span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"存储地址：var[%d] = %p\n"</span><span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> ptr <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"存储值：var[%d] = %d\n"</span><span class="token punctuation">,</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">*</span>ptr <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
      <span class="token comment">/* 指向下一个位置 */</span>
      ptr<span class="token operator">--</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
存储地址：var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">518</span>a0ae4
存储值：var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">200</span>
存储地址：var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">518</span>a0ae0
存储值：var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
存储地址：var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">518</span>a0adc
存储值：var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
</code></pre> 
<h5><a id="1334__164"></a>1.3.3.4 指针的比较</h5> 
<p>指针可以用关系运算符进行比较，如 <code>==、&lt; 和 &gt;</code>。如果 p1 和 p2 指向两个相关的变量，比如同一个数组中的不同元素，则可对 p1 和 p2 进行大小比较。</p> 
<p>下面的程序修改了上面的实例，只要变量指针所指向的地址小于或等于数组的最后一个元素的地址 &amp;var[MAX - 1]，则把变量指针进行递增：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>  i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span> 
   <span class="token comment">/* 指针中第一个元素的地址 */</span>
   ptr <span class="token operator">=</span> var<span class="token punctuation">;</span>
   i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span> ptr <span class="token operator">&lt;=</span> <span class="token operator">&amp;</span>var<span class="token punctuation">[</span>MAX <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span> 
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"存储地址：var[%d] = %p\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> ptr <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"存储值：var[%d] = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
      <span class="token comment">/* 指向上一个位置 */</span>
      ptr<span class="token operator">++</span><span class="token punctuation">;</span>
      i<span class="token operator">++</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
存储地址：var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x7ffeee2368cc</span>
存储值：var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
存储地址：var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x7ffeee2368d0</span>
存储值：var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
存储地址：var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0x7ffeee2368d4</span>
存储值：var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">200</span>
</code></pre> 
<h4><a id="134__198"></a>1.3.4 指针数组</h4> 
<h5><a id="1341__199"></a>1.3.4.1 简单示例</h5> 
<p>先让我们来看一个实例，它用到了一个由 3 个整数组成的数组：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span> 
   <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of var[%d] = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> var<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
Value of var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
Value of var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
Value of var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">200</span>
</code></pre> 
<p>可能有一种情况，我们想要让数组存储指向 int 或 char 或其他数据类型的指针。这是一个指向整数的指针数组的声明：<br> <code>int *ptr[MAX];</code><br> 在这里，把 ptr 声明为一个数组，由 MAX 个整数指针组成。因此，ptr 中的每个元素，都是一个指向 int 值的指针。因此是由指针构成的数组</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  var<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      ptr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>var<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">/* 赋值为整数的地址 */</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of var[%d] = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span>ptr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
Value of var<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
Value of var<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
Value of var<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">200</span>
</code></pre> 
<p>指针数组和数组指针的区别：</p> 
<ul><li>指针数组，如：<code>int *p[3]</code><br> 指针数组：指针数组可以说成是<code>指针的数组</code>，首先这个变量是一个数组。<br> 其次，<code>指针</code>修饰这个数组，意思是说这个数组的所有元素都是指针类型。<br> 在32位系统中，指针占四个字节，而在64位系统中，指针通常占八个字节</li><li>数组指针，如：<code>int (*p)[3]</code><br> 数组指针：数组指针可以说成是<code>数组的指针</code>，首先这个变量是一个指针。<br> 其次，<code>数组</code>修饰这个指针，意思是说这个指针存放着一个数组的首地址，或者说这个指针指向一个数组的首地址</li></ul> 
<h5><a id="1342__255"></a>1.3.4.2 字符串指针数组问题</h5> 
<p>在C语言中，<code>字符串数组</code>可以用<code>字符数组</code>来表示。<code>字符数组</code>是由一系列字符组成的数组，每个字符占用一个字节的内存空间。字符串是以<code>\0</code>（<code>空字符</code>）结尾的字符数组，因此在定义字符串数组时需要预留一个字符位置来存储<code>\0</code>。</p> 
<pre><code class="prism language-c"><span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token comment">// 定义一个长度为10的字符数组，存储字符串"hello"</span>
<span class="token keyword">char</span> <span class="token operator">*</span>str <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span><span class="token comment">// 使用 字符指针表示法：</span>
</code></pre> 
<p>在C语言中，<code>char *str = "hello";</code> 和 <code>char str[] = "hello";</code> 都可以用来表示字符串，但它们之间有一些区别：</p> 
<ul><li>存储方式：<br> <code>char *str = "hello";</code>：<code>str</code> 是一个指针，它指向一个字符串字面量（string literal）“hello”。字符串字面量通常存储在程序的只读内存区域（如常量区），因此不能修改。<code>str</code> 变量本身存储在栈上。<br> <code>char str[] = "hello";</code>：<code>str</code> 是一个字符数组，它的内容是字符串 “hello”。字符串的字符存储在栈上，因此可以修改。<code>str</code> 变量本身也存储在栈上。</li><li>可修改性：<br> <code>char *str = "hello";</code>：由于 <code>str</code> 指向的是<code>只读内存区域</code>，所以不能修改字符串内容。例如，尝试修改字符串的操作（如 <code>str[0] = 'H';</code>）可能会导致程序崩溃。<br> <code>char str[] = "hello";</code>：由于 <code>str</code> 是一个字符数组，存储在栈上，所以可以修改字符串内容。例如，可以执行 <code>str[0] = 'H';</code> 操作。</li><li><code>sizeof</code>操作符的结果：<br> <code>char *str = "hello";</code>：使用 <code>sizeof(str)</code> 时，将返回指针的大小（通常为4字节或8字节，取决于操作系统和编译器）。<br> <code>char str[] = "hello";</code>：使用 <code>sizeof(str)</code> 时，将返回字符数组的大小，即6字节（包括字符串结尾的空字符’\0’）。</li></ul> 
<p>那么也可以用一个指向字符的指针数组来存储一个字符串列表，如下：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">const</span> <span class="token keyword">int</span> MAX <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>names<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                   <span class="token string">"Zara Ali"</span><span class="token punctuation">,</span>
                   <span class="token string">"Hina Ali"</span><span class="token punctuation">,</span>
                   <span class="token string">"Nuha Ali"</span><span class="token punctuation">,</span>
                   <span class="token string">"Sara Ali"</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> MAX<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of names[%d] = %s\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> names<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
Value of names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Zara Ali
Value of names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Hina Ali
Value of names<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Nuha Ali
Value of names<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Sara Ali
</code></pre> 
<p>由于 <code>字符串</code> 是以字符数组的形式存储的，以空字符（<code>'\0'</code>）作为结束标志。所以当定义一个字符串指针数组 <code>char *names[]</code> 时，数组中的每个元素都是一个指向字符数组（字符串）的<code>指针</code>。<br> 当 访问 <code>names[i]</code> 时，实际上是获取了指向字符串的指针。然而，<code>C 语言</code>中的字符串处理函数（如 <code>printf</code>）通常会自动处理指针，它们会根据指针所指向的地址，逐个字符地读取字符串，直到遇到空字符（<code>'\0'</code>）为止。因此，当使用这些函数时，它们会显示字符串的内容，而不是指针的地址。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> <span class="token operator">*</span>names<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"Zara Ali"</span><span class="token punctuation">,</span><span class="token string">"ASD"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>m<span class="token punctuation">;</span>
    m <span class="token operator">=</span> names<span class="token punctuation">;</span>
    <span class="token comment">// m = names[0];</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of names = %p\n"</span><span class="token punctuation">,</span> names<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of m = %p\n"</span><span class="token punctuation">,</span> m <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of *m = %s\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>m <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">char</span> <span class="token operator">*</span>n<span class="token punctuation">;</span>
    n <span class="token operator">=</span> <span class="token operator">*</span>names<span class="token punctuation">;</span>
    <span class="token comment">// m = names[0];</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of n = %p\n"</span><span class="token punctuation">,</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of n = %s\n"</span><span class="token punctuation">,</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Value of *n = %c\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>n <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

输出结果：
Value of names <span class="token operator">=</span> <span class="token number">0061FF</span><span class="token number">10</span>
Value of m <span class="token operator">=</span> <span class="token number">0061FF</span><span class="token number">10</span>
Value of <span class="token operator">*</span>m <span class="token operator">=</span> Zara Ali
Value of n <span class="token operator">=</span> <span class="token number">00405064</span>
Value of n <span class="token operator">=</span> Zara Ali
Value of <span class="token operator">*</span>n <span class="token operator">=</span> Z
</code></pre> 
<p>从上面例子中分析：<br> <code>char *names[] = {"Zara Ali", "ASD"}; </code>定义了一个<code>指针数组</code>，数组中的每个元素都是一个指向<code>字符数组</code>（字符串）的指针。当使用 <code>char *m;</code> 时，定义了一个<code>指向字符的指针</code>。所以，<code>m</code> 的类型是 <code>char *</code>。<br> 而 <code>names</code> 是一个<code>指针数组</code>，它的类型是 <code>char **</code>，因为它是一个<code>指向指针的指针</code>。而数组名在大多数情况下会被解释为指向数组第一个元素的指针，所以 不能将 <code>names</code> 直接赋值给 <code>m</code> ，因为类型不同。<br> 但是，你可以将 <code>names</code> 数组中的某个元素（即一个指向字符串的指针）赋值给 m，例如：<code>m = names[0]; // 或者 m = *names;</code><br> 这样，m 就指向了字符串 “Zara Ali”。<br> 当使用 <code>n = *names</code> 时，相当于把字符串指针数组的第一个元素给了n，即"Zara Ali"，当在使用 <code>*n</code> 时，就指向了字符串的第一个元素即字符：Z</p> 
<h4><a id="135__341"></a>1.3.5 指向数组的指针</h4> 
<p><code>数组名</code>是一个<code>指向数组</code>中第一个元素的<code>常量指针</code>。因此，在下面的声明中：<br> <code>double balance[50];</code><br> <code>balance</code> 是一个指向 <code>&amp;balance[0]</code> 的指针，即数组 <code>balance</code> 的第一个元素的地址。因此，下面的程序片段把 p 赋值为 balance 的第一个元素的地址：</p> 
<pre><code class="prism language-c"><span class="token keyword">double</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
<span class="token keyword">double</span> balance<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
p <span class="token operator">=</span> balance<span class="token punctuation">;</span>
</code></pre> 
<p>使用数组名作为常量指针是合法的，反之亦然。因此，<code>*(balance + 4) </code>是一种访问 <code>balance[4] </code>数据的合法方式。</p> 
<p>一旦把第一个元素的地址存储在 p 中，就可以使用<code> *p</code>、<code>*(p+1)</code>、<code>*(p+2)</code> 等来访问数组元素。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 带有 5 个元素的整型数组 */</span>
   <span class="token keyword">double</span> balance<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1000.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">,</span> <span class="token number">17.0</span><span class="token punctuation">,</span> <span class="token number">50.0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">double</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span> 
   p <span class="token operator">=</span> balance<span class="token punctuation">;</span> 
   <span class="token comment">/* 输出数组中每个元素的值 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"使用指针的数组值\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*(p + %d) : %f\n"</span><span class="token punctuation">,</span>  i<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
   <span class="token function">printf</span><span class="token punctuation">(</span> <span class="token string">"使用 balance 作为地址的数组值\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*(balance + %d) : %f\n"</span><span class="token punctuation">,</span>  i<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>balance <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
使用指针的数组值
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1000.000000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">2.000000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">3.400000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">17.000000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">50.000000</span>
使用 balance 作为地址的数组值
<span class="token operator">*</span><span class="token punctuation">(</span>balance <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1000.000000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>balance <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">2.000000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>balance <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">3.400000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>balance <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">17.000000</span>
<span class="token operator">*</span><span class="token punctuation">(</span>balance <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">50.000000</span>
</code></pre> 
<p>在上面的实例中，p 是一个指向 double 型的指针，这意味着它可以存储一个 double 类型的变量。一旦我们有了 p 中的地址，<code>*p </code>将给出存储在 p 中相应地址的值</p> 
<h4><a id="136__393"></a>1.3.6 指向指针的指针</h4> 
<p><code>指向指针的指针</code>是一种多级间接寻址的形式，或者说是一个<code>指针链</code>。通常，一个指针包含一个变量的地址。当我们定义一个指向指针的指针时，第一个指针包含了第二个指针的地址，第二个指针指向包含实际值的位置。<br> <img src="https://images2.imgbox.com/9a/13/jFRJxYF3_o.png" alt="在这里插入图片描述"></p> 
<p>一个指向指针的指针变量必须如下声明，即在变量名前放置<code>两个星号</code>。例如，下面声明了一个指向 int 类型指针的指针：<br> <code>int **var;</code><br> 当一个目标值被一个指针间接指向到另一个指针时，访问这个值需要使用两个星号运算符，如下面实例所示：<br> <img src="https://images2.imgbox.com/d5/3b/gqSZY8kG_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">int</span>  V<span class="token punctuation">;</span>
   <span class="token keyword">int</span>  <span class="token operator">*</span>Pt1<span class="token punctuation">;</span>
   <span class="token keyword">int</span>  <span class="token operator">*</span><span class="token operator">*</span>Pt2<span class="token punctuation">;</span>
 
   V <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
 
   <span class="token comment">/* 获取 V 的地址 */</span>
   Pt1 <span class="token operator">=</span> <span class="token operator">&amp;</span>V<span class="token punctuation">;</span>
 
   <span class="token comment">/* 使用运算符 &amp; 获取 Pt1 的地址 */</span>
   Pt2 <span class="token operator">=</span> <span class="token operator">&amp;</span>Pt1<span class="token punctuation">;</span>
 
   <span class="token comment">/* 使用 pptr 获取值 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"var = %d\n"</span><span class="token punctuation">,</span> V <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Pt1 = %p\n"</span><span class="token punctuation">,</span> Pt1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*Pt1 = %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>Pt1 <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Pt2 = %p\n"</span><span class="token punctuation">,</span> Pt2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**Pt2 = %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>Pt2<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
var <span class="token operator">=</span> <span class="token number">100</span>
Pt1 <span class="token operator">=</span> <span class="token number">0x7ffee2d5e8d8</span>
<span class="token operator">*</span>Pt1 <span class="token operator">=</span> <span class="token number">100</span>
Pt2 <span class="token operator">=</span> <span class="token number">0x7ffee2d5e8d0</span>
<span class="token operator">*</span><span class="token operator">*</span>Pt2 <span class="token operator">=</span> <span class="token number">100</span>
</code></pre> 
<h3><a id="14__435"></a>1.4 函数和指针关系</h3> 
<h4><a id="141__436"></a>1.4.1 传递指针给函数</h4> 
<p>C 语言允许传递指针给函数，只需要简单地 <strong><code>声明函数参数为指针类型</code></strong> 即可。</p> 
<p>下面的实例中，我们传递一个无符号的 long 型指针给函数，并在函数内改变这个值：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
 
<span class="token keyword">void</span> <span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token operator">*</span>par<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">unsigned</span> <span class="token keyword">long</span> sec<span class="token punctuation">;</span>
   <span class="token function">getSeconds</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>sec <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">/* 输出实际值 */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Number of seconds: %ld\n"</span><span class="token punctuation">,</span> sec <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token operator">*</span>par<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 获取当前的秒数 */</span>
   <span class="token operator">*</span>par <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span> <span class="token constant">NULL</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
Number of seconds <span class="token operator">:</span><span class="token number">1294450468</span>
</code></pre> 
<p>能接受指针作为参数的函数，也能接受数组作为参数，如下所示：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
 
<span class="token comment">/* 函数声明 */</span>
<span class="token keyword">double</span> <span class="token function">getAverage</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 带有 5 个元素的整型数组  */</span>
   <span class="token keyword">int</span> balance<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">double</span> avg<span class="token punctuation">;</span>
 
   <span class="token comment">/* 传递一个指向数组的指针作为参数 */</span>
   avg <span class="token operator">=</span> <span class="token function">getAverage</span><span class="token punctuation">(</span> balance<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span>
 
   <span class="token comment">/* 输出返回值  */</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Average value is: %f\n"</span><span class="token punctuation">,</span> avg <span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token function">getAverage</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">int</span>    i<span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      
  <span class="token keyword">double</span> avg<span class="token punctuation">;</span>          
 
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    sum <span class="token operator">+=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 
  avg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>sum <span class="token operator">/</span> size<span class="token punctuation">;</span>
 
  <span class="token keyword">return</span> avg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
Average value is<span class="token operator">:</span> <span class="token number">214.40000</span>
</code></pre> 
<h4><a id="142__504"></a>1.4.2 从函数返回指针</h4> 
<p>类似地，C 允许从函数返回指针。为了做到这点，必须声明一个返回指针的函数，如下所示：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token operator">*</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>另外，C 语言不支持在调用函数时返回局部变量的地址，除非定义局部变量为 <code>static 变量</code></p> 
<p>现在，让我们来看下面的函数，它会生成 10 个随机数，并使用表示指针的数组名（即第一个数组元素的地址）来返回它们，具体如下：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span> </span>
 
<span class="token comment">/* 要生成和返回随机数的函数 */</span>
<span class="token keyword">int</span> <span class="token operator">*</span> <span class="token function">getRandom</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">static</span> <span class="token keyword">int</span>  r<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
 
   <span class="token comment">/* 设置种子 */</span>
   <span class="token function">srand</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">)</span><span class="token function">time</span><span class="token punctuation">(</span> <span class="token constant">NULL</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
      r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
   <span class="token keyword">return</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">/* 要调用上面定义函数的主函数 */</span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token comment">/* 一个指向整数的指针 */</span>
   <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
 
   p <span class="token operator">=</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
       <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*(p + [%d]) : %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果：
<span class="token number">1523198053</span>
<span class="token number">1187214107</span>
<span class="token number">1108300978</span>
<span class="token number">430494959</span>
<span class="token number">1421301276</span>
<span class="token number">930971084</span>
<span class="token number">123250484</span>
<span class="token number">106932140</span>
<span class="token number">1604461820</span>
<span class="token number">149169022</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1523198053</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1187214107</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1108300978</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">430494959</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1421301276</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">930971084</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">123250484</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">106932140</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1604461820</span>
<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">149169022</span>
</code></pre> 
<h4><a id="143__577"></a>1.4.3 函数指针</h4> 
<p><code>函数指针</code>是指向函数的指针变量。<br> 通常我们说的指针变量是指向一个整型、字符型或数组等变量，而函数指针是指向函数。<br> 函数指针可以像一般函数一样，用于调用函数、传递参数。</p> 
<p>函数指针变量的声明：</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>fun_ptr<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  声明一个指向同样参数、返回值的函数指针类型
</code></pre> 
<p>以下实例声明了函数指针变量 p，指向函数 max：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token keyword">int</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">&gt;</span> y <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* p 是函数指针 */</span>
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span> max<span class="token punctuation">;</span> <span class="token comment">// &amp;可以省略</span>
    <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">;</span>	
 
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入三个数字:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span> a<span class="token punctuation">,</span> <span class="token operator">&amp;</span> b<span class="token punctuation">,</span> <span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">/* 与直接调用函数等价，d = max(max(a, b), c) */</span>
    d <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token function">p</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"最大的数字是: %d\n"</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果如下：
请输入三个数字<span class="token operator">:</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
最大的数字是<span class="token operator">:</span> <span class="token number">3</span>
</code></pre> 
<h4><a id="144__618"></a>1.4.4 回调函数</h4> 
<p>函数指针作为某个函数的参数，函数指针变量可以作为某个函数的参数来使用的，<code>回调函数</code>就是一个通过函数指针调用的函数。<br> 简单讲：回调函数是由别人的函数执行时调用你实现的函数。</p> 
<p>实例中 populate_array() 函数定义了三个参数，其中第三个参数是函数的指针，通过该函数来设置数组的值。</p> 
<p>实例中我们定义了回调函数 <code>getNextRandomValue()</code>，它返回一个随机值，它作为一个函数指针传递给 populate_array() 函数。</p> 
<p>populate_array() 将调用 10 次回调函数，并将回调函数的返回值赋值给数组。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span>  </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
 
<span class="token keyword">void</span> <span class="token function">populate_array</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>array<span class="token punctuation">,</span> <span class="token class-name">size_t</span> arraySize<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>getNextValue<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arraySize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getNextValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 获取随机值</span>
<span class="token keyword">int</span> <span class="token function">getNextRandomValue</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> myarray<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">/* getNextRandomValue 不能加括号，否则无法编译，因为加上括号之后相当于传入此参数时传入了 int , 而不是函数指针*/</span>
    <span class="token function">populate_array</span><span class="token punctuation">(</span>myarray<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> getNextRandomValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> myarray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

结果如下：
<span class="token number">16807</span> <span class="token number">282475249</span> <span class="token number">1622650073</span> <span class="token number">984943658</span> <span class="token number">1144108930</span> <span class="token number">470211272</span> <span class="token number">101027544</span> <span class="token number">1457850878</span> <span class="token number">1458777923</span> <span class="token number">2007237709</span> 
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e1701030c214782a85e0b0e431df1622/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">6个强大且好看的AI绘画网站，各种美女随便生成</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e2d2330a6c8040b2c2c7922d4203bfa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言课设--航班订票系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>