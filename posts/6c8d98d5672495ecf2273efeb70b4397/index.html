<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【QT】多元素控件 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6c8d98d5672495ecf2273efeb70b4397/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【QT】多元素控件">
  <meta property="og:description" content="多元素控件 多元素控件1. List Widget2. Table Widget3. Tree Widget 多元素控件 Qt 中提供的多元素控件有:
QListWidgetQListViewQTableWidgetQTableViewQTreeWidgetQTreeView xxWidget 和 xxView 之间的区别，以 QTableWidget 和 QTableView 为例：
QTableView 是基于 MVC 设计的控件. QTableView ⾃⾝不持有数据. 使⽤ QTableView 的时候需要⽤⼾创建⼀个 Model 对象 (⽐如 QStandardModel ), 并且把 Model 和 QTableView 关联起来. 后续修改 Model 中的数据就会影响 QTableView 的显⽰; 修改 QTableView 的显⽰也会影响到 Model 中的数据(双向绑定).QTableWidget 则是 QTableView 的⼦类, 对 Model 进⾏了封装. 不需要用户手动创建 Model 对象, 直接就可以往 QTableWidget 中添加数据了. 1. List Widget 使用 QListWidget 能够显示⼀个纵向的列表. 形如:
核心属性：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-08T10:58:19+08:00">
    <meta property="article:modified_time" content="2024-07-08T10:58:19+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【QT】多元素控件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>多元素控件</h4> 
 <ul><li><a href="#_3" rel="nofollow">多元素控件</a></li><li><ul><li><a href="#1_List_Widget_19" rel="nofollow">1. List Widget</a></li><li><a href="#2_Table_Widget_122" rel="nofollow">2. Table Widget</a></li><li><a href="#3_Tree_Widget_254" rel="nofollow">3. Tree Widget</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_3"></a>多元素控件</h2> 
<p>Qt 中提供的多元素控件有:</p> 
<ul><li>QListWidget</li><li>QListView</li><li>QTableWidget</li><li>QTableView</li><li>QTreeWidget</li><li>QTreeView</li></ul> 
<p>xxWidget 和 xxView 之间的区别，以 QTableWidget 和 QTableView 为例：</p> 
<ul><li>QTableView 是基于 MVC 设计的控件. QTableView ⾃⾝不持有数据. 使⽤ QTableView 的时候需要⽤⼾创建⼀个 Model 对象 (⽐如 QStandardModel ), 并且把 Model 和 QTableView 关联起来. 后续修改 Model 中的数据就会影响 QTableView 的显⽰; 修改 QTableView 的显⽰也会影响到 Model 中的数据(双向绑定).</li><li>QTableWidget 则是 QTableView 的⼦类, 对 Model 进⾏了封装. 不需要用户手动创建 Model 对象, 直接就可以往 QTableWidget 中添加数据了.</li></ul> 
<h3><a id="1_List_Widget_19"></a>1. List Widget</h3> 
<p>使用 QListWidget 能够显示⼀个纵向的列表. 形如:</p> 
<p><img src="https://images2.imgbox.com/14/59/rz1x79yg_o.png" alt="在这里插入图片描述"></p> 
<p>核心属性：</p> 
<p><img src="https://images2.imgbox.com/d6/15/9SYGMSMM_o.png" alt="在这里插入图片描述"></p> 
<p>核心方法：</p> 
<p><img src="https://images2.imgbox.com/ab/59/haXsplvW_o.png" alt="在这里插入图片描述"></p> 
<p>核心信号：</p> 
<p><img src="https://images2.imgbox.com/9e/f0/J5F2ncxK_o.png" alt="在这里插入图片描述"></p> 
<p>在上述介绍中，涉及到⼀个关键的类，QListWidgetItem，这个类表⽰ QListWidget 中的⼀个元素，核心方法如下, 本质上就是⼀个 “⽂本+图标” 构成的。</p> 
<p><img src="https://images2.imgbox.com/b6/77/Fb7qc4AD_o.png" alt="在这里插入图片描述"></p> 
<p>代码示例：使用 ListWidget</p> 
<p>1）在界⾯上创建⼀个 ListView，右键 =&gt; 变形为 =&gt; ListWidget ，再创建⼀个 lineEdit 和 两个按钮.</p> 
<p>注意: ListWidget 是 ListView 的⼦类，功能⽐ ListView 更丰富，咱们使⽤ ListWidget 即可.</p> 
<p><img src="https://images2.imgbox.com/44/01/xOe1ejiW_o.png" alt="在这里插入图片描述"></p> 
<p>2）编写 widget.cpp, 在构造函数中添加初始元素</p> 
<pre><code>			Widget::Widget(QWidget *parent)
			    : QWidget(parent)
			    , ui(new Ui::Widget)
			{
			    ui-&gt;setupUi(this);
			
			    ui-&gt;listWidget-&gt;addItem("C++");
			    ui-&gt;listWidget-&gt;addItem("Java");
			    ui-&gt;listWidget-&gt;addItem("Python");
			}
</code></pre> 
<p>3）编写 listWidget 的 slot 函数</p> 
<p>此处需要判定 current 和 previous ⾮空. 初始情况下是没有元素选中的，就导致这俩指针可能是 NULL；这⾥需要给 widget.h 前⾯加上 #include &lt; QListWidgetItem &gt;</p> 
<pre><code>			void Widget::on_listWidget_currentItemChanged(QListWidgetItem *current, QListWidgetItem *previous)
			{
			    if(current &amp;&amp; previous){
			        qDebug() &lt;&lt; "当前选中: " &lt;&lt; current-&gt;text()
			                 &lt;&lt; "之前选中: " &lt;&lt; previous-&gt;text();
			    }
			}
</code></pre> 
<p>4）编写按钮的 slot 函数</p> 
<pre><code>			void Widget::on_pushButton_clicked()
			{
			    // 获取到输入框的内容
			    const QString&amp; text = ui-&gt;lineEdit-&gt;text();
			    if(text.isEmpty()){
			        return;
			    }
			    ui-&gt;listWidget-&gt;addItem(text);
			}
			
			void Widget::on_pushButton_2_clicked()
			{
			    // 获取当前被选中的元素
			    int row = ui-&gt;listWidget-&gt;currentRow();
			    // 删除这一行
			    ui-&gt;listWidget-&gt;takeItem(row);
			}
</code></pre> 
<h3><a id="2_Table_Widget_122"></a>2. Table Widget</h3> 
<p>使⽤ QTableWidget 表⽰⼀个表格控件。⼀个表格中包含若⼲⾏，每⼀⾏⼜包含若⼲列。表格中的每个单元格，是⼀个 QTableWidgetItem 对象。</p> 
<p>QTableWidget 核心方法：</p> 
<p><img src="https://images2.imgbox.com/ed/e8/RXmOIZiw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/0a/1c/G3KAfxhG_o.png" alt="在这里插入图片描述"></p> 
<p>QTableWidgetItem 核心信号：</p> 
<p><img src="https://images2.imgbox.com/8f/c6/bUD16ywe_o.png" alt="在这里插入图片描述"></p> 
<p>QTableWidgetItem 核心方法：</p> 
<p><img src="https://images2.imgbox.com/21/fc/OZKg4IJd_o.png" alt="在这里插入图片描述"></p> 
<p>代码示例：使用 QTableWidget</p> 
<p>1）在界⾯上创建 QTableWidget 和 三个按钮，⼀个输⼊框</p> 
<p>注意：QTableWidget 是 QTableView 的⼦类，功能⽐ QTableView 更丰富. 咱们使⽤ QTableWidget 即可.</p> 
<p><img src="https://images2.imgbox.com/9c/56/sMmNG6wd_o.png" alt="在这里插入图片描述"></p> 
<p>2）编写 widget.cpp 构造函数，构造表格中的初始数据</p> 
<pre><code>			Widget::Widget(QWidget *parent)
			    : QWidget(parent)
			    , ui(new Ui::Widget)
			{
			    ui-&gt;setupUi(this);
			
			    // 创建 3 行
			    ui-&gt;tableWidget-&gt;insertRow(0);
			    ui-&gt;tableWidget-&gt;insertRow(1);
			    ui-&gt;tableWidget-&gt;insertRow(2);
			
			    // 创建 3 列
			    ui-&gt;tableWidget-&gt;insertColumn(0);
			    ui-&gt;tableWidget-&gt;insertColumn(1);
			    ui-&gt;tableWidget-&gt;insertColumn(2);
			
			    // 给 3 列设置列名
			    ui-&gt;tableWidget-&gt;setHorizontalHeaderItem(0, new QTableWidgetItem("学号"));
			    ui-&gt;tableWidget-&gt;setHorizontalHeaderItem(1, new QTableWidgetItem("姓名"));
			    ui-&gt;tableWidget-&gt;setHorizontalHeaderItem(2, new QTableWidgetItem("年龄"));
			
			    // 设置初始数据
			    ui-&gt;tableWidget-&gt;setItem(0, 0, new QTableWidgetItem("1001"));
			    ui-&gt;tableWidget-&gt;setItem(0, 1, new QTableWidgetItem("张三"));
			    ui-&gt;tableWidget-&gt;setItem(0, 2, new QTableWidgetItem("20"));
			
			    ui-&gt;tableWidget-&gt;setItem(1, 0, new QTableWidgetItem("1002"));
			    ui-&gt;tableWidget-&gt;setItem(1, 1, new QTableWidgetItem("李四"));
			    ui-&gt;tableWidget-&gt;setItem(1, 2, new QTableWidgetItem("21"));
			
			    ui-&gt;tableWidget-&gt;setItem(2, 0, new QTableWidgetItem("1003"));
			    ui-&gt;tableWidget-&gt;setItem(2, 1, new QTableWidgetItem("王五"));
			    ui-&gt;tableWidget-&gt;setItem(2, 2, new QTableWidgetItem("22"));
			}
</code></pre> 
<p><img src="https://images2.imgbox.com/10/81/wmvTf0PC_o.png" alt="在这里插入图片描述"></p> 
<p>3）编写按钮的 slot 函数</p> 
<pre><code>			void Widget::on_pushButton_addRow_clicked()
			{
			    // 获取到行数
			    int row = ui-&gt;tableWidget-&gt;rowCount();
			    // 插入新行
			    ui-&gt;tableWidget-&gt;insertRow(row);
			}
			
			void Widget::on_pushButton_delRow_clicked()
			{
			    // 获取到选中行
			    int row = ui-&gt;tableWidget-&gt;currentRow();
			    // 删除行
			    ui-&gt;tableWidget-&gt;removeRow(row);
			}
			
			
			
			void Widget::on_pushButton_addCol_clicked()
			{
			    // 获取到列数
			    int col = ui-&gt;tableWidget-&gt;columnCount();
			    // 插入新列
			    ui-&gt;tableWidget-&gt;insertColumn(col);
			    // 设置列名
			    const QString&amp; name = ui-&gt;lineEdit-&gt;text();
			    ui-&gt;tableWidget-&gt;setHorizontalHeaderItem(col, new QTableWidgetItem(name));
			}
			
			void Widget::on_pushButton_delCol_clicked()
			{
			    // 获取到选中列
			    int col = ui-&gt;tableWidget-&gt;currentColumn();
			    // 删除
			    ui-&gt;tableWidget-&gt;removeColumn(col);
			}
</code></pre> 
<p>默认情况下，单元格中的内容直接就是可编辑的。如果不想让⽤⼾编辑, 可以设置</p> 
<pre><code>	ui-&gt;tableWidget-&gt;setEditTriggers(QAbstractItemView::NoEditTriggers);
</code></pre> 
<h3><a id="3_Tree_Widget_254"></a>3. Tree Widget</h3> 
<p>使⽤ QTreeWidget 表⽰⼀个树形控件。里面的每个元素, 都是⼀个 QTreeWidgetItem , 每个 QTreeWidgetItem 可以包含多个⽂本和图标, 每个⽂本/图标为⼀个 列.</p> 
<p>可以给 QTreeWidget 设置顶层节点(顶层节点可以有多个), 然后再给顶层节点添加⼦节点, 从而构成树形结构.</p> 
<p>QTreeWidget 核心方法：</p> 
<p><img src="https://images2.imgbox.com/be/9e/reROa1qL_o.png" alt="在这里插入图片描述"></p> 
<p>QTreeWidget 核心信号：</p> 
<p><img src="https://images2.imgbox.com/18/6f/JZ1wQYFA_o.png" alt="在这里插入图片描述"></p> 
<p>QTreeWidgetItem 核心属性：</p> 
<p><img src="https://images2.imgbox.com/c7/94/mXJOawgi_o.png" alt="在这里插入图片描述"></p> 
<p>QTreeWidgetItem 核心方法：</p> 
<p><img src="https://images2.imgbox.com/9f/7a/daTn2cmw_o.png" alt="在这里插入图片描述"></p> 
<p>代码示例：使用 QTreeWidget</p> 
<p>1）在界⾯上创建⼀个 TreeView , 右键 =&gt; 变形为 =&gt; TreeWidget , 再创建⼀个 lineEdit 和 两个按钮.</p> 
<p>注意: TreeWidget 是 TreeView 的⼦类, 功能⽐ TreeView 更丰富. 咱们使⽤ TreeWidget 即可.</p> 
<p><img src="https://images2.imgbox.com/83/d9/ezhMbyEq_o.png" alt="在这里插入图片描述"></p> 
<p>2）编写代码, 构造初始数据</p> 
<pre><code>			Widget::Widget(QWidget *parent)
			    : QWidget(parent)
			    , ui(new Ui::Widget)
			{
			    ui-&gt;setupUi(this);
			
			    ui-&gt;treeWidget-&gt;setHeaderLabel("动物");
			
			    QTreeWidgetItem* item1 = new QTreeWidgetItem();
			    item1-&gt;setText(0, "猫");
			    ui-&gt;treeWidget-&gt;addTopLevelItem(item1);
			
			    QTreeWidgetItem* item2 = new QTreeWidgetItem();
			    item2-&gt;setText(0, "狗");
			    ui-&gt;treeWidget-&gt;addTopLevelItem(item2);
			
			    QTreeWidgetItem* item3 = new QTreeWidgetItem();
			    item3-&gt;setText(0, "鸟");
			    ui-&gt;treeWidget-&gt;addTopLevelItem(item3);
			}
</code></pre> 
<p><img src="https://images2.imgbox.com/88/f2/Rn1LUO8c_o.png" alt="在这里插入图片描述"></p> 
<p>3）编写代码, 实现按钮的 slot 函数</p> 
<pre><code>			void Widget::on_pushButton_clicked()
			{
			    // 获取输入框内容
			    const QString&amp; text = ui-&gt;lineEdit-&gt;text();
			    if(text.isEmpty()){
			        return;
			    }
			
			    // 添加到顶层节点中
			    QTreeWidgetItem* item = new QTreeWidgetItem();
			    item-&gt;setText(0, text);
			    ui-&gt;treeWidget-&gt;addTopLevelItem(item);
			}
			
			void Widget::on_pushButton_2_clicked()
			{
			    // 获取输入框内容
			    const QString&amp; text = ui-&gt;lineEdit-&gt;text();
			    if(text.isEmpty()){
			        return;
			    }
			
			    // 获取到当前选中元素
			    QTreeWidgetItem* currentItem = ui-&gt;treeWidget-&gt;currentItem();
			    if(currentItem == NULL){
			        return;
			    }
			
			    // 构造新的 item
			    QTreeWidgetItem* newItem = new QTreeWidgetItem();
			    newItem-&gt;setText(0, text);
			
			    // 添加 item 到选中节点
			    currentItem-&gt;addChild(newItem);
			
			    // 展开父节点
			    currentItem-&gt;setExpanded(true);
			}
			
			void Widget::on_pushButton_3_clicked()
			{
			    // 获取到当前选中节点
			    QTreeWidgetItem* currentItem = ui-&gt;treeWidget-&gt;currentItem();
			    if(currentItem == NULL){
			        return;
			    }
			
			    // 获取当前节点的父节点
			    QTreeWidgetItem* parent = currentItem-&gt;parent();
			    if(parent == NULL){
			        // 如果是顶层节点
			        int index = ui-&gt;treeWidget-&gt;indexOfTopLevelItem(currentItem);
			        ui-&gt;treeWidget-&gt;takeTopLevelItem(index);
			    }
			    else{
			        // 非顶层节点
			        parent-&gt;removeChild(currentItem);
			    }
			}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4a1df1e3c6022537659d5ddbafbd443a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Oracle-查询表空间使用率很慢</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f6f48434d1205b662b6cddaa6166a864/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">搭建纯净的SpringBoot工程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>