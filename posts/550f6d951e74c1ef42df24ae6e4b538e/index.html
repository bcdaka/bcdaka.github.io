<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>list模拟实现【C&#43;&#43;】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/550f6d951e74c1ef42df24ae6e4b538e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="list模拟实现【C&#43;&#43;】">
  <meta property="og:description" content="文章目录 全部的实现代码放在了文章末尾准备工作包含头文件定义命名空间类的成员变量为什么节点类是用struct而不是class呢？为什么要写get_head_node? 迭代器迭代器在list类里的实例化和重命名普通迭代器operator-&gt;()的作用是什么？ const迭代器反向迭代器迭代器的获取 构造函数默认构造使用n个val构造迭代器区间构造解决迭代器区间构造 和 用n个val构造的冲突initializer_list构造拷贝构造 析构函数swap赋值运算符重载erase删除pos迭代器指向的节点为什么要返回next？ 删除迭代器区间 insert在迭代器pos之前插入一个节点为什么要返回newnode?在迭代器pos之前插入一个迭代器区间的数据 push_backpush_frontpop_frontpop_backsizeemptybackfrontassignresizeclear全部代码 全部的实现代码放在了文章末尾 准备工作 创建两个文件，一个头文件mylist.hpp，一个源文件test.cpp
【因为模板的声明和定义不能分处于不同的文件中，所以把成员函数的声明和定义放在了同一个文件mylist.hpp中】
mylist.hpp：存放包含的头文件，命名空间的定义，成员函数和命名空间中的函数的定义
test.cpp：存放main函数，以及测试代码
包含头文件 iostream：用于输入输出
assert.h：用于使用报错函数assert
定义命名空间 在文件mylist.hpp中定义上一个命名空间mylist
把list类和它的成员函数放进命名空间封装起来，防止与包含的头文件中的函数/变量重名的冲突问题
类的成员变量 参考了stl源码中的list的实现，stl中list的底层链表是双向带头循环链表
【可以看我这篇文章了解双向带头循环链表的实现：链表的极致——带头双向循环链表】
成员变量只有一个，就是指向双向带头循环链表的头节点的指针。
节点类：
为什么节点类是用struct而不是class呢？ 因为节点类里面的成员变量在实现list的时候需要经常访问，所以需要节点类的成员变量是公有的【使用友元也可以，但是比较麻烦】
struct的默认访问权限就是公有，不用加访问限定符了，stl中实现的节点类也是struct
class的默认访问权限是私有的
list类：
为什么要写get_head_node? 因为插入节点之前必须要有头节点
所以把创建初始头节点的操作写成了一个函数，用于
所有构造函数插入节点之前进行申请头节点
迭代器 因为list存储数据的方式是创建一个一个的节点存储数据
所以存储数据的空间不是连续的，所以不能直接用指针作为迭代器
因为指向一个节点的指针直接&#43;&#43;,是不一定能指向下一个节点的
所以要把迭代器实现成一个类，这样才可以正确地支持&#43;&#43;，- -，*等操作
迭代器在list类里的实例化和重命名 普通迭代器 template&lt;class T, class R, class F&gt; struct Iterator { 把自己的类型重命名一下 typedef Iterator&lt;T, R, F&gt; Self; 成员变量的类型是 双向带头循环链表的节点类型 listnode&lt;T&gt;* _n; Iterator(listnode&lt;T&gt;*l=nullptr) 构造函数 { _n = l; } Self&amp; operator&#43;&#43;()前置&#43;&#43; { &#43;&#43;就是指向下一个节点 _n = _n-&gt;_next; return *this; } Self operator&#43;&#43;(int) 后置&#43;&#43; { Self tmp =*this; 先记录一下&#43;&#43;之前的值 _n = _n-&gt;_next; 再&#43;&#43; return tmp; } Self&amp; operator--() 前置-- { --就是指向上一个节点 _n = _n-&gt;_prev; return *this; } Self operator--(int) 后置-- { Self tmp = *this; 先记录一下--之前的值 _n = _n-&gt;_prev; 再-- return tmp; } R operator*()const { 类比指针 *就是获取 节点中存储的数据 return _n-&gt;_data; } F operator-&gt;()const { 返回 节点中 存储数据的成员变量的 地址 return &amp;(_n-&gt;_data); } bool operator!">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-17T21:53:14+08:00">
    <meta property="article:modified_time" content="2024-07-17T21:53:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">list模拟实现【C&#43;&#43;】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">全部的实现代码放在了文章末尾</a></li><li><a href="#_4" rel="nofollow">准备工作</a></li><li><ul><li><a href="#_16" rel="nofollow">包含头文件</a></li><li><a href="#_24" rel="nofollow">定义命名空间</a></li><li><a href="#_31" rel="nofollow">类的成员变量</a></li><li><ul><li><a href="#structclass_40" rel="nofollow">为什么节点类是用struct而不是class呢？</a></li><li><a href="#get_head_node_53" rel="nofollow">为什么要写get_head_node?</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_61" rel="nofollow">迭代器</a></li><li><ul><li><a href="#list_70" rel="nofollow">迭代器在list类里的实例化和重命名</a></li><li><a href="#_74" rel="nofollow">普通迭代器</a></li><li><ul><li><a href="#operator_142" rel="nofollow">operator-&gt;()的作用是什么？</a></li></ul> 
   </li><li><a href="#const_153" rel="nofollow">const迭代器</a></li><li><a href="#_169" rel="nofollow">反向迭代器</a></li><li><a href="#_237" rel="nofollow">迭代器的获取</a></li></ul> 
  </li><li><a href="#_297" rel="nofollow">构造函数</a></li><li><ul><li><a href="#_299" rel="nofollow">默认构造</a></li><li><a href="#nval_305" rel="nofollow">使用n个val构造</a></li><li><a href="#_310" rel="nofollow">迭代器区间构造</a></li><li><a href="#____nval_314" rel="nofollow">解决迭代器区间构造 和 用n个val构造的冲突</a></li><li><a href="#initializer_list_335" rel="nofollow">initializer_list构造</a></li><li><a href="#_349" rel="nofollow">拷贝构造</a></li></ul> 
  </li><li><a href="#_354" rel="nofollow">析构函数</a></li><li><a href="#swap_360" rel="nofollow">swap</a></li><li><a href="#_380" rel="nofollow">赋值运算符重载</a></li><li><a href="#erase_404" rel="nofollow">erase</a></li><li><ul><li><a href="#pos_406" rel="nofollow">删除pos迭代器指向的节点</a></li><li><ul><li><a href="#next_412" rel="nofollow">为什么要返回next？</a></li></ul> 
   </li><li><a href="#_424" rel="nofollow">删除迭代器区间</a></li></ul> 
  </li><li><a href="#insert_431" rel="nofollow">insert</a></li><li><ul><li><a href="#pos_433" rel="nofollow">在迭代器pos之前插入一个节点</a></li><li><a href="#newnode_439" rel="nofollow">为什么要返回newnode?</a></li><li><a href="#pos_448" rel="nofollow">在迭代器pos之前插入一个迭代器区间的数据</a></li></ul> 
  </li><li><a href="#push_back_461" rel="nofollow">push_back</a></li><li><a href="#push_front_474" rel="nofollow">push_front</a></li><li><a href="#pop_front_488" rel="nofollow">pop_front</a></li><li><a href="#pop_back_502" rel="nofollow">pop_back</a></li><li><a href="#size_516" rel="nofollow">size</a></li><li><a href="#empty_522" rel="nofollow">empty</a></li><li><a href="#back_530" rel="nofollow">back</a></li><li><a href="#front_536" rel="nofollow">front</a></li><li><a href="#assign_541" rel="nofollow">assign</a></li><li><a href="#resize_547" rel="nofollow">resize</a></li><li><a href="#clear_553" rel="nofollow">clear</a></li><li><a href="#_563" rel="nofollow">全部代码</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>全部的实现代码放在了文章末尾</h2> 
<h2><a id="_4"></a>准备工作</h2> 
<p>创建两个文件，一个头文件<code>mylist.hpp</code>，一个源文件<code>test.cpp</code></p> 
<p>【因为模板的<mark>声明和定义<code>不能</code>分处于不同的文件中</mark>，所以把成员函数的声明和定义放在了同一个文件<code>mylist.hpp</code>中】</p> 
<ol><li> <p>mylist.hpp：存放包含的头文件，命名空间的定义，成员函数和命名空间中的函数的定义</p> </li><li> <p>test.cpp：存放main函数，以及测试代码</p> </li></ol> 
<hr> 
<h3><a id="_16"></a>包含头文件</h3> 
<ol><li> <p>iostream：用于输入输出</p> </li><li> <p>assert.h：用于使用报错函数assert</p> </li></ol> 
<hr> 
<h3><a id="_24"></a>定义命名空间</h3> 
<p>在文件<code>mylist.hpp</code>中定义上一个命名空间<code>mylist</code><br> 把list类和它的成员函数<mark>放进命名空间封装起来</mark>，防止与包含的头文件中的函数/变量重名的冲突问题</p> 
<hr> 
<h3><a id="_31"></a>类的成员变量</h3> 
<p><mark>参考了stl源码中的list的实现，stl中list的底层链表是<code>双向带头循环链表</code></mark><br> 【可以看我这篇文章了解<code>双向带头循环链表</code>的实现：<a href="http://t.csdnimg.cn/QaHt4" rel="nofollow">链表的极致——带头双向循环链表</a>】<br> 成员变量只有一个，就是指向<code>双向带头循环链表</code>的头节点的指针。</p> 
<p><mark>节点类：</mark><br> <img src="https://images2.imgbox.com/9a/45/Pk1iy75e_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="structclass_40"></a>为什么节点类是用struct而不是class呢？</h4> 
<p>因为节点类里面的成员变量在实现list的时候需要<mark>经常访问</mark>，所以需要节点类的成员变量是公有的【<mark>使用友元也可以，但是比较麻烦</mark>】<br> struct的默认访问权限就是公有，不用加访问限定符了，<mark>stl中实现的节点类也是struct</mark><br> class的默认访问权限是私有的</p> 
<hr> 
<p><mark>list类：</mark><br> <img src="https://images2.imgbox.com/69/4e/5CdVSHg1_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="get_head_node_53"></a>为什么要写get_head_node?</h4> 
<p><mark>因为插入节点之前<code>必须</code>要有头节点</mark><br> 所以把创建初始头节点的操作写成了一个函数，用于<br> <mark>所有构造函数插入节点之前进行申请头节点</mark></p> 
<hr> 
<h2><a id="_61"></a>迭代器</h2> 
<p>因为list存储数据的方式是创建一个一个的节点存储数据<br> <mark>所以存储数据的空间<code>不是</code>连续的</mark>，所以<code>不能</code>直接用指针作为迭代器</p> 
<p>因为指向一个节点的指针直接++,是<code>不一定能</code>指向下一个节点的</p> 
<p>所以<code>要把迭代器实现成一个类</code>，这样才可以正确地支持++，- -，*等操作</p> 
<h3><a id="list_70"></a>迭代器在list类里的实例化和重命名</h3> 
<p><img src="https://images2.imgbox.com/7c/2f/XgSzT6Z5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_74"></a>普通迭代器</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">F</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">Iterator</span>
<span class="token punctuation">{<!-- --></span>
	把自己的类型重命名一下
	<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token punctuation">,</span> F<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>


	成员变量的类型是 双向带头循环链表的节点类型
	listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _n<span class="token punctuation">;</span>

	<span class="token function">Iterator</span><span class="token punctuation">(</span>listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span>l<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span> 构造函数
	<span class="token punctuation">{<!-- --></span>
		_n <span class="token operator">=</span> l<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>前置<span class="token operator">++</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">++</span>就是指向下一个节点
		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>  后置<span class="token operator">++</span>
	<span class="token punctuation">{<!-- --></span>
		Self tmp <span class="token operator">=</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>  先记录一下<span class="token operator">++</span>之前的值

		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>  再<span class="token operator">++</span>

		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  前置<span class="token operator">--</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token operator">--</span>就是指向上一个节点
		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> 后置<span class="token operator">--</span>
	<span class="token punctuation">{<!-- --></span>
		Self tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> 先记录一下<span class="token operator">--</span>之前的值

		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>  再<span class="token operator">--</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	R <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		 类比指针
		<span class="token operator">*</span>就是获取  节点中存储的数据
		<span class="token keyword">return</span> _n<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	F <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		返回  节点中 存储数据的成员变量的  地址
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_n<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span>obj<span class="token punctuation">)</span><span class="token keyword">const</span><span class="token operator">!</span><span class="token punctuation">[</span>在这里插入图片描述<span class="token punctuation">]</span><span class="token punctuation">(</span>https<span class="token operator">:</span><span class="token comment">//i-blog.csdnimg.cn/direct/f3d8c3b768b14a04a69d04a69c2d9829.png#pic_center)</span>

	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _n <span class="token operator">!=</span> obj<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">!=</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="operator_142"></a>operator-&gt;()的作用是什么？</h4> 
<p>为了实现：<br> 当节点中存储的数据是<code>自定义类型的变量</code>时，<mark>可以直接使用 迭代器-&gt;访问自定义类型中的成员</mark><br> 【原来访问需要调用两次-&gt;，<code>为了可读性，省略了一个-&gt;</code>】</p> 
<p>例<br> <img src="https://images2.imgbox.com/1b/cf/BHOiVobk_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="const_153"></a>const迭代器</h3> 
<p>const迭代器与普通迭代器的区别是什么？<br> 区别就只有==<code>不能</code>通过const迭代器改变节点中存储的数据==</p> 
<p>转换一下就是：</p> 
<ol><li><code>不能</code>使用迭代器的<code>operator*()</code>改变节点中存储的<code>数据</code>，即把<code>operator*()</code>的返回值改成<code>const T&amp;</code>就可以了</li><li><code>不能</code>使用迭代器的<code>operator-&gt;()</code>改变节点中存储的<code>数据的成员</code>，即把<code>operator-&gt;()</code>的返回值改成<code>const T*</code>就可以了</li></ol> 
<p>所以const迭代器与普通迭代器的区别就<mark>只有两个函数的返回值类型不同</mark>，所以增加两个模板参数：R和F</p> 
<p><code>普通迭代器</code>实例化时:<code>R就是T&amp;</code>，<code>F就是T*</code><br> <code>const迭代器</code>实例化：<code>R就是const T&amp;</code>，<code>F就是const T*</code></p> 
<hr> 
<h3><a id="_169"></a>反向迭代器</h3> 
<p>反向迭代器与普通迭代器的<code>实现上</code>的区别就是：<br> <code>普通</code>迭代器++是指向<code>下一个</code>节点<br> <code>反向</code>迭代器++是指向<code>上一个</code>节点<br> <code>普通</code>迭代器- -是指向<code>上一个</code>节点<br> <code>反向</code>迭代器- -是指向<code>下一个</code>节点</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">F</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">Reverse_iterator</span>
<span class="token punctuation">{<!-- --></span>
	把自己的类型重命名一下
	<span class="token keyword">typedef</span> Reverse_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token punctuation">,</span> F<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>

	成员变量的类型是 双向带头循环链表的节点类型
	listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _n<span class="token punctuation">;</span>


	<span class="token function">Reverse_iterator</span><span class="token punctuation">(</span>listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> l<span class="token punctuation">)</span> 构造函数
	<span class="token punctuation">{<!-- --></span>
		_n <span class="token operator">=</span> l<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		反向迭代器<span class="token operator">++</span>，是移动到  前  一个节点
		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Self tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		反向迭代器<span class="token operator">--</span>，是移动到  后  一个节点
		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Self <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Self tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	R <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _n<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	F <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_n<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _n<span class="token operator">!=</span>obj<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">!=</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h3><a id="_237"></a>迭代器的获取</h3> 
<pre><code class="prism language-cpp">iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	头节点的下一个节点 才是第一个节点
	<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span>修饰的对象只能调用<span class="token keyword">const</span>修饰的成员函数
const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	头节点的下一个节点 才是第一个节点
	<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	最后一个节点的下一个节点是  头节点
	因为是循环链表
	<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span>修饰的对象只能调用<span class="token keyword">const</span>修饰的成员函数
const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	反向迭代器的rend返回的是第一个节点的   前一个节点
	<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span>修饰的对象只能调用<span class="token keyword">const</span>修饰的成员函数
const_reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	反向迭代器的<span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>返回的是  最后一个节点
	最后一个节点是  头节点的前一个
	因为是循环链表
	<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

const_reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_297"></a>构造函数</h2> 
<h3><a id="_299"></a>默认构造</h3> 
<p><img src="https://images2.imgbox.com/41/bc/XsoCcwSH_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="nval_305"></a>使用n个val构造</h3> 
<p><img src="https://images2.imgbox.com/c4/89/tI1jtNq0_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="_310"></a>迭代器区间构造</h3> 
<p><img src="https://images2.imgbox.com/dc/90/LywN8gKG_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="____nval_314"></a>解决迭代器区间构造 和 用n个val构造的冲突</h3> 
<p>当重载了<code>迭代器区间构造</code>和<code>使用n个val构造</code>的时候<br> <mark>如果传入的<code>两个参数都是int类型</code>的话就会报错</mark></p> 
<p>为什么？<br> 因为在模板函数构成重载时，编译器会调用更合适的那一个<br> 什么叫更合适？<br> <mark>就是<code>不会</code>类型转</mark></p> 
<p>如果传入的<code>两个参数都是int类型</code>，那么调用的应该是<code>使用n个值构造</code>，因为没有int类型的迭代器</p> 
<p>但是<code>使用n个值构造</code>的第一个参数是size_t , <mark>int传进去要隐式类型转换</mark><br> 而调用<code>迭代器区间构造</code>，两个int的实参传进去，就会直接把<code>InputIterator</code>推导成int，<mark><code>不会</code>发生类型转换</mark>，所以编译器会调用<code>迭代器区间构造</code></p> 
<p>解决方法：<br> 再重载一个<code>使用n个值构造</code>的函数，把<mark>第一个参数改成int</mark>，这样根据<code>模板偏特化</code>，就会在都不类型转换时优先调用第一个参数特化成int的那个构造函数</p> 
<p><img src="https://images2.imgbox.com/ad/26/JdGlmt0y_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="initializer_list_335"></a>initializer_list构造</h3> 
<p>写了这个构造函数，<mark>就可以支持直接使用{}初始化了</mark><br> 例<br> <img src="https://images2.imgbox.com/12/c6/TBnCoCse_o.png" alt="在这里插入图片描述"></p> 
<p><code>initializer_list</code>是iostream库里面的自定义类型，它可以<code>直接接收{ }里面的值 进行初始化</code>，而且有迭代器</p> 
<p>所以可以直接使用迭代器循环+尾插进行对<code>list</code>的构造<br> <img src="https://images2.imgbox.com/07/f6/Brnyzusr_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="_349"></a>拷贝构造</h3> 
<p><img src="https://images2.imgbox.com/20/de/9fIMg8g2_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_354"></a>析构函数</h2> 
<p><img src="https://images2.imgbox.com/ee/83/erA1Ho8C_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="swap_360"></a>swap</h2> 
<p><mark>只需要交两个list对象的<code>头指针中存储的地址</code>就可以了</mark></p> 
<p>因为两个list对象都有头结点，交换了<code>头指针中存储的地址</code>，就相当于把这两个对象的头指针的指向交换了，<br> 而链表的所有节点都是由头节点出发去找到的</p> 
<p><img src="https://images2.imgbox.com/d9/e8/6LDY34hy_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	调用库里面的swap，交换头指针
	std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_head<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_head<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_380"></a>赋值运算符重载</h2> 
<pre><code class="prism language-cpp">list<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span>list obj<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">swap</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>为什么上面的两句代码就可以完成深拷贝呢？<br> 这是因为：</p> 
<p><mark>使用了传值传参，会在传参之前调用拷贝构造，再把拷贝构造出的临时对象作为参数传递进去</mark></p> 
<p>赋值运算符的左操作数，*this再与传入的临时对象obj交换，就<code>直接完成了拷贝</code></p> 
<p>在函数结束之后，存储在栈区的obj再函数结束之后，obj生命周期结束</p> 
<p><mark>obj调用析构函数，把指向的从*this那里交换来的不需要的空间销毁</mark></p> 
<hr> 
<h2><a id="erase_404"></a>erase</h2> 
<h3><a id="pos_406"></a>删除pos迭代器指向的节点</h3> 
<p><img src="https://images2.imgbox.com/bf/e2/BCWqQ6lW_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/59/6d/SWFlHUIn_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="next_412"></a>为什么要返回next？</h4> 
<p><mark>因为使用了erase之后的迭代器会失效，需要提供更新的方法</mark></p> 
<p>为什么使用了erase之后的迭代器会失效？</p> 
<p><mark>因为pos指向的节点erase之后，节点被释放了</mark></p> 
<p>stl库里面规定erase的返回值是<code>指向删除数据的下一个数据的迭代器</code>，下一个数据就是next指向的数据，所以返回next【<mark>没有接收返回值的迭代器，在检测较严格的编译器中，<code>不管指向的位置是否正确，都会禁止使用，使用了就报错</code></mark>】</p> 
<hr> 
<h3><a id="_424"></a>删除迭代器区间</h3> 
<p><img src="https://images2.imgbox.com/a7/d1/lzFowR26_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="insert_431"></a>insert</h2> 
<h3><a id="pos_433"></a>在迭代器pos之前插入一个节点</h3> 
<p><img src="https://images2.imgbox.com/a6/df/oiobFZdv_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/65/00/lrWFMKD9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="newnode_439"></a>为什么要返回newnode?</h3> 
<p><mark><code>list的迭代器</code>pos在使用完insert之后其实是<code>不会失效</code>的</mark></p> 
<p>但是为了与其他容器的nsert的返回值进行统一，所以也返回了<code>指向新插入的节点的迭代器</code></p> 
<hr> 
<h3><a id="pos_448"></a>在迭代器pos之前插入一个迭代器区间的数据</h3> 
<p><img src="https://images2.imgbox.com/7b/8a/pprlDY1l_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="push_back_461"></a>push_back</h2> 
<p><mark>复用insert即可</mark></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span>val<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="push_front_474"></a>push_front</h2> 
<p><mark>复用insert即可</mark></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="pop_front_488"></a>pop_front</h2> 
<p><mark>复用erese即可</mark></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="pop_back_502"></a>pop_back</h2> 
<p><mark>复用erese即可</mark></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">erase</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="size_516"></a>size</h2> 
<p><img src="https://images2.imgbox.com/4f/01/JjKhFPd0_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="empty_522"></a>empty</h2> 
<p><img src="https://images2.imgbox.com/27/20/1VOFfqvJ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="back_530"></a>back</h2> 
<p><img src="https://images2.imgbox.com/11/14/NKtnTQ25_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="front_536"></a>front</h2> 
<p><img src="https://images2.imgbox.com/be/39/lwRNFjYA_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="assign_541"></a>assign</h2> 
<p><img src="https://images2.imgbox.com/2f/4a/iD7nQ6oN_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="resize_547"></a>resize</h2> 
<p><img src="https://images2.imgbox.com/c6/8b/jAslDwMF_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="clear_553"></a>clear</h2> 
<p><mark>复用erase</mark></p> 
<p><img src="https://images2.imgbox.com/3f/27/b9q5KRu8_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_563"></a>全部代码</h2> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;assert.h&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> mylist
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">listnode</span><span class="token comment">//双向带头循环链表的节点类</span>
	<span class="token punctuation">{<!-- --></span>
		T _data<span class="token punctuation">;</span><span class="token comment">//节点存储的数据</span>

		listnode<span class="token operator">*</span> _next<span class="token punctuation">;</span><span class="token comment">//指向下一个节点的指针</span>

		listnode<span class="token operator">*</span> _prev<span class="token punctuation">;</span><span class="token comment">//指向前一个节点的指针</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
	

	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">F</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">Iterator</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//把自己的类型重命名一下</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token punctuation">,</span> F<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>

		<span class="token comment">//成员变量的类型是 双向带头循环链表的节点类型</span>
		listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _n<span class="token punctuation">;</span>


		<span class="token function">Iterator</span><span class="token punctuation">(</span>listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span>l<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token comment">//构造函数</span>
		<span class="token punctuation">{<!-- --></span>
			_n <span class="token operator">=</span> l<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//前置++</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//++就是指向下一个节点</span>
			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token comment">//后置++</span>
		<span class="token punctuation">{<!-- --></span>
			Self tmp <span class="token operator">=</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token comment">//先记录一下++之前的值</span>

			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span><span class="token comment">//再++</span>

			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//前置--</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//--就是指向上一个节点</span>
			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token comment">//后置--</span>
		<span class="token punctuation">{<!-- --></span>
			Self tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token comment">//先记录一下--之前的值</span>

			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span><span class="token comment">//再--</span>
			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		R <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//类比指针</span>
			<span class="token comment">//*就是获取  节点中存储的数据</span>
			<span class="token keyword">return</span> _n<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		F <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//返回  节点中 存储数据的成员变量的  地址</span>
			<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_n<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span>obj<span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _n <span class="token operator">!=</span> obj<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">!=</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">F</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">Reverse_iterator</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//把自己的类型重命名一下</span>
		<span class="token keyword">typedef</span> Reverse_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> R<span class="token punctuation">,</span> F<span class="token operator">&gt;</span> Self<span class="token punctuation">;</span>

		<span class="token comment">//成员变量的类型是 双向带头循环链表的节点类型</span>
		listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _n<span class="token punctuation">;</span>


		<span class="token function">Reverse_iterator</span><span class="token punctuation">(</span>listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> l<span class="token punctuation">)</span><span class="token comment">//构造函数</span>
		<span class="token punctuation">{<!-- --></span>
			_n <span class="token operator">=</span> l<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//反向迭代器++，是移动到  前  一个节点</span>
			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			Self tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//反向迭代器--，是移动到  后  一个节点</span>
			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		Self <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			Self tmp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
			_n <span class="token operator">=</span> _n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		R <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _n<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		F <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>_n<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _n<span class="token operator">!=</span>obj<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Self<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">!=</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
	<span class="token keyword">class</span> <span class="token class-name">list</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//把双向带头循环链表的节点类型重命名成node</span>
		<span class="token keyword">typedef</span> listnode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> node<span class="token punctuation">;</span>

	<span class="token keyword">private</span><span class="token operator">:</span>
		node<span class="token operator">*</span> _head<span class="token punctuation">;</span><span class="token comment">//唯一的成员变量</span>

		<span class="token comment">//获取初始头结点</span>
		node<span class="token operator">*</span> <span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//申请一个节点大小的空间</span>
			node<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> node<span class="token punctuation">;</span>

			<span class="token comment">//最开始的头节点的prev和next都指向自己</span>
			tmp<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
			tmp<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> tmp<span class="token punctuation">;</span>

			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token keyword">public</span><span class="token operator">:</span>
		
		<span class="token keyword">typedef</span>  Iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> iterator<span class="token punctuation">;</span><span class="token comment">//普通迭代器</span>

		<span class="token keyword">typedef</span>  Iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token operator">&gt;</span>  const_iterator<span class="token punctuation">;</span><span class="token comment">//const迭代器</span>

		<span class="token keyword">typedef</span>  Reverse_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token operator">&gt;</span>  reverse_iterator<span class="token punctuation">;</span><span class="token comment">//反向迭代器</span>

		<span class="token keyword">typedef</span>  Reverse_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> const_reverse_iterator<span class="token punctuation">;</span><span class="token comment">//const反向迭代器</span>


		<span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//获取头结点</span>
			<span class="token comment">//为之后的插入操作做准备</span>
			_head<span class="token operator">=</span><span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token function">list</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token operator">=</span><span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//必须先获取头节点，才能进行插入数据</span>
			_head <span class="token operator">=</span> <span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//尾插n次</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">InputIterator</span><span class="token operator">&gt;</span>
		<span class="token function">list</span><span class="token punctuation">(</span>InputIterator first<span class="token punctuation">,</span> InputIterator last<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//必须先获取头节点，才能进行插入数据</span>
			_head <span class="token operator">=</span> <span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">!=</span> last<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//把解引用之后的值，一个一个尾插进去</span>
				<span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
				first<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//必须先获取头节点，才能进行插入数据</span>
			_head <span class="token operator">=</span> <span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token function">list</span><span class="token punctuation">(</span>initializer_list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> il<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//必须先获取头节点，才能进行插入数据</span>
			_head <span class="token operator">=</span> <span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">auto</span> it <span class="token operator">=</span> il<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> il<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//把解引用之后的值，一个一个尾插进去</span>
				<span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
				it<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">const</span> list<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//必须先获取头节点，才能进行插入数据</span>
			_head <span class="token operator">=</span> <span class="token function">get_head_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//使用const迭代器接收  const修饰的对象的迭代器</span>
			const_iterator it <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> obj<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//把解引用之后的获得的值，一个一个尾插进去</span>
				<span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
				it<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token operator">~</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//先把list里面除了头结点</span>
			<span class="token comment">//以外的节点全部删除</span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//再把头结点申请的空间释放</span>
			<span class="token keyword">delete</span> _head<span class="token punctuation">;</span>

			_head <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		list<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span>list obj<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">swap</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//调用库里面的swap，交换头指针</span>
			std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_head<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>_head<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//头节点的下一个节点 才是第一个节点</span>
			<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//const修饰的对象只能调用const修饰的成员函数</span>
		const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//头节点的下一个节点 才是第一个节点</span>
			<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//最后一个节点的下一个节点是  头节点</span>
			<span class="token comment">//因为是循环链表</span>
			<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//const修饰的对象只能调用const修饰的成员函数</span>
		const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//反向迭代器的rend返回的是第一个节点的   前一个节点</span>
			<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//const修饰的对象只能调用const修饰的成员函数</span>
		const_reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//反向迭代器的rbegin()返回的是  最后一个节点</span>
			<span class="token comment">//最后一个节点是  头节点的前一个</span>
			<span class="token comment">//因为是循环链表</span>
			<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		const_reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		

		<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span>val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">/*node* tail = _head-&gt;_prev;

			node* newnode = new node;
			newnode-&gt;_data = val;
			newnode-&gt;_next = _head;
			newnode-&gt;_prev = tail;

			tail-&gt;_next = newnode;

			_head-&gt;_prev = newnode;*/</span>
			<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//不能  把 头节点 给删了</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos<span class="token operator">!=</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//记录pos的前一个节点（prev） </span>
			<span class="token comment">// 和后一个节点（next）</span>
			node<span class="token operator">*</span> prev <span class="token operator">=</span> pos<span class="token punctuation">.</span>_n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			node<span class="token operator">*</span> next <span class="token operator">=</span> pos<span class="token punctuation">.</span>_n<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			
			<span class="token comment">//让prev的下一个节点变成next</span>
			prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> next<span class="token punctuation">;</span>

			<span class="token comment">//让prev的上一个节点变成next</span>
			next<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>

			<span class="token comment">//释放pos指向的节点</span>
			<span class="token keyword">delete</span> pos<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>

			<span class="token comment">//返回被删除的节点的下一个节点</span>
			<span class="token comment">//用于更新迭代器</span>
			<span class="token keyword">return</span> next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator first<span class="token punctuation">,</span> iterator last<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			iterator it <span class="token operator">=</span> first<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> last<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//删除it指向的节点</span>
				<span class="token comment">//删除后让it接收返回值，进行更新</span>
				it <span class="token operator">=</span> <span class="token function">erase</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//返回被删除的  最后一个节点  的下一个节点</span>
			<span class="token comment">//用于更新迭代器</span>
			<span class="token keyword">return</span> last<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//size==0就   是空    返回true</span>
			<span class="token comment">//size!=0就   不是空  返回false</span>
			<span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> 
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//用count记录节点个数</span>
			size_t count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

			<span class="token comment">//使用const迭代器接收  const修饰的对象的迭代器</span>
			const_iterator it <span class="token operator">=</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//遍历链表</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				count<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token operator">++</span>it<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> count<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		T<span class="token operator">&amp;</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//list不能为空，为空就报错</span>
			<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//end（）返回的迭代器指向  头结点</span>
			<span class="token comment">//头结点的上一个节点就是，最后一个节点</span>
			<span class="token comment">//因为是循环链表</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//const修饰的成员，只能调用const修饰的成员函数</span>
		<span class="token keyword">const</span> T<span class="token operator">&amp;</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		T<span class="token operator">&amp;</span> <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//list不能为空，为空就报错</span>
			<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//begin()返回的迭代器  就指向第一个节点</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//const修饰的成员，只能调用const修饰的成员函数</span>
		<span class="token keyword">const</span> T<span class="token operator">&amp;</span> <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">InputIterator</span><span class="token operator">&gt;</span>
		<span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span>InputIterator first<span class="token punctuation">,</span> InputIterator last<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//先把数据现有的节点(除了头结点)都删除</span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//再循环把数据一个一个尾插进去</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">!=</span> last<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//尾插</span>
				<span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
				first<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		

		<span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">insert</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//记录指向 pos 前一个节点的指针</span>
			node<span class="token operator">*</span> prev <span class="token operator">=</span> pos<span class="token punctuation">.</span>_n<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

			<span class="token comment">//申请新节点的空间</span>
			node<span class="token operator">*</span> newnode <span class="token operator">=</span> <span class="token keyword">new</span> node<span class="token punctuation">;</span>
			<span class="token comment">//存储数据</span>
			newnode<span class="token operator">-&gt;</span>_data <span class="token operator">=</span> val<span class="token punctuation">;</span>

			newnode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> pos<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>
			newnode<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>

			prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
			pos<span class="token punctuation">.</span>_n<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> newnode<span class="token punctuation">;</span>

			<span class="token comment">//返回指向新插入的节点的迭代器</span>
			<span class="token comment">//用于更新迭代器</span>
			<span class="token keyword">return</span> newnode<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">InputIterator</span><span class="token operator">&gt;</span>
		<span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span> InputIterator first<span class="token punctuation">,</span> InputIterator last<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>first<span class="token operator">!=</span>last<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//循环插入即可</span>
				<span class="token comment">//因为list的迭代器使用完insert之后 不会失效</span>
				<span class="token comment">//所以不用接收返回值  也可以</span>
			    <span class="token function">insert</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
				first<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">void</span> <span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">erase</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//获取一下size，加快后续比较效率</span>
			<span class="token comment">//因为获取size()的时间复杂度为  O(N)</span>
			size_t size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> size<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
                <span class="token comment">//缺失的数据用val填上</span>
				<span class="token comment">//填到size()==n为止</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>size <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token operator">++</span>size<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> 
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//把多出来的数据（节点）删除</span>
				<span class="token comment">//删除到n==size()为止</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> size<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					n<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//[begin(),end())之间的数据</span>
			<span class="token comment">//就是所有的有效数据(节点)</span>
			<span class="token comment">//复用erase删除即可</span>
			<span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/66b15c9dd15e6851e6855d4f65736b7f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JUC 包中的 Atomic 原子类总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7df0462161de18c89308446579ef854d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网络和安全操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>