<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VUE3 播放RTSP实时、回放(NVR录像机)视频流（使用WebRTC） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/782b1a79788f9bc3648acdd18079ad52/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="VUE3 播放RTSP实时、回放(NVR录像机)视频流（使用WebRTC）">
  <meta property="og:description" content="1、下载webrtc-streamer，下载的最新window版本 Releases · mpromonet/webrtc-streamer · GitHub
2、解压下载包 3、webrtc-streamer.exe启动服务 （注意：这里可以通过当前文件夹下用cmd命令webrtc-streamer.exe -o这样占用cpu会很少，直接双击exe文件会占用cpu）
cmd webrtc-streamer.exe -o 启动如下图所示，此时在浏览器访问127.0.0.1:8000可以看到本机监控画面
4、将下载包html文件夹下webrtcstreamer.js文件和html/libs文件夹下adapter.min.js文件复制到vue项目public目录下。在index.html文件里引入这两个js文件 5、修改视频编码：(H.264) 6、编写实时播放测试页面 &lt;template&gt;
&lt;video id=&#34;video&#34; controls autoplay muted width=&#34;800&#34; height=&#34;600&#34;&gt;&lt;/video&gt;
&lt;/template&gt;
&lt;script setup&gt;
const webRtcServer = ref();
// webrtc服务器地址
const IP = &#34;http://127.0.0.1:8000&#34;;
onMounted(() =&gt; {
initVideo();
});
onBeforeUnmount(() =&gt; {
destroyVideo();
});
// 页面激活
onActivated(() =&gt; {
// 缓存页面 打开页面 实现播放
const video = document.getElementById(&#34;video&#34;);
video.paused &amp;&amp; video.play();
});
// 页面停用
onDeactivated(() =&gt; {">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-12T15:58:18+08:00">
    <meta property="article:modified_time" content="2024-03-12T15:58:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VUE3 播放RTSP实时、回放(NVR录像机)视频流（使用WebRTC）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4><span style="color:#0d0016;">1、下载webrtc-streamer，下载的最新window版本</span></h4> 
<p></p> 
<p><a href="https://github.com/mpromonet/webrtc-streamer/releases" title="Releases · mpromonet/webrtc-streamer · GitHub">Releases · mpromonet/webrtc-streamer · GitHub</a></p> 
<p><img alt="" height="599" src="https://images2.imgbox.com/63/18/MvZaP33O_o.png" width="1200"></p> 
<h4><span style="color:#0d0016;"> 2、解压下载包</span></h4> 
<p><img alt="" height="82" src="https://images2.imgbox.com/ca/e3/XSkuxXGq_o.png" width="879"></p> 
<h4><span style="color:#0d0016;"> 3、webrtc-streamer.exe启动服务</span></h4> 
<p><span style="color:#ed7976;">（注意：这里可以通过当前文件夹下用cmd命令webrtc-streamer.exe -o这样占用cpu会很少，直接双击exe文件会占用cpu）</span></p> 
<p><img alt="" height="266" src="https://images2.imgbox.com/ae/48/ukuD8FfZ_o.png" width="880"></p> 
<p>cmd  webrtc-streamer.exe -o 启动如下图所示，此时在浏览器访问127.0.0.1:8000可以看到本机监控画面</p> 
<p><img alt="" height="770" src="https://images2.imgbox.com/f7/b0/bpbOA5Fy_o.png" width="1200"></p> 
<p><img alt="" height="1040" src="https://images2.imgbox.com/f9/65/c0fZHpWH_o.png" width="1200"></p> 
<p><img alt="" height="632" src="https://images2.imgbox.com/5d/be/AyG9Fjv1_o.png" width="1005"></p> 
<h4><span style="color:#0d0016;"> 4、将下载包html文件夹下webrtcstreamer.js文件和html/libs文件夹下adapter.min.js文件复制到vue项目public目录下。在index.html文件里引入这两个js文件</span></h4> 
<p><img alt="" height="776" src="https://images2.imgbox.com/54/6d/AKQrkSOE_o.png" width="374"></p> 
<p><img alt="" height="630" src="https://images2.imgbox.com/3c/40/ANx9xhoy_o.png" width="1056"></p> 
<p></p> 
<h4><span style="color:#0d0016;">5、修改视频编码：(H.264)</span></h4> 
<p><img alt="" height="911" src="https://images2.imgbox.com/14/10/Sry3jvgk_o.png" width="1200"></p> 
<h4><span style="color:#0d0016;">6、编写实时播放测试页面 </span></h4> 
<blockquote> 
 <p>&lt;template&gt;</p> 
 <p>  &lt;video id="video" controls autoplay muted width="800" height="600"&gt;&lt;/video&gt;</p> 
 <p>&lt;/template&gt;</p> 
 <p></p> 
 <p>&lt;script setup&gt;</p> 
 <p>const webRtcServer = ref();</p> 
 <p></p> 
 <p>// webrtc服务器地址</p> 
 <p>const IP = "http://127.0.0.1:8000";</p> 
 <p></p> 
 <p>onMounted(() =&gt; {<!-- --></p> 
 <p>  initVideo();</p> 
 <p>});</p> 
 <p><br>  </p> 
 <p>onBeforeUnmount(() =&gt; {<!-- --></p> 
 <p>  destroyVideo();</p> 
 <p>});</p> 
 <p></p> 
 <p>// 页面激活</p> 
 <p>onActivated(() =&gt; {<!-- --></p> 
 <p>  // 缓存页面 打开页面 实现播放</p> 
 <p>  const video = document.getElementById("video");</p> 
 <p>  video.paused &amp;&amp; video.play();</p> 
 <p>});</p> 
 <p></p> 
 <p>// 页面停用</p> 
 <p>onDeactivated(() =&gt; {<!-- --></p> 
 <p>  // 缓存页面 离开页面 实现暂停</p> 
 <p>  const video = document.getElementById("video");</p> 
 <p>  video.play &amp;&amp; video.pause();</p> 
 <p>});</p> 
 <p><br>  </p> 
 <p>// 创建视频实例</p> 
 <p>const initVideo = () =&gt; {<!-- --></p> 
 <p>  webRtcServer.value = new WebRtcStreamer("video", IP);</p> 
 <p>  //需要查看的rtsp地址,根据自己的摄像头传入对应的rtsp地址即可。</p> 
 <p>  //注意：视频编码格式必须是H264的，否则无法正常显示，编码格式可在摄像头的后台更改</p> 
 <p>  webRtcServer.value.connect(</p> 
 <p>    "rtsp://admin:123456@192.168.1.64:554/Streaming/Channels/101"</p> 
 <p>  );</p> 
 <p>};</p> 
 <p></p> 
 <p>// 销毁视频实例</p> 
 <p>const destroyVideo = () =&gt; {<!-- --></p> 
 <p>  webRtcServer.value &amp;&amp;</p> 
 <p>    (webRtcServer.value.disconnect(), (webRtcServer.value = null));</p> 
 <p>};</p> 
 <p>&lt;/script&gt;</p> 
 <p></p> 
 <p>&lt;style scoped lang="scss"&gt;</p> 
 <p>&lt;/style&gt;</p> 
 <p><br>  </p> 
 <p></p> 
</blockquote> 
<h4><span style="color:#0d0016;">7、录像机NVR回放视频流地址编写</span></h4> 
<p>rtsp://用户名:密码@IP:554/Streaming/tracks/通道及码流starttime=年月日t时分秒z&amp;endtime=年月日t时分秒z </p> 
<p>例如 回放开始时间为2024-03-12 10:30:00结束时间为2024-03-12 11:40:30且通道号为1的主码流视频</p> 
<blockquote> 
 <p><span style="color:#0d0016;">// 其它步骤同上</span></p> 
 <p>const url="rtsp://admin:123456@192.168.1.65:554/Streaming/tracks/101?starttime=20240312t103000z&amp;endtime=20240312t114030z"</p> 
 <p> webRtcServer.value.connect(url);</p> 
</blockquote> 
<p><span style="color:#be191c;">注意：可以没有结束时间，如果没有去掉 “ &amp;endtime=20240311t174030z ”这一块；</span></p> 
<p><span style="color:#be191c;">注意：视频编码格式必须是H264的</span></p> 
<p><img alt="" height="540" src="https://images2.imgbox.com/63/31/sW4jSpbj_o.png" width="816"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5dcfa13061c0275b520eab55afc1cc6b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构奇妙旅程之二叉平衡树进阶---AVL树</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/306d3fad25b59393e7f9352827f668e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Unity2021.3.35f1配置安卓APK发布环境</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>