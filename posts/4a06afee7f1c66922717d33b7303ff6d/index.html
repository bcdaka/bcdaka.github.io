<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>YOLOåœ¨macä¸Šçš„å®‰è£…å’Œä½¿ç”¨ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4a06afee7f1c66922717d33b7303ff6d/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="YOLOåœ¨macä¸Šçš„å®‰è£…å’Œä½¿ç”¨">
  <meta property="og:description" content="æç¤ºï¼šæ–‡ç« å†™å®Œåï¼Œç›®å½•å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚ä½•ç”Ÿæˆå¯å‚è€ƒå³è¾¹çš„å¸®åŠ©æ–‡æ¡£
æ–‡ç« ç›®å½• ä¸€ã€YOLOçš„å®‰è£…1.åœ¨GitHubä¸Šä¸‹è½½æºç ï¼š2.é…ç½®ç¯å¢ƒï¼š äºŒã€ç”¨YOLOæµ‹è¯•è§†é¢‘1.æµ‹è¯•ä¸‹è½½è§†é¢‘2.ç”¨ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´å®æ—¶ç›‘æµ‹ ä¸‰ã€è®­ç»ƒè‡ªå·±çš„æ•°æ®é›† æç¤ºï¼šä»¥ä¸‹æ˜¯æœ¬ç¯‡æ–‡ç« æ­£æ–‡å†…å®¹ï¼Œä¸‹é¢æ¡ˆä¾‹å¯ä¾›å‚è€ƒ
ä¸€ã€YOLOçš„å®‰è£… 1.åœ¨GitHubä¸Šä¸‹è½½æºç ï¼š https://github.com/ultralytics/yolov5/tree/v6.1
2.é…ç½®ç¯å¢ƒï¼š 1.å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ä¿å­˜è‡³ä¸€ä¸ªæ²¡æœ‰ä¸­æ–‡çš„è·¯å¾„ä¸‹ï¼Œç‚¹å‡»æ‰“å¼€PyCharmï¼Œç‚¹å‡»openæŒ‰é’®ï¼Œåœ¨è·¯å¾„ä¸­æ‰¾åˆ°åˆšåˆšçš„æºç ä¿å­˜è·¯å¾„ï¼Œå³å¯åœ¨PyCharmä¸­æ‰“å¼€é¡¹ç›®ã€‚
âš æ­¤æ—¶å¯èƒ½ä¼šè·³å‡ºä¸€ä¸ªæ¡†ï¼Œè®©ä½ é…ç½®ç¯å¢ƒï¼Œå…ˆç›´æ¥å…³æ‰ã€‚ï¼ˆæˆ‘ä»¬åé¢å†é…ç½®ç¯å¢ƒï¼‰
2.æ‰“å¼€Anacondaï¼Œåœ¨å·¦ä¾§é€‰æ‹©environmentsï¼Œç‚¹å‡»ä¸‹æ–¹createï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°ç¯å¢ƒï¼Œå‘½åä¸ºyolo5_testã€‚ï¼ˆå»ºè®®é€‰æ‹©python3.9ä¸yolov5é€‚é…ï¼‰
3.æ‰“å¼€Pycharmè®¾ç½®Preference
æ–°å»ºPythonè§£é‡Šå™¨çš„ç¯å¢ƒ
4.ç³»åˆ—åº“çš„å®‰è£…
(1).æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤è¿›å…¥åˆ›å»ºçš„Anacondaç¯å¢ƒ
conda activate yolov5_test (yolov5_testæ˜¯æˆ‘åˆ›å»ºçš„ç¯å¢ƒåï¼Œéœ€æ¢æˆä½ çš„)
(2).é…ç½®torchå’Œtorchvision
pip install torch==1.8.1 torchvision==0.9.1 torchaudio==0.8.1 (è¾“å…¥åä¼šè‡ªåŠ¨æç¤ºé€‚åˆä½ çš„ç‰ˆæœ¬ï¼Œæ ¹æ®æç¤ºæ›´æ”¹ç‰ˆæœ¬å·å®‰è£…å³å¯ï¼‰
(3).å¯¹ç…§requirements.txt é…ç½®å…¶ä»–æ‰€éœ€å®‰è£…åŒ…
pip install -r requirements.txt è¿™é‡Œæˆ‘å¤±è´¥äº†ï¼Œäºæ˜¯åˆ†åˆ«å®‰è£…
pip install numpy pip install opencv-python pip install matplotlib pip install pillow pip install PyYAM pip install scipy pip install tqdm pip install requests 5.è¿è¡Œç¨‹åº
åŸºæœ¬æµ‹è¯•éœ€è¦è¿è¡Œdetect.py
ï¼ˆè¿™é‡Œæˆ‘è¿è¡Œæ—¶å‡ºç°äº†bugï¼Œå‘ç°è¿˜æœ‰ä¸€äº›åŒ…æœªå®‰è£…ï¼Œæ ¹æ®æç¤ºåˆå®‰è£…äº†ç¼ºå°‘çš„åŒ…ï¼‰
æœ€ç»ˆåœ¨pycharmä¸­è¿è¡Œç»“æœå¦‚ä¸‹
æ‰“å¼€expæŸ¥çœ‹ç»“æœ
äºŒã€ç”¨YOLOæµ‹è¯•è§†é¢‘ 1.æµ‹è¯•ä¸‹è½½è§†é¢‘ å°†è§†é¢‘æ”¾å…¥yolov5-6.1/data/images/ä¸­ï¼Œåœ¨pycharmä¸­è¿è¡Œdetect.py
æ‰“å¼€yolov5-6.1/runs/detect/expæŸ¥çœ‹ç»“æœä»£ç å¦‚ä¸‹ï¼ˆç¤ºä¾‹ï¼‰ï¼š
2.ç”¨ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´å®æ—¶ç›‘æµ‹ åœ¨detectæ–‡ä»¶æœ€åæ‰¾åˆ°æ­¤è¡Œä»£ç ">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-10T23:15:55+08:00">
    <meta property="article:modified_time" content="2024-05-10T23:15:55+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">YOLOåœ¨macä¸Šçš„å®‰è£…å’Œä½¿ç”¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>æç¤ºï¼šæ–‡ç« å†™å®Œåï¼Œç›®å½•å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚ä½•ç”Ÿæˆå¯å‚è€ƒå³è¾¹çš„å¸®åŠ©æ–‡æ¡£</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><a href="#YOLO_12" rel="nofollow">ä¸€ã€YOLOçš„å®‰è£…</a></li><li><ul><li><a href="#1GitHub_13" rel="nofollow">1.åœ¨GitHubä¸Šä¸‹è½½æºç ï¼š</a></li><li><a href="#2_16" rel="nofollow">2.é…ç½®ç¯å¢ƒï¼š</a></li></ul> 
  </li><li><a href="#YOLO_62" rel="nofollow">äºŒã€ç”¨YOLOæµ‹è¯•è§†é¢‘</a></li><li><ul><li><a href="#1_63" rel="nofollow">1.æµ‹è¯•ä¸‹è½½è§†é¢‘</a></li><li><a href="#2_67" rel="nofollow">2.ç”¨ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´å®æ—¶ç›‘æµ‹</a></li></ul> 
  </li><li><a href="#_75" rel="nofollow">ä¸‰ã€è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†</a></li></ul> 
</div> 
<p></p> 
<hr> 
<p><code>æç¤ºï¼šä»¥ä¸‹æ˜¯æœ¬ç¯‡æ–‡ç« æ­£æ–‡å†…å®¹ï¼Œä¸‹é¢æ¡ˆä¾‹å¯ä¾›å‚è€ƒ</code></p> 
<h2><a id="YOLO_12"></a>ä¸€ã€YOLOçš„å®‰è£…</h2> 
<h3><a id="1GitHub_13"></a>1.åœ¨GitHubä¸Šä¸‹è½½æºç ï¼š</h3> 
<p><a href="https://github.com/ultralytics/yolov5/tree/v6.1">https://github.com/ultralytics/yolov5/tree/v6.1</a><br> <img src="https://images2.imgbox.com/1e/72/B8iTxU5W_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="2_16"></a>2.é…ç½®ç¯å¢ƒï¼š</h3> 
<p>1.å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ä¿å­˜è‡³ä¸€ä¸ªæ²¡æœ‰ä¸­æ–‡çš„è·¯å¾„ä¸‹ï¼Œç‚¹å‡»æ‰“å¼€PyCharmï¼Œç‚¹å‡»openæŒ‰é’®ï¼Œåœ¨è·¯å¾„ä¸­æ‰¾åˆ°åˆšåˆšçš„æºç ä¿å­˜è·¯å¾„ï¼Œå³å¯åœ¨PyCharmä¸­æ‰“å¼€é¡¹ç›®ã€‚<br> <img src="https://images2.imgbox.com/8e/22/PSmZyjID_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> âš æ­¤æ—¶å¯èƒ½ä¼šè·³å‡ºä¸€ä¸ªæ¡†ï¼Œè®©ä½ é…ç½®ç¯å¢ƒï¼Œå…ˆç›´æ¥å…³æ‰ã€‚ï¼ˆæˆ‘ä»¬åé¢å†é…ç½®ç¯å¢ƒï¼‰<br> 2.æ‰“å¼€Anacondaï¼Œåœ¨å·¦ä¾§é€‰æ‹©environmentsï¼Œç‚¹å‡»ä¸‹æ–¹createï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°ç¯å¢ƒï¼Œå‘½åä¸ºyolo5_testã€‚ï¼ˆå»ºè®®é€‰æ‹©python3.9ä¸yolov5é€‚é…ï¼‰<br> <img src="https://images2.imgbox.com/85/fb/4D4jex3E_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> 3.æ‰“å¼€Pycharmè®¾ç½®Preference<br> <img src="https://images2.imgbox.com/80/31/HjRVnO9t_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ–°å»ºPythonè§£é‡Šå™¨çš„ç¯å¢ƒ<br> <img src="https://images2.imgbox.com/16/f7/l2UZXav8_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> 4.ç³»åˆ—åº“çš„å®‰è£…<br> (1).æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤è¿›å…¥åˆ›å»ºçš„Anacondaç¯å¢ƒ</p> 
<pre><code class="prism language-c">conda activate yolov5_test 
</code></pre> 
<p>(yolov5_testæ˜¯æˆ‘åˆ›å»ºçš„ç¯å¢ƒåï¼Œéœ€æ¢æˆä½ çš„)</p> 
<p>(2).é…ç½®torchå’Œtorchvision</p> 
<pre><code class="prism language-c">pip install torch<span class="token operator">==</span><span class="token number">1.8</span><span class="token number">.1</span> torchvision<span class="token operator">==</span><span class="token number">0.9</span><span class="token number">.1</span> torchaudio<span class="token operator">==</span><span class="token number">0.8</span><span class="token number">.1</span>
</code></pre> 
<p>(è¾“å…¥åä¼šè‡ªåŠ¨æç¤ºé€‚åˆä½ çš„ç‰ˆæœ¬ï¼Œæ ¹æ®æç¤ºæ›´æ”¹ç‰ˆæœ¬å·å®‰è£…å³å¯ï¼‰</p> 
<p>(3).å¯¹ç…§requirements.txt é…ç½®å…¶ä»–æ‰€éœ€å®‰è£…åŒ…</p> 
<pre><code class="prism language-c">pip install <span class="token operator">-</span>r requirements<span class="token punctuation">.</span>txt
</code></pre> 
<p>è¿™é‡Œæˆ‘å¤±è´¥äº†ï¼Œäºæ˜¯åˆ†åˆ«å®‰è£…</p> 
<pre><code class="prism language-c">pip install numpy
pip install opencv<span class="token operator">-</span>python
pip install matplotlib
pip install pillow
pip install PyYAM
pip install scipy
pip install tqdm
pip install requests
</code></pre> 
<p>5.è¿è¡Œç¨‹åº<br> åŸºæœ¬æµ‹è¯•éœ€è¦è¿è¡Œdetect.py<br> ï¼ˆè¿™é‡Œæˆ‘è¿è¡Œæ—¶å‡ºç°äº†bugï¼Œå‘ç°è¿˜æœ‰ä¸€äº›åŒ…æœªå®‰è£…ï¼Œæ ¹æ®æç¤ºåˆå®‰è£…äº†ç¼ºå°‘çš„åŒ…ï¼‰<br> æœ€ç»ˆåœ¨pycharmä¸­è¿è¡Œç»“æœå¦‚ä¸‹<br> <img src="https://images2.imgbox.com/04/00/0ugsiL8E_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ‰“å¼€expæŸ¥çœ‹ç»“æœ<br> <img src="https://images2.imgbox.com/66/67/7hR6NW0n_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="YOLO_62"></a>äºŒã€ç”¨YOLOæµ‹è¯•è§†é¢‘</h2> 
<h3><a id="1_63"></a>1.æµ‹è¯•ä¸‹è½½è§†é¢‘</h3> 
<p>å°†è§†é¢‘æ”¾å…¥yolov5-6.1/data/images/ä¸­ï¼Œåœ¨pycharmä¸­è¿è¡Œdetect.py<img src="https://images2.imgbox.com/39/2a/EphLLbjn_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ‰“å¼€yolov5-6.1/runs/detect/expæŸ¥çœ‹ç»“æœä»£ç å¦‚ä¸‹ï¼ˆç¤ºä¾‹ï¼‰ï¼š<br> <img src="https://images2.imgbox.com/c4/55/VRnlBDEQ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="2_67"></a>2.ç”¨ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´å®æ—¶ç›‘æµ‹</h3> 
<p>åœ¨detectæ–‡ä»¶æœ€åæ‰¾åˆ°æ­¤è¡Œä»£ç <br> <img src="https://images2.imgbox.com/5e/58/Q9enECYU_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ”¹ä¸ºï¼š</p> 
<pre><code class="prism language-c"><span class="token function">cd_argument</span><span class="token punctuation">(</span><span class="token char">'--source'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>str<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token char">'0'</span><span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token char">'source'</span><span class="token punctuation">)</span>  # file<span class="token operator">/</span>folder<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">for</span> webcam
</code></pre> 
<p>åŒæ ·æ‰“å¼€yolov5-6.1/runs/detect/expæŸ¥çœ‹ç»“æœ</p> 
<h2><a id="_75"></a>ä¸‰ã€è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†</h2> 
<p>1.åˆ›å»ºç¯å¢ƒ<br> åˆ›å»ºä¸€ä¸ªæ–°çš„anacondaç¯å¢ƒ</p> 
<pre><code class="prism language-c">conda create <span class="token operator">-</span>n tf python<span class="token operator">=</span><span class="token number">3.9</span><span class="token number">.18</span>
</code></pre> 
<p>ï¼ˆæ”¹æˆè‡ªå·±çš„pythonç‰ˆæœ¬ï¼‰<br> åˆ‡æ¢åˆ°tfç¯å¢ƒï¼ˆé‡æ–°æ‰“å¼€ç»ˆç«¯æ—¶è¦è®°å¾—åˆ‡åˆ°è¿™ä¸ªç¯å¢ƒï¼‰</p> 
<pre><code class="prism language-c">conda activate tf
</code></pre> 
<p>(å‰é¢æœ‰ï¼ˆtfï¼‰åˆ™æ˜¯è½¬æ¢æˆåŠŸ)<br> 2.å®‰è£…macosç‰ˆæœ¬çš„TensorFlow</p> 
<pre><code class="prism language-c">pip install <span class="token operator">-</span>i https<span class="token operator">:</span><span class="token comment">//pypi.tuna.tsinghua.edu.cn/simple/ tensorflow==2.6</span>
</code></pre> 
<p>3.pyqt5å®‰è£…<br> æ³•ä¸€</p> 
<pre><code class="prism language-c">pip install pyqt5
</code></pre> 
<p>(è¿™é‡Œæˆ‘å¤±è´¥äº†ï¼‰<br> æ³•äºŒ å®‰è£…homebrew</p> 
<pre><code class="prism language-c"><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>ruby<span class="token operator">-</span>e<span class="token string">"$(curl-fsSLhttps://raw.githubusercontent.com/Homebrew/install/master/install)"</span>
</code></pre> 
<p>é€šè¿‡homebrewå®‰è£…pyqt5</p> 
<pre><code class="prism language-c">brew install pyqt5
</code></pre> 
<p>4.å®‰è£…torchå’Œtorchvision</p> 
<pre><code class="prism language-c">pip install torch<span class="token operator">==</span><span class="token number">1.7</span><span class="token number">.1</span> torchvision<span class="token operator">==</span><span class="token number">0.8</span><span class="token number">.2</span> <span class="token operator">-</span>f https<span class="token operator">:</span><span class="token comment">//download.pytorch.org/whl/torch_stable.html -i https://pypi.tuna.tsinghua.edu.cn/simple/torch</span>
</code></pre> 
<p>5.å®‰è£…labelimg<br> æ³•ä¸€</p> 
<pre><code class="prism language-c">pip install labelimg
</code></pre> 
<p>è¿™é‡Œæˆ‘å¤±è´¥äº†<br> æ³•äºŒ è¿›å…¥labelimgçš„githubåœ°å€<a href="https://github.com/HumanSignal/labelImg">https://github.com/HumanSignal/labelImg</a><br> <img src="https://images2.imgbox.com/c8/10/Cjo3ClSb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ‰“å¼€ç»ˆç«¯è¾“å…¥cd å°†labeling-masteræ–‡ä»¶å¤¹æ‹–å…¥</p> 
<pre><code class="prism language-c">brew install qt
brew install libxml2
conda install lxml
make qt5py3
python labelImg<span class="token punctuation">.</span>py
</code></pre> 
<p>å°±å¯ä»¥ç”¨labelimgæ ‡æ³¨æ–‡ä»¶å•¦<br> <img src="https://images2.imgbox.com/21/a8/RXpffoiU_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> åœ¨yolov5ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºVOCDataçš„æ–‡ä»¶å¤¹ï¼Œåœ¨VOCDataæ–‡ä»¶å¤¹ä¸‹åˆ›å»º Annotations å’Œ images æ–‡ä»¶å¤¹ã€‚<br> imagesæ–‡ä»¶å¤¹æ”¾è¦è®­ç»ƒçš„å›¾ç‰‡<br> æ‰“å¼€ç›®å½•ä¸ºimagesæ–‡ä»¶å¤¹<br> æ›´æ”¹å­˜æ”¾ç›®å½•ä¸ºAnnotionsæ–‡ä»¶å¤¹<br> æ ‡è®°å›¾ç‰‡å¿«æ·é”®ï¼šwï¼šæ ‡è®° â€ƒ aï¼šä¸Šä¸€å¼ å›¾ç‰‡ â€ƒ dï¼šä¸‹ä¸€å¼ å›¾ç‰‡<br> æ ‡æ³¨çš„æ—¶å€™å°½å¯èƒ½è´´è¿‘ç‰©ä½“è½®å»“</p> 
<p>6.åˆ’åˆ†æ•°æ®é›†ä»¥åŠé…ç½®æ–‡ä»¶ä¿®æ”¹<br> (1)åˆ’åˆ†è®­ç»ƒé›†ã€éªŒè¯é›†ã€æµ‹è¯•é›†<br> åœ¨ç»ˆç«¯ä¸­æ‰“å¼€imagesæ–‡ä»¶å¤¹ï¼ˆæ ¹æ®è‡ªå·±è·¯å¾„æ‰¾ï¼‰</p> 
<pre><code class="prism language-c">cd <span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Documents<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>images
Is <span class="token operator">-</span>a
rm <span class="token punctuation">.</span>DS_Store
</code></pre> 
<p>åœ¨macosä¸‹ï¼Œæ–‡ä»¶å¤¹å†…ä¼šç”Ÿæˆ.Ds_storeéšè—æ–‡ä»¶è¦å…ˆåˆ é™¤</p> 
<p>åœ¨VOCDataç›®å½•ä¸‹åˆ›å»ºç¨‹åº split_train_val.py å¹¶è¿è¡Œä»¥ä¸‹ä»£ç ï¼ˆä»£ç å¯ä»¥ä¸åšä»»ä½•ä¿®æ”¹ï¼‰</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">coding</span><span class="token expression"><span class="token operator">:</span>utf<span class="token operator">-</span><span class="token number">8</span></span></span>
 
import os
import random
import argparse
 
parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span><span class="token function">ArgumentParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">xml</span><span class="token expression">æ–‡ä»¶çš„åœ°å€ï¼Œæ ¹æ®è‡ªå·±çš„æ•°æ®è¿›è¡Œä¿®æ”¹ xmlä¸€èˆ¬å­˜æ”¾åœ¨Annotationsä¸‹</span></span>
parser<span class="token punctuation">.</span><span class="token function">add_argument</span><span class="token punctuation">(</span><span class="token char">'--xml_path'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token char">'Annotations'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>str<span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token char">'input xml label path'</span><span class="token punctuation">)</span>
#æ•°æ®é›†çš„åˆ’åˆ†ï¼Œåœ°å€é€‰æ‹©è‡ªå·±æ•°æ®ä¸‹çš„ImageSets<span class="token operator">/</span>Main
parser<span class="token punctuation">.</span><span class="token function">add_argument</span><span class="token punctuation">(</span><span class="token char">'--txt_path'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">=</span><span class="token char">'ImageSets/Main'</span><span class="token punctuation">,</span> type<span class="token operator">=</span>str<span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token char">'output txt label path'</span><span class="token punctuation">)</span>
opt <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse_args</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
trainval_percent <span class="token operator">=</span> <span class="token number">1.0</span>  # è®­ç»ƒé›†å’ŒéªŒè¯é›†æ‰€å æ¯”ä¾‹ã€‚ è¿™é‡Œæ²¡æœ‰åˆ’åˆ†æµ‹è¯•é›†
train_percent <span class="token operator">=</span> <span class="token number">0.9</span>     # è®­ç»ƒé›†æ‰€å æ¯”ä¾‹ï¼Œå¯è‡ªå·±è¿›è¡Œè°ƒæ•´
xmlfilepath <span class="token operator">=</span> opt<span class="token punctuation">.</span>xml_path
txtsavepath <span class="token operator">=</span> opt<span class="token punctuation">.</span>txt_path
total_xml <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">listdir</span><span class="token punctuation">(</span>xmlfilepath<span class="token punctuation">)</span>
<span class="token keyword">if</span> not os<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>txtsavepath<span class="token punctuation">)</span><span class="token operator">:</span>
    os<span class="token punctuation">.</span><span class="token function">makedirs</span><span class="token punctuation">(</span>txtsavepath<span class="token punctuation">)</span>
 
num <span class="token operator">=</span> <span class="token function">len</span><span class="token punctuation">(</span>total_xml<span class="token punctuation">)</span>
list_index <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
tv <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>num <span class="token operator">*</span> trainval_percent<span class="token punctuation">)</span>
tr <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>tv <span class="token operator">*</span> train_percent<span class="token punctuation">)</span>
trainval <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">sample</span><span class="token punctuation">(</span>list_index<span class="token punctuation">,</span> tv<span class="token punctuation">)</span>
train <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">sample</span><span class="token punctuation">(</span>trainval<span class="token punctuation">,</span> tr<span class="token punctuation">)</span>
 
file_trainval <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>txtsavepath <span class="token operator">+</span> <span class="token char">'/trainval.txt'</span><span class="token punctuation">,</span> <span class="token char">'w'</span><span class="token punctuation">)</span>
file_test <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>txtsavepath <span class="token operator">+</span> <span class="token char">'/test.txt'</span><span class="token punctuation">,</span> <span class="token char">'w'</span><span class="token punctuation">)</span>
file_train <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>txtsavepath <span class="token operator">+</span> <span class="token char">'/train.txt'</span><span class="token punctuation">,</span> <span class="token char">'w'</span><span class="token punctuation">)</span>
file_val <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>txtsavepath <span class="token operator">+</span> <span class="token char">'/val.txt'</span><span class="token punctuation">,</span> <span class="token char">'w'</span><span class="token punctuation">)</span>
 
<span class="token keyword">for</span> i in list_index<span class="token operator">:</span>
    name <span class="token operator">=</span> total_xml<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token char">'\n'</span>
    <span class="token keyword">if</span> i in trainval<span class="token operator">:</span>
        file_trainval<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token keyword">if</span> i in train<span class="token operator">:</span>
            file_train<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token operator">:</span>
            file_val<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token operator">:</span>
        file_test<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
 
file_trainval<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file_train<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file_val<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file_test<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            
</code></pre> 
<p>è¿è¡Œç»“æŸåä¼šåœ¨ç”Ÿæˆä¸€ä¸ªåä¸º ImageSets çš„æ–‡ä»¶å¤¹<br> [è¯´æ˜]ï¼šåœ¨ç¬¬14ï¼Œ15è¡Œä»£ç ä¸­<br> è®­ç»ƒé›†æ˜¯ç”¨æ¥è®­ç»ƒæ¨¡å‹çš„ï¼Œé€šè¿‡å°è¯•ä¸åŒçš„æ–¹æ³•å’Œæ€è·¯ä½¿ç”¨è®­ç»ƒé›†æ¥è®­ç»ƒä¸åŒçš„æ¨¡å‹ï¼›<br> éªŒè¯é›†ä½¿ç”¨äº¤å‰éªŒè¯æ¥æŒ‘é€‰æœ€ä¼˜çš„æ¨¡å‹ï¼Œé€šè¿‡ä¸æ–­çš„è¿­ä»£æ¥æ”¹å–„æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„æ€§èƒ½ï¼›<br> æµ‹è¯•é›†ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚</p> 
<p>(2)XMLæ ¼å¼è½¬yolo_txtæ ¼å¼<br> åœ¨VOCDataç›®å½•ä¸‹åˆ›å»ºç¨‹åº xml_to_yolo.py å¹¶è¿è¡Œä»¥ä¸‹ä»£ç <br> æ³¨æ„ï¼šå°†classesæ”¹ä¸ºè‡ªå·±æ ‡æ³¨æ—¶è®¾ç½®çš„ç±»åï¼ˆæˆ‘è¿™é‡Œå«"code"ï¼‰ï¼Œå°†å„ä¸ªç»å¯¹è·¯å¾„ä¿®æ”¹ä¸ºè‡ªå·±çš„</p> 
<pre><code class="prism language-c">#<span class="token operator">-</span><span class="token operator">*</span><span class="token operator">-</span> coding<span class="token operator">:</span> utf<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span><span class="token operator">*</span><span class="token operator">-</span>
import xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree as ET
import os
from os import getcwd

sets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char">'train'</span><span class="token punctuation">,</span> <span class="token char">'val'</span><span class="token punctuation">,</span> <span class="token char">'test'</span><span class="token punctuation">]</span>
classes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span>  # æ”¹æˆè‡ªå·±çš„ç±»åˆ«
abs_path <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">getcwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>abs_path<span class="token punctuation">)</span>


def <span class="token function">convert</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token operator">:</span>
    dw <span class="token operator">=</span> <span class="token number">1.</span> <span class="token operator">/</span> <span class="token punctuation">(</span>size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    dh <span class="token operator">=</span> <span class="token number">1.</span> <span class="token operator">/</span> <span class="token punctuation">(</span>size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    x <span class="token operator">=</span> <span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> box<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token number">1</span>
    y <span class="token operator">=</span> <span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> box<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token number">1</span>
    w <span class="token operator">=</span> box<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> box<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    h <span class="token operator">=</span> box<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> box<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
    x <span class="token operator">=</span> x <span class="token operator">*</span> dw
    w <span class="token operator">=</span> w <span class="token operator">*</span> dw
    y <span class="token operator">=</span> y <span class="token operator">*</span> dh
    h <span class="token operator">=</span> h <span class="token operator">*</span> dh
    <span class="token keyword">return</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h


def <span class="token function">convert_annotation</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token operator">:</span>
    in_file <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>Annotations<span class="token operator">/</span><span class="token operator">%</span>s<span class="token punctuation">.</span>xml<span class="token char">' % image, encoding='</span>utf<span class="token operator">-</span><span class="token number">8</span>'<span class="token punctuation">)</span>
    out_file <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>labels<span class="token operator">/</span><span class="token operator">%</span>s<span class="token punctuation">.</span>txt<span class="token char">' % image, '</span>w'<span class="token punctuation">)</span>
    tree <span class="token operator">=</span> ET<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>in_file<span class="token punctuation">)</span>
    root <span class="token operator">=</span> tree<span class="token punctuation">.</span><span class="token function">getroot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    size <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'size'</span><span class="token punctuation">)</span>
    w <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>size<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'width'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    h <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">(</span>size<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'height'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token keyword">for</span> obj in root<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token char">'object'</span><span class="token punctuation">)</span><span class="token operator">:</span>
        difficult <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'difficult'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        <span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">difficult</span> <span class="token expression"><span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span></span><span class="token char">'Difficult'</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">.</span>text</span></span>
        cls <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        <span class="token keyword">if</span> cls not in classes or <span class="token keyword">int</span><span class="token punctuation">(</span>difficult<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token operator">:</span>
            <span class="token keyword">continue</span>
        cls_id <span class="token operator">=</span> classes<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
        xmlbox <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'bndbox'</span><span class="token punctuation">)</span>
        b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'xmin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'xmax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'ymin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token keyword">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'ymax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
        b1<span class="token punctuation">,</span> b2<span class="token punctuation">,</span> b3<span class="token punctuation">,</span> b4 <span class="token operator">=</span> b
        # æ ‡æ³¨è¶Šç•Œä¿®æ­£
        <span class="token keyword">if</span> b2 <span class="token operator">&gt;</span> w<span class="token operator">:</span>
            b2 <span class="token operator">=</span> w
        <span class="token keyword">if</span> b4 <span class="token operator">&gt;</span> h<span class="token operator">:</span>
            b4 <span class="token operator">=</span> h
        b <span class="token operator">=</span> <span class="token punctuation">(</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">,</span> b3<span class="token punctuation">,</span> b4<span class="token punctuation">)</span>
        bb <span class="token operator">=</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
        out_file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token function">str</span><span class="token punctuation">(</span>cls_id<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">for</span> a in bb<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token char">'\n'</span><span class="token punctuation">)</span>


wd <span class="token operator">=</span> <span class="token function">getcwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> image_set in sets<span class="token operator">:</span>
    <span class="token keyword">if</span> not os<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>labels<span class="token operator">/</span>'<span class="token punctuation">)</span><span class="token operator">:</span>
        os<span class="token punctuation">.</span><span class="token function">makedirs</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>labels<span class="token operator">/</span>'<span class="token punctuation">)</span>
    image_ids <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>
        '<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>ImageSets<span class="token operator">/</span>Main<span class="token operator">/</span><span class="token operator">%</span>s<span class="token punctuation">.</span>txt' <span class="token operator">%</span> image_set<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">strip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> not os<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>dataSet_path<span class="token operator">/</span>'<span class="token punctuation">)</span><span class="token operator">:</span>
        os<span class="token punctuation">.</span><span class="token function">makedirs</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>dataSet_path<span class="token operator">/</span>'<span class="token punctuation">)</span>

    list_file <span class="token operator">=</span> <span class="token function">open</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>dataSet_path<span class="token operator">/</span><span class="token operator">%</span>s<span class="token punctuation">.</span>txt<span class="token char">' % image_set, '</span>w'<span class="token punctuation">)</span>
    <span class="token keyword">for</span> image_id in image_ids<span class="token operator">:</span>
        list_file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>'<span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>images<span class="token operator">/</span><span class="token operator">%</span>s<span class="token punctuation">.</span>jpeg\n' <span class="token operator">%</span> image_id<span class="token punctuation">)</span>
        <span class="token function">convert_annotation</span><span class="token punctuation">(</span>image_id<span class="token punctuation">)</span>

    list_file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>è¿è¡Œåä¼šç”ŸæˆdataSet_path å’Œ labels æ–‡ä»¶å¤¹ã€‚dataSet_pathä¸‹ä¼šæœ‰ä¸‰ä¸ªæ•°æ®é›†çš„txtæ–‡ä»¶ï¼Œlabelsä¸‹å­˜æ”¾å„ä¸ªå›¾åƒçš„æ ‡æ³¨æ–‡ä»¶ã€‚</p> 
<p>(3)é…ç½®æ–‡ä»¶<br> åœ¨ yolov5 çš„ data æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º myvoc.yamlï¼Œæ¨¡æ¿å¦‚ä¸‹ï¼Œæ”¹æˆè‡ªå·±çš„è·¯å¾„ï¼Œæ ¹æ®è‡ªå·±å®é™…æƒ…å†µå¡«å†™ï¼š<br> ï¼ˆã€ğŸ¯æ˜“é”™ã€‘ï¼šæ³¨æ„å†’å·åé¢æ˜¯æœ‰ç©ºæ ¼çš„ï¼‰</p> 
<pre><code class="prism language-c"> train<span class="token operator">:</span> <span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>dataSet_path<span class="token operator">/</span>train<span class="token punctuation">.</span>txt
 
val<span class="token operator">:</span> <span class="token operator">/</span>Users<span class="token operator">/</span>zhuoxiaohua<span class="token operator">/</span>Downloads<span class="token operator">/</span>yolov5<span class="token operator">-</span><span class="token number">6.1</span><span class="token operator">/</span>VOCData<span class="token operator">/</span>dataSet_path<span class="token operator">/</span>val<span class="token punctuation">.</span>txt

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">number</span> <span class="token expression">of classes</span></span>

nc<span class="token operator">:</span> <span class="token number">1</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">class</span> <span class="token expression">names</span></span>

names<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span>
</code></pre> 
<p>(4)èšç±»è·å¾—å…ˆéªŒæ¡†<br> åœ¨ models æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° yolov5s.yamlï¼ˆå¦‚æœä½¿ç”¨è¿™ä¸ªæƒé‡æ¨¡å‹è®­ç»ƒçš„è¯ï¼‰ï¼Œå°†å…¶ä¸­çš„ nc æ”¹ä¸ºå®é™…ä¸Šæ ‡æ³¨ç±»çš„æ•°é‡ï¼Œå’Œ myvoc.yaml ä¸€æ ·ã€‚<br> <img src="https://images2.imgbox.com/e8/83/3lHna3v8_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> (5)æ‰“å¼€pycharm æ‰¾åˆ°train.pyå¼€å§‹è®­ç»ƒ<br> æœŸé—´æˆ‘é‡åˆ°äº†ä¸å°‘bug</p> 
<ul><li>numpy has no attribute int.</li></ul> 
<p>åˆ é™¤numpy1.20.3åŸå…ˆç‰ˆæœ¬</p> 
<pre><code class="prism language-c">pip uninstall numpy 
</code></pre> 
<p>é‡æ–°ä¸‹è½½</p> 
<pre><code class="prism language-c">pip install numpy<span class="token operator">==</span><span class="token number">1.22</span><span class="token number">.0</span> <span class="token operator">-</span>i https<span class="token operator">:</span><span class="token comment">//pypi.tuna.tsinghua.edu.cn/simple/</span>
</code></pre> 
<p>å°†æŠ¥é”™ä»£ç ä¸­çš„intæ”¹ä¸ºint_</p> 
<ul><li>RuntimeError: DataLoader worker (pid(s) 2516, 1768) exited unexpectedly<br> <img src="https://images2.imgbox.com/19/75/zRjgQy7K_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å°†æ­¤è¡Œdefaultæ”¹ä¸º0</li><li>RuntimeError: result type Float canâ€™t be cast to the desired output type long long</li></ul> 
<p>å°†yolov5-6.1\utils\loss.pyçš„ç¬¬211è¡Œ<br> ç”±</p> 
<pre><code class="prism language-c">indices<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">,</span> gj<span class="token punctuation">.</span><span class="token function">clamp_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> gain<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> gi<span class="token punctuation">.</span><span class="token function">clamp_</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> gain<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  # image<span class="token punctuation">,</span> anchor<span class="token punctuation">,</span> grid indices
</code></pre> 
<p>æ”¹ä¸º</p> 
<pre><code class="prism language-c">indices<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">,</span> gj<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>gain<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> gi<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span>gain<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  # image<span class="token punctuation">,</span> anchor<span class="token punctuation">,</span> grid indices
</code></pre> 
<p>é‡æ–°è¿è¡Œtrain.pyæˆåŠŸ</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae99b90a47ffcacad8d615e530e52c6b/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€C#ã€‘WebSoket æ¼”ç¤ºï¼ˆä½¿ç”¨websocket-sharpåº“ï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4b9b6861501e6fcf467cd24205bdfd70/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">webè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆjava&#43;seleniumï¼‰</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>