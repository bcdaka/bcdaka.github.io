<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C/C&#43;&#43;控制台贪吃蛇游戏的实现 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/79e468b799df2b61513eb6bbb42f33c1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C/C&#43;&#43;控制台贪吃蛇游戏的实现">
  <meta property="og:description" content="🚀欢迎互三👉：程序猿方梓燚 💎💎
🚀关注博主，后期持续更新系列文章
🚀如果有错误感谢请大家批评指出，及时修改
🚀感谢大家点赞👍收藏⭐评论✍
一、概述 本文对给定的贪吃蛇游戏代码进行详细分析。该游戏使用 C&#43;&#43;语言编写，通过控制台界面实现了经典的贪吃蛇游戏玩法，包括登录、注册、游戏介绍、游戏操作和计分等功能。
二、功能模块分析 （一）基础模块 常量定义：
MAX：定义了蛇身最大长度为 100。
UP、DOWN、LEFT、RIGHT：分别代表蛇的上、下、左、右四个方向。
MOVING：表示蛇正在移动的状态。
STOP：表示蛇停止的状态。
全局变量：
hMain_Out：控制台输出句柄。
hMain_In：控制台输入句柄。
NewPos[MAX]：用于存储蛇身新位置的数组。
Food：食物的位置结构体。
Wall：墙壁的范围结构体。
count、grade、level、amount、speed：分别用于记录蛇的移动步数、分数、难度等级、食物数量和移动速度。
isPaused：表示游戏是否暂停的布尔变量。
基础函数：
HideTheCursor()：隐藏光标。通过获取控制台光标信息，将其可见性设置为 FALSE，实现隐藏光标的效果。
basic()：游戏的基础功能模块，包括菜单选择（登录、注册、游戏介绍、退出），根据用户选择调用相应的函数。
显示菜单选项，让用户选择登录、注册、游戏介绍或退出。
根据用户选择调用相应的函数，如login()、registerUser()、gameIntroduction()或out()。
out()：退出游戏，显示感谢信息并逐步退出。
显示感谢信息和退出提示。
使用循环和延迟来模拟逐步退出的效果。
login()：实现用户登录功能，检查用户名和密码是否正确。
提示用户输入用户名和密码。
检查输入是否为空，如果为空则显示错误信息和提示框。
读取用户信息文件，对比输入的用户名和密码是否与文件中的一致。
registerUser()：用户注册功能，将新用户的用户名和密码保存到文件中。
提示用户输入新用户名和密码。
检查输入是否为空，如果为空则显示错误信息和提示框。
打开用户信息文件，将新用户名和密码写入文件。
gameIntroduction()：展示游戏介绍界面，介绍游戏规则，一段时间后自动返回大厅。
显示游戏介绍信息和规则说明。
使用循环和延迟来模拟自动返回大厅的效果。
（二）游戏模块 初始化函数：
Init(Body&amp; b)：初始化蛇的初始位置、长度、方向等，设置控制台输出句柄，创建游戏墙壁和食物，并显示游戏信息。
设置蛇的初始长度为 3，初始方向为向右。
获取控制台输出句柄和输入句柄。
创建游戏墙壁，通过获取控制台屏幕缓冲区信息，确定墙壁的范围，并在边界绘制墙壁。
随机生成食物的位置，确保食物位置在有效范围内且坐标为偶数。
显示游戏信息，包括分数和难度等级。
输出函数：
Print(const Body&amp; b)：在控制台输出蛇的位置，以圆形符号 “●” 表示蛇身。
使用循环遍历蛇身位置数组，设置控制台光标位置，输出蛇身符号。
Print(int x, int y)：在指定坐标位置输出特定字符，用于创建墙壁和食物。
设置控制台光标位置，输出指定字符。
移动函数：
Move(Body&amp; b)：实现蛇的移动逻辑，包括判断是否碰到墙壁或食物，更新蛇的位置，增加蛇身长度等。如果蛇碰到墙壁，则显示游戏结束信息并重新开始游戏；如果碰到食物，则增加分数、蛇身长度和食物数量，重新生成食物。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-20T20:14:51+08:00">
    <meta property="article:modified_time" content="2024-08-20T20:14:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C/C&#43;&#43;控制台贪吃蛇游戏的实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/0c/8d/e2cv078E_o.png" alt="在这里插入图片描述" width="95" height="95"></p> 
<p><img src="https://images2.imgbox.com/92/97/HqRstDDS_o.gif" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/f3/de/YMF8ja83_o.gif" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>🚀欢迎互三👉：<a href="https://blog.csdn.net/fzy20110826?type=blog">程序猿方梓燚</a> 💎💎<br> 🚀关注博主，后期持续更新系列文章<br> 🚀如果有错误感谢请大家批评指出，及时修改<br> 🚀感谢大家点赞👍收藏⭐评论✍</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/76/32/WFDvGyng_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="font_face_size6_11"></a><font face="楷体" size="6">一、概述</font></h2> 
<blockquote> 
 <p><font face="仿宋">本文对给定的贪吃蛇游戏代码进行详细分析。该游戏使用 C++语言编写，通过控制台界面实现了经典的贪吃蛇游戏玩法，包括登录、注册、游戏介绍、游戏操作和计分等功能。</font></p> 
</blockquote> 
<h2><a id="font_face_size6_14"></a><font face="楷体" size="6">二、功能模块分析</font></h2> 
<h3><a id="font_face_size5_15"></a><font face="宋体" size="5">（一）基础模块</font></h3> 
<p><font face="仿宋" size="4">常量定义：<br> <code>MAX</code>：定义了蛇身最大长度为 <code>100</code>。<br> <code>UP</code>、<code>DOWN</code>、<code>LEFT</code>、<code>RIGHT</code>：分别代表蛇的上、下、左、右四个方向。<br> <code>MOVING</code>：表示蛇正在移动的状态。<br> <code>STOP</code>：表示蛇停止的状态。<br> 全局变量：<br> <code>hMain_Out</code>：控制台输出句柄。<br> <code>hMain_In</code>：控制台输入句柄。<br> <code>NewPos[MAX]</code>：用于存储蛇身新位置的数组。<br> <code>Food</code>：食物的位置结构体。<br> <code>Wall</code>：墙壁的范围结构体。<br> <code>count</code>、<code>grade</code>、<code>level</code>、<code>amount</code>、<code>speed</code>：分别用于记录蛇的移动步数、分数、难度等级、食物数量和移动速度。<br> isPaused：表示游戏是否暂停的布尔变量。<br> 基础函数：<br> <code>HideTheCursor()</code>：隐藏光标。通过获取控制台光标信息，将其可见性设置为 <code>FALSE</code>，实现隐藏光标的效果。<br> <code>basic()</code>：游戏的基础功能模块，包括菜单选择（登录、注册、游戏介绍、退出），根据用户选择调用相应的函数。<br> 显示菜单选项，让用户选择登录、注册、游戏介绍或退出。<br> 根据用户选择调用相应的函数，如<code>login()</code>、<code>registerUser()</code>、<code>gameIntroduction()</code>或<code>out()</code>。<br> <code>out()</code>：退出游戏，显示感谢信息并逐步退出。<br> 显示感谢信息和退出提示。<br> 使用循环和延迟来模拟逐步退出的效果。<br> <code>login()</code>：实现用户登录功能，检查用户名和密码是否正确。<br> 提示用户输入用户名和密码。<br> 检查输入是否为空，如果为空则显示错误信息和提示框。<br> 读取用户信息文件，对比输入的用户名和密码是否与文件中的一致。<br> <code>registerUser()</code>：用户注册功能，将新用户的用户名和密码保存到文件中。<br> 提示用户输入新用户名和密码。<br> 检查输入是否为空，如果为空则显示错误信息和提示框。<br> 打开用户信息文件，将新用户名和密码写入文件。<br> <code>gameIntroduction()</code>：展示游戏介绍界面，介绍游戏规则，一段时间后自动返回大厅。<br> 显示游戏介绍信息和规则说明。<br> 使用循环和延迟来模拟自动返回大厅的效果。</font></p> 
<h3><a id="font_face_size5_48"></a><font face="宋体" size="5">（二）游戏模块</font></h3> 
<p><font face="仿宋" size="4">初始化函数：<br> <code>Init(Body&amp; b)</code>：初始化蛇的初始位置、长度、方向等，设置控制台输出句柄，创建游戏墙壁和食物，并显示游戏信息。<br> 设置蛇的初始长度为 3，初始方向为向右。<br> 获取控制台输出句柄和输入句柄。<br> 创建游戏墙壁，通过获取控制台屏幕缓冲区信息，确定墙壁的范围，并在边界绘制墙壁。<br> 随机生成食物的位置，确保食物位置在有效范围内且坐标为偶数。<br> 显示游戏信息，包括分数和难度等级。<br> 输出函数：<br> <code>Print(const Body&amp; b)</code>：在控制台输出蛇的位置，以圆形符号 “●” 表示蛇身。<br> 使用循环遍历蛇身位置数组，设置控制台光标位置，输出蛇身符号。<br> <code>Print(int x, int y)</code>：在指定坐标位置输出特定字符，用于创建墙壁和食物。<br> 设置控制台光标位置，输出指定字符。<br> 移动函数：<br> <code>Move(Body&amp; b)</code>：实现蛇的移动逻辑，包括判断是否碰到墙壁或食物，更新蛇的位置，增加蛇身长度等。如果蛇碰到墙壁，则显示游戏结束信息并重新开始游戏；如果碰到食物，则增加分数、蛇身长度和食物数量，重新生成食物。<br> 显示游戏信息，包括分数和难度等级。<br> 判断蛇是否碰到墙壁，如果碰到墙壁则显示游戏结束信息并重新开始游戏。<br> 判断蛇是否碰到食物，如果碰到食物则增加分数、蛇身长度和食物数量，清除食物位置并重新生成食物。<br> 根据蛇的状态和方向更新蛇的位置。如果蛇处于停止状态，根据方向直接移动蛇身；如果蛇处于移动状态，根据方向逐步移动蛇身。<br> 输出蛇的新位置。<br> <code>GetDirection(Body&amp; b)</code>：根据用户按键输入获取蛇的移动方向。<br> 判断用户是否按下上、下、左、右方向键，如果按下则改变蛇的方向。<br> <code>TurnRound(int d, Body&amp; b)</code>：根据给定方向改变蛇的移动方向。<br> 根据给定方向和蛇的当前方向，判断是否可以改变方向。如果可以改变方向，则复制蛇的当前位置到临时数组，更新蛇头位置，设置蛇的新方向和移动状态。<br> <code>PosCopy(Body&amp; b, Pos NewPos[])</code>：复制蛇的当前位置到一个临时数组中。<br> 遍历蛇身位置数组，将每个位置复制到临时数组中。<br> <code>MoveBody(Body&amp; b)</code>：更新蛇身的位置，根据临时数组中的位置信息进行移动。<br> 遍历蛇身位置数组，从蛇尾开始，将每个位置更新为前一个位置的值。最后，增加移动步数计数，并复制蛇的当前位置到临时数组。<br> 辅助函数：<br> <code>Clean(int x, int y)</code>：清除指定坐标位置的字符，用于移动蛇身时清除旧位置的显示。<br> 设置控制台光标位置，输出空格字符，清除指定位置的显示。<br> <code>HideCursor()</code>：隐藏控制台光标。通过获取控制台光标信息，将其可见性设置为 <code>FALSE</code>，实现隐藏光标的效果。<br> <code>CreateWall()</code>：创建游戏墙壁，在控制台边界绘制墙壁。<br> 获取控制台屏幕缓冲区信息，确定墙壁的范围。<br> 使用循环在墙壁边界输出特定字符，绘制墙壁。<br> <code>CreateFood()</code>：随机生成食物的位置，并在控制台输出食物。<br> 使用随机数生成器和时间种子生成随机坐标。<br> 确保食物位置在有效范围内且坐标为偶数。<br> 在指定位置输出食物符号。<br> <code>IsKnock_Food(const Body&amp; b)</code>：判断蛇是否碰到食物。<br> 比较蛇头的位置和食物的位置，如果相同则返回 <code>true</code>，否则返回 <code>false</code>。<br> <code>IsKnock_Wall(const Body&amp; b)</code>：判断蛇是否碰到墙壁或自身。<br> 检查蛇头的位置是否在墙壁范围内或与自身其他部分重叠，如果是则返回 <code>true</code>，否则返回 <code>false</code>。<br> <code>ShowInfo()</code>：在控制台显示游戏信息，包括分数和难度等级。<br> 设置控制台光标位置，输出分数和难度等级信息。<br> <code>AddBody(Body&amp; b)</code>：增加蛇的长度，根据蛇的当前方向在蛇尾添加一个新的位置。<br> 根据蛇的当前方向，在蛇尾添加一个新的位置，并增加蛇的长度。</font></p> 
<h3><a id="font_face_size5_95"></a><font face="宋体" size="5">（三）主函数</font></h3> 
<p><font face="仿宋" size="4"><code>main()</code>函数作为程序的入口点，设置控制台模式和标题，调用basic()函数进入游戏的基础功能模块。</font></p> 
<h2><a id="font_face_size6_97"></a><font face="楷体" size="6">三、代码结构分析</font></h2> 
<p><font face="仿宋" size="4">代码结构清晰，通过多个函数实现不同的功能模块，易于理解和维护。<br> 使用结构体<code>Body</code>来表示蛇的状态，包括位置、长度、方向和状态等信息，方便对蛇进行操作和管理。<br> 利用全局变量来存储游戏中的一些状态信息，如分数、等级、食物位置等，方便在不同函数中访问和修改。<br> 游戏的逻辑主要在<code>game()</code>函数中实现，通过不断循环和调用其他函数来实现蛇的移动、判断碰撞、更新游戏状态等功能。<br> 代码中使用了 <code>Windows API</code> 来获取控制台句柄、设置光标位置和隐藏光标等，增强了游戏的控制台界面效果。</font></p> 
<h2><a id="font_face_size6_103"></a><font face="楷体" size="6">四、代码详解</font></h2> 
<h3><a id="font_face_size5_104"></a><font face="宋体" size="5">一、头文件详解</font></h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;windows.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
</code></pre> 
<p><font face="仿宋" size="4"><code>iostream</code>：提供输入输出流的功能，用于在控制台进行输入输出操作。<br> <code>string</code>：用于处理字符串操作。<br> <code>fstream</code>：用于文件输入输出操作，在这个游戏中用于读取和写入用户信息文件。<br> <code>windows.h</code>：提供了与 Windows 操作系统相关的功能，如获取控制台句柄、设置光标位置等。<br> <code>time.h</code>：用于获取时间，为随机数生成提供种子。<br> <code>stdio.h</code>：提供标准输入输出函数。</font></p> 
<h3><a id="font_face_size5_120"></a><font face="宋体" size="5">二、全局变量详解</font></h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX</span>   <span class="token expression"><span class="token number">100</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">UP</span>    <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DOWN</span>  <span class="token expression"><span class="token number">2</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LEFT</span>   <span class="token expression"><span class="token number">3</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RIGHT</span>  <span class="token expression"><span class="token number">4</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MOVING</span> <span class="token expression"><span class="token number">5</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">STOP</span>   <span class="token expression"><span class="token number">0</span></span></span>

HANDLE hMain_Out <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
HANDLE hMain_In <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Pos</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> x<span class="token punctuation">;</span>
    <span class="token keyword">int</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Body</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> state<span class="token punctuation">;</span>
    <span class="token keyword">int</span> len<span class="token punctuation">;</span>
    <span class="token keyword">int</span> Direction<span class="token punctuation">;</span>
    Pos pos<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Pos NewPos<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
Pos Food<span class="token punctuation">;</span>
SMALL_RECT Wall<span class="token punctuation">;</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> grade <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> level <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> speed <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> isPaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre> 
<p><font face="仿宋" size="4"><code>MAX</code>：定义蛇身最大长度为 100。<br> <code>UP</code>、<code>DOWN</code>、<code>LEFT</code>、<code>RIGHT</code>：分别代表蛇的上、下、左、右四个方向，用整数表示方便在代码中进行判断和操作。<br> <code>MOVING</code>和<code>STOP</code>：表示蛇的移动和停止状态。<br> <code>hMain_Out</code>和<code>hMain_In</code>：分别是控制台输出句柄和输入句柄，用于在控制台进行输出和获取输入。<br> <code>struct Pos</code>：定义了一个表示位置的结构体，包含两个整数成员<code>x</code>和<code>y</code>，分别表示横坐标和纵坐标。<br> <code>struct Body</code>：定义了一个表示蛇的结构体，包含蛇的状态<code>state</code>、长度<code>len</code>、方向<code>Direction</code>和位置数组<code>pos[MAX]</code>。<br> <code>NewPos[MAX]</code>：用于存储蛇身新位置的数组。<br> <code>Food</code>：表示食物位置的结构体。<br> <code>Wall</code>：表示墙壁范围的结构体。<br> <code>count</code>：用于记录蛇的移动步数。<br> <code>grade</code>：表示分数。<br> <code>level</code>：表示难度等级。<br> <code>amount</code>：表示食物数量。<br> <code>speed</code>：表示蛇的移动速度。<br> <code>isPaused</code>：表示游戏是否暂停的布尔变量。</font></p> 
<h3><a id="font_face_size5_171"></a><font face="宋体" size="5">三、函数详解</font></h3> 
<h4><a id="font_face_size4HideTheCursor_172"></a><font face="宋体" size="4">（一）<code>HideTheCursor()</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">HideTheCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    CONSOLE_CURSOR_INFO cciCursor<span class="token punctuation">;</span>

    HANDLE hStdOut <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hStdOut<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cciCursor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cciCursor<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> FALSE<span class="token punctuation">;</span>
        <span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hStdOut<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cciCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hStdOut<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cciCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">首先定义了一个<code>CONSOLE_CURSOR_INFO</code>类型的变量<code>cciCursor</code>，用于存储控制台光标的信息。<br> 通过<code>GetStdHandle(STD_OUTPUT_HANDLE)</code>获取标准输出句柄，赋值给<code>hStdOut</code>。<br> 使用<code>GetConsoleCursorInfo(hStdOut, &amp;cciCursor)</code>获取当前控制台光标的信息，并存储在<code>cciCursor</code>中。<br> 如果获取光标信息成功，将<code>cciCursor.bVisible</code>设置为<code>FALSE</code>，表示隐藏光标。<br> 两次调用<code>SetConsoleCursorInfo(hStdOut, &amp;cciCursor)</code>确保光标隐藏成功。</font></p> 
<h4><a id="font_face_size4basic_191"></a><font face="宋体" size="4">（二）<code>basic()</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">basic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">HideTheCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> choice<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1. 登录"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2. 注册"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"3. 游戏介绍"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"4. 退出"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择: "</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> choice<span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 登录成功后执行的代码</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"登录成功，即将进入游戏！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
                    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"还有"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">"秒即将开始游戏"</span><span class="token punctuation">;</span>
                    <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
            <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
            <span class="token function">gameIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请按ESC键退出游戏 "</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_ESCAPE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n无效选择，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
            std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> choice<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1. 登录"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2. 注册"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"3. 游戏介绍"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"4. 退出"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新选择: "</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> choice<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">首先调用<code>HideTheCursor()</code>隐藏光标。<br> 使用<code>system("cls")</code>清屏。<br> 定义一个整数变量<code>choice</code>，用于存储用户的选择。<br> 输出菜单选项，让用户选择登录、注册、游戏介绍或退出。<br> 提示用户输入选择，并将输入存储在<code>choice</code>中。<br> 进入一个无限循环，根据用户的选择执行相应的操作。<br> 如果选择 1，调用<code>login()</code>函数进行登录，如果登录成功，显示登录成功信息并倒计时，然后调用<code>game()</code>函数进入游戏。<br> 如果选择 2，调用<code>registerUser()</code>函数进行注册。<br> 如果选择 3，调用<code>gameIntroduction()</code>函数显示游戏介绍。<br> 如果选择 4，输出提示信息，然后进入一个循环，不断检测是否按下<code>ESC</code>键，如果按下则调用<code>out()</code>函数退出游戏。<br> 如果选择无效，输出错误信息，让用户重新输入选择。<br> 每次循环结束后，清屏并重新输出菜单选项，让用户重新选择。</font></p> 
<h4><a id="font_face_size4_out_262"></a><font face="宋体" size="4"> （三）<code>out()</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                           感谢您的使用，再见！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"正在退出"</span><span class="token punctuation">;</span>
        <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span><span class="token punctuation">;</span>
        <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span><span class="token punctuation">;</span>
        <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">使用<code>system("cls")</code>清屏。<br> 输出感谢信息和再见提示。<br> 使用<code>Sleep(1000)</code>暂停 1 秒，给用户时间阅读感谢信息。<br> 使用循环模拟逐步退出的效果，每次循环输出 “正在退出” 和三个点，每个点之间暂停 <code>400</code> 毫秒。<br> 最后再次清屏，调用<code>exit(0)</code>退出程序。</font></p> 
<h4><a id="font_face_size4login_288"></a><font face="宋体" size="4">（四）<code>login()</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string username<span class="token punctuation">,</span> password<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入用户名: "</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> username<span class="token punctuation">;</span>

    <span class="token comment">// 检查用户名是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"用户名不能为空"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入密码: "</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> password<span class="token punctuation">;</span>

    <span class="token comment">// 检查密码是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"密码不能为空"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">inFile</span><span class="token punctuation">(</span><span class="token string">"user_info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>string storedUsername<span class="token punctuation">,</span> storedPassword<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>inFile <span class="token operator">&gt;&gt;</span> storedUsername <span class="token operator">&gt;&gt;</span> storedPassword<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">==</span> storedUsername <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> storedPassword<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            inFile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    inFile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"登录失败"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">使用<code>system("cls")</code>清屏。<br> 定义两个字符串变量<code>username</code>和<code>password</code>，分别用于存储用户输入的用户名和密码。<br> 提示用户输入用户名，并将输入存储在<code>username</code>中。<br> 检查用户名是否为空，如果为空则输出错误信息并显示提示框，然后返回<code>false</code>。<br> 提示用户输入密码，并将输入存储在password中。<br> 检查密码是否为空，如果为空则输出错误信息并显示提示框，然后返回<code>false</code>。<br> 打开用户信息文件<code>user_info.txt</code>，读取存储的用户名和密码。<br> 如果读取成功，比较输入的用户名和密码与文件中的是否一致，如果一致则关闭文件并返回<code>true</code>，表示登录成功；如果不一致则关闭文件，输出错误信息并显示提示框，然后返回<code>false</code>。</font></p> 
<h4><a id="font_face_size4registerUser_336"></a><font face="宋体" size="4">（五）<code>registerUser()</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>string newUsername<span class="token punctuation">,</span> newPassword<span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入新用户名: "</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> newUsername<span class="token punctuation">;</span>

    <span class="token comment">// 检查用户名是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newUsername<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"用户名不能为空，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入新密码: "</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> newPassword<span class="token punctuation">;</span>

    <span class="token comment">// 检查密码是否为空</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newPassword<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"密码不能为空"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">outFile</span><span class="token punctuation">(</span><span class="token string">"user_info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>outFile<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        outFile <span class="token operator">&lt;&lt;</span> newUsername <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> newPassword<span class="token punctuation">;</span>
        outFile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"注册成功！"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"注册失败，无法保存用户信息！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"注册失败，无法保存用户信息！"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">首先定义两个<code>std::string</code>类型的变量<code>newUsername</code>和<code>newPassword</code>，分别用于存储用户输入的新用户名和新密码。<br> 输出提示信息让用户输入新用户名，并使用<code>std::cin</code>读取用户输入，将其存储在<code>newUsername</code>中。<br> 检查<code>newUsername</code>是否为空字符串。如果是，则输出错误信息 “用户名不能为空，请重新输入！”，并通过<code>MessageBox(NULL, "提示", "提示", 0)</code>弹出一个提示框。然后函数直接返回，不进行后续操作。<br> 输出提示信息让用户输入新密码，并使用<code>std::cin</code>读取用户输入，将其存储在<code>newPassword</code>中。<br> 检查<code>newPassword</code>是否为空字符串。如果是，则输出错误信息 “请重新输入！”，并通过<code>MessageBox(NULL, "密码不能为空", "提示", 0)</code>弹出一个提示框。然后函数直接返回，不进行后续操作。<br> 创建一个<code>std::ofstream</code>类型的对象<code>outFile</code>，并尝试打开文件 <code>“user_info.txt”</code> 用于写入。<br> 如果文件成功打开，将用户输入的新用户名和新密码写入文件，格式为 “用户名 密码”。然后关闭文件，并通过<code>MessageBox(NULL, "注册成功！", "提示", 0)</code>弹出一个注册成功的提示框。<br> 如果文件打开失败，则输出错误信息 “注册失败，无法保存用户信息！”，并通过<code>MessageBox(NULL, "注册失败，无法保存用户信息！", "提示", 0)</code>弹出一个提示框。</font></p> 
<h4><a id="font_face_size4gameIntroduction_382"></a><font face="宋体" size="4">（六）<code>gameIntroduction()</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">gameIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"欢迎来到贪吃蛇游戏！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"游戏规则：控制蛇的移动来吃掉食物，蛇身会变长，碰到墙壁或自身则游戏结束。"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通过不断吃食物得分并提升难度等级。\n\n"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"                     还有"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">"秒后自动返回大厅"</span><span class="token punctuation">;</span>
        <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">使用一个<code>for</code>循环，从 <code>5</code> 递减到 <code>1</code>，模拟倒计时效果。<br> 在每次循环中，首先调用<code>system("cls")</code>清屏。<br> 然后输出欢迎信息和游戏规则说明。<br> 接着输出倒计时信息，显示还有多少秒后自动返回大厅。<br> 最后调用<code>Sleep(1000)</code>暂停 <code>1</code> 秒，模拟时间流逝。</font></p> 
<h4><a id="font_face_size4InitBody_b_401"></a><font face="宋体" size="4">（七）<code>Init(Body&amp; b)</code>函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    b<span class="token punctuation">.</span>len <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> RIGHT<span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    hMain_Out <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    hMain_In <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_INPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CreateWall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">设置传入的蛇结构体b的初始长度为 <code>3</code>，初始方向为向右<code>（RIGHT）</code>，初始状态为停止<code>（STOP）</code>。<br> 分别设置蛇身三个初始位置的横坐标和纵坐标。<br> 通过<code>GetStdHandle(STD_OUTPUT_HANDLE)</code>和<code>GetStdHandle(STD_INPUT_HANDLE)</code>获取控制台的输出句柄和输入句柄，并分别赋值给全局变量<code>hMain_Out</code>和<code>hMain_In</code>。<br> 调用<code>CreateWall()</code>函数创建游戏的墙壁。<br> 调用<code>CreateFood()</code>函数随机生成食物的位置。<br> 调用<code>ShowInfo()</code>函数显示游戏的信息，如分数和难度等级。</font></p> 
<h4><a id="font_face_size4Printconst_Body_b_427"></a><font face="宋体" size="4">（八）Print(const Body&amp; b)函数</font></h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    COORD coord<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> ix <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        coord<span class="token punctuation">.</span>X <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        coord<span class="token punctuation">.</span>Y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
        <span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"●"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">定义一个<code>COORD</code>类型的变量<code>coord</code>，用于存储光标位置。<br> 使用一个<code>for</code>循环，从蛇身的最后一个位置开始，逆序遍历蛇身的所有位置。<br> 在每次循环中，将当前位置的横坐标和纵坐标赋值给<code>coord</code>。<br> 通过<code>SetConsoleCursorPosition(hMain_Out, coord)</code>将控制台光标移动到当前蛇身位置。<br> 使用<code>printf("●")</code>在当前光标位置输出蛇身的圆形符号 “●”。</font></p> 
<h3><a id="font_face__size4Printint_x_int_y_446"></a><font face="宋体" size="4">（九）Print(int x, int y)函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    COORD c<span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>X <span class="token operator">=</span> x<span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>Y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"■"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">定义一个<code>COORD</code>类型的变量<code>c</code>，用于存储光标位置。<br> 将传入的横坐标x和纵坐标y赋值给c。<br> 通过<code>SetConsoleCursorPosition(hMain_Out, c)</code>将控制台光标移动到指定位置。<br> 使用<code>printf("■")</code>在当前光标位置输出用于创建墙壁或食物的符号 “■”。</font></p> 
<h3><a id="font_face__size4MoveBody_b_461"></a><font face="宋体" size="4">（十）<code>Move(Body&amp; b)</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">Move</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsKnock_Wall</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"You are dead!"</span><span class="token punctuation">,</span> <span class="token string">"Oh my God"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsKnock_Food</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>amount <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token operator">++</span>level<span class="token punctuation">;</span>
			amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			speed <span class="token operator">-=</span> <span class="token number">50</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">AddBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
		grade <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>amount<span class="token punctuation">;</span>
		<span class="token function">Clean</span><span class="token punctuation">(</span>Food<span class="token punctuation">.</span>x<span class="token punctuation">,</span> Food<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>STOP <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> UP<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">--</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> DOWN<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> LEFT<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> RIGHT<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">首先调用<code>ShowInfo()</code>函数显示游戏信息。<br> 调用<code>IsKnock_Wall(b)</code>函数判断蛇是否碰到墙壁。如果碰到墙壁，则弹出一个提示框 <code>“You are dead!”</code>，并调用<code>game()</code>函数重新开始游戏。<br> 调用<code>IsKnock_Food(b)</code>函数判断蛇是否吃到食物。如果吃到食物，则进行一系列操作，包括增加难度等级、增加蛇身长度、更新分数、增加食物数量、清除食物位置并重新生成食物。<br> 如果蛇的状态为停止<code>（STOP）</code>，根据蛇的当前方向进行相应的移动操作。如果方向为向右，则将蛇身每个位置的横坐标增加 <code>2</code>；如果方向为向上，则将蛇身每个位置的纵坐标减 <code>1</code>；如果方向为向下，则将蛇身每个位置的纵坐标加 <code>1</code>；如果方向为向左，则将蛇身每个位置的横坐标减 <code>2</code>。在移动前，先调用<code>Clean(b.pos[ix].x, b.pos[ix].y)</code>清除当前位置的显示。</font></p> 
<h3><a id="font_face__size4GetDirectionBody_b_571"></a><font face="宋体" size="4">（十一）<code>GetDirection(Body&amp; b)</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">GetDirection</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_UP<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">TurnRound</span><span class="token punctuation">(</span>UP<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_DOWN<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">TurnRound</span><span class="token punctuation">(</span>DOWN<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_LEFT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">TurnRound</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_RIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">TurnRound</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于获取用户输入的方向键，并根据输入调用<code>TurnRound</code>函数来改变蛇的移动方向。<br> 分别使用<code>GetAsyncKeyState</code>函数检测用户是否按下了上<code>（VK_UP）</code>、下<code>（VK_DOWN）</code>、左<code>（VK_LEFT）</code>、右<code>（VK_RIGHT）</code>方向键。<br> 如果检测到用户按下了某个方向键，首先将全局变量<code>count</code>重置为 <code>0</code>。这可能是用于控制蛇移动的步数或其他相关操作的计数变量。<br> 然后调用<code>TurnRound</code>函数，并传入相应的方向常量（如<code>UP</code>、<code>DOWN</code>、<code>LEFT</code>、<code>RIGHT</code>）以及蛇的结构体引用b，以实现改变蛇的移动方向。<br> 最后函数返回 <code>0</code>，可能表示没有特定的返回值需求，只是一个占位的返回值。</font></p> 
<h3><a id="font_face__size4TurnRoundint_d_Body_b_599"></a><font face="宋体" size="4">（十二）<code>TurnRound(int d, Body&amp; b)</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">TurnRound</span><span class="token punctuation">(</span><span class="token keyword">int</span> d<span class="token punctuation">,</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> UP<span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">--</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
            <span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> DOWN<span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">++</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
            <span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> LEFT<span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RIGHT<span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数根据传入的方向参数d来改变蛇的移动方向。<br> 使用<code>switch</code>语句根据传入的方向常量进行不同的操作。<br> 例如，当<code>d</code>为<code>UP</code>（向上）时，如果蛇当前的方向是向右<code>（RIGHT）</code>或向左<code>（LEFT）</code>，则进行一系列操作：<br> 调用<code>PosCopy(b, NewPos)</code>函数，可能是将蛇的当前位置复制到一个临时数组中，以便后续操作。<br> 将蛇头的纵坐标减 <code>1</code>，表示向上移动一格。<br> 调用<code>Clean(b.pos[0].x, b.pos[0].y)</code>函数，可能是清除蛇尾的显示。<br> 调用<code>MoveBody(b)</code>函数，可能是更新蛇身的位置。<br> 调用<code>Print(b)</code>函数，输出蛇的新位置。<br> 设置蛇的新方向为向上<code>（UP）</code>，并将蛇的状态设置为移动状态<code>（MOVING）</code>。<br> 对于其他方向的处理类似，根据不同的方向改变蛇头的位置，并进行相应的操作来更新蛇的状态和显示。</font></p> 
<h3><a id="font_face__size4PosCopyBody_b_Pos_NewPos_663"></a><font face="宋体" size="4">（十三）<code>PosCopy(Body&amp; b, Pos NewPos[])</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">PosCopy</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">,</span> Pos NewPos<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于将蛇的当前位置复制到一个临时数组中。<br> 首先使用一个<code>for</code>循环将临时数组<code>NewPos</code>中的每个位置的横坐标和纵坐标初始化为 <code>0</code>。<br> 然后使用另一个<code>for</code>循环将蛇的当前位置（存储在结构体<code>b</code>的<code>pos</code>数组中）复制到临时数组<code>NewPos</code>中。这样可以在后续的操作中保留蛇的当前位置，以便进行移动和方向改变等操作时使用。</font></p> 
<h3><a id="font_face__size4MoveBodyBody_b_679"></a><font face="宋体" size="4">（十四）<code>MoveBody(Body&amp; b)</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">MoveBody</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> ix <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">++</span>count<span class="token punctuation">;</span>
    <span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于更新蛇身的位置。<br> 使用一个<code>for</code>循环，从蛇尾开始，将每个位置更新为前一个位置的值（从临时数组<code>NewPos</code>中获取）。这样实现了蛇身的移动效果。<br> 增加全局变量<code>count</code>的值，可能用于记录蛇的移动步数或其他相关操作的计数。<br> 再次调用<code>PosCopy(b, NewPos)</code>函数，将蛇的当前位置复制到临时数组<code>NewPos</code>中，为下一次移动做好准备。</font></p> 
<h3><a id="font_face__size4HideCursor_695"></a><font face="宋体" size="4"><code>（十五）HideCursor()</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    CONSOLE_CURSOR_INFO info<span class="token punctuation">;</span>
    <span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> FALSE<span class="token punctuation">;</span>
    <span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于隐藏控制台光标。<br> 定义一个<code>CONSOLE_CURSOR_INFO</code>类型的变量<code>info</code>，用于存储控制台光标的信息。<br> 使用<code>GetConsoleCursorInfo(hMain_Out, &amp;info)</code>函数获取当前控制台光标的信息，并存储在<code>info</code>中。<br> 将<code>info.bVisible</code>设置为<code>FALSE</code>，表示隐藏光标。<br> 使用<code>SetConsoleCursorInfo(hMain_Out, &amp;info)</code>函数设置控制台光标的信息，实现隐藏光标的效果。</font></p> 
<h3><a id="font_face__size4CreateWall_711"></a><font face="宋体" size="4">（十六）<code>CreateWall()</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">CreateWall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    CONSOLE_SCREEN_BUFFER_INFO info<span class="token punctuation">;</span>
    <span class="token function">GetConsoleScreenBufferInfo</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Right <span class="token operator">-=</span> <span class="token number">19</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Bottom <span class="token operator">-=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    Wall <span class="token operator">=</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Right<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Top<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;=</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Bottom<span class="token punctuation">;</span> <span class="token operator">++</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">Print</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Print</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Right<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于创建游戏的墙壁。<br> 定义一个<code>CONSOLE_SCREEN_BUFFER_INFO</code>类型的变量<code>info</code>，用于存储控制台屏幕缓冲区的信息。<br> 使用<code>GetConsoleScreenBufferInfo(hMain_Out, &amp;info)</code>函数获取当前控制台屏幕缓冲区的信息，并存储在<code>info</code>中。<br> 调整<code>info.srWindow.Right</code>和<code>info.srWindow.Bottom</code>的值，减小墙壁的范围。这可能是为了在控制台中留出一些空间用于显示其他信息或使游戏界面更加美观。<br> 将调整后的窗口信息赋值给全局变量<code>Wall</code>，可能用于后续判断蛇是否碰到墙壁等操作。<br> 使用两个嵌套的循环在控制台边界绘制墙壁。外层循环遍历水平方向的坐标，内层循环遍历上下边界的纵坐标，调用<code>Print(i, info.srWindow.Top)</code>和<code>Print(i, info.srWindow.Bottom)</code>在上下边界绘制墙壁；另一个外层循环遍历垂直方向的坐标，内层循环遍历左右边界的横坐标，调用<code>Print(0, y)</code>和<code>Print(info.srWindow.Right, y)</code>在左右边界绘制墙壁。</font></p> 
<h3><a id="font_face__size4CreateFood_736"></a><font face="宋体" size="4">（十七）<code>CreateFood()</code>函数、</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> x_t <span class="token operator">=</span> RAND_MAX <span class="token operator">/</span> Wall<span class="token punctuation">.</span>Right<span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> y_t <span class="token operator">=</span> RAND_MAX <span class="token operator">/</span> Wall<span class="token punctuation">.</span>Bottom<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> x_t<span class="token punctuation">;</span>
        <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> y_t<span class="token punctuation">;</span>
        Food<span class="token punctuation">.</span>x <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">;</span>
        Food<span class="token punctuation">.</span>y <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> Food<span class="token punctuation">.</span>x <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> Food<span class="token punctuation">.</span>y <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Food<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                Food<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Food<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                Food<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">Print</span><span class="token punctuation">(</span>Food<span class="token punctuation">.</span>x<span class="token punctuation">,</span> Food<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于随机生成食物的位置。<br> 首先使用<code>srand(unsigned(time(NULL)))</code>设置随机数生成器的种子，以确保每次生成的随机数序列不同。<br> 计算<code>x_t</code>和<code>y_t</code>，分别是随机数范围与墙壁右边界和下边界的比例。<br> 进入一个无限循环，在每次循环中生成随机坐标<code>x</code>和<code>y</code>，并根据<code>x_t</code>和<code>y_t</code>进行调整。然后将生成的坐标赋值给食物位置结构体Food的横坐标和纵坐标，并进行一些调整：<br> 如果食物的横坐标小于 <code>5</code>，则将其加上 <code>8</code>，确保食物不在靠近边界的位置。<br> 如果食物的纵坐标小于 <code>5</code>，则将其加上 <code>8</code>，同样确保食物不在靠近边界的位置。<br> 检查食物的坐标是否为偶数（即<code>(0 == Food.x % 2) &amp;&amp; (0 == Food.y % 2)</code>），如果是偶数，则在该位置输出食物（调用<code>Print(Food.x, Food.y)</code>），并跳出循环。</font></p> 
<h3><a id="font_face__size4IsKnock_Foodconst_Body_b_769"></a><font face="宋体" size="4">（十八）<code>IsKnock_Food(const Body&amp; b)</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">IsKnock_Food</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">==</span> Food<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">==</span> Food<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于判断蛇是否碰到食物。<br> 检查蛇的头部位置（即结构体<code>b</code>的最后一个位置<code>b.pos[b.len - 1]</code>）的横坐标和纵坐标是否与食物位置<code>Food</code>的横坐标和纵坐标相等。<br> 如果相等，则返回<code>true</code>，表示蛇碰到了食物；否则返回<code>false</code>。</font></p> 
<h3><a id="font_face__size4IsKnock_Wallconst_Body_b_785"></a><font face="宋体" size="4">（十九）IsKnock_Wall(const Body&amp; b)函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">IsKnock_Wall</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">||</span> Wall<span class="token punctuation">.</span>Right <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">||</span> Wall<span class="token punctuation">.</span>Bottom <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Pos Head <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;=</span> b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Head<span class="token punctuation">.</span>x <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> Head<span class="token punctuation">.</span>y <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于判断蛇是否碰到墙壁或自身。<br> 首先检查蛇的头部位置是否在墙壁的边界上，即检查蛇头的横坐标是否为 <code>0</code>、纵坐标是否为 <code>0</code>、横坐标是否等于墙壁右边界<code>Wall.Right</code>或纵坐标是否等于墙壁下边界<code>Wall.Bottom</code>。如果是，则返回<code>true</code>，表示蛇碰到了墙壁。<br> 如果蛇头不在墙壁边界上，则定义一个<code>Pos</code>类型的变量<code>Head</code>，将其赋值为蛇头的位置。然后使用一个循环遍历蛇身的其他部分（从第一个位置到倒数第三个位置），检查蛇头的位置是否与蛇身的其他部分重叠（即横坐标和纵坐标都相等）。如果重叠，则返回<code>true</code>，表示蛇碰到了自身。<br> 如果蛇既没有碰到墙壁也没有碰到自身，则返回<code>false</code>。</font></p> 
<h3><a id="font_face__size4ShowInfo_805"></a><font face="宋体" size="4">（二十）<code>ShowInfo()</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    COORD c<span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>X <span class="token operator">=</span> Wall<span class="token punctuation">.</span>Right <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>Y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"  分数：%d"</span><span class="token punctuation">,</span> grade<span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span>Y <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"  难度等级：%d"</span><span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于在控制台显示游戏信息，包括分数和难度等级。<br> 定义一个<code>COORD</code>类型的变量<code>c</code>，用于存储光标位置。<br> 设置c.X为墙壁右边界<code>Wall.Right + 2</code>，表示在墙壁右侧留出一些空间，设置<code>c.Y</code>为 <code>3</code>，表示在第三行显示信息。<br> 使用<code>SetConsoleCursorPosition(hMain_Out, c)</code>将控制台光标移动到指定位置，然后输出分数信息，格式为 “分数：[具体分数]”，其中具体分数存储在全局变量<code>grade</code>中。<br> 增加<code>c.Y</code>的值为 <code>13</code>，表示在第十三行显示下一个信息。<br> 再次使用<code>SetConsoleCursorPosition(hMain_Out, c)</code>将控制台光标移动到指定位置，然后输出难度等级信息，格式为 “难度等级：[具体等级]”，其中具体等级存储在全局变量<code>level</code>中。</font></p> 
<h3><a id="font_face__size4AddBodyBody_b_826"></a><font face="宋体" size="4">（二十一）<code>AddBody(Body&amp; b)</code>函数</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">AddBody</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">&lt;</span> MAX<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
            <span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
            <span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
            <span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
            b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
            <span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">这个函数用于增加蛇的长度。<br> 首先检查蛇的长度是否小于最大长度<code>MAX</code>。如果是，则根据蛇的当前方向在蛇尾添加一个新的位置：<br> 如果方向为向上<code>（UP）</code>，则将新位置的纵坐标设置为蛇尾位置的纵坐标减 <code>1</code>，横坐标与蛇尾位置相同，然后增加蛇的长度。<br> 如果方向为向下<code>（DOWN）</code>，则将新位置的纵坐标设置为蛇尾位置的纵坐标加 <code>1</code>，横坐标与蛇尾位置相同，然后增加蛇的长度。<br> 如果方向为向左<code>（LEFT）</code>，则将新位置的横坐标设置为蛇尾位置的横坐标减 <code>2</code>，纵坐标与蛇尾位置相同，然后增加蛇的长度。<br> 如果方向为向右<code>（RIGHT）</code>，则将新位置的横坐标设置为蛇尾位置的横坐标加 <code>2</code>，纵坐标与蛇尾位置相同，然后增加蛇的长度。</font></p> 
<h3><a id="font_face__size5_860"></a><font face="宋体" size="5">四、主函数详解</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"mode con cols=100 lines=30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"title 贪吃蛇"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">basic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><font face="仿宋" size="4">在主函数中，首先使用<code>system("mode con cols=100 lines=30")</code>设置控制台的宽度为 <code>100</code> 个字符，高度为 <code>30</code> 行。<br> 然后使用<code>system("title 贪吃蛇")</code>设置控制台窗口的标题为 “贪吃蛇”。<br> 最后调用<code>basic()</code>函数，进入游戏的基础功能模块，开始游戏的流程。</font></p> 
<h2><a id="font_face_size6_875"></a><font face="楷体" size="6">五、完整代码</font></h2> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;windows.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;limits&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX</span>   <span class="token expression"><span class="token number">100</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">UP</span>    <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DOWN</span>  <span class="token expression"><span class="token number">2</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LEFT</span>   <span class="token expression"><span class="token number">3</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RIGHT</span>  <span class="token expression"><span class="token number">4</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MOVING</span> <span class="token expression"><span class="token number">5</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">STOP</span>   <span class="token expression"><span class="token number">0</span></span></span>

HANDLE hMain_Out <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
HANDLE hMain_In <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Pos</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> x<span class="token punctuation">;</span>
	<span class="token keyword">int</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Body</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> state<span class="token punctuation">;</span>
	<span class="token keyword">int</span> len<span class="token punctuation">;</span>
	<span class="token keyword">int</span> Direction<span class="token punctuation">;</span>
	Pos pos<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Pos NewPos<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>
Pos Food<span class="token punctuation">;</span>
SMALL_RECT Wall<span class="token punctuation">;</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> grade <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> level <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> speed <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> isPaused <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">basic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">gameIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Move</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Clean</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Clean</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">GetDirection</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">TurnRound</span><span class="token punctuation">(</span><span class="token keyword">int</span> Direction<span class="token punctuation">,</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">PosCopy</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">,</span> Pos NewPos<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">MoveBody</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">CreateWall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">IsKnock_Food</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">IsKnock_Wall</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">AddBody</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HideTheCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">basic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	<span class="token function">HideTheCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> choice<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1. 登录"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2. 注册"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"3. 游戏介绍"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"4. 退出"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请选择: "</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> choice<span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>choice<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 登录成功后执行的代码</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"登录成功，即将进入游戏！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
					std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"还有"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">"秒即将开始游戏"</span><span class="token punctuation">;</span>
					<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
			<span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
			<span class="token function">gameIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请按ESC键退出游戏 "</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_ESCAPE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					<span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n无效选择，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
			std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> choice<span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"1. 登录"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"2. 注册"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"3. 游戏介绍"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"4. 退出"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新选择: "</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> choice<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Body b<span class="token punctuation">;</span>
	<span class="token function">Init</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_ESCAPE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
			<span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
			isPaused <span class="token operator">=</span> <span class="token operator">!</span>isPaused<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>isPaused <span class="token operator">&amp;&amp;</span> <span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isPaused<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
			<span class="token function">Sleep</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Move</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">GetDirection</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">out</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\n\n\n\n\n\n\n\n\n\n\n\n\n\n                                           感谢您的使用，再见！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"正在退出"</span><span class="token punctuation">;</span>
		<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span><span class="token punctuation">;</span>
		<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span><span class="token punctuation">;</span>
		<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 登录函数</span>
<span class="token keyword">bool</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string username<span class="token punctuation">,</span> password<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入用户名: "</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> username<span class="token punctuation">;</span>

	<span class="token comment">// 检查用户名是否为空</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"用户名不能为空"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入密码: "</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> password<span class="token punctuation">;</span>

	<span class="token comment">// 检查密码是否为空</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"密码不能为空"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">inFile</span><span class="token punctuation">(</span><span class="token string">"user_info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string storedUsername<span class="token punctuation">,</span> storedPassword<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>inFile <span class="token operator">&gt;&gt;</span> storedUsername <span class="token operator">&gt;&gt;</span> storedPassword<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">==</span> storedUsername <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> storedPassword<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			inFile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	inFile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"登录失败"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注册函数</span>
<span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	std<span class="token double-colon punctuation">::</span>string newUsername<span class="token punctuation">,</span> newPassword<span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入新用户名: "</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> newUsername<span class="token punctuation">;</span>

	<span class="token comment">// 检查用户名是否为空</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>newUsername<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"用户名不能为空，请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请输入新密码: "</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>cin <span class="token operator">&gt;&gt;</span> newPassword<span class="token punctuation">;</span>

	<span class="token comment">// 检查密码是否为空</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>newPassword<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"请重新输入！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"密码不能为空"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">outFile</span><span class="token punctuation">(</span><span class="token string">"user_info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>outFile<span class="token punctuation">.</span><span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		outFile <span class="token operator">&lt;&lt;</span> newUsername <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> newPassword<span class="token punctuation">;</span>
		outFile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"注册成功！"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"注册失败，无法保存用户信息！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"注册失败，无法保存用户信息！"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 游戏介绍界面</span>
<span class="token keyword">void</span> <span class="token function">gameIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"cls"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"欢迎来到贪吃蛇游戏！"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"游戏规则：控制蛇的移动来吃掉食物，蛇身会变长，碰到墙壁或自身则游戏结束。"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通过不断吃食物得分并提升难度等级。\n\n"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"                     还有"</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">"秒后自动返回大厅"</span><span class="token punctuation">;</span>
		<span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	b<span class="token punctuation">.</span>len <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> RIGHT<span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	hMain_Out <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hMain_In <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_INPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">CreateWall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	COORD coord<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> ix <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		coord<span class="token punctuation">.</span>X <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
		coord<span class="token punctuation">.</span>Y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
		<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> coord<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"●"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Move</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsKnock_Wall</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"You are dead!"</span><span class="token punctuation">,</span> <span class="token string">"Oh my God"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">game</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsKnock_Food</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>amount <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token operator">++</span>level<span class="token punctuation">;</span>
			amount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			speed <span class="token operator">-=</span> <span class="token number">50</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">AddBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
		grade <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
		<span class="token operator">++</span>amount<span class="token punctuation">;</span>
		<span class="token function">Clean</span><span class="token punctuation">(</span>Food<span class="token punctuation">.</span>x<span class="token punctuation">,</span> Food<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>STOP <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> UP<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">--</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> DOWN<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> LEFT<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>state <span class="token operator">=</span> STOP<span class="token punctuation">;</span>
				b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> RIGHT<span class="token punctuation">;</span>
				count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len <span class="token operator">&amp;&amp;</span> MOVING <span class="token operator">==</span> b<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
				<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Clean</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	COORD c<span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>X <span class="token operator">=</span> x<span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>Y <span class="token operator">=</span> y<span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">GetDirection</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_UP<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token function">TurnRound</span><span class="token punctuation">(</span>UP<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_DOWN<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token function">TurnRound</span><span class="token punctuation">(</span>DOWN<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_LEFT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token function">TurnRound</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_RIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token function">TurnRound</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">TurnRound</span><span class="token punctuation">(</span><span class="token keyword">int</span> d<span class="token punctuation">,</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">case</span> UP<span class="token operator">:</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token operator">--</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
			<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token keyword">case</span> DOWN<span class="token operator">:</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
			<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token keyword">case</span> LEFT<span class="token operator">:</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token keyword">case</span> RIGHT<span class="token operator">:</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction <span class="token operator">||</span> DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token function">Clean</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">MoveBody</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>Direction <span class="token operator">=</span> d<span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>state <span class="token operator">=</span> MOVING<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token keyword">default</span><span class="token operator">:</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">PosCopy</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">,</span> Pos NewPos<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>len<span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">MoveBody</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> ix <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> NewPos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token operator">++</span>count<span class="token punctuation">;</span>
	<span class="token function">PosCopy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> NewPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HideCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	CONSOLE_CURSOR_INFO info<span class="token punctuation">;</span>
	<span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
	info<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> FALSE<span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">CreateWall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	CONSOLE_SCREEN_BUFFER_INFO info<span class="token punctuation">;</span>
	<span class="token function">GetConsoleScreenBufferInfo</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
	info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Right <span class="token operator">-=</span> <span class="token number">19</span><span class="token punctuation">;</span>
	info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Bottom <span class="token operator">-=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	Wall <span class="token operator">=</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Right<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Top<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">Print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;=</span> info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Bottom<span class="token punctuation">;</span> <span class="token operator">++</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">Print</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">Print</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>srWindow<span class="token punctuation">.</span>Right<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	COORD c<span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>X <span class="token operator">=</span> x<span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>Y <span class="token operator">=</span> y<span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"■"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">CreateFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">srand</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> x_t <span class="token operator">=</span> RAND_MAX <span class="token operator">/</span> Wall<span class="token punctuation">.</span>Right<span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> y_t <span class="token operator">=</span> RAND_MAX <span class="token operator">/</span> Wall<span class="token punctuation">.</span>Bottom<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> x_t<span class="token punctuation">;</span>
		<span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> y_t<span class="token punctuation">;</span>
		Food<span class="token punctuation">.</span>x <span class="token operator">=</span> x <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">;</span>
		Food<span class="token punctuation">.</span>y <span class="token operator">=</span> y <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> Food<span class="token punctuation">.</span>x <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> Food<span class="token punctuation">.</span>y <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>Food<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				Food<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>Food<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				Food<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">8</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token function">Print</span><span class="token punctuation">(</span>Food<span class="token punctuation">.</span>x<span class="token punctuation">,</span> Food<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token function">IsKnock_Food</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">==</span> Food<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">==</span> Food<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token function">IsKnock_Wall</span><span class="token punctuation">(</span><span class="token keyword">const</span> Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">||</span> Wall<span class="token punctuation">.</span>Right <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">||</span> Wall<span class="token punctuation">.</span>Bottom <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	Pos Head <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ix <span class="token operator">&lt;=</span> b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>ix<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>Head<span class="token punctuation">.</span>x <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span> Head<span class="token punctuation">.</span>y <span class="token operator">==</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">ShowInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	COORD c<span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>X <span class="token operator">=</span> Wall<span class="token punctuation">.</span>Right <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>Y <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"  分数：%d"</span><span class="token punctuation">,</span> grade<span class="token punctuation">)</span><span class="token punctuation">;</span>
	c<span class="token punctuation">.</span>Y <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span>hMain_Out<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"  难度等级：%d"</span><span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">AddBody</span><span class="token punctuation">(</span>Body<span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>len <span class="token operator">&lt;</span> MAX<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>UP <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
			<span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>DOWN <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
			<span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>LEFT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
			<span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>RIGHT <span class="token operator">==</span> b<span class="token punctuation">.</span>Direction<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
			b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">=</span> b<span class="token punctuation">.</span>pos<span class="token punctuation">[</span>b<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
			<span class="token operator">++</span>b<span class="token punctuation">.</span>len<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HideTheCursor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	CONSOLE_CURSOR_INFO cciCursor<span class="token punctuation">;</span>

	HANDLE hStdOut <span class="token operator">=</span> <span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetConsoleCursorInfo</span><span class="token punctuation">(</span>hStdOut<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cciCursor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cciCursor<span class="token punctuation">.</span>bVisible <span class="token operator">=</span> FALSE<span class="token punctuation">;</span>
		<span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hStdOut<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cciCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">SetConsoleCursorInfo</span><span class="token punctuation">(</span>hStdOut<span class="token punctuation">,</span> <span class="token operator">&amp;</span>cciCursor<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"mode con cols=100 lines=30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"title 贪吃蛇"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">basic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="font_face_size6_1489"></a><font face="楷体" size="6">六、技术亮点</font></h2> 
<p><font face="仿宋" size="4">随机生成食物位置：使用<code>rand()</code>函数和时间种子来生成随机数，确保食物位置的随机性。<br> 碰撞检测：通过判断蛇头的位置是否与墙壁或食物的位置相同，以及蛇头是否与自身的其他部分重叠，来实现碰撞检测。<br> 方向控制：根据用户按键输入来改变蛇的移动方向，实现了灵活的游戏操作。<br> 难度提升：随着游戏的进行，食物数量增加，当达到一定数量时，提升游戏难度等级，加快蛇的移动速度。</font></p> 
<h2><a id="font_face_size6_1494"></a><font face="楷体" size="6">七、改进建议</font></h2> 
<p><font face="仿宋" size="4">可以增加游戏音效，增强游戏的趣味性和沉浸感。<br> 优化游戏界面，使用不同的字符或颜色来区分蛇身、食物和墙壁，提高游戏的视觉效果。<br> 增加游戏模式选择，如单人模式、多人对战模式等，丰富游戏玩法。<br> 对用户输入进行更严格的验证，防止输入错误导致程序异常。<br> 可以将游戏数据保存到文件中，以便用户下次继续游戏。</font></p> 
<h2><a id="font_face_size6_1500"></a><font face="楷体" size="6">九、特别鸣谢</font></h2> 
<p>特别感谢<strong>C++小盆友</strong>（<a href="https://blog.csdn.net/weixin_721665">ta的主页</a>）以及<strong>阳了个阳C++</strong>（<a href="https://blog.csdn.net/wangyy130110">ta的主页</a>）帮我测试游戏效果</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/282285a2d6bcfd7e722d9ec0e3964821/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">传统的进程间通信——管道通信</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f56dde2afad554287b6de929e9ab3849/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">机器学习-下采样（全网最详解）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>