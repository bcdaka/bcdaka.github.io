<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络编程：UDP数据报套接字编程与TCP流套接字编程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/25eb549e47fc9f157ea30c0069a01de6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="网络编程：UDP数据报套接字编程与TCP流套接字编程">
  <meta property="og:description" content="目录
一、网络协议的基本概念
二、UDP数据报套接字编程
1.套接字的创建
2.绑定套接字
3.接收与发送数据
三、TCP流套接字编程
1.套接字的创建与绑定
接受连接
数据的接收与发送
关闭连接
四、UDP与TCP的适用场景
网络编程是现代计算机科学和工程领域中一个极为重要的主题。无论是构建分布式系统，还是编写互联网应用程序，网络编程的基本原理都潜移默化地影响着系统的架构、性能和可靠性。在这一领域，套接字（Socket）是实现网络通信的基础，特别是UDP（用户数据报协议）和TCP（传输控制协议）的使用，成为了开发者日常工作中的核心内容。本文将深入探讨UDP数据报套接字和TCP流套接字的编程方法及其各自的特点与应用场景。
一、网络协议的基本概念 在深入讨论套接字编程之前，我们首先需要理解UDP和TCP这两种网络协议之间的区别与联系。UDP是一种无连接的、不可靠的传输协议，允许数据报的快速发送，适用于实时要求高但对数据完整性要求不高的应用场景，例如视频直播和在线游戏。相对而言，TCP是一种面向连接的、可靠的传输协议，确保数据的完整性和顺序，适合对可靠性要求较高的应用，如网页浏览和文件传输。
二、UDP数据报套接字编程 1.套接字的创建 在使用UDP进行网络编程时，我们需要首先创建一个UDP套接字。这通常涉及到指定协议族（一般使用AF_INET表示IPv4），套接字类型（SOCK_DGRAM表示数据报），以及协议（通常为0）。
int sockfd = socket(AF_INET, SOCK_DGRAM, 0); if (sockfd &lt; 0) { perror(&#34;socket creation failed&#34;); exit(EXIT_FAILURE); } 2.绑定套接字 创建完套接字后，通常需要将其绑定到特定的IP地址和端口号，以便接收数据报。绑定操作示例下述代码所示：
struct sockaddr_in servaddr; memset(&amp;servaddr, 0, sizeof(servaddr)); servaddr.sin_family = AF_INET; servaddr.sin_addr.s_addr = htonl(INADDR_ANY); servaddr.sin_port = htons(port); if (bind(sockfd, (const struct sockaddr *)&amp;servaddr, sizeof(servaddr)) &lt; 0) { perror(&#34;bind failed&#34;); exit(EXIT_FAILURE); } 3.接收与发送数据 使用UDP套接字进行数据传输的过程非常直观。发送数据时，我们使用sendto函数；接收数据时，我们使用recvfrom函数。以下是一个简单的发送和接收数据的示例：
char buffer[1024]; struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); // 接收数据 int n = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;cliaddr, &amp;len); buffer[n] = &#39;\0&#39;; printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-21T22:11:14+08:00">
    <meta property="article:modified_time" content="2024-07-21T22:11:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络编程：UDP数据报套接字编程与TCP流套接字编程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="nofollow">一、网络协议的基本概念</a></p> 
<p id="%E4%BA%8C%E3%80%81UDP%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81UDP%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B" rel="nofollow">二、UDP数据报套接字编程</a></p> 
<p id="1.%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%88%9B%E5%BB%BA-toc" style="margin-left:0px;"><a href="#1.%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%88%9B%E5%BB%BA" rel="nofollow">1.套接字的创建</a></p> 
<p id="2.%E7%BB%91%E5%AE%9A%E5%A5%97%E6%8E%A5%E5%AD%97-toc" style="margin-left:40px;"><a href="#2.%E7%BB%91%E5%AE%9A%E5%A5%97%E6%8E%A5%E5%AD%97" rel="nofollow">2.绑定套接字</a></p> 
<p id="3.%E6%8E%A5%E6%94%B6%E4%B8%8E%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#3.%E6%8E%A5%E6%94%B6%E4%B8%8E%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE" rel="nofollow">3.接收与发送数据</a></p> 
<p id="%E4%B8%89%E3%80%81TCP%E6%B5%81%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81TCP%E6%B5%81%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B" rel="nofollow">三、TCP流套接字编程</a></p> 
<p id="1.%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%BB%91%E5%AE%9A-toc" style="margin-left:40px;"><a href="#1.%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%BB%91%E5%AE%9A" rel="nofollow">1.套接字的创建与绑定</a></p> 
<p id="%E6%8E%A5%E5%8F%97%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#%E6%8E%A5%E5%8F%97%E8%BF%9E%E6%8E%A5" rel="nofollow">接受连接</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A5%E6%94%B6%E4%B8%8E%E5%8F%91%E9%80%81-toc" style="margin-left:40px;"><a href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A5%E6%94%B6%E4%B8%8E%E5%8F%91%E9%80%81" rel="nofollow">数据的接收与发送</a></p> 
<p id="%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5" rel="nofollow">关闭连接</a></p> 
<p id="%E5%9B%9B%E3%80%81UDP%E4%B8%8ETCP%E7%9A%84%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81UDP%E4%B8%8ETCP%E7%9A%84%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">四、UDP与TCP的适用场景</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>  网络编程是现代计算机科学和工程领域中一个极为重要的主题。无论是构建分布式系统，还是编写互联网应用程序，网络编程的基本原理都潜移默化地影响着系统的架构、性能和可靠性。在这一领域，套接字（Socket）是实现网络通信的基础，特别是UDP（用户数据报协议）和TCP（传输控制协议）的使用，成为了开发者日常工作中的核心内容。本文将深入探讨UDP数据报套接字和TCP流套接字的编程方法及其各自的特点与应用场景。</p> 
<h2 id="%E4%B8%80%E3%80%81%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">一、网络协议的基本概念</h2> 
<p>  在深入讨论套接字编程之前，我们首先需要理解UDP和TCP这两种网络协议之间的区别与联系。UDP是一种无连接的、不可靠的传输协议，允许数据报的快速发送，适用于实时要求高但对数据完整性要求不高的应用场景，例如视频直播和在线游戏。相对而言，TCP是一种面向连接的、可靠的传输协议，确保数据的完整性和顺序，适合对可靠性要求较高的应用，如网页浏览和文件传输。</p> 
<h2 id="%E4%BA%8C%E3%80%81UDP%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B">二、UDP数据报套接字编程</h2> 
<h2 id="1.%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%88%9B%E5%BB%BA"><br> 1.套接字的创建</h2> 
<p>在使用UDP进行网络编程时，我们需要首先创建一个UDP套接字。这通常涉及到指定协议族（一般使用AF_INET表示IPv4），套接字类型（SOCK_DGRAM表示数据报），以及协议（通常为0）。</p> 
<pre><code class="language-java">int sockfd = socket(AF_INET, SOCK_DGRAM, 0);  
if (sockfd &lt; 0) {  
    perror("socket creation failed");  
    exit(EXIT_FAILURE);  
}  </code></pre> 
<h3 id="2.%E7%BB%91%E5%AE%9A%E5%A5%97%E6%8E%A5%E5%AD%97">2.绑定套接字</h3> 
<p>创建完套接字后，通常需要将其绑定到特定的IP地址和端口号，以便接收数据报。绑定操作示例下述代码所示：</p> 
<pre><code class="language-java">struct sockaddr_in servaddr;  
memset(&amp;servaddr, 0, sizeof(servaddr));  
servaddr.sin_family = AF_INET;  
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);  
servaddr.sin_port = htons(port);  

if (bind(sockfd, (const struct sockaddr *)&amp;servaddr, sizeof(servaddr)) &lt; 0) {  
    perror("bind failed");  
    exit(EXIT_FAILURE);  
}  </code></pre> 
<h3 id="3.%E6%8E%A5%E6%94%B6%E4%B8%8E%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE">3.接收与发送数据</h3> 
<p>使用UDP套接字进行数据传输的过程非常直观。发送数据时，我们使用sendto函数；接收数据时，我们使用recvfrom函数。以下是一个简单的发送和接收数据的示例：</p> 
<pre><code class="language-java">char buffer[1024];  
struct sockaddr_in cliaddr;  
socklen_t len = sizeof(cliaddr);  </code></pre> 
<p>// 接收数据  </p> 
<pre><code class="language-java">int n = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;cliaddr, &amp;len);  
buffer[n] = '\0';  
printf("Received: %s\n", buffer);  </code></pre> 
<p>// 发送数据  </p> 
<pre><code class="language-java">const char *msg = "Hello from server";  
sendto(sockfd, msg, strlen(msg), 0, (const struct sockaddr*)&amp;cliaddr, len);  </code></pre> 
<h2 id="%E4%B8%89%E3%80%81TCP%E6%B5%81%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B">三、TCP流套接字编程</h2> 
<h3 id="1.%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E5%88%9B%E5%BB%BA%E4%B8%8E%E7%BB%91%E5%AE%9A"><br> 1.套接字的创建与绑定</h3> 
<p>TCP流套接字的创建步骤与UDP相似，但需要额外注意的是，我们需要使用监听套接字来接受客户端的连接请求。创建和绑定的代码如下：</p> 
<pre><code class="language-java">int listenfd = socket(AF_INET, SOCK_STREAM, 0);  
if (listenfd &lt; 0) {  
    perror("socket creation failed");  
    exit(EXIT_FAILURE);  
}  

struct sockaddr_in servaddr;  
memset(&amp;servaddr, 0, sizeof(servaddr));  
servaddr.sin_family = AF_INET;  
servaddr.sin_addr.s_addr = htonl(INADDR_ANY);  
servaddr.sin_port = htons(port);  

if (bind(listenfd, (const struct sockaddr *)&amp;servaddr, sizeof(servaddr)) &lt; 0) {  
    perror("bind failed");  
    exit(EXIT_FAILURE);  
}  
// 开始监听  


listen(listenfd, 10);  </code></pre> 
<p></p> 
<h3 id="%E6%8E%A5%E5%8F%97%E8%BF%9E%E6%8E%A5">接受连接</h3> 
<p>一旦套接字绑定后，便可以开始接受客户端的连接。使用accept函数可以实现这个过程，它将返回一个新的套接字，用于与特定客户端进行数据交换。</p> 
<pre><code class="language-java">struct sockaddr_in cliaddr;  
socklen_t len = sizeof(cliaddr);  
int connfd = accept(listenfd, (struct sockaddr*)&amp;cliaddr, &amp;len);  
if (connfd &lt; 0) {  
    perror("server accept failed");  
    exit(EXIT_FAILURE);  
}  </code></pre> 
<h3 id="%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A5%E6%94%B6%E4%B8%8E%E5%8F%91%E9%80%81">数据的接收与发送</h3> 
<p>在TCP编程中，数据的发送和接收则依赖于读取和写入流。可以使用recv和send函数进行数据交换。代码如下：</p> 
<pre><code class="language-java">char buffer[1024];  

// 接收数据  
int n = recv(connfd, buffer, sizeof(buffer), 0);  
buffer[n] = '\0';  
printf("Received: %s\n", buffer);  

// 发送数据  
const char *msg = "Hello from server";  
send(connfd, msg, strlen(msg), 0);  </code></pre> 
<h3 id="%E5%85%B3%E9%97%AD%E8%BF%9E%E6%8E%A5">关闭连接</h3> 
<p>完成数据交换后，务必关闭套接字以释放资源。以下是关闭套接字的标准方法：</p> 
<blockquote> 
 <p>close(connfd);  <br> close(listenfd);  </p> 
</blockquote> 
<h2 id="%E5%9B%9B%E3%80%81UDP%E4%B8%8ETCP%E7%9A%84%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">四、UDP与TCP的适用场景</h2> 
<p>  UDP的应用场景：由于其无连接和低延迟，UDP特别适用于实时应用，例如网络游戏、视频会议、语音通话等。在这些场景中，丢失少量数据并不会显著影响用户体验，反而更在乎的是数据能快速到达。</p> 
<p>  TCP的应用场景：对于需要保证数据完整性和顺序的重要应用，如文件传输、电子邮件、网页浏览等，TCP则是首选协议。其重传机制和流量控制保证了数据的安全传输。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ff5e83a67bfe327fa1560864b05e8287/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言内存函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/10987a019db1e7b7f304e9cec293a08c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于SpringBoot的矩形范围面时空分析-以震中附近历史地震为例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>