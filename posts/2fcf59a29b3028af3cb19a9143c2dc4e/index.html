<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ROS2快速入门Python篇-版本梳理、环境搭建、源码架构介绍 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2fcf59a29b3028af3cb19a9143c2dc4e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="ROS2快速入门Python篇-版本梳理、环境搭建、源码架构介绍">
  <meta property="og:description" content="文章目录 1. ROS2版本说明及资料获取1.1 ROS2版本更新记录1.2 ROS1/ROS2各版本资料位置 2. humble安装2.1 使用Binary方式安装与测试2.2 使用源码方式安装与测试2.2.1 源码下载2.2.2 源码编译2.2.3 运行测试 3. ROS架构体系3.1 主要模块及其功能的概述3.2 ros-core, ros-base，ros_desktop差异3.3 DDS介绍 1. ROS2版本说明及资料获取 1.1 ROS2版本更新记录 https://docs.ros.org/en/foxy/Releases.html
ROS1版本更新记录
https://wiki.ros.org/Distributions
1.2 ROS1/ROS2各版本资料位置 https://docs.ros.org/en/?C=M;O=D
本系列将使用humble来讲解Ros2的使用。
2. humble安装 两种方式: Binary安装和源码安装
2.1 使用Binary方式安装与测试 binary安装支持Ubuntu Linux Jammy (Ubuntu 22.04) 64-bit x86 and 64-bit ARM，所以如果你装的是Ubuntu22.04, 可以直接使用这种方式安装或者使用源码安装。
We currently support Ubuntu Linux Jammy (22.04) 64-bit x86 and 64-bit ARM.
安装与测试步骤参考：
https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html
2.2 使用源码方式安装与测试 如果是其他Linux系统，如树莓派4（Raspi OS基于Debian Bullseye），可以选择源码安装方式。
The current Debian-based target platforms for Humble Hawksbill are:">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-29T14:03:14+08:00">
    <meta property="article:modified_time" content="2024-04-29T14:03:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ROS2快速入门Python篇-版本梳理、环境搭建、源码架构介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_ROS2_1" rel="nofollow">1. ROS2版本说明及资料获取</a></li><li><ul><li><a href="#11_ROS2_2" rel="nofollow">1.1 ROS2版本更新记录</a></li><li><a href="#12_ROS1ROS2_10" rel="nofollow">1.2 ROS1/ROS2各版本资料位置</a></li></ul> 
  </li><li><a href="#2_humble_16" rel="nofollow">2. humble安装</a></li><li><ul><li><a href="#21_Binary_19" rel="nofollow">2.1 使用Binary方式安装与测试</a></li><li><a href="#22__28" rel="nofollow">2.2 使用源码方式安装与测试</a></li><li><ul><li><a href="#221__47" rel="nofollow">2.2.1 源码下载</a></li><li><a href="#222__96" rel="nofollow">2.2.2 源码编译</a></li><li><a href="#223__119" rel="nofollow">2.2.3 运行测试</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3_ROS_155" rel="nofollow">3. ROS架构体系</a></li><li><ul><li><a href="#31__156" rel="nofollow">3.1 主要模块及其功能的概述</a></li><li><a href="#32_roscore_rosbaseros_desktop_168" rel="nofollow">3.2 ros-core, ros-base，ros_desktop差异</a></li><li><a href="#33_DDS_186" rel="nofollow">3.3 DDS介绍</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_ROS2_1"></a>1. ROS2版本说明及资料获取</h2> 
<h3><a id="11_ROS2_2"></a>1.1 ROS2版本更新记录</h3> 
<p><a href="https://docs.ros.org/en/foxy/Releases.html" rel="nofollow">https://docs.ros.org/en/foxy/Releases.html</a><br> <img src="https://images2.imgbox.com/e7/05/qfHlfSSm_o.png" alt="在这里插入图片描述" width="300"></p> 
<p>ROS1版本更新记录<br> <a href="https://wiki.ros.org/Distributions" rel="nofollow">https://wiki.ros.org/Distributions</a><br> <img src="https://images2.imgbox.com/5c/c2/Xb5XZVnj_o.png" alt="在这里插入图片描述" width="300"></p> 
<h3><a id="12_ROS1ROS2_10"></a>1.2 ROS1/ROS2各版本资料位置</h3> 
<p><a href="https://docs.ros.org/en/?C=M;O=D" rel="nofollow">https://docs.ros.org/en/?C=M;O=D</a><br> <img src="https://images2.imgbox.com/ea/54/VTMOQPFa_o.png" alt="在这里插入图片描述" width="300"></p> 
<p>本系列将使用humble来讲解Ros2的使用。</p> 
<h2><a id="2_humble_16"></a>2. humble安装</h2> 
<p>两种方式: Binary安装和源码安装</p> 
<h3><a id="21_Binary_19"></a>2.1 使用Binary方式安装与测试</h3> 
<p>binary安装支持Ubuntu Linux Jammy (Ubuntu 22.04) 64-bit x86 and 64-bit ARM，所以如果你装的是Ubuntu22.04, 可以直接使用这种方式安装或者使用源码安装。</p> 
<blockquote> 
 <p>We currently support Ubuntu Linux Jammy (22.04) 64-bit x86 and 64-bit ARM.</p> 
</blockquote> 
<p>安装与测试步骤参考：</p> 
<blockquote> 
 <p>https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html</p> 
</blockquote> 
<h3><a id="22__28"></a>2.2 使用源码方式安装与测试</h3> 
<p>如果是其他Linux系统，如树莓派4（Raspi OS基于Debian Bullseye），可以选择源码安装方式。</p> 
<blockquote> 
 <p>The current Debian-based target platforms for Humble Hawksbill are:<br> . Tier 1: Ubuntu Linux - Jammy (22.04) 64-bit<br> . Tier 3: Ubuntu Linux -Focal (20.04) 64-bit<br> . Tier 3: Debian Linux - Bullseye (11) 64-bit</p> 
 <p>Other Linux platforms with varying support levels include:<br> . Arch Linux, see alternate instructions<br> . Fedora Linux, see alternate instructions<br> . OpenEmbedded / webOS OSE, see alternate instructions</p> 
</blockquote> 
<p>安装步骤参考：</p> 
<blockquote> 
 <p>https://docs.ros.org/en/humble/Installation/Alternatives/Ubuntu-Development-Setup.html</p> 
</blockquote> 
<p>Ubuntu22.04源码安装步骤：</p> 
<h4><a id="221__47"></a>2.2.1 源码下载</h4> 
<pre><code>#https://docs.ros.org/en/humble/Installation/Alternatives/Ubuntu-Development-Setup.html
#suit for ubuntu22.04

sudo apt install software-properties-common
sudo add-apt-repository universe

sudo apt update &amp;&amp; sudo apt install curl -y
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg

echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release &amp;&amp; echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list &gt; /dev/null

sudo apt update &amp;&amp; sudo apt install -y \
  python3-flake8-docstrings \
  python3-pip \
  python3-pytest-cov \
  ros-dev-tools
  
sudo apt install -y \
   python3-flake8-blind-except \
   python3-flake8-builtins \
   python3-flake8-class-newline \
   python3-flake8-comprehensions \
   python3-flake8-deprecated \
   python3-flake8-import-order \
   python3-flake8-quotes \
   python3-pytest-repeat \
   python3-pytest-rerunfailures
 
 sudo apt install python3-colcon-common-extensions
 
#download git listed in ros2.repos (https://github.com/ros2/ros2.git)
#code size 561M
mkdir -p ./ros2_humble/src
cd ros2_humble
vcs import --input https://raw.githubusercontent.com/ros2/ros2/humble/ros2.repos src
</code></pre> 
<p><strong>国内网络访问raw.githubusercontent.com出现Connection refused问题处理</strong><br> 如果遇到这样的错误</p> 
<blockquote> 
 <p>$ sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg<br> curl: (7) Failed to connect to raw.githubusercontent.com port 443 after 70 ms: Connection refused</p> 
</blockquote> 
<p>在网站https://sites.ipaddress.com/查询raw.githubusercontent.com的ip地址<br> <img src="https://images2.imgbox.com/9b/c3/eZXWaiFc_o.png" alt="在这里插入图片描述" width="500"><br> 添加到/etc/hosts文件中<br> <img src="https://images2.imgbox.com/b6/cd/JMNG6LOH_o.png" alt="在这里插入图片描述" width="400"></p> 
<h4><a id="222__96"></a>2.2.2 源码编译</h4> 
<pre><code>sudo apt upgrade
sudo rosdep init
rosdep update
rosdep install --from-paths src --ignore-src -y --skip-keys "fastcdr rti-connext-dds-6.0.1 urdfdom_headers"

cd ros2_humble/
colcon build --symlink-install
</code></pre> 
<p><strong>sudo rosdep init遇到cannot download default sources list from问题</strong></p> 
<blockquote> 
 <p>$ sudo rosdep init ERROR: cannot download default sources list from:<br> https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/sources.list.d/20-default.list<br> Website may be down.</p> 
</blockquote> 
<p>重试几次可成功，原因未知，可能是单纯的网络问题。</p> 
<blockquote> 
 <p>$ sudo rosdep init Wrote<br> /etc/ros/rosdep/sources.list.d/20-default.list Recommended: please run</p> 
 <p>rosdep update</p> 
</blockquote> 
<h4><a id="223__119"></a>2.2.3 运行测试</h4> 
<pre><code>初始化运行环境
echo "source &lt;workspace path&gt;/ros2_humble/install/local_setup.bash" &gt;&gt; ~/.bashrc
</code></pre> 
<p>新终端运行talker示例程序</p> 
<pre><code>ros2 run demo_nodes_cpp talker
</code></pre> 
<p>新终端运行listener示例程序</p> 
<pre><code>ros2 run demo_nodes_py listener
</code></pre> 
<p>结果如图所示<br> <img src="https://images2.imgbox.com/7c/81/QMwX8XHO_o.png" alt="在这里插入图片描述" width="400"></p> 
<p><img src="https://images2.imgbox.com/82/75/mrG1F9fy_o.png" alt="在这里插入图片描述" width="400"></p> 
<blockquote> 
 <p><strong>rosrun和ros2 run区别</strong><br> rosrun和ros2 run都是用于在ROS环境中运行节点的命令行工具，但它们分别适用于不同版本的ROS。</p> 
 <p><strong>rosrun:</strong><br> rosrun命令是用于在ROS1中运行节点的工具。它允许你直接指定要运行的ROS软件包中的节点，而不需要提前source或者setup.bash ROS环境。它的使用方式是：<br> <code>rosrun package_name node_name</code><br> 其中，package_name是要运行节点所属的ROS软件包的名称，node_name是要运行的节点的名称。</p> 
 <p><strong>ros2 run:</strong><br> ros2 run命令是用于在ROS 2中运行节点的工具。它的功能类似于rosrun，但是针对ROS2环境。它允许你直接指定要运行的ROS软件包中的节点，而不需要提前source或者setup.bash ROS环境。它的使用方式也是类似的：</p> 
 <p><code>ros2 run package_name node_name</code><br> 其中，package_name是要运行节点所属的ROS软件包的名称，node_name是要运行的节点的名称。</p> 
</blockquote> 
<h2><a id="3_ROS_155"></a>3. ROS架构体系</h2> 
<h3><a id="31__156"></a>3.1 主要模块及其功能的概述</h3> 
<table><thead><tr><th>模块</th><th>功能</th></tr></thead><tbody><tr><td>rclcpp</td><td>这是 ROS 2 的 C++ 客户端库。它提供了一个面向对象的接口，用于创建节点、发布和订阅主题、调用服务等。rclcpp 提供了一个类似于 ROS 1 的 roscpp 的接口，但是专门为 ROS 2 的分布式架构设计。</td></tr><tr><td>rclpy</td><td>与 rclcpp 类似，rclpy 是 ROS 2 的 Python 客户端库。它允许开发者使用 Python 来编写 ROS 2 节点，并与 ROS 2 系统进行交互。</td></tr><tr><td>rosidl</td><td>这个模块用于 ROS 2 中的消息和服务接口定义语言 (IDL)。它允许定义 ROS 2 中使用的消息和服务的结构，并生成用于序列化和反序列化这些消息的代码</td></tr><tr><td>rcl</td><td>ROS 2 的核心 C 语言实现。rcl 提供了一个低级别的 ROS 2 客户端库，用于与 ROS 2 的中间件通信。</td></tr><tr><td>rmw</td><td>ROS Middleware Interface (RMW) 是 ROS 2 与不同通信中间件之间的接口。ROS 2 支持多种不同的中间件，如 FastRTPS、Cyclone DDS 等，而 RMW 模块允许 ROS 2 与这些不同的中间件进行通信</td></tr><tr><td>ros2cli</td><td>ROS 2 命令行工具的集合。这些工具用于管理 ROS 2 节点、主题、服务等，以及执行其他与 ROS 2 相关的任务。</td></tr><tr><td>ros2 launch</td><td>这是 ROS 2 中用于启动多个节点的工具。它允许用户使用 XML 或 Python 文件来描述节点的启动配置，并按照指定的配置启动这些节点。</td></tr></tbody></table> 
<h3><a id="32_roscore_rosbaseros_desktop_168"></a>3.2 ros-core, ros-base，ros_desktop差异</h3> 
<p>安装ROS的时候，总会有不同的安装选项，如ros-core, ros-base，ros_desktop，区别只是不同选项所包含组件有的多，有的少些而已。</p> 
<blockquote> 
 <p><strong>ros_core</strong>：ros_core是ROS的核心组件，它包含了ROS的基本功能和工具，例如ROS Master、rosout日志记录节点等。ros_core只包含最基本的ROS功能，适用于用户想要自定义自己的ROS环境的情况。</p> 
 <p><strong>ros_base</strong>：ros_base是一个比ros_core更大的安装选项，它包含了ros_core中的所有内容，同时还包含了一些额外的ROS软件包，如常用的ROS库、工具和一些常用的传感器和执行器的驱动程序。ros_base提供了一个较为完整的ROS环境，适用于大多数ROS应用。</p> 
 <p><strong>ros_desktop</strong>：ros_desktop是ROS安装的最完整的选项，它包含了ros_base中的所有内容，以及一些针对桌面用户的可视化工具和库，如rviz（ROS的三维可视化工具）、rqt（ROS的可视化工具集）等。ros_desktop适用于需要使用ROS进行开发和调试的桌面用户。</p> 
 <p>因此，这三个选项之间的关系是：ros_desktop包含了ros_base，ros_base包含了ros_core。用户可以根据其需求选择合适的安装选项。</p> 
</blockquote> 
<p>具体差异可见：https://www.ros.org/reps/rep-2001.html#id23<br> 同样以humble版本为例<br> <img src="https://images2.imgbox.com/c7/df/4nGnwBWu_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/db/ed/rWoUT07R_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33_DDS_186"></a>3.3 DDS介绍</h3> 
<p>DDS 指的是 Data Distribution Service（数据分发服务），是一种用于实时系统之间通信和数据共享的开放标准。在 ROS 2 中，DDS 用作 ROS 2 的通信中间件，用于在不同的 ROS 2 节点之间传输消息。</p> 
<p>ROS 2 中的 DDS 实现充当了 ROS 2 架构的基础，负责节点之间的通信。ROS 2 支持多种 DDS 实现，例如 Fast DDS、Cyclone DDS 等。这些实现都遵循 DDS 标准，并提供了在 ROS 2 中使用 DDS 进行通信所需的接口和功能。</p> 
<p>DDS 提供了一种灵活而强大的消息传输机制，具有高度的可靠性和实时性。它允许开发者根据系统的需求配置通信参数，并支持多种通信模式，包括发布-订阅、请求-响应等。这使得 DDS 成为构建实时分布式系统的理想选择，也成为了 ROS 2 作为机器人操作系统的核心通信技术。</p> 
<blockquote> 
 <p>DDS（Data Distribution Service）是一种用于实时系统之间通信和数据共享的开放标准。DDS 标准由 Object Management Group（OMG）制定和维护，是一种针对实时和嵌入式系统的数据通信协议。以下是 DDS 标准的主要特点和组成部分：</p> 
 <ol><li> <p>发布-订阅模型（Publish-Subscribe Paradigm）：DDS 使用发布-订阅模型，允许数据的发布者（Publishers）向感兴趣的订阅者（Subscribers）广播数据。这种模型允许松散的耦合和异步通信，使得系统更加灵活和可扩展。</p> </li><li> <p>数据中心（Data-Centric）：DDS 是一种数据中心的通信协议，强调数据的传输和共享。数据被视为中心，而不是消息传输机制。这种方法允许系统中的各个部分直接共享数据，而不需要显式的点对点通信。</p> </li><li> <p>实时性（Real-Time Capabilities）：DDS 具有很好的实时性能，能够满足实时系统的要求。DDS 的实现通常提供了可配置的 QoS（Quality of Service）参数，允许开发者根据系统的需求调整通信的实时性、可靠性和带宽利用率等方面的参数。</p> </li><li> <p>自动发现和路由（Automatic Discovery and Routing）：DDS 允许系统中的节点自动发现彼此，并建立通信连接。DDS 还支持动态的路由机制，允许在系统运行时动态地调整通信路径。</p> </li><li> <p>安全性（Security）：DDS 提供了安全性的支持，包括身份验证、访问控制、加密等功能，以确保通信数据的机密性和完整性。</p> </li><li> <p>平台无关性（Platform-Independence）：DDS 是一种平台无关的通信协议，可以在各种不同的操作系统和硬件平台上使用。</p> </li></ol> 
 <p>DDS 标准的实现通常由各个厂商提供，包括开源实现和商业实现。在实时系统、嵌入式系统、大规模分布式系统等领域，DDS<br> 在提供高效、可靠的数据通信方面发挥着重要作用。</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b27c654fcf1dda4d758adc006cd48226/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">大数据机器学习：常见模型评估指标</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1272da21b4431849c8f8d6b3e60ab775/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SQL Prompt：高效开发的SQL Server数据库必备插件！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>