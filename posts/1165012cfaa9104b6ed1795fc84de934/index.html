<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Windows上同时安装两个不同版本MYSQL】MySQL安装教程--5.7和8.0版本 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1165012cfaa9104b6ed1795fc84de934/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Windows上同时安装两个不同版本MYSQL】MySQL安装教程--5.7和8.0版本">
  <meta property="og:description" content="一、MySQL官网下载对应版本的zip文件 最新版本8.0.34下载链接：https://dev.mysql.com/downloads/mysql/
MySQL 5.7下载链接：https://downloads.mysql.com/archives/community/
二、将下载到的压缩包解压到指定目录 使用解压工具将下载到的压缩包解压：如：解压到D:/software/目录下（自己选择），解压之后建议重命名该解压出来的文件：如mysql-8.0.34-winx64文件夹名，可将后面的winx64去掉，得到mysql-8.0.34（方便查看和理解，此处可不修改，但后续内容需对应更改）
三、添加环境变量 右键我的电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量
选择系统变量Path，在其后添加：你的mysql安装文件下面的bin文件夹
四、在与bin同级的文件夹下新建，my.ini文件（注意：此处5.7版本和8.0版本操作不同） 4.1、编辑my.ini文件的内容（MySQL 5.7版本，路径改为自己电脑上对应的路径） [mysqld] basedir=D:\\software\\mysql-5.7\\ datadir=D:\\software\\mysql-5.7\\data\\ port=3306 skip-grant-tables #免登陆检查 4.2、编辑my.ini文件的内容（MySQL 8.0版本，不需要加skip-grant-tables，路径改为自己电脑上对应的路径） [mysqld] basedir=D:\\software\\mysql-8.0.34\\ datadir=D:\\software\\mysql-8.0.34\\data\\ port=3307 注意：此处如果是\，会报错，修改为\\，且端口号需要自行调整
五、启动管理员模式下的CMD，并将路径切换至mysql下的bin目录，然后输入：mysqld -install（安装mysql） 1.启动管理员模式下的CMD 2.将目录切换到解压的mysql文件中的bin文件夹的位置： 输入：cd /d D:\software\mysql-8.0.34\bin （路径换为你电脑对应的位置即可）
3.此时输入：mysqld -install (安装mysql服务) 这种安装方式服务名默认为MySQL，如果已有同名服务名，安装方式参考目录十二第二种安装方式
命令行界面出现：Service successfully installed.即可
图中是已装了的情况。
六、再输入 mysqld --initialize-insecure --user=mysql初始化数据文件 输入之前目录如下：
执行 mysqld --initialize-insecure --user=mysql（没输出ERROR信息则没报错）
执行成功：生成data和docs文件夹
data文件夹，即为存储数据库的地方，之前有数据库可拷贝到该目录下就可以使用了。
七、启动mysql，然后用命令 mysql -uroot -p 进入mysql管理界面 7.1、控制台继续输入： net start mysql 7.2、再输入：mysql -h127.0.0.1 -P3307 -uroot 直接输入回车，就可以进入到mysql管理界面（因为我们没有密码）。
其中，-h 参数指定连接的主机名（或 IP 地址），-P （大写的P）参数指定连接的端口号，-u 参数指定连接的用户名。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-22T16:50:46+08:00">
    <meta property="article:modified_time" content="2024-02-22T16:50:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Windows上同时安装两个不同版本MYSQL】MySQL安装教程--5.7和8.0版本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="MySQLzip_0"></a>一、MySQL官网下载对应版本的zip文件</h3> 
<p>最新版本8.0.34下载链接：<a href="https://dev.mysql.com/downloads/mysql/" rel="nofollow">https://dev.mysql.com/downloads/mysql/</a><br> <img src="https://images2.imgbox.com/14/2f/V5ZUtTLr_o.png" alt="在这里插入图片描述"></p> 
<p>MySQL 5.7下载链接：<a href="https://downloads.mysql.com/archives/community/" rel="nofollow">https://downloads.mysql.com/archives/community/</a><br> <img src="https://images2.imgbox.com/44/34/7ZYZ11Nh_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_7"></a>二、将下载到的压缩包解压到指定目录</h3> 
<p>使用解压工具将下载到的压缩包解压：如：解压到D:/software/目录下（自己选择），解压之后建议重命名该解压出来的文件：如mysql-8.0.34-winx64文件夹名，可将后面的winx64去掉，得到mysql-8.0.34（方便查看和理解，此处可不修改，但后续内容需对应更改）<br> <img src="https://images2.imgbox.com/af/e5/DjTBojwK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_11"></a>三、添加环境变量</h3> 
<p>右键我的电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量</p> 
<p>选择系统变量Path，在其后添加：你的mysql安装文件下面的bin文件夹<br> <img src="https://images2.imgbox.com/d8/a1/Lt7daKUX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="binmyini5780_18"></a>四、在与bin同级的文件夹下新建，my.ini文件（注意：此处5.7版本和8.0版本操作不同）</h3> 
<p><img src="https://images2.imgbox.com/e1/c9/6SkSILKq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="41myiniMySQL_57_21"></a>4.1、编辑my.ini文件的内容（MySQL 5.7版本，路径改为自己电脑上对应的路径）</h4> 
<pre><code class="prism language-txt">[mysqld]

basedir=D:\\software\\mysql-5.7\\

datadir=D:\\software\\mysql-5.7\\data\\

port=3306

skip-grant-tables #免登陆检查
</code></pre> 
<h4><a id="42myiniMySQL_80skipgranttables_33"></a>4.2、编辑my.ini文件的内容（MySQL 8.0版本，不需要加skip-grant-tables，路径改为自己电脑上对应的路径）</h4> 
<pre><code class="prism language-txt">[mysqld]

basedir=D:\\software\\mysql-8.0.34\\

datadir=D:\\software\\mysql-8.0.34\\data\\

port=3307
</code></pre> 
<p><mark>注意</mark>：此处如果是<code>\</code>，会报错，修改为<code>\\</code>，且端口号需要自行调整</p> 
<h3><a id="CMDmysqlbinmysqld_installmysql_45"></a>五、启动管理员模式下的CMD，并将路径切换至mysql下的bin目录，然后输入：mysqld -install（安装mysql）</h3> 
<h4><a id="1CMD_46"></a>1.启动管理员模式下的CMD</h4> 
<p><img src="https://images2.imgbox.com/4d/5a/iq2rg4OR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2mysqlbin_50"></a>2.将目录切换到解压的mysql文件中的bin文件夹的位置：</h4> 
<p>输入：cd /d D:\software\mysql-8.0.34\bin （路径换为你电脑对应的位置即可）<br> <img src="https://images2.imgbox.com/7e/a4/22Gh7PEQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3mysqld_install_mysql_56"></a>3.此时输入：mysqld -install (安装mysql服务)</h4> 
<p><mark>这种安装方式服务名默认为MySQL，如果已有同名服务名，安装方式参考目录</mark><code>十二</code>第二种安装方式</p> 
<p>命令行界面出现：<code>Service successfully installed.</code>即可<br> <img src="https://images2.imgbox.com/7a/e1/oC8cC5bX_o.png" alt="在这里插入图片描述"><br> 图中是已装了的情况。</p> 
<h3><a id="_mysqld_initializeinsecure_usermysql_63"></a>六、再输入 mysqld --initialize-insecure --user=mysql初始化数据文件</h3> 
<p>输入之前目录如下：<br> <img src="https://images2.imgbox.com/ab/12/GoVXR19E_o.png" alt="在这里插入图片描述"></p> 
<p>执行 <code>mysqld --initialize-insecure --user=mysql</code>（没输出ERROR信息则没报错）</p> 
<p><img src="https://images2.imgbox.com/26/a4/69t3mmD6_o.png" alt="在这里插入图片描述"><br> 执行成功：生成data和docs文件夹<br> <img src="https://images2.imgbox.com/00/c6/nnGCwEO7_o.png" alt="在这里插入图片描述"></p> 
<p>data文件夹，即为存储数据库的地方，之前有数据库可拷贝到该目录下就可以使用了。<br> <img src="https://images2.imgbox.com/05/fb/FFhaU3Bh_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="mysql_mysql_uroot_p_mysql_80"></a>七、启动mysql，然后用命令 mysql -uroot -p 进入mysql管理界面</h3> 
<h4><a id="71_net_start_mysql_81"></a>7.1、控制台继续输入： net start mysql</h4> 
<p><img src="https://images2.imgbox.com/d2/17/yfzXxHKf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8c/a5/dtJPRPPg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="72mysql_h127001_P3307_uroot_85"></a>7.2、再输入：mysql -h127.0.0.1 -P3307 -uroot</h4> 
<p><img src="https://images2.imgbox.com/e4/96/necvXBlp_o.png" alt="在这里插入图片描述"><br> 直接输入回车，就可以进入到mysql管理界面（因为我们没有密码）。<br> <mark>其中</mark>，<code>-h</code> 参数指定连接的主机名（或 IP 地址），<code>-P</code> （大写的P）参数指定连接的端口号，<code>-u</code> 参数指定连接的用户名。<br> <mark>注意</mark>：由于已经安装了mysql5.7版本，直接使用mysql -uroot -p 会进入mysql5.7服务，无法进入mysql8.0，所以此时，需要指定连接的端口号</p> 
<h3><a id="root5780_91"></a>八、进入界面后更改root密码（注意：此处5.7版本和8.0版本操作不同）</h3> 
<p>1、mysql 5.7版本，输入：<br> update mysql.user set authentication_string=‘password(123456’) where user=‘root’ and host=‘localhost’;<br> <img src="https://images2.imgbox.com/27/fc/V3ktOkH8_o.png" alt="在这里插入图片描述"></p> 
<p>出现图上内容，则修改密码成功了。</p> 
<p>2、mysql 8.0版本，依次输入：</p> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">user</span> root<span class="token variable">@'localhost'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<p>如图即修改成功。<br> <img src="https://images2.imgbox.com/8d/88/q3dO7be6_o.png" alt="在这里插入图片描述"><br> <mark>注意</mark>：这种修改方式，用Navicat连接时，会出现问题。解决方法在后面<code>遇到的问题</code>。</p> 
<p>最后两个版本都输入：<code>flush privileges;</code> 进行刷新权限。<br> <img src="https://images2.imgbox.com/46/15/nRnqAZxu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="myiniskipgranttables57_115"></a>九、修改my.ini文件，删除最后一行skip-grant-tables免密登录（注意：此步只有5.7版本需要）</h3> 
<p>[mysqld]</p> 
<p>basedir=D:\software\mysql-5.7\</p> 
<p>datadir=D:\software\mysql-5.7\data\</p> 
<p>port=3306</p> 
<h3><a id="mysql_123"></a>十、重启mysql即可正常使用</h3> 
<h3><a id="mysql_125"></a>十一、使用修改的密码登录mysql</h3> 
<h3><a id="mysql80_127"></a>十二、mysql8.0版本第二种安装方式</h3> 
<p><mark>服务名不可与已安装服务名重复，这里命名的服务为：MySQL80</mark><br> 1、执行命令 <code>mysqld install MySQL80 --defaults-file=“D:\software\mysql-8.0.34\my.ini” </code>，出现Service successfully installed 表示服务安装成功<br> 2、再输入 <code>mysqld --initialize-insecure --user=mysql</code>初始化数据文件<br> 3、执行<code>net start MySQL80</code> 命令，启动服务</p> 
<pre><code class="prism language-txt">D:\software\mysql-8.0.34\bin&gt;net start MySQL80
MySQL80 服务正在启动 .
MySQL80 服务已经启动成功。
</code></pre> 
<p>4、执行<code>mysql -h127.0.0.1 -P3306 -uroot -p123456</code>命令，登录数据库</p> 
<pre><code class="prism language-txt">D:\software\mysql-8.0.34\bin&gt;mysql -h127.0.0.1 -P3306 -uroot -p123456
</code></pre> 
<p>———————————————————————————————————————————</p> 
<h3><a id="_143"></a>附：遇到的问题</h3> 
<h4><a id="1Navicat_144"></a>1、使用Navicat连接时，出现以下错误</h4> 
<p><img src="https://images2.imgbox.com/ca/7c/qpvFPhHJ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>主要原因是mysql服务器要求的认证插件版本与客户端不一致造成的。</strong></p> 
<p>打开mysql命令行输入如下命令查看，系统用户对应的认证插件：<br> <img src="https://images2.imgbox.com/bd/ac/Uepsdtkd_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到root用户使用的plugin是caching_sha2_password，mysql官方网站有如下说明：<br> <img src="https://images2.imgbox.com/31/ef/KHOe0ebP_o.png" alt="在这里插入图片描述"></p> 
<p>意思是说caching_sha2_password是8.0默认的认证插件，必须使用支持此插件的客户端版本。</p> 
<p>plugin的作用之一就是处理后的密码格式和长度是不一样的，类似于使用MD5加密和使用base64加密一样对于同一个密码处理后的格式是不一样的。</p> 
<h4><a id="11_163"></a>1.1、解决</h4> 
<p>1.查看用户信息</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> host<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span>plugin<span class="token punctuation">,</span>authentication_string <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> 
<p>2.修改用户密码（最好直接复制粘贴，手敲可能会报错）</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span> 
</code></pre> 
<p>更新user为root，host为% 的密码为123456</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> 
<p>更新user为root，host为localhost 的密码为123456</p> 
<p>备注：host为 % 表示不限制ip localhost表示本机使用 plugin非mysql_native_password 则需要修改密码</p> 
<p>修改前：<br> <img src="https://images2.imgbox.com/8a/36/xtECeq2S_o.png" alt="在这里插入图片描述"><br> 修改后：<br> <img src="https://images2.imgbox.com/43/3e/aUfMM3vP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2Mysql_8__mysqld_Cant_create_directory__187"></a>2、在安装Mysql 8 的过程中报错 mysqld: Can’t create directory …</h4> 
<p>在初始化mysql的时候执行mysqld --initialize-insecure --user=mysql遇到一个报错 mysqld: Can’t create directory … (OS errno 2 - No such file or directory)。</p> 
<p>在网上搜了一遍，终于找到问题所在。<br> 其实就是my.ini文件出了问题。<br> mysql 8 的配置文件中basedir 和 datadir 的路径格式不对！！！<br> 网上贴的教程很多都是这样的：<br> <img src="https://images2.imgbox.com/39/62/HuugHwWU_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-txt">#设置mysql的安装目录
basedir=D:\software\mysql-8.0.34\
#设置mysql数据库的数据的存放目录
datadir=D:\software\mysql-8.0.34\data
</code></pre> 
<p><strong>实际应该是这样的</strong>：<br> <img src="https://images2.imgbox.com/4d/54/VwvevltC_o.png" alt="在这里插入图片描述"></p> 
<p><mark>需要用双斜杠</mark></p> 
<pre><code class="prism language-txt">#设置mysql的安装目录
basedir=D:\\software\\mysql-8.0.34\\
#设置mysql数据库的数据的存放目录
datadir=D:\\software\\mysql-8.0.34\\data
</code></pre> 
<p>———————————————————————————————————————————</p> 
<h3><a id="_213"></a>借鉴文章</h3> 
<p><a href="https://blog.csdn.net/qq_45929019/article/details/129380445">MySQL安装完整教程–5.7和8.0版本</a><br> <a href="https://blog.csdn.net/qq_39715000/article/details/120748498">Mysql 解决1251 client does not support …问题</a><br> <a href="https://blog.csdn.net/weixin_40608713/article/details/118051628">Mysql 8安装报错Can‘t create directory问题解决</a><br> <a href="https://www.cnblogs.com/beatle-go/p/17482523.html" rel="nofollow">windows环境下操作，同一台机器 如何跑两个mysql服务？</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51e641edefa87275a72f375ff98c2d12/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Springboot整合WebSocket实现主动向前端推送消息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/68f64a7b34ee9917fe7a5acf72890ada/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PHP 502bad gateway原因及解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>