<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>xstream运用，JAVA对象转xml，xml转JAVA对象 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c26906b5626ccb7c24659dfd3d78281a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="xstream运用，JAVA对象转xml，xml转JAVA对象">
  <meta property="og:description" content="目录
xstream
优点：
缺点：
XStream的应用场景
用到的依赖
代码实现
xml标签对应的实体类
Header
Package
Request
Response
TradeInfo
工具类
XmlUtils
执行结果
xstream XStream是一个Java类库，主要用于将对象序列化为XML（或JSON）或将XML（或JSON）反序列化为对象。XStream使用Java反射机制对要进行序列化的对象树的结构进行探索，无需对对象进行修改。它可以序列化内部字段，包括私有（private）和最终（final）字段，并支持非公开类以及内部类。在缺省情况下，XStream不需要配置映射关系，对象和字段将映射为同名XML元素。
优点： 易用性：XStream不需要额外的辅助类或映射文件，使得XML序列化不再繁琐。灵活性：支持多种数据类型转换，包括用户自定义的类型转换器。可读性：输出通常比其他工具更清晰和易于阅读。 缺点： 效率：相对于某些工具（如XMLEncoder），XStream在处理大型数据集时可能会较慢，因为它需要在每个对象实例上运行解析器。内存使用：XStream使用流操作可能导致较高的内存使用，特别是在处理大型数据集时。 XStream的应用场景 XStream的常见用途包括对象传输、持久化、配置以及单元测试等。它在许多项目中，特别是在支付API对接时，被用于实现Java对象和XML文档的互转。
用到的依赖 &lt;!--XML解析--&gt; &lt;dependency&gt; &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt; &lt;artifactId&gt;xstream&lt;/artifactId&gt; &lt;version&gt;1.4.20&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;dom4j&lt;/groupId&gt; &lt;artifactId&gt;dom4j&lt;/artifactId&gt; &lt;version&gt;1.6.1&lt;/version&gt; &lt;/dependency&gt; 代码实现 &lt;!--xml报文--&gt; &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt; &lt;Package&gt; &lt;Header&gt; &lt;RequestType&gt;131&lt;/RequestType&gt; &lt;SystemNo&gt;001&lt;/SystemNo&gt; &lt;SendTime&gt;2024-06-05 09:53:38&lt;/SendTime&gt; &lt;Status&gt;100&lt;/Status&gt; &lt;ErrorMessage /&gt; &lt;/Header&gt; &lt;Sign&gt;NgJzJyhoeXYd/TJvJitByhUR1UVMJ&#43;FjuMl4WVBjP0CsOM6owyX9nCn1c/IL&#43;OpVeSYkl4k60Du8nLa13wRB1oqFA8I2zel9&#43;Xiq7lAL0otIcdww4F9i5uULk2wpq8ApXcghO5suL54FPOutc&#43;2gWNUUmdP6fb2/L2RFKOlcBig=&lt;/Sign&gt; &lt;Response&gt; &lt;DepartmentCode&gt;5&lt;/DepartmentCode&gt; &lt;TransSourceCode&gt;0&lt;/TransSourceCode&gt; &lt;PayNo /&gt; &lt;PayAmount&gt;100&lt;/PayAmount&gt; &lt;RealPayAmount&gt;100&lt;/RealPayAmount&gt; &lt;PaymentTime&gt;2024-06-05 09:50:49&lt;/PaymentTime&gt; &lt;DealTime&gt;2024-06-05 09:50:49&lt;/DealTime&gt; &lt;PayType&gt;1&lt;/PayType&gt; &lt;PlatformCode&gt;35&lt;/PlatformCode&gt; &lt;PlatformName /&gt; &lt;OrderId&gt;1000000001678451&lt;/OrderId&gt; &lt;OrderStatus&gt;2&lt;/OrderStatus&gt; &lt;PageUrl&gt;https://blog.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-06T17:04:29+08:00">
    <meta property="article:modified_time" content="2024-06-06T17:04:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">xstream运用，JAVA对象转xml，xml转JAVA对象</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="xstream-toc" style="margin-left:40px;"><a href="#xstream" rel="nofollow">xstream</a></p> 
<p id="%E4%BC%98%E7%82%B9%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%E4%BC%98%E7%82%B9%EF%BC%9A" rel="nofollow">优点：</a></p> 
<p id="%E7%BC%BA%E7%82%B9%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%E7%BC%BA%E7%82%B9%EF%BC%9A" rel="nofollow">缺点：</a></p> 
<p id="XStream%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:40px;"><a href="#XStream%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">XStream的应用场景</a></p> 
<p id="%E7%94%A8%E5%88%B0%E7%9A%84%E4%BE%9D%E8%B5%96-toc" style="margin-left:40px;"><a href="#%E7%94%A8%E5%88%B0%E7%9A%84%E4%BE%9D%E8%B5%96" rel="nofollow">用到的依赖</a></p> 
<p id="%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-toc" style="margin-left:40px;"><a href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" rel="nofollow">代码实现</a></p> 
<p id="xml%E6%A0%87%E7%AD%BE%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB-toc" style="margin-left:40px;"><a href="#xml%E6%A0%87%E7%AD%BE%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB" rel="nofollow">xml标签对应的实体类</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Header-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Header" rel="nofollow">        Header</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Package-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Package" rel="nofollow">        Package</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Request-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Request" rel="nofollow">        Request</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Response-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Response" rel="nofollow">        Response</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0TradeInfo-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0TradeInfo" rel="nofollow">        TradeInfo</a></p> 
<p id="%E5%B7%A5%E5%85%B7%E7%B1%BB-toc" style="margin-left:40px;"><a href="#%E5%B7%A5%E5%85%B7%E7%B1%BB" rel="nofollow">工具类</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0XmlUtils-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0XmlUtils" rel="nofollow">        XmlUtils</a></p> 
<p id="%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C-toc" style="margin-left:40px;"><a href="#%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C" rel="nofollow">执行结果</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="xstream">xstream</h3> 
<p>XStream是一个Java类库，主要用于将对象序列化为XML（或JSON）或将XML（或JSON）反序列化为对象。XStream使用Java反射机制对要进行序列化的对象树的结构进行探索，无需对对象进行修改。它可以序列化内部字段，包括私有（private）和最终（final）字段，并支持非公开类以及内部类。在缺省情况下，XStream不需要配置映射关系，对象和字段将映射为同名XML元素。</p> 
<h3 id="%E4%BC%98%E7%82%B9%EF%BC%9A"><strong>优点</strong>：</h3> 
<ol><li><strong>易用性</strong>：XStream不需要额外的辅助类或映射文件，使得XML序列化不再繁琐。</li><li><strong>灵活性</strong>：支持多种数据类型转换，包括用户自定义的类型转换器。</li><li><strong>可读性</strong>：输出通常比其他工具更清晰和易于阅读。</li></ol> 
<h3 id="%E7%BC%BA%E7%82%B9%EF%BC%9A"><strong>缺点</strong>：</h3> 
<ol><li><strong>效率</strong>：相对于某些工具（如XMLEncoder），XStream在处理大型数据集时可能会较慢，因为它需要在每个对象实例上运行解析器。</li><li><strong>内存使用</strong>：XStream使用流操作可能导致较高的内存使用，特别是在处理大型数据集时。</li></ol> 
<h3 id="XStream%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><strong>XStream的应用场景</strong></h3> 
<p>XStream的常见用途包括对象传输、持久化、配置以及单元测试等。它在许多项目中，特别是在支付API对接时，被用于实现Java对象和XML文档的互转。</p> 
<h3 id="%E7%94%A8%E5%88%B0%E7%9A%84%E4%BE%9D%E8%B5%96">用到的依赖</h3> 
<pre><code class="language-XML">&lt;!--XML解析--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;
            &lt;artifactId&gt;xstream&lt;/artifactId&gt;
            &lt;version&gt;1.4.20&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;dom4j&lt;/groupId&gt;
            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;
            &lt;version&gt;1.6.1&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<h3 id="%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">代码实现</h3> 
<pre><code class="language-XML">&lt;!--xml报文--&gt;
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;Package&gt;
    &lt;Header&gt;
        &lt;RequestType&gt;131&lt;/RequestType&gt;
        &lt;SystemNo&gt;001&lt;/SystemNo&gt;
        &lt;SendTime&gt;2024-06-05 09:53:38&lt;/SendTime&gt;
        &lt;Status&gt;100&lt;/Status&gt;
        &lt;ErrorMessage /&gt;
    &lt;/Header&gt;
    &lt;Sign&gt;NgJzJyhoeXYd/TJvJitByhUR1UVMJ+FjuMl4WVBjP0CsOM6owyX9nCn1c/IL+OpVeSYkl4k60Du8nLa13wRB1oqFA8I2zel9+Xiq7lAL0otIcdww4F9i5uULk2wpq8ApXcghO5suL54FPOutc+2gWNUUmdP6fb2/L2RFKOlcBig=&lt;/Sign&gt;
    &lt;Response&gt;
        &lt;DepartmentCode&gt;5&lt;/DepartmentCode&gt;
        &lt;TransSourceCode&gt;0&lt;/TransSourceCode&gt;
        &lt;PayNo /&gt;
        &lt;PayAmount&gt;100&lt;/PayAmount&gt;
        &lt;RealPayAmount&gt;100&lt;/RealPayAmount&gt;
        &lt;PaymentTime&gt;2024-06-05 09:50:49&lt;/PaymentTime&gt;
        &lt;DealTime&gt;2024-06-05 09:50:49&lt;/DealTime&gt;
        &lt;PayType&gt;1&lt;/PayType&gt;
        &lt;PlatformCode&gt;35&lt;/PlatformCode&gt;
        &lt;PlatformName /&gt;
        &lt;OrderId&gt;1000000001678451&lt;/OrderId&gt;
        &lt;OrderStatus&gt;2&lt;/OrderStatus&gt;
        &lt;PageUrl&gt;https://blog.csdn.net/weixin_59383491?type=blog&lt;/PageUrl&gt;
        &lt;NotifyUrl&gt;https://blog.csdn.net/weixin_59383491?type=blog&lt;/NotifyUrl&gt;
        &lt;AutoErrMsg /&gt;
        &lt;BusinessTypeDetail /&gt;
        &lt;BusinessType /&gt;
        &lt;TradeList&gt;
            &lt;TradeIfo&gt;
                &lt;ProductId /&gt;
                &lt;ApplyPolicyNo /&gt;
                &lt;PersonnelName /&gt;
                &lt;PlanCode /&gt;
                &lt;ProductName&gt;一百减一是零&lt;/ProductName&gt;
                &lt;BatchDetailNo&gt;1010000202400000065&lt;/BatchDetailNo&gt;
                &lt;ProductType&gt;7&lt;/ProductType&gt;
                &lt;BatchPolicyNo /&gt;
                &lt;TradeDetailNo /&gt;
                &lt;TradeAmt&gt;100&lt;/TradeAmt&gt;
                &lt;OriginCode /&gt;
                &lt;OriginTradeNo /&gt;
            &lt;/TradeIfo&gt;
        &lt;/TradeList&gt;
    &lt;/Response&gt;
&lt;/Package&gt;</code></pre> 
<h3 id="xml%E6%A0%87%E7%AD%BE%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB">xml标签对应的实体类</h3> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Header">        Header</h4> 
<pre><code class="language-java">package com.yun.greedy.modules.util.xstream;

import com.thoughtworks.xstream.annotations.XStreamAlias;
import lombok.Data;

@XStreamAlias("Header")
@Data
public class Header {
    @XStreamAlias("RequestType")
    private String requestType;

    @XStreamAlias("SystemNo")
    private String systemNo;

    @XStreamAlias("SendTime")
    private String sendTime;

    @XStreamAlias("Status")
    private String status;

    @XStreamAlias("ErrorMessage")
    private String errorMessage;
}</code></pre> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Package">        Package</h4> 
<pre><code class="language-java">package com.yun.greedy.modules.util.xstream;

import com.thoughtworks.xstream.annotations.XStreamAlias;
import lombok.Data;

@XStreamAlias("Package")
@Data
public class Package {
    @XStreamAlias("Header")
    private Header head;

    @XStreamAlias("Sign")
    private String sign;

    @XStreamAlias("Request")
    private Request request;

    @XStreamAlias("Response")
    private Response response;
}</code></pre> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Request">        Request</h4> 
<pre><code class="language-java">package com.yun.greedy.modules.util.xstream;

import com.thoughtworks.xstream.annotations.XStreamAlias;
import lombok.Data;

import java.util.List;

@Data
@XStreamAlias("Request")
public class Request {
    @XStreamAlias("DepartmentCode")
    private String departmentCode;

    @XStreamAlias("TransSourceCode")
    private String transSourceCode;

    @XStreamAlias("PayType")
    private String payType;

    @XStreamAlias("PlatformCode")
    private String platformCode;

    @XStreamAlias("BankType")
    private String bankType;

    @XStreamAlias("PayAmount")
    private String payAmount;

    @XStreamAlias("PageUrl")
    private String pageUrl;

    @XStreamAlias("NotifyUrl")
    private String notifyUrl;

    @XStreamAlias("TradeNo")
    private String tradeNo;

    @XStreamAlias("TradeList")
    private List&lt;TradeInfo&gt; tradeList;
}</code></pre> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0Response">        Response</h4> 
<pre><code class="language-java">package com.yun.greedy.modules.util.xstream;

import com.thoughtworks.xstream.annotations.XStreamAlias;
import lombok.Data;

import java.util.List;

@Data
@XStreamAlias("Response")
public class Response {
    @XStreamAlias("DepartmentCode")
    private String departmentCode;

    @XStreamAlias("TransSourceCode")
    private String transSourceCode;

    @XStreamAlias("PayAmount")
    private String payAmount;

    @XStreamAlias("RealPayAmount")
    private String realPayAmount;

    @XStreamAlias("PaymentTime")
    private String paymentTime;

    @XStreamAlias("PayType")
    private String payType;

    @XStreamAlias("PlatformCode")
    private String platformCode;

    @XStreamAlias("PlatformName")
    private String platformName;

    @XStreamAlias("TradeNo")
    private String tradeNo;

    @XStreamAlias("OrderId")
    private String orderId;

    @XStreamAlias("OrderStatus")
    private String orderStatus;

    @XStreamAlias("PageUrl")
    private String pageUrl;

    @XStreamAlias("NotifyUrl")
    private String notifyUrl;

    @XStreamAlias("AutoErrMsg")
    private String autoErrMsg;

    @XStreamAlias("DealTime")
    private String dealTime;

    @XStreamAlias("PayNo")
    private String payNo;

    @XStreamAlias("BusinessTypeDetail")
    private String businessTypeDetail;

    @XStreamAlias("BusinessType")
    private String businessType;

    @XStreamAlias("TradeList")
    private List&lt;TradeInfo&gt; tradeList;
}</code></pre> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0TradeInfo">        TradeInfo</h4> 
<pre><code class="language-java">package com.yun.greedy.modules.util.xstream;

import com.thoughtworks.xstream.annotations.XStreamAlias;
import lombok.Data;

@Data
@XStreamAlias("TradeIfo")
public class TradeInfo {
    @XStreamAlias("ProductId")
    private String productId;

    @XStreamAlias("ApplyPolicyNo")
    private String applyPolicyNo;

    @XStreamAlias("PlanCode")
    private String planCode;

    @XStreamAlias("BatchPolicyNo")
    private String batchPolicyNo;

    @XStreamAlias("BatchDetailNo")
    private String batchDetailNo;

    @XStreamAlias("TradeDetailNo")
    private String tradeDetailNo;

    @XStreamAlias("PersonnelName")
    private String personnelName;

    @XStreamAlias("CertificateNo")
    private String certificateNo;

    @XStreamAlias("MobileTelephone")
    private String mobileTelephone;

    @XStreamAlias("TradeAmt")
    private String tradeAmt;

    @XStreamAlias("ProductType")
    private String productType;

    @XStreamAlias("ProductName")
    private String productName;

    @XStreamAlias("ViewProductUrl")
    private String viewProductUrl;

    @XStreamAlias("TradeCount")
    private String tradeCount;

    @XStreamAlias("InsuranceBeginTime")
    private String insuranceBeginTime;

    @XStreamAlias("OriginCode")
    private String originCode;

    @XStreamAlias("OriginTradeNo")
    private String originTradeNo;
}</code></pre> 
<h3 id="%E5%B7%A5%E5%85%B7%E7%B1%BB">工具类</h3> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0XmlUtils">        XmlUtils</h4> 
<pre><code class="language-java">package com.yun.greedy.modules.util;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.io.xml.Dom4JDriver;
import com.thoughtworks.xstream.security.AnyTypePermission;
import com.yun.greedy.modules.util.xstream.Package;
import com.yun.greedy.modules.util.xstream.*;
import org.dom4j.DocumentFactory;
import org.dom4j.io.OutputFormat;

import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.List;

public class XmlUtils {

    /*
     * 将XML报文转化为java对象
     */
    public static Object makeObjectFromXml(String docStr, Class[] classList) {
        XStream xstream = new XStream(new Dom4JDriver());
        //由于对象默认开启安全防护，尽量限制最低权限
        xstream.addPermission(AnyTypePermission.ANY);
        xstream.processAnnotations(classList);
        return xstream.fromXML(docStr);
    }

    /**
     * 将对象转化为xml报文
     *
     * @param object
     * @param b      是否显示为空的节点
     * @return
     */
    public static String objectToXml(Object object, boolean b) {
        if (b) {
            replaceNullValue(object);
        }
        OutputFormat outputFormat = new OutputFormat();
        outputFormat.setEncoding("UTF-8");
        outputFormat.setNewLineAfterDeclaration(false);//对象名称是否显示路径
//    outputFormat.setIndent(" ");
        outputFormat.setNewlines(true);//XML节点换行
        XStream xstream = new XStream(new Dom4JDriver(new DocumentFactory(), outputFormat));
        xstream.autodetectAnnotations(true);
        return xstream.toXML(object);
    }

    /**
     * changeFiledValue(替换字符串为null值的情况)
     *
     * @param obj
     * @return void
     */
    private static void replaceNullValue(Object obj) {
        if (obj == null) {
            return;
        }
        Field[] fields = obj.getClass().getDeclaredFields();
        for (Field field : fields) {
            try {
                String type = field.getType().getName();
                field.setAccessible(true);
                Object value = field.get(obj);
                if ("java.lang.String".equals(type)) {
                    String genericStr = field.toGenericString();
                    if (!genericStr.contains("final")) {
                        field.set(obj, (value == null ? "" : value));
                    }
                } else if ("java.util.List".equals(type)) {
                    List list = (List) value;
                    if (list != null &amp;&amp; list.size() &gt; 0) {
                        for (int i = 0; i &lt; list.size(); i++) {
                            Object subObj = list.get(i);
                            replaceNullValue(subObj);
                        }
                    }
                } else {
                    replaceNullValue(value);
                }
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
                System.out.println("返回报文对象替换null值出错：" + e.getMessage());
            } catch (IllegalAccessException e) {
                e.printStackTrace();
                System.out.println("返回报文对象替换null值出错：" + e.getMessage());
            }
        }
    }

    public static void main(String[] args) {
        String strXML = "&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n" +
                "&lt;Package&gt;\n" +
                "    &lt;Header&gt;\n" +
                "        &lt;RequestType&gt;131&lt;/RequestType&gt;\n" +
                "        &lt;SystemNo&gt;001&lt;/SystemNo&gt;\n" +
                "        &lt;SendTime&gt;2024-06-05 09:53:38&lt;/SendTime&gt;\n" +
                "        &lt;Status&gt;100&lt;/Status&gt;\n" +
                "        &lt;ErrorMessage /&gt;\n" +
                "    &lt;/Header&gt;\n" +
                "    &lt;Sign&gt;NgJzJyhoeXYd/TJvJitByhUR1UVMJ+FjuMl4WVBjP0CsOM6owyX9nCn1c/IL+OpVeSYkl4k60Du8nLa13wRB1oqFA8I2zel9+Xiq7lAL0otIcdww4F9i5uULk2wpq8ApXcghO5suL54FPOutc+2gWNUUmdP6fb2/L2RFKOlcBig=&lt;/Sign&gt;\n" +
                "    &lt;Response&gt;\n" +
                "        &lt;DepartmentCode&gt;5&lt;/DepartmentCode&gt;\n" +
                "        &lt;TransSourceCode&gt;0&lt;/TransSourceCode&gt;\n" +
                "        &lt;PayNo /&gt;\n" +
                "        &lt;PayAmount&gt;100&lt;/PayAmount&gt;\n" +
                "        &lt;RealPayAmount&gt;100&lt;/RealPayAmount&gt;\n" +
                "        &lt;PaymentTime&gt;2024-06-05 09:50:49&lt;/PaymentTime&gt;\n" +
                "        &lt;DealTime&gt;2024-06-05 09:50:49&lt;/DealTime&gt;\n" +
                "        &lt;PayType&gt;1&lt;/PayType&gt;\n" +
                "        &lt;PlatformCode&gt;35&lt;/PlatformCode&gt;\n" +
                "        &lt;PlatformName /&gt;\n" +
                "        &lt;OrderId&gt;1000000001678451&lt;/OrderId&gt;\n" +
                "        &lt;OrderStatus&gt;2&lt;/OrderStatus&gt;\n" +
                "        &lt;PageUrl&gt;https://blog.csdn.net/weixin_59383491?type=blog&lt;/PageUrl&gt;\n" +
                "        &lt;NotifyUrl&gt;https://blog.csdn.net/weixin_59383491?type=blog&lt;/NotifyUrl&gt;\n" +
                "        &lt;AutoErrMsg /&gt;\n" +
                "        &lt;BusinessTypeDetail /&gt;\n" +
                "        &lt;BusinessType /&gt;\n" +
                "        &lt;TradeList&gt;\n" +
                "            &lt;TradeIfo&gt;\n" +
                "                &lt;ProductId /&gt;\n" +
                "                &lt;ApplyPolicyNo /&gt;\n" +
                "                &lt;PersonnelName /&gt;\n" +
                "                &lt;PlanCode /&gt;\n" +
                "                &lt;ProductName&gt;一百减一是零&lt;/ProductName&gt;\n" +
                "                &lt;BatchDetailNo&gt;1010000202400000065&lt;/BatchDetailNo&gt;\n" +
                "                &lt;ProductType&gt;7&lt;/ProductType&gt;\n" +
                "                &lt;BatchPolicyNo /&gt;\n" +
                "                &lt;TradeDetailNo /&gt;\n" +
                "                &lt;TradeAmt&gt;100&lt;/TradeAmt&gt;\n" +
                "                &lt;OriginCode /&gt;\n" +
                "                &lt;OriginTradeNo /&gt;\n" +
                "            &lt;/TradeIfo&gt;\n" +
                "        &lt;/TradeList&gt;\n" +
                "    &lt;/Response&gt;\n" +
                "&lt;/Package&gt;";
        Class[] classes = {Package.class, Header.class, Response.class, TradeInfo.class};
        Package packageObj = (Package) XmlUtils.makeObjectFromXml(strXML, classes);
        String str = null != packageObj ?
                "XML解析成功！" + packageObj.toString() : "报文解析失败！";
        System.out.println("========XML转对象========");
        System.out.println(str);
        Request re = new Request();
        re.setDepartmentCode("123");
        re.setTransSourceCode("TS");
        re.setBankType("CS");
        re.setPageUrl("https://blog.csdn.net/weixin_59383491?type=blog");
        TradeInfo tradeInfo = new TradeInfo();
        tradeInfo.setPersonnelName("一百减一是零");
        tradeInfo.setViewProductUrl("https://blog.csdn.net/weixin_59383491?type=blog");
        TradeInfo tradeInfo2 = new TradeInfo();
        tradeInfo2.setPersonnelName("一百减一是零");
        tradeInfo2.setViewProductUrl("https://blog.csdn.net/weixin_59383491?type=blog");
        List&lt;TradeInfo&gt; tradeInfoList = new ArrayList&lt;&gt;();
        tradeInfoList.add(tradeInfo);
        tradeInfoList.add(tradeInfo2);
        re.setTradeList(tradeInfoList);
        System.out.println("========对象转XML========");
        String s = XmlUtils.objectToXml(re, false);
        System.out.println(s);

    }
}</code></pre> 
<h3 id="%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C">执行结果</h3> 
<p><img alt="" height="366" src="https://images2.imgbox.com/75/8b/jiZmw1Ys_o.png" width="729"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1548b0b6aa645155716bfed2765be7c7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI框架之Spring AI与Spring Cloud Alibaba AI使用讲解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c57df3b20a0132e67c457e95a87c7fc3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android 平台编解码——软解、硬解对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>