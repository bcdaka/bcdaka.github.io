<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3&#43;ts 使用vue3-ace-editor实现Json编辑器 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a754d27dbe414cf255a5d0ab0e82caa0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="vue3&#43;ts 使用vue3-ace-editor实现Json编辑器">
  <meta property="og:description" content="1、效果图
输入代码，点击格式化就出现以上效果，再点击压缩，是以下效果
2、安装
npm i vue3-ace-editor 3、使用
新建aceConfig.js文件
// ace配置，使用动态加载来避免第一次加载开销 import ace from &#39;ace-builds&#39; // 导入不同的主题模块，并设置对应 URL import themeGithubUrl from &#39;ace-builds/src-noconflict/theme-github?url&#39; ace.config.setModuleUrl(&#39;ace/theme/github&#39;, themeGithubUrl) import themeChromeUrl from &#39;ace-builds/src-noconflict/theme-chrome?url&#39; ace.config.setModuleUrl(&#39;ace/theme/chrome&#39;, themeChromeUrl) import themeMonokaiUrl from &#39;ace-builds/src-noconflict/theme-monokai?url&#39; ace.config.setModuleUrl(&#39;ace/theme/monokai&#39;, themeMonokaiUrl) // 导入不同语言的语法模式模块，并设置对应 URL (所有支持的主题和模式：node_modules/ace-builds/src-noconflict) import modeJsonUrl from &#39;ace-builds/src-noconflict/mode-json?url&#39; ace.config.setModuleUrl(&#39;ace/mode/json&#39;, modeJsonUrl) import modeJavascriptUrl from &#39;ace-builds/src-noconflict/mode-javascript?url&#39; ace.config.setModuleUrl(&#39;ace/mode/javascript&#39;, modeJavascriptUrl) import modeHtmlUrl from &#39;ace-builds/src-noconflict/mode-html?url&#39; ace.config.setModuleUrl(&#39;ace/mode/html&#39;, modeHtmlUrl) import modePythonUrl from &#39;ace-builds/src-noconflict/mode-python?url&#39; ace.config.setModuleUrl(&#39;ace/mode/yaml&#39;, modePythonUrl) // 用于完成语法检查、代码提示、自动补全等代码编辑功能，必须注册模块 ace/mode/lang _ worker，并设置选项 useWorker: true import workerBaseUrl from &#39;ace-builds/src-noconflict/worker-base?">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-21T14:16:21+08:00">
    <meta property="article:modified_time" content="2024-06-21T14:16:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3&#43;ts 使用vue3-ace-editor实现Json编辑器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1、效果图</p> 
<p><img alt="" height="240" src="https://images2.imgbox.com/10/73/L5ZPRb2Z_o.png" width="951"></p> 
<p>输入代码，点击格式化就出现以上效果，再点击压缩，是以下效果<br><img alt="" height="102" src="https://images2.imgbox.com/c2/1b/bPWFlH5v_o.png" width="941">2、安装</p> 
<pre><code>npm i vue3-ace-editor</code></pre> 
<p>3、使用</p> 
<p>新建aceConfig.js文件</p> 
<pre><code>// ace配置，使用动态加载来避免第一次加载开销
import ace from 'ace-builds'

// 导入不同的主题模块，并设置对应 URL
import themeGithubUrl from 'ace-builds/src-noconflict/theme-github?url'
ace.config.setModuleUrl('ace/theme/github', themeGithubUrl)

import themeChromeUrl from 'ace-builds/src-noconflict/theme-chrome?url'
ace.config.setModuleUrl('ace/theme/chrome', themeChromeUrl)

import themeMonokaiUrl from 'ace-builds/src-noconflict/theme-monokai?url'
ace.config.setModuleUrl('ace/theme/monokai', themeMonokaiUrl)

// 导入不同语言的语法模式模块，并设置对应 URL (所有支持的主题和模式：node_modules/ace-builds/src-noconflict)
import modeJsonUrl from 'ace-builds/src-noconflict/mode-json?url'
ace.config.setModuleUrl('ace/mode/json', modeJsonUrl)

import modeJavascriptUrl from 'ace-builds/src-noconflict/mode-javascript?url'
ace.config.setModuleUrl('ace/mode/javascript', modeJavascriptUrl)

import modeHtmlUrl from 'ace-builds/src-noconflict/mode-html?url'
ace.config.setModuleUrl('ace/mode/html', modeHtmlUrl)

import modePythonUrl from 'ace-builds/src-noconflict/mode-python?url'
ace.config.setModuleUrl('ace/mode/yaml', modePythonUrl)

// 用于完成语法检查、代码提示、自动补全等代码编辑功能，必须注册模块 ace/mode/lang _ worker，并设置选项 useWorker: true
import workerBaseUrl from 'ace-builds/src-noconflict/worker-base?url'
ace.config.setModuleUrl('ace/mode/base', workerBaseUrl)

import workerJsonUrl from 'ace-builds/src-noconflict/worker-json?url' // for vite
ace.config.setModuleUrl('ace/mode/json_worker', workerJsonUrl)

import workerJavascriptUrl from 'ace-builds/src-noconflict/worker-javascript?url'
ace.config.setModuleUrl('ace/mode/javascript_worker', workerJavascriptUrl)

import workerHtmlUrl from 'ace-builds/src-noconflict/worker-html?url'
ace.config.setModuleUrl('ace/mode/html_worker', workerHtmlUrl)

// 导入不同语言的代码片段，提供代码自动补全和代码块功能
import snippetsJsonUrl from 'ace-builds/src-noconflict/snippets/json?url'
ace.config.setModuleUrl('ace/snippets/json', snippetsJsonUrl)

import snippetsJsUrl from 'ace-builds/src-noconflict/snippets/javascript?url'
ace.config.setModuleUrl('ace/snippets/javascript', snippetsJsUrl)

import snippetsHtmlUrl from 'ace-builds/src-noconflict/snippets/html?url'
ace.config.setModuleUrl('ace/snippets/html', snippetsHtmlUrl)

import snippetsPyhontUrl from 'ace-builds/src-noconflict/snippets/python?url'
ace.config.setModuleUrl('ace/snippets/javascript', snippetsPyhontUrl)

// 启用自动补全等高级编辑支持，
import extSearchboxUrl from 'ace-builds/src-noconflict/ext-searchbox?url'
ace.config.setModuleUrl('ace/ext/searchbox', extSearchboxUrl)

// 启用自动补全等高级编辑支持
import 'ace-builds/src-noconflict/ext-language_tools'
ace.require('ace/ext/language_tools')
</code></pre> 
<p>4、在页面使用</p> 
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;div class="flex justify-between mb-2"&gt;
      &lt;el-tag color="#eff0ff" effect="light"&gt;json&lt;/el-tag&gt;
      &lt;div&gt;
        &lt;el-button color="#8769db" size="small" @click="jsonFormat"&gt;{<!-- -->{ $t('format') }}&lt;/el-button&gt;
        &lt;el-button size="small" @click="jsonNoFormat"&gt;{<!-- -->{ $t('zip') }}&lt;/el-button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;v-ace-editor
      v-model:value="content"
      lang="json"
      theme="chrome"
      :options="options"
      class="w-full text-base pt-5"
      :readonly="options.readOnly"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { ref, reactive, watch } from 'vue'
import emitter from '@/utils/emitter'
import { VAceEditor } from 'vue3-ace-editor'
import './aceConfig.js'

const content = ref('') // 显示的内容

const options = reactive({
  useWorker: true, // 启用语法检查,必须为true
  enableBasicAutocompletion: true, // 自动补全
  enableLiveAutocompletion: true, // 智能补全
  enableSnippets: true, // 启用代码段
  showPrintMargin: false, // 去掉灰色的线，printMarginColumn
  highlightActiveLine: false, // 高亮行
  highlightSelectedWord: true, // 高亮选中的字符
  tabSize: 4, // tab锁进字符
  fontSize: 14, // 设置字号
  wrap: false, // 是否换行
  readOnly: false, // 是否可编辑
  minLines: 1, // 最小行数，minLines和maxLines同时设置之后，可以不用给editor再设置高度
  maxLines: 50, // 最大行数
})

// JSON格式化
const jsonFormat = () =&gt; {
  try {
    content.value = JSON.stringify(JSON.parse(content.value), null, 2)
  } catch (e) {
    jsonError(e)
  }
}

// JSON压缩
const jsonNoFormat = () =&gt; {
  try {
    content.value = JSON.stringify(JSON.parse(content.value))
  } catch (e) {
    jsonError(e)
  }
}

watch(
  () =&gt; content.value,
  (newContent) =&gt; {
    emitter.emit('handleCondition', newContent)
  },
  { deep: true, immediate: true },
)

const jsonError = (e: any) =&gt; {
  console.log(`JSON字符串错误：${e.message}`)
}
&lt;/script&gt;

&lt;style&gt;
.ace_gutter {
  background-color: transparent !important;
}
.ace-chrome .ace_gutter-active-line {
  background-color: transparent !important;
}
&lt;/style&gt;
</code></pre> 
<p>参考：<a href="https://blog.csdn.net/ganyingxie123456/article/details/136703634" title="vue3-ace-editor使用记录-CSDN博客">vue3-ace-editor使用记录-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23c5f3f12c9fcdcc2bd19e3ce4dfcd09/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">线性代数|机器学习-P16矩阵A的导数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/719468cb6448a4fc7ab780eae83dc54a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">河北机械元宇宙：探索未来科技的新篇章</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>