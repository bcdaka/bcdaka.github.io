<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>docker的安装&#43;docker镜像的基本操作 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/efe6482c64569496f60449e772bd3dbc/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="docker的安装&#43;docker镜像的基本操作">
  <meta property="og:description" content="一．docker的介绍
1、Docker 是什么？ Docker 是⼀个开源的应⽤容器引擎，可以实现虚拟化，完全采⽤“沙 盒”机制，容器之间不会存在任何接⼝。 Docker 通过 Linux Container（容器）技术将任意类型的应⽤进⾏包 装，变成⼀种轻量级、标准化、可移植、⾃管理的组件。在包装应 ⽤的同时，可连带该应⽤的依赖和环境⼀并进⾏打包，所以可以将 这种“包”移植到任意环境去运⾏，省去兼容性的问题。
Docker 的优缺点 （1）优点 1. 体积⼩：减⼩系统的开销值，⼀台主机可以运⾏上千个容器。 2. 启动迅捷：更快速的交付和部署，docker容器 ，⽐传统虚拟机 要快很多，docker核⼼解决的问题就是利⽤容器实现VM类似的 功能。3. 操作⽅便：通过配置 dockerfile 便⽀持灵活的⾃动化创建和部 署。 4. 更轻松的扩展：可以实现更简单的、更可靠的迁移，避免了兼容 性等问题。 5. 更强的可扩展性和可移植性。 （2）缺点 1. 安全问题：如果没有正确配置，⼀个容器中的恶意代码可能会影 响到主机上的其他容器以及主机本身的安全。 2. 存储问题：当使⽤⼤量容器时，存储和管理容器映像可以变得⾮ 常困难。这可能需要使⽤分布式存储或其他解决⽅案来管理⼤量 容器的存储。 3. 性能问题：在某些情况下，容器和虚拟机相⽐会导致性能损失。 这些性能问题越来越少，但是仍然需要考虑。 4. ⽹络问题：Docker 可能会在⽹络配置上存在⼀些问题，这可能 需要更多的时间来诊断和解决。 5. 复杂性：Docker 是⼀个⾮常灵活的系统，但这同时也让它更加 复杂。⻓时间使⽤ Docker 会产⽣⼤量的脚本和配置⽂件，这些 可能变得难以维护。 6. 资源消耗：使⽤ Docker 必须占⽤⼀些资源，包括 CPU、内 存、磁盘等等。如果运⾏容器的主机资源不⾜，可能会导致性能 问题。7. 学习曲线：Docker 是⼀个相对新的技术，相⽐传统环境需要⼀ 定的学习曲线。需要了解Docker 基本概念、命令和配置⽂件 等。 8. 需要花费时间配置和管理：使⽤ Docker 需要花时间配置和管理 容器集群和应⽤程序。需要配置每个容器，管理 Jenkins、 Kubernetes 等运⾏ Docker 容器的⼯具。 9.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-22T17:19:18+08:00">
    <meta property="article:modified_time" content="2024-08-22T17:19:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">docker的安装&#43;docker镜像的基本操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">一．docker的介绍</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">1</span><span style="color:#000000;">、</span><span style="color:#000000;">Docker </span><span style="color:#000000;">是什么？ </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Docker </span><span style="color:#000000;">是⼀个开源的应⽤容器引擎，可以实现虚拟化，完全采⽤</span><span style="color:#000000;">“</span><span style="color:#000000;">沙 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">盒</span><span style="color:#000000;">”</span><span style="color:#000000;">机制，容器之间不会存在任何接⼝。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Docker </span><span style="color:#000000;">通过 </span><span style="color:#000000;">Linux Container</span><span style="color:#000000;">（容器）技术将任意类型的应⽤进⾏包 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">装，变成⼀种轻量级、标准化、可移植、⾃管理的组件。在包装应 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">⽤的同时，可连带该应⽤的依赖和环境⼀并进⾏打包，所以可以将 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">这种</span><span style="color:#000000;">“</span><span style="color:#000000;">包</span><span style="color:#000000;">”</span><span style="color:#000000;">移植到任意环境去运⾏，省去兼容性的问题。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Docker </span><span style="color:#000000;">的优缺点 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（</span><span style="color:#000000;">1</span><span style="color:#000000;">）优点 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">1. </span><span style="color:#000000;">体积⼩：</span><span style="color:#000000;">减⼩系统的开销值，⼀台主机可以运⾏上千个容器。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">2. </span><span style="color:#000000;">启动迅捷：</span><span style="color:#000000;">更快速的交付和部署，</span><span style="color:#000000;">docker</span><span style="color:#000000;">容器 ，⽐传统虚拟机 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">要快很多，</span><span style="color:#000000;">docker</span><span style="color:#000000;">核⼼解决的问题就是利⽤容器实现</span><span style="color:#000000;">VM</span><span style="color:#000000;">类似的 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">功能。</span><span style="color:#000000;">3. </span><span style="color:#000000;">操作⽅便：</span><span style="color:#000000;">通过配置</span><span style="color:#000000;"> dockerfile </span><span style="color:#000000;">便⽀持灵活的⾃动化创建和部 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">署。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4. </span><span style="color:#000000;">更轻松的扩展：</span><span style="color:#000000;">可以实现更简单的、更可靠的迁移，避免了兼容 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">性等问题。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">5. </span><span style="color:#000000;">更强的可扩展性和可移植性。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（</span><span style="color:#000000;">2</span><span style="color:#000000;">）缺点 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">1. </span><span style="color:#000000;">安全问题：</span><span style="color:#000000;">如果没有正确配置，⼀个容器中的恶意代码可能会影 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">响到主机上的其他容器以及主机本身的安全。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">2. </span><span style="color:#000000;">存储问题：</span><span style="color:#000000;">当使⽤⼤量容器时，存储和管理容器映像可以变得⾮ </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">常困难。这可能需要使⽤分布式存储或其他解决⽅案来管理⼤量 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">容器的存储。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">3. </span><span style="color:#000000;">性能问题：</span><span style="color:#000000;">在某些情况下，容器和虚拟机相⽐会导致性能损失。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">这些性能问题越来越少，但是仍然需要考虑。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4. </span><span style="color:#000000;">⽹络问题：</span><span style="color:#000000;">Docker </span><span style="color:#000000;">可能会在⽹络配置上存在⼀些问题，这可能 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">需要更多的时间来诊断和解决。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">5. </span><span style="color:#000000;">复杂性：</span><span style="color:#000000;">Docker </span><span style="color:#000000;">是⼀个⾮常灵活的系统，但这同时也让它更加 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">复杂。⻓时间使⽤</span><span style="color:#000000;"> Docker </span><span style="color:#000000;">会产⽣⼤量的脚本和配置⽂件，这些 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">可能变得难以维护。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">6. </span><span style="color:#000000;">资源消耗：</span><span style="color:#000000;">使⽤</span><span style="color:#000000;"> Docker </span><span style="color:#000000;">必须占⽤⼀些资源，包括</span><span style="color:#000000;"> CPU</span><span style="color:#000000;">、内 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">存、磁盘等等。如果运⾏容器的主机资源不⾜，可能会导致性能 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">问题。</span><span style="color:#000000;">7. </span><span style="color:#000000;">学习曲线：</span><span style="color:#000000;">Docker </span><span style="color:#000000;">是⼀个相对新的技术，相⽐传统环境需要⼀ </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">定的学习曲线。需要了解</span><span style="color:#000000;">Docker </span><span style="color:#000000;">基本概念、命令和配置⽂件 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">等。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">8. </span><span style="color:#000000;">需要花费时间配置和管理：</span><span style="color:#000000;">使⽤</span><span style="color:#000000;"> Docker </span><span style="color:#000000;">需要花时间配置和管理 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">容器集群和应⽤程序。需要配置每个容器，管理</span><span style="color:#000000;"> Jenkins</span><span style="color:#000000;">、 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Kubernetes </span><span style="color:#000000;">等运⾏</span><span style="color:#000000;"> Docker </span><span style="color:#000000;">容器的⼯具。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">9. </span><span style="color:#000000;">映像构建复杂：</span><span style="color:#000000;">构建</span><span style="color:#000000;">Docker</span><span style="color:#000000;">映像需要按照特定格式编写 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Dockerfile </span><span style="color:#000000;">脚本，需要遵循⼀定的规范和流程，这可能需要更多 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">的时间和精⼒。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Docker </span><span style="color:#000000;">核⼼概念 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">1. </span><span style="color:#000000;">镜像（</span><span style="color:#000000;">images</span><span style="color:#000000;">）：</span><span style="color:#000000;">⼀个⾯向</span><span style="color:#000000;"> docker </span><span style="color:#000000;">容器引擎的只读模板，也 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">是容器的基础，类似于</span><span style="color:#000000;"> iso </span><span style="color:#000000;">镜像⽂件。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">2. </span><span style="color:#000000;">容器（</span><span style="color:#000000;">container</span><span style="color:#000000;">）：</span><span style="color:#000000;">基于镜像所创建的虚拟实例，相当于⼀个 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">简易的</span><span style="color:#000000;"> Linux </span><span style="color:#000000;">环境，可启停，且多个容器之间互相隔离。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">3. </span><span style="color:#000000;">仓库（</span><span style="color:#000000;">Repository</span><span style="color:#000000;">）：</span><span style="color:#000000;">集中存放</span><span style="color:#000000;"> docker </span><span style="color:#000000;">镜像的位置，可使⽤ </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">docker pull </span><span style="color:#000000;">或</span><span style="color:#000000;"> push </span><span style="color:#000000;">命令下载或上传到私有或公有仓库。 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4. </span><span style="color:#000000;">仓库注册服务器（</span><span style="color:#000000;">registry</span><span style="color:#000000;">）：</span><span style="color:#000000;">存放仓库的地⽅，如果没有私有 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">仓库，则使⽤公共仓库</span><span style="color:#000000;"> docker hub</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">二</span><span style="color:#000000;">．安装docker</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">1.配置环境：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# cat &lt;&lt; EOF | tee /etc/modules-load.d/k8s.conf</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; overlay</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; br_netfilter</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; EOF</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">overlay</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">br_netfilter</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# modprobe overlay</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# modprobe br_netfilter</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# cat &lt;&lt; EOF | tee /etc/sysctl.d/k8s.conf</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; net.bridge.bridge-nf-call-iptables = 1</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; net.bridge.bridge-nf-call-ip6tables = 1</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; net.ipv4.ip_forward = 1</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">&gt; EOF</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">net.bridge.bridge-nf-call-iptables = 1</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">net.bridge.bridge-nf-call-ip6tables = 1</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">net.ipv4.ip_forward = 1</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# sysctl --system</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">2.安装：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# yum install -y yum-utils device-mapper-persistent-data lvm2</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">3.</span><span style="color:#000000;">添加仓库：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin -y</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">4.</span><span style="color:#000000;">启动服务：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl start docker.service</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">5.</span><span style="color:#000000;">查看现有的镜像：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker images</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">6.</span><span style="color:#000000;">搜索镜像：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker search tomcat</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">三</span><span style="color:#000000;">．</span><span style="color:#000000;">Docker的基本操作</span></p> 
<ol><li style="text-align:justify;"><span style="color:#000000;">镜像操作</span></li></ol> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/97/b3/DwZha9mq_o.png"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（1）</span><span style="color:#000000;">配置docker镜像站：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# vim /etc/docker/daemon.json</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">        "registry-mirrors": [</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://do.nark.eu.org",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://dc.j8.work",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://docker.m.daocloud.io",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://dockerproxy.com",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://docker.mirrors.ustc.edu.cn",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://docker.nju.edu.cn"</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">        ]</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl restart docker.service</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（2）</span><span style="color:#000000;">下载centos镜像：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker pull centos</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker images</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">centos       latest    5d0da3dc9764   2 years ago   231MB</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（3）</span><span style="color:#000000;">运行并创建容器：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker run -i -t --name=c0 centos:latest /bin/bash</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">docker是软件 -i是交互 -t是允许在终端运行，取名为c0，latest是版本</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">现在是已经进入了一个新系统</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（4）</span><span style="color:#000000;">配置阿里云的yum仓库：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be ~]# rm -rf /etc/yum.repos.d/*</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be ~]# curl -o /etc/yum.repos.d/CentOS-Base.repo </span><a href="https://mirrors.aliyun.com/repo/Centos-vault-8.5.21" rel="nofollow" title="https://mirrors.aliyun.com/repo/Centos-vault-8.5.21">https://mirrors.aliyun.com/repo/Centos-vault-8.5.21</a></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">ls /etc/yum.repos.d/</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">yum clean all &amp;&amp; yum makecache</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">yum -y install iproute</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">yum -y install httpd</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">yum -y install net-tools</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">cat /etc/redhat-release</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">echo </span><span style="color:#000000;">“</span><span style="color:#000000;">docker_httpd_server</span><span style="color:#000000;">”</span><span style="color:#000000;"> &gt; /var/www/html/index.html</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（5）</span><span style="color:#000000;">启动服务:</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">httpd -k start</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（6）访问</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">访问自身：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">curl </span><a href="http://localhost" rel="nofollow" title="http://localhost:80">http://localhost:80</a></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">在宿主机上访问：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# curl 172.17.0.2</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">docker_httpd_server</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">无法在物理机上访问，也无法ping到这个主机</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">如果没有指令正在执行，容器就会停止</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be ~]# exit</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">（7）</span><span style="color:#000000;">重启容器：</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker start c0</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">c0</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker attach c0</span><span style="color:#000000;">   //将c0的终端挂载到当前的宿主机上面来</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be /]# </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be /]# netstat -lnput|grep 80</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be /]# httpd -k start </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be /]# curl localhost</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">docker_httpd_server</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">以上是退出之后就没进程了，需要从新启动</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">期望退出想继续运行：ctrl+p+q(按住ctrl不松手，先按p再按q)</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">四</span><span style="color:#000000;">．</span><span style="color:#000000;">docker远程管理</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">管理步骤：</span></p> 
<ol><li style="text-align:justify;"><span style="color:#000000;">停用</span><span style="color:#000000;">docker</span><span style="color:#000000;">服务</span></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@c28bcbe962be /]# exit</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">exit</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl stop docker</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">2.</span><span style="color:#000000;">进入配置文件</span><span style="color:#000000;">修改</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# vim /etc/docker/daemon.json </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">{<!-- --></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">        "registry-mirrors": [</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://do.nark.eu.org",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://dc.j8.work",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://docker.m.daocloud.io",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://dockerproxy.com",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://docker.mirrors.ustc.edu.cn",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">                "https://docker.nju.edu.cn"</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">        ]</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">,</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">        "hosts": [</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">           "tcp://0.0.0.0:2375",</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">           "unix:///var/run/docker.sock"</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">        ]</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">}</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl start docker</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# vim /usr/lib/systemd/system/docker.service </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">ExecStart=/usr/bin/dockerd </span><span style="color:#000000;">//这行剩下的删了</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl stop docker.service</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl start docker.service</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">3.加载daemon.json</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl daemon-reload</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">4.启动服务</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# systemctl start docker.service</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">5.查看状态</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# netstat -lnput|grep 2375</span><span style="color:#000000;"> //确保端口打开</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">tcp6       0      0 :::2375                 :::*                    LISTEN      40705/dockerd       </span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# ls -lh /var/run/</span><span style="color:#000000;">     //确保docker.sock文件在</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">srw-rw----.  1 root    docker     0 8月  22 16:10 docker.sock</span><span style="color:#000000;">  //出现这个就行</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">根据以上允许远程连接，需要2375端口打开，查看有docker.sock文件则就可以远程连接</span></p> 
<ol><li style="text-align:justify;"><span style="color:#000000;">远程管理</span></li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">[root@docker0 ~]# docker -H 192.168.2.13 images</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#000000;">centos       latest    5d0da3dc9764   2 years ago   231MB</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/edfc3419b6cc0e0e59c29ef79c284fe2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">122-域信息收集&amp;应用网络凭据&amp;CS插件&amp;Adfind&amp;BloodHound</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0340ed2c537c5387449a7b6ac89ebe80/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">系统架构师学习笔记 （一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>