<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在 Windows 中安装部署并启动连接 MongoDB 7.x（命令行方式启动、配置文件方式启动、将启动命令安装为系统服务实现开机自启） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/225b3641afba1bbfc9706861cc63d082/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="在 Windows 中安装部署并启动连接 MongoDB 7.x（命令行方式启动、配置文件方式启动、将启动命令安装为系统服务实现开机自启）">
  <meta property="og:description" content="MongoDB 的下载 下载地址：https://www.mongodb.com/try/download/community
这里需要对 MongoDB 的版本号说明一下：
MongoDB 版本号的命名规则是 x.y.z，当其中的 y 是奇数时表示当前的版本为开发版，当其中的 y 是偶数时表示当前的版本为稳定版，所以我们下载 MongoDB 时选择版本号 y 是偶数的版本下载，其中的 z 是修正版本号，数字越大越好
接下来，我们选择下载 MongoDB 的压缩包进行下载（解压即安装）
MongoDB 的安装 我们将 MongoDB 的压缩包下载到本地后，根据自身需要将 MongoDB 的压缩包存放并解压到合适的目录，压缩包解压完成即安装完成
配置 MongoDB 环境变量 接下来，我们将 MongoDB 安装根目录下的 bin 目录配置到系统环境变量 Path 中，以便于我们在任何位置可以启动 MongoDB 或者执行 MongoDB 相关的可执行文件
进入配置系统变量界面：我的电脑=&gt;鼠标右键=&gt;属性=&gt;高级系统设置=&gt;环境变量=&gt;系统变量
MongoDB 的启动 在 MongoDB 启动前，我们还需要创建一个目录，用于存放 MongoDB 中的数据库相关信息。
在 MongoDB 安装位置的根目录中创建 data/db 目录，用于存放 MongoDB 中的数据库相关信息；在 MongoDB 安装位置的根目录中创建 logs 目录，用于存放 MongoDB 启动运行过程中的相关日志信息。
命令行参数方式启动 我们可以在命令行窗口中，执行如下命令，启动 MongoDB 服务，并指定 MongoDB 中数据库的相关信息的存放位置为 MongoDB 安装位置的根目录中的 data/db 目录，指定日志信息的存放位置为 MongoDB 安装位置的根目录下的 logs/mongo.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-02T15:30:51+08:00">
    <meta property="article:modified_time" content="2024-04-02T15:30:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在 Windows 中安装部署并启动连接 MongoDB 7.x（命令行方式启动、配置文件方式启动、将启动命令安装为系统服务实现开机自启）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<h3><a id="MongoDB__1"></a>MongoDB 的下载</h3> 
<p>下载地址：<a href="https://www.mongodb.com/try/download/community" rel="nofollow">https://www.mongodb.com/try/download/community</a></p> 
<blockquote> 
 <p>这里需要对 MongoDB 的版本号说明一下：<br> MongoDB 版本号的命名规则是 <code>x.y.z</code>，当其中的 y 是奇数时表示当前的版本为开发版，当其中的 y 是偶数时表示当前的版本为稳定版，所以我们下载 MongoDB 时选择版本号 y 是偶数的版本下载，其中的 z 是修正版本号，数字越大越好</p> 
</blockquote> 
<p>接下来，我们选择下载 MongoDB 的压缩包进行下载（解压即安装）<br><img src="https://images2.imgbox.com/20/0a/oUKtxlfP_o.png" alt="image.png"><br> </p> 
<h3><a id="MongoDB__8"></a>MongoDB 的安装</h3> 
<p>我们将 MongoDB 的压缩包下载到本地后，根据自身需要将 MongoDB 的压缩包存放并解压到合适的目录，压缩包解压完成即安装完成<br><img src="https://images2.imgbox.com/bf/0c/T0YgLGDI_o.png" alt="image.png"><br> </p> 
<h3><a id="_MongoDB__11"></a>配置 MongoDB 环境变量</h3> 
<p>接下来，我们将 MongoDB 安装根目录下的 bin 目录配置到系统环境变量 Path 中，以便于我们在任何位置可以启动 MongoDB 或者执行 MongoDB 相关的可执行文件</p> 
<blockquote> 
 <p>进入配置系统变量界面：我的电脑=&gt;鼠标右键=&gt;属性=&gt;高级系统设置=&gt;环境变量=&gt;系统变量</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/6a/8b/2JgDvGXm_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/a3/6f/04SVEgdx_o.png" alt="image.png"><br> </p> 
<h3><a id="MongoDB__17"></a>MongoDB 的启动</h3> 
<p>在 MongoDB 启动前，我们还需要创建一个目录，用于存放 MongoDB 中的数据库相关信息。<br>在 MongoDB 安装位置的根目录中创建 data/db 目录，用于存放 MongoDB 中的数据库相关信息；在 MongoDB 安装位置的根目录中创建 logs 目录，用于存放 MongoDB 启动运行过程中的相关日志信息。<br><img src="https://images2.imgbox.com/57/32/nb49iVHp_o.png" alt="image.png"><br> </p> 
<h4><a id="_20"></a>命令行参数方式启动</h4> 
<p>我们可以在命令行窗口中，执行如下命令，启动 MongoDB 服务，并指定 MongoDB 中数据库的相关信息的存放位置为 MongoDB 安装位置的根目录中的 data/db 目录，指定日志信息的存放位置为 MongoDB 安装位置的根目录下的 logs/mongo.log 文件</p> 
<blockquote> 
 <p>启动后，MongoDB 会自动创建相关文件，数据库文件、日志文件等</p> 
</blockquote> 
<pre><code class="prism language-bash">mongod <span class="token parameter variable">--dbpath</span><span class="token operator">=</span>E:/dev-env/mangodb/mongodb7.0.7/data/db <span class="token parameter variable">--logpath</span><span class="token operator">=</span>E:/dev-env/mangodb/mongodb7.0.7/logs/mongo.log
</code></pre> 
<blockquote> 
 <p>默认情况下，MongoDB 运行在 27017 端口</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/8d/a2/KhTcJmlQ_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/78/88/nDOYjRNc_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/54/fa/ASQN2Nsb_o.png" alt="image.png"><br> </p> 
<h4><a id="_31"></a>命令行参数方式启动并将本次启动安装为系统服务</h4> 
<p>在上述的命令行参数方式启动 MongoDB 的命令中，我们可以在其最后添加 <code>--install --serviceName "系统服务名称"</code>，将本次命令行参数方式启动安装为系统服务，这样子如果要使用相同的命令行参数启动 MongoDB 我们就可以不用每次都输入那么一大串命令<br> </p> 
<h5><a id="_MongoDB__34"></a>将命令行参数方式启动 MongoDB 安装为系统服务</h5> 
<p>以管理员身份打开命令行窗口，执行如下命令</p> 
<pre><code class="prism language-bash">mongod <span class="token parameter variable">--dbpath</span><span class="token operator">=</span>E:/dev-env/mangodb/mongodb7.0.7/data/db <span class="token parameter variable">--logpath</span><span class="token operator">=</span>E:/dev-env/mangodb/mongodb7.0.7/logs/mongo.log <span class="token parameter variable">--install</span> <span class="token parameter variable">--serviceName</span> mongodb
</code></pre> 
<p><img src="https://images2.imgbox.com/86/88/KWwTeBI9_o.png" alt="image.png"><br> </p> 
<h6><a id="_MongoDB__41"></a>启动 MongoDB 的系统服务的启动和停止</h6> 
<p>此时，只是将我们的命令安装为系统服务，我们还需要执行如下命令启动服务</p> 
<blockquote> 
 <p>net start 后面跟的是要启动的服务名，停止服务只需要执行 <code>net stop 服务名</code></p> 
</blockquote> 
<pre><code class="prism language-bash">net start mongodb
</code></pre> 
<p><img src="https://images2.imgbox.com/99/c2/iGXjVblM_o.png" alt="image.png"><br>win + r，输入 <code>services.msc</code><br><img src="https://images2.imgbox.com/04/95/sRjjyRvf_o.png" alt="image.png"><br>找到我们刚刚安装的系统服务，并将其启动方式改为<br><img src="https://images2.imgbox.com/05/dd/7d3j5Mqx_o.png" alt="image.png"><br>我们只需要将该服务的启动类型设置为自动，那么就是实现电脑开机自动启动该服务<br><img src="https://images2.imgbox.com/10/ce/XLrCKCnV_o.png" alt="image.png"><br> </p> 
<h5><a id="_MongoDB__50"></a>将命令行参数方式启动 MongoDB 从系统服务中移除</h5> 
<p>如果我们要从系统服务中移除命令行参数方式启动 MongoDB 的系统服务，那么我们只需要以管理员的身份执行如下命令即可</p> 
<blockquote> 
 <p><code>--reinstall</code> 重新安装服务<br> 服务删除后，使用该服务启动的 MongoDB 也会停止</p> 
</blockquote> 
<pre><code class="prism language-bash">mongod <span class="token parameter variable">--remove</span> <span class="token parameter variable">--serviceName</span> 服务名
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/47/mMTPCPDL_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/39/8f/16uSXqV8_o.png" alt="image.png"><br> </p> 
<h4><a id="_60"></a>配置文件方式启动</h4> 
<p>我们先在 MongoDB 安装目录的根目录中创建 config 目录，用于存放配置文件，然后在新建的目录中创建 mongodb.conf 文件，在其中编写如下配置</p> 
<blockquote> 
 <p>更多的 MongoDB 配置文件配置解释可参考：</p> 
 <ul><li><a href="https://www.mongodb.com/docs/manual/reference/configuration-file-settings-command-line-options-mapping/" rel="nofollow">https://www.mongodb.com/docs/manual/reference/configuration-file-settings-command-line-options-mapping/</a></li><li><a href="https://blog.csdn.net/cold___play/article/details/130549381">https://blog.csdn.net/cold___play/article/details/130549381</a></li></ul> 
</blockquote> 
<p>如果你使用的 MongoDB 版本在** 6.1 及以上**且使用的操作系统为 Windows，使用如下配置</p> 
<pre><code class="prism language-yaml"><span class="token comment"># 和日志相关的配置</span>
<span class="token key atrule">systemLog</span><span class="token punctuation">:</span>
  <span class="token comment"># MongoDB 所有日志输出的目标指定为文件</span>
  <span class="token key atrule">destination</span><span class="token punctuation">:</span> file
  <span class="token comment"># 指定日志文件的存放路径</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">"E:/dev-env/mangodb/mongodb7.0.7/logs/mongodb.log"</span>
  <span class="token comment"># true 日志的写入方式为在指定的日志文件中追加写入</span>
  <span class="token comment">#（false 则会在指定的日志文件存放路径的同一个目录下新建日志文件记录日志）</span>
  <span class="token key atrule">logAppend</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># 数据库相关配置</span>
<span class="token key atrule">storage</span><span class="token punctuation">:</span>
  <span class="token comment"># 指定 MongoDB 数据库的存放位置</span>
  <span class="token key atrule">dbPath</span><span class="token punctuation">:</span> <span class="token string">"E:/dev-env/mangodb/mongodb7.0.7/data/db"</span>

<span class="token comment"># 网络相关配置</span>
<span class="token key atrule">net</span><span class="token punctuation">:</span>
  <span class="token comment"># 服务实例绑定的 IP，默认是 localhost</span>
  <span class="token comment"># 即有哪些 IP 能够访问 MongoDB 服务</span>
  <span class="token comment"># 0.0.0.0 所有 IP 可以访问，一般如果要远程访问则设置为该值</span>
  <span class="token key atrule">bindIp</span><span class="token punctuation">:</span> localhost
  <span class="token comment"># 绑定的端口，默认是 27017</span>
  <span class="token comment"># MongoDB 运行监听的端口号</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">27017</span>
</code></pre> 
<p>如果你使用的 MongoDB 版本<strong>不为 6.1 及以上</strong>且使用的操作系统为 Windows，可以使用如下配置</p> 
<pre><code class="prism language-yaml"><span class="token comment"># 和日志相关的配置</span>
<span class="token key atrule">systemLog</span><span class="token punctuation">:</span>
  <span class="token comment"># MongoDB 所有日志输出的目标指定为文件</span>
  <span class="token key atrule">destination</span><span class="token punctuation">:</span> file
  <span class="token comment"># 指定日志文件的存放路径</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">"E:/dev-env/mangodb/mongodb7.0.7/logs/mongodb.log"</span>
  <span class="token comment"># true 日志的写入方式为在指定的日志文件中追加写入</span>
  <span class="token comment">#（false 则会在指定的日志文件存放路径的同一个目录下新建日志文件记录日志）</span>
  <span class="token key atrule">logAppend</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># 数据库相关配置</span>
<span class="token key atrule">storage</span><span class="token punctuation">:</span>
  <span class="token comment"># 指定 MongoDB 数据库的存放位置</span>
  <span class="token key atrule">dbPath</span><span class="token punctuation">:</span> <span class="token string">"E:/dev-env/mangodb/mongodb7.0.7/data/db"</span>
  <span class="token key atrule">journal</span><span class="token punctuation">:</span>
    <span class="token comment"># 启用或禁用持久性日志以确保数据文件保持有效和可恢复</span>
    <span class="token comment"># true 启用；false 不启用</span>
    <span class="token comment"># 64 位系统默认启用，启用后 MongoDB 可以在宕机后根据持久性日志进行恢复</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># 网络相关配置</span>
<span class="token key atrule">net</span><span class="token punctuation">:</span>
  <span class="token comment"># 服务实例绑定的 IP，默认是 localhost</span>
  <span class="token comment"># 即有哪些 IP 能够访问 MongoDB 服务</span>
  <span class="token comment"># 0.0.0.0 所有 IP 可以访问，一般如果要远程访问则设置为该值</span>
  <span class="token key atrule">bindIp</span><span class="token punctuation">:</span> localhost
  <span class="token comment"># 绑定的端口，默认是 27017</span>
  <span class="token comment"># MongoDB 运行监听的端口号</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">27017</span>
</code></pre> 
<p>配置文件编写完成后，我们就可以启动 MongoDB 的同时指定配置文件了</p> 
<blockquote> 
 <p>当然，你也可以使用 <a href="#AeAdB" rel="nofollow">https://www.yuque.com/u27599042/weantz/ae3adw3rehowphkz?language=zh-CN#AeAdB</a> 中的方法将本次的启动命令配置为系统服务</p> 
</blockquote> 
<pre><code class="prism language-bash">mongod <span class="token parameter variable">-f</span> 配置文件路径
<span class="token comment"># 或者</span>
mongod <span class="token parameter variable">--config</span> 配置文件路径
</code></pre> 
<pre><code class="prism language-bash">mongod <span class="token parameter variable">--config</span> E:/dev-env/mangodb/mongodb7.0.7/config/mongodb.conf
</code></pre> 
<p><img src="https://images2.imgbox.com/e6/a9/u2bgz04i_o.png" alt="image.png"><br> </p> 
<h3><a id="MongoDB__138"></a>MongoDB 的访问连接</h3> 
<p></p> 
<h4><a id="_MongoDB_140"></a>命令行方式访问连接 MongoDB</h4> 
<p>在比较新版本的 MangoDB 中是没有带命令行访问连接 MongoDB 的可执行程序的，如 mongo 或者 mongosh，如果我们要使用命令行方式访问连接 MongoDB，需要我们自行下载 MongoDB Shell<br>MongoDB Shell 下载地址：<a href="https://www.mongodb.com/try/download/shell" rel="nofollow">https://www.mongodb.com/try/download/shell</a><br>这里一样选择下载压缩包（解压即安装），根据使用的操作系统选择下载相应的版本<br><img src="https://images2.imgbox.com/43/3b/GiNBtOZh_o.png" alt="image.png"><br>然后，我们将下载的压缩包放到 MongoDB 所在位置，并将其中的文件解压出来<br><img src="https://images2.imgbox.com/8e/80/c86CqM4E_o.png" alt="image.png"><br>然后在系统环境变量 Path 中添加 MongoDB Shell 的 bin 目录，以便于我们可以在任意位置使用 MongoDB Shell</p> 
<blockquote> 
 <p>进入配置系统变量界面：我的电脑=&gt;鼠标右键=&gt;属性=&gt;高级系统设置=&gt;环境变量=&gt;系统变量</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ee/ff/WfbAgi8h_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/ac/ea/JbkaGDs2_o.png" alt="image.png"><br>然后我们就可以使用命令行的方式连接 MongoDB 了</p> 
<blockquote> 
 <p>默认情况下，MongoDB 是没有开启权限验证的，如果我们不指定连接的 MongoDB 所在服务器的 IP 及其监听的端口号，默认连接本机(127.0.0.1) 27017 端口的 MongoDB</p> 
</blockquote> 
<pre><code class="prism language-bash">mongosh
<span class="token comment"># 或者</span>
mongosh <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1 <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">27017</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/99/84/N2Ov2tO0_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/fb/7d/j2nCcnyl_o.png" alt="image.png"><br> </p> 
<h4><a id="_MongoDB_154"></a>图形化界面方式访问连接 MongoDB</h4> 
<blockquote> 
 <p>我这里使用的图形化界面连接工具为 DataGrip</p> 
</blockquote> 
<p>新增 MongoDB 连接数据源<br><img src="https://images2.imgbox.com/ee/da/4NP8JRPV_o.png" alt="image.png"><br>输入 MongoDB 所在的 IP 及其监听的端口号，如果开启了权限验证，则输入用户名和密码，没有下载相应的驱动需要先进行下载，然后测试连接，成功则点击 OK 完成新增 MongoDB 连接数据源<br><img src="https://images2.imgbox.com/58/50/sQVLeWht_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/e5/76/sZO5rbpO_o.png" alt="image.png"><br><img src="https://images2.imgbox.com/53/9a/vBp2ZWa7_o.png" alt="image.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b90fa67d1c97b006143180b26bc1b659/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">分布式流水车间调度问题（DFSP）建模（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a69f65ba4a395f4527506eed74858491/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[Windows] RVC WebUI v1228 （AI歌曲翻唱工具）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>