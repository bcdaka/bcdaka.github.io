<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>学习日志8.30--防火墙NAT - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8295a19b6b16a3dbb2b53df20f85abe6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="学习日志8.30--防火墙NAT">
  <meta property="og:description" content="目录
一、实验环境配置
二、配置防火墙静态NAT一对一
三、配置防火墙静态NAT多对多
四、配置防火墙NAT端口转换NAPT
五、防火墙smart-nat、easyip
六、防火墙三元组NAT
在学习过基于路由器的NAT网络地址转换，现在学习基于防火墙NAT的网络地址转换，防火墙的NAT配置和路由器的NAT配置还是有比较大的区别。
防火墙NAT是通过NAT策略实现的，在创建防火墙NAT之前需要先创建防火墙的安全策略。防火墙是不能直接在接口下配置NAT接口映射的
一、实验环境配置 实验拓扑结构图按标注给实验设备配置IP地址，在路由器中配置接口信息，在防火墙中配置接口信息。
给防火墙配置静态路由
命令：[FW01]ip route-static 0.0.0.0 0 GigabitEthernet 1/0/1 12.1.1.2
在防火墙中先划分接口的安全区域，将内网划分为Trust区域，将Internet划分为Untrust区域。
命令：[FW01]firewall zone trust，进入到Trust区域
命令：[FW01-zone-trust] add interface GigabitEthernet 1/0/2，将接口划分到Trust区域，那接口所在的公司内网就属于安全区域。
命令：[FW01]firewall zone untrust，进入untrust区域
命令：[FW01-zone-untrust]add interface GigabitEthernet 1/0/1，将接口划分到Untrust区域
在防火墙配置安全策略
命令：[FW01]security-policy，进入到策略里面
命令：[FW01-policy-security]rule name tru-to-utru，新建一个策略规则，名字是tru-to-utru,意思是从trust区域到untrust区域
命令：[FW01-policy-security-rule-tru-to-utru]source-zone trust，配置源区域是trust
命令：[FW01-policy-security-rule-tru-to-utru]destination-zone untrust，目的区域是untrust
命令：[FW01-policy-security-rule-tru-to-utru]source-address 192.168.1.0，源地址是192.168.1.0
命令：[FW01-policy-security-rule-tru-to-utru]action permit，允许的动作是通过
配置安全策略，允许192.168.1.0网段的流量从trust区域到untrust区域的通过，安全策略没有配置目的地址，是因为连接Internet的地址太多，可以不进行配置，就只允许主动向外访问，不允许外主动向内访问。
在配置防火墙NAT之前应该先配置NAT策略，NAT策略配置应先配置防火墙地址组，然后再配置防火墙安全策略。
现在的需求是，给公司内网的两个主机PC1和PC2，两个客户端分配公有地址。服务器是外部访问内部的时候需要配置NAT，内部的主机访问内部的服务器是不需要配置NAT的。
向运营商申请四个地址120.1.1.101到10.1.1.104，分配给两台主机，两个客户端。运营商分配的地址120.1.1.0网段是和防火墙接口地址12.1.1.0不在同一个网段，所以应该由运营商的路由器进行静态路由的书写
命令：[ISP]ip route-static 120.1.1.101 32 GigabitEthernet 0/0/1 12.1.1.1
命令：[ISP]ip route-static 120.1.1.102 32 GigabitEthernet 0/0/1 12.1.1.1
命令：[ISP]ip route-static 120.1.1.103 32 GigabitEthernet 0/0/1 12.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-31T14:37:42+08:00">
    <meta property="article:modified_time" content="2024-08-31T14:37:42+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">学习日志8.30--防火墙NAT</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE" rel="nofollow">一、实验环境配置</a></p> 
<p id="%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E9%9D%99%E6%80%81NAT%E4%B8%80%E5%AF%B9%E4%B8%80-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E9%9D%99%E6%80%81NAT%E4%B8%80%E5%AF%B9%E4%B8%80" rel="nofollow">二、配置防火墙静态NAT一对一</a></p> 
<p id="%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E9%9D%99%E6%80%81NAT%E5%A4%9A%E5%AF%B9%E5%A4%9A-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E9%9D%99%E6%80%81NAT%E5%A4%9A%E5%AF%B9%E5%A4%9A" rel="nofollow">三、配置防火墙静态NAT多对多</a></p> 
<p id="%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99NAT%E7%AB%AF%E5%8F%A3%E8%BD%AC%E6%8D%A2NAPT-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99NAT%E7%AB%AF%E5%8F%A3%E8%BD%AC%E6%8D%A2NAPT" rel="nofollow">四、配置防火墙NAT端口转换NAPT</a></p> 
<p id="%E4%BA%94%E3%80%81%E9%98%B2%E7%81%AB%E5%A2%99smart-nat%E3%80%81easyip-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E9%98%B2%E7%81%AB%E5%A2%99smart-nat%E3%80%81easyip" rel="nofollow">五、防火墙smart-nat、easyip</a></p> 
<p id="%E5%85%AD%E3%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%89%E5%85%83%E7%BB%84NAT-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%89%E5%85%83%E7%BB%84NAT" rel="nofollow">六、防火墙三元组NAT</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>在学习过基于路由器的NAT网络地址转换，现在学习基于防火墙NAT的网络地址转换，防火墙的NAT配置和路由器的NAT配置还是有比较大的区别。</p> 
<p>防火墙NAT是通过NAT策略实现的，在创建防火墙NAT之前需要先创建防火墙的安全策略。防火墙是不能直接在接口下配置NAT接口映射的</p> 
<h2 id="%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">一、实验环境配置</h2> 
<p>实验拓扑结构图<img alt="" height="922" src="https://images2.imgbox.com/12/b6/UoQK4m5L_o.png" width="1200">按标注给实验设备配置IP地址，在路由器中配置接口信息，在防火墙中配置接口信息。</p> 
<p>给防火墙配置静态路由<br> 命令：[FW01]ip route-static 0.0.0.0 0 GigabitEthernet 1/0/1 12.1.1.2</p> 
<p>在防火墙中先划分接口的安全区域，将内网划分为Trust区域，将Internet划分为Untrust区域。<br> 命令：[FW01]firewall zone trust，进入到Trust区域<br> 命令：[FW01-zone-trust] add interface GigabitEthernet 1/0/2，将接口划分到Trust区域，那接口所在的公司内网就属于安全区域。<br> 命令：[FW01]firewall zone untrust，进入untrust区域<br> 命令：[FW01-zone-untrust]add interface  GigabitEthernet 1/0/1，将接口划分到Untrust区域</p> 
<p>在防火墙配置安全策略<br> 命令：[FW01]security-policy，进入到策略里面<br> 命令：[FW01-policy-security]rule name tru-to-utru，新建一个策略规则，名字是tru-to-utru,意思是从trust区域到untrust区域<br> 命令：[FW01-policy-security-rule-tru-to-utru]source-zone trust，配置源区域是trust<br> 命令：[FW01-policy-security-rule-tru-to-utru]destination-zone untrust，目的区域是untrust<br> 命令：[FW01-policy-security-rule-tru-to-utru]source-address 192.168.1.0，源地址是192.168.1.0<br> 命令：[FW01-policy-security-rule-tru-to-utru]action permit，允许的动作是通过<br> 配置安全策略，允许192.168.1.0网段的流量从trust区域到untrust区域的通过，安全策略没有配置目的地址，是因为连接Internet的地址太多，可以不进行配置，就只允许主动向外访问，不允许外主动向内访问。</p> 
<p>在配置防火墙NAT之前应该先配置NAT策略，NAT策略配置应先配置防火墙地址组，然后再配置防火墙安全策略。</p> 
<p>现在的需求是，给公司内网的两个主机PC1和PC2，两个客户端分配公有地址。服务器是外部访问内部的时候需要配置NAT，内部的主机访问内部的服务器是不需要配置NAT的。</p> 
<p>向运营商申请四个地址120.1.1.101到10.1.1.104，分配给两台主机，两个客户端。运营商分配的地址120.1.1.0网段是和防火墙接口地址12.1.1.0不在同一个网段，所以应该由运营商的路由器进行静态路由的书写<br> 命令：[ISP]ip route-static 120.1.1.101 32 GigabitEthernet 0/0/1 12.1.1.1<br> 命令：[ISP]ip route-static 120.1.1.102 32 GigabitEthernet 0/0/1 12.1.1.1<br> 命令：[ISP]ip route-static 120.1.1.103 32 GigabitEthernet 0/0/1 12.1.1.1<br> 命令：[ISP]ip route-static 120.1.1.104 32 GigabitEthernet 0/0/1 12.1.1.1<br> 命令：[ISP]dis ip routing-table，查看路由表的信息<img alt="" height="883" src="https://images2.imgbox.com/21/d3/kqZWhyNA_o.png" width="1200"></p> 
<p>实验环境配置完毕</p> 
<h2 id="%E4%BA%8C%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E9%9D%99%E6%80%81NAT%E4%B8%80%E5%AF%B9%E4%B8%80">二、配置防火墙静态NAT一对一</h2> 
<p>配置公有地址组<br> 命令：[FW01]nat address-group no-pat01，创建一个地址组，名字叫no-pat01，因为这个是用来配置静态的一对一，所以我叫no-pat01<br> 命令：[FW01-address-group-no-pat01]mode no-pat global，模式是no-pat global</p> 
<p>配置地址段<br> 命令：[FW01-address-group-no-pat01]section 0 120.1.1.101，配置的地址段是0，如果配置的地址分为好多个段，就可以给每个段分配一个ID，比如120.1.1.101-120.1.1.102为一个段ID是1，120.1.1.103-120.1.1.104为一个段ID是2，相当一后面的数字是ID。因为是一对一配置，所以就给了一个地址，正常是应该配置起始地址和结束地址的，但是因为就配置一个地址，所以直接写一个地址就可以。</p> 
<p>配置NAT安全策略，将NAT地址组和NAT的安全策略绑定<br> 命令：[FW01]nat-policy，进入NAT策略<br> 命令：[FW01-policy-nat]rule name pc1，配置规则，因为是给PC1配置的说以就起名字叫pc1<br> 命令：[FW01-policy-nat-rule-pc1]source-zone trust，配置源区域是trust<br> 命令：[FW01-policy-nat-rule-pc1]destination-zone untrust，配置目的区域是untrust<br> 命令：[FW01-policy-nat-rule-pc1]source-address 192.168.1.1 32，配置源地址是192.168.1.1<br> 命令：[FW01-policy-nat-rule-pc1]action source-nat address-group no-pat01，配置规则的行为动作是让源地址和NAT进行绑定，绑定的NAT地址组是no-pat01。</p> 
<p>配置好后用PC1访问百度<img alt="" height="375" src="https://images2.imgbox.com/c6/0d/2r4gZ48p_o.png" width="887">访问成功。</p> 
<p>分析整个过程。首先是PC1向外发出PING请求数据包，数据包到防火墙之后，会查看路由进行转发，查看路由之后，因为目的地址是80.1.1.1路由表没有这个路由，就从默认路由转出，然后匹配防火墙区域间策略turst到untrust的流量允许通过，然后再匹配NAT安全策略，有匹配的信息，将192.168.1.1转换成120.1.1.101，然后生成会话表，然后根据会话表进行NAT地址转换，然后从NAT转换后从默认路由转发到Internet的路由器上，然后再转发到百度的服务器。百度的服务器先将回包数据转发到Internet的路由器上，通过路由器配置的静态路由再转发到防火墙上，在防火墙上匹配会话表然后允许流量通过，回到PC1。</p> 
<p>在用PC1通一下百度，快速查看防火墙会话表<img alt="" height="346" src="https://images2.imgbox.com/3f/e4/Wfjn0bYR_o.png" width="1200">ping五个包，有五条会话表。在会话表中，包含两个源地址，一个是NAT转换前的，一个是NAT转换后的。</p> 
<p>现在在做用PC1和PC2各通百度一个包，然后查看会话表有什么不同。<img alt="" height="157" src="https://images2.imgbox.com/0d/55/s3rSNUVt_o.png" width="1187">看到在PC1上配置了防火墙NAT转换后的会话表会有源地址和转换后的地址，但是没有配置NAT的PC2就没有转换后的地址。</p> 
<p>防火墙在进行NAT转换时会创建一个server-MAP表<img alt="" height="285" src="https://images2.imgbox.com/6d/91/L8yiBy9E_o.png" width="1120">Server-map表分为两个部分，因为是时间顺序生成，先生成的会在下面，第一部分是no-pat Reverse的逆向server-map表，第二部分是no-pat的正向server-map。所谓的正向server-map表是从内向外发送的数据，IP地址是192.168.1.1由地址转换到120.1.1.101转发到ANY，匹配这个表就可以完成源地址转换成NAT地址的高速转换。所谓逆向server-map表就是从外向发送到内向的数据，IP地址是ANY转发到120.1.1.101然后地址转换到192.168.1.1，实现目的地址的高速转换。</p> 
<p>在做配置NAT地址组的时候，配置了一个global，还有local，那这两个配置有什么区别呢。<img alt="" height="100" src="https://images2.imgbox.com/31/ac/Vsudu53W_o.png" width="991">分别在NAT的global模式和local模式下用PC1通百度，然后查看防火墙的server-map表</p> 
<p>global模式<img alt="" height="273" src="https://images2.imgbox.com/3d/67/X5slEJtf_o.png" width="1043">local模式<img alt="" height="280" src="https://images2.imgbox.com/a0/a2/j415hg1c_o.png" width="1115">在global模式的时候，防火墙创建的会话表的zone区域是空的，意思是在任意区域来的流量都可以匹配这个会话表然后进行NAT地址的转换。在local模式的时候，防火墙创建的会话表的区域是untrust，意思是只有在通往untrust的流量和从untrust区域来的才可以匹配这个会话表然后进行NAT地址的转换。所以global是不做安全区域限制的，local是会做安全区域的限制的。</p> 
<p>来说说NAT转换的黑洞路由，其实跟路由器的黑洞接口类似。当外网的客户端访问内网的服务器的时候服务器会给出一个公有地址，比如说120.1.1.0网段的地址，假如说现在外网客户端访问防火墙的120.1.1.101，就会先把数据发送到客户端的网关，即Internet的路由器，然后由路由器中的静态路由转发到防火墙，再在防火墙中查路由表，但是路由表中没有120.1.1.0网段的路由信息<img alt="" height="570" src="https://images2.imgbox.com/b9/c7/7zaguRJG_o.png" width="1183">没有120.1.1.101的路由信息，防火墙路由器就会从配置的默认路由转发到Internet的路由器上，然后Internet的路由器再从静态路由转发到防火墙上，然后再从防火墙转发到Internet的路由器上，以此循环。</p> 
<p>在外网的客户端上ping防火墙120.1.1.101一个包，在g1/0/1上抓包。<img alt="" height="202" src="https://images2.imgbox.com/3d/ae/ptlX65zL_o.png" width="838">ping失败，不通。<img alt="" height="726" src="https://images2.imgbox.com/2e/4b/UYlsAbsL_o.png" width="1200">在数据包上，一共发送了254个数据包，都是ICMP的request消息。像这样消息循环发送的称为数据环路，一条消息环路，只能被转发255次，在每个数据包下面有个存活时间<img alt="" height="600" src="https://images2.imgbox.com/d2/1f/n7go2U6Z_o.png" width="1200">当这个值到255的时候就不在进行转发了。</p> 
<p>如何解决这个问题呢<br> 可以通过配置默认路由将这个路由信息给他制定转发到黑洞里面去<br> 命令：[FW01]ip route-static 120.1.1.101 32 null0，将120.1.1.101的数据转发到黑洞接口里面<br> 这是手动配置产生黑洞路由</p> 
<p>配置好后，用外网的客户端访问防火墙的120.1.1.101，然后重新在防火墙g1/0/1抓包<img alt="" height="532" src="https://images2.imgbox.com/f8/94/mGbIqcj5_o.png" width="1200">这次就只发送一个包，生存时间的值是254，将发往120.1.1.101的数据都转发到黑洞里面直接丢弃了。</p> 
<p>还可以通过在nat地址组里面配置，让数据自动进入黑洞。<br> 命令：[FW01]undo ip route-static 120.1.1.101 32 null0，先关闭之前的配置的黑洞接口<br> 命令：[FW01-address-group-no-pat01]route enable，在之前配置的NAT地址组里面开启允许NAT路由<img alt="" height="568" src="https://images2.imgbox.com/f4/18/WifrqLMm_o.png" width="1181">配置好后查看防火墙路由表的信息，会生成一个Unr和NAT相关的路由。这个就是直接产生黑洞路由。</p> 
<p>配置好后，用客户端测试一下<img alt="" height="206" src="https://images2.imgbox.com/40/ba/u6illLXX_o.png" width="1200">还是就只发送了一个包，其他的包都发送到黑洞接口，把数据丢弃掉了。</p> 
<p>还有一个值得注意的是，在配置好静态的NAT的时候，会有这样一条通知<img alt="" height="112" src="https://images2.imgbox.com/7a/ab/EZcabIhG_o.png" width="1187">说当前的配置模式是no-pat，即进行NAT转换但是不进行PAT端口转换，如果你的其他的某些业务不需要进行NAT的转换，还需要创建一个新的NAT规则叫No-nat。这是为什么呢？</p> 
<p>现在有一个需求，在访问百度的时候进行地址NAT转换，在访问外网客户端Client3 200.1.1.1的时候不进行地址转换。<img alt="" height="291" src="https://images2.imgbox.com/2e/46/E4ZDYsot_o.png" width="1098">查看NAT的策略，配置了一条是流量从trust区域到untrust区域允许192.168.1.1的通过，目的地址是Any。意味着pc1不仅可以访问百度，还可以访问200.1.1.1。先在限制pc1在访问百度的时候才会进行NAT地址转换，在访问200.1.1.1的时候不进行NAT地址转换。</p> 
<p>命令：[FW01-policy-nat]rule name PC1，进入NAT安全策略<br> 命令：[FW01-policy-nat-rule-PC1]destination-address 80.1.1.1 32，配置目的地址<img alt="" height="290" src="https://images2.imgbox.com/1e/11/EmrBGJPK_o.png" width="1164">查看配置结果，源地址是192.168.1.1访问目的地址80.1.1.1的时候进行源地址的NAT转换。</p> 
<p>配置好后用PC1分别去通百度和200.1.1.1，看看能不能通。<img alt="" height="323" src="https://images2.imgbox.com/c2/d3/RieUlx3J_o.png" width="898">ping百度能通  <img alt="" height="316" src="https://images2.imgbox.com/df/9e/8710t30U_o.png" width="876">ping200.1.1.1也能通      </p> 
<p>这是因为在配置NAT安全策略动作的时候可以配置destination-address目的地址的NAT地址转换，也可以配置source-address源地址的NAT地址转换，还可以配置不进行地址转换。<img alt="" height="116" src="https://images2.imgbox.com/69/3b/Ek5k0Ewa_o.png" width="1169"><img alt="" height="290" src="https://images2.imgbox.com/5c/33/6Ij96cGG_o.png" width="1164">在PC1策略中配置的是源地址进行NAT转换，所以在匹配到安全策略的source-address的时候进行NAT地址转换，没有匹配的就不进行地址转换（默认动作是禁止的）。而destination-address因为没有做目的地址的NAT转换所以，对于目的地址不管有没有匹配到安全策略，他都会进行地址转换（默认动作是放行的）。</p> 
<p>如果要不让访问200.1.1.1的时候进行地址转换就要再配置一条no-nat的安全策略。<br> 命令：[FW01-policy-nat]rule name PC1-deny，配置一条新的策略名字叫PC1-deny<br> 命令：[FW01-policy-nat-rule-PC1-deny]source-zone trust，源区域是trust<br> 命令：[FW01-policy-nat-rule-PC1-deny]destination-zone untrust，目的区域是untrust<br> 命令：[FW01-policy-nat-rule-PC1-deny]source-address 192.168.1.1 32，源地址是192.168.1.1<br> 命令：[FW01-policy-nat-rule-PC1-deny]destination-address any，目的地址是任何<br> 命令：[FW01-policy-nat-rule-PC1-deny]action no-nat，配置的动作是不做NAT转换<img alt="" height="429" src="https://images2.imgbox.com/b0/54/jEh8rEyW_o.png" width="1132">配置好后查看。现在配置了两条策略，再匹配的时候会按照顺序进行匹配。访问80.1.1.1的流量就会匹配到PC1的策略，允许地址转换，流量能够通过。访问200.1.1.1的流量因为匹配不上PC1策略的目的地址，于是会匹配到PC1-deny的目的地址的策略上，操作动作是拒绝地址转换，流量无法通过。</p> 
<p>下面用PC1分别访问80.1.1.1和200.1.1.1。<img alt="" height="303" src="https://images2.imgbox.com/8c/9f/YegGNY0R_o.png" width="864">访问200.1.1.1失败<img alt="" height="314" src="https://images2.imgbox.com/a3/13/AO9oL9qx_o.png" width="900">访问80.1.1.1成功。</p> 
<p>这个就是对这个INFO的解释和运用。</p> 
<h2 id="%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E9%9D%99%E6%80%81NAT%E5%A4%9A%E5%AF%B9%E5%A4%9A">三、配置防火墙静态NAT多对多</h2> 
<p>配置静态NAT多（地址组）对多（地址池），从本质上来说还是一对一绑定，在进行绑定时配置是多对多配置，在内部获取外部NAT地址时，仍然是一对一绑定。如果采用的是一对一绑定，就要不断创建NAT的地址组，然后和本地地址进行绑定。<img alt="" height="267" src="https://images2.imgbox.com/48/bb/XeWaSjYl_o.png" width="989">在之前的配置中，给本地地址192.168.1.1创建的地址组，如果要对192.168.1.2进行NAT配置，就要为192.168.1.2创建一个地址组<br> 命令：[FW01]nat address-group pc2，配置NAT策略名字叫pc2<br> 命令：[FW01-address-group-pc2]mode no-pat  global，配置模式<br> 命令：[FW01-address-group-pc2]route enable，允许路由<br> 命令：[FW01-address-group-pc2]section 0 120.1.1.102，配置地址<img alt="" height="237" src="https://images2.imgbox.com/55/28/lmHhEJb9_o.png" width="996"></p> 
<p>接下来，给pc2配置nat的安全策略<br> 命令：[FW01]nat-policy ，进入到nat的安全策略视图<br> 命令：[FW01-policy-nat]rule name PC2，策略名字叫PC2<br> 命令：[FW01-policy-nat-rule-PC2]source-zone trust，源区域是trust<br> 命令：[FW01-policy-nat-rule-PC2]destination-zone untrust ，目的区域是untrust<br> 命令：[FW01-policy-nat-rule-PC2]source-address 192.168.1.2 32，源地址是192.168.1.2<br> 命令：[FW01-policy-nat-rule-PC2]action source-nat address-group PC2，将源地址和NAT地址进行绑定<img alt="" height="263" src="https://images2.imgbox.com/a4/3c/YBP2beHv_o.png" width="1113">查看配置结果</p> 
<p>用PC2访问百度，看能不能通<img alt="" height="318" src="https://images2.imgbox.com/d6/37/PWZ7LcLY_o.png" width="881">能通，配置成功。<img alt="" height="423" src="https://images2.imgbox.com/19/23/1E3RIMxS_o.png" width="1008">查看NAT的address-group地址表，我们看到配置了两个地址组，一个是给PC1配置的，一个是给PC2配置的。所有如果采用一对一配置需要创建多个地址组，还需要配置多个nat策略，会比较麻烦。</p> 
<p>可以通过创建公有地址组和私有地址池进行绑定，然后自动分配，然后通过server-map表进行流量的控制。和基于路由器的多对多的NAT转换是一致的。</p> 
<p>配置<br> 命令：[FW01]nat address-group ag01，创建一个NAT地址组名字叫ag01<br> 命令：[FW01-address-group-ag01]mode no-pat  global，配置模式<br> 命令：[FW01-address-group-ag01]route enable，生成全局路由<br> 命令：[FW01-address-group-ag01]section 0 120.1.1.101 120.1.1.103，配置IP地址段<br> Error: The address section conflict，配置的时候有一条报错，说有地址段冲突，是因为在配置section的时候后面的段号 0 有冲突，在no-pat01的地址组中section 0配置给了120.1.1.101，和现在配置的120.1.1.101 到 120.1.1.103之间有地址冲突，在120.1.1.102的地址给了pc2的地址组，和现在的地址组冲突。解决的办法是，把之前的地址组删除，因为之前的配置不做了，现在是做多对多的配置，所以之前的配置就不需要了。<img alt="" height="69" src="https://images2.imgbox.com/34/3c/R2vCaNF1_o.png" width="894">删除这个地址组的时候提示被NAT安全策略使用了，于是又需要删除对应的NAT安全策略。<img alt="" height="425" src="https://images2.imgbox.com/d7/35/AyXrMEFs_o.png" width="1200">查看NAT安全策略，需要把这两个安全策略删除<br> 命令：[FW01]nat-policy ，进入到nat策略视图<br> 命令：[FW01-policy-nat]undo rule name PC1，删除给PC1配置的NAT策略<br> 命令：[FW01-policy-nat]undo rule name PC2，删除给PC2配置的NAT策略<br> 命令：[FW01]undo nat address-group no-pat01，删除掉地址组no-pat01<br> 命令：[FW01]undo nat address-group pc2，删除掉地址组pc2</p> 
<p>删除之后，接上之前报错的地方继续配置section<br> 命令：[FW01-address-group-ag01]section 0 120.1.1.101 120.1.1.103，配置地址段是从120.1.1.101到120.1.1.103，分配三个公有地址。</p> 
<p>配置安全策略<br> 命令：[FW01]nat-policy ，进入nat策略视图<br> 命令：[FW01-policy-nat]rule name np01，配置的策略名字是np01<br> 命令：[FW01-policy-nat-rule-np01]source-zone trust，源区域是trust<br> 命令：[FW01-policy-nat-rule-np01]destination-zone untrust，目的区域是untrust<br> 命令：[FW01-policy-nat-rule-np01]source-address 192.168.1.0 24，源地址是192.168.1.0，允许192.168.1.0的网段通过<br> 命令：[FW01-policy-nat-rule-np01]action source-nat address-group ag01，将NAT地址组和本地地址池绑定<img alt="" height="277" src="https://images2.imgbox.com/e0/1d/DfoozDEj_o.png" width="884"></p> 
<p>配置好后，分别用主机和客户端去通百度，每次一个包，然后迅速查看防火墙的会话表<img alt="" height="243" src="https://images2.imgbox.com/8b/cc/K8B4Fd1Q_o.png" width="1200">实验现象是用两台主机和两台客户端去通百度，只有最先请求访问的三台设备能够访问成功。从防火墙的会话表中可以看到，公有地址120.1.1.102分配给了192.168.1.2，公有地址120.1.1.101分配给了192.168.1.1，公有地址120.1.1.103分配给了192.168.1.4。和基于路由器的多对多配置一样，在会话表消失以后，任意三台设备都可以分配到这三个地址供上网使用。<img alt="" height="246" src="https://images2.imgbox.com/c2/8e/JVKILMKB_o.png" width="1200">这次公有地址120.1.1.102分配给了私有地址192.168.1.2，公有地址120.1.1.101分配给了私有地址192.168.1.5，公有地址120.1.1.103分配给了私有地址192.168.1.4。</p> 
<p>静态NAT多对多的地址转换，本质上是公有地址组内的多个地址和私有地址池内的多个地址进行一对一的绑定，在防火墙生成会话表之后可以访问网络，在会话表消除之后可以重新访问网络，没有访问到网络的，需要排队。</p> 
<h2 id="%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99NAT%E7%AB%AF%E5%8F%A3%E8%BD%AC%E6%8D%A2NAPT">四、配置防火墙NAT端口转换NAPT</h2> 
<p>在基于路由器的NAT端口转换的时候，如果发送的是传输层的流量，在NAT转换的时候会把端口给转换了，如果发送的是ICMP的ping流量，在NAT转换的时候会转换对应的ICMPID信息。</p> 
<p>要配置端口转换，就要将NAT地址组的模式转换成PAT的模式</p> 
<p>命令：[FW01-address-group-ag01]mode pat ，进入到地址组视图，将模式配置成PAT模式<br><img alt="" height="69" src="https://images2.imgbox.com/13/98/0fEfVoJo_o.png" width="838">警告提示，说当前地址组运用在一个策略里面。所以说要修改地址组的配置，就要删除这个策略，重新配置策略。</p> 
<p>命令：[FW01]dis nat-policy rule all，查看已经配置的NAT策略<br> 命令：[FW01-policy-nat-rule-np01]undo action source-nat，进入到配置的NAT规则里面，删除绑定信息，然后修改配置NAT地址组后，重新进行绑定。<br> 命令：[FW01-address-group-ag01]mode pat，进入到地址组视图，模式配置成PAT端口转换<br> 命令：[FW01-address-group-ag01]section 0 120.1.1.101，如果是使用端口转换的话，可以配置使用一个公有地址就可以了。<br> 命令：[FW01-policy-nat-rule-np01]action source-nat address-group ag01，回到NAT视图进行源地址和NAT地址组进行绑定<img alt="" height="248" src="https://images2.imgbox.com/cf/cb/ojW5zp7A_o.png" width="1098"></p> 
<p>配置好后，用两个主句和两个客户端去访问百度，然后再查看防火墙会话表<img alt="" height="288" src="https://images2.imgbox.com/0c/71/dw6Vp155_o.png" width="1200">发现都访问成功，而且再转换过程中不仅将地址转换了，还将端口转换了。</p> 
<p>在进行端口转换的时候，防火墙不会产生server-map表。对于server-map表是因为，在内部地址和公有地址建立映射关系之后，后续内部地址和公有地址就可以不用再建立映射关系，就能实现对重复的数据快速转发，但是端口转换的话，再每次进行访问都要进行内部地址和端口的转换，每次转换都是不一样的，因此不会建立server-map表。</p> 
<p>端口转换关于内网外网地址比的问题。即一个公有地址可以限制能转换多少个私有地址，最多是60k多个。</p> 
<p>再实验之前，先将之前的配置删除，因为要修改NAT地址组的配置，所以要删除NAT策略和地址组的绑定<br> 命令：[FW01]nat-policy，进入NAT策略视图<br> 命令：[FW01-policy-nat]rule name np01，进入NAT策略<br> 命令：[FW01-policy-nat-rule-np01]undo action source-nat，删除之前的绑定</p> 
<p>然后再NAT地址组中修改策略<img alt="" height="68" src="https://images2.imgbox.com/7b/61/6KUYDOYm_o.png" width="956">制定源IP的最大数量，即一个公有IP最大能转换多少私有IP，最大为63488个私有IP<br> 命令：[FW01-address-group-ag01]srcip-car-num 3，配置最多转换三个私有IP<img alt="" height="243" src="https://images2.imgbox.com/17/e4/P25A1ZIt_o.png" width="955"></p> 
<p>然后再NAT策略中绑定NAT地址组<br> [FW01-policy-nat-rule-np01]action source-nat  address-group ag01，进入到NAT策略视图，配置NAT地址组的绑定</p> 
<p>配置好后用两台主机和俩个客户端去访问百度，然后查看防火墙的会话表<img alt="" height="240" src="https://images2.imgbox.com/a0/8e/XN5SIV7x_o.png" width="1200">通过实验现象，看到四台设备同时访问百度，只有三台设备能够成功访问百度，而且防火墙的会话表也只建立了三个。</p> 
<p>那控制内网外网地址比例问题主要运用在网络的带宽问题上，在向运营商申请的公有地址中运营商会限制这个网络的带宽，比如给120.1.1.101分配了100M的带宽，如果不进行内网地址的限制的话，可能出现一个公有地址同时转成100个私有地址，每个地址分到的带宽是1M，这样速度就会很慢，如果进行内网地址的限制，每个公有地址限制同时转换3个私有地址，每个地址分到的带宽就是33M，这样速度就快些。同时剩下的私有地址，就需要通过向运营商申请更多的公有地址才能上网。</p> 
<h2 id="%E4%BA%94%E3%80%81%E9%98%B2%E7%81%AB%E5%A2%99smart-nat%E3%80%81easyip">五、防火墙smart-nat、easyip</h2> 
<p><strong>Smart-nat</strong>，就是在网络用户低谷的时候采用no-nat的配置，在有大量用户的时候采用smart-nat的配置采用端口转换。这样配置的好处是，不进行端口转换的时候，可以和公有地址建立联系，生成server-map表，在下次流量进来的时候，可以快速进行访问；进行端口转换的时候，可以用一个公有地址进行多个私有地址的转换，用来弥补公有地址的不足。</p> 
<p>实验之前先将之前的NAT策略删除，只删除绑定的NAT地址组就可以<img alt="" height="247" src="https://images2.imgbox.com/37/21/tF0rLWiV_o.png" width="1106"></p> 
<p>然后再配置NAT地址组<br> 命令：[FW01]undo nat address-group ag01，将原来的nat地址组删除<br> 命令：[FW01]nat address-group ag01，创建一个新的地址组名字叫ag01<br> 命令：[FW01-address-group-ag01]mode no-pat global，配置的地址组的模式<br> 命令：[FW01-address-group-ag01]section 0 120.1.1.101 120.1.1.103，配置地址段<br> 命令：[FW01-address-group-ag01]smart-nopat 120.1.1.104，配置smart-nat<br> 命令：[FW01-address-group-ag01]route enable，开启路由<img alt="" height="238" src="https://images2.imgbox.com/96/9d/kA8Y5oYl_o.png" width="1028"></p> 
<p>命令：[FW01-policy-nat-rule-np01]action source-nat address-group ag01，然后在NAT策略下绑定NAT地址组<img alt="" height="269" src="https://images2.imgbox.com/f0/03/ZVW9iGSG_o.png" width="987"></p> 
<p>这个配置相当于，在流量很少的时候，先用120.1.1.101到120.1.1.103的地址，进行no-pat的NAT地址转换，在流量很多的时候，启用smart-nopat，进行NAT的端口地址转换。可以说smart-nat就是一个备用地址，当不够用的时候，就释放出来使用。</p> 
<p>配置好后用主机和客户端去访问百度，然后查看防火墙的会话表<img alt="" height="294" src="https://images2.imgbox.com/d3/6e/zTI7U0Fg_o.png" width="1200">最后的实验结果是，都能访问百度，查看会话表可以知道，192.168.1.2和192.168.1.1和192.168.1.4都只是进行地址转换，没有进行端口转换，用的是no-pat的策略，192.168.1.5不仅发生了地址转换而且还发生了端口转换，从原来的256转换成2048，用的smart-nap的策略。</p> 
<p><strong>easy IP</strong>，在基于路由器的easy IP中，是通过使用路由器端口的地址来充当向运营商申请的公有地址，就不用再另外向运营商申请公有地址了。那在防火墙下的easy IP也是这样，通过将防火墙和外网连接的端口的IP地址来充当内网的公有地址，实现NAT的地址转换。        </p> 
<p>命令：[FW01-policy-nat-rule-np01]undo action source-nat，先将之前的配置的nat策略删除<br><img alt="" height="127" src="https://images2.imgbox.com/36/20/56sUU027_o.png" width="1104">在配置地址段的命令下可以配置easy-IP和address-group，以及其他。<br> 命令：[FW01-policy-nat-rule-np01]action source-nat easy-ip，配置将源地址和easy-ip地址进行绑定，在地址转换的时候，转换成easy-ip的地址。<img alt="" height="269" src="https://images2.imgbox.com/8a/26/vRhe7AxC_o.png" width="1011"></p> 
<p>配置好后，用主机和客户端去访问百度，查看防火墙的会话表，观察实验结果<img alt="" height="239" src="https://images2.imgbox.com/dd/03/VOIzL6K9_o.png" width="1200">实验现象是，四台设备都成功访问百度，查看会话表，四台设备的地址都转换成了easy-ip地址，即防火墙和外网的接口的IP地址12.1.1.1。</p> 
<h2 id="%E5%85%AD%E3%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%89%E5%85%83%E7%BB%84NAT">六、防火墙三元组NAT</h2> 
<p>在传统的NAT上做的配置像端口转换NAPT、静态NAT、easy-ip、smart-nat都有共同的特点，都是只能从内部主动访问外部，进行源NAT的转换。</p> 
<p>现在存在这样的问题，有P2P业务的需求。在一般的服务器-客户端模式中，客户端单一地向服务器申请下载数据，就叫做服务器-客户端模式；在P2P模式中，假设有一个文件存放在服务器里，现在客户端需要下载这个文件，假设有多个人都要下载这个文件，即一个服务器连接多个客户端，就会存在这样一个问题，因为运营商分配给服务器的带宽是有限的。假设100M，现在有四台主机连接，那么每一台主机就分得25M的带宽，如果有更多的主机连接，那每台主机分得的带宽又更少了，那他的下载速度会非常慢，为了解决这个问题，就需要用到P2P的下载模式。</p> 
<p>在P2P下载模式，服务器会将这个文件分成几个部分，假设文件是4G大小，那么就会分为四个部分的文件，将这四个文件分配给连接的四台主机，每个主机拥有这个文件的一部分。如果需要获得完整的文件，主机之间就需要互相发起P2P的数据请求，去获得这个文件的其他部分。那面对这个需求，传统的NAT就不能满足，因为主机之间不仅仅是需要主动向外访问，还需要主动向内访问。</p> 
<p>在传统NAT中，默认使用的是防火墙会话表的五元组表项，当匹配到这个会话表的时候，数据就可可以通过，在主动向外的数据通过的时候就会生成五元组会话表，包括协议号、源地址、源端口、目的地址、目的端口五个元素，请求的回包数据会和防火墙会话表进行匹配，匹配成功后数据才可以通过。外部主动访问内部的数据因为不能匹配防火墙的会话表，一般是不能匹配到会话表的源端口，数据就不能通过。</p> 
<p>现在的需求就是，根据已经产生的会话表，外部的主机可以利用三元组向内部的主机访问。三元组一般匹配的是协议号、目的地址和目的端口这三个元素，源端口是源主机随机产生的很难和会话表匹配成功。这样匹配会话表的方式就叫做三元组NAT。</p> 
<p>三元组NAT实验设计。先在防火墙配置三元组NAT，配置好后，用客户端一访问百度，流量经过防火墙，然后防火墙就会产生会话表五元组信息，还会产生server-map表，注意三元组NAT是不会进行端口转换，而且还能保证每个主机在进行端口转换的时候端口号是固定的，其实是私有的端口号是会变化的，但是转换后的端口号是固定的。在三元组转换的时候会产生三元组的server-map表，表中会有对应转换之后的公有地址的IP和端口号。</p> 
<p>实验前准备，将之前配置的NAT策略删除<br> 命令：[FW01-policy-nat]rule name np01，进入到NAT策略<br> 命令：[FW01-policy-nat-rule-np01]undo action source-nat，将配置的策略删除<br> 命令：[FW01]undo nat address-group ag01，将之前配置的地址组删除</p> 
<p>防火墙三元组配置</p> 
<p>先配置nat地址组<br> 命令：[FW01]nat address-group ag01，创建一个nat地址组<br> 命令：[FW01-address-group-ag01]mode full-cone global，配置地址组的模式，选择full-cone模式<br> 命令：[FW01-address-group-ag01]route enable，开启黑洞路由<br> 命令：[FW01-address-group-ag01]section 0 120.1.1.101 120.1.1.104，配置地址段<img alt="" height="241" src="https://images2.imgbox.com/4b/88/2oxZDgia_o.png" width="905"></p> 
<p>然后配置NAT安全策略<br> 命令：[FW01-policy-nat-rule-np01]action source-nat address-group  ag01，将刚才配置好的地址和源地址进行绑定调用<img alt="" height="274" src="https://images2.imgbox.com/df/60/bHoa97Yu_o.png" width="863"></p> 
<p>配置好后在防火墙的两侧进行数据抓包，看流量是怎么变化的，在百度的服务器上打开http的服务。用client1去访问百度，然后查看防火墙的会话表和server-map表。</p> 
<p>命令：[FW01]diagnose<br> 命令：[FW01-diagnose]reset firewall server-map，清空server-map的信息</p> 
<p>用client1访问百度<img alt="" height="427" src="https://images2.imgbox.com/8f/c6/2IJgd79s_o.png" width="900">client1访问百度成功</p> 
<p>查看防火墙的会话表<img alt="" height="140" src="https://images2.imgbox.com/39/e3/I4lc90iM_o.png" width="1162">五元组表，协议是http源地址是192.168.1.4NAT转换成120.1.1.101，源端口是2052，转换成16384，访问目的地址80.1.1.1端口是80</p> 
<p>查看防火墙的server-map表<img alt="" height="293" src="https://images2.imgbox.com/5a/8f/o06p2ShX_o.png" width="1160">类型是fullcone，上面是逆向的server-map表是提供回包数据匹配的，协议号是tcp，目的地址是120.1.1.101，目的端口是16384，经过NAT转换成192.168.1.1，端口是2052，下面是正向的server-map表，是内部主动访问外部产生的，协议号是tcp，源地址是192.168.1.4，源端口是2052，由NAT转换成120.1.1.101端口是16384，目的地址是any。</p> 
<p>然后根据NAT转换的地址120.1.1.101，端口是16384。用外网的客户端去访问这个地址和端口。<img alt="" height="177" src="https://images2.imgbox.com/8c/2d/LYXT5aR8_o.png" width="882">要注意的是，三元组的NAT转换的验证方式不是通过是否ping通，或者是否和服务器取得连接，而是通过数据是否能通过防火墙，能和内网的主机取得联系。</p> 
<p>下面就通过数据来进行查看</p> 
<p>在防火墙g1/0/2上的抓包</p> 
<p><img alt="" height="453" src="https://images2.imgbox.com/de/f6/tOa9j6YG_o.png" width="1200"></p> 
<p>在防火墙g1/0/1上的抓包</p> 
<p><img alt="" height="471" src="https://images2.imgbox.com/48/0b/JWVnmZLG_o.png" width="1200">通过两个数据对比，可以知道，在客户端client1访问百度先是192.168.1.4经过NAT转换变成120.1.1.101然后和80.1.1.1进行TCP的三次握手，握手之后进行数据的转发。</p> 
<p>然后再看外部客户端的数据</p> 
<p>先看防火墙g1/0/1的数据<img alt="" height="213" src="https://images2.imgbox.com/9f/ce/Bzsc4el4_o.png" width="1200">是外部的客户端200.1.1.1访问120.1.1.101，访问的端口是16384</p> 
<p>防火墙有没有通过这个数据到防火墙的g1/0/2接口查看数据<img alt="" height="261" src="https://images2.imgbox.com/82/72/K6It37FR_o.png" width="1200">在防火墙的g1/0/2口上看到了200.1.1.1的数据和192.168.1.4的数据取得联系，证明这个流量通过防火墙，三元组NAT配置成功了。</p> 
<p>三元组NAT就是转换时同时转换地址和端口，实现多个私网地址共用一个或多个公网地址的地址转换方式，他允许Internet上的用户主动访问私网用户，与基于P2P技术的文件共享，语音通信，视频传输等业务可以更好地共存。</p> 
<p>三元组NAT方式在进行地址转换时有两个特点：<br> 一是三元组NAT保证了内部主机对外呈现的端口的一致性，不会动态变化。<br> 二是支持外部设备通过转换后的地址和端口主动访问内部的主机，防火墙即使没有配置相应的安全策略，也允许这样的流量通过。因为符合三元组的server-map的端口。</p> 
<p>注意，只有在内部的主机主动 访问外部在防火墙创建了server-map表之后，外部的主机匹配到server-map表之后才可以主动访问内部的主机，当server-map表的存活时间到了之后，server-map表消失之后，外部的主机就不能主动访问内部的主机了。</p> 
<p>在P2P的下载模式下，内部的主机持续和Internet的服务器进行数据交互的时候，外部的主机就可以持续主动访问内部的主机，就可以下载服务器文件上的其他部分，当内部的主机和服务器断开联系，server-map表消失之后，外部的主机就不能访问内部的主机了，借此可以保护网络的部分安全性。</p> 
<p>在使用三元组NAT功能的时候，如果需要开启端口转换固定，必须将防火墙的HASH模式设置为源地址HASH。在防火墙默认情况下是源地址+目的地址的HASH模式，这样每次在转换的时候端口是会改变的。那么，在实际部署三元组NAT转换时，需要配置转换后的IP和端口是保持不变的，这样外部的主机在访问内部的主机才不会因为端口的变化而发生匹配server-map失败的情况。操作的办法是将默认的HASH模式切换为源地址HASH模式</p> 
<p>命令：[FW01]firewall hash-mode source-only，hash模式只用源地址<br> 注意：配置hash模式只有在真机环境下才可以配置成功，模拟器模式下还不能成功配置。</p> 
<p>三元组NAT的目的就是，通过内部的主机访问Internet的服务器产生的防火墙的五元组会话表，在有需要进行P2P的需求下，外部的主机通过三元组NAT（协议号、目的地址、目的端口），匹配三元组NAT产生的server-map表能够访问内部的主机。</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f9efad6f42f0208472193ba68b8073e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最短路算法详解（Dijkstra 算法，Bellman-Ford 算法，Floyd-Warshall 算法）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb08427eba2f1c5c42032b3dced1596c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">智能创作与优化新时代：【ChatGPT-4o】在【数学建模】、【AI绘画】、【海报设计】与【论文优化】中的创新应用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>