<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python】conda镜像配置，.condarc文件详解，channel镜像 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/09988e13c152b894d936ff3b3ab590b3/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Python】conda镜像配置，.condarc文件详解，channel镜像">
  <meta property="og:description" content="1. conda 环境 安装miniconda即可，Miniconda 安装包可以到 http://mirrors.aliyun.com/anaconda/miniconda/ 下载。
安装完后，可进入开始菜单栏中点击Anaconda Promot，通过conda命令进行使用。
.condarc是conda 应用程序的配置文件，在用户家目录（windows：C:\users\username\），用于管理镜像源。如果不存在，则打开conda的，执行一下：
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ 2. conda包管理目录 anaconda安装的位置/pkgs该目录是用户指定update或install时由 Conda 下载并提取的包，都是解压后的包，可以在 conda 环境中通过link关联。
anaconda安装的位置\envs\虚拟环境\Lib\site-packages 则是启用虚拟环境后import时导入包的地方。它们来自anaconda安装的位置/pkgs。
anaconda安装的位置/Lib/site-packages 是base环境的路径。
3. 配置镜像源 3.1 通过命令配置和删除 # 查看当前conda配置 conda config --show channels # 增加channel conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud//pytorch/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ #设置搜索是显示通道地址 conda config --set show_channel_urls yes conda config --add channels https://mirrors.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-03T17:12:36+08:00">
    <meta property="article:modified_time" content="2024-06-03T17:12:36+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python】conda镜像配置，.condarc文件详解，channel镜像</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_conda__0"></a>1. conda 环境</h2> 
<p>安装miniconda即可，Miniconda 安装包可以到 <a href="http://mirrors.aliyun.com/anaconda/miniconda/" rel="nofollow">http://mirrors.aliyun.com/anaconda/miniconda/</a> 下载。</p> 
<p>安装完后，可进入开始菜单栏中点击Anaconda Promot，通过conda命令进行使用。</p> 
<p><code>.condarc</code>是conda 应用程序的配置文件，在用户家目录（windows：C:\users\username\），用于管理镜像源。如果不存在，则打开conda的，执行一下：</p> 
<pre><code class="prism language-python">conda config <span class="token operator">-</span><span class="token operator">-</span>add channels https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>free<span class="token operator">/</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/dc/7e/CUCpJ5gD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/68/01/6pKgqP2k_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_conda_11"></a>2. conda包管理目录</h2> 
<p><code>anaconda安装的位置/pkgs</code>该目录是用户指定update或install时由 Conda 下载并提取的包，都是解压后的包，可以在 conda 环境中通过link关联。</p> 
<p><code>anaconda安装的位置\envs\虚拟环境\Lib\site-packages</code> 则是启用虚拟环境后import时导入包的地方。它们来自anaconda安装的位置/pkgs。</p> 
<p><code>anaconda安装的位置/Lib/site-packages</code> 是base环境的路径。</p> 
<h2><a id="3__18"></a>3. 配置镜像源</h2> 
<h3><a id="31__19"></a>3.1 通过命令配置和删除</h3> 
<pre><code class="prism language-python"><span class="token comment"># 查看当前conda配置</span>
conda config <span class="token operator">-</span><span class="token operator">-</span>show channels
<span class="token comment"># 增加channel</span>
conda config <span class="token operator">-</span><span class="token operator">-</span>add channels https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>free<span class="token operator">/</span>
conda config <span class="token operator">-</span><span class="token operator">-</span>add channels https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>main<span class="token operator">/</span>
conda config <span class="token operator">-</span><span class="token operator">-</span>add channels https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud<span class="token operator">//</span>pytorch<span class="token operator">/</span>
conda config <span class="token operator">-</span><span class="token operator">-</span>add channels https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud<span class="token operator">/</span>conda<span class="token operator">-</span>forge<span class="token operator">/</span>
 
<span class="token comment">#设置搜索是显示通道地址</span>
conda config <span class="token operator">-</span><span class="token operator">-</span><span class="token builtin">set</span> show_channel_urls yes
</code></pre> 
<p><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</code>会直接加到<code>.condarc</code>文件的channels下面，成为一个独立的channel：<br> <img src="https://images2.imgbox.com/60/f0/0DvCgY1R_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__34"></a>3.2 通过修改文件添加（推荐）</h3> 
<p>直接修改<code>.condarc</code>文件是最方便的。</p> 
<p>大家常搜到的配置文件如下：<br> 阿里源(来自<a href="https://developer.aliyun.com/mirror/anaconda/?spm=a2c6h.25603864.0.0.6f1519e4eJsITd" rel="nofollow">阿里云官方镜像配置指导</a>)：</p> 
<pre><code>channels:
  - defaults
show_channel_urls: true
default_channels:
  - http://mirrors.aliyun.com/anaconda/pkgs/main
  - http://mirrors.aliyun.com/anaconda/pkgs/r
  - http://mirrors.aliyun.com/anaconda/pkgs/msys2
custom_channels:
  conda-forge: http://mirrors.aliyun.com/anaconda/cloud
  msys2: http://mirrors.aliyun.com/anaconda/cloud
  bioconda: http://mirrors.aliyun.com/anaconda/cloud
  menpo: http://mirrors.aliyun.com/anaconda/cloud
  pytorch: http://mirrors.aliyun.com/anaconda/cloud
  simpleitk: http://mirrors.aliyun.com/anaconda/cloud
</code></pre> 
<p>清华源：</p> 
<pre><code>channels:
  - defaults
show_channel_urls: true
default_channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
custom_channels:
  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
</code></pre> 
<p>配置完后如果不生效可清空conda缓存再试试：</p> 
<pre><code class="prism language-pyhon"> conda clean -i 
</code></pre> 
<h2><a id="4_conda_77"></a>4. .conda文件详解</h2> 
<p>conda 配置文件<code>.condarc</code>是一个可选的运行时配置文件，允许用户配置 conda 的各个方面，例如在哪些channel中搜索包、代理设置和环境目录。本文仅讨论和channel相关的部分。</p> 
<h4><a id="41_channels_83"></a>4.1 channels</h4> 
<p>channels下面配置的就是可访问的chennel。<br> 修改<code>.condarc</code>文件的channels会覆盖 conda 搜索的默认值，导致 conda 仅按<strong>给定顺序</strong>搜索此处列出的频道。</p> 
<p>频道有url和非url之分：</p> 
<ul><li>url：自定义的搜索地址，如前面的<code>https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</code></li><li>非url： Anaconda.org 用户或组织名称，如conda-forge对应着<code>https://conda.anaconda.org</code>中的conda-forge。</li></ul> 
<p>如果<code>.condarc</code>文件如下：</p> 
<pre><code>channels:
  - conda-forge
  - http://Code_LT
  - defaults
</code></pre> 
<p>则conda搜索<code>pandas</code>包的时候就会按<code>conda-forge-&gt;http://Code_LT-&gt;defaults</code>的顺序搜索。</p> 
<h4><a id="42_channels_100"></a>4.2 channels分类</h4> 
<p>conda把channel分为两类</p> 
<ul><li>默认channel（default channels）</li><li>社区channel（community channels）</li></ul> 
<p>如果不修改<code>.condarc</code>文件，conda会默认从这两类channel中搜索需要的包：</p> 
<ul><li>默认channel：对应<code>repo.anaconda.com</code>仓，硬编码写死了对应如下三个仓库（：</li></ul> 
<pre><code>https://repo.anaconda.com/pkgs/main
https://repo.anaconda.com/pkgs/r
https://repo.anaconda.com/pkgs/msys2
</code></pre> 
<ul><li>社区channel：对应<code>conda.anaconda.org</code>仓,即<code>https://conda.anaconda.org</code></li></ul> 
<h4><a id="43_channels_113"></a>4.3 channels镜像修改</h4> 
<p><code>.condarc</code>文件除了把url硬编码进chennels下面，还可以把非url的Anaconda.org 用户或组织名称映射到指定的仓。</p> 
<p>根据channels分类可知道，要修改的化就涉及默认channel和社区channel的修改。</p> 
<blockquote> 
 <p>利用<code>default_channels</code>修改默认channel</p> 
</blockquote> 
<p>如前面讲的阿里镜像中的：</p> 
<pre><code>default_channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
</code></pre> 
<p>则把原有的<code>defaults</code>对应的仓换成了上面的阿里仓。</p> 
<blockquote> 
 <p>利用<code>channel_alias </code>修改社区channel</p> 
</blockquote> 
<p>所有社区频道都会被修改，这个用得比较少，如：</p> 
<pre><code>channel_alias: https://my-mirror.com
</code></pre> 
<p>则配置conda-forge频道后，conda不会再去<code>https://conda.anaconda.org</code>搜。</p> 
<blockquote> 
 <p>利用<code>custom_channels</code>修改指定社区channel</p> 
</blockquote> 
<pre><code>custom_channels:
    conda-forge: https://Code_LT/conda-forge
</code></pre> 
<p>这样写进.condarc文件中后，配置conda-forge就不会再去<code>https://conda.anaconda.org</code>搜，而是到<code>https://Code_LT/conda-forge</code>搜，其他社区频道不变。</p> 
<p>这样，清华源和阿里源的配置就弄明白了。</p> 
<h4><a id="44_channel_priority_145"></a>4.4 channel_priority</h4> 
<p>频道优先级，可以通过命令</p> 
<pre><code class="prism language-shell">conda config <span class="token parameter variable">--describe</span> channel_priority
</code></pre> 
<p>查看该字段的含义</p> 
<pre><code class="prism language-s"># #   Accepts values of 'strict', 'flexible', and 'disabled'. The default
# #   value is 'flexible'. With strict channel priority, packages in lower
# #   priority channels are not considered if a package with the same name
# #   appears in a higher priority channel. With flexible channel priority,
# #   the solver may reach into lower priority channels to fulfill
# #   dependencies, rather than raising an unsatisfiable error. With channel
# #   priority disabled, package version takes precedence, and the
# #   configured priority of channels is used only to break ties. In
# #   previous versions of conda, this parameter was configured as either
# #   True or False. True is now an alias to 'flexible'.
</code></pre> 
<p>默认是flexible，看不少博客推荐<code>strict</code>，可通过如下方式修改：</p> 
<pre><code class="prism language-shell">conda config <span class="token parameter variable">--set</span> channel_priority strict
</code></pre> 
<p>或者直接在<code>.condarc</code>文件中添加：<code>channel_priority: strict</code><br> <img src="https://images2.imgbox.com/ca/00/91FWzFSb_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="45_condarc_170"></a>4.5 为环境配置单独的.condarc文件</h4> 
<p>要为单个环境选择通道，请将.condarc 文件放入该环境的根目录中（或 使用<code>conda config </code>时使​​用<code>--env</code>选项）。</p> 
<p>示例：如果您已在主目录中安装了带有 Python 3 的 Miniconda，并且环境名为“flowers”，则路径可能为：</p> 
<p>~/miniconda3/envs/flowers/.condarc</p> 
<h2><a id="5__177"></a>5. 配置文件冲突解决</h2> 
<p>conda会在如下目录中搜索.condarc文件</p> 
<pre><code class="prism language-python"><span class="token keyword">if</span> on_win<span class="token punctuation">:</span>
    SEARCH_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token string">"C:/ProgramData/conda/.condarc"</span><span class="token punctuation">,</span>
        <span class="token string">"C:/ProgramData/conda/condarc"</span><span class="token punctuation">,</span>
        <span class="token string">"C:/ProgramData/conda/condarc.d"</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    SEARCH_PATH <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token string">"/etc/conda/.condarc"</span><span class="token punctuation">,</span>
        <span class="token string">"/etc/conda/condarc"</span><span class="token punctuation">,</span>
        <span class="token string">"/etc/conda/condarc.d/"</span><span class="token punctuation">,</span>
        <span class="token string">"/var/lib/conda/.condarc"</span><span class="token punctuation">,</span>
        <span class="token string">"/var/lib/conda/condarc"</span><span class="token punctuation">,</span>
        <span class="token string">"/var/lib/conda/condarc.d/"</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

SEARCH_PATH <span class="token operator">+=</span> <span class="token punctuation">(</span>
    <span class="token string">"$CONDA_ROOT/.condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$CONDA_ROOT/condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$CONDA_ROOT/condarc.d/"</span><span class="token punctuation">,</span>
    <span class="token string">"$XDG_CONFIG_HOME/conda/.condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$XDG_CONFIG_HOME/conda/condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$XDG_CONFIG_HOME/conda/condarc.d/"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.config/conda/.condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.config/conda/condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.config/conda/condarc.d/"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.conda/.condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.conda/condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.conda/condarc.d/"</span><span class="token punctuation">,</span>
    <span class="token string">"~/.condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$CONDA_PREFIX/.condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$CONDA_PREFIX/condarc"</span><span class="token punctuation">,</span>
    <span class="token string">"$CONDA_PREFIX/condarc.d/"</span><span class="token punctuation">,</span>
    <span class="token string">"$CONDARC"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>多个文件之间可能会发生冲突，按照如下原则解决冲突（具体不展开了，可自行查看官网资料）：</p> 
<ul><li>Lists - merge</li><li>Dictionaries - merge</li><li>Primitive - clobber</li></ul> 
<p>冲突解决的优先级：<br> <img src="https://images2.imgbox.com/fe/4f/w3b9X1Ol_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6_conda_224"></a>6. conda常用命令</h2> 
<pre><code class="prism language-shell"><span class="token comment"># 获取版本号</span>
conda <span class="token parameter variable">-V</span>

<span class="token comment"># 获取帮助</span>
conda <span class="token parameter variable">-h</span>

<span class="token comment"># 环境管理命令帮助</span>
conda <span class="token function">env</span> <span class="token parameter variable">-h</span>

<span class="token comment"># 列举所有环境</span>
conda info <span class="token parameter variable">--env</span>
conda <span class="token function">env</span> list

<span class="token comment"># Python创建虚拟环境</span>
conda create <span class="token parameter variable">-n</span> your_env_name <span class="token assign-left variable">python</span><span class="token operator">=</span>x.x


<span class="token comment"># 复制某个环境</span>
conda create <span class="token parameter variable">--name</span> new_env_name <span class="token parameter variable">--clone</span> old_env_name 
<span class="token comment"># 彻底删除旧环境，则可以实现重命名环境</span>
conda remove <span class="token parameter variable">--name</span> old_env_name <span class="token parameter variable">--all</span>      <span class="token comment"># 注意：必须在base环境下进行以上操作，否则会出现各种莫名的问题。</span>

<span class="token comment"># 激活或者切换虚拟环境</span>
Windows: activate your_env_name
Linux:  <span class="token builtin class-name">source</span> activate your_env_nam
 
<span class="token comment"># 关闭虚拟环境(即从当前环境退出返回使用PATH环境中的默认python版本)</span>
Windows: deactivate  或者 activate root 切回root环境
Linux：source deactivate 

<span class="token comment"># 删除虚拟环境</span>
conda remove <span class="token parameter variable">-n</span> your_env_name <span class="token parameter variable">--all</span>

<span class="token comment"># 删除环境钟的某个包</span>
conda remove <span class="token parameter variable">--name</span> <span class="token variable">$your_env_name</span>  <span class="token variable">$package_name</span> 

<span class="token comment"># 列举包</span>
conda list
conda list <span class="token parameter variable">-n</span> your_env_name <span class="token comment"># 列举非当前活跃环境下的所有包</span>

<span class="token comment"># 安装包</span>
conda <span class="token function">install</span>  <span class="token punctuation">[</span>package<span class="token punctuation">]</span>
conda <span class="token function">install</span> <span class="token parameter variable">-n</span> your_env_name <span class="token punctuation">[</span>package<span class="token punctuation">]</span> <span class="token comment"># 安装非当前活跃环境下的包</span>
conda <span class="token function">install</span> <span class="token parameter variable">--channel</span> https://conda.anaconda.org/anaconda <span class="token assign-left variable">tensorflow</span><span class="token operator">=</span><span class="token number">1.8</span>.0 <span class="token comment"># 指定版本和channel</span>
<span class="token comment"># 升级包</span>
conda update <span class="token punctuation">[</span>package<span class="token punctuation">]</span>      
conda update conda          <span class="token comment"># 升级conda</span>

<span class="token comment"># 查找包</span>
conda search <span class="token parameter variable">-h</span> <span class="token comment"># 查看search使用帮助信息</span>
conda search tensorflow  <span class="token comment"># 查看指定包可安装版本信息命令</span>
conda search llama-index <span class="token parameter variable">--channel</span> conda-forge <span class="token comment">#指定频道搜索</span>
<span class="token comment"># 卸载包</span>
conda uninstall <span class="token punctuation">[</span>package<span class="token punctuation">]</span>   <span class="token comment"># 卸载xxx文件包</span>

<span class="token comment"># 清理包</span>
conda clean <span class="token parameter variable">-p</span>      //删除没有用的包 <span class="token comment"># 这个命令会检查哪些包没有在包缓存中被硬依赖到其他地方，并删除它们</span>
conda clean <span class="token parameter variable">-t</span>      //删除tar包
conda clean <span class="token parameter variable">-y</span> <span class="token parameter variable">--all</span> //删除所有的安装包及cache

<span class="token comment"># 分享环境</span>
activate target_env <span class="token comment"># 进入要分享的环境</span>
conda <span class="token function">env</span> <span class="token builtin class-name">export</span> <span class="token operator">&gt;</span> environment.yml <span class="token comment"># 当前工作目录下生成一个environment.yml</span>
conda <span class="token function">env</span> create <span class="token parameter variable">-f</span> environment.yml <span class="token comment"># 拿到environment.yml文件后，将该文件放在工作目录下，可以通过以下命令从该文件创建环境</span>

</code></pre> 
<h2><a id="7_conda_installpip_install_292"></a>7. conda install和pip install</h2> 
<p>先说结论：conda 中可以使用pip, 但conda 并不兼容pip, pip 安装的包越多, 越容易引发包版本依赖问题, 所以<mark>能用conda安装的包先用conda 安装, 不能的再到激活的虚拟环境里用pip安装.</mark></p> 
<p><code>conda install xxx</code>：这种方式安装的库都会放在<code>anaconda安装的位置/pkgs</code>目录下，这样的好处就是，当在某个环境下已经下载好了某个库，再在另一个环境中还需要这个库时，就可以直接从pkgs目录下将该库复制至新环境而不用重复下载。</p> 
<p><code>pip install xxx</code>：分两种情况，一种情况就是当前conda环境的python是conda安装的，和系统的不一样，那么xxx会被安装到<code>anaconda安装的位置/envs/current_env/lib/python3.x/site-packages</code>文件夹中，如果当前conda环境用的是系统的python，那么xxx会通常会被安装到<code>~/.local/lib/python3.x/site-packages</code>文件夹中。</p> 
<h2><a id="8_conda_300"></a>8. conda配置代理</h2> 
<p><code>.condarc</code>文件中加入代理信息即可</p> 
<pre><code class="prism language-python">channels<span class="token punctuation">:</span>
  <span class="token operator">-</span> defaults
show_channel_urls<span class="token punctuation">:</span> true

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 

proxy_servers<span class="token punctuation">:</span>
  http<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>xxx<span class="token punctuation">.</span>xx<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">8080</span>
  https<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>xxx<span class="token punctuation">.</span>xx<span class="token punctuation">.</span>com<span class="token punctuation">:</span><span class="token number">8080</span>
ssl_verify<span class="token punctuation">:</span> false
</code></pre> 
<p>注意把http:和https:后面的链接换成你的代理链接和端口号。</p> 
<h2><a id="9__315"></a>9. 常见报错</h2> 
<h3><a id="91_PackagesNotFoundError_316"></a>9.1 PackagesNotFoundError</h3> 
<p><code>PackagesNotFoundError: The following packages are not available from current channels</code><br> 两个常见原因：</p> 
<ol><li>镜像本身的问题（比如网络问题或者服务问题），解决方法：清华源和阿里源切换着试试</li><li>要安装的包不在default频道里，从上面的配置说明可以知道，默认<code>.condarc</code>文件配置，只启用了default频道，如果知道某些包在其他频道，比如tiktoken就在conda-forge频道里，那就要把conda-forge在channels下面启用</li></ol> 
<pre><code class="prism language-python">channels<span class="token punctuation">:</span>
  <span class="token operator">-</span> defaults
  <span class="token operator">-</span> conda<span class="token operator">-</span>forge
show_channel_urls<span class="token punctuation">:</span> true
default_channels<span class="token punctuation">:</span>
  <span class="token operator">-</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>main
  <span class="token operator">-</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>r
  <span class="token operator">-</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>msys2
custom_channels<span class="token punctuation">:</span>
  conda<span class="token operator">-</span>forge<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  msys2<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  bioconda<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  menpo<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  pytorch<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  simpleitk<span class="token punctuation">:</span> http<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
</code></pre> 
<p>或者不想改配置文件也可以conda命令行里带指定频道：</p> 
<pre><code class="prism language-shell">conda <span class="token function">install</span> <span class="token parameter variable">--channel</span> conda-forge tiktoken
</code></pre> 
<h3><a id="92_CondaHTTPError_HTTP_000_CONNECTION_FAILED_for_url_342"></a>9.2 CondaHTTPError: HTTP 000 CONNECTION FAILED for url</h3> 
<p>应该是网速的原因，因为下载时间过长，会自动断开，就会提示连接失败，设置延时1000s，如果还是不行的话就设置2000s。</p> 
<pre><code class="prism language-shell">conda config <span class="token parameter variable">--set</span> remote_read_timeout_secs <span class="token number">1000.0</span>
</code></pre> 
<p>或者在<code>.condarc</code>文件中添加<br> <img src="https://images2.imgbox.com/fa/6d/td3Sk6PR_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_350"></a>参考：</h2> 
<p><a href="https://blog.csdn.net/aruewds/article/details/125870285">Anaconda安装的包所在的位置</a><br> <a href="https://blog.csdn.net/weixin_43970786/article/details/129364905?spm=1001.2101.3001.6650.9&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-9-129364905-blog-106710134.235%5Ev39%5Epc_relevant_anti_vip&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-9-129364905-blog-106710134.235%5Ev39%5Epc_relevant_anti_vip&amp;utm_relevant_index=18">Anaconda的包路径，终于讲清楚了</a><br> <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html#viewing-a-list-of-installed-packages" rel="nofollow">官网：安装包list和位置相关</a><br> <a href="https://www.cnblogs.com/fireblackman/p/16422750.html" rel="nofollow">【conda】配置国内镜像源</a><br> <a href="https://conda.io/projects/conda/en/latest/user-guide/concepts/environments.html#conda-directory-structure" rel="nofollow">官网：conda目录结构介绍</a><br> <a href="https://conda.io/projects/conda/en/latest/user-guide/configuration/use-condarc.html#id2" rel="nofollow">官网：.condarc文件官方解释</a><br> <a href="https://conda.io/projects/conda/en/latest/user-guide/configuration/mirroring.html#mirror-only-some-community-channels" rel="nofollow">官网：channel镜像的官方说明</a><br> <a href="https://developer.aliyun.com/mirror/anaconda/?spm=a2c6h.25603864.0.0.6f1519e4eJsITd" rel="nofollow">阿里云官方镜像配置指导</a><br> <a href="https://blog.csdn.net/Changxing_J/article/details/122451319">python中的PYTHONHASHSEED</a><br> <a href="https://www.zhihu.com/question/395145313" rel="nofollow">pip install 和conda install有什么区别吗？</a><br> <a href="https://zhuanlan.zhihu.com/p/508506160" rel="nofollow">工具篇：conda and pip</a><br> <a href="https://blog.csdn.net/zhayushui/article/details/80433768">conda常用命令:安装，更新，创建，激活，关闭，查看，卸载，删除，清理，重命名，换源，问题</a><br> <a href="https://blog.csdn.net/leviopku/article/details/98766822">conda配置代理</a><br> <a href="" rel="nofollow">CondaHTTPError: HTTP 000 CONNECTION FAILED for url解决方法</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/66396cc2393c1f7a0a52025d47cb9ff3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Redis】 Java操作客户端命令——集合操作与有序集合操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2daa1db54853fd4b3d65fb33c5315a57/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">项目：仿RabbitMQ实现的消息队列组件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>