<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux中Apache网站基于Http服务的访问限制(基于地址/用户) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/90d4c7353f83c371dcc8a9ea39bebe78/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Linux中Apache网站基于Http服务的访问限制(基于地址/用户)">
  <meta property="og:description" content="🏡作者主页：点击！ 👨‍💻Linux高级管理专栏：点击！
⏰️创作时间：2024年6月3日11点44分
🀄️文章质量：95分
为了更好地控制对网站资源的访问，可以为特定的网站目录添加访问授权。本节将分别介绍客户机地址限制和用户授权限制，这两种访问方式都应用于httpd.conf 配置文件中的目录区域范围内。
🫸1.客户机地址限制 通过Require配置项，可以根据主机的主机名或IP地址来决定是否允许客户端访问，在httpd服务器的主配置文件的&lt;Location&gt;,&lt;Directory&gt;,&lt;Fires&gt;,&lt;Limit&gt;配置段中均可以试用Reuire配置项来控制客户端的访问。试用Require配置，需要设置客户端地址以构成完整的限制策略，地址的形式可以是用IP地址，网络地址，主机名或域名，使用名称all 时候表示任意地址。
限制策略的常用格式：
Require all granted 表示允许所有主机访问
Require all denied 表示拒绝所有主机访问
Require local 表示仅允许本地主机访问
Require [not] host &lt;主机名或域名列表&gt;： 表示允许或拒绝指定主机或域访问
Require [not] ip&lt;ip地址或网段列表&gt;： 表示允许或拒绝指定IP地址或网段访问
默认情况下httpd的访问全是是对所有客户机全开的
编辑主配置文件
[root@localhost ~]# vim /etc/httpd/conf/httpd.conf ➡️允许访问限制 限制 基于IP地址限制，只允许192.168.93.112 主机访问
重启服务
该指令将限制对当前上下文（例如整个服务器或特定网站）的访问，仅允许来自指定 IP 地址的请求。
Apache 重新启动后，对 Web 服务器的访问将被限制为仅允许来自 IP 地址 192.168.93.112 的请求。来自任何其他 IP 地址的请求都将被拒绝。
测试 192.168.93.112
192.168.93.113
访问出现403的情况
⬅️禁止IP访问 禁止192.168.93.112 访问 其余所有都可以访问
限制 编辑配置文件
[root@localhost ~]# vim /etc/httpd/conf/httpd.conf systemctl restart httpd 重启Httpd服务 Require all granted ：该行默认允许任何IP地址访问。Require not ip 192.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-06T08:50:27+08:00">
    <meta property="article:modified_time" content="2024-06-06T08:50:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux中Apache网站基于Http服务的访问限制(基于地址/用户)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" height="80" src="https://images2.imgbox.com/9b/8e/W6QrHKxE_o.gif" width="640"></p> 
<p style="text-align:center;"><strong>🏡作者主页：<a href="https://blog.csdn.net/jxjdhdnd?type=blog" title="点击！">点击！</a> </strong></p> 
<p style="text-align:center;"><strong>👨‍💻</strong><strong>Linux高级管理专栏：<a href="http://t.csdnimg.cn/vSzgD" rel="nofollow" title="点击！">点击！</a></strong></p> 
<p style="text-align:center;"><strong>⏰️创作时间：2024年6月3日11点44分</strong></p> 
<p style="text-align:center;"><strong>🀄️文章质量：95分</strong></p> 
<p style="text-align:center;"><img alt="" height="80" src="https://images2.imgbox.com/35/32/dS5k72Xv_o.gif" width="640"></p> 
<hr> 
<p>为了更好地控制对网站资源的访问，可以为特定的网站目录添加访问授权。本节将分别<span style="background-color:#ffd900;">介绍客户机地址限制和用户授权限制</span>，这两种访问方式都应用于httpd.conf 配置文件中的目录区域范围内。</p> 
<p></p> 
<p></p> 
<h3 id="%F0%9F%AB%B81.%E5%AE%A2%E6%88%B7%E6%9C%BA%E5%9C%B0%E5%9D%80%E9%99%90%E5%88%B6"><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">🫸1.客户机地址限制</span></span></h3> 
<p>通过Require配置项，可以根据主机的主机名或IP地址来决定是否允许客户端访问，在httpd服务器的主配置文件的&lt;Location&gt;,&lt;Directory&gt;,&lt;Fires&gt;,&lt;Limit&gt;配置段中均可以试用Reuire配置项来控制客户端的访问。试用Require配置，需要设置客户端地址以构成完整的限制策略，地址的形式可以是用IP地址，网络地址，主机名或域名，使用名称all 时候表示任意地址。</p> 
<p><strong>限制策略的常用格式：</strong></p> 
<p><strong>Require all granted        表示允许所有主机访问</strong></p> 
<p><strong>Require all denied        表示拒绝所有主机访问</strong></p> 
<p><strong>Require local                 表示仅允许本地主机访问</strong></p> 
<p><strong>Require [not] host &lt;主机名或域名列表&gt;</strong>：   <strong>     表示允许或拒绝指定主机或域访问</strong></p> 
<p><strong>Require [not] ip&lt;ip地址或网段列表&gt;：        表示允许或拒绝指定IP地址或网段访问</strong></p> 
<p></p> 
<p></p> 
<p>默认情况下httpd的访问全是是对所有客户机全开的</p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/02/ca/7cX8xTFy_o.png" width="516"></p> 
<p>编辑主配置文件</p> 
<pre><code>[root@localhost ~]# vim /etc/httpd/conf/httpd.conf </code></pre> 
<h4 id="%E2%9E%A1%EF%B8%8F%E5%85%81%E8%AE%B8%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6"><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">➡️允许访问限制</span></span></h4> 
<h5 id="%E9%99%90%E5%88%B6"><strong>限制</strong></h5> 
<p>基于IP地址限制，<span style="background-color:#ffd900;">只允许192.168.93.112 主机访问</span></p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/80/cb/obsl17Qn_o.png" width="853"></p> 
<p>重启服务</p> 
<p>该指令将限制对当前上下文（例如整个服务器或特定网站）的访问，仅允许来自指定 IP 地址的请求。</p> 
<p>Apache 重新启动后，对 Web 服务器的访问将被限制为仅允许来自 IP 地址 <code>192.168.93.112</code> 的请求。来自任何其他 IP 地址的请求都将被拒绝。</p> 
<h5></h5> 
<h5 id="%E6%B5%8B%E8%AF%95"><strong>测试</strong></h5> 
<p>192.168.93.112</p> 
<p><img alt="" height="216" src="https://images2.imgbox.com/c4/ce/1cgQGlyw_o.png" width="881"></p> 
<p></p> 
<p>192.168.93.113</p> 
<p>访问出现403的情况</p> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="308" src="https://images2.imgbox.com/1d/bd/XSqw1wjc_o.png" width="881"></h4> 
<p></p> 
<h4 id="%E2%AC%85%EF%B8%8F%E7%A6%81%E6%AD%A2IP%E8%AE%BF%E9%97%AE"><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">⬅️禁止IP访问</span></span></h4> 
<p>禁止192.168.93.112 访问 其余所有都可以访问</p> 
<h5>限制</h5> 
<p>编辑配置文件</p> 
<pre><code>[root@localhost ~]# vim /etc/httpd/conf/httpd.conf </code></pre> 
<p><img alt="" height="245" src="https://images2.imgbox.com/fb/ef/iUm4pru1_o.png" width="873"></p> 
<pre><code>systemctl restart httpd
重启Httpd服务</code></pre> 
<blockquote> 
 <ul><li><code>Require all granted</code> ：该行默认允许任何IP地址访问。</li><li><code>Require not ip 192.168.93.112</code> ：此行专门拒绝对 IP 地址 192.168.93.112 的访问。</li></ul> 
</blockquote> 
<h5></h5> 
<h5>测试</h5> 
<p>192.168.93.112 无法访问因为我们 设置了拒绝的流量</p> 
<p>报错403无法访问</p> 
<h3></h3> 
<h3><img alt="" height="340" src="https://images2.imgbox.com/77/b9/odFUBP80_o.png" width="860"></h3> 
<h3></h3> 
<p>192.168.93.113访问是可以的 因为我们没有拒绝它访问httpd</p> 
<p><img alt="" height="101" src="https://images2.imgbox.com/6b/3f/ZY5LPVDu_o.png" width="899"></p> 
<h3></h3> 
<h3></h3> 
<h3 id="%F0%9F%AB%B72.%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%E9%99%90%E5%88%B6"><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">🫷2.用户授权限制</span></span></h3> 
<p>Apache HTTP Server (httpd) 中的用户授权限制涉及控制谁可以访问 Web 服务器上的特定资源。这对于维护安全性并确保只有授权用户才能访问敏感数据或功能至关重要。</p> 
<p></p> 
<h4 id="%F0%9F%95%89%EF%B8%8F%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">🕉️创建用户密码</span></span></h4> 
<pre><code>htpasswd -c /etc/httpd/conf/.awspwd smqnz</code></pre> 
<p>将在 <code>/etc/httpd/conf/</code> 目录中创建一个名为 <code>.awspwd</code> （隐藏文件）的新密码文件，并使用哈希密码添加名为 <code>smqnz</code> 的用户。 以下是该命令的详细说明：</p> 
<blockquote> 
 <ul><li><code>htpasswd</code> ：这是一个实用程序，用于管理 Apache HTTP 身份验证的密码文件。</li><li><code>-c</code> ：此选项告诉 <code>htpasswd</code> 创建一个新的密码文件（如果它不存在）。</li><li><code>/etc/httpd/conf/.awspwd</code> ：指定新密码文件的路径和文件名。请注意，文件名以点 (.) 开头，使其成为目录中的隐藏文件。</li><li><code>smqnz</code> ：这是密码文件中新条目的用户名。</li><li>需要注意的是 如果你在创建用户的时候 不需要-c 选项</li></ul> 
</blockquote> 
<p><img alt="" height="101" src="https://images2.imgbox.com/33/d9/JGdkBXBE_o.png" width="813"></p> 
<p></p> 
<p>编辑配置文件</p> 
<pre><code>[root@localhost ~]# vim /etc/httpd/conf/httpd.conf 

  AuthName "smqnz"
    AUthType Basic
    AuthUserFile /etc/httpd/conf/.awspwd
    Require valid-user</code></pre> 
<blockquote> 
 <ul><li> <p><code>AuthName "smqnz"</code>: 设置认证提示的名称。当用户尝试访问受保护的资源时，浏览器会显示这个名称，提示用户输入用户名和密码。</p> </li><li> <p><code>AuthType Basic</code>: 指定基本认证方式。基本认证要求用户提供用户名和密码进行访问。</p> </li><li> <p><code>AuthUserFile /etc/httpd/conf/.awspwd</code>: 指定存储用户名和密码的文件路径。这个文件需要使用 <code>htpasswd</code> 工具来创建和管理。</p> </li><li> <p><code>Require valid-user</code>: 允许所有在 <code>AuthUserFile</code> 中存在的有效用户访问受保护的资源。</p> </li></ul> 
</blockquote> 
<p><img alt="" height="255" src="https://images2.imgbox.com/f1/f7/nCi5Wgqu_o.png" width="860"></p> 
<p></p> 
<p>配置完成之后重启httpd服务</p> 
<p></p> 
<h4 id="%F0%9F%94%82%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95" style="background-color:transparent;"><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">🔂访问测试</span></span></h4> 
<p>这次访问的时候需要输入账户和密码才能进行访问</p> 
<p>用户就是我们刚刚创建的用户和密码</p> 
<p><img alt="" height="337" src="https://images2.imgbox.com/e4/aa/aJYS75nn_o.png" width="864"></p> 
<p><img alt="" height="156" src="https://images2.imgbox.com/1e/1a/MzUfmCym_o.png" width="503"></p> 
<p></p> 
<p>字符界面访问的时候</p> 
<p>显示需要你进行身份验证</p> 
<p><img alt="" height="368" src="https://images2.imgbox.com/8b/1b/deF10iDK_o.png" width="862"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4df5d460ac01145b8e74a7e01eebd586/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Eclipse添加C和C&#43;&#43;编译成汇编文件的选项</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce644a234594b78f27e4b51023bac2ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java实现Kafka消费者(Consumer)两种方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>