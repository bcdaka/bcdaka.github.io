<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Unity编辑器】使用AssetDatabase创建、删、改、加载资源 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e23975ff94a0bee3eeb105aed5ca829b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Unity编辑器】使用AssetDatabase创建、删、改、加载资源">
  <meta property="og:description" content="AssetDatabase是Unity编辑器环境下的一种API，主要用于在代码中对项目中的资源进行管理和操作。注意：AssetDatabase的这些方法只能在Unity编辑器环境下运行，不能在构建后的游戏中使用。在游戏运行时，你需要使用其他资源加载方法，如Resources.Load、AssetBundle加载或者Addressables等。
以下是一些常用的AssetDatabase方法及其使用示例：
创建新资产：
using UnityEngine; using UnityEditor; public class CreateNewAssetExample : Editor { [MenuItem(&#34;Assets/Create/New Asset&#34;)] static void CreateNewAsset() { // 创建一个新的ScriptableObject类型资产 ScriptableObject newAsset = CreateInstance&lt;ScriptableObject&gt;(); // 设置资产的名称 newAsset.name = &#34;NewAsset&#34;; // 选择保存新资产的路径 string path = &#34;Assets/MyAssets/NewAsset.asset&#34;; // 使用AssetDatabase.CreateAsset方法创建新资产 AssetDatabase.CreateAsset(newAsset, path); // 让Unity刷新资源数据库，使新资产在项目窗口中可见 AssetDatabase.SaveAssets(); AssetDatabase.Refresh(); } } 2.创建新文件夹：
using UnityEngine; using UnityEditor; public class CreateNewFolderExample : Editor { [MenuItem(&#34;Assets/Create/New Folder&#34;)] static void CreateNewFolder() { // 指定新文件夹的路径 string folderPath = &#34;Assets/MyFolders/NewFolder&#34;; // 使用AssetDatabase.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-23T21:24:50+08:00">
    <meta property="article:modified_time" content="2023-12-23T21:24:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Unity编辑器】使用AssetDatabase创建、删、改、加载资源</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>AssetDatabase是Unity编辑器环境下的一种API，主要用于在代码中对项目中的资源进行管理和操作。注意：AssetDatabase的这些方法只能在Unity编辑器环境下运行，不能在构建后的游戏中使用。在游戏运行时，你需要使用其他资源加载方法，如Resources.Load、AssetBundle加载或者Addressables等。</p> 
<p>以下是一些常用的AssetDatabase方法及其使用示例：</p> 
<p><strong>创建新资产</strong>：</p> 
<pre><code class="language-cs">using UnityEngine;
using UnityEditor;

public class CreateNewAssetExample : Editor
{
    [MenuItem("Assets/Create/New Asset")]
    static void CreateNewAsset()
    {
        // 创建一个新的ScriptableObject类型资产
        ScriptableObject newAsset = CreateInstance&lt;ScriptableObject&gt;();
        // 设置资产的名称
        newAsset.name = "NewAsset";
        // 选择保存新资产的路径
        string path = "Assets/MyAssets/NewAsset.asset";
        // 使用AssetDatabase.CreateAsset方法创建新资产
        AssetDatabase.CreateAsset(newAsset, path);
        // 让Unity刷新资源数据库，使新资产在项目窗口中可见
        AssetDatabase.SaveAssets();
        AssetDatabase.Refresh();
    }
}</code></pre> 
<p><strong>2.创建新文件夹</strong>：</p> 
<pre><code class="language-cs">using UnityEngine;
using UnityEditor;

public class CreateNewFolderExample : Editor
{
    [MenuItem("Assets/Create/New Folder")]
    static void CreateNewFolder()
    {
        // 指定新文件夹的路径
        string folderPath = "Assets/MyFolders/NewFolder";
        // 使用AssetDatabase.CreateFolder方法创建新文件夹
        AssetDatabase.CreateFolder("Assets/MyFolders", "NewFolder");
        // 刷新资源数据库
        AssetDatabase.SaveAssets();
        AssetDatabase.Refresh();
    }
}</code></pre> 
<p><strong>3.删除指定资产或文件夹</strong>：</p> 
<pre><code class="language-cs">using UnityEngine;
using UnityEditor;

public class DeleteAssetExample : Editor
{
    [MenuItem("Assets/Delete Selected Asset")]
    static void DeleteSelectedAsset()
    {
        // 获取当前选中的资产的路径
        string assetPath = AssetDatabase.GetAssetPath(Selection.activeObject);
        // 使用AssetDatabase.DeleteAsset方法删除资产
        if (!string.IsNullOrEmpty(assetPath) &amp;&amp; AssetDatabase.Contains(Selection.activeObject))
        {
            AssetDatabase.DeleteAsset(assetPath);
            AssetDatabase.SaveAssets();
            AssetDatabase.Refresh();
        }
    }
}</code></pre> 
<p>4.<strong>一次性删除多个资产或文件夹</strong>：</p> 
<pre><code class="language-cs">using UnityEngine;
using UnityEditor;

public class DeleteMultipleAssetsExample : Editor
{
    [MenuItem("Assets/Delete Multiple Assets")]
    static void DeleteMultipleAssets()
    {
        // 获取所有选中的资产的路径
        string[] assetPaths = Selection.assetGUIDs.Select(AssetDatabase.GUIDToAssetPath).ToArray();
        // 使用AssetDatabase.DeleteAssets方法删除所有选中的资产
        AssetDatabase.DeleteAssets(assetPaths);
        AssetDatabase.SaveAssets();
        AssetDatabase.Refresh();
    }
}</code></pre> 
<p>5.<strong>获取资产存储路径的文件夹路径名</strong>：</p> 
<pre><code class="language-cs">using UnityEngine;

public class GetAssetPathExample : MonoBehaviour
{
    void Start()
    {
        // 获取某个资产的路径
        string assetPath = AssetDatabase.GetAssetPath(someGameObject);
        // 获取该资产所在的文件夹路径
        string folderPath = Path.GetDirectoryName(assetPath);
        Debug.Log("Asset folder path: " + folderPath);
    }
}</code></pre> 
<p>AssetDatabase 如何获取Assets 目录下的一个游戏物体？</p> 
<p>在Unity中，你可以使用<code>AssetDatabase.LoadAssetAtPath</code>方法来获取Assets目录下的一个游戏物体（如GameObject）。这个方法需要一个表示资源路径的字符串作为参数，并返回该路径下指定类型的资源。</p> 
<p>注意：</p> 
<p>在Unity编辑器环境下，我们通常不需要将使用<code>AssetDatabase</code>的代码放在诸如<code>void Start()</code>这样的 MonoBehaviour 生命周期方法中，因为这些方法主要是在运行游戏时调用的。</p> 
<p>对于使用<code>AssetDatabase</code>的代码，更常见的做法是将其放在自定义的Editor脚本中的静态方法中，或者在执行特定编辑器操作（如菜单命令、Inspector窗口中的按钮点击等）时调用。这样可以确保这些代码只在Unity编辑器环境下运行，而不会在构建和运行游戏时被执行。</p> 
<p>以下是一个修改后的示例，将使用<code>AssetDatabase</code>的代码放在一个自定义的Editor菜单命令中：</p> 
<p>以下是一个示例，它加载Assets目录下"Models/FooModel.prefab"的游戏物体：</p> 
<pre><code class="language-cs">using UnityEngine;
using UnityEditor;

public class GetGameObjectFromAssets : Editor
{
    [MenuItem("Assets/Load GameObject")]
    static void LoadGameObject()
    {
        // 获取选中的资源路径
        string assetPath = AssetDatabase.GetAssetPath(Selection.activeObject);

        // 检查选中的是否为GameObject
        if (assetPath.EndsWith(".prefab") || assetPath.EndsWith(".unity"))
        {
            // 使用AssetDatabase.LoadAssetAtPath加载游戏物体
            GameObject loadedGameObject = AssetDatabase.LoadAssetAtPath&lt;GameObject&gt;(assetPath);

        
    }
}</code></pre> 
<p>在这个例子中，当你在Unity编辑器的项目窗口中右键点击一个GameObject或Prefab并选择"Load GameObject"菜单命令时，将会执行加载和显示信息的操作。这种方式更适合在编辑器环境下使用<code>AssetDatabase</code>进行资源操作。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/96ffdd9f88a2cf68f45efceac3dff01f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">语音情感识别基本原理及应用场景-python（课设报告）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3b359e2fb4992adb770f460720668e1e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI写作指南：如何辨别文章是人工智能还是真人撰写的？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>