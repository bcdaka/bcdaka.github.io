<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>鸿蒙三层架构，鸿蒙模块依赖、鸿蒙依赖模块，鸿蒙hap、鸿蒙hsp、鸿蒙har - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a6e1af4fa8574075fffca0fa476697fa/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="鸿蒙三层架构，鸿蒙模块依赖、鸿蒙依赖模块，鸿蒙hap、鸿蒙hsp、鸿蒙har">
  <meta property="og:description" content="一、产品定制层、基础特性层、公共能力层 1.1、产品定制层：product 应用的入口，
1.2、基础特性层：feature 业务：首页、我的
1.3、公共能力层：common 方法能力复用
​​​​​​​一次开发，多段部署 3层架构的包，可以是har包，也可以是hsp包 har静态共享包 不支持依赖循环、A模块依赖B模块，B模块依赖A模块
不支持依赖传递，即：A模块依赖B模块，B模块依赖C模块
可以发三方库，
hsp动态共享包 多个hap/hsp共用的代码和资源放在一个HSP中，可以提高代码、资源的可重用性，只需要一份hsp包，减少了app的空间 不能发三方库
hsp拷贝一份，har会拷贝多份 二、项目中，使用三层架构步骤： 2.1、新建3个目录：product、features、common 2.2、分别在common中，新建1个模块，且选择hsp包，模块名可以命名为：basic 2.3、分别在features中，新建1个模块，且选择hsp包，模块名可以命名为：home、mine、login 2.4、product入口，汽车端，平板端，把默认的entry文件夹，移到该目录下，并重命名为：phone； 如果要在此目录新建平板端的项目，需要新建模块，并且选择hap包，因为只有hap才有页面
调出运行配置，将 deploy multi hap =&gt; deploy multi hap packages 勾上，并且下拉出来的选框，都勾上 三、模块之间依赖 在common中，想新建一个head的公共组件，phone模块想依赖这个组件，分2步 3.1、在common =&gt; index 文件中，先要导出head组件: export *from &#39;./src/main/ets/components/Head&#39; 注意：Head要有export关键字 3.2、在phone =&gt; oh-package.json5文件中，设置依赖： 依赖前：
{ &#34;name&#34;: &#34;phone&#34;, &#34;version&#34;: &#34;1.0.0&#34;, &#34;description&#34;: &#34;Please describe the basic information.&#34;, &#34;main&#34;: &#34;Index.ets&#34;, &#34;author&#34;: &#34;&#34;, &#34;license&#34;: &#34;Apache-2.0&#34;, &#34;packageType&#34;: &#34;InterfaceHar&#34;, &#34;dependencies&#34;: { } } 依赖后：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-27T10:21:47+08:00">
    <meta property="article:modified_time" content="2024-08-27T10:21:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">鸿蒙三层架构，鸿蒙模块依赖、鸿蒙依赖模块，鸿蒙hap、鸿蒙hsp、鸿蒙har</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h2>一、产品定制层、基础特性层、公共能力层</h2> 
<p></p> 
<h3>1.1、产品定制层：product</h3> 
<p>        应用的入口，</p> 
<h3>1.2、基础特性层：feature</h3> 
<p>        业务：首页、我的</p> 
<h3>1.3、公共能力层：common</h3> 
<p>        方法能力复用</p> 
<p></p> 
<h2><span style="color:#fe2c24;">​​​​​​​</span>一次开发，多段部署</h2> 
<p></p> 
<h3>        3层架构的包，可以是har包，也可以是hsp包 </h3> 
<p></p> 
<h4>        har静态共享包</h4> 
<p>不支持依赖循环、A模块依赖B模块，B模块依赖A模块</p> 
<p>不支持依赖传递，即：A模块依赖B模块，B模块依赖C模块</p> 
<p>可以发三方库，</p> 
<h4>        hsp动态共享包</h4> 
<p>        多个hap/hsp共用的代码和资源放在一个HSP中，可以提高代码、资源的可重用性，只需要一份hsp包，减少了app的空间 </p> 
<p>不能发三方库</p> 
<p></p> 
<h2>hsp拷贝一份，har会拷贝多份</h2> 
<p></p> 
<h2>二、项目中，使用三层架构步骤：</h2> 
<p></p> 
<h3>2.1、新建3个目录：product、features、common</h3> 
<p></p> 
<h3>2.2、分别在common中，新建1个模块，且选择hsp包，模块名可以命名为：basic</h3> 
<p></p> 
<h3>2.3、分别在features中，新建1个模块，且选择hsp包，模块名可以命名为：home、mine、login</h3> 
<p></p> 
<h3>2.4、product入口，汽车端，平板端，把默认的entry文件夹，移到该目录下，并重命名为：phone；</h3> 
<p>如果要在此目录新建平板端的项目，需要新建模块，并且选择hap包，因为只有hap才有页面</p> 
<h4></h4> 
<h3>调出运行配置，将 deploy multi hap =&gt; deploy multi hap packages 勾上，并且下拉出来的选框，都勾上</h3> 
<p></p> 
<p></p> 
<h3>三、模块之间依赖</h3> 
<h4>        在common中，想新建一个head的公共组件，phone模块想依赖这个组件，分2步</h4> 
<h4>3.1、在common =&gt; index 文件中，先要导出head组件:</h4> 
<pre><code>


export *from './src/main/ets/components/Head'




注意：Head要有export关键字</code></pre> 
<p></p> 
<h4></h4> 
<h4>3.2、在phone =&gt; oh-package.json5文件中，设置依赖：</h4> 
<p>依赖前：</p> 
<pre><code>{
  "name": "phone",
  "version": "1.0.0",
  "description": "Please describe the basic information.",
  "main": "Index.ets",
  "author": "",
  "license": "Apache-2.0",
  "packageType": "InterfaceHar",
  "dependencies": {
  }
}</code></pre> 
<p>依赖后：</p> 
<pre><code>{
  "license": "",
  "devDependencies": {},
  "author": "",
  "name": "phone",
  "description": "Please describe the basic information.",
  "main": "",
  "version": "1.0.0",
  "dependencies": {

    '@zjian/basic': 'file:../../common/basic'
    //格式：@zjian表示组织，basic表示业务名称
  }
}</code></pre> 
<p>完成</p> 
<p></p> 
<p></p> 
<p></p> 
<h4></h4> 
<h4></h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/50bc23a7daf3f66c501f479eb41e5de5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ssm基于微信小程序的食堂窗口自助点餐系统源码调试讲解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5da86ce5019831a7fda343542d89c285/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SOA通信中间件介绍（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>