<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue 使用 element-plus 中的el-tree 卡顿问题 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5dc6bd40805788b5ddf4ada15d1a144e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="vue 使用 element-plus 中的el-tree 卡顿问题">
  <meta property="og:description" content="使用 Element Plus UI 框架中的 el-tree 组件的示例。el-tree 是一个树形控件，通常用于展示具有层级关系的数据。下面是对代码中关键部分的介绍：
：树形控件的根元素，用于定义树的基本属性和事件。
class=“video-tree”：为树控件添加了一个 CSS 类，可能用于定制样式。
ref=“eltree”：为树控件注册了一个引用名称 eltree，这样可以通过 this.$refs.eltree 在 Vue 实例中访问树的实例方法和数据。
:data=“treeData”：绑定了树的数据源 treeData，这是一个包含树节点的数组。
:props=“{ children: ‘children’, label: ‘label’, hasChildren: ‘hasChildren’ }”：定义了树节点对象的属性配置，指定了子节点、标签和是否有子节点的字段名。
:lazy=“true”：启用了懒加载功能，意味着树节点的子节点将按需加载而不是一次性加载所有节点。
:load=“loadNode”：定义了懒加载时用于加载子节点的函数 loadNode。
@node-click=“handleNodeClick”：为树节点点击事件绑定了处理函数 handleNodeClick。
@node-contextmenu=“handleNodeMenuClick”：为树节点右键菜单事件绑定了处理函数 handleNodeMenuClick。
:accordion=“false”：设置手风琴效果为 false，意味着不会在点击节点时自动折叠其他同级节点。
:highlight-current=“true”：高亮当前选中的节点。
node-key=“id”：指定了树节点的唯一标识字段为 id。
&lt;template #default=“{ node, data }”&gt;：使用作用域插槽自定义树节点的内容，其中 { node, data } 是插槽的参数，包含了当前节点的信息。
：在每个树节点上使用 el-dropdown 组件来创建一个下拉菜单，触发方式为右键点击（trigger=“contextmenu”）。
:ref=&#34;‘dropdown’&#43; node.data.id &#34;：为每个下拉菜单实例注册引用，引用名称与节点的 id 相关联。
@visible-change=“(visible) =&gt; handleVisibleChange(node, visible)”：为下拉菜单的可见性变化事件绑定处理函数 handleVisibleChange。
&lt;template #dropdown&gt;：使用作用域插槽自定义下拉菜单的内容，条件是当前节点等于 currentDrop。
和 ：定义下拉菜单的菜单项，包括“新建”、“删除”、“重命名”和“属性”等操作。
@click=“handleModal”、@click=“deleteNodes”、@click=“renameNode” 和 @click=“handleMessageModal”：分别为下拉菜单项绑定了点击事件处理函数。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-06T08:40:01+08:00">
    <meta property="article:modified_time" content="2024-08-06T08:40:01+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue 使用 element-plus 中的el-tree 卡顿问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>使用 Element Plus UI 框架中的 el-tree 组件的示例。el-tree 是一个树形控件，通常用于展示具有层级关系的数据。下面是对代码中关键部分的介绍：</p> 
<p>：树形控件的根元素，用于定义树的基本属性和事件。</p> 
<p>class=“video-tree”：为树控件添加了一个 CSS 类，可能用于定制样式。</p> 
<p>ref=“eltree”：为树控件注册了一个引用名称 eltree，这样可以通过 this.$refs.eltree 在 Vue 实例中访问树的实例方法和数据。</p> 
<p>:data=“treeData”：绑定了树的数据源 treeData，这是一个包含树节点的数组。</p> 
<p>:props=“{ children: ‘children’, label: ‘label’, hasChildren: ‘hasChildren’ }”：定义了树节点对象的属性配置，指定了子节点、标签和是否有子节点的字段名。</p> 
<p>:lazy=“true”：启用了懒加载功能，意味着树节点的子节点将按需加载而不是一次性加载所有节点。</p> 
<p>:load=“loadNode”：定义了懒加载时用于加载子节点的函数 loadNode。</p> 
<p>@node-click=“handleNodeClick”：为树节点点击事件绑定了处理函数 handleNodeClick。</p> 
<p>@node-contextmenu=“handleNodeMenuClick”：为树节点右键菜单事件绑定了处理函数 handleNodeMenuClick。</p> 
<p>:accordion=“false”：设置手风琴效果为 false，意味着不会在点击节点时自动折叠其他同级节点。</p> 
<p>:highlight-current=“true”：高亮当前选中的节点。</p> 
<p>node-key=“id”：指定了树节点的唯一标识字段为 id。</p> 
<p>&lt;template #default=“{ node, data }”&gt;：使用作用域插槽自定义树节点的内容，其中 { node, data } 是插槽的参数，包含了当前节点的信息。</p> 
<p>：在每个树节点上使用 el-dropdown 组件来创建一个下拉菜单，触发方式为右键点击（trigger=“contextmenu”）。</p> 
<p>:ref="‘dropdown’+ node.data.id "：为每个下拉菜单实例注册引用，引用名称与节点的 id 相关联。</p> 
<p>@visible-change=“(visible) =&gt; handleVisibleChange(node, visible)”：为下拉菜单的可见性变化事件绑定处理函数 handleVisibleChange。</p> 
<p>&lt;template #dropdown&gt;：使用作用域插槽自定义下拉菜单的内容，条件是当前节点等于 currentDrop。</p> 
<p> 和 ：定义下拉菜单的菜单项，包括“新建”、“删除”、“重命名”和“属性”等操作。</p> 
<p>@click=“handleModal”、@click=“deleteNodes”、@click=“renameNode” 和 @click=“handleMessageModal”：分别为下拉菜单项绑定了点击事件处理函数。</p> 
<p>这段代码展示了如何在 Element Plus 的 el-tree 组件中集成懒加载、自定义节点内容、下拉菜单以及事件处理</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>el<span class="token operator">-</span>tree
                    <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"video-tree"</span>
                    ref<span class="token operator">=</span><span class="token string">"eltree"</span>
                    <span class="token operator">:</span>data<span class="token operator">=</span><span class="token string">"treeData"</span> 
                    <span class="token operator">:</span>props<span class="token operator">=</span>"<span class="token punctuation">{<!-- --></span> 
                      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'children'</span><span class="token punctuation">,</span>
                      <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">'label'</span><span class="token punctuation">,</span>
                      <span class="token literal-property property">hasChildren</span><span class="token operator">:</span> <span class="token string">'hasChildren'</span> 
                    <span class="token punctuation">}</span>"
                    <span class="token operator">:</span>lazy<span class="token operator">=</span><span class="token string">"true"</span>
                    <span class="token operator">:</span>load<span class="token operator">=</span><span class="token string">"loadNode"</span>
                    @node<span class="token operator">-</span>click<span class="token operator">=</span><span class="token string">"handleNodeClick"</span>
                    @node<span class="token operator">-</span>contextmenu<span class="token operator">=</span><span class="token string">"handleNodeMenuClick"</span>
                    <span class="token operator">:</span>accordion<span class="token operator">=</span><span class="token string">"false"</span>
                    <span class="token operator">:</span>highlight<span class="token operator">-</span>current<span class="token operator">=</span><span class="token string">"true"</span>
                    node<span class="token operator">-</span>key<span class="token operator">=</span><span class="token string">"id"</span>
                    
                    <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>template #<span class="token keyword">default</span><span class="token operator">=</span><span class="token string">"{ node, data }"</span><span class="token operator">&gt;</span> 
                      <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown  
                      trigger<span class="token operator">=</span><span class="token string">"contextmenu"</span> 
                      <span class="token operator">:</span>ref<span class="token operator">=</span><span class="token string">"'dropdown'+ node.data.id "</span>
                      @visible<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"(visible) =&gt; handleVisibleChange(node, visible)"</span>
                      <span class="token operator">&gt;</span>

                        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"el-dropdown-link"</span><span class="token operator">&gt;</span>
                          <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> node<span class="token punctuation">.</span>label <span class="token punctuation">}</span><span class="token punctuation">}</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>template 
                      #dropdown
                      v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"currentDrop &amp;&amp; currentDrop == node.data.id"</span>
                      <span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                          <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item 
                          <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"isNewProject"</span>
                          @click<span class="token operator">=</span><span class="token string">"handleModal"</span>
                          <span class="token operator">&gt;</span>
                            新建
                          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                          <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item 
                          <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"!nodeIdFlag"</span>
                          @click<span class="token operator">=</span><span class="token string">"deleteNodes"</span>
                          <span class="token operator">&gt;</span>
                            删除
                          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                          <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item 
                          @click<span class="token operator">=</span><span class="token string">"renameNode"</span>
                          <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"!displayNameFlag"</span>
                          <span class="token operator">&gt;</span>
                            重命名
                          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span> 
                          <span class="token operator">&lt;</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item 
                          <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"!descriptionFlag"</span>
                          @click<span class="token operator">=</span><span class="token string">"handleMessageModal"</span>
                          <span class="token operator">&gt;</span>
                            属性
                          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>item<span class="token operator">&gt;</span> 
                        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dropdown<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>tree<span class="token operator">&gt;</span>
</code></pre> 
<p>函数签名：</p> 
<p>loadNode(node, resolve)：这是懒加载函数的标准形式，接收两个参数，node 是当前需要加载子节点的树节点，resolve 是一个回调函数，用于将加载的子节点数据“解决”并填充到树节点中。<br> 检查节点属性：</p> 
<p>let flag = node.data?.isAbstract：尝试从当前节点的数据中获取 isAbstract 属性，用于判断节点是否是抽象的。<br> 条件判断：</p> 
<p>if (node.level &gt;= 2 &amp;&amp; !flag)：如果节点的层级大于或等于2且不是抽象节点，则执行内部的代码块。<br> 定义变量：</p> 
<p>let nodeClassToReturn = ‘Object’：定义一个变量 nodeClassToReturn 并赋值为 ‘Object’，这可能是用来指定要返回的节点类型。<br> 发起 API 请求：</p> 
<p>let api = new ModellingServiceApi();：实例化一个 API 服务类 ModellingServiceApi。<br> let res = api.browseNode(…)：调用 browseNode 方法发起 API 请求，请求参数包括会话 ID (sid)、节点 ID (nodeid)、返回的节点类型 (nodeClassToReturn) 等。<br> 处理响应数据：</p> 
<p>let arr = JSON.parse(JSON.stringify(res))：将 API 响应结果转换成数组形式。<br> arr.map(…)：遍历数组，对每个节点对象进行处理，如设置 id 和 label。<br> 过滤和设置子节点：</p> 
<p>let tempArr = arr.filter(…)：过滤数组，排除那些浏览名称以 “#” 开头的节点。<br> node.children = tempArr：将过滤后的数组赋值给当前节点的 children 属性，表示子节点列表。<br> 使用 resolve 回调：</p> 
<p>return resolve(res)：调用 resolve 回调函数并传入子节点数据，完成懒加载过程。<br> 错误处理：</p> 
<p>catch(err){ resolve([]) }：如果请求失败或发生错误，调用 resolve 并传入空数组，表示没有子节点。<br> 其他逻辑分支：</p> 
<p>if(!flag){ … } else { … }：根据 flag 的值调用不同的函数来加载子节点数据。<br> 方法调用：</p> 
<p>this.getChildrenTreelist(node, resolve) 和 this.loadSubChildrenTree(node, resolve)：可能是定义在 Vue 组件中的其他方法，用于根据不同的条件加载子节点数据。</p> 
<pre><code class="prism language-javascript"><span class="token function">loadNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span>resolve</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> flag <span class="token operator">=</span> node<span class="token punctuation">.</span>data<span class="token operator">?.</span>isAbstract

        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>level <span class="token operator">&gt;=</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">let</span> nodeClassToReturn <span class="token operator">=</span><span class="token string">'Object'</span> 
        <span class="token keyword">let</span> nodeid <span class="token operator">=</span> node<span class="token punctuation">.</span>data<span class="token punctuation">.</span>nodeId
        <span class="token keyword">try</span><span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">let</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModellingServiceApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> res <span class="token operator">=</span>   api<span class="token punctuation">.</span><span class="token function">browseNode</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">sid</span><span class="token operator">:</span><span class="token constant">SID</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">nodeId</span><span class="token operator">:</span>nodeid<span class="token punctuation">,</span>
                            <span class="token literal-property property">nodeClassToReturn</span><span class="token operator">:</span><span class="token punctuation">[</span>nodeClassToReturn<span class="token punctuation">]</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">isForward</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">limit</span><span class="token operator">:</span><span class="token number">999</span><span class="token punctuation">,</span>
                            <span class="token literal-property property">page</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

            console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token keyword">let</span> arr <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> 
            arr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
            arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
              item<span class="token punctuation">.</span>id <span class="token operator">=</span> item<span class="token punctuation">.</span>nodeId
              <span class="token keyword">let</span> label <span class="token operator">=</span>item<span class="token punctuation">.</span>name<span class="token operator">?</span> <span class="token function">splitLastHyphen</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token string">""</span>
              item<span class="token punctuation">.</span>label <span class="token operator">=</span>label<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>hasChildList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
                 item<span class="token punctuation">.</span>data <span class="token operator">=</span> idx
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span> 
            <span class="token keyword">let</span> tempArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> item<span class="token punctuation">.</span>browseName<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"#"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
            node<span class="token punctuation">.</span>children <span class="token operator">=</span> tempArr
          <span class="token keyword">return</span>  <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token comment">// return resolve(data);</span>
        <span class="token punctuation">}</span> 
        <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getChildrenTreelist</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span>resolve<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadSubChildrenTree</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span>resolve<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p><strong>注意事项：在loadNode() 方法中不要轻易使用 async await 会造成UI绘制异常卡顿</strong></p> 
<p>在 loadNode() 方法中使用 async/await 与避免使用它取决于具体的应用场景和性能考虑。async/await 是 JavaScript 中处理异步操作的一种非常直观和方便的方式，它建立在 Promise 之上，使得异步代码的写法看起来更像是同步的。然而，在某些情况下，尤其是在性能敏感的环境下，比如懒加载大量数据时，不使用 async/await 可能更合适。以下是一些考虑点：</p> 
<p>避免额外的微任务调度：<br> async/await 在内部可能会创建额外的微任务，这可能会稍微增加调度的开销。在懒加载树节点时，如果对性能要求极高，可能需要避免这种开销。</p> 
<p>减少 Promise 解决的复杂性：<br> 使用 async/await 时，每个 await 表达式都会创建一个新的 Promise。在处理大量数据时，这可能会导致额外的内存使用和垃圾回收压力。</p> 
<p>保持回调的简洁性：<br> 当使用 async/await 时，错误处理通常使用 try…catch 语句。如果 loadNode() 方法已经非常复杂，添加额外的错误处理可能会增加代码的复杂性。</p> 
<p>避免阻塞异步执行队列：<br> 在某些情况下，如果 loadNode() 方法中包含多个 await 调用，它们会按顺序执行，这可能会阻塞异步执行队列，延迟其他异步操作的执行。</p> 
<p>使用传统的 Promise 链：<br> 不使用 async/await 的话，可以继续使用 Promise 链式调用（thenable chains），这种方式在处理大量异步操作时可能更加灵活和高效。</p> 
<p>保持代码的一致性：<br> 如果你的项目或团队倾向于使用传统的 Promise 风格，那么在 loadNode() 方法中保持一致性可能更有利于代码的可维护性。</p> 
<p>避免在事件循环中的不必要等待：<br> await 会在等待 Promise 解决时暂停函数的执行，这在某些情况下可能会导致不必要的等待，尤其是在主线程上，这可能会影响 UI 的响应性。</p> 
<p>使用同步代码的错觉：<br> async/await 让异步代码看起来像同步代码，这可能会误导开发者忽视异步操作的真正性质，从而在性能优化时忽视了异步操作的开销。</p> 
<p>考虑错误处理的开销：<br> 使用 async/await 时，错误处理需要使用 try…catch，这可能会在编译时引入额外的开销，尤其是在处理大量数据时。</p> 
<p>避免在 Web Workers 中使用：<br> 如果你打算将 loadNode() 方法中的逻辑放在 Web Worker 中执行，使用 async/await 可能不太合适，因为 Web Workers 环境中不支持 async/await。</p> 
<p>总之，是否在 loadNode() 方法中使用 async/await 应根据具体情况和性能要求来决定。如果性能是关键考虑因素，并且你正在处理大量数据，可能需要考虑使用传统的 Promise 或其他异步模式来避免潜在的性能问题。</p> 
<p><strong>以上就是文章全部内容了，如果喜欢这篇文章的话，还希望三连支持一下，感谢！</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e74190e121d11143604bfc6bc0be2866/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI 时代的程序员：如何在变革中保持核心竞争力（万字长文）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7ce6d416138825e5a721c0e0f70fe65b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">.NET Core 中使用异步编程和队列RabbitMQ及错误处理机制处理电子邮件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>