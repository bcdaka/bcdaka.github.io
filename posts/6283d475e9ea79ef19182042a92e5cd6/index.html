<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何在 Python 中将语音转换为文本 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6283d475e9ea79ef19182042a92e5cd6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="如何在 Python 中将语音转换为文本">
  <meta property="og:description" content="一、说明 学习如何使用语音识别 Python 库执行语音识别，以在 Python 中将音频语音转换为文本。想要更快地编码吗？我们的Python 代码生成器让您只需点击几下即可创建 Python 脚本。现在就现在试试！
二、语言AI库 2.1 相当给力的转文字库 语音识别是计算机软件识别口语中的单词和短语并将其转换为人类可读文本的能力。在本教程中，您将学习如何使用SpeechRecognition 库在 Python 中将语音转换为文本。
因此，我们不需要从头开始构建任何机器学习模型，这个库为我们提供了各种知名公共语音识别 API（例如 Google Cloud Speech API、IBM Speech To Text 等）的便捷包装。
请注意，如果您不想使用 API，而是直接对机器学习模型进行推理，那么一定要查看本教程，其中我将向您展示如何使用当前最先进的机器学习模型在Python中执行语音识别。
另外，如果您想要其他方法来执行 ASR，请查看此语音识别综合教程。
另请学习：如何在 Python 中翻译文本。
2.2 安装过程 好吧，让我们开始使用以下命令安装库pip：
pip3 install SpeechRecognition pydub 好的，打开一个新的 Python 文件并导入它：
import speech_recognition as sr 这个库的好处是它支持多种识别引擎：
CMU Sphinx（离线）谷歌语音识别谷歌云语音API维特人工智能微软必应语音识别Houndify APIIBM 语音转文本Snowboy 热词检测（离线）
我们将在这里使用 Google 语音识别，因为它很简单并且不需要任何 API 密钥。 2.3 转录音频文件 确保当前目录中有一个包含英语演讲的音频文件（如果您想跟我一起学习，请在此处获取音频文件）：
filename = &#34;16-122828-0002.wav&#34; 该文件是从LibriSpeech数据集中获取的，但您可以使用任何您想要的音频 WAV 文件，只需更改文件名，让我们初始化我们的语音识别器：
# initialize the recognizer r = sr.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-25T18:17:04+08:00">
    <meta property="article:modified_time" content="2024-05-25T18:17:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何在 Python 中将语音转换为文本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_3"></a>一、说明</h2> 
<p>   <font face="楷体" size="4">学习如何使用语音识别 Python 库执行语音识别，以在 Python 中将音频语音转换为文本。想要更快地编码吗？我们的Python 代码生成器让您只需点击几下即可创建 Python 脚本。现在就现在试试！</font></p> 
<h2><a id="AI_8"></a>二、语言AI库</h2> 
<h3><a id="21__9"></a>2.1 相当给力的转文字库</h3> 
<p>   <font face="楷体" size="4">语音识别是计算机软件识别口语中的单词和短语并将其转换为人类可读文本的能力。在本教程中，您将学习如何使用SpeechRecognition 库在 Python 中将语音转换为文本。</font></p> 
<p>   <font face="楷体" size="4">因此，我们不需要从头开始构建任何机器学习模型，这个库为我们提供了各种知名公共语音识别 API（例如 Google Cloud Speech API、IBM Speech To Text 等）的便捷包装。</font></p> 
<p>   <font face="楷体" size="4">请注意，如果您不想使用 API，而是直接对机器学习模型进行推理，那么一定要查看本教程，其中我将向您展示如何使用当前最先进的机器学习模型在Python中执行语音识别。</font></p> 
<p>   <font face="楷体" size="4">另外，如果您想要其他方法来执行 ASR，请查看此语音识别综合教程。</font></p> 
<p>   <font face="楷体" size="4">另请学习：如何在 Python 中翻译文本。</font></p> 
<h3><a id="22__21"></a>2.2 安装过程</h3> 
<p>   <font face="楷体" size="4">好吧，让我们开始使用以下命令安装库pip：</font></p> 
<pre><code class="prism language-python">pip3 install SpeechRecognition pydub
</code></pre> 
<p>   <font face="楷体" size="4">好的，打开一个新的 Python 文件并导入它：</font></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> speech_recognition <span class="token keyword">as</span> sr
</code></pre> 
<p>   <font face="楷体" size="4">这个库的好处是它支持多种识别引擎：</font></p> 
<ul><li>CMU Sphinx（离线）</li><li>谷歌语音识别</li><li>谷歌云语音API</li><li>维特人工智能</li><li>微软必应语音识别</li><li>Houndify API</li><li>IBM 语音转文本</li><li>Snowboy 热词检测（离线）<br>    <font face="楷体" size="4">我们将在这里使用 Google 语音识别，因为它很简单并且不需要任何 API 密钥。</font></li></ul> 
<h3><a id="23__46"></a>2.3 转录音频文件</h3> 
<p>   <font face="楷体" size="4">确保当前目录中有一个包含英语演讲的音频文件（如果您想跟我一起学习，请在此处获取音频文件）：</font></p> 
<pre><code class="prism language-python">filename <span class="token operator">=</span> <span class="token string">"16-122828-0002.wav"</span>
</code></pre> 
<p>   <font face="楷体" size="4">该文件是从LibriSpeech数据集中获取的，但您可以使用任何您想要的音频 WAV 文件，只需更改文件名，让我们初始化我们的语音识别器：</font></p> 
<pre><code class="prism language-python"><span class="token comment"># initialize the recognizer</span>
r <span class="token operator">=</span> sr<span class="token punctuation">.</span>Recognizer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>   <font face="楷体" size="4">下面的代码负责加载音频文件，并使用 Google 语音识别将语音转换为文本：</font></p> 
<pre><code class="prism language-python"><span class="token comment"># open the file</span>
<span class="token keyword">with</span> sr<span class="token punctuation">.</span>AudioFile<span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token keyword">as</span> source<span class="token punctuation">:</span>
    <span class="token comment"># listen for the data (load audio to memory)</span>
    audio_data <span class="token operator">=</span> r<span class="token punctuation">.</span>record<span class="token punctuation">(</span>source<span class="token punctuation">)</span>
    <span class="token comment"># recognize (convert from speech to text)</span>
    text <span class="token operator">=</span> r<span class="token punctuation">.</span>recognize_google<span class="token punctuation">(</span>audio_data<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
</code></pre> 
<p>   <font face="楷体" size="4">这将需要几秒钟才能完成，因为它将文件上传到 Google 并获取输出，这是我的结果：</font></p> 
<pre><code class="prism language-python">I believe you're just talking nonsense
</code></pre> 
<p>   <font face="楷体" size="4">上面的代码适用于小型或中型音频文件。在下一节中，我们将为大文件编写代码。</font></p> 
<h3><a id="24__80"></a>2.4 转录大型音频文件</h3> 
<p>   <font face="楷体" size="4">如果您想对长音频文件执行语音识别，那么下面的函数可以很好地处理这个问题：</font></p> 
<pre><code class="prism language-python"><span class="token comment"># importing libraries </span>
<span class="token keyword">import</span> speech_recognition <span class="token keyword">as</span> sr 
<span class="token keyword">import</span> os 
<span class="token keyword">from</span> pydub <span class="token keyword">import</span> AudioSegment
<span class="token keyword">from</span> pydub<span class="token punctuation">.</span>silence <span class="token keyword">import</span> split_on_silence

<span class="token comment"># create a speech recognition object</span>
r <span class="token operator">=</span> sr<span class="token punctuation">.</span>Recognizer<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># a function to recognize speech in the audio file</span>
<span class="token comment"># so that we don't repeat ourselves in in other functions</span>
<span class="token keyword">def</span> <span class="token function">transcribe_audio</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># use the audio file as the audio source</span>
    <span class="token keyword">with</span> sr<span class="token punctuation">.</span>AudioFile<span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token keyword">as</span> source<span class="token punctuation">:</span>
        audio_listened <span class="token operator">=</span> r<span class="token punctuation">.</span>record<span class="token punctuation">(</span>source<span class="token punctuation">)</span>
        <span class="token comment"># try converting it to text</span>
        text <span class="token operator">=</span> r<span class="token punctuation">.</span>recognize_google<span class="token punctuation">(</span>audio_listened<span class="token punctuation">)</span>
    <span class="token keyword">return</span> text

<span class="token comment"># a function that splits the audio file into chunks on silence</span>
<span class="token comment"># and applies speech recognition</span>
<span class="token keyword">def</span> <span class="token function">get_large_audio_transcription_on_silence</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Splitting the large audio file into chunks
    and apply speech recognition on each of these chunks"""</span>
    <span class="token comment"># open the audio file using pydub</span>
    sound <span class="token operator">=</span> AudioSegment<span class="token punctuation">.</span>from_file<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  
    <span class="token comment"># split audio sound where silence is 500 miliseconds or more and get chunks</span>
    chunks <span class="token operator">=</span> split_on_silence<span class="token punctuation">(</span>sound<span class="token punctuation">,</span>
        <span class="token comment"># experiment with this value for your target audio file</span>
        min_silence_len <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">,</span>
        <span class="token comment"># adjust this per requirement</span>
        silence_thresh <span class="token operator">=</span> sound<span class="token punctuation">.</span>dBFS<span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span>
        <span class="token comment"># keep the silence for 1 second, adjustable as well</span>
        keep_silence<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    folder_name <span class="token operator">=</span> <span class="token string">"audio-chunks"</span>
    <span class="token comment"># create a directory to store the audio chunks</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>folder_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>folder_name<span class="token punctuation">)</span>
    whole_text <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token comment"># process each chunk </span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> audio_chunk <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>chunks<span class="token punctuation">,</span> start<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># export audio chunk and save it in</span>
        <span class="token comment"># the `folder_name` directory.</span>
        chunk_filename <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>folder_name<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"chunk</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>i<span class="token punctuation">}</span></span><span class="token string">.wav"</span></span><span class="token punctuation">)</span>
        audio_chunk<span class="token punctuation">.</span>export<span class="token punctuation">(</span>chunk_filename<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">"wav"</span><span class="token punctuation">)</span>
        <span class="token comment"># recognize the chunk</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            text <span class="token operator">=</span> transcribe_audio<span class="token punctuation">(</span>chunk_filename<span class="token punctuation">)</span>
        <span class="token keyword">except</span> sr<span class="token punctuation">.</span>UnknownValueError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error:"</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            text <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>text<span class="token punctuation">.</span>capitalize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">. "</span></span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>chunk_filename<span class="token punctuation">,</span> <span class="token string">":"</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
            whole_text <span class="token operator">+=</span> text
    <span class="token comment"># return the text for all chunks detected</span>
    <span class="token keyword">return</span> whole_text
        ```




 <span class="token operator">&amp;</span>emsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>emsp<span class="token punctuation">;</span>  <span class="token operator">&lt;</span>font face<span class="token operator">=</span><span class="token string">"楷体"</span>   size<span class="token operator">=</span><span class="token number">4</span><span class="token operator">&gt;</span>


注意：您需要安装Pydub才能pip使上述代码正常工作。

上述函数使用模块split_on_silence<span class="token punctuation">(</span><span class="token punctuation">)</span>中的函数pydub<span class="token punctuation">.</span>silence在静音时将音频数据分割成块。该min_silence_len参数是用于分割的最小静音长度（以毫秒为单位）。

silence_thresh是阈值，任何比这更安静的东西都将被视为静音，我将其设置为平均dBFS <span class="token operator">-</span> <span class="token number">14</span>，keep_silence参数是在检测到的每个块的开头和结尾处留下的静音量（以毫秒为单位）。

这些参数并不适合所有声音文件，请尝试根据您的大量音频需求尝试这些参数。

之后，我们迭代所有块并将每个语音音频转换为文本，然后将它们加在一起，这是一个运行示例：

path <span class="token operator">=</span> <span class="token string">"7601-291468-0006.wav"</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\nFull text:"</span><span class="token punctuation">,</span> get_large_audio_transcription_on_silence<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
注意：您可以在此处<span class="token number">7601</span><span class="token operator">-</span><span class="token number">291468</span><span class="token operator">-</span><span class="token number">0006</span><span class="token punctuation">.</span>wav获取文件。

输出：

```python
audio<span class="token operator">-</span>chunks\chunk1<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> His abode which you had fixed <span class="token keyword">in</span> a bowery <span class="token keyword">or</span> country seat<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk2<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> At a short distance <span class="token keyword">from</span> the city<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk3<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Just at what <span class="token keyword">is</span> now called dutch street<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk4<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Sooner bounded <span class="token keyword">with</span> proofs of his ingenuity<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk5<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Patent smokejacks<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk6<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> It required a horse to work some<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk7<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Dutch oven roasted meat without fire<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk8<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Carts that went before the horses<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk9<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Weather cox that turned against the wind <span class="token keyword">and</span> other wrongheaded contrivances<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>chunks\chunk10<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> So just understand can found it <span class="token builtin">all</span> beholders<span class="token punctuation">.</span> 

Full text<span class="token punctuation">:</span> His abode which you had fixed <span class="token keyword">in</span> a bowery <span class="token keyword">or</span> country seat<span class="token punctuation">.</span> At a short distance <span class="token keyword">from</span> the city<span class="token punctuation">.</span> Just at what <span class="token keyword">is</span> now called dutch street<span class="token punctuation">.</span> Sooner bounded <span class="token keyword">with</span> proofs of his ingenuity<span class="token punctuation">.</span> Patent smokejacks<span class="token punctuation">.</span> It required a horse to work some<span class="token punctuation">.</span> Dutch oven roasted meat without fire<span class="token punctuation">.</span> Carts that went before the horses<span class="token punctuation">.</span> Weather cox that turned against the wind <span class="token keyword">and</span> other wrongheaded contrivances<span class="token punctuation">.</span> So just understand can found it <span class="token builtin">all</span> beholders<span class="token punctuation">.</span>
</code></pre> 
<p>因此，该函数会自动为我们创建一个文件夹，并放置我们指定的原始音频文件块，然后对所有这些文件运行语音识别。</p> 
<p>如果您想将音频文件分割成固定的间隔，我们可以使用以下函数：</p> 
<pre><code class="prism language-python"><span class="token comment"># a function that splits the audio file into fixed interval chunks</span>
<span class="token comment"># and applies speech recognition</span>
<span class="token keyword">def</span> <span class="token function">get_large_audio_transcription_fixed_interval</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> minutes<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Splitting the large audio file into fixed interval chunks
    and apply speech recognition on each of these chunks"""</span>
    <span class="token comment"># open the audio file using pydub</span>
    sound <span class="token operator">=</span> AudioSegment<span class="token punctuation">.</span>from_file<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  
    <span class="token comment"># split the audio file into chunks</span>
    chunk_length_ms <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> minutes<span class="token punctuation">)</span> <span class="token comment"># convert to milliseconds</span>
    chunks <span class="token operator">=</span> <span class="token punctuation">[</span>sound<span class="token punctuation">[</span>i<span class="token punctuation">:</span>i <span class="token operator">+</span> chunk_length_ms<span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>sound<span class="token punctuation">)</span><span class="token punctuation">,</span> chunk_length_ms<span class="token punctuation">)</span><span class="token punctuation">]</span>
    folder_name <span class="token operator">=</span> <span class="token string">"audio-fixed-chunks"</span>
    <span class="token comment"># create a directory to store the audio chunks</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>folder_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>folder_name<span class="token punctuation">)</span>
    whole_text <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token comment"># process each chunk </span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> audio_chunk <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>chunks<span class="token punctuation">,</span> start<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># export audio chunk and save it in</span>
        <span class="token comment"># the `folder_name` directory.</span>
        chunk_filename <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>folder_name<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"chunk</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>i<span class="token punctuation">}</span></span><span class="token string">.wav"</span></span><span class="token punctuation">)</span>
        audio_chunk<span class="token punctuation">.</span>export<span class="token punctuation">(</span>chunk_filename<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">"wav"</span><span class="token punctuation">)</span>
        <span class="token comment"># recognize the chunk</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            text <span class="token operator">=</span> transcribe_audio<span class="token punctuation">(</span>chunk_filename<span class="token punctuation">)</span>
        <span class="token keyword">except</span> sr<span class="token punctuation">.</span>UnknownValueError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error:"</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            text <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>text<span class="token punctuation">.</span>capitalize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">. "</span></span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>chunk_filename<span class="token punctuation">,</span> <span class="token string">":"</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
            whole_text <span class="token operator">+=</span> text
    <span class="token comment"># return the text for all chunks detected</span>
    <span class="token keyword">return</span> whole_text
</code></pre> 
<p>上述函数将大音频文件分割成 5 分钟的块。您可以更改minutes参数以满足您的需要。由于我的音频文件不是那么大，我尝试将其分成 10 秒的块：</p> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\nFull text:"</span><span class="token punctuation">,</span> get_large_audio_transcription_fixed_interval<span class="token punctuation">(</span>path<span class="token punctuation">,</span> minutes<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出：</p> 
<pre><code class="prism language-python">audio<span class="token operator">-</span>fixed<span class="token operator">-</span>chunks\chunk1<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> His abode which you had fixed <span class="token keyword">in</span> a bowery <span class="token keyword">or</span> country seat at a short distance <span class="token keyword">from</span> the city just that one <span class="token keyword">is</span> now called<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>fixed<span class="token operator">-</span>chunks\chunk2<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Dutch street soon abounded <span class="token keyword">with</span> proofs of his ingenuity patent smokejacks that required a horse to work some<span class="token punctuation">.</span> 
audio<span class="token operator">-</span>fixed<span class="token operator">-</span>chunks\chunk3<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Oven roasted meat without fire carts that went before the horses weather cox that turned against the wind <span class="token keyword">and</span> other wrong 
head<span class="token punctuation">.</span>
audio<span class="token operator">-</span>fixed<span class="token operator">-</span>chunks\chunk4<span class="token punctuation">.</span>wav <span class="token punctuation">:</span> Contrivances that astonished <span class="token keyword">and</span> confound it <span class="token builtin">all</span> beholders<span class="token punctuation">.</span> 

Full text<span class="token punctuation">:</span> His abode which you had fixed <span class="token keyword">in</span> a bowery <span class="token keyword">or</span> country seat at a short distance <span class="token keyword">from</span> the city just that one <span class="token keyword">is</span> now called<span class="token punctuation">.</span> Dutch street soon abounded <span class="token keyword">with</span> proofs of his ingenuity patent smokejacks that required a horse to work some<span class="token punctuation">.</span> Oven roasted meat without fire carts that went before the horses weather cox that turned against the wind <span class="token keyword">and</span> other wrong head<span class="token punctuation">.</span> Contrivances that astonished <span class="token keyword">and</span> confound it <span class="token builtin">all</span> beholders<span class="token punctuation">.</span>
</code></pre> 
<h3><a id="25__237"></a>2.5 从麦克风读取</h3> 
<p>   <font face="楷体" size="4">这需要在您的计算机上安装PyAudio ，以下是根据您的操作系统安装的过程：</font></p> 
<ul><li>windows</li></ul> 
<p>   <font face="楷体" size="4">你可以直接pip 安装它：</font></p> 
<pre><code class="prism language-python">$ pip3 install pyaudio
</code></pre> 
<ul><li>Linux<br>    <font face="楷体" size="4">您需要先安装依赖项：</font></li></ul> 
<pre><code class="prism language-python">$ sudo apt<span class="token operator">-</span>get install python<span class="token operator">-</span>pyaudio python3<span class="token operator">-</span>pyaudio
$ pip3 install pyaudio
</code></pre> 
<ul><li>苹果系统<br>    <font face="楷体" size="4">你需要先安装portaudio，然后你可以直接 pip 安装它：</font></li></ul> 
<pre><code class="prism language-python">$ brew install portaudio
$ pip3 install pyaudio
</code></pre> 
<p>   <font face="楷体" size="4">现在让我们使用麦克风来转换我们的语音：</font></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> speech_recognition <span class="token keyword">as</span> sr

<span class="token keyword">with</span> sr<span class="token punctuation">.</span>Microphone<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> source<span class="token punctuation">:</span>
    <span class="token comment"># read the audio data from the default microphone</span>
    audio_data <span class="token operator">=</span> r<span class="token punctuation">.</span>record<span class="token punctuation">(</span>source<span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Recognizing..."</span><span class="token punctuation">)</span>
    <span class="token comment"># convert speech to text</span>
    text <span class="token operator">=</span> r<span class="token punctuation">.</span>recognize_google<span class="token punctuation">(</span>audio_data<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
</code></pre> 
<p>   <font face="楷体" size="4">这将从您的麦克风中听到 5 秒钟，然后尝试将语音转换为文本！</font></p> 
<p>   <font face="楷体" size="4">它与前面的代码非常相似，但是我们在这里使用该Microphone()对象从默认麦克风读取音频，然后我们使用函数duration中的参数record()在5秒后停止读取，然后将音频数据上传到Google以获取输出文本。</font></p> 
<p>   <font face="楷体" size="4">您还可以使用函数offset中的参数在几秒record()后开始录制offset。</font></p> 
<p>   <font face="楷体" size="4">此外，您可以通过将language参数传递给recognize_google()函数来识别不同的语言。例如，如果您想识别西班牙语语音，您可以使用：</font></p> 
<pre><code class="prism language-python">text <span class="token operator">=</span> r<span class="token punctuation">.</span>recognize_google<span class="token punctuation">(</span>audio_data<span class="token punctuation">,</span> language<span class="token operator">=</span><span class="token string">"es-ES"</span><span class="token punctuation">)</span>
</code></pre> 
<p>   <font face="楷体" size="4">在此 StackOverflow 答案中查看支持的语言。</font></p> 
<h2><a id="_292"></a>三、结论</h2> 
<p>   <font face="楷体" size="4">正如您所看到的，使用这个库将语音转换为文本非常容易和简单。这个库在野外被广泛使用。查看官方文档。</font></p> 
<p>   <font face="楷体" size="4">如果您也想在 Python 中将文本转换为语音，请查看本教程。</font></p> 
<p>   <font face="楷体" size="4">另请阅读： 如何使用 Python 识别图像中的光学字符。快乐编码！</font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b415fb6a6ee618bb84e04de7b5425dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【前端】夯实基础 css/html/js 50个练手项目（持续更新）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8bf36a3cc86ea595bf3539fddf463e87/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【unity2021-2023打包安卓工程】踩坑记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>