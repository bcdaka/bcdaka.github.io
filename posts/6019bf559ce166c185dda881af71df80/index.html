<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【爱上C&#43;&#43;】详解类与对象1 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6019bf559ce166c185dda881af71df80/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【爱上C&#43;&#43;】详解类与对象1">
  <meta property="og:description" content="hello朋友们，这里是勇子.虽说已经注册账号1年了，但真正踏上博客之路还是在这几天，我会把博客的内容做的尽可能的易懂，清晰。
OK，话不多说今天我来学习C&#43;&#43;中的类与对象1。
文章目录 1.类的引入2.类的定义3.类的访问限定符4.类访问限定符5.类的实例化6.类对象大小的计算7.结构体内存对齐规则面试题： 8.this指针this指针特性 1.类的引入 C语言结构体中只能定义变量，在C&#43;&#43;中，结构体内不仅可以定义变量， 也可以定义函数。比如：之前在数据结构初阶中，用C语言方式实现的栈， 结构体中只能定义变量；现在以C&#43;&#43;方式实现，会发现struct中也可以定义函数。 typedef int DataType; struct Stack { void Init(size_t capacity) { _array = (DataType*)malloc(sizeof(DataType) * capacity); if (nullptr == _array) { perror(&#34;malloc申请空间失败&#34;); return; } _capacity = capacity; _size = 0; } void Push(const DataType&amp; data) { // 扩容 _array[_size] = data; &#43;&#43;_size; } DataType Top() { return _array[_size - 1]; } void Destroy() { if (_array) { free(_array); _array = nullptr; _capacity = 0; _size = 0; } } DataType* _array; size_t _capacity; size_t _size; }; int main() { Stack s; s.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-10T16:33:24+08:00">
    <meta property="article:modified_time" content="2024-05-10T16:33:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【爱上C&#43;&#43;】详解类与对象1</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>hello朋友们，这里是勇子.虽说已经注册账号1年了，但真正踏上博客之路还是在这几天，我会把博客的内容做的尽可能的易懂，清晰。<br> OK，话不多说今天我来学习C++中的类与对象1。</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_4" rel="nofollow">1.类的引入</a></li><li><a href="#2_66" rel="nofollow">2.类的定义</a></li><li><a href="#3_150" rel="nofollow">3.类的访问限定符</a></li><li><a href="#4_153" rel="nofollow">4.类访问限定符</a></li><li><a href="#5_171" rel="nofollow">5.类的实例化</a></li><li><a href="#6_208" rel="nofollow">6.类对象大小的计算</a></li><li><a href="#7_325" rel="nofollow">7.结构体内存对齐规则</a></li><li><ul><li><a href="#_335" rel="nofollow">面试题：</a></li></ul> 
  </li><li><a href="#8this_409" rel="nofollow">8.this指针</a></li><li><ul><li><a href="#this_458" rel="nofollow">this指针特性</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_4"></a>1.类的引入</h2> 
<pre><code>C语言结构体中只能定义变量，在C++中，结构体内不仅可以定义变量，
也可以定义函数。比如：之前在数据结构初阶中，用C语言方式实现的栈，
结构体中只能定义变量；现在以C++方式实现，会发现struct中也可以定义函数。
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">int</span> DataType<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span>size_t capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_array <span class="token operator">=</span> <span class="token punctuation">(</span>DataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>DataType<span class="token punctuation">)</span> <span class="token operator">*</span> capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">nullptr</span> <span class="token operator">==</span> _array<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc申请空间失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		_capacity <span class="token operator">=</span> capacity<span class="token punctuation">;</span>
		_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Push</span><span class="token punctuation">(</span><span class="token keyword">const</span> DataType<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 扩容</span>
		_array<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
		<span class="token operator">++</span>_size<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	DataType <span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _array<span class="token punctuation">[</span>_size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_array<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">free</span><span class="token punctuation">(</span>_array<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_array <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
			_capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	DataType<span class="token operator">*</span> _array<span class="token punctuation">;</span>
	size_t _capacity<span class="token punctuation">;</span>
	size_t _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Stack s<span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span><span class="token function">Top</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	s<span class="token punctuation">.</span><span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<pre><code>上面结构体的定义，在C++中更喜欢用class来代替。
</code></pre> 
<h2><a id="2_66"></a>2.类的定义</h2> 
<p>格式：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">className</span>
<span class="token punctuation">{<!-- --></span>
<span class="token comment">// 类体：由成员函数和成员变量组成</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 一定要注意后面的分号</span>
</code></pre> 
<pre><code>class为定义类的关键字，ClassName为类的名字，{}中为类的主体，注意类定义结束时后面分号不能省略。
类体中内容称为类的成员：类中的变量称为类的属性或成员变量; 类中的函数称为类的方法或者成员函数。
</code></pre> 
<p>类的两种定义方式：</p> 
<ul><li> 
  <ol><li>声明和定义全部放在类体中，需注意：成员函数如果在类中定义，编译器可能会将其当成内<br> 联函数处理。</li></ol> </li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//声明和定义全部放在类体里</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">showInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span>_name<span class="token operator">&lt;&lt;</span><span class="token string">"-"</span><span class="token operator">&lt;&lt;</span>_sex<span class="token operator">&lt;&lt;</span><span class="token string">"-"</span><span class="token operator">&lt;&lt;</span>_age<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _name<span class="token punctuation">;</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _sex<span class="token punctuation">;</span>
		<span class="token keyword">int</span> _age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> 
<ul><li>2.类声明放在.h文件中，成员函数定义放在.cpp文件中，注意：成员函数名前需要加类名::</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//声明放在person.h文件</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">showInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _name<span class="token punctuation">;</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _sex<span class="token punctuation">;</span>
		<span class="token keyword">int</span> _age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//定义放在类的视线文件person.cpp文件中</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;"person.h"&gt;</span></span>
<span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">showInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout<span class="token operator">&lt;&lt;</span>_name<span class="token operator">&lt;&lt;</span><span class="token string">"-"</span><span class="token operator">&lt;&lt;</span>_sex<span class="token operator">&lt;&lt;</span><span class="token string">"-"</span><span class="token operator">&lt;&lt;</span>_age<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code>一般情况下，更期望采用第二种方式。为了方便演示，笔者在此用方式一。
</code></pre> 
<p>成员变量命名规则的建议：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 或者这样</span>
<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		mYear <span class="token operator">=</span> year<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> mYear<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>一般C++成员前面加_都代表是内部的
函数参数和成员变量尽量不要重命。以免弄混。
</code></pre> 
<h2><a id="3_150"></a>3.类的访问限定符</h2> 
<p><img src="https://images2.imgbox.com/33/2f/v0Rt4c2X_o.png" alt="访问限定符说明"></p> 
<h2><a id="4_153"></a>4.类访问限定符</h2> 
<p>类定义了一个新的作用域，类的所有成员都在类的作用域中。在类体外定义成员时，需要使用 <strong>::作用域操作符</strong>指明成员属于哪个类域。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">PrintPersonInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">char</span> _name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> _gender<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> _age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 这里需要指定PrintPersonInfo是属于Person这个类域</span>
<span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">PrintPersonInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> _name <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> _gender <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> _age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="5_171"></a>5.类的实例化</h2> 
<p>用类类型创建对象的过程，称为类的实例化</p> 
<ul><li> 
  <ol><li>类是对对象进行描述的，是一个模型一样的东西，限定了类有哪些成员，定义出一个类并没有分配实际的内存空间来存储它；比如：入学时填写的学生信息表，表格就可以看成是一个类，来描述具体学生信息。类就像谜语一样，对谜底来进行描述，谜底就是谜语的一个实例。<br> 谜语：“年纪不大，胡子一把，主人来了，就喊妈妈” 谜底：山羊</li></ol> </li><li> 
  <ol start="2"><li>一个类可以实例化出多个对象，实例化出的对象 占用实际的物理空间，存储类成员变量</li></ol> </li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Person<span class="token punctuation">.</span>_age <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 编译失败：error C2059: 语法错误:“.”</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Person类是没有空间的，只有<strong>Person类实例化出的对象</strong>才有具体的年龄。</p> 
<ul><li> 
  <ol start="3"><li>做个比方。类实例化出对象就像现实中使用建筑设计图建造出房子，类就像是设计图，只设计出需要什么东西，但是并没有实体的建筑存在，同样类也只是一个设计，实例化出的对象才能实际存储数据，占用物理空间.</li></ol> </li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">showInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _name<span class="token punctuation">;</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _sex<span class="token punctuation">;</span>
		<span class="token keyword">int</span> _age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Person man<span class="token punctuation">;</span>
	man<span class="token punctuation">.</span>_name<span class="token operator">=</span><span class="token string">"jack"</span><span class="token punctuation">;</span>
	man<span class="token punctuation">.</span>_age<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token comment">//要先实例化出一个 man;然后这个实例化的对象才占空间，</span>
<span class="token comment">//才有name，age，sex；</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="6_208"></a>6.类对象大小的计算</h2> 
<pre><code>类的大小通常由它的非静态成员变量决定。成员函数（包括静态和非静态成员函数）不占用类对象的大小，因为成员函数在内存中只有一份，它们不属于任何特定的对象实例，而是与类本身相关联。成员函数在编译时被转换为指向函数代码的指针，并存储在类的元信息中，而不是对象的内存布局中。
要计算类对象的大小，可以使用sizeof运算符。sizeof运算符返回类型或对象在内存中的大小（以字节为单位）。
分以下四种情况来介绍：
</code></pre> 
<ol><li>空类<br> 结论：空类不含任何成员变量，大小通常为1字节，这1个字节的空间是系统为该类的对象创建的一个占位符，表示该对象仅仅是存在而已，而没有实际内容。在大多数编译器和平台上，即使类没有成员变量，也会为其分配至少1字节的空间。</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span>  </span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>  
<span class="token keyword">class</span> <span class="token class-name">EmptyClass</span> <span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Size of EmptyClass: "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>EmptyClass<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bytes"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token comment">//打印结果为 1</span>
</code></pre> 
<ol start="2"><li>仅有常规函数、无成员变量类<br> 成员函数（包括静态和非静态成员函数）不会影响类对象的大小。成员函数只是类的接口，它们在类的元信息中存储为指向函数代码的指针，不占用对象内存。</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span>  </span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>  
  
<span class="token keyword">class</span> <span class="token class-name">FunctionOnlyClass</span> <span class="token punctuation">{<!-- --></span>  
<span class="token keyword">public</span><span class="token operator">:</span>  
	<span class="token comment"> 常规函数（非静态成员函数）  </span>
    <span class="token keyword">void</span> <span class="token function">printHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello from FunctionOnlyClass!"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Size of FunctionOnlyClass: "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>FunctionOnlyClass<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bytes"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  
    FunctionOnlyClass obj<span class="token punctuation">;</span>  
    obj<span class="token punctuation">.</span><span class="token function">printHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用成员函数  </span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>含有一般成员变量类<br> 类的大小由其非静态成员变量的大小决定，并可能受到内存对齐的影响。内存对齐是编译器为了提高访问效率而进行的优化，它可能会在成员变量之间插入填充字节</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">A</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"A"</span><span class="token operator">&lt;&lt;</span>x<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">printA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"Hello A"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">char</span> Data1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> Data2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">A</span></span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">B</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"B"</span><span class="token operator">&lt;&lt;</span>x<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">printB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"Hello B"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">char</span> Data1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> Data2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">B</span></span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">C</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"C"</span><span class="token operator">&lt;&lt;</span>x<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">printC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"Hello C"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">char</span> Data1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> Data2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	A a<span class="token punctuation">;</span>
	B b<span class="token punctuation">;</span>
	C c<span class="token punctuation">;</span>
	cout<span class="token operator">&lt;&lt;</span><span class="token string">"size of a:"</span><span class="token operator">&lt;&lt;</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token comment">//8</span>
	cout<span class="token operator">&lt;&lt;</span><span class="token string">"size of b:"</span><span class="token operator">&lt;&lt;</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token comment">//16</span>
	cout<span class="token operator">&lt;&lt;</span><span class="token string">"size of c:"</span><span class="token operator">&lt;&lt;</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token comment">//24</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li>含静态成员变量的类<br> 静态成员变量属于类本身，而非类的实例。因此，它们不占用类对象的大小，而是在类的外部静态存储区分配空间。</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span>  </span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>  
  
<span class="token keyword">class</span> <span class="token class-name">StaticMemberClass</span> <span class="token punctuation">{<!-- --></span>  
<span class="token keyword">public</span><span class="token operator">:</span>  
    <span class="token keyword">static</span> <span class="token keyword">int</span> staticVar<span class="token punctuation">;</span> <span class="token comment">// 静态成员变量,加了static</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token keyword">int</span> StaticMemberClass<span class="token double-colon punctuation">::</span>staticVar <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 静态成员变量的定义  </span>
  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Size of StaticMemberClass: "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>StaticMemberClass<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bytes"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  
    <span class="token comment">// 可以通过类名直接访问静态成员变量  </span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"StaticVar value: "</span> <span class="token operator">&lt;&lt;</span> StaticMemberClass<span class="token double-colon punctuation">::</span>staticVar <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre> 
<pre><code>在这个例子中，即使StaticMemberClass有一个静态成员变量staticVar，类对象的大小仍然不受其影响。静态成员变量staticVar在程序的静态存储
区分配空间，不属于任何对象实例。
</code></pre> 
<h2><a id="7_325"></a>7.结构体内存对齐规则</h2> 
<ol><li>第一个成员在与结构体偏移量为0的地址处。</li><li>其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。<br> 注意：对齐数 = 编译器默认的一个对齐数 与 该成员大小的较小值。<br> VS中默认的对齐数为8</li><li>结构体总大小为：最大对齐数（所有变量类型最大者与默认对齐参数取最小）的整数倍。</li><li>如果嵌套了结构体的情况，嵌套的结构体对齐到自己的最大对齐数的整数倍处，结构体的整体大小就是所有最大对齐数（含嵌套结构体的对齐数）的整数倍。</li></ol> 
<p>另外这篇文章也写的非常详细——&gt;<a href="https://blog.csdn.net/weixin_48896613/article/details/127371045?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171167297816800182160695%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171167297816800182160695&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-127371045-null-null.142%5Ev100%5Epc_search_result_base4&amp;utm_term=%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90&amp;spm=1018.2226.3001.4187">内存对齐详解</a></p> 
<h3><a id="_335"></a>面试题：</h3> 
<ol><li>结构体怎么对齐？ 为什么要进行内存对齐？</li><li>如何让结构体按照指定的对齐参数进行对齐？能否按照3、4、5即任意字节对齐？</li><li>什么是大小端？如何测试某台机器是大端还是小端，有没有遇到过要考虑大小端的场景</li></ol> 
<p>回答：</p> 
<ul><li> <p>问题1：<br> 结构体对齐是编译器在内存布局中自动处理的一个过程，确保结构体中的每个成员都按照特定的规则（通常是其类型大小的整数倍）进行对齐。这样做的主要原因有以下几点：<br> 硬件访问效率：大多数硬件平台在访问对齐的内存地址时效率更高。如果数据没有对齐，硬件可能需要进行额外的操作才能访问数据，这降低了性能。<br> 安全性：未对齐的内存访问可能导致硬件异常或未定义行为，尤其是在某些严格对齐要求的平台上。<br> 可移植性：不同的硬件平台或编译器可能有不同的对齐要求。确保结构体正确对齐有助于代码在不同平台上的可移植性。</p> </li><li> <p>问题2：<br> 在C和C++中，可以使用编译器特定的属性或指令来控制结构体的对齐。例如，在GCC中，可以使用__attribute__((aligned(n)))来指定对齐参数。例如：</p> </li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">MyStruct</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">int</span> a<span class="token punctuation">;</span>  
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>  
<span class="token punctuation">}</span> <span class="token function">__attribute__</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">aligned</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上述代码中的MyStruct结构体将按照4字节对齐。<br> 对于任意字节对齐，如3、4、5字节，这通常取决于编译器的支持。在某些编译器中，可以指定任意的对齐值。但是，需要注意的是，不是所有的对齐值都是有效的，特别是在某些硬件平台上，可能有一些限制。<br> 如果编译器不支持特定的对齐值，可能需要使用额外的填充字节或结构体成员来手动控制对齐。</p> 
<ul><li>问题3：<br> 大小端（Endian）是描述计算机系统中字节序的一个术语。大端（Big-Endian）表示高位字节存储在内存的低地址处，而低位字节存储在内存的高地址处；小端（Little-Endian）则相反，低位字节存储在内存的低地址处，高位字节存储在内存的高地址处。</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//1.利用当前一个高类型的变量给其赋值，然后取到其低地址，查看其存储的数据。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">CheckSystem1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&amp;a 取出a的地址；  (char*)&amp;a 代表a变量地址的第一个字节的地址</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//(*(char*)&amp;a) 解引用取出第一个字节保存的内容</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"小端\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"大端\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">CheckSystem1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//2.联合体特性</span>
<span class="token keyword">int</span> <span class="token function">CheckSystem2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">union</span> check
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> num<span class="token punctuation">;</span>
		<span class="token keyword">char</span> a<span class="token punctuation">;</span><span class="token comment">//2个变量公用一块内存空间，并且2个变量的首地址相等</span>
	<span class="token punctuation">}</span>b<span class="token punctuation">;</span>
	b<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//1存放在变量num的低位</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>b<span class="token punctuation">.</span>a <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当变量a=1，相当于将数据的低位存到了内存的低地址处，即小端模式</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">CheckSystem2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"c : %d\n"</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<blockquote> 
 <p>解释： 这段代码首先定义了一个 int 类型的变量 a 并赋值为 1。在大多数现代系统上，int 类型通常至少为 4 字节（32&gt; 位）。数字 1 在二进制表示中只有一个位是 1，其余位都是 0。 00000000 00000000 00000000 00000001 (32-bit int with value 1) 接着，代码将 a 的地址转换为一个 char 类型的指针，然后解引用这个指针来得到 a 的第一个字节。在 printf 语句中，这个字节的值被打印出来。 如果运行代码的机器是小端的，那么 int变量的最低有效字节将位于内存中的最低地址。对于数字 1，其最低有效字节是00000001，因此 num 的值将为 1。<br> 如果运行代码的机器是大端的，那么 int 变量的最高有效字节将位于内存中的最低地址。对于数字 1，其最高有效字节包含所有零，因此 num 的值将不是 1。 最后，根据num 的值判断并打印出是大端还是小端。</p> 
 <p>第二段代码（CheckSystem2） 在这段代码中，定义了一个联合体（union）check，它包含一个 int 类型的成员 num 和一个 char 类型的成员 a。由于联合体的特性，num 和 a 共享同一块内存空间，并且它们的首地址是相同的。 当给 b.num 赋值为1 时，这个值在内存中的表示取决于机器的端序。如果机器是小端的，那么 int 变量的最低有效字节将位于内存的最低地址，并且这个字节的值将是 1。由于 b.a 与 b.num 的首地址相同，因此 b.a 的值也将是 1。 如果机器是大端的，那么 int<br> 变量的最高有效字节将位于内存的最低地址，并且这个字节的值不会是 1。因此，b.a 的值也不会是 1。 最后，通过比较 b.a 是否等于 1来返回一个布尔值，这个布尔值在 main 函数中被打印出来。如果返回 true（即 1），则表示机器是小端的；如果返回 false（即0），则表示机器是大端的。</p> 
</blockquote> 
<h2><a id="8this_409"></a>8.this指针</h2> 
<p>C++编译器给每个“非静态的成员函数“增加了一个隐藏的指针参数，让该指针指向当前对象(函数运行时调用该函数的对象)，在函数体中所有“成员变量”的操作，都是通过该指针去访问。只不过所有的操作对用户是透明的，即用户不需要来传递，编译器自动完成。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//所有的成员函数的参数 都比看到的多一个，  就是this指针</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span><span class="token comment">//this-&gt;_year=year;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 不能显示的写实参和形参</span>
	<span class="token comment">// void Print(Date* const this)</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//this = nullptr;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token comment">// 但是可以在类里面显示的使用</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span>     <span class="token comment">// 年</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span>    <span class="token comment">// 月</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span>      <span class="token comment">// 日</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//编辑器视角下是 d1.Init(&amp;d1,2023,10,19)</span>
<span class="token comment">//这里，&amp;d1是d1对象的地址，它会被隐式地作为 this 指针传递给 Init 函数。然后，在 init 函数内部，编译器会像这样使用 this 指针:</span>
<span class="token comment">//       初始化函数里面     //this-&gt;_year=year;</span>
	Date d2<span class="token punctuation">;</span>

	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// d1.Print(&amp;d1);</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="this_458"></a>this指针特性</h3> 
<p>1.this指针的类型:类类型* const，即成员函数中，不能给this指针赋值。<br> 2.只能在”成员函数”的内部使用<br> 3. this指针本质上是“成员函数”的形参，当对象调用成员函数时，将对象地址作为实参传递给this形参。所以对象中不存储this指针。<br> 4. this指针是“成员函数”第一个隐含的指针形参，一般情况由编译器通过ecx寄存器自动传递，不需要用户传递</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f430cb12b14c5db19c0273812f1444f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac安装激活--Typora,一个比记事本更加强大的纯文本软件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dedb198226adc7db29ecf1efef110250/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">whisper使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>