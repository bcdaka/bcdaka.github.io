<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>tomcat相关 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/295ac7776e57448a6fff7ebec52b6209/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="tomcat相关">
  <meta property="og:description" content="一、部署安装tomcat 在10和20上安装tomcat
[root@10 ~]# dnf install java-1.8.0-openjdk.x86_64 -y #安装java环境
[root@10 ~]# tar zxf apache-tomcat-9.0.93.tar.gz -C /usr/local/ #安装并启动tomcat
[root@10 ~]# ln -s /usr/local/apache-tomcat-9.0.93/ /usr/local/tomcat/ [root@10 ~]# /usr/local/tomcat/bin/startup.sh Using CATALINA_BASE: /usr/local/tomcat
Using CATALINA_HOME: /usr/local/tomcat
Using CATALINA_TMPDIR: /usr/local/tomcat/temp
Using JRE_HOME: /usr
Using CLASSPATH: /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar
Using CATALINA_OPTS: Tomcat started.
[root@10 ~]# netstat -antlupe | grep java #查看端口
tcp6 0 0 :::8080 :::* LISTEN 0 30431 3308/java tcp6 0 0 127.0.0.1:8005 :::* LISTEN 0 30443 3308/java tomcat相关目录和文件">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-21T16:07:45+08:00">
    <meta property="article:modified_time" content="2024-08-21T16:07:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">tomcat相关</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、部署安装tomcat</h2> 
<blockquote> 
 <p><strong>在10和20上安装tomcat</strong></p> 
 <p>[root@10 ~]# dnf install java-1.8.0-openjdk.x86_64 -y #安装java环境<br> [root@10 ~]# tar zxf apache-tomcat-9.0.93.tar.gz -C /usr/local/ #安装并启动tomcat<br> [root@10 ~]# ln -s /usr/local/apache-tomcat-9.0.93/ /usr/local/tomcat/ <br> [root@10 ~]# /usr/local/tomcat/bin/startup.sh <br> Using CATALINA_BASE:   /usr/local/tomcat<br> Using CATALINA_HOME:   /usr/local/tomcat<br> Using CATALINA_TMPDIR: /usr/local/tomcat/temp<br> Using JRE_HOME:        /usr<br> Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar<br> Using CATALINA_OPTS:   <br> Tomcat started.</p> 
 <p>[root@10 ~]# netstat -antlupe | grep java #查看端口<br> tcp6       0      0 :::8080                 :::*                    LISTEN      0          30431      3308/java           <br> tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      0          30443      3308/java </p> 
</blockquote> 
<p><img alt="" height="460" src="https://images2.imgbox.com/b7/94/FVifKC8a_o.png" width="1200"></p> 
<blockquote> 
 <p><strong> tomcat相关目录和文件</strong></p> 
 <p>[root@10 ~]# ls /usr/local/tomcat/<br> bin  BUILDING.txt  conf  CONTRIBUTING.md  lib  LICENSE  logs  NOTICE  README.md  RELEASE-NOTES  RUNNING.txt  temp  webapps  work<br><strong>生成tomcat的启动文件</strong></p> 
 <p>[root@10 ~]# cat /usr/local/tomcat/conf/tomcat.conf<br> JAVA_HOME=/etc/alternatives/jre_openjdk</p> 
 <p>[root@10 ~]# useradd -s /sbin/nologin -M tomcat<br> [root@10 ~]# chown -R tomcat.tomcat /usr/local/tomcat/<br> [root@10 ~]# cat  /lib/systemd/system/tomcat.service<br>  [Unit]<br>  Description=Tomcat<br>  #After=syslog.target network.target remote-fs.target nss-lookup.target<br>  After=syslog.target network.target<br>  [Service]<br>  Type=forking<br>  EnvironmentFile=/usr/local/tomcat/conf/tomcat.conf<br>  ExecStart=/usr/local/tomcat/bin/startup.sh<br>  ExecStop=/usr/local/tomcat/bin/shutdown.sh<br>  PrivateTmp=true<br>  User=tomcat<br>  Group=tomcat<br>  [Install]<br>  WantedBy=multi-user.target</p> 
 <p>[root@10 ~]# systemctl daemon-reload<br> [root@10 ~]# systemctl enable --now tomcat<br>  </p> 
</blockquote> 
<h2>tomcat负载均衡实现</h2> 
<blockquote> 
 <p>[root@node1 ~]# vim /usr/local/nginx/conf.d/vhost.conf </p> 
 <p>upstream tomcat {<!-- --><br>          ip_bash;<br>          #hash $cookie_JSESSIONID;<br>          server 172.25.250.10:8080;<br>          server 172.25.250.20:8080;<br>  }<br>  server {<!-- --><br>         listen 80;<br>          server_name www.bwmis.org;</p> 
 <p> location ~ \.jsp$ {<!-- --><br>                  proxy_pass http://tomcat;</p> 
 <p> }<br>  }<br> [root@20 ~]# cp test.jsp /usr/local/tomcat/webapps/ROOT/  #10也要同样的操作</p> 
 <p>测试</p> 
</blockquote> 
<p> <img alt="" height="1108" src="https://images2.imgbox.com/00/e8/ZFNkPQWy_o.png" width="1200"><img alt="" height="474" src="https://images2.imgbox.com/58/9c/MtGos0SA_o.png" width="567"></p> 
<h2> Memcached</h2> 
<blockquote> 
 <p>kryo-3.0.3.jar asm-5.2.jar</p> 
 <p>objenesis-2.6.jar reflectasm-1.11.9.jar</p> 
 <p>minlog-1.3.1.jar kryo-serializers-0.45.jar</p> 
 <p>msm-kryo-serializer-2.3.2.jar</p> 
 <p>memcached-session-manager-tc9-2.3.2.jar</p> 
 <p>spymemcached-2.12.3.jar</p> 
 <p>memcached-session-manager-2.3.2.jar 放到<span style="color:#fe2c24;">/usr/local/tomcat/lib/</span>这个目录下面<br>  </p> 
</blockquote> 
<blockquote> 
 <p><a href="https://github.com/magro/memcached-session-manager/wiki/SetupAndConfiguration" title="https://github.com/magro/memcached-session-manager/wiki/SetupAndConfiguration">https://github.com/magro/memcached-session-manager/wiki/SetupAndConfiguration</a> #下载jar包</p> 
 <p>[root@20 ~]# yum install memcached -y<br> [root@20 ~]# vim /etc/sysconfig/memcached </p> 
 <p> PORT="11211"<br>  USER="memcached"<br>  MAXCONN="1024"<br>  CACHESIZE="64"<br>  OPTIONS="-l 0.0.0.0,::1"</p> 
 <p>[root@20 ~]# systemctl enable --now memcached</p> 
 <p>[root@10 ~]# netstat -antlupe | grep memcache #查看端口<br> [root@20 ~]# vim /usr/local/tomcat/conf/context.xml</p> 
 <p> &lt;Manager className="de.javakaffee.web.msm.MemcachedBackupSessionManager"<br>          memcachedNodes="n1:172.25.250.10:11211,n2:172.25.250.20:11211"<br>          failoverNodes="n1"<br>          requestUriIgnorePattern=".*\.(ico|png|gif|jpg|css|js)$"<br>          transcoderFactoryClass="de.javakaffee.web.msm.serializer.kryo.KryoTranscoderFactory"/&gt;<br>  </p> 
</blockquote> 
<p><img alt="" height="387" src="https://images2.imgbox.com/2f/87/3i0eisWE_o.png" width="693"></p> 
<p><span style="color:#fe2c24;"><strong>root@10 lib]# systemctl stop tomcat #再次提交就会变到20</strong></span><br>  <img alt="" height="420" src="https://images2.imgbox.com/1b/d1/78pKf2ez_o.png" width="775"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5899d9497b8dfe55d130f9cd231d4c15/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【机器学习】dense的用法以及如何用Numpy构建一个简单神经网络</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/39cd9968cf53f7d7778eb327f617b94b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">企业级Web服务器性能优化实践指南</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>