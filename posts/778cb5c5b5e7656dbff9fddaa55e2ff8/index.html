<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL进阶篇】管理 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/778cb5c5b5e7656dbff9fddaa55e2ff8/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【MySQL进阶篇】管理">
  <meta property="og:description" content="1、系统数据库 MySQL数据库安装完成之后，自带以下四个数据库，具体作用如下：
数据库含义mysql存储MySQL服务器正常运行所需要的各种信息（时区、主从、用户、权限等）information_schema提供了访问数据库元数据的各种表和视图，包含数据库、表、字段类型及访问权限等performance_schema为MySQL服务器运行时状态提供了一个底层监控功能，主要用于收集数据库服务器性能参数sys包含了一系列方便DBA和开发人员利用performance_schema性能数据库进行性能调优和诊断的视图 2、常用工具 · mysql mysql的客户端工具
#语法：
mysql [options] [database]
选项：
-u,--user=name #指定用户名
-p,--password[=name] #指定密码
-h,--host=name #指定服务器IP或域名
-P,--port=port #指定连接端口
-e,--execute=name #执行SQL语句并退出
-e选项可以在MySQL客户端执行SQL语句，而不用连接到MySQL数据库再执行，对于一些批处理脚本，这种方式尤为方便。
mysql -h192.168.235.129 -P3306 -uroot -p0219423 test -e &#39;select * from course&#39; · mysqladmin mysqladmin是一个执行管理操作的客户端程序，可以用它来检查服务器的配置和当前状态，创建并删除数据库等。
#通过帮助文档查看选项：
mysqladmin --help where command is a one or more of: (commands may be shortened) create databasename create a new database debug instruct server to write debug information to log drop databasename delete a database and all its tables extended-status gives an extended status message from the server flush-hosts flush all cached hosts flush-logs flush all logs flush-status clear status variables flush-tables flush all tables flush-threads flush the thread cache flush-privileges reload grant tables (same as reload) kill id,id,.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-04T22:46:39+08:00">
    <meta property="article:modified_time" content="2024-08-04T22:46:39+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL进阶篇】管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1、系统数据库</h2> 
<p>MySQL数据库安装完成之后，自带以下四个数据库，具体作用如下：</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td>数据库</td><td>含义</td></tr><tr><td>mysql</td><td>存储MySQL服务器正常运行所需要的各种信息（时区、主从、用户、权限等）</td></tr><tr><td>information_schema</td><td>提供了访问数据库元数据的各种表和视图，包含数据库、表、字段类型及访问权限等</td></tr><tr><td>performance_schema</td><td>为MySQL服务器运行时状态提供了一个底层监控功能，主要用于收集数据库服务器性能参数</td></tr><tr><td>sys</td><td>包含了一系列方便DBA和开发人员利用performance_schema性能数据库进行性能调优和诊断的视图</td></tr></tbody></table> 
<h2>2、常用工具</h2> 
<h3>· mysql</h3> 
<p>mysql的客户端工具</p> 
<blockquote> 
 <p>#语法：</p> 
 <p>        mysql [options] [database]</p> 
 <p>选项：</p> 
 <p>        -u,--user=name        #指定用户名</p> 
 <p>        -p,--password[=name]        #指定密码</p> 
 <p>        -h,--host=name        #指定服务器IP或域名</p> 
 <p>        -P,--port=port        #指定连接端口</p> 
 <p>        -e,--execute=name        #执行SQL语句并退出</p> 
</blockquote> 
<p>-e选项可以在MySQL客户端执行SQL语句，而不用连接到MySQL数据库再执行，对于一些批处理脚本，这种方式尤为方便。</p> 
<pre><code class="language-sql"> mysql -h192.168.235.129 -P3306 -uroot -p0219423 test -e 'select * from course'
</code></pre> 
<h3> · mysqladmin</h3> 
<p>mysqladmin是一个执行管理操作的客户端程序，可以用它来检查服务器的配置和当前状态，创建并删除数据库等。</p> 
<blockquote> 
 <p>#通过帮助文档查看选项：</p> 
 <p>        mysqladmin --help </p> 
</blockquote> 
<pre><code class="language-sql">where command is a one or more of: (commands may be shortened)
  create databasename   create a new database
  debug                 instruct server to write debug information to log
  drop databasename     delete a database and all its tables
  extended-status       gives an extended status message from the server
  flush-hosts           flush all cached hosts
  flush-logs            flush all logs
  flush-status          clear status variables
  flush-tables          flush all tables
  flush-threads         flush the thread cache
  flush-privileges      reload grant tables (same as reload)
  kill id,id,...        kill mysql threads
  password new-password change old password to new-password, mysql 4.1 hashing.
  old-password new-password change old password to new-password in old format.


  ping                  check if mysqld is alive
  processlist           show list of active threads in server
  reload                reload grant tables
  refresh               flush all tables and close and open logfiles
  shutdown              take server down
  status                gives a short status message from the server
  start-slave           Start slave
  stop-slave            Stop slave
  variables             Prints variables available
  version               Get version info from server</code></pre> 
<blockquote> 
 <p>#示例：</p> 
 <p>        mysqladmin -uroot -p0219423 drop 'test'</p> 
 <p>        mysqladmin -uroot -p0219423 version </p> 
</blockquote> 
<h3>· mysqlbinlog</h3> 
<p> 由于服务器生成的二进制日志文件以二进制格式保存，所以如果想要检查这些文本的文本格式，就会使用到mysqlbinlog日志管理工具。</p> 
<blockquote> 
 <p>#语法：</p> 
 <p>        mysqlbinlog [options] log-files1 log-files2 ...</p> 
 <p>选项：</p> 
 <p>        -d,--database=name        #指定数据库名称，只列出指定的数据库相关操作</p> 
 <p>        -o.--offset=#        #忽略掉日志中的前n行命令</p> 
 <p>        -r,--result-file=name        #将输出的文本格式日志输出到指定文件</p> 
 <p>        -S,--short-form        #显示简单格式，省略掉一些信息</p> 
 <p>        --start-datatime=data1 --stop -datatime=data2        #指定日期间隔内的所有日志</p> 
 <p>        --start-position=pos1 --stop -position=pos2        #指定位置间隔内的所有日志</p> 
</blockquote> 
<h3><img alt="" src="https://images2.imgbox.com/b7/3e/LpU349bM_o.png"></h3> 
<h3> · mysqlshow</h3> 
<p>mysqlshow客户端查找工具，用来很快的查找存在哪些数据库、数据库中的表、表中的列或者索引</p> 
<blockquote> 
 <p>#语法:</p> 
 <p>        mysqlshow [options] [db_name [table_name [col_name]]]</p> 
 <p>#选项：</p> 
 <p>        --count        #显示数据库及表的统计信息（数据库、表均可以不指定）</p> 
 <p>        -i        #显式指定数据库或指定表的状态信息</p> 
</blockquote> 
<p>示例：</p> 
<pre><code class="language-sql">mysqlshow -uroot -p0219423 --count
mysqlshow: [Warning] Using a password on the command line interface can be insecure.
+--------------------+--------+--------------+
|     Databases      | Tables |  Total Rows  |
+--------------------+--------+--------------+
| information_schema |     79 |        26188 |
| mysql              |     37 |         3861 |
| performance_schema |    110 |       206515 |
| sys                |    101 |         4672 |
| test               |      3 |           24 |
+--------------------+--------+--------------+
5 rows in set.
[root@localhost mysql]# mysqlshow -uroot -p0219423 test --count
mysqlshow: [Warning] Using a password on the command line interface can be insecure.
Database: test
+---------+----------+------------+
| Tables  | Columns  | Total Rows |
+---------+----------+------------+
| course  |        3 |          3 |
| score   |        3 |         18 |
| teacher |        2 |          3 |
+---------+----------+------------+
3 rows in set.

[root@localhost mysql]# mysqlshow -uroot -p0219423 test course --count
mysqlshow: [Warning] Using a password on the command line interface can be insecure.
Database: test  Table: course  Rows: 3
+--------+-------------+--------------------+------+-----+---------+-------+---------------------------------+--------------+
| Field  | Type        | Collation          | Null | Key | Default | Extra | Privileges                      | Comment      |
+--------+-------------+--------------------+------+-----+---------+-------+---------------------------------+--------------+
| c_id   | varchar(50) | utf8mb4_0900_ai_ci | YES  |     |         |       | select,insert,update,references | 课程编号 |
| c_name | varchar(50) | utf8mb4_0900_ai_ci | YES  |     |         |       | select,insert,update,references | 课程名称 |
| t_id   | varchar(50) | utf8mb4_0900_ai_ci | YES  |     |         |       | select,insert,update,references | 教师编号 |
+--------+-------------+--------------------+------+-----+---------+-------+---------------------------------+--------------+
 mysqlshow -uroot -p0219423 test course -i
mysqlshow: [Warning] Using a password on the command line interface can be insecure.
Database: test  Wildcard: course
+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+--------------------+----------+----------------+---------+
| Name   | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time | Check_time | Collation          | Checksum | Create_options | Comment |
+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+--------------------+----------+----------------+---------+
| course | InnoDB | 10      | Dynamic    | 3    | 5461           | 16384       | 0               | 0            | 0         |                | 2024-07-19 15:06:44 |             |            | utf8mb4_0900_ai_ci |          |                |         |
+--------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+--------------------+----------+----------------+---------+
</code></pre> 
<h3> · mysqldump</h3> 
<p> mysqldump客户端工具是用来备份数据库或在不同数据库之间进行数据迁移。备份内容包含创建表，及插入表的SQL语句。</p> 
<blockquote> 
 <p>#语法：</p> 
 <p>        mysqldump [options] db_name [tables]</p> 
 <p>        mysqldump [options] --database/-B db1 [db2 db3 ...]</p> 
 <p>        mysqldump [options] --all databases/-A</p> 
 <p>#连接选项：</p> 
 <p>        -u,--user=name        #指定用户名</p> 
 <p>        -p,--password[=name]        #指定密码</p> 
 <p>        -h,--host=name        #指定服务器ip或域名</p> 
 <p>        -p,--port=#        #指定连接端口</p> 
 <p>#输出选项：</p> 
 <p>        --add-drop -database        #在每个数据库创建语句前加上drop database语句</p> 
 <p>        --add-drop -table        #在每个表创建语句前加上drop table语句，默认开启；不开启（--skip -add -drop -table）</p> 
 <p>        -n,--no-create-db        #不包含数据库的创建语句</p> 
 <p>        -t,--no-create-info        #不包含数据表的创建语句</p> 
 <p>        -d,--no-data        #不包含数据</p> 
 <p>        -T,--tab=name        #自动生成两个文件：一个.sql文件，创建表结构的语句；一个.txt文件，数据文件</p> 
</blockquote> 
<pre><code class="language-sql">mysqldump -uroot -p0219423 -t test &gt; test.sql
mysqldump -uroot -p0219423 -d test &gt; test.sql
mysqldump -uroot -p0219423 -T /var/lib/mysql-files/ test score;
mysqldump: [Warning] Using a password on the command line interface can be insecure.
[root@localhost mysql]# cd /var/lib/mysql-files/;
[root@localhost mysql-files]# ll
总用量 8
-rw-r--r--. 1 root  root  1469 8月   2 21:59 score.sql
-rw-r-----. 1 mysql mysql  162 8月   2 21:59 score.txt
</code></pre> 
<h3>· mysqlimport/source</h3> 
<p>mysqlimport是客户端数据导入工具，用来导入mysqldump 加 -T参数后导出的文本文件。</p> 
<blockquote> 
 <p>#语法：</p> 
 <p>        mysqlimport [options] da_name textfile1 [textfile2...]</p> 
</blockquote> 
<p>示例：</p> 
<pre><code class="language-sql"> mysqlimport -uroot -p0219423 test /var/lib/mysql-files/score.txt;
mysqlimport: [Warning] Using a password on the command line interface can be insecure.
test.score: Records: 18  Deleted: 0  Skipped: 0  Warnings: 0</code></pre> 
<p>如果需要导入sql文件，可以使用source命令</p> 
<blockquote> 
 <p>source /root/xxx.sql </p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/38c544d8afa364ca8cef14d5f25a17d2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">详解高性能中间件Iceoryx在ROS2中的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/92853856c84856c6ba10530267ba85d3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【MySQL】索引——索引的引入、认识磁盘、磁盘的组成、扇区、磁盘访问、磁盘和MySQL交互、索引的概念</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>