<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>2023年最新IDEA中 Java程序 | Java&#43;Kotlin混合开发的程序如何打包成jar包和exe文件(gradle版本) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ab29768572a491e759204e79fb4692d5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="2023年最新IDEA中 Java程序 | Java&#43;Kotlin混合开发的程序如何打包成jar包和exe文件(gradle版本)">
  <meta property="og:description" content="文章内容： 一. JAVA | JAVA和Kotlin混开开发的程序打包成jar方法
1.1 方法一 ：IDEA中手动打包
1.2 方法二 ：build.gradle中配置后编译时打包
二. JAVA | JAVA和Kotlin混合开发的程序打包成exe的方法
一. JAVA | JAVA和Kotlin混开开发的程序打包成jar方法 纯JAVA | 纯Kotlin | JAVA和Kotlin混合开发打包其实都一样的，因为jar包中主要还是class文件，而kotlin在编译后生成的也是class文件，因此不影响打包,因此以下打包jar方法适用于上述所有情况
1.1 方法一 ：IDEA中手动打包 步骤1：File --&gt; Project Structure 步骤二： 步骤三：按以下操作后点Ok 说明：
Module：这里选择要打包的模块，一般用gradle构建的项目可以选择ALL Moudules（我就是），也可以选择main模块，根据需要选择Main Class： 这里需要选中入口函数（也就是带有main方法的函数）
JAR Files From librarys：这里选中第一个（extract to the target JAR — 表示把额外用到的jar包都打进我们想要打包的jar包，即打包完之后只有一个jar包） 如果选择第二个（copy to the output directory and link via manifest）则打包后会有多个jar包，如图是选择第二个打包
Directory for META-INF/MANIFESTMF: 这里不要选择IDEA默认是，而是要自定义（C盘 D盘任意） 否则在运行jar包时会报找不到主清单文件的错误 步骤四：操作完点击apply 再点击ok 步骤五：点击最上面的build --&gt; Build Artifacts 点击后会弹出以下窗口： 选择Build即可">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-07-01T12:04:50+08:00">
    <meta property="article:modified_time" content="2023-07-01T12:04:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">2023年最新IDEA中 Java程序 | Java&#43;Kotlin混合开发的程序如何打包成jar包和exe文件(gradle版本)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>文章内容：</h2> 
<p><a href="#1" rel="nofollow">一. JAVA | JAVA和Kotlin混开开发的程序打包成jar方法</a><br> <a href="#1.1" rel="nofollow">1.1 方法一 ：IDEA中手动打包</a><br> <a href="#1.2" rel="nofollow">1.2 方法二 ：build.gradle中配置后编译时打包</a><br> <a href="#2" rel="nofollow">二. JAVA | JAVA和Kotlin混合开发的程序打包成exe的方法</a></p> 
<h2><a id="_JAVA__JAVAKotlinjar_5"></a>一. JAVA | JAVA和Kotlin混开开发的程序打包成jar方法</h2> 
<p><strong><code>纯JAVA | 纯Kotlin | JAVA和Kotlin混合开发打包其实都一样的，因为jar包中主要还是class文件，而kotlin在编译后生成的也是class文件，因此不影响打包,因此以下打包jar方法适用于上述所有情况</code></strong></p> 
<h3><a id="11__IDEA_7"></a>1.1 方法一 ：IDEA中手动打包</h3> 
<h4><a id="1File__Project_Structure_8"></a>步骤1：File --&gt; Project Structure</h4> 
<p><img src="https://images2.imgbox.com/71/63/XbLx5H45_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_10"></a>步骤二：</h3> 
<p><img src="https://images2.imgbox.com/ae/c3/IvaymMG2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Ok_12"></a>步骤三：按以下操作后点Ok</h4> 
<p><img src="https://images2.imgbox.com/47/6d/ifUBH1xU_o.png" alt="在这里插入图片描述"><br> 说明：</p> 
<ol><li>Module：这里选择要打包的模块，一般用gradle构建的项目可以选择<code>ALL Moudules</code>（我就是），也可以选择<code>main</code>模块，根据需要选择</li><li>Main Class： 这里需要选中入口函数（也就是带有main方法的函数）<br> <img src="https://images2.imgbox.com/59/fd/Z7yWr2WZ_o.png" alt="在这里插入图片描述"></li><li>JAR Files From librarys：这里选中第一个（extract to the target JAR — 表示把额外用到的jar包都打进我们想要打包的jar包，即打包完之后只有一个jar包） 如果选择第二个（copy to the output directory and link via manifest）则打包后会有多个jar包，如图是选择第二个打包<br> <img src="https://images2.imgbox.com/dd/d7/ZZ0aa4FD_o.png" alt="在这里插入图片描述"></li><li>Directory for META-INF/MANIFESTMF: 这里不要选择IDEA默认是，而是要自定义（C盘 D盘任意） <code>否则在运行jar包时会报找不到主清单文件的错误</code></li></ol> 
<h4><a id="apply_ok_22"></a>步骤四：操作完点击apply 再点击ok</h4> 
<p><img src="https://images2.imgbox.com/ad/9d/Wo6BJDQJ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b2/05/bGsGcPXC_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="build__Build_Artifacts_26"></a>步骤五：点击最上面的build --&gt; Build Artifacts</h4> 
<p><img src="https://images2.imgbox.com/81/fc/5HHFouvS_o.png" alt="在这里插入图片描述"><br> 点击后会弹出以下窗口： 选择Build即可<br> <img src="https://images2.imgbox.com/1c/b4/VX1TxzFN_o.png" alt="在这里插入图片描述"><br> 最后等它build完即可，就能在项目的out --&gt; artifacts 下看到打包好的jar，并且在 out --&gt; production 下看到resources文件夹<br> <img src="https://images2.imgbox.com/5e/0c/59GM9i8I_o.png" alt="在这里插入图片描述"><br> 比如我的resources下面存放了image目录图片，那么就能看到<br> <img src="https://images2.imgbox.com/56/07/cywL0Abl_o.png" alt="在这里插入图片描述"><br> ！！！注意：在此处看到resources不代表resources文件夹已经被成功打包进jar包中了<br> 可以使用**<code>jar tf &lt;jar包名称&gt;</code>**来查看jar包的结构已经文件 （需要在jar包的所在目录下才可以）<br> 例如：<br> <img src="https://images2.imgbox.com/96/9c/Sx6edP9E_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6a/b3/PBagIGfr_o.png" alt="在这里插入图片描述"><br> 这条指令对于测试jar包是否打包成功十分方便</p> 
<h4><a id="buildgradle_41"></a>第二种方式：build.gradle中配置，编译时自动打包包</h4> 
<p>配置和注释如下：（主要参考带有jar注释的地方）</p> 
<pre><code class="prism language-groovy">plugins <span class="token punctuation">{<!-- --></span>
    id <span class="token string">'java'</span>
    id <span class="token string">'org.jetbrains.kotlin.jvm'</span> version <span class="token string">'1.8.0'</span>
<span class="token punctuation">}</span>

group <span class="token operator">=</span> <span class="token string">''</span>
version <span class="token operator">=</span> <span class="token string">''</span>

repositories <span class="token punctuation">{<!-- --></span>
    <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//设置编译时的编码</span>
tasks<span class="token punctuation">.</span><span class="token function">withType</span><span class="token punctuation">(</span>JavaCompile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    options<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'UTF-8'</span>
<span class="token punctuation">}</span>
<span class="token comment">//设置运行时的编码</span>
tasks<span class="token punctuation">.</span><span class="token function">withType</span><span class="token punctuation">(</span>JavaExec<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">jvmArgs</span><span class="token punctuation">(</span><span class="token string">'-Dfile.encoding=UTF-8'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 配置资源文件目录
 */</span>
sourceSets <span class="token punctuation">{<!-- --></span>
    main <span class="token punctuation">{<!-- --></span>
        resources <span class="token punctuation">{<!-- --></span>
            srcDirs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'src/main/resources'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * TODO 创建一个新的配置，继承至implementation
 * TODO 原因 : 在打包jar时  configurations.implementation.collect { it.isDirectory() ? it : zipTree(it) } 会报错
 */</span>
configurations <span class="token punctuation">{<!-- --></span>
    deployJar
    deployJar<span class="token punctuation">.</span><span class="token function">extendsFrom</span><span class="token punctuation">(</span>implementation<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 打包jar包的配置
 */</span>
jar <span class="token punctuation">{<!-- --></span>
    manifest <span class="token punctuation">{<!-- --></span>
        attributes <span class="token string">'Main-Class'</span> <span class="token punctuation">:</span> <span class="token string">'net.LauncherKt'</span> <span class="token comment">//配置jar包运行时的入口</span>
        attributes <span class="token string">'Custom-Attribute'</span><span class="token punctuation">:</span> <span class="token string">'Custom Value'</span> <span class="token comment">// 解决jar包运行时没有主清单属性</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 解决jar包运行时没有主清单属性</span>
    <span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'path/to/custom-manifest.mf'</span><span class="token punctuation">)</span>
    <span class="token comment">// 将所有编译依赖项打包到 JAR 文件中</span>
    from <span class="token punctuation">{<!-- --></span>
        configurations<span class="token punctuation">.</span>deployJar<span class="token punctuation">.</span>collect <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> it <span class="token punctuation">:</span> <span class="token function">zipTree</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 将运行时依赖项打包到 JAR 文件中</span>
    from <span class="token punctuation">{<!-- --></span>
        configurations<span class="token punctuation">.</span>runtimeClasspath<span class="token punctuation">.</span>collect <span class="token punctuation">{<!-- --></span> it<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> it <span class="token punctuation">:</span> <span class="token function">zipTree</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将资源文件一并打包到jar包中</span>
    from sourceSets<span class="token punctuation">.</span>main<span class="token punctuation">.</span>resources
    <span class="token comment">// 设置处理重复文件的策略</span>
    duplicatesStrategy <span class="token operator">=</span> <span class="token string">'exclude'</span>
<span class="token punctuation">}</span>


dependencies <span class="token punctuation">{<!-- --></span>
    implementation <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token punctuation">:</span> <span class="token string">'lib'</span><span class="token punctuation">,</span> include<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*.jar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    implementation <span class="token string">"org.jetbrains.kotlin:kotlin-stdlib-jdk8"</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>只要根据上面一样在IDEA中配置build后，一编译就可以在build --&gt; libs 下看到jar文件了</p> 
<p>如何测试打包后的jar包是否没问题，可用指令 <code>java -jar &lt;jar包名&gt;</code> 运行jar包， 也是需要在jar包所在目录下执行指令才可以，具体参考上面的 查看jar包结构的指令使用</p> 
<h3><a id="_119"></a>注意事项：</h3> 
<p>因为是利用gradle打包的，因此每次打包完后如果配置发生变动，那么就一定要清除项目clean，再重新build （maven我不清楚）,如果不clean的话就会报很多错误（例如找不到什么标识can’t resolve等各种奇怪的报错）<br> 操作如下：</p> 
<h4><a id="1Gradle_122"></a>1.点击Gradle</h4> 
<p><img src="https://images2.imgbox.com/f7/11/s3BRseKV_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2__Tasks__build__clean_124"></a>2. 点击项目–&gt; Tasks --&gt; build --&gt; clean</h4> 
<p><img src="https://images2.imgbox.com/8f/4b/2nppPeLn_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_cleanbuild_126"></a>3. clean后，再点击build</h4> 
<p><img src="https://images2.imgbox.com/a4/41/NmA1sNy9_o.png" alt="在这里插入图片描述"><br> 最后等待项目构建完即可。</p> 
<h2><a id="_JAVA__JAVAKotlinexe_129"></a>二. JAVA | JAVA和Kotlin混合开发的程序打包成exe的方法</h2> 
<p>这个我们需要借助exe4j这个工具来打包：<br> <a href="https://www.ej-technologies.com/download/exe4j/files" rel="nofollow">官方链接</a></p> 
<p>使用方法： 利用我们上述生成的可以正常执行的jar包，然后这个这个exe4j 工具来打包。 操作很简单，如下：</p> 
<h4><a id="1_welcome__134"></a>1. welcome页面 ，此步骤名字和密码随便取，证书随便找一个即可</h4> 
<blockquote> 
 <p>A-XVK258563F-1p4lv7mg7sav<br> A-XVK209982F-1y0i3h4ywx2h1<br> A-XVK267351F-dpurrhnyarva<br> A-XVK204432F-1kkoilo1jy2h3r</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/08/26/NRF1Frhd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2Choose_project_type___JAR_in_EXE_mode_142"></a>2.Choose project type — 此步骤选择 “JAR in EXE” mode</h4> 
<p><img src="https://images2.imgbox.com/c7/2a/J3QfIOmc_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_Configure_applicationexe_144"></a>3. Configure application，配置生成的exe文件</h4> 
<p><img src="https://images2.imgbox.com/d8/ce/sucxooTz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_Configure_executable_icon__146"></a>4. Configure executable ，跟下图一样配置即可，如果icon不选的话，要把这个“√ ”给弄掉</h4> 
<p><img src="https://images2.imgbox.com/d0/16/1R2D97oP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_Configure_Java_invocation__java_148"></a>5. Configure Java invocation – 配置java的执行</h4> 
<p><img src="https://images2.imgbox.com/2a/77/8runjF1o_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/80/f9/IQqQDC81_o.png" alt="在这里插入图片描述"><br> <strong>第三步选中上述生成的jar包 后可以看到一下界面，然后进行第四步</strong><br> <img src="https://images2.imgbox.com/8c/6b/8JbDzsRU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5d/35/3mmqhgPb_o.png" alt="在这里插入图片描述"><br> 此处显示的内容是exe4j自动在jar包中找到的，加入显示一片空白，那么说明jar包打不成功（有些文件没打进来）</p> 
<h4><a id="6_Configure_JRE_18_155"></a>6. Configure JRE， 就是配置程序运行的版本，这个可以结合自己程序所用的配置来配置即可，我的是1.8</h4> 
<p><img src="https://images2.imgbox.com/3d/ac/iRhXvRG3_o.png" alt="在这里插入图片描述"><br> 注意：6这里，如果生成的exe放在没有java环境的电脑里面，需要在6这里多使用一个操作</p> 
<p><img src="https://images2.imgbox.com/b4/2c/C1oW36fT_o.png" alt="在这里插入图片描述"><br> 将环境变量JAVA_HOME给删了</p> 
<h4><a id="78_162"></a>7,8直接点下一步即可</h4> 
<h4><a id="9_8_163"></a>9. 在8这里点击下一步的时候就会进入，且还会自动执行</h4> 
<p><img src="https://images2.imgbox.com/d7/2a/9qL9kWTH_o.png" alt="在这里插入图片描述"><br> 等它执行完成后就会自动跳到10<br> 注意：如果此步骤报错那就检查之前的步骤有没有弄对（当然，jar包打包不成功此处也会报错）</p> 
<h4><a id="10__9_exe_168"></a>10. 在 9 成功后就可以在刚刚配置的exe输出的路径中找到对应的程序了</h4> 
<p><img src="https://images2.imgbox.com/4c/b0/maLd65CP_o.png" alt="在这里插入图片描述"><br> 生成后的程序：<br> <img src="https://images2.imgbox.com/66/a3/xaGV6dp4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_resourcesjarresourcesjar____172"></a>最后： 请注意，如果程序中有使用资源文件resources的时候，那么在打包jar包的时候，需要把resources文件夹加入jar中。 且还要查看是否加入成功。 (可以用指令查看) ，操作请看上文。</h2> 
<blockquote> 
 <h4><a id="jarexe_174"></a>如果按照上述操作后，还不能打包jar成功或者打包exe成功的读者，可以私信把问题发给我讨论讨论</h4> 
 <h4><a id="_175"></a>转发请注明出处，谢谢！</h4> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65bc61f30c074f0fd8c3f2911c5d9075/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">十大基础算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78008cbacaf0f3b4430342ce5a34ed1e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">随机采样一致性（RANSAC）三维点云的平面拟合算法（含C&#43;&#43;代码）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>