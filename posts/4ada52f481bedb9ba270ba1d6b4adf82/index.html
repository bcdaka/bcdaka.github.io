<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PHP实现登录和注册（附源码） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4ada52f481bedb9ba270ba1d6b4adf82/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="PHP实现登录和注册（附源码）">
  <meta property="og:description" content="前言 本博客主要讲述利用php环境实现一个简单的前后端结合的用户登录和注册功能。phpstudy是PHP调试环境的集成包，该程序包集成了 Apache&#43;PHP&#43;MySQL&#43;phpMyAdmin 等多个工具，是很好用的调试环境的程序集成包。
目录
前言
1. 准备工作
1.1 工具
1.2 phpstudy 介绍
2. 创建网站
2.1 搭建PHP环境
3. 用户登录和注册功能
3.1 思路
3.2 准备阶段
3.3 前端部分
3.3.1 登录的前端页面
3.3.2 注册的前端页面
3.4 验证注册的数据
3.4.1 设置验证规则
3.4.2 phpMyAdmin 管理数据库
3.4.3 PHP 连接数据库
3.4.4 保存注册的数据到数据库中
3.5 登录验证
3.5.1 连接数据库
1. 准备工作 1.1 工具 在phpstudy官网中下载即可，选择对应的电脑位数
链接：Windows版phpstudy下载 - 小皮面板(phpstudy)
下载好压缩包后，新建一个文件夹用来解压压缩包里面的文件。解压之后找打该文件夹，里面有如下文件，接着我们进行安装。选择自定义安装路径安装到你想安装的位置即可，这里不展开来说。
安装好以后就可以在桌面看到该软件了
1.2 phpstudy 介绍 在桌面找到该软件后双击打开它，就可以看到如下页面，然后我们需要在该集成包中下载一些软件
下载之后就回到主页去看，本次的案例我使用 Nginx 来启动 Web 服务，（这里选择可以多样）
启动MySQL时会出现启动不了的情况 （能正常启动则跳到 &#34;2.创建网站&#34;）
解决： window键 &#43; R 输入 SERVICES.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-02T21:21:22+08:00">
    <meta property="article:modified_time" content="2024-07-02T21:21:22+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PHP实现登录和注册（附源码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言</h2> 
<p>本博客主要讲述利用php环境实现一个简单的前后端结合的用户登录和注册功能。phpstudy是PHP调试环境的集成包，该程序包集成了 Apache+PHP+MySQL+phpMyAdmin 等多个工具，是很好用的调试环境的程序集成包。</p> 
<p><strong>目录</strong></p> 
<p style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p style="margin-left:0px;"><a href="#1.%20%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow">1. 准备工作</a></p> 
<p style="margin-left:40px;"><a href="#1.1%20%E5%B7%A5%E5%85%B7" rel="nofollow">1.1 工具</a></p> 
<p style="margin-left:40px;"><a href="#1.2%20phpstudy%20%E4%BB%8B%E7%BB%8D" rel="nofollow">1.2 phpstudy 介绍</a></p> 
<p style="margin-left:0px;"><a href="#2.%20%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99" rel="nofollow">2. 创建网站</a></p> 
<p style="margin-left:40px;"><a href="#2.1%20%E6%90%AD%E5%BB%BAPHP%E7%8E%AF%E5%A2%83" rel="nofollow">2.1 搭建PHP环境</a></p> 
<p style="margin-left:0px;"><a href="#3.%20%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD" rel="nofollow">3. 用户登录和注册功能</a></p> 
<p style="margin-left:40px;"><a href="#3.1%20%E6%80%9D%E8%B7%AF" rel="nofollow">3.1 思路</a></p> 
<p style="margin-left:40px;"><a href="#3.2%20%E5%87%86%E5%A4%87%E9%98%B6%E6%AE%B5" rel="nofollow">3.2 准备阶段</a></p> 
<p style="margin-left:40px;"><a href="#3.3%20%E5%89%8D%E7%AB%AF%E9%83%A8%E5%88%86" rel="nofollow">3.3 前端部分</a></p> 
<p style="margin-left:80px;"><a href="#3.3.1%20%E7%99%BB%E5%BD%95%E7%9A%84%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2" rel="nofollow">3.3.1 登录的前端页面</a></p> 
<p style="margin-left:80px;"><a href="#3.3.2%C2%A0%E6%B3%A8%E5%86%8C%E7%9A%84%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2" rel="nofollow">3.3.2 注册的前端页面</a></p> 
<p style="margin-left:40px;"><a href="#3.4%20%E9%AA%8C%E8%AF%81%E6%B3%A8%E5%86%8C%E7%9A%84%E6%95%B0%E6%8D%AE" rel="nofollow">3.4 验证注册的数据</a></p> 
<p style="margin-left:80px;"><a href="#3.4.1%20%E8%AE%BE%E7%BD%AE%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99" rel="nofollow">3.4.1 设置验证规则</a></p> 
<p style="margin-left:80px;"><a href="#3.4.2%20phpMyAdmin%20%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">3.4.2 phpMyAdmin 管理数据库</a></p> 
<p style="margin-left:80px;"><a href="#3.4.3%20PHP%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">3.4.3 PHP 连接数据库</a></p> 
<p style="margin-left:80px;"><a href="#3.4.4%20%E4%BF%9D%E5%AD%98%E6%B3%A8%E5%86%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD" rel="nofollow">3.4.4 保存注册的数据到数据库中</a></p> 
<p style="margin-left:40px;"><a href="#3.5%C2%A0%C2%A0%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81" rel="nofollow">3.5  登录验证</a></p> 
<p style="margin-left:80px;"><a href="#3.5.1%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">3.5.1 连接数据库</a></p> 
<hr> 
<p></p> 
<h2>1. 准备工作</h2> 
<h3>1.1 工具</h3> 
<p>在phpstudy官网中下载即可，选择对应的电脑位数</p> 
<p>链接：<a href="https://www.xp.cn/download.html" rel="nofollow" title="Windows版phpstudy下载 - 小皮面板(phpstudy)">Windows版phpstudy下载 - 小皮面板(phpstudy)</a></p> 
<p><img alt="8d1b90577a9c4307a0a5ca06a663b062.png" src="https://images2.imgbox.com/00/c0/72U8f9LM_o.png"></p> 
<p>下载好压缩包后，新建一个文件夹用来解压压缩包里面的文件。解压之后找打该文件夹，里面有如下文件，接着我们进行安装。选择自定义安装路径安装到你想安装的位置即可，这里不展开来说。</p> 
<p><img alt="dafcddeef12a4802947bfe3ff6ed4fd4.png" src="https://images2.imgbox.com/a3/f6/bg2ggoJL_o.png"></p> 
<p>安装好以后就可以在桌面看到该软件了</p> 
<h3>1.2 phpstudy 介绍</h3> 
<p>在桌面找到该软件后双击打开它，就可以看到如下页面，然后我们需要在该集成包中下载一些软件</p> 
<p><img alt="6f3f3ed660274a83b9a3c238c4e48602.png" src="https://images2.imgbox.com/f2/00/Um2q51AT_o.png"></p> 
<p><img alt="691b3ff77fb940e1803ec4571334ee18.png" src="https://images2.imgbox.com/56/80/4nvNqJIY_o.png"></p> 
<p>下载之后就回到主页去看，本次的案例我使用 Nginx 来启动 Web 服务，（这里选择可以多样）</p> 
<p><img alt="70d978b44d0141528b14102c34a7234f.png" src="https://images2.imgbox.com/4c/e9/jmGfcnjP_o.png"></p> 
<p><strong>启动MySQL时会出现启动不了的情况    （能正常启动则跳到 "2.创建网站"）</strong></p> 
<p><strong>解决：</strong> <strong> window键 + R 输入 SERVICES.MSC 回车 ，找到 mysql服务 后右键停止服务，再重新启动即可</strong></p> 
<pre><code>SERVICES.MSC</code></pre> 
<p><img alt="91b217a6a1f0487babce3fd01c62ff0b.png" src="https://images2.imgbox.com/70/e3/sjq9PqZQ_o.png"></p> 
<p></p> 
<p>还有一种情况可能是<strong>端口被占用</strong>的情况</p> 
<p>这边推荐博客：<a href="https://blog.csdn.net/qq_57587705/article/details/127152670" title="使用phpStudy显示3306端口被占用，该怎么办？_phpstudy3306端口被占用怎么办-CSDN博客">使用phpStudy显示3306端口被占用，该怎么办？_phpstudy3306端口被占用怎么办-CSDN博客</a></p> 
<h2>2. 创建网站</h2> 
<h3>2.1 搭建PHP环境</h3> 
<p>点击创建网站，开始初始化配置</p> 
<p><img alt="da66eb5cc38a46cb88ecc09287ce3a6c.png" src="https://images2.imgbox.com/b0/9b/FD9BNumg_o.png"></p> 
<p><img alt="0194dd948b964e4c8e89655fff245617.png" src="https://images2.imgbox.com/20/5e/R5TlFL7l_o.png"></p> 
<p>注：端口可能存在被占用的情况，这时我们可以在设置中查看没有被占用的端口号，然后在创建网站时选择该端口即可</p> 
<p><img alt="eee8ddf965ed47a4a8d4b71f49d878de.png" src="https://images2.imgbox.com/12/66/1LIjww1K_o.png"></p> 
<p>然后我们打开网站</p> 
<p><img alt="2e1bea7d9ccc4bd4a476eb42e6cc6809.png" src="https://images2.imgbox.com/78/35/xrjUEwbM_o.png"></p> 
<p><img alt="baa4c629211447f2964659d13cf05948.png" src="https://images2.imgbox.com/99/c1/TqNyyuyB_o.png"></p> 
<p><strong>也可以直接在网页中输入cs：81  </strong>   也可以启动</p> 
<blockquote> 
 <p>cs  ----&gt;  网站域名</p> 
 <p>81  ---&gt;   端口号</p> 
</blockquote> 
<p>这时在WWW下的cs文件就生成了官方默认给我们的文件</p> 
<p><img alt="d6ec478637664620a1bf620550a75440.png" src="https://images2.imgbox.com/ca/e2/5z0ehRfz_o.png"></p> 
<p>可以把这些删除掉，放入我们写的网页（建议不删，因为容易因未知原因报错）</p> 
<p>接下来我们来测试，放入我之前练习html+css时写的静态网页文件</p> 
<p><img alt="5e46baaae01049369c1422c405f26d9a.png" src="https://images2.imgbox.com/35/52/5ZVLBrcd_o.png"></p> 
<p>然后返回创建的网页，也就是cs：81该网站域名，点击左上角的刷新，就可以看到测试成功了</p> 
<p><img alt="07146e9e13454d55a0e2873d075da5ef.png" src="https://images2.imgbox.com/1f/f9/ANT2u81C_o.png"></p> 
<p>到这里，我们PHP环境就配置成功了，接下来就基于该环境下来编写一个简单的用户登录和注册的功能，涉及到前端和后端以及数据库的数据交互。</p> 
<p></p> 
<h2>3. 用户登录和注册功能</h2> 
<h3>3.1 思路</h3> 
<p>在写这个功能时，我们来理清一下大致思路</p> 
<blockquote> 
 <ol><li>新用户需要注册，把注册时的数据如用户名，密码和邮箱存放在数据库中</li><li>已经注册过的用户可以直接登录，登录这里的用户名和密码需要和数据库中的数据进行验证，可以在php文件中写验证规则</li><li>验证用户名的唯一性，若用户名不存在，则不允许登录</li><li>用户名正确，若密码错误也不允许登录，密码存在后端的数据库中</li></ol> 
</blockquote> 
<p>接下来一步一步来实现具体的功能</p> 
<h3>3.2 准备阶段</h3> 
<p>在phpstudy中新建一个网站，这里我建立了一个网站域名为 localhost ，端口号为 80 的网站，在该文件夹中新建一个名叫 re_login 的文件，然后拖动该文件在 VSCode 中打开，建立几个必要的文件，如下图：</p> 
<p><img alt="e1c6ab2919f048f0b89a2507575acb46.png" src="https://images2.imgbox.com/03/1b/txzf75Pw_o.png"></p> 
<blockquote> 
 <p>index.html               为入口文件，这里主要编写前端登录页面</p> 
 <p>register.html            为跳转页面，是注册的前端的页面</p> 
 <p>login.php                 用于验证用户登录时的数据验证，结合数据库的验证</p> 
 <p>register.php             对注册信息的验证，及操作数据库，把成功注册的数据保存到数据库中</p> 
 <p>xiaomi.html              为用户成功登录后显示的网页</p> 
</blockquote> 
<h3>3.3 前端部分</h3> 
<h4>3.3.1 登录的前端页面</h4> 
<p>效果图如下：</p> 
<p><img alt="4b9cea2fd38349d7ab7eed3d7d4a8889.png" src="https://images2.imgbox.com/99/42/73Nhcv70_o.png"></p> 
<p>代码如下：</p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;登录&lt;/title&gt;
    &lt;style&gt;
        form{
            max-width: 400px;
            height: 300px;
            background-color: rgba(247, 247, 247, 0.7);
            border: 1 solid #E4E4E4;
            margin: 100px auto;
            color: black;
            border-radius: 5px;
            padding: 25px 45px;
        }
        body{
            background-repeat: no-repeat;
            background-image: url(xingkong.png);
            background-size: 100%;
        }
        div{
            width: 100%;
            height: 35px;
            line-height: 35px;
            margin-top: 50px;
            position: relative;
        }
        input{
            position: absolute;
            right: 80px;
            width: 60%;
            height: 25px;
            line-height: 25px;
            border: 1px solid #DADADA;
            color: #888;
            outline: none;
            font-size: 12px;
            padding: 3px 3px 3px 5px;
            box-shadow: inset 0 1px 4px #ECECEC;
        }
        input[type="submit"]{
            width: 50%;
            height: 40px;
            line-height: 15px;
            font-size: 15px;
            background-color: #b5ccf3;
            border: none;
            box-shadow: none;
            border-radius: 10px;
            color: #FFF;
            position: relative;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
        }
        input[type="submit"]:hover{
            cursor: pointer;                          /*手型*/
            background-color: rgb(139, 205, 246);
        }
        a{
            width: 180px;
            display: block;
            margin: 80px auto;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action="./login.php" method="post"&gt;
        &lt;div&gt;
            &lt;label for="name"&gt;用户名：&lt;/label&gt;
            &lt;input type="text" id="name" name="name" placeholder="请输入用户名" required&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;label for="pass"&gt;密 &amp;nbsp;&amp;nbsp;&amp;nbsp; 码:&lt;/label&gt;
            &lt;input type="password" name="pass" id="pass" placeholder="请输入密码" required&gt;
        &lt;/div&gt;
        &lt;input type="submit" name="login" value="登录"&gt;
        &lt;a href="register.html"&gt;还没有账号，注册一个&lt;/a&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>代码解释：</p> 
<blockquote> 
 <ul><li>因为实现的简单的页面，直接在当前头文件编写CSS代码就好了</li><li>建立一个form表单，用于提交数据进行验证</li><li>action 提交的地址，提交到 login.php 中进行登录的验证，以  post  的方式发送数据</li><li>用户名和密码输入框中都添加了 required 属性，设置该字段不能为空（如下图）</li><li>给登录按钮设置标识“login”，方便后面获取</li></ul> 
</blockquote> 
<p><img alt="c999dc6567484b0bb6b05dd04e422a19.png" src="https://images2.imgbox.com/f6/3d/MQrQdGgz_o.png"></p> 
<p>写完登录的前端代码之后，在网页中输入如下代码即可进入该页面（如上图登录页面）</p> 
<pre><code>http://localhost/re_login/register.html</code></pre> 
<p></p> 
<h4>3.3.2 注册的前端页面</h4> 
<p>效果图如下：</p> 
<p><img alt="f33447188d8c40aa9f49f56cff424750.png" src="https://images2.imgbox.com/7b/73/x7rhdJu9_o.png"></p> 
<p>代码如下：</p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;注册&lt;/title&gt;
    &lt;style&gt;
        form{
            max-width: 400px;
            height: 350px;
            background-color: rgba(247, 247, 247, 0.7);
            border: 1 solid #E4E4E4;
            margin: 100px auto;
            color: black;
            border-radius: 5px;
            padding: 25px 45px;
        }
        body{
            background-repeat: no-repeat;
            background-image: url(xingkong.png);
            background-size: 100%;
        }
        div{
            width: 100%;
            height: 35px;
            line-height: 35px;
            margin-top: 20px;
            position: relative;
        }
        input{
            position: absolute;
            right: 80px;
            width: 60%;
            height: 25px;
            line-height: 25px;
            border: 1px solid #DADADA;
            color: #888;
            outline: none;
            font-size: 12px;
            padding: 3px 3px 3px 5px;
            box-shadow: inset 0 1px 4px #ECECEC;
        }
        input[type="submit"]{
            width: 50%;
            height: 40px;
            line-height: 15px;
            font-size: 15px;
            background-color: #b5ccf3;
            border: none;
            box-shadow: none;
            border-radius: 10px;
            color: #FFF;
            position: relative;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
        }
        input[type="submit"]:hover{
            cursor: pointer;                          /*手型*/
            background-color: rgb(139, 205, 246);
        }
        a{
            width: 180px;
            display: block;
            margin: 80px auto;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action="register.php" method="post" novalidate&gt;
        &lt;div&gt;
            &lt;label for="name"&gt;用户名:&lt;/label&gt;
            &lt;input type="text" id="name" name="name" placeholder="请输入用户名" required&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;label for="pass"&gt;密 &amp;nbsp;&amp;nbsp;&amp;nbsp; 码:&lt;/label&gt;
            &lt;input type="password" name="pass" id="pass" placeholder="请输入密码" required&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;label for="qpass"&gt;密 &amp;nbsp;&amp;nbsp;&amp;nbsp; 码:&lt;/label&gt;
            &lt;input type="password" name="qpass" id="qpass" placeholder="请输入密码" required&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;label for="email"&gt;邮&amp;nbsp;&amp;nbsp;&amp;nbsp;箱&lt;/label&gt;
            &lt;input type="email" id="email" name="email" placeholder="请输入邮箱" pattern="[^@]*@[^@]*[\.com$]" required&gt;
        &lt;/div&gt;
        &lt;input type="submit" name="reg" value="注册"&gt;
        &lt;a href="./index.html"&gt;已经有账号了，去登录&lt;/a&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>代码解释：</p> 
<p>和登录页面差不多，就是多了确认密码和邮箱这两个输入框以及一些其他区别</p> 
<blockquote> 
 <ul><li>与登录页面不同的是，在注册的 from 表单中，加了 novalidate 属性，该属性是去掉 from 表单自带的验证功能，防止数据卡在前端到不了后端进行验证</li><li>表单提交的地址是 register.php ，在该文件中编写代码对注册的数据进一步验证，以及把能正确注册的用户数据保存到数据库中，方便在登录时进行数据验证</li><li>其他基本与登录的代码含义大差不差</li></ul> 
</blockquote> 
<p>pattern 是自己写的验证规则，中括号中写正则表达式。<strong>pattern="[^@]*@[^@]*[\.com$]"</strong>   对邮箱的验证写规则，@符号的前后不能再出现@符号，而且必须以.com 为后缀，当然验证规则可以自己写，改一下正则表达式即可。</p> 
<p>写完登录的前端代码之后，在网页中输入如下代码即可进入该页面（如上图登录页面）</p> 
<pre><code>http://localhost/re_login/register.html</code></pre> 
<p>也可以点击 “<u>还没有账号，注册一个</u>” 这个超链接实现注册页面的跳转。</p> 
<p></p> 
<h3>3.4 验证注册的数据</h3> 
<h4>3.4.1 设置验证规则</h4> 
<p>到这里，我们就开始编写 php 代码了。在register.php 中编写 php 代码。</p> 
<p>首先，我们把注册时传动过来的数据进行验证，注册时有用户名、密码、确认密码、邮箱这四个数据，可以使用 if 来进行规则验证。</p> 
<p>（1）、注册时的<strong>用户名不能为空，</strong>可使用函数 empty（）来检验数据是否为空。如果为空，则函数返回为真，if 语句成立，代表着用户名为空，则输入提示信息并且让程序结束掉、</p> 
<blockquote> 
 <p>$_POST 是预定义的变量，用于收集来自 method="post" 的表单中的值。</p> 
</blockquote> 
<pre><code>
        if(empty($_POST["name"])){
            die("用户名不能为空！");
        }</code></pre> 
<p><img alt="1dac314b34c2431ca6f34d1abde9e27d.png" src="https://images2.imgbox.com/61/00/4r7mpuDd_o.png"></p> 
<p>跳转到register.php 文件去执行，输入提示信息</p> 
<p><img alt="2f0355c4579941f98402276930f25561.png" src="https://images2.imgbox.com/d5/59/vAAZSb2q_o.png"></p> 
<p>（2）、注册时的<strong>密码不能为小于6位数</strong>（可自行设定）。</p> 
<pre><code>if(strlen($_POST["pass"]) &lt; 6){
            die("密码不能小于6位!!");
        }</code></pre> 
<p>验证和用户名基本一致</p> 
<p>（3）、<strong>验证两次密码输入是否一样</strong>。把 post 过来的数据进行 逻辑判断</p> 
<pre><code>if($_POST["pass"] !== $_POST["qpass"]){
            die("两次输入的密码不一致！");
        }</code></pre> 
<p>（4）、<strong>验证邮箱的有效性</strong></p> 
<pre><code>if(!filter_var($_POST["email"],FILTER_VALIDATE_EMAIL)){
            die("请输入有效的邮箱格式!");
        }</code></pre> 
<blockquote> 
 <p>filter_var() 函数通过指定的过滤器过滤一个变量。第一个参数是规定要过滤的变量，第二个参数是规定要使用的过滤器的 ID。FILTER_VALIDATE_EMAIL是把值作为 e-mail 地址来验证。如果函数返回真则是有效的email地址，验证通过</p> 
</blockquote> 
<p>（5）、<strong>保护密码</strong></p> 
<pre><code>$pass_hash=password_hash($_POST["pass"],PASSWORD_DEFAULT);</code></pre> 
<blockquote> 
 <p>password_hash 函数是对密码进行加密的函数，形成一串没有规律、杂乱的字符串，保证了用户信息的安全性。PASSWORD_DEFAULT是一种加密规则。返回来的字符串用一个变量保存起来，方便后面传到数据库中</p> 
</blockquote> 
<p>下图就是注册后，密码加密后显示的字符串</p> 
<p><img alt="4c40207aefa149f6b054b835caba11fa.png" src="https://images2.imgbox.com/79/87/m2XAF0qT_o.png"></p> 
<p><img alt="73b64e6a2d2c4eeca29acf9db2a9194b.png" src="https://images2.imgbox.com/66/c0/JVj0HOzG_o.png"></p> 
<h4>3.4.2 phpMyAdmin 管理数据库</h4> 
<p>使用数据库管理工具 phpMyAdmin 工具管理数据库。首先在 PHP 集成包中下载 phpMyAdmin 工具</p> 
<p><img alt="883d55146f5f4426b045fd38e8d6dfc8.png" src="https://images2.imgbox.com/db/34/uB0t4Rr8_o.png"></p> 
<p>安装位置一般选择在 WWW 文件下。然后点击管理，就会跳出要登录的页面，用户名和密码默认是 root 就可以直接登录了。当然也可以修改密码，在数据库一栏中，点击修改密码再输入新密码即可</p> 
<p><img alt="8126a7f6db92446caedb9fe5a442a65e.png" src="https://images2.imgbox.com/95/b9/KQMiLjp0_o.png"></p> 
<p>进入到数据库管理页面后，新建一个数据库，名字自拟，然后在该数据中新建一张表，用来存放用户注册的信息。然后点击右下角的保存即可</p> 
<p><img alt="3428b32ed1c842d6a1b714ea34695979.png" src="https://images2.imgbox.com/02/1c/sS3Y9Kzs_o.png"></p> 
<h4>3.4.3 PHP 连接数据库</h4> 
<p>编写 PHP 代码来连接数据库</p> 
<pre><code>$mysqli = new mysqli("localhost","root","root","lo_db");
        if($mysqli-&gt;connect_error){
            die("数据库连接错误：". $mysqli-&gt;connect_error);
        }</code></pre> 
<blockquote> 
 <p>实例化一个数据库对象；localhost 为本地服务器上的数据库，第一个 root 是用户名，第二个 root 是密码，lo_db 是要连接的数据库名</p> 
 <p>mysqli-&gt;connect_error 是一个在 PHP 中使用对象范式的方式来检查 MySQLi 数据库连接时是否发生错误的函数。使用 if 语句来判断，返回值为假的话说明连接数据库失败，打印连接失败的原因（保证用户名和密码以及数据库名的正确性）</p> 
</blockquote> 
<p>数据库连接成功后，还不能把信息往数据表里面存放。</p> 
<h4>3.4.4 保存注册的数据到数据库中</h4> 
<pre><code>$name = $_POST["name"];
$mail = $_POST["email"];

  if(isset($_POST["reg"])){
  $sql = "INSERT INTO tuser (name,email,pass_hash) VALUES ('$name','$mail','$pass_hash')";
          $mysqli-&gt;query($sql);
       if($mysqli-&gt;affected_rows &gt; 0){
                echo "&lt;script&gt;alert('注册成功!');history.go(-1);&lt;/script&gt;";
            }
        }</code></pre> 
<blockquote> 
 <ul><li>声明两个变量用来保存用户名和密码，接着检测用户是否点击了注册这个按钮，如果点击的话就把能成功注册的数据传到数据表中。</li><li><strong>isset()</strong> 函数用于检测变量是否已设置并且非 NULL。</li><li>sql 变量用来保存用户的信息，接着是 SQL 语句，向指定表（tuser）中添加对应的值</li><li>$mysqli-&gt;query($sql)  执行 SQL 语句</li><li>用 affected_row 来判断是否新增了数据行，新增的话则表示注册成功，数据也成功存放到数据表中，并打印提示信息。</li></ul> 
</blockquote> 
<p>如下图是已经注册过的用户：</p> 
<p><img alt="7fe2684040134b79ac1adcdf5579f206.png" src="https://images2.imgbox.com/0c/6c/k0mYNr4q_o.png"></p> 
<p>自此，注册的功能就实现好了。下面是注册功能 register.php 的完整代码</p> 
<pre><code>&lt;?php
        /* 判断用户名是否为空*/
        if(empty($_POST["name"])){
            die("用户名不能为空！");
        }
        /* 对密码进行规则验证*/
        if(strlen($_POST["pass"]) &lt; 6){
            die("密码不能小于6位!!");
        }
        /* 判断输入的两次密码是否一致*/
        if($_POST["pass"] !== $_POST["qpass"]){
            die("两次输入的密码不一致！");
        }
        /* 验证邮箱的有效性*/
        if(!filter_var($_POST["email"],FILTER_VALIDATE_EMAIL)){
            die("请输入有效的邮箱格式!");
        }
        /* 对密码加密，保证数据的安全*/
        $pass_hash=password_hash($_POST["pass"],PASSWORD_DEFAULT);
        /* 保存用户的数据*/
        $name = $_POST["name"];
        $mail = $_POST["email"];
        /* 连接数据库*/
        $mysqli = new mysqli("localhost","root","root","lo_db");
        if($mysqli-&gt;connect_error){
            die("数据库连接错误：". $mysqli-&gt;connect_error);
        }
        /* 向数据表中传入用户的数据，方便后面对登录进行验证*/
        if(isset($_POST["reg"])){
            $sql = "INSERT INTO tuser (name,email,pass_hash) VALUES ('$name','$mail','$pass_hash')";
            $mysqli-&gt;query($sql);
            if($mysqli-&gt;affected_rows &gt; 0){
                echo "&lt;script&gt;alert('注册成功!');history.go(-1);&lt;/script&gt;";
            }
        }



</code></pre> 
<h3>3.5  登录验证</h3> 
<p>登录功能同样需要连接到数据库。我们直接把在写注册功能时连接数据库的代码拷贝过来即可</p> 
<pre><code>$mysqli = new mysqli("localhost","root","root","lo_db");
if($mysqli-&gt;connect_error){
    die("数据库连接错误：". $mysqli-&gt;connect_error);
}
$pass_hash=password_hash($_POST["pass"],PASSWORD_DEFAULT);
$name = $_POST["name"];</code></pre> 
<p>这里只需要声明两个变量就行，一个用来保存用户名，一个用来保存登录的密码。接着来检查用户是否点击了登录这个按钮，和上面注册的代码差不多，用 if 来判断，如果用户点击了登录这个按钮，就写一个 sql 语句，然后用 query 函数发送数据到数据库中去执行，再用 fetch_assoc 函数返回一个结果集，用一个变量来保存这个结果集，代码如下：</p> 
<pre><code>if(isset($_POST["login"])){
    $sql = "SELECT pass_hash FROM tuser WHERE name='$name'";
    $res =$mysqli-&gt;query($sql)-&gt;fetch_assoc();
}</code></pre> 
<blockquote> 
 <p>接着来判断返回的这个结果值是否为真，为真则在数据库中找到当前用户输入的用户名在数据库中是否存在，不存在则结束进程，并打印提示信息：“用户不存在”；若输入的用户名存在则进一步判断输入的密码是否正确。我们一下就可以想到可以用 if-else 来进行写</p> 
</blockquote> 
<p>代码如下：</p> 
<pre><code>if($res){
        if(password_verify($_POST["pass"],$res["pass_hash"])){
            echo "&lt;script&gt;alert('登录成功！') ;window.location.href='xiaomi.html';&lt;/script&gt;";
        }else{
            echo "&lt;script&gt;alert('密码错误!');history.go(-1);&lt;/script&gt;";
        }
    }else{
        echo "&lt;script&gt;alert('用户不存在!');history.go(-1);&lt;/script&gt;";
    }</code></pre> 
<blockquote> 
 <p>password_verify($_POST["pass"],$res["pass_hash"）----password_verify() 函数用于验证密码是否和散列值匹配。pass_hash 是我们在注册时把密码变成一个散列值存放在数据库中，password_verify() 函数则用来验证本次输入的密码映射成的散列值和在数据库中密码的散列值是否相等，相同则表示登录成功，跳转到 xiaomi.html 页面（该页面是本人联系HTML+CSS 写的，用来测试登录成功的页面，大家可以放入其他自己写的网页来进行测试）</p> 
</blockquote> 
<p>ps：上面这个 if 语句其实可以放在判断用户是否点击登录按钮的 if 语句中，意思就是要是用户连登录按钮都没点，也没必要验证其他的东西，$res 的值必然为空</p> 
<p>下面是完整的登录验证 PHP 代码：</p> 
<pre><code>&lt;?php
/* 连接数据库*/
$mysqli = new mysqli("localhost","root","root","lo_db");
if($mysqli-&gt;connect_error){
    die("数据库连接错误：". $mysqli-&gt;connect_error);
}
$pass_hash=password_hash($_POST["pass"],PASSWORD_DEFAULT);
$name = $_POST["name"];
/* 判断用户是否点击了登录按钮*/ 
if(isset($_POST["login"])){
    $sql = "SELECT pass_hash FROM tuser WHERE name='$name'";
    $res =$mysqli-&gt;query($sql)-&gt;fetch_assoc();
         /**登录验证 */
    if($res){
        if(password_verify($_POST["pass"],$res["pass_hash"])){
            echo "&lt;script&gt;alert('登录成功！') ;window.location.href='xiaomi.html';&lt;/script&gt;";
        }else{
            echo "&lt;script&gt;alert('密码错误!');history.go(-1);&lt;/script&gt;";
        }
    }else{
        echo "&lt;script&gt;alert('用户不存在!');history.go(-1);&lt;/script&gt;";
    }
}</code></pre> 
<p><img alt="e030bfd4c45c4e5f9baba989729a2381.png" src="https://images2.imgbox.com/a2/31/UGouzXui_o.png"></p> 
<p></p> 
<p><img alt="4c12cc527f4d4b8e99f2d5184f57d826.png" src="https://images2.imgbox.com/e0/0b/I0t60msG_o.png"></p> 
<p><img alt="dee36dd135cb49469678771cd2310fb2.png" src="https://images2.imgbox.com/a3/84/Emn4mejD_o.png"></p> 
<p>到这里，整个php环境下写登录注册功能的过程就已经结束了，我上传了本篇实例的一些资源包，如果能帮到和我一样的新手小白，我会非常开心！该案例非常适合新手练习，也欢迎大佬们看到错误或者不妥的地方能批评指正。</p> 
<p>资源包链接：链接：https://pan.baidu.com/s/1HhW0VV4rU60eiab0UsnYYw?pwd=1689 <br> 提取码：1689 </p> 
<p>案例教学参教视频：</p> 
<p>【跟师兄做一个注册登录功能~~前端部分-哔哩哔哩】 https://b23.tv/CNHvTeT</p> 
<p>【跟师兄做一个注册登录功能~~后端部分-哔哩哔哩】 https://b23.tv/CYgKSDf<br>  </p> 
<h2>总结</h2> 
<p>该案例结合了前端+后端+数据库来实现的用户登录和注册功能，利用的是PHP集成包工具来搭建环境，在此环境之下实现。也可以利用 JavaWeb 来实现该功能，当然这比本博客介绍的实现方法偏难，大家可以去尝试一下，今后我也会去学到</p> 
<p>我在搭建 PHP 环境的时候出现了很多的错误，一开始尝试不用 phpMyAdmin 来管理数据库，尝试用数据库可视化工具—— navicat 来建立数据库，然后在 PHPstudy 中建立数据库，编写php来连接数据库，但是后面遇到了各种各样的错误，什么数据库密码不正确，数据库不存在，还有无法连接数据库（1045-access denied ...）、服务名无效等；甚至后面我重装了mysql服务，后面还是觉得用 phpMyAmind 更香，大家遇到什么问题的话多去搜搜，只有去搜了才能解决问题（没解决更焦虑）</p> 
<p>最后，每篇一言：世上无难事，只怕有心人。</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3756bbf156021d0ecdff84125090196a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">飞书文档转markdown 超级快捷方法。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e2b5eb66e6718c01b3f6b6ed5a5e9119/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL8.4设置密码规则为mysql_native_password</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>