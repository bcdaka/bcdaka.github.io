<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ä¸‡ç‰©çš†å¯çˆ¬â€”â€”äº®æ•°æ®ä»£ç†IP&#43;Pythonçˆ¬è™«æ‰¹é‡ä¸‹è½½ç™¾åº¦å›¾ç‰‡åŠ©åŠ›AIè®­ç»ƒ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2d914e3bcc721080f7cc104c7f7c539f/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ä¸‡ç‰©çš†å¯çˆ¬â€”â€”äº®æ•°æ®ä»£ç†IP&#43;Pythonçˆ¬è™«æ‰¹é‡ä¸‹è½½ç™¾åº¦å›¾ç‰‡åŠ©åŠ›AIè®­ç»ƒ">
  <meta property="og:description" content="ğŸ’‚ ä¸ªäººç½‘ç«™:ã€ æ‘¸é±¼æ¸¸æˆã€‘ã€ç¥çº§ä»£ç èµ„æºç½‘ç«™ã€‘ã€å¯¼èˆªå¤§å…¨ã€‘ğŸ¤Ÿ ä¸€ç«™å¼è½»æ¾æ„å»ºå°ç¨‹åºã€Webç½‘ç«™ã€ç§»åŠ¨åº”ç”¨ï¼šğŸ‘‰æ³¨å†Œåœ°å€ğŸ¤Ÿ åŸºäºWebç«¯æ‰“é€ çš„ï¼šğŸ‘‰è½»é‡åŒ–å·¥å…·åˆ›ä½œå¹³å°ğŸ’… æƒ³å¯»æ‰¾å…±åŒå­¦ä¹ äº¤æµï¼Œæ‘¸é±¼åˆ’æ°´çš„å°ä¼™ä¼´ï¼Œè¯·ç‚¹å‡»ã€å…¨æ ˆæŠ€æœ¯äº¤æµç¾¤ã€‘ é¡¹ç›®èƒŒæ™¯ æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†ä¸€ä¸ªç½‘ç»œçˆ¬è™«é¡¹ç›®çš„å‡†å¤‡å’Œå®ç°è¿‡ç¨‹ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯ä»ç™¾åº¦å›¾ç‰‡æœç´¢ä¸­è·å–å›¾ç‰‡é“¾æ¥å¹¶ä¸‹è½½å›¾ç‰‡ã€‚æ­¤ç±»çˆ¬è™«é¡¹ç›®é€šå¸¸ç”¨äºæ”¶é›†å¤§é‡çš„å›¾ç‰‡æ•°æ®ï¼Œä»¥ä¾¿ç”¨äºè®­ç»ƒå„ç§äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯è®¡ç®—æœºè§†è§‰æ¨¡å‹ã€‚è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ç ”ç©¶éœ€è¦å¤§é‡çš„å›¾åƒæ•°æ®æ¥è®­ç»ƒå’Œæµ‹è¯•æ¨¡å‹ï¼Œä»¥ä¾¿å®ç°å›¾åƒåˆ†ç±»ã€å¯¹è±¡æ£€æµ‹ã€å›¾åƒç”Ÿæˆç­‰åŠŸèƒ½ã€‚
ä¸€ã€é¡¹ç›®å‡†å¤‡ ç¯å¢ƒé…ç½® åœ¨å¼€å§‹ç¼–å†™çˆ¬è™«ä¹‹å‰ï¼Œç¡®ä¿å·²ç»å®Œæˆä»¥ä¸‹ç¯å¢ƒé…ç½®ï¼š
Pythonå®‰è£…: ç¡®ä¿å·²å®‰è£…Python 3.xç‰ˆæœ¬ã€‚Pythonæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºå­¦ä¹ çš„ç¼–ç¨‹è¯­è¨€ï¼Œé€‚åˆäºå„ç§ç¼–ç¨‹ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç½‘ç»œçˆ¬è™«å¼€å‘ã€‚
éœ€è¦çš„åº“: Pythonæœ‰ä¸€ä¸ªåºå¤§çš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæ€ç³»ç»Ÿï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‡ ä¸ªæ ¸å¿ƒåº“æ¥å¼€å‘æˆ‘ä»¬çš„çˆ¬è™«ï¼š
requests: ç”¨äºå‘é€HTTPè¯·æ±‚å’Œå¤„ç†å“åº”ã€‚json: ç”¨äºå¤„ç†JSONæ ¼å¼çš„æ•°æ®ã€‚urllib: æä¾›äº†åœ¨ç½‘ç»œä¸Šè·å–æ•°æ®çš„ä¸€äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸»è¦ç”¨æ¥è¿›è¡ŒURLç¼–ç ã€‚os: æä¾›äº†ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½ï¼Œç”¨äºåˆ›å»ºæ–‡ä»¶å¤¹ç­‰æ–‡ä»¶æ“ä½œã€‚time: æä¾›äº†æ—¶é—´ç›¸å…³çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¼‘çœ ç¨‹åºä»¥åŠè®¡æ—¶ç­‰ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡pipå®‰è£…è¿™äº›åº“ï¼š
pip install requests å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Anacondaç­‰é›†æˆç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨condaå‘½ä»¤ï¼š
conda install requests è¿™äº›åº“å°†å¸®åŠ©æˆ‘ä»¬å¤„ç†HTTPè¯·æ±‚ã€è§£æå’Œå­˜å‚¨æ•°æ®ï¼Œä»¥åŠè¿›è¡Œä¸€äº›åŸºæœ¬çš„ç³»ç»Ÿæ“ä½œã€‚
äºŒã€çˆ¬è™«è®¾è®¡ä¸å®ç° çˆ¬è™«è®¾è®¡æ€è·¯ ç›®æ ‡ç½‘ç«™åˆ†æ æœ¬çˆ¬è™«ç›®æ ‡æ˜¯ä»ç™¾åº¦å›¾ç‰‡æœç´¢è·å–å›¾ç‰‡é“¾æ¥å¹¶ä¸‹è½½ã€‚ç™¾åº¦å›¾ç‰‡æœç´¢è¿”å›çš„ç»“æœæ˜¯JSONæ ¼å¼çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…å«äº†å›¾ç‰‡çš„ç¼©ç•¥å›¾é“¾æ¥ã€‚
æ•°æ®è·å–æµç¨‹ æ„å»ºç™¾åº¦å›¾ç‰‡æœç´¢çš„URLï¼Œé€šè¿‡GETè¯·æ±‚è·å–JSONæ•°æ®ã€‚è§£æJSONæ•°æ®ï¼Œæå–ç¼©ç•¥å›¾é“¾æ¥ã€‚ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°å­˜å‚¨ã€‚ ä»£ç å®ç° åˆå§‹åŒ–çˆ¬è™«ç±»ï¼ˆBaiduImageSpiderï¼‰ import requests import json from urllib import parse import os import time class BaiduImageSpider(object): def __init__(self): self.json_count = 0 # è¯·æ±‚åˆ°çš„jsonæ–‡ä»¶æ•°é‡ï¼ˆä¸€ä¸ªjsonæ–‡ä»¶åŒ…å«30ä¸ªå›¾åƒæ–‡ä»¶ï¼‰ self.url = &#39;https://image.baidu.com/search/acjson?tn=resultjson_com&amp;logid=5179920884740494226&amp;ipn=rj&amp;ct&#39; \ &#39;=201326592&amp;is=&amp;fp=result&amp;queryWord={&#39; \ &#39;}&amp;cl=2&amp;lm=-1&amp;ie=utf-8&amp;oe=utf-8&amp;adpicid=&amp;st=-1&amp;z=&amp;ic=0&amp;hd=&amp;latest=&amp;copyright=&amp;word={&#39; \ &#39;}&amp;s=&amp;se=&amp;tab=&amp;width=&amp;height=&amp;face=0&amp;istype=2&amp;qc=&amp;nc=1&amp;fr=&amp;expermode=&amp;nojc=&amp;pn={&#39; \ &#39;}&amp;rn=30&amp;gsm=1e&amp;1635054081427= &#39; self.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-28T09:51:57+08:00">
    <meta property="article:modified_time" content="2024-06-28T09:51:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ä¸‡ç‰©çš†å¯çˆ¬â€”â€”äº®æ•°æ®ä»£ç†IP&#43;Pythonçˆ¬è™«æ‰¹é‡ä¸‹è½½ç™¾åº¦å›¾ç‰‡åŠ©åŠ›AIè®­ç»ƒ</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <ul><li><strong>ğŸ’‚ ä¸ªäººç½‘ç«™:ã€ <a href="https://haiyong.site/moyu" rel="nofollow">æ‘¸é±¼æ¸¸æˆ</a>ã€‘ã€<a href="https://code.haiyong.site" rel="nofollow">ç¥çº§ä»£ç èµ„æºç½‘ç«™</a>ã€‘ã€<a href="https://nav.haiyong.site/" rel="nofollow">å¯¼èˆªå¤§å…¨</a>ã€‘</strong></li><li><strong>ğŸ¤Ÿ ä¸€ç«™å¼è½»æ¾æ„å»ºå°ç¨‹åºã€Webç½‘ç«™ã€ç§»åŠ¨åº”ç”¨ï¼šğŸ‘‰<a href="https://cloud.memfiredb.com/auth/login?from=5VkUHt" rel="nofollow">æ³¨å†Œåœ°å€</a></strong></li><li><strong>ğŸ¤Ÿ åŸºäºWebç«¯æ‰“é€ çš„ï¼šğŸ‘‰<a href="https://sso.mapmost.com/#/login?source_inviter=ryIXGCHG" rel="nofollow">è½»é‡åŒ–å·¥å…·åˆ›ä½œå¹³å°</a></strong></li><li><strong>ğŸ’… æƒ³å¯»æ‰¾å…±åŒå­¦ä¹ äº¤æµï¼Œæ‘¸é±¼åˆ’æ°´çš„å°ä¼™ä¼´ï¼Œè¯·ç‚¹å‡»ã€<a href="https://haiyong.site/chat/" rel="nofollow">å…¨æ ˆæŠ€æœ¯äº¤æµç¾¤</a>ã€‘</strong></li></ul> 
</blockquote> 
<h3><a id="_5"></a>é¡¹ç›®èƒŒæ™¯</h3> 
<p>æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†ä¸€ä¸ªç½‘ç»œçˆ¬è™«é¡¹ç›®çš„å‡†å¤‡å’Œå®ç°è¿‡ç¨‹ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯ä»ç™¾åº¦å›¾ç‰‡æœç´¢ä¸­è·å–å›¾ç‰‡é“¾æ¥å¹¶ä¸‹è½½å›¾ç‰‡ã€‚æ­¤ç±»çˆ¬è™«é¡¹ç›®é€šå¸¸ç”¨äºæ”¶é›†å¤§é‡çš„å›¾ç‰‡æ•°æ®ï¼Œä»¥ä¾¿ç”¨äºè®­ç»ƒå„ç§äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯è®¡ç®—æœºè§†è§‰æ¨¡å‹ã€‚è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ç ”ç©¶éœ€è¦å¤§é‡çš„å›¾åƒæ•°æ®æ¥è®­ç»ƒå’Œæµ‹è¯•æ¨¡å‹ï¼Œä»¥ä¾¿å®ç°å›¾åƒåˆ†ç±»ã€å¯¹è±¡æ£€æµ‹ã€å›¾åƒç”Ÿæˆç­‰åŠŸèƒ½ã€‚</p> 
<h3><a id="_7"></a>ä¸€ã€é¡¹ç›®å‡†å¤‡</h3> 
<h4><a id="_8"></a>ç¯å¢ƒé…ç½®</h4> 
<p>åœ¨å¼€å§‹ç¼–å†™çˆ¬è™«ä¹‹å‰ï¼Œç¡®ä¿å·²ç»å®Œæˆä»¥ä¸‹ç¯å¢ƒé…ç½®ï¼š</p> 
<p><strong>Pythonå®‰è£…</strong>: ç¡®ä¿å·²å®‰è£…Python 3.xç‰ˆæœ¬ã€‚Pythonæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºå­¦ä¹ çš„ç¼–ç¨‹è¯­è¨€ï¼Œé€‚åˆäºå„ç§ç¼–ç¨‹ä»»åŠ¡ï¼ŒåŒ…æ‹¬ç½‘ç»œçˆ¬è™«å¼€å‘ã€‚</p> 
<p><strong>éœ€è¦çš„åº“</strong>: Pythonæœ‰ä¸€ä¸ªåºå¤§çš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæ€ç³»ç»Ÿï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‡ ä¸ªæ ¸å¿ƒåº“æ¥å¼€å‘æˆ‘ä»¬çš„çˆ¬è™«ï¼š</p> 
<ul><li><strong>requests</strong>: ç”¨äºå‘é€HTTPè¯·æ±‚å’Œå¤„ç†å“åº”ã€‚</li><li><strong>json</strong>: ç”¨äºå¤„ç†JSONæ ¼å¼çš„æ•°æ®ã€‚</li><li><strong>urllib</strong>: æä¾›äº†åœ¨ç½‘ç»œä¸Šè·å–æ•°æ®çš„ä¸€äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸»è¦ç”¨æ¥è¿›è¡ŒURLç¼–ç ã€‚</li><li><strong>os</strong>: æä¾›äº†ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½ï¼Œç”¨äºåˆ›å»ºæ–‡ä»¶å¤¹ç­‰æ–‡ä»¶æ“ä½œã€‚</li><li><strong>time</strong>: æä¾›äº†æ—¶é—´ç›¸å…³çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¼‘çœ ç¨‹åºä»¥åŠè®¡æ—¶ç­‰ã€‚</li></ul> 
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡pipå®‰è£…è¿™äº›åº“ï¼š</p> 
<pre><code class="prism language-python">pip install requests
</code></pre> 
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Anacondaç­‰é›†æˆç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨condaå‘½ä»¤ï¼š</p> 
<pre><code class="prism language-python">conda install requests
</code></pre> 
<p>è¿™äº›åº“å°†å¸®åŠ©æˆ‘ä»¬å¤„ç†HTTPè¯·æ±‚ã€è§£æå’Œå­˜å‚¨æ•°æ®ï¼Œä»¥åŠè¿›è¡Œä¸€äº›åŸºæœ¬çš„ç³»ç»Ÿæ“ä½œã€‚</p> 
<h3><a id="_34"></a>äºŒã€çˆ¬è™«è®¾è®¡ä¸å®ç°</h3> 
<h4><a id="_36"></a>çˆ¬è™«è®¾è®¡æ€è·¯</h4> 
<h5><a id="_37"></a>ç›®æ ‡ç½‘ç«™åˆ†æ</h5> 
<p>æœ¬çˆ¬è™«ç›®æ ‡æ˜¯ä»ç™¾åº¦å›¾ç‰‡æœç´¢è·å–å›¾ç‰‡é“¾æ¥å¹¶ä¸‹è½½ã€‚ç™¾åº¦å›¾ç‰‡æœç´¢è¿”å›çš„ç»“æœæ˜¯JSONæ ¼å¼çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…å«äº†å›¾ç‰‡çš„ç¼©ç•¥å›¾é“¾æ¥ã€‚</p> 
<h5><a id="_40"></a>æ•°æ®è·å–æµç¨‹</h5> 
<ol><li>æ„å»ºç™¾åº¦å›¾ç‰‡æœç´¢çš„URLï¼Œé€šè¿‡GETè¯·æ±‚è·å–JSONæ•°æ®ã€‚</li><li>è§£æJSONæ•°æ®ï¼Œæå–ç¼©ç•¥å›¾é“¾æ¥ã€‚</li><li>ä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°å­˜å‚¨ã€‚</li></ol> 
<h4><a id="_44"></a>ä»£ç å®ç°</h4> 
<h5><a id="BaiduImageSpider_45"></a>åˆå§‹åŒ–çˆ¬è™«ç±»ï¼ˆBaiduImageSpiderï¼‰</h5> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
<span class="token keyword">from</span> urllib <span class="token keyword">import</span> parse
<span class="token keyword">import</span> os
<span class="token keyword">import</span> time

<span class="token keyword">class</span> <span class="token class-name">BaiduImageSpider</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>json_count <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># è¯·æ±‚åˆ°çš„jsonæ–‡ä»¶æ•°é‡ï¼ˆä¸€ä¸ªjsonæ–‡ä»¶åŒ…å«30ä¸ªå›¾åƒæ–‡ä»¶ï¼‰</span>
        self<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'https://image.baidu.com/search/acjson?tn=resultjson_com&amp;logid=5179920884740494226&amp;ipn=rj&amp;ct'</span> \
                   <span class="token string">'=201326592&amp;is=&amp;fp=result&amp;queryWord={'</span> \
                   <span class="token string">'}&amp;cl=2&amp;lm=-1&amp;ie=utf-8&amp;oe=utf-8&amp;adpicid=&amp;st=-1&amp;z=&amp;ic=0&amp;hd=&amp;latest=&amp;copyright=&amp;word={'</span> \
                   <span class="token string">'}&amp;s=&amp;se=&amp;tab=&amp;width=&amp;height=&amp;face=0&amp;istype=2&amp;qc=&amp;nc=1&amp;fr=&amp;expermode=&amp;nojc=&amp;pn={'</span> \
                   <span class="token string">'}&amp;rn=30&amp;gsm=1e&amp;1635054081427= '</span>
        self<span class="token punctuation">.</span>directory <span class="token operator">=</span> <span class="token string">r"C:\ä»·å€¼ä¸€ä¸ªäº¿\python-mini-projects\projects\baidutupian\{}"</span>  <span class="token comment"># å­˜å‚¨ç›®å½•  è¿™é‡Œéœ€è¦ä¿®æ”¹ä¸ºè‡ªå·±å¸Œæœ›ä¿å­˜çš„ç›®å½•  {}ä¸è¦ä¸¢</span>
        self<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3'</span><span class="token punctuation">,</span>
                          <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'en-US,en;q=0.9'</span><span class="token punctuation">,</span>
                          <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'https://image.baidu.com'</span>
        <span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_70"></a>åˆ›å»ºå­˜å‚¨æ–‡ä»¶å¤¹</h5> 
<pre><code class="prism language-python"><span class="token comment"># åˆ›å»ºå­˜å‚¨æ–‡ä»¶å¤¹</span>
 <span class="token keyword">def</span> <span class="token function">create_directory</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
     self<span class="token punctuation">.</span>directory <span class="token operator">=</span> self<span class="token punctuation">.</span>directory<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
     <span class="token comment"># å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</span>
     <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>self<span class="token punctuation">.</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
         os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>self<span class="token punctuation">.</span>directory<span class="token punctuation">)</span>
     self<span class="token punctuation">.</span>directory <span class="token operator">+=</span> <span class="token string">r'\{}'</span>
</code></pre> 
<h5><a id="_82"></a>è·å–å›¾åƒé“¾æ¥</h5> 
<pre><code class="prism language-python"><span class="token comment"># è·å–å›¾åƒé“¾æ¥</span>
<span class="token keyword">def</span> <span class="token function">get_image_link</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    list_image_link <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    strhtml <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>header<span class="token punctuation">)</span>  <span class="token comment"># Getæ–¹å¼è·å–ç½‘é¡µæ•°æ®</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Response content for URL </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>url<span class="token punctuation">}</span></span><span class="token string">:\n</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>strhtml<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">\n"</span></span><span class="token punctuation">)</span>
    
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        jsonInfo <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>strhtml<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error decoding JSON"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> list_image_link

    <span class="token keyword">if</span> <span class="token string">'data'</span> <span class="token keyword">in</span> jsonInfo<span class="token punctuation">:</span>
        <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>jsonInfo<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'thumbURL'</span> <span class="token keyword">in</span> jsonInfo<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">:</span>
                list_image_link<span class="token punctuation">.</span>append<span class="token punctuation">(</span>jsonInfo<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'thumbURL'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No 'data' key in the response JSON"</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> list_image_link
</code></pre> 
<h5><a id="_107"></a>ä¸‹è½½å›¾ç‰‡</h5> 
<pre><code class="prism language-python"><span class="token comment"># ä¸‹è½½å›¾ç‰‡</span>
<span class="token keyword">def</span> <span class="token function">save_image</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img_link<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>img_link<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
        <span class="token keyword">if</span> res<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">404</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å›¾ç‰‡ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>img_link<span class="token punctuation">}</span></span><span class="token string"> ä¸‹è½½å‡ºé”™"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>res<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å­˜å‚¨è·¯å¾„ï¼š"</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span>
    <span class="token keyword">except</span> requests<span class="token punctuation">.</span>RequestException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error downloading image: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_124"></a>ä¸»è¿è¡Œå‡½æ•°</h5> 
<pre><code class="prism language-python"><span class="token comment"># å…¥å£å‡½æ•°</span>
<span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    searchName <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢å†…å®¹ï¼š"</span><span class="token punctuation">)</span>
    searchName_parse <span class="token operator">=</span> parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>searchName<span class="token punctuation">)</span>  <span class="token comment"># ç¼–ç </span>

    self<span class="token punctuation">.</span>create_directory<span class="token punctuation">(</span>searchName<span class="token punctuation">)</span>

    pic_number <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># å›¾åƒæ•°é‡</span>
    <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>json_count<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pn <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">30</span>
        request_url <span class="token operator">=</span> self<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>searchName_parse<span class="token punctuation">,</span> searchName_parse<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>pn<span class="token punctuation">)</span><span class="token punctuation">)</span>
        list_image_link <span class="token operator">=</span> self<span class="token punctuation">.</span>get_image_link<span class="token punctuation">(</span>request_url<span class="token punctuation">)</span>
        <span class="token keyword">for</span> link <span class="token keyword">in</span> list_image_link<span class="token punctuation">:</span>
            pic_number <span class="token operator">+=</span> <span class="token number">1</span>
            self<span class="token punctuation">.</span>save_image<span class="token punctuation">(</span>link<span class="token punctuation">,</span> self<span class="token punctuation">.</span>directory<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>pic_number<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># ä¼‘çœ 1ç§’ï¼Œé˜²æ­¢å°ip</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>searchName <span class="token operator">+</span> <span class="token string">"----å›¾åƒä¸‹è½½å®Œæˆ---------&gt;"</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_146"></a>ä¸‰ã€ä»£ç è¯¦è§£</h3> 
<h4><a id="__init____148"></a><code>__init__</code> æ–¹æ³•</h4> 
<p><strong>init</strong> æ–¹æ³•ç”¨äºåˆå§‹åŒ–çˆ¬è™«ç±»çš„å±æ€§ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„å±æ€§ï¼š</p> 
<ul><li>json_count: ç”¨äºæŒ‡å®šè¦è¯·æ±‚çš„JSONæ–‡ä»¶æ•°é‡ï¼Œæ¯ä¸ªJSONæ–‡ä»¶åŒ…å«å¤šä¸ªå›¾åƒæ¡ç›®ã€‚</li><li>url: ç™¾åº¦å›¾ç‰‡æœç´¢çš„API URLï¼ŒåŒ…å«äº†å¤šä¸ªå‚æ•°ç”¨äºæ„é€ è¯·æ±‚ã€‚</li><li>directory: å­˜å‚¨ä¸‹è½½å›¾ç‰‡çš„ç›®å½•è·¯å¾„ã€‚è¿™ä¸ªè·¯å¾„åœ¨ create_directory æ–¹æ³•ä¸­è¢«åˆå§‹åŒ–å’Œä¿®æ”¹ã€‚</li><li>header: è¯·æ±‚å¤´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·ä»£ç†ã€æ¥å—è¯­è¨€å’Œå¼•ç”¨é¡µï¼Œç”¨äºæ¨¡æ‹Ÿæµè§ˆå™¨å‘é€è¯·æ±‚ã€‚</li></ul> 
<h4><a id="create_directory__157"></a><code>create_directory</code> æ–¹æ³•</h4> 
<p>create_directory æ–¹æ³•æ ¹æ®æä¾›çš„åç§°åˆ›å»ºå­˜å‚¨å›¾ç‰‡çš„æ–‡ä»¶å¤¹ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p> 
<ol><li>å°† directory å±æ€§æ ¼å¼åŒ–ä¸ºæŒ‡å®šçš„å­˜å‚¨ç›®å½•è·¯å¾„ã€‚</li><li>ä½¿ç”¨ os.makedirs() æ–¹æ³•åˆ›å»ºå¤šå±‚ç›®å½•ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨çš„è¯ã€‚</li><li>å°† directory å±æ€§æ›´æ–°ä¸ºåŒ…å«å›¾ç‰‡æ–‡ä»¶åæ ¼å¼çš„è·¯å¾„ï¼Œä»¥ä¾¿åç»­ä¿å­˜å›¾ç‰‡æ—¶ç›´æ¥åœ¨è¯¥è·¯å¾„ä¸‹ç”Ÿæˆæ–‡ä»¶ã€‚</li></ol> 
<h4><a id="get_image_link__165"></a><code>get_image_link</code> æ–¹æ³•</h4> 
<p>get_image_link æ–¹æ³•è´Ÿè´£å‘é€GETè¯·æ±‚è·å–ç™¾åº¦å›¾ç‰‡æœç´¢è¿”å›çš„JSONæ•°æ®ï¼Œå¹¶è§£ææ•°æ®æå–å›¾ç‰‡çš„ç¼©ç•¥å›¾é“¾æ¥ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p> 
<ol><li>ä½¿ç”¨ requests.get() æ–¹æ³•å‘é€GETè¯·æ±‚ï¼Œè·å–åŒ…å«å›¾ç‰‡ä¿¡æ¯çš„JSONæ•°æ®ã€‚</li><li>å°è¯•è§£æè¿”å›çš„JSONæ•°æ®ï¼Œå¦‚æœè§£æå¤±è´¥åˆ™æ•è· json.JSONDecodeError å¼‚å¸¸å¹¶æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚</li><li>å¦‚æœJSONæ•°æ®ä¸­åŒ…å« data é”®ï¼Œéå†æ•°æ®æ¡ç›®å¹¶æå–æ¯ä¸ªæ¡ç›®ä¸­çš„ thumbURLï¼ˆç¼©ç•¥å›¾é“¾æ¥ï¼‰ï¼Œå°†å…¶æ·»åŠ åˆ° list_image_link åˆ—è¡¨ä¸­ã€‚</li><li>å¦‚æœJSONæ•°æ®ä¸­ä¸å­˜åœ¨ data é”®ï¼Œåˆ™æ‰“å°ç›¸åº”çš„é”™è¯¯ä¿¡æ¯å¹¶è¿”å›ç©ºåˆ—è¡¨ã€‚</li></ol> 
<h4><a id="save_image__174"></a><code>save_image</code> æ–¹æ³•</h4> 
<p>save_image æ–¹æ³•ç”¨äºä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°å­˜å‚¨ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p> 
<ol><li>ä½¿ç”¨ requests.get() æ–¹æ³•å‘é€GETè¯·æ±‚ï¼Œè·å–åŒ…å«å›¾ç‰‡æ•°æ®çš„å“åº”ã€‚</li><li>æ£€æŸ¥å“åº”çŠ¶æ€ç ï¼Œå¦‚æœè¿”å›çš„çŠ¶æ€ç æ˜¯404ï¼Œåˆ™æ‰“å°é”™è¯¯ä¿¡æ¯è¡¨ç¤ºå›¾ç‰‡ä¸‹è½½å¤±è´¥ã€‚</li><li>å¦‚æœå“åº”æ­£å¸¸ï¼Œå°†å›¾ç‰‡æ•°æ®å†™å…¥ä»¥æŒ‡å®šæ–‡ä»¶å filename æ‰“å¼€çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼ˆä½¿ç”¨ â€œwbâ€ æ¨¡å¼ï¼‰ã€‚</li><li>æ‰“å°å­˜å‚¨å›¾ç‰‡çš„è·¯å¾„ä¿¡æ¯ï¼Œè¡¨ç¤ºå›¾ç‰‡å·²æˆåŠŸä¿å­˜åˆ°æœ¬åœ°ã€‚</li></ol> 
<h4><a id="run__183"></a><code>run</code> æ–¹æ³•</h4> 
<p>run æ–¹æ³•æ˜¯çˆ¬è™«çš„ä¸»è¿è¡Œå‡½æ•°ï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢å†…å®¹ï¼Œå¾ªç¯è·å–å›¾ç‰‡é“¾æ¥å¹¶ä¸‹è½½åˆ°æœ¬åœ°å­˜å‚¨ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p> 
<ol><li>æç¤ºç”¨æˆ·è¾“å…¥è¦æŸ¥è¯¢çš„å†…å®¹ï¼Œå¹¶å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¿›è¡ŒURLç¼–ç ï¼Œä»¥ä¾¿æ„é€ ç™¾åº¦å›¾ç‰‡æœç´¢çš„æŸ¥è¯¢URLã€‚</li><li>è°ƒç”¨ create_directory æ–¹æ³•åˆ›å»ºå­˜å‚¨å›¾ç‰‡çš„ç›®å½•ï¼Œç›®å½•åä¸ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢å†…å®¹ç›¸å…³è”ã€‚</li><li>åˆå§‹åŒ– pic_number å˜é‡ï¼Œç”¨äºè®°å½•å·²ä¸‹è½½çš„å›¾ç‰‡æ•°é‡ã€‚</li><li>ä½¿ç”¨å¾ªç¯ä»0åˆ° json_count ï¼ˆè®¾å®šçš„è¯·æ±‚çš„JSONæ–‡ä»¶æ•°é‡ï¼‰éå†ï¼Œæ„é€ ä¸åŒé¡µæ•°çš„ç™¾åº¦å›¾ç‰‡æœç´¢URLï¼Œå‘é€è¯·æ±‚å¹¶è·å–å›¾ç‰‡é“¾æ¥ã€‚</li><li>éå†è·å–çš„å›¾ç‰‡é“¾æ¥åˆ—è¡¨ï¼Œé€ä¸ªä¸‹è½½å›¾ç‰‡åˆ°æœ¬åœ°å­˜å‚¨ï¼Œå¹¶åœ¨æ¯æ¬¡ä¸‹è½½åä¼‘çœ 1ç§’ä»¥é˜²æ­¢IPè¢«å°ç¦ã€‚</li><li>ä¸‹è½½å®Œæˆåæ‰“å°æç¤ºä¿¡æ¯ï¼ŒæŒ‡ç¤ºæ‰€æœ‰å›¾ç‰‡å·²æˆåŠŸä¸‹è½½å¹¶å­˜å‚¨åˆ°æŒ‡å®šç›®å½•ä¸­ã€‚</li></ol> 
<p>ä»¥ä¸Šè¯¦ç»†è§£é‡Šäº†æ¯ä¸ªæ–¹æ³•åœ¨çˆ¬è™«å®ç°ä¸­çš„ä½œç”¨å’Œå…·ä½“å®ç°æ­¥éª¤ï¼Œç¡®ä¿äº†çˆ¬è™«èƒ½å¤Ÿæœ‰æ•ˆåœ°ä»ç™¾åº¦å›¾ç‰‡æœç´¢ä¸­è·å–æŒ‡å®šæ•°é‡çš„å›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</p> 
<h3><a id="IP_196"></a>å››ã€äº®æ•°æ®ä»£ç†IPçš„ä½¿ç”¨</h3> 
<h4><a id="IP_198"></a>ä¸ºä»€ä¹ˆéœ€è¦ä»£ç†IP</h4> 
<p>åœ¨çˆ¬å–ç½‘ç«™æ•°æ®æ—¶ï¼Œé¢‘ç¹çš„è¯·æ±‚ä¼šè¢«ç½‘ç«™è¯†åˆ«ä¸ºå¼‚å¸¸æµé‡ï¼Œå¯èƒ½å¯¼è‡´IPè¢«å°ç¦ã€‚ä½¿ç”¨ä»£ç†IPå¯ä»¥éšè—çœŸå®IPï¼Œé™ä½è¢«å°ç¦çš„é£é™©ã€‚</p> 
<h4><a id="IP_201"></a>å¦‚ä½•åœ¨çˆ¬è™«ä¸­é…ç½®ä»£ç†IP</h4> 
<p>å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»£ç†IPæœåŠ¡å•†æä¾›çš„ä»£ç†IPæ± ï¼Œä¾‹å¦‚requestsåº“ä¸­çš„proxieså‚æ•°ã€‚è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯<a href="https://www.bright.cn/proxy-types/?utm_source=brand&amp;utm_campaign=brnd-mkt_cn_csdn_haiyong" rel="nofollow">äº®æ•°æ®IPä»£ç†æœåŠ¡</a>ã€‚<br> <img src="https://images2.imgbox.com/e9/1b/uLR4cuDx_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" width="300"></p> 
<h4><a id="IP_205"></a>ä¿®æ”¹ä»£ç ä»¥æ”¯æŒä»£ç†IP</h4> 
<p>åœ¨è¯·æ±‚ä¸­æ·»åŠ ä»£ç†IPï¼Œä¾‹å¦‚ï¼š</p> 
<pre><code class="prism language-python">proxies <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token string">'http'</span><span class="token punctuation">:</span> <span class="token string">'http://user:password@proxy_ip:port'</span><span class="token punctuation">,</span>
  <span class="token string">'https'</span><span class="token punctuation">:</span> <span class="token string">'https://user:password@proxy_ip:port'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>header<span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxies<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_216"></a>äº”ã€å®Œæ•´ä»£ç åŠè¿è¡Œç»“æœ</h3> 
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„Pythonä»£ç å®ç°ï¼š</p> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding:utf8 -*-</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
<span class="token keyword">from</span> urllib <span class="token keyword">import</span> parse
<span class="token keyword">import</span> os
<span class="token keyword">import</span> time

<span class="token keyword">class</span> <span class="token class-name">BaiduImageSpider</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>json_count <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># è¯·æ±‚åˆ°çš„jsonæ–‡ä»¶æ•°é‡ï¼ˆä¸€ä¸ªjsonæ–‡ä»¶åŒ…å«30ä¸ªå›¾åƒæ–‡ä»¶ï¼‰</span>
        self<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'https://image.baidu.com/search/acjson?tn=resultjson_com&amp;logid=5179920884740494226&amp;ipn=rj&amp;ct'</span> \
                   <span class="token string">'=201326592&amp;is=&amp;fp=result&amp;queryWord={'</span> \
                   <span class="token string">'}&amp;cl=2&amp;lm=-1&amp;ie=utf-8&amp;oe=utf-8&amp;adpicid=&amp;st=-1&amp;z=&amp;ic=0&amp;hd=&amp;latest=&amp;copyright=&amp;word={'</span> \
                   <span class="token string">'}&amp;s=&amp;se=&amp;tab=&amp;width=&amp;height=&amp;face=0&amp;istype=2&amp;qc=&amp;nc=1&amp;fr=&amp;expermode=&amp;nojc=&amp;pn={'</span> \
                   <span class="token string">'}&amp;rn=30&amp;gsm=1e&amp;1635054081427= '</span>
        self<span class="token punctuation">.</span>directory <span class="token operator">=</span> <span class="token string">r"C:\ä»·å€¼ä¸€ä¸ªäº¿\python-mini-projects\projects\baidutupian\{}"</span>  <span class="token comment"># å­˜å‚¨ç›®å½•  è¿™é‡Œéœ€è¦ä¿®æ”¹ä¸ºè‡ªå·±å¸Œæœ›ä¿å­˜çš„ç›®å½•  {}ä¸è¦ä¸¢</span>
        self<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3'</span><span class="token punctuation">,</span>
                          <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'en-US,en;q=0.9'</span><span class="token punctuation">,</span>
                          <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'https://image.baidu.com'</span>
        <span class="token punctuation">}</span>

    <span class="token comment"># åˆ›å»ºå­˜å‚¨æ–‡ä»¶å¤¹</span>
    <span class="token keyword">def</span> <span class="token function">create_directory</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>directory <span class="token operator">=</span> self<span class="token punctuation">.</span>directory<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token comment"># å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™åˆ›å»º</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>self<span class="token punctuation">.</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
            os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>self<span class="token punctuation">.</span>directory<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>directory <span class="token operator">+=</span> <span class="token string">r'\{}'</span>

    <span class="token comment"># è·å–å›¾åƒé“¾æ¥</span>
    <span class="token keyword">def</span> <span class="token function">get_image_link</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">:</span>
        list_image_link <span class="token operator">=</span>

 <span class="token punctuation">[</span><span class="token punctuation">]</span>
        strhtml <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>header<span class="token punctuation">)</span>  <span class="token comment"># Getæ–¹å¼è·å–ç½‘é¡µæ•°æ®</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Response content for URL </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>url<span class="token punctuation">}</span></span><span class="token string">:\n</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>strhtml<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">\n"</span></span><span class="token punctuation">)</span>
        
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            jsonInfo <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>strhtml<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        <span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Error decoding JSON"</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> list_image_link

        <span class="token keyword">if</span> <span class="token string">'data'</span> <span class="token keyword">in</span> jsonInfo<span class="token punctuation">:</span>
            <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>jsonInfo<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'thumbURL'</span> <span class="token keyword">in</span> jsonInfo<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">:</span>
                    list_image_link<span class="token punctuation">.</span>append<span class="token punctuation">(</span>jsonInfo<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'thumbURL'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No 'data' key in the response JSON"</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> list_image_link

    <span class="token comment"># ä¸‹è½½å›¾ç‰‡</span>
    <span class="token keyword">def</span> <span class="token function">save_image</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img_link<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>img_link<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>header<span class="token punctuation">)</span>
            <span class="token keyword">if</span> res<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">404</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"å›¾ç‰‡ </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>img_link<span class="token punctuation">}</span></span><span class="token string"> ä¸‹è½½å‡ºé”™"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
                    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>res<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å­˜å‚¨è·¯å¾„ï¼š"</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span>
        <span class="token keyword">except</span> requests<span class="token punctuation">.</span>RequestException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error downloading image: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token comment"># å…¥å£å‡½æ•°</span>
    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        searchName <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢å†…å®¹ï¼š"</span><span class="token punctuation">)</span>
        searchName_parse <span class="token operator">=</span> parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>searchName<span class="token punctuation">)</span>  <span class="token comment"># ç¼–ç </span>

        self<span class="token punctuation">.</span>create_directory<span class="token punctuation">(</span>searchName<span class="token punctuation">)</span>

        pic_number <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># å›¾åƒæ•°é‡</span>
        <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>json_count<span class="token punctuation">)</span><span class="token punctuation">:</span>
            pn <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">30</span>
            request_url <span class="token operator">=</span> self<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>searchName_parse<span class="token punctuation">,</span> searchName_parse<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>pn<span class="token punctuation">)</span><span class="token punctuation">)</span>
            list_image_link <span class="token operator">=</span> self<span class="token punctuation">.</span>get_image_link<span class="token punctuation">(</span>request_url<span class="token punctuation">)</span>
            <span class="token keyword">for</span> link <span class="token keyword">in</span> list_image_link<span class="token punctuation">:</span>
                pic_number <span class="token operator">+=</span> <span class="token number">1</span>
                self<span class="token punctuation">.</span>save_image<span class="token punctuation">(</span>link<span class="token punctuation">,</span> self<span class="token punctuation">.</span>directory<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>pic_number<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># ä¼‘çœ 1ç§’ï¼Œé˜²æ­¢å°ip</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>searchName <span class="token operator">+</span> <span class="token string">"----å›¾åƒä¸‹è½½å®Œæˆ---------&gt;"</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    spider <span class="token operator">=</span> BaiduImageSpider<span class="token punctuation">(</span><span class="token punctuation">)</span>
    spider<span class="token punctuation">.</span>json_count <span class="token operator">=</span> <span class="token number">10</span>  <span class="token comment"># å®šä¹‰ä¸‹è½½10ç»„å›¾åƒï¼Œä¹Ÿå°±æ˜¯ä¸‰ç™¾å¼ </span>
    spider<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_311"></a>æ¼”ç¤ºçˆ¬è™«çš„è¿è¡Œ</h4> 
<p>è¿è¡Œä»¥ä¸Šä»£ç ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥æŸ¥è¯¢å†…å®¹ï¼Œçˆ¬è™«å°†å¼€å§‹ä»ç™¾åº¦å›¾ç‰‡æœç´¢ä¸‹è½½ç›¸å…³å›¾ç‰‡ã€‚</p> 
<p><img src="https://images2.imgbox.com/93/0a/bDtR0wbs_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="_317"></a>ä¸‹è½½çš„å›¾ç‰‡å±•ç¤º</h4> 
<p><img src="https://images2.imgbox.com/71/55/1JDMvcqZ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_321"></a>å…­ã€æ€»ç»“</h3> 
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Pythonç¼–å†™ä¸€ä¸ªç®€å•çš„çˆ¬è™«ï¼Œç”¨äºä»ç™¾åº¦å›¾ç‰‡æœç´¢ä¸‹è½½å›¾ç‰‡ã€‚é€šè¿‡åˆ†æç›®æ ‡ç½‘ç«™ã€è®¾è®¡çˆ¬è™«æµç¨‹ã€å®ç°ä»£ç ä»¥åŠé…ç½®ä»£ç†IPï¼Œä½¿å¾—çˆ¬è™«èƒ½å¤Ÿæœ‰æ•ˆåœ°è·å–å›¾ç‰‡æ•°æ®ã€‚é€šè¿‡æœ¬é¡¹ç›®ï¼Œè¯»è€…å¯ä»¥å­¦ä¹ åˆ°åŸºæœ¬çš„çˆ¬è™«åŸç†å’Œå®ç°æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿäº†è§£åˆ°äº†å¦‚ä½•å¤„ç†å¼‚å¸¸æƒ…å†µå’Œä¼˜åŒ–çˆ¬è™«æ•ˆç‡çš„æ–¹æ³•ã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63beb9ab1a4ab9046da9a701550581b6/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">20240628 æ¯æ—¥AIå¿…è¯»èµ„è®¯</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/176c1827a107b23bc0179c0a0b79cae8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Gitæ€ä¹ˆä¸‹è½½å¹¶ä¸”ä½¿ç”¨?</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>