<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据结构——B&#43;树 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4d005926de8888543c7d1539e6d40821/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="数据结构——B&#43;树">
  <meta property="og:description" content=" 一、B&#43;树的概念 B&#43;树是应数据所需而出现的一种B树的变形树。一棵m阶的B&#43;树需要满足下列条件：
每个分支节点最多有m棵子树（孩子节点）；非叶根节点至少有两棵子树，其他每个分支节点至少有⌈m/2⌉棵子树；节点的字数个数与关键字个数相等；所有叶节点包含全部关键字及指向相应记录的指针，叶节点中将关键字按大小顺序排列，并且相邻叶节点按大小顺序相互链接起来；所有分支节点（可视为索引的索引）中仅包含他的各个子节点（即下一级的索引块）中关键字的最大值及指向其子节点的指针。 二、B&#43;树和B树的差异 在B&#43;树中，具有n个关键字的结点只含有n棵子树，即每个关键字对应一棵子树；而在B树中，具有n个关键字的结点含有n&#43;1棵子树。在B&#43;树中，每个节点（非根内部节点）的关键字个数n的范围为⌈m/2⌉~m(而根节点：1~m)；而在B树中，每个节点（非根内部节点）的关键字个数n的范围为⌈m/2⌉-1~m-1(根节点：1~m-1)。在B&#43;树中，叶节点包含了全部关键字，非叶节点中出现的关键字也会出现在叶节点中；而在B树中，最外层的终端节点包含的关键字和其他节点包含的关键字是不重复的。在B&#43;树中，叶节点包含信息，所有非叶节点仅起索引作用，非叶节点的每个索引项只含有对应子树的最大关键字和指向该子树的指针，不含有该关键字对应记录的存储地址。
三、B&#43;树的查找 B&#43;树中的所有数据均保存在叶子结点，且根结点和内部结点均只是充当控制查找记录的媒介，并不代表数据本身，所有的内部结点元素都同时存在于子结点中，是子节点元素中是最大（或最小）元素。
例如在上图中的B&#43;树中查找55这个关键字，步骤如下：
在根节点中对比55和根节点中的元素[60, 85]，发现55&lt;60，因此应该在第一个结点中继续寻找；同理，比较55和第一个节点中的元素[10, 20, 50, 60]，发现50&lt;55&lt;60，因此55应该存在于第四个结点当中；继续对比55和第四个结点中的元素[55, 60]，找到55，查找成功。当然，也有查找失败的情况，即要查找的元素并不在B&#43;树中。 四、B&#43;树的插入 B&#43;树的插入和B树十分相似，其插入规则如下：
插入的操作全部都在叶子结点上进行，且不能破坏关键字自小而大的顺序；当插入关键字后结点的关键字个数大于m，需要进行“分裂”。
B&#43;树的插入有四种情况： 若被插入关键字所在的结点，其含有关键字数目小于m，则直接插入；若被插入关键字所在的结点，其含有关键字数目等于m，则需要将这个结点分为左右两部分，中间的结点放到父节点中。假设其双亲结点中包含的关键字个数小于 m，则插入操作完成。在第 2 种情况中，如果上移操作导致其双亲结点中关键字个数大于 M，则应继续分裂其双亲结点。若插入的关键字比当前结点中的最大值还大，破坏了B&#43;树中从根结点到当前结点的所有索引值，此时需要及时修正后，再做其他操作。 举例：
(1) 插入关键字12，此时第一个叶子节点部分[10, 15]关键字的个数&lt;m，可以直接插入：（紫色代表插入的元素）
(2) 插入95，需要插入到最后一个叶子节点部分[85, 91, 97]：
此时该节点的关键字个数大于m，需要进行分裂操作，并且父节点需要插入一个新的关键字：
(3) 插入40，需要插入到第二个叶子节点部分[21, 37, 44]：
此时该节点的关键字个数大于m，需要进行分裂操作，并且父节点需要插入一个新的关键字：
父节点插入新的关键字之后，关键字的个数大于m，也需要进行分裂：
（4）插入100，由于其值比最大值 97 还大，插入之后，从根结点到该结点经过的所有结点中的所有值都要由 97 改为 100。（橙色为修改之后的）
修改完最大值之后，在最后一个节点处插入100：
五、B&#43;树的删除 B&#43;树的删除也和B树十分类似，它有下面几种情况：
找到存储有该关键字所在的结点时，由于该结点中关键字个数&gt;=⌈m/2⌉，做删除操作不会破坏 B&#43;树，则可以直接删除；当删除某结点中最大或者最小的关键字，就会涉及到更改其双亲结点一直到根结点中所有索引值的更改。当删除该关键字，导致当前结点中关键字个数小于 ⌈m/2⌉，若其兄弟结点中含有多余的关键字，可以从兄弟结点中借关键字完成删除操作。第 3 种情况中，如果其兄弟结点没有多余的关键字，则需要同其兄弟结点进行合并。当进行合并时，可能会产生因合并使其双亲结点破坏 B&#43;树的结构，需要依照以上规律处理其双亲结点。 举例：
（1）删除12，包含12的叶子节点的关键字个数为3，当删除12时，关键字个数仍然大于等于⌈m/2⌉,可以直接删除：
（2）删除97，97为整个B&#43;树中元素最大的值，当删除这个元素时，需要修改从97的父节点到根节点中所有涉及到97的值，将其修改为第二大的元素值（在这个例子中第二大的元素为91）：
（3）删除51，此时51所在的结点只有59一个元素，该节点的关键字个数小于⌈m/2⌉，而它的兄弟结点元素个数大于⌈m/2⌉，可以给该节点借一个：
此时第二个叶子节点中的最大关键字为37，因此需要修改其父节点的值：
（4）删除59，此时59所在结点的关键字个数小于⌈m/2⌉：
并且该结点的兄弟结点的个数都为⌈m/2⌉，无法给它借关键字，因此将该结点与兄弟结点进行合并，结点合并之后，需要注意修改祖先节点相关的值：
（5）删除63，此时63所在的结点关键字个数小于⌈m/2⌉，并且兄弟节点无法给该节点提供关键字，因此该节点和其兄弟结点进行合并：
此时从图中可以发现，合并后的结点的父节点应该删除72，这时父节点关键字的个数小于⌈m/2⌉：
并且此时91所在结点的兄弟节点无法给该节点提供关键字，因此该结点和兄弟结点合并，并且需要修改合并后的节点的父节点的关键字值，合并后的结点的关键字个数满足条件。
六、B&#43;树使用场景 B&#43;树是在B树的基础上改造的，它的数据都在叶子节点，同时叶子结点之间还加了指针形成链表，多用于数据库索引。在数据库中通常不只是查询(select)一条记录，如果是多条记录的话，B树要做中序遍历，可能要跨层访问，而B&#43;树由于所有的数据都在叶子节点，不用跨层，同时由于有链表结构只要找到首尾，就能通过链表把数据都读出来。 ">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-07-15T01:03:28+08:00">
    <meta property="article:modified_time" content="2023-07-15T01:03:28+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据结构——B&#43;树</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="B_0"></a>一、B+树的概念</h2> 
<p>B+树是应数据所需而出现的一种B树的变形树。一棵m阶的B+树需要满足下列条件：</p> 
<ol><li>每个分支节点最多有m棵子树（孩子节点）；</li><li>非叶根节点至少有两棵子树，其他每个分支节点至少有⌈m/2⌉棵子树；</li><li>节点的字数个数与关键字个数相等；</li><li><strong>所有叶节点包含全部关键字及指向相应记录的指针</strong>，叶节点中将关键字按大小顺序排列，并且相邻叶节点按大小顺序相互链接起来；</li><li>所有分支节点（可视为索引的索引）中仅包含他的各个子节点（即下一级的索引块）中关键字的最大值及指向其子节点的指针。</li></ol> 
<h2><a id="BB_7"></a>二、B+树和B树的差异</h2> 
<ol><li>在B+树中，具有n个关键字的结点只含有n棵子树，即每个关键字对应一棵子树；而在B树中，具有n个关键字的结点含有n+1棵子树。</li><li>在B+树中，每个节点（非根内部节点）的关键字个数n的范围为<code>⌈m/2⌉~m</code>(而根节点：<code>1~m</code>)；而在B树中，每个节点（非根内部节点）的关键字个数n的范围为<code>⌈m/2⌉-1~m-1</code>(根节点：<code>1~m-1</code>)。</li><li>在B+树中，叶节点包含了全部关键字，非叶节点中出现的关键字也会出现在叶节点中；而在B树中，最外层的终端节点包含的关键字和其他节点包含的关键字是不重复的。</li><li>在B+树中，叶节点包含信息，所有<strong>非叶节点仅起索引作用</strong>，非叶节点的每个索引项只含有对应子树的最大关键字和指向该子树的指针，不含有该关键字对应记录的存储地址。<br> <img src="https://images2.imgbox.com/40/ed/nkTYwd6p_o.png" alt="在这里插入图片描述"></li></ol> 
<h2><a id="B_13"></a>三、B+树的查找</h2> 
<p>B+树中的所有数据均保存在叶子结点，且根结点和内部结点均只是充当控制查找记录的媒介，并不代表数据本身，所有的内部结点元素都同时存在于子结点中，是子节点元素中是最大（或最小）元素。</p> 
<p>例如在上图中的B+树中查找55这个关键字，步骤如下：</p> 
<ul><li>在根节点中对比55和根节点中的元素[60, 85]，发现55&lt;60，因此应该在第一个结点中继续寻找；</li><li>同理，比较55和第一个节点中的元素[10, 20, 50, 60]，发现50&lt;55&lt;60，因此55应该存在于第四个结点当中；</li><li>继续对比55和第四个结点中的元素[55, 60]，找到55，查找成功。当然，也有查找失败的情况，即要查找的元素并不在B+树中。</li></ul> 
<h2><a id="B_20"></a>四、B+树的插入</h2> 
<p>B+树的插入和B树十分相似，其插入规则如下：</p> 
<ul><li>插入的操作全部都在叶子结点上进行，且不能破坏关键字自小而大的顺序；</li><li>当插入关键字后结点的关键字个数大于m，需要进行“分裂”。<br> B+树的插入有四种情况：</li></ul> 
<ol><li>若被插入关键字所在的结点，其含有关键字数目小于m，则直接插入；</li><li>若被插入关键字所在的结点，其含有关键字数目等于m，则需要将这个结点分为左右两部分，中间的结点放到父节点中。假设其双亲结点中包含的关键字个数小于 m，则插入操作完成。</li><li>在第 2 种情况中，如果上移操作导致其双亲结点中关键字个数大于 M，则应继续分裂其双亲结点。</li><li>若插入的关键字比当前结点中的最大值还大，破坏了B+树中从根结点到当前结点的所有索引值，此时需要及时修正后，再做其他操作。</li></ol> 
<p>举例：<br> <img src="https://images2.imgbox.com/cc/88/A7DuOqDP_o.png" alt="在这里插入图片描述"><br> (1) 插入关键字12，此时第一个叶子节点部分[10, 15]关键字的个数&lt;m，可以直接插入：（紫色代表插入的元素）<img src="https://images2.imgbox.com/35/2b/TnwnYXL2_o.png" alt=""><br> (2) 插入95，需要插入到最后一个叶子节点部分[85, 91, 97]：<br> <img src="https://images2.imgbox.com/b6/a5/FyF5ezcq_o.png" alt="在这里插入图片描述"><br> 此时该节点的关键字个数大于m，需要进行分裂操作，并且父节点需要插入一个新的关键字：<br> <img src="https://images2.imgbox.com/dd/15/msXEZ7o9_o.png" alt="在这里插入图片描述"><br> (3) 插入40，需要插入到第二个叶子节点部分[21, 37, 44]：<br> <img src="https://images2.imgbox.com/11/0f/yBGfPT4q_o.png" alt="在这里插入图片描述"><br> 此时该节点的关键字个数大于m，需要进行分裂操作，并且父节点需要插入一个新的关键字：<br> <img src="https://images2.imgbox.com/6d/7e/0geX5zdE_o.png" alt="在这里插入图片描述"></p> 
<p>父节点插入新的关键字之后，关键字的个数大于m，也需要进行分裂：<br> <img src="https://images2.imgbox.com/e3/9c/Un0cbQ0G_o.png" alt="在这里插入图片描述"><br> （4）插入100，由于其值比最大值 97 还大，插入之后，从根结点到该结点经过的所有结点中的所有值都要由 97 改为 100。（橙色为修改之后的）<br> <img src="https://images2.imgbox.com/66/3a/41IrUSJM_o.png" alt="在这里插入图片描述"><br> 修改完最大值之后，在最后一个节点处插入100：<br> <img src="https://images2.imgbox.com/23/f3/FtP54PIK_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="B_48"></a>五、B+树的删除</h2> 
<p>B+树的删除也和B树十分类似，它有下面几种情况：</p> 
<ol><li>找到存储有该关键字所在的结点时，由于该结点中关键字个数&gt;=⌈m/2⌉，做删除操作不会破坏 B+树，则可以直接删除；</li><li>当删除某结点中最大或者最小的关键字，就会涉及到更改其双亲结点一直到根结点中所有索引值的更改。</li><li>当删除该关键字，导致当前结点中关键字个数小于 ⌈m/2⌉，若其兄弟结点中含有多余的关键字，可以从兄弟结点中借关键字完成删除操作。</li><li>第 3 种情况中，如果其兄弟结点没有多余的关键字，则需要同其兄弟结点进行合并。</li><li>当进行合并时，可能会产生因合并使其双亲结点破坏 B+树的结构，需要依照以上规律处理其双亲结点。</li></ol> 
<p>举例：<br> <img src="https://images2.imgbox.com/e6/3a/Sj9XiUMV_o.png" alt="在这里插入图片描述"><br> （1）删除12，包含12的叶子节点的关键字个数为3，当删除12时，关键字个数仍然大于等于⌈m/2⌉,可以直接删除：<br> <img src="https://images2.imgbox.com/72/db/Ut0pUc3v_o.png" alt="在这里插入图片描述"><br> （2）删除97，97为整个B+树中元素最大的值，当删除这个元素时，需要修改从97的父节点到根节点中所有涉及到97的值，将其修改为第二大的元素值（在这个例子中第二大的元素为91）：<br> <img src="https://images2.imgbox.com/eb/3f/IX2CctVJ_o.png" alt="在这里插入图片描述"><br> （3）删除51，此时51所在的结点只有59一个元素，该节点的关键字个数小于⌈m/2⌉，而它的兄弟结点元素个数大于⌈m/2⌉，可以给该节点借一个：<br> <img src="https://images2.imgbox.com/5e/7c/A5lJkFQq_o.png" alt="在这里插入图片描述"><br> 此时第二个叶子节点中的最大关键字为37，因此需要修改其父节点的值：<br> <img src="https://images2.imgbox.com/4f/f7/ancRMhKn_o.png" alt="在这里插入图片描述"><br> （4）删除59，此时59所在结点的关键字个数小于⌈m/2⌉：<br> <img src="https://images2.imgbox.com/66/db/xM7T7ISu_o.png" alt="在这里插入图片描述"><br> 并且该结点的兄弟结点的个数都为⌈m/2⌉，无法给它借关键字，因此将该结点与兄弟结点进行合并，结点合并之后，需要注意修改祖先节点相关的值：<br> <img src="https://images2.imgbox.com/15/6d/0g6ELBys_o.png" alt="在这里插入图片描述"><br> （5）删除63，此时63所在的结点关键字个数小于⌈m/2⌉，并且兄弟节点无法给该节点提供关键字，因此该节点和其兄弟结点进行合并：<br> <img src="https://images2.imgbox.com/49/7e/pMVijjZP_o.png" alt="在这里插入图片描述"><br> 此时从图中可以发现，合并后的结点的父节点应该删除72，这时父节点关键字的个数小于⌈m/2⌉：<br> <img src="https://images2.imgbox.com/c9/f3/WFu0aXCL_o.png" alt="在这里插入图片描述"><br> 并且此时91所在结点的兄弟节点无法给该节点提供关键字，因此该结点和兄弟结点合并，并且需要修改合并后的节点的父节点的关键字值，合并后的结点的关键字个数满足条件。<br> <img src="https://images2.imgbox.com/5e/50/KRw8vHDM_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="B_76"></a>六、B+树使用场景</h2> 
<ul><li>B+树是在B树的基础上改造的，它的数据都在叶子节点，同时叶子结点之间还加了指针形成链表，多用于<code>数据库索引</code>。</li><li>在数据库中通常不只是查询(select)一条记录，如果是多条记录的话，B树要做中序遍历，可能要跨层访问，而B+树由于所有的数据都在叶子节点，不用跨层，同时由于有链表结构只要找到首尾，就能通过链表把数据都读出来。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65e4575a1a5a49de86afa23f669189fa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序----一个简单的电影小程序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2a44c70e0565299e152c0e2c89981890/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【古风女孩-InsCode Stable Diffusion 美图活动一期】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>