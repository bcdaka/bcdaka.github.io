<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python基础】Python中处理JSON文件的全面指南 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/227f6d70d4e8e8d139006d476ef7c2d1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Python基础】Python中处理JSON文件的全面指南">
  <meta property="og:description" content="文章目录 Python中处理JSON文件的全面指南1. JSON简介2. Python中的JSON模块2.1 读取JSON文件2.2 解析JSON字符串2.3 写入JSON文件2.4 生成JSON字符串2.5 高级JSON处理 3. 结论4. 模块封装模块功能说明使用说明 Python中处理JSON文件的全面指南 JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，易于阅读和编写，同时也易于机器解析和生成。在Python中，处理JSON数据是一项常见且重要的任务，特别是在数据科学、网络编程和API交互等领域。本文将深入探讨Python中如何处理JSON文件，包括读取、解析、修改和写入JSON数据。
1. JSON简介 JSON格式由键值对组成，其中键总是字符串类型，而值可以是字符串、数字、数组（列表）、布尔值或其他嵌套的JSON对象。Python中的字典和JSON对象在结构上非常相似，使得在两者之间转换变得非常简单。
2. Python中的JSON模块 Python标准库中的json模块提供了处理JSON数据的强大工具。这个模块可以用来解析JSON字符串，将Python对象转换为JSON格式，以及处理文件和JSON之间的转换。
2.1 读取JSON文件 当然，我们可以更详细地探讨Python中读取JSON文件的功能，并通过一个实际的应用示例来展示其使用方法。
Python提供了内置的json模块来处理JSON数据。通过使用json.load()函数，我们可以轻松地将JSON文件中的数据读取为Python对象（通常是字典或列表）。
基本步骤
导入JSON模块：首先，需要导入Python的json模块。打开文件：使用open()函数以读取模式打开JSON文件。加载JSON数据：使用json.load()函数读取文件并将JSON数据转换为Python对象。 示例：读取一个简单的JSON文件
假设我们有一个JSON文件data.json，内容如下：
{ &#34;name&#34;: &#34;John Doe&#34;, &#34;age&#34;: 30, &#34;city&#34;: &#34;New York&#34;, &#34;hobbies&#34;: [&#34;Reading&#34;, &#34;Hiking&#34;, &#34;Coding&#34;] } 要读取这个文件并处理其中的数据，我们可以按照以下步骤操作：
步骤1：导入JSON模块
import json 步骤2：使用with语句打开文件
with语句在处理文件时是一个好习惯，因为它会在完成任务后自动关闭文件。
with open(&#39;data.json&#39;, &#39;r&#39;) as file: 步骤3：加载JSON数据
data = json.load(file) 步骤4：使用数据
现在data变量包含了一个字典，我们可以像处理普通字典那样处理它。
print(&#34;Name:&#34;, data[&#34;name&#34;]) print(&#34;Age:&#34;, data[&#34;age&#34;]) print(&#34;City:&#34;, data[&#34;city&#34;]) print(&#34;Hobbies:&#34;, &#34;, &#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-07T18:55:24+08:00">
    <meta property="article:modified_time" content="2024-01-07T18:55:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python基础】Python中处理JSON文件的全面指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#PythonJSON_1" rel="nofollow">Python中处理JSON文件的全面指南</a></li><li><ul><li><a href="#1_JSON_5" rel="nofollow">1. JSON简介</a></li><li><a href="#2_PythonJSON_9" rel="nofollow">2. Python中的JSON模块</a></li><li><ul><li><a href="#21_JSON_13" rel="nofollow">2.1 读取JSON文件</a></li><li><a href="#22_JSON_92" rel="nofollow">2.2 解析JSON字符串</a></li><li><a href="#23_JSON_128" rel="nofollow">2.3 写入JSON文件</a></li><li><a href="#24_JSON_205" rel="nofollow">2.4 生成JSON字符串</a></li><li><a href="#25_JSON_216" rel="nofollow">2.5 高级JSON处理</a></li></ul> 
   </li><li><a href="#3__234" rel="nofollow">3. 结论</a></li><li><a href="#4__239" rel="nofollow">4. 模块封装</a></li><li><ul><li><a href="#_298" rel="nofollow">模块功能说明</a></li><li><a href="#_304" rel="nofollow">使用说明</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="PythonJSON_1"></a>Python中处理JSON文件的全面指南</h2> 
<p>JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，易于阅读和编写，同时也易于机器解析和生成。在Python中，处理JSON数据是一项常见且重要的任务，特别是在数据科学、网络编程和API交互等领域。本文将深入探讨Python中如何处理JSON文件，包括读取、解析、修改和写入JSON数据。</p> 
<h3><a id="1_JSON_5"></a>1. JSON简介</h3> 
<p>JSON格式由键值对组成，其中键总是字符串类型，而值可以是字符串、数字、数组（列表）、布尔值或其他嵌套的JSON对象。Python中的字典和JSON对象在结构上非常相似，使得在两者之间转换变得非常简单。</p> 
<h3><a id="2_PythonJSON_9"></a>2. Python中的JSON模块</h3> 
<p>Python标准库中的<code>json</code>模块提供了处理JSON数据的强大工具。这个模块可以用来解析JSON字符串，将Python对象转换为JSON格式，以及处理文件和JSON之间的转换。</p> 
<h4><a id="21_JSON_13"></a>2.1 读取JSON文件</h4> 
<p>当然，我们可以更详细地探讨Python中读取JSON文件的功能，并通过一个实际的应用示例来展示其使用方法。</p> 
<p>Python提供了内置的<code>json</code>模块来处理JSON数据。通过使用<code>json.load()</code>函数，我们可以轻松地将JSON文件中的数据读取为Python对象（通常是字典或列表）。</p> 
<p><strong>基本步骤</strong></p> 
<ol><li><strong>导入JSON模块</strong>：首先，需要导入Python的<code>json</code>模块。</li><li><strong>打开文件</strong>：使用<code>open()</code>函数以读取模式打开JSON文件。</li><li><strong>加载JSON数据</strong>：使用<code>json.load()</code>函数读取文件并将JSON数据转换为Python对象。</li></ol> 
<p><strong>示例：读取一个简单的JSON文件</strong></p> 
<p>假设我们有一个JSON文件<code>data.json</code>，内容如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token string-property property">"city"</span><span class="token operator">:</span> <span class="token string">"New York"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"hobbies"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Reading"</span><span class="token punctuation">,</span> <span class="token string">"Hiking"</span><span class="token punctuation">,</span> <span class="token string">"Coding"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>要读取这个文件并处理其中的数据，我们可以按照以下步骤操作：</p> 
<p><strong>步骤1：导入JSON模块</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json
</code></pre> 
<p><strong>步骤2：使用<code>with</code>语句打开文件</strong></p> 
<p><code>with</code>语句在处理文件时是一个好习惯，因为它会在完成任务后自动关闭文件。</p> 
<pre><code class="prism language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'data.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
</code></pre> 
<p><strong>步骤3：加载JSON数据</strong></p> 
<pre><code class="prism language-python">    data <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>步骤4：使用数据</strong></p> 
<p>现在<code>data</code>变量包含了一个字典，我们可以像处理普通字典那样处理它。</p> 
<pre><code class="prism language-python">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Name:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Age:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"City:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"city"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Hobbies:"</span><span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">"hobbies"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>完整的代码示例</strong></p> 
<p>将上述步骤组合在一起，完整的代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json

<span class="token comment"># 打开并读取JSON文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'data.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>

<span class="token comment"># 使用读取的数据</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Name:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Age:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"City:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"city"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Hobbies:"</span><span class="token punctuation">,</span> <span class="token string">", "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">"hobbies"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行这段代码，它将从<code>data.json</code>文件中读取数据，并打印出其中的内容。</p> 
<h4><a id="22_JSON_92"></a>2.2 解析JSON字符串</h4> 
<p>什么是JSON字符串？JSON字符串是遵循JSON格式规范的字符串。它通常表示为键值对的集合，其中键是字符串，而值可以是字符串、数字、布尔值、数组（列表），甚至是嵌套的JSON对象。</p> 
<p><strong>使用Python解析JSON字符串</strong></p> 
<p>在Python中，可以使用json模块中的json.loads()函数（“loads"代表"load string”）来解析JSON字符串。这个函数将JSON格式的字符串转换为相应的Python对象，通常是字典或列表。</p> 
<p>如果你有一个JSON格式的字符串，可以使用<code>json.loads()</code>函数将其转换为Python对象。</p> 
<pre><code class="prism language-python">json_string <span class="token operator">=</span> <span class="token string">'{"name": "John", "age": 30, "city": "New York"}'</span>
parsed_data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>json_string<span class="token punctuation">)</span>
</code></pre> 
<p>这里，<code>parsed_data</code>将是一个字典，包含了解析自字符串的数据。</p> 
<pre><code class="prism language-python">
<span class="token keyword">import</span> json

<span class="token comment"># 定义JSON字符串</span>
json_string <span class="token operator">=</span> <span class="token string">'{"name": "Alice", "age": 25, "is_student": false, "grades": [90, 95, 88]}'</span>

<span class="token comment"># 解析JSON字符串</span>
data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>json_string<span class="token punctuation">)</span>

<span class="token comment"># 使用解析后的数据</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Name:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Age:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Is a student:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"is_student"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Grades:"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token string">"grades"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行这段代码将解析JSON字符串，并打印出相关的数据。</p> 
<h4><a id="23_JSON_128"></a>2.3 写入JSON文件</h4> 
<p>在Python中，将数据写入JSON文件是一项常见的任务，尤其是在数据持久化、配置管理或数据共享等方面。JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，由于其易读性和广泛的语言支持，成为了数据存储和交换的热门选择。Python的<code>json</code>模块提供了简单直接的方法来将Python对象转换成JSON格式并写入文件。</p> 
<p><strong>为什么要写入JSON文件？</strong></p> 
<ul><li><strong>数据持久化</strong>：将内存中的数据结构保存到文件中，以便于未来使用。</li><li><strong>配置文件</strong>：创建和修改设置或配置文件。</li><li><strong>数据共享</strong>：生成标准格式的数据文件，以便于与其他程序或语言共享数据。</li></ul> 
<p><strong>使用Python写入JSON文件</strong></p> 
<p>在Python中，可以使用<code>json</code>模块中的<code>json.dump()</code>函数（或<code>json.dumps()</code>，其中“dump string”用于生成字符串）来将Python对象转换为JSON格式并写入文件。</p> 
<p><strong>基本步骤</strong></p> 
<ol><li><strong>导入JSON模块</strong>：首先需要导入Python的<code>json</code>模块。</li><li><strong>打开文件</strong>：使用<code>with</code>语句和<code>open()</code>函数以写入模式打开目标文件。</li><li><strong>写入JSON数据</strong>：使用<code>json.dump()</code>函数将Python对象写入打开的文件。</li></ol> 
<p><strong>示例：写入一个简单的JSON文件</strong></p> 
<p>假设我们有一个Python字典，想要将其保存为JSON文件。</p> 
<p><strong>定义Python数据</strong></p> 
<pre><code class="prism language-python">data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span>
    <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
    <span class="token string">"is_student"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token string">"grades"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>步骤1：导入JSON模块</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json
</code></pre> 
<p><strong>步骤2：使用<code>with</code>语句打开文件</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'output.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
</code></pre> 
<p><strong>步骤3：写入JSON数据</strong></p> 
<pre><code class="prism language-python">    json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>完整的代码示例</strong></p> 
<p>将上述步骤组合在一起，完整的代码如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json

<span class="token comment"># 定义Python数据</span>
data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span>
    <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
    <span class="token string">"is_student"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
    <span class="token string">"grades"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment"># 打开文件并写入JSON数据</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'output.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
    json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行这段代码将创建一个名为<code>output.json</code>的文件，并将<code>data</code>字典以格式化的JSON格式写入该文件。</p> 
<blockquote> 
 <p>使用Python的<code>json</code>模块，可以轻松实现数据的序列化和文件写入，使得数据存储、配置管理和数据共享变得简单高效。掌握这一技能对于进行数据处理、自动化脚本编写或任何需要数据持久化的任务都是非常有价值的。</p> 
</blockquote> 
<h4><a id="24_JSON_205"></a>2.4 生成JSON字符串</h4> 
<p>如果你想将Python对象转换为JSON字符串，可以使用<code>json.dumps()</code>函数。</p> 
<pre><code class="prism language-python">python_data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"Doe"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">"city"</span><span class="token punctuation">:</span> <span class="token string">"Chicago"</span><span class="token punctuation">}</span>
json_string <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>python_data<span class="token punctuation">)</span>
</code></pre> 
<p>这样，<code>json_string</code>就包含了对应于Python字典的JSON格式的字符串。</p> 
<h4><a id="25_JSON_216"></a>2.5 高级JSON处理</h4> 
<p><code>json</code>模块还提供了一些高级功能，例如自定义编码器和解码器，以及对输出格式化的支持。</p> 
<p><strong>美化输出</strong></p> 
<p><code>json.dumps()</code>函数的<code>indent</code>参数可以用来美化输出，使其更易读。</p> 
<pre><code class="prism language-python">formatted_json_string <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>python_data<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
</code></pre> 
<p>这会生成一个格式化的、易读的JSON字符串。</p> 
<p><strong>自定义编码和解码</strong></p> 
<p>在一些复杂的场景中，你可能需要对Python对象进行自定义的序列化和反序列化。通过继承<code>json.JSONEncoder</code>和<code>json.JSONDecoder</code>类并重写相应的方法，你可以实现自定义的JSON编码和解码逻辑。</p> 
<h3><a id="3__234"></a>3. 结论</h3> 
<p>Python中的JSON处理非常直接和强大，<code>json</code>模块提供了读取、解析、修改和写入JSON数据所需的所有工具。无论是简单的数据交换还是复杂的数据处理任务，Python都能够高效地处理JSON数据。</p> 
<hr> 
<h3><a id="4__239"></a>4. 模块封装</h3> 
<p>为了方便使用，这里创建一个Python模块，用于处理JSON文件的读写操作，将每个功能封装在一个函数中。这个模块将提供两个基本功能：读取JSON文件和将数据写入JSON文件。</p> 
<p>以下是模块的代码：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json

<span class="token keyword">def</span> <span class="token function">read_json</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    读取JSON文件并返回数据。

    :param filename: JSON文件的路径
    :return: 从JSON文件中读取的数据
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
            data <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> data
    <span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"文件 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>filename<span class="token punctuation">}</span></span><span class="token string"> 未找到."</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    <span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"文件 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>filename<span class="token punctuation">}</span></span><span class="token string"> 不是有效的JSON."</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>

<span class="token keyword">def</span> <span class="token function">write_json</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    将数据写入JSON文件。

    :param data: 要写入文件的数据
    :param filename: JSON文件的路径
    """</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
            json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"数据已成功写入 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>filename<span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> TypeError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"提供的数据无法序列化为JSON."</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> IOError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"写入文件 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>filename<span class="token punctuation">}</span></span><span class="token string"> 时出错."</span></span><span class="token punctuation">)</span>

<span class="token comment"># 示例使用</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># 示例数据</span>
    sample_data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
        <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
        <span class="token string">"city"</span><span class="token punctuation">:</span> <span class="token string">"New York"</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># 写入数据到JSON文件</span>
    write_json<span class="token punctuation">(</span>sample_data<span class="token punctuation">,</span> <span class="token string">'sample.json'</span><span class="token punctuation">)</span>

    <span class="token comment"># 从JSON文件读取数据</span>
    read_data <span class="token operator">=</span> read_json<span class="token punctuation">(</span><span class="token string">'sample.json'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>read_data<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_298"></a>模块功能说明</h4> 
<ul><li> <p><strong><code>read_json(filename)</code></strong>: 这个函数接受一个文件名作为参数，读取该JSON文件，并返回其中的数据。如果文件不存在或不是有效的JSON格式，则会打印错误信息并返回<code>None</code>。</p> </li><li> <p><strong><code>write_json(data, filename)</code></strong>: 这个函数接受要写入的数据和一个文件名作为参数，将数据写入指定的JSON文件。如果数据无法序列化为JSON或文件无法写入，则会打印错误信息。</p> </li></ul> 
<h4><a id="_304"></a>使用说明</h4> 
<p>将上述代码保存为一个<code>.py</code>文件（例如<code>json_handler.py</code>），然后可以在其他Python脚本中导入和使用这个模块。例如：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json_handler

data <span class="token operator">=</span> json_handler<span class="token punctuation">.</span>read_json<span class="token punctuation">(</span><span class="token string">'example.json'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

json_handler<span class="token punctuation">.</span>write_json<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"new"</span><span class="token punctuation">:</span> <span class="token string">"data"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'example.json'</span><span class="token punctuation">)</span>
</code></pre> 
<p>这个模块提供了基本的JSON文件读写功能，适用于大多数基础应用。对于更复杂的需求，如错误处理或大型数据集的处理，可能需要进行相应的扩展和优化。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bdf7350add23992e46e7e901558481b9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">万年历(C语言)-程序设计/作业</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/06d9350c409861ac673b6b24aa98b1e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">学生信息管理系统的数据库设计MySQL</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>