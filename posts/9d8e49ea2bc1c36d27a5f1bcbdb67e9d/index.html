<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>秒验集成指南 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9d8e49ea2bc1c36d27a5f1bcbdb67e9d/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="秒验集成指南">
  <meta property="og:description" content="开发工具：Android Studio
集成方式：Gradle在线集成
安卓版本支持：minSdkVersion 19
集成前准备 注册账号 使用秒验SDK之前，需要先在MobTech官网注册开发者账号并注册应用获取Mob提供的AppKey和AppSecret，详情可以点击查看创建应用流程
提交审核 一键登录是运营商提供的能力，在使用秒验SDK之前，您需要在Mob开发者后台提交秒验审核，详情可以点击查看秒验审核流程
秒验SDK流程图 集成配置 秒验SDK提供了两种集成方式，您可根据需要进行选择。需要注意的是，两种集成方式在功能上无任何区别，仅为集成方式不同，选取其中一种即可。
Gradle集成 配置SDK地址 Android Studio的代码库配置方式随Gradle插件的不同版本有所不同。请根据您当前Gradle插件的版本，选择相应的配置方式。
【7.0及以上版本】 打开项目级“settings.gradle”文件，配置Maven仓地址，注意修改 repositoriesMode为 RepositoriesMode.PREFER_SETTINGS。 pluginManagement { repositories { gradlePluginPortal() google() mavenCentral() maven { url &#34;https://mvn.mob.com/android&#34; } } } dependencyResolutionManagement { // repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS) repositories { gradlePluginPortal() google() mavenCentral() maven { url &#34;https://mvn.mob.com/android&#34; } } } 打开Android Studio项目级build.gradle文件，配置MobSDK插件地址 buildscript { dependencies { // 增加MobSDK插件配置 classpath &#34;com.mob.sdk:MobSDK2:&#43;&#34; // 增加google services插件配置，用于集成FCM，不集成FCM可不配置 classpath &#39;com.google.gms:google-services:4.3.14&#39; } } plugins { id &#39;com.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-22T12:22:36+08:00">
    <meta property="article:modified_time" content="2024-08-22T12:22:36+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">秒验集成指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>开发工具：Android Studio</strong></p> 
 <p><strong>集成方式：Gradle在线集成</strong></p> 
 <p><strong>安卓版本支持：minSdkVersion 19</strong></p> 
</blockquote> 
<h2>集成前准备</h2> 
<h3 id="-1">注册账号</h3> 
<p><strong>使用秒验SDK之前，需要先在MobTech官网注册开发者账号并注册应用获取Mob提供的AppKey和AppSecret，详情可以点击</strong><a href="https://www.mob.com/wiki/detailed?wiki=538&amp;id=78" rel="nofollow" title="查看创建应用流程">查看创建应用流程</a></p> 
<h3 id="-2">提交审核</h3> 
<p><strong>一键登录是运营商提供的能力，在使用秒验SDK之前，您需要在Mob开发者后台提交秒验审核，详情可以点击</strong><a href="https://www.mob.com/wiki/detailed?wiki=159&amp;id=78" rel="nofollow" title="查看秒验审核流程">查看秒验审核流程</a></p> 
<h3 id="sdk">秒验SDK流程图</h3> 
<p></p> 
<p class="img-center"><img alt="下载.png" height="1200" src="https://images2.imgbox.com/57/ee/yEmDqIMp_o.png" width="1200"></p> 
<h2 id="-3">集成配置</h2> 
<p><strong>秒验SDK提供了两种集成方式，您可根据需要进行选择。需要注意的是，两种集成方式在功能上无任何区别，仅为集成方式不同，选取其中一种即可。</strong></p> 
<h3 id="gradle">Gradle集成</h3> 
<h4 id="sdk-1">配置SDK地址</h4> 
<p><strong>Android Studio的代码库配置方式随Gradle插件的不同版本有所不同。请根据您当前Gradle插件的版本，选择相应的配置方式。</strong></p> 
<h5 id="70">【7.0及以上版本】</h5> 
<ol><li><strong>打开项目级“settings.gradle”文件，配置Maven仓地址，注意修改 <code>repositoriesMode</code>为 <code>RepositoriesMode.PREFER_SETTINGS</code>。</strong></li></ol> 
<pre><code>   pluginManagement {
       repositories {
           gradlePluginPortal()
           google()
           mavenCentral()
           maven {
               url "https://mvn.mob.com/android"
           }
       }
   }
   dependencyResolutionManagement {
       // repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
       repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
       repositories {
           gradlePluginPortal()
           google()
           mavenCentral()
           maven {
               url "https://mvn.mob.com/android"
           }
       }
   }
</code></pre> 
<ol><li><strong>打开Android Studio项目级build.gradle文件，配置MobSDK插件地址</strong></li></ol> 
<pre><code>   buildscript {
       dependencies {
           // 增加MobSDK插件配置
           classpath "com.mob.sdk:MobSDK2:+"
           // 增加google services插件配置，用于集成FCM，不集成FCM可不配置
           classpath 'com.google.gms:google-services:4.3.14'
       }
   }

   plugins {
       id 'com.android.application' version 'x.x.x' apply false
       id 'com.android.library' version 'x.x.x' apply false
   }
</code></pre> 
<h5 id="70-1">【7.0以下版本】</h5> 
<ol><li><strong>打开Android Studio项目级build.gradle文件。</strong></li><li><strong>在allprojects -&gt;repositories里面配置maven仓地址。</strong></li></ol> 
<pre><code>   allprojects {
       repositories {
           maven {
               url "https://mvn.mob.com/android"
           }
       }
   }
</code></pre> 
<ol><li><strong>在buildscript-&gt;repositories中配置maven仓地址。</strong></li></ol> 
<pre><code>   buildscript {
       repositories {
           maven {
               url "https://mvn.mob.com/android"
           }
       }
   }
</code></pre> 
<ol><li><strong>在buildscript-&gt;dependencies中配置AppGallery Connect插件地址</strong></li></ol> 
<pre><code>   buildscript {
       dependencies {
           //增加MobSDK插件配置
           classpath "com.mob.sdk:MobSDK2:+"
       }
   }
</code></pre> 
<h4 id="-4">添加依赖</h4> 
<ol><li><strong>打开应用级的build.gradle文件。</strong></li><li><strong>添加mob插件配置。请根据实际情况选择：</strong></li></ol> 
<ul><li><strong>方式一：在“com.android.application” 插件下一行添加如下配置。</strong></li></ul> 
<pre><code>   apply plugin: 'com.mob.sdk'
</code></pre> 
<ul><li><strong>方式二：在“plugins”中添加如下配置。</strong></li></ul> 
<pre><code>   plugins {
       id 'com.android.application'
       id 'com.mob.sdk'
   }
</code></pre> 
<ol><li><strong>在文件末尾添加mob配置代码</strong></li></ol> 
<pre><code>   MobSDK {
       appKey "替换为MobTech官方申请的appkey"
       appSecret "替换为MobTech官方申请的appkey对应的appSecret"
       SecVerify {}
   }
</code></pre> 
<h4 id="-5">配置标识</h4> 
<p><strong>在gradle.properties中添加代码</strong></p> 
<pre><code>MobSDK.spEdition=IZNAO
</code></pre> 
<h4 id="googleplay">Google Play 版本</h4> 
<p>如果您的应用需要上架Google商店，请务必使用Google Play 版本。</p> 
<p>在gradle.properties中添加代码，如已添加 <code>MobSDK.spEdition</code>相关配置，则修改值为 <code>GPP</code>即可。</p> 
<pre><code>MobSDK.spEdition=GPP
</code></pre> 
<p><strong>至此，Gradle集成方式已经完成。</strong></p> 
<h3 id="-6">离线集成</h3> 
<h4 id="sdk-2">获取SDK</h4> 
<p><strong>在进行离线集成之前，请先联系在线客服获取离线SDK。</strong></p> 
<h4 id="sdk-3">添加SDK</h4> 
<p><strong>把获取到的离线SDK包放入项目中的libs文件夹内。</strong></p> 
<h4 id="sdk-4">引入SDK</h4> 
<p><strong>通过上一步添加SDK至项目中后，SDK包还未进行引用，需要添加下方所示引入代码后才可使用。</strong></p> 
<pre><code>implementation fileTree(dir: 'libs', include: ['*.aar', '*.jar'])
</code></pre> 
<h4 id="-7">配置清单文件</h4> 
<p><strong>复制下方提供的清单文件代码至您的项目AndroidManifest.xml文件中。</strong></p> 
<pre><code>&lt;manifest
    &lt;application

        &lt;------ start 需要添加的内容 start ------&gt;

        &lt;meta-data
            android:name="Mob-AppKey"
            android:value="您的MOBSDK-Appkey" /&gt;
        &lt;meta-data
            android:name="Mob-AppSecret"
            android:value="您的MOBSDK-AppSecret" /&gt;
        &lt;provider
            android:name="com.mob.MobProvider"
            android:exported="false"
            android:multiprocess="true"
            android:authorities="${applicationId}.com.mob.MobProvider" /&gt;

        &lt;------ end 需要添加的内容 end ------&gt;

    &lt;/application&gt;
&lt;/manifest&gt;
</code></pre> 
<p><strong>至此，离线集成方式已经完成。</strong></p> 
<h3 id="http">http协议支持</h3> 
<p><strong>由于Android 9.0开始，系统强制使用https请求，运营商暂不支持https取号，因此需要关闭9.0系统的强制https功能，请在manifest的 Application 节点增加 usesCleartextTraffic 设置，如下所示：</strong></p> 
<pre><code>&lt;application
    android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:usesCleartextTraffic="true"&gt;
</code></pre> 
<h3 id="so">指定so库（可选）</h3> 
<p><strong>电信免密登录能力使用了so库，开发者可根据自身应用支持的cpu架构，选择使用不同so库。</strong></p> 
<pre><code>// 根据需要选择对应的.so库
android {
    defaultConfig {
        applicationId '您的ApplicationId'
        ndk {
            // 选择要添加的对应 cpu 类型的so库，多个abi以“,”分隔。
            abiFilters 'armeabi-v7a'
            // 可指定的值为 'armeabi-v7a', 'arm64-v8a', 'armeabi', 'x86', 'x86_64'，
            }
        }
}
</code></pre> 
<h3 id="-8">添加混淆代码</h3> 
<p><strong>秒验SDK已经做了混淆处理，再次混淆会导致不可预期的错误，请在您的混淆脚本中添加如下的配置，跳过对秒验SDK的混淆操作</strong></p> 
<pre><code>-ignorewarnings

#关闭某个运营商功能时编译通不过可以加上下面的代码
#-dontpreverify

# for SecVerify
-keep class com.mob.**{*;}
# for CTCC
-keep class cn.com.chinatelecom.account.**{*;}
# for CUCC
-dontwarn com.unicom.online.account.shield.**
-keep class com.unicom.online.account.shield.** {*;}
-keep class com.sdk.**{*;}
# for CMCC
-dontwarn com.cmic.gen.sdk.**
-keep class com.cmic.gen.sdk.**{*;}
-keep class com.cmic.sso.sdk.**{*;}
# for CUCCXW
-keep class com.unicom.xiaowo.account.shield.**{*;}
</code></pre> 
<p><strong>另如有用到AndResGuard混淆资源问题，请在whiteList中添加如下混淆配置：</strong></p> 
<pre><code>秒验
R.anim.sec_verify_*,
R.drawable.sec_verify_*,
R.layout.sec_verify_*,
R.string.sec_verify_*,
R.color.sec_verify_*,
R.dimen.sec_verify_*,
R.style.sec_verify_*,
R.drawable.customized_toggle_*,
R.drawable.customized_checkbox_selector,
R.drawable.dialog_loading,
移动
R.anim.umcsdk_*,
R.drawable.umcsdk_*,
R.string.umcsdk_*,
R.dimen.umcsdk_*,
电信
R.anim.ct_account_*,
R.drawable.ct_account_*,
R.string.ct_account_*,
R.style.CtAuthDialog,


"R.anim.sec_verify_*",
"R.drawable.sec_verify_*",
"R.layout.sec_verify_*",
"R.string.sec_verify_*",
"R.color.sec_verify_*",
"R.dimen.sec_verify_*",
"R.style.sec_verify_*",
"R.drawable.customized_toggle_*",
"R.drawable.customized_checkbox_selector",
"R.drawable.dialog_loading",
"R.id.sec_verify_*",
"R.id.common_dialog_*",
"R.anim.umcsdk_*",
"R.drawable.umcsdk_*",
"R.string.umcsdk_*",
"R.dimen.umcsdk_*",
"R.anim.ct_account_*",
"R.drawable.ct_account_*",
"R.string.ct_account_*",
"R.style.CtAuthDialog",
"R.id.ct_account_*",
"R.id.ct_auth_*",
"R.string.service_name" ,
"R.style.Dialog_Common",
"R.id.progress_bar" ,
"R.drawable.loading"
</code></pre> 
<h2 id="-9">隐私授权启动业务</h2> 
<p>为保证您的App在集成MobSDK之后能够满足工信部相关合规要求，您应确保App安装首次冷启动且取得用户阅读您《隐私政策》授权之后，调用 MobSDK.submitPolicyGrantResult回传隐私协议授权结果。</p> 
<p>反之，如果用户不同意您App《隐私政策》授权，则不能调用 MobSDK.submitPolicyGrantResult回传隐私协议授权结果。 请参考<a href="https://www.mob.com/wiki/detailed?wiki=639&amp;id=78" rel="nofollow" title="秒验SDK隐私政策">秒验SDK隐私政策</a></p> 
<ul><li>通用方案</li></ul> 
<pre><code>/**
 * com.mob.MobSDK.class
 * 回传用户隐私授权结果
 * @param isGranted     用户是否同意隐私协议
 */  
public static void submitPolicyGrantResult(boolean isGranted)
</code></pre> 
<ul><li>增加App数据采集主动控制器方案</li></ul> 
<pre><code>/**
 * com.mob.MobSDK.class
 * 回传用户隐私授权结果
 * @param isGranted     App数据采集主动控制器子类实例
 * @param isGranted     用户是否同意隐私协议
 */  
public static void submitPolicyGrantResult(MobCustomController cont, boolean isGranted);
</code></pre> 
<p><strong>示例代码</strong></p> 
<p><strong>注</strong>：submitPolicyGrantResult是MobSDK的业务起点。调用位置开发者可以自己指定，只需在使用SDK功能之前调用即可，强烈建议开发者在终端用户点击应用隐私协议弹窗同意按钮后调用。</p> 
<p>App数据采集主动控制器用来限制MobSDK采集并提供可选的数据维度和扩展功能。因相关信息的不收集将会对其对应的功能造成影响，请开发者结合业务实际需要进行合理配置。秒验SDK扩展业务功能设置可参考： https://www.mob.com/wiki/detailed?wiki=657&amp;id=78 ，其它App数据采集主动控制器的配置方法可参考：https://www.mob.com/wiki/detailed?wiki=664&amp;id=714</p> 
<pre><code>MobSDK.submitPolicyGrantResult(new MobCustomController() {
    // TODO 重写控制器
}, true);

// 或者

MobSDK.submitPolicyGrantResult(true);</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/198823d6934489f77ca7457beca7271b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机毕业设计选题推荐-岗位招聘数据可视化分析-Python爬虫</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ade1fd79030e8751bf469650d7db69ea/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何让python爬虫的数据可视化？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>