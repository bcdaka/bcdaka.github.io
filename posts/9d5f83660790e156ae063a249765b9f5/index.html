<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>åŸºäºPython&#43;å¤§æ•°æ®çš„çº¿ä¸Šæ•™è‚²å¹³å°æ•°æ®åˆ†æç³»ç»Ÿè®¾è®¡ä¸å®ç° - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9d5f83660790e156ae063a249765b9f5/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="åŸºäºPython&#43;å¤§æ•°æ®çš„çº¿ä¸Šæ•™è‚²å¹³å°æ•°æ®åˆ†æç³»ç»Ÿè®¾è®¡ä¸å®ç°">
  <meta property="og:description" content="ğŸ’—åšä¸»ä»‹ç»ï¼šâœŒå…¨ç½‘ç²‰ä¸10W&#43;,CSDNå…¨æ ˆé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ï¼Œåšå®¢ä¹‹æ˜Ÿã€æ˜é‡‘/åä¸ºäº‘/é˜¿é‡Œäº‘ç­‰å¹³å°ä¼˜è´¨ä½œè€…ã€‚
ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ  æ¨èè®¢é˜…ğŸ‘‡ğŸ»
è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ç²¾å“é¡¹ç›®æ¡ˆä¾‹-200å¥—
ğŸŒŸæ–‡æœ«è·å–æºç &#43;æ•°æ®åº“&#43;æ–‡æ¡£ğŸŒŸ
æ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—èµ·æ¥ï¼Œè¿˜æœ‰å¤§å®¶åœ¨æ¯•è®¾é€‰é¢˜ï¼Œé¡¹ç›®ä»¥åŠè®ºæ–‡ç¼–å†™ç­‰ç›¸å…³é—®é¢˜éƒ½å¯ä»¥å’Œå­¦é•¿æ²Ÿé€šï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šçš„äºº
ä¸€.å‰è¨€ éšç€äº’è”ç½‘æŠ€æœ¯çš„ä¸æ–­å’Œå¿«é€Ÿå‘å±•ï¼Œç½‘ç»œä¸å¤§æ•°æ®å¾ˆæ—©å°±æˆä¸ºäº†äººä»¬ç”Ÿæ´»ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œçº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æç”±äºå…¶ç‰¹æœ‰çš„ä¾¿æ·æ€§ï¼Œç”¨æˆ·èƒ½å¤Ÿæ›´åŠ å®¹æ˜“åœ°æ¥å—ã€‚äº’è”ç½‘æœ‰äº†è¿™ç§ä¾¿æ·è°ƒå‰‚ä¿¡æ¯(é˜…è¯»é‡TOP10)ã€è®¿é—®ä¿¡æ¯ç­‰åˆ†æå½¢å¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æ–°å‹çš„å…¨æ–°åº”ç”¨å½¢å¼[3]ã€‚ä»ä¾§é¢æ¥çœ‹ï¼Œçº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æè¿˜èƒ½å¤Ÿæ¨è¿›ç½‘ä¸Šç”¨æˆ·æŸ¥çœ‹çˆ¬å–ä¸‹çš„å¤§æ•°æ®è°ƒå‰‚ä¿¡æ¯çš„æ™®åŠã€‚
åŒä¼ ç»Ÿçš„äººå·¥ç»Ÿè®¡æ•°æ®æ¨¡å¼ç›¸æ¯”ï¼Œçº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æå…·æœ‰è¾ƒå¤šçš„ä¼˜åŠ¿ã€‚å»ºç«‹è§„èŒƒåŒ–çš„æµç¨‹é€šå¸¸å¯ä»¥è§£å†³ç”¨æˆ·æŸ¥è¯¢é˜…è¯»é‡ç»Ÿè®¡ã€å‘å¸ƒæ—¶é—´ç»Ÿè®¡ã€åœ°åŒºè®¿é—®é‡ç»Ÿè®¡ã€è®¿é—®ç±»å‹ç»Ÿè®¡ã€è°ƒå‰‚ä¿¡æ¯(é˜…è¯»é‡TOP10ï¼‰åˆ†æé—®é¢˜ï¼Œè€Œç›®å‰å¦‚æœéœ€è¦ç®¡ç†ç½‘ç«™çˆ¬å–ä¸‹çš„å¤§æ•°æ®ï¼Œç®¡ç†å‘˜ä¾ç„¶ä»¥äººå·¥çš„æ–¹å¼è¿›è¡Œç®¡ç†çš„è¯å¤ªè¿‡äºè½åã€‚çº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æå¤„ç†æ•°æ®è¶Šæ¥è¶Šè¶‹äºä¿¡æ¯åŒ–ï¼Œè¿™ç§æ¨¡å¼éœ€è¦ä¾èµ–äºæ™ºèƒ½åŒ–æ‰‹æ®µç®¡ç†ã€‚éšç€ç§‘æŠ€å‘å±•çš„è¿›æ­¥ä¸å¤§æ•°æ®çš„æ™®åŠï¼Œä¿¡æ¯æŠ€æœ¯èƒ½å¤Ÿæ”¹å–„æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œç°åœ¨è®¸å¤šç”Ÿæ´»åœºæ™¯éƒ½éœ€è¦ä¿¡æ¯åŒ–æŠ€æœ¯å¸®åŠ©æ”¹å–„æˆ‘ä»¬çš„ç”Ÿæ´»ã€‚
æœ¬è¯¾é¢˜å°±æ˜¯ä»¥çº¿ä¸Šæ•™è‚²ç³»ç»Ÿçˆ¬å–ä¸ºä¾‹ï¼Œä»‹ç»ç½‘ç»œçˆ¬è™«çš„åŸºæœ¬åŸç†ï¼ŒPythonç¯å¢ƒçš„æ­å»ºï¼ŒPyCharm scrapyæ¨¡å—çš„çˆ¬è™«æ•°æ®çš„è¿ç”¨ï¼ŒæŠŠè·å–åˆ°çš„æ•°æ®è¿›è¡Œæ¸…æ´—ã€æ•´åˆï¼Œå‚¨å­˜æ•°æ®åˆ°MySQLï¼Œç„¶åè¿›è¡Œæ•°æ®å¯è§†åŒ–çš„å‘ˆç°ï¼Œç®€å•å¯¹å‘ˆç°çš„å›¾è¿›è¡Œæ•°æ®åˆ†æã€‚
äºŒ.æŠ€æœ¯ç¯å¢ƒ å¼€å‘è¯­è¨€ï¼šPython
pythonæ¡†æ¶ï¼šdjango
è½¯ä»¶ç‰ˆæœ¬ï¼špython3.7/python3.8
æ•°æ®åº“ï¼šmysql 5.7æˆ–æ›´é«˜ç‰ˆæœ¬
æ•°æ®åº“å·¥å…·ï¼šNavicat11
çˆ¬è™«æ¡†æ¶ï¼šScrapy
å¼€å‘è½¯ä»¶ï¼šPyCharm/vs code
å‰ç«¯æ¡†æ¶:vue.js
ä¸‰.åŠŸèƒ½è®¾è®¡ ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾æ˜¯ç³»ç»Ÿè®¾è®¡é˜¶æ®µï¼Œç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾åªæ˜¯è¿™ä¸ªé˜¶æ®µä¸€ä¸ªåŸºç¡€ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ¶æ„å†³å®šäº†ç³»ç»Ÿçš„æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç³»ç»Ÿçš„æ ¹æ®ã€‚çº¿ä¸Šæ•™è‚²å¹³å°æ•°æ®åˆ†æç³»ç»Ÿçš„æ•´ä¸ªè®¾è®¡ç»“æ„å¦‚å›¾æ‰€ç¤ºã€‚
å››.æ•°æ®è®¾è®¡ æ¦‚å¿µæ¨¡å‹çš„è®¾è®¡æ˜¯ä¸ºäº†æŠ½è±¡çœŸå®ä¸–ç•Œçš„ä¿¡æ¯ï¼Œå¹¶å¯¹ä¿¡æ¯ä¸–ç•Œè¿›è¡Œå»ºæ¨¡ã€‚å®ƒæ˜¯æ•°æ®åº“è®¾è®¡çš„å¼ºå¤§å·¥å…·ã€‚æ•°æ®åº“æ¦‚å¿µæ¨¡å‹è®¾è®¡å¯ä»¥é€šè¿‡E-Rå›¾æè¿°ç°å®ä¸–ç•Œçš„æ¦‚å¿µæ¨¡å‹ã€‚ç³»ç»Ÿçš„E-Rå›¾æ˜¾ç¤ºäº†ç³»ç»Ÿä¸­å®ä½“ä¹‹é—´çš„é“¾æ¥ã€‚è€Œä¸”Mysqlæ•°æ®åº“æ˜¯è‡ªæˆ‘ä¿æŠ¤èƒ½åŠ›æ¯”è¾ƒå¼ºçš„æ•°æ®åº“ï¼Œä¸‹å›¾ä¸»è¦æ˜¯å¯¹æ•°æ®åº“å®ä½“çš„E-Rå›¾ï¼š
äº”.éƒ¨åˆ†æ•ˆæœå±•ç¤º ç³»ç»Ÿç®¡ç†å‘˜åŠŸèƒ½å®ç°æ•ˆæœ ç®¡ç†å‘˜è¦ç™»å½•çº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æï¼Œéœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œè¿›è¡Œç™»å½•ï¼Œç®¡ç†å‘˜ç™»å½•ç•Œé¢å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç™»å½•è¿›å…¥çº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿé¦–é¡µã€ä¸ªäººä¸­å¿ƒã€è°ƒå‰‚ä¿¡æ¯ç®¡ç†ã€è®¿é—®ä¿¡æ¯ç®¡ç†ã€è®¿é—®ç±»å‹ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰åŠŸèƒ½ï¼Œè¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»è°ƒå‰‚ä¿¡æ¯ç®¡ç†ï¼›åœ¨è°ƒå‰‚ä¿¡æ¯ç®¡ç†é¡µé¢è¾“å…¥æ¥æºã€å­¦æ ¡åã€æ ‡é¢˜ã€é˜…è¯»é‡ã€å‘å¸ƒæ—¶é—´ã€åˆ†ç±»ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œçˆ¬èµ·æ•°æ®æˆ–åˆ é™¤è°ƒå‰‚ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»è®¿é—®ä¿¡æ¯ç®¡ç†ï¼›åœ¨è®¿é—®ä¿¡æ¯ç®¡ç†é¡µé¢è¾“å…¥è®¿é—®ç¼–å·ã€è®¿é—®åœ°åŒºã€è®¿é—®é‡ã€è®¿é—®ç±»å‹ã€æ›´æ–°æ—¶é—´ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œæ–°å¢ã€å¯¼å…¥æˆ–åˆ é™¤è®¿é—®ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»è®¿é—®ç±»å‹ç®¡ç†ï¼›åœ¨è®¿é—®ç±»å‹ç®¡ç†é¡µé¢è¾“å…¥è®¿é—®ç±»å‹ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ã€æ–°å¢æˆ–åˆ é™¤è®¿é—®ç±»å‹ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç‚¹å‡»ç³»ç»Ÿç®¡ç†ï¼›åœ¨ç³»ç»Ÿç®¡ç†é¡µé¢å¯¹ç³»ç»Ÿç®€ä»‹ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢æˆ–ä¿®æ”¹ç³»ç»Ÿä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚
æ•°æ®å¯è§†åŒ–åˆ†æå¤§å±å±•ç¤ºå®ç°æ•ˆæœ çº¿ä¸Šæ•™è‚²å¹³å°åˆ†æç³»ç»Ÿå±•ç¤ºå›¾ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
ä¸‹é¢å±•ç¤ºæ˜¯é˜…è¯»é‡ç»Ÿè®¡ï¼Œå¯¹äºé˜…è¯»é‡ç»Ÿè®¡å¤§æ•°æ®ï¼Œæ•°æ®è·å–ä¹‹åï¼Œå¼€å§‹å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–åˆ†æï¼Œé¦–å…ˆæ˜¯é˜…è¯»é‡ç»Ÿè®¡çš„åŸºæœ¬æƒ…å†µï¼Œå…¶ä¸­æ ¹æ®çˆ¬å–çš„æ•°æ®ä»¥é¥¼çŠ¶å›¾çš„å½¢å¼æ¥å±•ç¤ºï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
ä¸‹é¢å±•ç¤ºæ˜¯å‘å¸ƒæ—¶é—´ç»Ÿè®¡ï¼Œå¯¹äºå‘å¸ƒæ—¶é—´ç»Ÿè®¡å¤§æ•°æ®è·å–ä¹‹åï¼Œå¼€å§‹å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–åˆ†æï¼Œé¦–å…ˆé€šè¿‡é¡µé¢æŸ¥çœ‹å‘å¸ƒæ—¶é—´ç»Ÿè®¡è¯¦æƒ…è¿›è¡Œå±•ç¤ºï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
åœ¨åœ°åŒºè®¿é—®é‡ç»Ÿè®¡é¡µé¢ä»¥æ¡å½¢å›¾è¿›è¡Œå±•ç¤ºæ‰€ç¤ºã€‚
ä¸‹å›¾æ˜¯è®¿é—®ç±»å‹ç»Ÿè®¡ï¼Œé€šè¿‡pythonçˆ¬å–æ¸…æ´—åçš„æ•°æ®ä»¥é¥¼çŠ¶å›¾å½¢å¼å±•ç¤ºå¦‚å›¾æ‰€ç¤ºï¼š
ä¸‹å›¾æ˜¯è°ƒå‰‚ä¿¡æ¯(é˜…è¯»é‡TOP10)ï¼Œé€šè¿‡pythonçˆ¬å–æ¸…æ´—åçš„æ•°æ®ä»¥ä¿¡æ¯è¡¨å½¢å¼å±•ç¤ºå¦‚å›¾æ‰€ç¤ºï¼š
å…­.éƒ¨åˆ†åŠŸèƒ½ä»£ç  # æ•°æ®çˆ¬å–æ–‡ä»¶ import scrapy import pymysql import pymssql from ..items import TiaojixinxiItem import time import re import random import platform import json import os from urllib.parse import urlparse import requests import emoji # è°ƒå‰‚ä¿¡æ¯ class TiaojixinxiSpider(scrapy.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-28T17:13:25+08:00">
    <meta property="article:modified_time" content="2024-01-28T17:13:25+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">åŸºäºPython&#43;å¤§æ•°æ®çš„çº¿ä¸Šæ•™è‚²å¹³å°æ•°æ®åˆ†æç³»ç»Ÿè®¾è®¡ä¸å®ç°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ğŸ’—åšä¸»ä»‹ç»ï¼šâœŒå…¨ç½‘ç²‰ä¸10W+,CSDNå…¨æ ˆé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ï¼Œåšå®¢ä¹‹æ˜Ÿã€æ˜é‡‘/åä¸ºäº‘/é˜¿é‡Œäº‘ç­‰å¹³å°ä¼˜è´¨ä½œè€…ã€‚<br> ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ  æ¨èè®¢é˜…ğŸ‘‡ğŸ»<br> <a href="https://blog.csdn.net/qq_15801219/category_11466472.html">è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ç²¾å“é¡¹ç›®æ¡ˆä¾‹-200å¥—</a><br> ğŸŒŸ<strong>æ–‡æœ«è·å–æºç +æ•°æ®åº“+æ–‡æ¡£</strong>ğŸŒŸ<br> æ„Ÿå…´è¶£çš„å¯ä»¥å…ˆæ”¶è—èµ·æ¥ï¼Œè¿˜æœ‰å¤§å®¶åœ¨æ¯•è®¾é€‰é¢˜ï¼Œé¡¹ç›®ä»¥åŠè®ºæ–‡ç¼–å†™ç­‰ç›¸å…³é—®é¢˜éƒ½å¯ä»¥å’Œå­¦é•¿æ²Ÿé€šï¼Œå¸Œæœ›å¸®åŠ©æ›´å¤šçš„äºº</p> 
</blockquote> 
<h3><a id="_5"></a>ä¸€.å‰è¨€</h3> 
<p><img src="https://images2.imgbox.com/57/e2/TqpOyTn5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>éšç€äº’è”ç½‘æŠ€æœ¯çš„ä¸æ–­å’Œå¿«é€Ÿå‘å±•ï¼Œç½‘ç»œä¸å¤§æ•°æ®å¾ˆæ—©å°±æˆä¸ºäº†äººä»¬ç”Ÿæ´»ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œçº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æç”±äºå…¶ç‰¹æœ‰çš„ä¾¿æ·æ€§ï¼Œç”¨æˆ·èƒ½å¤Ÿæ›´åŠ å®¹æ˜“åœ°æ¥å—ã€‚äº’è”ç½‘æœ‰äº†è¿™ç§ä¾¿æ·è°ƒå‰‚ä¿¡æ¯(é˜…è¯»é‡TOP10)ã€è®¿é—®ä¿¡æ¯ç­‰åˆ†æå½¢å¼ï¼Œä¹Ÿæ˜¯ä¸€ç§æ–°å‹çš„å…¨æ–°åº”ç”¨å½¢å¼[3]ã€‚ä»ä¾§é¢æ¥çœ‹ï¼Œçº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æè¿˜èƒ½å¤Ÿæ¨è¿›ç½‘ä¸Šç”¨æˆ·æŸ¥çœ‹çˆ¬å–ä¸‹çš„å¤§æ•°æ®è°ƒå‰‚ä¿¡æ¯çš„æ™®åŠã€‚<br> åŒä¼ ç»Ÿçš„äººå·¥ç»Ÿè®¡æ•°æ®æ¨¡å¼ç›¸æ¯”ï¼Œçº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æå…·æœ‰è¾ƒå¤šçš„ä¼˜åŠ¿ã€‚å»ºç«‹è§„èŒƒåŒ–çš„æµç¨‹é€šå¸¸å¯ä»¥è§£å†³ç”¨æˆ·æŸ¥è¯¢é˜…è¯»é‡ç»Ÿè®¡ã€å‘å¸ƒæ—¶é—´ç»Ÿè®¡ã€åœ°åŒºè®¿é—®é‡ç»Ÿè®¡ã€è®¿é—®ç±»å‹ç»Ÿè®¡ã€è°ƒå‰‚ä¿¡æ¯(é˜…è¯»é‡TOP10ï¼‰åˆ†æé—®é¢˜ï¼Œè€Œç›®å‰å¦‚æœéœ€è¦ç®¡ç†ç½‘ç«™çˆ¬å–ä¸‹çš„å¤§æ•°æ®ï¼Œç®¡ç†å‘˜ä¾ç„¶ä»¥äººå·¥çš„æ–¹å¼è¿›è¡Œç®¡ç†çš„è¯å¤ªè¿‡äºè½åã€‚çº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æå¤„ç†æ•°æ®è¶Šæ¥è¶Šè¶‹äºä¿¡æ¯åŒ–ï¼Œè¿™ç§æ¨¡å¼éœ€è¦ä¾èµ–äºæ™ºèƒ½åŒ–æ‰‹æ®µç®¡ç†ã€‚éšç€ç§‘æŠ€å‘å±•çš„è¿›æ­¥ä¸å¤§æ•°æ®çš„æ™®åŠï¼Œä¿¡æ¯æŠ€æœ¯èƒ½å¤Ÿæ”¹å–„æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œç°åœ¨è®¸å¤šç”Ÿæ´»åœºæ™¯éƒ½éœ€è¦ä¿¡æ¯åŒ–æŠ€æœ¯å¸®åŠ©æ”¹å–„æˆ‘ä»¬çš„ç”Ÿæ´»ã€‚<br> æœ¬è¯¾é¢˜å°±æ˜¯ä»¥çº¿ä¸Šæ•™è‚²ç³»ç»Ÿçˆ¬å–ä¸ºä¾‹ï¼Œä»‹ç»ç½‘ç»œçˆ¬è™«çš„åŸºæœ¬åŸç†ï¼ŒPythonç¯å¢ƒçš„æ­å»ºï¼ŒPyCharm scrapyæ¨¡å—çš„çˆ¬è™«æ•°æ®çš„è¿ç”¨ï¼ŒæŠŠè·å–åˆ°çš„æ•°æ®è¿›è¡Œæ¸…æ´—ã€æ•´åˆï¼Œå‚¨å­˜æ•°æ®åˆ°MySQLï¼Œç„¶åè¿›è¡Œæ•°æ®å¯è§†åŒ–çš„å‘ˆç°ï¼Œç®€å•å¯¹å‘ˆç°çš„å›¾è¿›è¡Œæ•°æ®åˆ†æã€‚</p> 
<hr> 
<h3><a id="_13"></a>äºŒ.æŠ€æœ¯ç¯å¢ƒ</h3> 
<p>å¼€å‘è¯­è¨€ï¼šPython<br> pythonæ¡†æ¶ï¼šdjango<br> è½¯ä»¶ç‰ˆæœ¬ï¼špython3.7/python3.8<br> æ•°æ®åº“ï¼šmysql 5.7æˆ–æ›´é«˜ç‰ˆæœ¬<br> æ•°æ®åº“å·¥å…·ï¼šNavicat11<br> çˆ¬è™«æ¡†æ¶ï¼šScrapy<br> å¼€å‘è½¯ä»¶ï¼šPyCharm/vs code<br> å‰ç«¯æ¡†æ¶:vue.js</p> 
<hr> 
<h3><a id="_25"></a>ä¸‰.åŠŸèƒ½è®¾è®¡</h3> 
<p>ç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾æ˜¯ç³»ç»Ÿè®¾è®¡é˜¶æ®µï¼Œç³»ç»ŸåŠŸèƒ½ç»“æ„å›¾åªæ˜¯è¿™ä¸ªé˜¶æ®µä¸€ä¸ªåŸºç¡€ï¼Œæ•´ä¸ªç³»ç»Ÿçš„æ¶æ„å†³å®šäº†ç³»ç»Ÿçš„æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç³»ç»Ÿçš„æ ¹æ®ã€‚çº¿ä¸Šæ•™è‚²å¹³å°æ•°æ®åˆ†æç³»ç»Ÿçš„æ•´ä¸ªè®¾è®¡ç»“æ„å¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/07/cc/E5kgegM2_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_31"></a>å››.æ•°æ®è®¾è®¡</h3> 
<p>æ¦‚å¿µæ¨¡å‹çš„è®¾è®¡æ˜¯ä¸ºäº†æŠ½è±¡çœŸå®ä¸–ç•Œçš„ä¿¡æ¯ï¼Œå¹¶å¯¹ä¿¡æ¯ä¸–ç•Œè¿›è¡Œå»ºæ¨¡ã€‚å®ƒæ˜¯æ•°æ®åº“è®¾è®¡çš„å¼ºå¤§å·¥å…·ã€‚æ•°æ®åº“æ¦‚å¿µæ¨¡å‹è®¾è®¡å¯ä»¥é€šè¿‡E-Rå›¾æè¿°ç°å®ä¸–ç•Œçš„æ¦‚å¿µæ¨¡å‹ã€‚ç³»ç»Ÿçš„E-Rå›¾æ˜¾ç¤ºäº†ç³»ç»Ÿä¸­å®ä½“ä¹‹é—´çš„é“¾æ¥ã€‚è€Œä¸”Mysqlæ•°æ®åº“æ˜¯è‡ªæˆ‘ä¿æŠ¤èƒ½åŠ›æ¯”è¾ƒå¼ºçš„æ•°æ®åº“ï¼Œä¸‹å›¾ä¸»è¦æ˜¯å¯¹æ•°æ®åº“å®ä½“çš„E-Rå›¾ï¼š<br> <img src="https://images2.imgbox.com/9e/37/XOF4YokM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/0c/f0/RaMrVQoB_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_37"></a>äº”.éƒ¨åˆ†æ•ˆæœå±•ç¤º</h3> 
<h4><a id="_39"></a>ç³»ç»Ÿç®¡ç†å‘˜åŠŸèƒ½å®ç°æ•ˆæœ</h4> 
<p>ç®¡ç†å‘˜è¦ç™»å½•çº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æï¼Œéœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œè¿›è¡Œç™»å½•ï¼Œç®¡ç†å‘˜ç™»å½•ç•Œé¢å¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/5c/f1/obfz9Ebm_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç™»å½•è¿›å…¥çº¿ä¸Šæ•™è‚²å¹³å°å¤§æ•°æ®åˆ†æå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿé¦–é¡µã€ä¸ªäººä¸­å¿ƒã€è°ƒå‰‚ä¿¡æ¯ç®¡ç†ã€è®¿é—®ä¿¡æ¯ç®¡ç†ã€è®¿é—®ç±»å‹ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰åŠŸèƒ½ï¼Œè¿›è¡Œè¯¦ç»†æ“ä½œï¼Œå¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/72/d6/ttZCxjah_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»è°ƒå‰‚ä¿¡æ¯ç®¡ç†ï¼›åœ¨è°ƒå‰‚ä¿¡æ¯ç®¡ç†é¡µé¢è¾“å…¥æ¥æºã€å­¦æ ¡åã€æ ‡é¢˜ã€é˜…è¯»é‡ã€å‘å¸ƒæ—¶é—´ã€åˆ†ç±»ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œçˆ¬èµ·æ•°æ®æˆ–åˆ é™¤è°ƒå‰‚ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/47/c5/9saXtrx2_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»è®¿é—®ä¿¡æ¯ç®¡ç†ï¼›åœ¨è®¿é—®ä¿¡æ¯ç®¡ç†é¡µé¢è¾“å…¥è®¿é—®ç¼–å·ã€è®¿é—®åœ°åŒºã€è®¿é—®é‡ã€è®¿é—®ç±»å‹ã€æ›´æ–°æ—¶é—´ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œæ–°å¢ã€å¯¼å…¥æˆ–åˆ é™¤è®¿é—®ä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/8a/21/LMmbLrFF_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»è®¿é—®ç±»å‹ç®¡ç†ï¼›åœ¨è®¿é—®ç±»å‹ç®¡ç†é¡µé¢è¾“å…¥è®¿é—®ç±»å‹ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢ã€æ–°å¢æˆ–åˆ é™¤è®¿é—®ç±»å‹ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/f8/23/HmBMELtM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç‚¹å‡»ç³»ç»Ÿç®¡ç†ï¼›åœ¨ç³»ç»Ÿç®¡ç†é¡µé¢å¯¹ç³»ç»Ÿç®€ä»‹ç­‰ä¿¡æ¯ï¼Œè¿›è¡ŒæŸ¥è¯¢æˆ–ä¿®æ”¹ç³»ç»Ÿä¿¡æ¯ç­‰æ“ä½œï¼›å¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/c2/0f/A2QcVAOa_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="_66"></a>æ•°æ®å¯è§†åŒ–åˆ†æå¤§å±å±•ç¤ºå®ç°æ•ˆæœ</h4> 
<p>çº¿ä¸Šæ•™è‚²å¹³å°åˆ†æç³»ç»Ÿå±•ç¤ºå›¾ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/b1/3c/saZPYCjD_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹é¢å±•ç¤ºæ˜¯é˜…è¯»é‡ç»Ÿè®¡ï¼Œå¯¹äºé˜…è¯»é‡ç»Ÿè®¡å¤§æ•°æ®ï¼Œæ•°æ®è·å–ä¹‹åï¼Œå¼€å§‹å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–åˆ†æï¼Œé¦–å…ˆæ˜¯é˜…è¯»é‡ç»Ÿè®¡çš„åŸºæœ¬æƒ…å†µï¼Œå…¶ä¸­æ ¹æ®çˆ¬å–çš„æ•°æ®ä»¥é¥¼çŠ¶å›¾çš„å½¢å¼æ¥å±•ç¤ºï¼Œå¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/78/0c/eFluQFqJ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹é¢å±•ç¤ºæ˜¯å‘å¸ƒæ—¶é—´ç»Ÿè®¡ï¼Œå¯¹äºå‘å¸ƒæ—¶é—´ç»Ÿè®¡å¤§æ•°æ®è·å–ä¹‹åï¼Œå¼€å§‹å¯¹è¿™äº›æ•°æ®è¿›è¡Œå¯è§†åŒ–åˆ†æï¼Œé¦–å…ˆé€šè¿‡é¡µé¢æŸ¥çœ‹å‘å¸ƒæ—¶é—´ç»Ÿè®¡è¯¦æƒ…è¿›è¡Œå±•ç¤ºï¼Œå¦‚å›¾æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/0f/bb/AoocuHJ6_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨åœ°åŒºè®¿é—®é‡ç»Ÿè®¡é¡µé¢ä»¥æ¡å½¢å›¾è¿›è¡Œå±•ç¤ºæ‰€ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/df/d3/lYylTuuT_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹å›¾æ˜¯è®¿é—®ç±»å‹ç»Ÿè®¡ï¼Œé€šè¿‡pythonçˆ¬å–æ¸…æ´—åçš„æ•°æ®ä»¥é¥¼çŠ¶å›¾å½¢å¼å±•ç¤ºå¦‚å›¾æ‰€ç¤ºï¼š<br> <img src="https://images2.imgbox.com/b8/4c/L4whGLQH_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹å›¾æ˜¯è°ƒå‰‚ä¿¡æ¯(é˜…è¯»é‡TOP10)ï¼Œé€šè¿‡pythonçˆ¬å–æ¸…æ´—åçš„æ•°æ®ä»¥ä¿¡æ¯è¡¨å½¢å¼å±•ç¤ºå¦‚å›¾æ‰€ç¤ºï¼š</p> 
<p><img src="https://images2.imgbox.com/48/b6/w6DWb1hs_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_94"></a>å…­.éƒ¨åˆ†åŠŸèƒ½ä»£ç </h3> 
<pre><code class="prism language-python"><span class="token comment"># æ•°æ®çˆ¬å–æ–‡ä»¶</span>

<span class="token keyword">import</span> scrapy
<span class="token keyword">import</span> pymysql
<span class="token keyword">import</span> pymssql
<span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>items <span class="token keyword">import</span> TiaojixinxiItem
<span class="token keyword">import</span> time
<span class="token keyword">import</span> re
<span class="token keyword">import</span> random
<span class="token keyword">import</span> platform
<span class="token keyword">import</span> json
<span class="token keyword">import</span> os
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> emoji

<span class="token comment"># è°ƒå‰‚ä¿¡æ¯</span>
<span class="token keyword">class</span> <span class="token class-name">TiaojixinxiSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'tiaojixinxiSpider'</span>
    spiderUrl <span class="token operator">=</span> <span class="token string">'http://jixun.iqihang.com/schoolkytj/index.html'</span>
    start_urls <span class="token operator">=</span> spiderUrl<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">";"</span><span class="token punctuation">)</span>
    protocol <span class="token operator">=</span> <span class="token string">''</span>
    hostname <span class="token operator">=</span> <span class="token string">''</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        plat <span class="token operator">=</span> platform<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> plat <span class="token operator">==</span> <span class="token string">'linux'</span> <span class="token keyword">or</span> plat <span class="token operator">==</span> <span class="token string">'windows'</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> self<span class="token punctuation">.</span>db_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
            cursor <span class="token operator">=</span> connect<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>table_exists<span class="token punctuation">(</span>cursor<span class="token punctuation">,</span> <span class="token string">'qh73g_tiaojixinxi'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                connect<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>temp_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>

        pageNum <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">for</span> url <span class="token keyword">in</span> self<span class="token punctuation">.</span>start_urls<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'{}'</span> <span class="token keyword">in</span> url<span class="token punctuation">:</span>
                <span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> pageNum<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    next_link <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span>
                    <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>
                        url<span class="token operator">=</span>next_link<span class="token punctuation">,</span>
                        callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse
                    <span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>
                    url<span class="token operator">=</span>url<span class="token punctuation">,</span>
                    callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse
                <span class="token punctuation">)</span>

    <span class="token comment"># åˆ—è¡¨è§£æ</span>
    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        
        _url <span class="token operator">=</span> urlparse<span class="token punctuation">(</span>self<span class="token punctuation">.</span>spiderUrl<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>protocol <span class="token operator">=</span> _url<span class="token punctuation">.</span>scheme
        self<span class="token punctuation">.</span>hostname <span class="token operator">=</span> _url<span class="token punctuation">.</span>netloc
        plat <span class="token operator">=</span> platform<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> plat <span class="token operator">==</span> <span class="token string">'windows_bak'</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
        <span class="token keyword">elif</span> plat <span class="token operator">==</span> <span class="token string">'linux'</span> <span class="token keyword">or</span> plat <span class="token operator">==</span> <span class="token string">'windows'</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> self<span class="token punctuation">.</span>db_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
            cursor <span class="token operator">=</span> connect<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>table_exists<span class="token punctuation">(</span>cursor<span class="token punctuation">,</span> <span class="token string">'qh73g_tiaojixinxi'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                connect<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>temp_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>

        <span class="token builtin">list</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'div.listLeft ul li'</span><span class="token punctuation">)</span>
        
        <span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">:</span>

            fields <span class="token operator">=</span> TiaojixinxiItem<span class="token punctuation">(</span><span class="token punctuation">)</span>



            fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'a::attr(href)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'//'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span>
            <span class="token keyword">elif</span> fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">'://'</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>hostname <span class="token operator">+</span> fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span>
            fields<span class="token punctuation">[</span><span class="token string">"xuexiaoming"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'a span::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            fields<span class="token punctuation">[</span><span class="token string">"biaoti"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'a span:nth-child(2)::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            fields<span class="token punctuation">[</span><span class="token string">"fabushijian"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'a span:nth-child(3)::text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            detailUrlRule <span class="token operator">=</span> item<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token string">'a::attr(href)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>protocol <span class="token keyword">in</span> detailUrlRule<span class="token punctuation">:</span>
                <span class="token keyword">pass</span>
            <span class="token keyword">elif</span> detailUrlRule<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'//'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                detailUrlRule <span class="token operator">=</span> self<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> detailUrlRule
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                detailUrlRule <span class="token operator">=</span> self<span class="token punctuation">.</span>protocol <span class="token operator">+</span> <span class="token string">'://'</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>hostname <span class="token operator">+</span> detailUrlRule
                fields<span class="token punctuation">[</span><span class="token string">"laiyuan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> detailUrlRule

            <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>detailUrlRule<span class="token punctuation">,</span> meta<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'fields'</span><span class="token punctuation">:</span> fields<span class="token punctuation">}</span><span class="token punctuation">,</span>  callback<span class="token operator">=</span>self<span class="token punctuation">.</span>detail_parse<span class="token punctuation">,</span> dont_filter<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>


    <span class="token comment"># è¯¦æƒ…è§£æ</span>
    <span class="token keyword">def</span> <span class="token function">detail_parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        fields <span class="token operator">=</span> response<span class="token punctuation">.</span>meta<span class="token punctuation">[</span><span class="token string">'fields'</span><span class="token punctuation">]</span>

        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div[class="rt time"] p:nth-child(4)::text'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"yueduliang"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div[class="rt time"] p:nth-child(4)::text'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'yueduliang'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'yueduliang'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'yueduliang'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'yueduliang'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"yueduliang"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div[class="rt time"] p:nth-child(4)::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"yueduliang"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div[class="rt time"] p:nth-child(4)::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div[class="lt time"] p:nth-child(2)::text'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"fenlei"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div[class="lt time"] p:nth-child(2)::text'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'fenlei'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'fenlei'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'fenlei'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'fenlei'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"fenlei"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div[class="lt time"] p:nth-child(2)::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"fenlei"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div[class="lt time"] p:nth-child(2)::text'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>


        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token string">'(.*?)'</span> <span class="token keyword">in</span> <span class="token triple-quoted-string string">'''div.art_content'''</span><span class="token punctuation">:</span>
                fields<span class="token punctuation">[</span><span class="token string">"detail"</span><span class="token punctuation">]</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token triple-quoted-string string">r'''div.art_content'''</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token string">'detail'</span> <span class="token operator">!=</span> <span class="token string">'xiangqing'</span> <span class="token keyword">and</span> <span class="token string">'detail'</span> <span class="token operator">!=</span> <span class="token string">'detail'</span> <span class="token keyword">and</span> <span class="token string">'detail'</span> <span class="token operator">!=</span> <span class="token string">'pinglun'</span> <span class="token keyword">and</span> <span class="token string">'detail'</span> <span class="token operator">!=</span> <span class="token string">'zuofa'</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"detail"</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>remove_html<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.art_content'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    fields<span class="token punctuation">[</span><span class="token string">"detail"</span><span class="token punctuation">]</span> <span class="token operator">=</span> emoji<span class="token punctuation">.</span>demojize<span class="token punctuation">(</span>response<span class="token punctuation">.</span>css<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''div.art_content'''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>




        <span class="token keyword">return</span> fields

    <span class="token comment"># å»é™¤å¤šä½™htmlæ ‡ç­¾</span>
    <span class="token keyword">def</span> <span class="token function">remove_html</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> html<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> html <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">''</span>
        pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'&lt;[^&gt;]+&gt;'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
        <span class="token keyword">return</span> pattern<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> html<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># æ•°æ®åº“è¿æ¥</span>
    <span class="token keyword">def</span> <span class="token function">db_connect</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">type</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'TYPE'</span><span class="token punctuation">,</span> <span class="token string">'mysql'</span><span class="token punctuation">)</span>
        host <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HOST'</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span>
        port <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'PORT'</span><span class="token punctuation">,</span> <span class="token number">3306</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        user <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'USER'</span><span class="token punctuation">,</span> <span class="token string">'root'</span><span class="token punctuation">)</span>
        password <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'PASSWORD'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">)</span>

        <span class="token keyword">try</span><span class="token punctuation">:</span>
            database <span class="token operator">=</span> self<span class="token punctuation">.</span>databaseName
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            database <span class="token operator">=</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'DATABASE'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token builtin">type</span> <span class="token operator">==</span> <span class="token string">'mysql'</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span>host<span class="token punctuation">,</span> port<span class="token operator">=</span>port<span class="token punctuation">,</span> db<span class="token operator">=</span>database<span class="token punctuation">,</span> user<span class="token operator">=</span>user<span class="token punctuation">,</span> passwd<span class="token operator">=</span>password<span class="token punctuation">,</span> charset<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            connect <span class="token operator">=</span> pymssql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span>host<span class="token punctuation">,</span> user<span class="token operator">=</span>user<span class="token punctuation">,</span> password<span class="token operator">=</span>password<span class="token punctuation">,</span> database<span class="token operator">=</span>database<span class="token punctuation">)</span>

        <span class="token keyword">return</span> connect

    <span class="token comment"># æ–­è¡¨æ˜¯å¦å­˜åœ¨</span>
    <span class="token keyword">def</span> <span class="token function">table_exists</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cursor<span class="token punctuation">,</span> table_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"show tables;"</span><span class="token punctuation">)</span>
        tables <span class="token operator">=</span> <span class="token punctuation">[</span>cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        table_list <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'(\'.*?\')'</span><span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">(</span>tables<span class="token punctuation">)</span><span class="token punctuation">)</span>
        table_list <span class="token operator">=</span> <span class="token punctuation">[</span>re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">"'"</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span>each<span class="token punctuation">)</span> <span class="token keyword">for</span> each <span class="token keyword">in</span> table_list<span class="token punctuation">]</span>

        <span class="token keyword">if</span> table_name <span class="token keyword">in</span> table_list<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token number">0</span>

    <span class="token comment"># æ•°æ®ç¼“å­˜æº</span>
    <span class="token keyword">def</span> <span class="token function">temp_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        connect <span class="token operator">=</span> self<span class="token punctuation">.</span>db_connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
        cursor <span class="token operator">=</span> connect<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
        sql <span class="token operator">=</span> <span class="token triple-quoted-string string">'''
            insert into tiaojixinxi(
                laiyuan
                ,xuexiaoming
                ,biaoti
                ,fabushijian
                ,yueduliang
                ,fenlei
                ,detail
            )
            select
                laiyuan
                ,xuexiaoming
                ,biaoti
                ,fabushijian
                ,yueduliang
                ,fenlei
                ,detail
            from qh73g_tiaojixinxi
            where(not exists (select
                laiyuan
                ,xuexiaoming
                ,biaoti
                ,fabushijian
                ,yueduliang
                ,fenlei
                ,detail
            from tiaojixinxi where
             tiaojixinxi.laiyuan=qh73g_tiaojixinxi.laiyuan
            and tiaojixinxi.xuexiaoming=qh73g_tiaojixinxi.xuexiaoming
            and tiaojixinxi.biaoti=qh73g_tiaojixinxi.biaoti
            and tiaojixinxi.fabushijian=qh73g_tiaojixinxi.fabushijian
            and tiaojixinxi.yueduliang=qh73g_tiaojixinxi.yueduliang
            and tiaojixinxi.fenlei=qh73g_tiaojixinxi.fenlei
            and tiaojixinxi.detail=qh73g_tiaojixinxi.detail
            ))
            limit {0}
        '''</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
        connect<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

        connect<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


</code></pre> 
<h3><a id="_333"></a>æœ€å</h3> 
<p><a href="https://yidianbishe.blog.csdn.net/article/details/131622291" rel="nofollow">æœ€æ–°è®¡ç®—æœºæ¯•ä¸šè®¾è®¡é€‰é¢˜ç¯‡-é€‰é¢˜æ¨èï¼ˆå€¼å¾—æ”¶è—ï¼‰</a><br> <a href="https://blog.csdn.net/qq_15801219/category_11466472.html">è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ç²¾å“é¡¹ç›®æ¡ˆä¾‹-200å¥—ï¼ˆå€¼å¾—è®¢é˜…ï¼‰</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1123dd18557b111404da60c560e1a024/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Pythonä¸­bs4çš„soup.find()å’Œsoup.find_all()ç”¨æ³•</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2a590be10b858c2c6a82bc82fd2fcff4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">æ•°å­¦å»ºæ¨¡å…¥é—¨ç¬”è®°(2) èšç±»åˆ†æ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>