<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【入门篇】1.4 redis 客户端 之 Lettuce 详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c220befb487f2d2c4d42a2a4286a5509/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【入门篇】1.4 redis 客户端 之 Lettuce 详解">
  <meta property="og:description" content="文章目录 1. 简介1. 什么是Lettuce2. Lettuce与其他Redis客户端的比较3. Lettuce的特性和优势 2. 安装和配置3. 连接池配置1. 什么是连接池2. Lettuce的连接池使用与配置3. 连接池配置项 4. 基本操作1. 如何创建Lettuce连接2. Lettuce的基本操作如增删改查3. Lettuce的事务操作4. Lettuce的管道操作5. Lettuce的发布订阅操作6. Lettuce的脚本执行 5. 错误处理和重试6. Lettuce vs Jedis7. 参考资料 1. 简介 1. 什么是Lettuce Lettuce是一个高级Redis客户端，用于线程安全的同步、异步和反应式访问。它支持高级的Redis特性，如Sentinel、集群、流水线、自动重新连接和redis数据模型等。Lettuce是完全非阻塞的，基于Netty事件驱动的通信层，其方法将返回具有可观察的类型，可在流或异步编程环境中使用。
2. Lettuce与其他Redis客户端的比较 与Jedis这种阻塞的Java Redis客户端相比，Lettuce的主要优势在于其完全非阻塞的IO和线程安全。使用Jedis，在多线程环境中，需要使用连接池以避免线程安全问题，但是对于Lettuce来说，可以避免这种复杂的设置，因为一个Lettuce连接实例（StatefulRedisConnection）就是线程安全的。另一个重要的区别是，Lettuce支持Redis的高级特性，如集群、流水线、发布订阅、和Lua脚本。
3. Lettuce的特性和优势 完全非阻塞IO和线程安全：Lettuce使用Netty进行网络通信，采用了异步和事件驱动的模型。一个Lettuce连接实例（StatefulRedisConnection）是线程安全的，可以在多个线程间共享。支持Redis的高级特性：Lettuce支持Redis的高级特性，如Sentinel、集群、流水线、发布订阅、Lua脚本等。自动重连：Lettuce支持自动重连，当Redis服务器重新启动或断开连接时，Lettuce可以自动恢复连接。可观察的数据类型：Lettuce的所有操作都返回Observable，这可以让在流或异步编程环境中使用。 2. 安装和配置 在Java项目中，可以使用Maven或者Gradle来引入Lettuce的依赖。
使用Maven引入依赖 &lt;dependency&gt; &lt;groupId&gt;io.lettuce&lt;/groupId&gt; &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt; &lt;version&gt;6.1.5.RELEASE&lt;/version&gt; &lt;!-- 请将此版本号替换为所需要的版本 --&gt; &lt;/dependency&gt; 使用Gradle引入依赖 dependencies { implementation &#39;io.lettuce:lettuce-core:6.1.5.RELEASE&#39; } 配置Lettuce非常简单
创建一个新的RedisClient实例，使用redis://password@localhost:6379/0作为Redis服务器的URL。然后我们打开一个新的连接，并通过此连接获取同步命令来执行Redis命令。执行完命令后，我们关闭了连接并关闭了Redis客户端。
import io.lettuce.core.RedisClient; import io.lettuce.core.api.StatefulRedisConnection; import io.lettuce.core.api.sync.RedisCommands; public class Example { public static void main(String[] args) { // 初始化Redis客户端 RedisClient redisClient = RedisClient.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-18T22:30:00+08:00">
    <meta property="article:modified_time" content="2023-11-18T22:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【入门篇】1.4 redis 客户端 之 Lettuce 详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__2" rel="nofollow">1. 简介</a></li><li><ul><li><a href="#1_Lettuce_3" rel="nofollow">1. 什么是Lettuce</a></li><li><a href="#2_LettuceRedis_6" rel="nofollow">2. Lettuce与其他Redis客户端的比较</a></li><li><a href="#3_Lettuce_9" rel="nofollow">3. Lettuce的特性和优势</a></li></ul> 
  </li><li><a href="#2__14" rel="nofollow">2. 安装和配置</a></li><li><a href="#3__65" rel="nofollow">3. 连接池配置</a></li><li><ul><li><a href="#1__67" rel="nofollow">1. 什么是连接池</a></li><li><a href="#2_Lettuce_73" rel="nofollow">2. Lettuce的连接池使用与配置</a></li><li><a href="#3__150" rel="nofollow">3. 连接池配置项</a></li></ul> 
  </li><li><a href="#4__188" rel="nofollow">4. 基本操作</a></li><li><ul><li><a href="#1_Lettuce_189" rel="nofollow">1. 如何创建Lettuce连接</a></li><li><a href="#2_Lettuce_198" rel="nofollow">2. Lettuce的基本操作如增删改查</a></li><li><a href="#3_Lettuce_214" rel="nofollow">3. Lettuce的事务操作</a></li><li><a href="#4_Lettuce_228" rel="nofollow">4. Lettuce的管道操作</a></li><li><a href="#5_Lettuce_240" rel="nofollow">5. Lettuce的发布订阅操作</a></li><li><a href="#6_Lettuce_253" rel="nofollow">6. Lettuce的脚本执行</a></li></ul> 
  </li><li><a href="#5__265" rel="nofollow">5. 错误处理和重试</a></li><li><a href="#6_Lettuce_vs_Jedis_328" rel="nofollow">6. Lettuce vs Jedis</a></li><li><a href="#7__342" rel="nofollow">7. 参考资料</a></li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/04/f3/756w8DUg_o.png" alt="在这里插入图片描述"> 
<p></p> 
<h2><a id="1__2"></a>1. 简介</h2> 
<h3><a id="1_Lettuce_3"></a>1. 什么是Lettuce</h3> 
<p>Lettuce是一个高级Redis客户端，用于线程安全的同步、异步和反应式访问。它支持高级的Redis特性，如Sentinel、集群、流水线、自动重新连接和redis数据模型等。Lettuce是完全非阻塞的，基于Netty事件驱动的通信层，其方法将返回具有可观察的类型，可在流或异步编程环境中使用。</p> 
<h3><a id="2_LettuceRedis_6"></a>2. Lettuce与其他Redis客户端的比较</h3> 
<p>与Jedis这种阻塞的Java Redis客户端相比，Lettuce的主要优势在于其完全非阻塞的IO和线程安全。使用Jedis，在多线程环境中，需要使用连接池以避免线程安全问题，但是对于Lettuce来说，可以避免这种复杂的设置，因为一个Lettuce连接实例（StatefulRedisConnection）就是线程安全的。另一个重要的区别是，Lettuce支持Redis的高级特性，如集群、流水线、发布订阅、和Lua脚本。</p> 
<h3><a id="3_Lettuce_9"></a>3. Lettuce的特性和优势</h3> 
<ul><li>完全非阻塞IO和线程安全：Lettuce使用Netty进行网络通信，采用了异步和事件驱动的模型。一个Lettuce连接实例（StatefulRedisConnection）是线程安全的，可以在多个线程间共享。</li><li>支持Redis的高级特性：Lettuce支持Redis的高级特性，如Sentinel、集群、流水线、发布订阅、Lua脚本等。</li><li>自动重连：Lettuce支持自动重连，当Redis服务器重新启动或断开连接时，Lettuce可以自动恢复连接。</li><li>可观察的数据类型：Lettuce的所有操作都返回Observable，这可以让在流或异步编程环境中使用。</li></ul> 
<h2><a id="2__14"></a>2. 安装和配置</h2> 
<p>在Java项目中，可以使用Maven或者Gradle来引入Lettuce的依赖。</p> 
<ol><li>使用Maven引入依赖</li></ol> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.lettuce<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lettuce-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.1.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 请将此版本号替换为所需要的版本 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ol start="2"><li>使用Gradle引入依赖</li></ol> 
<pre><code class="prism language-groovy">dependencies <span class="token punctuation">{<!-- --></span>
    implementation <span class="token string">'io.lettuce:lettuce-core:6.1.5.RELEASE'</span>  
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>配置Lettuce非常简单<br> 创建一个新的RedisClient实例，使用redis://password@localhost:6379/0作为Redis服务器的URL。然后我们打开一个新的连接，并通过此连接获取同步命令来执行Redis命令。执行完命令后，我们关闭了连接并关闭了Redis客户端。</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">StatefulRedisConnection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sync<span class="token punctuation">.</span></span><span class="token class-name">RedisCommands</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">// 初始化Redis客户端</span>
        <span class="token class-name">RedisClient</span> redisClient <span class="token operator">=</span> <span class="token class-name">RedisClient</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"redis://password@localhost:6379/0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 打开一个新的连接</span>
        <span class="token class-name">StatefulRedisConnection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> connection <span class="token operator">=</span> redisClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取同步命令</span>
        <span class="token class-name">RedisCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 执行命令</span>
        syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> <span class="token string">"Hello, Redis!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 关闭连接</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 关闭Redis客户端</span>
        redisClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="3__65"></a>3. 连接池配置</h2> 
<h3><a id="1__67"></a>1. 什么是连接池</h3> 
<p>连接池是一个预先创建并存储数据库连接的容器，应用程序在需要与数据库交互时，可以从连接池中获取已经建立的连接。使用完毕后，将该连接归还给连接池，而不是关闭它。这种技术可以避免每次需要与数据库交互时都打开新的连接，节省了创建新连接所需的时间。</p> 
<p>Lettuce是一个基于Netty的高级Redis客户端，用于线程安全同步、异步和响应式通信。在Lettuce中，每次发送命令都会获取新的连接，执行完命令后就会关闭。这就是说，Lettuce本身并没有传统意义上的"连接池"。</p> 
<h3><a id="2_Lettuce_73"></a>2. Lettuce的连接池使用与配置</h3> 
<p>虽然在Lettuce本身并未实现连接池，但是在使用Spring Data Redis的情况下，可以通过配置LettuceConnectionFactory来实现连接池的效果。</p> 
<p>以下是一个配置示例：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span></span><span class="token class-name">LettuceClientConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span></span><span class="token class-name">LettucePoolingClientConfiguration</span></span><span class="token punctuation">;</span>

<span class="token comment">// 创建连接池配置</span>
<span class="token class-name">LettuceClientConfiguration</span> clientConfig <span class="token operator">=</span> <span class="token class-name">LettucePoolingClientConfiguration</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">poolConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建服务器配置</span>
<span class="token class-name">RedisStandaloneConfiguration</span> serverConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisStandaloneConfiguration</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用这两种配置创建Lettuce连接工厂</span>
<span class="token class-name">LettuceConnectionFactory</span> lettuceConnectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LettuceConnectionFactory</span><span class="token punctuation">(</span>serverConfig<span class="token punctuation">,</span> clientConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在这个配置中，我们使用<code>LettucePoolingClientConfiguration.builder()</code>来创建一个<code>LettuceClientConfiguration</code>的Builder，并使用<code>poolConfig()</code>方法来设置连接池配置。然后，我们使用这个配置和服务器配置来创建一个新的<code>LettuceConnectionFactory</code>。</p> 
<p>注意，<code>GenericObjectPoolConfig</code>可以让设置一些连接池的参数，例如<code>maxTotal</code>(最大连接数)，<code>maxIdle</code>(最多的空闲连接数)，<code>minIdle</code>(最少的空闲连接数)等等。</p> 
<p>在Lettuce中，使用<code>RedisClient</code>或者<code>RedisClusterClient</code>创建的基本连接实际上是一个连接池。可以通过<code>ClientOptions</code>和<code>ClientResources</code>来定制连接池的行为。</p> 
<p>默认连接池的行为如下：</p> 
<ol><li>默认情况下，连接池大小为8个连接。</li><li>连接尝试失败后，默认重试时间间隔为30秒。</li></ol> 
<p>在创建RedisClient或者RedisClusterClient之前，可以通过ClientResources.Builder来定制连接池的一些参数，如下所示：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span>resource<span class="token punctuation">.</span></span><span class="token class-name">ClientResources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span>resource<span class="token punctuation">.</span></span><span class="token class-name">DefaultClientResources</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">// 创建一个ClientResources来定制连接池参数</span>
        <span class="token class-name">ClientResources</span> clientResources <span class="token operator">=</span> <span class="token class-name">DefaultClientResources</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ioThreadPoolSize</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token comment">// IO线程池大小</span>
            <span class="token punctuation">.</span><span class="token function">computationThreadPoolSize</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token comment">// 计算线程池大小</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用定制的ClientResources来创建RedisClient</span>
        <span class="token class-name">RedisClient</span> redisClient <span class="token operator">=</span> <span class="token class-name">RedisClient</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>clientResources<span class="token punctuation">,</span> <span class="token string">"redis://localhost:6379"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 其他代码...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>对于更复杂的需求，如最大连接数、最小空闲连接数等，Lettuce本身并没有提供对应的配置项。Lettuce的设计理念是每个Redis命令都运行在一个独立的连接上，因此并没有传统意义上的“连接池”。可以根据自己的需求，通过控制并发命令的数量来间接控制连接数量。</p> 
<p>然而，如果正在使用Spring Data Redis，那么在Spring Data Redis中，可以通过<code>LettucePoolingClientConfiguration</code>来配置连接池（包括最大连接数、最小空闲连接数等），如下所示：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span></span><span class="token class-name">LettuceClientConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span></span><span class="token class-name">LettucePoolingClientConfiguration</span></span><span class="token punctuation">;</span>

<span class="token class-name">LettuceClientConfiguration</span> clientConfig <span class="token operator">=</span> <span class="token class-name">LettucePoolingClientConfiguration</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">poolConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">RedisStandaloneConfiguration</span> serverConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisStandaloneConfiguration</span><span class="token punctuation">(</span><span class="token string">"server"</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">LettuceConnectionFactory</span> lettuceConnectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LettuceConnectionFactory</span><span class="token punctuation">(</span>serverConfig<span class="token punctuation">,</span> clientConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上面的代码中，我们使用<code>LettucePoolingClientConfiguration.builder()</code>来创建一个<code>LettuceClientConfiguration</code>的Builder，并使用<code>poolConfig()</code>方法来设置连接池配置。然后，我们使用这个配置和服务器配置来创建一个新的<code>LettuceConnectionFactory</code>。</p> 
<h3><a id="3__150"></a>3. 连接池配置项</h3> 
<p>配置Lettuce的连接池可以通过<code>LettuceConnectionFactory</code>类来实现。下面是配置连接池的一些常用参数：</p> 
<ol><li>最大连接数（MaxConnections）：指定连接池的最大连接数，即同时能够从连接池中获取的最大连接数。可以使用<code>setConnectionPoolConfiguration()</code>方法来设置。</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">GenericObjectPoolConfig</span> poolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
poolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span>maxConnections<span class="token punctuation">)</span><span class="token punctuation">;</span>
lettuceConnectionFactory<span class="token punctuation">.</span><span class="token function">setPoolConfig</span><span class="token punctuation">(</span>poolConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>最小空闲连接数（MinIdleConnections）：指定连接池中的最小空闲连接数，即连接池中保持的最少可用连接数。可以使用<code>setPoolConfig()</code>方法来设置。</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">GenericObjectPoolConfig</span> poolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
poolConfig<span class="token punctuation">.</span><span class="token function">setMinIdle</span><span class="token punctuation">(</span>minIdleConnections<span class="token punctuation">)</span><span class="token punctuation">;</span>
lettuceConnectionFactory<span class="token punctuation">.</span><span class="token function">setPoolConfig</span><span class="token punctuation">(</span>poolConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>连接空闲超时时间（IdleTimeout）：指定连接在空闲状态下的超时时间，超过该时间会被连接池回收。可以使用<code>setTimeout()</code>方法来设置。</li></ol> 
<pre><code class="prism language-java">lettuceConnectionFactory<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>idleTimeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="4"><li>连接重试次数（RetryAttempts）：指定在连接池无法获取到可用连接时的重试次数。可以使用<code>setRetryAttempts()</code>方法来设置。</li></ol> 
<pre><code class="prism language-java">lettuceConnectionFactory<span class="token punctuation">.</span><span class="token function">setRetryAttempts</span><span class="token punctuation">(</span>retryAttempts<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="5"><li>连接重试间隔时间（RetryInterval）：指定连接重试的间隔时间，即每次重试之间的等待时间。可以使用<code>setRetryInterval()</code>方法来设置。</li></ol> 
<pre><code class="prism language-java">lettuceConnectionFactory<span class="token punctuation">.</span><span class="token function">setRetryInterval</span><span class="token punctuation">(</span>retryInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>以上是一些常用的连接池参数的配置方法。根据实际需求，您可以根据需要设置这些参数来优化连接池的性能。</p> 
<h2><a id="4__188"></a>4. 基本操作</h2> 
<h3><a id="1_Lettuce_189"></a>1. 如何创建Lettuce连接</h3> 
<p>你可以使用<code>RedisClient</code>或<code>RedisClusterClient</code>的<code>connect()</code>方法来建立一个连接。例如：</p> 
<pre><code class="prism language-java"><span class="token class-name">RedisClient</span> redisClient <span class="token operator">=</span> <span class="token class-name">RedisClient</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"redis://localhost:6379"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">StatefulRedisConnection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> connection <span class="token operator">=</span> redisClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="2_Lettuce_198"></a>2. Lettuce的基本操作如增删改查</h3> 
<p>可以使用<code>RedisCommands</code>的对应方法进行操作。例如：</p> 
<pre><code class="prism language-java"><span class="token class-name">RedisCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加键值对</span>
syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取键值对</span>
<span class="token class-name">String</span> value <span class="token operator">=</span> syncCommands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除键值对</span>
syncCommands<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改键值对</span>
syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span> <span class="token string">"newValue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="3_Lettuce_214"></a>3. Lettuce的事务操作</h3> 
<p>Lettuce支持事务操作，可以使用multi()和exec()方法进行事务的开始和提交：</p> 
<pre><code class="prism language-java"><span class="token class-name">RedisCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开启事务</span>
syncCommands<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 提交事务</span>
syncCommands<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="4_Lettuce_228"></a>4. Lettuce的管道操作</h3> 
<p>Lettuce支持管道操作，可以使用<code>RedisCommands</code>的<code>autoFlushCommands()</code>方法来关闭自动刷新，然后用<code>flushCommands()</code>方法来手动刷新：</p> 
<pre><code class="prism language-java"><span class="token class-name">RedisCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
syncCommands<span class="token punctuation">.</span><span class="token function">setAutoFlushCommands</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span> <span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
syncCommands<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"key2"</span><span class="token punctuation">,</span> <span class="token string">"value2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
syncCommands<span class="token punctuation">.</span><span class="token function">flushCommands</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="5_Lettuce_240"></a>5. Lettuce的发布订阅操作</h3> 
<p>Lettuce支持Redis的发布订阅模式，例如：</p> 
<pre><code class="prism language-java"><span class="token class-name">RedisCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> syncCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 订阅频道</span>
<span class="token class-name">RedisPubSubCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pubSubCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubSubCommands<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">"channel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 发布消息</span>
syncCommands<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">"channel"</span><span class="token punctuation">,</span> <span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="6_Lettuce_253"></a>6. Lettuce的脚本执行</h3> 
<p>Lettuce支持Lua脚本，可以使用<code>RedisScriptingCommands</code>的<code>eval()</code>或<code>evalsha()</code>方法来执行脚本：</p> 
<pre><code class="prism language-java"><span class="token class-name">RedisScriptingCommands</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> scriptingCommands <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行Lua脚本</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> scriptingCommands<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"return redis.call('get', KEYS[1])"</span><span class="token punctuation">,</span> <span class="token class-name">ScriptOutputType</span><span class="token punctuation">.</span><span class="token constant">VALUE</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">"key"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意：以上代码示例假设你已经有了一个有效的<code>StatefulRedisConnection&lt;String, String&gt;</code>对象。</p> 
<h2><a id="5__265"></a>5. 错误处理和重试</h2> 
<p>Lettuce的错误处理机制和重试策略，如何处理连接错误和命令执行失败等情况。</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">StatefulRedisConnection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisCommandExecutionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisConnectionException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisCommandInterruptedException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>lettuce<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisCommandTimeoutException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisExample</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">RedisClient</span> redisClient <span class="token operator">=</span> <span class="token class-name">RedisClient</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"redis://localhost:6379/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">StatefulRedisConnection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> connection <span class="token operator">=</span> redisClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">String</span> result <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RedisCommandExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Command execution failed: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RedisCommandInterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Command interrupted: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RedisCommandTimeoutException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Command timed out: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RedisConnectionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Failed to connect to Redis: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
            redisClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>1. Lettuce的常见异常</strong></p> 
<ol><li> <p><code>RedisConnectionException</code>：当无法连接到Redis服务器时，或在尝试发送命令时连接已关闭或断开，将抛出此异常。</p> </li><li> <p><code>RedisCommandTimeoutException</code>：当命令的执行超过设定的超时时间时，将抛出此异常。</p> </li><li> <p><code>RedisCommandInterruptedException</code>：当等待命令完成的过程中线程被中断，将抛出此异常。</p> </li><li> <p><code>RedisCommandExecutionException</code>：当Redis命令执行失败时（如键不存在，类型不匹配等），将抛出此异常。</p> </li></ol> 
<p><strong>2. 如何处理这些异常</strong></p> 
<ol><li> <p><code>RedisConnectionException</code>：检查你的Redis服务器是否正在运行，网络连接是否畅通。如果是因为连接已关闭或断开，可以尝试重新连接。</p> </li><li> <p><code>RedisCommandTimeoutException</code>：可以尝试增加命令的超时时间，或者查看Redis服务器是否有性能问题，如CPU使用过高，磁盘IO过高等。</p> </li><li> <p><code>RedisCommandInterruptedException</code>：可以查看线程为何被中断，并尝试解决中断的原因。</p> </li><li> <p><code>RedisCommandExecutionException</code>：检查你的Redis命令是否正确，如键是否存在，类型是否匹配等。如果命令没有问题，则可能是Redis服务器的问题，需要检查服务器的状况。</p> </li></ol> 
<h2><a id="6_Lettuce_vs_Jedis_328"></a>6. Lettuce vs Jedis</h2> 
<table><thead><tr><th>维度/库</th><th>Lettuce</th><th>Jedis</th></tr></thead><tbody><tr><td>单线程/多线程</td><td>Lettuce是基于Netty的连接实例（StatefulRedisConnection），可以在多个线程间并发访问，应该被用作长期存在的线程安全对象。</td><td>Jedis实例不是线程安全的，因此在多线程环境下，你需要每个线程创建一个新的连接实例，或者使用连接池。</td></tr><tr><td>阻塞/非阻塞</td><td>Lettuce支持异步、反应式、同步和非阻塞操作。</td><td>Jedis操作是同步阻塞的，不支持异步和非阻塞操作。</td></tr><tr><td>集群支持</td><td>Lettuce提供了Redis Cluster的原生支持。</td><td>Jedis也支持Redis Cluster，但需要手动处理重定向。</td></tr><tr><td>PUB/SUB模型</td><td>Lettuce支持发布-订阅模型。</td><td>Jedis也支持发布-订阅模型。</td></tr><tr><td>二进制协议</td><td>Lettuce直接使用Netty来处理命令和结果，可以处理任何Redis协议和命令。</td><td>Jedis使用自己的协议处理器，对协议的支持可能不太完整。</td></tr><tr><td>项目活跃度</td><td>Lettuce是目前最活跃的Redis Java客户端项目，一直在持续更新和添加新特性。</td><td>Jedis的活跃度较低，更新和新功能的添加较慢。</td></tr><tr><td>连接池</td><td>Lettuce的连接实例是线程安全的，大多数情况下，你不需要使用连接池。不过，Lettuce也提供了一个可选的内置连接池。</td><td>在多线程环境下，你需要使用Jedis的连接池来管理和复用连接。</td></tr><tr><td>依赖</td><td>Lettuce依赖于Netty。</td><td>Jedis没有外部依赖。</td></tr><tr><td>事务</td><td>Lettuce支持Redis的事务。</td><td>Jedis也支持Redis的事务。</td></tr><tr><td>Sentinel</td><td>Lettuce提供了对Redis Sentinel的原生支持。</td><td>Jedis也支持Redis Sentinel。</td></tr></tbody></table> 
<h2><a id="7__342"></a>7. 参考资料</h2> 
<p><strong>Lettuce</strong></p> 
<ol><li>官方文档：<a href="https://lettuce.io/core/release/reference/" rel="nofollow">Lettuce</a></li><li>GitHub：<a href="https://github.com/lettuce-io/lettuce-core">Lettuce GitHub</a></li><li>深入了解Lettuce：<a href="https://www.baeldung.com/java-redis-lettuce" rel="nofollow">Understanding Lettuce</a></li><li>Lettuce源码分析：<a href="https://www.jianshu.com/p/5f32d2824a7e" rel="nofollow">Lettuce source code analysis</a></li></ol> 
<p><strong>Jedis</strong></p> 
<ol><li>官方文档：<a href="https://github.com/redis/jedis">Jedis</a></li><li>GitHub：<a href="https://github.com/redis/jedis">Jedis GitHub</a></li><li>深入了解Jedis：<a href="https://www.baeldung.com/jedis-java-redis-client-library" rel="nofollow">Understanding Jedis</a></li><li>Jedis源码分析：<a href="https://www.jianshu.com/p/c1a2f7c9185b" rel="nofollow">Jedis source code analysis</a></li></ol> 
<p><strong>Redis</strong></p> 
<ol><li>官方文档：<a href="https://redis.io/documentation" rel="nofollow">Redis</a></li><li>GitHub：<a href="https://github.com/redis/redis">Redis GitHub</a></li><li>Redis命令：<a href="https://redis.io/commands" rel="nofollow">Redis commands</a></li><li>Redis入门教程：<a href="https://www.runoob.com/redis/redis-tutorial.html" rel="nofollow">Redis tutorial</a></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6d79fd46354b152cce31c9e21ae028c6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JavaScript-实现图片的下载(本地图片，远程图片，多个下载)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e6d978d654508abb062e01fe2b4f30f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mac菜单栏无法显示cla*sh*x</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>