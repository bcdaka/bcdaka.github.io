<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot2.7升级项目到Springboot3.1踩坑指南(jdk17/jdk21) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/655756c40ec0e5c14080e4fd492f140a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SpringBoot2.7升级项目到Springboot3.1踩坑指南(jdk17/jdk21)">
  <meta property="og:description" content="文章目录 概要国内顶级开源项目升级情况适配SpringBoot3指南SpringBoot3升级要点1、jdk17变动（如javax）2、redis修改spring.redis.host ===&gt; spring.data.redis.host3、SpringCloudApplication注解被删除4、不兼容升级import java.servlet====&gt;import jakarta.servlet5、swagger集成 弃用springfox---&gt;springdoc不兼容升级6、动态数据源baomidou的dynamic-datasource依赖变动7、Spring Framework 6.0 中删除了对 Apache HttpClient 支持（RestTemplate受影响）8、SpringBoot3.0整合RocketMQ时出现未能加载bean文件9、springboot3默认依赖 elasticsearch从7.x升级到8.x10、springboot 3.2 openFeign加载失败暂未解决 (3.1没问题)11、hutool5.8--&gt;hutool6.0升级要要点12、Centos7使用jdk21报错13、@Async注解报错Invalid return type for async method (only Future and void 概要 由于SpringBoot3.x全面拥抱JDK17,兼容jdk21，jdk17乃是大势所趋。这里是从SpringBoot2.7--&gt;SpringBoot3.1踩坑指南。
提前阅读：jdk8升级JDK17避坑指南（适用于SpringBoot2.3—SpringBoot2.7升级）
国内顶级开源项目升级情况 国内顶级开源项目升级到springBoot3情况，可以作为升级SpringBoot3的风向标。仅对比国内规模使用，落地过万企业的开源项目
参考：国内顶级开源项目：芋道、ruoyi、JeecgBoot、pig、SpringBlade功能对比
评价项/项目名yudao-cloudRuoyi-CloudRuoYi-Cloud-PlusDante CloudpigbladexJeecgBoot官网芋道yudao-cloud 开发指南若依plus-doc.dromara.orgDante Cloudpig4cloudbladex.cn、看云-SpringBlade开发手册JeecgBoot源码收费免费免费免费免费免费 &#43; 收费(3999)免费 &#43; 收费(5000)免费 &#43; 收费(100000)文档收费文档收费免费、视频收费文档免费、视频收费免费免费、授权收费文档收费文档免费、授权收费githubyudao-cloudRuoYiRuoYi-Vue-PlusDante CloudpigSpringBladejeecg-bootgiteeyudao-cloudRuoYiRuoYi-Vue-PlusDante Cloud暂无SpringBladejeecg-bootjdk17分支master-jdk21RuoYi-Cloud-Plus 2.Xdante-cloud 3.1.Xpig jdk17jeecg-boot/springboot3 适配SpringBoot3指南 参考1-微信公众号-这可能是最全的SpringBoot3新版本变化了！、参考2-SpringBoot官网-Spring Boot 3.0 Release Notes、参考3-微信公众号-Swagger升级指南：Swagger2与Swagger3注解差异揭秘、参考4-微信公众号-Dante Cloud 3.2.0.0 发布，首个适配 Spring Boot 3.2版本及经验分享参考5-JeecgBoot 文档中心-升级SpringBoot3 SpringBoot3升级要点 前提说明，建议先完成springboot2.x—&gt;springBoot2.7.x&#43;jdk17的适配，这里升级难度会小很多。参考：文章最前面的文章。
1、jdk17变动（如javax） 详见： jdk8升级JDK17避坑指南（适用于SpringBoot2.3—SpringBoot2.7升级）
模块化对反射的影响==&gt;对系统类的反射增加了限制，需要打开限制增加jvm启动参数add-opens，自己写的类，可以正常使用反射。删除sun.misc 下的包，如sun.misc.BASE64Encoder==&gt;java.util.Base64替换删除JAXB、soup相关==&gt;maven仓库上面有新的maven坐标，引入新依赖即可删除javax.annotation==&gt;maven仓库上面有新的maven坐标，引入依赖即可 2、redis修改spring.redis.host ===&gt; spring.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-02T14:04:32+08:00">
    <meta property="article:modified_time" content="2024-02-02T14:04:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot2.7升级项目到Springboot3.1踩坑指南(jdk17/jdk21)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">概要</a></li><li><a href="#_4" rel="nofollow">国内顶级开源项目升级情况</a></li><li><a href="#SpringBoot3_15" rel="nofollow">适配SpringBoot3指南</a></li><li><a href="#SpringBoot3_21" rel="nofollow">SpringBoot3升级要点</a></li><li><ul><li><a href="#1jdk17javax_23" rel="nofollow">1、jdk17变动（如javax）</a></li><li><a href="#2redisspringredishost__springdataredishost_30" rel="nofollow">2、redis修改spring.redis.host ===&gt; spring.data.redis.host</a></li><li><a href="#3SpringCloudApplication_44" rel="nofollow">3、SpringCloudApplication注解被删除</a></li><li><a href="#4import_javaservletimport_jakartaservlet_46" rel="nofollow">4、不兼容升级import java.servlet====&gt;import jakarta.servlet</a></li><li><a href="#5swagger_springfoxspringdoc_62" rel="nofollow">5、swagger集成 弃用springfox---&gt;springdoc不兼容升级</a></li><li><a href="#6baomidoudynamicdatasource_255" rel="nofollow">6、动态数据源baomidou的dynamic-datasource依赖变动</a></li><li><a href="#7Spring_Framework_60__Apache_HttpClient_RestTemplate_274" rel="nofollow">7、Spring Framework 6.0 中删除了对 Apache HttpClient 支持（RestTemplate受影响）</a></li><li><a href="#8SpringBoot30RocketMQbean_293" rel="nofollow">8、SpringBoot3.0整合RocketMQ时出现未能加载bean文件</a></li><li><a href="#9springboot3_elasticsearch7x8x_314" rel="nofollow">9、springboot3默认依赖 elasticsearch从7.x升级到8.x</a></li><li><a href="#10springboot_32_openFeign_31_321" rel="nofollow">10、springboot 3.2 openFeign加载失败暂未解决 (3.1没问题)</a></li><li><a href="#11hutool58hutool60_327" rel="nofollow">11、hutool5.8--&gt;hutool6.0升级要要点</a></li><li><a href="#12Centos7jdk21_332" rel="nofollow">12、Centos7使用jdk21报错</a></li><li><a href="#13AsyncInvalid_return_type_for_async_method_only_Future_and_void_346" rel="nofollow">13、@Async注解报错Invalid return type for async method (only Future and void</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>概要</h3> 
<p><code>由于SpringBoot3.x全面拥抱JDK17,兼容jdk21，jdk17乃是大势所趋。这里是从SpringBoot2.7--&gt;SpringBoot3.1踩坑指南。</code><br> 提前阅读：<a href="https://blog.csdn.net/ab601026460/article/details/135242324">jdk8升级JDK17避坑指南（适用于SpringBoot2.3—SpringBoot2.7升级）</a></p> 
<h3><a id="_4"></a>国内顶级开源项目升级情况</h3> 
<p><code> 国内顶级开源项目升级到springBoot3情况，可以作为升级SpringBoot3的风向标。仅对比国内规模使用，落地过万企业的开源项目</code><br> 参考：<a href="https://www.yuque.com/xiatian-bsgny/lm0ec1/wqf8mn#qam2" rel="nofollow">国内顶级开源项目：芋道、ruoyi、JeecgBoot、pig、SpringBlade功能对比</a></p> 
<table><thead><tr><th>评价项/项目名</th><th>yudao-cloud</th><th>Ruoyi-Cloud</th><th>RuoYi-Cloud-Plus</th><th>Dante Cloud</th><th>pig</th><th>bladex</th><th>JeecgBoot</th></tr></thead><tbody><tr><td>官网</td><td><a href="https://cloud.iocoder.cn/" rel="nofollow">芋道yudao-cloud 开发指南</a></td><td><a href="https://ruoyi.vip/" rel="nofollow">若依</a></td><td><a href="https://plus-doc.dromara.org" rel="nofollow">plus-doc.dromara.org</a></td><td><a href="https://www.herodotus.cn/" rel="nofollow">Dante Cloud</a></td><td><a href="https://www.yuque.com/pig4cloud/pig" rel="nofollow">pig4cloud</a></td><td><a href="https://bladex.cn/#/" rel="nofollow">bladex.cn</a>、<a href="https://www.kancloud.cn/smallchill/blade" rel="nofollow">看云-SpringBlade开发手册</a></td><td><a href="https://www.jeecg.com/" rel="nofollow">JeecgBoot</a></td></tr><tr><td>源码收费</td><td>免费</td><td>免费</td><td>免费</td><td>免费</td><td>免费 + 收费(3999)</td><td>免费 + 收费(5000)</td><td>免费 + 收费(100000)</td></tr><tr><td>文档收费</td><td>文档收费</td><td>免费、视频收费</td><td>文档免费、视频收费</td><td>免费</td><td>免费、授权收费</td><td>文档收费</td><td>文档免费、授权收费</td></tr><tr><td>github</td><td><a href="https://github.com/YunaiV/yudao-cloud">yudao-cloud</a></td><td><a href="https://github.com/yangzongzhuan/RuoYi">RuoYi</a></td><td><a href="https://github.com/dromara/RuoYi-Vue-Plus">RuoYi-Vue-Plus</a></td><td><a href="https://github.com/dromara/dante-cloud">Dante Cloud</a></td><td><a href="https://gitee.com/log4j/pig/tree/jdk17" rel="nofollow">pig</a></td><td><a href="https://github.com/chillzhuang/SpringBlade">SpringBlade</a></td><td><a href="https://github.com/jeecgboot/jeecg-boot">jeecg-boot</a></td></tr><tr><td>gitee</td><td><a href="https://gitee.com/zhijiantianya/yudao-cloud" rel="nofollow">yudao-cloud</a></td><td><a href="https://gitee.com/y_project/RuoYi-Cloud" rel="nofollow">RuoYi</a></td><td><a href="https://gitee.com/dromara/RuoYi-Vue-Plus" rel="nofollow">RuoYi-Vue-Plus</a></td><td><a href="https://gitee.com/dromara/dante-cloud" rel="nofollow">Dante Cloud</a></td><td>暂无</td><td><a href="https://gitee.com/smallc/SpringBlade" rel="nofollow">SpringBlade</a></td><td><a href="https://gitee.com/jeecg/jeecg-boot" rel="nofollow">jeecg-boot</a></td></tr><tr><td>jdk17分支</td><td><a href="https://gitee.com/zhijiantianya/yudao-cloud/tree/master-jdk21" rel="nofollow">master-jdk21</a></td><td></td><td><a href="https://gitee.com/dromara/RuoYi-Cloud-Plus/tree/2.X/" rel="nofollow">RuoYi-Cloud-Plus 2.X</a></td><td><a href="https://gitee.com/dromara/dante-cloud/tree/3.1.X" rel="nofollow">dante-cloud 3.1.X</a></td><td><a href="https://gitee.com/log4j/pig/commits/jdk17" rel="nofollow">pig jdk17</a></td><td></td><td><a href="https://gitee.com/jeecg/jeecg-boot/tree/springboot3" rel="nofollow">jeecg-boot/springboot3</a></td></tr></tbody></table> 
<h3><a id="SpringBoot3_15"></a>适配SpringBoot3指南</h3> 
<ul><li>参考1-<a href="https://mp.weixin.qq.com/s/SJaXci_WS6i1TFz_FRtMMg" rel="nofollow">微信公众号-这可能是最全的SpringBoot3新版本变化了！</a>、</li><li>参考2-<a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes">SpringBoot官网-Spring Boot 3.0 Release Notes</a>、</li><li>参考3-<a href="https://mp.weixin.qq.com/s/rT0z1mRKk3CCZsmLZE0ylQ" rel="nofollow">微信公众号-Swagger升级指南：Swagger2与Swagger3注解差异揭秘</a>、</li><li>参考4-<a href="https://mp.weixin.qq.com/s/AEUpVbr4dfLHdpVuTu03FQ" rel="nofollow">微信公众号-Dante Cloud 3.2.0.0 发布，首个适配 Spring Boot 3.2版本及经验分享</a></li><li>参考5-<a href="https://help.jeecg.com/java/upgrade/springboot3.html" rel="nofollow">JeecgBoot 文档中心-升级SpringBoot3</a></li></ul> 
<h3><a id="SpringBoot3_21"></a>SpringBoot3升级要点</h3> 
<blockquote> 
 <p>前提说明，建议先完成springboot2.x—&gt;springBoot2.7.x+jdk17的适配，这里升级难度会小很多。参考：文章最前面的文章。</p> 
</blockquote> 
<h4><a id="1jdk17javax_23"></a>1、jdk17变动（如javax）</h4> 
<p>详见： <a href="https://blog.csdn.net/ab601026460/article/details/135242324">jdk8升级JDK17避坑指南（适用于SpringBoot2.3—SpringBoot2.7升级）</a></p> 
<ul><li><strong>模块化对反射的影响</strong>==&gt;对系统类的反射增加了限制，需要打开限制增加jvm启动参数<code>add-opens</code>，自己写的类，可以正常使用反射。</li><li><strong>删除sun.misc 下的包</strong>，如sun.misc.BASE64Encoder==&gt;<code>java.util.Base64</code>替换</li><li><strong>删除JAXB、soup相关</strong>==&gt;maven仓库上面有新的maven坐标，<code>引入新依赖即可</code></li><li><strong>删除javax.annotation</strong>==&gt;maven仓库上面有新的maven坐标，<code>引入依赖即可</code></li></ul> 
<h4><a id="2redisspringredishost__springdataredishost_30"></a>2、redis修改spring.redis.host ===&gt; spring.data.redis.host</h4> 
<blockquote> 
 <p>redis配置命令空间进行了修改，需要注意。<br> 参考：<a href="https://zhuanlan.zhihu.com/p/644414265" rel="nofollow">Spring Boot3.0(九)：整合Redis</a></p> 
</blockquote> 
<pre><code class="prism language-yaml"><span class="token punctuation">---</span> <span class="token comment"># redis 配置,注意springboot 3.x 有 data，2.x 没有 data</span>
<span class="token comment">## spring.redis.host ===&gt; spring.data.redis.host</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">data</span><span class="token punctuation">:</span>
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 10.16.58.180
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> Admin123
      <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">6</span>      
</code></pre> 
<h4><a id="3SpringCloudApplication_44"></a>3、SpringCloudApplication注解被删除</h4> 
<blockquote> 
 <p>使用@SpringBootApplication替换</p> 
</blockquote> 
<h4><a id="4import_javaservletimport_jakartaservlet_46"></a>4、不兼容升级import java.servlet====&gt;import jakarta.servlet</h4> 
<blockquote> 
 <p>servlet捐献给社区，为了避免版权问题，修改了包名，导致不兼容.</p> 
</blockquote> 
<ul><li>javax.servlet===&gt; jakarta.servlet</li><li>javax.validation ===&gt; jakarta.validation</li><li>javax.annotation ===&gt; jakarta.annotation</li><li>javax.mail ===&gt; jakarta.mail</li><li>javax.websocket ==&gt; jakarta.websocket</li></ul> 
<pre><code class="prism language-xml"> <span class="token comment">&lt;!-- Java Servlet jakarta --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>jakarta.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jakarta.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>  
</code></pre> 
<h4><a id="5swagger_springfoxspringdoc_62"></a>5、swagger集成 弃用springfox—&gt;springdoc不兼容升级</h4> 
<blockquote> 
 <p>springfox不维护了，springboot3使用springdoc,并启用openapi3.0,相关注解进行了变化。</p> 
</blockquote> 
<p>参考：<a href="https://zhuanlan.zhihu.com/p/610358206" rel="nofollow">spring boot 3 整合 swagger3</a>、<br> 参考：<a href="https://mp.weixin.qq.com/s/rT0z1mRKk3CCZsmLZE0ylQ" rel="nofollow">Swagger升级指南：Swagger2与Swagger3注解差异揭秘</a>、<br> 参考：<a href="https://blog.csdn.net/sxlesq/article/details/131831719">OpenApi3.0注解说明</a></p> 
<table><thead><tr><th>注解作用</th><th>swagger2</th><th>swagger2示例</th><th>swagger3-openApi3.0</th><th>swagger示例</th><th>替换</th></tr></thead><tbody><tr><td>用于Controller</td><td>@Api</td><td><code>@Api(value = "/app/child/v2", tags = "儿童档案")</code></td><td>@Tag</td><td><code>@Tag(name = "/app/child/v2", description = "儿童档案")</code></td><td><code>@Api(value = "User Management", description = "Operations pertaining to users")</code>—&gt;<code>@Tag(name = "User Management", description = "Operations pertaining to users")</code>、<code>@Api(tags = "小程序端Core Controller")</code>—&gt;<code>@Tag(description = "小程序端Core Controller")</code></td></tr><tr><td>用于Controller接口</td><td>@ApiOperation</td><td><code>@ApiOperation(value = "新增儿童档案绑定监护人", httpMethod = "POST", produces = "application/json")</code></td><td>@Operation</td><td><code> @Operation(summary = "新增儿童档案绑定监护人", method = "POST")</code></td><td><code>@ApiOperation(value = "根据儿童证件号码查询儿童档案", httpMethod = "POST", produces = "application/json")</code>–&gt;<code>@Operation(summary = "根据儿童证件号码查询儿童档案", method = "POST")</code></td></tr><tr><td>用于Controller接口参数注解</td><td>@ApiParam或@ApiImplicitParam</td><td><code>@ApiParam("预约id,字段名:personApptId,默认无")</code></td><td>@Parameter</td><td><code>@Parameter(description = "预约id,字段名:personApptId,默认无", required = true) </code></td><td><code>@ApiParam(value = "追溯码 形如：81900920216939751445,max=32", defaultValue = "81900920216939751445")</code>—&gt;<code>@Parameter(description = "追溯码 形如：81900920216939751445,max=32", example = "81900920216939751445")</code></td></tr><tr><td>参数隐藏</td><td>@ApiIgnore</td><td><code>@ApiIgnore HttpServletRequest request</code></td><td>/</td><td>/</td><td>/</td></tr><tr><td>实体字段</td><td>@ApiModelProperty</td><td><code>@ApiModelProperty("接种人员-姓名（冗）,max=32")</code>、<code>@ApiModelProperty(notes = "The database generated user ID")</code></td><td>@Schema</td><td><code>@Schema(description = "主键 自增")</code></td><td><code>@ApiModelProperty(value</code>—&gt;<code>@Schema(description</code>、<code>@ApiModelProperty(hidden = true)</code>–&gt;<code>@Schema(hidden = true</code>、<code>@ApiModelProperty(value = "更新人员", example = "张三",hidden = true)</code>—&gt;<code>@Schema(description = "更新人员", example = "张三",hidden = true)</code></td></tr><tr><td>实体类</td><td>@ApiModel</td><td><code>@ApiModel("接种人员-姓名（冗）,max=32")</code>、<code>@ApiModelProperty(notes = "The database generated user ID")</code></td><td>@Schema</td><td><code>@Schema (description = "根据儿童证件号码查询儿童档案")")</code></td><td><code>@ApiModel(value</code>—&gt;<code>@Schema(description</code>、<code>@ApiModel(description </code>—&gt;<code>@Schema(description</code></td></tr></tbody></table> 
<pre><code class="prism language-java"><span class="token comment">// idea正则替换01</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span>tags<span class="token punctuation">.</span></span><span class="token class-name">Tag</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Api</span>\<span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> hidden <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$3"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@Api</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> tags <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@Api</span>\<span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@Api</span>\<span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token comment">// idea正则替换02</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Operation</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@ApiOperation</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> position <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description<span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiOperation</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> httpMethod <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiOperation</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiOperation</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> httpMethod <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiOperation</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiOperation</span>\<span class="token punctuation">(</span><span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token comment">// idea正则替换03</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span>media<span class="token punctuation">.</span></span><span class="token class-name">Schema</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@ApiModel</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModel</span>\<span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token comment">// idea正则替换04</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
''<span class="token punctuation">;</span>
<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> required<span class="token operator">=</span> $<span class="token number">3</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> hidden <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> hidden <span class="token operator">=</span> $<span class="token number">3</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> hidden <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> hidden <span class="token operator">=</span> $<span class="token number">2</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>hidden <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>hidden <span class="token operator">=</span> $<span class="token number">1</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span><span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiModelProperty</span>\<span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token comment">// idea正则替换05</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Parameter</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@ApiParam</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">"$3"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiParam</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiParam</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiParam</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiParam</span>\<span class="token punctuation">(</span><span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">)</span>

<span class="token comment">// idea正则替换06</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiIgnore</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Hidden</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@ApiIgnore</span>
<span class="token annotation punctuation">@Hidden</span>

<span class="token annotation punctuation">@ApiIgnore</span> <span class="token class-name">HttpServletResponse</span> response
<span class="token annotation punctuation">@ApiIgnore</span> <span class="token class-name">HttpServletRequest</span> request

<span class="token comment">// idea正则替换07</span>
<span class="token annotation punctuation">@ApiImplicitParams</span>
<span class="token annotation punctuation">@Parameters</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"query"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> $<span class="token number">3</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"$4"</span><span class="token punctuation">,</span> in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">QUERY</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"query"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">QUERY</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> dataType <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\"<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> schema <span class="token operator">=</span> <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">"$3"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> required <span class="token operator">=</span> $<span class="token number">4</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> dataType <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> schema <span class="token operator">=</span> <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token string">"$3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"form"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">QUERY</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span><span class="token punctuation">,</span> dataType <span class="token operator">=</span> <span class="token string">"__file"</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"form"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"$1"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"__file"</span><span class="token punctuation">,</span> in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">QUERY</span><span class="token punctuation">)</span>

<span class="token annotation punctuation">@ApiImplicitParam</span>\<span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"([^\"]+)"</span>\<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"$2"</span><span class="token punctuation">)</span>
</code></pre> 
<p>swaggr2实例</p> 
<pre><code class="prism language-java"><span class="token comment">// Swagger2 实体类</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"根据儿童证件号码查询儿童档案"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChildGetByChildNoVo</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"身份证"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> childNo<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> personId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Swagger2 Controller</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/app/child/v2"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/app/child/v2"</span><span class="token punctuation">,</span> tags <span class="token operator">=</span> <span class="token string">"儿童档案"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ChildController</span> <span class="token keyword">extends</span> <span class="token class-name">BaseController</span> 

  <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"根据监护人ID分页查询被监护人"</span><span class="token punctuation">,</span> httpMethod <span class="token operator">=</span> <span class="token string">"GET"</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getByPersonId"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"预约id"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">getByPersonId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pageNum"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                                  <span class="token annotation punctuation">@ApiParam</span><span class="token punctuation">(</span><span class="token string">"预约id,字段名:personApptId,默认无"</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"personApptId"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> personApptIdpersonId<span class="token punctuation">,</span>
                                   <span class="token annotation punctuation">@ApiIgnore</span> <span class="token class-name">HttpServletRequest</span> request
                                   <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApptChildRelationship</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pageNum<span class="token punctuation">,</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ChildApiVo</span><span class="token punctuation">&gt;</span></span> pageData <span class="token operator">=</span> childService<span class="token punctuation">.</span><span class="token function">getByPersonId</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span>personId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TableDataInfo</span> rspData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TableDataInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rspData<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rspData<span class="token punctuation">.</span><span class="token function">setRows</span><span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rspData<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token string">"查询成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rspData<span class="token punctuation">.</span><span class="token function">setTotal</span><span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">AjaxResult</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>rspData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
 <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/getCode"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"获取预约码"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">"POST"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"预约id"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"personId"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"用户id"</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"apptId"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"预约id"</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"collectLocationId"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"采样点id"</span><span class="token punctuation">,</span> paramType <span class="token operator">=</span> <span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token class-name">Long</span> personId<span class="token punctuation">,</span> <span class="token class-name">Long</span> apptId<span class="token punctuation">,</span> <span class="token class-name">Long</span> collectLocationId<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> vficPersonService<span class="token punctuation">.</span><span class="token function">generateApptQrCode</span><span class="token punctuation">(</span>apptId<span class="token punctuation">,</span> personId<span class="token punctuation">,</span> collectLocationId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>swagger3示例</p> 
<pre><code class="prism language-java">
</code></pre> 
<h4><a id="6baomidoudynamicdatasource_255"></a>6、动态数据源baomidou的dynamic-datasource依赖变动</h4> 
<blockquote> 
 <p>经过测试，该条也可以不升级<br> 参考1：<a href="https://www.baomidou.com/pages/a61e1b/#dynamic-datasource" rel="nofollow">baomidou dynamic-datasource</a>、<br> 参考2：<a href="https://www.kancloud.cn/tracy5546/dynamic-datasource" rel="nofollow">kancloud tracy5546 dynamic-datasource</a></p> 
</blockquote> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- spring-boot 1.5.x 2.x.x 3.xx --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dynamic-datasource-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- spring-boot 3.x.x --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dynamic-datasource-spring-boot3-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="7Spring_Framework_60__Apache_HttpClient_RestTemplate_274"></a>7、Spring Framework 6.0 中删除了对 Apache HttpClient 支持（RestTemplate受影响）</h4> 
<blockquote> 
 <p>升级到SpringBoot3发现依赖提示缺少：rg.apache.httpcomponents:httpclient，一些三方库可能依赖httpclient,就需要自己手工引入依赖。三方包如：spring-data-elasticsearch5、nacos-client 1.4.6、weixin-java-pay 4.0.0、htmlunit 3.6</p> 
</blockquote> 
<p>参考： <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#apache-httpclient-in-resttemplate">Spring-Boot-3.0-Migration-Guide#apache-httpclient-in-resttemplate</a>、</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- spring framwork 5.x中默认引入apcache httpclient4，在spring framwork6.x中如果需要要手工引入 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.5.14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- spring framwork 6.x中的apcache httpclient5 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.httpcomponents.client5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>httpclient5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="8SpringBoot30RocketMQbean_293"></a>8、SpringBoot3.0整合RocketMQ时出现未能加载bean文件</h4> 
<blockquote> 
 <p>springboot2.x使用rocketmq没有问题，springboot3出现，required a bean of type ‘org.apache.rocketmq.spring.core.RocketMQTemplate’ that could not be found.</p> 
</blockquote> 
<p>参考1：<a href="https://blog.csdn.net/qq_47070121/article/details/131462589">SpringBoot3.0整合RocketMQ时出现未能加载bean文件</a><br> 参考2：<a href="https://blog.csdn.net/zhenweiyi/article/details/130722046">Spring boot 3.0整合RocketMQ及不兼容的问题</a></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.rocketmq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>rocketmq-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--    目前也没有新版本，roketmq2.2.3没有适配springboot3--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-java"><span class="token comment">// 定义个配置类，引入也可以：</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token class-name">RocketMQAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RocketMQConfig</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="9springboot3_elasticsearch7x8x_314"></a>9、springboot3默认依赖 elasticsearch从7.x升级到8.x</h4> 
<ul><li>配置文件地址修改：<code>spring.elasticsearch.rest.uris</code>==&gt;<code>spring.elasticsearch.uris</code></li><li>springboot3要求elasticsearch必须升级到8.x，不能使用7.x，否则报错：<code>缺失响应头X-Elastic-Product(Elasticsearch)</code></li><li>废弃：high client客户端</li><li>要求ElasticSearch必须8.x</li></ul> 
<h4><a id="10springboot_32_openFeign_31_321"></a>10、springboot 3.2 openFeign加载失败暂未解决 (3.1没问题)</h4> 
<blockquote> 
 <p>启动失败 feign导致 not annotated with HTTP method type (ex. GET, POST)</p> 
</blockquote> 
<ul><li>https://blog.csdn.net/nailsoul/article/details/105223740</li><li>https://www.jianshu.com/p/11b4cbc8951a</li><li>https://juejin.cn/post/7112414513550491656</li></ul> 
<h4><a id="11hutool58hutool60_327"></a>11、hutool5.8–&gt;hutool6.0升级要要点</h4> 
<blockquote> 
 <p>说明常见类，如果找不到，请看源码注释，注释上面写的有，或者全局搜索即可，无需多说。</p> 
</blockquote> 
<ul><li><code>ServletUtil</code>–&gt;<code>JakartaServletUtil</code></li><li>hutool类变化说明: <a href="https://gitee.com/dromara/hutool/issues/I79493" rel="nofollow">【6.0.0】升级到6.0不兼容情况汇总，大家一起来统计维护呀</a>、</li><li>国密相关SmUtil，使用6.0x问题，参加：<a href="https://gitee.com/dromara/hutool/issues/I8VZQ2" rel="nofollow">hutool 5.x 和 hutool 6.x crypto 国密SMUtil 模块放在一个工程中会产生冲突</a></li></ul> 
<h4><a id="12Centos7jdk21_332"></a>12、Centos7使用jdk21报错</h4> 
<blockquote> 
 <p>java: /lib64/libc.so.6: version `GLIBC_2.14’ not found (required by /usr/local/java/jdk-21.0.2+13/bin/…/lib/libjli.so)</p> 
</blockquote> 
<blockquote> 
 <p>原因，Centos6缺失GLIBC_2.14，报错缺失2.14、2.15解决办法相同。<br> 只需要安装最高版本，自动安装低版本，比如：安装2.17.自动安装2.14</p> 
</blockquote> 
<p>参考1：<a href="https://cloud.tencent.com/developer/article/1772381" rel="nofollow">version `GLIBC_2.14’ not found 问题解决</a></p> 
<p>参考2：<a href="https://blog.csdn.net/huaishuming/article/details/102900254">解决 /lib64/libc.so.6: version `GLIBC_2.15’ not found 问题</a></p> 
<p>最新已经是<code>2.38</code>了，可以直接安装：<code>wget --no-check-certificate https://ftp.gnu.org/gnu/glibc/glibc-2.38.tar.gz</code>，安装前确保安装的有<code>gcc</code>。</p> 
<ul><li>Centos6 推荐2.17</li></ul> 
<h4><a id="13AsyncInvalid_return_type_for_async_method_only_Future_and_void_346"></a>13、@Async注解报错Invalid return type for async method (only Future and void</h4> 
<blockquote> 
 <p>分析原因，springboot2.7一切正常，升级到springboot3.x@Async标记的方法，只能返还void或者Future(@Async+Future+AsyncResult返回值)</p> 
</blockquote> 
<p>参考1：<a href="https://www.saoniuhuo.com/question/detail-2326022.html" rel="nofollow">spring 升级到JDK 17和Sping Boot 3后，异步仅接受Future和void作为返回类型</a><br> 参考2：<a href="https://stackoverflow.com/questions/74806434/async-only-accepted-future-and-void-as-return-type-after-upgrade-to-jdk-17-and-s" rel="nofollow">Async only accepted Future and void as return type after upgrade to JDK 17 and Spring Boot 3</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cde8bb890aa61b44d686cdce45b8c824/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">十分钟掌握前端获取实时数据的三种主流方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/415d55d9580c023950357090f4e7fc83/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL中如何将字符串替换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>