<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>实现对接大模型的AI对话微信小程序 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2b6bd6a4a372858cdcb3db334770b1ec/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="实现对接大模型的AI对话微信小程序">
  <meta property="og:description" content="AI时代每个人都可以成为开发者，今天给大家分享一下怎么写一个微信小程序，后台接入AI大模型，实现AI对话。
1. 注册微信小程序
链接在此
mp.weixin.qq.com/cgi-bin/wxhttp://mp.weixin.qq.com/cgi-bin/wx
需要一个从来没有注册过的邮箱绑定
登录进去后，直达开发工具，下载微信开发者工具，并安装稳定版即可
然后来到开发设置页，记下你的AppID
2.导入小程序源码
开发者工具只是一个IDE，你可以自己从零开始写你的程序，或者简单点站在别人的肩膀上二次开发，我这里从Github上下载了一个源代码，你可以直接在Github上搜 小程序模版，然后找个合适的直接下载。如果想要我二次开发好的源码可以私信我。
导入程序后，需要把下面的AppID换成刚才小程序页面上你自己的：
然后记得配置一下代理，选择不使用任何代理
3. 配置后台服务器
这里你可以自己搭服务器，也可以用云服务器，但是都需要买一个域名才可以。为了省事，我用了阿里云的函数计算，可以直接用一个现成分配给你的域名，而且配置效率极高，基本上半个小时就可以完成。具体可以参考下面教程，而且现在还有免费试用。
基于通义千问SDK部署函数实现AI对话_函数计算(FC)-阿里云帮助中心通义千问是阿里云自主研发的大语言模型，能够在用户自然语言输入的基础上，通过自然语言理解和语义分析，在不同领域、任务内为用户提供服务和帮助。本文介绍如何通过函数计算实现基于通义千问的AI对话。https://help.aliyun.com/zh/functioncompute/use-cases/use-function-compute-to-realize-ai-dialogue?source=5176.11533457&amp;userCode=lcpt2xut
进入阿里云函数计算页面，选择创建Web函数，记住选预装Python，其他选项按需配置
我用Python只写了个30行的代码，包含了Flask和Openai的库，不过我这里用的是Deepseek，但是接口跟Openai是一套
message = request.json.get(&#39;msg&#39;) client = OpenAI(api_key=&#34;你的APIkey&#34;, base_url=&#34;https://api.deepseek.com&#34;) response = client.chat.completions.create( model=&#34;deepseek-chat&#34;, messages=[ {&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: &#34;你是一个AI助手&#34;}, {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: message}, ], stream=False ) completion = response.choices[0].message.content res = { &#34;resmsg&#34;:completion, &#34;code&#34;:200 } return res 代码写好后，选择部署代码
部署好后，来到配置，记住你的公网访问地址
4.运行测试
好了，我们再回到小程序页面，把上面的公网访问域名填入到下面服务器域名里
准备就绪，回到开发者工具，在index.js里apiurl的地方也填入上面的服务器地址，运行一下吧
有什么需要交流的可以加我的星球哦
https://t.zsxq.com/CzLTihttps://t.zsxq.com/CzLTi">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-31T14:34:27+08:00">
    <meta property="article:modified_time" content="2024-05-31T14:34:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">实现对接大模型的AI对话微信小程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>AI时代每个人都可以成为开发者，今天给大家分享一下怎么写一个微信小程序，后台接入AI大模型，实现AI对话。</p> 
<h4></h4> 
<p>1. 注册微信小程序</p> 
<p>链接在此</p> 
<p><a class="link-info has-card" href="http://mp.weixin.qq.com/cgi-bin/wx" rel="nofollow" title="mp.weixin.qq.com/cgi-bin/wx"><span class="link-card-box"><span class="link-title">mp.weixin.qq.com/cgi-bin/wx</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ee/7c/V4raCoVh_o.png" alt="icon-default.png?t=N7T8">http://mp.weixin.qq.com/cgi-bin/wx</span></span></a></p> 
<p>需要一个从来没有注册过的邮箱绑定</p> 
<p></p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/83/ca/Ha90344c_o.png" width="1200"></p> 
<p>登录进去后，直达开发工具，下载微信开发者工具，并安装稳定版即可</p> 
<p></p> 
<p class="img-center"><img alt="" height="916" src="https://images2.imgbox.com/58/af/Y9eRB2vP_o.png" width="1200"></p> 
<p>然后来到开发设置页，记下你的AppID</p> 
<p></p> 
<p class="img-center"><img alt="" height="1080" src="https://images2.imgbox.com/ff/4b/Pj7K25G3_o.png" width="1200"></p> 
<h4></h4> 
<p>2.导入小程序源码</p> 
<p>开发者工具只是一个IDE，你可以自己从零开始写你的程序，或者简单点站在别人的肩膀上二次开发，我这里从Github上下载了一个源代码，你可以直接在Github上搜 小程序模版，然后找个合适的直接下载。如果想要我二次开发好的源码可以私信我。</p> 
<p>导入程序后，需要把下面的AppID换成刚才小程序页面上你自己的：</p> 
<p></p> 
<p class="img-center"><img alt="" height="870" src="https://images2.imgbox.com/f5/50/qsDG8rHM_o.png" width="1156"></p> 
<p>然后记得配置一下代理，选择不使用任何代理</p> 
<p></p> 
<p class="img-center"><img alt="" height="1017" src="https://images2.imgbox.com/a9/df/alfqnVht_o.png" width="1093"></p> 
<p>3. 配置后台服务器</p> 
<p>这里你可以自己搭服务器，也可以用云服务器，但是都需要买一个域名才可以。为了省事，我用了阿里云的函数计算，可以直接用一个现成分配给你的域名，而且配置效率极高，基本上半个小时就可以完成。具体可以参考下面教程，而且现在还有免费试用。</p> 
<p></p> 
<p><a class="has-card" href="https://help.aliyun.com/zh/functioncompute/use-cases/use-function-compute-to-realize-ai-dialogue?source=5176.11533457&amp;userCode=lcpt2xut" rel="nofollow" title="基于通义千问SDK部署函数实现AI对话_函数计算(FC)-阿里云帮助中心"><span class="link-card-box"><span class="link-title">基于通义千问SDK部署函数实现AI对话_函数计算(FC)-阿里云帮助中心</span><span class="link-desc">通义千问是阿里云自主研发的大语言模型，能够在用户自然语言输入的基础上，通过自然语言理解和语义分析，在不同领域、任务内为用户提供服务和帮助。本文介绍如何通过函数计算实现基于通义千问的AI对话。</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ca/5a/Yo3tdASQ_o.png" alt="icon-default.png?t=N7T8">https://help.aliyun.com/zh/functioncompute/use-cases/use-function-compute-to-realize-ai-dialogue?source=5176.11533457&amp;userCode=lcpt2xut</span></span></a></p> 
<p></p> 
<p>进入阿里云函数计算页面，选择创建Web函数，记住选预装Python，其他选项按需配置</p> 
<p></p> 
<p class="img-center"><img alt="" height="871" src="https://images2.imgbox.com/54/9b/u0v2VJGS_o.png" width="1200"></p> 
<p>我用Python只写了个30行的代码，包含了Flask和Openai的库，不过我这里用的是Deepseek，但是接口跟Openai是一套</p> 
<pre><code class="language-python">    message = request.json.get('msg')
    client = OpenAI(api_key="你的APIkey", base_url="https://api.deepseek.com")

    response = client.chat.completions.create(
        model="deepseek-chat",
        messages=[
                {"role": "system", "content": "你是一个AI助手"},
                {"role": "user", "content": message},
        ],
        stream=False
    )

    completion = response.choices[0].message.content
    res = {
            "resmsg":completion,
            "code":200
            }
    return res</code></pre> 
<p>代码写好后，选择部署代码</p> 
<p></p> 
<p class="img-center"><img alt="" height="808" src="https://images2.imgbox.com/d0/1d/GR0QLAsh_o.png" width="1200"></p> 
<p>部署好后，来到配置，记住你的公网访问地址</p> 
<p></p> 
<p class="img-center"><img alt="" height="897" src="https://images2.imgbox.com/09/13/SM6vlKPX_o.png" width="1200"></p> 
<h4></h4> 
<p>4.运行测试</p> 
<p>好了，我们再回到小程序页面，把上面的公网访问域名填入到下面服务器域名里</p> 
<p></p> 
<p class="img-center"><img alt="" height="790" src="https://images2.imgbox.com/79/79/5YcZKCta_o.png" width="1200"></p> 
<p>准备就绪，回到开发者工具，在index.js里apiurl的地方也填入上面的服务器地址，运行一下吧</p> 
<p></p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/a2/90/as5MBTSt_o.png" width="637"></p> 
<p>有什么需要交流的可以加我的星球哦</p> 
<p><a class="has-card" href="https://t.zsxq.com/CzLTi" rel="nofollow" title="https://t.zsxq.com/CzLTi"><span class="link-card-box"><span class="link-title">https://t.zsxq.com/CzLTi</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/53/d9/70YYsMRj_o.png" alt="icon-default.png?t=N7T8">https://t.zsxq.com/CzLTi</span></span></a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9dea2b699c9f5019ae5c3d0ae5d9dd92/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JS-09-es6常用知识1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/04ff0c712d32152d8a8b0404c9b88420/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Apache POI对Excel进行读写操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>