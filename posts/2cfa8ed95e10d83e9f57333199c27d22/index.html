<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mysql高级语句的查询语句 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2cfa8ed95e10d83e9f57333199c27d22/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="mysql高级语句的查询语句">
  <meta property="og:description" content="一、排序语法，关键字排序 升序和降序
默认的排序方式就是升序
升序：ASC
降序：DESC
配合语法：order by 语法
1、升序 select * from info order by name; 根据名字升序排序，不需要加ASC select * from info order by id;根据id升序排序 2、 降序（指定列） select * from info order by name desc;根据名字降序 select * from info order by id desc; 根据id降序 3、多个列排序 以多个列作为排序关键字，只有第一个参数有相同的值第二个字段才有意义。
select * from info order by hobbid desc,id; 重复值对应的第二个字段按照指定的排序进行排序
select * from info order by id desc,score;#根据id降序，成绩升序 二、区间判断 1、and 且 两个条件都要满足
select * from info where score &gt; 70 and score &lt;=90; 成绩大于70且小于90 2、or 且 两个条件只要满足一个即可">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-01T22:11:37+08:00">
    <meta property="article:modified_time" content="2024-08-01T22:11:37+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mysql高级语句的查询语句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、排序语法，关键字排序</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4f/f1/lKsfAzhx_o.png"></p> 
<p>升序和降序</p> 
<p>默认的排序方式就是升序</p> 
<p>升序：ASC</p> 
<p>降序：DESC</p> 
<p>配合语法：order by 语法</p> 
<h3>1、升序</h3> 
<pre><code>select * from info order by name; 根据名字升序排序，不需要加ASC</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/39/8b/ujf6n2lu_o.png"></p> 
<pre><code> select * from info order by id;根据id升序排序</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/dc/00/wzNixVTp_o.png"></p> 
<h3>2、 降序（指定列）</h3> 
<pre><code>select * from info order by name desc;根据名字降序</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9d/d0/4a5uqKTU_o.png"></p> 
<pre><code>select * from info order by id desc;  根据id降序</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c8/c2/WnvzCd0X_o.png"></p> 
<h3>3、多个列排序</h3> 
<p> 以多个列作为排序关键字，只有第一个参数有相同的值第二个字段才有意义。</p> 
<pre><code>select * from info order by hobbid desc,id;</code></pre> 
<p>重复值对应的第二个字段按照指定的排序进行排序</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d0/3b/dt1p2MwW_o.png"></p> 
<pre><code>select * from info order by id desc,score;#根据id降序，成绩升序</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/10/fb/rfpY4Ejl_o.png"></p> 
<h2>二、区间判断</h2> 
<h3>1、and 且</h3> 
<p>两个条件都要满足</p> 
<pre><code>select * from info where score &gt; 70 and score &lt;=90; 成绩大于70且小于90</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/64/9c/UCFXbcMG_o.png"></p> 
<h3>2、or 且 </h3> 
<p> 两个条件只要满足一个即可</p> 
<pre><code>select * from info where score &gt; 70 OR score &lt;=90;成绩大于70或者成绩小于90</code></pre> 
<p>符合条件的都展示出来</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/57/7a/Xj17mV2d_o.png"></p> 
<h3>3、嵌套多条件</h3> 
<pre><code>select * from info where score &gt; 70 or ( score &gt; 0 and score &lt; 20 );
查找成绩大于70 或者 成绩大于0且成绩小于20</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b1/99/TsL8AAcY_o.png"></p> 
<h2> 三、分组查询</h2> 
<p>对sql查询的结果进行分组，使用group by 语句来实现</p> 
<p>group by 语句配合聚合函数一起使用。</p> 
<p>聚合函数的类型：统计 count，求和 sum，求平均数 avg，最大值max，最小值 min。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c5/55/kGOLW6gt_o.png"></p> 
<pre><code>select  （指定列）count（name），hobbid（进行分组） from info group by hobbi；</code></pre> 
<p>最少两个列，group by 不能跟聚合函数后面的列  </p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/94/9f/di3HWb1L_o.png"></p> 
<p> 在聚合函数分组语句中，所有的非聚合函数列，都要在group by语句当中。</p> 
<pre><code>select count(name),hobbid,name from info group by hobbid,name;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/92/7f/b6CzhmGM_o.png"></p> 
<pre><code>select count(name),hobbid,name from info where score &gt;=80 GROUP BY hobbid,name;
以爱好为分组，统计成绩大于80的名字</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/3a/2c/Sy8En9dP_o.png"></p> 
<p>GROUP BY为一个整体，在其前面可以使用where，在其后面要使用having</p> 
<pre><code>select count(name),hobbid,score from info GROUP BY hobbid,score having score &gt;=80;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/17/d2/I8kBLinF_o.png"></p> 
<pre><code>select avg(score),hobbid from info group by hobbid having avg(score) &gt;= 60;  </code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/e3/54/iefOucN0_o.png"></p> 
<p> 统计姓名，以兴趣和分数作为分组，统计出成绩大于80的，然后按照降序对姓名的列进行排序</p> 
<pre><code>select count(name),hobbid,score from info group by hobbid,score having score &gt; 80 order by count(name) desc;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/75/b7/ricJhnnZ_o.png"></p> 
<h2>四、偏移量 </h2> 
<p>limit 1,3 1是位置偏移量（可选参数）</p> 
<p>如果不设定位置偏移量，默认就是从第一行开始（0+1），默认值是0</p> 
<pre><code>select * from info limit 3； 显示前三行</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/87/a1/j0vfi9H8_o.png"></p> 
<pre><code>select * from info limit 1,3; 显示2-4行</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/2c/ee/vzJSliMB_o.png"></p> 
<p>使用limit 和降序，只显示最后最后三行</p> 
<pre><code>select * from info order by id desc limit 3;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cd/67/EkSiyPmw_o.png"></p> 
<h2>五、别名as</h2> 
<p> 表和列的别名：因为在实际工作中，表的名字和列的名字可能会很长，书写起来不太方便，多次声明表和列时，完整的展示太复杂了，设置别名可以使书写简化了可读性增加了，简洁明了。</p> 
<p>格式一：</p> 
<pre><code>select name as 姓名，score as 成绩 from info；</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/88/59/3PzTs4mq_o.png"></p> 
<p> 格式二：</p> 
<pre><code>select name 姓名，score 成绩 from info；</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/d4/4a/zClV7JeY_o.png"></p> 
<p>格式三：</p> 
<pre><code>select i.name 姓名,i.score 成绩 from info i;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e1/c8/aAFCXHll_o.png"></p> 
<p>格式四：</p> 
<pre><code>select i.name 姓名,i.score 成绩 from info as i;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/69/8f/S17IcaDH_o.png"></p> 
<h2>六、 对表进行复制</h2> 
<pre><code>create table test as select * from info；</code></pre> 
<p>只能复制表的数据，不能复制表的结构，主键的约束复制不了</p> 
<p>desc info；查看区别</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f2/9e/NlFCQy90_o.png"></p> 
<p> desc test;查看复制的表</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/6a/YwYZWuwH_o.png"></p> 
<p> 用条件方式复制表</p> 
<pre><code>create table test1 as select * from info where score &gt;=60;</code></pre> 
<p> test表</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c2/f8/pkbUbl5s_o.png"></p> 
<h2>七、通配符</h2> 
<p> like ：模糊查询</p> 
<p>% ：表示0个，1个 或者多个字符类似于*</p> 
<p>_：表示单个字符。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c3/d0/Sa2TPFbc_o.png"></p> 
<pre><code>select * from info where address like 's%';</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/32/ce/T9AyvOnl_o.png"></p> 
<h2>八、子查询</h2> 
<p>子查询： 内查询，嵌套查询，select语句当中又嵌套了一个select。</p> 
<p>嵌套的select才是子查询，先执行子查询的语句，外部的select在根据子条件的结果进行过滤查找。</p> 
<p>子查询可以是多个表，也可以是同一张表</p> 
<p>关联语句 in not in</p> 
<p>select（select）</p> 
<pre><code class="hljs">select id,name,score from info where id in(select id from info where score&gt;=80);
先将子查询的表的内容查询出来</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/78/7c/GSkrZIaC_o.png"></p> 
<p>多张表查询</p> 
<pre><code class="hljs">select id,name,score from info where id  in (select id from test where score&gt;=80);</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2b/11/0cwKghzK_o.png"> </p> 
<pre><code class="hljs">select id,name,score from info where id  not in (select id from test where score&gt;=80);</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/86/fa/VDUHa6MX_o.png"></p> 
<pre><code class="hljs">update info set score=80 where id in (select id from test where id =2);
根据test表中的id=2，然后更新info表中id=2的分数</code></pre> 
<p> info表修改前</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/34/d2/toNpmKwU_o.png"></p> 
<p>info表修改后</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3a/12/EELAOJU2_o.png"></p> 
<p>在子查询当中多表查询（不要超过三张）和别名：</p> 
<p>info表</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/de/fb/x7EtSE6N_o.png"></p> 
<p>test表</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2f/2c/viRtOsn9_o.png"> </p> 
<p style="text-align:center;">info表和test表，这两张表id部分相同，然后根据id相同的部分来查询info表的id的值</p> 
<p> </p> 
<pre><code class="hljs">select a.id from info a where id in (select b.id from test b where a.id = b.id );</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/39/6f/kdZRQ7bQ_o.png"></p> 
<p>查询出info表成绩大于80的数据</p> 
<pre><code class="hljs">select a.name from info a where a.score&gt;80 and  a.id in (select b.id from test b where a.id = b.id );</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d3/f8/Cdc82keD_o.png"></p> 
<p>求出平均数</p> 
<pre><code class="hljs">select avg(a.score) from info a where   a.id in (select b.id from test b where a.id = b.id );</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/63/6d/LaO7Mhe3_o.png"></p> 
<h2> 九、exists</h2> 
<p>exists 判断子查询的结果是否为空，不为空返回true，空返回false</p> 
<pre><code class="hljs">select count（*）from info where exists （select id from test where score&gt;80）;</code></pre> 
<p>这里不是in和not in会传给主表。</p> 
<p>这里只是判断条件，存在才执行，不存在，结果为空则不执行。</p> 
<p>这里的值不是计数的作用</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/30/00/NqcZSpzA_o.png"></p> 
<p> 查询分数，如果分数小于50的则统计info的字段数</p> 
<pre><code class="hljs">select count(*) from info where exists (select id from info where score&lt;50);</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bc/35/xXsBLDHn_o.png"></p> 
<p>select id from info where score&lt;50查询这个条件存不存在，仅仅是一个判断的条件，并不是将结果传到下一个命令中，结果存在执行此条命令select count(*) from info，若不存在则不执行。</p> 
<h2>十、视图</h2> 
<p>视图是一个虚拟表，表的数据是基于查询的结果生成的，视图可以简化复杂的查询，隐藏复杂的细节，访问数据更安全。</p> 
<p>视图是多表数据的集合体。</p> 
<h3>1、视图和表之间的区别</h3> 
<ul><li>存储方式，表是实际的数据行，视图不存储数据，仅仅是查询结果的虚拟表</li><li>数据更新，更新表可以直接更新视图表的数据</li><li>占用空间，表实际占用空间，视图表不占用空间，只是一个动态结果的展示。</li></ul> 
<p>视图表的数据可能是一张表的部分查询数据，也可能是多个表的一部分查询数据。</p> 
<h3>2、查看当前数据库中的视图表</h3> 
<pre><code class="hljs">show full tables in xy102 where table_type like 'VIEW';</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2a/05/QuJxO0e9_o.png"> </p> 
<pre><code class="hljs">create view test2 as select * from info where score &gt;=80;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8f/68/ob4LetTk_o.png"> </p> 
<p>查询select * from test2;实际上等于执行select * from info where score &gt;=80</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/93/ee/i7rXj11T_o.png"></p> 
<p> 当修改表中id=1的分数修改为79，视图表执行执行select * from test2;</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3c/c2/wsxcmVMq_o.png"></p> 
<p>结果 </p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/74/ee/Tj7Ex3Vu_o.png"></p> 
<p>当修改视图id=2的分数修改为90时，查看原表也被修改</p> 
<p>5.5之前视图只读，5.5之后双向的，修改视图表的信息，原表是数据也会发生更改</p> 
<p>视图表：  <img alt="" src="https://images2.imgbox.com/f9/14/Rg5X2YF6_o.png"></p> 
<p>原表：</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/bf/cb/kEQS9m8G_o.png"></p> 
<p> 创建一张视图表，视图表包含id name address，从info和test当中的name值相同的部分创建</p> 
<pre><code class="hljs">create view test4 as select a.id,a.name,a.address from info a where a.name in 
(select b.name from test b where a.name = b.name );</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b1/19/w8hNP16I_o.png"> </p> 
<p>1、视图就是查询语句的别名，有了视图表可以简化查询的语句</p> 
<p>2、表的权限不一样，库的权限是有控制的，所以查询视图表的权限相对低</p> 
<p>3、既可以保证原表的数据安全，也简化了查询的过程</p> 
<p>删除视图表</p> 
<pre><code class="hljs">drop view test4；</code></pre> 
<h2>十一、 连接查询</h2> 
<p>把两张表或者多个表的记录结合起来，基于这些表，共同的字段，进行数据的拼接。</p> 
<p>前提：要确定一个主表作为结果集，然后把其他表的行，有选择性的选定到结果上。</p> 
<p>test1表</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/5d/b3/5P05t7Nh_o.png"></p> 
<p>test2表</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/7e/5b/NGJnYKob_o.png"></p> 
<p>连接的类型：</p> 
<h3>1、内连接inner join</h3> 
<p>取两张表或者多张表之间符合条件的数据记录的集合。</p> 
<p>取两个表或者多个表之间的交集</p> 
<pre><code class="hljs">select a.a_id,a.a_name from test1 a INNER JOIN test2  b on a.a_name=b.b_name;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/86/3a/DTPP1yvO_o.png"></p> 
<pre><code class="hljs">select * from test1 a INNER JOIN test2  b on a.a_name=b.b_name;</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/80/f8/AoLDKdeB_o.png"></p> 
<h3>2、左连接</h3> 
<p>左外连接，left jion .......on 或者left outer join</p> 
<p>以左边的表为基础，接收左表的所有行，以左表的记录和右表的记录进行匹配</p> 
<p>匹配左表的所有，以及右表中符合条件的行，不符合显示null,不展示。</p> 
<pre><code class="hljs">select * from test1 a left join test2 b on a.a_name=b.b_name;</code></pre> 
<p>写在left左边的为左表，在左边中选择name作为一个筛选的条件，只有结果相同的其显示的都能显示出来，否则是null。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/10/b1/FqiCMjH9_o.png"></p> 
<p>以比较条件为标准，两个表相同的展示出来，并作拼接，不同的结果显示null</p> 
<h3> 3、右连接</h3> 
<p>右外连接，right jion .......on 或者right outer join</p> 
<p>以右边的表为基础，接收右表的所有行，以右表的记录和左表的记录进行匹配</p> 
<p>匹配右表的所有，以及左表中符合条件的行，不符合显示null,不展示。</p> 
<pre><code class="hljs">select * from test1 a right join test2 b on a.a_name=b.b_name;</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/af/d4/3YY5HKZE_o.png"> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1eee7d6a6531a0e523b73beba65ebabc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">三子棋、井字棋 -python版本代码-C语言版本代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c4236337741afc7ce611ec84cc028996/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【玩转python】入门篇day14-函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>