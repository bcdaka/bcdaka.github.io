<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>探索 Electron：将 Web 技术带入桌面应用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/04a940cccbcde097b61822b71942bffb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="探索 Electron：将 Web 技术带入桌面应用">
  <meta property="og:description" content="Electron是一个开源的桌面应用程序开发框架，它允许开发者使用Web技术（如 HTML、CSS 和 JavaScript）构建跨平台的桌面应用程序，它的出现极大地简化了桌面应用程序的开发流程，让更多的开发者能够利用已有的 Web 开发技能来构建功能强大且跨平台的应用程序，这对于提升开发效率和应用程序的快速交付具有重要意义。
目录
初识Electron
项目工程搭建
加载本地文件
完善窗口行为
配置自动重启
主进程与渲染进程
进程通信
打包应用
初识Electron Electron是一个由GitHub及众多贡献者组成的活跃社区共同维护的开源项目，其兼容Mac、Windows和Linux，可以构建出三个平台的应用程序，这里给出其 官网 和 中文网 ，如下：
像我们平常耳熟能详的vscode就是使用electron来进行开发的，当然还要一些我们常用的工具都是采用electron进行开发，包括我们目前使用的最新版的腾讯QQ，也是采用了electron框架技术实现多端跨平台运行，可以说electron算是一个生态完善、功能齐全、系统简便的框架了。
对于创建常见的桌面GUI工具有以下各种框架，这里简单说一下各种框架之间的优缺点：
名称语言优点缺点QTC&#43;&#43;跨平台、性能好、生态好依赖多，程序包大PyQTPython底层集成度高、易上手授权问题WPFC#类库丰富、扩展灵活只支持Windows，程序包大WinFormC#性能好、组件丰富、易上手只支持windows，UI差SwingJava基于AWT，组件丰富性能差，UI一般NW.jsJS跨平台性好，界面美观底层交互差、性能差，包大ElectronJS相比NW发展更好底层交互差、性能差，包大CEFC&#43;&#43;性能好，灵活集成，UI美观占用资源多，包大 技术是为业务服务的，选择合适的最重要，如下对框架进行一个概述：
1）底层依赖&#43;调用：CEF、QT、Swing
2）UI美观：Electron（NW.js）、PyQT
3）跨平台：Swing（JAVA）、PyQT（Python、C&#43;&#43;）、Electron（前端）
Electron技术架构：Electron的核心组成主要有以下三个部分组成，这里对这三个部分进行简述：
Chromium：渲染引擎，负责显示HTML、CSS和JS内容，提供了现代浏览器的功能
Node.js：后端引擎，提供访问本地文件系统和操作系统功能的能力
Native apis：操作系统或平台提供的原生应用程序接口(API)用于与硬件和系统功能进行交互
Electron说明：它其实就是一个实时的框架，将chromium和node.js整合一个运行环境当中，它允许我们使用web技术来构建桌面应用程序，并可以调用一些api来对不同操作环境下的系统进行相应操作，最终实现一个跨平台并且兼容性极好的桌面应用。
Electron工作流程：Electron开发桌面端应用是如何完成整体的工作呢？这里做一个简单的概述，从下图所示可以看出，桌面应用其实就是运行在不同操作系统上的一款软件，当前我们要讨论的就是在底层系统运行上层发生的一些行为：
具体流程包括初始化项目、创建基本文件结构、编写主进程脚本和前端页面、配置package.json以及启动和调试应用，主进程可以看做是 package.json 中 main 属性对应的文件，一个应用只会有一个主进程，只有主进程可以进行GUI的API操作；渲染进程中Windows展示的界面通过渲染进程表现，一个应用可以有多个渲染进程：
项目工程搭建 接下来我们开始搭建electron项目了，首先我们先打开electron官网，对于新手来说直接阅读官网是一个比较不错的选择，这里我们点击官网的快速入门，往下滑动找到我们想要的信息。
第一步：首先我们先查阅一下自身电脑有无安装node环境，没有的话请参考我之前的文章进行安装：地址 ，安装最新稳定版本的node即可：
第二步：通过 npm init 命令去初始化包，这里就不先直接上框架讲解了，下一篇文章在说，初始化包命令直接一路回车即可：
第三步：接下来我们就需要开始安装electron相关包了，命令如下，安装完成之后配置一下start：
npm install --save-dev electron 第四步：在根目录创建main.js文件用作electron的入口文件，然后编写相应的基础代码，如下：
// app应用；BrowserWindow 窗口 const { app, BrowserWindow } = require(&#39;electron&#39;) // 当app准备完毕，创建窗口 app.on(&#39;ready&#39;, () =&gt; { new BrowserWindow({ // 窗口的配置 width: 800, height: 600 }) }) 接下来直接终端执行 npm start 命令，直接运行项目，如下可以看到桌面应用已经启动了，其自带一些桌面的菜单和相关基础按钮：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-29T18:19:59+08:00">
    <meta property="article:modified_time" content="2024-06-29T18:19:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">探索 Electron：将 Web 技术带入桌面应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>Electron是一个开源的桌面应用程序开发框架，它允许开发者使用Web技术（如 HTML、CSS 和 JavaScript）构建跨平台的桌面应用程序，它的出现极大地简化了桌面应用程序的开发流程，让更多的开发者能够利用已有的 Web 开发技能来构建功能强大且跨平台的应用程序，这对于提升开发效率和应用程序的快速交付具有重要意义。</p> 
</blockquote> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%88%9D%E8%AF%86Electron-toc" style="margin-left:80px;"><a href="#%E5%88%9D%E8%AF%86Electron" rel="nofollow">初识Electron</a></p> 
<p id="%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA-toc" style="margin-left:80px;"><a href="#%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA" rel="nofollow">项目工程搭建</a></p> 
<p id="%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6" rel="nofollow">加载本地文件</a></p> 
<p id="%E5%AE%8C%E5%96%84%E7%AA%97%E5%8F%A3%E8%A1%8C%E4%B8%BA-toc" style="margin-left:80px;"><a href="#%E5%AE%8C%E5%96%84%E7%AA%97%E5%8F%A3%E8%A1%8C%E4%B8%BA" rel="nofollow">完善窗口行为</a></p> 
<p id="%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF-toc" style="margin-left:80px;"><a href="#%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF" rel="nofollow">配置自动重启</a></p> 
<p id="%E4%B8%BB%E8%BF%9B%E7%A8%8B%E4%B8%8E%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%E4%B8%BB%E8%BF%9B%E7%A8%8B%E4%B8%8E%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B" rel="nofollow">主进程与渲染进程</a></p> 
<p id="%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1-toc" style="margin-left:80px;"><a href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1" rel="nofollow">进程通信</a></p> 
<p id="%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8-toc" style="margin-left:80px;"><a href="#%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8" rel="nofollow">打包应用</a></p> 
<hr id="hr-toc"> 
<h4 id="%E5%88%9D%E8%AF%86Electron">初识Electron</h4> 
<p>Electron是一个由GitHub及众多贡献者组成的活跃社区共同维护的开源项目，其兼容Mac、Windows和Linux，可以构建出三个平台的应用程序，这里给出其 <a class="link-info" href="https://www.electronjs.org/zh/" rel="nofollow" title="官网">官网</a> 和 <a class="link-info" href="https://electronjs.p2hp.com/" rel="nofollow" title="中文网">中文网</a> ，如下：</p> 
<p><img alt="" height="881" src="https://images2.imgbox.com/7c/f3/56ix7rIe_o.png" width="1200"></p> 
<p>像我们平常耳熟能详的vscode就是使用electron来进行开发的，当然还要一些我们常用的工具都是采用electron进行开发，包括我们目前使用的最新版的腾讯QQ，也是采用了electron框架技术实现多端跨平台运行，可以说electron算是一个生态完善、功能齐全、系统简便的框架了。</p> 
<p><img alt="" height="1007" src="https://images2.imgbox.com/34/05/5YeL78J6_o.png" width="1200"></p> 
<p>对于创建常见的桌面GUI工具有以下各种框架，这里简单说一下各种框架之间的优缺点：</p> 
<table border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="text-align:center;">名称</th><th style="text-align:center;">语言</th><th style="text-align:center;">优点</th><th style="text-align:center;">缺点</th></tr></thead><tbody><tr><td style="text-align:center;">QT</td><td style="text-align:center;">C++</td><td style="text-align:center;">跨平台、性能好、生态好</td><td style="text-align:center;">依赖多，程序包大</td></tr><tr><td style="text-align:center;">PyQT</td><td style="text-align:center;">Python</td><td style="text-align:center;">底层集成度高、易上手</td><td style="text-align:center;">授权问题</td></tr><tr><td style="text-align:center;">WPF</td><td style="text-align:center;">C#</td><td style="text-align:center;">类库丰富、扩展灵活</td><td style="text-align:center;">只支持Windows，程序包大</td></tr><tr><td style="text-align:center;">WinForm</td><td style="text-align:center;">C#</td><td style="text-align:center;">性能好、组件丰富、易上手</td><td style="text-align:center;">只支持windows，UI差</td></tr><tr><td style="text-align:center;">Swing</td><td style="text-align:center;">Java</td><td style="text-align:center;">基于AWT，组件丰富</td><td style="text-align:center;">性能差，UI一般</td></tr><tr><td style="text-align:center;">NW.js</td><td style="text-align:center;">JS</td><td style="text-align:center;">跨平台性好，界面美观</td><td style="text-align:center;">底层交互差、性能差，包大</td></tr><tr><td style="text-align:center;">Electron</td><td style="text-align:center;">JS</td><td style="text-align:center;">相比NW发展更好</td><td style="text-align:center;">底层交互差、性能差，包大</td></tr><tr><td style="text-align:center;">CEF</td><td style="text-align:center;">C++</td><td style="text-align:center;">性能好，灵活集成，UI美观</td><td style="text-align:center;">占用资源多，包大</td></tr></tbody></table> 
<blockquote> 
 <p>技术是为业务服务的，选择合适的最重要，如下对框架进行一个概述：</p> 
 <p>1）底层依赖+调用：CEF、QT、Swing</p> 
 <p>2）UI美观：Electron（NW.js）、PyQT</p> 
 <p>3）跨平台：Swing（JAVA）、PyQT（Python、C++）、Electron（前端）</p> 
</blockquote> 
<p><span style="color:#be191c;"><strong>Electron技术架构</strong></span>：Electron的核心组成主要有以下三个部分组成，这里对这三个部分进行简述：</p> 
<blockquote> 
 <p><span style="color:#1a439c;"><strong>Chromium</strong></span>：渲染引擎，负责显示HTML、CSS和JS内容，提供了现代浏览器的功能</p> 
 <p><span style="color:#1c7331;"><strong>Node.js</strong></span>：后端引擎，提供访问本地文件系统和操作系统功能的能力</p> 
 <p><span style="color:#a5a5a5;"><strong>Native apis</strong></span>：操作系统或平台提供的原生应用程序接口(API)用于与硬件和系统功能进行交互</p> 
</blockquote> 
<p><img alt="" height="602" src="https://images2.imgbox.com/39/7c/RxxMuxH4_o.png" width="1200"></p> 
<p><span style="color:#1c7892;"><strong>Electron说明</strong></span>：它其实就是一个实时的框架，将chromium和node.js整合一个运行环境当中，它允许我们使用web技术来构建桌面应用程序，并可以调用一些api来对不同操作环境下的系统进行相应操作，最终实现一个跨平台并且兼容性极好的桌面应用。</p> 
<p><span style="color:#ad720d;"><strong>Electron工作流程</strong></span>：Electron开发桌面端应用是如何完成整体的工作呢？这里做一个简单的概述，从下图所示可以看出，桌面应用其实就是运行在不同操作系统上的一款软件，当前我们要讨论的就是在底层系统运行上层发生的一些行为：</p> 
<p><img alt="" height="1046" src="https://images2.imgbox.com/5b/c2/PFo04oJT_o.png" width="1200"></p> 
<p>具体流程包括初始化项目、创建基本文件结构、编写主进程脚本和前端页面、配置package.json以及启动和调试应用，主进程可以看做是 package.json 中 main 属性对应的文件，一个应用只会有一个主进程，只有主进程可以进行GUI的API操作；渲染进程中Windows展示的界面通过渲染进程表现，一个应用可以有多个渲染进程：</p> 
<p><img alt="" height="657" src="https://images2.imgbox.com/d6/fd/MxE2GFhK_o.png" width="988"></p> 
<h4 id="%E9%A1%B9%E7%9B%AE%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA" style="background-color:transparent;">项目工程搭建</h4> 
<p>接下来我们开始搭建electron项目了，首先我们先打开electron官网，对于新手来说直接阅读官网是一个比较不错的选择，这里我们点击官网的快速入门，往下滑动找到我们想要的信息。</p> 
<p><span style="color:#be191c;"><strong>第一步</strong></span>：首先我们先查阅一下自身电脑有无安装node环境，没有的话请参考我之前的文章进行安装：<a href="https://z5qyj5pyi.blog.csdn.net/article/details/135256209" rel="nofollow" title="地址">地址</a> ，安装最新稳定版本的node即可：</p> 
<p><img alt="" height="477" src="https://images2.imgbox.com/71/c0/MDkYiDtC_o.png" width="1200"></p> 
<p><span style="color:#be191c;"><strong>第二步</strong></span>：通过 npm init 命令去初始化包，这里就不先直接上框架讲解了，下一篇文章在说，初始化包命令直接一路回车即可：</p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/74/66/vAP3eNbC_o.png" width="1200"></p> 
<p><span style="color:#be191c;"><strong>第三步</strong></span>：接下来我们就需要开始安装electron相关包了，命令如下，安装完成之后配置一下start：</p> 
<pre><code class="hljs">npm install --save-dev electron</code></pre> 
<p><img alt="" height="433" src="https://images2.imgbox.com/ae/06/9kA98Z1S_o.png" width="1200"></p> 
<p><span style="color:#be191c;"><strong>第四步</strong></span>：在根目录创建main.js文件用作electron的入口文件，然后编写相应的基础代码，如下：</p> 
<pre><code class="language-javascript">// app应用；BrowserWindow 窗口
const { app, BrowserWindow } = require('electron')

// 当app准备完毕，创建窗口
app.on('ready', () =&gt; {
    new BrowserWindow({ // 窗口的配置
        width: 800,
        height: 600
    })
})</code></pre> 
<p>接下来直接终端执行 npm start 命令，直接运行项目，如下可以看到桌面应用已经启动了，其自带一些桌面的菜单和相关基础按钮：</p> 
<p><img alt="" height="923" src="https://images2.imgbox.com/25/ea/ssysHEig_o.png" width="1200"></p> 
<p>这里我们可以将自带的导航栏隐藏掉，并且在空白页面中内嵌一个别的网站的网页，如下：</p> 
<pre><code class="language-javascript">// app应用；BrowserWindow 窗口
const { app, BrowserWindow } = require('electron')

// 当app准备完毕，创建窗口
app.on('ready', () =&gt; {
    const win = new BrowserWindow({ // 窗口的配置
        width: 800,
        height: 600,
        autoHideMenuBar: true, // 自动隐藏菜单栏
    })
    win.loadURL('http://www.baidu.com') // 加载页面
})</code></pre> 
<p>呈现的效果如下所示：</p> 
<p><img alt="" height="826" src="https://images2.imgbox.com/96/d4/czHKNLFc_o.png" width="1200"></p> 
<p>当然关于窗口的配置还有许多相关的配置项，大家可以自信去官网了解，这里就不再一一介绍了，后面讲解项目遇到相应问题需要解决的时候，再讲解相关的配置：</p> 
<p><img alt="" height="1013" src="https://images2.imgbox.com/4a/b0/7YSfBwDq_o.png" width="1200"></p> 
<h4 id="%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6">加载本地文件</h4> 
<p>上文我们讲解到了使用electron运行项目以及使用了一个线上的链接进行项目的实现，接下来我们开始编写如何在electron中加载本地文件，首先我们先创建一下src文件，新建一个html和css文件，然后在文件中编写相应的内容，如下：</p> 
<p><img alt="" height="460" src="https://images2.imgbox.com/cf/41/xMVZL35S_o.png" width="1200"></p> 
<p>然后我们调用BrowserWindow中的函数加载本地文件，如下所示：</p> 
<pre><code class="language-javascript">// app应用；BrowserWindow 窗口
const { app, BrowserWindow } = require('electron')

// 当app准备完毕，创建窗口
app.on('ready', () =&gt; {
    const win = new BrowserWindow({ // 窗口的配置
        width: 800,
        height: 600,
        autoHideMenuBar: true, // 自动隐藏菜单栏
    })
    win.loadFile('./src/index.html') // 加载页面
})</code></pre> 
<p>最终呈现的效果如下所示，可以看到本地的文件已经在桌面端中加载出来了：</p> 
<p><img alt="" height="596" src="https://images2.imgbox.com/1a/05/eHe8yoX7_o.png" width="1200"></p> 
<p>如果想像浏览器那样使用控制台的话，可以通过快捷键 ctrl + shift + i 打开控制台，如下所示，如果想刷新页面内容的话和浏览器一样，也是f5即可：</p> 
<p><img alt="" height="844" src="https://images2.imgbox.com/72/96/1rFHKNM2_o.png" width="1200"></p> 
<p>因为vscode也是通过electron开发的嘛，所以说vscode也是有控制台的，如下这个就是vscode的控制台：</p> 
<p><img alt="" height="1029" src="https://images2.imgbox.com/59/3c/8TDuGwfA_o.png" width="1200"></p> 
<p>然后我们打开控制台，一开始会报出如下的警告，说是内容安全策略的问题，这里我们在hmtl文件加上如下代码即可消除警告：</p> 
<pre><code class="language-html">&lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src https://*; child-src 'none';" /&gt;</code></pre> 
<p><img alt="" height="557" src="https://images2.imgbox.com/2d/e0/dH0oPr9M_o.png" width="1200"></p> 
<p><img alt="" height="463" src="https://images2.imgbox.com/c9/7f/5sHKetzs_o.png" width="1200"></p> 
<h4 id="%E5%AE%8C%E5%96%84%E7%AA%97%E5%8F%A3%E8%A1%8C%E4%B8%BA">完善窗口行为</h4> 
<p>在window系统下我们开启一个应用，关闭之后是直接在任务栏中消失掉了，而mac系统还是会在任务栏中保留的，为了匹配不同系统下的使用习惯，这里我们也要对electron进行相应的代码配置，如下：</p> 
<pre><code class="language-javascript">// app应用；BrowserWindow 窗口
const { app, BrowserWindow } = require('electron')

const createWindow = () =&gt; {
    const win = new BrowserWindow({ // 窗口的配置
        width: 800,
        height: 600,
        autoHideMenuBar: true, // 自动隐藏菜单栏
    })
    win.loadFile('./src/index.html') // 加载页面
}

// 当app准备完毕，创建窗口
app.on('ready', () =&gt; {
    createWindow()
})

// 当所有的窗口都被关闭时，并且还不是苹果系统，则直接退出程序
app.on('window-all-closed', () =&gt; {
    if (process.platform !== 'darwin') app.quit()
})

// 当应用被激活时，判断当前窗口的数量，如果是0就创建窗口
app.on('activate', () =&gt; {
    if (BrowserWindow.getAllWindows().length === 0) createWindow()
})</code></pre> 
<h4 id="%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF">配置自动重启</h4> 
<p>我们每次对代码进行修改都需要手动去重启electron应用才可以看到新的效果，这对编写代码的效率来讲是很底下的，所以这里我们需要配置一下自动重启的配置，终端执行如下命令：</p> 
<pre><code class="language-javascript">npm i nodemon -D</code></pre> 
<p>然后我们在package.json文件中配置一下启动命令如下：</p> 
<pre><code class="language-javascript">"scripts": {
  "start": "nodemon --exec electron ."
}</code></pre> 
<p>当我们在main.js文件中打印一下可以看到会被实时监听到：</p> 
<p><img alt="" height="651" src="https://images2.imgbox.com/6a/03/OhFOP6iD_o.png" width="1200"></p> 
<p>但是我们修改本地文件，页面是不会发生变化的，每次还需要我们手动去ctrl + r 强制刷新一下才行</p> 
<p><img alt="" height="612" src="https://images2.imgbox.com/f8/2e/CDj3JSJV_o.png" width="1200"></p> 
<p>这对于开发者来说还是不太友好，所以这里我们需要一下nodemon.json规则才行，如下我们在根目录创建 nodemon.json 文件，内容如下：</p> 
<pre><code class="language-bash">{
    "ignore": [
        "node_modules",
        "dist"
    ],
    "restartable": "r",
    "watch": ["*.*"],
    "ext": "html,js,css"
}</code></pre> 
<p>接下来当我们开始编写本地文件的时候，会自动重启electron桌面项目进行实时刷新：</p> 
<p><img alt="" height="530" src="https://images2.imgbox.com/1b/d1/mDhMLjyv_o.png" width="1200"></p> 
<h4 id="%E4%B8%BB%E8%BF%9B%E7%A8%8B%E4%B8%8E%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B">主进程与渲染进程</h4> 
<p>在Electron中，主进程(Main Process)和渲染进程(Renderer Process)是两个核心概念，它们在应用程序中扮演着不同的角色和功能：</p> 
<p><span style="color:#be191c;"><strong>主进程(Main Process)</strong></span>：主进程是整个 Electron应用程序的核心，负责管理应用的生命周期和主要的系统交互,通常一个Electron应用程序只有一个主进程，负责创建应用窗口(BrowserWindow)，处理系统事件(如文件系统访问、进程间通信等)，以及执行与操作系统交互的主要任务。</p> 
<p><span style="color:#be191c;"><strong>渲染进程(Renderer Process)</strong></span>：渲染进程是Electron应用程序中负责展示界面和与用户交互的部分，每个应用窗口都运行在单独的渲染进程中，渲染进程通过Web页面(通常是用 HTML、CSS 和 JavaScript 编写的)来实现应用的用户界面。</p> 
<p>如下通过一个简单的代码进行示例：</p> 
<p><img alt="" height="951" src="https://images2.imgbox.com/6b/9b/LQfHWzoS_o.png" width="1200"></p> 
<p><img alt="" height="597" src="https://images2.imgbox.com/32/d2/wFJStEXb_o.png" width="1155"></p> 
<p>如果想在js文件中调用一些node.js身上的内容是直接报错的，这里我们需要借助预加载脚本来作为主进程与渲染进程之间的桥梁，如下我们在根目录下创建预加载脚本preload.js，然后在主进程中进行相应的代码配置：</p> 
<p><img alt="" height="715" src="https://images2.imgbox.com/f7/9d/JkkXudlO_o.png" width="1200"></p> 
<p>electron的执行顺序就是 主进程 -&gt; 预加载脚本 -&gt; 渲染进程，这里我们做一个简单的样式：</p> 
<p><img alt="" height="738" src="https://images2.imgbox.com/1d/08/6NopAmin_o.png" width="1200"></p> 
<p>最终打印的效果如下所示：</p> 
<p><img alt="" height="779" src="https://images2.imgbox.com/81/f3/VorxRFWu_o.png" width="1200"></p> 
<p>预加载脚本不像渲染进程无法时候node中的api，其是可以使用一些node环境中的api进行操作的，如下我们在预加载脚本中使用electron构建桥梁，然后把当前的node版本暴露出去，在渲染进程中是可以直接拿到的：</p> 
<p><img alt="" height="391" src="https://images2.imgbox.com/0b/90/R9EUhXK3_o.png" width="1200"></p> 
<p>演示效果如下：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/95/52/NqpL8640_o.gif"></p> 
<h4 id="%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1" style="background-color:transparent;">进程通信</h4> 
<p><span style="color:#be191c;"><strong>渲染进程流向主进程</strong></span>(<span style="color:#b95514;"><strong>单向</strong></span>)：</p> 
<p><img alt="" height="888" src="https://images2.imgbox.com/e0/f3/vAYsbP7Q_o.png" width="1200"></p> 
<p>最终呈现的效果如下所示：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/34/13/UGvPo8Vv_o.gif"></p> 
<p><span style="color:#be191c;"><strong>渲染进程与主进程互通</strong></span>(<span style="color:#1c7331;"><strong>双向</strong></span>)：接下来我们直接通过渲染进程去调用主进程的node中的API函数来获取系统中的数据，这里做一个简单的演示：</p> 
<p><img alt="" height="930" src="https://images2.imgbox.com/18/97/dv9ug2yz_o.png" width="1200"></p> 
<p>呈现的效果如下所示：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/21/b3/hvMR5u4y_o.gif"></p> 
<p><span style="color:#be191c;"><strong>主进程流向渲染进程</strong></span>(<span style="color:#b95514;"><strong>单向</strong></span>)：主进程向渲染进程发送数据是通过send和on方法，和上面讲述的第一个方法反过来即可，这里不再赘述。</p> 
<h4 id="%E6%89%93%E5%8C%85%E5%BA%94%E7%94%A8">打包应用</h4> 
<p>在我们编写完electron应用之后，接下来我们开始对这个应用进行打包，终端执行如下命令：</p> 
<pre><code class="language-bash">npm i electron-builder -D</code></pre> 
<p>安装完成之后，接下来我们需要对我们的package.json文件进行一定的配置，如下：</p> 
<pre><code class="language-bash">"scripts": {
  "start": "electron .",
  "build": "electron-builder"
}</code></pre> 
<p>然后在设置一下build打包命令的配置：</p> 
<pre><code class="language-bash">"build": {
  "appId": "com.xi",
  "win": {
    "icon": "./logo.png",
    "target": [
      {
        "target": "nsis",
        "arch": ["x64"]
      }
    ]
  },
  "nsis": {
    "oneClick": false,
    "perMachine": true,
    "allowToChangeInstallationDirectory": true
  }
},</code></pre> 
<p>效果如下所示：</p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/73/50/Qn7u75xs_o.png" width="1200"></p> 
<p>然后我们终端执行 npm run build 命令进行打包，可以会遇到下面的一些报错，说我们一些依赖文件是缺失的，如下：</p> 
<p><img alt="" height="778" src="https://images2.imgbox.com/53/f6/WOBNx3Lz_o.png" width="1200"></p> 
<p>报错提示我们的缺失的安装包，我们就下载缺失的安装包，直接复制当前缺失的命令复制浏览器安装即可：</p> 
<p><img alt="" height="538" src="https://images2.imgbox.com/8c/a5/CYrkSgYg_o.png" width="1200"></p> 
<p>然后直接丢到对应的文件里面即可：</p> 
<p><img alt="" height="394" src="https://images2.imgbox.com/e8/19/s4DidpBB_o.png" width="1200"></p> 
<p>再次执行打包命令可以看到我们已经打包完成了：</p> 
<p><img alt="" height="572" src="https://images2.imgbox.com/1f/11/dFGhos3I_o.png" width="1200"></p> 
<p>回到我们的dist文件夹可以看到我们已经打包完成了：</p> 
<p><img alt="" height="384" src="https://images2.imgbox.com/f9/db/ZeeTOeSE_o.png" width="1200"></p> 
<p>然后我们双击安装包就可以和正常软件一样进行安装了，这里不再赘述：</p> 
<p><img alt="" height="689" src="https://images2.imgbox.com/cf/cd/NsBP1FBK_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40f89fe2e97afc2bfd6c3db0e14a1ea5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Day6: 344.反转字符串 541. 反转字符串II 卡码网：54.替换数字</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/15ffed261e6adf8b9ddfe34d8436eb32/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装ant-design-vue的报错集合</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>