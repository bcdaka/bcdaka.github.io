<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【笔记】Windows 中 一键部署本地私人专属知识库：MaxKB &#43; Docker &#43; MaxKB docker &#43; Ollama - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b0ad8835330860a9ce556e79f585eb1e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【笔记】Windows 中 一键部署本地私人专属知识库：MaxKB &#43; Docker &#43; MaxKB docker &#43; Ollama">
  <meta property="og:description" content="Docker的部署： Docker下载直接进入链接：
https://www.docker.com/
Docker使用需要启动Docker,启动Docker以后，会在桌面右下角看到Docker的一个图标：
只有启动了Docker以后，Docker的各种命令才可以使用。
Docker需要开启Hyper-V。一般情况下Hyper-V应该开机自启，但为了防止没有启动，还需要查看下 Hyper-V的启动情况，确保启动后，重启电脑：
找不到的话，应该默认就是开启的。
启动之后，就可以使用Docker的各种命令了：
如果只能看到Client，说明Docker没有启动。需要启动之后才能看到Server.
关于Docker的知识：
镜像（Images）和容器（Containers）是Docker的核心概念。
Docker 和容器不一样，只是容器的一种实现，是一个容器化的解决方案和平台。而容器是一种虚拟化技术，和虚拟机类似，也是一个独立的环境。可以在这个环境中运行应用程序，和虚拟机不同的是，它并不需要在容器中运行一个完整的操作系统，而是使用宿主机的操作系统，所以启动速度非常快。
比如我们一台物理服务器上只能运行几台虚拟机，但是却可以运行上百个容器。
镜像是一Docker的一个只读的模板，可以用来创建容器。容器是Docker的运行实例，它提供一个独立的可移植的环境，可以在这个环境中运行应用程序。
镜像和容器的关系 和 面向对象语言中类和对象关系非常类似。我们可以根据镜像（类）创建多个容器（对象）。镜像也像一道食谱，容器就是根据这个食谱做出来的菜（可以一个或多个），但这些菜都是根据同一道食谱做出来的。你也可以将这个食谱分享给其他人，那么其他人也可以根据这道食谱做出来这道和你做的一模一样的菜。
DockerHub类似于github, 它是一个公共的Docker的仓库，用来集中存储和管理Docker镜像。我们可以在这里下载和上传各种镜像。
Docker是一个 Client-Server
Docker Daemon是一个后台进程，用来接收和处理来自Docker客户端的请求，然后将结果返回给客户端。实际上，我们在终端使用的各种命令，都是发送给Docker Daemon的，经过Docker Daemon处理后，返回给客户端。
容器化和DockerFile的概念：
DockerFile是一个文本文件，里面包含各种指令，用来告诉Docker如何来构建镜像。
Docker 实践：
在桌面创建一个HelloDocker文件夹。
Dockerfile作为一个文件，没有任何扩展名，第一个字母D大写，后面字母小写。这是约定俗成的规范，如果不遵守这个规范，Docker就无法识别这个文件。
我们需要构建一个基础镜像，镜像是按照层次结构来构建的，每一层都是基于上一层的。
编写完Dockerfile
也可以指定Tag版本，在镜像后面加上 :TAG ,用来说明你想找的镜像。
运行Docker镜像：
如果你想使用这个镜像，你可以直接复制这个文件，也可以将这个文件上传到DockerHub上。
我们可以使用
DockerDesktop 的图形化界面：
当我们创建一个容器的时候，它通常以一个干净的文件系统开始，容器启动以后，我们可以在容器中创建文件修改文件。当容器停止以后，容器中的所有数据都会被丢掉。Volumes可以将容器中的目录或者指定路径映射到宿主机的某一个位置和目录上，这样就可以实现数据的持久化，把数据保存到宿主机的磁盘上。
MaxKB的加载： https://github.com/1Panel-dev/MaxKB
查看虚拟化是否可用：
docker run -d --name=maxkb -p 8080:8080 -v ~/.maxkb:/var/lib/postgresql/data 1panel/maxkb # 用户名: admin # 密码: MaxKB@123.. Ollama的安装： https://ollama.com/download">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-11T15:20:05+08:00">
    <meta property="article:modified_time" content="2024-06-11T15:20:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【笔记】Windows 中 一键部署本地私人专属知识库：MaxKB &#43; Docker &#43; MaxKB docker &#43; Ollama</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<h3>Docker的部署：</h3> 
<p></p> 
<p>Docker下载直接进入链接：</p> 
<p><a href="https://www.docker.com/" rel="nofollow" title="https://www.docker.com/">https://www.docker.com/</a></p> 
<p>Docker使用需要启动Docker,启动Docker以后，会在桌面右下角看到Docker的一个图标：</p> 
<p><img alt="" height="51" src="https://images2.imgbox.com/d7/96/EvXjxwZJ_o.png" width="61"></p> 
<p>只有启动了Docker以后，Docker的各种命令才可以使用。</p> 
<p>Docker需要开启Hyper-V。一般情况下Hyper-V应该开机自启，但为了防止没有启动，还需要查看下 Hyper-V的启动情况，确保启动后，重启电脑：</p> 
<p><img alt="" height="756" src="https://images2.imgbox.com/41/5a/AnXg2mhI_o.png" width="998"></p> 
<p></p> 
<p>找不到的话，应该默认就是开启的。</p> 
<p>启动之后，就可以使用Docker的各种命令了：</p> 
<p><img alt="" height="748" src="https://images2.imgbox.com/a8/6b/XQdxLnjr_o.png" width="986"></p> 
<p>如果只能看到Client，说明Docker没有启动。需要启动之后才能看到Server.</p> 
<p></p> 
<p></p> 
<p></p> 
<p>关于Docker的知识：</p> 
<p></p> 
<p>镜像（Images）和容器（Containers）是Docker的核心概念。</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/65/2f/Hbf5iB2V_o.png" width="1200"></p> 
<p>Docker 和容器不一样，只是容器的一种实现，是一个容器化的解决方案和平台。而容器是一种虚拟化技术，和虚拟机类似，也是一个独立的环境。可以在这个环境中运行应用程序，和虚拟机不同的是，它并不需要在容器中运行一个完整的操作系统，而是使用宿主机的操作系统，所以启动速度非常快。</p> 
<p><img alt="" height="717" src="https://images2.imgbox.com/ad/50/V7YiOJ1d_o.png" width="1200"></p> 
<p><img alt="" height="721" src="https://images2.imgbox.com/6e/74/Qafxh9nV_o.png" width="1200"></p> 
<p>比如我们一台物理服务器上只能运行几台虚拟机，但是却可以运行上百个容器。</p> 
<p></p> 
<p><img alt="" height="1164" src="https://images2.imgbox.com/d2/37/O6t0J7ZU_o.png" width="1200"></p> 
<p>镜像是一Docker的一个<span style="color:#ff9900;"><strong>只读的模板</strong></span>，可以用来创建容器。容器是Docker的<span style="color:#ff9900;"><strong>运行实例</strong></span>，它提供一个独立的可移植的环境，可以在这个环境中运行应用程序。</p> 
<p></p> 
<p><span style="color:#ff9900;"><strong>镜像和容器</strong></span>的关系 和 面向对象语言中<span style="color:#ff9900;"><strong>类和对象</strong></span>关系非常类似。我们可以根据镜像（类）创建多个容器（对象）。镜像也像一道食谱，容器就是根据这个食谱做出来的菜（可以一个或多个），但这些菜都是根据同一道食谱做出来的。你也可以将这个食谱分享给其他人，那么其他人也可以根据这道食谱做出来这道和你做的一模一样的菜。</p> 
<p></p> 
<p>DockerHub类似于github, 它是一个公共的Docker的仓库，用来集中存储和管理Docker镜像。我们可以在这里下载和上传各种镜像。</p> 
<p></p> 
<p></p> 
<p><img alt="" height="684" src="https://images2.imgbox.com/d1/99/IXRdcblS_o.png" width="1200"></p> 
<p>Docker是一个 Client-Server</p> 
<p>Docker Daemon是一个后台进程，用来接收和处理来自Docker客户端的请求，然后将结果返回给客户端。实际上，我们在终端使用的各种命令，都是发送给Docker Daemon的，经过Docker Daemon处理后，返回给客户端。</p> 
<p></p> 
<p></p> 
<p>容器化和DockerFile的概念：</p> 
<p><img alt="" height="767" src="https://images2.imgbox.com/00/ca/Qw8m92Mr_o.png" width="1200"></p> 
<p>DockerFile是一个文本文件，里面包含各种指令，用来告诉Docker如何来构建镜像。</p> 
<p></p> 
<p>Docker 实践：</p> 
<p>在桌面创建一个HelloDocker文件夹。</p> 
<p><img alt="" height="143" src="https://images2.imgbox.com/49/e6/p4pGDTuK_o.png" width="1200"></p> 
<p><img alt="" height="105" src="https://images2.imgbox.com/0a/37/zWhlareE_o.png" width="1200"></p> 
<p><img alt="" height="122" src="https://images2.imgbox.com/44/b0/7QrSDCpf_o.png" width="834"></p> 
<p><img alt="" height="149" src="https://images2.imgbox.com/75/d6/Jy2GkeWE_o.png" width="1200"></p> 
<p><img alt="" height="137" src="https://images2.imgbox.com/80/31/MicjXmBM_o.png" width="635"></p> 
<p>Dockerfile作为一个文件，没有任何扩展名，第一个字母D大写，后面字母小写。这是约定俗成的规范，如果不遵守这个规范，Docker就无法识别这个文件。</p> 
<p>我们需要构建一个基础镜像，镜像是按照层次结构来构建的，每一层都是基于上一层的。</p> 
<p>编写完Dockerfile</p> 
<p><img alt="" height="557" src="https://images2.imgbox.com/76/58/r3uLKUxg_o.png" width="1200"></p> 
<p><img alt="" height="554" src="https://images2.imgbox.com/ab/84/hR8JK4yF_o.png" width="1200"></p> 
<p><img alt="" height="739" src="https://images2.imgbox.com/25/cf/ov74UKKU_o.png" width="1200"></p> 
<p>也可以指定Tag版本，在镜像后面加上  :TAG   ,用来说明你想找的镜像。</p> 
<p>运行Docker镜像：</p> 
<p><img alt="" height="93" src="https://images2.imgbox.com/9a/fc/MLwH1Bo7_o.png" width="1200"></p> 
<p></p> 
<p>如果你想使用这个镜像，你可以直接复制这个文件，也可以将这个文件上传到DockerHub上。</p> 
<p><img alt="" height="515" src="https://images2.imgbox.com/c3/91/evQb5iaL_o.png" width="1200"></p> 
<p>我们可以使用</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/5d/3d/iJlk3yVq_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/5a/68/3Bja1hI9_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/62/00/IzQG1O7P_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/9e/43/Lap7ojNI_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/9e/7c/sJOr1lTE_o.png" width="1200"></p> 
<p><img alt="" height="929" src="https://images2.imgbox.com/11/df/yDv5qzqB_o.png" width="1200"></p> 
<p></p> 
<p>DockerDesktop 的图形化界面：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/5f/0e/zvmnYk5E_o.png" width="1200"></p> 
<p></p> 
<p>当我们创建一个容器的时候，它通常以一个干净的文件系统开始，容器启动以后，我们可以在容器中创建文件修改文件。当容器停止以后，容器中的所有数据都会被丢掉。Volumes可以将容器中的目录或者指定路径映射到宿主机的某一个位置和目录上，这样就可以实现数据的持久化，把数据保存到宿主机的磁盘上。</p> 
<p></p> 
<p></p> 
<h3>MaxKB的加载：</h3> 
<p><a href="https://www.youtube.com/redirect?event=video_description&amp;redir_token=QUFFLUhqbjFqRGlYUHNVQmN4UWZVaVBkdk50V09rREdOZ3xBQ3Jtc0tueC1mZHAyMnVyQ0k1WUVNd3VxbFZ6MHFNcjJmaDE0T0hBeFZ4NDExLVBacnhxblU5S2x6aUZTYzMxa3JZZEd6aVd4M3J3TXRhT3hTRV9mQUVEdi05NnRxdEtNRWs1cmxXQXZLYV85VzhFU2N5MFlJVQ&amp;q=https%3A%2F%2Fgithub.com%2F1Panel-dev%2FMaxKB&amp;v=8SiivF_P_zg" title="https://github.com/1Panel-dev/MaxKB">https://github.com/1Panel-dev/MaxKB</a></p> 
<p></p> 
<p>查看虚拟化是否可用：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/46/bc/t2m3McBA_o.png" width="1200"></p> 
<p></p> 
<pre><code>docker run -d --name=maxkb -p 8080:8080 -v ~/.maxkb:/var/lib/postgresql/data 1panel/maxkb

# 用户名: admin
# 密码: MaxKB@123..</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<h3>Ollama的安装：</h3> 
<p></p> 
<p><a href="https://www.youtube.com/redirect?event=video_description&amp;redir_token=QUFFLUhqbnFuRzJGWnZrTmZrbV8tUmtUcHBHRGlMeXBSd3xBQ3Jtc0trRVN2c3N3VDlLSHBQcThjdDZRR3paRUxXZml0SXd2V19VdXpNTmFrbkZRalpvcnU0UDM1MXRBR3Bjc3NuRDhPcGYxTWdySzlfMGhmNGw0MWZVRkRPTTFjOUk2NFBwZEN3b01sbjFadXJxQnBnYkluYw&amp;q=https%3A%2F%2Follama.com%2Fdownload&amp;v=8SiivF_P_zg" rel="nofollow" title="https://ollama.com/download">https://ollama.com/download</a></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/efcf9d1cc4329043811212c0c76b85d5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">shell脚本简单命令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f177a60bff31ab63a6440421d9bbcd08/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">防止连续点击按钮，多次调用接口</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>