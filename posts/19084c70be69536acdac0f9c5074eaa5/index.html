<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SwiftUI 6.0（iOS/iPadOS 18）中全新的 Tab 以及 Sidebar&#43;悬浮 TabView 样式 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/19084c70be69536acdac0f9c5074eaa5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SwiftUI 6.0（iOS/iPadOS 18）中全新的 Tab 以及 Sidebar&#43;悬浮 TabView 样式">
  <meta property="og:description" content="概览 看来苹果一直对 iPadOS 中标签栏（TabView）不甚满意。这不，在 WWDC 2024 中苹果又对 TabView 外观做了大幅度的进化。
现在我们可以在顶部悬浮条和左侧的 Sidebar 两种不同布局之间恣意切换 TabView 的外观啦。而且，这在 SwiftUI 6.0 中显得尤为简单。
在本篇博文中，您将学到如下内容： 概览1. iPadOS 18 中全新的 Sidebar&#43;悬浮 TabView 样式2. 新 TabView 样式在 iOS 18 中的表现3. SwiftUI 6.0 新的 Tab 和 TabSection 原生视图4. 让 Tab 懂你所选5. 调整 Tab 的显示位置总结 看来 iPadOS 18 对 TabView 外观和功能都做了重量级的升级，那小伙伴们还等什么呢？
Let‘s find out！！！😉
1. iPadOS 18 中全新的 Sidebar&#43;悬浮 TabView 样式 为了最大化利用屏幕空间，从 iPadOS 18 开始苹果有史以来第一次将位于底部的 TabView：
神奇的变为悬浮条置于窗口的顶部：
从上面两张图中我们可以对比在 iPadOS 18 中系统默认的时钟 App 中标签栏的新外观。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-20T18:54:47+08:00">
    <meta property="article:modified_time" content="2024-06-20T18:54:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SwiftUI 6.0（iOS/iPadOS 18）中全新的 Tab 以及 Sidebar&#43;悬浮 TabView 样式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/00/b8/L3laW5fq_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_1"></a>概览</h2> 
<p>看来苹果一直对 iPadOS 中标签栏（TabView）不甚满意。这不，在 WWDC 2024 中苹果又对 TabView 外观做了大幅度的进化。</p> 
<p><img src="https://images2.imgbox.com/87/b5/BX8LmkgU_o.gif" alt="在这里插入图片描述"></p> 
<p>现在我们可以在顶部悬浮条和左侧的 Sidebar 两种不同布局之间恣意切换 TabView 的外观啦。而且，这在 SwiftUI 6.0 中显得尤为简单。<br> </p> 
<div class="toc"> 
 <h4>在本篇博文中，您将学到如下内容：</h4> 
 <ul><li><a href="#_1" rel="nofollow">概览</a></li><li><a href="#1_iPadOS_18__Sidebar_TabView__16" rel="nofollow">1. iPadOS 18 中全新的 Sidebar+悬浮 TabView 样式</a></li><li><a href="#2__TabView__iOS_18__39" rel="nofollow">2. 新 TabView 样式在 iOS 18 中的表现</a></li><li><a href="#3_SwiftUI_60__Tab__TabSection__59" rel="nofollow">3. SwiftUI 6.0 新的 Tab 和 TabSection 原生视图</a></li><li><a href="#4__Tab__202" rel="nofollow">4. 让 Tab 懂你所选</a></li><li><a href="#5__Tab__271" rel="nofollow">5. 调整 Tab 的显示位置</a></li><li><a href="#_312" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<p>看来 iPadOS 18 对 TabView 外观和功能都做了重量级的升级，那小伙伴们还等什么呢？</p> 
<p>Let‘s find out！！！😉</p> 
<hr> 
<h2><a id="1_iPadOS_18__Sidebar_TabView__16"></a>1. iPadOS 18 中全新的 Sidebar+悬浮 TabView 样式</h2> 
<p>为了最大化利用屏幕空间，从 iPadOS 18 开始苹果有史以来第一次将位于底部的 TabView：</p> 
<p><img src="https://images2.imgbox.com/37/31/SCqX4EGt_o.png" alt="在这里插入图片描述"></p> 
<p>神奇的变为悬浮条置于窗口的顶部：</p> 
<p><img src="https://images2.imgbox.com/9c/f2/9npj6xpC_o.png" alt="在这里插入图片描述"></p> 
<p>从上面两张图中我们可以对比在 iPadOS 18 中系统默认的时钟 App 中标签栏的新外观。</p> 
<p>当需要显示悬浮条内额外标签页的内容时，我们还可以轻按最左侧的展开按钮将其变形为 Sidebar 模式以便将所有标签项一览无遗：<br> <img src="https://images2.imgbox.com/df/95/zETX6HK5_o.gif" alt="在这里插入图片描述"></p> 
<p>不仅如此，我们还可以恣意调整 Sidebar 和悬浮条中标签项的位置、将它们打包到组中显示，甚至定制它们的外观：</p> 
<p><img src="https://images2.imgbox.com/90/b7/VjBJx67I_o.gif" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/27/9a/HUJREhnF_o.gif" alt="在这里插入图片描述"></p> 
<p>按苹果的话来说：<strong>标签栏的新外观可以最大化利用显示空间，并让我们的 App 极具现代化外观的范儿。</strong> 我们可以在悬浮条和 Sidebar 两者间随意切换从而解决了“麻雀虽小”和“面面俱到”之间鱼与熊掌不可兼得的问题。</p> 
<h2><a id="2__TabView__iOS_18__39"></a>2. 新 TabView 样式在 iOS 18 中的表现</h2> 
<p>为了能保持 iPadOS 18 中新 TabView 的延展性，在 iOS 18 中新的标签栏会“退化”为之前经典的样式。</p> 
<p><img src="https://images2.imgbox.com/09/3a/6xZehZ2Y_o.gif" alt="在这里插入图片描述"></p> 
<p>与之前经典 TabView 外观类似：新的 TabView 在 iOS 18 中右侧额外显示不下的内容也会统统放到单独的 More 标签项中去。</p> 
<p>所不同的是，iOS 18 新标签栏中的标签组（TabSection）会消失的“无影无踪”，其中的标签会被直接放在底部的标签栏中。</p> 
<p>有些小伙伴们可能会好奇：iPhone pro max 大屏设备横屏时新的 TabView 会有怎样的表现？</p> 
<p><img src="https://images2.imgbox.com/ab/7d/E8qkeVgS_o.gif" alt="在这里插入图片描述"></p> 
<p>上面就是 iPhone pro max 横屏时新标签栏在 iOS 18 中的样子。可以看到：除了最右侧 More 标签中的内容被平铺显示以外和之前并无二致。所以想利用大屏 iPhone 设备适配新 TabView 悬浮条外观的小伙伴们可能要暂时失望了。</p> 
<p>了解完 iOS 18 中新标签栏的模样之后，下面就让我们来看看如何用代码展现它们吧。</p> 
<p>在 SwiftUI 6.0 中适配 TabView 新外观超级简单，然我们马上来撸码为证！</p> 
<h2><a id="3_SwiftUI_60__Tab__TabSection__59"></a>3. SwiftUI 6.0 新的 Tab 和 TabSection 原生视图</h2> 
<p>从 SwiftUI 6.0 开始，苹果增加了全新的 Tab 和 TabSection 原生视图，专门为新 TabView 来效“犬马之劳”：</p> 
<p><img src="https://images2.imgbox.com/c8/2c/5K7cThdB_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0d/5d/CR3SKM73_o.png" alt="在这里插入图片描述"><br> 其中，Tab 被用来取代原来的 tabItem() 修改器，而 TabSection 则用来将多个 Tab 汇聚成组。</p> 
<p>在 iPadOS 18 之前，我们是这样描述 TabView 外观的：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
    <span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>horizontalSizeClass<span class="token punctuation">)</span> <span class="token keyword">var</span> hSize
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> tabSelecting <span class="token operator">=</span> <span class="token class-name">TabValue</span><span class="token punctuation">.</span>allTopics
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> moveFromLeading <span class="token operator">=</span> <span class="token boolean">true</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">TabView</span><span class="token punctuation">(</span>selection<span class="token punctuation">:</span> $tabSelecting<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            
            <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Main"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>white<span class="token punctuation">,</span> imageName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"main"</span></span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>tabItem <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Main"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"house"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">TabValue</span><span class="token punctuation">.</span>main<span class="token punctuation">)</span>
            
            <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"This is the blog page"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>tabItem <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Topics"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"pencil"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">TabValue</span><span class="token punctuation">.</span>allTopics<span class="token punctuation">)</span>
            
            <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"SwiftUI topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>purple<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>tabItem <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"SwiftUI"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swift"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">TabValue</span><span class="token punctuation">.</span>swiftUI<span class="token punctuation">)</span>
            
            <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Concurrency topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>green<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>tabItem <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Concurrency"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"timelapse"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">TabValue</span><span class="token punctuation">.</span>concurrency<span class="token punctuation">)</span>
            
            <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Persistence topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>tabItem <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Persistence"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swiftdata"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">TabValue</span><span class="token punctuation">.</span>persistence<span class="token punctuation">)</span>
            
            <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Search the site"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>cyan<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">.</span>tabItem <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Search"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"magnifyingglass"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token class-name">TabValue</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">safeAreaInset</span><span class="token punctuation">(</span>edge<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"当前选中：</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">tabSelecting</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title2<span class="token punctuation">.</span><span class="token function">weight</span><span class="token punctuation">(</span><span class="token punctuation">.</span>heavy<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">.</span>gradient<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">RoundedRectangle</span><span class="token punctuation">(</span>cornerRadius<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>mint<span class="token punctuation">.</span>gradient<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">3.0</span><span class="token punctuation">)</span>
                
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">safeAreaPadding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bottom<span class="token punctuation">,</span> hSize <span class="token operator">==</span> <span class="token punctuation">.</span>compact <span class="token operator">?</span> <span class="token number">100</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> tabSelecting<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>old<span class="token punctuation">,</span>new <span class="token keyword">in</span>
            <span class="token comment">// 为标签切换增加转场动画支持...</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">tint</span><span class="token punctuation">(</span><span class="token punctuation">.</span>pink<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到：<strong>在 TabView 中我们使用 tabItem() 和 tag() 修改器用来构建每一个标签页。</strong></p> 
<p>而在新的 iPadOS 18 和 iOS 18 中，我们彻底抛弃了这两个修改器而改为使用 Tab 和 TabSection 视图来描述每个标签页：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> moveFromLeading <span class="token operator">=</span> <span class="token boolean">true</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">TabView</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Main"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"house"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Main"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>white<span class="token punctuation">,</span> imageName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"main"</span></span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                
            <span class="token punctuation">}</span>

            <span class="token class-name">TabSection</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Blog"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"All topics"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"pencil"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"This is the blog page"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"SwiftUI"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swift"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"SwiftUI topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>purple<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                

                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Concurrency"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"timelapse"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Concurrency topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>green<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Persistence"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swiftdata"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Persistence topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 更多的 TabSections</span>

            <span class="token class-name">Tab</span><span class="token punctuation">(</span>role<span class="token punctuation">:</span> <span class="token punctuation">.</span>search<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Search the site"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>cyan<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">tint</span><span class="token punctuation">(</span><span class="token punctuation">.</span>pink<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>小伙伴们可以留意一下，在上面的代码中我们是如何使用 TabSection 将若干 Tab 聚合成组的。</p> 
<p>运行可以看到，原本底部的标签栏化身为悬浮条一跃横空出世了：</p> 
<p><img src="https://images2.imgbox.com/e6/06/lZhCVVHR_o.gif" alt="在这里插入图片描述"></p> 
<p>要想让标签栏进一步支持 Sidebar 切换显示，我们只需将 .sidebarAdaptable 样式应用在 TabView 上即可：</p> 
<pre><code class="prism language-swift"><span class="token class-name">TabView</span> <span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">tabViewStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>sidebarAdaptable<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1e/75/BliT1wvQ_o.gif" alt="在这里插入图片描述"></p> 
<hr> 
<p>值得注意的是：要想 iOS 18 之前的标签栏旧语法支持悬浮条显示，我们无需修改半行代码。</p> 
<p>而只需一行 tabViewStyle(.sidebarAdaptable) 语句的加持，我们也同样可以让旧标签栏支持 Sidebar 样式。</p> 
<hr> 
<h2><a id="4__Tab__202"></a>4. 让 Tab 懂你所选</h2> 
<p>现在我们新的 TabView 已经灵动的“跃然于纸上”了，不过如果我们希望动态跟踪用户选择了哪个 Tab 又该如何是好呢？</p> 
<p>在 iOS 18 中使用 tag() 标识标签页的方式已经被废弃，取而代之的是全新的包含 value 参数的 Tag 构造器方法：</p> 
<p><img src="https://images2.imgbox.com/c1/76/s5RxudBx_o.png" alt="在这里插入图片描述"></p> 
<p>注意该 Tab 构造器必须放在 TabView(selection:) 特定的构造器闭包中才能编译通过。</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
    <span class="token attribute atrule">@Environment</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">.</span>horizontalSizeClass<span class="token punctuation">)</span> <span class="token keyword">var</span> hSize
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> tabSelecting <span class="token operator">=</span> <span class="token class-name">TabValue</span><span class="token punctuation">.</span>allTopics
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> moveFromLeading <span class="token operator">=</span> <span class="token boolean">true</span>
    
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">TabView</span><span class="token punctuation">(</span>selection<span class="token punctuation">:</span> $tabSelecting<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Main"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"house"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>main<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Main"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>white<span class="token punctuation">,</span> imageName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"main"</span></span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                
            <span class="token punctuation">}</span>
            
            <span class="token class-name">TabSection</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Blog"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"All topics"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"pencil"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token class-name">TabValue</span><span class="token punctuation">.</span>allTopics<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"This is the blog page"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"SwiftUI"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swift"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>swiftUI<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"SwiftUI topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>purple<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                        
                <span class="token punctuation">}</span>                

                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Concurrency"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"timelapse"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>concurrency<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Concurrency topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>green<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Persistence"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swiftdata"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>persistence<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Persistence topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Tab</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token punctuation">.</span>search<span class="token punctuation">,</span> role<span class="token punctuation">:</span> <span class="token punctuation">.</span>search<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Search the site"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>cyan<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token punctuation">.</span><span class="token function">tabViewStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>sidebarAdaptable<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">safeAreaInset</span><span class="token punctuation">(</span>edge<span class="token punctuation">:</span> <span class="token punctuation">.</span>bottom<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"当前选中：</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">tabSelecting</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title2<span class="token punctuation">.</span><span class="token function">weight</span><span class="token punctuation">(</span><span class="token punctuation">.</span>heavy<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">.</span>gradient<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">RoundedRectangle</span><span class="token punctuation">(</span>cornerRadius<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foregroundStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>mint<span class="token punctuation">.</span>gradient<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">shadow</span><span class="token punctuation">(</span>radius<span class="token punctuation">:</span> <span class="token number">3.0</span><span class="token punctuation">)</span>
                
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">safeAreaPadding</span><span class="token punctuation">(</span><span class="token punctuation">.</span>bottom<span class="token punctuation">,</span> hSize <span class="token operator">==</span> <span class="token punctuation">.</span>compact <span class="token operator">?</span> <span class="token number">100</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> tabSelecting<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>old<span class="token punctuation">,</span>new <span class="token keyword">in</span>
            <span class="token comment">// 标签切换转场动画支持代码从略...</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">tint</span><span class="token punctuation">(</span><span class="token punctuation">.</span>pink<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>现在，我们已经能够捕获到用户当前选择的标签页啦：</p> 
<p><img src="https://images2.imgbox.com/9a/e7/Xk1K3oQZ_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="5__Tab__271"></a>5. 调整 Tab 的显示位置</h2> 
<p>除了在 TabView 中用 Tab 和 TabSection 妥善放置各个标签页以外，我们还可以进一步决定它们到底能够在何处显示。</p> 
<p>这是通过 tabPlacement() 修改器方法来实现的：</p> 
<p><img src="https://images2.imgbox.com/f7/10/Vo3SUhWz_o.png" alt="在这里插入图片描述"></p> 
<p>其中对于 TabPlacement 类型的参数值我们有 3 种选择：</p> 
<p><img src="https://images2.imgbox.com/b4/76/sNmFCZgd_o.png" alt="在这里插入图片描述"></p> 
<p>比如假若我们希望将 TabSection(“Blog”) 内部中间两个 Tab 始终放在悬浮条里，我们可以分别为其调用 .tabPlacement(.pinned) 修改器方法：</p> 
<pre><code class="prism language-swift"><span class="token class-name">TabSection</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Blog"</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"All topics"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"pencil"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token class-name">TabValue</span><span class="token punctuation">.</span>allTopics<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"This is the blog page"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>yellow<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"SwiftUI"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swift"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>swiftUI<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"SwiftUI topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>purple<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
            
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">tabPlacement</span><span class="token punctuation">(</span><span class="token punctuation">.</span>pinned<span class="token punctuation">)</span>
    

    <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Concurrency"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"timelapse"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>concurrency<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Concurrency topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>green<span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">tabPlacement</span><span class="token punctuation">(</span><span class="token punctuation">.</span>pinned<span class="token punctuation">)</span>

    <span class="token class-name">Tab</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Persistence"</span></span><span class="token punctuation">,</span> systemImage<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"swiftdata"</span></span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token punctuation">.</span>persistence<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AnimSubView</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">"Persistence topic"</span></span><span class="token punctuation">,</span> bgColor<span class="token punctuation">:</span> <span class="token punctuation">.</span>blue<span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isMoveFromLeading<span class="token punctuation">:</span> moveFromLeading<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>现在，这两个标签项会一如既往的驻留在顶部的悬浮条中，棒棒哒：</p> 
<p><img src="https://images2.imgbox.com/7e/d7/ah7KDeqJ_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="_312"></a>总结</h2> 
<p>在本篇博文中，我们介绍了 SwiftUI 6.0（iPadOS 18/iOS 18）新标签页中新增的 Tab 和 TabSection 原生视图，并进一步讨论了如何让 TabView 支持 Sidebar 样式以及其它有趣的新特性。</p> 
<p>感谢观赏，再会！😎</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d49b60b71ea0326da1fc268fe84cbbe3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matlab数学建模实战应用：案例1 - 股票价格预测</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c2edb052f0b2cc6811031e3b9c0ce07b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于椭圆的方程（有Python画的动图）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>