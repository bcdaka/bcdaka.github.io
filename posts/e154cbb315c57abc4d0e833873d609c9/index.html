<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HBase集群部署 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e154cbb315c57abc4d0e833873d609c9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="HBase集群部署">
  <meta property="og:description" content="HBase集群部署安装 在安装HBase之前，一定需要考虑HBase=和Hadoop之间版本的兼容性。由于之前已经安装的是Hadoop3.1.3版本，进入HBase官网Apache HBase ™ Reference Guide查看兼容性，具体兼容表格如下图所示：
从上图可得知，Hadoop3.1.1&#43;版本可搭配HBase2.1.x版本与HBase2.2.x版本，教程挑选的HBase版本为HBase2.2.2，具体安装步骤如下。
HBase中有两个角色，一个是Hmaster，是Hbase集群的管理节点，HRegionServer，主要负责存储数据节点，本次案例的集群配置如下表所示。
集群节点HMasterHRegionServermaster√√slaves1√slaves2√ Hadoop部署 HBase将数据存储在HDFS上，因此部署HBase前需要把Hadoop部署上，具体部署操作参考Hadoop部署文档。Hadoop完全分布式部署
Zookeeper集群部署 Hbase需要Zookeeper工具存储元数据信息，因此部署HBase前，需要把ZK集群部署上，具体部署操作参考Zookeeper部署文档。Zookeeper集群安装部署
HBase集群部署 访问HBase官网下载安装文件hbase-2.2.2-bin.tar.gz文件：https://archive.apache.org/dist/hbase/2.2.2/。
使用XFTP工具上传HBase安装包到master节点的/root/module目录下。
解压Hbase安装包到/usr/local目录下，并修改安装目录名称
cd /root/module tar -zxvf hbase-2.2.2-bin.tar.gz -C /usr/local/ sudo mv /usr/local/hbase-2.2.2 /usr/local/hbase 配置环境变量，将Hbase路径配置到/etc/profile文件中。
vim /etc/profile 在/etc/profile尾部添加HBASE_HOME变量，并把HBase的bin目录追加到PATH中，如下图所示。
export HBASE_HOME=/usr/local/hbase export PATH=$PATH:$HBASE_HOME/bin 重新加载环境变量
source /etc/profile 设置配置文件
Hbase所有的配置文件，在Hbase的conf目录下。
cd /usr/local/hbase/conf ① 配置hbase-site.xml文件，编辑hbase-site.xml文件，在&lt;configuration&gt;标签之间添加以下内容
&lt;configuration&gt; &lt;property&gt; &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; &lt;value&gt;true&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.rootdir&lt;/name&gt; &lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.tmp.dir&lt;/name&gt; &lt;value&gt;/usr/local/hbase/datta/tmp&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;zookeeper.znode.parent&lt;/name&gt; &lt;value&gt;/hbase&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; &lt;value&gt;/opt/data/zookeeper/zkdata&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; &lt;value&gt;master:2181,slaves1:2181,slaves2:2181&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;hbase.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-07T17:57:47+08:00">
    <meta property="article:modified_time" content="2024-08-07T17:57:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HBase集群部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="HBase_0"></a>HBase集群部署安装</h2> 
<p>在安装HBase之前，一定需要考虑HBase=和Hadoop之间版本的兼容性。由于之前已经安装的是Hadoop3.1.3版本，进入HBase官网<a href="https://hbase.apache.org/book.html#hadoop" rel="nofollow">Apache HBase ™ Reference Guide</a>查看兼容性，具体兼容表格如下图所示：<br> <img src="https://images2.imgbox.com/55/d7/vUQcDcEg_o.png" alt="在这里插入图片描述"><br> 从上图可得知，Hadoop3.1.1+版本可搭配HBase2.1.x版本与HBase2.2.x版本，教程挑选的HBase版本为HBase2.2.2，具体安装步骤如下。</p> 
<p>HBase中有两个角色，一个是Hmaster，是Hbase集群的管理节点，HRegionServer，主要负责存储数据节点，本次案例的集群配置如下表所示。</p> 
<table><thead><tr><th>集群节点</th><th>HMaster</th><th>HRegionServer</th></tr></thead><tbody><tr><td>master</td><td>√</td><td>√</td></tr><tr><td>slaves1</td><td></td><td>√</td></tr><tr><td>slaves2</td><td></td><td>√</td></tr></tbody></table> 
<h4><a id="Hadoop_16"></a>Hadoop部署</h4> 
<p>HBase将数据存储在HDFS上，因此部署HBase前需要把Hadoop部署上，具体部署操作参考Hadoop部署文档。<a href="https://blog.csdn.net/2401_82567159/article/details/140834404">Hadoop完全分布式部署</a></p> 
<h4><a id="Zookeeper_20"></a>Zookeeper集群部署</h4> 
<p>Hbase需要Zookeeper工具存储元数据信息，因此部署HBase前，需要把ZK集群部署上，具体部署操作参考Zookeeper部署文档。<a href="https://blog.csdn.net/2401_82567159/article/details/140915179">Zookeeper集群安装部署</a></p> 
<h4><a id="HBase_24"></a>HBase集群部署</h4> 
<ol><li> <p>访问HBase官网下载安装文件hbase-2.2.2-bin.tar.gz文件：https://archive.apache.org/dist/hbase/2.2.2/。</p> </li><li> <p>使用XFTP工具上传HBase安装包到master节点的/root/module目录下。</p> </li><li> <p>解压Hbase安装包到/usr/local目录下，并修改安装目录名称</p> <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /root/module
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> hbase-2.2.2-bin.tar.gz <span class="token parameter variable">-C</span> /usr/local/
<span class="token function">sudo</span>  <span class="token function">mv</span>  /usr/local/hbase-2.2.2  /usr/local/hbase
</code></pre> </li><li> <p>配置环境变量，将Hbase路径配置到/etc/profile文件中。</p> <pre><code class="prism language-bash"><span class="token function">vim</span> /etc/profile
</code></pre> <p>在/etc/profile尾部添加HBASE_HOME变量，并把HBase的bin目录追加到PATH中，如下图所示。</p> <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_HOME</span><span class="token operator">=</span>/usr/local/hbase
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HBASE_HOME</span>/bin
</code></pre> </li><li> <p>重新加载环境变量</p> <pre><code class="prism language-bash"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> </li><li> <p>设置配置文件<br> Hbase所有的配置文件，在Hbase的conf目录下。</p> <pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /usr/local/hbase/conf
</code></pre> <p>① 配置hbase-site.xml文件，编辑hbase-site.xml文件，在<code>&lt;configuration&gt;</code>标签之间添加以下内容</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
   		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.cluster.distributed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.rootdir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://master:9000/hbase<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/usr/local/hbase/datta/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>zookeeper.znode.parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/hbase<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.zookeeper.property.dataDir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/opt/data/zookeeper/zkdata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.zookeeper.quorum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>master:2181,slaves1:2181,slaves2:2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.wal.provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>filesystem<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hbase.unsafe.stream.capability.enforce<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <p>②配置regionservers，在regionservers处，添加Region Server节点。</p> <pre><code class="prism language-bash">master
slaves1
slaves2
</code></pre> <p>③配置hbase-env.sh，在文件开头添加以下内容。</p> <p>HBASE_MANAGES_ZK如果为true时，使用Hbase内置的ZK工具，为false时，则使用外置的ZK。</p> <pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_MANAGES_ZK</span><span class="token operator">=</span>false
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/jdk1.8
</code></pre> </li><li> <p>配置完成后，分发hbase目录到slaves1和slaves2节点。</p> <pre><code>scp -r /usr/local/hbase root@slaves1:/usr/local
scp -r /usr/local/hbase root@slaves2:/usr/local
scp -r /etc/profile root@slaves1:/etc
scp -r /etc/profile root@slaves2:/etc
</code></pre> </li><li> <p>启动集群</p> <p>① 启动Hadoop，在master节点运行以下指令启动Hadoop集群。</p> <pre><code class="prism language-bash">start-all.sh
</code></pre> <p>② 启动Zookeeper，在三个节点运行以下指令启动Zookeeper集群。</p> <pre><code class="prism language-bash">zkServer.sh start
</code></pre> <p>③ 启动HBase集群，在master节点运行以下指令启动HBase集群。</p> <pre><code>start-hbase.sh
</code></pre> <p>在各节点使用jps指令查看各个进程运行情况。</p> <p><img src="https://images2.imgbox.com/8d/f4/RB4ksgow_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/61/ad/Gb65w5eo_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c2/12/gG85DXkZ_o.png" alt="在这里插入图片描述"></p> </li><li> <p>测试HBase集群。</p> <p>使用<code>hbase shell</code>指令，进入到hbase命令行模式。</p> <pre><code class="prism language-bash">hbase shell
</code></pre> <p>创建命名空间<code>school_ns</code></p> <pre><code class="prism language-shell">create_namespace <span class="token string">'school_ns'</span>
</code></pre> <p>查看命名空间</p> <pre><code class="prism language-shell">list_namespace
</code></pre> </li></ol> 
<p><img src="https://images2.imgbox.com/6b/4f/LcZuI6cl_o.png" alt="在这里插入图片描述"></p> 
<p>删除命名空间</p> 
<pre><code class="prism language-shell">drop_namespace <span class="token string">'school_ns'</span>
</code></pre> 
<p>查看命名空间</p> 
<pre><code>list_namespace
</code></pre> 
<p><img src="https://images2.imgbox.com/0d/d7/z19ol09O_o.png" alt="在这里插入图片描述"></p> 
<p>退出</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">exit</span>
</code></pre> 
<ol start="10"><li> <p>Hbase提供了Web管理界面，浏览器打开http://master:16010 即可访问<br> <img src="https://images2.imgbox.com/bb/70/vUbSpBai_o.png" alt="在这里插入图片描述"></p> </li><li> <p>关闭集群</p> <p>在master节点运行以下指令，关闭hbase集群。</p> <pre><code>stop-hbase.sh
</code></pre> <p>在三台机器节点运行以下指令，关闭ZK集群</p> <pre><code class="prism language-bash">zkServer.sh stop
</code></pre> <p>在master节点运行以下指令，关闭hadoop集群</p> <pre><code class="prism language-bash">stop-all.sh
</code></pre> </li><li> <p>关闭集群</p> <p>在master节点运行以下指令，关闭hbase集群。</p> <pre><code>stop-hbase.sh
</code></pre> <p>在三台机器节点运行以下指令，关闭ZK集群</p> <pre><code class="prism language-bash">zkServer.sh stop
</code></pre> <p>在master节点运行以下指令，关闭hadoop集群</p> <pre><code class="prism language-bash">stop-all.sh
</code></pre> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6050dc2efc561d134648bfadd2d88834/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">探索灵办AI：智能办公的好帮手</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d9a8f9e6ee60d953e737cf4c1571a47a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】链表从实现到应用，保姆级攻略</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>