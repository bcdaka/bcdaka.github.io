<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python pandas 对DataFrame进行遍历(持续更新） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b294d2e4a725437a90e267b183eb3922/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python pandas 对DataFrame进行遍历(持续更新）">
  <meta property="og:description" content="三种用迭代器的方法(items,iterrows,itertuples)：沿着行/列对所有元素遍历，适合对每个元素进行操作简单dolumns，loc遍历：遍历每一行/列，适合对每行/列进行求和、离散等整体操作for&#43;zip: 适合选取较少的特定行/列进行操作 之后看到其他好用方法，或者合适的拓展也会继续更新
有错误请指正，欢迎评论建议
items,iterrows,itertuples： items(): 以 (列名, Series) 对的形式遍历 DataFrame 的列。 函数原型：DataFrame.iteritems(None)
返回：返回一个迭代器，产生 （列名，列内容Series） 对的元组。
import pandas as pd data = {&#39;A&#39;: [1, 2, 3], &#39;B&#39;: [4, 5, 6]} df = pd.DataFrame(data) for column, series in df.items(): print(f&#34;Column: {column}&#34;) print(f&#34;Series:\n{series}\n&#34;) 输出：
iterrows()：以 (行下标, Series) 对的形式遍历 DataFrame 的行。 原型：DataFrame.iterrows()
返回：返回迭代器（行号index，行内数据Series）
import pandas as pd data = {&#39;A&#39;: [1, 2,], &#39;B&#39;: [4, 5,]} df = pd.DataFrame(data) for index, row in df.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-25T22:18:54+08:00">
    <meta property="article:modified_time" content="2024-02-25T22:18:54+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python pandas 对DataFrame进行遍历(持续更新）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<ul><li>三种用迭代器的方法(items,iterrows,itertuples)：沿着行/列对所有元素遍历，适合对每个元素进行操作</li><li>简单dolumns，loc遍历：遍历每一行/列，适合对每行/列进行求和、离散等整体操作</li><li>for+zip: 适合选取较少的特定行/列进行操作</li></ul> 
<p>       之后看到其他好用方法，或者合适的拓展也会继续更新</p> 
<p>        有错误请指正，欢迎评论建议</p> 
<p></p> 
<h2>items,iterrows,itertuples：</h2> 
<ul><li> <h3>items(): 以 <code>(列名, Series)</code> 对的形式遍历 DataFrame 的列。</h3> </li></ul> 
<p>　　　　函数原型：DataFrame.iteritems(None)</p> 
<p>　　　　返回：返回一个迭代器，产生 （列名，列内容Series） 对的元组。</p> 
<p>        </p> 
<pre><code class="language-python">import pandas as pd

data = {'A': [1, 2, 3], 'B': [4, 5, 6]}
df = pd.DataFrame(data)

for column, series in df.items():
    print(f"Column: {column}")
    print(f"Series:\n{series}\n")</code></pre> 
<p>输出：</p> 
<p><img alt="" height="243" src="https://images2.imgbox.com/f7/1a/JCvcJAfv_o.png" width="264"></p> 
<p></p> 
<ul><li> <h3>iterrows()：以 <code>(行下标, Series)</code> 对的形式遍历 DataFrame 的行。</h3> </li></ul> 
<p>        原型：DataFrame.iterrows()</p> 
<p>        返回：返回迭代器（行号index，行内数据Series）</p> 
<pre><code class="language-python">import pandas as pd

data = {'A': [1, 2,], 'B': [4, 5,]}
df = pd.DataFrame(data)

for index, row in df.iterrows():
    # 处理每一行的逻辑
    print(f"row_index: {index}")
    print(f"eow_items\n:{row}\n")
</code></pre> 
<p>输出：</p> 
<p> <img alt="" height="274" src="https://images2.imgbox.com/af/b0/OM2ape6J_o.png" width="445"></p> 
<ul><li> <h3>itertuples()：以命名元组的方式遍历行</h3> </li></ul> 
<p>        函数原型：DataFrame.itertuples(<em>index=True</em>, <em>name='Pandas'</em>)</p> 
<p>                        index: True则返回的tuple中首个元素为行号</p> 
<p>                        name: 字符串或者None，作为返回的tuple的名字，如果为None则返回常规tuple</p> 
<p>        返回：一个迭代器，每一行的命名元组(name，row_values)</p> 
<pre><code class="language-python">import pandas as pd
data = {'A': [1, 2,], 'B': [4, 5,]}
df = pd.DataFrame(data)

###1.默认
for row in df.itertuple():
    print(row)

'''输出
Pandas(Index=0, A=1, B=4)
Pandas(Index=1, A=2, B=5)
'''
###


##2.不输出index
for row in df.itertuples(index=False):
    print(row)

'''输出
Pandas(A=1, B=4)
Pandas(A=2, B=5)
'''
###


##3. 输出常规tuple
for row in df.itertuples(name=None):
    print(row)

'''输出
(0, 1, 4)
(1, 2, 5)
'''</code></pre> 
<h2> columns+values，index</h2> 
<ul><li> <h3>columns:获取dataframe的列标签</h3> </li></ul> 
<p>        返回：&lt;class 'pandas.core.indexes.base.Index'&gt; (不重要，理解为列标签，获取到列名和数据类型，但<strong>无法直接进行操作）</strong></p> 
<p>         如果想要获取列标签的数组，可以用df.columns.values，想得到list类型就加上tolist()</p> 
<pre><code class="language-python">import pandas as pd

data = {'A': [1, 2,], 'B': [4, 5,],'C':[6,7]}
df = pd.DataFrame(data)

print('column names and type: ',df.columns)
'''
输出：
column names and type:  Index(['A', 'B', 'C'], dtype='object')
'''

print('column name: ',df.columns.values)#数组类型。
'''
输出：
column name:  ['A' 'B' 'C']
'''
print('column name: ',df.columns.tolist())#等同于list(df.columns)
print('column name: ',list(df))
print('column name: ',list(df.columns))
'''
以上三种均输出
column name:  ['A', 'B', 'C']
'''</code></pre> 
<ul><li> <h3>index:DataFrame的索引标签</h3> </li></ul> 
<p>        和columns类似，在这里就不赘述了。</p> 
<p>        对每行/每列进行某操作时，常用这两个方法。但是很多时候可以被df.apply(function，axis=0)替代（axis默认为0，0沿着列操作，1沿着行操作）</p> 
<pre><code class="language-python">import pandas as pd

data = {'A': [1, 2,], 'B': [4, 5,],'C':[6,7]}
df = pd.DataFrame(data)
# 使用 columns 遍历 DataFrame 的列名
print("columns:")
for column in df.columns:
    print(column)
'''输出
columns:
A
B
C
'''

# 使用 index 遍历 DataFrame 的行索引
print("\nindexs:")
for index in df.index:
    print(index)
'''输出
indexs:
0
1
'''</code></pre> 
<h2>for+zip：取特定几列/行遍历</h2> 
<p>这个方法很简单，运行效率高。但是只适用于对特定几行/列遍历，如果列或行较多的时候书写很繁琐，且可能因个人粗心原因出错。</p> 
<pre><code class="language-python">import pandas as pd
data = {'A': [1, 2,], 'B': [4, 5,],'C':[6,7]}
df = pd.DataFrame(data)

#对特定几列遍历
#for a,b,c in zip([df[col] for col in df.columns])
for a,b in zip(df['A'],df['B']):
    print('a: ',a,' b:',b)
'''输出
a:  1  b: 4
a:  2  b: 5
'''


#对特定几行遍历
for row1,row2 in zip(df.iloc[0],df.iloc[1]):#如果时标签索引则用df.loc['RowName']
    print('row1: ',row1,' row2:' ,row2)
'''输出
row1:  1  row2: 2
row1:  4  row2: 5
row1:  6  row2: 7
'''</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40fe76db26d4b9cb3961dda748a64e4f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">具身智能（Embodied AI）的概念、核心要素、难点及突破性进展</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6d411056fb9135c0c593c5576086c216/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java篇-无法访问org.springframework.boot.SpringApplication错误的类文件(图文详解)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>