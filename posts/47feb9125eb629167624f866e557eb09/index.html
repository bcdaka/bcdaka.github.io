<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决新版Edge浏览器右上角不显示Copilot图标的问题 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/47feb9125eb629167624f866e557eb09/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="解决新版Edge浏览器右上角不显示Copilot图标的问题">
  <meta property="og:description" content="概述 本文主要介绍一种通过修改配置文件来解决新版Edge浏览器右上角不显示Copilot图标的方法，该方法适用于Edge的正式版和Dev版。
经测试，此方法适用于windows、macOS和linux系统下的Edge浏览器。
另外，文章最后还补充了一种通过下载旧版Edge浏览器解决这个问题的方法，以备将来第一种方法失效。
前提 需要科学上网，对节点没有限制。但如果使用规则/分流模式，需要让 *.bing.com 域名的流量走代理
操作系统：Windows10, macOS Catalina, Debian
测试Edge版本：
正式版：120.0.2210.91 (正式版本) (64 位) 和121.0.2277.83 (正式版本) (64 位)
Dev版：122.0.2353.0 (Official build) dev (64-bit)
解决思路 经过逐步排查发现，正式版Edge浏览器会把用户数据保存在下面这个目录：
Windows系统： %APPDATA%\..\Local\Microsoft\Edge\User Data
linux系统： $HOME/.config/microsoft-edge
macOS系统： $HOME/Library/Application Support/Microsoft Edge
而Dev版Edge浏览器会把用户数据保存在下面的目录：
Windows系统： %APPDATA%\..\Local\Microsoft\Edge Dev\User Data
linux系统： $HOME/.config/microsoft-edge-dev
macOS系统： $HOME/Library/Application Support/Microsoft Edge Dev
而决定浏览器右上角Copilot图标显示与否的开关就藏在浏览器用户数据目录下的某个配置文件中，120版本在 Local State 文件，121及以上版本在 Default 文件夹的 Preferences 文件中。
如此，只需要稍微修改一下这个文件就可以了。
具体步骤 1. 彻底关闭Edge浏览器 （1）Windows和Linux系统关闭Edge 需要彻底关闭浏览器，以防有插件让Edge还在后台运行。
点击浏览器右上角三个点，点击下拉列表的 关闭 Microsoft Edge
在Windows系统中，为了确认Edge浏览器已经完全退出，可以在任务管理器的详细信息中查找是否有名为 msedge.exe 的进程，若有则需要手动结束进程，若无说明Edge浏览器已完全退出。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-14T17:38:45+08:00">
    <meta property="article:modified_time" content="2024-03-14T17:38:45+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决新版Edge浏览器右上角不显示Copilot图标的问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_1"></a>概述</h2> 
<p>本文主要介绍一种通过修改配置文件来解决新版Edge浏览器右上角不显示Copilot图标的方法，该方法适用于Edge的正式版和Dev版。</p> 
<p>经测试，此方法适用于windows、macOS和linux系统下的Edge浏览器。</p> 
<p>另外，文章最后还补充了一种通过下载旧版Edge浏览器解决这个问题的方法，以备将来第一种方法失效。</p> 
<h2><a id="_9"></a>前提</h2> 
<p>需要科学上网，对节点没有限制。但如果使用规则/分流模式，需要让 *.bing.com 域名的流量走代理</p> 
<p>操作系统：Windows10, macOS Catalina, Debian</p> 
<p>测试Edge版本：</p> 
<p>正式版：120.0.2210.91 (正式版本) (64 位) 和121.0.2277.83 (正式版本) (64 位)</p> 
<p>Dev版：122.0.2353.0 (Official build) dev (64-bit)</p> 
<h2><a id="_21"></a>解决思路</h2> 
<p>经过逐步排查发现，正式版Edge浏览器会把用户数据保存在下面这个目录：</p> 
<p><strong>Windows系统：</strong> <code>%APPDATA%\..\Local\Microsoft\Edge\User Data</code></p> 
<p><strong>linux系统：</strong> <code>$HOME/.config/microsoft-edge</code></p> 
<p><strong>macOS系统：</strong> <code>$HOME/Library/Application Support/Microsoft Edge</code></p> 
<p>而Dev版Edge浏览器会把用户数据保存在下面的目录：</p> 
<p><strong>Windows系统：</strong> <code>%APPDATA%\..\Local\Microsoft\Edge Dev\User Data</code></p> 
<p><strong>linux系统：</strong> <code>$HOME/.config/microsoft-edge-dev</code></p> 
<p><strong>macOS系统：</strong> <code>$HOME/Library/Application Support/Microsoft Edge Dev</code></p> 
<p>而决定浏览器右上角Copilot图标显示与否的开关就藏在浏览器用户数据目录下的某个配置文件中，120版本在 <code>Local State</code> 文件，121及以上版本在 <code>Default</code> 文件夹的 <code>Preferences</code> 文件中。</p> 
<p>如此，只需要稍微修改一下这个文件就可以了。</p> 
<h2><a id="_43"></a>具体步骤</h2> 
<h3><a id="1_Edge_45"></a>1. 彻底关闭Edge浏览器</h3> 
<h4><a id="1WindowsLinuxEdge_47"></a>（1）Windows和Linux系统关闭Edge</h4> 
<p>需要彻底关闭浏览器，以防有插件让Edge还在后台运行。</p> 
<p>点击浏览器右上角三个点，点击下拉列表的 <strong>关闭 Microsoft Edge</strong></p> 
<p>在Windows系统中，为了确认Edge浏览器已经完全退出，可以在任务管理器的详细信息中查找是否有名为 <code>msedge.exe</code> 的进程，若有则需要手动结束进程，若无说明Edge浏览器已完全退出。</p> 
<h4><a id="2macOSEdge_55"></a>（2）macOS系统关闭Edge</h4> 
<p>在Edge浏览器长按 <code>Command + Q</code> 退出。</p> 
<h3><a id="2__59"></a>2. 修改配置文件</h3> 
<h4><a id="1_61"></a>（1）找到用户数据目录</h4> 
<p>首先根据上文的信息，以及自己的操作系统和Edge浏览器版本找到对应的浏览器用户数据目录。如：windows10的正式版Edge浏览器的用户数据目录为 <code>%APPDATA%\..\Local\Microsoft\Edge\User Data</code>。</p> 
<ul><li>如何打开这个目录</li></ul> 
<p>在windows10中：按 <code>win + E</code> 打开资源管理器，将这个路径复制到地址栏，按回车即可进入该目录。</p> 
<p>在macOS中：正式版Edge浏览器的用户数据目录为 <code>$HOME/Library/Application Support/Microsoft Edge</code></p> 
<p>首先在访达中按 <code>Shift + Command + H</code> 打开 <code>$HOME</code>。其中的 <code>Library</code> 文件夹是隐藏起来的，如果用户主目录中没有，可以按 <code>Shift + Command + .</code> 显示出来，如果系统语言是中文的话，这个文件夹名为 <code>资源库</code>。随后逐级打开文件夹进入到该目录。</p> 
<p><img src="https://images2.imgbox.com/6a/72/jZyDwUjy_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_76"></a>（2）确定浏览器版本</h4> 
<p>在Edge浏览器地址栏输入 <code>edge://version</code>，按回车打开，第一行显示的就是版本</p> 
<h4><a id="3_80"></a>（3）编辑配置文件</h4> 
<p><strong>120版本</strong></p> 
<p>如果Edge浏览器版本是120.x.xxxx.xx，则需要修改用户数据目录下的 <code>Local State</code> 文件，这是一个以JSON格式保存数据的文本文件，用文本编辑器打开。</p> 
<p>搜索 <code>"variations_country":</code>，将其后紧接着的 <code>"CN"</code> 替换为 <code>"US"</code>，这对双引号中的值为一个表示国家的2字母代码，当它的值为 <code>CN</code>、<code>RU</code> 等Copilot服务不可用的国家时，Copilot图标将会被屏蔽；当它的值为 <code>US</code>、<code>FR</code> 等国家时，Copilot就可用了。</p> 
<p>也就是说，需要将 <code>"variations_country":"CN"</code> 替换为 <code>"variations_country":"US"</code>。</p> 
<p>修改完成后保存退出即可。</p> 
<p><strong>121及以上版本</strong></p> 
<p>如果Edge浏览器版本是121.x.xxxx.xx或122.x.xxxx.xx时，需要在浏览器用户数据目录下找到诸如 <code>Default</code>、<code>Profile 2</code>、<code>Profile 3</code> 等的用户档案文件夹，再从中找到 <code>Preferences</code> 文件。</p> 
<p>众所周知，Edge浏览器可以登录多个用户/账号，每个登录过的用户都会有其独有的个人数据，每一个用户的这些数据都会保存在浏览器用户数据目录下的一个独立的文件夹中。当只登录过一个用户时，浏览器用户数据目录中就会有一个名为 <code>Default</code> 的文件夹用于保存该用户的个人数据，在此基础上再创建/登录一个新的用户时，这个新用户的个人数据就会保存在浏览器用户数据目录中的 <code>Profile 2</code> 文件夹中，当创建第3个用户时，其个性化数据会保存再 <code>Profile 3</code> 文件夹中，以此类推。</p> 
<p>暂且将这些浏览器用户数据目录中的 <code>Default</code> 和类似 <code>Profile 2</code>、<code>Profile 3</code> 等的文件夹称为用户档案文件夹(Profile)，每一个用户档案文件夹都保存有一个Edge浏览器用户的个人数据。</p> 
<p>在每一个用户档案文件夹中都有一个名为 <code>Preferences</code> 的文件，这是一个以JSON格式保存数据的文本文件，用文本编辑器打开。</p> 
<p>搜索 <code>"chat_ip_eligibility_status":</code>，将其后紧接着的 <code>false</code> 替换为 <code>true</code>。</p> 
<p>也就是说，需要将 <code>"chat_ip_eligibility_status":false</code> 替换为 <code>"chat_ip_eligibility_status":true</code></p> 
<blockquote> 
 <p>注：若将该文件读取为JSON，则 <code>chat_ip_eligibility_status</code> 这个键位于 <code>browser</code> 键之下。</p> 
</blockquote> 
<p>若文件中找不到 <code>chat_ip_eligibility_status</code> 这个键，则需要手动添加，先搜索 <code>"browser":{<!-- --></code>，然后将 <code>"browser":{<!-- --></code> 替换为 <code>"browser":{"chat_ip_eligibility_status":true,</code></p> 
<p>修改完成后保存退出即可。</p> 
<p>当你需要在哪个用户启用Copilot图标，就找到这个用户对应的用户档案文件夹，修改其中的 <code>Preferences</code> 文件。</p> 
<p>当需要同时启用多个用户的Copilot图标时，建议使用脚本修改。</p> 
<p><strong>自动化修改</strong></p> 
<p>当然，还可以写个Python脚本，实现一键修改，这样就不用每次都手动修改了。</p> 
<p>适用于各个版本和系统的Python脚本：</p> 
<p><a href="https://github.com/jiarandiana0307/patch-edge-copilot">https://github.com/jiarandiana0307/patch-edge-copilot</a></p> 
<p>这个脚本能自动关闭Edge，根据具体浏览器版本修改特定的配置文件，随后重启浏览器，无须再手动执行退出Edge、改配置文件等操作。</p> 
<h3><a id="3_Edge_126"></a>3. 科学上网并打开Edge浏览器</h3> 
<p>此时右上角的Copilot图标回来了。</p> 
<blockquote> 
 <p>注意：如果此后打开Edge时没有科学上网，可能会导致Copilot图标再次消失，重复以上步骤即可</p> 
</blockquote> 
<h2><a id="_132"></a>总结</h2> 
<p>以下是笔者对相关原理的个人猜测：</p> 
<p>Edge浏览器右上角的Copilot图标之所以会消失，是因为用户曾在Edge浏览器中以国内IP访问过Bing的AI服务，这样，Edge浏览器就会认定用户在国内，由于微软不在国内提供Bing的AI服务，Edge浏览器便会屏蔽该功能。</p> 
<p>通过删除或替换Edge的配置文件，可以在本地抹除用户曾以国内IP访问过Bing服务的痕迹，从而让浏览器误以为用户IP并不在国内，进而实现正常使用Bing AI服务的目的。</p> 
<p>而重装Edge浏览器之所以不起作用，是因为用户以国内IP访问过Bing AI服务的痕迹保存在特定的应用数据路径中，重装Edge浏览器并不会清除相关访问数据，Edge浏览器仍会认定用户在国内，从而屏蔽AI功能。</p> 
<p>随着Edge浏览器的继续更新升级，Edge的AI服务对国内IP访问的检测和限制可能会越来越严格，如果上述方法失效可以尝试删除整个保存Edge用户数据的文件夹（例如：<code>%AppData%\..\Local\Microsoft\Edge\User Data</code>），但要注意这会导致Edge浏览器的所有用户数据的丢失。</p> 
<h2><a id="Edge_144"></a>补充：下载旧版Edge</h2> 
<p>newbing吧的一个帖子提到可以下载旧版本Edge解决</p> 
<p>出处：<a href="https://tieba.baidu.com/p/8782048284" rel="nofollow">https://tieba.baidu.com/p/8782048284</a></p> 
<p>以下展示Windows系统下安装旧版Edge浏览器的方法，linux和macOS系统可以如法炮制。</p> 
<h3><a id="1Edge_152"></a>1.先下载旧版Edge安装包</h3> 
<p>打开官网下载链接：</p> 
<p><a href="https://www.microsoft.com/en-us/edge/business/download?form=MA13H4" rel="nofollow">https://www.microsoft.com/en-us/edge/business/download?form=MA13H4</a></p> 
<p>页面往下可以找到旧版Edge的下载方式，选择Stable 119版本，再选择对应的系统版本下载，下载后安装即可。</p> 
<p><img src="https://images2.imgbox.com/1f/2d/YatXbmlR_o.png" alt="下载旧版Edge"></p> 
<h3><a id="2RemoveMSEdgeEdge_162"></a>2.使用Remove-MS-Edge工具卸载Edge</h3> 
<p>此举不会删除Edge浏览器的用户数据，可以放心卸载。</p> 
<p>该工具的github项目地址：</p> 
<p><a href="https://github.com/ShadowWhisperer/Remove-MS-Edge">https://github.com/ShadowWhisperer/Remove-MS-Edge</a></p> 
<p>这里使用该工具的GUI版本进行演示：</p> 
<p>（1）打开以下链接下载Remove-Edge_GUI.exe</p> 
<p><a href="https://github.com/ShadowWhisperer/Remove-MS-Edge/blob/main/Remove-Edge_GUI.exe?raw=true">https://github.com/ShadowWhisperer/Remove-MS-Edge/blob/main/Remove-Edge_GUI.exe?raw=true</a></p> 
<p>如果报毒不用理会，继续下载并保留程序</p> 
<p>（2）运行程序，点击 Remove 等待显示 Finish 完成卸载</p> 
<p><img src="https://images2.imgbox.com/bd/8b/beDIuQnd_o.png" alt="卸载旧版Edge"></p> 
<h3><a id="3Edge_182"></a>3.安装Edge</h3> 
<p>运行步骤1下载的旧版Edge安装包完成安装</p> 
<h3><a id="4_186"></a>4.禁用更新</h3> 
<p>为了防止Edge浏览器自动更新至最新版本，可以通过禁用更新服务和修改更新程序的方式来禁止Edge浏览器更新。</p> 
<p>这里演示修改更新程序的方法：</p> 
<p>找到 <code>%ProgramFiles(x86)%\Microsoft\EdgeUpdate</code> 目录中的 <code>MicrosoftEdgeUpdate.exe</code> 更新程序，将它重命名，例如 <code>MicrosoftEdgeUpdate2.exe</code>，另外，还要将 <code>%ProgramFiles(x86)%\Microsoft\Edge\Application\119.0.2151.97</code> 目录下的 <code>elevation_service.exe</code> 重命名（这里的119.0.2151.97对应你所安装的旧版Edge版本号）。</p> 
<p>这两个都是Edge浏览器的更新升级程序，将它们重命名后，Edge浏览器就会因为找不到更新程序而无法更新。当需要更新浏览器时，只需改回原名即可。</p> 
<p>详见：<a href="https://www.zhihu.com/question/426726552/answer/2317056446" rel="nofollow">https://www.zhihu.com/question/426726552/answer/2317056446</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/249f1d95912abf573b6391667d905800/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spark的reduceByKey方法使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/319f2e4ba37ff0af5a0e66e5b3e7a97b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">由世界第一个AI软件工程师Devin引发的热潮背后----程序员到底会不会被代替?AI发展至如今是否初衷已变?</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>