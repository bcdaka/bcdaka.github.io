<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>hadoop 单节点模式安装 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cba135bee43d969600dbe5be72998589/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="hadoop 单节点模式安装">
  <meta property="og:description" content="概要
hadoop 单节点模式安装
一、系统安装
1、工具环境
（1）虚拟机：VMware woekstation 16 Player
程序：VMware-player-full-16.2.3-19376536.exe
官网：https://www.vmware.com/
下载地址：https://www.vmware.com/cn/products/workstation-player.html
https://customerconnect.vmware.com/cn/downloads/info/slug/desktop_end_user_computing/vmware_workstation_player/16_0
https://www.vmware.com/cn/try-vmware.html
（2）操作系统
操作系统：ubuntu的桌面版
程序版本：ubuntu-20.04.4-desktop-amd64.iso
下载地址：https://ubuntu.com/#download
2、系统安装
（1）使用简易安装
账号：hadoopsingle
虚拟机名称：hadoopsingle
虚拟机位置选择D盘：D:\Virtual Machines\hadoopsingle
分配磁盘100G，内存8G，cpu8核，选择磁盘为单个磁盘，网络选择桥接模式，其他默认
（2）安装Ubuntu
使用笔记本安装的，使用无线网络上网，通过虚拟机软件将络连接选择桥接模式，勾选或不勾选复制物理网络连接都可以;
激活root账号并设置密码，sudo passwd root ，输入root密码即可；
更新所有软件
apt update
apt upgrade
如何在VMware虚拟机的Ubuntu下实现与windows系统的文件（文字）互相复制粘贴
1.sudo apt autoremove open-vm-tools
2.sudo apt install open-vm-tools-desktop
3.重启系统即可
若复制失效或者报错，可使用以下办法解决：
1.apt -f install
2.reboot
配置windows主机和ubuntu虚拟机文件通过ftp传输
安装查看虚拟机IP程序
sudo apt install net-tools
查看IP
ifconfig -a
查看ftp服务
ps -ef|grep ftp
安装ftp服务
sudo apt install vsftpd">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-28T22:49:33+08:00">
    <meta property="article:modified_time" content="2024-03-28T22:49:33+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">hadoop 单节点模式安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>概要</p> 
<p>    hadoop 单节点模式安装</p> 
<p>   </p> 
<p>一、系统安装</p> 
<p>    1、工具环境</p> 
<p></p> 
<p>        （1）虚拟机：VMware woekstation 16 Player</p> 
<p>            程序：VMware-player-full-16.2.3-19376536.exe</p> 
<p>            官网：https://www.vmware.com/</p> 
<p>            下载地址：https://www.vmware.com/cn/products/workstation-player.html</p> 
<p>            https://customerconnect.vmware.com/cn/downloads/info/slug/desktop_end_user_computing/vmware_workstation_player/16_0</p> 
<p>            https://www.vmware.com/cn/try-vmware.html</p> 
<p></p> 
<p>        （2）操作系统</p> 
<p>            操作系统：ubuntu的桌面版</p> 
<p>            程序版本：ubuntu-20.04.4-desktop-amd64.iso</p> 
<p>            下载地址：https://ubuntu.com/#download</p> 
<p></p> 
<p>    2、系统安装</p> 
<p></p> 
<p>        （1）使用简易安装</p> 
<p>            账号：hadoopsingle</p> 
<p>            虚拟机名称：hadoopsingle</p> 
<p>            虚拟机位置选择D盘：D:\Virtual Machines\hadoopsingle</p> 
<p>            分配磁盘100G，内存8G，cpu8核，选择磁盘为单个磁盘，网络选择桥接模式，其他默认</p> 
<p></p> 
<p>    （2）安装Ubuntu</p> 
<p>            使用笔记本安装的，使用无线网络上网，通过虚拟机软件将络连接选择桥接模式，勾选或不勾选复制物理网络连接都可以;</p> 
<p>            激活root账号并设置密码，sudo  passwd  root ，输入root密码即可；</p> 
<p>            更新所有软件</p> 
<p>            apt update</p> 
<p>            apt upgrade</p> 
<p></p> 
<p>            如何在VMware虚拟机的Ubuntu下实现与windows系统的文件（文字）互相复制粘贴</p> 
<p>            1.sudo apt autoremove open-vm-tools</p> 
<p>            2.sudo apt install open-vm-tools-desktop</p> 
<p>            3.重启系统即可</p> 
<p>            若复制失效或者报错，可使用以下办法解决：</p> 
<p>            1.apt -f install</p> 
<p>            2.reboot</p> 
<p></p> 
<p>            配置windows主机和ubuntu虚拟机文件通过ftp传输</p> 
<p>            安装查看虚拟机IP程序</p> 
<p>            sudo apt install net-tools</p> 
<p>            查看IP</p> 
<p>            ifconfig -a</p> 
<p>            查看ftp服务</p> 
<p>            ps -ef|grep ftp</p> 
<p>            安装ftp服务</p> 
<p>            sudo apt install vsftpd</p> 
<p>            查看ftp版本</p> 
<p>            vsftpd -version</p> 
<p>            修改vsftpd.conf配置文件</p> 
<p>            安装vim编辑器</p> 
<p>            sudo apt install vim</p> 
<p>            sudo vim  /etc/vsftpd.conf</p> 
<p>            去掉如下两个内容的注释通常在28和31行</p> 
<p>            local_enable=YES</p> 
<p>            write_enable=YES</p> 
<p>            重启ftp服务</p> 
<p>            sudo /etc/init.d/vsftpd restart</p> 
<p>            windows安装和配置FileZilla</p> 
<p>            FileZilla 客户端下载和安装</p> 
<p>            FileZilla工具可以去官网下载即可，https://www.filezilla.cn/download</p> 
<p>            安装配置即可</p> 
<p>            FileZilla或者SecureCRT连接虚拟机过慢的解决方法</p> 
<p>            问题原因：</p> 
<p>            当我们更换网络环境时，可能会发现终端工具连接Linux虚拟机的速度变得很慢，这是因为ssh的服务端在连接时会自动检测dns环境是否一致导致的</p> 
<p>            解决方案</p> 
<p>            我们把它修改为不检测</p> 
<p>            修改文件位置：vim /etc/ssh/sshd_config</p> 
<p>            把</p> 
<p>            #UseDNS yes</p> 
<p>            修改为</p> 
<p>            UseDNS no</p> 
<p>            然后，重启ssh服务</p> 
<p>            systemctl restart sshd</p> 
<p></p> 
<p>            修改国外apt更新国外镜像源为国内镜像源</p> 
<p>            到/etc/apt下面更改sources.list更换国外镜像为国内镜像，是将us的地址换为cn；</p> 
<p>            cd /etc/apt</p> 
<p>            ls -l</p> 
<p>            cat sources.list</p> 
<p>            cp sources.list sources.list.bak</p> 
<p>            vim sources.list</p> 
<p>            将us的地址换成cn的地址（系统22版默认安装已换）</p> 
<p>            更新软件列表</p> 
<p>            sudo apt update</p> 
<p>            更新软件</p> 
<p>            sudo apt upgrade</p> 
<p>            查看系统版本</p> 
<p>            sudo lsb_release -a</p> 
<p></p> 
<p>二、hadoop安装前提</p> 
<p>    1、需要的软件</p> 
<p>        (1)jdk</p> 
<p>            3.3.3对应jdk目前支持的版本为java8或Java11，编译只能是Java8，所以安装java8；</p> 
<p>            链接地址为：https://www.oracle.com/java/technologies/downloads/</p> 
<p>            java8下载地址为：https://www.oracle.com/java/technologies/downloads/#java8-linux</p> 
<p>            对应版本地址：https://www.oracle.com/webapps/redirect/signon?nexturl=https://download.oracle.com/otn/java/jdk/8u341-b10/424b9da4b48848379167015dcc250d8d/jdk-8u341-linux-x64.tar.gz</p> 
<p>            #sudo apt install openjdk-8-jre-headless   # version 8u312-b07-0ubuntu1~20.04</p> 
<p>            #apt install openjdk-8-jdk-headless   # version 8u342-b07-0ubuntu1~20.04</p> 
<p>            #可以使用ubuntu推荐自带的java8</p> 
<p></p> 
<p>        (2)hadoop</p> 
<p>                目前安装的版本为3.3.3；</p> 
<p>                链接地址为：https://dlcdn.apache.org/hadoop/common/hadoop-3.3.3/hadoop-3.3.3.tar.gz</p> 
<p></p> 
<p>    2、配置</p> 
<p>        （1）ssh免密登录</p> 
<p>            查看是否安装ssh</p> 
<p>            rpm  -qa  |  grep  ssh</p> 
<p>            sudo apt install rpm</p> 
<p>            查询ssh安装路径</p> 
<p>            which ssh</p> 
<p>            usr/bin/ssh</p> 
<p>            查询pdsh安装路径</p> 
<p>            which pdsh</p> 
<p>            #卸载程序和所有配置文件。在终端中输入以下命令，把替换成你希望完全移除的程序：</p> 
<p>            #sudo apt --purge remove pdsh</p> 
<p>            系统默认没有安装pdsh</p> 
<p>            安装SSH，配置SSH无密码登录</p> 
<p>            sudo apt install openssh-server</p> 
<p>            安装ssh</p> 
<p>            apt install ssh</p> 
<p>            安装pdsh</p> 
<p>            apt install pdsh</p> 
<p>            查询ssh安装路径</p> 
<p>            which ssh</p> 
<p>            usr/bin/ssh</p> 
<p>            因为 ssh 默认禁止 root 用户访问，需要修改 sshd_config 文件中的 PermitRootLogin 数据为 yes;</p> 
<p>            vim /etc/ssh/sshd_config</p> 
<p>            找到：</p> 
<p>            # Authentication:</p> 
<p>            #LoginGraceTime 2m</p> 
<p>            #PermitRootLogin prohibit-password</p> 
<p>            修改为：</p> 
<p>            PermitRootLogin yes</p> 
<p>            再重启sshd服务 ，重启命令：systemctl restart sshd.service</p> 
<p>            进入 ~/.ssh/ 目录</p> 
<p>            若不存在，需要执行一次</p> 
<p>            使命令登陆本机：</p> 
<p>            ssh localhost</p> 
<p>            输入 yes</p> 
<p>            然后按提示输入主机密码</p> 
<p>            按四下回车</p> 
<p>            再重启sshd服务 ，重启命令：systemctl restart sshd.service</p> 
<p>            cd ~/.ssh/</p> 
<p>            ssh-keygen -t rsa</p> 
<p>            按回车即可</p> 
<p>            授权</p> 
<p>            cat ./id_rsa.pub &gt;&gt; ./authorized_keys</p> 
<p>            查看服务进程</p> 
<p>            ps -ef|grep ssh</p> 
<p>            下一次连接就不用输入密码了，exit可退出当前主机</p> 
<p>            cd /</p> 
<p>            cd ~</p> 
<p>            ssh localhost</p> 
<p>            ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa</p> 
<p>            cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</p> 
<p>            chmod 0600 ~/.ssh/authorized_keys</p> 
<p><br>  </p> 
<p>        （2）关闭防火墙</p> 
<p>            sudo ufw status： 查看防火墙状态，inactive是关闭状态，active是开启状态</p> 
<p>            sudo ufw enable：开启防火墙</p> 
<p>            sudo ufw default deny：启动默认防御，作用：关闭所有外部对本机的访问(本机访问外部正常)</p> 
<p>            sudo ufw disable：关闭防火墙</p> 
<p>            sudo ufw allow|deny [service]：禁用防火墙</p> 
<p>            选择关闭状态</p> 
<p>        （3）创建用户</p> 
<p>            单机版，为了避免权限限制，我们使用root安装，省略创建用户过程；</p> 
<p>            useradd hadoop</p> 
<p>            passwd hadoop (直接输入两次密码即可)</p> 
<p>            注意：我都是用root用户操作，故这一步可以不用切换到hadoop用户。</p> 
<p>        （4）修改机器名</p> 
<p>            获取主机名：hostname或uname -a</p> 
<p>            临时修改主机名，命令行下运行命令：“hostname 新主机名”</p> 
<p>            其中“新主机名”可以用任何合法字符串来表示。不过采用这种方式，新主机名并不保存在系统中，重启系统后主机名将恢复为原先的主机名称。</p> 
<p>            永久修改主机名，在Ubuntu系统中永久修改主机名也比较简单。主机名存放在/etc/hostname文件中，修改主机名时，编辑hostname文件，在文件中输入新的主机名并保存该文件即可</p> 
<p>            查看网卡相关信息：ifconfig</p> 
<p>            如果没有，安装：sudo apt install net-tools</p> 
<p>            修改/etc/hosts配置文件</p> 
<p>            /etc/hosts存放的是域名与ip的对应关系，域名与主机名没有任何关系，你可以为任何一个IP指定任意一个名字。</p> 
<p>            修改主机名与IP地址映射关系：vim /etc/hosts</p> 
<p>            在最后一行添加 ip地址 主机名，如：192.168.1.252 ubuntu</p> 
<p>            修改后重启系统</p> 
<p>            sudo reboot</p> 
<p></p> 
<p>    3、安装jdk</p> 
<p>        安装 OpenJDK 8</p> 
<p>        sudo apt update</p> 
<p>        sudo apt upgrade</p> 
<p>        验收是否有jdk安装：java -version</p> 
<p>        没有安装</p> 
<p>        #sudo apt install openjdk-8-jre-headless   # version 8u312-b07-0ubuntu1~20.04</p> 
<p>        #apt install openjdk-8-jdk-headless   # version 8u342-b07-0ubuntu1~20.04</p> 
<p>        我自定义安装</p> 
<p>        1、下载linux版jdk jdk-8u341-linux-x64.tar.gz</p> 
<p>        2、将jdk拷贝到安装目录，jdk存放地址为/opt/jdk/</p> 
<p>        3、执行命令 tar -zxvf  jdk-8u341-linux-x64.tar.gz，解压jdk</p> 
<p>        首先使用which找到 Java 安装路径:</p> 
<p>        which java</p> 
<p>        /opt/jdk/jdk1.8.0_341/bin/java</p> 
<p>        4、配置环境变量</p> 
<p>            sudo vim /etc/profile，文件末尾加上如下环境变量配置</p> 
<p>            export JAVA_HOME=/opt/jdk/jdk1.8.0_341</p> 
<p>            export JRE_HOME=$JAVA_HOME/jre</p> 
<p>            export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH</p> 
<p>            export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH</p> 
<p>5       5、重启配置 source /etc/profile</p> 
<p>        6、查看是否配置成功。输入命令 java -version</p> 
<p>        JAVA_HOME 环境变量</p> 
<p>        （1）Java 安装路径</p> 
<p>            /opt/jdk/jdk1.8.0_341</p> 
<p>        （2）打开/etc/environment文件：</p> 
<p>            /** sudo nano /etc/environment</p> 
<p>            sudo apt install vim</p> 
<p>           sudo vim /etc/environment</p> 
<p>            在文件的末尾，添加下面的行：</p> 
<p>            JAVA_HOME=/opt/jdk/jdk1.8.0_341</p> 
<p>            想要让修改在当前 shell 生效，你可以登出系统，再登入系统，或者运行下面的命令：</p> 
<p>            source /etc/environment</p> 
<p>            验证 JAVA_HOME 环境变量被正确设置：</p> 
<p>            echo $JAVA_HOME</p> 
<p>        （3）配置环境变量</p> 
<p>            vim  /etc/profile</p> 
<p>            在这个文件最后添加如下两行：</p> 
<p>            export JAVA_HOME=/opt/jdk/jdk1.8.0_341</p> 
<p>            export PATH=$JAVA_HOME/bin:$PATH</p> 
<p>            使这个配置文件生效</p> 
<p>            source /etc/profile</p> 
<p>            验证</p> 
<p>            java -version</p> 
<p>        （4）root用户如果关闭终端后，依旧没有，支持如下操作</p> 
<p>            但是此方法有时退出终端后，再进入终端又会失效，所以可以：</p> 
<p>            su root</p> 
<p>            cd /root</p> 
<p>            vim /root/.bashrc</p> 
<p>            //在尾部添加：</p> 
<p>            source /etc/profile</p> 
<p></p> 
<p>4、安装hadoop</p> 
<p>    上传或下载hadoop-3.3.3.tar.gz</p> 
<p>    #官网下载：hadoop3.3.3</p> 
<p>    #wget https://dlcdn.apache.org/hadoop/common/hadoop-3.3.3/hadoop-3.3.3.tar.gz</p> 
<p>    cp /home/hadoopsingle/Desktop/share/hadoop-3.3.3.tar.gz /opt/hadoop/.</p> 
<p>    tar -zxvf /opt/hadoop/hadoop-3.3.3.tar.gz -C /opt/hadoop/</p> 
<p>    至目录 /opt/hadoop/</p> 
<p>    #重命名 mv hadoop-3.3.3 hadoop</p> 
<p>    修改文件权限  sudo chown -R 0600 /opt/hadoop/hadoop-3.3.3</p> 
<p>    进入hadoop目录</p> 
<p>    cd /opt/hadoop/hadoop-3.3.3</p> 
<p>    验证hadoop版本</p> 
<p>    ./bin/hadoop version</p> 
<p></p> 
<p>5、配置env和profile</p> 
<p>    配置env文件  修改JDK路径</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/hadoop-env.sh</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/mapred-env.sh</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/yarn-env.sh</p> 
<p>    添加：export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</p> 
<p>    配置环境变量</p> 
<p>    vim /etc/profile</p> 
<p>    在文件最后添加如下三行</p> 
<p>    export JAVA_HOME=/opt/jdk/jdk1.8.0_341</p> 
<p>    export HADOOP_HOME=/opt/hadoop/hadoop-3.3.3</p> 
<p>    export PATH=$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH</p> 
<p>    使这个配置文件生效</p> 
<p>    source /etc/profile</p> 
<p>    验证</p> 
<p>    hadoop version</p> 
<p></p> 
<p>6、hadoop独立操作配置</p> 
<p>    独立操作，默认情况下，Hadoop 配置为以非分布式模式运行，作为单个 Java 进程。这对于调试很有用。</p> 
<p>    The following example copies the unpacked conf directory to use as input and then finds and displays every match of the given regular expression. Output is written to the given output directory.</p> 
<p>    pwd /opt/hadoop/hadoop-3.3.3</p> 
<p>    mkdir input</p> 
<p>    cp etc/hadoop/*.xml input</p> 
<p>    bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.3.jar grep input output 'dfs[a-z.]+'</p> 
<p>    cat output/*</p> 
<p></p> 
<p>7、修改核心组件文件</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/core-site.xml</p> 
<p>    创建临时目录，mkdir tmp</p> 
<p>    配置里面添加：</p> 
<p>        &lt;configuration&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</p> 
<p>                &lt;value&gt;file:/opt/hadoop/hadoop-3.3.3/tmp&lt;/value&gt;</p> 
<p>                &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;fs.defaultFS&lt;/name&gt;</p> 
<p>                &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>        &lt;/configuration&gt;</p> 
<p></p> 
<p>8、修改文件系统文件</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/hdfs-site.xml</p> 
<p>    配置里面添加：</p> 
<p>        &lt;configuration&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;dfs.replication&lt;/name&gt;</p> 
<p>                &lt;value&gt;1&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;</p> 
<p>                &lt;value&gt;file:/opt/hadoop/hadoop-3.3.3/tmp/dfs/name&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;</p> 
<p>                &lt;value&gt;file:/opt/hadoop/hadoop-3.3.3/tmp/dfs/data&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;!-- 注释&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;</p> 
<p>                &lt;value&gt;0.0.0.0:50700&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;!--&gt;</p> 
<p>        &lt;/configuration&gt;</p> 
<p></p> 
<p>9、修改yarn文件</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/yarn-site.xml</p> 
<p>    配置里面添加：</p> 
<p>        &lt;configuration&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</p> 
<p>                &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;</p> 
<p>                &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_HOME,PATH,LANG,TZ,HADOOP_MAPRED_HOME&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;!--注释&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;</p> 
<p>                &lt;value&gt;ubuntu:8088&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</p> 
<p>                &lt;value&gt;ubuntu&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;</p> 
<p>                &lt;value&gt;ubuntu:8032&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;</p> 
<p>                &lt;value&gt;ubuntu:8030&lt;/value&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;</p> 
<p>                &lt;value&gt;ubuntu:8031&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt;</p> 
<p>                &lt;value&gt;ubuntu:8033&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;!--&gt;</p> 
<p>        &lt;/configuration&gt;</p> 
<p></p> 
<p>10、修改文件mapreduce文件</p> 
<p>        vim /opt/hadoop/hadoop-3.3.3/etc/hadoop/mapred-site.xml</p> 
<p>        配置里面添加：</p> 
<p>        &lt;configuration&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</p> 
<p>                &lt;value&gt;yarn&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>            &lt;property&gt;</p> 
<p>                &lt;name&gt;mapreduce.application.classpath&lt;/name&gt;</p> 
<p>                &lt;value&gt;$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/*:$HADOOP_MAPRED_HOME/share/hadoop/mapreduce/lib/*&lt;/value&gt;</p> 
<p>            &lt;/property&gt;</p> 
<p>        &lt;/configuration&gt;</p> 
<p></p> 
<p>11、root用户启动hadoop需要的配置</p> 
<p>    在start-dfs.sh，stop-dfs.sh 两个文件顶部添加以下参数</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/sbin/start-dfs.sh</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/sbin/stop-dfs.sh</p> 
<p>        HDFS_DATANODE_USER=root</p> 
<p>        HADOOP_SECURE_DN_USER=hdfs</p> 
<p>        HDFS_NAMENODE_USER=root</p> 
<p>        HDFS_SECONDARYNAMENODE_USER=root</p> 
<p>    在start-yarn.sh，stop-yarn.sh两个文件顶部添加以下参数</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/sbin/start-yarn.sh</p> 
<p>    vim /opt/hadoop/hadoop-3.3.3/sbin/stop-yarn.sh</p> 
<p>        YARN_RESOURCEMANAGER_USER=root</p> 
<p>        HADOOP_SECURE_DN_USER=yarn</p> 
<p>        YARN_NODEMANAGER_USER=root</p> 
<p></p> 
<p>12、配置完成，执行 NameNode 的格式化</p> 
<p>    进入目录cd /opt/hadoop/hadoop-3.3.3</p> 
<p>    格式化命令./bin/hdfs namenode -format</p> 
<p></p> 
<p>13、启动 NameNode 守护进程和 DataNode 守护进程</p> 
<p>    ./sbin/start-dfs.sh</p> 
<p>    浏览 NameNode 的 Web 界面；默认情况下，它位于：默认端口号9870</p> 
<p>    http://localhost:9870/，或http://127.0.0.1:9870/，或http://192.168.1.253:9870/;</p> 
<p></p> 
<p>14、创建执行 MapReduce 作业所需的 HDFS 目录：</p> 
<p>    su root</p> 
<p>    cd /opt/hadoop/hadoop-3.3.3</p> 
<p>    ./bin/hdfs dfs -mkdir /user</p> 
<p>    ./bin/hdfs dfs -mkdir /user/root</p> 
<p></p> 
<p>15、将输入文件复制到分布式文件系统中</p> 
<p>    su root</p> 
<p>    cd /opt/hadoop/hadoop-3.3.3</p> 
<p>    ./bin/hdfs dfs -mkdir input</p> 
<p>    ./bin/hdfs dfs -put etc/hadoop/*.xml input</p> 
<p></p> 
<p>16、运行提供的一些示例</p> 
<p>    su root</p> 
<p>    cd /opt/hadoop/hadoop-3.3.3</p> 
<p>    ./bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.3.3.jar grep input output 'dfs[az.]+'</p> 
<p></p> 
<p>17、检查输出文件：将输出文件从分布式文件系统复制到本地文件系统并检查它们</p> 
<p>    su root</p> 
<p>    cd /opt/hadoop/hadoop-3.3.3</p> 
<p>    ./bin/hdfs dfs -get output output</p> 
<p>    cat output/*</p> 
<p>    或者</p> 
<p>    ./bin/hdfs dfs -cat output/*</p> 
<p></p> 
<p>18、启动 ResourceManager 守护进程和 NodeManager 守护进程</p> 
<p>    ./sbin/start-yarn.sh</p> 
<p></p> 
<p>19、浏览 ResourceManager 的 Web 界面；默认情况下，它位于：</p> 
<p>    http://localhost:8088/</p> 
<p></p> 
<p>20、运行 MapReduce 作业</p> 
<p></p> 
<p>21、完成后，使用以下命令停止守护进程</p> 
<p>    ./sbin/stop-yarn.sh</p> 
<p>    ./sbin/stop-dfs.sh</p> 
<p></p> 
<p>22、hadoop环境变量配置</p> 
<p>    Ubuntu搭建hadoop时，在/bin、/sbin等路径下有一些经常使用的工具.为了能够在任何路径下都能使用这些工具，而不必切换到bin/sbin路径下，需要设置hadoop的环境变量(注意：前提是已经设置好jdk环境变量，jdk环境变量参考前面的配置）</p> 
<p>    我使用的是root用户，所以进入root用户目录下</p> 
<p>    （1）hadoop的安装路径</p> 
<p>        /opt/hadoop/hadoop-3.3.3</p> 
<p>    （2）打开/etc/environment文件：</p> 
<p>        vim /etc/environment</p> 
<p>        在文件的末尾，添加下面的行：</p> 
<p>        HADOOP_HOME="/opt/hadoop/hadoop-3.3.3"</p> 
<p>        想要让修改在当前 shell 生效，你可以登出系统，再登入系统，或者运行下面的命令：</p> 
<p>        source /etc/environment</p> 
<p>        验证 HADOOP_HOME 环境变量被正确设置：</p> 
<p>        echo $HADOOP_HOME</p> 
<p>        /opt/hadoop/hadoop-3.3.3</p> 
<p>    （3）配置环境变量</p> 
<p>        vim  /etc/profile</p> 
<p>        在这个文件最后添加如下两行：</p> 
<p>        export HADOOP_HOME=/opt/hadoop/hadoop-3.3.3</p> 
<p>        export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH</p> 
<p>        使这个配置文件生效</p> 
<p>        source /etc/profile</p> 
<p>        验证</p> 
<p>        hadoop version</p> 
<p>    （4）root用户如果关闭终端后，依旧没有，支持如下操作</p> 
<p>        但是此方法有时退出终端后，再进入终端又会失效，所以可以：</p> 
<p>        su root</p> 
<p>        cd /root</p> 
<p>        vim /root/.bashrc</p> 
<p>        //在尾部添加：</p> 
<p>        source /etc/profile</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a9a071317789d09ac8163f7ccb4ba6a0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">whisper、whisper.cpp、faster-whisper的比较</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e5ad296479c5b51a24cc410069d5f62d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">主流后端开发语言：JAVA、C、C&#43;&#43;、GO、PYTHON对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>