<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Hadoop集群搭建】完全分布式 Hadoop 安装部署及测试 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2369b7a05ebfc8b9a0d8fa25663b8721/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Hadoop集群搭建】完全分布式 Hadoop 安装部署及测试">
  <meta property="og:description" content="1. 集群安装配置完整过程 a) 3 台客户机（关闭防火墙、设置好IP、主机名、时钟同步等信息在之前发布的博客有）
1
2
3
虚拟机
Hadoop100
Hadoop101
Hadoop100
主机名
Hadoop100
Hadoop101
Hadoop100
IP地址
192.168.9.10
192.168.9.11
192.168.9.10
Hdfs
NameNode
DataNode
DataNode
SecondaryNameNode
DataNode
yarn
NodeManager
ResourceManager
NodeManager
NodeManager
b) 分别安装 JDK 并配置环境变量 c) 安装 Hadoop 并配置环境变量 d) 配置 SSH 免密钥通信 e) 配置集群 f) 群起集群并测试 建议先配置xsync集群分发脚本！！这样只需要在一台虚拟机修改，之后通过脚本分发给另外两台虚拟机即可。
参考我写的另一篇博客：
【Hadoop集群搭建】xsync集群分发脚本-CSDN博客
————————————————
版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。 原文链接：https://blog.csdn.net/m0_67830223/article/details/139803036
2. 配置 SSH 免密钥通信 ssh 基本用法，输入以下命令测试（注意使用自己配置的主机名和 IP 地址）
​​​​​​​ssh 192.168.9.10 SSH 免密钥配置具体步骤 步骤 1：进入.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-12T19:13:11+08:00">
    <meta property="article:modified_time" content="2024-07-12T19:13:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Hadoop集群搭建】完全分布式 Hadoop 安装部署及测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin-left:.0001pt;"><strong><span style="color:#000000;"><strong>1. 集群安装配置完整过程 </strong></span></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">a) 3 台客户机（关闭防火墙、设置好IP、主机名、时钟同步等信息在之前发布的博客有）</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;"></p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">1</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">2</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">3</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">虚拟机</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop100</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop101</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop100</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">主机名</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop100</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop101</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop100</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">IP地址</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">192.168.9.10</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">192.168.9.11</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">192.168.9.10</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">Hdfs</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">NameNode</span></p> <p style="margin-left:.0001pt;text-align:left;">DataNode</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">DataNode</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">SecondaryNameNode</span></p> <p style="margin-left:.0001pt;text-align:left;">DataNode</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">yarn</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:left;">NodeManager</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">ResourceManager</span></p> <p style="margin-left:.0001pt;text-align:left;">NodeManager</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:left;">NodeManager</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">b) 分别安装 JDK 并配置环境变量 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">c) 安装 Hadoop 并配置环境变量 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">d) 配置 SSH 免密钥通信 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">e) 配置集群 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">f) 群起集群并测试 </span></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">     </span><span style="color:#fe2c24;">   建议先配置xsync集群分发脚本！！这样只需要在一台虚拟机修改，之后通过脚本分发给另外两台虚拟机即可。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#0d0016;">        参考我写的另一篇博客：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#0d0016;">                </span><a href="https://blog.csdn.net/m0_67830223/article/details/139803036" title="【Hadoop集群搭建】xsync集群分发脚本-CSDN博客">【Hadoop集群搭建】xsync集群分发脚本-CSDN博客</a><br><span style="color:#000000;">————————————————</span></p> 
<p><span style="color:#000000;">版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。                 <br> 原文链接：https://blog.csdn.net/m0_67830223/article/details/139803036</span></p> 
<p></p> 
<h3 style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2. 配置 SSH 免密钥通信 </strong></span></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">ssh 基本用法，输入以下命令测试（</span><strong><span style="color:#ff0000;"><strong>注意使用自己配置的主机名和 IP 地址</strong></span></strong><span style="color:#000000;">）</span></p> 
<pre><code>​​​​​​​ssh 192.168.9.10</code></pre> 
<p class="img-center"><img alt="" height="192" src="https://images2.imgbox.com/77/43/sl7PL8fb_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SSH 免密钥配置具体步骤</span></h4> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 1</strong></span></strong><span style="color:#000000;">：进入.ssh 目录（</span><strong><span style="color:#ff0000;"><strong>该目录是一个隐藏文件夹，在/home/账户名下，这</strong></span></strong><strong><span style="color:#ff0000;"><strong>里的账户名每个人都不同，不是说文件夹的名字叫‘账户名’</strong></span></strong><span style="color:#000000;">），在 hadoop100 生成密钥对（公钥+私钥），输入命令并敲击三次回车 </span></p> 
<pre><code>​​​​​​​ssh-keygen -t rsa</code></pre> 
<p style="text-align:center;"><img alt="" height="255" src="https://images2.imgbox.com/6b/23/5t639dsh_o.png" width="657"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 2</strong></span></strong><span style="color:#000000;">：查看生成的密钥对，并拷贝密钥至hadoop100,hadoop101，Hadoop102。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">① 拷贝密钥至hadoop100</span></p> 
<pre><code>ssh-copy-id hadoop100</code></pre> 
<p class="img-center"><img alt="" height="134" src="https://images2.imgbox.com/60/9a/C1UkcZUn_o.png" width="693"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">② 拷贝密钥至hadoop101</span></p> 
<pre><code>ssh-copy-id hadoop101</code></pre> 
<p class="img-center"><img alt="" height="134" src="https://images2.imgbox.com/f1/43/lwxvSS4u_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">③ 拷贝密钥至hadoop102</span></p> 
<pre><code>ssh-copy-id hadoop102</code></pre> 
<p class="img-center"><img alt="" height="143" src="https://images2.imgbox.com/6a/9f/bP0oZ1Ux_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 3</strong></span></strong><span style="color:#000000;">：在hadoop100 测试免密钥到 hadoop101，反之需要密码。</span></p> 
<pre><code>ssh hadoop101</code></pre> 
<p class="img-center"><img alt="" height="49" src="https://images2.imgbox.com/00/6c/dnLrvNJh_o.png" width="536"></p> 
<pre><code>ssh hadoop100</code></pre> 
<p class="img-center"><img alt="" height="178" src="https://images2.imgbox.com/1d/63/Bw5WwbbL_o.png" width="689"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>在hadoop101和hadoop102中重复步骤1-2如下：</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>      </strong></span><span style="color:#0d0016;"><strong> </strong></span></strong><span style="color:#0d0016;"> hadoop101</span></p> 
<p style="text-align:center;"><img alt="" height="288" src="https://images2.imgbox.com/44/3f/N8H2mHUS_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="174" src="https://images2.imgbox.com/f0/7a/dvZrF0gi_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="153" src="https://images2.imgbox.com/ad/ff/TjpY8y8k_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="140" src="https://images2.imgbox.com/e1/26/ejRjFJyT_o.png" width="692"></p> 
<p>        hadoop102 </p> 
<p style="text-align:center;"><img alt="" height="317" src="https://images2.imgbox.com/c6/88/CjClDWvW_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="132" src="https://images2.imgbox.com/c5/24/0WHJVoGk_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="147" src="https://images2.imgbox.com/79/5d/TgEthta6_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="142" src="https://images2.imgbox.com/69/0d/v3l0VX4n_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;">在<span style="color:#fe2c24;">hadoop100中用root身份</span>，重复步骤1-2</p> 
<p style="text-align:center;"><img alt="" height="221" src="https://images2.imgbox.com/e7/91/GBczrTxh_o.png" width="692"></p> 
<p style="text-align:center;"><img alt="" height="192" src="https://images2.imgbox.com/7d/5e/pKFmDmit_o.png" width="693"></p> 
<p style="text-align:center;"><img alt="" height="191" src="https://images2.imgbox.com/b1/07/kvSc8dBJ_o.png" width="693"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;">到这里可以ssh测试一下，如果还是不行，那么最重要的一步：<span style="color:#fe2c24;">把文件夹权限改了！</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#fe2c24;">        </span><span style="color:#fe2c24;">三台虚拟机都得修改！！！！</span></p> 
<pre><code>chmod 700 /home/2130502441ryx
chmod 700 /home/2130502441ryx/.ssh
chmod 600 /home/2130502441ryx/.ssh/authorized_keys</code></pre> 
<p class="img-center"><img alt="" height="95" src="https://images2.imgbox.com/11/d5/4pM4rVcv_o.png" width="693"></p> 
<p class="img-center"><img alt="" height="79" src="https://images2.imgbox.com/3c/ee/I5DqPzyO_o.png" width="692"></p> 
<p class="img-center"><img alt="" height="60" src="https://images2.imgbox.com/80/33/JczQo7Q8_o.png" width="693"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>实现集群中相互免密钥的运行截图如下：</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">① 在hadoop100 测试免密钥到 hadoop101和hadoop102</span></p> 
<p class="img-center"><img alt="" height="245" src="https://images2.imgbox.com/47/be/rMaWOMOU_o.png" width="647"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">② 在hadoop101 测试免密钥到 hadoop100和hadoop102</span></p> 
<p class="img-center"><img alt="" height="235" src="https://images2.imgbox.com/a8/4b/GhtOezPP_o.png" width="634"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">③ 在hadoop102 测试免密钥到 hadoop100和hadoop101</span></p> 
<p class="img-center"><img alt="" height="253" src="https://images2.imgbox.com/18/71/wyKZ5Q6w_o.png" width="665"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<h3 style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3. Hadoop 集群配置 </strong></span></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>注意：Hadoop 只需要安装配置在一台机器上，配置结束后可以远程拷贝至</strong></span></strong><strong><span style="color:#ff0000;"><strong>集群中其他机器。 </strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">具体步骤如下： </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 1</strong></span></strong><span style="color:#000000;">：解压缩 hadoop 安装包（注意必须使用 hadoop 普通用户） </span></p> 
<p class="img-center"><img alt="" height="25" src="https://images2.imgbox.com/0a/93/MHkoFxqy_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 2</strong></span></strong><span style="color:#000000;">：配置 hadoop 用户环境变量，将 hadoop 命令和可执行文件目录加入到环境变量 PATH 中，并使环境变量生效。 </span></p> 
<p class="img-center"><img alt="" height="58" src="https://images2.imgbox.com/2a/24/UYN6xHa4_o.png" width="555"></p> 
<p class="img-center"><img alt="" height="237" src="https://images2.imgbox.com/d5/24/d8SYQMeZ_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 3</strong></span></strong><span style="color:#000000;">：配置 hadoop 运行时需要的环境变量 </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在目录/home/2130502441ryx/hadoop-2.8.1/etc/hadoop 下找到文件 hadoop-env.sh，用 vi 编辑文件内容 JAVA_HOME，在文件内找到以下代码：将上述内容修改为 JDK 安装路径（</span><strong><span style="color:#ff0000;"><strong>注意自己机器的安装路径</strong></span></strong><span style="color:#000000;">） </span></p> 
<p class="img-center"><img alt="" height="42" src="https://images2.imgbox.com/23/a3/9UEnPeS2_o.png" width="510"></p> 
<p class="img-center"><img alt="" height="94" src="https://images2.imgbox.com/79/33/UpzKkiqY_o.png" width="660"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在目录/home/2130502441ryx/hadoop-2.8.1/etc/hadoop 下找到文件 yarn-env.sh，用vi 编辑文件内容 JAVA_HOME，在文件内找到以下代码： 将上述内容修改为 JDK 安装路径（</span><strong><span style="color:#ff0000;"><strong>注意自己机器的安装路径</strong></span></strong><span style="color:#000000;">） </span></p> 
<p class="img-center"><img alt="" height="72" src="https://images2.imgbox.com/4a/e2/EmA09XFy_o.png" width="463"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>步骤 4</strong></span></strong><span style="color:#000000;">：hadoop 集群配置文件，在 </span><strong><span style="color:#000000;"><strong>hadoop 安装目录下的/etc/hadoop 中</strong></span></strong><span style="color:#000000;">。 </span></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">① 配置 core-site.xml 文件 </span></h4> 
<pre><code>vim core-site.xml</code></pre> 
<p class="img-center"><img alt="" height="33" src="https://images2.imgbox.com/94/f6/bcsAtZZ7_o.png" width="582"></p> 
<pre><code class="language-XML">     &lt;!-- 指定NameNode的地址 --&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://hadoop102:8020&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- 指定hadoop数据的存储目录 --&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;/opt/module/hadoop-3.1.3/data&lt;/value&gt;
    &lt;/property&gt;</code></pre> 
<p class="img-center"><img alt="" height="423" src="https://images2.imgbox.com/c7/47/Fg9s4aQS_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">② 配置 hdfs-site.xml</span></h4> 
<pre><code class="language-XML">vim hdfs-site.xml</code></pre> 
<p class="img-center"><img alt="" height="31" src="https://images2.imgbox.com/05/de/5ZaYcxt0_o.png" width="580"></p> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;3&lt;/value&gt;
    &lt;/property&gt;
	&lt;!-- nn web端访问地址--&gt;
	&lt;property&gt;
        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;
        &lt;value&gt;hadoop100:9870&lt;/value&gt;
    &lt;/property&gt;
	&lt;!-- 2nn web端访问地址--&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;
        &lt;value&gt;hadoop102:9868&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p class="img-center"><img alt="" height="439" src="https://images2.imgbox.com/d0/c6/wR5dWYx0_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">③ 配置 yarn-site.xml</span></h4> 
<pre><code class="language-XML">vim yarn-site.xml</code></pre> 
<p class="img-center"><img alt="" height="49" src="https://images2.imgbox.com/78/43/T2vOa6Hg_o.png" width="571"></p> 
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;!-- 指定MR走shuffle --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- 指定ResourceManager的地址--&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
        &lt;value&gt;hadoop103&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- 环境变量的继承 --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;
        &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services.mapreduce_shuffle.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p class="img-center"><img alt="" height="319" src="https://images2.imgbox.com/cb/d7/Zo3cXFDh_o.png" width="692"></p> 
<p class="img-center"><img alt="" height="239" src="https://images2.imgbox.com/51/78/MMW3GWWv_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">④ 配置 mapred-site.xml （历史服务器）</span></h4> 
<pre><code class="language-XML">vim mapred-site.xml</code></pre> 
<p class="img-center"><img alt="" height="24" src="https://images2.imgbox.com/b7/66/GMxaP0ar_o.png" width="574"></p> 
<pre><code class="language-XML">&lt;configuration&gt;
	&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;
        &lt;value&gt;hadoop101:10020&lt;/value&gt;
    &lt;/property&gt;
    
    &lt;property&gt;
        &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;
        &lt;value&gt;hadoop101:19888&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p class="img-center"><img alt="" height="525" src="https://images2.imgbox.com/f1/8f/Nys80xjU_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">⑤ 配置 </span><span style="color:#ff0000;">slaves </span><span style="color:#000000;">文件，将所有</span><strong><span style="color:#ff0000;"><strong>从节点主机名</strong></span></strong><span style="color:#000000;">编辑到该文件中。</span></h4> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（根据本实验集群规划，所有主机都充当 DataNode 角色，所以该文件包含集群所有主机名称。</span><span style="color:#ff0000;">根据自己的规划编辑该文件</span><span style="color:#000000;">。）</span></p> 
<pre><code class="language-XML">vim workers</code></pre> 
<p class="img-center"><img alt="" height="50" src="https://images2.imgbox.com/fa/0f/G1IVG3O8_o.png" width="684"></p> 
<pre><code class="language-XML">hadoop100
hadoop101
hadoop102</code></pre> 
<p class="img-center"><img alt="" height="263" src="https://images2.imgbox.com/b1/01/r2rMf8z7_o.png" width="616"></p> 
<p style="margin-left:.0001pt;text-align:left;">        使用xsync进行分发。</p> 
<pre><code class="language-XML">xsync workers</code></pre> 
<p class="img-center"><img alt="" height="428" src="https://images2.imgbox.com/b7/27/zSgeSXCO_o.png" width="646"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<h3 style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>4. 分发配置、格式化并群起集群 </strong></span></strong></h3> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4.1将配置好的 hadoop 安装目录复制到集群中其他节点</span></h4> 
<pre><code class="language-XML">xsync hadoop/</code></pre> 
<p class="img-center"><img alt="" height="346" src="https://images2.imgbox.com/d8/64/tFaEO3BG_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;">4.2在hadoop101和hadoop102查看分发情况</h4> 
<p>        hadoop101(查看任意一个文件即可) </p> 
<pre><code class="language-XML">cat core-site.xml</code></pre> 
<p class="img-center"><img alt="" height="47" src="https://images2.imgbox.com/fe/bb/fr7T2efm_o.png" width="596"></p> 
<p class="img-center"><img alt="" height="331" src="https://images2.imgbox.com/e7/32/0SPevZyv_o.png" width="692"></p> 
<p>        hadoop102 </p> 
<p class="img-center"><img alt="" height="34" src="https://images2.imgbox.com/04/ea/KcZfEiLC_o.png" width="605"></p> 
<p class="img-center"><img alt="" height="329" src="https://images2.imgbox.com/75/e7/9xXJBRJ3_o.png" width="693"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;"> 4.3 创建 hadoop 数据目录</span></h4> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>        所有主机都要创建！！！</strong></span></strong></p> 
<pre><code class="language-XML">mkdir /home/2130502441ryx/hadoopdata</code></pre> 
<p class="img-center"><img alt="" height="52" src="https://images2.imgbox.com/f0/a3/eXp6aNx7_o.png" width="690"></p> 
<p style="margin-left:.0001pt;text-align:left;">        分发文件夹</p> 
<pre><code class="language-XML">xsync /home/2130502441ryx/hadoopdata</code></pre> 
<p class="img-center"><img alt="" height="409" src="https://images2.imgbox.com/fb/3b/GUt2RJmI_o.png" width="692"></p> 
<p class="img-center"><img alt="" height="81" src="https://images2.imgbox.com/b3/6c/5DsUmDKw_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4.4 格式化 NameNode </span></h4> 
<pre><code class="language-XML">​​​​​​​hdfs namenode -format</code></pre> 
<p class="img-center"><img alt="" height="35" src="https://images2.imgbox.com/c8/04/566yDweK_o.png" width="688"></p> 
<p style="margin-left:.0001pt;text-align:left;">        Data存储的数据</p> 
<p class="img-center"><img alt="" height="171" src="https://images2.imgbox.com/fc/16/nYpmoHNZ_o.png" width="675"></p> 
<h4 style="text-align:left;">​​​​​​​​​​​​​​ 4.<strong><span style="color:#000000;"><strong>5测试集群服务 </strong></span></strong></h4> 
<p class="img-center"><img alt="" height="356" src="https://images2.imgbox.com/d5/bd/AaMbrRlA_o.png" width="692"></p> 
<p class="img-center"><img alt="" height="242" src="https://images2.imgbox.com/4b/21/JQNnEBOy_o.png" width="692"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4.6 在 NameNode 节点启动分布式文件系统 HDFS。</span></h4> 
<pre><code class="language-XML">​​​​​​​cd sbin/</code></pre> 
<p class="img-center"><img alt="" height="151" src="https://images2.imgbox.com/e7/de/EpUVCIN7_o.png" width="692"></p> 
<pre><code class="language-XML">sbin/start-dfs.sh</code></pre> 
<p class="img-center"><img alt="" height="108" src="https://images2.imgbox.com/a2/e6/2DgWUL7F_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">使用 jps 命令查看进程启动情况（</span><strong><span style="color:#ff0000;"><strong>集群中每台主机都要查看</strong></span></strong><span style="color:#000000;">） </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Hadoop100</span></p> 
<p class="img-center"><img alt="" height="100" src="https://images2.imgbox.com/12/cd/T5AXoIks_o.png" width="562"></p> 
<p style="margin-left:.0001pt;text-align:left;">Hadoop101</p> 
<p class="img-center"><img alt="" height="161" src="https://images2.imgbox.com/03/5a/4Lu49jXv_o.png" width="575"></p> 
<p style="margin-left:.0001pt;text-align:left;">Hadoop102</p> 
<p class="img-center"><img alt="" height="128" src="https://images2.imgbox.com/14/52/FY9x9osE_o.png" width="573"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4.7 在 ResourceManager 节点启动分布式资源调度框架 yarn （hadoop101）</span></h4> 
<pre><code class="language-XML">sbin/start-yarn.sh</code></pre> 
<p class="img-center"><img alt="" height="263" src="https://images2.imgbox.com/33/88/InPncnFq_o.png" width="692"></p> 
<p class="img-center"><img alt="" height="108" src="https://images2.imgbox.com/19/ed/DUdqIAsZ_o.png" width="660"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">使用 jps 命令查看集群中</span><span style="color:#ff0000;">各主机</span><span style="color:#000000;">进程启动状况，请截图在下面的方框中。</span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p style="margin-left:.0001pt;text-align:left;">Hadoop100</p> <p class="img-center"><img alt="" height="141" src="https://images2.imgbox.com/24/9c/jbxtrtiQ_o.png" width="515"></p> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Hadoop101</span></p> <p class="img-center"><img alt="" height="128" src="https://images2.imgbox.com/ef/eb/DcgNV3tN_o.png" width="523"></p> <p style="margin-left:.0001pt;text-align:left;">Hadoop102</p> <p class="img-center"><img alt="" height="132" src="https://images2.imgbox.com/c9/5a/sJNrKFrg_o.png" width="524"></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<h4 style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">4.8 在配置了历史服务的节点启动历史服务器。 （hadoop101）</span></h4> 
<pre><code class="language-XML">​​​​​​​bin/mapred --daemon start historyserver</code></pre> 
<p class="img-center"><img alt="" height="44" src="https://images2.imgbox.com/b6/7b/yVD17xeb_o.png" width="693"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">使用 jps 命令查看历史服务器所在主机进程启动状况，请截图在下面的方框。 </span></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p class="img-center"><img alt="" height="190" src="https://images2.imgbox.com/c8/9c/KIrVF2XJ_o.png" width="470"></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在浏览器 FireFox 中输入 URL </span><span style="color:#0563c1;">http://hadoop100:9870</span><span style="color:#000000;">，查看文件系统各项参数。将结果截图在下面。 </span></p> 
<p class="img-center"><img alt="" height="307" src="https://images2.imgbox.com/78/5b/3EYqFLxL_o.png" width="691"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在浏览器 FireFox 中输入 URL </span><a href="http://hadoop02:19888" rel="nofollow" title="http://hadoop101:19888，查看历史信息。将结果截图在下面。">http://hadoop101:19888，查看历史信息。将结果截图在下面。</a></p> 
<p class="img-center"><img alt="" height="330" src="https://images2.imgbox.com/be/9e/9qKYJE3w_o.png" width="691"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">运行程序测试 MapReduce 计算框架：使用以下命令执行 MapReduce 程序 pi， 将执行结果截图在后面的方框中，注意截图中必须包含 Hadoop 账户名称。（</span><strong><span style="color:#ff0000;"><strong>学号 +姓名缩写</strong></span></strong><span style="color:#000000;">） </span></p> 
<p class="img-center"><img alt="" height="28" src="https://images2.imgbox.com/70/d9/lKndaEw7_o.png" width="692"></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="vertical-align:top;width:426.1pt;"> <p class="img-center"><img alt="" height="319" src="https://images2.imgbox.com/7b/92/TVOZkKMF_o.png" width="692"></p> <p class="img-center"><img alt="" height="337" src="https://images2.imgbox.com/45/83/HJGLhwgw_o.png" width="692"></p> <p style="margin-left:.0001pt;text-align:left;"></p> <p style="margin-left:.0001pt;text-align:left;"></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p class="img-center"><img alt="" height="264" src="https://images2.imgbox.com/bf/dd/LyXPMuLF_o.png" width="692"></p> 
<p class="img-center"><img alt="" height="277" src="https://images2.imgbox.com/10/d9/42rVTmPp_o.png" width="691"></p> 
<p style="margin-left:.0001pt;text-align:left;">        点击History</p> 
<p class="img-center"><img alt="" height="348" src="https://images2.imgbox.com/7e/5b/OCJgelOn_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;">http://hadoop100:9870</p> 
<p class="img-center"><img alt="" height="332" src="https://images2.imgbox.com/d3/2d/O06LW789_o.png" width="692"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65d35a44e85e4f448f044d2b08093a85/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">你也想做一个Element-ui吧！！！——Blueの前端路（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/83b795a58f549919e2227f082a08215e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JavaWeb（四：Ajax与Json）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>