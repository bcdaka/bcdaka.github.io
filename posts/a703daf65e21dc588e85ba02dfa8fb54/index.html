<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>模拟登录页，华为账号一键登录 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a703daf65e21dc588e85ba02dfa8fb54/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="模拟登录页，华为账号一键登录">
  <meta property="og:description" content="一、介绍
基于鸿蒙Next模拟账号一键登录，免去账号注册环节
二、场景需求
1. 用户场景
新用户： 需要快速注册并登录，以体验华为的服务。
老用户： 希望快速登录，不用每次输入用户名和密码。
2. 界面设计
Logo和标题： 页面顶部展示华为的Logo及&#34;一键登录&#34;或&#34;华为账号登录&#34;的标题。
3. 功能需求：短信/邮箱验证码：
4. 安全性
二次验证： 可选启用二次验证，如在高风险环境下（新设备登录等），要求用户通过邮件或短信进行确认。
5. 适应性
响应式设计： 确保在不同设备（手机、平板、电脑）上的良好展示。
多语言支持： 提供多种语言选项，方便不同地区用户使用。
6. 用户反馈
操作反馈： 无论是按钮点击还是输入错误，都需要及时反馈用户操作状态。
常见问题解答链接： 用户如果在登录时遇到问题，可以快速找到帮助。
三、业务步骤
第一步：点击“一键登录”，获取登录信息
第二步：拉起授权弹窗
第三步：获取授权，获取用户信息
第四步：展示用户信息，显示功能选项
四、效果展示
五：代码展示：
import { authentication } from &#39;@kit.AccountKit&#39;; import { hilog } from &#39;@kit.PerformanceAnalysisKit&#39;; import { util } from &#39;@kit.ArkTS&#39;; import { BusinessError } from &#39;@kit.BasicServicesKit&#39;; //自定义 import { Mine_SystemItem_Type,CommonConstants } from &#34;../common/CommonConstant&#34; @Entry @Component struct Index06 { @State tabMineItem:Mine_SystemItem_Type[] = CommonConstants.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-29T17:07:13+08:00">
    <meta property="article:modified_time" content="2024-08-29T17:07:13+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">模拟登录页，华为账号一键登录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>一、介绍</strong><br> 基于鸿蒙Next模拟账号一键登录，免去账号注册环节<br><strong>二、场景需求</strong><br> 1. 用户场景<br> 新用户： 需要快速注册并登录，以体验华为的服务。<br> 老用户： 希望快速登录，不用每次输入用户名和密码。<br> 2. 界面设计<br> Logo和标题： 页面顶部展示华为的Logo及"一键登录"或"华为账号登录"的标题。<br> 3. 功能需求：短信/邮箱验证码：<br> 4. 安全性<br> 二次验证： 可选启用二次验证，如在高风险环境下（新设备登录等），要求用户通过邮件或短信进行确认。<br> 5. 适应性<br> 响应式设计： 确保在不同设备（手机、平板、电脑）上的良好展示。<br> 多语言支持： 提供多种语言选项，方便不同地区用户使用。<br> 6. 用户反馈<br> 操作反馈： 无论是按钮点击还是输入错误，都需要及时反馈用户操作状态。<br> 常见问题解答链接： 用户如果在登录时遇到问题，可以快速找到帮助。</p> 
<p><strong>三、业务步骤</strong><br> 第一步：点击“一键登录”，获取登录信息<br> 第二步：拉起授权弹窗<br> 第三步：获取授权，获取用户信息<br> 第四步：展示用户信息，显示功能选项<br><strong>四、效果展示</strong><br>  </p> 
<p class="img-center"><img alt="#HarmonyOS NEXT 体验官#模拟登录页，华为账号一键登录-鸿蒙开发者社区" height="387" src="https://images2.imgbox.com/65/c1/5FzARRvC_o.png" width="600"></p> 
<p><br><strong>五：代码展示：</strong></p> 
<pre><code class="hljs">import { authentication } from '@kit.AccountKit';
import { hilog } from '@kit.PerformanceAnalysisKit';
import { util } from '@kit.ArkTS';
import { BusinessError } from '@kit.BasicServicesKit';

//自定义
import { Mine_SystemItem_Type,CommonConstants } from "../common/CommonConstant"

@Entry
@Component
struct Index06 {
  @State tabMineItem:Mine_SystemItem_Type[] = CommonConstants.MINE_SYSTEM_ITEM_LIST
  @State isLogin: boolean = false
  @State userImg: string|Resource|undefined = $r("app.media.app_icon") // 登录头像
  @State userName: string|undefined = '昵称001' // 用户昵称
  @State btnTitle: string = '华为账号一键登录' // 用户昵称

  getHuaWeiAccount(){
    // 创建授权请求，并设置参数
    let authRequest = new authentication.HuaweiIDProvider().createAuthorizationWithHuaweiIDRequest();
    // 获取头像昵称需要传如下scope
    authRequest.scopes = ['profile','phone'];
    // 若开发者需要进行服务端开发，则需传如下permission获取authorizationCode
    authRequest.permissions = ['serviceauthcode'];
    // 用户是否需要登录授权，该值为true且用户未登录或未授权时，会拉起用户登录或授权页面
    authRequest.forceAuthorization = true;
    // 用于防跨站点请求伪造。
    authRequest.state = util.generateRandomUUID();
    // 执行授权请求
    try {
      let controller = new authentication.AuthenticationController(getContext(this));
      controller.executeRequest(authRequest).then((data) =&gt; {
        let authorizationWithHuaweiIDResponse = data as authentication.AuthorizationWithHuaweiIDResponse;
        let state = authorizationWithHuaweiIDResponse.state;
        if (state != undefined &amp;&amp; authRequest.state != state) {
          hilog.error(0x0000, 'testTag', `Failed to authorize. The state is different, response state: ${state}`);
          return;
        }
        hilog.info(0x0000, 'testTag', 'Succeeded in authentication: %{public}s',
          JSON.stringify(authorizationWithHuaweiIDResponse));
        this.isLogin = !this.isLogin
        this.btnTitle = '退出'
        this.userImg = authorizationWithHuaweiIDResponse.data!.avatarUri;
        this.userName = authorizationWithHuaweiIDResponse.data!.nickName;

      }).catch((err: BusinessError) =&gt; {
        this.dealAllError(err);
      });
    } catch (error) {
      this.dealAllError(error);
    }
  }
  // 错误处理
  dealAllError(error: BusinessError): void {
    hilog.error(0x0000, 'testTag', `Failed to auth. Code: ${error.code}, message: ${error.message}`);
  }

  build() {
      Column() {
        Column() {
          //头像
          Column() {
            Image(this.userImg)
              .objectFit(ImageFit.Cover)
              .height(72)
              .width(72)
              .borderRadius(36)
            Row().height(20)

            Text(this.userName).fontSize(16)

          }
          .width('90%')
          .borderRadius(12)
          .alignItems(HorizontalAlign.Center)
          .justifyContent(FlexAlign.Center)
          .backgroundColor(0xFFFFFF)
          .shadow({
            radius: 10,
            color: "#dddddd",
            offsetX: 6,
            offsetY: 6
          })
          .margin({ top: 15, bottom: 10 })
          .padding({ top: 30, bottom: 30 })
        }
        .justifyContent(FlexAlign.Start)
        .alignItems(HorizontalAlign.Center)

        Button(this.btnTitle)
          .width('70%')
          .height(30)
          .onClick(()=&gt;{
            this.getHuaWeiAccount()
            // this.isLogin = !this.isLogin
            // this.btnTitle = '退出'
          })
          .margin({ top:10,bottom:20 })

        if (this.isLogin){
        Column(){
          //功能选项
          ForEach(this.tabMineItem,(item:Mine_SystemItem_Type,index:number)=&gt;{
            Row(){
              Text(item.itemTitle).fontSize(16).fontColor(0x161616)
              Blank()
              Image($r("app.media.ic_right_back_greyWhite")).width(24).height(24)
            }.width('100%')
            .height(48)
            .padding({left:15,right:10})
            .stateStyles({
              normal:{.backgroundColor(0xFFFFFF)},
              pressed:{.backgroundColor(0xEFEFEF)}
            })
          },(item:string)=&gt;item)
          Row(){
            Text('隐私声明').fontSize(16).fontColor(0x161616)
            Blank()
            Image($r("app.media.ic_right_back_greyWhite")).width(24).height(24)
          }.width('100%')
          .height(48)
          .padding({left:15,right:10})
          .stateStyles({
            normal:{.backgroundColor(0xFFFFFF)},
            pressed:{.backgroundColor(0xEFEFEF)}
          })

        }.width('90%')
        .justifyContent(FlexAlign.Start)
        .alignItems(HorizontalAlign.Center)
        .backgroundColor(0xFFFFFF)
        .shadow({radius:10,color:"#dddddd",offsetX:6,offsetY:6})
        .padding({top:10,bottom:10})
        .borderRadius(12)
        }

      }.width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Start)
    .backgroundColor(0xEEEEEE)

  }

}

</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cb7c08493555d8eccb9b6a1ef8b1719d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">npm登录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/120749873ce309e090c90a90b4e966b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Kafka 到数据仓库：使用 bend-ingest-kafka 将消息加载到 Databend</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>