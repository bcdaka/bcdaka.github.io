<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL 高级SQL语句 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/30640fed720e054eb9db5bf2b914b662/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL 高级SQL语句">
  <meta property="og:description" content="前言： MySQL 查询数据的执行过程
客户端向 MySQL 服务器发送一条查询请求，连接器负责处理连接，并进行身份验证和权限控制。MySQL 先检查查询缓存，如果命中缓存，则立刻返回存储在缓存中的结果；否则使用查询解析器进行SQL语句解析、预处理，再由优化器生成对应的执行计划。MySQL 根据执行计划，调用存储引擎来执行查询。将结果返回给客户端，同时缓存查询结果。 创建两个表，并插入数据，作为操作对象
use mydb; create table location (Region char(20),Store_Name char(20)); insert into location values(&#39;East&#39;,&#39;Boston&#39;); insert into location values(&#39;East&#39;,&#39;New York&#39;); insert into location values(&#39;West&#39;,&#39;Los Angeles&#39;); insert into location values(&#39;West&#39;,&#39;Houston&#39;); create table store_info (Store_Name char(20),Sales int(10),Date char(10)); insert into store_info values(&#39;Los Angeles&#39;,&#39;1500&#39;,&#39;2020-12-05&#39;); insert into store_info values(&#39;Houston&#39;,&#39;250&#39;,&#39;2020-12-07&#39;); insert into store_info values(&#39;Los Angeles&#39;,&#39;300&#39;,&#39;2020-12-08&#39;); insert into store_info values(&#39;Boston&#39;,&#39;700&#39;,&#39;2020-12-08&#39;); insert into store_info values(&#39;Washington&#39;,&#39;1000&#39;,&#39;2020-12-09&#39;); insert into store_info values(&#39;Chicago&#39;,&#39;800&#39;,&#39;2020-12-10&#39;); use mydb; create table location (Region char(20),Store_Name char(20)); insert into location values(&#39;East&#39;,&#39;Boston&#39;); insert into location values(&#39;East&#39;,&#39;New York&#39;); insert into location values(&#39;West&#39;,&#39;Los Angeles&#39;); insert into location values(&#39;West&#39;,&#39;Houston&#39;); create table store_info (Store_Name char(20),Sales int(10),Date char(10)); insert into store_info values(&#39;Los Angeles&#39;,&#39;1500&#39;,&#39;2020-12-05&#39;); insert into store_info values(&#39;Houston&#39;,&#39;250&#39;,&#39;2020-12-07&#39;); insert into store_info values(&#39;Los Angeles&#39;,&#39;300&#39;,&#39;2020-12-08&#39;); insert into store_info values(&#39;Boston&#39;,&#39;700&#39;,&#39;2020-12-08&#39;); insert into store_info values(&#39;Washington&#39;,&#39;1000&#39;,&#39;2020-12-09&#39;); insert into store_info values(&#39;Chicago&#39;,&#39;800&#39;,&#39;2020-12-10&#39;); 一.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-28T01:19:56+08:00">
    <meta property="article:modified_time" content="2024-06-28T01:19:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL 高级SQL语句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言：</h2> 
<p><strong>MySQL 查询数据的执行过程</strong></p> 
<ul><li>客户端向 MySQL 服务器发送一条查询请求，连接器负责处理连接，并进行身份验证和权限控制。</li><li>MySQL 先检查查询缓存，如果命中缓存，则立刻返回存储在缓存中的结果；否则使用查询解析器进行SQL语句解析、预处理，再由优化器生成对应的执行计划。</li><li>MySQL 根据执行计划，调用存储引擎来执行查询。</li><li>将结果返回给客户端，同时缓存查询结果。</li></ul> 
<p><strong>创建两个表，并插入数据，作为操作对象</strong></p> 
<pre><code>use mydb;
create table location (Region char(20),Store_Name char(20));
insert into location values('East','Boston');
insert into location values('East','New York');
insert into location values('West','Los Angeles');
insert into location values('West','Houston');

create table store_info (Store_Name char(20),Sales int(10),Date char(10));
insert into store_info values('Los Angeles','1500','2020-12-05');
insert into store_info values('Houston','250','2020-12-07');
insert into store_info values('Los Angeles','300','2020-12-08');
insert into store_info values('Boston','700','2020-12-08');
insert into store_info values('Washington','1000','2020-12-09');
insert into store_info values('Chicago','800','2020-12-10');</code></pre> 
<pre><code>use mydb;
create table location (Region char(20),Store_Name char(20));
insert into location values('East','Boston');
insert into location values('East','New York');
insert into location values('West','Los Angeles');
insert into location values('West','Houston');

create table store_info (Store_Name char(20),Sales int(10),Date char(10));
insert into store_info values('Los Angeles','1500','2020-12-05');
insert into store_info values('Houston','250','2020-12-07');
insert into store_info values('Los Angeles','300','2020-12-08');
insert into store_info values('Boston','700','2020-12-08');
insert into store_info values('Washington','1000','2020-12-09');
insert into store_info values('Chicago','800','2020-12-10');</code></pre> 
<h2><img alt="" height="522" src="https://images2.imgbox.com/e7/74/16mqrphl_o.png" width="691"></h2> 
<h2>一.MySQL进阶查询 </h2> 
<h3>1.select</h3> 
<p><strong>显示表格中一个或数个字段的所有数据记录</strong></p> 
<pre><code>语法：select "字段" from "表名";

select store_name from store_info;</code></pre> 
<p><img alt="" height="295" src="https://images2.imgbox.com/d7/56/1sByPDeX_o.png" width="585"></p> 
<h3>2.distinct</h3> 
<p><strong>不显示重复的数据记录</strong></p> 
<pre><code>语法：select distinct "字段" from "表名";

select distinct store_name from store_info;</code></pre> 
<p><img alt="" height="262" src="https://images2.imgbox.com/d8/0b/fkYJVlyy_o.png" width="627"></p> 
<h3>3.where</h3> 
<p>有条件查询</p> 
<pre><code>语法：select "字段" from "表名" where "条件";

select store_name from store_info where sales &gt; 1000;</code></pre> 
<p><img alt="" height="439" src="https://images2.imgbox.com/cb/13/TP9DkRvU_o.png" width="778"></p> 
<p><img alt="" height="681" src="https://images2.imgbox.com/a0/09/LVVjwdrt_o.png" width="750"></p> 
<h3>4.and、or 且、或</h3> 
<pre><code>语法：select "字段" from "表名" where "条件1" {[and | or] "条件2"}；

select * from store_info where sales &gt; 500 and sales &lt; 1000;

select * from store_info where store_name='Log angeles' or store_name='Hoston';

select * from store_info where (store_name='Log angeles' or store_name='Hoston');</code></pre> 
<p><img alt="" height="444" src="https://images2.imgbox.com/7c/09/JypEMyw7_o.png" width="1068"></p> 
<p><img alt="" height="175" src="https://images2.imgbox.com/7b/4c/hPDFbJZk_o.png" width="1200"></p> 
<h3>5.in</h3> 
<p><strong>显示已知的值的数据记录</strong></p> 
<pre><code>语法：select "字段" from "表名" where "字段" in ('值1', '值2', ...);

select * from store_info where store_name in ('Los Angeles', 'Houston');
                                          #显示包含这两个数据的内容

select * from store_info where store_name not in ('Los Angeles', 'Houston');
                                          #显示不包含这两个数据的内容
</code></pre> 
<p><img alt="" height="460" src="https://images2.imgbox.com/2b/b2/VCDM4DXF_o.png" width="997"></p> 
<h3>6.between</h3> 
<p><strong>显示两个值范围内的数据记录</strong></p> 
<pre><code>语法：select "字段" from "表名" where "字段" between '值1' and '值2';

select * from store_info where date between '2020-12-07' and '2020-12-09';</code></pre> 
<p><img alt="" height="459" src="https://images2.imgbox.com/33/01/f31W07tU_o.png" width="969"></p> 
<h3>7.通配符</h3> 
<p><strong>通常通配符都是跟 like 一起使用的</strong></p> 
<pre><code>% ：百分号表示零个、一个或多个字符

_ ：下划线表示单个字符

'A_Z'：所有以 'A' 起头，另一个任何值的字符，且以 'Z' 为结尾的字符串。
例如，'ABZ' 和 'A2Z' 都符合这一个模式，而 'AKKZ' 并不符合 (因为在 A 和 Z 之间有两个字符，而不是一个字符)。

'ABC%': 所有以 'ABC' 起头的字符串。
例如，'ABCD' 和 'ABCABC' 都符合这个模式。

'%XYZ': 所有以 'XYZ' 结尾的字符串。
例如，'WXYZ' 和 'ZZXYZ' 都符合这个模式。

'%AN%': 所有含有 'AN'这个模式的字符串。
例如，'LOS ANGELES' 和 'SAN FRANCISCO' 都符合这个模式。

'_AN%'：所有第二个字母为 'A' 和第三个字母为 'N' 的字符串。

例如，'SAN FRANCISCO' 符合这个模式，而 'LOS ANGELES' 则不符合这个模式。
</code></pre> 
<h3>8.like</h3> 
<p><strong>匹配一个模式来找出我们要的数据记录</strong></p> 
<pre><code>语法：select "字段" from "表名" where "字段" like {模式}；

select * from store_info where store_name like '%_os%';</code></pre> 
<p><img alt="" height="636" src="https://images2.imgbox.com/1a/08/DLONAEc6_o.png" width="795"></p> 
<h3>9.order by</h3> 
<p><strong>按关键字排序</strong></p> 
<pre><code>语法：select "字段" from "表名" [ where "条件"] order by "字段" [asc,desc];

#ASC 是按照升序进行排序的，是默认的排序方式。

#DESC 是按降序方式进行排序。

select store_name,sales,date from store_info order by sales desc;</code></pre> 
<p><img alt="" height="574" src="https://images2.imgbox.com/2a/dd/ihNr4KP8_o.png" width="741"></p> 
<p><img alt="" height="222" src="https://images2.imgbox.com/10/0a/4pgQPLGr_o.png" width="1195"></p> 
<h2>二.MySQL函数</h2> 
<h3>1.数学函数</h3> 
<pre><code>abs(x)				返回 x 的绝对值

rand()				返回 0 到 1 的随机数

mod(x,y)			返回 x 除以 y 以后的余数

power(x,y)			返回 x 的 y 次方

sqrt(x)				返回 x 的平方根

round(x)			返回离 x 最近的整数

round(x,y)			保留 x 的 y 位小数四舍五入后的值

truncate(x,y)		返回数字 x 截断为 y 位小数的值

ceil(x)				返回大于或等于 x 的最小整数

floor(x)			返回小于或等于 x 的最大整数

greatest(x1,x2...)	返回集合中最大的值，也可以返回多个字段的最大的值

least(x1,x2...)		返回集合中最小的值，也可以返回多个字段的最小的值</code></pre> 
<p><img alt="" height="351" src="https://images2.imgbox.com/e4/54/VEmc1kTx_o.png" width="1105"></p> 
<p><img alt="" height="171" src="https://images2.imgbox.com/7e/23/gVgzRaWP_o.png" width="568"></p> 
<h3>2.聚合函数</h3> 
<pre><code>avg()				返回指定列的平均值

count()				返回指定列中非 NULL 值的个数

#count(*) 包括了所有的列的行数，在统计结果的时候，不会忽略列值为 NULL
#count(列名) 只包括列名那一列的行数，在统计结果的时候，会忽略列值为 NULL 的行

min()				返回指定列的最小值

max()				返回指定列的最大值

sum(x)				返回指定列的所有值之和</code></pre> 
<p><img alt="" height="357" src="https://images2.imgbox.com/bb/ff/jpEf7CKQ_o.png" width="601"></p> 
<p><img alt="" height="529" src="https://images2.imgbox.com/0b/a0/VWGdINQu_o.png" width="709"></p> 
<h3>3.字符串函数</h3> 
<p><strong>拓展：分割字符串的三种方法</strong></p> 
<pre><code>[root@localhost ~]# i=abcdefg           定义变量          

[root@localhost ~]# echo ${i:2:2}               第一种       下标从0开始
cd
[root@localhost ~]# expr substr $i 3 2          第二种       下标从1开始
cd
[root@localhost ~]# echo abcdefg | cut -b 3-4   第三种       下标从1开始
cd</code></pre> 
<pre><code>concat(x,y)			将提供的参数 x 和 y 拼接成一个字符串

substr(x,y)			获取从字符串 x 中的第 y 个位置开始的字符串，跟substring()函数作用相同

substr(x,y,z)		获取从字符串 x 中的第 y 个位置开始长度为 z 的字符串

length(x)			返回字符串 x 的长度

replace(x,y,z)		将字符串 z 替代字符串 x 中的字符串 y

trim()				返回去除指定格式的值

upper(x)			将字符串 x 的所有字母变成大写字母

lower(x)			将字符串 x 的所有字母变成小写字母

left(x,y)			返回字符串 x 的前 y 个字符

right(x,y)			返回字符串 x 的后 y 个字符

repeat(x,y)			将字符串 x 重复 y 次

space(x)			返回 x 个空格

strcmp(x,y)			比较 x 和 y，返回的值可以为-1,0,1

reverse(x)			将字符串 x 反转</code></pre> 
<p><strong>upper </strong></p> 
<p><img alt="" height="355" src="https://images2.imgbox.com/fe/eb/KD3M4zxW_o.png" width="514"></p> 
<p><strong>concat</strong></p> 
<p><img alt="" height="351" src="https://images2.imgbox.com/de/39/dSqlvETd_o.png" width="592"></p> 
<p><img alt="" height="256" src="https://images2.imgbox.com/4e/33/4VcGVnv7_o.png" width="742"></p> 
<p><strong> 若在数据库的配置文件中加入了PIPES_AS_CONCAT的配置，也可以使用 || 来进行拼接</strong></p> 
<p><img alt="" height="358" src="https://images2.imgbox.com/74/9e/3rsU93ci_o.png" width="577"></p> 
<p><strong>substr</strong></p> 
<p> <img alt="" height="363" src="https://images2.imgbox.com/79/a8/wo7o4ct3_o.png" width="600"></p> 
<p><strong>subtring</strong></p> 
<p><img alt="" height="376" src="https://images2.imgbox.com/54/d9/ORQorKxi_o.png" width="952"></p> 
<p><strong>length</strong></p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/3b/90/m1npIwlI_o.png" width="730"></p> 
<p><strong>replace</strong></p> 
<p><img alt="" height="213" src="https://images2.imgbox.com/b9/c3/y6uVvZk9_o.png" width="936"></p> 
<p><img alt="" height="486" src="https://images2.imgbox.com/a1/af/pPPbj7TQ_o.png" width="853"></p> 
<p><strong>trim </strong></p> 
<p><img alt="" height="400" src="https://images2.imgbox.com/5a/5e/W0zT7uyl_o.png" width="669"></p> 
<p><strong>left 和 right</strong></p> 
<h2><img alt="" height="393" src="https://images2.imgbox.com/b0/0a/BI7AkVOc_o.png" width="897"></h2> 
<h2>三.MySQL 查询函数</h2> 
<h3>1.group by</h3> 
<p><strong>对GROUP BY后面的字段的查询结果进行汇总分组，常是结合聚合函数一起使用的</strong></p> 
<p>GROUP BY 有一个原则，凡是在 GROUP BY 后面出现的字段，必须在 SELECT 后面出现；</p> 
<p>凡是在 SELECT 后面出现的、且未在聚合函数中出现的字段，必须出现在 GROUP BY 后面;</p> 
<pre><code>语法：select "字段1", sum("字段2") from "表名" group by "字段1";

select store_name, sum(sales) from store_info group by store_name order bt sales desc;</code></pre> 
<p><img alt="" height="810" src="https://images2.imgbox.com/b5/08/Kw6cGLTx_o.png" width="937"></p> 
<p><img alt="" height="639" src="https://images2.imgbox.com/ec/3b/5CtTDRhU_o.png" width="808"></p> 
<h3>2.having</h3> 
<p><strong>用来过滤由 GROUP BY 语句返回的记录集，常与 GROUP BY 语句联合使用</strong></p> 
<p>HAVING 语句的存在弥补了 WHERE 关键字不能与聚合函数联合使用的不足。</p> 
<pre><code>语法：select "字段1", sum("字段2") from "表格名" group by "字段1" having (函数条件);

select store_name, sum(sales) from store_info group by store_name having sum(sales) &gt; 1000;
</code></pre> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/e7/f2/a8hasggC_o.jpg" width="1080"></p> 
<p><img alt="" height="1048" src="https://images2.imgbox.com/6e/5b/Vms4WIDN_o.png" width="1122"></p> 
<h3>3.别名</h3> 
<p><strong>字段別名 表格別名</strong></p> 
<pre><code>语法：select "表格別名"."字段1" [as] "字段別名" from "表格名" [as] "表格別名";

select A.store_name store, sum(A.sales) "total sales" from store_info A group by A.store_name;</code></pre> 
<p><img alt="" height="400" src="https://images2.imgbox.com/81/37/vxeH631t_o.png" width="931"></p> 
<p><img alt="" height="207" src="https://images2.imgbox.com/c2/1d/luULlh1C_o.png" width="1200"></p> 
<p><img alt="" height="402" src="https://images2.imgbox.com/02/5c/e8tdXx0n_o.png" width="1200"></p> 
<h3>4.子查询</h3> 
<p><strong>连接表格，在WHERE 子句或 HAVING 子句中插入另一个 SQL 语句</strong></p> 
<pre><code>语法：select "字段1" from "表格1" where "字段2" [比较运算符] 	#外查询语句

(select "字段1" from "表格2" where "条件");					#内查询语句

#可以是符号的运算符，例如 =、&gt;、&lt;、&gt;=、&lt;=、!=；也可以是文字的运算符，例如 LIKE、IN、BETWEEN

select sum(sales) from store_info where store_name in (select store_name from location where region = 'West');</code></pre> 
<p><img alt="" height="180" src="https://images2.imgbox.com/6c/04/91htjgkn_o.png" width="1125"></p> 
<h3><img alt="" height="184" src="https://images2.imgbox.com/a9/f3/hNNh0Y54_o.png" width="1200"></h3> 
<h3>5.exists</h3> 
<p><strong>用来根据条件过滤查询结果，并只返回满足条件的行</strong></p> 
<pre><code>语法：select "字段1" from "表格1" where exists (select * from "表格2" where "条件");

#这里的子查询作为条件进行判断。如果子查询返回至少一行结果，则外部查询的结果将包含该行

select * from store_info A where exists (select Store_Name from location B where B.store_name = A.store_name);
</code></pre> 
<p><img alt="" height="304" src="https://images2.imgbox.com/3b/d0/4y09cZ6J_o.png" width="1200"></p> 
<h2>四.表连接查询</h2> 
<p>1.连接查询方式</p> 
<pre><code>inner join(内连接)：只返回两个表中联结字段相等的行

left join(左连接)：返回包括左表中的所有记录和右表中联结字段相等的记录 

right join(右连接)：返回包括右表中的所有记录和左表中联结字段相等的记录</code></pre> 
<p><img alt="" height="525" src="https://images2.imgbox.com/ec/e5/nnn31UbW_o.png" width="478"></p> 
<h3>1.内连接</h3> 
<p><strong>只返回两个表中联结字段相等的行</strong></p> 
<pre><code>select A.store_name from store_info A inner join location B on A.store_name= B.store_name;</code></pre> 
<p><img alt="" height="274" src="https://images2.imgbox.com/5a/88/v712YSdD_o.png" width="942"></p> 
<h3>2.左连接</h3> 
<p><strong>返回包括左表中的所有记录和右表中联结字段相等的记录</strong></p> 
<pre><code>select * from location A left join store_info B on A.store_name = B.store_name;</code></pre> 
<p><img alt="" height="280" src="https://images2.imgbox.com/16/cd/gbqkTZ8X_o.png" width="949"></p> 
<h3>3.右连接</h3> 
<p><strong>返回包括右表中的所有记录和左表中联结字段相等的记录</strong></p> 
<pre><code>select * from location A right join store_info B on A.store_name = B.store_name;</code></pre> 
<p><img alt="" height="310" src="https://images2.imgbox.com/bd/13/ZII4PTM0_o.png" width="954"></p> 
<h3>4.full outer join   全外连接</h3> 
<p><strong>是一种特殊的连接，返回左表和右表中所有的行记录，但是MySQL不支持</strong></p> 
<h3>5.交集值 </h3> 
<p><strong>取两个SQL语句结果的交集</strong></p> 
<h4>（1）内连接</h4> 
<pre><code>内连接：

select A.字段 from 左表 A inner join 右表 B on A.字段=B.字段;
       
select A.字段 from 左表 A inner join 右表 B using(字段);


select A.store_name from store_info A inner join location B on A.store_name= B.store_name;

select distinct A.store_name from store_info A inner join location B on A.store_name= B.store_name;          
       #去除重复值

select A.store_name from store_info A inner join location B using(store_name);</code></pre> 
<p><img alt="" height="246" src="https://images2.imgbox.com/9d/68/j4Vc53tn_o.png" width="1120"></p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/d4/9b/7T4egvf3_o.png" width="1024"></p> 
<h4>（2） 左连接</h4> 
<pre><code>左连接：

select B.字段 from 左表 A left join 右表 B on A.字段 = B.字段 where B.字段 is not null;

select B.store_name from location A left join store_info B on A.store_name = B.store_name where B.store_name is not null;</code></pre> 
<p><img alt="" height="507" src="https://images2.imgbox.com/9a/95/hivgNHO3_o.png" width="1200"></p> 
<h4>（3） 右连接</h4> 
<pre><code>右连接：

select A.字段 from 左表 A left join 右表 B on A.字段 = B.字段 where A.字段 is not null;

select A.store_name from location A right join store_info B on A.store_name = B.store_name where A.store_name is not null;</code></pre> 
<p><img alt="" height="592" src="https://images2.imgbox.com/37/59/3bxxTVwh_o.png" width="1200"></p> 
<h4>（4）子查询</h4> 
<pre><code>select A.字段 from 左表 A where A.字段 in (select B.字段 from 右表 B);
        
select A.字段 from 左表 A where exists (select B.字段 from 右表 B where A.字段 = B.字段);

select store_name from store_info A where A.store_name in (select B.store_name from location B);

select A.store_name from store_info A where exists (select B.store_name from location B where A.store_name = B.store_name);</code></pre> 
<p><img alt="" height="604" src="https://images2.imgbox.com/d6/bc/7dC25Mfi_o.png" width="1200"></p> 
<h4>（5）多表查询</h4> 
<pre><code>select A.字段 from 左表 A, 右表 B where A.字段 = B.字段;

select A.store_name from store_info A, location B where A.store_name = B.store_name;</code></pre> 
<p><img alt="" height="604" src="https://images2.imgbox.com/89/68/R1DyuGH6_o.png" width="1200"></p> 
<h4>（6）联集+分组</h4> 
<p><strong>联集，将两个SQL语句的结果合并起来，两个SQL语句所产生的字段需要是同样的数据记录种类<br> UNION ：生成结果的数据记录值将没有重复，且按照字段的顺序进行排序</strong></p> 
<pre><code>union 联集语法：

[select 语句 1] union [select 语句 2];

union all ：将生成结果的数据记录值都列出来，无论有无重复

语法：[select 语句 1] union all [select 语句 2];</code></pre> 
<p><img alt="" height="820" src="https://images2.imgbox.com/6a/97/VGqdQz2t_o.png" width="1018"></p> 
<p><img alt="" height="390" src="https://images2.imgbox.com/0f/6b/FIhXAUVf_o.png" width="1045"></p> 
<pre><code>联集+分组：语法

select A.字段 from (select distinct 字段 from 左表 union all select distinct 字段 from 右表) A表 group by A.字段 having count(A.字段) &gt; 1;
          
#此处的 A表 是由内查询语句返回的结果 抽象出的派生表

select A.store_name from (select distinct store_name from store_info union all select distinct store_name from location) A groupby A.store_name having count(A.store_name) &gt; 1;</code></pre> 
<p><img alt="" height="966" src="https://images2.imgbox.com/74/f7/BVDjJHA1_o.png" width="1200"></p> 
<h3>6.无交集值</h3> 
<p><strong>显示第一个SQL语句的结果，且与第二个SQL语句没有交集的结果，且没有重复</strong></p> 
<h4>（1）求左表无交集</h4> 
<pre><code>select A.字段 from 左表 A left join 右表 B on A.字段 = B.字段 where B.字段 is null;

select 字段 from 左表 where 字段 not in (select 字段 from 右表);

select A.字段 from 左表 A where not exists (select B.字段 from 右表 B where A.字段 = B.字段);


select A.store_name from location A left join store_info B on A.store_name = B.store_name where B.store_name is null;

select store_name from location where store_name not in (select store_name from store_info);

select A.store_name from location A where not exists (select B.store_name from store_info B where A.store_name = B.store_name);</code></pre> 
<p><img alt="" height="496" src="https://images2.imgbox.com/81/f8/Hs4M6F5B_o.png" width="1200"></p> 
<p><img alt="" height="172" src="https://images2.imgbox.com/0b/1d/36KCbKh2_o.png" width="1134"></p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/d7/35/Rlm7aQlg_o.png" width="1200"></p> 
<h4>（2）求右表无交集</h4> 
<pre><code>select B.字段 from 左表 A right join 右表 B on A.字段 = B.字段 where A.字段 is null;

select 字段 from 右表 where 字段 not in (select 字段 from 左表);

select A.字段 from 右表 A where not exists (select B.字段 from 左表 B where A.字段 = B.字段);


select B.store_name from location A right join store_info B on A.store_name = B.store_name where A.store_name is null;

select store_name from store_info where store_name not in (select store_name from location);

select A.store_name from store_info A where not exists (select B.store_name from location B where A.store_name = B.store_name);</code></pre> 
<p><img alt="" height="493" src="https://images2.imgbox.com/13/1b/g7cndSQe_o.png" width="1200"></p> 
<p><img alt="" height="195" src="https://images2.imgbox.com/3a/c3/Ea42yU4r_o.png" width="1141"></p> 
<p><img alt="" height="192" src="https://images2.imgbox.com/86/a3/ZaeHxPQq_o.png" width="1200"></p> 
<h4>（3）求两个表无交集</h4> 
<pre><code>select A.字段 from 左表 A left join 右表 B on A.字段 = B.字段 where B.字段 is null

union all

select B.字段 from 左表 A right join 右表 B on A.字段 = B.字段 where A.字段 is null;

select A.字段 from (select distinct 字段 from 左表 union all select distinct 字段 from 右表) A group by A.字段 having count(A.字段) = 1;


select A.store_name from location A left join store_info B on A.store_name = B.store_name where B.store_name is null
    
-&gt; union all
    
-&gt; select B.store_name from location A right join store_info B on A.store_name = B.store_name where A.store_name is null;

select A.store_name from (select distinct store_name from store_info union all select distinct store_name from location) A group
by A.store_name having count(A.store_name) = 1;</code></pre> 
<p><img alt="" height="274" src="https://images2.imgbox.com/2e/a7/hQQYQuUQ_o.png" width="1200"></p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/8f/42/T3HuqyYc_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/521915d048c2fce14ccc79641b33ac3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于SSM&#43;Jsp的艺诚美业管理系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/349f86635b7ce899fe7dbda45653896b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【python】PyQt5对象类型的判定，对象删除操作详细解读</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>