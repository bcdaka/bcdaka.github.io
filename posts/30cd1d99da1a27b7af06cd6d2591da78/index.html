<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FLUX.1 实测，堪比 Midjourney 的开源 AI 绘画模型，无需本地显卡，带你免费实战 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/30cd1d99da1a27b7af06cd6d2591da78/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="FLUX.1 实测，堪比 Midjourney 的开源 AI 绘画模型，无需本地显卡，带你免费实战">
  <meta property="og:description" content="要列举 AI 绘画开源界的几个关键贡献，一定少不了 Stable Diffusion。
还记否前不久刚推出的 Stable Diffusion 3？
其背后的团队 Stability AI，真的是一波三折，其核心成员出走，成立了一个新公司：Black Forest Labs - 黑暗森林。
这不，刚刚开源了一款 AI 绘画模型，直接踢馆老东家，其生成效果，完全可以媲美闭源的 Midjourney。
今日分享，就带大家来体验一番，并在本地部署起来。
之前我的 AI 绘画，都是来自本地部署的 sd-webui。终于，我的 Stable Diffusion 2 该下线 - 光荣退休了？
No！No！No！
尽管 Flux.1 的表现可圈可点，不过要说能完全替代 sd，至少现阶段，还不至于。
我们先来实测体验一番~
目录 1. Flux.1 简介2. 在线体验3. 本地部署3.1 模型下载地址3.2 ModelScope 实战Step1：下载 ComfyUIStep2：下载模型Step3：启动 ComfyUIStep4：cloudflared 安装和使用Step5：愉快玩耍 写在最后 1. Flux.1 简介 FLUX.1 AI 号称的优势有:
• 卓越的视觉质量: 生成具有出色细节和清晰度的图像。
• 精确的提示词遵循: 准确地将文本提示转化为图片，一次生成，无需抽卡。
• 多样化的风格: 支持广泛的艺术风格。
• 复杂场景生成: 创建精细详尽的场景。
真的有吹的那么神么？我们来实测体验一番👇">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-08T07:45:26+08:00">
    <meta property="article:modified_time" content="2024-08-08T07:45:26+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FLUX.1 实测，堪比 Midjourney 的开源 AI 绘画模型，无需本地显卡，带你免费实战</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>要列举 AI 绘画开源界的几个关键贡献，一定少不了 Stable Diffusion。</p> 
<p>还记否前不久刚推出的 Stable Diffusion 3？</p> 
<p>其背后的团队 Stability AI，真的是一波三折，其核心成员出走，成立了一个新公司：<code>Black Forest Labs</code> - 黑暗森林。</p> 
<p>这不，刚刚开源了一款 AI 绘画模型，直接踢馆老东家，其生成效果，完全可以媲美闭源的 Midjourney。</p> 
<p>今日分享，就带大家来体验一番，并在本地部署起来。</p> 
<p>之前我的 AI 绘画，都是来自本地部署的 sd-webui。终于，我的 Stable Diffusion 2 该下线 - 光荣退休了？</p> 
<p>No！No！No！</p> 
<p>尽管 Flux.1 的表现可圈可点，不过要说能完全替代 sd，至少现阶段，还不至于。</p> 
<p>我们先来实测体验一番~</p> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#1_Flux1__21" rel="nofollow">1. Flux.1 简介</a></li><li><a href="#2__36" rel="nofollow">2. 在线体验</a></li><li><a href="#3__122" rel="nofollow">3. 本地部署</a></li><li><ul><li><a href="#31__138" rel="nofollow">3.1 模型下载地址</a></li><li><a href="#32_ModelScope__163" rel="nofollow">3.2 ModelScope 实战</a></li><li><ul><li><a href="#Step1_ComfyUI_172" rel="nofollow">Step1：下载 ComfyUI</a></li><li><a href="#Step2_186" rel="nofollow">Step2：下载模型</a></li><li><a href="#Step3_ComfyUI_215" rel="nofollow">Step3：启动 ComfyUI</a></li><li><a href="#Step4cloudflared__233" rel="nofollow">Step4：cloudflared 安装和使用</a></li><li><a href="#Step5_279" rel="nofollow">Step5：愉快玩耍</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_295" rel="nofollow">写在最后</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_Flux1__21"></a>1. Flux.1 简介</h2> 
<p>FLUX.1 AI 号称的优势有:</p> 
<p>• 卓越的视觉质量: 生成具有出色细节和清晰度的图像。</p> 
<p>• 精确的提示词遵循: 准确地将文本提示转化为图片，一次生成，无需抽卡。</p> 
<p>• 多样化的风格: 支持广泛的艺术风格。</p> 
<p>• 复杂场景生成: 创建精细详尽的场景。</p> 
<p>真的有吹的那么神么？我们来实测体验一番👇</p> 
<h2><a id="2__36"></a>2. 在线体验</h2> 
<blockquote> 
 <ul><li>官网：<a href="https://flux1ai.com/dev" rel="nofollow">https://flux1ai.com/dev</a></li><li>modelscope: <a href="https://www.modelscope.cn/studios/muse/flux_dev" rel="nofollow">https://www.modelscope.cn/studios/muse/flux_dev</a></li></ul> 
</blockquote> 
<p>我们以官网的地址为例，一起来体验一下。<br> 使用非常简单，文本框输入你想要生成的内容，右侧一键 <code>Run</code>：</p> 
<p><img src="https://images2.imgbox.com/72/14/ZzCfTf9u_o.png" alt=""></p> 
<p>右侧提示框出现<code>分配到GPU</code>后，生成一张图像大概 30-50S 左右。</p> 
<p>我用下面这个提示词实测了一下，第一次尝试在图片中生成中文，居然失败了！<br> 所以最好使用英文提示词。</p> 
<pre><code>A Monkey holding up a sign with a rainbow in it, 
reading "猴哥 AI"
</code></pre> 
<p>不过有一说一，这个 mokey 的毛发生成的还挺精细的~</p> 
<p><img src="https://images2.imgbox.com/d2/ad/ogpose06_o.png" alt=""></p> 
<p>当然，下方还可以进行一番简单的设置，比如最基础的希望生成图像的宽和高：</p> 
<p><img src="https://images2.imgbox.com/46/c3/E9erTa8Y_o.png" alt=""></p> 
<p>然后，我们把提示词修改一下，让它生成一只卡通猴子~</p> 
<pre><code>A catoon monkey with smile holding up a sign with a rainbow in it, reading "AI".
</code></pre> 
<p>哈哈，尽管并没完全按照指令生成。不过，个人感觉还是挺可爱的，用来做logo、做封面怎么样？</p> 
<p><img src="https://images2.imgbox.com/04/54/HpYFgX4u_o.png" alt=""></p> 
<p>再来测试一个封面图，我让它写上 <code>Houge AI</code>：</p> 
<pre><code>A round chocolate cake decorated with chocolate shavings, topped with the words Houge AI in white icing and garnished with red cherries. The cake is positioned on a white plate on a wooden table, with a coffee cup and saucer in the background.
</code></pre> 
<p><img src="https://images2.imgbox.com/80/aa/6AUD6lo8_o.png" alt=""></p> 
<p>接着，我们再从 AI 绘画社区中找一些垂类模型的提示词来实测一下：</p> 
<pre><code>1girl,sweater,white background,
</code></pre> 
<p>简单的提示词，默认是生成卡通类型的图像：</p> 
<p><img src="https://images2.imgbox.com/c1/eb/PyEnbu8H_o.png" alt=""></p> 
<p>再给加点料：</p> 
<pre><code>masterpiece,best quality,1girl,moyou,seductive smile,(Turtleneck_sweater_dress:1.5),(Thigh-high_boots:1.4),(Wide-brim_hat:1.3),(Autumn_foliage_background:1.3)
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/f6/7GDjJ1aW_o.png" alt=""></p> 
<p>生成一张写实类的吧：</p> 
<pre><code>official art,Best quality,masterpiece,ultra high res,((photorealistic:1.4)),((deep Focus)),raw photo,extremely delicate,intricate details,best shadow,1girl,upper body,beautiful,cool,smallface,detailed face,((detailed very long hair)),(pale skin),((brown eyes)),deep shadow,look away,film grain,low key,soft lighting,poised poise,dramatic angles,geometric shapes,contrasts of light and shadow,high-tech backdrop,crisp lines
</code></pre> 
<p><img src="https://images2.imgbox.com/10/df/mqLP8NEI_o.png" alt=""></p> 
<p>别的不说，细节绝对拉满。Asian girl 亚洲脸，能不能行？</p> 
<p><img src="https://images2.imgbox.com/0f/d6/TMWRCkJI_o.png" alt=""></p> 
<p>有一说一，Flux 在细节处理上已经足够逼真，不过写实类的还得是垂类大模型~</p> 
<p>官方体验地址，因为 GPU 资源有限，高峰期容易排队失败~</p> 
<p>但这是一个开源模型，我们完全可以本地跑起来，接着就带着大家实操一番~</p> 
<h2><a id="3__122"></a>3. 本地部署</h2> 
<p>Flux.1 根据模型大小，分为三个版本：</p> 
<ul><li> <p>Schnell：最快的模型。</p> </li><li> <p>Dev：在速度和质量之间提供平衡，并支持更多定制选项。</p> </li><li> <p>Flux.1 Pro：最强模型，模型不开源，只提供 API。</p> </li></ul> 
<p>实测来看，开源最强，当之无愧！</p> 
<p><strong>唯一的缺点，就是模型参数量太大了</strong>，开源的两个版本都有 23.8G，就这一点，就拦住了不少玩家。</p> 
<p>不过话说回来，模型参数量小，且还能打的，至少现阶段是不现实的。</p> 
<h3><a id="31__138"></a>3.1 模型下载地址</h3> 
<blockquote> 
 <p>项目地址：<a href="https://github.com/black-forest-labs/flux">https://github.com/black-forest-labs/flux</a></p> 
</blockquote> 
<p>模型首发在 Huggingface 上，不过已经有同学迁移到了阿里的 modelscope 上。考虑到国内的小伙伴访问 Huggingface 比较困难，我们这次直接从 modelscope 下载。</p> 
<p>两个初始模型有 23.8G：</p> 
<p><img src="https://images2.imgbox.com/10/ca/ijmtKDGA_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/c9/5d/JfHRmh9K_o.png" alt=""></p> 
<p>社区有小伙伴提供了量化版，体积小了一半，不过表现略差，不知道是不是我参数设置的原因，欢迎小伙伴们评论区交流。</p> 
<p><img src="https://images2.imgbox.com/ce/25/H0tCsoQf_o.png" alt=""></p> 
<p>附下载地址：</p> 
<ul><li>schnell：<a href="https://modelscope.cn/models/AI-ModelScope/FLUX.1-schnell/files" rel="nofollow">https://modelscope.cn/models/AI-ModelScope/FLUX.1-schnell/files</a></li><li>dev：<a href="https://modelscope.cn/models/AI-ModelScope/FLUX.1-dev/files" rel="nofollow">https://modelscope.cn/models/AI-ModelScope/FLUX.1-dev/files</a></li><li>量化版：<a href="https://modelscope.cn/models/AI-ModelScope/flux-fp8/files" rel="nofollow">https://modelscope.cn/models/AI-ModelScope/flux-fp8/files</a></li></ul> 
<p><strong>！注意</strong>：即便是量化后的 11.9G 模型，跑起来也至少需要 <strong>16G</strong> 显存的消费级显卡。</p> 
<p>如果你的显存不足，可以接着往下看👇</p> 
<h3><a id="32_ModelScope__163"></a>3.2 ModelScope 实战</h3> 
<p>本地部署，我们这次采用阿里云的 GPU 服务器进行演示，如果你有本地 GPU 主机，当然下面是实操也是通用的。</p> 
<p>首先，前往 modelscope 首页注册一个账号，新用户是有 GPU 免费使用额度的，选择下方的 <code>GPU 环境</code>，点击启动，你就可以拥有一台 24G 显存的云主机。</p> 
<p><img src="https://images2.imgbox.com/50/bc/2Ym1a7r8_o.png" alt=""></p> 
<h4><a id="Step1_ComfyUI_172"></a>Step1：下载 ComfyUI</h4> 
<p>实例启动后，打开一个终端，然后 git clone 下载 ComfyUI：</p> 
<p><img src="https://images2.imgbox.com/ee/79/K5MZ5BBj_o.png" alt=""></p> 
<pre><code>git clone https://github.com/comfyanonymous/ComfyUI
cd ComfyUI
pip install -r requirements.txt
</code></pre> 
<h4><a id="Step2_186"></a>Step2：下载模型</h4> 
<p>实例镜像中默认安装好了 modelscope 下载命令，运行下方指令，下载我们所需的模型：</p> 
<pre><code># FLUX1-DEV
modelscope download --model=AI-ModelScope/FLUX.1-dev --local_dir ./models/unet/ flux1-dev.sft
modelscope download --model=AI-ModelScope/flux-fp8 --local_dir ./models/unet/ flux1-dev-fp8.safetensors

# text encoder model
modelscope download --model=AI-ModelScope/flux_text_encoders --local_dir ./models/clip/ t5xxl_fp16.safetensors
modelscope download --model=AI-ModelScope/flux_text_encoders --local_dir ./models/clip/ clip_l.safetensors
modelscope download --model=AI-ModelScope/flux_text_encoders --local_dir ./models/clip/ t5xxl_fp8_e4m3fn.safetensors

# vae
modelscope download --model=AI-ModelScope/FLUX.1-dev --local_dir ./models/vae/ ae.sft
</code></pre> 
<p>给大家看下下载速度，300-400M/s，超快~</p> 
<pre><code>Downloading:  82%|███████████████████████████████████████████████████████████████████████████████████████████████▍                     | 18.1G/22.2G [00:54&lt;00:11, 374MB/s]
</code></pre> 
<p>如果你是在其他云主机 or 本地服务器上，需要首先安装 modelscope download 工具：</p> 
<pre><code>pip install modelscope
</code></pre> 
<h4><a id="Step3_ComfyUI_215"></a>Step3：启动 ComfyUI</h4> 
<p>ComfyUI 提供了一键启动脚本，运行下方指令，即可打开一个 web 客户端：</p> 
<pre><code>python main.py
</code></pre> 
<p>默认端口号是：<code>http://127.0.0.1:8188</code>。</p> 
<p>不过，modelscope 上的云主机是没有公网 IP 的，你在本地浏览器当然是打不开的，怎么搞？</p> 
<p>你需要一个内网穿透工具~</p> 
<p>有没有最便捷的方式，实现内网穿透？</p> 
<p>当然，强推 <code>cloudflared</code> 👇</p> 
<h4><a id="Step4cloudflared__233"></a>Step4：cloudflared 安装和使用</h4> 
<blockquote> 
 <p>仓库：<a href="https://github.com/cloudflare/cloudflared">https://github.com/cloudflare/cloudflared</a><br> <strong>cloudflared 是啥？</strong></p> 
</blockquote> 
<p>海外云厂商 Cloudflare 提供的一个命令行工具，用于创建安全的隧道，以便将本地服务暴露到互联网。</p> 
<p>首先下载最新版的 cloudflared Debian 软件包（.deb 文件），并使用 dpkg 工具直接安装，无需编译。</p> 
<pre><code>wget https://mirror.ghproxy.com/https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb

dpkg -i cloudflared-linux-amd64.deb
</code></pre> 
<p>看到如下输出，则说明安装成功：</p> 
<pre><code>(正在读取数据库 ... 系统当前共安装有 83567 个文件和目录。)
准备解压 cloudflared-linux-amd64.deb  ...
正在解压 cloudflared (2024.6.1) 并覆盖 (2024.6.1) ...
正在设置 cloudflared (2024.6.1) ...
</code></pre> 
<p>此外，还可以查看下cloudflared版本：</p> 
<pre><code>cloudflared -v
# 输出
cloudflared version 2024.6.1
</code></pre> 
<p>由于 ComfyUI 的服务在 8188 端口上，所以我们用 cloudflared 开启一个监听隧道：</p> 
<pre><code>cloudflared tunnel --url http://127.0.0.1:8188
</code></pre> 
<p>监听成功后，找到下面这个临时的 url：</p> 
<p><img src="https://images2.imgbox.com/e4/9a/QALR80Mw_o.png" alt=""></p> 
<p>打开浏览器看看吧：</p> 
<p><img src="https://images2.imgbox.com/03/08/vPdzbmuY_o.png" alt=""></p> 
<p>大功告成，开始 ComfyUI 之旅吧~</p> 
<h4><a id="Step5_279"></a>Step5：愉快玩耍</h4> 
<p>首先，把 flux1-dev 模型的配置文件下载到本地：<a href="https://modelscope.oss-cn-beijing.aliyuncs.com/resource/flux1-dev-test.json" rel="nofollow">https://modelscope.oss-cn-beijing.aliyuncs.com/resource/flux1-dev-test.json</a></p> 
<p>然后，点击 <code>Load</code> 加载配置文件：</p> 
<p><img src="https://images2.imgbox.com/d9/35/SLMlFHae_o.png" alt=""></p> 
<p>最后，输入你想要生成的提示词，以及图片大小设置。点击 <code>Queue Prompt</code> 开始生成，流程中的高亮模块，说明正在加载模型：</p> 
<p><img src="https://images2.imgbox.com/cf/be/7yiQf4aw_o.png" alt=""></p> 
<p>我这边实测，1360 x 768 大小的图像，量化版本的模型大约占用 14G 显存，所以一张消费级显卡完全够用。</p> 
<p>有一说一：ModelScope 的云端 GPU 环境跑模型还是很爽的，尤其是下载 ModelScope 上的模型，速度直接拉满；唯一的缺陷是，模型权重文件等无法持久保存，一旦断掉后，还得重头再来一般。</p> 
<h2><a id="_295"></a>写在最后</h2> 
<p>本文实测了地表最强开源 AI 绘画模型，手把手教你从在线体验到本地部署。就算你没有土豪级显卡，也可以用云端 GPU 来玩耍。</p> 
<p>不得不说，这波 AI 绘画的更新迭代，看得人眼花缭乱、热血沸腾！</p> 
<p>不知道下一个惊喜又会是谁呢？让我们拭目以待~</p> 
<p>关于开源 AI 大模型的文章，我打算做成一个专栏，目前已经收录了：</p> 
<ul><li><a href="https://blog.csdn.net/u010522887/article/details/140731000">CogVideo 实测，智谱「清影」AI视频生成，全民免费，连 API 都开放了！</a></li><li><a href="https://blog.csdn.net/u010522887/article/details/140704923">全网刷屏的 LLaMa3.1，2分钟带你尝个鲜</a></li><li><a href="https://blog.csdn.net/u010522887/article/details/140624599">SenseVoice 实测，阿里开源语音大模型，识别效果和效率优于 Whisper</a></li><li><a href="https://blog.csdn.net/u010522887/article/details/140599047">EasyAnimate-v3 实测，阿里开源视频生成模型，5 分钟带你部署体验，支持高分辨率超长视频</a></li><li><a href="https://blog.csdn.net/u010522887/article/details/139721697">开源的语音合成项目-EdgeTTS，无需部署无需Key</a></li><li><a href="https://blog.csdn.net/u010522887/article/details/139719895">一文梳理ChatTTS的进阶用法，手把手带你实现个性化配音</a></li></ul> 
<p>后面会定期更新，感兴趣的小伙伴欢迎关注。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c6299a8f50adc86312d72db33cdc0f6a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringMVC 的 拦截器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5b6d1dad91a2afca99f3567c38a7bd1a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">开源AI智能名片商城系统：重塑大零售生态的创新实践与深度分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>