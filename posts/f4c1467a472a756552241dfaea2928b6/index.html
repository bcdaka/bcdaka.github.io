<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python小游戏——躲避球（可当课设) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f4c1467a472a756552241dfaea2928b6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="python小游戏——躲避球（可当课设)">
  <meta property="og:description" content="游戏简介： 没有美术，画面简洁（懒得做）。玩家控制小球躲避敌人（上下左右，闪避），敌人体积越大速度越慢，随机生成道具球（目前只有生命球），靠近道具球可拾取。
未来展望： 1. 添加其他道具球
2. 添加攻击手段，目前只能闪避。
3. 添加耐力条
4. 添加更多属性
核心代码 玩家移动 def player_move(space_down, player): &#34;&#34;&#34; 控制玩家移动处理 :param space_down: 是否按下空格 :param player: 玩家 :return: &#34;&#34;&#34; global monitor if space_down: speed = player.dodge_speed else: speed = player.speed keys = pygame.key.get_pressed() if keys[pygame.K_LEFT]: player.x -= speed if keys[pygame.K_RIGHT]: player.x &#43;= speed if keys[pygame.K_UP]: player.y -= speed if keys[pygame.K_DOWN]: player.y &#43;= speed if player.x &lt; 0: player.x = monitor.width &#43; player.x elif player.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-23T23:42:03+08:00">
    <meta property="article:modified_time" content="2024-08-23T23:42:03+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python小游戏——躲避球（可当课设)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>游戏简介：</h3> 
<p>没有美术，画面简洁（懒得做）。玩家控制小球躲避敌人（上下左右，闪避），敌人体积越大速度越慢，随机生成道具球（目前只有生命球），靠近道具球可拾取。</p> 
<h4>未来展望：</h4> 
<p>1. 添加其他道具球</p> 
<p>2. 添加攻击手段，目前只能闪避。</p> 
<p>3. 添加耐力条</p> 
<p>4. 添加更多属性</p> 
<h3>核心代码</h3> 
<h4>玩家移动</h4> 
<pre><code class="language-python">def player_move(space_down, player):
    """
    控制玩家移动处理
    :param space_down: 是否按下空格
    :param player: 玩家
    :return:
    """
    global monitor
    if space_down:
        speed = player.dodge_speed
    else:
        speed = player.speed

    keys = pygame.key.get_pressed()
    if keys[pygame.K_LEFT]:
        player.x -= speed
    if keys[pygame.K_RIGHT]:
        player.x += speed
    if keys[pygame.K_UP]:
        player.y -= speed
    if keys[pygame.K_DOWN]:
        player.y += speed

    if player.x &lt; 0:
        player.x = monitor.width + player.x
    elif player.x &gt; monitor.width:
        player.x = player.x - monitor.width

    if player.y &lt; 0:
        player.y = monitor.height + player.y
    elif player.y &gt; monitor.height:
        player.y = player.y - monitor.height</code></pre> 
<h4>生成小怪</h4> 
<pre><code class="language-python">def make_enemy():
    """
    生成小怪
    :return:
    """
    global monitor, score
    boss = False
    if score % 20000 == 0 and score != 0:
        boss = True
    sizeList = [10, 30, 50, 70, 100, 130, 150, 180, 200, 250]
    random_int = random.randint(1, 10) if boss is False else 20
    enemy = Enemy(
        atc=random_int,
        max_health=random_int,
        defense=0,
        speed=(11 - random_int) * 1.5 if boss is False else 1.5,
        attribute=0,
        x=random.uniform(0.1, 1) * monitor.width,
        y=random.uniform(0.1, 1) * monitor.height,
        size=sizeList[random_int - 1] if boss is False else 500
    )
    return enemy</code></pre> 
<h4>道具球处理</h4> 
<pre><code class="language-python">def propBall_handle(propBall_list, window, player):
    """
    道具球处理
    :param propBall_list:
    :param window:
    :param player:
    :return:
    """
    count = 0
    for propBall in propBall_list:
        pygame.draw.circle(window, propBall.color, (propBall.x, propBall.y), propBall.size)
        propBall.moveToPlayer(player.x, player.y)
        if detectIntersect(player, propBall):
            propBall_function(player, propBall)
            del propBall_list[count]
        count += 1
    if score % 200 == 0:
        propBall = generate_propBall()
        if propBall is not None:
            propBall_list.append(propBall)
    return propBall_list</code></pre> 
<h4>游戏主要逻辑</h4> 
<pre><code class="language-python">def main():
    global is_running, is_playing, font, pass_time, pass_time_made, score, start_time, monitor
    propBall_list = []
    window = pygame.display.set_mode((monitor.width, monitor.height))
    pygame.display.set_caption("demo")
    player = init_player()
    health_bal = pygame.Rect(20, 20, player.health * 20, 20)
    enemyList = [make_enemy()]
    button_playAgain = pygame.Rect(monitor.width // 2 - button_width // 2, monitor.height * 0.6,
                                   button_width, button_height)
    button_quit = pygame.Rect(monitor.width // 2 - button_width // 2,
                              monitor.height * 0.6 + 30 + button_height,
                              button_width, button_height)
    buttonList = [button_playAgain, button_quit]

    while is_running:
        score += 1
        window.fill(color_dict['black'])  # 填充黑色
        health_bal.width = player.health * 20
        space_down = False
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                is_running = False
            elif event.type == KEYDOWN:
                if event.key == K_SPACE:
                    space_down = True
            if event.type == pygame.MOUSEBUTTONDOWN:
                mouse_pos = pygame.mouse.get_pos()
                button_serialNum = button_clicked(buttonList, mouse_pos)
                if button_serialNum == 0:
                    is_playing = True
                    player = init_player()
                    enemyList = [make_enemy()]
                elif button_serialNum == 1:
                    is_running = False

        if is_playing:
            if pass_time_made is False:
                pass_time = 0
                start_time = time.perf_counter()
                pass_time_made = True

            if player.health == 0:
                is_playing = False

            if score % 400 == 0:
                enemyList.append(make_enemy())

            propBall_list = propBall_handle(propBall_list, window, player)
            player_move(space_down, player)  # 玩家移动
            player_twinkle(player, window)  # 玩家绘制
            draw_healthBar(window, player, health_bal)  # 血条更新
            make_enemyThreading(enemyList, window, player)  # 小怪更新
            draw_score(window)
            pass_time = int(time.perf_counter() - start_time)
        else:
            draw_scoreTitle(window)
            draw_button(buttonList, window)
            pass_time_made = False
            propBall_list = []
            enemyList = []

        pygame.display.flip()  # 刷新屏幕
        time.sleep(0.01)
    pygame.quit()</code></pre> 
<h3>游戏画面</h3> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/a2/75/xZhoB6FJ_o.png" width="1200"></p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/33/b9/bRkRJqyY_o.png" width="1200"></p> 
<h3>完整代码</h3> 
<p>有需要者自取，盘内还有打包好的exe文件</p> 
<p>链接：<a class="link-info" href="https://pan.baidu.com/s/1rZ1xNZJYtvyXPIG9Rgh5Hw" rel="nofollow" title="https://pan.baidu.com/s/1rZ1xNZJYtvyXPIG9Rgh5Hw">https://pan.baidu.com/s/1rZ1xNZJYtvyXPIG9Rgh5Hw</a><br> 提取码：iq6l</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6046b1c13710b18e15682fd134dc9f3a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">QT中通过Tcp协议的多线程的文件传输（服务器）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7b10bbf52bd0756938eb1a87b8735227/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【STM32】中断</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>