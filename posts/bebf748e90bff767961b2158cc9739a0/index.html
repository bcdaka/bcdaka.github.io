<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MongoDB教程（十九）：MongoDB全文检索 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/bebf748e90bff767961b2158cc9739a0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MongoDB教程（十九）：MongoDB全文检索">
  <meta property="og:description" content="💝💝💝首先，欢迎各位来到我的博客，很高兴能够在这里和您见面！希望您在这里不仅可以有所收获，同时也能感受到一份轻松欢乐的氛围，祝你生活愉快！
文章目录 引言一、全文索引概述二、创建全文索引步骤 1：确定索引字段步骤 2：创建全文索引 三、执行全文检索步骤 1：构建查询步骤 2：解释查询结果 四、案例代码：实现全文检索1. 创建全文索引2. 插入示例数据3. 执行全文检索4. 输出结果 五、全文检索的高级选项六、结论 引言 在现代应用程序中，提供强大的搜索功能已经成为提升用户体验的关键因素。MongoDB 通过引入全文索引，为开发者提供了一个高效且易于使用的全文检索解决方案。本文将深入探讨 MongoDB 全文索引的创建、配置及使用，通过具体的案例代码展示如何在 MongoDB 中实现全文检索。
一、全文索引概述 全文索引是 MongoDB 用于支持文本字段的全文搜索功能。当创建了全文索引后，可以使用 $text 操作符进行文本搜索，MongoDB 会返回与给定搜索词匹配的文档。
二、创建全文索引 步骤 1：确定索引字段 首先，你需要确定哪些字段需要被全文索引。例如，假设我们有一个 articles 集合，其中包含 title 和 content 字段，我们想要在这两个字段上创建全文索引。
步骤 2：创建全文索引 在 MongoDB shell 中，使用 createIndex() 方法来创建全文索引：
db.articles.createIndex( { title: &#34;text&#34;, content: &#34;text&#34; } ); 这将创建一个全文索引，覆盖 title 和 content 字段。
三、执行全文检索 步骤 1：构建查询 使用 $text 操作符来构建全文检索查询。例如，如果我们想搜索包含 “MongoDB” 和 “tutorial” 的文章：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-23T09:10:53+08:00">
    <meta property="article:modified_time" content="2024-07-23T09:10:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MongoDB教程（十九）：MongoDB全文检索</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>💝💝💝首先，欢迎各位来到我的博客，很高兴能够在这里和您见面！希望您在这里不仅可以有所收获，同时也能感受到一份轻松欢乐的氛围，祝你生活愉快！<br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#_4" rel="nofollow">引言</a></li><li><a href="#_8" rel="nofollow">一、全文索引概述</a></li><li><a href="#_12" rel="nofollow">二、创建全文索引</a></li><li><ul><li><a href="#_1_14" rel="nofollow">步骤 1：确定索引字段</a></li><li><a href="#_2_18" rel="nofollow">步骤 2：创建全文索引</a></li></ul> 
    </li><li><a href="#_28" rel="nofollow">三、执行全文检索</a></li><li><ul><li><a href="#_1_30" rel="nofollow">步骤 1：构建查询</a></li><li><a href="#_2_40" rel="nofollow">步骤 2：解释查询结果</a></li></ul> 
    </li><li><a href="#_44" rel="nofollow">四、案例代码：实现全文检索</a></li><li><ul><li><a href="#1__48" rel="nofollow">1. 创建全文索引</a></li><li><a href="#2__56" rel="nofollow">2. 插入示例数据</a></li><li><a href="#3__77" rel="nofollow">3. 执行全文检索</a></li><li><a href="#4__85" rel="nofollow">4. 输出结果</a></li></ul> 
    </li><li><a href="#_89" rel="nofollow">五、全文检索的高级选项</a></li><li><a href="#_97" rel="nofollow">六、结论</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_4"></a>引言</h4> 
<p>在现代应用程序中，提供强大的搜索功能已经成为提升用户体验的关键因素。MongoDB 通过引入全文索引，为开发者提供了一个高效且易于使用的全文检索解决方案。本文将深入探讨 MongoDB 全文索引的创建、配置及使用，通过具体的案例代码展示如何在 MongoDB 中实现全文检索。</p> 
<h4><a id="_8"></a>一、全文索引概述</h4> 
<p>全文索引是 MongoDB 用于支持文本字段的全文搜索功能。当创建了全文索引后，可以使用 <code>$text</code> 操作符进行文本搜索，MongoDB 会返回与给定搜索词匹配的文档。</p> 
<h4><a id="_12"></a>二、创建全文索引</h4> 
<h5><a id="_1_14"></a>步骤 1：确定索引字段</h5> 
<p>首先，你需要确定哪些字段需要被全文索引。例如，假设我们有一个 <code>articles</code> 集合，其中包含 <code>title</code> 和 <code>content</code> 字段，我们想要在这两个字段上创建全文索引。</p> 
<h5><a id="_2_18"></a>步骤 2：创建全文索引</h5> 
<p>在 MongoDB shell 中，使用 <code>createIndex()</code> 方法来创建全文索引：</p> 
<pre><code class="prism language-javascript">db<span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"text"</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这将创建一个全文索引，覆盖 <code>title</code> 和 <code>content</code> 字段。</p> 
<h4><a id="_28"></a>三、执行全文检索</h4> 
<h5><a id="_1_30"></a>步骤 1：构建查询</h5> 
<p>使用 <code>$text</code> 操作符来构建全文检索查询。例如，如果我们想搜索包含 “MongoDB” 和 “tutorial” 的文章：</p> 
<pre><code class="prism language-javascript">db<span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">$text</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">$search</span><span class="token operator">:</span> <span class="token string">"\"MongoDB tutorial\""</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这里，<code>$search</code> 参数接受一个字符串，MongoDB 会在这个字符串中查找匹配的文档。</p> 
<h5><a id="_2_40"></a>步骤 2：解释查询结果</h5> 
<p>查询结果将包含与搜索词匹配的文档，以及一个 <code>score</code> 字段，表示文档与搜索词的相关度。</p> 
<h4><a id="_44"></a>四、案例代码：实现全文检索</h4> 
<p>假设我们有一个博客平台，需要实现一个搜索引擎，用户可以通过输入关键词来搜索文章。</p> 
<h5><a id="1__48"></a>1. 创建全文索引</h5> 
<p>在 MongoDB shell 中，为 <code>articles</code> 集合创建全文索引：</p> 
<pre><code class="prism language-javascript">db<span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"text"</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2__56"></a>2. 插入示例数据</h5> 
<p>插入一些示例文章，用于测试全文检索功能：</p> 
<pre><code class="prism language-javascript">db<span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"MongoDB Tutorial"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"Learn how to use MongoDB for your projects."</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Introduction to NoSQL"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"Explore the basics of NoSQL databases and their benefits."</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"MongoDB and Node.js Integration"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"Guide on integrating MongoDB with Node.js applications."</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="3__77"></a>3. 执行全文检索</h5> 
<p>使用 <code>$text</code> 操作符进行全文检索：</p> 
<pre><code class="prism language-javascript">db<span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">$text</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">$search</span><span class="token operator">:</span> <span class="token string">"\"MongoDB tutorial\""</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="4__85"></a>4. 输出结果</h5> 
<p>查询结果应该返回与 “MongoDB tutorial” 相关的文章，包括 <code>title</code> 和 <code>content</code> 字段，以及一个表示相关度的 <code>score</code> 字段。</p> 
<h4><a id="_89"></a>五、全文检索的高级选项</h4> 
<p>MongoDB 的全文检索功能还支持以下高级选项：</p> 
<ul><li><strong>语言设置</strong>：通过 <code>language</code> 参数可以指定搜索的语言，以适应不同的语言规则。</li><li><strong>搜索权重</strong>：可以为不同的字段设置不同的搜索权重，影响搜索结果的相关度排序。</li><li><strong>通配符搜索</strong>：支持使用通配符进行模糊匹配搜索。</li></ul> 
<h4><a id="_97"></a>六、结论</h4> 
<p>MongoDB 的全文检索功能为开发者提供了一个强大的工具，可以轻松地在文档的文本字段上执行复杂的搜索操作。通过本文的介绍和案例代码，你应该能够理解如何在 MongoDB 中创建和使用全文索引，以及如何执行全文检索查询。在实际应用中，全文检索可以显著提升用户体验，特别是对于内容丰富、文本密集的应用场景，如博客、新闻网站和在线文档系统</p> 
<hr> 
<p><strong><font color="red">喜欢博主的同学，请给博主一丢丢打赏吧↓↓↓您的支持是我不断创作的最大动力哟！感谢您的支持哦😘😘😘</font></strong><br> <img src="https://images2.imgbox.com/1b/37/BMFCMkcU_o.jpg" alt="打赏下吧" width="30%" height="30%"></p> 
<p>💝💝💝<strong>如有需要请大家订阅我的专栏【MongoDB系列】哟！我会定期更新相关系列的文章</strong><br> <font color="red">💝💝💝<strong>关注！关注！！请关注！！！请大家关注下博主，您的支持是我不断创作的最大动力！！！</strong></font></p> 
<table><thead><tr><th align="left">MongoDB相关文章索引</th><th align="left">文章链接</th></tr></thead><tbody><tr><td align="left">MongoDB教程（一）：Linux系统安装mongoDB详细教程</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140341730?spm=1001.2014.3001.5501">MongoDB教程（一）：Linux系统安装mongoDB详细教程</a></td></tr><tr><td align="left">MongoDB教程（二）：mongoDB引用shell</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140354906?spm=1001.2014.3001.5501">MongoDB教程（二）：mongoDB引用shell</a></td></tr><tr><td align="left">MongoDB教程（三）：mongoDB用户管理</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140369494?spm=1001.2014.3001.5501">MongoDB教程（三）：mongoDB用户管理</a></td></tr><tr><td align="left">MongoDB教程（四）：mongoDB索引</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140377945?spm=1001.2014.3001.5502">MongoDB教程（四）：mongoDB索引</a></td></tr><tr><td align="left">MongoDB教程（五）：mongoDB聚合框架</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140433641">MongoDB教程（五）：mongoDB聚合框架</a></td></tr><tr><td align="left">MongoDB教程（六）：mongoDB复制副本集</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140438671?spm=1001.2014.3001.5501">MongoDB教程（六）：mongoDB复制副本集</a></td></tr><tr><td align="left">MongoDB教程（七）：mongoDB分片</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140456150?spm=1001.2014.3001.5502">MongoDB教程（七）：mongoDB分片</a></td></tr><tr><td align="left">MongoDB教程（八）：mongoDB数据备份与恢复</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140472274?spm=1001.2014.3001.5502">MongoDB教程（八）：mongoDB数据备份与恢复</a></td></tr><tr><td align="left">MongoDB教程（九）：java集成mongoDB</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140495639?spm=1001.2014.3001.5501">MongoDB教程（九）：java集成mongoDB</a></td></tr><tr><td align="left">MongoDB教程（十）：Python集成mongoDB</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140496127?spm=1001.2014.3001.5502">MongoDB教程（十）：Python集成mongoDB</a></td></tr><tr><td align="left">MongoDB教程（十一）：MongoDB关系管理与文档关联</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140512484?spm=1001.2014.3001.5502">MongoDB教程（十一）：MongoDB关系管理与文档关联</a></td></tr><tr><td align="left">MongoDB教程（十二）：MongoDB数据库索引</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140524973?spm=1001.2014.3001.5501">MongoDB教程（十二）：MongoDB数据库索引</a></td></tr><tr><td align="left">MongoDB教程（十四）：MongoDB查询分析</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140549851?spm=1001.2014.3001.5501">MongoDB教程（十四）：MongoDB查询分析</a></td></tr><tr><td align="left">MongoDB教程（十五）：MongoDB原子操作</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140583176?spm=1001.2014.3001.5501">MongoDB教程（十五）：MongoDB原子操作</a></td></tr><tr><td align="left">MongoDB教程（十六）：MongoDB高级索引</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140583287?spm=1001.2014.3001.5501">MongoDB教程（十六）：MongoDB高级索引</a></td></tr><tr><td align="left">MongoDB教程（十七）：MongoDB主键类型ObjectId</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140603608?spm=1001.2014.3001.5501">MongoDB教程（十七）：MongoDB主键类型ObjectId</a></td></tr><tr><td align="left">MongoDB教程（十八）：MongoDB MapReduce</td><td align="left"><a href="https://blog.csdn.net/mwm0213/article/details/140611069?spm=1001.2014.3001.5502">MongoDB教程（十八）：MongoDB MapReduce</a></td></tr></tbody></table> 
<p><font color="red">❤️❤️❤️觉得有用的话点个赞 👍🏻 呗。</font><br> <font color="red">❤️❤️❤️本人水平有限，如有纰漏，欢迎各位大佬评论批评指正！😄😄😄</font><br> <font color="red">💘💘💘如果觉得这篇文对你有帮助的话，也请给个点赞、收藏下吧，非常感谢!👍 👍 👍</font><br> <font color="red">🔥🔥🔥Stay Hungry Stay Foolish 道阻且长,行则将至,让我们一起加油吧！🌙🌙🌙</font></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69ffbf9e1494836e6aa47a5b79d8edb6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu-迁移22.04从机械盘到固态盘</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/11a934c2dfc4ad950c495698cf5ce800/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nodejs启动项目报错 Error: listen EACCES: permission denied 0.0.0.0:5000</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>