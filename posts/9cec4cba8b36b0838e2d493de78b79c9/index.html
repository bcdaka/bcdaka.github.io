<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ollama，springAi实现自然语言处理 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9cec4cba8b36b0838e2d493de78b79c9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="ollama，springAi实现自然语言处理">
  <meta property="og:description" content="ollama安装使用： https://ollama.com/
下载速度比较慢的可以直接使用以下版本0.1.41
https://pan.baidu.com/s/1hCCkYvFjWqxvPyYA2-YElA?pwd=otap 直接管理员身份双击安装，安装成功后会在任务栏里出现这个小图标：
打开cmd，输入ollama --version能够显示ollama版本则证明已经安装完成
输入ollama命令，能够列出帮助命令：
其中常用的有
serve表示后台启动model
create表示从本地medelFile中创建model
run表示启动model，并打开对话框
list表示列出当前所有的model
ps表示列出当前运行的model
rm表示删除model
down Model 在ollama官网中有model仓，我们可以挑选自己需要的model进行下载使用
以阿里通义千问模型为例，我们搜索到qwen2进入到该模型的仓库中。
上面的tag表示不同参数的千问大模型，7b，72b表示大模型版本，后面4.4GB，41GB表示模型大小，即运行时需要占用的GPU/CPU的大小。
右侧ollama run qwen2表示启动命令，如果我们需要拉取并使用7b模型，则只需要在cmd中执行ollama run qwen2:7b 命令，等待下载安装即可（使用的模型越大表示训练的参数越大，精准度越高。同时需要的GPU/CPU就越大，运行反应速度会越慢，需要根据自身需求选择合适的模型进行使用）
使用SpringAi对接ollamahttps://spring.io/projects/spring-ai 首先需要强调的时SpringAi依赖的jdk&gt;=17，springboot版本&gt;=3.0
接下来介绍构建简单的springboot项目，使用springAi调用ollama进行对话
构建一个maven项目，修改pom文件如下：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;3.3.1&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;demo&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;url/&gt; &lt;properties&gt; &lt;java.version&gt;17&lt;/java.version&gt; &lt;spring-ai.version&gt;1.0.0-M1&lt;/spring-ai.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-01T18:43:11+08:00">
    <meta property="article:modified_time" content="2024-07-01T18:43:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ollama，springAi实现自然语言处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>ollama安装使用：</h2> 
<p>https://ollama.com/</p> 
<p>下载速度比较慢的可以直接使用以下版本0.1.41</p> 
<p>        <a class="link-info" href="https://pan.baidu.com/s/1hCCkYvFjWqxvPyYA2-YElA?pwd=otap%C2%A0" rel="nofollow" title="https://pan.baidu.com/s/1hCCkYvFjWqxvPyYA2-YElA?pwd=otap ">https://pan.baidu.com/s/1hCCkYvFjWqxvPyYA2-YElA?pwd=otap </a></p> 
<p>直接管理员身份双击安装，安装成功后会在任务栏里出现这个小图标：</p> 
<p class="img-center"><img alt="" height="72" src="https://images2.imgbox.com/76/fd/vBf45Y8H_o.png" width="78"></p> 
<p>打开cmd，输入ollama --version能够显示ollama版本则证明已经安装完成</p> 
<p><img alt="" height="123" src="https://images2.imgbox.com/26/ac/1Dhovfue_o.png" width="577"></p> 
<p>输入ollama命令，能够列出帮助命令：</p> 
<p><img alt="" height="1087" src="https://images2.imgbox.com/3d/4b/xjKPiw0O_o.png" width="1200"></p> 
<p>其中常用的有</p> 
<ul><li> <p>serve表示后台启动model</p> </li><li> <p>create表示从本地medelFile中创建model</p> </li><li> <p>run表示启动model，并打开对话框</p> </li><li> <p>list表示列出当前所有的model</p> </li><li> <p>ps表示列出当前运行的model</p> </li><li> <p>rm表示删除model</p> </li></ul> 
<h2>down Model</h2> 
<p>在ollama官网中有model仓，我们可以挑选自己需要的model进行下载使用</p> 
<p><img alt="" height="323" src="https://images2.imgbox.com/c4/9c/gltgAV24_o.png" width="1200"></p> 
<p>以阿里通义千问模型为例，我们搜索到qwen2进入到该模型的仓库中。</p> 
<p><img alt="" height="601" src="https://images2.imgbox.com/0e/e4/uknvFH9S_o.png" width="1200"></p> 
<p>上面的tag表示不同参数的千问大模型，7b，72b表示大模型版本，后面4.4GB，41GB表示模型大小，即运行时需要占用的GPU/CPU的大小。</p> 
<p>右侧ollama run qwen2表示启动命令，如果我们需要拉取并使用7b模型，则只需要在cmd中执行ollama run qwen2:7b 命令，等待下载安装即可（使用的模型越大表示训练的参数越大，精准度越高。同时需要的GPU/CPU就越大，运行反应速度会越慢，需要根据自身需求选择合适的模型进行使用）</p> 
<p></p> 
<h2>使用SpringAi对接ollamahttps://spring.io/projects/spring-ai</h2> 
<p><strong>首先需要强调的时SpringAi依赖的jdk&gt;=17，springboot版本&gt;=3.0</strong></p> 
<p>接下来介绍构建简单的springboot项目，使用springAi调用ollama进行对话</p> 
<p>构建一个maven项目，修改pom文件如下：</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.3.1&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;demo&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;demo&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;
    &lt;url/&gt;

    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
        &lt;spring-ai.version&gt;1.0.0-M1&lt;/spring-ai.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
            &lt;artifactId&gt;spring-ai-ollama-spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
                &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt;
                &lt;version&gt;${spring-ai.version}&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

&lt;/project&gt;</code></pre> 
<p>application.yml文件中填入：</p> 
<pre><code class="language-java">spring:
  ai:
    ollama:
      base-url: http://localhost:11434
      chat:
        enabled: true
        options:
          model: qwen2:7b</code></pre> 
<p>创建controller，对接用户输入问题并返回结果</p> 
<pre><code class="language-java">
@RestController
@RequestMapping("/")
public class AiController {
   
        @Resource
        private OllamaChatModel ollamaChatModel;

        @PostMapping("/chat")
        public String chat(@RequestBody String message) {
            return ollamaChatModel.call(message);
        }

    
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1da4359f07411c79cd84303e70133ed2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">为什么网络爬虫广泛使用HTTP代理？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2e4bbdf10b48403e3883ec34a9e74d6f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL主从复制与读写分离</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>