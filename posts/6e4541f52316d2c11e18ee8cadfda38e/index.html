<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Redis】Redis 数据类型与结构—（二） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6e4541f52316d2c11e18ee8cadfda38e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Redis】Redis 数据类型与结构—（二）">
  <meta property="og:description" content="Redis 数据类型与结构 一、值的数据类型二、键值对数据结构三、集合数据操作效率 一、值的数据类型 Redis “快”取决于两方面，一方面，它是内存数据库，另一方面，则是高效的数据结构。
Redis 键值对中值的数据类型，也就是数据的保存形式有5种：String（字符串）、List（列表）、Hash（哈希）、Set（集合）和 Sorted Set（有序集合）。这5种数据类型由6种底层结构实现：简单动态字符串、双向链表、压缩列表、哈希表、跳表和整数数组。
String 类型的底层实现只有一种数据结构，简单动态字符串，而 List、Hash、Set 和 Sorted Set 这四种数据类型，都有两种底层实现结构，这四种类型称为集合类型，特点是一个键对应了一个集合的数据
二、键值对数据结构 Redis 使用哈希表来保存所有键值对，实现从键到值的快速访问。哈希表就是一个数组，每个元素称为一个哈希桶，哈希桶中的元素保存的并不是值本身，而是指向具体值的指针。哈希表保存了所有的键值对，也称为全局哈希表，时间复杂度为O(1)
当 Redis 中写入大量数据后，哈希表的冲突问题和 rehash 可能导致操作变慢。
哈希冲突是指，两个 key 的哈希值落在了同一个哈希桶中，毕竟，哈希桶的个数通常要少于 key 的数量。
Redis 通过链式哈希解决哈希冲突，就是指同一个哈希桶中的多个元素用一个链表来保存，它们之间依次用指针连接。
随着数据量增大，哈希冲突可能也会越来越多，这就会导致某些哈希冲突链过长，链上的元素只能通过指针逐一查找再操作，进而导致查询效率降低。
Redis 会对哈希表做 rehash 操作来解决这个问题，也就是增加现有的哈希桶数量，让逐渐增多的 entry 元素能在更多的桶之间分散保存，减少单个桶中的元素数量，从而减少单个桶中的冲突。
Redis 会将哈希表的数据拷贝到另一个容量更大的哈希表，清空原来的准备下一次 rehash，这样依然会有问题，因为在数据量大的基础上拷贝会造成 Redis 线程阻塞。为了避免这个问题，Redis 采用了渐进式 rehash，就是将拷贝过程的开销分摊到每次请求时进行，从而保证查询效率。
三、集合数据操作效率 对于 String 类型来说，找到哈希桶就能直接增删改查了，所以，哈希表的 O(1) 操作复杂度也就是它的复杂度了。对于集合类型来说，找到哈希桶后，增删改查都是对集合操作的，不同的集合类型时间复杂度是不一样的。
哈希表的特点上面提到了，复杂度是O(1)，整数数组和双向链表也很常见，通过数组下标或者链表的指针逐个元素访问，操作复杂度基本是 O(N)，操作效率比较低。压缩列表和跳表是 Redis 重要的数据结构，下面介绍一下。
压缩列表类似于一个数组，不同之处在于表头有三个字段 zlbytes、zltail 和 zllen，分别表示列表长度、列表尾的偏移量和列表中的 entry 个数，压缩列表在表尾还有一个 zlend，表示列表结束。
查找第一个元素和最后一个元素，可以通过表头三个字段的长度直接定位，复杂度是 O(1)。而查找其他元素时，复杂度就是 O(N) 了
跳表在链表的基础上，增加了多级索引，通过索引位置的几个跳转，实现数据的快速定位，当数据量很大时，跳表的查找复杂度就是 O(logN)">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-16T20:38:40+08:00">
    <meta property="article:modified_time" content="2024-08-16T20:38:40+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Redis】Redis 数据类型与结构—（二）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Redis 数据类型与结构</h4> 
 <ul><li><ul><li><a href="#_3" rel="nofollow">一、值的数据类型</a></li><li><a href="#_13" rel="nofollow">二、键值对数据结构</a></li><li><a href="#_31" rel="nofollow">三、集合数据操作效率</a></li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/08/5d/TDNpwgcr_o.gif" alt="在这里插入图片描述"> 
<br> 
<img src="https://images2.imgbox.com/4f/95/UxAledbG_o.gif" alt="在这里插入图片描述"> 
<p></p> 
<h3><a id="_3"></a>一、值的数据类型</h3> 
<p>Redis “快”取决于两方面，一方面，它是内存数据库，另一方面，则是高效的数据结构。</p> 
<p>Redis 键值对中值的数据类型，也就是数据的保存形式有5种：String（字符串）、List（列表）、Hash（哈希）、Set（集合）和 Sorted Set（有序集合）。这5种数据类型由6种底层结构实现：简单动态字符串、双向链表、压缩列表、哈希表、跳表和整数数组。</p> 
<p>String 类型的底层实现只有一种数据结构，简单动态字符串，而 List、Hash、Set 和 Sorted Set 这四种数据类型，都有两种底层实现结构，这四种类型称为集合类型，特点是一个键对应了一个集合的数据</p> 
<p><img src="https://images2.imgbox.com/f6/6a/vILNhXPT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_13"></a>二、键值对数据结构</h3> 
<p>Redis 使用哈希表来保存所有键值对，实现从键到值的快速访问。哈希表就是一个数组，每个元素称为一个哈希桶，哈希桶中的元素保存的并不是值本身，而是指向具体值的指针。哈希表保存了所有的键值对，也称为全局哈希表，时间复杂度为O(1)<br> <img src="https://images2.imgbox.com/1c/2c/9TW7PMCx_o.png" alt="在这里插入图片描述"></p> 
<p>当 Redis 中写入大量数据后，哈希表的冲突问题和 rehash 可能导致操作变慢。<br> 哈希冲突是指，两个 key 的哈希值落在了同一个哈希桶中，毕竟，哈希桶的个数通常要少于 key 的数量。<br> Redis 通过链式哈希解决哈希冲突，就是指同一个哈希桶中的多个元素用一个链表来保存，它们之间依次用指针连接。<br> <img src="https://images2.imgbox.com/96/10/6J2sZg5k_o.png" alt="在这里插入图片描述"></p> 
<p>随着数据量增大，哈希冲突可能也会越来越多，这就会导致某些哈希冲突链过长，链上的元素只能通过指针逐一查找再操作，进而导致查询效率降低。</p> 
<p>Redis 会对哈希表做 rehash 操作来解决这个问题，也就是增加现有的哈希桶数量，让逐渐增多的 entry 元素能在更多的桶之间分散保存，减少单个桶中的元素数量，从而减少单个桶中的冲突。</p> 
<p>Redis 会将哈希表的数据拷贝到另一个容量更大的哈希表，清空原来的准备下一次 rehash，这样依然会有问题，因为在数据量大的基础上拷贝会造成 Redis 线程阻塞。为了避免这个问题，Redis 采用了渐进式 rehash，就是将拷贝过程的开销分摊到每次请求时进行，从而保证查询效率。</p> 
<p><img src="https://images2.imgbox.com/84/8b/zAQhvFPJ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_31"></a>三、集合数据操作效率</h3> 
<p>对于 String 类型来说，找到哈希桶就能直接增删改查了，所以，哈希表的 O(1) 操作复杂度也就是它的复杂度了。对于集合类型来说，找到哈希桶后，增删改查都是对集合操作的，不同的集合类型时间复杂度是不一样的。</p> 
<p>哈希表的特点上面提到了，复杂度是O(1)，整数数组和双向链表也很常见，通过数组下标或者链表的指针逐个元素访问，操作复杂度基本是 O(N)，操作效率比较低。压缩列表和跳表是 Redis 重要的数据结构，下面介绍一下。</p> 
<p>压缩列表类似于一个数组，不同之处在于表头有三个字段 zlbytes、zltail 和 zllen，分别表示列表长度、列表尾的偏移量和列表中的 entry 个数，压缩列表在表尾还有一个 zlend，表示列表结束。<br> <img src="https://images2.imgbox.com/f9/5b/mrgkqqmq_o.png" alt="在这里插入图片描述"></p> 
<p>查找第一个元素和最后一个元素，可以通过表头三个字段的长度直接定位，复杂度是 O(1)。而查找其他元素时，复杂度就是 O(N) 了</p> 
<p>跳表在链表的基础上，增加了多级索引，通过索引位置的几个跳转，实现数据的快速定位，当数据量很大时，跳表的查找复杂度就是 O(logN)<br> 按照查找的时间复杂度，这些数据结构分类如下：<br> <img src="https://images2.imgbox.com/8a/74/xZNyQuZd_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b36b62ecbc194722f42b783913b133ec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Redis】Linux CentOS Redis 的安装—（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a3ab804c8d16d6a4ef32960f7f458777/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Datawhale AI夏令营第四期魔搭-AIGC文生图方向Task1笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>