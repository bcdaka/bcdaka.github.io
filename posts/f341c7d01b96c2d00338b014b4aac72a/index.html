<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python小技巧】通过实例说明推导式，条件表达式和Lambda函数 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f341c7d01b96c2d00338b014b4aac72a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Python小技巧】通过实例说明推导式，条件表达式和Lambda函数">
  <meta property="og:description" content="文章目录 1. 推导式1.1 列表推导式1.2 集合推导式1.3 字典推导式2.4 生成器推导式 2. 条件表达式3. Lambda函数 按照国际惯例，首先声明：本文只是我自己学习的理解，虽然参考了他人的宝贵见解及成果，但是内容可能存在不准确的地方。如果发现文中错误，希望批评指正，共同进步。
本文总结在Python编程中会使用到的三个（高阶）小技巧：推导式，条件表达式和Lambda函数，并通过实例说明其使用方法。
这三者都是用来简化代码的工具，但可能会影响代码的可读性，在实际编码中要综合考虑是否采用这三种方法。
1. 推导式 Python中的推导式是一种简洁且强大的语法结构，用于从一个或多个可迭代对象高效地创建新的列表、集合、字典或生成器对象。以下是四种主要类型的推导式：
1.1 列表推导式 列表推导式用于快速生成列表，它可以包含一个或多个循环以及条件表达式。
基本语法：
new_list = [expression for item in iterable if condition] 例如：
squares = [x**2 for x in range(10)] # 创建一个包含前10个整数平方的列表 even_squares = [x**2 for x in range(10) if x % 2 == 0] # 创建只包含偶数平方的列表 print输出为：
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] [0, 4, 16, 36, 64] 1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-23T15:47:18+08:00">
    <meta property="article:modified_time" content="2024-03-23T15:47:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python小技巧】通过实例说明推导式，条件表达式和Lambda函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#1__6" rel="nofollow">1. 推导式</a></li><li><ul><li><a href="#11__9" rel="nofollow">1.1 列表推导式</a></li><li><a href="#12__28" rel="nofollow">1.2 集合推导式</a></li><li><a href="#13__55" rel="nofollow">1.3 字典推导式</a></li><li><a href="#24__72" rel="nofollow">2.4 生成器推导式</a></li></ul> 
    </li><li><a href="#2__99" rel="nofollow">2. 条件表达式</a></li><li><a href="#3_Lambda_139" rel="nofollow">3. Lambda函数</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p>按照国际惯例，首先声明：本文只是我自己学习的理解，虽然参考了他人的宝贵见解及成果，但是内容可能存在不准确的地方。如果发现文中错误，希望批评指正，共同进步。</p> 
</blockquote> 
<p>本文总结在Python编程中会使用到的三个（高阶）小技巧：推导式，条件表达式和Lambda函数，并通过实例说明其使用方法。</p> 
<p>这三者都是用来<strong>简化代码</strong>的工具，但可能会<strong>影响代码的可读性</strong>，在实际编码中要综合考虑是否采用这三种方法。</p> 
<h4><a id="1__6"></a>1. 推导式</h4> 
<p>Python中的推导式是一种简洁且强大的语法结构，用于从一个或多个可迭代对象高效地创建新的列表、集合、字典或生成器对象。以下是四种主要类型的推导式：</p> 
<h5><a id="11__9"></a>1.1 列表推导式</h5> 
<p>列表推导式用于快速生成列表，它可以包含一个或多个循环以及条件表达式。</p> 
<p>基本语法：</p> 
<pre><code class="prism language-python">new_list <span class="token operator">=</span> <span class="token punctuation">[</span>expression <span class="token keyword">for</span> item <span class="token keyword">in</span> iterable <span class="token keyword">if</span> condition<span class="token punctuation">]</span>
</code></pre> 
<p>例如：</p> 
<pre><code class="prism language-python">squares <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># 创建一个包含前10个整数平方的列表</span>
even_squares <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment"># 创建只包含偶数平方的列表</span>
</code></pre> 
<p>print输出为：</p> 
<pre><code class="prism language-python"><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">]</span>
</code></pre> 
<h5><a id="12__28"></a>1.2 集合推导式</h5> 
<p>集合推导式用于创建无重复元素的集合，语法类似于列表推导式。</p> 
<p>基本语法：</p> 
<pre><code class="prism language-python">new_set <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>expression <span class="token keyword">for</span> item <span class="token keyword">in</span> iterable <span class="token keyword">if</span> condition<span class="token punctuation">}</span>
</code></pre> 
<p>例如：</p> 
<pre><code class="prism language-python">unique_even_numbers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token keyword">if</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">}</span>  <span class="token comment"># 创建一个仅包含唯一偶数的集合</span>
</code></pre> 
<p>print输出为：</p> 
<pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
</code></pre> 
<p><strong>注意</strong>：与上面列表推导式不同，集合推导式会自动滤去重复元素，以下面代码为例：</p> 
<pre><code class="prism language-python">a <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> 
<p>print输出为：</p> 
<pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
</code></pre> 
<h5><a id="13__55"></a>1.3 字典推导式</h5> 
<p>字典推导式用于创建字典，其中键值对是通过某种表达式和迭代过程生成的。</p> 
<p>基本语法：</p> 
<pre><code class="prism language-python">new_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>key_expression<span class="token punctuation">:</span> value_expression <span class="token keyword">for</span> item <span class="token keyword">in</span> iterable <span class="token keyword">if</span> condition<span class="token punctuation">}</span>
</code></pre> 
<p>例如：</p> 
<pre><code class="prism language-python">dict_even_square <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>i<span class="token punctuation">:</span>i<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">if</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">}</span>
</code></pre> 
<p>print输出为：</p> 
<pre><code class="prism language-python"><span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">:</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">:</span> <span class="token number">64</span><span class="token punctuation">}</span>
</code></pre> 
<h5><a id="24__72"></a>2.4 生成器推导式</h5> 
<p>生成器推导式看起来与列表推导式相似，但它<code>不直接创建列表</code>，而是生成一个生成器对象，可以逐个产生所需的结果，节省内存。</p> 
<p>基本语法：</p> 
<pre><code class="prism language-python">generator <span class="token operator">=</span> <span class="token punctuation">(</span>expression <span class="token keyword">for</span> item <span class="token keyword">in</span> iterable <span class="token keyword">if</span> condition<span class="token punctuation">)</span>
</code></pre> 
<p>例如：</p> 
<pre><code class="prism language-python">gen_squares <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># 创建一个生成器，按需生成前5个整数的平方</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>gen_squares<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> gen_squares<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
</code></pre> 
<p>输出为：</p> 
<pre><code class="prism language-python"><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'generator'</span><span class="token operator">&gt;</span>
<span class="token number">0</span>
<span class="token number">1</span>
<span class="token number">4</span>
<span class="token number">9</span>
<span class="token number">16</span>
</code></pre> 
<p>在以上各个推导式中，<code>expression</code> 是针对 <code>item</code> 计算的新值，<code>iterable</code> 是用于迭代的数据源，<code>if condition</code> 是可选的筛选条件。通过这些结构，Python程序员可以方便地对数据进行转换、筛选和聚合，提升代码的简洁性和执行效率。</p> 
<h4><a id="2__99"></a>2. 条件表达式</h4> 
<p>Python中的条件表达式，也称为三元运算符，它允许在一行内根据某个条件来决定返回哪个值。条件表达式的语法结构如下：</p> 
<pre><code class="prism language-python">value_if_true <span class="token keyword">if</span> condition <span class="token keyword">else</span> value_if_false
</code></pre> 
<p>这里的 <code>condition</code> 是一个布尔表达式，如果 <code>condition</code> 的结果为 <code>True</code>，那么整个条件表达式的值就是 <code>value_if_true</code>；反之，如果 <code>condition</code> 为 <code>False</code>，则整个表达式的值就是 <code>value_if_false</code>。</p> 
<p>举例来说：</p> 
<pre><code class="prism language-python">age <span class="token operator">=</span> <span class="token number">18</span>
status <span class="token operator">=</span> <span class="token string">"成年"</span> <span class="token keyword">if</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token keyword">else</span> <span class="token string">"未成年"</span>
</code></pre> 
<p>print输出为：</p> 
<pre><code class="prism language-python">成年
</code></pre> 
<p>在这个例子中，如果 <code>age</code> 大于等于18，则 <code>status</code> 变量会被赋值为字符串 “成年”，否则会被赋值为 “未成年”。</p> 
<p>而条件表达式也可以实现多个条件的判断，例如下例：</p> 
<pre><code class="prism language-python">age <span class="token operator">=</span> <span class="token number">61</span>
status <span class="token operator">=</span> <span class="token string">"未成年"</span> <span class="token keyword">if</span> age <span class="token operator">&lt;</span> <span class="token number">18</span> <span class="token keyword">else</span> <span class="token string">"成年"</span> <span class="token keyword">if</span> age <span class="token operator">&lt;</span> <span class="token number">60</span> <span class="token keyword">else</span> <span class="token string">"老年"</span>
</code></pre> 
<p>print输出为：</p> 
<pre><code class="prism language-python">老年
</code></pre> 
<p>条件表达式相比于传统的 <code>if-else</code> 结构更为紧凑，尤其适用于简单的情况，但请注意，对于复杂的逻辑判断，使用多行的 <code>if-else</code> 语句可能会提高代码的可读性。</p> 
<p>总结来说，条件表达式是推导式中常用来进行逻辑选择的部分，它可以内嵌在推导式的结构里，共同服务于数据处理和代码简化的目的。</p> 
<h4><a id="3_Lambda_139"></a>3. Lambda函数</h4> 
<p>Python 中的 Lambda 函数是一种简化的、匿名的函数定义方式，它允许开发者在不显式定义函数名称的情况下快速编写小型的单行函数。Lambda 函数特别适用于仅需<code>一次性</code>使用的简单功能场合，或者作为其他高阶函数（如 <code>map()</code>, <code>filter()</code>, <code>reduce()</code> 等）的参数。</p> 
<p>Lambda 函数的基本语法格式如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">lambda</span> arguments<span class="token punctuation">:</span> expression
</code></pre> 
<ul><li><strong>arguments</strong>: 参数列表，可以有一个或多个参数，多个参数之间用逗号 <code>,</code> 分隔。</li><li><strong>expression</strong>: 单一的表达式，此表达式的计算结果将作为 Lambda 函数的返回值。注意，Lambda 函数不允许有复杂的逻辑结构，只能是单个表达式。</li></ul> 
<p>举例说明：</p> 
<ol><li>创建一个简单的 Lambda 函数，用于计算两个数的和：</li></ol> 
<pre><code class="prism language-python">add <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> x <span class="token operator">+</span> y
<span class="token keyword">print</span><span class="token punctuation">(</span>add<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出：8</span>
</code></pre> 
<ol start="2"><li>使用 Lambda 函数作为 <code>map()</code> 函数的参数（这个用法类似列表推导式）：</li></ol> 
<pre><code class="prism language-python">numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
squared <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">,</span> numbers<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>squared<span class="token punctuation">)</span>  <span class="token comment"># 输出：[1, 4, 9, 16, 25]</span>
</code></pre> 
<p>通过 Lambda 函数，可以在不需要定义完整函数的情况下实现简单的操作，增强了代码的简洁性和灵活性。然而，对于较为复杂的功能逻辑，通常建议使用常规的 def 关键字定义的函数以提高代码可读性。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab760397afc52f4c32cd857547efcb55/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI大模型之——Agent</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ee1fa71a06d02640c3fe39652a81034/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Redis的安装与启动</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>