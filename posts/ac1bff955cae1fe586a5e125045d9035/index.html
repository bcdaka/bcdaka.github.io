<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>docker-compose部署Redis6.0 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ac1bff955cae1fe586a5e125045d9035/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="docker-compose部署Redis6.0">
  <meta property="og:description" content="目录
1.部署环境
2.docker部署
3.docker-compose部署
4.redis 6.0部署
4.1拉起公网镜像
4.2 创建保存数据和配置文件的目录
4.3本地镜像打标签
4.4redis.yml配置
4.5验证
4.6问题记录
1.部署环境 系统：CentOS
容器：docker和docker-compose
2.docker部署 yum update yum install -y yum-utils yum-config-manager \ --add-repo \ https://download.docker.com/linux/centos/docker-ce.repo yum install docker-ce docker-ce-cli containerd.io systemctl start docker systemctl enable docker 3.docker-compose部署 离线安装包下载：docker-compose-linux-x86_64
cp docker-compose-Linux-x86_64 /usr/local/bin/docker-compose chmod &#43;x /usr/local/bin/docker-compose 4.redis 6.0部署 4.1拉起公网镜像 https://hub-stage.docker.com/_/redis/tags（需要翻墙）
docker pull redis:6.0 docker images 4.2 创建保存数据和配置文件的目录 mkdir -p /data/redis6.0/conf mkdir -p /data/redis6.0/data https://download.csdn.net/download/li2327234939/89403390上传配置文件到/data/redis6.0/conf目录下，配置文件下载路径https://download.csdn.net/download/li2327234939/89403390
或者到对应的官网下载：Index of /releases/
修改文件，修改配置问，只需修改如下三处即可：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-06T11:40:46+08:00">
    <meta property="article:modified_time" content="2024-06-06T11:40:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">docker-compose部署Redis6.0</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1.%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;"><a href="#1.%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83" rel="nofollow">1.部署环境</a></p> 
<p id="2.docker%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;"><a href="#2.docker%E9%83%A8%E7%BD%B2" rel="nofollow">2.docker部署</a></p> 
<p id="3.docker-compose%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;"><a href="#3.docker-compose%E9%83%A8%E7%BD%B2" rel="nofollow">3.docker-compose部署</a></p> 
<p id="4.redis%206.0%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;"><a href="#4.redis%206.0%E9%83%A8%E7%BD%B2" rel="nofollow">4.redis 6.0部署</a></p> 
<p id="4.1%E6%8B%89%E8%B5%B7%E5%85%AC%E7%BD%91%E9%95%9C%E5%83%8F-toc" style="margin-left:40px;"><a href="#4.1%E6%8B%89%E8%B5%B7%E5%85%AC%E7%BD%91%E9%95%9C%E5%83%8F" rel="nofollow">4.1拉起公网镜像</a></p> 
<p id="4.2%20%E5%88%9B%E5%BB%BA%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%AE%E5%BD%95-toc" style="margin-left:40px;"><a href="#4.2%20%E5%88%9B%E5%BB%BA%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%AE%E5%BD%95" rel="nofollow">4.2 创建保存数据和配置文件的目录</a></p> 
<p id="%C2%A04.3%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E6%89%93%E6%A0%87%E7%AD%BE-toc" style="margin-left:40px;"><a href="#%C2%A04.3%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E6%89%93%E6%A0%87%E7%AD%BE" rel="nofollow"> 4.3本地镜像打标签</a></p> 
<p id="%C2%A04.4redis.yml%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%C2%A04.4redis.yml%E9%85%8D%E7%BD%AE" rel="nofollow"> 4.4redis.yml配置</a></p> 
<p id="%C2%A04.5%E9%AA%8C%E8%AF%81-toc" style="margin-left:40px;"><a href="#%C2%A04.5%E9%AA%8C%E8%AF%81" rel="nofollow"> 4.5验证</a></p> 
<p id="4.6%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95-toc" style="margin-left:40px;"><a href="#4.6%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95" rel="nofollow">4.6问题记录</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83">1.部署环境</h2> 
<p> 系统：CentOS</p> 
<p>容器：docker和docker-compose</p> 
<h2 id="2.docker%E9%83%A8%E7%BD%B2">2.docker部署</h2> 
<pre><code class="language-bash">yum update

yum install -y yum-utils

yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo
    
yum install docker-ce docker-ce-cli containerd.io

systemctl start docker

systemctl enable docker</code></pre> 
<h2 id="3.docker-compose%E9%83%A8%E7%BD%B2">3.docker-compose部署</h2> 
<p>离线安装包下载：docker-compose-linux-x86_64</p> 
<pre><code class="language-bash">cp docker-compose-Linux-x86_64 /usr/local/bin/docker-compose 
chmod +x /usr/local/bin/docker-compose</code></pre> 
<h2 id="4.redis%206.0%E9%83%A8%E7%BD%B2">4.redis 6.0部署</h2> 
<h3 id="4.1%E6%8B%89%E8%B5%B7%E5%85%AC%E7%BD%91%E9%95%9C%E5%83%8F">4.1拉起公网镜像</h3> 
<p>https://hub-stage.docker.com/_/redis/tags（需要翻墙）</p> 
<pre><code class="language-bash">docker pull redis:6.0
docker images</code></pre> 
<h3 id="4.2%20%E5%88%9B%E5%BB%BA%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%AE%E5%BD%95">4.2 创建保存数据和配置文件的目录</h3> 
<pre><code class="language-bash">mkdir -p /data/redis6.0/conf
mkdir -p /data/redis6.0/data</code></pre> 
<p><a href="https://download.csdn.net/download/li2327234939/89403390" title="https://download.csdn.net/download/li2327234939/89403390">https://download.csdn.net/download/li2327234939/89403390</a>上传配置文件到/data/redis6.0/conf目录下，配置文件下载路径<a href="https://download.csdn.net/download/li2327234939/89403390" title="https://download.csdn.net/download/li2327234939/89403390">https://download.csdn.net/download/li2327234939/89403390</a></p> 
<p>或者到对应的官网下载：<a href="https://download.redis.io/releases/" rel="nofollow" title="Index of /releases/">Index of /releases/</a></p> 
<p>修改文件，修改配置问，只需修改如下三处即可：</p> 
<pre><code class="language-bash"># 关闭保护模式，允许远程连接

protected-mode no

# 开启AOF持久化

appendonly yes

# 密码

requirepass 123456</code></pre> 
<h3 id="%C2%A04.3%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E6%89%93%E6%A0%87%E7%AD%BE"><span style="color:#4d4d4d;"> 4.3本地镜像打标签</span></h3> 
<pre><code class="language-bash">docker tag 67dd041c7103  dockerhub.xxx.local/resource/redis:latest

docker push dockerhub.xxx.local/resource/redis:latest</code></pre> 
<h3 id="%C2%A04.4redis.yml%E9%85%8D%E7%BD%AE"> 4.4redis.yml配置</h3> 
<pre><code class="language-bash">version: '3'
services:
  redis: # 服务名称
    image: redis:6.0 # redis镜像版本
    container_name: redis6.0 # 容器名称
    ports:
      - 6379:6379 # 指定宿主机端口与容器端口映射关系，宿主机：容器
    volumes:
      - /data/redis6.0/conf/redis.conf:/etc/redis/redis.conf # 映射配置文件目录，宿主机:容器
      - /data/redis6.0/data:/data # 映射数据目录，宿主机:容器
    restart: always # 容器开机自启
    privileged: true # 获取宿主机root权限
    command: ["redis-server","/etc/redis/redis.conf"] # 指定配置文件启动redis-server进程  </code></pre> 
<h3 id="%C2%A04.5%E9%AA%8C%E8%AF%81"> 4.5验证</h3> 
<pre><code class="language-bash">docker-compose -f redis.yml up -d</code></pre> 
<p>进入docker内部，通过redis自带的redis-cli工具进行验证。进入docker容器内容命令如下：</p> 
<pre><code class="language-bash">docker exec -it b9fa28b3ccb1 /bin/bash

连接redis。用redis-cli命令

redis-cli -h 192.168.xx.xx -p 6379 -a 123456</code></pre> 
<p>redis账号/密码</p> 
<p>default/123456</p> 
<h3 id="4.6%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95"><strong>4.6问题记录</strong></h3> 
<p>docker内部连接redis没有问题，但是通过客户端或者外部方式连接redis出现拒绝连接的情况：</p> 
<p>解决方案：</p> 
<p>将redis..conf配置中的bind的IP改成0.0.0.0或者注释掉。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/16336b9e6ad31befaecb4573235b3d9e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端实现 微信扫码登录网站 pc端(二维码嵌套页面)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e02cbbdcdd2f14023c62c57849d940ca/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Web API DOM11】节点操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>