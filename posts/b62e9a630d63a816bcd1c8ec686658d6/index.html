<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【链表OJ 11】复制带随机指针的链表 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b62e9a630d63a816bcd1c8ec686658d6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【链表OJ 11】复制带随机指针的链表">
  <meta property="og:description" content="前言: 💥🎈个人主页:​​​​​​Dream_Chaser～ 🎈💥
✨✨刷题专栏:http://t.csdn.cn/UlvTc
⛳⛳本篇内容:力扣上链表OJ题目
目录
leetcode138. 复制带随机指针的链表
1. 问题描述
2.代码思路:
2.1拷贝节点插入到原节点的后面
2.2控制拷贝节点的random 2.3拷贝节点解下来尾插组成拷贝链表，恢复原链表
leetcode138. 复制带随机指针的链表 来源:138. 复制带随机指针的链表 - 力扣（LeetCode）
1. 问题描述 给你一个长度为 n 的链表，每个节点包含一个额外增加的随机指针 random ，该指针可以指向链表中的任何节点或空节点。
构造这个链表的 深拷贝。 深拷贝应该正好由 n 个 全新 节点组成，其中每个新节点的值都设为其对应的原节点的值。新节点的 next 指针和 random 指针也都应指向复制链表中的新节点，并使原链表和复制链表中的这些指针能够表示相同的链表状态。复制链表中的指针都不
应指向原链表中的节点 。
例如，如果原链表中有 X 和 Y 两个节点，其中 X.random --&gt; Y 。那么在复制链表中对应的两个节点 x 和 y ，同样有 x.random --&gt; y 。
返回复制链表的头节点。
题解接口: struct Node* copyRandomList(struct Node* head) { } 2.代码思路: 2.1拷贝节点插入到原节点的后面 复制节点：遍历原链表，对于每个节点，创建一个副本节点，并将其插入到原节点的后面。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-05T19:55:12+08:00">
    <meta property="article:modified_time" content="2023-09-05T19:55:12+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【链表OJ 11】复制带随机指针的链表</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>前言: </p> 
<blockquote> 
 <p>💥🎈<a href="https://so.csdn.net/so/search?q=%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5&amp;spm=1001.2101.3001.7020" title="个人主页">个人主页</a>:<a href="https://blog.csdn.net/weixin_65186652?type=blog" title="​​​​​​Dream_Chaser～">​​​​​​Dream_Chaser～</a> 🎈💥</p> 
 <p>✨✨刷题专栏:<a href="http://t.csdn.cn/UlvTc" rel="nofollow" title="http://t.csdn.cn/UlvTc">http://t.csdn.cn/UlvTc</a></p> 
 <p>⛳⛳本篇内容:力扣上链表<a href="https://so.csdn.net/so/search?q=OJ&amp;spm=1001.2101.3001.7020" title="OJ">OJ</a>题目</p> 
</blockquote> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="leetcode138.%20%E5%A4%8D%E5%88%B6%E5%B8%A6%E9%9A%8F%E6%9C%BA%E6%8C%87%E9%92%88%E7%9A%84%E9%93%BE%E8%A1%A8-toc" style="margin-left:0px;"><a href="#leetcode138.%20%E5%A4%8D%E5%88%B6%E5%B8%A6%E9%9A%8F%E6%9C%BA%E6%8C%87%E9%92%88%E7%9A%84%E9%93%BE%E8%A1%A8" rel="nofollow">leetcode138. 复制带随机指针的链表</a></p> 
<p id="1.%20%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-toc" style="margin-left:0px;"><a href="#1.%20%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0" rel="nofollow">1. 问题描述</a></p> 
<p id="2.%E4%BB%A3%E7%A0%81%E6%80%9D%E8%B7%AF%3A-toc" style="margin-left:0px;"><a href="#2.%E4%BB%A3%E7%A0%81%E6%80%9D%E8%B7%AF%3A" rel="nofollow">2.代码思路:</a></p> 
<p id="2.1%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E6%8F%92%E5%85%A5%E5%88%B0%E5%8E%9F%E8%8A%82%E7%82%B9%E7%9A%84%E5%90%8E%E9%9D%A2-toc" style="margin-left:40px;"><a href="#2.1%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E6%8F%92%E5%85%A5%E5%88%B0%E5%8E%9F%E8%8A%82%E7%82%B9%E7%9A%84%E5%90%8E%E9%9D%A2" rel="nofollow">2.1拷贝节点插入到原节点的后面</a></p> 
<p id="%C2%A02.2%E6%8E%A7%E5%88%B6%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E7%9A%84random%C2%A0%C2%A0%C2%A0%C2%A0-toc" style="margin-left:40px;"><a href="#%C2%A02.2%E6%8E%A7%E5%88%B6%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E7%9A%84random%C2%A0%C2%A0%C2%A0%C2%A0" rel="nofollow">2.2控制拷贝节点的random    </a></p> 
<p id="2.3%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E8%A7%A3%E4%B8%8B%E6%9D%A5%E5%B0%BE%E6%8F%92%E7%BB%84%E6%88%90%E6%8B%B7%E8%B4%9D%E9%93%BE%E8%A1%A8%EF%BC%8C%E6%81%A2%E5%A4%8D%E5%8E%9F%E9%93%BE%E8%A1%A8-toc" style="margin-left:40px;"><a href="#2.3%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E8%A7%A3%E4%B8%8B%E6%9D%A5%E5%B0%BE%E6%8F%92%E7%BB%84%E6%88%90%E6%8B%B7%E8%B4%9D%E9%93%BE%E8%A1%A8%EF%BC%8C%E6%81%A2%E5%A4%8D%E5%8E%9F%E9%93%BE%E8%A1%A8" rel="nofollow">2.3拷贝节点解下来尾插组成拷贝链表，恢复原链表</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="leetcode138.%20%E5%A4%8D%E5%88%B6%E5%B8%A6%E9%9A%8F%E6%9C%BA%E6%8C%87%E9%92%88%E7%9A%84%E9%93%BE%E8%A1%A8">leetcode138. 复制带随机指针的链表</h2> 
<blockquote> 
 <p>来源:<a href="https://leetcode.cn/problems/copy-list-with-random-pointer/description/" rel="nofollow" title="138. 复制带随机指针的链表 - 力扣（LeetCode）">138. 复制带随机指针的链表 - 力扣（LeetCode）</a></p> 
</blockquote> 
<h2 id="1.%20%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0">1. 问题描述</h2> 
<blockquote> 
 <p>给你一个长度为 <strong><code>n</code></strong> 的链表，每个节点包含一个额外增加的随机指针 <strong><code>random</code> </strong>，该指针可以指向链表中的任何节点或空节点。</p> 
 <p></p> 
 <p>构造这个链表的 <strong><a href="https://baike.baidu.com/item/%E6%B7%B1%E6%8B%B7%E8%B4%9D/22785317?fr=aladdin" rel="nofollow" title="深拷贝">深拷贝</a></strong>。 深拷贝应该正好由 <strong><code>n</code> </strong>个 <strong>全新</strong> 节点组成，其中每个新节点的值都设为其对应的原节点的值。新节点的 <strong><code>next</code></strong> 指针和 <strong><code>random</code></strong> 指针也都应指向复制链表中的新节点，并使原链表和复制链表中的这些指针能够表示相同的链表状态。<strong>复制链表中的指针都不</strong></p> 
 <p><strong>应指向原链表中的节点 </strong>。</p> 
 <p></p> 
 <p>例如，如果原链表中有 <strong><code>X</code> 和 <code>Y</code> </strong>两个节点，其中<strong> <code>X.random --&gt; Y</code> </strong>。那么在复制链表中对应的两个节点<strong> <code>x</code> 和 <code>y</code></strong> ，同样有<strong> <code>x.random --&gt; y</code></strong> 。</p> 
 <p>返回复制链表的头节点。</p> 
 <p><img alt="" height="991" src="https://images2.imgbox.com/c4/69/8CqCNqHc_o.png" width="944"></p> 
 <p></p> 
</blockquote> 
<p><strong>题解接口: </strong></p> 
<blockquote> 
 <pre><code>struct Node* copyRandomList(struct Node* head) {
    
}</code></pre> 
</blockquote> 
<p></p> 
<h2 id="2.%E4%BB%A3%E7%A0%81%E6%80%9D%E8%B7%AF%3A">2.代码思路:</h2> 
<h3 id="2.1%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E6%8F%92%E5%85%A5%E5%88%B0%E5%8E%9F%E8%8A%82%E7%82%B9%E7%9A%84%E5%90%8E%E9%9D%A2">2.1拷贝节点插入到原节点的后面</h3> 
<p><strong>        复制节点：遍历原链表，对于每个节点，创建一个副本节点，并将其插入到原节点的后面。</strong></p> 
<blockquote> 
 <p>我们一步一步分解来做<strong>，首先malloc一个新的节点，然后让copy指针接收，让原链表第一个节点里面的val值赋值给新malloc出来的链表。</strong></p> 
 <p><img alt="" height="502" src="https://images2.imgbox.com/85/75/pS4CeYdi_o.png" width="1200"></p> 
 <p>        最后记得将cur=next，让cur指向next,循环条件是cur不为NULL，再次回到循环，重复<strong>①②③④⑤⑥⑦</strong>的步骤</p> 
 <p><img alt="" height="494" src="https://images2.imgbox.com/cb/8f/E05rGxQp_o.png" width="1200"></p> 
 <p>        这是链表的最后情况。 </p> 
 <p><img alt="" height="502" src="https://images2.imgbox.com/1e/e0/2HsH4P5z_o.png" width="1200"></p> 
</blockquote> 
<h3 id="%C2%A02.2%E6%8E%A7%E5%88%B6%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E7%9A%84random%C2%A0%C2%A0%C2%A0%C2%A0">2.2控制拷贝节点的random    </h3> 
<blockquote> 
 <ul><li><strong>设置<code>random</code>指针：遍历链表，对于每个原节点，设置对应副本节点的<code>random</code>指针。</strong></li></ul> 
 <ol><li><strong>如果原节点的<code>random</code>指针为<code>NULL</code>，则副本节点的<code>random</code>指针也设置为<code>NULL</code>；</strong></li><li><strong>否则，副本节点的<code>random</code>指针设置为原节点的<code>random</code>指针指向的节点的副本节点。</strong></li></ol> 
</blockquote> 
<p>分解动作：</p> 
<p><img alt="" height="519" src="https://images2.imgbox.com/a9/fc/3RisIvq4_o.png" width="1200"></p> 
<blockquote> 
 <p>①把<strong>cur</strong>指针重新指向原链表头节点(<strong>head</strong>) </p> 
 <p>②进入<strong>while</strong>循环，条件是<strong>cur</strong>不为<strong>NULL</strong>,定义一个新指针<span style="color:#ff9900;"><strong>copy</strong></span>然后让其指向新组成的链表头节点的下一个节点<strong>cur-&gt;next  </strong>    </p> 
 <p>③     如果原链表的<strong>random</strong>域指向的地址为<strong>NULL</strong>，那么新节点的random域指向<strong>NULL</strong>，</p> 
 <p>         如果原链表的<strong>random</strong>域指向的地址不为<strong>NULL</strong>，那么此时将此时cur-&gt;random-&gt;next的地址赋值给新节点的<strong>copy-&gt;random</strong></p> 
 <p>④将<strong>copy-&gt;next</strong>赋值给<strong>cur</strong></p> 
 <p><strong>循环①②③④步,结束条件是cur指向NULL</strong></p> 
</blockquote> 
<p><strong>这是最终情况.</strong></p> 
<p><img alt="" height="532" src="https://images2.imgbox.com/32/80/jckI4pwa_o.png" width="1200"></p> 
<h3 id="2.3%E6%8B%B7%E8%B4%9D%E8%8A%82%E7%82%B9%E8%A7%A3%E4%B8%8B%E6%9D%A5%E5%B0%BE%E6%8F%92%E7%BB%84%E6%88%90%E6%8B%B7%E8%B4%9D%E9%93%BE%E8%A1%A8%EF%BC%8C%E6%81%A2%E5%A4%8D%E5%8E%9F%E9%93%BE%E8%A1%A8">2.3拷贝节点解下来尾插组成拷贝链表，恢复原链表</h3> 
<blockquote> 
 <p>        分离链表：遍历合并后的链表，将链表分离为<strong>原链表</strong>和<strong>副本链表</strong>。同时，恢复原链表的<strong><code>next</code></strong>指针，使其指向原链表的下一个节点；同时，构建<strong>副本链表</strong>，通过<strong>尾插法将副本节点依次添加到副本链表的末尾。</strong></p> 
 <p><img alt="" height="514" src="https://images2.imgbox.com/cf/29/AMC2O1XU_o.png" width="1200"></p> 
 <p>尾插:</p> 
 <p><img alt="" height="1200" src="https://images2.imgbox.com/df/2c/DeCQ50oC_o.png" width="1200"></p> 
 <p>恢复链表</p> 
 <p><img alt="" height="523" src="https://images2.imgbox.com/ec/d1/SxCGyWwu_o.png" width="1200">         循环条件依然是cur不为NULL，当cur指向NULL,循环结束直接返回副本链表的头节点<span style="color:#fe2c24;"><strong>copyHead</strong></span></p> 
</blockquote> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong>代码实现:</strong></span></p> 
 <pre><code>struct Node* copyRandomList(struct Node* head) {
    //1.拷贝节点插入在原节点的后面
    struct Node* cur=head;
    while(cur)
    {
    struct Node* copy=(struct Node*)malloc(sizeof(struct Node));
    copy-&gt;val=cur-&gt;val;

    struct Node* next= cur-&gt;next;
    //插入
    cur-&gt;next=copy;
    copy-&gt;next=next;

    cur=next;
     }
    //2.控制拷贝节点的random
    cur=head;
    while(cur)
    {
        struct Node* copy=cur-&gt;next;
        if(cur-&gt;random == NULL)
        {
            copy-&gt;random=NULL;
        }
        else
        {
            copy-&gt;random=cur-&gt;random-&gt;next;
        }
        cur= copy-&gt;next;
    }
  
   // 3、拷贝节点解下来尾插组成拷贝链表，恢复原链表
    struct Node*copyHead =NULL,*copyTail=NULL;
    cur=head;
    while(cur)
    {
        struct Node* copy=cur-&gt;next;
        struct Node* next=copy-&gt;next;

        //尾插
        if(copyTail == NULL)
        {
            copyHead= copyTail=copy;
        }
    else
    {
        copyTail-&gt;next=copy;
        copyTail=copyTail-&gt;next;
    }
    //恢复原链表
   cur-&gt;next=next;
    cur= next;
    }
    return copyHead;
}</code></pre> 
 <p>执行:</p> 
 <p><img alt="" height="333" src="https://images2.imgbox.com/9a/76/2zWcWO2r_o.png" width="821"></p> 
</blockquote> 
<p>        文章讲解到此结束，如有错误,欢迎指正 感谢支持！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bfaf792768d26255c35fa25ab1e49dc8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">通过nginx将https协议反向代理到http协议请求上</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d798868da16faeb0d81dbb9dccc35fc6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL问题：2002 - Can‘t connect to server on ‘localhost‘(10061)【已解决】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>