<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>伪分布HBase的安装与部署 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c4acd909f9967be437c70e78778268d4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="伪分布HBase的安装与部署">
  <meta property="og:description" content="1.实训目标 （1）熟悉掌握使用在Linux下安装伪分布式HBase。
（2）熟悉掌握使用在HBase伪分布式下使用自带Zookeeper。
2.实训环境 环境
版本
说明
Windows 10系统
64位
操作电脑配置
VMware
15
用于搭建所需虚拟机Linux系统
Linux系统
CentOS 7
已配置完成，并命名为hadoop能正常使用
伪分布式Hadoop
3.1.4
用于HBase伪分布式的配置
软件
版本
说明
HBase
2.5.6
最新稳定版本
3.实训说明 通过本小节学习，可知HBase内置也有Zookeeper，但为了对HBase的HMaster节点的高可用管理，更好的使用HBase，配置分布式HBase时使用的是外部Zookeeper集群。但如果只是简单的测试，并不需要存储海量数据，使用分布式HBase集群，会造成资源浪费，因此，可以选择使用伪分布式的HBase和HBase内置的Zookeeper以节约资源。请基于HBase 2.5.6版本实现伪分布式的HBase集群搭建。
4.实训步骤 4.1上传HBase安装包并解压 利用FinalShell软件将HBase安装包hbase-2.5.6-bin.tar.gz上传至虚拟机hadoop的/opt目录下。
使用“tar”命令将HBase解压至/usr/local目录下，具体实现如以下代码所示：
tar -zxvf /opt/hbase-2.5.6-bin.tar.gz -C /usr/local/ 4.2修改配置文件并设置环境变量 HBase伪分布式安装，需要修改的配置文件有hbase-env.sh、hbase-site.xml、regionservers和/etc/profile。
通过“cd /usr/local/hbase-2.5.6/conf”命令进入HBase的conf目录下。
（1）配置HBase的环境变量
执行“vi /etc/profile”命令，对profile文件修改，添加HBase环境变量，内容如代码4-1所示。
代码4-1 修改profile
#HBASE_HOME export HBASE_HOME=/usr/local/hbase-2.5.6 export PATH=$PATH:$HBASE_HOME/bin 切换到命令模式，输入命令“：wq”保存退出。执行命令“source /etc/profile”进行刷新。
（2）修改配置文件hbase-env.sh
执行“vi hbase-env.sh”命令,修改配置文件hbase-env.sh，添加内容如代码4-2所示。切换到命令模式，输入命令“：wq”保存退出。
其中HBASE_CLASSPATH设置为Hadoop配置文件的目录，JAVA_HOME设置为JDK的路径，HBASE_MANAGES_ZK设置为ture，使用HBase自带的Zookeeper。
代码4-2 修改hbase-env.sh
export HBASE_CLASSPATH=/usr/local/hadoop-3.1.4/etc/hadoop export JAVA_HOME=/usr/local/jdk1.8.0_161 export HBASE_MANAGES_ZK=true （3）修改配置文件hbase-site.xml
执行“vi hbase-site.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-30T10:41:27+08:00">
    <meta property="article:modified_time" content="2024-04-30T10:41:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">伪分布HBase的安装与部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:7.65pt;text-align:justify;"><strong><strong><strong>1.实训目标</strong></strong></strong></h2> 
<p>        （1）熟悉掌握使用在Linux下安装伪分布式HBase。</p> 
<p>        （2）熟悉掌握使用在HBase伪分布式下使用自带Zookeeper。</p> 
<h2 style="margin-left:.0001pt;text-align:justify;">  2.实训环境</h2> 
<table align="center" border="1" cellspacing="0" style="width:397.05pt;"><tbody><tr><td style="width:97.65pt;"> <p><strong>环境</strong></p> </td><td style="width:67.95pt;"> <p><strong>版本</strong></p> </td><td style="width:231.45pt;"> <p><strong>说明</strong></p> </td></tr><tr><td style="width:97.65pt;"> <p>Windows 10系统</p> </td><td style="width:67.95pt;"> <p>64位</p> </td><td style="width:231.45pt;"> <p>操作电脑配置</p> </td></tr><tr><td style="width:97.65pt;"> <p>VMware</p> </td><td style="width:67.95pt;"> <p>15</p> </td><td style="width:231.45pt;"> <p>用于搭建所需虚拟机Linux系统</p> </td></tr><tr><td style="width:97.65pt;"> <p>Linux系统</p> </td><td style="width:67.95pt;"> <p>CentOS 7</p> </td><td style="width:231.45pt;"> <p>已配置完成，并命名为hadoop能正常使用</p> </td></tr><tr><td style="width:97.65pt;"> <p style="text-align:center;">伪分布式Hadoop</p> </td><td style="width:67.95pt;"> <p>3.1.4</p> </td><td style="width:231.45pt;"> <p>用于HBase伪分布式的配置</p> </td></tr><tr><td style="width:97.65pt;"> <p><strong>软件</strong></p> </td><td style="width:67.95pt;"> <p><strong>版本</strong></p> </td><td style="width:231.45pt;"> <p><strong>说明</strong></p> </td></tr><tr><td style="width:97.65pt;"> <p>HBase</p> </td><td style="width:67.95pt;"> <p>2.5.6</p> </td><td style="width:231.45pt;"> <p>最新稳定版本</p> </td></tr></tbody></table> 
<h2 style="margin-left:7.65pt;text-align:justify;"><strong><strong><strong>3.实训说明</strong></strong></strong></h2> 
<p>       通过本小节学习，可知HBase内置也有Zookeeper，但为了对HBase的HMaster节点的高可用管理，更好的使用HBase，配置分布式HBase时使用的是外部Zookeeper集群。但如果只是简单的测试，并不需要存储海量数据，使用分布式HBase集群，会造成资源浪费，因此，可以选择使用伪分布式的HBase和HBase内置的Zookeeper以节约资源。请基于HBase 2.5.6版本实现伪分布式的HBase集群搭建。</p> 
<h2 style="margin-left:7.65pt;text-align:justify;"><strong><strong><strong>4.实训步骤</strong></strong></strong></h2> 
<h3 style="margin-left:14.85pt;text-align:left;"><strong><strong><strong>4.1上传HBase安装包并解压</strong></strong></strong></h3> 
<p>      利用FinalShell软件将HBase安装包hbase-2.5.6-bin.tar.gz上传至虚拟机hadoop的/opt目录下。</p> 
<p><img alt="" height="271" src="https://images2.imgbox.com/53/65/ktJelhH9_o.png" width="705"></p> 
<p>    使用“tar”命令将HBase解压至/usr/local目录下，具体实现如以下代码所示：</p> 
<pre><code>tar -zxvf /opt/hbase-2.5.6-bin.tar.gz -C /usr/local/</code></pre> 
<h3 style="margin-left:14.85pt;text-align:left;"><strong><strong><strong>4.2修改配置文件并设置环境变量</strong></strong></strong></h3> 
<p>        HBase伪分布式安装，需要修改的配置文件有hbase-env.sh、hbase-site.xml、regionservers和/etc/profile。</p> 
<p>         通过“<span style="color:#ff0000;">cd </span><span style="color:#ff0000;">/usr/local/</span><span style="color:#ff0000;">hbase-</span><span style="color:#ff0000;">2.</span><span style="color:#ff0000;">5</span><span style="color:#ff0000;">.</span><span style="color:#ff0000;">6</span><span style="color:#ff0000;">/conf</span>”命令进入HBase的conf目录下。</p> 
<p><img alt="" height="67" src="https://images2.imgbox.com/df/86/4GpHX1kw_o.png" width="657"></p> 
<p><strong><strong>（</strong></strong><strong><strong>1</strong></strong><strong><strong>）配置HBase的环境变量</strong></strong></p> 
<p>         执行“<span style="color:#ff0000;">vi /etc/profile</span>”命令，对profile文件修改，添加HBase环境变量，内容如代码4-1所示。</p> 
<p style="text-align:center;">代码4-1 修改profile</p> 
<pre><code>#HBASE_HOME
export HBASE_HOME=/usr/local/hbase-2.5.6
export PATH=$PATH:$HBASE_HOME/bin</code></pre> 
<p style="margin-left:.0001pt;text-align:justify;">         切换到命令模式，输入命令“<span style="color:#ff0000;">：wq</span>”保存退出。<span style="color:#fe2c24;">执行命令“source /etc/profile”进行刷新。</span></p> 
<p><strong><strong>（</strong></strong><strong><strong>2</strong></strong><strong><strong>）修改配置文件</strong></strong><strong><strong>hb</strong></strong><strong><strong>ase-env.sh</strong></strong></p> 
<p>       执行“<span style="color:#ff0000;">vi hbase-env.sh</span>”命令,修改配置文件hbase-env.sh，添加内容如代码4-2所示。切换到命令模式，输入命令“<span style="color:#ff0000;">：wq</span>”保存退出。</p> 
<p>       其中HBASE_CLASSPATH设置为Hadoop配置文件的目录，JAVA_HOME设置为JDK的路径，<span style="background-color:#ffffff;">HBASE_MANAGES_ZK设置为</span><span style="background-color:#ffffff;">ture</span><span style="background-color:#ffffff;">，</span><span style="background-color:#ffffff;">使用HBase自带的Z</span><span style="background-color:#ffffff;">ookeeper</span><span style="background-color:#ffffff;">。</span></p> 
<p style="margin-left:.0001pt;text-align:center;"><a name="_Ref100246449"></a>代码4-2 修改hbase-env.sh</p> 
<pre><code>export HBASE_CLASSPATH=/usr/local/hadoop-3.1.4/etc/hadoop
export JAVA_HOME=/usr/local/jdk1.8.0_161
export HBASE_MANAGES_ZK=true</code></pre> 
<p><strong><strong>（</strong></strong><strong><strong>3</strong></strong><strong><strong>）修改配置文件</strong></strong><strong><strong>hbase-site.xml</strong></strong></p> 
<p>       执行“<span style="color:#ff0000;">vi hbase-site.xml</span>”命令，修改配置文件hbase-site.xml，创建文件夹命令与添加的内容如代码4-3所示。切换到命令模式，输入命令“<span style="color:#ff0000;">：wq</span>”保存退出。</p> 
<p>       其中hbase.rootdir是RegionServer的共享目录，用来持久化HBase，设置为HDFS的地址；hbase.zookeeper.property.dataDir是存放Zookeeper快照的路径(data/zookeeper文件夹会自动创建)；为了避免出现启动时出现无法找到HMaster进程的错误，设置hbase.unsafe.stream.capability.enforce为false。</p> 
<p style="margin-left:.0001pt;text-align:center;"><a name="_Ref100246464"></a><a name="_Ref93484114"></a>代码4-3 修改hbase-site.xml</p> 
<pre><code class="language-html"># hbase-site.xml配置内容
&lt;configuration&gt;
  &lt;property&gt;
        &lt;name&gt;hbase.rootdir&lt;/name&gt;
        &lt;value&gt;hdfs://hadoop:8020/hbase&lt;/value&gt;
        &lt;description&gt;配置HBase的数据存放再HDFS中&lt;/description&gt;
  &lt;/property&gt;
  &lt;property&gt;
        &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;
        &lt;value&gt;/usr/local/hbase-2.5.6/data/zookeeper&lt;/value&gt;
        &lt;description&gt;配置存放Zookeeper快照的路径&lt;/description&gt;
  &lt;/property&gt;
  &lt;property&gt;
        &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
        &lt;description&gt;开启Hbase的分布式模式&lt;/description&gt;
  &lt;/property&gt;
  &lt;property&gt;
       &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;
       &lt;value&gt;false&lt;/value&gt;
   &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p><strong><strong>（</strong></strong><strong><strong>4</strong></strong><strong><strong>）修改配置文件r</strong></strong><strong><strong>egionservers</strong></strong></p> 
<p>       执行“<span style="color:#ff0000;">vi </span><span style="color:#ff0000;">r</span><span style="color:#ff0000;">egionservers</span>”命令，修改配置文件regionservers，如代码4-4所示。由于不是安装分布式的HBase集群，所以只需填写hadoop即可。切换到命令模式，输入命令“<span style="color:#ff0000;">：wq</span>”保存退出。</p> 
<p style="margin-left:.0001pt;text-align:center;"><a name="_Ref100246473"></a>代码4-4 修改regionservers</p> 
<pre><code>hadoop</code></pre> 
<h3 style="margin-left:14.85pt;text-align:left;"><strong><strong><strong>4.3开启HBase</strong></strong></strong></h3> 
<p><strong><strong>    （1）启动HBase</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">      配置文件都已修改完成，开启伪分布式HBase，并使用自带的Zookeeper，验证安装是否成功。首先启动伪分布式Hadoop，然后启动伪分布式HBase，命令如代码4-5所示。“jps”查看进程，发现已有HMaster、HRegionServer、HQuorumPeer进程（HBase有内置的<a href="https://so.csdn.net/so/search?q=zookeeper&amp;spm=1001.2101.3001.7020" title="zookeeper">zookeeper</a>），代表HBase启动成功。结果如图4-1所示。</p> 
<p style="margin-left:.0001pt;text-align:center;"><a name="_Ref100246485"></a>代码4-5 启动HBase</p> 
<pre><code>//启动伪分布式hadoop
start-all.sh
//启动hbase命令
start-hbase.sh
//查看进程
jps</code></pre> 
<p class="img-center"><img alt="" height="208" src="https://images2.imgbox.com/0c/87/Iqymu633_o.png" width="301"></p> 
<p style="text-align:center;"><a name="_Ref100246516"></a>图4-1 进程结果</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>（2）访问HBase自带web配置页</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>     2.1关闭防火墙</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">        输入命令“systemctl stop firewalld.service”</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>     2.2打开浏览器访问HBase自带web配置页</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">        浏览器输入网址：http://192.168.15.128:16010/</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>     2.3效果图如下</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="335" src="https://images2.imgbox.com/a7/bf/KIYZFaUw_o.png" width="815"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fd5015dcbf1a4a1866cb5d3a121dd8ae/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue3，使用monaco-editor实现sql对比编辑器，自定义高亮</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6bfe02f48be10ac1829f23a78476549e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android（Java）项目支持Kotlin语言开发</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>