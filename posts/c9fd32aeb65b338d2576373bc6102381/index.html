<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>人脸检测（Python） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c9fd32aeb65b338d2576373bc6102381/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="人脸检测（Python）">
  <meta property="og:description" content="目录
环境：
初始化摄像头： 初始化FaceDetector对象：
获取摄像头帧： 获取数据：
绘制数据：
显示图像：
完整代码： 环境： cvzone库：cvzone是一个基于OpenCV的计算机视觉库，它提供了一些方便的功能和工具，用于图像处理、人脸检测、手势识别等应用。cvzone库是由Murtaza Hassan开发的，目前支持Python语言。
cv2库:cv2是OpenCV（Open Source Computer Vision Library）的Python接口库，它是一种广泛使用的计算机视觉和图像处理库。cv2提供了丰富的函数和工具，用于处理图像、视频、进行特征检测、图像变换等各种计算机视觉任务。
可以通过清华镜像源安装
初始化摄像头： cap = cv2.VideoCapture(0) # 通常 &#39;0&#39; 指的是内置摄像头 cap.set(3,1280) #设置摄像头的分辨率为 1280x720 cap.set(4,720) 初始化FaceDetector对象： FaceDetector是一个基于OpenCV的库，它提供了一个简单而强大的人脸检测器。它使用了OpenCV的级联分类器（Cascade Classifier）来检测人脸，并提供了方便易用的接口。FaceDetector可以在静态图像或实时视频中检测出人脸，并返回每个检测到的人脸的位置和边界框。它还可以根据需要进行参数调整，以适应不同场景和要求。FaceDetector在诸如人脸识别、人脸跟踪、表情检测等应用中非常有用。
detector = FaceDetector(minDetectionCon=0.5, modelSelection=1) # modelSelection: 0 表示短距离检测（2米），1 表示长距离检测（5米） 获取摄像头帧： # success: 布尔值，表示是否成功捕获了帧 # img: 捕获的帧 success, img = cap.read() # 从摄像头读取当前帧 # 在图像中检测人脸 # img: 更新后的图像 # bboxs: 检测到的人脸边界框列表 img, bboxs = detector.findFaces(img, draw=False) #在图像中检测人脸，并返回更新后的图像和人脸边界框列表 获取数据： # ---- 获取数据 ---- # center = bbox[&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-08T11:36:21+08:00">
    <meta property="article:modified_time" content="2024-07-08T11:36:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">人脸检测（Python）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="303" src="https://images2.imgbox.com/54/13/WTo9ZEMw_o.png" width="256"> <img alt="" height="298" src="https://images2.imgbox.com/90/ba/8SBEddtW_o.png" width="302"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E7%8E%AF%E5%A2%83%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E7%8E%AF%E5%A2%83%EF%BC%9A" rel="nofollow">环境：</a></p> 
<p id="%E5%88%9D%E5%A7%8B%E5%8C%96%E6%91%84%E5%83%8F%E5%A4%B4%EF%BC%9A%C2%A0-toc" style="margin-left:0px;"><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%91%84%E5%83%8F%E5%A4%B4%EF%BC%9A%C2%A0" rel="nofollow">初始化摄像头： </a></p> 
<p id="%E5%88%9D%E5%A7%8B%E5%8C%96FaceDetector%E5%AF%B9%E8%B1%A1%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96FaceDetector%E5%AF%B9%E8%B1%A1%EF%BC%9A" rel="nofollow">初始化FaceDetector对象：</a></p> 
<p id="%E8%8E%B7%E5%8F%96%E6%91%84%E5%83%8F%E5%A4%B4%E5%B8%A7%EF%BC%9A%C2%A0-toc" style="margin-left:0px;"><a href="#%E8%8E%B7%E5%8F%96%E6%91%84%E5%83%8F%E5%A4%B4%E5%B8%A7%EF%BC%9A%C2%A0" rel="nofollow">获取摄像头帧： </a></p> 
<p id="%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%9A" rel="nofollow">获取数据：</a></p> 
<p id="%E7%BB%98%E5%88%B6%E6%95%B0%E6%8D%AE%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E7%BB%98%E5%88%B6%E6%95%B0%E6%8D%AE%EF%BC%9A" rel="nofollow">绘制数据：</a></p> 
<p id="%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F%EF%BC%9A" rel="nofollow">显示图像：</a></p> 
<p id="%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%C2%A0-toc" style="margin-left:0px;"><a href="#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%C2%A0" rel="nofollow">完整代码： </a></p> 
<h2 id="%E7%8E%AF%E5%A2%83%EF%BC%9A">环境：</h2> 
<blockquote> 
 <p> <strong>cvzone库：cvzone是一个基于OpenCV的计算机视觉库，它提供了一些方便的功能和工具，用于图像处理、人脸检测、手势识别等应用。cvzone库是由Murtaza Hassan开发的，目前支持Python语言。</strong></p> 
 <p></p> 
 <p><strong>cv2库:cv2是OpenCV（Open Source Computer Vision Library）的Python接口库，它是一种广泛使用的计算机视觉和图像处理库。cv2提供了丰富的函数和工具，用于处理图像、视频、进行特征检测、图像变换等各种计算机视觉任务。</strong></p> 
 <p></p> 
 <p><strong>可以通过清华镜像源安装</strong></p> 
</blockquote> 
<h2 id="%E5%88%9D%E5%A7%8B%E5%8C%96%E6%91%84%E5%83%8F%E5%A4%B4%EF%BC%9A%C2%A0">初始化摄像头： </h2> 
<pre><code class="language-python">cap = cv2.VideoCapture(0) # 通常 '0' 指的是内置摄像头
cap.set(3,1280)     #设置摄像头的分辨率为 1280x720
cap.set(4,720)</code></pre> 
<h2 id="%E5%88%9D%E5%A7%8B%E5%8C%96FaceDetector%E5%AF%B9%E8%B1%A1%EF%BC%9A">初始化FaceDetector对象：</h2> 
<blockquote> 
 <p>FaceDetector是一个基于OpenCV的库，它提供了一个简单而强大的人脸检测器。它使用了OpenCV的级联分类器（Cascade Classifier）来检测人脸，并提供了方便易用的接口。FaceDetector可以在静态图像或实时视频中检测出人脸，并返回每个检测到的人脸的位置和边界框。它还可以根据需要进行参数调整，以适应不同场景和要求。FaceDetector在诸如人脸识别、人脸跟踪、表情检测等应用中非常有用。</p> 
</blockquote> 
<pre><code class="language-python">detector = FaceDetector(minDetectionCon=0.5, modelSelection=1)
# modelSelection: 0 表示短距离检测（2米），1 表示长距离检测（5米）</code></pre> 
<h2 id="%E8%8E%B7%E5%8F%96%E6%91%84%E5%83%8F%E5%A4%B4%E5%B8%A7%EF%BC%9A%C2%A0">获取摄像头帧： </h2> 
<pre><code class="language-python"> # success: 布尔值，表示是否成功捕获了帧
    # img: 捕获的帧
    success, img = cap.read() # 从摄像头读取当前帧

    # 在图像中检测人脸
    # img: 更新后的图像
    # bboxs: 检测到的人脸边界框列表
    img, bboxs = detector.findFaces(img, draw=False) #在图像中检测人脸，并返回更新后的图像和人脸边界框列表</code></pre> 
<h2 id="%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%9A">获取数据：</h2> 
<pre><code class="language-python"> # ---- 获取数据 ---- #
            center = bbox["center"]  # 获取人脸中心坐标
            x, y, w, h = bbox['bbox']  # 获取边界框的坐标和大小
            score = int(bbox['score'][0] * 100)  # 获取识别置信度（百分比）
</code></pre> 
<h2 id="%E7%BB%98%E5%88%B6%E6%95%B0%E6%8D%AE%EF%BC%9A">绘制数据：</h2> 
<pre><code class="language-python">  # ---- 绘制数据 ---- #
            cv2.circle(img, center, 5, (255, 0, 255), cv2.FILLED)  # 绘制圆形标记人脸中心
            cvzone.putTextRect(img, f'{score}%', (x, y - 15), border=5)  # 显示识别置信度文本
            cvzone.cornerRect(img, (x, y, w, h))  # 绘制矩形框</code></pre> 
<h2 id="%E6%98%BE%E7%A4%BA%E5%9B%BE%E5%83%8F%EF%BC%9A">显示图像：</h2> 
<pre><code class="language-python"> # 在名为'Image'的窗口中显示图像
    cv2.imshow("Image", img)
    # 等待1毫秒，如果按下任意键则关闭窗口
    cv2.waitKey(1)
</code></pre> 
<h2 id="%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%EF%BC%9A%C2%A0">完整代码： </h2> 
<pre><code class="language-python">#coding=gbk
# 导入必要的库
import cvzone
from cvzone.FaceDetectionModule import FaceDetector
import cv2
import logging

# 配置日志记录
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')

# 记录日志信息
logging.info('这是一条信息日志')
logging.warning('这是一条警告日志')
logging.error('这是一条错误日志')
# 初始化摄像头
cap = cv2.VideoCapture(0) # 通常 '0' 指的是内置摄像头
cap.set(3,1280)     #设置摄像头的分辨率为 1280x720
cap.set(4,720)

# 初始化FaceDetector对象
# minDetectionCon: 最小检测置信度阈值
# modelSelection: 0 表示短距离检测（2米），1 表示长距离检测（5米）
detector = FaceDetector(minDetectionCon=0.5, modelSelection=1)

# 循环获取摄像头帧
while True:
    # success: 布尔值，表示是否成功捕获了帧
    # img: 捕获的帧
    success, img = cap.read() # 从摄像头读取当前帧

    # 在图像中检测人脸
    # img: 更新后的图像
    # bboxs: 检测到的人脸边界框列表
    img, bboxs = detector.findFaces(img, draw=False) #在图像中检测人脸，并返回更新后的图像和人脸边界框列表

    # 如果检测到人脸
    if bboxs:
        # 遍历每个边界框
        for bbox in bboxs:
            # bbox 包含 'id', 'bbox', 'score', 'center'

            # ---- 获取数据 ---- #
            center = bbox["center"]  # 获取人脸中心坐标
            x, y, w, h = bbox['bbox']  # 获取边界框的坐标和大小
            score = int(bbox['score'][0] * 100)  # 获取识别置信度（百分比）

            # ---- 绘制数据 ---- #
            cv2.circle(img, center, 5, (255, 0, 255), cv2.FILLED)  # 绘制圆形标记人脸中心
            cvzone.putTextRect(img, f'{score}%', (x, y - 15), border=5)  # 显示识别置信度文本
            cvzone.cornerRect(img, (x, y, w, h))  # 绘制矩形框

    # 在名为'Image'的窗口中显示图像
    cv2.imshow("Image", img)
    # 等待1毫秒，如果按下任意键则关闭窗口
    cv2.waitKey(1)
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a7456a0e161f2355a52c1b0222113f1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI | 基于 MaxKB&#43;Ollama&#43;Llama3 手把手从0-1构建本地私有化知识库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8d3910126d62b10cde0f7b1402a69ef1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2.5 C#视觉程序开发实例1----CamManager实现模拟相机采集图片(Form_Vision部分代码)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>