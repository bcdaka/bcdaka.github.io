<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库设计图书管理系统 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e80d76fa051602297f7fc74b686ff40c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="数据库设计图书管理系统">
  <meta property="og:description" content="目录
一、 摘要 二、 前言 三、主体 3.1需求分析 3.1.1 功能需求分析 3.1.2 数据需求分析 3.2 概念设计 3.2.1 数据字典 3.2.2 ERD（实体关系图） 3.2.3 use case图 3.2.4 图书管理系统数据流程图（数据流图） 3.3 逻辑设计 3.3.1 E-R模型向关系模型的转换规则： 3.3.2 E-R图转换为如图所示的数据库关系表： 3.4 物理设计 3.4.1 DDL语言 3.4.2 重要的存储过程 四、结论及讨论 4.1结论 4.2 讨论 摘要 该课程设计题目为教学管理系统设计，具体要求如下：
设计教学管理系统，要求有基本资料管理，比如：读者、图书管理员、阅览室、书籍、书架、书籍分类、出版社、罚款单、系统管理员,书商等基础信息基本功能： 角色1:读者
选课
查询图书
借书还书
角色2:图书管理员
角色3:采购员
角色4:系统管理员
数据备份
系统优化
死锁排除
借还书要求考虑到学期、时间、图书管理员、读者等信息 前言 随着社会信息量的与日俱增,职场竞争的日趋激烈,越来越多的人更关注知识的积累、能力的培养。作为信息存储的主要媒体之一图书,数量、规模比以往任何时候都大的多,不论个人还是图书管理部门都需要使用方便而有效的方式来管理自己的书籍。
在计算机日益普及的今天,对个人而言若采用一套行之有效的图书管理系统来管理自己的书籍,会方便许多。对图书管理部门而言,以前单一的手工检索已不能满足人们的要求,为了便于图书资料的管理需要有效的图书管理软件。对于日益扩大的图书馆,查找特定的书目总是借阅者或工作人员劳神费力,有时还没有结果。因此往往是投入了大量的人力和财力却得不到高效的管理效率。为了缩短借阅者的等待时间,减轻工作人员的工作量,方便工作人员对它的操作,提高管理的质量和水平,做到高效、智能化管理.从而达到提高图书借阅信息管理效率的目的.采用数据库技术生成的图书馆借阅管理系统将会极大地方便借阅者并简化图书馆管理人员和工作人员的劳动,使工作人员从繁忙、复杂的工作进入到一个简单、高效的工作中。
其基本功能包括：
读者信息管理 2、图书管理员信息管理 3、借阅信息管理 4、图书信息管理 5、采购员信息管理 6、罚款信息管理 7、系统管理(图书管理系统管理员的功能)
三、主体 3.1需求分析 3.1.1 功能需求分析 图书馆管理系统开发。系统开发的总的设计目标是实现图书管理的系统化、规范化和自动化，实现对图书资料的集中统一的管理。用户是系统的最终使用者，开发系统的目的是让用户很方便使用系统，最终为用户带来各种便利。本系统主要实现对图书馆信息的管理，主要功能为管理有关读者、图书、借阅、查询、删除和管理员的信息等。本系统主要解决的问题是利用关键字对数据库进行查询。本系统的宗旨是提高图书管理工作的效率，减少相关人员的工作量，使学校的图书管理工作真正做到科学、合理的规划,系统、高效的实施。本系统应当包括读者、图书管理员、采购员、系统管理员四类用户，这四类用户对系统的需求简要概括如下。
读者用户需求描述： （1）有关读者种类标准的制定、种类信息的输入、包括种类编号、种类名称、借书数量、借书期限等。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-01-04T11:38:25+08:00">
    <meta property="article:modified_time" content="2023-01-04T11:38:25+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库设计图书管理系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <p style="margin-left:.0001pt;text-align:justify;"></p> 
</div> 
<p></p> 
<div> 
 <p><span style="color:#2e75b5;">目录</span></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><a href="#_Toc123715995" rel="nofollow"><u><span style="color:#0563c1;"><u>一、 摘要</u></span></u> </a></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><a href="#_Toc123715996" rel="nofollow"><u><span style="color:#0563c1;"><u>二、 前言</u></span></u> </a></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><a href="#_Toc123715997" rel="nofollow"><u><span style="color:#0563c1;"><u>三、主体</u></span></u> </a></p> 
 <p style="margin-left:21pt;text-align:justify;"><a href="#_Toc123715998" rel="nofollow"><u><span style="color:#0563c1;"><u>3.1需求分析</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123715999" rel="nofollow"><u><span style="color:#0563c1;"><u>3.1.1 功能需求分析</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716000" rel="nofollow"><u><span style="color:#0563c1;"><u>3.1.2 数据需求分析</u></span></u> </a></p> 
 <p style="margin-left:21pt;text-align:justify;"><a href="#_Toc123716001" rel="nofollow"><u><span style="color:#0563c1;"><u>3.2 概念设计</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716002" rel="nofollow"><u><span style="color:#0563c1;"><u>3.2.1 数据字典</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716003" rel="nofollow"><u><span style="color:#0563c1;"><u>3.2.2 ERD（实体关系图）</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716004" rel="nofollow"><u><span style="color:#0563c1;"><u>3.2.3 use case图</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716005" rel="nofollow"><u><span style="color:#0563c1;"><u>3.2.4 图书管理系统数据流程图（数据流图）</u></span></u> </a></p> 
 <p style="margin-left:21pt;text-align:justify;"><a href="#_Toc123716006" rel="nofollow"><u><span style="color:#0563c1;"><u>3.3 逻辑设计</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716007" rel="nofollow"><u><span style="color:#0563c1;"><u>3.3.1 E-R模型向关系模型的转换规则：</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716008" rel="nofollow"><u><span style="color:#0563c1;"><u>3.3.2 E-R图转换为如图所示的数据库关系表：</u></span></u> </a></p> 
 <p style="margin-left:21pt;text-align:justify;"><a href="#_Toc123716009" rel="nofollow"><u><span style="color:#0563c1;"><u>3.4 物理设计</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716010" rel="nofollow"><u><span style="color:#0563c1;"><u>3.4.1 DDL语言</u></span></u> </a></p> 
 <p style="margin-left:42pt;text-align:justify;"><a href="#_Toc123716011" rel="nofollow"><u><span style="color:#0563c1;"><u>3.4.2 重要的存储过程</u></span></u> </a></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><a href="#_Toc123716012" rel="nofollow"><u><span style="color:#0563c1;"><u>四、结论及讨论</u></span></u> </a></p> 
 <p style="margin-left:21pt;text-align:justify;"><a href="#_Toc123716013" rel="nofollow"><u><span style="color:#0563c1;"><u>4.1结论</u></span></u> </a></p> 
 <p style="margin-left:21pt;text-align:justify;"><a href="#_Toc123716014" rel="nofollow"><u><span style="color:#0563c1;"><u>4.2 讨论</u></span></u> </a></p> 
 <p style="margin-left:.0001pt;text-align:justify;"><a name="_Toc123715995"></a></p> 
</div> 
<p></p> 
<ul><li style="text-align:justify;"><strong>摘要</strong></li></ul> 
<p style="margin-left:.0001pt;text-align:left;">该课程设计题目为教学管理系统设计，具体要求如下：</p> 
<ol><li>设计教学管理系统，要求有基本资料管理，比如：读者、图书管理员、阅览室、书籍、书架、书籍分类、出版社、罚款单、系统管理员,书商等基础信息</li><li>基本功能：</li></ol> 
<p style="margin-left:36pt;">角色1:读者</p> 
<p style="margin-left:36pt;">选课</p> 
<p style="margin-left:36pt;">查询图书</p> 
<p style="margin-left:36pt;">借书还书</p> 
<p style="margin-left:36pt;">角色2:图书管理员</p> 
<p style="margin-left:36pt;"></p> 
<p style="margin-left:36pt;">角色3:采购员</p> 
<p style="margin-left:36pt;"></p> 
<p style="margin-left:36pt;">角色4:系统管理员</p> 
<p style="margin-left:36pt;">数据备份</p> 
<p style="margin-left:36pt;">系统优化</p> 
<p style="margin-left:36pt;">死锁排除</p> 
<ol><li>借还书要求考虑到学期、时间、图书管理员、读者等信息</li></ol> 
<ul><li style="text-align:justify;"><a name="_Toc123715996"></a><strong>前言</strong></li></ul> 
<p style="margin-left:.0001pt;text-align:justify;">随着社会信息量的与日俱增,职场竞争的日趋激烈,越来越多的人更关注知识的积累、能力的培养。作为信息存储的主要媒体之一图书,数量、规模比以往任何时候都大的多,不论个人还是图书管理部门都需要使用方便而有效的方式来管理自己的书籍。</p> 
<p style="margin-left:.0001pt;text-align:justify;">在计算机日益普及的今天,对个人而言若采用一套行之有效的图书管理系统来管理自己的书籍,会方便许多。对图书管理部门而言,以前单一的手工检索已不能满足人们的要求,为了便于图书资料的管理需要有效的图书管理软件。对于日益扩大的图书馆,查找特定的书目总是借阅者或工作人员劳神费力,有时还没有结果。因此往往是投入了大量的人力和财力却得不到高效的管理效率。为了缩短借阅者的等待时间,减轻工作人员的工作量,方便工作人员对它的操作,提高管理的质量和水平,做到高效、智能化管理.从而达到提高图书借阅信息管理效率的目的.采用数据库技术生成的图书馆借阅管理系统将会极大地方便借阅者并简化图书馆管理人员和工作人员的劳动,使工作人员从繁忙、复杂的工作进入到一个简单、高效的工作中。</p> 
<p style="margin-left:.0001pt;text-align:justify;">其基本功能包括：</p> 
<ol><li style="text-align:justify;">读者信息管理 2、图书管理员信息管理 3、借阅信息管理 4、图书信息管理</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">5、采购员信息管理 6、罚款信息管理 7、系统管理(图书管理系统管理员的功能)</p> 
<h2 style="text-align:justify;"><a name="_Toc123715997"></a><strong>三、主体</strong></h2> 
<h3 style="text-align:justify;"><a name="_Toc123715998"></a><strong>3.1需求分析</strong></h3> 
<h4 style="margin-left:21pt;text-align:justify;"><a name="_Toc6015"></a><strong><a name="_Toc123715999">3.1.1 功能需求分析</a></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">图书馆管理系统开发。系统开发的总的设计目标是实现图书管理的系统化、规范化和自动化，实现对图书资料的集中统一的管理。用户是系统的最终使用者，开发系统的目的是让用户很方便使用系统，最终为用户带来各种便利。本系统主要实现对图书馆信息的管理，主要功能为管理有关读者、图书、借阅、查询、删除和管理员的信息等。本系统主要解决的问题是利用关键字对数据库进行查询。本系统的宗旨是提高图书管理工作的效率，减少相关人员的工作量，使学校的图书管理工作真正做到科学、合理的规划,系统、高效的实施。本系统应当包括读者、图书管理员、采购员、系统管理员四类用户，这四类用户对系统的需求简要概括如下。</p> 
<ol><li style="text-align:justify;">读者用户需求描述：</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">（1）有关读者种类标准的制定、种类信息的输入、包括种类编号、种类名称、借书数量、借书期限等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）读者有关信息的修改、查询等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）读者基本信息的输入，包括读者编号、读者姓名、班级、院系等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（4）读者基本信息的查询、修改</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">图书管理员需求描述：</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">（1）书籍信息的输入，包括书籍编号、书籍名称、书籍所属类别、作者、出版社、出版日期、在库数、价格</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）借书信息包括借书证号、书籍编号、借出日期、拖欠日期、罚款种额</p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）图书管理书籍号、管理员编号、销书数量、销书日期。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">采购员需求描述：</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">采购员对系统的主要功能需求是：了解图书的一些基本信息，例如：数量，价格。利用本系统完成采购图书和退换图书的功能。</p> 
<ol><li style="text-align:justify;">系统管理员需求描述：</li></ol> 
<p style="margin-left:.0001pt;text-align:left;">系统管理员有系统的最高权限，负责系统所需所有数据的动态同步更新以及管理维 护，根据系统针对各用户的设计，基本功能需求如下：</p> 
<p>①数据备份需求：备份教学管理信息系统数据库 ②系统优化需求 ③死锁排除需求</p> 
<h4 style="margin-left:21pt;text-align:justify;"><a name="_Toc30969"></a><strong><a name="_Toc123716000">3.1.2 数据需求分析</a></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">根据功能需求分析的结果，图书管理系统的数据需求分析如下。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（1）读者信息：包括读者号，密码，姓名，学院、专业，年级，电话号码，性别等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）图书信息：包括图书号，ISBN号，书名，作者，价格等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）管理员信息：包括帐号，密码，姓名，性别，职称，类型等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（4）借阅信息：包括读者号，图书号，借阅时间，应归还时间，归还时间，借出图书</p> 
<p style="margin-left:.0001pt;text-align:justify;">管理员编号，还出的图书管理员编号等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（5）续借信息包括读者号，图书号，续借时间等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（6）图书卡挂失信息：包括读者号，挂失时间，取消挂失时间等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（7）图书挂失信息：包括读者号，图书号，挂失时间，取消挂失时间等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（8）预约信息：包括读者号，图书号，预约时间等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（9）罚款信息：包括图书管理员，读者号，图书号，罚款时间，罚款金额，罚款原因等。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（10）采购员信息：包括采购员编号，采购图书，图书数量，花费金额，退换图书名称，退换图书数量等。</p> 
<h3 style="margin-left:10.5pt;text-align:justify;"><a name="_Toc123716001"></a><strong><a name="_Toc21789">3.2 概念设计</a></strong></h3> 
<h4 style="margin-left:21pt;text-align:justify;"><a name="_Toc11174"></a><strong><a name="_Toc123716002">3.2.1 数据字典</a></strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">（1）读者实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">主码</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Password</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">密码</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderName</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者姓名</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Dept</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">学院</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20）</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Major</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">专业</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20）</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Grade</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">年级</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#333333;">T</span></span><span style="background-color:#ffffff;"><span style="color:#333333;">elephone number</span></span></p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">电话号码</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Sex</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">性别</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">char（2）,取值范围：{‘男’，’女’}</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）图书实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">主码</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookName</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">书名</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ISBN</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">ISBN号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Author</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">作者</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Price</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">价格</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Type</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">类型</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）管理员实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">MID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">管理员号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">主键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Password</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">密码</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Mname</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">姓名</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Msex</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">性别</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">char（2）,取值范围：{‘男’，’女’}</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Type</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">类型</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr></tbody></table> 
<p></p> 
<p>（4）借阅实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:95pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:118pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:95pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:118pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:95pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookID</p> </td><td style="vertical-align:top;width:118pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:95pt;"> <p style="margin-left:.0001pt;text-align:justify;">BorrowTime</p> </td><td style="vertical-align:top;width:118pt;"> <p style="margin-left:.0001pt;text-align:justify;">借阅时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:95pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReturnTime</p> </td><td style="vertical-align:top;width:118pt;"> <p style="margin-left:.0001pt;text-align:justify;">应归还时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime</p> </td></tr></tbody></table> 
<p></p> 
<p>（5）续借实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Retime</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">续借时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime，不允许取空值</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（6）图书卡挂失实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">LossTime</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">挂失时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">CancelTime</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">取消挂失时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（7）图书挂失实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">LossTime</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">挂失时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">CancelTime</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">取消挂失时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（8）预约实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">PreTime</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">预约时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime，不允许取空值</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（9）罚款实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">MID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书管理员</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReaderID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">读者号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BookID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">外键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Penalty time</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">罚款时间</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Datatime，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Cost</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">罚款金额</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">Cause</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">罚款原因</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20）</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（10）采购员实体集</p> 
<table border="1" cellspacing="0" style="margin-left:-10.95pt;width:491.85pt;"><tbody><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">属性名</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">含义</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类别</p> </td><td style="vertical-align:top;width:179.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">域及约束</p> </td><td> <p></p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BuyerID</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">采购员编号</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">主键</p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BuyBook</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">采购图书名称</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">BuyNum</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">图书数量</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">AllCost</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">花费金额</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReturnBook</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">退换图书名称</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">nvarchar（20），不允许取空值</p> </td></tr><tr><td style="vertical-align:top;width:109pt;"> <p style="margin-left:.0001pt;text-align:justify;">ReturnNum</p> </td><td style="vertical-align:top;width:104pt;"> <p style="margin-left:.0001pt;text-align:justify;">退换图书数量</p> </td><td style="vertical-align:top;width:98.5pt;"> <p style="margin-left:.0001pt;text-align:justify;"></p> </td><td colspan="2" style="vertical-align:top;width:180.35pt;"> <p style="margin-left:.0001pt;text-align:justify;">Int，不允许取空值</p> </td></tr></tbody></table> 
<h4 style="text-align:justify;"><a name="_Toc24859"></a><strong><a name="_Toc123716003">3.2.2 ERD（实体关系图）</a></strong></h4> 
<p><img alt="" height="553" src="https://images2.imgbox.com/2d/18/HOiJOQHs_o.png" width="830"></p> 
<p><img alt="" height="401" src="https://images2.imgbox.com/20/8d/qOxeX9kN_o.png" width="831"> </p> 
<p><img alt="" height="438" src="https://images2.imgbox.com/dd/7f/Iehzx09o_o.png" width="831"> </p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h4 style="text-align:justify;"><a name="_Toc26559"></a><strong><a name="_Toc123716004">3.2.3 use case图</a></strong></h4> 
<p><img alt="" height="413" src="https://images2.imgbox.com/6c/00/clH5AW1l_o.png" width="830"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"><a name="_Toc10297"></a></p> 
<h4 style="text-align:justify;"><a name="_Toc123716005"></a><strong>3.2.4 图书管理系统数据流程图（数据流图）</strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">顶层数据流图:</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="155" src="https://images2.imgbox.com/99/b7/h67r9NrK_o.png" width="666"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">第2层数据流图:(读者借阅，读者还书，读者查询，管理员查询，管理员修改)</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="385" src="https://images2.imgbox.com/55/cb/IWJgXWcW_o.png" width="830"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">第3层数据流图:(读者借阅)</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="300" src="https://images2.imgbox.com/9c/89/Unqb4Ym7_o.png" width="831"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">第3层数据流图:(读者还书)</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="320" src="https://images2.imgbox.com/5e/71/Qw5Na9cC_o.png" width="831"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">第3层数据流图:(查询图书信息，查询读者信息，查询借阅历史，查询罚款信息)</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="426" src="https://images2.imgbox.com/67/e5/AjQ8q32h_o.png" width="831"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;">第3层数据流图:(管理员添加、删除、修改读者信息)</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="257" src="https://images2.imgbox.com/e2/9a/X7mR9Ydf_o.png" width="831"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">第3层数据流图:(管理员添加、删除、修改系统用户信息)</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="296" src="https://images2.imgbox.com/ed/9f/a3dhBMPW_o.png" width="831"></p> 
<p> </p> 
<p> </p> 
<h3 style="margin-left:10.5pt;text-align:justify;"><a name="_Toc19787"></a><strong><a name="_Toc123716006">3.3 逻辑设计</a></strong></h3> 
<h4 style="text-align:justify;"><a name="_Toc16261"></a><strong><a name="_Toc123716007">3.3.1</a></strong><strong> E-R模型向关系模型的转换规则：</strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">（1）实体类型的转换</p> 
<p style="margin-left:.0001pt;text-align:justify;">将每个实体类型转换成一个关系模式，实体的属性即为关系的属性，实体标识符即为关系的键。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）联系类型的转换</p> 
<p style="margin-left:.0001pt;text-align:justify;">①如实体间的联系是1:1</p> 
<p style="margin-left:.0001pt;text-align:justify;">可以在两个实体类型转换成两个关系模式中的任意一个关系模式的属性中加入另一个关系模式的键和联系类型的属性。</p> 
<p style="margin-left:.0001pt;text-align:justify;">②如实体间的联系是1:n</p> 
<p style="margin-left:.0001pt;text-align:justify;">则在n端实体类型转换成的关系模式中加入1端实体类型转换成的关系模式的键和联系类型的属性。</p> 
<p style="margin-left:.0001pt;text-align:justify;">③如实体间的联系是m:n</p> 
<p style="margin-left:.0001pt;text-align:justify;">则将联系类型也转换成关系模式，其属性为两端实体类型的键加上联系类型的属性，而键为两端实体键的组合。</p> 
<h4 style="text-align:justify;"><a name="_Toc123716008"></a><strong><a name="_Toc17851">3.3.2 </a></strong><strong>E-R图转换为如图所示的数据库关系表：</strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;">（1）读者表（reader）</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="313" src="https://images2.imgbox.com/aa/79/Cc1CYrPm_o.png" width="637"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）图书表（book）</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="323" src="https://images2.imgbox.com/2c/07/UMEEYEig_o.png" width="595"></p> 
<p style="text-align:justify;">（3）管理员表（administrator）</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="243" src="https://images2.imgbox.com/5b/34/Svz6YspQ_o.png" width="635"></p> 
<p> （4）借阅表（ borrow）</p> 
<p><img alt="" height="218" src="https://images2.imgbox.com/81/c6/LNh0jEW1_o.png" width="578"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;">（5）续借表（renew）</p> 
<p style="text-align:justify;"><img alt="" height="159" src="https://images2.imgbox.com/fc/1f/TavswpPC_o.png" width="632"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;">（6）图书卡挂失表（cardloss）</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="146" src="https://images2.imgbox.com/99/7e/3potiKbX_o.png" width="670"></p> 
<p> </p> 
<p style="text-align:justify;">（7）图书挂失表（bookloss）</p> 
<p style="text-align:justify;"><img alt="" height="188" src="https://images2.imgbox.com/24/a8/9MKXPV2o_o.png" width="548"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;">（8）预约表（bespeakingbook）</p> 
<p style="text-align:justify;"><img alt="" height="172" src="https://images2.imgbox.com/7f/c5/ZQmKIaRl_o.png" width="601"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;">（9）罚款表（penalty）</p> 
<p style="text-align:justify;"><img alt="" height="242" src="https://images2.imgbox.com/c0/7f/N0KGHjU8_o.png" width="559"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="text-align:justify;">(10)采购员表（buyer）</p> 
<p style="text-align:justify;"><img alt="" height="233" src="https://images2.imgbox.com/53/25/Y8S03IZ5_o.png" width="607"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="margin-left:10.5pt;text-align:justify;"><a name="_Toc22746"></a><strong><a name="_Toc123716009">3.4 物理设计</a></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">数据库物理设计的任务是为上一阶段得到的数据库逻辑模型，即数据库的逻辑结构选择合适的应用环境的物理结构，既确定有效地实现逻辑结构模式的数据库储存，确定在物理设备上所采用的存储结构和存取方法，然后对该存储式进行性能评价、修改设计、经过多次反复，最后得到一个性能较好的存储模式。数据库物理设计内容包括记录存储结构的设计和存储路径的设计。</p> 
<h4 style="margin-left:21pt;text-align:justify;"><a name="_Toc123716010"></a><strong><a name="_Toc14566">3.4.1 DDL语言</a></strong></h4> 
<p><img alt="" height="344" src="https://images2.imgbox.com/00/05/uHapJs4m_o.png" width="329"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:left;">①建数据库：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">database</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> Librarymanagementsystem</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;">②建表：</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">Password</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderName </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Dept </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">major </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Grade </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">TelephoneNumber </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Sex </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">char</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">check</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">sex</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'男'</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">or</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> sex</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'女'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">null</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BookID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BookName </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ISBN </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Author </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Price </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">Type</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> administrator</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">MID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">password</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Mname </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Msex </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">char</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">check</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Msex</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'男'</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">or</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> Msex</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'女'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">null,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">Type</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> borrow</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BookID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BorrowTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReturnTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> cardloss</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">LossTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">CancelTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bookloss</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BookID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">LossTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">CancelTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bespeakingbook</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BookID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">PreTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> penalty</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">MID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BookID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">PenaltyTime </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">datetime</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Cost </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">not</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">null,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Cause </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">100</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">foreign</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key </span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">references</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> administrator</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">),</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">table</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> buyer</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BuyerID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">primary</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">key</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BuyBook </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">BuyNum </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">Allcost </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReturnBook </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NULL,</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">ReturnNum </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NUll</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<h4 style="text-align:left;"><a name="_Toc123716011"></a><strong>3.4.2 重要的存储过程</strong></h4> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="605" src="https://images2.imgbox.com/f5/b8/T9ALABgw_o.png" width="341"></p> 
<p> </p> 
<ol><li style="text-align:justify;">数据录入</li></ol> 
<ol><li style="text-align:justify;">录入读者信息</li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertreader</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@Rname </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderName</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@Rname</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">End</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">Password</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Dept</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Grade</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">major</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">TelephoneNumber</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderName</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20006</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">129899</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'计算机学院'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">1</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'计算机'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">12333333</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'周元'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）录入图书信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertbook</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@BID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@Bname </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookName</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@Bname</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">end</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> book</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookName</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ISBN</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Author</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Price</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">Type</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">30009</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'线性代数'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">1234322</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'我在想'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">12</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'课内'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）录入管理员信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertadministrator</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@adID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@adName </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">varchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> administrator </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@adID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> administrator</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Mname</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@adID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@adName</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">End</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> administrator</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">password</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Mname</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Msex</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">Type</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">10002</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">368488</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'歌莉娅'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'女'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'系统'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">录入借阅信息</li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertbrrow</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> brrow </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> brrow</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">end</span></span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> borrow</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BorrowTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReturnTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20001</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">30002</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2022</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">1</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">4</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2022</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">3</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">1</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">录入续借信息</li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertrenew</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> renew </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> renew</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">End</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> renew</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">RenewTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20001</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">30002</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2023</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">1</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">6</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（6）录入图书卡挂失信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertcardloss</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> cardloss </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> cardloss</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">end</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> cardloss</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">LossTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20002</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2022</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">9</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">5</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（7）录入图书挂失信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertbookloss</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bookloss </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bookloss</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">end</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bookloss</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">LossTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20003</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">30004</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2022</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">1</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">8</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">录入预约信息</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertbespeakingbook</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bespeakingbook </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span>  <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bespeakingbook</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">End</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span>  <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bespeakingbook</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">PreTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20002</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">30004</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2022</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">6</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">24</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">录入罚款信息</li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertpenalty</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@RID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> penalty </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> penalty</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@RID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">End</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> penalty</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">MID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BookID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">PenaltyTime</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Cost</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">Cause</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">10001</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20003</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">30005</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">2022</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">9</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">/</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">16</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">10</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#ff0000;">'挂失'</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（10）录入采购员信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">create</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">proc</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> spInsertbuyer</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#000000;">@BuID </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">int</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@Bname </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">nvarchar</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">as</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">if</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">NOT</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">EXISTS(</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> buyer </span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> BuyerID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BuID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">begin</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">insert</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">into</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> buyer</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BuyerID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">BuyBook</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">values</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">(</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@BuID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">,</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">@Bname</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">End</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">查询</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（1）图书管理员查询读者信息</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（2）读者查询信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> reader</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20001</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">;</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（3）查询借阅信息</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> borrow</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（4）读者查询借阅信息</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> borrow</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">where</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> ReaderID</span></span><span style="background-color:#ffffff;"><span style="color:#808080;">=</span></span><span style="background-color:#ffffff;"><span style="color:#000000;">20001</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（5）采购员查询信息</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> buyer</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（6）查询续借信息</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span> <span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> renew</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">（7）查询图书卡挂失信息</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> cardloss</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">查询图书挂失信息</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bookloss</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">查询预约信息</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> bespeakingbook</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<ol><li style="text-align:justify;">查询罚款信息</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#0000ff;">select</span></span> <span style="background-color:#ffffff;"><span style="color:#808080;">*</span></span><span style="background-color:#ffffff;"><span style="color:#0000ff;">from</span></span><span style="background-color:#ffffff;"><span style="color:#000000;"> penalty</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h2 style="text-align:justify;"><a name="_Toc18536"></a><strong><a name="_Toc123716012">四、结论及讨论</a></strong></h2> 
<h3 style="text-align:justify;"><a name="_Toc123716013"></a><strong><a name="_Toc9164">4.1结论</a></strong></h3> 
<p style="margin-left:.0001pt;text-align:justify;">1.这次课程设计使我熟悉了系统设计的整体步骤。系统设计大体可分为需求分析、概念</p> 
<p style="margin-left:.0001pt;text-align:justify;">设计、逻辑设计、物理设计、数据库的实施及调试测试六大步骤。其中，让我感触最深的是需求分析阶段，在这个阶段，必须对所要设计的系统有总体的构思和了解，知道自己要做什么，要实现什么，并且要实际的进行相关的调查，不能凭想象或自己的了解，这样会在后续的工作中遇到很多的问题。</p> 
<p style="margin-left:.0001pt;text-align:justify;">2．这次课程设计加深了我对数据库系统概论相关知识和SQL SERVER相关功能的理解。例如对建立基本表、视图、索引、存储过程、触发器等，都比以前更加的熟练。并在解决遇到的各种问题的过程中，学到了很多新的知识。比如在导入\导出数据时，由于外键约束的存在，经常会出现错误，这就要注意各个表导入的顺序问题。一般是先导入主键表，后导入外键表，这样可以避免很多的错误。</p> 
<p style="margin-left:.0001pt;text-align:justify;">3．我进一步掌握了相关的SQL语句方面的知识。不但纠正了以前的错误认识和理解，而且学会了建立存储过程和触发器。通过查阅资料，我还明白了存储过程是编译后放在服务器端的程序，它可以被别的模块调用，且不需要重新编译，这样就大大减轻了客户端的负担，且有效的提高了系统执行的效率。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h3 style="text-align:justify;"><a name="_Toc31571"></a><strong><a name="_Toc123716014">4.2 讨论</a></strong></h3> 
<ol><li>问题1：同一本书，可不可以在同一个时间被借用使用？</li></ol> 
<p>答：不能。</p> 
<ol><li>问题2：同一个学生，可以在图书管理系统上借阅多本书么？</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">答：可以，但有数量限制，不能超过规定的数量。</p> 
<ol><li>问题3：学生如何查看自己的借阅信息？</li></ol> 
<p style="margin-left:.0001pt;text-align:justify;">答：登入图书管理系统，输入个人学号查看。</p> 
<ol><li>问题4：如何优化设计的表之间存在的数据冗余和数据冲突的问题？</li></ol> 
<p style="margin-left:24pt;">    答：检验并使表设计符合第一范式（①表的字段都是单一属性的，不可再分；②每一行的记录都是没有重复的；③存在主属性，而且所有的属性都是依赖于主属性；④所有的主属性都已经定义），第二范式（不存在非主键间的部分依赖）以及第三范式（不存在非主键间的传递依赖）等。</p> 
<ol><li>问题5：管理员如何进行死锁优化？</li></ol> 
<p><span style="color:#0000ff;">ps：死锁的四个必要条件：请求和保持、互斥、不可剥夺、循环等待。</span></p> 
<p style="margin-left:21pt;">答:常用的办法是进行按序申请资源。但是条件苛刻的情况下，为了更快的整体运行速度，可以允许一部分进程预先使用序号大的资源。这时的处理方式是：不可剥夺变为可剥夺。因为不可剥夺变成可剥夺，允许死锁出现，更多的进程可以无等待推进，直到出现死锁才由系统来解决。所以需要死锁检测，找到造成死锁的进程，然后对造成死锁的进程进行死锁状态回滚并暂停其运行，等预判其运行不会造成死锁时再重新申请执行。</p> 
<p style="margin-left:21pt;">这里一共要做四件事：</p> 
<ol><li>死锁检测：①使用操作系统API对应提供的工具</li><li>进程状态回滚并暂停其运行</li><li>预判死锁</li><li>重新执行</li></ol> 
<p style="margin-left:21pt;">死锁检测之后，释放关键资源，暂停进程。直接调用suspend有关的api即可。等待一段时间之后，再次执行申请关键资源之后，再执行死锁检测。直到不会死锁可以运行该进程为止。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/70f067a8ab19646dcad00a3f01c6613d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">html网页设计小作业(个人主页)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8a49476f61e90175cc87dcdc11633163/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Tensorflow-gpu安装教程（详细）！！！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>