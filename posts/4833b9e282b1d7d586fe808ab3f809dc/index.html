<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】string类模拟实现：探索其内部机制 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4833b9e282b1d7d586fe808ab3f809dc/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】string类模拟实现：探索其内部机制">
  <meta property="og:description" content="💞💞 前言 hello hello~ ，这里是大耳朵土土垚~💖💖 ，欢迎大家点赞🥳🥳关注💥💥收藏🌹🌹🌹
💥个人主页：大耳朵土土垚的博客
💥 所属专栏：C&#43;&#43;入门至进阶
这里将会不定期更新有关C&#43;&#43;的内容，希望大家多多点赞关注收藏💖💖
目录 💞💞 前言1.string类基本框架2.string类模拟实现2.1构造函数实现✨string(const char* str)✨ string(const string&amp; s) 2.2赋值运算符重载✨ string&amp; operator=(const string&amp; s) 2.3析构函数✨ ~string() 2.4迭代器✨普通迭代器✨常量迭代器 2.5获取字符串指针✨const char* c_str() const 2.6获取string类的容量✨ size_t size() const✨ size_t capacity()const 2.7[]重载✨ char&amp; operator[](size_t pos)✨ const char&amp; operator[](size_t pos) const 2.8空间操作✨ void reserve(size_t n)✨ void resize(size_t n, char ch = &#39;\0&#39;)✨ bool empty()const✨ void clear() 2.9尾插操作✨void push_back(char ch)✨void append(const char* str)✨&#43;=重载 2.10在pos位置插入✨void insert(size_t pos, char ch)✨void insert(size_t pos, const char* str) 2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-31T17:40:46+08:00">
    <meta property="article:modified_time" content="2024-05-31T17:40:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】string类模拟实现：探索其内部机制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="__0"></a>💞💞 前言</h2> 
<blockquote> 
 <p><strong>hello hello~ ，这里是大耳朵土土垚~💖💖 ，欢迎大家点赞🥳🥳关注💥💥收藏🌹🌹🌹</strong><br> <img src="https://images2.imgbox.com/4c/5c/5UzXkTZl_o.png" alt="在这里插入图片描述"></p> 
 <blockquote> 
  <p>💥<strong>个人主页</strong>：<a href="https://blog.csdn.net/Renswc?type=blog">大耳朵土土垚的博客</a><br> 💥 <strong>所属专栏</strong>：<a href="https://blog.csdn.net/renswc/category_12630230.html">C++入门至进阶</a><br> 这里将会不定期更新有关C++的内容，希望大家多多点赞关注收藏💖💖</p> 
 </blockquote> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#__0" rel="nofollow">💞💞 前言</a></li><li><a href="#1string_9" rel="nofollow">1.string类基本框架</a></li><li><a href="#2string_114" rel="nofollow">2.string类模拟实现</a></li><li><ul><li><a href="#21_119" rel="nofollow">2.1构造函数实现</a></li><li><ul><li><a href="#stringconst_char_str_120" rel="nofollow">✨string(const char* str)</a></li><li><a href="#%09%09stringconst_string_s_136" rel="nofollow">✨ string(const string&amp; s)</a></li></ul> 
   </li><li><a href="#22_149" rel="nofollow">2.2赋值运算符重载</a></li><li><ul><li><a href="#%09%09string_operatorconst_string_s_150" rel="nofollow">✨ string&amp; operator=(const string&amp; s)</a></li></ul> 
   </li><li><a href="#23_172" rel="nofollow">2.3析构函数</a></li><li><ul><li><a href="#_string_173" rel="nofollow">✨ ~string()</a></li></ul> 
   </li><li><a href="#24_202" rel="nofollow">2.4迭代器</a></li><li><ul><li><a href="#_207" rel="nofollow">✨普通迭代器</a></li><li><a href="#_221" rel="nofollow">✨常量迭代器</a></li></ul> 
   </li><li><a href="#25_234" rel="nofollow">2.5获取字符串指针</a></li><li><ul><li><a href="#const_char_c_str_const_235" rel="nofollow">✨const char* c_str() const</a></li></ul> 
   </li><li><a href="#26string_244" rel="nofollow">2.6获取string类的容量</a></li><li><ul><li><a href="#%09size_t_size_const_246" rel="nofollow">✨ size_t size() const</a></li><li><a href="#%09size_t_capacityconst_255" rel="nofollow">✨ size_t capacity()const</a></li></ul> 
   </li><li><a href="#27_264" rel="nofollow">2.7[]重载</a></li><li><ul><li><a href="#%09char_operatorsize_t_pos_265" rel="nofollow">✨ char&amp; operator[](size_t pos)</a></li><li><a href="#%09const_char_operatorsize_t_pos_const_275" rel="nofollow">✨ const char&amp; operator[](size_t pos) const</a></li></ul> 
   </li><li><a href="#28_284" rel="nofollow">2.8空间操作</a></li><li><ul><li><a href="#%09void_reservesize_t_n_285" rel="nofollow">✨ void reserve(size_t n)</a></li><li><a href="#%09void_resizesize_t_n_char_ch__0_310" rel="nofollow">✨ void resize(size_t n, char ch = '\0')</a></li><li><a href="#%09bool_emptyconst_350" rel="nofollow">✨ bool empty()const</a></li><li><a href="#%09void_clear_361" rel="nofollow">✨ void clear()</a></li></ul> 
   </li><li><a href="#29_376" rel="nofollow">2.9尾插操作</a></li><li><ul><li><a href="#void_push_backchar_ch_378" rel="nofollow">✨void push_back(char ch)</a></li><li><a href="#void_appendconst_char_str_396" rel="nofollow">✨void append(const char* str)</a></li><li><a href="#_410" rel="nofollow">✨+=重载</a></li></ul> 
   </li><li><a href="#210pos_454" rel="nofollow">2.10在pos位置插入</a></li><li><ul><li><a href="#void_insertsize_t_pos_char_ch_455" rel="nofollow">✨void insert(size_t pos, char ch)</a></li><li><a href="#void_insertsize_t_pos_const_char_str_563" rel="nofollow">✨void insert(size_t pos, const char* str)</a></li></ul> 
   </li><li><a href="#211pos_598" rel="nofollow">2.11在pos位置删除</a></li><li><ul><li><a href="#void_erasesize_t_pos__0_size_t_len__npos_599" rel="nofollow">✨void erase(size_t pos = 0, size_t len = npos)</a></li></ul> 
   </li><li><a href="#212_651" rel="nofollow">2.12查找字符/字符串</a></li><li><ul><li><a href="#size_t_findchar_ch_size_t_pos__0_652" rel="nofollow">✨size_t find(char ch, size_t pos = 0)</a></li><li><a href="#size_t_findconst_char_str_size_t_pos__0_671" rel="nofollow">✨size_t find(const char* str, size_t pos = 0)</a></li></ul> 
   </li><li><a href="#213_704" rel="nofollow">2.13截取字符串</a></li><li><a href="#214_752" rel="nofollow">2.14交换函数</a></li><li><ul><li><a href="#void_swapstring_s_753" rel="nofollow">✨void swap(string&amp; s)</a></li></ul> 
   </li><li><a href="#215_765" rel="nofollow">2.15运算符重载</a></li><li><ul><li><a href="#bool_operatorconst_string_s_const_769" rel="nofollow">✨bool operator&gt;(const string&amp; s) const</a></li><li><a href="#bool_operatorconst_string_s_const_778" rel="nofollow">✨bool operator==(const string&amp; s) const</a></li><li><a href="#bool_operatorconst_string_s_const_787" rel="nofollow">✨bool operator&lt;(const string&amp; s) const</a></li><li><a href="#bool_operatorconst_string_s_const_796" rel="nofollow">✨bool operator&lt;=(const string&amp; s) const</a></li><li><a href="#bool_operatorconst_string_s_const_805" rel="nofollow">✨bool operator&gt;=(const string&amp; s) const</a></li><li><a href="#bool_operatorconst_string_s_const_814" rel="nofollow">✨bool operator!=(const string&amp; s) const</a></li></ul> 
   </li><li><a href="#216_822" rel="nofollow">2.16流插入提取</a></li><li><ul><li><a href="#istream_operator_istream_is_string_str_824" rel="nofollow">✨istream&amp; operator&gt;&gt; (istream&amp; is, string&amp; str)</a></li><li><a href="#ostream_operator_ostream_os_const_string_str_880" rel="nofollow">✨ostream&amp; operator&lt;&lt; (ostream&amp; os, const string&amp; str)</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3_917" rel="nofollow">3.另一种写法</a></li><li><a href="#4string_967" rel="nofollow">4.string类模拟实现完整代码</a></li><li><ul><li><a href="#_968" rel="nofollow">💫函数代码</a></li><li><a href="#_1420" rel="nofollow">💫测试代码</a></li></ul> 
  </li><li><a href="#5_1514" rel="nofollow">5.结语</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1string_9"></a>1.string类基本框架</h2> 
<p>通过对<a href="http://t.csdnimg.cn/2yGj2" rel="nofollow">string类的学习</a>，我们知道string类的模拟实现最主要是实现string类的<strong>构造、拷贝构造、赋值运算符重载</strong>以及<strong>析构函数</strong>，以下是对模拟实现string类变量以及函数的封装：</p> 
<blockquote> 
 <p>为了防止与库里面string类名字重复，我们将自己模拟实现的string类放在<code>tutu</code>的命名空间中（名字可以自定义），这样使用时就不会冲突了；其次对于string类的模拟实现我们采用声明与定义分离，方便大家查看string类中包含哪些函数；如下是对string类的声明：</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span> <span class="token expression"><span class="token number">1</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;assert.h&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> tutu	<span class="token comment">//命名空间，可自定义名字</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">class</span> <span class="token class-name">string</span>	<span class="token comment">//定义string类</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>

		<span class="token comment">//string();		//构造函数</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//赋值运算符重载</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//析构函数</span>
		<span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">typedef</span> <span class="token keyword">char</span><span class="token operator">*</span> iterator<span class="token punctuation">;</span>	<span class="token comment">//定义迭代器</span>
		<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> const_iterator<span class="token punctuation">;</span><span class="token comment">//常量使用的迭代器</span>

		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>


		<span class="token comment">//获取字符串指针</span>
		<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>	
		
		<span class="token comment">//获取string类的容量</span>
		size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		size_t <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>

		<span class="token comment">//[]重载</span>
		<span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span><span class="token punctuation">;</span>	
		<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>	<span class="token comment">//常量版本</span>

		<span class="token comment">//空间操作</span>
		<span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//预留空间</span>
		<span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//重设空间大小</span>
		<span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">//判断字符串是否为空</span>
		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//清空字符串</span>



		<span class="token comment">//尾插操作</span>
		<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//尾插字符</span>
		<span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//插入字符串</span>

		<span class="token comment">//+=重载</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//尾插字符</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//尾插字符串</span>

		<span class="token comment">//在pos位置插入</span>
		<span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//删除pos位置的值</span>
		<span class="token keyword">void</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//查找字符/字符串</span>
		size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



		<span class="token comment">//交换</span>
		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//截取字符串</span>
		string <span class="token function">substr</span><span class="token punctuation">(</span>size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//运算符重载</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token comment">// char _buff[16];</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

		size_t _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		size_t _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">const</span> <span class="token keyword">static</span> size_t npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
	<span class="token comment">//流插入提取重载</span>
	istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="2string_114"></a>2.string类模拟实现</h2> 
<blockquote> 
 <p>因为定义和声明分离，所以我们对函数实现时，需要带作用限定符<code>string：：</code>表明是实现这个类中的函数</p> 
</blockquote> 
<h3><a id="21_119"></a>2.1构造函数实现</h3> 
<h4><a id="stringconst_char_str_120"></a>✨string(const char* str)</h4> 
<blockquote> 
 <p>可以用字符串来构造string类：<code>string s1("Hello World");</code></p> 
</blockquote> 
<pre><code class="prism language-cpp"> string<span class="token double-colon punctuation">::</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//计算字符串长度</span>
     _str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//开辟空间</span>
     _size <span class="token operator">=</span> _capacity <span class="token operator">=</span> len<span class="token punctuation">;</span>	<span class="token comment">//设置capacity和size值</span>
     <span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//拷贝字符串</span>
 <span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里注意开辟空间<code> _str = new char[len + 1];</code>要+1，为了存放字符<code>'\0'</code>;并且<code> strcpy(_str, str); </code>会将str中的<code>'\0'</code>拷贝给_str，所以不需要手动拷贝。此外注意缺省参数在声明写，定义就不需要写了。</p> 
</blockquote> 
<h4><a id="%09%09stringconst_string_s_136"></a>✨ string(const string&amp; s)</h4> 
<blockquote> 
 <p>可以用另一个string对象来构造string对象：<code>string s2(s1);</code></p> 
</blockquote> 
<pre><code class="prism language-cpp">string<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	_size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
	_capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="22_149"></a>2.2赋值运算符重载</h3> 
<h4><a id="%09%09string_operatorconst_string_s_150"></a>✨ string&amp; operator=(const string&amp; s)</h4> 
<blockquote> 
 <p>类似于赋值，可以将string对象赋值给另一个string对象 <code>string s1 = s2;</code>此外还可以<code>string s1 = "Hello World;"</code>利用隐式类型转换使用字符串赋值，实现代码如下：</p> 
</blockquote> 
<pre><code class="prism language-cpp">string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
		_str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		_size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
		_capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里注意在赋值之前需要将string类的对象中之前存放的空间释放掉<code>delete[] _str;</code></p> 
</blockquote> 
<h3><a id="23_172"></a>2.3析构函数</h3> 
<h4><a id="_string_173"></a>✨ ~string()</h4> 
<pre><code class="prism language-cpp"><span class="token class-name">string</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
    _str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
    _capacity <span class="token operator">=</span> _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>🥳🥳测试代码如下：</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s2</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		tutu<span class="token double-colon punctuation">::</span>string s3 <span class="token operator">=</span> s1<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/05/84/FsuV8U7M_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24_202"></a>2.4迭代器</h3> 
<blockquote> 
 <p>迭代器可以通过指针类比，它们可以指向容器中的某个元素，并且可以通过操作迭代器来访问和修改容器中的元素。在实现时先要对它进行定义：<code>typedef char* iterator; //定义迭代器 typedef const char* const_iterator;//常量使用的迭代器</code>，因为我们实现的是string类是字符串，所以将<code>char*</code>typedef,这些都放在声明中。</p> 
</blockquote> 
<h4><a id="_207"></a>✨普通迭代器</h4> 
<pre><code class="prism language-cpp">string<span class="token double-colon punctuation">::</span>iterator string<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _str<span class="token punctuation">;</span>	<span class="token comment">//返回字符串指针</span>
<span class="token punctuation">}</span>

string<span class="token double-colon punctuation">::</span>iterator string<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>	<span class="token comment">//返回字符串指向'\0'的指针，也就是最后一个元素的下一个</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="_221"></a>✨常量迭代器</h4> 
<pre><code class="prism language-cpp">string<span class="token double-colon punctuation">::</span>const_iterator string<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string<span class="token double-colon punctuation">::</span>const_iterator string<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="25_234"></a>2.5获取字符串指针</h3> 
<h4><a id="const_char_c_str_const_235"></a>✨const char* c_str() const</h4> 
<pre><code class="prism language-cpp"><span class="token comment">//获取字符串指针</span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> string<span class="token double-colon punctuation">::</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="26string_244"></a>2.6获取string类的容量</h3> 
<h4><a id="%09size_t_size_const_246"></a>✨ size_t size() const</h4> 
<pre><code class="prism language-cpp">    size_t string<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="%09size_t_capacityconst_255"></a>✨ size_t capacity()const</h4> 
<pre><code class="prism language-cpp">size_t string<span class="token double-colon punctuation">::</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> _capacity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="27_264"></a>2.7[]重载</h3> 
<h4><a id="%09char_operatorsize_t_pos_265"></a>✨ char&amp; operator[](size_t pos)</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">char</span><span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="%09const_char_operatorsize_t_pos_const_275"></a>✨ const char&amp; operator[](size_t pos) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="28_284"></a>2.8空间操作</h3> 
<h4><a id="%09void_reservesize_t_n_285"></a>✨ void reserve(size_t n)</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1.n &lt;= capacity，不改变底层空间大小</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _capacity<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//什么都不干</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//2.n &gt; capacity</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
        _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
        _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>为string类对象预留空间，这里要注意当<code>n &lt;= capacity</code>时，不会进行缩小空间。</p> 
</blockquote> 
<h4><a id="%09void_resizesize_t_n_char_ch__0_310"></a>✨ void resize(size_t n, char ch = ‘\0’)</h4> 
<pre><code class="prism language-cpp"> <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token comment">//?怎么将后面的都设置为ch,尾插</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//1.n &lt;= capacity</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _capacity<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//什么都不干</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> _size<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//2.n &gt; capacity</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
        _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> _size<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>  <span class="token comment">//扩容了capacity要改变</span>
    <span class="token punctuation">}</span>
    _str<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
    _size <span class="token operator">=</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里注意当<code>n&lt;_size</code>时，也就是字符串本身大小大于要设置的空间大小时，直接将n位置的字符设置为<code>'\0'</code>即可，不改变底层空间大小。</p> 
</blockquote> 
<h4><a id="%09bool_emptyconst_350"></a>✨ bool empty()const</h4> 
<pre><code class="prism language-cpp"> <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">return</span> _size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>判断字符串是否为空串</p> 
</blockquote> 
<h4><a id="%09void_clear_361"></a>✨ void clear()</h4> 
<pre><code class="prism language-cpp"><span class="token comment">//清空字符串</span>
  <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//清除，底层空间不变</span>
      _str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'/0'</span><span class="token punctuation">;</span>
      _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里清空字符串只是将它有效字符设为0，不改变底层空间大小</p> 
</blockquote> 
<h3><a id="29_376"></a>2.9尾插操作</h3> 
<h4><a id="void_push_backchar_ch_378"></a>✨void push_back(char ch)</h4> 
<pre><code class="prism language-cpp"> <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span><span class="token comment">//判断是否需要扩容</span>
     <span class="token punctuation">{<!-- --></span>
         size_t newcapacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> _capacity<span class="token punctuation">;</span> 
         <span class="token function">reserve</span><span class="token punctuation">(</span>newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
         _capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     
     _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
     _str<span class="token punctuation">[</span>_size<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
     _size<span class="token operator">++</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="void_appendconst_char_str_396"></a>✨void append(const char* str)</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    _size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>因为reserve对于大于_size + len的空间不会缩小，所以我们直接使用reserve就行，不需要判断<code>_capacity&gt;_size+len</code>的情况</p> 
</blockquote> 
<h4><a id="_410"></a>✨+=重载</h4> 
<pre><code class="prism language-cpp"> string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>	<span class="token comment">//+=字符</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token function">push_back</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-cpp"> string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>	<span class="token comment">//+=字符串</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>+=重载和push_back、append实现原理一样我们只需要复用它们即可</p> 
</blockquote> 
<p><strong>🥳🥳测试代码如下</strong>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">using</span> <span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">void</span> <span class="token function">Test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//尾插字符</span>
	s1<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	s1 <span class="token operator">+=</span> <span class="token string">"world"</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//尾插字符串</span>
	s1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"tutu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/bd/d7/4q5JTXHX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="210pos_454"></a>2.10在pos位置插入</h3> 
<h4><a id="void_insertsize_t_pos_char_ch_455"></a>✨void insert(size_t pos, char ch)</h4> 
<pre><code class="prism language-cpp"><span class="token comment">// 在pos位置上插入字符c/字符串str</span>

<span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
     <span class="token punctuation">{<!-- --></span>
        size_t newcapacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token function">reserve</span><span class="token punctuation">(</span>newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
    size_t end <span class="token operator">=</span> _size <span class="token punctuation">;</span><span class="token comment">//'\0'也有</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> pos<span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>
        _str<span class="token punctuation">[</span>end<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
        end<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    _size<span class="token operator">++</span><span class="token punctuation">;</span>
    _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里插入要挪动数据；注意while循环的判断条件<code>end &gt;= pos</code>，又因为end和pos都是<code>size_t</code>无符号整型，所以当_size=0时，end无论怎么- - 都不会小于_size，也就是会陷入死循环</p> 
</blockquote> 
<p>测试代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/bd/92/idkUCr61_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>程序出现异常</p> 
</blockquote> 
<p>🥳🥳解决办法有两种</p> 
<ul><li>将size_t类型强制转换为int类型</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">// 在pos位置上插入字符c/字符串str</span>

<span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
     <span class="token punctuation">{<!-- --></span>
        size_t newcapacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token function">reserve</span><span class="token punctuation">(</span>newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
    <span class="token comment">//size_t end = _size ;//'\0'也有</span>
    <span class="token comment">//while (end &gt;= pos)   //出现异常</span>
    <span class="token comment">//{<!-- --></span>
    <span class="token comment">//    _str[end+1] = _str[end];</span>
    <span class="token comment">//    end--;</span>
    <span class="token comment">//}</span>
    <span class="token keyword">int</span> end <span class="token operator">=</span> _size<span class="token punctuation">;</span><span class="token comment">//'\0'也有</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>pos<span class="token punctuation">)</span>   <span class="token comment">//防止越界</span>
    <span class="token punctuation">{<!-- --></span>
        _str<span class="token punctuation">[</span>end <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
        end<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    _size<span class="token operator">++</span><span class="token punctuation">;</span>
    _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>将循环条件改成&gt;</li></ul> 
<blockquote> 
 <p>将end=_size+1,这样循环条件就可以是<code>end &gt;= pos</code></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token comment">// 在pos位置上插入字符ch/字符串str</span>

<span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
   
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
     <span class="token punctuation">{<!-- --></span>
        size_t newcapacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token function">reserve</span><span class="token punctuation">(</span>newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
    <span class="token comment">//size_t end = _size ;//'\0'也有</span>
    <span class="token comment">//while (end &gt;= pos)   //出现异常</span>
    <span class="token comment">//{<!-- --></span>
    <span class="token comment">//    _str[end+1] = _str[end];</span>
    <span class="token comment">//    end--;</span>
    <span class="token comment">//}</span>
    size_t end <span class="token operator">=</span> _size<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;</span> pos<span class="token punctuation">)</span>   
    <span class="token punctuation">{<!-- --></span>
        _str<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//注意这里也要相应-1</span>
        end<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    _size<span class="token operator">++</span><span class="token punctuation">;</span>
    _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="void_insertsize_t_pos_const_char_str_563"></a>✨void insert(size_t pos, const char* str)</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> end <span class="token operator">=</span> _size<span class="token punctuation">;</span><span class="token comment">//'\0'也有</span>
    size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//扩容</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>pos<span class="token punctuation">)</span>	<span class="token comment">//这里使用强制类型转换</span>
    <span class="token punctuation">{<!-- --></span>
        _str<span class="token punctuation">[</span>end <span class="token operator">+</span> len<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
        end<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">mencpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
    _size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>🥳🥳测试代码如下</strong>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/df/72/h5o8rEgS_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="211pos_598"></a>2.11在pos位置删除</h3> 
<h4><a id="void_erasesize_t_pos__0_size_t_len__npos_599"></a>✨void erase(size_t pos = 0, size_t len = npos)</h4> 
<pre><code class="prism language-cpp">    <span class="token comment">// 删除pos位置上的元素</span>

<span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">erase</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
      <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;=</span> _size <span class="token operator">-</span> pos<span class="token punctuation">)</span> <span class="token comment">//如果一直删到尾，就直接将pos位置置为'\0'</span>
      <span class="token punctuation">{<!-- --></span>
          _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
          _size <span class="token operator">=</span> pos<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> _str <span class="token operator">+</span> pos <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//将后面的字符串拷贝到前面</span>
          _size <span class="token operator">-=</span> len<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre> 
<p><strong>🥳🥳测试代码如下：</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">using</span> <span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">void</span> <span class="token function">Test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//特定位置插入字符</span>
	s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>


	<span class="token comment">//删一个字符</span>
	s1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//特定位置插入字符串</span>
	s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"tutu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//删多个字符</span>
	s1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/f9/10/m0LzwcCY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="212_651"></a>2.12查找字符/字符串</h3> 
<h4><a id="size_t_findchar_ch_size_t_pos__0_652"></a>✨size_t find(char ch, size_t pos = 0)</h4> 
<pre><code class="prism language-cpp"> <span class="token comment">// 返回ch在string中第一次出现的位置</span>

 size_t string<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> size_t pos<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
    
     <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
     <span class="token punctuation">{<!-- --></span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>_str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> ch<span class="token punctuation">)</span>
         <span class="token punctuation">{<!-- --></span>
             <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token comment">//找到了返回下标</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> npos<span class="token punctuation">;</span>  <span class="token comment">//没有找到返回npos</span>
 <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="size_t_findconst_char_str_size_t_pos__0_671"></a>✨size_t find(const char* str, size_t pos = 0)</h4> 
<pre><code class="prism language-cpp"> <span class="token comment">// 返回子串str在string中第一次出现的位置</span>

 size_t string<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> size_t pos<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
   
     <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>    <span class="token comment">//1.如果找到了</span>
     <span class="token punctuation">{<!-- --></span>
         <span class="token keyword">return</span> tmp <span class="token operator">-</span> _str<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">return</span> npos<span class="token punctuation">;</span><span class="token comment">//2.没找到</span>
 <span class="token punctuation">}</span>

</code></pre> 
<p><strong>🥳🥳测试代码如下</strong>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">using</span> <span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">void</span> <span class="token function">Test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'o'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"wor"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/9c/13/SGmjyQ3U_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="213_704"></a>2.13截取字符串</h3> 
<pre><code class="prism language-cpp"><span class="token comment">//截取字符串</span>
string string<span class="token double-colon punctuation">::</span><span class="token function">substr</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//如果len&gt;_size-pos,就将pos位置后面全部拷贝</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> _size <span class="token operator">-</span> pos<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        string <span class="token function">sub</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sub<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        string sub<span class="token punctuation">;</span>
        sub<span class="token punctuation">.</span><span class="token function">reserve</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            sub <span class="token operator">+=</span> _str<span class="token punctuation">[</span>pos <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sub<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>  
</code></pre> 
<p><strong>🥳🥳测试代码如下</strong>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">using</span> <span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">void</span> <span class="token function">Test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	tutu<span class="token double-colon punctuation">::</span>string <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://blog.csdn.net/Renswc?type=blog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	size_t pos1 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	tutu<span class="token double-colon punctuation">::</span>string url1 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos1 <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> url1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	size_t pos2 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">,</span> pos1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	tutu<span class="token double-colon punctuation">::</span>string url2 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> pos2 <span class="token operator">-</span> <span class="token punctuation">(</span>pos1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> url2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	tutu<span class="token double-colon punctuation">::</span>string url3 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> url3<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/29/cc/miDUMni1_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="214_752"></a>2.14交换函数</h3> 
<h4><a id="void_swapstring_s_753"></a>✨void swap(string&amp; s)</h4> 
<pre><code class="prism language-cpp"> <span class="token comment">//交换</span>
 <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token comment">//使用标准库里面的交换函数</span>
     std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
     std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
     std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="215_765"></a>2.15运算符重载</h3> 
<blockquote> 
 <p>这里只要实现&lt;和 == 或者&lt;和 == 就可以代码复用到其他的运算符上，使用strcmp函数比较字符串</p> 
</blockquote> 
<h4><a id="bool_operatorconst_string_s_const_769"></a>✨bool operator&gt;(const string&amp; s) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bool_operatorconst_string_s_const_778"></a>✨bool operator==(const string&amp; s) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">*</span>_str <span class="token operator">==</span> <span class="token operator">*</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bool_operatorconst_string_s_const_787"></a>✨bool operator&lt;(const string&amp; s) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;=</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bool_operatorconst_string_s_const_796"></a>✨bool operator&lt;=(const string&amp; s) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bool_operatorconst_string_s_const_805"></a>✨bool operator&gt;=(const string&amp; s) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;</span> s <span class="token operator">||</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bool_operatorconst_string_s_const_814"></a>✨bool operator!=(const string&amp; s) const</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="216_822"></a>2.16流插入提取</h3> 
<h4><a id="istream_operator_istream_is_string_str_824"></a>✨istream&amp; operator&gt;&gt; (istream&amp; is, string&amp; str)</h4> 
<pre><code class="prism language-cpp"><span class="token comment">//流提取</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    str<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token char">' '</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        str <span class="token operator">+=</span> ch<span class="token punctuation">;</span>
        ch <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> is<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里每次读取字符容量满了都要进行扩容非常消耗时间和空间，而且我们是两倍两倍的扩容，所以很可能会有很多剩余的空间无法使用，所以我们可以使用下面的方式来实现以节省空间：</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token comment">//输入流重载</span>

istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
    ch <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> buff<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//缓冲数组，最后一个存放'\0',所以最多读取127个</span>
    size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token char">' '</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span><span class="token comment">//遇到空格和换行停止读取</span>
    <span class="token punctuation">{<!-- --></span>
        buff<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">127</span><span class="token punctuation">)</span> <span class="token comment">//数组满了就将字符挪动到s中，然后再循环知道读完</span>
        <span class="token punctuation">{<!-- --></span>
            buff<span class="token punctuation">[</span><span class="token number">127</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
            s <span class="token operator">+=</span> buff<span class="token punctuation">;</span>
            i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        ch <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//如果没有读满数组，还有剩余字符</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        buff<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
        s <span class="token operator">+=</span> buff<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>输入流从屏幕上读取数据会<strong>覆盖</strong>原来的数据，所以我们使用<code>clear</code>先清理一下,然后创建一个数组来存放流读取到的字符，因为数组在函数调用完会<strong>自动释放</strong>不会占用过多的空间，一次性读取127个，读完就将它**+=到s中**，然后再<strong>从0开始</strong>读取，直到遇到空格或者换行，读取结束，如果此时数组里面还有字符就将它+=到s中</p> 
</blockquote> 
<h4><a id="ostream_operator_ostream_os_const_string_str_880"></a>✨ostream&amp; operator&lt;&lt; (ostream&amp; os, const string&amp; str)</h4> 
<pre><code class="prism language-cpp"><span class="token comment">//流插入</span>
ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        os <span class="token operator">&lt;&lt;</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> os<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里我们不需要将上述插入提取函数设置为友元，因为我们没有访问成员变量，访问的是公有的成员函数，也就不会存在越界访问</p> 
</blockquote> 
<p><strong>🥳🥳测试代码如下</strong>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">using</span> <span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">void</span> <span class="token function">Test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	cin <span class="token operator">&gt;&gt;</span> s1<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> s1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/15/d0/BUorP22W_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>这里看到遇到空格就没有继续读取了，只读了<code>hello</code>，后面的<code>tutu</code>没读</p> 
</blockquote> 
<h2><a id="3_917"></a>3.另一种写法</h2> 
<blockquote> 
 <p>对于拷贝构造函数以及赋值运算符重载我们还可以实现一种现代写法</p> 
</blockquote> 
<ul><li>拷贝构造</li></ul> 
<pre><code class="prism language-cpp">string<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/*_str = new char[s._capacity + 1];
    strcpy(_str, s._str);
    _size = s._size;
    _capacity = s._capacity;*/</span>
    string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>让swap函数帮助我们实现拷贝构造，在函数调用完成会自动调用析构函数释放原来的空间</p> 
</blockquote> 
<ul><li>赋值运算符重载</li></ul> 
<pre><code class="prism language-cpp">string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/*char* tmp = new char[s._capacity + 1];
        strcpy(tmp, s._str);
        delete[] _str;
        _str = tmp;
        _size = s._size;
        _capacity = s._capacity;*/</span>
        string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
       
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>此外对于赋值运算符重载还可以：</p> 
<pre><code class="prism language-cpp"> string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>string tmp<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
     <span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>这里注意给的参数没有使用引用，直接就是对参数的临时拷贝，交换完就释放空间；所以如果要使用的话记得把声明也改一下</p> 
</blockquote> 
<h2><a id="4string_967"></a>4.string类模拟实现完整代码</h2> 
<h3><a id="_968"></a>💫函数代码</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"string.h"</span></span>
<span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
    
        string<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            _size <span class="token operator">=</span> _capacity <span class="token operator">=</span> len<span class="token punctuation">;</span>
            <span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        string<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
            _capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">)</span> 
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>_capacity <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
                _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                _size <span class="token operator">=</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
                _capacity <span class="token operator">=</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">;</span>
               
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">string</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
            _str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
            _capacity <span class="token operator">=</span> _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>



       <span class="token comment">//</span>

        <span class="token comment">// iterator</span>

        string<span class="token double-colon punctuation">::</span>iterator string<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        string<span class="token double-colon punctuation">::</span>iterator string<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        string<span class="token double-colon punctuation">::</span>const_iterator string<span class="token double-colon punctuation">::</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        string<span class="token double-colon punctuation">::</span>const_iterator string<span class="token double-colon punctuation">::</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//获取字符串指针</span>
        <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> string<span class="token double-colon punctuation">::</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _str<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


     

      <span class="token comment">//  void string::swap(string&amp; s)</span>
      <span class="token comment">//  {<!-- --></span>
      <span class="token comment">//      string tmp(s);</span>

      <span class="token comment">//  }</span>

     

        <span class="token comment">/</span>

        <span class="token comment">// access</span>

        <span class="token keyword">char</span><span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span><span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>



        <span class="token comment">/</span>

        <span class="token comment">// capacity</span>

        size_t string<span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        size_t string<span class="token double-colon punctuation">::</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _capacity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

       

        <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//1.n &lt;= capacity，不改变底层空间大小</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _capacity<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//什么都不干</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//2.n &gt; capacity</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
                _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>


        <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token comment">//?怎么将后面的都设置为ch,尾插</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//1.n &lt;= capacity</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _capacity<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">//什么都不干</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> _size<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//2.n &gt; capacity</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
                _str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> _size<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                _capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>  <span class="token comment">//扩容了capacity要改变</span>
            <span class="token punctuation">}</span>
            _str<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
            _size <span class="token operator">=</span> n<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        
        <span class="token comment">//判断字符串是否为空串</span>
        <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> _size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token comment">//清空字符串</span>
          <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">{<!-- --></span>
              <span class="token comment">//清除，底层空间不变</span>
              _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
              _str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'/0'</span><span class="token punctuation">;</span>

          <span class="token punctuation">}</span>


            <span class="token comment">/</span>

       <span class="token comment">// modify</span>

       <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
       <span class="token punctuation">{<!-- --></span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span><span class="token comment">//判断是否需要扩容</span>
           <span class="token punctuation">{<!-- --></span>
               size_t newcapacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> _capacity<span class="token punctuation">;</span> 
               <span class="token function">reserve</span><span class="token punctuation">(</span>newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
               _capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           
           _str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
           _str<span class="token punctuation">[</span>_size<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
           _size<span class="token operator">++</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
       <span class="token punctuation">{<!-- --></span>
           <span class="token function">push_back</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
       <span class="token punctuation">{<!-- --></span>
           size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
           _size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       string<span class="token operator">&amp;</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
       <span class="token punctuation">{<!-- --></span>
           <span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


      



        <span class="token comment">// 在pos位置上插入字符ch / 字符串str</span>

        <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
           
            <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">==</span> _capacity<span class="token punctuation">)</span>
             <span class="token punctuation">{<!-- --></span>
                size_t newcapacity <span class="token operator">=</span> _capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
                <span class="token function">reserve</span><span class="token punctuation">(</span>newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
            <span class="token comment">//size_t end = _size ;//'\0'也有</span>
            <span class="token comment">//while (end &gt;= pos)   //出现异常</span>
            <span class="token comment">//{<!-- --></span>
            <span class="token comment">//    _str[end+1] = _str[end];</span>
            <span class="token comment">//    end--;</span>
            <span class="token comment">//}</span>
            size_t end <span class="token operator">=</span> _size<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//'\0'也有</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;</span> pos<span class="token punctuation">)</span>   
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                end<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            _size<span class="token operator">++</span><span class="token punctuation">;</span>
            _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>

        <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> end <span class="token operator">=</span> _size<span class="token punctuation">;</span>
            size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//扩容</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>pos<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>end <span class="token operator">+</span> len<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
                end<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">memcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>



        <span class="token comment">// 删除pos位置上的元素</span>

      <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">erase</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;=</span> _size <span class="token operator">-</span> pos<span class="token punctuation">)</span> <span class="token comment">//如果一直删到尾，就直接将pos位置置为'\0'</span>
            <span class="token punctuation">{<!-- --></span>
                _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
                _size <span class="token operator">=</span> pos<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> _str <span class="token operator">+</span> pos <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//将后面的字符串拷贝到前面</span>
                _size <span class="token operator">-=</span> len<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

      <span class="token comment">// 返回ch在string中第一次出现的位置</span>

      size_t string<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> size_t pos<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
         
          <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
          <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>_str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> ch<span class="token punctuation">)</span>
              <span class="token punctuation">{<!-- --></span>
                  <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token comment">//找到了返回下标</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> npos<span class="token punctuation">;</span>  <span class="token comment">//没有找到返回npos</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 返回子串str在string中第一次出现的位置</span>

      size_t string<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> size_t pos<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
        
          <span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>    <span class="token comment">//1.如果找到了</span>
          <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">return</span> tmp <span class="token operator">-</span>_str<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> npos<span class="token punctuation">;</span><span class="token comment">//2.没找到</span>
      <span class="token punctuation">}</span>



      <span class="token comment">//截取字符串</span>
      string string<span class="token double-colon punctuation">::</span><span class="token function">substr</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t len<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token comment">//如果len&gt;_size-pos,就将pos位置后面全部拷贝</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> _size <span class="token operator">-</span> pos<span class="token punctuation">)</span>
          <span class="token punctuation">{<!-- --></span>
              string <span class="token function">sub</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> sub<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">else</span>
          <span class="token punctuation">{<!-- --></span>
              string sub<span class="token punctuation">;</span>
              sub<span class="token punctuation">.</span><span class="token function">reserve</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
              <span class="token punctuation">{<!-- --></span>
                  sub <span class="token operator">+=</span> _str<span class="token punctuation">[</span>pos <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
              <span class="token keyword">return</span> sub<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>


      <span class="token comment">//交换</span>
      <span class="token keyword">void</span> string<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token comment">//使用标准库里面的交换函数</span>
          std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
          std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
          std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   
    
      <span class="token comment">/</span>

      <span class="token comment">//relational operators</span>



      <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>


      <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token operator">*</span>_str <span class="token operator">==</span> <span class="token operator">*</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&gt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;</span> s <span class="token operator">||</span> <span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> s<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span> <span class="token keyword">const</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;=</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token punctuation">}</span>

      <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">&lt;=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">&gt;</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">bool</span> string<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span> <span class="token operator">==</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">流提取</span>
      <span class="token comment">//istream&amp; operator&gt;&gt; (istream&amp; is, string&amp; str)</span>
      <span class="token comment">//{<!-- --></span>
      <span class="token comment">//    str.clear();</span>
      <span class="token comment">//    char ch = is.get();</span>
      <span class="token comment">//    while (ch != ' ' &amp;&amp; ch != '\n')</span>
      <span class="token comment">//    {<!-- --></span>
      <span class="token comment">//        str += ch;</span>
      <span class="token comment">//        ch = is.get();</span>
      <span class="token comment">//    }</span>

      <span class="token comment">//    return is;</span>
      <span class="token comment">//}</span>

      <span class="token comment">//输入流重载</span>

      istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
          s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
          ch <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">char</span> buff<span class="token punctuation">[</span><span class="token number">128</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//缓冲数组</span>
          size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token keyword">while</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token char">' '</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span><span class="token comment">//遇到空格和换行停止读取</span>
          <span class="token punctuation">{<!-- --></span>
              buff<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">127</span><span class="token punctuation">)</span> <span class="token comment">//数组满了就将字符挪动到s中，然后再循环知道读完</span>
              <span class="token punctuation">{<!-- --></span>
                  buff<span class="token punctuation">[</span><span class="token number">127</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
                  s <span class="token operator">+=</span> buff<span class="token punctuation">;</span>
                  i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
              ch <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token comment">//如果没有读满数组，还有剩余字符</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token punctuation">{<!-- --></span>
              buff<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
              s <span class="token operator">+=</span> buff<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> in<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//输出流重载</span>
      ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
          <span class="token punctuation">{<!-- --></span>
              os <span class="token operator">&lt;&lt;</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> os<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

</code></pre> 
<h3><a id="_1420"></a>💫测试代码</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> tutu
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s2</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		tutu<span class="token double-colon punctuation">::</span>string s3 <span class="token operator">=</span> s1<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string s1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
	

	<span class="token keyword">void</span> <span class="token function">Test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://blog.csdn.net/Renswc?type=blog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		size_t pos1 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">':'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tutu<span class="token double-colon punctuation">::</span>string url1 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pos1 <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> url1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		
		size_t pos2 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">,</span> pos1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		tutu<span class="token double-colon punctuation">::</span>string url2 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> pos2 <span class="token operator">-</span> <span class="token punctuation">(</span>pos1 <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> url2<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		
		tutu<span class="token double-colon punctuation">::</span>string url3 <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> url3<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		
		cin <span class="token operator">&gt;&gt;</span> s1<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'o'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"wor"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//尾插字符</span>
		s1<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		s1 <span class="token operator">+=</span> <span class="token string">"world"</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		<span class="token comment">//尾插字符串</span>
		s1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"tutu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		tutu<span class="token double-colon punctuation">::</span>string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//特定位置插入字符</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>


		<span class="token comment">//删一个字符</span>
		s1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		<span class="token comment">//特定位置插入字符串</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"tutu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		<span class="token comment">//删多个字符</span>
		s1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>


	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	tutu<span class="token double-colon punctuation">::</span><span class="token function">Test8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="5_1514"></a>5.结语</h2> 
<p>以上就是自主实现string类的所有内容啦~ 完结撒花 ~🥳🎉🎉</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6224ff9859beff3fdb6da88f6ced09c4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机图形学入门05：投影变换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e6a1b5ecb4ec745af74a2f1e720977a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">剖析【C&#43;&#43;】——类和对象(下篇)——超详解——小白篇</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>