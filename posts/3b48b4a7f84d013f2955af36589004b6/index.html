<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Springbooté‡Œé›†æˆMybatis-plusã€ClickHouse - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/3b48b4a7f84d013f2955af36589004b6/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="Springbooté‡Œé›†æˆMybatis-plusã€ClickHouse">
  <meta property="og:description" content="ğŸŒ¹ä½œè€…ä¸»é¡µï¼šé’èŠ±é” ğŸŒ¹ç®€ä»‹ï¼šJavaé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ğŸ†ã€Javaå¾®æœåŠ¡æ¶æ„å…¬å·ä½œè€…ğŸ˜„
ğŸŒ¹ç®€å†æ¨¡æ¿ã€å­¦ä¹ èµ„æ–™ã€é¢è¯•é¢˜åº“ã€æŠ€æœ¯äº’åŠ©
ğŸŒ¹æ–‡æœ«è·å–è”ç³»æ–¹å¼ ğŸ“
Springbooté‡Œé›†æˆMybatis-plusã€ClickHouseç›®å½• å‰è¨€1ã€æ„å»ºJDK8 &#43; Springboot 2.6.13é¡¹ç›®1.1ã€ä¿®æ”¹Server URLï¼Œæ”¯æŒJava81.2ã€ é€‰æ‹©Springboot ç‰ˆæœ¬ã€é€‰æ‹©åŠ è½½çš„ä¾èµ–åŒ…1.3ã€æŸ¥çœ‹pom.xmlæ–‡ä»¶1.4ã€æ£€æŸ¥é¡¹ç›®ç»“æ„1.4.1ã€æ£€æŸ¥é¡¹ç›®è®¾ç½®1.4.2ã€æ£€æŸ¥æ¨¡å— 1.5ã€æ£€æŸ¥é¡¹ç›®é…ç½®1.5.1ã€é…ç½®Mavenç¯å¢ƒ1.5.2ã€æ£€æŸ¥Javaç¼–è¯‘é…ç½® 2ã€é›†æˆMybatis-plusã€ClickHouse2.1ã€åŠ è½½Mybatis-plusã€ClickHouseä¾èµ–åŒ…2.2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ 3ã€åœ¨clickhouseé‡Œæ·»åŠ è¡¨4ã€åœ¨Springbooté¡¹ç›®é‡Œåˆ›å»ºå•†å“è¡¨çš„æ“ä½œç±»4.1ã€æ·»åŠ é›ªèŠ±IDå®ç°4.2ã€æ·»åŠ Mybatis-pluså†™æ³•çš„è¡¨æ“ä½œ 5ã€æµ‹è¯•5.1ã€æ–°å¢æ•°æ®5.2ã€æŸ¥è¯¢æ•°æ® ç»“å°¾ ã€åŸºäºClickHouseçš„å¤§æ•°æ®å¼€å‘ç³»åˆ—æ–‡ç« ã€‘
ç¬¬ä¸€ç«  Linuxéƒ¨ç½²-å®‰è£…jdkä»¥åŠshellè„šæœ¬æ£€æŸ¥jdk
ç¬¬äºŒç«  é˜¿é‡Œäº‘CentOs ClickHouseå®‰è£…
ç¬¬ä¸‰ç«  Springbooté‡Œé›†æˆMybatis-plusã€ClickHouse
å‰è¨€ ä¸Šä¸€ç« èŠ‚è®²è§£åœ¨é˜¿é‡Œäº‘ECS centosæœåŠ¡å™¨ä¸Šå®‰è£…ClickHouseã€‚
è¿™ä¸€ç« èŠ‚æˆ‘ä»¬åœ¨Springbooté‡Œé›†æˆMybatis-plusã€ClickHouseã€‚
ç¯å¢ƒï¼šJDK8 &#43; Springboot 2.6.13 &#43; ClickHouse
1ã€æ„å»ºJDK8 &#43; Springboot 2.6.13é¡¹ç›® JDK8 &#43; Springboot 2.xåŸºæœ¬ä¸Šéƒ½å¯ä»¥ï¼Œä¿é™©èµ·è§ï¼Œ2.5-2.7å·¦å³æœ€å¥½ã€‚
1.1ã€ä¿®æ”¹Server URLï¼Œæ”¯æŒJava8 åœ¨Ideaé‡Œåˆ›å»ºä¸€ä¸ªSpringbooté¡¹ç›®ï¼Œé¦–å…ˆä¿®æ”¹Server URLï¼Œé»˜è®¤çš„Server URLå·²ç»ä¸æ”¯æŒJDK8ã€‚
1.2ã€ é€‰æ‹©Springboot ç‰ˆæœ¬ã€é€‰æ‹©åŠ è½½çš„ä¾èµ–åŒ… 1.3ã€æŸ¥çœ‹pom.xmlæ–‡ä»¶ æ„å»ºå®Œæˆä¹‹åï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªSpringbooté¡¹ç›®ï¼Œæ–‡ä»¶é‡Œæœ€ä¸»è¦æ˜¯pom.xmlæ–‡ä»¶ã€‚
1.4ã€æ£€æŸ¥é¡¹ç›®ç»“æ„ 1.4.1ã€æ£€æŸ¥é¡¹ç›®è®¾ç½® ä¸æˆ‘ä»¬çš„é¡¹ç›®é‡Œé€‰æ‹©çš„JDK8ä¿æŒä¸€è‡´
1.4.2ã€æ£€æŸ¥æ¨¡å— æ£€æŸ¥é¡¹ç›®ç»“æ„ï¼Œè¯­è¨€çº§åˆ«ã€Sourcesã€Resourcesã€Test Resourcesç­‰ã€‚
1.5ã€æ£€æŸ¥é¡¹ç›®é…ç½® æ£€æŸ¥é¡¹ç›®çš„Settingsã€‚
1.5.1ã€é…ç½®Mavenç¯å¢ƒ ï¼ˆJDK8 å¯¹åº”çš„æ˜¯3.3 - 3.9ç­‰ï¼Œä¸€èˆ¬ä½¿ç”¨3.6ã€3.8æœ€ä½³ï¼‰
1.5.2ã€æ£€æŸ¥Javaç¼–è¯‘é…ç½® æ£€æŸ¥Javaç¼–è¯‘é…ç½®ï¼Œ1.8ã€8éƒ½å¯ä»¥ï¼Œä»£è¡¨ä½¿ç”¨java8ç¼–è¯‘Javaæ–‡ä»¶ã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-25T21:35:04+08:00">
    <meta property="article:modified_time" content="2024-08-25T21:35:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Springbooté‡Œé›†æˆMybatis-plusã€ClickHouse</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <hr> 
<p> ğŸŒ¹ä½œè€…ä¸»é¡µï¼šé’èŠ±é” ğŸŒ¹ç®€ä»‹ï¼šJavaé¢†åŸŸä¼˜è´¨åˆ›ä½œè€…ğŸ†ã€Javaå¾®æœåŠ¡æ¶æ„å…¬å·ä½œè€…ğŸ˜„</p> 
<p> ğŸŒ¹ç®€å†æ¨¡æ¿ã€å­¦ä¹ èµ„æ–™ã€é¢è¯•é¢˜åº“ã€æŠ€æœ¯äº’åŠ©</p> 
<p> ğŸŒ¹æ–‡æœ«è·å–è”ç³»æ–¹å¼ ğŸ“</p> 
<p><img src="https://images2.imgbox.com/d1/1c/S8t5VC48_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>Springbooté‡Œé›†æˆMybatis-plusã€ClickHouseç›®å½•</h4> 
 <ul><li><a href="#_24" rel="nofollow">å‰è¨€</a></li><li><a href="#1JDK8__Springboot_2613_29" rel="nofollow">1ã€æ„å»ºJDK8 + Springboot 2.6.13é¡¹ç›®</a></li><li><ul><li><a href="#11Server_URLJava8_31" rel="nofollow">1.1ã€ä¿®æ”¹Server URLï¼Œæ”¯æŒJava8</a></li><li><a href="#12_Springboot__34" rel="nofollow">1.2ã€ é€‰æ‹©Springboot ç‰ˆæœ¬ã€é€‰æ‹©åŠ è½½çš„ä¾èµ–åŒ…</a></li><li><a href="#13pomxml_36" rel="nofollow">1.3ã€æŸ¥çœ‹pom.xmlæ–‡ä»¶</a></li><li><a href="#14_39" rel="nofollow">1.4ã€æ£€æŸ¥é¡¹ç›®ç»“æ„</a></li><li><ul><li><a href="#141_41" rel="nofollow">1.4.1ã€æ£€æŸ¥é¡¹ç›®è®¾ç½®</a></li><li><a href="#142_44" rel="nofollow">1.4.2ã€æ£€æŸ¥æ¨¡å—</a></li></ul> 
   </li><li><a href="#15_47" rel="nofollow">1.5ã€æ£€æŸ¥é¡¹ç›®é…ç½®</a></li><li><ul><li><a href="#151Maven_50" rel="nofollow">1.5.1ã€é…ç½®Mavenç¯å¢ƒ</a></li><li><a href="#152Java_54" rel="nofollow">1.5.2ã€æ£€æŸ¥Javaç¼–è¯‘é…ç½®</a></li></ul> 
  </li></ul> 
  </li><li><a href="#2MybatisplusClickHouse_58" rel="nofollow">2ã€é›†æˆMybatis-plusã€ClickHouse</a></li><li><ul><li><a href="#21MybatisplusClickHouse_59" rel="nofollow">2.1ã€åŠ è½½Mybatis-plusã€ClickHouseä¾èµ–åŒ…</a></li><li><a href="#22_86" rel="nofollow">2.2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</a></li></ul> 
  </li><li><a href="#3clickhouse_120" rel="nofollow">3ã€åœ¨clickhouseé‡Œæ·»åŠ è¡¨</a></li><li><a href="#4Springboot_142" rel="nofollow">4ã€åœ¨Springbooté¡¹ç›®é‡Œåˆ›å»ºå•†å“è¡¨çš„æ“ä½œç±»</a></li><li><ul><li><a href="#41ID_143" rel="nofollow">4.1ã€æ·»åŠ é›ªèŠ±IDå®ç°</a></li><li><a href="#42Mybatisplus_292" rel="nofollow">4.2ã€æ·»åŠ Mybatis-pluså†™æ³•çš„è¡¨æ“ä½œ</a></li></ul> 
  </li><li><a href="#5_297" rel="nofollow">5ã€æµ‹è¯•</a></li><li><ul><li><a href="#51_347" rel="nofollow">5.1ã€æ–°å¢æ•°æ®</a></li><li><a href="#52_350" rel="nofollow">5.2ã€æŸ¥è¯¢æ•°æ®</a></li></ul> 
  </li><li><a href="#_354" rel="nofollow">ç»“å°¾</a></li></ul> 
</div> 
<p></p> 
<hr> 
<p><strong>ã€åŸºäºClickHouseçš„å¤§æ•°æ®å¼€å‘ç³»åˆ—æ–‡ç« ã€‘</strong></p> 
<blockquote> 
 <p>ç¬¬ä¸€ç«  <a href="https://blog.csdn.net/s445320/article/details/141302828">Linuxéƒ¨ç½²-å®‰è£…jdkä»¥åŠshellè„šæœ¬æ£€æŸ¥jdk</a><br> <br><br> ç¬¬äºŒç«  <a href="https://blog.csdn.net/s445320/article/details/141403664">é˜¿é‡Œäº‘CentOs ClickHouseå®‰è£…</a><br> <br><br> ç¬¬ä¸‰ç«  <a href="https://blog.csdn.net/s445320/article/details/141439077">Springbooté‡Œé›†æˆMybatis-plusã€ClickHouse</a><br> <br></p> 
</blockquote> 
<hr> 
<h2><a id="_24"></a>å‰è¨€</h2> 
<p>ä¸Šä¸€ç« èŠ‚è®²è§£åœ¨é˜¿é‡Œäº‘ECS centosæœåŠ¡å™¨ä¸Šå®‰è£…ClickHouseã€‚<br> è¿™ä¸€ç« èŠ‚æˆ‘ä»¬åœ¨Springbooté‡Œé›†æˆMybatis-plusã€ClickHouseã€‚<br> ç¯å¢ƒï¼šJDK8 + Springboot 2.6.13 + ClickHouse</p> 
<h2><a id="1JDK8__Springboot_2613_29"></a>1ã€æ„å»ºJDK8 + Springboot 2.6.13é¡¹ç›®</h2> 
<p>JDK8 + Springboot 2.xåŸºæœ¬ä¸Šéƒ½å¯ä»¥ï¼Œä¿é™©èµ·è§ï¼Œ2.5-2.7å·¦å³æœ€å¥½ã€‚</p> 
<h3><a id="11Server_URLJava8_31"></a>1.1ã€ä¿®æ”¹Server URLï¼Œæ”¯æŒJava8</h3> 
<p>åœ¨Ideaé‡Œåˆ›å»ºä¸€ä¸ªSpringbooté¡¹ç›®ï¼Œé¦–å…ˆä¿®æ”¹Server URLï¼Œé»˜è®¤çš„Server URLå·²ç»ä¸æ”¯æŒJDK8ã€‚<br> <img src="https://images2.imgbox.com/d9/1b/br4LkcDb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="12_Springboot__34"></a>1.2ã€ é€‰æ‹©Springboot ç‰ˆæœ¬ã€é€‰æ‹©åŠ è½½çš„ä¾èµ–åŒ…</h3> 
<p><img src="https://images2.imgbox.com/ea/0b/9cfRgT6l_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="13pomxml_36"></a>1.3ã€æŸ¥çœ‹pom.xmlæ–‡ä»¶</h3> 
<p>æ„å»ºå®Œæˆä¹‹åï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªSpringbooté¡¹ç›®ï¼Œæ–‡ä»¶é‡Œæœ€ä¸»è¦æ˜¯pom.xmlæ–‡ä»¶ã€‚<br> <img src="https://images2.imgbox.com/1c/99/zP4v9i3Q_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="14_39"></a>1.4ã€æ£€æŸ¥é¡¹ç›®ç»“æ„</h3> 
<p><img src="https://images2.imgbox.com/b2/b0/ZPF1xQfM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="141_41"></a>1.4.1ã€æ£€æŸ¥é¡¹ç›®è®¾ç½®</h4> 
<p>ä¸æˆ‘ä»¬çš„é¡¹ç›®é‡Œé€‰æ‹©çš„JDK8ä¿æŒä¸€è‡´<br> <img src="https://images2.imgbox.com/d4/80/ZM2o8BKT_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="142_44"></a>1.4.2ã€æ£€æŸ¥æ¨¡å—</h4> 
<p>æ£€æŸ¥é¡¹ç›®ç»“æ„ï¼Œè¯­è¨€çº§åˆ«ã€Sourcesã€Resourcesã€Test Resourcesç­‰ã€‚<br> <img src="https://images2.imgbox.com/59/96/YcnIhjiY_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="15_47"></a>1.5ã€æ£€æŸ¥é¡¹ç›®é…ç½®</h3> 
<p>æ£€æŸ¥é¡¹ç›®çš„Settingsã€‚</p> 
<h4><a id="151Maven_50"></a>1.5.1ã€é…ç½®Mavenç¯å¢ƒ</h4> 
<p>ï¼ˆJDK8 å¯¹åº”çš„æ˜¯3.3 - 3.9ç­‰ï¼Œä¸€èˆ¬ä½¿ç”¨3.6ã€3.8æœ€ä½³ï¼‰<br> <img src="https://images2.imgbox.com/2d/c8/H4eWkpDi_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="152Java_54"></a>1.5.2ã€æ£€æŸ¥Javaç¼–è¯‘é…ç½®</h4> 
<p>æ£€æŸ¥Javaç¼–è¯‘é…ç½®ï¼Œ1.8ã€8éƒ½å¯ä»¥ï¼Œä»£è¡¨ä½¿ç”¨java8ç¼–è¯‘Javaæ–‡ä»¶ã€‚<br> <img src="https://images2.imgbox.com/40/76/f0fjZXrW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="2MybatisplusClickHouse_58"></a>2ã€é›†æˆMybatis-plusã€ClickHouse</h2> 
<h3><a id="21MybatisplusClickHouse_59"></a>2.1ã€åŠ è½½Mybatis-plusã€ClickHouseä¾èµ–åŒ…</h3> 
<p>åœ¨pom.xmlæ–‡ä»¶é‡ŒåŠ è½½Mybatis-plusã€ClickHouseä¾èµ–åŒ…ã€‚<br> é¡ºé“æŠŠfastjsonä¹ŸåŠ å…¥è¿›å»ã€‚</p> 
<pre><code class="prism language-xml">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ru.yandex.clickhouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>clickhouse-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.1.53<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--Mybatis-plus ORM--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.33<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<h3><a id="22_86"></a>2.2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h3> 
<p>æŠŠé»˜è®¤çš„application.propertiesæ–‡ä»¶ä¿®æ”¹ä¸º application.yamlæ–‡ä»¶</p> 
<pre><code class="prism language-bash">spring:
  application:
    name: clickhouse-project
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    url: jdbc:clickhouse://clickhouseè¿œç¨‹ä¸»æœº:8123/default
    driver-class-name: ru.yandex.clickhouse.ClickHouseDriver
    username: default
    password:

mybatis-plus:
  <span class="token comment"># æœç´¢æŒ‡å®šåŒ…åˆ«å</span>
  type-aliases-package: com.xique.springbootclick.entity
  configuration:
    map-underscore-to-camel-case: <span class="token boolean">true</span>  <span class="token comment">#å¼€å¯é©¼å³°å‘½å</span>
    cache-enabled: <span class="token boolean">false</span> <span class="token comment">#å¼€å¯äºŒçº§ç¼“å­˜</span>
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl <span class="token comment"># æ§åˆ¶å°æ—¥å¿—</span>
  check-config-location: <span class="token boolean">true</span> <span class="token comment"># æ£€æŸ¥xmlæ˜¯å¦å­˜åœ¨</span>
  type-enums-package: com.gton.enumPackage  <span class="token comment">#é€šç”¨æšä¸¾å¼€å¯</span>
  global-config:
    db-config:
      logic-not-delete-value: <span class="token number">1</span>
      logic-delete-field: isDel
      logic-delete-value: <span class="token number">0</span>
      table-prefix: t_
server:
  port: <span class="token number">18123</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/90/27/Wlz5s9AQ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="3clickhouse_120"></a>3ã€åœ¨clickhouseé‡Œæ·»åŠ è¡¨</h2> 
<p>åˆ›å»ºä¸€å¼ å•†å“è¡¨ï¼ŒskuIdã€urlã€imageã€countryã€nameã€priceã€freightç­‰å­—æ®µã€‚</p> 
<pre><code class="prism language-bash">CREATE TABLE default.t_product
<span class="token punctuation">(</span>
    <span class="token variable"><span class="token variable">`</span>skuId<span class="token variable">`</span></span>  String,
    <span class="token variable"><span class="token variable">`</span>url<span class="token variable">`</span></span> String,
    <span class="token variable"><span class="token variable">`</span>image<span class="token variable">`</span></span> String,
    <span class="token variable"><span class="token variable">`</span>country<span class="token variable">`</span></span> String,
    <span class="token variable"><span class="token variable">`</span>name<span class="token variable">`</span></span> String,
    <span class="token variable"><span class="token variable">`</span>price<span class="token variable">`</span></span> String,
    <span class="token variable"><span class="token variable">`</span>freight<span class="token variable">`</span></span> String
<span class="token punctuation">)</span>
ENGINE <span class="token operator">=</span> SummingMergeTree
PARTITION BY country
ORDER BY skuId 
SETTINGS index_granularity <span class="token operator">=</span> <span class="token number">8192</span> 
</code></pre> 
<p><strong>æ•°æ®åº“è¡¨åˆ›å»ºæˆåŠŸï¼Œä½¿ç”¨show tableså‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºçš„è¡¨äº†ã€‚</strong><br> <img src="https://images2.imgbox.com/2c/13/BO64y8Tf_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="4Springboot_142"></a>4ã€åœ¨Springbooté¡¹ç›®é‡Œåˆ›å»ºå•†å“è¡¨çš„æ“ä½œç±»</h2> 
<h3><a id="41ID_143"></a>4.1ã€æ·»åŠ é›ªèŠ±IDå®ç°</h3> 
<p>æˆ‘ä»¬è¿™æ¬¡é‡‡ç”¨é›ªèŠ±IDç”Ÿæˆå•†å“SkuIdï¼Œæ‰€ä»¥æ·»åŠ é›ªèŠ±IDå®ç°</p> 
<pre><code class="prism language-Java">public class SnowflakeIdWorker {
    /**
     * å¼€å§‹æ—¶é—´æˆª (2015-01-01)
     */
    private final long twepoch = 1420041600000L;
    /**
     * æœºå™¨idæ‰€å çš„ä½æ•°
     */
    private final long workerIdBits = 5L;
    /**
     * æ•°æ®æ ‡è¯†idæ‰€å çš„ä½æ•°
     */
    private final long datacenterIdBits = 5L;
    /**
     * æ”¯æŒçš„æœ€å¤§æœºå™¨idï¼Œç»“æœæ˜¯31 (è¿™ä¸ªç§»ä½ç®—æ³•å¯ä»¥å¾ˆå¿«çš„è®¡ç®—å‡ºå‡ ä½äºŒè¿›åˆ¶æ•°æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§åè¿›åˆ¶æ•°)
     */
    private final long maxWorkerId = -1L ^ (-1L &lt;&lt; workerIdBits);
    /**
     * æ”¯æŒçš„æœ€å¤§æ•°æ®æ ‡è¯†idï¼Œç»“æœæ˜¯31
     */
    private final long maxDatacenterId = -1L ^ (-1L &lt;&lt; datacenterIdBits);
    /**
     * åºåˆ—åœ¨idä¸­å çš„ä½æ•°
     */
    private final long sequenceBits = 12L;
    /**
     * æœºå™¨IDå‘å·¦ç§»12ä½
     */
    private final long workerIdShift = sequenceBits;
    /**
     * æ•°æ®æ ‡è¯†idå‘å·¦ç§»17ä½(12+5)
     */
    private final long datacenterIdShift = sequenceBits + workerIdBits;
    /**
     * æ—¶é—´æˆªå‘å·¦ç§»22ä½(5+5+12)
     */
    private final long timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits;
    /**
     * ç”Ÿæˆåºåˆ—çš„æ©ç ï¼Œè¿™é‡Œä¸º4095 (0b111111111111=0xfff=4095)
     */
    private final long sequenceMask = -1L ^ (-1L &lt;&lt; sequenceBits);
    /**
     * å·¥ä½œæœºå™¨ID(0~31)
     */
    private long workerId;
    /**
     * æ•°æ®ä¸­å¿ƒID(0~31)
     */
    private long datacenterId;
    /**
     * æ¯«ç§’å†…åºåˆ—(0~4095)
     */
    private long sequence = 0L;
    /**
     * ä¸Šæ¬¡ç”ŸæˆIDçš„æ—¶é—´æˆª
     */
    private long lastTimestamp = -1L;
    /**
     * æ„é€ å‡½æ•°
     * @param workerId     å·¥ä½œID (0~31)
     * @param datacenterId æ•°æ®ä¸­å¿ƒID (0~31)
     */
    public SnowflakeIdWorker(long workerId, long datacenterId) {
        if (workerId &gt; maxWorkerId || workerId &lt; 0) {
            throw new IllegalArgumentException(String.format("worker Id can't be greater than %d or less than 0", maxWorkerId));
        }
        if (datacenterId &gt; maxDatacenterId || datacenterId &lt; 0) {
            throw new IllegalArgumentException(String.format("datacenter Id can't be greater than %d or less than 0", maxDatacenterId));
        }
        this.workerId = workerId;
        this.datacenterId = datacenterId;
    }
    /**
     * è·å¾—ä¸‹ä¸€ä¸ªID (è¯¥æ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨çš„)
     * @return SnowflakeId
     */
    public synchronized long nextId() {
        long timestamp = timeGen();
        // å¦‚æœå½“å‰æ—¶é—´å°äºä¸Šä¸€æ¬¡IDç”Ÿæˆçš„æ—¶é—´æˆ³ï¼Œè¯´æ˜ç³»ç»Ÿæ—¶é’Ÿå›é€€è¿‡è¿™ä¸ªæ—¶å€™åº”å½“æŠ›å‡ºå¼‚å¸¸
        if (timestamp &lt; lastTimestamp) {
            throw new RuntimeException(
                    String.format("Clock moved backwards.  Refusing to generate id for %d milliseconds", lastTimestamp - timestamp));
        }
        // å¦‚æœæ˜¯åŒä¸€æ—¶é—´ç”Ÿæˆçš„ï¼Œåˆ™è¿›è¡Œæ¯«ç§’å†…åºåˆ—
        if (lastTimestamp == timestamp) {
            sequence = (sequence + 1) &amp; sequenceMask;
            // æ¯«ç§’å†…åºåˆ—æº¢å‡º
            if (sequence == 0) {
                //é˜»å¡åˆ°ä¸‹ä¸€ä¸ªæ¯«ç§’,è·å¾—æ–°çš„æ—¶é—´æˆ³
                timestamp = tilNextMillis(lastTimestamp);
            }
        }
        // æ—¶é—´æˆ³æ”¹å˜ï¼Œæ¯«ç§’å†…åºåˆ—é‡ç½®
        else {
            sequence = 0L;
        }
        // ä¸Šæ¬¡ç”ŸæˆIDçš„æ—¶é—´æˆª
        lastTimestamp = timestamp;
        // ç§»ä½å¹¶é€šè¿‡æˆ–è¿ç®—æ‹¼åˆ°ä¸€èµ·ç»„æˆ64ä½çš„ID
        return ((timestamp - twepoch) &lt;&lt; timestampLeftShift) //
                | (datacenterId &lt;&lt; datacenterIdShift) //
                | (workerId &lt;&lt; workerIdShift) //
                | sequence;
    }
    /**
     * é˜»å¡åˆ°ä¸‹ä¸€ä¸ªæ¯«ç§’ï¼Œç›´åˆ°è·å¾—æ–°çš„æ—¶é—´æˆ³
     * @param lastTimestamp ä¸Šæ¬¡ç”ŸæˆIDçš„æ—¶é—´æˆª
     * @return å½“å‰æ—¶é—´æˆ³
     */
    protected long tilNextMillis(long lastTimestamp) {
        long timestamp = timeGen();
        while (timestamp &lt;= lastTimestamp) {
            timestamp = timeGen();
        }
        return timestamp;
    }
    /**
     * è¿”å›ä»¥æ¯«ç§’ä¸ºå•ä½çš„å½“å‰æ—¶é—´
     * @return å½“å‰æ—¶é—´(æ¯«ç§’)
     */
    protected long timeGen() {
        return System.currentTimeMillis();
    }

}
</code></pre> 
<p>é€šè¿‡Commonç±»å»è°ƒç”¨</p> 
<pre><code class="prism language-Java">public class Common {

    public static volatile SnowflakeIdWorker idWorker = null;

    public static synchronized SnowflakeIdWorker getIdWorker() {
        if (null == idWorker) {
            idWorker = new SnowflakeIdWorker(0, 0);
        }
        return idWorker;
    }

}

</code></pre> 
<h3><a id="42Mybatisplus_292"></a>4.2ã€æ·»åŠ Mybatis-pluså†™æ³•çš„è¡¨æ“ä½œ</h3> 
<p>å¯ä»¥ä½¿ç”¨Mybatisä»£ç ç”Ÿæˆå·¥å…·ï¼Œé€†å‘ClickHouseæ•°æ®åº“ç”Ÿæˆä»£ç ï¼Œå¹¶å¤åˆ¶åˆ°é¡¹ç›®é‡Œé¢ï¼Œçœæ—¶çœåŠ›ã€‚<br> ä¸ä¼šçš„åŒå­¦å¯ä»¥å»å­¦ä¹ æˆ‘çš„ã€Springbootã€‘ä¸“æ ã€‚<br> <img src="https://images2.imgbox.com/da/1d/6ysCc2c4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="5_297"></a>5ã€æµ‹è¯•</h2> 
<p>å¢åŠ å•å…ƒæµ‹è¯•ã€‚</p> 
<pre><code class="prism language-Java">package com.qhkj.clickhousedemo;

import com.alibaba.fastjson.JSON;
import com.qhkj.clickhousedemo.constant.Common;
import com.qhkj.clickhousedemo.entity.Product;
import com.qhkj.clickhousedemo.service.ProductService;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

import javax.annotation.Resource;
import java.util.List;

@Slf4j
@SpringBootTest
public class ProductTest {

    @Resource
    private ProductService productService;

    @Test
    void saveProduct() {
        Product product = Product.builder()
                .skuId(String.valueOf(Common.getIdWorker().nextId()))
                .url("http://xxx.com/skuid=xxxx")
                .country("EN")
                .image("http://image.xxx.com/skuid=xxxx")
                .name("DIABLO 4 GOLD SEASON 5")
                .price("275ç¾å…ƒ")
                .freight("15ç¾å…ƒè¿è´¹")
                .build();
        productService.save(product);
        log.info("å•†å“ä¿¡æ¯ä¿å­˜æˆåŠŸ");
    }

    @Test
    void selectAll() {
        List&lt;Product&gt; productList = productService.selectAll();
        log.info("productList:{}", JSON.toJSONString(productList));
    }


}

</code></pre> 
<h3><a id="51_347"></a>5.1ã€æ–°å¢æ•°æ®</h3> 
<p>æ„é€ ä¸€ä¸ªå•†å“ç±»ï¼Œæ–°å¢ä¸€æ¡æ•°æ®å¹¶æ‰§è¡Œ<br> <img src="https://images2.imgbox.com/ff/85/pK6persg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="52_350"></a>5.2ã€æŸ¥è¯¢æ•°æ®</h3> 
<p>æŸ¥è¯¢æ‰€æœ‰æ•°æ®ã€‚<br> <img src="https://images2.imgbox.com/3d/fa/rrOVElYd_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="_354"></a>ç»“å°¾</h2> 
<p>æœ¬ç« èŠ‚ï¼Œè®²è§£Springboot + mybatis-plus é›†æˆClickHouseï¼Œå®ç°å¢åŠ æ•°æ®ã€æŸ¥è¯¢æ•°æ®ã€‚<br> ä¸‹ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®é‡Œé›†æˆRabbitMqï¼Œä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥æ¥æ”¶æ•°æ®ï¼Œå¹¶å­˜å‚¨åˆ°ClickHouseã€‚<br> æ•°æ®æ¥æºæˆ‘ä»¬å¦å¤–æ„é€ ä¸€ä¸ªç³»ç»Ÿï¼Œä½¿ç”¨Springboot + Jsoupè§£æebayç½‘æ•°æ®ï¼Œå»è·å–è€³æœºã€æ˜¾å¡ã€iPhoneç­‰ç±»ç›®çš„çƒ­å–å•†å“ï¼Œä½¿ç”¨RabbitMqå‘é€æ•°æ®ã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eae3e4ad3a0ec167bee477371fcf659d/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æ¯æ—¥ä¸€ç»ƒã€æœ€å¤§è¿ç»­1çš„ä¸ªæ•° IIIã€‘</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8038a9bbcaa67f95f29addead36ab5c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Javaé‡ä¿®ç¬”è®° ç¬¬å››åäºŒå¤© LinkedList ç±»ã€ArrayList å’Œ LinkedList æ¯”è¾ƒ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>