<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】初识面向对象：类与对象详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8e02456a1aaf818c07e2d3a8e711bb3f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】初识面向对象：类与对象详解">
  <meta property="og:description" content="C&#43;&#43;语法相关知识点可以通过点击以下链接进行学习一起加油！命名空间缺省参数与函数重载C&#43;&#43;相关特性 本章将介绍C&#43;&#43;中一个重要的概念——类。通过类，我们可以类中定义成员变量和成员函数，实现模块化封装，从而构建更加抽象和复杂的工程。
🌈个人主页：是店小二呀
🌈C语言笔记专栏：C语言笔记
🌈C&#43;&#43;笔记专栏： C&#43;&#43;笔记
🌈初阶数据结构笔记专栏： 初阶数据结构笔记
🌈Linux笔记专栏： Linux笔记
🌈喜欢的诗句:无人扶我青云志 我自踏雪至山巅 文章目录 一、面向过程与面向对象初步认识二、类的引入2.1 定义概念2.2 类的定义2.3 成员变量命令规则 三、类的访问限定符及封装3.1 访问限定符3.1.1 class与struct区别 3.2 封装 四、类的作用域(类域)五、类的实例化六、类对象模型6.1 计算类对象的大小6.2 类对象的存储方式猜测 七、this指针7.1 this指针的引入7.2 this指针的特性 八、面试题 一、面向过程与面向对象初步认识 C语言是面向过程的，关注的是过程，分析出求解问题的步骤，通过函数调用逐步解决问题C&#43;&#43;是基于面向对象的，关注的是对象，将一件事情拆分成不同的对象，依靠对象之间的交互完成
二、类的引入 2.1 定义概念 定义是编程中的一项基础操作，涉及到为特定数据分配到一个名称和存储位置。不能通过是否赋值去判断是否存在定义，而是通过是否为其开辟空间。
C语言结构体中只能定义变量struct S s1 ={&#34;Alice&#34;, c}； 在C&#43;&#43;中结构体内不仅可以定义变量，也可也定义函数。现在以C&#43;&#43;方式实现 ，struct可以定义变量及其函数，但是更喜欢使用class代替struct(类替代结构体)
struct Stack { void Init(size_tt capacity) { //一系列操作 } new_capacity=capacity; size=10; }; 2.2 类的定义 class className { //类体:一般由成员函数和成员变量组成 };//同结构体一般，需要添加分号 class为定义类的关键字，ClassName为类的名字，{}中为类的主体，注意类定义结束时后面分号不能省略。
类体中内容称为类的成员，其中类的成员:1.类中的变量称为类的属性或成员变量2.类中的函称为类的方法或者成员函数
类的两种定义方式:
声明和定义全部放在类体中，需注意：成员函数如果在类中定义，编译器可能会将其当成内联函数处理。 类声明放在.h文件中，成员函数定义放在.cpp文件中，注意：成员函数名前需要加类名:: 一般情况下，更加期望采用第二种方式。为了方便演示将采用第一种，大家在后序工作中尽量使用第二种方式，体现了面对对象编程的封装特性，提高代码的可维护性。
2.3 成员变量命令规则 由于在使用类过程中，难免会遇到成员变量与函数参数名称相同导致混淆。比如:这里如何去区分year属于成员变量还是函数参数呢？">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-08T07:11:37+08:00">
    <meta property="article:modified_time" content="2024-08-08T07:11:37+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】初识面向对象：类与对象详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/ad/2e/mDhRtM8q_o.gif" alt="在这里插入图片描述"></p> 
<table><thead><tr><th align="center">C++语法</th><th align="center">相关知识点</th><th align="center">可以通过点击</th><th align="center">以下链接进行学习</th><th align="center">一起加油！</th></tr></thead><tbody><tr><td align="center"><a href="https://blog.csdn.net/2302_79177254/article/details/140668996?spm=1001.2014.3001.5501">命名空间</a></td><td align="center"><a href="https://blog.csdn.net/2302_79177254/article/details/140676622?spm=1001.2014.3001.5501">缺省参数与函数重载</a></td><td align="center"><a href="https://blog.csdn.net/2302_79177254/article/details/140729961?spm=1001.2014.3001.5501">C++相关特性</a></td><td align="center"></td><td align="center"></td></tr></tbody></table> 
<blockquote> 
 <p>本章将介绍C++中一个重要的概念——类。通过类，我们可以类中定义成员变量和成员函数，实现模块化封装，从而构建更加抽象和复杂的工程。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/72/a6/M5y67OtS_o.gif" alt="请添加图片描述" width="600" height="60"><br> <img src="https://images2.imgbox.com/73/47/bLRAR0sW_o.png" alt="Alt" width="200" height="200"><br> 🌈个人主页：<a href="https://blog.csdn.net/2302_79177254?type=blog">是店小二呀</a><br> 🌈C语言笔记专栏：<a href="https://blog.csdn.net/2302_79177254/category_12498683.html?spm=1001.2014.3001.5482">C语言笔记</a><br> 🌈C++笔记专栏： <a href="https://blog.csdn.net/2302_79177254/category_12596619.html">C++笔记</a><br> 🌈初阶数据结构笔记专栏： <a href="https://blog.csdn.net/2302_79177254/category_12596619.html">初阶数据结构笔记</a><br> 🌈Linux笔记专栏： <a href="https://blog.csdn.net/2302_79177254/category_12742437.html">Linux笔记</a></p> 
<p>🌈喜欢的诗句:无人扶我青云志 我自踏雪至山巅 <img src="https://images2.imgbox.com/16/3f/aEpe6zNM_o.gif" alt="请添加图片描述" width="600" height="60"><br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#font_colorcornflowerbluefont_21" rel="nofollow"><font color="cornflowerblue">一、面向过程与面向对象初步认识</font></a></li><li><a href="#font_colorcornflowerbluefont_29" rel="nofollow"><font color="cornflowerblue">二、类的引入</font></a></li><li><ul><li><a href="#font_colorcornflowerblue21_font_31" rel="nofollow"><font color="cornflowerblue">2.1 定义概念</font></a></li><li><a href="#font_colorcornflowerblue22_font_49" rel="nofollow"><font color="cornflowerblue">2.2 类的定义</font></a></li><li><a href="#font_colorcornflowerblue23_font_77" rel="nofollow"><font color="cornflowerblue">2.3 成员变量命令规则</font></a></li></ul> 
  </li><li><a href="#font_colorcornflowerbluefont_98" rel="nofollow"><font color="cornflowerblue">三、类的访问限定符及封装</font></a></li><li><ul><li><a href="#font_colorcornflowerblue31_font_100" rel="nofollow"><font color="cornflowerblue">3.1 访问限定符</font></a></li><li><ul><li><a href="#font_colorcornflowerblue311_classstructfont_130" rel="nofollow"><font color="cornflowerblue">3.1.1 class与struct区别</font></a></li></ul> 
   </li><li><a href="#font_colorcornflowerblue32_font_136" rel="nofollow"><font color="cornflowerblue">3.2 封装</font></a></li></ul> 
  </li><li><a href="#font_colorcornflowerbluefont_149" rel="nofollow"><font color="cornflowerblue">四、类的作用域(类域)</font></a></li><li><a href="#font_colorcornflowerbluefont_161" rel="nofollow"><font color="cornflowerblue">五、类的实例化</font></a></li><li><a href="#font_colorcornflowerbluefont_173" rel="nofollow"><font color="cornflowerblue">六、类对象模型</font></a></li><li><ul><li><a href="#font_colorcornflowerblue61_font_175" rel="nofollow"><font color="cornflowerblue">6.1 计算类对象的大小</font></a></li><li><a href="#font_colorcornflowerblue62___font_192" rel="nofollow"><font color="cornflowerblue">6.2 类对象的存储方式猜测 </font></a></li></ul> 
  </li><li><a href="#font_colorcornflowerbluethisfont_225" rel="nofollow"><font color="cornflowerblue">七、this指针</font></a></li><li><ul><li><a href="#font_colorcornflowerblue71_thisfont_227" rel="nofollow"><font color="cornflowerblue">7.1 this指针的引入</font></a></li><li><a href="#font_colorcornflowerblue72_thisfont_266" rel="nofollow"><font color="cornflowerblue">7.2 this指针的特性</font></a></li></ul> 
  </li><li><a href="#font_colorcornflowerbluefont_275" rel="nofollow"><font color="cornflowerblue">八、面试题</font></a></li></ul> 
</div> 
<p></p> 
<h2><a id="font_colorcornflowerbluefont_21"></a><font color="cornflowerblue">一、面向过程与面向对象初步认识</font></h2> 
<ul><li><strong>C语言是面向过程的，关注的是过程</strong>，分析出求解问题的步骤，通过函数调用逐步解决问题</li><li><strong>C++是基于面向对象的，关注的是对象</strong>，将一件事情拆分成不同的对象，依靠对象之间的交互完成<br> <img src="https://images2.imgbox.com/c3/cb/ldqSRNGr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2f/b6/umyXilqu_o.png" alt="在这里插入图片描述"></li></ul> 
<h2><a id="font_colorcornflowerbluefont_29"></a><font color="cornflowerblue">二、类的引入</font></h2> 
<h3><a id="font_colorcornflowerblue21_font_31"></a><font color="cornflowerblue">2.1 定义概念</font></h3> 
<p>定义是编程中的一项基础操作，涉及到为特定数据分配到一个名称和存储位置。<strong>不能通过是否赋值去判断是否存在定义，而是通过是否为其开辟空间</strong>。</p> 
<p>C语言结构体中只能定义变量<code>struct S s1 ={"Alice", c}</code>； <strong>在C++中结构体内不仅可以定义变量，也可也定义函数</strong>。现在以C++方式实现 ，<code>struct</code>可以定义变量及其函数，但是更喜欢使用<code>class</code>代替<code>struct</code>(类替代结构体)</p> 
<pre><code class="prism language-cpp"><span class="token keyword">struct</span> <span class="token class-name">Stack</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span>size_tt capacity<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
		<span class="token comment">//一系列操作</span>
    <span class="token punctuation">}</span>
    new_capacity<span class="token operator">=</span>capacity<span class="token punctuation">;</span>
    size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="font_colorcornflowerblue22_font_49"></a><font color="cornflowerblue">2.2 类的定义</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">className</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//类体:一般由成员函数和成员变量组成</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//同结构体一般，需要添加分号</span>

</code></pre> 
<p><code>class</code>为定义类的关键字，<code>ClassName</code>为类的名字，<code>{}</code>中为类的主体，注意类定义结束时后面分号不能省略。</p> 
<p>类体中内容称为类的成员，其中类的成员:<strong>1.类中的变量称为类的属性或成员变量2.类中的函称为类的方法或者成员函数</strong></p> 
<p><strong>类的两种定义方式</strong>:</p> 
<ol><li>声明和定义全部放在类体中，需注意：<strong>成员函数如果在类中定义，编译器可能会将其当成<font color="cornflowerblue">内联函数</font>处理</strong>。</li></ol> 
<p><img src="https://images2.imgbox.com/c1/af/nwoQwiPj_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>类声明放在.h文件中，成员函数定义放在<code>.cpp</code>文件中，注意：<strong>成员函数名前需要加类名::</strong></li></ol> 
<p><img src="https://images2.imgbox.com/a3/b4/uaEmfZVg_o.png" alt="在这里插入图片描述"></p> 
<p><strong>一般情况下，更加期望采用第二种方式</strong>。为了方便演示将采用第一种，大家在后序工作中尽量使用第二种方式，体现了面对对象编程的封装特性，提高代码的可维护性。</p> 
<h3><a id="font_colorcornflowerblue23_font_77"></a><font color="cornflowerblue">2.3 成员变量命令规则</font></h3> 
<p>由于在使用类过程中，难免会遇到成员变量与函数参数名称相同导致混淆。<strong>比如:这里如何去区分year属于成员变量还是函数参数呢</strong>？</p> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
         year <span class="token operator">=</span> year<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> year<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>对此我们需要通过一些方式去区分，这里建议成员变量前面加个<code>_</code>。<strong>当然其他方式也是可以的，主要看公司要求统一</strong></p> 
<blockquote> 
 <p>_year = year 这样子就很容易区分啦</p> 
</blockquote> 
<h2><a id="font_colorcornflowerbluefont_98"></a><font color="cornflowerblue">三、类的访问限定符及封装</font></h2> 
<h3><a id="font_colorcornflowerblue31_font_100"></a><font color="cornflowerblue">3.1 访问限定符</font></h3> 
<p><strong>C++实现封装的方式</strong>：用类将<strong>对象的属性与方法结合在一块</strong>，让对象更加完善，<strong>通过访问权限选择性的将其接口提供给外部的用户使用</strong></p> 
<p><img src="https://images2.imgbox.com/f4/ae/pag5Cp6J_o.png" alt="在这里插入图片描述"></p> 
<p>【<strong>访问限定符</strong>】:</p> 
<ol><li>public修饰成员可以在类外直接被访问(权限公开)</li><li>protected和private修饰成员在类外不能直接被访问</li><li>protected和private在现阶段作用相同的，在继承章节会有区分</li><li>访问权限作用域是从访问限定符出现位置到下一个访问限定符出现为止，如果没有出现新的访问限定符，作用域到<code>}</code>，即类结束。</li><li>class的默认访问权限为private，<code>struct</code>的默认访问权限为public(由于<code>struct</code>需要兼容C)</li></ol> 
<blockquote> 
 <p>访问限定符只在编译时期有效,当数据映射到内存后,没有任何访问限定符的区别</p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">int</span> _year <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="font_colorcornflowerblue311_classstructfont_130"></a><font color="cornflowerblue">3.1.1 class与struct区别</font></h4> 
<p>由于C++兼容C，在C++中<code>struct</code>可以当成结构体使用，另外<code>struct</code>同<code>class</code>可以定义类。通过访问限定符从中我们得出了<code>class</code>与<code>struct</code>区别在于默认权限不同。</p> 
<p>区别是<code>struct</code>定义的类默认访问权限是<code>public</code>，<code>class</code>定义的类默认访问权限是<code>private</code>。除此之外在继承和模板参数列表位置上，<code>struct</code>和<code>class</code>也有区别。</p> 
<h3><a id="font_colorcornflowerblue32_font_136"></a><font color="cornflowerblue">3.2 封装</font></h3> 
<p>【<strong>面试题</strong>】:面向对象的三大特性：封装、继承、多态</p> 
<p><strong>封装</strong>：<strong>将数据和操作数据方法进行有机结合，隐藏对象的属性和实现细节，仅对外公开接口来和对象进行交互</strong>。封装本质上是一种管理，让用户更方便使用类。比如对于电脑这样子一个复杂的设备。</p> 
<p><img src="https://images2.imgbox.com/e1/2d/GeJElIRx_o.png" alt="在这里插入图片描述"></p> 
<p>对于计算机使用者而言，不用关心内部核心部件，比如主板上线路是如何布局的，CPU内部是如何设计的等，用户只需要知道，怎么开机、怎么通过键盘和鼠标与计算机进行交互即可。因此计算机厂商在出厂时，在外部套上壳子，将内部实现细节隐藏起来，仅仅对外提供开关机、鼠标以及键盘插孔等，让用户可以与计算机进行交互即可</p> 
<p><strong>在C++语言中实现封装，可以通过类将数据以及操作数据的方法进行有机结合，通过访问权限来隐藏对象内部实现细节，控制哪些方法可以在类外部直接被使用。</strong></p> 
<h2><a id="font_colorcornflowerbluefont_149"></a><font color="cornflowerblue">四、类的作用域(类域)</font></h2> 
<p>类定义了新的作用域，名为类域。同命名空间类般能解决命名冲突。类的所有成员都在类的作用域中。在类体外定义成员时，需要使用 <code>::</code>作用域操作符指明成员属于哪个类域进行优先查找。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//这里PrintPersonInfo函数属于Person类域</span>
<span class="token keyword">void</span> <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span> <span class="token function">PrintPersonInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout<span class="token operator">&lt;&lt;</span>_name<span class="token operator">&lt;&lt;</span>_sex<span class="token operator">&lt;&lt;</span>_age<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="font_colorcornflowerbluefont_161"></a><font color="cornflowerblue">五、类的实例化</font></h2> 
<p>类是对对象进行描述，虽然限定了类有那些成员，但是没有实际分配空间。<strong>使类类型进行创建对象过称为类的实例化，如果出现没有对类进行实例化操作，而私自调用类中成员变量会报错</strong>，如:<code>Person._age = 10</code>。并且其中一个类可以实例化出多个对象，并且占用实际的物理空间用于存储成员变量。</p> 
<p>打个比方:类实例化出对象就像现实中使用建筑设计图建造出房子，类就像设计图。</p> 
<p><img src="https://images2.imgbox.com/ab/60/r625uudV_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/2c/9a/MgEpKjo9_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="font_colorcornflowerbluefont_173"></a><font color="cornflowerblue">六、类对象模型</font></h2> 
<h3><a id="font_colorcornflowerblue61_font_175"></a><font color="cornflowerblue">6.1 计算类对象的大小</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">PrintA</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>_a<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">char</span> _a<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>【<strong>问题</strong>】：类中既可以有成员变量，又可以有成员函数，那么一个类的对象中包含了什么？如何计算一个类的大小？</p> 
<h3><a id="font_colorcornflowerblue62___font_192"></a><font color="cornflowerblue">6.2 类对象的存储方式猜测 </font></h3> 
<ol><li><strong>对象中包含类的各个成员</strong></li></ol> 
<p><img src="https://images2.imgbox.com/ef/62/0k9Lgygg_o.png" alt="在这里插入图片描述"></p> 
<p>【<strong>缺陷</strong>】：每个对象的成员变量不同，但是调用同一份函数。若当一个类创建多个对象时，<strong>每个对象中都会保存一份代码，相同代码保存多次，浪费空间</strong></p> 
<ol start="2"><li><strong>代码只保存一份，在对象中保存存放代码的地址</strong></li></ol> 
<p><img src="https://images2.imgbox.com/ca/b0/tQ9qRAUI_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li><strong>只保存成员变量，成员函数存放在公共的代码段</strong></li></ol> 
<p><img src="https://images2.imgbox.com/06/0a/rCVQwmUF_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e0/27/byGC1R0y_o.png" alt="在这里插入图片描述"></p> 
<p>面对以上三种，对于类对于对象的存储设计的猜测，可以通过多组测试类中对象的大小。</p> 
<p><img src="https://images2.imgbox.com/09/09/R11KwvvK_o.png" alt="在这里插入图片描述"></p> 
<p><strong>结论</strong>:一个类的大小，实际就是该类中<code>成员变量</code>之和(涉及内存对齐)。这里采用第三种存储内存的设计。不将成员函数算入类内存中，而是<strong>将类成员函数存储在公共代码区</strong></p> 
<blockquote> 
 <p>空类比较特殊，编译器给空类一个字节来唯一标识这个类的对象，表示这个对象存在过，可能有成员函数。</p> 
</blockquote> 
<h2><a id="font_colorcornflowerbluethisfont_225"></a><font color="cornflowerblue">七、this指针</font></h2> 
<h3><a id="font_colorcornflowerblue71_thisfont_227"></a><font color="cornflowerblue">7.1 this指针的引入</font></h3> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Date</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_year <span class="token operator">=</span> year<span class="token punctuation">;</span>
		_month <span class="token operator">=</span> month<span class="token punctuation">;</span>
		_day <span class="token operator">=</span> day<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> _year <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _month <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span> <span class="token operator">&lt;&lt;</span> _day <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> _year<span class="token punctuation">;</span> <span class="token comment">// 年</span>
	<span class="token keyword">int</span> _month<span class="token punctuation">;</span> <span class="token comment">// 月</span>
	<span class="token keyword">int</span> _day<span class="token punctuation">;</span> <span class="token comment">// 日</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Date d1<span class="token punctuation">,</span> d2<span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d1<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	d2<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>面对上面代码，我们思考个问题:Date类中有<code>Init</code>与<code>Print</code>两个成员函数，<strong>对于函数体没有关于不同对象的区分，当不同对象调用函数时，该函数如何知道应该设置或打印<code>d1</code>对象，而不是<code>d2</code>对象呢？</strong></p> 
<p>C++中通过引入this指针解决该问题，即：C++编译器给<strong>每个非静态的成员函数</strong>增加了一个隐藏的指针参数，<strong>让该指针指向当前对象</strong>(函数运行时调用该函数的对象)，在函数体中所有<strong>成员变量</strong>的操作，都是通过该指针去访问。只不过所有的操作对用户是透明的，即用户不需要来传递，编译器自动完成。</p> 
<p><img src="https://images2.imgbox.com/ca/be/F23H2MJf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="font_colorcornflowerblue72_thisfont_266"></a><font color="cornflowerblue">7.2 this指针的特性</font></h3> 
<ol><li><code>this</code>指针的类型：类类型<code>*const</code> ，既成员函数中，不能给<code>this</code>赋值</li><li><code>this</code>指针不能显示在实参和形参的位置,只能在成员函数的内部使用</li><li><code>this</code>指针本质上是成员函数的形参，当对象调用成员函数时，将对象地址作为实参传递给<code>this</code>形参，所以对象中不存储<code>this</code>指针</li><li><code>this</code>指针是成员函数第一个隐含的指针形参，将对象的地址作为实参传递，对此函数的参数个数为<code>n+1</code>个，一般情况由编译器通过<code>exc</code>寄存器，不需要用户传递</li></ol> 
<p><img src="https://images2.imgbox.com/60/89/TkMTnhhN_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="font_colorcornflowerbluefont_275"></a><font color="cornflowerblue">八、面试题</font></h2> 
<p>1.<strong>结构体如何对齐</strong>？</p> 
<p>在结构体中，成员的内存对齐是由编译器决定的，通常会按照平台和编译器的规则进行对齐</p> 
<p><strong>2.为什么内存对齐</strong></p> 
<p>内存对齐是为了提高内存访问效率和系统性能的。当数据结构按照特定的字节边界对齐时，处理器可以更有效地读取和写入内存，减少了内存访问的次数和时间。这样可以提高数据读取速度，减少内存碎片化，并且可以避免一些硬件平台上的异常行为。</p> 
<p>外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传</p> 
<p><strong>3.如何让结构体按照指定的对齐参数进行对齐？能否按照3、4、即任意字节对齐？</strong></p> 
<p>C语言中，可以使用<code>#pragma pack</code>指令：</p> 
<pre><code class="prism language-cpp"><span class="token comment">//这里n是指定的对齐参数，可以是任意字节，比如3或4</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression"><span class="token function">pack</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></span></span>
<span class="token keyword">struct</span> <span class="token class-name">YourStruct</span> <span class="token punctuation">{<!-- --></span>    <span class="token comment">// 结构体成员 };</span>
</code></pre> 
<p><strong>4.什么是大小端</strong></p> 
<p>大小端（<code>Endian</code>）是指在存储多字节数据时，字节的排列顺序。</p> 
<ul><li><strong>大端字节序</strong>（<code>Big-endian</code>）： 高位字节存储在低地址，低位字节存储在高地址。</li><li><strong>小端字节序</strong>（<code>Little-endian</code>）： 低位字节存储在低地址，高位字节存储在高地址。</li></ul> 
<p><strong>5.如何测试某台机器是大端还是小端</strong></p> 
<p>程序创建一个整数变量（<code>num</code>），然后通过将其地址强制转换为字符指针，检查存储在该地址的第一个字节的值，从而确定字节序。</p> 
<p><strong>6.没有遇到过要考虑大小端的场景</strong></p> 
<ol><li><strong>数据序列化和反序列化</strong>： 在网络通信、文件读写等情境中，需要确保数据在不同系统之间正确地序列化和反序列化。</li><li><strong>硬件寄存器访问</strong>： 与硬件直接交互时，需要按照硬件的大小端规则进行数据存取。</li><li><strong>跨平台开发</strong>： 在开发跨平台应用时，需要谨慎处理大小端问题，以确保在不同系统上的一致性。</li></ol> 
<p>了解大小端是确保不同系统之间数据正确传递和解释的关键因素。</p> 
<p><strong>7.this指针可以为空吗？</strong></p> 
<p><code>this</code>指针指向调用成员函数的对象，因此在对象存在时，<code>this</code>指针不会为空。</p> 
<p><strong>在C++11中，可以在空对象（即没有分配内存的对象，匿名对象）上调用成员函数，但这并不意味着<code>this</code>指针是<code>NULL</code></strong>。相反，编译器会将空对象的地址传递给<code>this</code>指针，但是在成员函数内部要特别小心处理这种情况，以避免潜在的未定义行为。</p> 
<p><strong>8.this指针存在哪里</strong></p> 
<p>虽然<code>this</code>被<code>const</code>修饰，但是不存储在常量区。C++中<code>cosnt</code>修饰变量本身不存储在常量区，而是在栈上。<code>this</code>作为一个形参，有些编译可能用寄存器存储。可能频繁的使用<code>this</code>不如放在寄存器上。</p> 
<p><strong>9.关于两道题目</strong></p> 
<pre><code class="prism language-CPP">// 1.下面程序编译运行结果是？ A、编译报错 B、运行崩溃 C、正常运行
class A
{
public:
    void Print()
    {
        cout &lt;&lt; "Print()" &lt;&lt; endl;
    }
    private:
    int _a;
};
int main()
{
    A* p = nullptr;
    p-&gt;Print();
    return 0;
}
// 1.下面程序编译运行结果是？ A、编译报错 B、运行崩溃 C、正常运行
class A
{
    public:
    void PrintA()
    {
        cout&lt;&lt;_a&lt;&lt;endl;
    }
    private:
    int _a;
};
int main()
{
    A* p = nullptr;
    p-&gt;PrintA();
    return 0;
}
</code></pre> 
<p><strong>过程解析：<font color="cornflowerblue">C++标准允许对空指针的成员函数进行调用</font>，只要成员函数没有访问成员数据（如 <code>_a</code>），这不会导致崩溃</strong></p> 
<hr> 
<p><strong><font color="cornflowerblue">以上就是本篇文章的所有内容，在此感谢大家的观看！这里是店小二呀C++笔记，希望对你在学习C++语言旅途中有所帮助！</font></strong><br> <img src="https://images2.imgbox.com/d6/1a/khsDcgtu_o.gif" alt="请添加图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3555138822b2add8c8bb806d4f1ad01f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">代码规范 —— 数据库规范</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9bde9600e0587c224a0e21e15d10e710/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android沉浸式状态栏库ImmersionBar使用教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>