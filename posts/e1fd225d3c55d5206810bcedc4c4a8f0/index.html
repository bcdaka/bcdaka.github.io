<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】引用之带你“消除”C语言版数据结构教材的一些困惑（虽然是C&#43;&#43;的内容，但是强烈建议正在学习数据结构的同学点进来看看） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e1fd225d3c55d5206810bcedc4c4a8f0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】引用之带你“消除”C语言版数据结构教材的一些困惑（虽然是C&#43;&#43;的内容，但是强烈建议正在学习数据结构的同学点进来看看）">
  <meta property="og:description" content="👀樊梓慕：个人主页
🎥个人专栏：《C语言》《数据结构》《蓝桥杯试题》《LeetCode刷题笔记》《实训项目》《C&#43;&#43;》
🌝每一个不曾起舞的日子，都是对生命的辜负
目录
前言
引用的概念
引用的特性
引用的使用场景
引用和指针的区别
C语言版数据结构教材的解惑
前言 不知道你有没有这样的经历，在学习数据结构的时候，教材中有一个地方总是搞不明白，如下图：
我记得当时我问过老师：《这是引用，你只要记得只要这个值被改变了，就加上它&amp;》 我也没有继续探索，导致我数据结构阶段虽然考试成绩还行，但是还是😭蒙蒙的状态😭
直到今天，我学习了引用，我才知道为什么要这么用。
🌐🌐🌐希望这篇文章可以让遇到同样困惑的你得到解答🌐🌐🌐
🔯那就让我们赶紧进入引用的学习吧🔯
欢迎大家📂收藏📂以便未来做题时可以快速找到思路，巧妙的方法可以事半功倍。
=========================================================================
GITEE相关代码：🌟fanfei_c的仓库🌟
=========================================================================
1.引用的概念 引用是给已存在变量取了一个别名。
编译器不会为引用变量开辟内存空间，它和它引用的变量共用同一块内存空间。
比如：孙悟空，别名齐天大圣、美猴王等等，这些别名都指的是孙悟空。
用法：
void TestRef() { int a = 10; int&amp; ra = a;//&lt;====定义引用类型 printf(&#34;%p\n&#34;, &amp;a); printf(&#34;%p\n&#34;, &amp;ra); } 我们说引用与它引用的变量共用同一快内存空间，那么他们的地址就是相同的，如图：
注意：引用类型必须和引用实体时同种类型的。 2.引用的特性 引用在定义时必须初始化一个变量可以有多个引用引用一旦引用一个实体，再不能引用其他实体（引用不能改变指向） 了解了以上三条特性，请思考：引用能够替代指针么？
在C&#43;&#43;中，引用不能替代指针，因为引用不能改变指向，而指针可以。
在JAVA中，引用可以改变指向。
有关常引用：
void TestConstRef() { const int a = 10; //int&amp; ra = a; // 该语句编译时会出错，a为常量 const int&amp; ra = a; // int&amp; b = 10; // 该语句编译时会出错，b为常量 const int&amp; b = 10; double d = 12.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-10-20T12:00:00+08:00">
    <meta property="article:modified_time" content="2023-10-20T12:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】引用之带你“消除”C语言版数据结构教材的一些困惑（虽然是C&#43;&#43;的内容，但是强烈建议正在学习数据结构的同学点进来看看）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" height="151" src="https://images2.imgbox.com/bd/3f/ZBaPAa1n_o.png" width="343"></p> 
<p style="text-align:center;"><strong><span style="color:#98c091;">👀樊梓慕：</span><a href="https://blog.csdn.net/2301_77112634?type=blog" title="个人主页">个人主页</a></strong></p> 
<p style="text-align:center;"><strong> 🎥<span style="color:#956fe7;">个人专栏：</span><a href="http://t.csdn.cn/e7GFn" rel="nofollow" title="《C语言》">《C语言》</a><a href="http://t.csdn.cn/jUErT" rel="nofollow" title="《数据结构》">《数据结构》</a><a href="http://t.csdn.cn/q3iyZ" rel="nofollow" title="《蓝桥杯试题》">《蓝桥杯试题》</a><a href="http://t.csdn.cn/IUyeH" rel="nofollow" title="《LeetCode刷题笔记》">《LeetCode刷题笔记》</a><a href="http://t.csdn.cn/uK6me" rel="nofollow" title="《实训项目》">《实训项目》</a><a href="http://t.csdnimg.cn/uOlnu" rel="nofollow" title="《C++》">《C++》</a></strong></p> 
<p style="text-align:center;"><strong>🌝<span style="color:#faa572;">每一个不曾起舞的日子，都是对生命的辜负</span></strong></p> 
<hr> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E5%BC%95%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">引用的概念</a></p> 
<p id="%E5%BC%95%E7%94%A8%E7%9A%84%E7%89%B9%E6%80%A7-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E7%9A%84%E7%89%B9%E6%80%A7" rel="nofollow">引用的特性</a></p> 
<p id="%E5%BC%95%E7%94%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">引用的使用场景</a></p> 
<p id="%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E5%8C%BA%E5%88%AB-toc" style="margin-left:0px;"><a href="#%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E5%8C%BA%E5%88%AB" rel="nofollow">引用和指针的区别</a></p> 
<p id="C%E8%AF%AD%E8%A8%80%E7%89%88%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%95%99%E6%9D%90%E7%9A%84%E8%A7%A3%E6%83%91-toc" style="margin-left:0px;"><a href="#C%E8%AF%AD%E8%A8%80%E7%89%88%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%95%99%E6%9D%90%E7%9A%84%E8%A7%A3%E6%83%91" rel="nofollow">C语言版数据结构教材的解惑</a></p> 
<hr id="hr-toc"> 
<h2>前言</h2> 
<p>不知道你有没有这样的经历，在学习数据结构的时候，教材中有一个地方总是搞不明白，如下图：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d5/f4/OUyIcjJV_o.png"></p> 
<ul><li>我记得当时我问过老师：《这是引用，你只要记得只要这个值被改变了，就加上它&amp;》</li></ul> 
<p>我也没有继续探索，导致我数据结构阶段虽然考试成绩还行，但是还是😭<span style="color:#1c7331;"><strong>蒙蒙的状态</strong></span>😭</p> 
<blockquote> 
 <p><strong>直到今天，我学习了引用，我才知道<span style="color:#b95514;">为什么要这么用</span>。</strong></p> 
</blockquote> 
<hr> 
<p style="text-align:center;">🌐🌐🌐<span style="color:#6eaad7;"><strong>希望这篇文章可以让遇到同样困惑的你得到解答</strong></span>🌐🌐🌐</p> 
<p style="text-align:center;">🔯<span style="color:#9c8ec1;"><strong>那就让我们赶紧进入引用的学习吧</strong></span>🔯</p> 
<hr> 
<p><span style="color:#ed7976;"><strong>欢迎大家📂</strong></span><span style="color:#be191c;"><strong>收藏</strong></span><span style="color:#ed7976;"><strong>📂以便未来做题时可以快速找到思路，巧妙的方法可以事半功倍。</strong></span></p> 
<p><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p> 
<p><span style="color:#9c8ec1;"><strong>GITEE相关代码：</strong></span><span style="color:#0d0016;"><strong>🌟<a class="link-info" href="https://gitee.com/fanfei_c" rel="nofollow" title="fanfei_c的仓库">fanfei_c的仓库</a>🌟</strong></span></p> 
<p><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p> 
<hr> 
<h2>1.引用的概念</h2> 
<p><span style="color:#1c7331;"><strong>引用</strong></span>是给已存在变量取了一个<span style="color:#1c7331;"><strong>别名。</strong></span></p> 
<blockquote> 
 <p>编译器不会为引用变量开辟内存空间，<span style="color:#1c7892;"><strong>它和它引用的变量共用同一块内存空间</strong></span>。</p> 
</blockquote> 
<p> 比如：孙悟空，别名齐天大圣、美猴王等等，这些别名都指的是孙悟空。</p> 
<p>用法：</p> 
<pre><code class="language-cpp">void TestRef()
{
	int a = 10;
	int&amp; ra = a;//&lt;====定义引用类型
	printf("%p\n", &amp;a);
	printf("%p\n", &amp;ra);
}</code></pre> 
<blockquote> 
 <p>我们说引用与它引用的变量共用同一快内存空间，那么他们的地址就是相同的，如图：</p> 
 <p class="img-center"><img alt="" height="200" src="https://images2.imgbox.com/6b/4d/vtmXJSi3_o.png" width="600"></p> 
</blockquote> 
<p><span style="color:#be191c;"><strong>注意：</strong></span><strong>引用类型必须和引用实体时同种类型的。 </strong></p> 
<hr> 
<h2 id="%E5%BC%95%E7%94%A8%E7%9A%84%E7%89%B9%E6%80%A7">2.引用的特性</h2> 
<ul><li>引用在定义时必须初始化</li><li>一个变量可以有多个引用</li><li>引用一旦引用一个实体，再不能引用其他实体（引用不能改变指向）</li></ul> 
<blockquote> 
 <p>了解了以上三条特性，请思考：<strong><span style="color:#be191c;">引用能够替代指针么？</span></strong></p> 
</blockquote> 
<p>在C++中，引用不能替代指针，因为引用不能改变指向，而指针可以。</p> 
<p>在JAVA中，引用可以改变指向。</p> 
<p><strong>有关常引用：</strong></p> 
<pre><code class="language-cpp">void TestConstRef()
{
	const int a = 10;
	//int&amp; ra = a; // 该语句编译时会出错，a为常量
	const int&amp; ra = a;
	// int&amp; b = 10; // 该语句编译时会出错，b为常量
	const int&amp; b = 10;
	double d = 12.34;
	//int&amp; rd = d; // 该语句编译时会出错，类型不同
	const int&amp; rd = d;
}</code></pre> 
<hr> 
<p style="text-align:center;">👀<span style="color:#1c7892;"><strong>如果上面的例子你有疑问，下面是疑惑解答</strong></span>👀</p> 
<p>1-2、4行：我们知道常变量是不可修改的，既然常变量不可修改，我们将常变量取别名就失去了引用的意义和价值。</p> 
<p>3、5行：这里ra为常引用，既然a是常变量，那么我们将常引用与之匹配不就刚好可以了么。</p> 
<p>7行：略。</p> 
<p><span style="color:#be191c;"><strong>8行：</strong></span>我们知道将双精度浮点型赋值给整型会发生截断，但<span style="color:#1c7331;"><strong>类型转换时，底层不是直接将自身的类型改变，而是会生成一个临时变量</strong></span>，此时这个临时变量具有常属性，所以此时常引用rd就可以指向d了。</p> 
<hr> 
<h2 id="%E5%BC%95%E7%94%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">3.引用的使用场景</h2> 
<p><strong>1.做参数</strong></p> 
<pre><code class="language-cpp">void Swap(int&amp; left, int&amp; right)
{
	int temp = left;
	left = right;
	right = temp;
}

int main()
{
	int a, b;
	Swap(a, b);
	return 0;
}</code></pre> 
<p>这也是数据结构教材中的用法。</p> 
<hr> 
<p><strong>2.做返回值 </strong></p> 
<pre><code class="language-cpp">int&amp; Count()
{
	static int n = 0;
	n++;
	// ...
	return n;
}</code></pre> 
<p>这里我们着重讨论一下做返回值的用法：</p> 
<p>细心的同学应该发下了这里<span style="color:#1c7331;"><strong>n定义为静态变量</strong></span>了。</p> 
<hr> 
<p style="text-align:center;">🚀<span style="color:#1c7892;"><strong>请思考下为什么会这样做</strong></span>🚀</p> 
<hr> 
<p> 我们观察下这段代码，这里返回的是n的引用。</p> 
<p><span style="color:#be191c;"><strong>假设不加static修饰n：</strong></span></p> 
<ul><li>我们知道引用就相当于它本身，地址也是同一块空间。</li><li>当函数栈帧结束，出了作用域，返回对象n就销毁了，那返回n的引用就相当于返回的是已被销毁的那块地址的值，这个值是不确定的，因为已经还给操作系统了。</li><li>所以这里我们加上static修饰，使n存储在静态区，栈帧结束也不会被销毁，此时返回n的引用也就没有问题了。</li></ul> 
<hr> 
<p><span style="color:#1c7892;"><strong>另外：引用做返回值，可以修改引用对象。</strong></span></p> 
<pre><code class="language-cpp">int&amp; Slat(SL* ps, int pos)
{
	return ps-&gt;a[pos];
}

int main()
{
	SL s;
	//...
	Slat(&amp;s, 3) = 10;

	for (int i = 0; i &lt; s.size; i++)
	{
		Slat(&amp;s, i)++;
	}
	return 0;
}</code></pre> 
<p>如果没有引用，就会报错。</p> 
<p>因为如果没引用，Slat(&amp;s,3)或Slat(&amp;s,i)返回值是常数，常量为右值不可修改。 </p> 
<hr> 
<p><strong>3.我们再来看另一个问题</strong></p> 
<hr> 
<p style="text-align:center;">🚀<span style="color:#1c7892;"><strong>下面的代码输出什么结果，为什么</strong></span>🚀</p> 
<pre><code class="language-cpp">int&amp; Add(int a, int b)
{
	int c = a + b;
	return c;
}

int main()
{
	int&amp; ret = Add(1, 2);
	Add(3, 4);
	cout &lt;&lt; "Add(1, 2) is :" &lt;&lt; ret &lt;&lt; endl;
	return 0;
}</code></pre> 
<hr> 
<p>先看结果：</p> 
<p class="img-center"><img alt="" height="203" src="https://images2.imgbox.com/96/1c/wyR1hcEd_o.png" width="700"></p> 
<p> 这段代码启示我们<span style="color:#be191c;"><strong>空间是重复利用的</strong></span>。</p> 
<p>函数栈帧创建又销毁，又创建又销毁，ret始终都指向那同一个位置，所以最后值一定是最后改变的7而不是3。</p> 
<blockquote> 
 <p><strong>总结下</strong>：如果函数返回时，出了函数作用域，如果返回对象还在(还没还给系统)，则可以使用引用返回，如果已经还给系统了，则必须使用传值返回。</p> 
</blockquote> 
<hr> 
<h2>4.传值、传引用效率比较</h2> 
<p>以值作为参数或者返回值类型，在传参和返回期间，函数不会直接传递实参或者将变量本身直接返回，<span style="color:#1c7892;"><strong>而是传递实参或者返回变量的一份临时的拷贝</strong></span>，因此用值作为参数或者返回值类型，效率是非常低下的，尤其是<span style="color:#1c7892;"><strong>当参数或者返回值类型非常大时，效率就更低</strong></span>。</p> 
<pre><code class="language-cpp">#include &lt;time.h&gt;
struct A { int a[10000]; };
void TestFunc1(A a) {}
void TestFunc2(A&amp; a) {}
void TestRefAndValue()
{
	A a;
	// 以值作为函数参数
	size_t begin1 = clock();
	for (size_t i = 0; i &lt; 10000; ++i)
		TestFunc1(a);
	size_t end1 = clock();
	// 以引用作为函数参数
	size_t begin2 = clock();
	for (size_t i = 0; i &lt; 10000; ++i)
		TestFunc2(a);
	size_t end2 = clock();
	// 分别计算两个函数运行结束后的时间
	cout &lt;&lt; "TestFunc1(A)-time:" &lt;&lt; end1 - begin1 &lt;&lt; endl;
	cout &lt;&lt; "TestFunc2(A&amp;)-time:" &lt;&lt; end2 - begin2 &lt;&lt; endl;
}</code></pre> 
<hr> 
<p>运行结果： </p> 
<p class="img-center"><img alt="" height="205" src="https://images2.imgbox.com/cc/2c/M8Z7ODf5_o.png" width="1133"></p> 
<hr> 
<h2 id="%E5%BC%95%E7%94%A8%E5%92%8C%E6%8C%87%E9%92%88%E7%9A%84%E5%8C%BA%E5%88%AB">5.引用和指针的区别</h2> 
<p>在语法概念上引用就是一个别名，没有独立空间，<span style="color:#1c7892;"><strong>和其引用实体共用同一块空间</strong></span>。</p> 
<pre><code class="language-cpp">int main()
{
	int a = 10;
	int&amp; ra = a;
	cout &lt;&lt; "&amp;a = " &lt;&lt; &amp;a &lt;&lt; endl;
	cout &lt;&lt; "&amp;ra = " &lt;&lt; &amp;ra &lt;&lt; endl;
	return 0;
}</code></pre> 
<hr> 
<p>运行结果：</p> 
<p><img alt="" height="214" src="https://images2.imgbox.com/89/c6/L4V3mNm4_o.png" width="1128"></p> 
<p>但实际上：<span style="color:#be191c;"><strong>在底层实现上实际是有空间的</strong></span>，因为引用是按照指针方式来实现的。 </p> 
<p>底层中没有引用概念，和指针一样都是汇编代码实现的。</p> 
<p>我们来看下引用和指针的汇编代码对比：</p> 
<p class="img-center"><img alt="" height="340" src="https://images2.imgbox.com/5d/2e/M4jMR0x7_o.png" width="953"></p> 
<hr> 
<p>总结下引用和指针的不同点：</p> 
<ol><li>引用概念上定义一个变量的别名，指针存储一个变量地址。</li><li>引用在定义时必须初始化，指针没有要求。</li><li>引用在初始化时引用一个实体后，就不能再引用其他实体，而指针可以在任何时候指向任何一个同类型实体。</li><li>没有NULL引用，但有NULL指针。</li><li>在sizeof中含义不同：引用结果为引用类型的大小，但指针始终是地址空间所占字节个数(32位平台下占4个字节)。</li><li>引用自加即引用的实体增加1，指针自加即指针向后偏移一个类型的大小。</li><li>有多级指针，但是没有多级引用。</li><li>访问实体方式不同，指针需要显式解引用，引用编译器自己处理。</li><li>引用比指针使用起来相对更安全，注意不是绝对安全 。</li></ol> 
<p style="text-align:center;"></p> 
<hr> 
<p style="text-align:center;">✅<span style="color:#98c091;"><strong>看到这里，你一定理解了数据结构教材上让你蒙蒙的&amp;符号了吧</strong></span>✅</p> 
<hr> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>=========================================================================</strong></span></p> 
<p style="text-align:center;"><span style="color:#956fe7;"><strong>如果你对该系列文章有兴趣的话，欢迎持续关注博主动态，博主会持续输出优质内容</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>🍎博主很需要大家的支持，你的支持是我创作的不竭动力🍎</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>🌟</strong></span><span style="color:#79c6cd;"><strong>~ 点赞收藏＋关注 ~</strong></span><span style="color:#0d0016;"><strong>🌟</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong>========================================================================= </strong></span><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/190c88ddff119f7dc22cf1d778cf6847/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL连接错误错误2003 - Can‘t connect to MySQL server on ‘‘(10060 “Unknown error“)处理方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7bd8ad1ee77b1db4ae1294c49e84b5ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【LeetCode力扣】86. 分隔链表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>