<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€wikiçŸ¥è¯†åº“ã€‘07.ç”¨æˆ·ç®¡ç†åç«¯SpringBootéƒ¨åˆ† - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7ffe014b6f567f4388fce663ce1e1ac2/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€wikiçŸ¥è¯†åº“ã€‘07.ç”¨æˆ·ç®¡ç†åç«¯SpringBootéƒ¨åˆ†">
  <meta property="og:description" content="ç›®å½•
ä¸€ã€ä»Šæ—¥ç›®æ ‡
äºŒã€ğŸˆSpringBootéƒ¨åˆ†ç±»çš„æ·»åŠ 
2.1 ä½¿ç”¨é€†å‘å·¥ç¨‹æ–°å¢Useræ¨¡å—
2.2 UserQueryParamæ·»åŠ 
2.3 UserSaveParamæ·»åŠ 
2.4 UserResetPasswordParamæ·»åŠ 
2.5 UserQueryVoæ·»åŠ 
2.6 SnowFlakeå·¥å…·ç±»
ä¸‰ã€ğŸš†åç«¯æ–°å¢æ¥å£Â 3.1 /user/listæ¥å£æ·»åŠ 
3.2 /user/saveæ¥å£æ·»åŠ 
3.3 /user/deleteæ¥å£æ·»åŠ 
3.4 /user/reset-passwordæ¥å£æ·»åŠ 
ä¸€ã€ä»Šæ—¥ç›®æ ‡ ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘æŠŠå‰ç«¯éƒ¨åˆ†çš„ä»£ç ç»™å¤§å®¶äº†ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥å®ç°ä¸Šä¸€ç¯‡æ–‡ç« æ²¡æœ‰å®Œæˆçš„æ¥å£ã€‚
äºŒã€ğŸˆSpringBootéƒ¨åˆ†ç±»çš„æ·»åŠ  2.1 ä½¿ç”¨é€†å‘å·¥ç¨‹æ–°å¢Useræ¨¡å— è¿™ä¸€å—çš„ä»£ç å’Œä¹‹å‰çš„ç›¸åŒï¼Œæˆ‘ä»¬æ‰¾åˆ°é€†å‘å·¥ç¨‹çš„å·¥å…·ç±»åï¼ŒæŠŠç±»çš„éƒ¨åˆ†æ”¹ä¸ºuserå³å¯ã€‚
2.2 UserQueryParamæ·»åŠ  è¿™ä¸ªç±»çœ‹åå­—ä¹ŸçŸ¥é“æ˜¯ç”¨æ¥ç”¨æˆ·æŸ¥è¯¢çš„ï¼Œè¦ç»§æ‰¿ä¹‹å‰çš„åˆ†é¡µç±»ã€‚
@Data public class UserQueryParam extends PageParam { private String loginName; } 2.3 UserSaveParamæ·»åŠ  è¿™ä¸ªç±»æ˜¯ç”¨æ¥ä½œä¸ºç”¨æˆ·æ–°å¢å‚æ•°æ¥æ”¶ç”¨çš„ã€‚è¿™ä¸ªç±»ä½œä¸ºç”¨æˆ·ä¿¡æ¯ä¿å­˜çš„å‚æ•°ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å¯¹äºå±æ€§çš„å€¼åšäº†ä¸€äº›é™åˆ¶ã€‚ç”¨æˆ·åã€æ˜µç§°å’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼ŒåŒæ—¶å¯†ç è¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼é™åˆ¶äº†å¯†ç ç”±æ•°å­—å’Œå­—æ¯ç»„æˆï¼Œå¹¶ä¸”é•¿åº¦åœ¨6-32ä½ï¼Œå¦‚æœä¸Šè¾¹æœ‰æ¡ä»¶ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºmessageä¸­çš„é”™è¯¯ã€‚
@Data public class UserSaveParam { private Long id; @NotNull(message = &#34;ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º&#34;) private String loginName; @NotNull(message = &#34;ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º&#34;) private String name; @NotNull(message = &#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-03T12:49:17+08:00">
    <meta property="article:modified_time" content="2024-08-03T12:49:17+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€wikiçŸ¥è¯†åº“ã€‘07.ç”¨æˆ·ç®¡ç†åç«¯SpringBootéƒ¨åˆ†</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="844" src="https://images2.imgbox.com/27/cd/25W3qBop_o.png" width="1200"></h2> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="%E4%B8%80%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87" rel="nofollow">ä¸€ã€ä»Šæ—¥ç›®æ ‡</a></p> 
<p id="%E4%BA%8C%E3%80%81%F0%9F%8E%88SpringBoot%E9%83%A8%E5%88%86%E7%B1%BB%E7%9A%84%E6%B7%BB%E5%8A%A0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%F0%9F%8E%88SpringBoot%E9%83%A8%E5%88%86%E7%B1%BB%E7%9A%84%E6%B7%BB%E5%8A%A0" rel="nofollow">äºŒã€ğŸˆSpringBootéƒ¨åˆ†ç±»çš„æ·»åŠ </a></p> 
<p id="2.1%20%E4%BD%BF%E7%94%A8%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E6%96%B0%E5%A2%9EUser%E6%A8%A1%E5%9D%97-toc" style="margin-left:40px;"><a href="#2.1%20%E4%BD%BF%E7%94%A8%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E6%96%B0%E5%A2%9EUser%E6%A8%A1%E5%9D%97" rel="nofollow">2.1 ä½¿ç”¨é€†å‘å·¥ç¨‹æ–°å¢Useræ¨¡å—</a></p> 
<p id="2.2%20UserQueryParam%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#2.2%20UserQueryParam%E6%B7%BB%E5%8A%A0" rel="nofollow">2.2 UserQueryParamæ·»åŠ </a></p> 
<p id="2.3%20UserSaveParam%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#2.3%20UserSaveParam%E6%B7%BB%E5%8A%A0" rel="nofollow">2.3 UserSaveParamæ·»åŠ </a></p> 
<p id="2.4%20UserResetPasswordParam%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#2.4%20UserResetPasswordParam%E6%B7%BB%E5%8A%A0" rel="nofollow">2.4 UserResetPasswordParamæ·»åŠ </a></p> 
<p id="2.5%20UserQueryVo%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#2.5%20UserQueryVo%E6%B7%BB%E5%8A%A0" rel="nofollow">2.5 UserQueryVoæ·»åŠ </a></p> 
<p id="2.6%20SnowFlake%E5%B7%A5%E5%85%B7%E7%B1%BB-toc" style="margin-left:40px;"><a href="#2.6%20SnowFlake%E5%B7%A5%E5%85%B7%E7%B1%BB" rel="nofollow">2.6 SnowFlakeå·¥å…·ç±»</a></p> 
<p id="%E4%B8%89%E3%80%81%F0%9F%9A%86%E5%90%8E%E7%AB%AF%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%F0%9F%9A%86%E5%90%8E%E7%AB%AF%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3%C2%A0" rel="nofollow">ä¸‰ã€ğŸš†åç«¯æ–°å¢æ¥å£Â </a></p> 
<p id="3.1%20%2Fuser%2Flist%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#3.1%20%2Fuser%2Flist%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0" rel="nofollow">3.1 /user/listæ¥å£æ·»åŠ </a></p> 
<p id="3.2%20%2Fuser%2Fsave%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#3.2%20%2Fuser%2Fsave%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0" rel="nofollow">3.2 /user/saveæ¥å£æ·»åŠ </a></p> 
<p id="3.3%20%2Fuser%2Fdelete%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#3.3%20%2Fuser%2Fdelete%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0" rel="nofollow">3.3 /user/deleteæ¥å£æ·»åŠ </a></p> 
<p id="3.4%20%2Fuser%2Freset-password%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0-toc" style="margin-left:40px;"><a href="#3.4%20%2Fuser%2Freset-password%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0" rel="nofollow">3.4 /user/reset-passwordæ¥å£æ·»åŠ </a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87">ä¸€ã€ä»Šæ—¥ç›®æ ‡</h2> 
<p>ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘æŠŠå‰ç«¯éƒ¨åˆ†çš„ä»£ç ç»™å¤§å®¶äº†ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥å®ç°ä¸Šä¸€ç¯‡æ–‡ç« æ²¡æœ‰å®Œæˆçš„æ¥å£ã€‚</p> 
<blockquote> 
 <h2 id="%E4%BA%8C%E3%80%81%F0%9F%8E%88SpringBoot%E9%83%A8%E5%88%86%E7%B1%BB%E7%9A%84%E6%B7%BB%E5%8A%A0">äºŒã€ğŸˆSpringBootéƒ¨åˆ†ç±»çš„æ·»åŠ </h2> 
 <h3 id="2.1%20%E4%BD%BF%E7%94%A8%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E6%96%B0%E5%A2%9EUser%E6%A8%A1%E5%9D%97">2.1 ä½¿ç”¨é€†å‘å·¥ç¨‹æ–°å¢Useræ¨¡å—</h3> 
 <p>è¿™ä¸€å—çš„ä»£ç å’Œä¹‹å‰çš„ç›¸åŒï¼Œæˆ‘ä»¬æ‰¾åˆ°é€†å‘å·¥ç¨‹çš„å·¥å…·ç±»åï¼ŒæŠŠç±»çš„éƒ¨åˆ†æ”¹ä¸ºuserå³å¯ã€‚</p> 
 <p><img alt="" height="308" src="https://images2.imgbox.com/62/9a/MOR474Yt_o.png" width="942"></p> 
 <h3 id="2.2%20UserQueryParam%E6%B7%BB%E5%8A%A0">2.2 UserQueryParamæ·»åŠ </h3> 
 <p>è¿™ä¸ªç±»çœ‹åå­—ä¹ŸçŸ¥é“æ˜¯ç”¨æ¥ç”¨æˆ·æŸ¥è¯¢çš„ï¼Œè¦ç»§æ‰¿ä¹‹å‰çš„åˆ†é¡µç±»ã€‚</p> 
 <pre><code class="language-java">@Data
public class UserQueryParam extends PageParam {
    private String loginName;
}
</code></pre> 
 <h3 id="2.3%20UserSaveParam%E6%B7%BB%E5%8A%A0">2.3 UserSaveParamæ·»åŠ </h3> 
 <p>è¿™ä¸ªç±»æ˜¯ç”¨æ¥ä½œä¸ºç”¨æˆ·æ–°å¢å‚æ•°æ¥æ”¶ç”¨çš„ã€‚è¿™ä¸ªç±»ä½œä¸ºç”¨æˆ·ä¿¡æ¯ä¿å­˜çš„å‚æ•°ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å¯¹äºå±æ€§çš„å€¼åšäº†ä¸€äº›é™åˆ¶ã€‚ç”¨æˆ·åã€æ˜µç§°å’Œå¯†ç ä¸èƒ½ä¸ºç©ºï¼ŒåŒæ—¶å¯†ç è¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼é™åˆ¶äº†å¯†ç ç”±æ•°å­—å’Œå­—æ¯ç»„æˆï¼Œå¹¶ä¸”é•¿åº¦åœ¨6-32ä½ï¼Œå¦‚æœä¸Šè¾¹æœ‰æ¡ä»¶ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºmessageä¸­çš„é”™è¯¯ã€‚</p> 
 <pre><code class="language-java">@Data
public class UserSaveParam {
    private Long id;

    @NotNull(message = "ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º")
    private String loginName;

    @NotNull(message = "ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º")
    private String name;

    @NotNull(message = "ã€å¯†ç ã€‘ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$", message = "ã€å¯†ç ã€‘è‡³å°‘åŒ…å« æ•°å­—å’Œè‹±æ–‡ï¼Œé•¿åº¦6-32")
    private String password;

}</code></pre> 
 <h3 id="2.4%20UserResetPasswordParam%E6%B7%BB%E5%8A%A0">2.4 UserResetPasswordParamæ·»åŠ </h3> 
 <p>è¿™ä¸ªç±»ç”¨äºé‡ç½®ç”¨æˆ·å¯†ç ï¼Œä¼ å…¥è´¦å·çš„idè¿˜æœ‰ç”¨æˆ·çš„æ–°å¯†ç ã€‚åŒæ ·ä¹Ÿåšäº†å¯†ç çš„å®‰å…¨æ€§æ ¡éªŒã€‚</p> 
 <pre><code class="language-java">@Data
public class UserResetPasswordParam {
    private Long id;

    @NotNull(message = "ã€å¯†ç ã€‘ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,32}$", message = "ã€å¯†ç ã€‘è‡³å°‘åŒ…å« æ•°å­—å’Œè‹±æ–‡ï¼Œé•¿åº¦6-32")
    private String password;
}
</code></pre> 
 <h3 id="2.5%20UserQueryVo%E6%B7%BB%E5%8A%A0">2.5 UserQueryVoæ·»åŠ </h3> 
 <p>è¿™ä¸ªç±»ä½œä¸ºç”¨æˆ·æŸ¥è¯¢ç»“æœè¿”å›ã€‚</p> 
 <pre><code class="language-java">@Data
@NoArgsConstructor
@AllArgsConstructor
public class UserQueryVo {
    private Long id;

    private String loginName;

    private String name;

    private String password;

}
</code></pre> 
 <h3 id="2.6%20SnowFlake%E5%B7%A5%E5%85%B7%E7%B1%BB">2.6 SnowFlakeå·¥å…·ç±»</h3> 
 <p>è¿™ä¸ªå·¥å…·ç±»çš„ä½œç”¨å°±æ˜¯ç”Ÿæˆä¸€ä¸ªä¸ä¼šé‡å¤çš„idå€¼ï¼Œæƒ³è¦äº†è§£å…·ä½“å†…å®¹çš„å°ä¼™ä¼´å¯ä»¥æœç´¢ä¸€ä¸‹é›ªèŠ±ç®—æ³•ã€‚ç°åœ¨æˆ‘å…ˆä¸è¿‡å¤šä»‹ç»ï¼Œå¯èƒ½ä¹‹åä¼šè¡¥ä¸Šè¿™ä¸€éƒ¨åˆ†ã€‚ç°åœ¨åªè¦è®°ä½è¿™ä¸ªç±»å¯ä»¥å¸®ä½ ç”Ÿæˆä¸€ä¸ªä¸ä¼šé‡å¤çš„idå€¼å°±å¯ä»¥äº†ã€‚</p> 
 <pre><code class="language-java">
/**
 * Twitterçš„åˆ†å¸ƒå¼è‡ªå¢IDé›ªèŠ±ç®—æ³•
 **/
@Component
public class SnowFlake {

    /**
     * èµ·å§‹çš„æ—¶é—´æˆ³
     */
    private final static long START_STMP = 1609459200000L; // 2021-01-01 00:00:00

    /**
     * æ¯ä¸€éƒ¨åˆ†å ç”¨çš„ä½æ•°
     */
    private final static long SEQUENCE_BIT = 12; //åºåˆ—å·å ç”¨çš„ä½æ•°
    private final static long MACHINE_BIT = 5;   //æœºå™¨æ ‡è¯†å ç”¨çš„ä½æ•°
    private final static long DATACENTER_BIT = 5;//æ•°æ®ä¸­å¿ƒå ç”¨çš„ä½æ•°

    /**
     * æ¯ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼
     */
    private final static long MAX_DATACENTER_NUM = -1L ^ (-1L &lt;&lt; DATACENTER_BIT);
    private final static long MAX_MACHINE_NUM = -1L ^ (-1L &lt;&lt; MACHINE_BIT);
    private final static long MAX_SEQUENCE = -1L ^ (-1L &lt;&lt; SEQUENCE_BIT);

    /**
     * æ¯ä¸€éƒ¨åˆ†å‘å·¦çš„ä½ç§»
     */
    private final static long MACHINE_LEFT = SEQUENCE_BIT;
    private final static long DATACENTER_LEFT = SEQUENCE_BIT + MACHINE_BIT;
    private final static long TIMESTMP_LEFT = DATACENTER_LEFT + DATACENTER_BIT;

    private long datacenterId = 1;  //æ•°æ®ä¸­å¿ƒ
    private long machineId = 1;     //æœºå™¨æ ‡è¯†
    private long sequence = 0L; //åºåˆ—å·
    private long lastStmp = -1L;//ä¸Šä¸€æ¬¡æ—¶é—´æˆ³

    public SnowFlake() {
    }

    public SnowFlake(long datacenterId, long machineId) {
        if (datacenterId &gt; MAX_DATACENTER_NUM || datacenterId &lt; 0) {
            throw new IllegalArgumentException("datacenterId can't be greater than MAX_DATACENTER_NUM or less than 0");
        }
        if (machineId &gt; MAX_MACHINE_NUM || machineId &lt; 0) {
            throw new IllegalArgumentException("machineId can't be greater than MAX_MACHINE_NUM or less than 0");
        }
        this.datacenterId = datacenterId;
        this.machineId = machineId;
    }

    /**
     * äº§ç”Ÿä¸‹ä¸€ä¸ªID
     *
     * @return
     */
    public synchronized long nextId() {
        long currStmp = getNewstmp();
        if (currStmp &lt; lastStmp) {
            throw new RuntimeException("Clock moved backwards.  Refusing to generate id");
        }

        if (currStmp == lastStmp) {
            //ç›¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·è‡ªå¢
            sequence = (sequence + 1) &amp; MAX_SEQUENCE;
            //åŒä¸€æ¯«ç§’çš„åºåˆ—æ•°å·²ç»è¾¾åˆ°æœ€å¤§
            if (sequence == 0L) {
                currStmp = getNextMill();
            }
        } else {
            //ä¸åŒæ¯«ç§’å†…ï¼Œåºåˆ—å·ç½®ä¸º0
            sequence = 0L;
        }

        lastStmp = currStmp;

        return (currStmp - START_STMP) &lt;&lt; TIMESTMP_LEFT //æ—¶é—´æˆ³éƒ¨åˆ†
                | datacenterId &lt;&lt; DATACENTER_LEFT       //æ•°æ®ä¸­å¿ƒéƒ¨åˆ†
                | machineId &lt;&lt; MACHINE_LEFT             //æœºå™¨æ ‡è¯†éƒ¨åˆ†
                | sequence;                             //åºåˆ—å·éƒ¨åˆ†
    }

    private long getNextMill() {
        long mill = getNewstmp();
        while (mill &lt;= lastStmp) {
            mill = getNewstmp();
        }
        return mill;
    }

    private long getNewstmp() {
        return System.currentTimeMillis();
    }
}
</code></pre> 
 <p>ä¸Šè¾¹çš„ä»£ç éƒ½æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä¸‹é¢å°±å¼€å§‹å®ç°ç”¨æˆ·ç®¡ç†çš„é€»è¾‘éƒ¨åˆ†ã€‚</p> 
</blockquote> 
<h2 id="%E4%B8%89%E3%80%81%F0%9F%9A%86%E5%90%8E%E7%AB%AF%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3%C2%A0">ä¸‰ã€ğŸš†åç«¯æ–°å¢æ¥å£Â </h2> 
<blockquote> 
 <p>åœ¨UserControllerç±»ä¸­éœ€è¦å°å°çš„ä¿®æ”¹ä¸€ä¸‹ã€‚</p> 
 <pre><code class="language-java">@RestController
@RequestMapping("/user")
public class UserController {
  @Autowired
  private UserService userService;
}
</code></pre> 
 <h3 id="3.1%20%2Fuser%2Flist%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0">3.1 /user/listæ¥å£æ·»åŠ </h3> 
 <p>å…¶å®è¿™æ ·çš„ä»£ç å·²ç»å†™äº†ä¸å°‘äº†ï¼Œè¿™æ ·çš„listæŸ¥è¯¢å¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œ</p> 
 <pre><code class="language-java">@RequestMapping("/list")
  public CommonResp list(@Validated UserQueryParam userQueryParam){
    PageVo&lt;UserQueryVo&gt; list = userService.list(userQueryParam);
    return new CommonResp(true,"æŸ¥æ‰¾æˆåŠŸ", list);
  }</code></pre> 
 <p>UserServiceImplä¸­çš„listæ¥å£ã€‚</p> 
 <pre><code class="language-java"> public PageVo&lt;UserQueryVo&gt; list(UserQueryParam userQueryParam) {
        // æ„å»ºä¸€ä¸ªè¡¨è¾¾å¼æ¥ç­›é€‰ç”¨æˆ·
        LambdaQueryWrapper&lt;User&gt; queryWrapper = new LambdaQueryWrapper&lt;&gt;();
        queryWrapper.eq(StringUtils.isNotBlank(userQueryParam.getLoginName()),
                User::getLoginName,userQueryParam.getLoginName());
        // åˆ›å»ºåˆ†é¡µæŸ¥è¯¢çš„å¯¹è±¡
        Page&lt;User&gt; page = new Page&lt;&gt;(userQueryParam.getPage(),userQueryParam.getSize());
        // æ¥æ”¶åˆ†é¡µæŸ¥è¯¢çš„ç»“æœ
        Page&lt;User&gt; resultPage = userMapper.selectPage(page, queryWrapper);
        // è¿™ä¸ªå¯¹è±¡ç”¨äºè¿”å›ç»™å‰ç«¯
        PageVo&lt;UserQueryVo&gt; pageVo = new PageVo&lt;&gt;();
        // å°†åˆ†é¡µæŸ¥è¯¢çš„ç»“æœè½¬æ¢ä¸€ä¸‹ User-ã€‹UserQueryVo
        List&lt;UserQueryVo&gt; users = CopyUtil.copyList(resultPage.getRecords(),UserQueryVo.class);
        pageVo.setList(users);
        pageVo.setTotal(resultPage.getTotal());
        return pageVo;
    }</code></pre> 
 <h3 id="3.2%20%2Fuser%2Fsave%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0">3.2 /user/saveæ¥å£æ·»åŠ </h3> 
 <p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ•°æ®åº“å½“ä¸­ï¼Œç”¨æˆ·çš„å¯†ç æˆ‘ä»¬ä¸åœ¨è¿›è¡Œæ˜æ–‡å­˜å‚¨äº†ï¼Œæˆ‘ä»¬å­˜å‚¨çš„éƒ½æ˜¯åŠ å¯†åçš„ä»£ç ï¼Œè¿™é‡Œä»…ä»…ä½¿ç”¨äº†ç®€å•çš„md5åŠ å¯†ç®—æ³•ï¼Œå®é™…çš„åŠ å¯†ç ç®—æ³•æœ‰å¾ˆå¤šç§ç±»å‹ã€‚</p> 
 <pre><code class="language-java">@PostMapping("/save")
  public CommonResp save(@Valid @RequestBody UserSaveParam userSaveParam) {
    userSaveParam.setPassword(DigestUtils.md5DigestAsHex(userSaveParam.getPassword().getBytes()));
    boolean save = userService.save(userSaveParam);
    String message = Boolean.TRUE.equals(save) ? "æ·»åŠ æˆåŠŸ":"æ·»åŠ å¤±è´¥";
    return new CommonResp&lt;&gt;(save,message,null);
  }</code></pre> 
 <p>UserServiceImplä¸­çš„saveæ¥å£ã€‚</p> 
 <pre><code class="language-java"> public boolean save(UserSaveParam userSaveParam) {
        User user = CopyUtil.copy(userSaveParam, User.class);
        if (ObjectUtils.isEmpty(userSaveParam.getId())) {
            User userDB = selectByLoginName(userSaveParam.getLoginName());
            if (ObjectUtils.isEmpty(userDB)) {
                // æ–°å¢
                user.setId(snowFlake.nextId());
                userMapper.insert(user);
            } else {
                // ç”¨æˆ·åå·²å­˜åœ¨
                throw new RuntimeException("ç”¨æˆ·å­˜åœ¨");
            }
        } else {
            // æ›´æ–°
            user.setLoginName(null);
            user.setPassword(null);
            userMapper.updateById(user);
        }
        return true;
    }

 private User selectByLoginName(String loginName) {
        QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();
        queryWrapper.eq("login_name", loginName);
        return userMapper.selectOne(queryWrapper);
    }</code></pre> 
 <h3 id="3.3%20%2Fuser%2Fdelete%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0">3.3 /user/deleteæ¥å£æ·»åŠ </h3> 
 <p>è¿™ä¸€éƒ¨åˆ†å°±æ›´ç®€å•äº†ã€‚</p> 
 <pre><code class="language-java">  @DeleteMapping("/delete/{id}")
  public CommonResp delete(@PathVariable Long id) {
    boolean res = userService.removeById(id);
    String message = Boolean.TRUE.equals(res) ? "åˆ é™¤æˆåŠŸ":"åˆ é™¤å¤±è´¥";
    return new CommonResp&lt;&gt;(res,message,null);
  }</code></pre> 
 <h3 id="3.4%20%2Fuser%2Freset-password%E6%8E%A5%E5%8F%A3%E6%B7%BB%E5%8A%A0">3.4 /user/reset-passwordæ¥å£æ·»åŠ </h3> 
 <pre><code class="language-java">  @PostMapping("/reset-password")
  public CommonResp resetPassword(@Valid @RequestBody UserResetPasswordParam req) {
    req.setPassword(DigestUtils.md5DigestAsHex(req.getPassword().getBytes()));
    userService.resetPassword(req);
    return new CommonResp(true,"å¯†ç é‡ç½®æˆåŠŸ",null);
  }</code></pre> 
 <p>UserServiceImplä¸­çš„resetPasswordæ¥å£ã€‚Â </p> 
 <pre><code class="language-java">    public void resetPassword(UserResetPasswordParam req) {
        User user = CopyUtil.copy(req, User.class);
        userMapper.updateById(user);
    }</code></pre> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/959f223eefe992a304b7ee67d9f66185/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">pythonå®ç°å°æ¸¸æˆâ€”â€”æ¤ç‰©å¤§æˆ˜åƒµå°¸(é­”æ”¹ç‰ˆæœ¬)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e97b05f4170df4ea33ac5122d4d60ae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">5.6è½¯ä»¶å·¥ç¨‹-è¿ç»´</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>