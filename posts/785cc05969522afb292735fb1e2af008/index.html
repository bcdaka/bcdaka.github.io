<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>轻松上手MYSQL：JSON函数实现高效数据查询与操作 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/785cc05969522afb292735fb1e2af008/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="轻松上手MYSQL：JSON函数实现高效数据查询与操作">
  <meta property="og:description" content="🌈 个人主页：danci_
🔥 系列专栏：《设计模式》《MYSQL》
💪🏻 制定明确可量化的目标，坚持默默的做事。
✨欢迎加入探索MYSQL字符串函数之旅✨
👋 大家好！文本学习和探索MYSQL的JSON函数。👋 在现代数据处理领域，JSON格式已成为数据交换的标准，而MySQL的JSON函数则为其提供了强大的支持。无论是存储、查询还是操作JSON数据，MySQL JSON函数都能让你事半功倍。本文将带你深入了解这些强大的工具，帮助你实现高效的数据处理与查询。准备好解锁JSON数据的新技能了吗？让我们一起探索MySQL JSON函数的无限可能！
目录
一、JSON_EXTRACT 提取指定数据
二、JSON_UNQUOTE 取消双引号
三、JSON_KEYS 取成员的数组
四、JSON_ARRAY 将参数转为数组
五、JSON_OBJECT 参数转为对象
六、JSON_DEPTH 取JSON深度
七、JSON_LENGTH 取节点长度
八、JSON_CONTAINS 判断是否包含
九、JSON_ARRAY_APPEND 追加值
十、JSON_ARRAY_INSERT 指定位置插入值
十一、JSON_CONTAINS_PATH 判断是否存在
十二、JSON_INSERT 插入数据
十三、JSON_MERGE 多个JSON合并
十四、JSON_MERGE_PATCH 多个JSON替换合并
十五、JSON_MERGE_PRESERVE 多个JSON合并
十六、JSON_OVERLAPS 判断有无相同键或值
十七、JSON_PRETTY 格式化输出
十八、JSON_REMOVE 删除指定数据
十九、JSON_REPLACE 替换数据
二十、JSON_SCHEMA_VALID 验证JSON文档
二十一、JSON_SCHEMA_VALIDATION_REPORT 验证JSON文档
二十二、JSON_SEARCH 查找
二十三、JSON_SET 插入或更新数据
二十四、JSON_STORAGE_FREE 释放空间
二十五、JSON_STORAGE_SIZE 占用字节数
二十六、JSON_TABLE 提取数据
二十七、JSON_TYPE 取类型
二十八、JSON_VALID 验证有校性">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-28T19:31:32+08:00">
    <meta property="article:modified_time" content="2024-07-28T19:31:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">轻松上手MYSQL：JSON函数实现高效数据查询与操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a id="_0"></a></p> 
<p class="img-center"><img alt="" height="87" src="https://images2.imgbox.com/fb/55/7S1BhwaT_o.png" width="83"></p> 
<p>  🌈 <strong>个人主页：</strong><a href="https://blog.csdn.net/danci_" title="danci_">danci_</a><br> 🔥 <strong>系列专栏：</strong><a href="https://blog.csdn.net/danci_/category_12551117.html" title="《设计模式》">《设计模式》</a><a href="https://blog.csdn.net/danci_/category_12641052.html" title="《MYSQL》">《MYSQL》</a><br> 💪🏻 <strong>制定明确可量化的目标，坚持默默的做事。</strong></p> 
<hr> 
<div class="csdn-video-box" data-report-view='{"spm":"3001.10261","extra":{"id":"MC7zF6UZ-1722165952414"}}'> 
 <iframe id="MC7zF6UZ-1722165952414" frameborder="0" src="https://live.csdn.net/v/embed/413204" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p></p> 
</div> 
<p>✨欢迎加入探索MYSQL字符串函数之旅✨<br>     👋 大家好！文本学习和探索MYSQL的JSON函数。👋 在现代数据处理领域，JSON格式已成为数据交换的标准，而MySQL的JSON函数则为其提供了强大的支持。无论是存储、查询还是操作JSON数据，MySQL JSON函数都能让你事半功倍。本文将带你深入了解这些强大的工具，帮助你实现高效的数据处理与查询。准备好解锁JSON数据的新技能了吗？让我们一起探索MySQL JSON函数的无限可能！</p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81SIGN%20%E5%8F%96%E6%95%B0%E5%AD%97%E7%9A%84%E7%AC%A6%E5%8F%B7-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81SIGN%20%E5%8F%96%E6%95%B0%E5%AD%97%E7%9A%84%E7%AC%A6%E5%8F%B7" rel="nofollow">一、JSON_EXTRACT 提取指定数据</a></p> 
<p id="%C2%A0%E4%BA%8C%E3%80%81JSON_UNQUOTE%C2%A0%E5%8F%96%E6%B6%88%E5%8F%8C%E5%BC%95%E5%8F%B7-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%8C%E3%80%81JSON_UNQUOTE%C2%A0%E5%8F%96%E6%B6%88%E5%8F%8C%E5%BC%95%E5%8F%B7" rel="nofollow">二、JSON_UNQUOTE 取消双引号</a></p> 
<p id="%C2%A0%E4%B8%89%E3%80%81JSON_KEYS%20%E5%8F%96%E6%88%90%E5%91%98%E7%9A%84%E6%95%B0%E7%BB%84-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%89%E3%80%81JSON_KEYS%20%E5%8F%96%E6%88%90%E5%91%98%E7%9A%84%E6%95%B0%E7%BB%84" rel="nofollow">三、JSON_KEYS 取成员的数组</a></p> 
<p id="%E5%9B%9B%E3%80%81JSON_ARRAY%20%E5%B0%86%E5%8F%82%E6%95%B0%E8%BD%AC%E4%B8%BA%E6%95%B0%E7%BB%84-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81JSON_ARRAY%20%E5%B0%86%E5%8F%82%E6%95%B0%E8%BD%AC%E4%B8%BA%E6%95%B0%E7%BB%84" rel="nofollow">四、JSON_ARRAY 将参数转为数组</a></p> 
<p id="%E4%BA%94%E3%80%81JSON_OBJECT%20%E5%8F%82%E6%95%B0%E8%BD%AC%E4%B8%BA%E5%AF%B9%E8%B1%A1-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81JSON_OBJECT%20%E5%8F%82%E6%95%B0%E8%BD%AC%E4%B8%BA%E5%AF%B9%E8%B1%A1" rel="nofollow">五、JSON_OBJECT 参数转为对象</a></p> 
<p id="%C2%A0%E5%85%AD%E3%80%81JSON_DEPTH%20%E5%8F%96JSON%E6%B7%B1%E5%BA%A6-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%85%AD%E3%80%81JSON_DEPTH%20%E5%8F%96JSON%E6%B7%B1%E5%BA%A6" rel="nofollow">六、JSON_DEPTH 取JSON深度</a></p> 
<p id="%C2%A0%E4%B8%83%E3%80%81JSON_LENGTH%20%E5%8F%96%E8%8A%82%E7%82%B9%E9%95%BF%E5%BA%A6-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%83%E3%80%81JSON_LENGTH%20%E5%8F%96%E8%8A%82%E7%82%B9%E9%95%BF%E5%BA%A6" rel="nofollow">七、JSON_LENGTH 取节点长度</a></p> 
<p id="%C2%A0%E5%85%AB%E3%80%81JSON_CONTAINS%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%85%AB%E3%80%81JSON_CONTAINS%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB" rel="nofollow">八、JSON_CONTAINS 判断是否包含</a></p> 
<p id="%E4%B9%9D%E3%80%81JSON_ARRAY_APPEND%20%E8%BF%BD%E5%8A%A0%E5%80%BC-toc" style="margin-left:0px;"><a href="#%E4%B9%9D%E3%80%81JSON_ARRAY_APPEND%20%E8%BF%BD%E5%8A%A0%E5%80%BC" rel="nofollow">九、JSON_ARRAY_APPEND 追加值</a></p> 
<p id="%E5%8D%81%E3%80%81JSON_ARRAY_INSERT%C2%A0%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%8F%92%E5%85%A5%E5%80%BC-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E3%80%81JSON_ARRAY_INSERT%C2%A0%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%8F%92%E5%85%A5%E5%80%BC" rel="nofollow">十、JSON_ARRAY_INSERT 指定位置插入值</a></p> 
<p id="%E5%8D%81%E4%B8%80%E3%80%81JSON_CONTAINS_PATH%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%80%E3%80%81JSON_CONTAINS_PATH%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8" rel="nofollow">十一、JSON_CONTAINS_PATH 判断是否存在</a></p> 
<p id="%E5%8D%81%E4%BA%8C%E3%80%81JSON_INSERT%20%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%BA%8C%E3%80%81JSON_INSERT%20%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE" rel="nofollow">十二、JSON_INSERT 插入数据</a></p> 
<p id="%E5%8D%81%E4%B8%89%E3%80%81JSON_MERGE%20%E5%A4%9A%E4%B8%AAJSON%E5%90%88%E5%B9%B6-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%89%E3%80%81JSON_MERGE%20%E5%A4%9A%E4%B8%AAJSON%E5%90%88%E5%B9%B6" rel="nofollow">十三、JSON_MERGE 多个JSON合并</a></p> 
<p id="%E5%8D%81%E5%9B%9B%E3%80%81JSON_MERGE_PATCH%20%E5%A4%9A%E4%B8%AAJSON%E6%9B%BF%E6%8D%A2%E5%90%88%E5%B9%B6-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E5%9B%9B%E3%80%81JSON_MERGE_PATCH%20%E5%A4%9A%E4%B8%AAJSON%E6%9B%BF%E6%8D%A2%E5%90%88%E5%B9%B6" rel="nofollow">十四、JSON_MERGE_PATCH 多个JSON替换合并</a></p> 
<p id="%E5%8D%81%E4%BA%94%E3%80%81JSON_MERGE_PRESERVE%C2%A0%E5%A4%9A%E4%B8%AAJSON%E5%90%88%E5%B9%B6-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%BA%94%E3%80%81JSON_MERGE_PRESERVE%C2%A0%E5%A4%9A%E4%B8%AAJSON%E5%90%88%E5%B9%B6" rel="nofollow">十五、JSON_MERGE_PRESERVE 多个JSON合并</a></p> 
<p id="%E5%8D%81%E5%85%AD%E3%80%81JSON_OVERLAPS%20%E5%88%A4%E6%96%AD%E6%9C%89%E6%97%A0%E7%9B%B8%E5%90%8C%E9%94%AE%E6%88%96%E5%80%BC-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E5%85%AD%E3%80%81JSON_OVERLAPS%20%E5%88%A4%E6%96%AD%E6%9C%89%E6%97%A0%E7%9B%B8%E5%90%8C%E9%94%AE%E6%88%96%E5%80%BC" rel="nofollow">十六、JSON_OVERLAPS 判断有无相同键或值</a></p> 
<p id="%E5%8D%81%E4%B8%83%E3%80%81JSON_PRETTY%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B8%83%E3%80%81JSON_PRETTY%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA" rel="nofollow">十七、JSON_PRETTY 格式化输出</a></p> 
<p id="%E5%8D%81%E5%85%AB%E3%80%81JSON_REMOVE%20%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E5%85%AB%E3%80%81JSON_REMOVE%20%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE" rel="nofollow">十八、JSON_REMOVE 删除指定数据</a></p> 
<p id="%E5%8D%81%E4%B9%9D%E3%80%81JSON_REPLACE%20%E6%9B%BF%E6%8D%A2%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E4%B9%9D%E3%80%81JSON_REPLACE%20%E6%9B%BF%E6%8D%A2%E6%95%B0%E6%8D%AE" rel="nofollow">十九、JSON_REPLACE 替换数据</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E3%80%81JSON_SCHEMA_VALID%C2%A0%E9%AA%8C%E8%AF%81JSON%E6%96%87%E6%A1%A3-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E3%80%81JSON_SCHEMA_VALID%C2%A0%E9%AA%8C%E8%AF%81JSON%E6%96%87%E6%A1%A3" rel="nofollow">二十、JSON_SCHEMA_VALID 验证JSON文档</a></p> 
<p id="%C2%A0%E4%BA%8C%E5%8D%81%E4%B8%80%E3%80%81JSON_SCHEMA_VALIDATION_REPORT%C2%A0%E9%AA%8C%E8%AF%81JSON%E6%96%87%E6%A1%A3-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%8C%E5%8D%81%E4%B8%80%E3%80%81JSON_SCHEMA_VALIDATION_REPORT%C2%A0%E9%AA%8C%E8%AF%81JSON%E6%96%87%E6%A1%A3" rel="nofollow">二十一、JSON_SCHEMA_VALIDATION_REPORT 验证JSON文档</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E4%BA%8C%E3%80%81JSON_SEARCH%20%E6%9F%A5%E6%89%BE-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%BA%8C%E3%80%81JSON_SEARCH%20%E6%9F%A5%E6%89%BE" rel="nofollow">二十二、JSON_SEARCH 查找</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E4%B8%89%E3%80%81JSON_SET%C2%A0%E6%8F%92%E5%85%A5%E6%88%96%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%89%E3%80%81JSON_SET%C2%A0%E6%8F%92%E5%85%A5%E6%88%96%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE" rel="nofollow">二十三、JSON_SET 插入或更新数据</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E5%9B%9B%E3%80%81JSON_STORAGE_FREE%20%E9%87%8A%E6%94%BE%E7%A9%BA%E9%97%B4-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E5%9B%9B%E3%80%81JSON_STORAGE_FREE%20%E9%87%8A%E6%94%BE%E7%A9%BA%E9%97%B4" rel="nofollow">二十四、JSON_STORAGE_FREE 释放空间</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E4%BA%94%E3%80%81JSON_STORAGE_SIZE%C2%A0%E5%8D%A0%E7%94%A8%E5%AD%97%E8%8A%82%E6%95%B0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%BA%94%E3%80%81JSON_STORAGE_SIZE%C2%A0%E5%8D%A0%E7%94%A8%E5%AD%97%E8%8A%82%E6%95%B0" rel="nofollow">二十五、JSON_STORAGE_SIZE 占用字节数</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E5%85%AD%E3%80%81JSON_TABLE%C2%A0%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E5%85%AD%E3%80%81JSON_TABLE%C2%A0%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE" rel="nofollow">二十六、JSON_TABLE 提取数据</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E4%B8%83%E3%80%81JSON_TYPE%20%E5%8F%96%E7%B1%BB%E5%9E%8B-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%83%E3%80%81JSON_TYPE%20%E5%8F%96%E7%B1%BB%E5%9E%8B" rel="nofollow">二十七、JSON_TYPE 取类型</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E5%85%AB%E3%80%81JSON_VALID%20%E9%AA%8C%E8%AF%81%E6%9C%89%E6%A0%A1%E6%80%A7-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E5%85%AB%E3%80%81JSON_VALID%20%E9%AA%8C%E8%AF%81%E6%9C%89%E6%A0%A1%E6%80%A7" rel="nofollow">二十八、JSON_VALID 验证有校性</a></p> 
<p id="%E4%BA%8C%E5%8D%81%E4%B9%9D%E3%80%81JSON_VALUE%C2%A0%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E8%B7%AF%E5%BE%84%E7%9A%84%E5%80%BC-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E5%8D%81%E4%B9%9D%E3%80%81JSON_VALUE%C2%A0%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E8%B7%AF%E5%BE%84%E7%9A%84%E5%80%BC" rel="nofollow">二十九、JSON_VALUE 提取指定路径的值</a></p> 
<p id="%E4%B8%89%E5%8D%81%E3%80%81MEMBER%20OF%20%E6%98%AF%E5%90%A6%E4%B8%BA%E6%95%B0%E7%BB%84%E7%9A%84%E5%85%83%E7%B4%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E5%8D%81%E3%80%81MEMBER%20OF%20%E6%98%AF%E5%90%A6%E4%B8%BA%E6%95%B0%E7%BB%84%E7%9A%84%E5%85%83%E7%B4%A0" rel="nofollow">三十、MEMBER OF 是否为数组的元素</a></p> 
<p id="%E4%B8%89%E5%8D%81%E4%B8%80%E3%80%81JSON_QUOTE%20%E5%8C%85%E8%A3%85%E6%88%90JSON%E4%B8%B2-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E5%8D%81%E4%B8%80%E3%80%81JSON_QUOTE%20%E5%8C%85%E8%A3%85%E6%88%90JSON%E4%B8%B2" rel="nofollow">三十一、JSON_QUOTE 包装成JSON串</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81SIGN%20%E5%8F%96%E6%95%B0%E5%AD%97%E7%9A%84%E7%AC%A6%E5%8F%B7">一、JSON_EXTRACT 提取指定数据</h2> 
<p>MySQL <code>JSON_EXTRACT()</code> 函数在 JSON 文档提取路径表达式指定的数据并返回。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_EXTRACT(json, path, ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li>json：必需的。一个 JSON 文档。</li><li>path：必需的。至少指定一个路径表达式。</li></ul> 
<p><em>返回值：</em></p> 
<ul><li>返回 JSON 文档中由路径表达式匹配的所有的值。</li><li><em>返回NULL情况：</em> 
  <ul><li><em> </em>不存在指定的路径。</li><li>任意一个参数为 <code>NULL</code>。</li></ul></li><li>报错情况： 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_EXTRACT('[1, 2, {"x": 3}]', '$[1]'); // 2
SELECT JSON_EXTRACT('[1, 2, {"x": 3}]', '$[2]'); // {"x": 3}</code></pre> 
<p></p> 
<h2 id="%C2%A0%E4%BA%8C%E3%80%81JSON_UNQUOTE%C2%A0%E5%8F%96%E6%B6%88%E5%8F%8C%E5%BC%95%E5%8F%B7">二、JSON_UNQUOTE 取消双引号</h2> 
<p>MySQL <code>JSON_UNQUOTE()</code> 函数取消双引号引用 JSON 值，并将结果作为字符串返回。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_UNQUOTE(json_val)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li><em><code>json_val：</code></em>必需的。一个字符串。</li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>取消双引号引用 JSON 值</li><li>返回NULL情况：参数为 <code>NULL。</code></li><li><code>报错情况：</code>不是有效的 JSON 字符串文本。能够识别下表中的转义字符： 
  <ul><li>\"：双引号 <code>"</code></li><li><code>\b</code>：<code>退格字符</code></li><li><code>\f</code>：<code>换页符</code></li><li><code>\n</code>：<code>换行符</code></li><li><code>\r</code>：<code>回车符</code></li><li><code>\t</code>：<code>制表符</code></li><li><code>\\</code>：<code>反斜杠 \</code></li><li><code>\uXXXX</code>：<code>Unicode 值 XXXX 的 UTF-8 字节</code></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_UNQUOTE('"123456"');    // 123456
SELECT JSON_UNQUOTE(CAST('"cxian"' AS JSON));    // cxian</code></pre> 
<p></p> 
<h2 id="%C2%A0%E4%B8%89%E3%80%81JSON_KEYS%20%E5%8F%96%E6%88%90%E5%91%98%E7%9A%84%E6%95%B0%E7%BB%84">三、JSON_KEYS 取成员的数组</h2> 
<p>MySQL <code>JSON_KEYS()</code> 函数返回一个包含了指定的 JSON 对象中最上层的成员 (key) 的数组。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_KEYS(json)
JSON_KEYS(json, path)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 对象文档。</p> </li><li> <p><em><code>path</code></em>：可选的。路径表达式。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>返回一个包含了指定的 JSON 对象中最上层的成员 (key) 的数组。</li><li>若指定了路径表达式，则返回路径表达式匹配的 JSON 对象中的最上层的成员组成的数组。</li><li>返回 <code>NULL情况：</code> 
  <ul><li>无路径，JSON 文档不是一个 JSON 对象。</li><li>有路径，路径匹配的 JSON 值不是 JSON 对象。</li><li>任意参数为 <code>NULL</code>。</li></ul></li><li>报错情况： 
  <ul><li> <code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_KEYS('{"a": 1, "b": 2, "c": 3}');              // ["a", "b", "c"]
SELECT JSON_KEYS('[1, {"a": 1, "b": 2, "c": 3}]', '$[1]'); // ["a", "b", "c"]

SELECT
    JSON_KEYS('1'),         // null
    JSON_KEYS('"true"'),    // null
    JSON_KEYS('"abc"'),     // null
    JSON_KEYS('[0, 1]');    // null
</code></pre> 
<p> </p> 
<h2 id="%E5%9B%9B%E3%80%81JSON_ARRAY%20%E5%B0%86%E5%8F%82%E6%95%B0%E8%BD%AC%E4%B8%BA%E6%95%B0%E7%BB%84">四、JSON_ARRAY 将参数转为数组</h2> 
<p>MySQL <code>JSON_ARRAY()</code> 函数返回一个包含了所有参数的 JSON 数组。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_ARRAY(value1[, value2[, ...]])
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>value1[, value2[, ...]]</code></em>：可选的。一些值，他们将被放在 JSON 数组中。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>包含了所有参数的 JSON 数组。</li><li><em>值</em>转换情况： 
  <ul><li><em>TRUE 被转换为 true</em></li><li><em>FALSE 被转换为 false</em></li><li><em>NULL 被转换为 null</em></li><li><em>日期，时间，日期时间 被转换为 字符串 </em></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_ARRAY(1, '1', NULL, TRUE, FALSE, NOW()); // [1, "1", null, true, false, "2023-11-05 16:58:34.000000"]
SELECT JSON_ARRAY(JSON_ARRAY(1, 2), JSON_ARRAY('a', 'b')); // [[1, 2], ["a", "b"]]</code></pre> 
<p> </p> 
<h2 id="%E4%BA%94%E3%80%81JSON_OBJECT%20%E5%8F%82%E6%95%B0%E8%BD%AC%E4%B8%BA%E5%AF%B9%E8%B1%A1">五、JSON_OBJECT 参数转为对象</h2> 
<p>MySQL <code>JSON_OBJECT()</code> 函数返回一个包含了由参数指定的所有键值对的 JSON 对象。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_OBJECT(key, value[, key2, value2, ...])
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li>key：必需的。对象中的键。</li><li>value：必需的。对象中的 key 的值。</li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>一个包含了所有键值对的 JSON 对象。</li><li>报错情况： 
  <ul><li><code>key</code> 是 <code>NULL。</code></li><li>奇数个参数。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_OBJECT('name', 'cxian', 'age', 22); // {"age": 22, "name": "cxian"}
SELECT JSON_OBJECT('name', 'cxian', 'age', 22, 'age', 33); // {"age": 33, "name": "cxian"}
</code></pre> 
<p> </p> 
<h2 id="%C2%A0%E5%85%AD%E3%80%81JSON_DEPTH%20%E5%8F%96JSON%E6%B7%B1%E5%BA%A6">六、JSON_DEPTH 取JSON深度</h2> 
<p>MySQL <code>JSON_DEPTH()</code> 函数返回一个 JSON 文档的最大深度。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_DEPTH(json)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>一个 JSON 文档的最大深度。规则如下： 
  <ul><li>空的数组、空的对象或者纯值的深度是 1。</li><li>仅包含深度为 1 的元素的数组的深度是 2。</li><li>所有成员的值的深度为 1 的对象的深度是 2。</li><li>其他 JSON 文档的深度都大于 2。</li></ul></li><li>返回 <code>NULL情况：</code>参数为 <code>NULL。</code></li><li><code>报错情况：</code>参数不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT 
    JSON_DEPTH('[]'),             // 1
    JSON_DEPTH('[1, 2]'),         // 2 
    JSON_DEPTH('[1, [2, 3]]');    // 3</code></pre> 
<p> </p> 
<h2 id="%C2%A0%E4%B8%83%E3%80%81JSON_LENGTH%20%E5%8F%96%E8%8A%82%E7%82%B9%E9%95%BF%E5%BA%A6">七、JSON_LENGTH 取节点长度</h2> 
<p>MySQL <code>JSON_LENGTH()</code> 函数返回 JSON 文档或者 JSON 文档中通过路径指定的节点的长度。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_LENGTH(json)
JSON_LENGTH(json, path)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：可选的。一个路径表达式。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>有path： </em>返回 JSON 文档中由路径指定的值的长度。</li><li>无path：返回 JSON 文档的长度。</li><li>计算 JSON 文档的长度规则： 
  <ul><li>纯值的长度是 1。</li><li>数组的长度是数组元素的数量。</li><li>对象的长度是对象成员的数量。</li><li>内嵌的数组或对象不参与计算长度。</li></ul></li><li>返回 <code>NULL情况：</code> 
  <ul><li>不存在指定的路径。</li><li>任意一个参数为 <code>NULL</code>。</li></ul></li><li>报错情况： 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li><li><code>path</code> 中包含 <code>*</code> 或 <code>**。</code></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_LENGTH('1'),        // 1
    JSON_LENGTH('true'),     // 1
    JSON_LENGTH('false'),    // 1
    JSON_LENGTH('null'),     // 1
    JSON_LENGTH('"a"');      // 1
    JSON_LENGTH('[]'),       // 0
    JSON_LENGTH('[1, 2]'),   // 2
    JSON_LENGTH('[1, {"x": 2}]');    // 2</code></pre> 
<p> </p> 
<h2 id="%C2%A0%E5%85%AB%E3%80%81JSON_CONTAINS%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%8C%85%E5%90%AB">八、JSON_CONTAINS 判断是否包含</h2> 
<p>MySQL <code>JSON_CONTAINS()</code> 函数检查一个 JSON 文档中是否包含另一个 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_CONTAINS(target_json, candidate_json)
JSON_CONTAINS(target_json, candidate_json, path)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>target_json</code></em>必需的。一个 JSON 文档。</p> </li><li> <p><em><code>candidate_json</code></em>：必需的。被包含的 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：可选的。一个路径表达式。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> 包含：返回1。</em></li><li><em>不包含：返回0。</em></li><li>返回 <code>NULL情况：</code> 
  <ul><li>JSON 文档中不存在指定的路径。</li><li>任意一个参数为 <code>NULL</code>。</li></ul></li><li>报错情况： 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_CONTAINS('[1, 2, {"x": 3}]', '1'),        // 1
    JSON_CONTAINS('[1, 2, {"x": 3}]', '{"x": 3}'), // 1
    JSON_CONTAINS('[1, 2, {"x": 3}]', '3'),        // 0
    JSON_CONTAINS('[1, 2, [3, 4]]', '2'),          // 1
    JSON_CONTAINS('[1, 2, [3, 4]]', '2', '$[2]');  // 0
</code></pre> 
<p> </p> 
<h2 id="%E4%B9%9D%E3%80%81JSON_ARRAY_APPEND%20%E8%BF%BD%E5%8A%A0%E5%80%BC">九、JSON_ARRAY_APPEND 追加值</h2> 
<p>MySQL <code>JSON_ARRAY_APPEND()</code> 函数向 JSON 文档中的指定的数组中追加一个值并返回修改后的 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_ARRAY_APPEND(json, path, value[, path2, value2] ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。被修改的 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。添加新元素的路径。一个有效的路径表达式，它不能包含 <code>*</code> 或 <code>**</code>。</p> </li><li> <p><em><code>value</code></em>：必需的。被添加到数组的新元素值。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>追加后的 JSON 文档。<em> </em></li><li>返回 <code>NULL情况：</code>JSON 文档或者路径为 <code>NULL。</code></li><li><code>报错情况：</code> 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式或者其中包含 <code>*</code> 或 <code>**。</code></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_ARRAY_APPEND('[1, 2, 3]', '$', 4);      // [1, 2, 3, 4]
SELECT JSON_ARRAY_APPEND('[1, [2, 3]]', '$[0]', 4); // [[1, 4], [2, 3]]
SELECT JSON_ARRAY_APPEND('[1, [2, 3]]', '$[1]', 4); // [1, [2, 3, 4]]
SELECT JSON_ARRAY_APPEND('{"name": "Tim", "hobby": ["car"]}', '$.hobby', "food"); // {"name": "Tim", "hobby": ["car", "food"]}
SELECT JSON_ARRAY_APPEND('1', '$', 2); // [1, 2]
</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E3%80%81JSON_ARRAY_INSERT%C2%A0%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%8F%92%E5%85%A5%E5%80%BC">十、JSON_ARRAY_INSERT 指定位置插入值</h2> 
<p>MySQL <code>JSON_ARRAY_INSERT()</code> 函数向 JSON 文档中的指定的数组中的指定位置插入一个值并返回新的 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_ARRAY_INSERT(json, path, value[, path2, value2] ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json：</code></em>必需的。被修改的 JSON 文档。</p> </li><li> <p><em><code>path：</code></em>必需的。插入新元素的数组元素位置。一个有效的路径表达式，它不能包含 <code>*</code> 或 <code>**</code>。比如 <code>$[0]</code> 和 <code>$.a[0]</code> 表示在数组的开头插入新元素。</p> </li><li> <p><em><code>value</code></em>：必需的。被插入到数组的新元素值。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>插入后的JSON文档。</em></li><li>返回 <code>NULL情况：</code>JSON 文档或者路径为 <code>NULL。</code></li><li><code>报错情况：</code> 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式或者其中包含 <code>*</code> 或 <code>**。</code></li><li><code>path</code> 指示的不是数组元素的路径。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">set @str = '[1, [2, 3], {"a": [4, 5]}]'
SELECT 
  JSON_ARRAY_INSERT(@str, '$[0]', 0), // [0, 1, [2, 3], {"a": [4, 5]}]
  JSON_ARRAY_INSERT(@str, '$[1]', 0), // [1, 0, [2, 3], {"a": [4, 5]}]
  JSON_ARRAY_INSERT(@str, '$[2]', 0), // [1, [2, 3], 0, {"a": [4, 5]}]
  JSON_ARRAY_INSERT(@str, '$[1][0]', 0), // [1, [0, 2, 3], {"a": [4, 5]}]
  JSON_ARRAY_INSERT(@str, '$[2].a[0]', 0); // [1, [2, 3], {"a": [0, 4, 5]}]</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E4%B8%80%E3%80%81JSON_CONTAINS_PATH%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8">十一、JSON_CONTAINS_PATH 判断是否存在</h2> 
<p>MySQL <code>JSON_CONTAINS_PATH()</code> 函数检查一个 JSON 文档中在指定的路径上是否有值存在。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_CONTAINS_PATH(json, one_or_all, path[, path])
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>one_or_all</code></em>：必需的。可用值：<code>'one'</code>, <code>'all'</code>。它指示是否检查所有的路径。</p> </li><li> <p><em><code>path</code></em>：必需的。您应该至少指定一个路径表达式。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> 有值返回 1， 否则返回 0。</em></li><li>one_or_all参数说明： 
  <ul><li>'one'：任意一个路径上有值，返回1，否则返回 0。</li><li>'all'：所有路径都有值，返回1，否则返回 0。</li></ul></li><li>报错情况： 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_CONTAINS_PATH('[1, 2, {"x": 3}]', 'all', '$[0]'), // 1
    JSON_CONTAINS_PATH('[1, 2, {"x": 3}]', 'all', '$[3]'), // 0
    JSON_CONTAINS_PATH('[1, 2, {"x": 3}]', 'all', '$[2].x'), // 1
    JSON_CONTAINS_PATH('[1, 2, {"x": 3}]', 'one', '$[0]', '$[3]'), // 1
    JSON_CONTAINS_PATH('[1, 2, {"x": 3}]', 'all', '$[0]', '$[3]'); // 0

</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E4%BA%8C%E3%80%81JSON_INSERT%20%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE">十二、JSON_INSERT 插入数据</h2> 
<p>MySQL <code>JSON_INSERT()</code> 函数向一个 JSON 文档中插入数据并返回新的 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_INSERT(json, path, value[, path2, value2] ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。被修改的 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。一个有效的路径表达式，它不能包含 <code>*</code> 或 <code>**</code>。</p> </li><li> <p><em><code>value</code></em>：必需的。被插入的数据。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>插入后的JSON文档。（若已存在， 则不插入）</em></li><li><code>path</code> 为 <code>$：返回原JSON文档。</code></li><li>返回 <code>NULL情况：</code>JSON 文档或者路径为 <code>NULL。</code></li><li><code>报错情况：</code> 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式或者其中包含 <code>*</code> 或 <code>**。</code><em> </em></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @arr = '[1, [2, 3], {"a": [4, 5]}]';
SELECT JSON_INSERT(@arr, '$[0]', 0, '$[3]', 6); // [1, [2, 3], {"a": [4, 5]}, 6]
SET @obj = '{"x": 1}';
SELECT JSON_INSERT(@obj, '$.y', '2');           // {"x": 1, "y": "2"}</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E4%B8%89%E3%80%81JSON_MERGE%20%E5%A4%9A%E4%B8%AAJSON%E5%90%88%E5%B9%B6">十三、JSON_MERGE 多个JSON合并</h2> 
<p>MySQL <code>JSON_MERGE()</code> 函数合并两个或多个 JSON 文档并返回合并的结果。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_MERGE(json1, json2, ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json1</code></em>：必需的。一个 JSON 对象文档。</p> </li><li> <p><em><code>json2</code></em>：必需的。一个 JSON 对象文档。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> 合并后的新JSON文档。</em></li><li>返回 <code>NULL情况：</code>任意一个参数为 <code>NULL。</code></li><li>报错情况：参数不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_MERGE('1', 'true', '"hello"', 'null'); // [1, true, "hello", null]
SELECT JSON_MERGE('[1, 2]', '[2, 3]');             // [1, 2, 2, 3]
SELECT JSON_MERGE('{"x": 1}', '{"x": 2, "y": 3}'); // {"x": [1, 2], "y": 3}
SELECT JSON_MERGE('{"x": 1}', '[1, 2]');           // [{"x": 1}, 1, 2]
</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E5%9B%9B%E3%80%81JSON_MERGE_PATCH%20%E5%A4%9A%E4%B8%AAJSON%E6%9B%BF%E6%8D%A2%E5%90%88%E5%B9%B6">十四、JSON_MERGE_PATCH 多个JSON替换合并</h2> 
<p>MySQL <code>JSON_MERGE_PATCH()</code> 函数对两个或多个 JSON 文档执行替换合并并返回合并的结果。</p> 
<p>替换合并：在相同键值时，只保留后面的值。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_MERGE_PATCH(json1, json2, ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json1</code></em>：必需的。一个 JSON 对象文档。</p> </li><li> <p><em><code>json2</code></em>：必需的。一个 JSON 对象文档。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>合并后的JSON文档。</em></li><li>合并规则如下： 
  <ul><li>若第一个参数不是对象，则合并的结果与第二个参数合并空对象的结果相同。</li><li>若第二个参数不是对象，则合并的结果为第二个参数。</li><li>若两个参数都是对象，则合并的对象具有以下成员： 
    <ul><li>只存在于第一个对象中的成员。</li><li>只存在于第二个对象中且值不是 <code>null</code> 的成员。</li><li>存在于第二个对象且值不是 <code>null</code> ，并且在第一个对象中有对应的相同键的成员。</li></ul></li></ul></li><li>返回 <code>NULL情况：任意一个参数为NULL。</code></li><li><code>报错情况：</code>任意一个参数不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_MERGE_PATCH('2', 'true'),    // true
    JSON_MERGE_PATCH('[1, 2]', '[2, 3]'),    // [2, 3]
	JSON_MERGE_PATCH('{"x": 1, "z": 7}', '{"x": 2, "y": 3}'), // {"x": 2, "y": 3, "z": 7}
	JSON_MERGE_PATCH('{"x": 1, "z": 7}', '{"x": 2, "z": null}'); // {"x": 2}</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E4%BA%94%E3%80%81JSON_MERGE_PRESERVE%C2%A0%E5%A4%9A%E4%B8%AAJSON%E5%90%88%E5%B9%B6">十五、JSON_MERGE_PRESERVE 多个JSON合并</h2> 
<p>MySQL <code>JSON_MERGE_PRESERVE()</code> 函数合并两个或多个 JSON 文档并返回合并的结果。</p> 
<p></p> 
<p>此函数和 JSON_MERGE_PATCH() 用法相同，但是合并逻辑有所不同。</p> 
<p>不同规则合并如下：</p> 
<ul><li>两个数组合并为一个数组，保留所有数组中的元素。</li><li>两个对象合并为一个对象，保留所有的键和值。</li><li>一个纯值会被包装成一个数组并作为数组进行合并。</li><li>对象和数组合并时，会将对象包装到一个数组中并作为数组进行合并。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_MERGE_PRESERVE('2', 'true'), // [2, true]
    JSON_MERGE_PRESERVE('[1, 2]', '[2, 3]'), // [1, 2, 2, 3]
	JSON_MERGE_PRESERVE('{"x": 1, "z": 7}', '{"x": 2, "y": 3}'), // {"x": [1, 2], "y": 3, "z": 7}
	JSON_MERGE_PRESERVE('{"x": 1, "z": 7}', '{"x": 2, "z": null}'); // {"x": [1, 2], "z": [7, null]}
</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E5%85%AD%E3%80%81JSON_OVERLAPS%20%E5%88%A4%E6%96%AD%E6%9C%89%E6%97%A0%E7%9B%B8%E5%90%8C%E9%94%AE%E6%88%96%E5%80%BC">十六、JSON_OVERLAPS 判断有无相同键或值</h2> 
<p>MySQL <code>JSON_OVERLAPS()</code> 函数检测两个 JSON 文档是否拥有任何一个相同键值对或数组元素。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_OVERLAPS(json1, json2)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json1</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>json2</code></em>：必需的。另一个 JSON 文档。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>两个JSON文档</em>重叠的内容返回 1，否则返回 0。</li><li>函数判断规则如下： 
  <ul><li>比较两个数组时，如果两个数组至少有一个相同的元素返回 <code>1</code>，否则返回 <code>0</code>。</li><li>比较两个对象时，如果两个对象至少有一个相同的键值对返回 <code>1</code>，否则返回 <code>0</code>。</li><li>比较两个纯值时，如果两个值相同返回 <code>1</code>，否则返回 <code>0</code>。</li><li>比较纯值和数组时，如果值是这个数组中的直接元素返回 <code>1</code>，否则返回 <code>0</code>。</li><li>比较纯值和对象的结果为 <code>0</code>。</li><li>比较数组和对象的结果为 <code>0</code>。</li></ul></li><li>返回 <code>NULL情况：</code>参数为 <code>NULL。</code></li><li><code>报错情况：</code>任意一个参数不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT 
	JSON_OVERLAPS('[1, 2, 3]', '[3, 4, 5]'),	    // 1
	JSON_OVERLAPS('[1, 2, [3]]', '[3, 4, 5]'),	    // 0
    JSON_OVERLAPS('{"x": 1}', '{"x": 1, "y": 2}'),	// 1
    JSON_OVERLAPS('{"x": 1}', '{"y": 2}'),	        // 0
    JSON_OVERLAPS('[1, 2, 3]', '3'),	            // 1
    JSON_OVERLAPS('[1, 2, [3]]', '3');	            // 0

</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E4%B8%83%E3%80%81JSON_PRETTY%20%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA">十七、JSON_PRETTY 格式化输出</h2> 
<p>MySQL <code>JSON_PRETTY()</code> 函数格式化输出一个 JSON 文档，以便更易于阅读。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_PRETTY(json)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档或 JSON 类型的值。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>格式化输出JSON文档，易于阅读。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT JSON_PRETTY('[1, 2, 3]');
[
  1,
  2,
  3
]

SELECT JSON_PRETTY('{"x": 1, "y": 2}');
{
  "x": 1,
  "y": 2
}</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E5%85%AB%E3%80%81JSON_REMOVE%20%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE">十八、JSON_REMOVE 删除指定数据</h2> 
<p>MySQL <code>JSON_REMOVE()</code> 函数从一个 JSON 文档中删除由路径指定的数据并返回修改后的 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_REMOVE(json, path[, path] ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。一个有效的路径表达式，它不能包含 <code>*</code> 或 <code>**</code>。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> 删除后的JSON文档。</em></li><li>返回 <code>NULL情况：</code>JSON 文档或者路径为 <code>NULL。</code></li><li><code>报错情况；</code> 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式或者等于 <code>$</code> 或者其中包含 <code>*</code> 或 <code>**</code></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT 
	JSON_REMOVE('[0, 1, 2, [3, 4]]', '$[0]', '$[2]'),	// [1, 2]
	JSON_REMOVE('{"x": 1, "y": 2}', '$.x');				// {"y": 2}</code></pre> 
<p> </p> 
<h2 id="%E5%8D%81%E4%B9%9D%E3%80%81JSON_REPLACE%20%E6%9B%BF%E6%8D%A2%E6%95%B0%E6%8D%AE">十九、JSON_REPLACE 替换数据</h2> 
<p>MySQL <code>JSON_REPLACE()</code> 函数在一个 JSON 文档中替换已存在的数据并返回新的 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_REPLACE(json, path, value[, path2, value2] ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。被修改的 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。一个有效的路径表达式，它不能包含 <code>*</code> 或 <code>**</code>。</p> </li><li> <p><em><code>value</code></em>：必需的。新的数据。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>替换后的JSON文档。</em></li><li>回 <code>NULL情况：</code>JSON 文档或者路径为 <code>NULL。</code></li><li>报错情况： 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式或者其中包含 <code>*</code> 或 <code>**。</code></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @arr = '[1, [2, 3]]';
SELECT 
	JSON_REPLACE(@arr, '$[0]', 0, '$[2]', 6),    // [0, [2, 3]]
	JSON_REPLACE(@arr, '$[0]', 0, '$[1]', 6);    // [0, 6]

SET @obj = '{"x": 1}';
SELECT 
    JSON_REPLACE(@obj, '$.x', 'true', '$.y', 'true');   // {"x": "true"}
	JSON_REPLACE(@obj, '$.x', '[1, 2]'),                // {"x": "[1, 2]"}
	JSON_REPLACE(@obj, '$.x', JSON_ARRAY(1,2));         // {"x": [1, 2]}</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E3%80%81JSON_SCHEMA_VALID%C2%A0%E9%AA%8C%E8%AF%81JSON%E6%96%87%E6%A1%A3">二十、JSON_SCHEMA_VALID 验证JSON文档</h2> 
<p>MySQL <code>JSON_SCHEMA_VALID()</code> 函数根据指定的 JSON 模式验证一个 JSON 文档，并返回 <code>1</code> 表是验证通过或者返回 <code>0</code> 表示验证不通过。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_SCHEMA_VALID(schema, json_doc)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>schema</code></em>：必需的。一个 JSON 模式。它必须是一个有效的 JSON 对象。</p> </li><li> <p><em><code>json_doc</code></em>：必需的。被验证的 JSON 文档。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em><code>1</code> ：JSON 文档通过了验证。</li><li> <code>0</code> ：JSON 文档没有通过验证。</li><li>返回 <code>NULL情况：</code>任何一个参数为 <code>NULL。</code></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @schema = '{
      "type": "object",
      "properties": {
        "x": {
          "type": "number",
          "minimum": -128,
          "maximum": 127
        },
        "y": {
          "type": "number",
          "minimum": -128,
          "maximum": 127
        }
      },
      "required": ["x", "y"]
    }';
	
SELECT 
	JSON_SCHEMA_VALID(@schema, '{"x": 1}'),        // 0
	JSON_SCHEMA_VALID(@schema, '{"x": 1, "y": 2}') // 1
</code></pre> 
<p> </p> 
<h2 id="%C2%A0%E4%BA%8C%E5%8D%81%E4%B8%80%E3%80%81JSON_SCHEMA_VALIDATION_REPORT%C2%A0%E9%AA%8C%E8%AF%81JSON%E6%96%87%E6%A1%A3">二十一、JSON_SCHEMA_VALIDATION_REPORT 验证JSON文档</h2> 
<p>MySQL <code>JSON_SCHEMA_VALIDATION_REPORT()</code> 函数根据指定的 JSON 模式验证一个 JSON 文档，并返回一个验证报告。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_SCHEMA_VALIDATION_REPORT(schema, json_doc)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>schema</code></em>：必需的。一个 JSON 模式。它必须是一个有效的 JSON 对象。</p> </li><li> <p><em><code>json_doc</code></em>：必需的。被验证的 JSON 文档。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>验证结果的报告。</li><li>{"valid": true}：验证通过。</li><li>{"valid": false, reason:'...'}：验证不通过，reason为不通过原因。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @schema = '{
      "type": "object",
      "properties": {
        "x": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "y": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        }
      },
      "required": ["x", "y"]
    }';
	
SELECT 
	JSON_SCHEMA_VALIDATION_REPORT(@schema, '{"x": 1}'), // {"valid": false, "reason": "The JSON document location '#' failed requirement 'required' at JSON Schema location '#'", "schema-location": "#", "document-location": "#", "schema-failed-keyword": "required"}
	JSON_SCHEMA_VALIDATION_REPORT(@schema, '{"x": 1, "y": 2}') // {"valid": true}
</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E4%BA%8C%E3%80%81JSON_SEARCH%20%E6%9F%A5%E6%89%BE">二十二、JSON_SEARCH 查找</h2> 
<p>MySQL <code>JSON_SEARCH()</code> 函数返回一个给定字符串在一个 JSON 文档中的路径。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_SEARCH(json, one_or_all, search_str)
JSON_SEARCH(json, one_or_all, search_str, escape_char)
JSON_SEARCH(json, one_or_all, search_str, escape_char, path)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>one_or_all</code></em>：必需的。可用值：<code>'one'</code>, <code>'all'</code>。 规则如下：</p> 
  <ul><li><code>'one'：</code>返回第一个匹配的路径。</li><li><code>'all'：</code>返回所有匹配的路径。所有的路径会包装在一个数组内返回。</li></ul></li><li> <p><em><code>search_str</code></em>：必需的。被搜索的字符串。 您可以在 <code>search_str</code> 参数中使用 <code>%</code> 和 <code>_</code> 通配符，就像 LIKE 一样：</p> 
  <ul><li><code>%</code> 匹配任意数量的任意字符。</li><li><code>_</code> 匹配一个任意字符。</li></ul></li><li> <p><em><code>escape_char</code></em>：可选的。 如果 <code>search_str</code> 中包含 <code>%</code> 和 <code>_</code>，需要在他们之前添加转移字符。默认是 <code>\</code>。</p> </li><li> <p><em><code>path</code></em>：可选的。只能在此路径下进行搜索。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>一个路径字符串或者由多个路径组成的数组。</li><li>返回 <code>NULL情况：</code> 
  <ul><li>未搜索到指定的字符串。</li><li>JSON 文档中不存在指定的 <code>path。</code></li><li>任意一个参数为 <code>NULL。</code></li></ul></li><li><code>报错情况：</code> 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @json = '{
      "type": "object",
      "properties": {
        "x": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "y": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        }
      },
      "required": ["x", "y"]
    }';
	
SELECT 
	JSON_SEARCH(@json, 'one','number'), // "$.properties.x.type"
	JSON_SEARCH(@json, 'all','number')  // ["$.properties.x.type", "$.properties.y.type"]
</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E4%B8%89%E3%80%81JSON_SET%C2%A0%E6%8F%92%E5%85%A5%E6%88%96%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE">二十三、JSON_SET 插入或更新数据</h2> 
<p>MySQL JSON_SET() 函数在一个 JSON 文档中插入或更新数据并返回新的 JSON 文档。它相当于是 JSON_INSERT() 和 JSON_REPLACE() 的组合。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_SET(json, path, value[, path2, value2] ...)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。被修改的 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。一个有效的路径表达式，它不能包含 <code>*</code> 或 <code>**</code>。</p> </li><li> <p><em><code>value</code></em>：必需的。要设置的数据。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>插入或更新数据并返回新的 JSON 文档。规则如下： 
  <ul><li>存在路径：更新。</li><li>不存在路径：添加。</li></ul></li><li>若<code>value</code> 为字符串：直接插入。</li><li>返回 <code>NULL情况：</code>JSON 文档或者路径为 <code>NULL。</code></li><li><code>报错情况：</code> 
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式或者其中包含 <code>*</code> 或 <code>**。</code></li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @obj = '{"x": 1}';
SELECT 
	JSON_SET(@obj, '$.x', '10', '$.y', '[1, 2]'),    // {"x": "10", "y": "[1, 2]"}
	JSON_SET(@obj, '$.x', '10', '$.y', '{"z": 2}'),  // {"x": "10", "y": "{\"z\": 2}"}
	JSON_SET(@obj, '$.x', '10', '$.y', CAST('[1, 2]' AS JSON)); // {"x": "10", "y": [1, 2]}</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E5%9B%9B%E3%80%81JSON_STORAGE_FREE%20%E9%87%8A%E6%94%BE%E7%A9%BA%E9%97%B4">二十四、JSON_STORAGE_FREE 释放空间</h2> 
<p>MySQL JSON_STORAGE_FREE() 函数返回一个 JSON 列在被 JSON_SET()、JSON_REPLACE() 或 JSON_REMOVE() 更新后所释放的空间。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_STORAGE_FREE(json)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。它可以是一个 JSON 字符串，或者一个 JSON 列。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>一个 JSON 列在被 JSON_SET()、JSON_REPLACE() 或 JSON_REMOVE() 更新后所释放的空间。它可以接受一个 JSON 字符串，或者一个 JSON 列作为参数。</li><li>返回 0 情况： 
  <ul><li>参数是一个 JSON 字符串。</li><li>列没有被更新过，或不是使用JSON_SET()、JSON_REPLACE() 或 JSON_REMOVE() 部分更新。</li><li>内容在更新后变的更大了<code>。</code></li></ul></li><li>返回更新后释放的空间：列（数据库表的列）被 JSON_SET()、JSON_REPLACE() 或 JSON_REMOVE() 部分更新。</li><li>返回 <code>NULL情况：</code>参数为 <code>NULL。</code></li><li><code>报错情况：json</code> 不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">DROP TABLE IF EXISTS test;
CREATE TABLE test (
    json_col JSON NOT NULL
);

INSERT INTO test
VALUES ('{"x": 1, "y": "99"}');

SELECT
    json_col,                    // {"x": 1, "y": "99"}
    JSON_STORAGE_SIZE(json_col), // 24
    JSON_STORAGE_FREE(json_col)  // 0
FROM
    test;
// {"x": 1, "y": "99"} ｜ 24  ｜  0


UPDATE test
SET json_col = JSON_REMOVE(json_col, '$.y');
SELECT
    json_col,                    // {"x": 1}
    JSON_STORAGE_SIZE(json_col), // 24
    JSON_STORAGE_FREE(json_col)  // 11
FROM
    test;</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E4%BA%94%E3%80%81JSON_STORAGE_SIZE%C2%A0%E5%8D%A0%E7%94%A8%E5%AD%97%E8%8A%82%E6%95%B0">二十五、JSON_STORAGE_SIZE 占用字节数</h2> 
<p>MySQL <code>JSON_STORAGE_SIZE()</code> 函数返回存储一个 JSON 文档的二进制表示所占用的字节数。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_STORAGE_SIZE(json)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。它可以是一个 JSON 字符串，或者一个 JSON 列。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>JSON 文档的二进制表示所占用的字节数。</li><li>返回 <code>NULL：</code>参数为 <code>NULL。</code></li><li>报错情况：<code>json</code> 不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_STORAGE_SIZE('100'),  // 3
    JSON_STORAGE_SIZE('"a"'),  // 3
	JSON_STORAGE_SIZE('true'), // 2
	JSON_STORAGE_SIZE('null'); // 2</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E5%85%AD%E3%80%81JSON_TABLE%C2%A0%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE">二十六、JSON_TABLE 提取数据</h2> 
<p>MySQL <code>JSON_TABLE()</code> 函数从一个指定的 JSON 文档中提取数据并返回一个具有指定列的关系表。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_TABLE(
    json,
    path COLUMNS (column[, column[, ...]])
)

column:
    name FOR ORDINALITY
    |  name type PATH string_path [on_empty] [on_error]
    |  name type EXISTS PATH string_path
    |  NESTED [PATH] path COLUMNS (column[, column[, ...]])

on_empty:
    {NULL | DEFAULT json_string | ERROR} ON EMPTY

on_error:
    {NULL | DEFAULT json_string | ERROR} ON ERROR
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。一个路径表达式。</p> </li><li> <p><em><code>column：</code></em>必需的。定义一个列。可以使用如下 4 中方式定义列：</p> 
  <ul><li><code>name FOR ORDINALITY</code>: 生成一个从 1 开始的计数器列，名字为 <code>name</code>。</li><li><code>name type PATH string_path [on_empty] [on_error]</code>: 将由路径表达式 <code>string_path</code> 指定的值放在名字为 <code>name</code> 的列中。</li><li><code>name type EXISTS PATH string_path</code>：根据 <code>string_path</code> 指定的位置是否有值将 <code>1</code> 或 <code>0</code> 放在名字为 <code>name</code> 的列中。</li><li><code>NESTED [PATH] path COLUMNS (column[, column[, ...]])</code>: 将内嵌的对象或者数组中的数据拉平放在一行中。</li></ul></li><li>on_empty：可选的。如果指定了，它决定了指定路径下没有数据时的返回值： 
  <ul><li>NULL ON EMPTY: 如果指定路径下没有数据，JSON_TABLE() 函数将使用 NULL，这是默认的行为。</li><li>DEFAULT value ON EMPTY: 如果指定路径下没有数据，JSON_TABLE() 函数将使用 value。</li><li>ERROR ON EMPTY: 如果指定路径下没有数据，JSON_TABLE() 函数将抛出一个错误。</li></ul></li><li>on_error：可选的。如果指定了，它决定了处理错误的逻辑： 
  <ul><li>NULL ON ERROR: 如果有错误，JSON_TABLE() 函数将使用 NULL，这是默认的行为。</li><li>DEFAULT value ON ERROR: 如果有错误，JSON_TABLE() 函数将使用 value。</li><li>ERROR ON ERROR: 如果有错误，JSON_TABLE() 函数将抛出一个错误。</li></ul></li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>具有指定列的关系表。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    *
FROM
    JSON_TABLE(
        '[{"x":10,"y":11}, {"y": 21}, {"x": 30}]',
        '$[*]'
        COLUMNS (
            id FOR ORDINALITY,
            x INT PATH '$.x' DEFAULT '100' ON EMPTY,
            y INT PATH '$.y'
        )
    ) AS t;


   id      x       y
+------+-------+--------+
|     1|     10|      11|
+-----------------------+
|     2|    100|      21|
+------+-------+--------+
|     2|     30|    NULL|
+------+-------+--------+

</code></pre> 
<p><em>示例说明：</em></p> 
<ul><li>路径表达式$[*]: 数组中的每个元素，也就是数组中的那两个对象。 
  <ul><li>$[0]：只提取 JSON 数组中的第 1 元素</li><li>$[1]：只提取 JSON 数组中的第 2 元素</li><li>以此类推</li></ul></li><li>COLUMNS 子句定义了关系表中的 3 个列： 
  <ul><li>id FOR ORDINALITY: 列名为 id，列的内容为从 1 开始的自增序列。</li><li>x INT PATH '$.x' DEFAULT '100' ON EMPTY: 当对象中不存在成员 x 或者 x 的值为空时要使用默认值 100。</li><li>y INT PATH '$.y: 列名为 y，列的内容是对应了对象中的成员 y。</li></ul></li><li>其中 $.x 和 $.y 中的 $ 代表了当前的上下文对象，也就是数组中的每个对象。</li></ul> 
<p id="拉平内嵌的数组"><em>拉平内嵌的数组示例：</em></p> 
<pre><code class="language-sql">SELECT
    *
FROM
    JSON_TABLE(
        '[{"x":10,"y":[11, 12]}, {"x":20,"y":[21, 22]}]',
        '$[*]'
        COLUMNS (
            x INT PATH '$.x',
            NESTED PATH '$.y[*]' COLUMNS (y INT PATH '$')
        )
    ) AS t;

    x     y    
+------+-------+
|   10 |   11  |
|   10 |   12  |
|   20 |   21  |
|   20 |   22  |
+------+-------+</code></pre> 
<p>示例说明：</p> 
<ul><li>NESTED PATH '$.y[*]' COLUMNS (y INT PATH '$')：展开 <code>y</code> 对应的数组，并将 <code>y</code> 数组中的每个元素放入名称为 <code>y</code> 的列中。</li></ul> 
<p id="拉平内嵌的对象"><em>拉平内嵌的对象：</em></p> 
<pre><code class="language-sql">SELECT
    *
FROM
    JSON_TABLE(
        '[{"x":10,"y":{"a":11,"b":12}},{"x":20,"y":{"a":21,"b":22}}]',
        '$[*]'
        COLUMNS (
            x INT PATH '$.x',
            NESTED PATH '$.y' COLUMNS (
                ya INT PATH '$.a',
                yb INT PATH '$.b'
            )
        )
    ) AS t;

    x       ya      yb   
+------+-------+-------+
|   10 |    11 |    12 |
|   20 |    21 |    22 |
+------+-------+-------+</code></pre> 
<p><em>示例说明：</em></p> 
<ul><li><code>NESTED PATH '$.y'</code> 子句将对象 <code>y</code> 中成员提取到 2 列： 
  <ul><li>成员 <code>a</code> 被提取到列 <code>ya。</code></li><li>成员 <code>b</code> 被提取到列 <code>yb。</code></li></ul></li></ul> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E4%B8%83%E3%80%81JSON_TYPE%20%E5%8F%96%E7%B1%BB%E5%9E%8B">二十七、JSON_TYPE 取类型</h2> 
<p>MySQL <code>JSON_TYPE()</code> 函数返回一个给定的 JSON 值的类型。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_TYPE(json_value)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json_value</code></em>：必需的。一个 JSON 值。</p> </li></ul> 
<p><em>返回值：（</em>一个 <code>utf8mb4</code> 字符串）</p> 
<ul><li><code>OBJECT</code>: JSON 对象。</li><li><code>ARRAY</code>: JSON 数组</li><li><code>BOOLEAN</code>: JSON 布尔值</li><li><code>NULL</code>: JSON <code>null</code> 值</li><li><code>INTEGER</code>: MySQL <code>TINYINT</code>, <code>SMALLINT</code>, <code>MEDIUMINT</code>,<code>INT</code> 和 <code>BIGINT</code> 类型的值</li><li><code>DOUBLE</code>: MySQL <code>DOUBLE</code>和 <code>FLOAT</code> 类型的值</li><li><code>DECIMAL</code>: MySQL <code>DECIMAL</code> 和 <code>NUMERIC</code> 类型的值</li><li><code>DATETIME</code>: MySQL <code>DATETIME</code> 和 <code>TIMESTAMP</code> 类型的值</li><li><code>DATE</code>: MySQL <code>DATE</code> 类型的值</li><li><code>TIME</code>: MySQL <code>TIME</code> 类型的值</li><li><code>STRING</code>: MySQL <code>CHAR</code>, <code>VARCHAR</code>, <code>TEXT</code>, <code>ENUM</code> 和 <code>SET</code></li><li><code>BLOB</code>: MySQL <code>BINARY</code>, <code>VARBINARY</code>, <code>BLOB</code> 和 <code>BIT</code></li><li><code>OPAQUE</code>: 以上之外的类型</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT 
    JSON_TYPE('true'),	// BOOLEAN
    JSON_TYPE('null'),	// NULL
    JSON_TYPE('"abc"');	// STRING</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E5%85%AB%E3%80%81JSON_VALID%20%E9%AA%8C%E8%AF%81%E6%9C%89%E6%A0%A1%E6%80%A7">二十八、JSON_VALID 验证有校性</h2> 
<p>MySQL <code>JSON_VALID()</code> 函数返回 0 和 1 来指示给定的参数是否是一个有效的 JSON 文档。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_VALID(str)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>str</code></em>：必需的。需要被验证的内容。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em>1：是JSON文档。</em></li><li><em>0：不是JSON文档。</em></li><li>返回 <code>NULL情况：</code>参数为 <code>NULL。</code></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT 
    JSON_VALID(1), 			  // 0
	JSON_VALID('1'),          // 1   
    JSON_VALID(true),         // 0
	JSON_VALID('true'),       // 1
    JSON_VALID('abc'),        // 0
	JSON_VALID('"abc"'),      // 1
	JSON_VALID('{"a": 1}'),   // 1
	JSON_VALID('{a: 1}');     // 0</code></pre> 
<p> </p> 
<h2 id="%E4%BA%8C%E5%8D%81%E4%B9%9D%E3%80%81JSON_VALUE%C2%A0%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E8%B7%AF%E5%BE%84%E7%9A%84%E5%80%BC">二十九、JSON_VALUE 提取指定路径的值</h2> 
<p>MySQL <code>JSON_VALUE()</code> 函数从一个指定的 JSON 文档中提取指定路径的值并返回。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_VALUE(json, path [RETURNING type] [{NULL | ERROR | DEFAULT value} ON EMPTY] [{NULL | ERROR | DEFAULT value} ON ERROR])
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>json</code></em>：必需的。一个 JSON 文档。</p> </li><li> <p><em><code>path</code></em>：必需的。一个路径表达式。</p> </li><li> <p><em><code>RETURNING type</code></em></p> <p>可选的。他决定了返回值的类型。您可以使用下面值中的一个：</p> 
  <ul><li><code>FLOAT</code></li><li><code>DOUBLE</code></li><li><code>DECIMAL</code></li><li><code>SIGNED</code></li><li><code>UNSIGNED</code></li><li><code>DATE</code></li><li><code>TIME</code></li><li><code>DATETIME</code></li><li><code>YEAR</code> (MySQL 8.0.22 and later)</li><li><code>CHAR</code></li><li><code>JSON</code></li></ul></li><li><em><code>{NULL | ERROR | DEFAULT value} ON EMPTY：</code></em>可选的。如果指定了，它决定了指定路径下没有数据的返回值： 
  <ul><li><code>NULL ON EMPTY</code>: 如果指定路径下没有数据，<code>JSON_VALUE()</code> 函数将返回 <code>NULL</code>，这是默认的行为。</li><li><code>DEFAULT value ON EMPTY</code>: 如果指定路径下没有数据，<code>JSON_VALUE()</code> 函数将返回 <code>value</code>。</li><li><code>ERROR ON EMPTY</code>: 如果指定路径下没有数据，<code>JSON_VALUE()</code> 函数将抛出一个错误。</li></ul></li><li><em><code>{NULL | ERROR | DEFAULT value} ON ERROR：</code></em>可选的。如果指定了，它决定了处理错误的逻辑： 
  <ul><li><code>NULL ON ERROR</code>: 如果有错误，<code>JSON_VALUE()</code> 函数将返回 <code>NULL</code>，这是默认的行为。</li><li><code>DEFAULT value ON ERROR</code>: 如果有错误，<code>JSON_VALUE()</code> 函数将返回 <code>value</code>。</li><li><code>ERROR ON ERROR</code>: 如果有错误，<code>JSON_VALUE()</code> 函数将抛出一个错误。</li></ul></li></ul> 
<p><em>返回值：</em></p> 
<ul><li>路径上的数据。</li><li>报错情况：  
  <ul><li><code>json</code> 不是有效的 JSON 文档。</li><li><code>path</code> 不是有效的路径表达式。</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SET @json = '[
  {
    "name": "cxian",
    "age": 22,
  },
  {
    "name": "jie",
    "age": 23  }
]';

SELECT 
    JSON_VALUE(@json, '$[0].age'), // 22
    JSON_VALUE(@json, '$[1].age'); // 23
    JSON_VALUE(@json, '$[1].age' RETURNING DECIMAL(9,2)), // 23.00
    JSON_VALUE(@json, '$[0].note' DEFAULT 'Nothing' ON EMPTY) // Nothing</code></pre> 
<p> </p> 
<h2 id="%E4%B8%89%E5%8D%81%E3%80%81MEMBER%20OF%20%E6%98%AF%E5%90%A6%E4%B8%BA%E6%95%B0%E7%BB%84%E7%9A%84%E5%85%83%E7%B4%A0">三十、MEMBER OF 是否为数组的元素</h2> 
<p>MySQL <code>MEMBER OF()</code> 函数检查一个指定的值是否是一个 JSON 数组中的元素。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">value MEMBER OF(value, json_array)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>value</code></em>：必需的。一个值。它可以是任意类型。</p> </li><li> <p><em><code>json_array</code></em>：必需的。一个 JSON 数组。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li>1：json_array中包含value，或 json_array为值且与value相等。</li><li>0：数组中不包含value。</li><li>报错情况：<code>json_array</code> 不是有效的 JSON 文档。</li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    1 MEMBER OF('[1, 2, "a"]'),               // 1
    'a' MEMBER OF('"a"'),                     // 1
    CAST('true' AS JSON) MEMBER OF('true')    // 1</code></pre> 
<p> </p> 
<h2 id="%E4%B8%89%E5%8D%81%E4%B8%80%E3%80%81JSON_QUOTE%20%E5%8C%85%E8%A3%85%E6%88%90JSON%E4%B8%B2">三十一、JSON_QUOTE 包装成JSON串</h2> 
<p>MySQL <code>JSON_QUOTE()</code> 函数使用双引号包装一个值，使其成为一个 JSON 字符串值。</p> 
<p><em>语法：</em></p> 
<pre><code class="language-sql">JSON_QUOTE(str)
</code></pre> 
<p><em>参数说明：</em></p> 
<ul><li> <p><em><code>str</code></em>：必需的。一个字符串。</p> </li></ul> 
<p><em>返回值：</em></p> 
<ul><li><em> </em>一个使用双引号包围的 JSON 字符串值。</li><li>返回 <code>NULL情况：</code>参数为 <code>NULL。</code></li><li>特殊字符将使用反斜杠转义： 
  <ul><li>\"：双引号 "</li><li>\b：退格字符</li><li>\f：换页符</li><li>\n：换行符</li><li>\r：回车符</li><li>\t：制表符</li><li>\\：反斜杠 \</li><li>\uXXXX：Unicode 值 XXXX 的 UTF-8 字节</li></ul></li></ul> 
<p><em>示例：</em></p> 
<pre><code class="language-sql">SELECT
    JSON_QUOTE('1'),       // "1"
    JSON_QUOTE('NULL'),    // "NULL"
    JSON_QUOTE('"NULL"')   // "\"NULL\""
</code></pre> 
<p></p> 
<p>    <span style="color:#be191c;"><span style="background-color:#fef2f0;">好了，今天分享到这里。希望你喜欢这次的探索之旅！不要忘记 "点赞" 和 "关注" 哦，我们下次见！🎈</span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0c181163d6e5788df745b6319e909972/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">区块链可投会议CCF B--DSN 2025 截止12.4 附2024年录用率</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8e6d8fa966cc5535d3156bf1df72c33e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue.js中的computed属性：高效的数据处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>