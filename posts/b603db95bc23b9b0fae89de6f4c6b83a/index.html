<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前端&#43;数据库&#43;djago入门(Djago部分) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b603db95bc23b9b0fae89de6f4c6b83a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="前端&#43;数据库&#43;djago入门(Djago部分)">
  <meta property="og:description" content="django的安装 在pycharm中安装即可
创建django项目 django项目会有一些默认的文件和文件夹
1. 在终端创建 （不测试了）
2. 在Pycharm中创建项目（不能是社区版pycharm） 新建项目，选型django项目
默认项目文件的介绍
3. APP 在Pycharm中创建app 使用pycharm中的terminal
创建新app01后的各文件功能 运行django 激活App01 1. 在django的项目文件夹中，打开setting.py文件，找到下图所示位置：
2.在App01文件夹中，打开 apps.py文件，找到Class的名称：(本示例)App01Config
3. 如上图所示，在列表最后加上&#39;app01.apps.App01Config&#39;
编写URL和视图函数对应关系 [urls.py]
编写URL和视图函数对应关系 1. 在项目文件urls.py中编写对应关系，
2. from app01 import views
这是从app01中，导入views文件（函数编写在该文件中）
3. path(&#39;index/&#39;, views.index),
这里是在对应url和函数。如果访问www.xxx.com/url,就会执行后面对应的函数（views.index）
启动django 命令行启动 在pycharm的命令框中
python manage.py runserver
Pycharm 启动
点击程序的运行按钮
url与返回页面的逻辑 1. 先在url.py中写url地址
2. 在views.py写对应关系
模板和静态文件 加载模板的方式，参照图片中的 def user_list(request)
加载图片的方式
1. 在app目录下创建static文件夹
2. 用static方法引入css和js的方法
模板语法 本质上：在HTML中写一些占位符，由数据对这些占位符进行替换和处理
case: 建tpl网页，及内容，并访问views中的列表 访问字典中的内容 列表里面套字典，访问的方式 请求和响应 重定向的返回方式 是Django将网页返回给浏览器，浏览器自己访问web页面。不是Django访问了web页面再返回给浏览器">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-19T20:28:29+08:00">
    <meta property="article:modified_time" content="2024-03-19T20:28:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前端&#43;数据库&#43;djago入门(Djago部分)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>django的安装</h3> 
<p>在pycharm中安装即可</p> 
<p><img alt="" height="302" src="https://images2.imgbox.com/f8/67/D6jRC0Dh_o.png" width="574"></p> 
<h4>创建django项目</h4> 
<p>django项目会有一些默认的文件和文件夹</p> 
<h5>1. 在终端创建</h5> 
<p>（不测试了）</p> 
<h5>2. 在Pycharm中创建项目（不能是社区版pycharm）</h5> 
<p>新建项目，选型django项目</p> 
<p><img alt="" height="335" src="https://images2.imgbox.com/fc/34/hcfXvN0O_o.png" width="531"></p> 
<p>默认项目文件的介绍</p> 
<p><img alt="" height="177" src="https://images2.imgbox.com/30/a4/PLkYyiie_o.png" width="490"></p> 
<h4> 3. APP</h4> 
<p> <img alt="" height="192" src="https://images2.imgbox.com/57/08/I3TRKr30_o.png" width="505"></p> 
<p><img alt="" height="402" src="https://images2.imgbox.com/0a/a2/v4FeAVc1_o.png" width="638"></p> 
<h5>在Pycharm中创建app</h5> 
<p>使用pycharm中的terminal</p> 
<h5><img alt="" height="313" src="https://images2.imgbox.com/7e/f4/rO7hTgV0_o.png" width="1200"> 创建新app01后的各文件功能</h5> 
<p><img alt="" height="303" src="https://images2.imgbox.com/b9/8c/2X0LOOpJ_o.png" width="506"></p> 
<h4>运行django</h4> 
<h5>激活App01</h5> 
<p>1. 在django的项目文件夹中，打开setting.py文件，找到下图所示位置：</p> 
<p><img alt="" height="264" src="https://images2.imgbox.com/47/98/guEP5aqW_o.png" width="559"></p> 
<p>2.在App01文件夹中，打开 apps.py文件，找到Class的名称：(本示例)App01Config</p> 
<p>3. 如上图所示，在列表最后加上'app01.apps.App01Config'</p> 
<p>编写URL和视图函数对应关系 [urls.py]</p> 
<h5>编写URL和视图函数对应关系</h5> 
<p>1. 在项目文件urls.py中编写对应关系，</p> 
<p>2. from app01 import views</p> 
<p>这是从app01中，导入views文件（函数编写在该文件中）</p> 
<p>3. path('index/', views.index),</p> 
<p>这里是在对应url和函数。如果访问www.xxx.com/url,就会执行后面对应的函数（views.index）</p> 
<p><img alt="" height="265" src="https://images2.imgbox.com/72/75/2u2QrCj3_o.png" width="616"></p> 
<p><img alt="" height="240" src="https://images2.imgbox.com/18/94/P8ZBRYY6_o.png" width="606"></p> 
<p></p> 
<h5>启动django </h5> 
<h6>命令行启动</h6> 
<p>在pycharm的命令框中</p> 
<blockquote> 
 <p>python manage.py runserver</p> 
</blockquote> 
<p>Pycharm 启动</p> 
<p>点击程序的运行按钮</p> 
<h5>url与返回页面的逻辑</h5> 
<p>1. 先在url.py中写url地址</p> 
<p>2.  在views.py写对应关系</p> 
<p><img alt="" height="311" src="https://images2.imgbox.com/1f/ed/Jk5SUZaT_o.png" width="508"></p> 
<p><img alt="" height="269" src="https://images2.imgbox.com/25/1a/3qAthcve_o.png" width="504"></p> 
<p></p> 
<p></p> 
<h4> 模板和静态文件</h4> 
<p>加载模板的方式，参照图片中的 def user_list(request)</p> 
<p><img alt="" height="223" src="https://images2.imgbox.com/8d/6e/XJVaq0KE_o.png" width="575"></p> 
<p> 加载图片的方式</p> 
<p><img alt="" height="212" src="https://images2.imgbox.com/a5/c3/07awKT3G_o.png" width="527"></p> 
<p>1. 在app目录下创建static文件夹</p> 
<p>2. 用static方法引入css和js的方法</p> 
<p><img alt="" height="678" src="https://images2.imgbox.com/c6/1a/nzpBGNVg_o.png" width="1200"></p> 
<p></p> 
<h5>模板语法</h5> 
<p>本质上：在HTML中写一些占位符，由数据对这些占位符进行替换和处理</p> 
<h5>case: 建tpl网页，及内容，并访问views中的列表</h5> 
<h5><img alt="" height="236" src="https://images2.imgbox.com/d0/24/AxN6Qm86_o.png" width="584"></h5> 
<h5> 访问字典中的内容</h5> 
<p><img alt="" height="260" src="https://images2.imgbox.com/5b/72/wxjoR71i_o.png" width="615"></p> 
<h5> 列表里面套字典，访问的方式</h5> 
<p><img alt="" height="241" src="https://images2.imgbox.com/87/74/hM1JYM5y_o.png" width="576"></p> 
<p></p> 
<h4>请求和响应</h4> 
<p></p> 
<p><img alt="" height="252" src="https://images2.imgbox.com/83/ef/6nycXgtQ_o.png" width="616"></p> 
<p><img alt="" height="208" src="https://images2.imgbox.com/34/3e/Ixed2BWe_o.png" width="619"></p> 
<p> <img alt="" height="388" src="https://images2.imgbox.com/a9/87/ETKa3MNi_o.png" width="581"></p> 
<h5>重定向的返回方式</h5> 
<p>是Django将网页返回给浏览器，浏览器自己访问web页面。不是Django访问了web页面再返回给浏览器</p> 
<h5>案例 用户登录</h5> 
<p></p> 
<p>urls.py</p> 
<pre><code class="language-python">from django.urls import path
from app01 import views

urlpatterns = [
   

    # 用户登录
    path('login/', views.login),


]</code></pre> 
<p>views.py </p> 
<pre><code class="language-python">def login(request):
    if request.method == "GET":
        return render(request, "login.html")
    else:
        print(request.POST)
        return HttpResponse("登录成功")</code></pre> 
<p>login.html</p> 
<pre><code class="language-html">&lt;body&gt;
    &lt;h1&gt;用户登录&lt;/h1&gt;
&lt;form method = "post" action="/login/"&gt;

    {%  csrf_token %}
    &lt;input type="text" name="user" placeholder="用户名"&gt;
    &lt;input type="password" name="pwd" placeholder="密码" &gt;
    &lt;input type= "submit" value="提交"/&gt;
&lt;/form&gt;

&lt;/body&gt;</code></pre> 
<h5>修改成登录跳转新页面，登录失败重新输入账号密码</h5> 
<p>views.py</p> 
<pre><code class="language-python">def login(request):
    if request.method == "GET":
        return render(request, "login.html")
    
    else:
    #     print(request.POST)
        username = request.POST.get("user")
        password = request.POST.get("pwd")

        if username == "host" and password == "123":
            # return HttpResponse("登录成功")
            return redirect("https://www.chinaunicom.com.cn/")
        
        else:
            # return HttpResponse("登录失败")
            return render(request, 'login.html', {"error_msg": "用户名或密码错误"})</code></pre> 
<h5> login.html</h5> 
<pre><code class="language-html">&lt;body&gt;
    &lt;h1&gt;用户登录&lt;/h1&gt;
&lt;form method = "post" action="/login/"&gt;

    {%  csrf_token %}
    &lt;input type="text" name="user" placeholder="用户名"&gt;
    &lt;input type="password" name="pwd" placeholder="密码" &gt;
    &lt;input type= "submit" value="提交"/&gt;
    &lt;span style="color: red"&gt;{<!-- -->{ error_msg }}&lt;/span&gt;
&lt;/form&gt;

&lt;/body&gt;</code></pre> 
<h4>数据库操作</h4> 
<p>Django开发操作数据库更简单,内部提供了ORM框架</p> 
<h5><a name="t25"></a><a id="_597"></a>安装第三方模块</h5> 
<blockquote> 
 <p>mysqlclient</p> 
</blockquote> 
<h5>ORM</h5> 
<p>ORM可以帮助我们做两件事:</p> 
<ul><li>创建/修改/删除数据库中的表(无法创建数据库)</li><li>操作表中的数据</li></ul> 
<h6>Django连接数据库</h6> 
<p>修改<code>settings.py文件</code></p> 
<p><img alt="" height="385" src="https://images2.imgbox.com/dd/d6/1Vo5ZlQN_o.png" width="627"></p> 
<p>增加如下内容： </p> 
<blockquote> 
 <pre>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME':'bruce01',
        'USER': 'root',
        'PASSWORD': '',
        'HOST': '127.0.0.1',
        'PORT': 3306,
    }
}
</pre> 
</blockquote> 
<h6>Django操作表</h6> 
<ul><li>创建表</li><li>删除表</li><li>修改表</li></ul> 
<p>修改models.py文件</p> 
<p><img alt="" height="319" src="https://images2.imgbox.com/4a/99/jgY9G4M5_o.png" width="508"></p> 
<blockquote> 
 <pre>class UserInfo(models.Model):
    name = models.CharField(max_length=20)
    password = models.CharField(max_length=20)
    age = models.IntegerField() </pre> 
</blockquote> 
<p>在服务器中项目根目录下执行命令(注册APP)</p> 
<blockquote> 
 <p>python manage.py makemigrations<br> python manage.py migrate </p> 
</blockquote> 
<p> <img alt="" height="205" src="https://images2.imgbox.com/bb/c6/lXyuH2VP_o.png" width="679"></p> 
<p>查看Mysql数据库</p> 
<p><img alt="" height="406" src="https://images2.imgbox.com/b0/2d/g2gvkesk_o.png" width="361"></p> 
<h5>再写一张表</h5> 
<p><img alt="" height="353" src="https://images2.imgbox.com/37/e3/5D6KWkJ9_o.png" width="579"></p> 
<p>在服务器中项目根目录下再次执行命令(注册APP)</p> 
<blockquote> 
 <p>python manage.py makemigrations<br> python manage.py migrate </p> 
</blockquote> 
<h5>删除表的某一行</h5> 
<p>这是userinfo的原表</p> 
<p><img alt="" height="192" src="https://images2.imgbox.com/b9/b4/1jMYNc3T_o.png" width="570"></p> 
<p>注释掉不想要的行</p> 
<blockquote> 
 <pre>class UserInfo(models.Model):
    name = models.CharField(max_length=20)
    password = models.CharField(max_length=20)
    # age = models.IntegerField()</pre> 
</blockquote> 
<p>在服务器中项目根目录下再次执行命令(注册APP)</p> 
<blockquote> 
 <p>python manage.py makemigrations<br> python manage.py migrate </p> 
</blockquote> 
<p><img alt="" height="235" src="https://images2.imgbox.com/d9/f8/XTCZx5ww_o.png" width="823"></p> 
<h5>添加列</h5> 
<p>修改表的话,如果原表中存有数据,此时如果增加一个新的列,需要设定一个默认值 </p> 
<p><img alt="" height="201" src="https://images2.imgbox.com/ef/a1/z1G0LYHT_o.png" width="522"></p> 
<p>再次执行下面命令，会出现选择，1是提供一个预设值，2是手动输入一个默认值</p> 
<blockquote> 
 <p>python manage.py makemigrations</p> 
</blockquote> 
<p><img alt="" height="229" src="https://images2.imgbox.com/2c/76/Q7VILw58_o.png" width="1200"></p> 
<p>下图是手动输入默认值（选择2，回车后会退出，再写入下面的默认值）</p> 
<p><img alt="" height="244" src="https://images2.imgbox.com/76/c7/am5C2nMy_o.png" width="663"></p> 
<p>之后再运行下面代码，就会将新的列插入进来</p> 
<blockquote> 
 <p>python manage.py migrate </p> 
</blockquote> 
<p>允许为空</p> 
<pre><code class="language-python">class UserInfo(models.Model):
    name = models.CharField(max_length=20)
    password = models.CharField(max_length=20)
    age = models.IntegerField()
    # 新增列
    size = models.IntegerField(default=2)
    # 允许为空
    data = models.IntegerField(null=True, blank=True)</code></pre> 
<h5>操作表中的数据</h5> 
<p>新增一行数据</p> 
<pre><code class="language-python">class UserInfo(models.Model):
    name = models.CharField(max_length=20)
    password = models.CharField(max_length=20)
    age = models.IntegerField(default=2)
    
class Department(models.Model):
    title = models.CharField(max_length=16)


# 新建数据
# 本质：insert into app01_department(title)values()
Department.objects.create(title="销售部")


UserInfo.objects.create(name="bruce",password="123",age="18")</code></pre> 
<h5>在Django建url访问操作数据表</h5> 
<p>新增url（编辑urls.py文件）</p> 
<pre><code class="language-python">from django.urls import path
from app01 import views

urlpatterns = [
    # path('admin/', admin.site.urls),
    # path('index_app/', views.index_app),
    # path('user_list/', views.user_list),
    # path('tpl/', views.tpl),
    # path('something/', views.something),
    # path('login/', views.login),
    path('orm/', views.orm),
]</code></pre> 
<p>编辑views.py</p> 
<pre><code class="language-python">from app01.models import Department


def orm(request):
    # 新建数据
    Department.objects.create(title="123")


    return HttpResponse("成功")</code></pre> 
<p>models.py文件如下：</p> 
<p><img alt="" height="360" src="https://images2.imgbox.com/42/e7/72P5uwTN_o.png" width="488"></p> 
<p> 网页运行结果如下： </p> 
<p><img alt="" height="121" src="https://images2.imgbox.com/1f/18/iqtbkYaK_o.png" width="505"></p> 
<p> 删除数据(还是在views.py文件中)</p> 
<pre><code class="language-python">def orm(request):
    # 新建数据
    Department.objects.create(title="123")

    #删除数据
    Department.objects.filter(id=2).delete()
    # 全部删除
    Department.objects.all().delete()
    return HttpResponse("成功")</code></pre> 
<p>显示数据</p> 
<p>最下方会显示表中的行，此时是一个对象，不能显示行的全部内容</p> 
<p><img alt="" height="365" src="https://images2.imgbox.com/71/a6/mY1BKFfv_o.png" width="558"></p> 
<p>用循环查询，就能看到对象中的值 </p> 
<pre><code class="language-python">def orm(request):
    # 新建数据
    Department.objects.create(title="123")

    # 删除数据
    # Department.objects.filter(id=2).delete()
    # 全部删除
    # Department.objects.all().delete()
    # 获取数据
    data_list = Department.objects.all()
    print(data_list)
    for obj in data_list:
        print(obj.title)

    return HttpResponse("成功")</code></pre> 
<p> 更新数据，</p> 
<pre><code class="language-python">from app01.models import Department


def orm(request):
    # 新建数据
    # Department.objects.create(title="123")

    # 删除数据
    # Department.objects.filter(id=2).delete()
    # 全部删除
    # Department.objects.all().delete()
    # 获取数据
    # data_list = Department.objects.all()
    # print(data_list)
    # for obj in data_list:
    #     print(obj.title)
    # 更新数据
    Department.objects.all().update(title="新世界")
    return HttpResponse("成功")</code></pre> 
<p>单独更新某个数值的方式，'name'是列索引</p> 
<blockquote> 
 <p>UserInfo.objects.filter(name="bruce").update(age=18)<br>  </p> 
</blockquote> 
<p></p> 
<h5>项目报错：运行django项目文件，非py文件即可解决 </h5> 
<p><img alt="" height="416" src="https://images2.imgbox.com/aa/6f/XyrB5GBX_o.png" width="530"></p> 
<p></p> 
<h4>案例：用户管理</h4> 
<h5>1. 展示用户列表</h5> 
<ul><li>url</li><li>函数</li></ul> 
<p>- 获取所有用户信息</p> 
<p>- HTML渲染</p> 
<p>网页自动获取数据库表格内容</p> 
<p>views.py文件内容</p> 
<pre><code class="language-python">from django.shortcuts import render, HttpResponse, redirect



from app01.models import UserInfo
def info_list(request):
    # 1.获取数据库中所有的用户信息
    data_list = UserInfo.objects.all()
    print(data_list)
    # for item in data_list:
    #     item.id =
    return render(request, "info_list.html",{"data_list":data_list})
</code></pre> 
<p>user_info.html </p> 
<pre><code class="language-html">&lt;body&gt;
&lt;h1&gt;INFO列表&lt;/h1&gt;
&lt;table &gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;ID&lt;/th&gt;
            &lt;th&gt;姓名&lt;/th&gt;
            &lt;th&gt;密码&lt;/th&gt;
            &lt;th&gt;年龄&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    {%  for obj in data_list %}
        &lt;tr&gt;
            &lt;td&gt;{<!-- -->{ obj.id }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.name }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.password }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.age }}&lt;/td&gt;

        &lt;/tr&gt;
    {% endfor %}
    &lt;/tbody&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>urls.py </p> 
<pre><code class="language-python">urlpatterns = [
   
    path('Info/list/', views.info_list),
]</code></pre> 
<h5 style="background-color:transparent;">2. 添加用户</h5> 
<p>view.py</p> 
<pre><code class="language-python">from django.shortcuts import render, HttpResponse, redirect






from app01.models import UserInfo
def info_list(request):
    # 1.获取数据库中所有的用户信息
    data_list = UserInfo.objects.all()
    print(data_list)

    return render(request, "info_list.html",{"data_list":data_list})


def info_add(request):
    if request.method == "GET":
        return render(request,'info_add.html')

    # 获取用户提交的数据
    user = request.POST.get("user")
    pwd = request.POST.get("password")
    age = request.POST.get("age")

    # 添加到数据库
    UserInfo.objects.create(name=user, password=pwd, age=age)

    return HttpResponse("添加成功")</code></pre> 
<p>新建 info_add.html</p> 
<pre><code class="language-html">&lt;body&gt;
&lt;h1&gt;添加用户&lt;/h1&gt;
&lt;form method="post" action="/info/add/"&gt;
    {% csrf_token %}
    &lt;input type="text" name="user" placeholder="用户名"&gt;
    &lt;input type="text" name="password" placeholder="密码"&gt;
    &lt;input type="text" name="age" placeholder="年龄"&gt;
    &lt;input type="submit" value="提交"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>urls.py</p> 
<pre><code class="language-python">urlpatterns = [
    
    path('Info/list/', views.info_list),
    path('Info/add/', views.info_add),

]</code></pre> 
<p>上面的程序可能在url的大小写上有问题，下面的版本测试正常</p> 
<p>在info_list界面，加上一个“添加“按钮，当点击添加按钮时，跳转到info_add界面，可添加新用户</p> 
<p>views.py</p> 
<pre><code class="language-python">rom django.shortcuts import render, HttpResponse, redirect

from app01.models import UserInfo
def info_list(request):
    # 1.获取数据库中所有的用户信息
    data_list = UserInfo.objects.all()
    print(data_list)

    return render(request, "info_list.html", {"data_list": data_list})


def info_add(request):
    if request.method == "GET":
        return render(request, 'info_add.html')

    # 获取用户提交的数据
    user = request.POST.get("user")
    pwd = request.POST.get("password")
    age = request.POST.get("age")

    # 添加到数据库
    UserInfo.objects.create(name=user, password=pwd, age=age)

    return HttpResponse("添加成功")
</code></pre> 
<p>info_add.html</p> 
<pre><code class="language-html">&lt;body&gt;
&lt;h1&gt;添加用户&lt;/h1&gt;
&lt;form method="post" action="/Info/add/"&gt;
    {% csrf_token %}
    &lt;input type="text" name="user" placeholder="用户名"&gt;
    &lt;input type="text" name="password" placeholder="密码"&gt;
    &lt;input type="text" name="age" placeholder="年龄"&gt;
    &lt;input type="submit" value="提交"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>info_list.html</p> 
<pre><code class="language-html">&lt;h1&gt;INFO列表&lt;/h1&gt;
{#添加一个”添加“按钮，点击时跳转到添加用户界面#}
&lt;a href="http://127.0.0.1:8000/Info/add/"&gt;添加&lt;/a&gt;

&lt;table &gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;ID&lt;/th&gt;
            &lt;th&gt;姓名&lt;/th&gt;
            &lt;th&gt;密码&lt;/th&gt;
            &lt;th&gt;年龄&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    {%  for obj in data_list %}
        &lt;tr&gt;
            &lt;td&gt;{<!-- -->{ obj.id }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.name }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.password }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.age }}&lt;/td&gt;

        &lt;/tr&gt;
    {% endfor %}
    &lt;/tbody&gt;
&lt;/table&gt;
&lt;/body&gt;</code></pre> 
<p>urls.py</p> 
<pre><code class="language-python">from django.urls import path
from app01 import views

urlpatterns = [
    
    path('Info/list/', views.info_list),
    path('Info/add/', views.info_add),

]</code></pre> 
<h5>删除用户</h5> 
<p>urls.py</p> 
<pre><code class="language-python">urlpatterns = [

    path('Info/list/', views.info_list),
    path('Info/add/', views.info_add),
    path('Info/delete/', views.info_delete),

]</code></pre> 
<p>views.py</p> 
<pre><code class="language-python">from django.shortcuts import render, HttpResponse, redirect

from app01.models import UserInfo
def info_list(request):
    # 1.获取数据库中所有的用户信息
    data_list = UserInfo.objects.all()
    print(data_list)

    return render(request, "info_list.html", {"data_list": data_list})


def info_add(request):
    if request.method == "GET":
        return render(request, 'info_add.html')

    # 获取用户提交的数据
    user = request.POST.get("user")
    pwd = request.POST.get("password")
    age = request.POST.get("age")

    # 添加到数据库
    UserInfo.objects.create(name=user, password=pwd, age=age)

    return HttpResponse("添加成功")


def info_delete(request):
    nid = request.GET.get("nid")
    UserInfo.objects.filter(id=nid).delete()
    return HttpResponse("删除成功")


</code></pre> 
<p>在网页中输入下面地址，nid=X（X表示删除的id值）</p> 
<p><img alt="" height="192" src="https://images2.imgbox.com/f4/cd/NEkAsEmA_o.png" width="548"></p> 
<p>自动删除行数据（通过增加一列删除按钮）</p> 
<p> urls.py</p> 
<pre><code class="language-python">urlpatterns = [

    path('Info/list/', views.info_list),
    path('Info/add/', views.info_add),
    path('Info/delete/', views.info_delete),

]</code></pre> 
<p>info_list.html</p> 
<pre><code class="language-html">&lt;body&gt;
&lt;h1&gt;INFO列表&lt;/h1&gt;
{#添加一个”添加“按钮，点击时跳转到添加用户界面#}
&lt;a href="http://127.0.0.1:8000/Info/add/"&gt;添加&lt;/a&gt;

&lt;table &gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;ID&lt;/th&gt;
            &lt;th&gt;姓名&lt;/th&gt;
            &lt;th&gt;密码&lt;/th&gt;
            &lt;th&gt;年龄&lt;/th&gt;
{#            增加一列操作栏，用来删除数据#}
            &lt;th&gt;操作&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    {%  for obj in data_list %}
        &lt;tr&gt;
            &lt;td&gt;{<!-- -->{ obj.id }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.name }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.password }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ obj.age }}&lt;/td&gt;
{#            给每行添加一个删除按钮#}
            &lt;td&gt;
{#                点击删除按钮，跳转到删除的页面，id设置为自动获取当前行的id值#}
                &lt;a href="http://127.0.0.1:8000/Info/delete/?nid={<!-- -->{ obj.id }}"&gt;删除&lt;/a&gt;
            &lt;/td&gt;

        &lt;/tr&gt;
    {% endfor %}
    &lt;/tbody&gt;
&lt;/table&gt;
&lt;/body&gt;</code></pre> 
<p>info_add.html</p> 
<pre><code class="language-html">&lt;body&gt;
&lt;h1&gt;添加用户&lt;/h1&gt;
&lt;form method="post" action="/Info/add/"&gt;
    {% csrf_token %}
    &lt;input type="text" name="user" placeholder="用户名"&gt;
    &lt;input type="text" name="password" placeholder="密码"&gt;
    &lt;input type="text" name="age" placeholder="年龄"&gt;
    &lt;input type="submit" value="提交"&gt;
&lt;/form&gt;

&lt;/body&gt;</code></pre> 
<p>views.py</p> 
<pre><code class="language-python">from django.shortcuts import render, HttpResponse, redirect

from app01.models import UserInfo
def info_list(request):
    # 1.获取数据库中所有的用户信息
    data_list = UserInfo.objects.all()
    print(data_list)

    return render(request, "info_list.html", {"data_list": data_list})


def info_add(request):
    if request.method == "GET":
        return render(request, 'info_add.html')

    # 获取用户提交的数据
    user = request.POST.get("user")
    pwd = request.POST.get("password")
    age = request.POST.get("age")

    # 添加到数据库
    UserInfo.objects.create(name=user, password=pwd, age=age)

    return HttpResponse("添加成功")


#手动输入url来删除标签
def info_delete(request):
    nid = request.GET.get("nid")
    UserInfo.objects.filter(id=nid).delete()
    return HttpResponse("删除成功")
</code></pre> 
<p>修改views.py最后一行，让重新返回用户界面</p> 
<pre><code class="language-html">def info_delete(request):
    nid = request.GET.get("nid")
    UserInfo.objects.filter(id=nid).delete()
    # return HttpResponse("删除成功")
    # 重新返回用户界面
    return redirect("/Info/list/")</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b8360f7d2758f4935256a2e33b8a802/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">可视化工具 Another-Redis-Desktop-Manager 的安装与使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/83dd82973401dc2f2276e510a057c91d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python使用whisper实现语音识别（ASR）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>