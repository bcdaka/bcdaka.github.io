<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot 整合 Spring AI 实现项目接入ChatGPT(OpenAl的调用，开发属于你自己Al，体验Al的乐趣)本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/36f30f0c722442fae0fadc4654240105/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spring Boot 整合 Spring AI 实现项目接入ChatGPT(OpenAl的调用，开发属于你自己Al，体验Al的乐趣)本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章">
  <meta property="og:description" content="目录
前言
Spring Al与Springboot整合的步骤（本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章）
第一步：建项目：创建一个Spring Boot项目(JDK17起步)；
第二步：加依赖
2.1 加入spring-ai-openai-spring-boot-starter依赖； 2.3 配置项目依赖下载的仓库：(因为spring ai在中心仓库还没有依赖，所以需要去网站下载)
第三步：配文件(这个的api -key就是你自己的，如果没有私信我即可)
第四步： 聊天功能写具体的代码实现
4.1 因为所有的接口的父接口都继承与Model，可以看到聊天方式的实现就是注入OpenAiChatModel 因为这个springboot自动装配的功能，只需要注入即可
第一种： 聊天的第一种实现方式（调用call方法，直接传入msg，这个叫做同步API）
5.1 运行程序结果
第二种 聊天的程序的第二种实现方式（调用call方法，new一个Prompt对象再传入msg）
6.1 运行程序结果​编辑
第三种：聊天的程序的第三种实现方式（比上一个方法多了一个关于gpt参数的设置）
7.1 运行程序结果
第四种：聊天的程序的第三种实现方式（调用stream方法，用法和call一样，只不过返回值不一样,Stream返回的是Fiux，叫做数据的序列一序列的数据，一个一个的数据返回，调用Stream叫做流式API）
前言 随着人工智能技术的迅猛发展，越来越多的应用程序开始集成人工智能功能，从而提供更智能、更个性化的体验。诸如ChatGPT等开放性大型语言模型的出现，使得自然语言处理和对话系统的开发变得更加便捷和普及。这些技术已经在社交媒体、客户服务、教育等领域展示出巨大的潜力，对于提升用户体验和提高工作效率起到了关键作用。
Spring Al的官网：Spring | Home
Spring AI提供的API支持跨人工智能提供商的 聊天，文本到图像，和嵌入模型等，同时支持同步和流API选项；
开发springAl程序的前期准备准备工作
本机电脑要可以访问OpenAI网站 https://openai.com/；要有OpenAI的API Key；（注册账号或者购买，如果没有可以私信联系我） Spring Al与Springboot整合的步骤（本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章） 第一步：建项目：创建一个Spring Boot项目(JDK17起步)； 第二步：加依赖 2.1 加入spring-ai-openai-spring-boot-starter依赖； &lt;dependency&gt; &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt; &lt;artifactId&gt;spring-ai-openai-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; 2.2 继承父项目：
&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt; &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt; &lt;version&gt;${spring-ai.version}&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; 2.3 配置项目依赖下载的仓库：(因为spring ai在中心仓库还没有依赖，所以需要去网站下载) &lt;repositories&gt; &lt;repository&gt; &lt;id&gt;spring-milestones&lt;/id&gt; &lt;name&gt;Spring Milestones&lt;/name&gt; &lt;url&gt;https://repo.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-03T11:15:29+08:00">
    <meta property="article:modified_time" content="2024-07-03T11:15:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot 整合 Spring AI 实现项目接入ChatGPT(OpenAl的调用，开发属于你自己Al，体验Al的乐趣)本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:40px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="Spring%20Al%E4%B8%8ESpringboot%E6%95%B4%E5%90%88%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%88%E6%9C%AC%E6%96%87%E4%BB%85%E8%AE%B2%E8%A7%A3%E8%81%8A%E5%A4%A9%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%85%B3%E4%BA%8Egpt%E7%9A%84%E5%85%B6%E4%BB%96%E4%B8%9C%E8%A5%BF%EF%BC%8C%E5%8F%82%E8%80%83%E6%8E%A5%E4%B8%8B%E6%9D%A5%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%89-toc" style="margin-left:40px;"><a href="#Spring%20Al%E4%B8%8ESpringboot%E6%95%B4%E5%90%88%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%88%E6%9C%AC%E6%96%87%E4%BB%85%E8%AE%B2%E8%A7%A3%E8%81%8A%E5%A4%A9%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%85%B3%E4%BA%8Egpt%E7%9A%84%E5%85%B6%E4%BB%96%E4%B8%9C%E8%A5%BF%EF%BC%8C%E5%8F%82%E8%80%83%E6%8E%A5%E4%B8%8B%E6%9D%A5%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%89" rel="nofollow">Spring Al与Springboot整合的步骤（本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章）</a></p> 
<p id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AASpring%20Boot%E9%A1%B9%E7%9B%AE(JDK17%E8%B5%B7%E6%AD%A5)%EF%BC%9B-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AASpring%20Boot%E9%A1%B9%E7%9B%AE%28JDK17%E8%B5%B7%E6%AD%A5%29%EF%BC%9B" rel="nofollow">第一步：建项目：创建一个Spring Boot项目(JDK17起步)；</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%8A%A0%E4%BE%9D%E8%B5%96-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%8A%A0%E4%BE%9D%E8%B5%96" rel="nofollow">第二步：加依赖</a></p> 
<p id="2.1%20%E5%8A%A0%E5%85%A5spring-ai-openai-spring-boot-starter%E4%BE%9D%E8%B5%96%EF%BC%9B%C2%A0-toc" style="margin-left:120px;"><a href="#2.1%20%E5%8A%A0%E5%85%A5spring-ai-openai-spring-boot-starter%E4%BE%9D%E8%B5%96%EF%BC%9B%C2%A0" rel="nofollow">2.1 加入spring-ai-openai-spring-boot-starter依赖； </a></p> 
<p id="2.3%C2%A0%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E4%B8%8B%E8%BD%BD%E7%9A%84%E4%BB%93%E5%BA%93%EF%BC%9A(%E5%9B%A0%E4%B8%BAspring%20ai%E5%9C%A8%E4%B8%AD%E5%BF%83%E4%BB%93%E5%BA%93%E8%BF%98%E6%B2%A1%E6%9C%89%E4%BE%9D%E8%B5%96%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%8E%BB%E7%BD%91%E7%AB%99%E4%B8%8B%E8%BD%BD)-toc" style="margin-left:120px;"><a href="#2.3%C2%A0%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E4%B8%8B%E8%BD%BD%E7%9A%84%E4%BB%93%E5%BA%93%EF%BC%9A%28%E5%9B%A0%E4%B8%BAspring%20ai%E5%9C%A8%E4%B8%AD%E5%BF%83%E4%BB%93%E5%BA%93%E8%BF%98%E6%B2%A1%E6%9C%89%E4%BE%9D%E8%B5%96%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%8E%BB%E7%BD%91%E7%AB%99%E4%B8%8B%E8%BD%BD%29" rel="nofollow">2.3 配置项目依赖下载的仓库：(因为spring ai在中心仓库还没有依赖，所以需要去网站下载)</a></p> 
<p id="%C2%A0%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%85%8D%E6%96%87%E4%BB%B6(%E8%BF%99%E4%B8%AA%E7%9A%84api%20-key%E5%B0%B1%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E7%A7%81%E4%BF%A1%E6%88%91%E5%8D%B3%E5%8F%AF)-toc" style="margin-left:40px;"><a href="#%C2%A0%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%85%8D%E6%96%87%E4%BB%B6%28%E8%BF%99%E4%B8%AA%E7%9A%84api%20-key%E5%B0%B1%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E7%A7%81%E4%BF%A1%E6%88%91%E5%8D%B3%E5%8F%AF%29" rel="nofollow"> 第三步：配文件(这个的api -key就是你自己的，如果没有私信我即可)</a></p> 
<p id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%20%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD%E5%86%99%E5%85%B7%E4%BD%93%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-toc" style="margin-left:40px;"><a href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%20%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD%E5%86%99%E5%85%B7%E4%BD%93%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0" rel="nofollow">第四步： 聊天功能写具体的代码实现</a></p> 
<p id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A04.1%20%E5%9B%A0%E4%B8%BA%E6%89%80%E6%9C%89%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%88%B6%E6%8E%A5%E5%8F%A3%E9%83%BD%E7%BB%A7%E6%89%BF%E4%B8%8EModel%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%81%8A%E5%A4%A9%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%B0%B1%E6%98%AF%E6%B3%A8%E5%85%A5OpenAiChatModel%20%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AAspringboot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%B3%A8%E5%85%A5%E5%8D%B3%E5%8F%AF-toc" style="margin-left:80px;"><a href="#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A04.1%20%E5%9B%A0%E4%B8%BA%E6%89%80%E6%9C%89%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%88%B6%E6%8E%A5%E5%8F%A3%E9%83%BD%E7%BB%A7%E6%89%BF%E4%B8%8EModel%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%81%8A%E5%A4%A9%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%B0%B1%E6%98%AF%E6%B3%A8%E5%85%A5OpenAiChatModel%20%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AAspringboot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%B3%A8%E5%85%A5%E5%8D%B3%E5%8F%AF" rel="nofollow">        4.1 因为所有的接口的父接口都继承与Model，可以看到聊天方式的实现就是注入OpenAiChatModel 因为这个springboot自动装配的功能，只需要注入即可</a></p> 
<p id="%C2%A0%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%C2%A0%E8%81%8A%E5%A4%A9%E7%9A%84%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8call%E6%96%B9%E6%B3%95%EF%BC%8C%E7%9B%B4%E6%8E%A5%E4%BC%A0%E5%85%A5msg%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%8F%AB%E5%81%9A%E5%90%8C%E6%AD%A5API%EF%BC%89-toc" style="margin-left:80px;"><a href="#%C2%A0%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%C2%A0%E8%81%8A%E5%A4%A9%E7%9A%84%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8call%E6%96%B9%E6%B3%95%EF%BC%8C%E7%9B%B4%E6%8E%A5%E4%BC%A0%E5%85%A5msg%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%8F%AB%E5%81%9A%E5%90%8C%E6%AD%A5API%EF%BC%89" rel="nofollow"> 第一种： 聊天的第一种实现方式（调用call方法，直接传入msg，这个叫做同步API）</a></p> 
<p id="%C2%A0%20%C2%A05.1%20%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C-toc" style="margin-left:120px;"><a href="#%C2%A0%20%C2%A05.1%20%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C" rel="nofollow">   5.1 运行程序结果</a></p> 
<p id="%C2%A0%E7%AC%AC%E4%BA%8C%E7%A7%8D%C2%A0%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8call%E6%96%B9%E6%B3%95%EF%BC%8Cnew%E4%B8%80%E4%B8%AAPrompt%E5%AF%B9%E8%B1%A1%E5%86%8D%E4%BC%A0%E5%85%A5msg%EF%BC%89-toc" style="margin-left:80px;"><a href="#%C2%A0%E7%AC%AC%E4%BA%8C%E7%A7%8D%C2%A0%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8call%E6%96%B9%E6%B3%95%EF%BC%8Cnew%E4%B8%80%E4%B8%AAPrompt%E5%AF%B9%E8%B1%A1%E5%86%8D%E4%BC%A0%E5%85%A5msg%EF%BC%89" rel="nofollow"> 第二种 聊天的程序的第二种实现方式（调用call方法，new一个Prompt对象再传入msg）</a></p> 
<p id="%C2%A0%206.1%C2%A0%C2%A0%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:120px;"><a href="#%C2%A0%206.1%C2%A0%C2%A0%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">  6.1  运行程序结果​编辑</a></p> 
<p id="%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%9A%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E6%AF%94%E4%B8%8A%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A4%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8Egpt%E5%8F%82%E6%95%B0%E7%9A%84%E8%AE%BE%E7%BD%AE%EF%BC%89-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%9A%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E6%AF%94%E4%B8%8A%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A4%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8Egpt%E5%8F%82%E6%95%B0%E7%9A%84%E8%AE%BE%E7%BD%AE%EF%BC%89" rel="nofollow">第三种：聊天的程序的第三种实现方式（比上一个方法多了一个关于gpt参数的设置）</a></p> 
<p id="7.1%20%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C-toc" style="margin-left:120px;"><a href="#7.1%20%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C" rel="nofollow">7.1 运行程序结果</a></p> 
<p id="%E7%AC%AC%E5%9B%9B%E7%A7%8D%EF%BC%9A%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8stream%E6%96%B9%E6%B3%95%EF%BC%8C%E7%94%A8%E6%B3%95%E5%92%8Ccall%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%8D%E4%B8%80%E6%A0%B7%2CStream%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AFFiux%EF%BC%8C%E5%8F%AB%E5%81%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BA%8F%E5%88%97%E4%B8%80%E5%BA%8F%E5%88%97%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%80%E4%B8%AA%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%EF%BC%8C%E8%B0%83%E7%94%A8Stream%E5%8F%AB%E5%81%9A%E6%B5%81%E5%BC%8FAPI%EF%BC%89-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E5%9B%9B%E7%A7%8D%EF%BC%9A%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8stream%E6%96%B9%E6%B3%95%EF%BC%8C%E7%94%A8%E6%B3%95%E5%92%8Ccall%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%8D%E4%B8%80%E6%A0%B7%2CStream%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AFFiux%EF%BC%8C%E5%8F%AB%E5%81%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BA%8F%E5%88%97%E4%B8%80%E5%BA%8F%E5%88%97%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%80%E4%B8%AA%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%EF%BC%8C%E8%B0%83%E7%94%A8Stream%E5%8F%AB%E5%81%9A%E6%B5%81%E5%BC%8FAPI%EF%BC%89" rel="nofollow">第四种：聊天的程序的第三种实现方式（调用stream方法，用法和call一样，只不过返回值不一样,Stream返回的是Fiux，叫做数据的序列一序列的数据，一个一个的数据返回，调用Stream叫做流式API）</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E5%89%8D%E8%A8%80">前言</h3> 
<p>随着人工智能技术的迅猛发展，越来越多的应用程序开始集成人工智能功能，从而提供更智能、更个性化的体验。诸如ChatGPT等开放性大型语言模型的出现，使得自然语言处理和对话系统的开发变得更加便捷和普及。这些技术已经在社交媒体、客户服务、教育等领域展示出巨大的潜力，对于提升用户体验和提高工作效率起到了关键作用。</p> 
<p>Spring Al的官网：<span style="color:#000000;"><a href="https://spring.io/" rel="nofollow" title="Spring | Home">Spring | Home</a></span></p> 
<p><span style="color:#000000;">Spring AI提供的API支持跨人工智能提供商的</span> <span style="color:#0070c0;">聊天，文本到图像，和嵌入模型</span><span style="color:#000000;">等，同时</span><span style="color:#fe2c24;"><strong>支持同步和流API选项</strong></span><span style="color:#000000;">；</span></p> 
<p>开发springAl程序的前期准备准备工作</p> 
<ol><li><span style="color:#000000;">本机电脑要可以访问OpenAI</span><span style="color:#000000;">网站</span> <span style="color:#000000;"><a href="https://openai.com/" rel="nofollow" title="https://openai.com/">https://openai.com/</a></span><span style="color:#000000;">；</span></li><li><span style="color:#000000;">要有</span><span style="color:#000000;">OpenAI</span><span style="color:#000000;">的</span><span style="color:#0070c0;">API Key</span><span style="color:#000000;">；</span><span style="color:#fe2c24;"><strong>（注册账号或者购买，如果没有可以私信联系我）</strong></span></li></ol> 
<h3 id="Spring%20Al%E4%B8%8ESpringboot%E6%95%B4%E5%90%88%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%88%E6%9C%AC%E6%96%87%E4%BB%85%E8%AE%B2%E8%A7%A3%E8%81%8A%E5%A4%A9%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%85%B3%E4%BA%8Egpt%E7%9A%84%E5%85%B6%E4%BB%96%E4%B8%9C%E8%A5%BF%EF%BC%8C%E5%8F%82%E8%80%83%E6%8E%A5%E4%B8%8B%E6%9D%A5%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%89">Spring Al与Springboot整合的步骤（本文仅讲解聊天方式的实现，关于gpt的其他东西，参考接下来的文章）</h3> 
<h4 id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AASpring%20Boot%E9%A1%B9%E7%9B%AE(JDK17%E8%B5%B7%E6%AD%A5)%EF%BC%9B">第一步：<span style="color:#000000;">建项目：创建一个</span><span style="color:#000000;">Spring Boot</span><span style="color:#000000;">项目(JDK17起步)；</span></h4> 
<p><img alt="" height="324" src="https://images2.imgbox.com/38/8c/pBWnjSBj_o.png" width="560"></p> 
<h4 id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%8A%A0%E4%BE%9D%E8%B5%96">第二步：<span style="color:#000000;">加依赖</span></h4> 
<h5 id="2.1%20%E5%8A%A0%E5%85%A5spring-ai-openai-spring-boot-starter%E4%BE%9D%E8%B5%96%EF%BC%9B%C2%A0"><span style="color:#000000;">2.1 加入</span><span style="color:#0070c0;">spring-ai-openai-spring-boot-starter</span><span style="color:#000000;">依赖；</span> </h5> 
<pre><code class="language-XML">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-openai-spring-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> 
<p><span style="color:#000000;"><strong>2.2 继承父项目：</strong></span></p> 
<pre><code class="language-XML">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
	&lt;dependency&gt;
	    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
	    &lt;artifactId&gt;spring-ai-bom&lt;/artifactId&gt;
	    &lt;version&gt;${spring-ai.version}&lt;/version&gt;
	    &lt;type&gt;pom&lt;/type&gt;
	    &lt;scope&gt;import&lt;/scope&gt;
	 &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
</code></pre> 
<h5 id="2.3%C2%A0%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E4%B8%8B%E8%BD%BD%E7%9A%84%E4%BB%93%E5%BA%93%EF%BC%9A(%E5%9B%A0%E4%B8%BAspring%20ai%E5%9C%A8%E4%B8%AD%E5%BF%83%E4%BB%93%E5%BA%93%E8%BF%98%E6%B2%A1%E6%9C%89%E4%BE%9D%E8%B5%96%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E5%8E%BB%E7%BD%91%E7%AB%99%E4%B8%8B%E8%BD%BD)">2.3 <span style="color:#000000;"><strong>配置项目依赖下载的仓库：(因为spring ai在中心仓库还没有依赖，所以需要去网站下载)</strong></span></h5> 
<pre><code class="language-XML">&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-milestones&lt;/id&gt;
        &lt;name&gt;Spring Milestones&lt;/name&gt;
        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre> 
<h3 id="%C2%A0%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E9%85%8D%E6%96%87%E4%BB%B6(%E8%BF%99%E4%B8%AA%E7%9A%84api%20-key%E5%B0%B1%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E7%A7%81%E4%BF%A1%E6%88%91%E5%8D%B3%E5%8F%AF)"> 第三步：<span style="color:#000000;">配文件(这个的api -key就是你自己的，如果没有私信我即可)</span></h3> 
<pre><code class="language-XML">spring:
  ai:
    openai:
      api-key:  （换成你的api-key）
      base-url: https://api.openai.com（分为代理地址和直连地址）
</code></pre> 
<h3 id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%20%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD%E5%86%99%E5%85%B7%E4%BD%93%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">第四步： 聊天功能写具体的代码实现</h3> 
<h4 id="%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A04.1%20%E5%9B%A0%E4%B8%BA%E6%89%80%E6%9C%89%E7%9A%84%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%88%B6%E6%8E%A5%E5%8F%A3%E9%83%BD%E7%BB%A7%E6%89%BF%E4%B8%8EModel%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%81%8A%E5%A4%A9%E6%96%B9%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%B0%B1%E6%98%AF%E6%B3%A8%E5%85%A5OpenAiChatModel%20%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AAspringboot%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%B3%A8%E5%85%A5%E5%8D%B3%E5%8F%AF">        4.1 因为所有的接口的父接口都继承与Model，可以看到聊天方式的实现就是注入OpenAiChatModel 因为这个springboot自动装配的功能，只需要注入即可</h4> 
<h4 id="%C2%A0%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%C2%A0%E8%81%8A%E5%A4%A9%E7%9A%84%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8call%E6%96%B9%E6%B3%95%EF%BC%8C%E7%9B%B4%E6%8E%A5%E4%BC%A0%E5%85%A5msg%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%8F%AB%E5%81%9A%E5%90%8C%E6%AD%A5API%EF%BC%89"> 第一种： 聊天的第一种实现方式（调用call方法，直接传入msg，这个叫做同步API）</h4> 
<pre><code class="language-java">public class ChatController {

    /**
     * 自动注入的
     */
    @Resource
    private OpenAiChatModel openAiChatModel;

    /**
     * 聊天的方法。底层调用的openAi的方法
     * RequestParam 接受参数
     * msg 就是我们提的问题
     * @return
     */
    @RequestMapping("/ai/chat")
    public String chat(@RequestParam("msg") String msg){
        String called = openAiChatModel.call(msg);
        return called;
    }</code></pre> 
<h5 id="%C2%A0%20%C2%A05.1%20%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C">   5.1 运行程序结果</h5> 
<p><img alt="" height="504" src="https://images2.imgbox.com/a5/bc/mkghcFul_o.png" width="1200"></p> 
<h4 id="%C2%A0%E7%AC%AC%E4%BA%8C%E7%A7%8D%C2%A0%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8call%E6%96%B9%E6%B3%95%EF%BC%8Cnew%E4%B8%80%E4%B8%AAPrompt%E5%AF%B9%E8%B1%A1%E5%86%8D%E4%BC%A0%E5%85%A5msg%EF%BC%89"> 第二种 聊天的程序的第二种实现方式（调用call方法，new一个Prompt对象再传入msg）</h4> 
<pre><code class="language-java">/**
     * 聊天的方法。底层调用的openAi的方法
     * RequestParam 接受参数
     * msg 就是我们提的问题
     * ChatResponse 返回的是一个josn串
     * chatResponse.getResult().getOutput().getContent();只获取文本
     * @return
     */

    @RequestMapping("/ai/chat2")
    public Object chat2(@RequestParam("msg") String msg){
        ChatResponse chatResponse = openAiChatModel.call(new Prompt(msg));
        return chatResponse.getResult().getOutput().getContent();
    }</code></pre> 
<h5 id="%C2%A0%206.1%C2%A0%C2%A0%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C%E2%80%8B%E7%BC%96%E8%BE%91">  6.1  运行程序结果<img alt="" height="504" src="https://images2.imgbox.com/40/13/8Et7Ef2l_o.png" width="1200"></h5> 
<h4 id="%E7%AC%AC%E4%B8%89%E7%A7%8D%EF%BC%9A%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E6%AF%94%E4%B8%8A%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A4%9A%E4%BA%86%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8Egpt%E5%8F%82%E6%95%B0%E7%9A%84%E8%AE%BE%E7%BD%AE%EF%BC%89">第三种：聊天的程序的第三种实现方式（比上一个方法多了一个关于gpt参数的设置）</h4> 
<pre><code class="language-java">/**
     *OpenAiChatOptions.builder() 传入的一个参数，可以控制大模型的设置
     * @param msg
     * @return
     */

    @RequestMapping("/ai/chat3")
    public Object chat3(@RequestParam("msg") String msg){
        ChatResponse chatResponse = openAiChatModel.call(new Prompt(msg, OpenAiChatOptions.builder()
                //.withModel("gpt-4-32k")  //gpt的版本 ，32K是参数，参数越高，回答问题越准确
                .withTemperature(0.4F)  //温度值，温度越高，回答的准确率越低，温度越低，回答的准确率越高
                .build()));
        return chatResponse.getResult().getOutput().getContent();
    }</code></pre> 
<h5 id="7.1%20%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%9C">7.1 运行程序结果</h5> 
<p><img alt="" height="504" src="https://images2.imgbox.com/c3/e5/ACrk26xR_o.png" width="1200"></p> 
<p>当然上述的可选参数不仅可以在代码中配置，<span style="color:#fe2c24;"><strong>也可以在配置文件中配置</strong></span></p> 
<p><strong><span style="background-color:#fe2c24;">注意：如果代码中写了关于gpt的参数，配置文件中也配置了参数，那么以代码中为主</span></strong></p> 
<p><img alt="" height="313" src="https://images2.imgbox.com/5f/1b/lQbc6Nmj_o.png" width="530"></p> 
<h4 id="%E7%AC%AC%E5%9B%9B%E7%A7%8D%EF%BC%9A%E8%81%8A%E5%A4%A9%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%88%E8%B0%83%E7%94%A8stream%E6%96%B9%E6%B3%95%EF%BC%8C%E7%94%A8%E6%B3%95%E5%92%8Ccall%E4%B8%80%E6%A0%B7%EF%BC%8C%E5%8F%AA%E4%B8%8D%E8%BF%87%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%8D%E4%B8%80%E6%A0%B7%2CStream%E8%BF%94%E5%9B%9E%E7%9A%84%E6%98%AFFiux%EF%BC%8C%E5%8F%AB%E5%81%9A%E6%95%B0%E6%8D%AE%E7%9A%84%E5%BA%8F%E5%88%97%E4%B8%80%E5%BA%8F%E5%88%97%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%80%E4%B8%AA%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%EF%BC%8C%E8%B0%83%E7%94%A8Stream%E5%8F%AB%E5%81%9A%E6%B5%81%E5%BC%8FAPI%EF%BC%89">第四种：聊天的程序的第三种实现方式（调用stream方法，用法和call一样，只不过返回值不一样,Stream返回的是Fiux，叫做数据的序列一序列的数据，一个一个的数据返回，调用Stream叫做流式API）</h4> 
<pre><code class="language-java">/**
     *OpenAiChatOptions.builder() gpt的可选参数
     * @param msg
     * @return
     */
    @RequestMapping("/ai/chat4")
    public Object chat4(@RequestParam("msg") String msg){
        Flux&lt;ChatResponse&gt; flux = openAiChatModel.stream(new Prompt(msg, OpenAiChatOptions.builder()
                //.withModel("gpt-4-32k")  //gpt的版本 ，32K是参数，参数越高，回答问题越准确
                .withTemperature(0.4F)  //温度值，温度越高，回答的准确率越低，温度越低，回答的准确率越高
                .build()));
        return flux.collectList();
    }</code></pre> 
<p>上述就是关于Spring Boot 整合 Spring AI 实现项目接入ChatGPT，本文仅介绍了关于聊天方面的实现方式，接下来的文章介绍关于如何生成图片以及语言的转换。</p> 
<p><strong>源码地址</strong>：<a href="https://gitee.com/Jiayi_kang/code-ai.git" rel="nofollow" title="code-ai: 关于spring  ai的各个练习">code-ai: 关于spring ai的各个练习</a></p> 
<p><strong>有任何问题可以私信我，以及欢迎大家加入下面的群聊来探讨。以及关于没有open ai的key 的也可以私信我</strong></p> 
<p><img alt="" height="271" src="https://images2.imgbox.com/d8/34/ehenXtw4_o.jpg" width="262"> <img alt="" height="268" src="https://images2.imgbox.com/b4/9c/zyL4ECGl_o.jpg" width="272"></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf7a47b73464bd49177124b839462f1b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">差异基因富集分析（R语言——GO&amp;KEGG&amp;GSEA）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f72748bb4a67c972d5c09856bf1d7e57/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2024最新Stable Diffusion【插件篇】：SD提示词智能生成插件教程!</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>