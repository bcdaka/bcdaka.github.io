<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【前端部署】Ubuntu22.04 使用nginx部署vue前端项目教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/518a3079beea6d43d4733a64c6276ee3/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【前端部署】Ubuntu22.04 使用nginx部署vue前端项目教程">
  <meta property="og:description" content="一.ubuntu安装nginx 1.更新本地软件包列表
sudo apt update 2.安装nginx
sudo apt install nginx 3.验证nginx是否安装成功
sudo systemctl status nginx 如果Nginx正在运行，则命令输出应该显示Active（active (running)）状态。
4.若nginx未运行，则输入命令进行启动
sudo service nginx start 5.查看nginx版本信息
nginx -V 6.浏览器输入ubuntu所在服务器的ip地址
当我们看到如图所示，即说明nginx安装成功！
二.vue项目代码打包 方式一: 在vscode的终端输入
npm run build 方式二: 点击如图的红色方形部分的npm脚本进行项目代码打包
打包成功,则终端输出信息如下
当前目录下生成的dist文件夹就是打包好的vue项目代码
三.ubuntu修改nginx配置文件 nginx是依赖于其配置文件进行工作的,其配置文件路径是/etc/nginx/nginx.conf
使用下面的命令来查看默认配置文件
cat /etc/nginx/nginx.conf 如果你不想看到注释和空白，可以使用以下命令只显示具体内容
cat /etc/nginx/nginx.conf | grep -vE &#34;#|^$&#34; 接下来我将每行进行注释(注释以#开头):
user www-data; # 运行 Nginx 的用户 worker_processes auto; # 自动设置 worker 进程数为 CPU 核心数 pid /run/nginx.pid; # Nginx 的 PID 文件路径 include /etc/nginx/modules-enabled/*.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-19T20:56:16+08:00">
    <meta property="article:modified_time" content="2024-02-19T20:56:16+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【前端部署】Ubuntu22.04 使用nginx部署vue前端项目教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ubuntunginx_1"></a>一.ubuntu安装nginx</h2> 
<p><strong>1.更新本地软件包列表</strong></p> 
<pre><code class="prism language-c">sudo apt update
</code></pre> 
<p><strong>2.安装nginx</strong></p> 
<pre><code class="prism language-c">sudo apt install nginx
</code></pre> 
<p><strong>3.验证nginx是否安装成功</strong></p> 
<pre><code class="prism language-c">sudo systemctl status nginx
</code></pre> 
<p>如果Nginx正在运行，则命令输出应该显示Active（active (running)）状态。</p> 
<p><img src="https://images2.imgbox.com/75/5b/UdWAB4dm_o.png" alt="在这里插入图片描述"></p> 
<p><strong>4.若nginx未运行，则输入命令进行启动</strong></p> 
<pre><code class="prism language-c">sudo service nginx start
</code></pre> 
<p><strong>5.查看nginx版本信息</strong></p> 
<pre><code class="prism language-c">nginx <span class="token operator">-</span>V
</code></pre> 
<p><strong>6.浏览器输入ubuntu所在服务器的ip地址</strong></p> 
<p><img src="https://images2.imgbox.com/5a/0d/HP9cyerz_o.png" alt="在这里插入图片描述"><br> 当我们看到如图所示，即说明nginx安装成功！</p> 
<h2><a id="vue_33"></a>二.vue项目代码打包</h2> 
<p><strong>方式一: 在vscode的终端输入</strong></p> 
<pre><code class="prism language-c">npm run build
</code></pre> 
<p><strong>方式二: 点击如图的红色方形部分的npm脚本进行项目代码打包</strong></p> 
<p><img src="https://images2.imgbox.com/ac/b9/I1VgIM0W_o.png" alt="在这里插入图片描述"></p> 
<p>打包成功,则终端输出信息如下</p> 
<p><img src="https://images2.imgbox.com/92/11/6rRa6pHi_o.png" alt="在这里插入图片描述"></p> 
<p>当前目录下生成的dist文件夹就是打包好的vue项目代码</p> 
<p><img src="https://images2.imgbox.com/76/6c/Omfg4i9K_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="ubuntunginx_54"></a>三.ubuntu修改nginx配置文件</h2> 
<p>nginx是依赖于其配置文件进行工作的,其配置文件路径是/etc/nginx/nginx.conf</p> 
<p><strong>使用下面的命令来查看默认配置文件</strong></p> 
<pre><code class="prism language-c">cat <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf
</code></pre> 
<p><strong>如果你不想看到注释和空白，可以使用以下命令只显示具体内容</strong></p> 
<pre><code class="prism language-c">cat <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>nginx<span class="token punctuation">.</span>conf <span class="token operator">|</span> grep <span class="token operator">-</span>vE <span class="token string">"#|^$"</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/f3/UOe8TAgq_o.png" alt="在这里插入图片描述"></p> 
<p><strong>接下来我将每行进行注释(注释以#开头):</strong></p> 
<pre><code class="prism language-html">user www-data;                        # 运行 Nginx 的用户
worker_processes auto;                # 自动设置 worker 进程数为 CPU 核心数
pid /run/nginx.pid;                   # Nginx 的 PID 文件路径
include /etc/nginx/modules-enabled/*.conf;  # 包含模块配置文件
events {                              # 事件处理模块的配置
        worker_connections 768;       # 每个 worker 进程的最大连接数
}
http {                                # HTTP 核心模块的配置
        sendfile on;                  # 开启 sendfile 功能
        tcp_nopush on;                # 开启 tcp_nopush 功能
        types_hash_max_size 2048;     # 设置 types_hash_max_size 参数的值
        include /etc/nginx/mime.types; # 包含 MIME 类型定义文件
        default_type application/octet-stream; # 默认 MIME 类型
        ssl_prefer_server_ciphers on; # 开启 SSL/TLS 功能
        access_log /var/log/nginx/access.log; # 访问日志文件路径
        error_log /var/log/nginx/error.log;   # 错误日志文件路径
        gzip on;                      # 开启 Gzip 压缩
        include /etc/nginx/conf.d/*.conf;    # 包含其他配置文件
        include /etc/nginx/sites-enabled/*;  # 包含虚拟主机配置文件
}

</code></pre> 
<p><strong>这里，我们只需要了解其中重要的3个部分:</strong></p> 
<ol><li> <p>第1行的 <code>www-data</code> 是运行nginx的用户，后面我们需要把该用户加入当前ubuntu用户所属组，保证<code>www-data</code>有足够权限访问当前ubuntu用户目录下的前端文件(因为本人是把前端文件的路径添加在当前ubuntu用户目录下的)。<br> <br></p> </li><li> <p>倒数第3行的 <code>include /etc/nginx/conf.d/*.conf;</code>可以理解为把路径<code>/etc/nginx/conf.d</code>下的所有以.conf结尾的文件都复制到这里，而路径<code>/etc/nginx/conf.d</code>下的所有文件代表虚拟主机配置文件。<br> <br></p> </li><li> <p>倒数第2行的 <code>include /etc/nginx/sites-enabled/*;</code>可以理解为把路径<code>/etc/nginx/sites-enabled</code>下的所有文件复制到这里，当我们进入目录<code>/etc/nginx/sites-enabled</code>下,会发现只有<code>default</code>一个文件。<br><br> 总结一下，当nginx运行的时候，会加载配置文件<code>/etc/nginx/nginx.conf</code>,而这个配置文件里面包含了目录<code>/etc/nginx/sites-enabled</code>下的所有文件(即文件default)<br> <br><br> 这时可以参考之前查看 nginx.conf 的方式来查看default文件：</p> <pre><code class="prism language-c">cd <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>sites<span class="token operator">-</span>enabled
</code></pre> <pre><code class="prism language-c">cat <span class="token punctuation">.</span><span class="token operator">/</span><span class="token keyword">default</span> <span class="token operator">|</span> grep <span class="token operator">-</span>vE <span class="token string">"#|^$"</span>
</code></pre> <p>default文件内容如下:</p> <p><img src="https://images2.imgbox.com/93/ab/hkzjLKBt_o.png" alt="在这里插入图片描述"></p> <p><strong>文件中的配置信息进行注释,(以 # 开头)</strong></p> <pre><code class="prism language-html"> # 虚拟主机的配置
 server {
   # 侦听 80 端口，分别配置了 IPv4 和 IPv6
   listen 80 default_server;
   listen [::]:80 default_server;

   # 定义服务器的默认网站根目录位置
   root /var/www/html;

   # 定义主页的文件名
   index index.html index.htm index.nginx-debian.html;

   # 定义虚拟服务器的名称
   server_name _;

   # location 块
   location / {
     try_files $uri $uri/ =404;
   }
 }
</code></pre> <p>当我们在浏览器访问网站的时候是默认80端口的，如果我们需要在其他端口访问网站，例如8080端口，则需要修改listen 80 为listen 8080,则访问网站的时候需要在ip地址后面加上:8080。</p> <p>如果我们想更改网站文件存放的路径，直接修改 root 的路径就可以了</p> </li></ol> 
<h2><a id="_142"></a>四.部署前端代码</h2> 
<p>理解上面内容后，我们可以开始部署前端文件了。一般情况下，我们是不会去修改nginx原有的配置文件内容,而是另外添加一些关键的文件，使得nginx在运行的时候顺带执行咱们添加的文件来完成相应的功能。</p> 
<p><strong>1.进入目录<code>/etc/nginx/sites-enabled</code>,创建文件myweb.conf,名字可以任意取，但是必须以.conf结尾</strong></p> 
<pre><code class="prism language-c">cd  <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>sites<span class="token operator">-</span>enabled
</code></pre> 
<pre><code class="prism language-c">sudo touch myweb<span class="token punctuation">.</span>conf
</code></pre> 
<p>把以下内容添加到myweb.conf文件里面：</p> 
<pre><code class="prism language-c">server <span class="token punctuation">{<!-- --></span>
   listen <span class="token number">8070</span> default_server<span class="token punctuation">;</span> #可以把<span class="token number">8070</span>修改为你需要设置的端口号

   root <span class="token operator">/</span>home<span class="token operator">/</span>ubuntu<span class="token operator">/</span>project<span class="token operator">/</span>dist<span class="token punctuation">;</span> #你的前端文件存放的路径地址

   index index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>  #保证你的dist文件夹下面有个文件叫做index<span class="token punctuation">.</span>html

   server_name localhost<span class="token punctuation">;</span>  #这里的localhost替换为你自己的ubuntu所在ip地址
ubuntu
   location <span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
       try_files $uri $uri<span class="token operator">/</span> <span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>根据自己的情况进行以下修改：</p> 
<ol><li><code>listen 8070 default_server;</code>这里的8070可以修改为你需要设置的端口号</li><li><code>root /home/ubuntu/project/dist;</code>这里的<code>/home/ubuntu/project/dist</code>可以修改为你存放前端代码的具体路径，建议在当前ubuntu用户目录下新建一个project文件夹，把之前打包好的前端代码文件夹dist放在这里</li><li><code>server_name localhost;</code>这里的localhost替换为你自己的ubuntu所在的ip地址</li></ol> 
<p>总结一下，我们为什么要添加myweb.conf在目录<code>/etc/nginx/sites-enabled</code>下，因为之前有讲过nginx运行的时候是要加载目录<code>/etc/nginx/sites-enabled</code>下的所有文件，这样当然也就顺便把文件myweb.conf加载啦，而myweb.conf文件存放的是我们部署的前端代码文件的一些信息，这样nginx就能加载到咱们的前端代码啦。</p> 
<p><strong>2.上传打包好的前端代码文件夹dist到当前ubuntu用户所在的目录下，如<code>/home/ubuntu/project</code>,该目录需要根据自己的情况进行相应的修改，需要保证与myweb.conf文件下的<code>root</code>行所在的路径一致即可。</strong></p> 
<p><strong>3.把nginx用户<code>www-data</code>添加到当前ubuntu的用户所属组:</strong><br> 使用命令<code>groups</code>查看当前用户所属组，例如<br> <img src="https://images2.imgbox.com/43/61/RkRa9n8O_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到红色方框即为当前用户所属组，接着使用命令把用户www-data添加到当前用户组ubuntu</p> 
<pre><code class="prism language-c">sudo usermod <span class="token operator">-</span>a <span class="token operator">-</span>G ubuntu www<span class="token operator">-</span>data
</code></pre> 
<p>该命令根据自己实际情况进行修改。</p> 
<p>我们可以查看当前用户组的所有用户，判断是否添加成功：</p> 
<pre><code class="prism language-c">getent group ubuntu
</code></pre> 
<p><img src="https://images2.imgbox.com/db/91/TZ9zrJSx_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到，我们添加成功了，这样nginx用户就有权限访问到咱们的前端代码啦！</p> 
<p><strong>4.在ubuntu所在的云服务器或者虚拟机添加防火墙规则，允许访问8070端口:</strong></p> 
<p>我这里使用的是云服务器，因此需要添加防火墙规则<br> <img src="https://images2.imgbox.com/90/e6/iGWGH8pg_o.png" alt="在这里插入图片描述"></p> 
<p><strong>5.在浏览器输入<code>ip地址:8070</code>即可访问到前端界面啦！</strong><br> <img src="https://images2.imgbox.com/be/69/iixQ0qef_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d3f52f928dbe86fe9f8e0912b26b5322/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">航班进出港|航班进出港管理系统|基于springboot航班进出港管理系统设计与实现(源码&#43;数据库&#43;文档)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/29e73d412eb963d1179fa0fe0e892fce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小型医院医疗设备管理系统|基于springboot小型医院医疗设备管理系统设计与实现(源码&#43;数据库&#43;文档)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>