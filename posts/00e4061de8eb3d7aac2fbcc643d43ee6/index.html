<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python酷库之旅-第三方库Pandas(010) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/00e4061de8eb3d7aac2fbcc643d43ee6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python酷库之旅-第三方库Pandas(010)">
  <meta property="og:description" content="目录
一、用法精讲
22、pandas.read_hdf函数
22-1、语法
22-2、参数
22-3、功能
22-4、返回值
22-5、说明
22-6、用法
22-6-1、数据准备
22-6-2、代码示例
22-6-3、结果输出
23、pandas.HDFStore.put方法
23-1、语法
23-2、参数
23-3、功能
23-4、返回值
23-5、说明
23-6、用法
23-6-1、数据准备
23-6-2、代码示例
23-6-3、结果输出 24、pandas.HDFStore.append方法
24-1、语法
24-2、参数
24-3、功能
24-4、返回值
24-5、说明
24-6、用法
24-6-1、数据准备
24-6-2、代码示例
24-6-3、结果输出 二、推荐阅读
1、Python筑基之旅
2、Python函数之旅
3、Python算法之旅
4、Python魔法之旅
5、博客个人主页
一、用法精讲 22、pandas.read_hdf函数 22-1、语法 # 22、pandas.read_hdf函数 pandas.read_hdf(path_or_buf, key=None, mode=&#39;r&#39;, errors=&#39;strict&#39;, where=None, start=None, stop=None, columns=None, iterator=False, chunksize=None, **kwargs) Read from the store, close it if we opened it. Retrieve pandas object stored in file, optionally based on where criteria.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-08T12:26:28+08:00">
    <meta property="article:modified_time" content="2024-07-08T12:26:28+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python酷库之旅-第三方库Pandas(010)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong><span style="color:#1a439c;">目录</span></strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%94%A8%E6%B3%95%E7%B2%BE%E8%AE%B2-toc" style="margin-left:80px;"><strong><a href="#%E4%B8%80%E3%80%81%E7%94%A8%E6%B3%95%E7%B2%BE%E8%AE%B2" rel="nofollow"><span style="color:#1a439c;">一、用法精讲</span></a></strong></p> 
<p id="5%E3%80%81pandas.DataFrame.to_csv%E5%87%BD%E6%95%B0-toc" style="margin-left:120px;"><strong><a href="#5%E3%80%81pandas.DataFrame.to_csv%E5%87%BD%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">22、pandas.read_hdf函数</span></a></strong></p> 
<p id="5-1%E3%80%81%E8%AF%AD%E6%B3%95-toc" style="margin-left:160px;"><strong><a href="#5-1%E3%80%81%E8%AF%AD%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">22-1、语法</span></a></strong></p> 
<p id="5-2%E3%80%81%E5%8F%82%E6%95%B0-toc" style="margin-left:160px;"><strong><a href="#5-2%E3%80%81%E5%8F%82%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">22-2、参数</span></a></strong></p> 
<p id="5-3%E3%80%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:160px;"><strong><a href="#5-3%E3%80%81%E5%8A%9F%E8%83%BD" rel="nofollow"><span style="color:#1a439c;">22-3、功能</span></a></strong></p> 
<p id="5-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC-toc" style="margin-left:160px;"><strong><a href="#5-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC" rel="nofollow"><span style="color:#1a439c;">22-4、返回值</span></a></strong></p> 
<p id="5-5%E3%80%81%E8%AF%B4%E6%98%8E-toc" style="margin-left:160px;"><strong><a href="#5-5%E3%80%81%E8%AF%B4%E6%98%8E" rel="nofollow"><span style="color:#1a439c;">22-5、说明</span></a></strong></p> 
<p id="5-6%E3%80%81%E7%94%A8%E6%B3%95-toc" style="margin-left:160px;"><strong><a href="#5-6%E3%80%81%E7%94%A8%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">22-6、用法</span></a></strong></p> 
<p id="10-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87-toc" style="margin-left:200px;"><strong><a href="#10-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87" rel="nofollow"><span style="color:#1a439c;">22-6-1、数据准备</span></a></strong></p> 
<p id="5-6-1%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-toc" style="margin-left:200px;"><strong><a href="#5-6-1%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" rel="nofollow"><span style="color:#1a439c;">22-6-2、代码示例</span></a></strong></p> 
<p id="5-6-2%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA-toc" style="margin-left:200px;"><strong><a href="#5-6-2%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA" rel="nofollow"><span style="color:#1a439c;">22-6-3、结果输出</span></a></strong></p> 
<p id="11%E3%80%81pandas.ExcelFile%E7%B1%BB-toc" style="margin-left:120px;"><strong><a href="#11%E3%80%81pandas.ExcelFile%E7%B1%BB" rel="nofollow"><span style="color:#1a439c;">23、pandas.HDFStore.put方法</span></a></strong></p> 
<p id="11-1%E3%80%81%E8%AF%AD%E6%B3%95-toc" style="margin-left:160px;"><strong><a href="#11-1%E3%80%81%E8%AF%AD%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">23-1、语法</span></a></strong></p> 
<p id="11-2%E3%80%81%E5%8F%82%E6%95%B0-toc" style="margin-left:160px;"><strong><a href="#11-2%E3%80%81%E5%8F%82%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">23-2、参数</span></a></strong></p> 
<p id="11-3%E3%80%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:160px;"><strong><a href="#11-3%E3%80%81%E5%8A%9F%E8%83%BD" rel="nofollow"><span style="color:#1a439c;">23-3、功能</span></a></strong></p> 
<p id="11-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC-toc" style="margin-left:160px;"><strong><a href="#11-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC" rel="nofollow"><span style="color:#1a439c;">23-4、返回值</span></a></strong></p> 
<p id="11-5%E3%80%81%E8%AF%B4%E6%98%8E-toc" style="margin-left:160px;"><strong><a href="#11-5%E3%80%81%E8%AF%B4%E6%98%8E" rel="nofollow"><span style="color:#1a439c;">23-5、说明</span></a></strong></p> 
<p id="11-6%E3%80%81%E7%94%A8%E6%B3%95-toc" style="margin-left:160px;"><strong><a href="#11-6%E3%80%81%E7%94%A8%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">23-6、用法</span></a></strong></p> 
<p id="11-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87-toc" style="margin-left:200px;"><strong><a href="#11-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87" rel="nofollow"><span style="color:#1a439c;">23-6-1、数据准备</span></a></strong></p> 
<p id="11-6-2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-toc" style="margin-left:200px;"><strong><a href="#11-6-2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" rel="nofollow"><span style="color:#1a439c;">23-6-2、代码示例</span></a></strong></p> 
<p id="11-6-3%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%C2%A0-toc" style="margin-left:200px;"><strong><a href="#11-6-3%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%C2%A0" rel="nofollow"><span style="color:#1a439c;">23-6-3、结果输出 </span></a></strong></p> 
<p id="12%E3%80%81pandas.ExcelFile.parse%E5%87%BD%E6%95%B0-toc" style="margin-left:120px;"><strong><a href="#12%E3%80%81pandas.ExcelFile.parse%E5%87%BD%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">24、pandas.HDFStore.append方法</span></a></strong></p> 
<p id="12-1%E3%80%81%E8%AF%AD%E6%B3%95-toc" style="margin-left:160px;"><strong><a href="#12-1%E3%80%81%E8%AF%AD%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">24-1、语法</span></a></strong></p> 
<p id="12-2%E3%80%81%E5%8F%82%E6%95%B0-toc" style="margin-left:160px;"><strong><a href="#12-2%E3%80%81%E5%8F%82%E6%95%B0" rel="nofollow"><span style="color:#1a439c;">24-2、参数</span></a></strong></p> 
<p id="12-3%E3%80%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:160px;"><strong><a href="#12-3%E3%80%81%E5%8A%9F%E8%83%BD" rel="nofollow"><span style="color:#1a439c;">24-3、功能</span></a></strong></p> 
<p id="12-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC-toc" style="margin-left:160px;"><strong><a href="#12-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC" rel="nofollow"><span style="color:#1a439c;">24-4、返回值</span></a></strong></p> 
<p id="12-5%E3%80%81%E8%AF%B4%E6%98%8E-toc" style="margin-left:160px;"><strong><a href="#12-5%E3%80%81%E8%AF%B4%E6%98%8E" rel="nofollow"><span style="color:#1a439c;">24-5、说明</span></a></strong></p> 
<p id="12-6%E3%80%81%E7%94%A8%E6%B3%95-toc" style="margin-left:160px;"><strong><a href="#12-6%E3%80%81%E7%94%A8%E6%B3%95" rel="nofollow"><span style="color:#1a439c;">24-6、用法</span></a></strong></p> 
<p id="12-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87-toc" style="margin-left:200px;"><strong><a href="#12-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87" rel="nofollow"><span style="color:#1a439c;">24-6-1、数据准备</span></a></strong></p> 
<p id="12-6-2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-toc" style="margin-left:200px;"><strong><a href="#12-6-2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B" rel="nofollow"><span style="color:#1a439c;">24-6-2、代码示例</span></a></strong></p> 
<p id="12-6-3%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%C2%A0-toc" style="margin-left:200px;"><strong><a href="#12-6-3%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%C2%A0" rel="nofollow"><span style="color:#1a439c;">24-6-3、结果输出 </span></a></strong></p> 
<p id="%E4%BA%94%E3%80%81%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB-toc" style="margin-left:80px;"><strong><a href="#%E4%BA%94%E3%80%81%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB" rel="nofollow"><span style="color:#1a439c;">二、推荐阅读</span></a></strong></p> 
<p id="1%E3%80%81-toc" style="margin-left:120px;"><strong><a href="#1%E3%80%81" rel="nofollow"><span style="color:#1a439c;">1、Python筑基之旅</span></a></strong></p> 
<p id="2%E3%80%81-toc" style="margin-left:120px;"><strong><a href="#2%E3%80%81" rel="nofollow"><span style="color:#1a439c;">2、Python函数之旅</span></a></strong></p> 
<p id="3%E3%80%81-toc" style="margin-left:120px;"><strong><a href="#3%E3%80%81" rel="nofollow"><span style="color:#1a439c;">3、Python算法之旅</span></a></strong></p> 
<p id="4%E3%80%81-toc" style="margin-left:120px;"><strong><a href="#4%E3%80%81" rel="nofollow"><span style="color:#1a439c;">4、Python魔法之旅</span></a></strong></p> 
<p id="5%E3%80%81%C2%A0-toc" style="margin-left:120px;"><strong><a href="#5%E3%80%81%C2%A0" rel="nofollow"><span style="color:#1a439c;">5、博客个人主页</span></a></strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a5/42/KgGHIHWU_o.gif"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d2/c4/AWDFunuS_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a5/23/2rj71DTN_o.gif"></p> 
<h4 id="%E4%B8%80%E3%80%81%E7%94%A8%E6%B3%95%E7%B2%BE%E8%AE%B2">一、用法精讲</h4> 
<h5 id="5%E3%80%81pandas.DataFrame.to_csv%E5%87%BD%E6%95%B0">22、<span style="color:#fe2c24;">pandas.read_hdf</span>函数</h5> 
<h6 id="5-1%E3%80%81%E8%AF%AD%E6%B3%95">22-1、语法</h6> 
<pre><code class="language-python"># 22、pandas.read_hdf函数
pandas.read_hdf(path_or_buf, key=None, mode='r', errors='strict', where=None, start=None, stop=None, columns=None, iterator=False, chunksize=None, **kwargs)
Read from the store, close it if we opened it.

Retrieve pandas object stored in file, optionally based on where criteria.

Warning

Pandas uses PyTables for reading and writing HDF5 files, which allows serializing object-dtype data with pickle when using the “fixed” format. Loading pickled data received from untrusted sources can be unsafe.

See: https://docs.python.org/3/library/pickle.html for more.

Parameters:
path_or_bufstr, path object, pandas.HDFStore
Any valid string path is acceptable. Only supports the local file system, remote URLs and file-like objects are not supported.

If you want to pass in a path object, pandas accepts any os.PathLike.

Alternatively, pandas accepts an open pandas.HDFStore object.

keyobject, optional
The group identifier in the store. Can be omitted if the HDF file contains a single pandas object.

mode{‘r’, ‘r+’, ‘a’}, default ‘r’
Mode to use when opening the file. Ignored if path_or_buf is a pandas.HDFStore. Default is ‘r’.

errorsstr, default ‘strict’
Specifies how encoding and decoding errors are to be handled. See the errors argument for open() for a full list of options.

wherelist, optional
A list of Term (or convertible) objects.

startint, optional
Row number to start selection.

stopint, optional
Row number to stop selection.

columnslist, optional
A list of columns names to return.

iteratorbool, optional
Return an iterator object.

chunksizeint, optional
Number of rows to include in an iteration when using an iterator.

**kwargs
Additional keyword arguments passed to HDFStore.

Returns:
object
The selected object. Return type depends on the object stored.</code></pre> 
<h6 id="5-2%E3%80%81%E5%8F%82%E6%95%B0">22-2、参数</h6> 
<p><span style="color:#fe2c24;"><strong>22-2-1、path_or_buf</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串或文件样对象(如文件句柄或类似文件的对象)，指定要读取的HDF5文件的路径或文件对象。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-2、key</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串或列表，指定要从HDF5文件中读取的键(即数据集/表的名称)。如果文件包含多个数据集，则需要使用此参数来指定要读取哪一个；如果未指定，则尝试读取默认的数据集(如果存在)。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-3、mode</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为'r')</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定文件打开模式。其他可能的值包括'r+'(读写模式)，但注意在使用pandas时，通常不需要写模式，因为read_hdf专门用于读取数据。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-4、errors</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为'strict')</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定错误处理模式。默认为'strict'，表示如果发生错误则抛出异常，其他选项包括'ignore'，表示忽略错误。</p> 
<p><strong><span style="color:#fe2c24;">22-2-5、where</span><span style="color:#956fe7;">(可选，默认值为None)</span><span style="color:#fe2c24;">：</span></strong>字符串或表达式，用于在读取数据之前对数据进行过滤，这可以是一个字符串表达式，Pandas会尝试在读取数据时应用此表达式以筛选行。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-6、start/stop</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>用于指定要读取的行范围(基于0的索引)，这可以用于分块读取大型数据集的一部分。</p> 
<p><strong><span style="color:#fe2c24;">22-2-7、columns</span><span style="color:#956fe7;">(可选，默认值为None)</span><span style="color:#fe2c24;">：</span></strong>字符串或列表，指定要读取的列名列表。如果指定，则只读取这些列。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-8、iterator</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为False)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，如果设置为True，则返回一个迭代器，该迭代器在每次迭代时返回下一块数据(由chunksize指定大小)，这对于处理非常大的数据集非常有用，因为它允许逐个处理数据块而不是一次性将所有数据加载到内存中。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-9、chunksize</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>整数，当iterator=True时有效。指定每次迭代时返回的块的大小(以行为单位)。</p> 
<p><span style="color:#fe2c24;"><strong>22-2-10、**kwargs</strong></span><span style="color:#956fe7;"><strong>(可选)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>其他关键字参数，这些参数将被传递给底层的PyTables或HDFStore对象，这些参数通常用于控制更底层的HDF5文件操作，如压缩选项等。</p> 
<h6 id="5-3%E3%80%81%E5%8A%9F%E8%83%BD">22-3、功能</h6> 
<p>        从HDF5文件中读取数据。</p> 
<h6 id="5-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC">22-4、返回值</h6> 
<p><strong>22-4-1、DataFrame或Series</strong>：默认情况下，read_hdf返回一个Pandas DataFrame对象，该对象包含了从HDF5文件中读取的数据，如果HDF5数据集只包含一列，并且用户没有指定squeeze=False(尽管在read_hdf的典型用法中，squeeze参数不是直接暴露的，但在Pandas的其他读取函数中，如read_csv，squeeze可以用来控制单列数据的返回类型)，则可能会返回一个Pandas Series对象。</p> 
<p><strong>22-4-2、迭代器</strong>：如果设置了iterator=True，则read_hdf返回一个迭代器，该迭代器在每次迭代时返回下一块数据(由chunksize指定大小)，这允许用户以流式方式处理大型数据集，减少内存使用。</p> 
<h6 id="5-5%E3%80%81%E8%AF%B4%E6%98%8E">22-5、说明</h6> 
<p>        HDF5(Hierarchical Data Format version 5)是一种用于存储和组织大量数据的文件格式，它特别适合于存储和组织大量科学数据。</p> 
<h6 id="5-6%E3%80%81%E7%94%A8%E6%B3%95">22-6、用法</h6> 
<h6 id="10-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87">22-6-1、数据准备</h6> 
<pre><code class="language-python"># 22、pandas.read_hdf函数
# 22-1、创建.h5文件example.h5
import pandas as pd
import numpy as np
# 创建一个示例DataFrame
data = {
    'column1': np.random.randint(0, 100, size=100),
    'column2': np.random.random(size=100),
    'column3': np.random.choice(['A', 'B', 'C', 'D'], size=100)
}
df = pd.DataFrame(data)
# 定义HDF5文件路径和要保存的key
hdf5_file_path = 'example.h5'
key = 'dataset1'
try:
    # 使用to_hdf函数将DataFrame写入HDF5文件
    df.to_hdf(hdf5_file_path, key=key, mode='w', format='table', complevel=9, complib='blosc')
    print(f"数据已成功写入 {hdf5_file_path} 文件中的 {key} 数据集")

    # 验证写入的文件
    read_df = pd.read_hdf(hdf5_file_path, key=key)
    print("读取写入的数据:")
    print(read_df.head())
except Exception as e:
    print(f"发生错误: {e}")</code></pre> 
<h6 id="5-6-1%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">22-6-2、代码示例</h6> 
<pre><code class="language-python"># 22、pandas.read_hdf函数
# 22-2、读取HDF5文件
import pandas as pd
# 定义HDF5文件路径和要读取的key
hdf5_file_path = 'example.h5'
key = 'dataset1'
# 使用read_hdf函数读取HDF5文件
try:
    df = pd.read_hdf(hdf5_file_path, key=key, mode='r', errors='strict', where=None, start=None, stop=None, columns=None, iterator=False, chunksize=None)
    print("数据读取成功:")
    print(df)
except Exception as e:
    print(f"读取HDF5文件时发生错误: {e}")</code></pre> 
<h6 id="5-6-2%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA">22-6-3、结果输出</h6> 
<pre><code class="language-python"># 22、pandas.read_hdf函数
# 22-1、创建.h5文件example.h5
# 数据已成功写入 example.h5 文件中的 dataset1 数据集
# 读取写入的数据:
#    column1   column2 column3
# 0       40  0.530045       C
# 1       80  0.769853       C
# 2        9  0.437948       B
# 3       47  0.896335       D
# 4       12  0.017834       B

# 22-2、读取HDF5文件
# 数据读取成功:
#     column1   column2 column3
# 0        40  0.530045       C
# 1        80  0.769853       C
# 2         9  0.437948       B
# 3        47  0.896335       D
# 4        12  0.017834       B
# ..      ...       ...     ...
# 95       70  0.172173       B
# 96        2  0.077893       C
# 97        4  0.825904       D
# 98       52  0.092274       A
# 99        7  0.210899       C
# 
# [100 rows x 3 columns]</code></pre> 
<h5 id="11%E3%80%81pandas.ExcelFile%E7%B1%BB">23、<span style="color:#fe2c24;">pandas.HDFStore.put</span>方法</h5> 
<h6 id="11-1%E3%80%81%E8%AF%AD%E6%B3%95">23-1、语法</h6> 
<pre><code class="language-python"># 23、pandas.HDFStore.put函数
HDFStore.put(key, value, format=None, index=True, append=False, complib=None, complevel=None, min_itemsize=None, nan_rep=None, data_columns=None, encoding=None, errors='strict', track_times=True, dropna=False)
Store object in HDFStore.

Parameters:
keystr
value{Series, DataFrame}
format‘fixed(f)|table(t)’, default is ‘fixed’
Format to use when storing object in HDFStore. Value can be one of:

'fixed'
Fixed format. Fast writing/reading. Not-appendable, nor searchable.

'table'
Table format. Write as a PyTables Table structure which may perform worse but allow more flexible operations like searching / selecting subsets of the data.

indexbool, default True
Write DataFrame index as a column.

appendbool, default False
This will force Table format, append the input data to the existing.

data_columnslist of columns or True, default None
List of columns to create as data columns, or True to use all columns. See here.

encodingstr, default None
Provide an encoding for strings.

track_timesbool, default True
Parameter is propagated to ‘create_table’ method of ‘PyTables’. If set to False it enables to have the same h5 files (same hashes) independent on creation time.

dropnabool, default False, optional
Remove missing values.</code></pre> 
<h6 id="11-2%E3%80%81%E5%8F%82%E6%95%B0">23-2、参数</h6> 
<p><strong><span style="color:#fe2c24;">23-2-1、key</span><span style="color:#956fe7;">(必须)</span><span style="color:#fe2c24;">：</span></strong>字符串，表示要存储的数据在HDF5文件中的键(或路径)，这个键用于后续从文件中检索数据。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-2、value</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>要存储的DataFrame或Series对象。</p> 
<p><strong><span style="color:#fe2c24;">23-2-3、format</span><span style="color:#956fe7;">(可选，默认值为None)</span><span style="color:#fe2c24;">：</span></strong>字符串，指定存储格式。对于表格数据，通常使用'table'，它支持更复杂的查询和数据操作。对于简单的数据，可以使用'fixed'，但它不支持查询。如果为None，则根据value的类型自动选择。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-4、index</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为True)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，指定是否将DataFrame的索引也存储在文件中。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-5、append</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为False)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，如果为True，则尝试将数据追加到已存在的键下，而不是覆盖它，这要求format='table'。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-6、complib</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定用于压缩的库。pandas支持多种压缩库，如'zlib'、'lzo'、'blosc'等，选择合适的压缩库可以显著减少文件大小，但会增加存储和检索时间。如果为None，则不压缩。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-7、complevel</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>整数，指定压缩级别。级别越高，压缩率越高，但处理速度越慢，范围从0(无压缩)到9(最大压缩)，如果complib为None，则此参数无效。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-8、min_itemsize</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字典，指定列中字符串的最小存储大小(以字节为单位)，这有助于避免在追加数据时截断字符串，键是列名，值是整数。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-9、nan_rep</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>用于表示NaN值的字符串。默认为None，表示使用HDF5的NaN表示。</p> 
<p><strong><span style="color:#fe2c24;">23-2-10、data_columns</span><span style="color:#956fe7;">(可选，默认值为None)</span><span style="color:#fe2c24;">：</span></strong>列表或布尔值，指定哪些列应该作为数据列进行索引，以便可以进行快速查询。如果为True，则所有列都作为数据列；如果为False，则没有列作为数据列；如果为列表，则列表中的列名作为数据列。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-11、encoding</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定用于写入文件的编码，这对于存储包含非ASCII字符的字符串列很有用。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-12、errors</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为'strict')</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定在编码或解码字符串时如何处理错误，'strict'表示抛出异常，'ignore'表示忽略错误，'replace'表示用占位符替换错误字符。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-13、track_times</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为True)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，如果为True，则跟踪数据的创建和修改时间，并作为元数据存储在文件中，这对于数据版本控制可能很有用。</p> 
<p><span style="color:#fe2c24;"><strong>23-2-14、dropna</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为False)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，当与append=True一起使用时，如果为True，则在追加之前从DataFrame中删除包含NaN值的行。注意，这仅影响要追加的数据，不会影响已存储在文件中的数据。</p> 
<h6 id="11-3%E3%80%81%E5%8A%9F%E8%83%BD">23-3、功能</h6> 
<p>        将一个DataFrame或Series对象保存到HDF5文件中。</p> 
<h6 id="11-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC">23-4、返回值</h6> 
<p>        没有直接的返回值，它的主要目的是将数据写入文件，而不是返回任何数据给调用者。</p> 
<h6 id="11-5%E3%80%81%E8%AF%B4%E6%98%8E">23-5、说明</h6> 
<p>        无      </p> 
<h6 id="11-6%E3%80%81%E7%94%A8%E6%B3%95">23-6、用法</h6> 
<h6 id="11-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87">23-6-1、数据准备</h6> 
<pre><code class="language-python">无</code></pre> 
<h6 id="11-6-2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">23-6-2、代码示例</h6> 
<pre><code class="language-python"># 23、pandas.HDFStore.put方法
import pandas as pd
# 创建一个示例DataFrame
data = {
    'A': [1, 2, 3, 4, 5],
    'B': ['a', 'b', 'c', 'd', 'e'],
    'C': [True, False, True, False, True]
}
df = pd.DataFrame(data)
# 使用HDFStore保存DataFrame
with pd.HDFStore('example.h5') as store:
    # 使用put方法将数据保存到HDF5文件中
    # 这里我们指定键为'dataset1'，格式为'table'，并使用Blosc压缩
    store.put('dataset1', df, format='table', complib='blosc', complevel=9)
# 从HDF5文件中读取数据
with pd.HDFStore('example.h5') as store:
    # 使用get方法(或read_hdf函数，但在这里我们使用get来展示HDFStore的用法)
    # 根据键'dataset1'检索数据
    retrieved_df = store.get('dataset1')
# 显示检索到的DataFrame
print("Retrieved DataFrame:")
print(retrieved_df)</code></pre> 
<h6 id="11-6-3%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%C2%A0">23-6-3、结果输出 </h6> 
<pre><code class="language-python"># 23、pandas.HDFStore.put方法
# Retrieved DataFrame:
#    A  B      C
# 0  1  a   True
# 1  2  b  False
# 2  3  c   True
# 3  4  d  False
# 4  5  e   True</code></pre> 
<h5 id="12%E3%80%81pandas.ExcelFile.parse%E5%87%BD%E6%95%B0">24、<span style="color:#fe2c24;">pandas.HDFStore.append</span>方法</h5> 
<h6 id="12-1%E3%80%81%E8%AF%AD%E6%B3%95">24-1、语法</h6> 
<pre><code class="language-python"># 24、pandas.HDFStore.append方法
HDFStore.append(key, value, format=None, axes=None, index=True, append=True, complib=None, complevel=None, columns=None, min_itemsize=None, nan_rep=None, chunksize=None, expectedrows=None, dropna=None, data_columns=None, encoding=None, errors='strict')
Append to Table in file.

Node must already exist and be Table format.

Parameters:
keystr
value{Series, DataFrame}
format‘table’ is the default
Format to use when storing object in HDFStore. Value can be one of:

'table'
Table format. Write as a PyTables Table structure which may perform worse but allow more flexible operations like searching / selecting subsets of the data.

indexbool, default True
Write DataFrame index as a column.

appendbool, default True
Append the input data to the existing.

data_columnslist of columns, or True, default None
List of columns to create as indexed data columns for on-disk queries, or True to use all columns. By default only the axes of the object are indexed. See here.

min_itemsizedict of columns that specify minimum str sizes
nan_repstr to use as str nan representation
chunksizesize to chunk the writing
expectedrowsexpected TOTAL row size of this table
encodingdefault None, provide an encoding for str
dropnabool, default False, optional
Do not write an ALL nan row to the store settable by the option ‘io.hdf.dropna_table’.</code></pre> 
<h6 id="12-2%E3%80%81%E5%8F%82%E6%95%B0">24-2、参数</h6> 
<p><span style="color:#fe2c24;"><strong>24-2-1、key</strong></span><span style="color:#956fe7;"><strong>(必须)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，表示要追加数据的键(或路径)在HDF5文件中，如果键已存在且format='table'，则数据将被追加到该键下的表中。</p> 
<p><strong><span style="color:#fe2c24;">24-2-2、value</span><span style="color:#956fe7;">(必须)</span><span style="color:#fe2c24;">：</span></strong>要追加的DataFrame或Series对象。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-3、 format</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定存储格式。对于追加操作，通常使用'table'，因为它支持追加和复杂查询。如果为None，则根据value的类型和已存在的数据集(如果有的话)来推断。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-4、 axes</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>已弃用，不推荐使用。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-5、 index</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为True)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，指定是否将DataFrame的索引也追加到文件中。对于追加操作，这通常应该保持为True，以确保索引的连续性。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-6、append</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为True)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，对于append方法本身来说，这个参数实际上总是True，因为它就是用来追加数据的。但在某些上下文中，这个参数可能用于区分追加和覆盖操作，但在这里不适用。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-7、complib</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定用于压缩的库。与put方法相同，pandas支持多种压缩库，如'zlib'、'lzo'、'blosc'等，选择合适的压缩库可以显著减少文件大小。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-8、complevel</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>整数，指定压缩级别。级别越高，压缩率越高，但处理速度越慢，范围从0(无压缩)到9(最大压缩)。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-9、columns</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>列表，指定要追加的列，如果为None，则追加所有列，这可以用于筛选要追加的列。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-10、min_itemsize</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字典，指定列中字符串的最小存储大小(以字节为单位)，这有助于避免在追加数据时截断字符串，键是列名，值是整数。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-11、nan_rep</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>用于表示NaN值的字符串。默认为None，表示使用HDF5的NaN表示。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-12、chunksize</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>整数，指定写入时的块大小(以行数为单位)，这对于处理大数据集时减少内存使用很有用，如果为None，则一次性写入整个数据集。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-13、expectedrows</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>整数，预期要追加的行数，这可以帮助优化存储结构，但通常不是必需的。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-14、dropna</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>布尔值，如果为True，则在追加之前从DataFrame中删除包含NaN值的行。请注意，这与put方法中的dropna参数不同，后者在append=True时无效。</p> 
<p><strong><span style="color:#fe2c24;">24-2-15、data_columns</span><span style="color:#956fe7;">(可选，默认值为None)</span><span style="color:#fe2c24;">：</span></strong>列表或布尔值，指定哪些列应该作为数据列进行索引，以便可以进行快速查询。如果为True，则所有列都作为数据列；如果为False，则没有列作为数据列；如果为列表，则列表中的列名作为数据列。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-16、encoding</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为None)</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定用于写入文件的编码，这对于存储包含非ASCII字符的字符串列很有用。</p> 
<p><span style="color:#fe2c24;"><strong>24-2-17、errors</strong></span><span style="color:#956fe7;"><strong>(可选，默认值为'strict')</strong></span><span style="color:#fe2c24;"><strong>：</strong></span>字符串，指定在编码或解码字符串时如何处理错误，'strict'表示抛出异常，'ignore'表示忽略错误，'replace'表示用占位符替换错误字符。</p> 
<h6 id="12-3%E3%80%81%E5%8A%9F%E8%83%BD">24-3、功能</h6> 
<p>        用于将DataFrame或Series对象追加到已存在的HDF5文件中的数据集的一个方法。</p> 
<h6 id="12-4%E3%80%81%E8%BF%94%E5%9B%9E%E5%80%BC">24-4、返回值</h6> 
<p>        没有直接的返回值，它的主要作用是执行追加操作，并将数据写入到HDF5文件中。  </p> 
<h6 id="12-5%E3%80%81%E8%AF%B4%E6%98%8E">24-5、说明</h6> 
<p>        无</p> 
<h6 id="12-6%E3%80%81%E7%94%A8%E6%B3%95">24-6、用法</h6> 
<h6 id="12-6-1%E3%80%81%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87">24-6-1、数据准备</h6> 
<pre><code class="language-python">无</code></pre> 
<h6 id="12-6-2%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B">24-6-2、代码示例</h6> 
<pre><code class="language-python"># 24、pandas.HDFStore.append方法
import pandas as pd
# 创建一个示例DataFrame
df1 = pd.DataFrame({'A': [1, 2, 3], 'B': ['a', 'b', 'c']})
df2 = pd.DataFrame({'A': [4, 5, 6], 'B': ['d', 'e', 'f']})
# 将df1保存到HDF5文件中
with pd.HDFStore('example.h5') as store:
    store.put('dataset', df1, format='table')
# 将df2追加到HDF5文件中的dataset数据集
with pd.HDFStore('example.h5') as store:
    store.append('dataset', df2, format='table', index=False)  # 假设我们不想追加索引
# 验证数据是否已追加
with pd.HDFStore('example.h5') as store:
    retrieved_df = store.get('dataset')
print(retrieved_df)
# 输出将显示包含df1和df2数据的完整DataFrame</code></pre> 
<h6 id="12-6-3%E3%80%81%E7%BB%93%E6%9E%9C%E8%BE%93%E5%87%BA%C2%A0">24-6-3、结果输出 </h6> 
<pre><code class="language-python"># 24、pandas.HDFStore.append方法
#    A  B
# 0  1  a
# 1  2  b
# 2  3  c
# 0  4  d
# 1  5  e
# 2  6  f</code></pre> 
<h4 id="%E4%BA%94%E3%80%81%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">二、推荐阅读</h4> 
<h5 id="1%E3%80%81">1、<a href="https://myelsa1024.blog.csdn.net/article/details/139241094?spm=1001.2014.3001.5502" rel="nofollow" title="Python筑基之旅">Python筑基之旅</a></h5> 
<h5 id="2%E3%80%81">2、<a href="https://myelsa1024.blog.csdn.net/article/details/138916144?spm=1001.2014.3001.5502" rel="nofollow" title="Python函数之旅">Python函数之旅</a></h5> 
<h5 id="3%E3%80%81">3、<a href="https://blog.csdn.net/ygb_1024/article/details/136889623?spm=1001.2014.3001.5501" title="Python算法之旅">Python算法之旅</a></h5> 
<h5 id="4%E3%80%81">4、<a href="https://myelsa1024.blog.csdn.net/article/details/139555733" rel="nofollow" title="Python魔法之旅">Python魔法之旅</a></h5> 
<h5 id="5%E3%80%81%C2%A0">5、<a href="https://blog.csdn.net/ygb_1024?spm=1010.2135.3001.5421" title="博客个人主页">博客个人主页</a></h5>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5cfd7b1b75ed5700a8a6edfbd5fff09/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;】AVL树（旋转、平衡因子）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9f1cc1d76604622291fea836110eb1ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">6. C&#43;&#43;中默认成员函数【取地址重载】【const成员函数】 【运算符重载】【实现一个日期类】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>