<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何在 Ubuntu 14.04 上使用 Apache 配置 WebDAV 访问 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5e6f549841d6a080b9cd17c72d9c7533/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="如何在 Ubuntu 14.04 上使用 Apache 配置 WebDAV 访问">
  <meta property="og:description" content="前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。点击跳转到网站。
简介 WebDAV 是 HTTP 协议的扩展，允许用户在服务器上管理文件。有许多使用 WebDAV 服务器的方式。例如，您可以通过将 Word 或 Excel 文档上传到您的 WebDAV 服务器，与同事共享文件。您甚至可以通过简单地给他们一个 URL，与家人和朋友分享您的音乐收藏。所有这些都可以在他们不安装任何东西的情况下实现。
有许多方法可以管理远程服务器上的文件。WebDAV 相对于其他解决方案（如 FTP 或 Samba）具有几个优点。在本文中，我们将介绍如何配置 Apache 服务器，以允许来自 Windows、Mac 和 Linux 的本机 WebDAV 访问，并进行身份验证。
为什么选择 WebDAV？ WebDAV 提供了几个优点：
在所有主要操作系统（Windows、Mac、Linux）上具有本机集成；无需安装第三方软件即可使用 WebDAV。支持部分传输。身份验证选择更多。由于在 HTTP 上，因此 NTLM、Kerberos、LDAP 等都是可能的。 根据您的情况，WebDAV 可能是您需求的最佳解决方案。
为什么选择 Apache？ 有许多支持 WebDAV 的 Linux 上的 Web 服务器。然而，Apache 在那里拥有最符合 WebDAV 协议的实现。在撰写本文时，Nginx 和 Lighttpd 上的 WebDAV 可以工作，但只能部分工作。
先决条件 您需要一个 Ubuntu 14.04 服务器。
在开始之前，让我们首先创建一个具有 sudo 访问权限的用户。您可以以 root 身份运行命令，但由于安全问题，这并不被鼓励。如果您希望了解更多信息，可以参考一篇关于在 Ubuntu 14.04 上添加用户的优秀文章。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-01T19:36:59+08:00">
    <meta property="article:modified_time" content="2024-06-01T19:36:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何在 Ubuntu 14.04 上使用 Apache 配置 WebDAV 访问</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>前些天发现了一个巨牛的<a href="https://www.captainbed.cn/rubys" rel="nofollow">人工智能学习网站</a>，通俗易懂，风趣幽默，忍不住分享一下给大家。<a href="https://www.captainbed.cn/rubys" rel="nofollow">点击跳转到网站</a>。</p> 
<h3><a id="_2"></a>简介</h3> 
<p>WebDAV 是 HTTP 协议的扩展，允许用户在服务器上管理文件。有许多使用 WebDAV 服务器的方式。例如，您可以通过将 Word 或 Excel 文档上传到您的 WebDAV 服务器，与同事共享文件。您甚至可以通过简单地给他们一个 URL，与家人和朋友分享您的音乐收藏。所有这些都可以在他们不安装任何东西的情况下实现。</p> 
<p>有许多方法可以管理远程服务器上的文件。WebDAV 相对于其他解决方案（如 FTP 或 Samba）具有几个优点。在本文中，我们将介绍如何配置 Apache 服务器，以允许来自 Windows、Mac 和 Linux 的本机 WebDAV 访问，并进行身份验证。</p> 
<h4><a id="_WebDAV_8"></a>为什么选择 WebDAV？</h4> 
<p>WebDAV 提供了几个优点：</p> 
<ul><li>在所有主要操作系统（Windows、Mac、Linux）上具有本机集成；无需安装第三方软件即可使用 WebDAV。</li><li>支持部分传输。</li><li>身份验证选择更多。由于在 HTTP 上，因此 NTLM、Kerberos、LDAP 等都是可能的。</li></ul> 
<p>根据您的情况，WebDAV 可能是您需求的最佳解决方案。</p> 
<h4><a id="_Apache_18"></a>为什么选择 Apache？</h4> 
<p>有许多支持 WebDAV 的 Linux 上的 Web 服务器。然而，Apache 在那里拥有最符合 WebDAV 协议的实现。在撰写本文时，Nginx 和 Lighttpd 上的 WebDAV 可以工作，但只能部分工作。</p> 
<h4><a id="_22"></a>先决条件</h4> 
<p>您需要一个 <strong>Ubuntu 14.04</strong> 服务器。</p> 
<p>在开始之前，让我们首先创建一个具有 <strong>sudo</strong> 访问权限的用户。您可以以 <strong>root</strong> 身份运行命令，但由于安全问题，这并不被鼓励。如果您希望了解更多信息，可以参考一篇关于在 Ubuntu 14.04 上添加用户的优秀文章。</p> 
<h3><a id="_28"></a>创建用户</h3> 
<p>当您首次创建 Digital Ocean 实例时，您将获得允许您以 <strong>root</strong> 身份登录的凭据。作为 <strong>root</strong>，让我们首先添加一个名为 <strong>alex</strong> 的用户。</p> 
<pre><code>adduser alex
</code></pre> 
<p>您将被提示为用户 <strong>alex</strong> 创建密码，如下所示。还将有关于用户 <strong>alex</strong> 的信息的进一步提示。如果您愿意，可以输入这些信息。</p> 
<pre><code>Adding user `alex' ...
Adding new group `alex' (1000) ...
Adding new user `alex' (1000) with group `alex' ...
Creating home directory `/home/alex' ...
Copying files from `/etc/skel' ...
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
Changing the user information for alex
Enter the new value, or press ENTER for the default
        Full Name []:
        Room Number []:
        Work Phone []:
        Home Phone []:
        Other []:
Is the information correct? [Y/n] y
</code></pre> 
<h3><a id="_sudo__57"></a>授予用户 sudo 权限</h3> 
<p>创建新用户后，下一步是授予用户 <strong>alex</strong> sudo 权限。假设您仍然以 <strong>root</strong> 身份登录，通过输入以下命令将用户 <strong>alex</strong> 添加到 <strong>sudo</strong> 组。</p> 
<pre><code>usermod -aG sudo alex
</code></pre> 
<p>属于 <strong>sudo</strong> 组的用户被授予 <strong>sudo</strong> 权限。现在您可以注销并以用户 <strong>alex</strong> 的身份登录。</p> 
<h3><a id="___Apache_67"></a>步骤一 — 安装 Apache</h3> 
<p>让我们安装 Apache。</p> 
<pre><code>sudo apt-get update
sudo apt-get install apache2
</code></pre> 
<p>Apache Web 服务器应该已经安装并运行。</p> 
<h3><a id="___WebDAV_78"></a>步骤二 — 设置 WebDAV</h3> 
<p>设置 WebDAV 有三个步骤。我们需要指定一个位置，启用必要的模块，并进行配置。</p> 
<h4><a id="_82"></a>准备目录</h4> 
<p>我们需要指定一个用于提供 WebDAV 服务的文件夹。我们将为此创建新目录 <code>/var/www/webdav</code>。您还需要将所有者更改为 <code>www-data</code>（您的 Apache 用户），以允许 Apache 对其进行写入。</p> 
<pre><code>sudo mkdir /var/www/webdav
sudo chown -R www-data:www-data /var/www/
</code></pre> 
<h4><a id="_91"></a>启用模块</h4> 
<p>接下来，使用 a2enmod 启用 WebDAV 模块</p> 
<pre><code>sudo a2enmod dav
sudo a2enmod dav_fs
</code></pre> 
<p>Apache 模块位于 <code>/etc/apache2/mods-available</code>。这将在 <code>/etc/apache2/mods-available</code> 和 <code>/etc/apache2/mods-enabled</code> 之间创建符号链接。</p> 
<h4><a id="_102"></a>配置</h4> 
<p>使用您喜欢的文本编辑器打开或创建位于 <code>/etc/apache2/sites-available/000-default.conf</code> 的配置文件。</p> 
<pre><code>nano /etc/apache2/sites-available/000-default.conf
</code></pre> 
<p>在第一行添加 <strong>DavLockDB</strong> 指令配置：</p> 
<pre><code>DavLockDB /var/www/DavLock
</code></pre> 
<p>并在 VirtualHost 部分内添加 <strong>Alias</strong> 和 <strong>Directory</strong> 指令：</p> 
<pre><code>Alias /webdav /var/www/webdav

&lt;Directory /var/www/webdav&gt;
    DAV On
&lt;/Directory&gt;
</code></pre> 
<p>编辑后，文件应如下所示。</p> 
<pre><code>DavLockDB /var/www/DavLock
&lt;VirtualHost *:80&gt;
        # ServerName 指令设置服务器用于标识自身的请求方案、主机名和端口。在创建重定向 URL 时使用。在虚拟主机的上下文中，ServerName 指定了请求的 Host: 标头中必须出现的主机名，以匹配此虚拟主机。对于默认虚拟主机（此文件），此值并不决定性，因为它作为最后的主机作为最后的主机使用。但是，对于任何进一步的虚拟主机，您必须显式设置它。
        #ServerName www.example.com

        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/html

        # 可用的日志级别：trace8、...、trace1、debug、info、notice、warn、error、crit、alert、emerg。
        # 还可以为特定模块配置日志级别，例如
        #LogLevel info ssl:warn

        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        # 对于 conf-available/ 中的大多数配置文件，可以配置为在全局级别启用或禁用，可以为特定虚拟主机包含一行。例如，以下行仅为此主机启用 CGI 配置，仅在使用 "a2disconf" 全局禁用后才能使用。
        #Include conf-available/serve-cgi-bin.conf

        Alias /webdav /var/www/webdav

        &lt;Directory /var/www/webdav&gt;
            DAV On
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;


```markdown
# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
</code></pre> 
<p>DavLockDB 指令指定了 DAV 锁定数据库的名称。它应该是一个文件的路径。这个文件不需要被创建。该目录应该是 Apache 服务器可写的。</p> 
<p>Alias 指令将请求映射到 <code>http://your.server/webdav</code> 到 <code>/var/www/webdav</code> 文件夹。</p> 
<p>Directory 指令告诉 Apache 为 <code>/var/www/webdav</code> 文件夹启用 WebDAV。您可以从 Apache 文档中了解更多关于 mod_dav 的信息。</p> 
<p>如果您重新启动 Apache 服务器，您将拥有一个可以无需身份验证的工作 WebDAV 服务器。</p> 
<p>像这样重新启动 Apache 服务器：</p> 
<pre><code>sudo service apache2 restart
</code></pre> 
<h3><a id="_173"></a>测试</h3> 
<p>无需身份验证的 WebDAV 仅允许用户进行读取访问。为了测试，让我们创建一个样本文件。</p> 
<pre><code>echo "this is a sample text file" | sudo tee -a /var/www/webdav/sample.txt
</code></pre> 
<p>应该在 <code>/var/www/webdav</code> 中创建一个名为 <strong>sample.txt</strong> 的文本文件。它应该包含文本 <em>this is a sample text file</em>。</p> 
<p>现在我们可以尝试从外部计算机登录。WebDAV 服务器应该在 <strong>http://&lt;your.server.com&gt;/webdav</strong> 找到。为了简洁起见，我们只展示如何在 Mac 上无需凭据登录。</p> 
<p>在 Mac 上，打开 <strong>Finder</strong>。在菜单栏中，找到 <strong>前往</strong> 并选择 <strong>连接服务器</strong> 选项。</p> 
<p>!WebDAV Mac 步骤 1</p> 
<p>选择 <strong>以访客身份连接</strong> 选项。然后，点击 <strong>连接</strong>。</p> 
<p>!WebDAV Mac 步骤 2</p> 
<p>您应该已登录。如果您连接到该共享文件系统并进入 <code>webdav</code> 文件夹，您应该能够看到之前创建的 <code>sample.txt</code> 文件。该文件应该是可下载的。</p> 
<p>!WebDAV Mac 步骤 3</p> 
<h3><a id="___197"></a>第三步 — 添加身份验证</h3> 
<p>没有身份验证的 WebDAV 服务器是不安全的。在本节中，我们将使用摘要身份验证方案为您的 WebDAV 服务器添加身份验证。</p> 
<h3><a id="_201"></a>基本身份验证还是摘要身份验证？</h3> 
<p>有许多身份验证方案可用。此表说明了不同操作系统上各种身份验证方案的兼容性。请注意，如果您正在提供 HTTPS 服务，我们假设您的 SSL 证书是有效的（而不是自签名的）。</p> 
<p>!WebDAV 兼容性</p> 
<p>如果您使用 <strong>HTTP</strong>，请使用摘要身份验证，因为它将在所有操作系统上工作。如果您使用 <strong>HTTPS</strong>，您可以选择使用基本身份验证。</p> 
<p>我们将介绍 <strong>摘要</strong> 身份验证方案，因为它在所有操作系统上都可以工作，而无需 SSL 证书。</p> 
<h4><a id="_211"></a>摘要身份验证</h4> 
<p>让我们生成存储用户密码的文件（称为 <code>users.password</code>）。在摘要身份验证中，有一个称为 <strong>realm</strong> 的字段，它充当用户的命名空间。我们将使用 <strong>webdav</strong> 作为我们的 <strong>realm</strong>。我们的第一个用户将被称为 <strong>alex</strong>。</p> 
<p>为了生成摘要文件，我们必须安装依赖项。</p> 
<pre><code>sudo apt-get install apache2-utils
</code></pre> 
<p>接下来我们将添加用户。让我们使用以下命令生成用户密码文件。</p> 
<pre><code>sudo htdigest -c /etc/apache2/users.password webdav alex
</code></pre> 
<p>这将把用户 <strong>alex</strong> 添加到密码文件中。应该会有一个密码提示来为 <strong>alex</strong> 创建密码。</p> 
<p>对于随后添加的用户，您应该删除 <strong>c</strong> 标志。以下是另一个示例，添加一个名为 <strong>chris</strong> 的用户。在提示时创建密码。</p> 
<pre><code>sudo htdigest /etc/apache2/users.password webdav chris
</code></pre> 
<p>我们还需要允许 Apache 读取密码文件，因此我们更改所有者。</p> 
<pre><code>sudo chown www-data:www-data /etc/apache2/users.password
</code></pre> 
<p>创建密码文件后，我们应该对 <code>/etc/apache2/sites-available/000-default.conf</code> 中的配置进行更改。</p> 
<p>在 <strong>Directory</strong> 指令中添加以下行</p> 
<pre><code>AuthType Digest
AuthName "webdav"
AuthUserFile /etc/apache2/users.password
Require valid-user
</code></pre> 
<p>最终版本应该如下所示（删除了注释）。</p> 
<pre><code>DavLockDB /var/www/DavLock

&lt;VirtualHost *:80&gt;
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /webdav /var/www/webdav

    &lt;Directory /var/www/webdav&gt;
        DAV On
        AuthType Digest
        AuthName "webdav"
        AuthUserFile /etc/apache2/users.password
		Require valid-user
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre> 
<p>mod_authn 模块包含了身份验证指令的定义。</p> 
<p><strong>AuthType</strong> 指令告诉 Apache 对于 <code>/var/www/webdav</code> 目录，应该使用 <strong>Digest</strong> 方案进行身份验证。</p> 
<p><strong>Digest</strong> 身份验证需要一个 <strong>realm</strong> 的值，我们将其设置为 <strong>webdav</strong>。<strong>Realm</strong> 充当命名空间。当您有相同名称的用户时，您可以使用不同的 <strong>realm</strong> 值来将它们分开。我们使用 <strong>AuthName</strong> 指令来设置 <strong>realm</strong> 的值。</p> 
<p><strong>AuthUserFile</strong> 指令用于指示密码文件的位置。</p> 
<p><strong>Require</strong> 指令说明只有经过身份验证的有效用户才能访问该目录。</p> 
<p>最后，启用 Digest 模块并重新启动服务器以使设置生效。</p> 
<pre><code>sudo a2enmod auth_digest
sudo service apache2 restart
</code></pre> 
<h3><a id="___294"></a>第四步 - 访问文件</h3> 
<p>我们将演示如何从 Mac、Windows 和 Linux（Ubuntu）的本机文件浏览器访问您的 WebDAV 服务器。为了简洁起见，我们将仅演示在 Mac 上的文件和文件夹操作，尽管您可以从所有操作系统上的服务器上添加、编辑和删除文件。</p> 
<p>您还可以使用 Web 浏览器通过互联网访问文件。</p> 
<p>如果您之前进行过测试，可能需要弹出驱动器并重新连接以添加身份验证。</p> 
<h4><a id="Mac_302"></a>Mac</h4> 
<p>在 Mac 上，打开 <strong>Finder</strong>。在菜单栏中，找到 <strong>前往</strong> 并选择 <strong>连接服务器</strong> 选项。</p> 
<p>!WebDAV Mac 步骤 1</p> 
<p>输入服务器地址。应该是 <strong>http://&lt;your.server&gt;/webdav</strong>。按下 <strong>连接</strong>。</p> 
<p>!WebDAV Mac 步骤 2</p> 
<p>系统会提示您输入用户名和密码。输入我们在服务器上创建的用户之一，然后按下 <strong>连接</strong>。</p> 
<p>!WebDAV Mac 步骤 3</p> 
<p>连接后，目录应该会出现在 <strong>Finder</strong> 中。</p> 
<p>!WebDAV Mac 步骤 4</p> 
<p>您可以复制和保存文件到 <code>webdav</code> 目录，并创建子目录。以下是服务器上目录的初始状态：</p> 
<p>!WebDAV Mac 步骤 5</p> 
<p>您可以像在 Finder 中一样添加或重命名文件，并创建新目录。以下是最终结果。</p> 
<p>!WebDAV Mac 步骤 6</p> 
<h4><a id="Windows_328"></a>Windows</h4> 
<p>在 Windows 上，打开 <strong>文件资源管理器</strong>。在左侧边栏中，您应该会找到 <strong>网络</strong> 图标。</p> 
<p>!WebDAV Windows 步骤 1</p> 
<p>右键单击 <strong>网络</strong> 图标。它应该显示上下文菜单，其中包含 <strong>映射网络驱动器</strong> 选项。点击它。</p> 
<p>!WebDAV Windows 步骤 2</p> 
<p>在文件夹字段中输入服务器地址。应该是 <strong>http://&lt;your.server&gt;/webdav</strong>。如果您的登录信息不同，请选择 <strong>使用不同的凭据连接</strong>。按下 <strong>完成</strong>。</p> 
<p>!WebDAV Windows 步骤 3</p> 
<p>系统会提示您输入用户名和密码。输入后按下 <strong>确定</strong>。</p> 
<p>!WebDAV Windows 步骤 4</p> 
<p>连接后，它应该会出现在您的 <strong>文件资源管理器</strong> 左侧边栏中作为网络驱动器。</p> 
<p>!WebDAV Windows 步骤 5</p> 
<h4><a id="LinuxUbuntu_350"></a>Linux（Ubuntu）</h4> 
<p>我们使用 Ubuntu 14.04 作为我们的 Linux 桌面操作系统。在 Ubuntu 上，打开 <strong>文件</strong>。左侧边栏上有一个 <strong>连接到服务器</strong> 选项。点击它。</p> 
<p>!WebDAV Linux 步骤 1</p> 
<p>输入服务器地址。应该是 <strong>dav://&lt;your.server&gt;/webdav</strong>。按下 <strong>连接</strong>。</p> 
<p>!WebDAV Linux 步骤 2</p> 
<p>系统会提示您输入用户名和密码。输入后按下 <strong>连接</strong>。</p> 
<p>!WebDAV Linux 步骤 3</p> 
<p>连接后，目录应该会出现在 <strong>网络</strong> 列表下。</p> 
<p>!WebDAV Linux 步骤 4</p> 
<h3><a id="_368"></a>结论</h3> 
<p>在本文中，我们已经介绍了如何在 Ubuntu 14.04 上使用 Apache 设置 WebDAV 服务器。我们还讨论了如何配置摘要身份验证以保护服务器。最后，我们向您展示了如何使用它们的本机文件浏览器从三个主要操作系统连接到 WebDAV 服务器。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3133c8a48f73b4683abdedd0f05b764e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据在内存中的存储＜C语言＞</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5832a00499eea967b1177e3dd835a4e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在 Ubuntu 12.04 VPS 上使用 MongoDB 创建分片集群</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>