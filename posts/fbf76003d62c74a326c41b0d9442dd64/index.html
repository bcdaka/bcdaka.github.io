<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>伪分布式大数据集群安装 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/fbf76003d62c74a326c41b0d9442dd64/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="伪分布式大数据集群安装">
  <meta property="og:description" content="目录
前言
一、新建虚拟机
二、安装Centos系统
二、设置静态IP地址
三、连接xshell
四、上传安装包
五、安装JDK
六、配置IP映射
七、设置SSH免密登录
七、安装Hadoop
启动Hadoop 八、安装Spark
九、安装MySQL
十、安装Hive
总结
前言 此次我们选择的是通过在VMware虚拟机上面进行Hadoop的安装和配置，需要准备的东西如下：
系统环境：CentOS 7
镜像：CentOS-7-x86_64-DVD-2003
JDK：jdk-8u291-linux-x64.tar.gz
Hadoop：hadoop-3.1.3.tar.gz
Spark：spark-3.1.1-bin-hadoop2.7.tgz
上面所需的环境准备，我已经打包整理好全部放在了网盘，有需要的同学可以自行下载，点击下载
一、新建虚拟机 使用自定义类型的配置
选择稍后安装操作系统
选择Linux操作系统，版本为Centos 7 64位
设置虚拟机名称，以及它的存放目录
设置处理器数量，配置好的可以设置为2个
设置虚拟机内存为2G，注：电脑配置差的可以设置为1G
使用网络地址转换
默认，下一步
使用默认的磁盘类型
创建新的磁盘
磁盘大小默认，点击下一步
设置磁盘存储位置
创建完成，点击完成
编辑虚拟机设置，选择Centos镜像地址
二、安装Centos系统 设置完成后点击开启虚拟机，鼠标点击安装页面，键盘方向键选择Install Centos7
语言选择简体中文
软件选择，选择GNOME桌面
点击安装位置，进入之后点击完成
开始安装
开始安装
设置root密码为：123，点两下完成
等待安装完成
点击同意许可证
设置主机名位master，点击应用
二、设置静态IP地址 点击编辑-&gt;虚拟网络编辑器
选择VMnet8，设置子网IP为：192.168.28.0，子网掩码为255.255.255.0，其他设置如图所示：
点击完成后，完成配置，选择时区为上海
设置普通用户名
设置普通用户密码，这个一定记得
安装如图所示操作，点击应用
查看IP地址，如有ens33网卡为192.168.28.100，则配置成功
三、连接xshell 四、上传安装包 上传所需的安装包到opt目录下
五、安装JDK 进入到opt目录下，解压JDK安装包
tar -zxf jdk-8u291-linux-x64.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-25T10:09:31+08:00">
    <meta property="article:modified_time" content="2024-06-25T10:09:31+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">伪分布式大数据集群安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95"><a id="_0"></a></h2> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95-toc" style="margin-left:0px;"></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E4%B8%80%E3%80%81%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA" rel="nofollow">一、新建虚拟机</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85Centos%E7%B3%BB%E7%BB%9F-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85Centos%E7%B3%BB%E7%BB%9F" rel="nofollow">二、安装Centos系统</a></p> 
<p id="%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4" rel="nofollow">二、设置静态IP地址</a></p> 
<p id="%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5xshell-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5xshell" rel="nofollow">三、连接xshell</a></p> 
<p id="%E5%9B%9B%E3%80%81%E4%B8%8A%E4%BC%A0%E5%AE%89%E8%A3%85%E5%8C%85-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E4%B8%8A%E4%BC%A0%E5%AE%89%E8%A3%85%E5%8C%85" rel="nofollow">四、上传安装包</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%AE%89%E8%A3%85JDK-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E5%AE%89%E8%A3%85JDK" rel="nofollow">五、安装JDK</a></p> 
<p id="%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEIP%E6%98%A0%E5%B0%84-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEIP%E6%98%A0%E5%B0%84" rel="nofollow">六、配置IP映射</a></p> 
<p id="%E4%B8%83%E3%80%81%E8%AE%BE%E7%BD%AESSH%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95-toc" style="margin-left:0px;"><a href="#%E4%B8%83%E3%80%81%E8%AE%BE%E7%BD%AESSH%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95" rel="nofollow">七、设置SSH免密登录</a></p> 
<p id="%E4%B8%83%E3%80%81%E5%AE%89%E8%A3%85Hadoop-toc" style="margin-left:0px;"><a href="#%E4%B8%83%E3%80%81%E5%AE%89%E8%A3%85Hadoop" rel="nofollow">七、安装Hadoop</a></p> 
<p id="%E5%90%AF%E5%8A%A8Hadoop%C2%A0-toc" style="margin-left:80px;"><a href="#%E5%90%AF%E5%8A%A8Hadoop%C2%A0" rel="nofollow">启动Hadoop </a></p> 
<p id="%E5%85%AB%E3%80%81%E5%AE%89%E8%A3%85Spark-toc" style="margin-left:0px;"><a href="#%E5%85%AB%E3%80%81%E5%AE%89%E8%A3%85Spark" rel="nofollow">八、安装Spark</a></p> 
<p id="%E4%B9%9D%E3%80%81%E5%AE%89%E8%A3%85MySQL-toc" style="margin-left:0px;"><a href="#%E4%B9%9D%E3%80%81%E5%AE%89%E8%A3%85MySQL" rel="nofollow">九、安装MySQL</a></p> 
<p id="%E5%8D%81%E3%80%81%E5%AE%89%E8%A3%85Hive-toc" style="margin-left:0px;"><a href="#%E5%8D%81%E3%80%81%E5%AE%89%E8%A3%85Hive" rel="nofollow">十、安装Hive</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%89%8D%E8%A8%80"><a id="_12"></a>前言</h2> 
<p>此次我们选择的是通过在VMware虚拟机上面进行Hadoop的安装和配置，需要准备的东西如下：<br> 系统环境：CentOS 7</p> 
<p>镜像：CentOS-7-x86_64-DVD-2003<br> JDK：jdk-8u291-linux-x64.tar.gz<br> Hadoop：hadoop-3.1.3.tar.gz</p> 
<p>Spark：spark-3.1.1-bin-hadoop2.7.tgz<br> 上面所需的环境准备，我已经打包整理好全部放在了网盘，有需要的同学可以自行下载，<a class="link-info" href="https://pan.baidu.com/s/1CEijiu07ZESkX0xwHfsWYQ?pwd=hy1f" rel="nofollow" title="点击下载">点击下载</a></p> 
<hr> 
<h2 id="%E4%B8%80%E3%80%81%E6%96%B0%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA"><a id="pandas_22"></a>一、新建虚拟机</h2> 
<p>使用自定义类型的配置</p> 
<p><img alt="" height="434" src="https://images2.imgbox.com/f3/2f/P9uBrfia_o.png" width="497"></p> 
<p>选择稍后安装操作系统</p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/e8/82/AQSaZDtg_o.png" width="499"></p> 
<p>选择Linux操作系统，版本为Centos 7 64位</p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/39/95/3tqZ7ZBb_o.png" width="494"></p> 
<p>设置虚拟机名称，以及它的存放目录</p> 
<p><img alt="" height="431" src="https://images2.imgbox.com/1b/f4/dWANdpes_o.png" width="500"></p> 
<p>设置处理器数量，配置好的可以设置为2个</p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/3f/c6/d94ePVEa_o.png" width="501"></p> 
<p>设置虚拟机内存为2G，注：电脑配置差的可以设置为1G</p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/03/62/KhHafWZl_o.png" width="497"></p> 
<p>使用网络地址转换</p> 
<p><img alt="" height="434" src="https://images2.imgbox.com/d7/66/HiPD6EzB_o.png" width="505"></p> 
<p>默认，下一步</p> 
<p><img alt="" height="434" src="https://images2.imgbox.com/b4/17/L965kBva_o.png" width="497"></p> 
<p>使用默认的磁盘类型</p> 
<p><img alt="" height="434" src="https://images2.imgbox.com/9b/21/maEK6IUm_o.png" width="510"></p> 
<p>创建新的磁盘</p> 
<p><img alt="" height="431" src="https://images2.imgbox.com/94/1f/SbIsQlsI_o.png" width="496"></p> 
<p>磁盘大小默认，点击下一步</p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/56/bf/G2tzsqZq_o.png" width="502"></p> 
<p>设置磁盘存储位置</p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/42/2b/fiAkp23G_o.png" width="498"></p> 
<p>创建完成，点击完成</p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/b7/82/DyorL50F_o.png" width="497"></p> 
<p>编辑虚拟机设置，选择Centos镜像地址</p> 
<p><img alt="" height="454" src="https://images2.imgbox.com/5f/f1/D9eNJHYh_o.png" width="1074"></p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85Centos%E7%B3%BB%E7%BB%9F">二、安装Centos系统</h2> 
<p>设置完成后点击开启虚拟机，鼠标点击安装页面，键盘方向键选择Install Centos7</p> 
<p><img alt="" height="616" src="https://images2.imgbox.com/2f/f6/EOFII1ve_o.png" width="1014"></p> 
<p>语言选择简体中文</p> 
<p><img alt="" height="605" src="https://images2.imgbox.com/e0/f4/I3oJ1xYs_o.png" width="805"></p> 
<p>软件选择，选择GNOME桌面</p> 
<p><img alt="" height="602" src="https://images2.imgbox.com/97/15/D9pI4BxI_o.png" width="803"></p> 
<p><img alt="" height="607" src="https://images2.imgbox.com/bc/b2/V9bOiWaz_o.png" width="803"></p> 
<p>点击安装位置，进入之后点击完成</p> 
<p><img alt="" height="606" src="https://images2.imgbox.com/d9/a7/dx8PQ2Bf_o.png" width="799"></p> 
<p>开始安装</p> 
<p><img alt="" height="605" src="https://images2.imgbox.com/7b/e3/FlTFS4kw_o.png" width="801"></p> 
<p>开始安装</p> 
<p><img alt="" height="604" src="https://images2.imgbox.com/57/49/R9MGAWLg_o.png" width="806"></p> 
<p><span style="color:#fe2c24;">设置root密码为：123</span>，点两下完成</p> 
<p><img alt="" height="599" src="https://images2.imgbox.com/5a/a2/HfeZBbgP_o.png" width="802"></p> 
<p>等待安装完成</p> 
<p><img alt="" height="606" src="https://images2.imgbox.com/3c/00/F5n6rLWH_o.png" width="810"></p> 
<p>点击同意许可证</p> 
<p><img alt="" height="710" src="https://images2.imgbox.com/4b/fd/FELerNge_o.png" width="1200"></p> 
<p><img alt="" height="800" src="https://images2.imgbox.com/95/e5/MQB3wxfg_o.png" width="1200"></p> 
<p><img alt="" height="464" src="https://images2.imgbox.com/67/a3/6cPrwDAH_o.png" width="939"></p> 
<p>设置主机名位master，点击应用</p> 
<p><img alt="" height="864" src="https://images2.imgbox.com/eb/85/YNNFncEm_o.png" width="1197"></p> 
<h2 id="%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><a id="_26"></a>二、设置静态IP地址</h2> 
<p>点击编辑-&gt;虚拟网络编辑器</p> 
<p><img alt="" height="305" src="https://images2.imgbox.com/b6/fa/YZAgV59A_o.png" width="769"></p> 
<h3 id="1.%E5%BC%95%E5%85%A5%E5%BA%93"></h3> 
<p><img alt="" height="563" src="https://images2.imgbox.com/e0/ce/nKFpPPnW_o.png" width="602"></p> 
<p>选择VMnet8，设置子网IP为：192.168.28.0，子网掩码为255.255.255.0，其他设置如图所示：</p> 
<p><img alt="" height="533" src="https://images2.imgbox.com/49/ef/g3QELxCF_o.png" width="612"></p> 
<p><img alt="" height="867" src="https://images2.imgbox.com/c2/82/atSajH1y_o.png" width="1200"></p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/f7/ff/ofjyPQUw_o.png" width="624"></p> 
<p>点击完成后，完成配置，选择时区为上海</p> 
<p><img alt="" height="582" src="https://images2.imgbox.com/3b/2d/yhaoB1Qe_o.png" width="974"></p> 
<p>设置普通用户名</p> 
<p><img alt="" height="495" src="https://images2.imgbox.com/35/23/xNRRmSsk_o.png" width="965"></p> 
<p>设置普通用户密码，这个一定记得</p> 
<p><img alt="" height="489" src="https://images2.imgbox.com/db/e3/7qeDFog4_o.png" width="974"></p> 
<p>安装如图所示操作，点击应用</p> 
<p><img alt="" height="802" src="https://images2.imgbox.com/6d/0b/E1g3M1Rc_o.png" width="1200"></p> 
<p>查看IP地址，如有ens33网卡为192.168.28.100，则配置成功</p> 
<p><img alt="" height="401" src="https://images2.imgbox.com/9e/b1/rgJpwWRW_o.png" width="730"></p> 
<h2 id="%E4%B8%89%E3%80%81%E8%BF%9E%E6%8E%A5xshell">三、连接xshell</h2> 
<p><img alt="" height="496" src="https://images2.imgbox.com/ca/f3/WJtF6nwf_o.png" width="572"></p> 
<p><img alt="" height="313" src="https://images2.imgbox.com/e7/73/9I0wvYdi_o.png" width="578"></p> 
<p><img alt="" height="539" src="https://images2.imgbox.com/c6/f8/sGpulsMA_o.png" width="868"></p> 
<h2 id="%E5%9B%9B%E3%80%81%E4%B8%8A%E4%BC%A0%E5%AE%89%E8%A3%85%E5%8C%85">四、上传安装包</h2> 
<p>上传所需的安装包到opt目录下</p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/52/91/EJu4ujG8_o.png" width="1200"></p> 
<p><img alt="" height="413" src="https://images2.imgbox.com/2b/e6/KoBDXhl1_o.png" width="1153"></p> 
<h2 id="%E4%BA%94%E3%80%81%E5%AE%89%E8%A3%85JDK">五、安装JDK</h2> 
<p>进入到opt目录下，解压JDK安装包</p> 
<pre><code class="language-bash">tar -zxf jdk-8u291-linux-x64.tar.gz</code></pre> 
<p><img alt="" height="221" src="https://images2.imgbox.com/f1/19/ENMoEW2s_o.png" width="977"></p> 
<p>设置环境变量</p> 
<pre><code class="language-bash">vim /etc/profile</code></pre> 
<pre><code class="language-bash">export JAVA_HOME=/opt/jdk1.8.0_291
export PATH=$JAVA_HOME/bin:$PATH</code></pre> 
<p>生效环境变量</p> 
<pre><code class="language-bash">source /etc/profile</code></pre> 
<p>查看JAVA版本，检验是否安装成功<img alt="" height="168" src="https://images2.imgbox.com/c5/0a/DOf9Lnyo_o.png" width="791"></p> 
<h2 id="%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEIP%E6%98%A0%E5%B0%84">六、配置IP映射</h2> 
<p>查看主机名是否为master，若不是，则使用下面命令设置主机名</p> 
<pre><code class="language-bash">hostnamectl set-hostname master</code></pre> 
<p>bash刷新 </p> 
<p><img alt="" height="98" src="https://images2.imgbox.com/41/36/FilNTR0o_o.png" width="543"></p> 
<p>进入hosts文件里面添加IP与主机别名的映射关系。</p> 
<pre><code class="language-bash">vim /etc/hosts</code></pre> 
<p><img alt="" height="321" src="https://images2.imgbox.com/2d/0b/vTI51sCt_o.png" width="964"></p> 
<p>按esc，保存退出:wq</p> 
<p><strong><span style="color:#fe2c24;">reboot重启</span></strong></p> 
<p><img alt="" height="49" src="https://images2.imgbox.com/2c/67/b0H3zOBL_o.png" width="373"></p> 
<h2 id="%E4%B8%83%E3%80%81%E8%AE%BE%E7%BD%AESSH%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><strong><strong><strong>七、设置SSH免密登录</strong></strong></strong></h2> 
<p>使用“ssh-keygen -t rsa”命令，接着按3次“Enter”键。ssh-keygen产生公钥与私钥（可以进入.ssh目录中查看，id_rsa:私钥，id_rsa.pub :公钥）。</p> 
<p><img alt="" height="554" src="https://images2.imgbox.com/7d/dd/zF5dY5Bd_o.png" width="945"></p> 
<p>使用命令“ssh-copy-id”将公钥复制至master，输入ssh-copy-id master后，输入yes和密码。</p> 
<p><img alt="" height="481" src="https://images2.imgbox.com/50/f9/jH0rRske_o.png" width="1144"></p> 
<p>验证免密登录是否成功，输入ssh master命令。</p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/f5/38/ZNbuHevc_o.png" width="778"></p> 
<p>然后exit退出</p> 
<h2 id="%E4%B8%83%E3%80%81%E5%AE%89%E8%A3%85Hadoop">七、安装Hadoop</h2> 
<p>解压安装包，在opt目录下</p> 
<pre><code class="language-bash">tar -zxf hadoop-3.1.3.tar.gz</code></pre> 
<p>修改环境变量</p> 
<p>vim /etc/profile</p> 
<p><img alt="" height="198" src="https://images2.imgbox.com/12/6e/IZCdSMFl_o.png" width="794"></p> 
<p>生效环境变量</p> 
<pre><code class="language-bash">source /etc/profile</code></pre> 
<p>进入/opt/hadoop-3.1.3/etc/hadoop目录</p> 
<pre><code class="language-bash">cd /opt/hadoop-3.1.3/etc/hadoop/</code></pre> 
<p>依次修改core-site.xml、hadoop-env.sh、hdfs-site.xml、mapred-site.xml、yarn-site.xml共5个配置文件的内容，具体操作步骤如下。</p> 
<ul><li>使用命令“<strong>vim core-site.xml</strong>”打开文件。hadoop.tmp.dir配置了Hadoop的临时文件的目录。添加的内容如下面代码所示。</li></ul> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
    &lt;name&gt;fs.defaultFS&lt;/name&gt;
      &lt;value&gt;hdfs://master:8020&lt;/value&gt;
      &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
      &lt;value&gt;/opt/hadoop-3.1.3/tmp&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p><img alt="" height="625" src="https://images2.imgbox.com/f1/ff/vyh8pinR_o.png" width="848"></p> 
<ul><li>使用命令“<strong>vim <strong>hadoop-env.sh”</strong></strong>打开文件。hadoop-env.sh文件设置了Hadoop运行基本环境的配置，需要修改JDK所在目录。在顶部添加如下代码。</li></ul> 
<pre><code class="language-bash">export JAVA_HOME=/opt/jdk1.8.0_291
export HDFS_NAMENODE_USER=root
export HDFS_DATANODE_USER=root
export HDFS_SECONDARYNAMENODE_USER=root
export YARN_RESOURCEMANAGER_USER=root
export YARN_NODEMANAGER_USER=root</code></pre> 
<p><img alt="" height="634" src="https://images2.imgbox.com/a1/8c/93D2WoDp_o.png" width="1150"></p> 
<ul><li>使用命<strong>“vim hdfs-site.xml”</strong>打开文件。hdfs-site.xml设置了HDFS相关的配置，修改内容如代码所示</li></ul> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;
        &lt;value&gt;master:9870&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;
        &lt;value&gt;master:9868&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p><img alt="" height="627" src="https://images2.imgbox.com/de/32/c2KSpFpS_o.png" width="977"></p> 
<ul><li>使用命令“<strong><strong>vim </strong></strong><strong><strong>mapred-site.xml</strong></strong><strong><strong>”</strong></strong>打开文件，mapred-site.xml文件添加的内容如代码所示。</li></ul> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p><img alt="" height="610" src="https://images2.imgbox.com/ce/e0/UAEs9QZa_o.png" width="811"></p> 
<ul><li>使用命令“<strong><strong>vi </strong></strong><strong><strong>yarn-site.xml</strong></strong><strong><strong>”</strong></strong>打开文件，yarn-site.xml文件修改的内容如代码所示。 </li></ul> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
 
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
        &lt;value&gt;master&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p><img alt="" height="579" src="https://images2.imgbox.com/e4/04/N03uSrM6_o.png" width="907"></p> 
<h4 id="%E5%90%AF%E5%8A%A8Hadoop%C2%A0"><strong>启动Hadoop </strong></h4> 
<p>（1）在首次启动签需要使用命令“<strong>hdfs namenode -format</strong>”格式化NameNode。</p> 
<p>进入bin目录，执行格式化</p> 
<pre><code class="language-bash">cd /opt/hadoop-3.1.3/bin/</code></pre> 
<p> <img alt="" height="78" src="https://images2.imgbox.com/d2/a4/r0CXRwYk_o.png" width="570"></p> 
<p>（2）格式化完成后即可启动Hadoop集群，使用命令“<strong>start-all.sh</strong>”可启动Hadoop集群。</p> 
<p>进入sbin目录下，一键启动Hadoop</p> 
<pre><code class="language-bash">cd /opt/hadoop-3.1.3/sbin/
</code></pre> 
<p><img alt="" height="311" src="https://images2.imgbox.com/0e/ed/x1dekN0Q_o.png" width="764"></p> 
<p>（3）集群启动之后，使用“jps”命令，出现如下图所示的6个进程信息，说明集群启动成功。</p> 
<p> <img alt="" height="182" src="https://images2.imgbox.com/94/e4/72AqYXFa_o.png" width="504"></p> 
<p>查看HDFS对应的webUI（<span style="color:#fe2c24;">必须要先关闭防火墙</span>）<br> 首先查看防火墙的状态:firewall-cmd --state<br> 防火墙为running状态</p> 
<p><img alt="" height="58" src="https://images2.imgbox.com/6a/54/g4Y8z7y4_o.png" width="525"></p> 
<p>需要关闭防火墙：systemctl stop firewalld.service</p> 
<p>永久关闭：systemctl disable firewalld.service</p> 
<p><img alt="" height="148" src="https://images2.imgbox.com/59/d2/mLwjjbW9_o.png" width="946"><br> 浏览器输入网址：http://192.168.28.100:9870</p> 
<p><img alt="" height="650" src="https://images2.imgbox.com/75/8d/JowBL5wY_o.png" width="1200"></p> 
<h2 id="%E5%85%AB%E3%80%81%E5%AE%89%E8%A3%85Spark">八、安装Spark</h2> 
<p>进入/opt目录下，解压安装包</p> 
<p><img alt="" height="152" src="https://images2.imgbox.com/be/f8/1VGk7Ksz_o.png" width="955"></p> 
<ul><li><strong>进入到Spark安装包的conf目录下，具体命令如下：</strong></li></ul> 
<pre><code class="language-bash">cd /opt/spark-3.1.1-bin-hadoop2.7/conf/</code></pre> 
<ul><li><strong>将spark-env.sh.template复制为spark-env.sh，具体命令如下:</strong></li></ul> 
<pre><code class="language-bash">cp spark-env.sh.template spark-env.sh</code></pre> 
<p><img alt="" height="269" src="https://images2.imgbox.com/50/0c/NcGxdR6M_o.png" width="960"></p> 
<ul><li><strong>输入“vim spark-env.sh”命令，打开文件，在文件顶部添加如下代码:</strong></li></ul> 
<pre><code class="language-bash">#Jdk安装路径
export JAVA_HOME=/opt/jdk1.8.0_291
#Hadoop安装路径
export HADOOP_HOME=/opt/hadoop-3.1.3
#Hadoop配置文件的路径
export HADOOP_CONF_DIR=/opt/hadoop-3.1.3/etc/hadoop
#Spark主节点的IP地址或机器名
export SPARK_MASTER_IP=master
#Spark本地的IP地址或机器名
export SPARK_LOCAL_IP=master  </code></pre> 
<p><img alt="" height="354" src="https://images2.imgbox.com/33/0d/ykSabQe7_o.png" width="800"></p> 
<p><strong>启动测试Spark集群 </strong></p> 
<p><strong>目录切换到sbin目录下启动集群。</strong></p> 
<pre><code class="language-bash">cd /opt/spark-3.1.1-bin-hadoop2.7/sbin/</code></pre> 
<p>./start-all.sh</p> 
<p><img alt="" height="198" src="https://images2.imgbox.com/21/5e/NY2HIbeX_o.png" width="985"></p> 
<p> <strong>jps查看进程。</strong></p> 
<p><img alt="" height="271" src="https://images2.imgbox.com/52/b6/hg3RGSA5_o.png" width="668"></p> 
<p><strong>切换到Spark安装包的/bin目录下(cd /opt/spark-3.1.1-bin-hadoop2.7/bin)，使用SparkPi来计算Pi的值。</strong> </p> 
<p>#切换到Spark安装包的/bin目录下<br> cd /opt/spark-3.1.1-bin-hadoop2.7/bin<br> #运行程序<br> ./run-example SparkPi 2</p> 
<p><img alt="" height="55" src="https://images2.imgbox.com/ba/06/K184s0YK_o.png" width="628"></p> 
<p><img alt="" height="306" src="https://images2.imgbox.com/a1/83/DiNkMl0z_o.png" width="824"></p> 
<p><strong>打开浏览器访问Spark自带web页面 浏览器输入网址：http://192.168.28.100:8080/</strong></p> 
<p><img alt="" height="580" src="https://images2.imgbox.com/dd/d3/sVNR5Kci_o.png" width="1143"></p> 
<h2 id="%E4%B9%9D%E3%80%81%E5%AE%89%E8%A3%85MySQL">九、安装MySQL</h2> 
<p>1.wegt下载mysql8.x源或上传rpm包到master节点<br> wget -P /opt https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</p> 
<p><img alt="" height="394" src="https://images2.imgbox.com/4c/8e/34BPB014_o.png" width="1141"></p> 
<p>1.2 加载本地yum源 <br> yum localinstall -y /opt/mysql80-community-release-el7-3.noarch.rpm</p> 
<p><img alt="" height="489" src="https://images2.imgbox.com/14/fe/Ra2ET5HC_o.png" width="1142"></p> 
<p>1.3 下载mysql服务<br> yum install -y mysql-community-server.x86_64 --nogpgcheck</p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/c5/69/yVrr4W8b_o.png" width="1144"><br> service mysqld start 开启mysql服务</p> 
<p><img alt="" height="136" src="https://images2.imgbox.com/1c/5c/4IE6yPts_o.png" width="787"></p> 
<p>2.mysql 密码设置<br> 2.1 查询mysql初始密码        <span style="color:#fe2c24;">注意：每个人密码不一样</span><br> cat /var/log/mysqld.log |grep password</p> 
<p><img alt="" height="164" src="https://images2.imgbox.com/85/6b/cULZDEn8_o.png" width="1136"></p> 
<p>2.2 使用初始密码登录<br> mysql -u root -p <span style="color:#fe2c24;">初始密码</span></p> 
<p>由于修改密码规则需经过密码重置，因此基于初始密码做简单修改，如在末尾增加一个a<br> alter user 'root'@'localhost' identified by '<span style="color:#fe2c24;">初始密码</span>a';</p> 
<p><img alt="" height="108" src="https://images2.imgbox.com/84/0b/BgzFxCuh_o.png" width="1048"></p> 
<p>2.3 修改8.0密码规则<br> set global validate_password.policy=LOW;<br> set global validate_password.length=6;</p> 
<p><img alt="" height="201" src="https://images2.imgbox.com/ba/ce/rghv11e2_o.png" width="835"></p> 
<p>2.4 设置自定义密码<br> alter user 'root'@'localhost' identified by '123456';</p> 
<p><img alt="" height="97" src="https://images2.imgbox.com/b4/b4/cxgMB4Z0_o.png" width="978"></p> 
<p>3. 赋予外部连接权限<br> create user 'root'@'%' identified by '123456';<br> grant all privileges on *.* to 'root'@'%' with grant option;</p> 
<p><img alt="" height="196" src="https://images2.imgbox.com/ea/5c/9XXOm21u_o.png" width="1082"></p> 
<p>刷新系统权限相关表<br> flush privileges;</p> 
<p><img alt="" height="106" src="https://images2.imgbox.com/c4/d9/W2OQpxF6_o.png" width="687"></p> 
<p>退出登录</p> 
<p><img alt="" height="149" src="https://images2.imgbox.com/dd/25/KDznxHJw_o.png" width="642"></p> 
<p>使用密码123456重新登录MySQL，可以看到登录成功</p> 
<p><img alt="" height="576" src="https://images2.imgbox.com/a9/f3/lXdYjPEI_o.png" width="1138"></p> 
<h2 id="%E5%8D%81%E3%80%81%E5%AE%89%E8%A3%85Hive" style="background-color:transparent;">十、安装Hive</h2> 
<p>1.上传Hive安装包到/opt目录</p> 
<h5 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="632" src="https://images2.imgbox.com/98/38/GjyrasF7_o.png" width="1045"></h5> 
<p>2.解压Hive安装包</p> 
<p><img alt="" height="324" src="https://images2.imgbox.com/be/28/pUNEAP2l_o.png" width="1134"></p> 
<p>3.添加环境变量</p> 
<p><img alt="" height="279" src="https://images2.imgbox.com/25/a0/vFdvTQ8E_o.png" width="749"></p> 
<p>4.生效环境变量</p> 
<pre><code class="language-bash">source /etc/profile</code></pre> 
<p> 5.解决日志Jar包冲突 </p> 
<p>Hive由日志<a href="https://so.csdn.net/so/search?q=slf4j&amp;spm=1001.2101.3001.7020" title="slf4j">slf4j</a>配置，但是我们yarn也有，两者会冲突。将hive安装目录下的lib目录的日志文件名修改。</p> 
<blockquote> 
 <p>cd /opt/apache-hive-3.1.2-bin/lib<br> mv log4j-slf4j-impl-2.10.0.jar log4j-slf4j-impl-2.10.0.jar.bak</p> 
</blockquote> 
<p><img alt="" height="67" src="https://images2.imgbox.com/9c/4e/Ysl40994_o.png" width="1140"></p> 
<p> 6.将MySQL的JDBC驱动拷贝到Hive的lib目录下，驱动文件下载地址：<a class="link-info" href="https://pan.baidu.com/s/1k4zjEyChow3xeiaYKrZUNA?pwd=kks6" rel="nofollow" title="链接">链接</a></p> 
<p><img alt="" height="132" src="https://images2.imgbox.com/53/58/5KlfotAz_o.png" width="1145"></p> 
<p>将hive安装目录lib下的jline-2.12.jar同步到hadoop类库中，勿忘子节点同样需要同步<br> cp /opt/apache-hive-3.1.2-bin/lib/jline-2.12.jar /opt/hadoop-3.1.3/share/hadoop/yarn/lib/</p> 
<p><img alt="" height="119" src="https://images2.imgbox.com/2e/15/zsCCIjl5_o.png" width="1135"></p> 
<p>删除hive安装目录lib下的guava-19.0.0.jar包，并将hadoop类库中的新版guava包同步过来<br> rm -rf /opt/apache-hive-3.1.2-bin/lib/guava-19.0.jar<br> cp /opt/hadoop-3.1.3/share/hadoop/common/lib/guava-27.0-jre.jar /opt/apache-hive-3.1.2-bin/lib/</p> 
<p><img alt="" height="170" src="https://images2.imgbox.com/b6/55/5xYzHQcz_o.png" width="1141"></p> 
<p>7.配置hive-site.xml<br> 进入hive安装目录下的conf目录：cd /opt/apache-hive-3.1.2-bin/conf/</p> 
<p>在hive/conf目录下新建hive-site.xml文件：vim hive-site.xml </p> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
        &lt;value&gt;root&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
        &lt;!--你的Mysql数据库密码--&gt;
        &lt;value&gt;123456&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
        &lt;value&gt;jdbc:mysql://127.0.0.1:3306/hive?createDatabaseIfNotExist=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;useSSL=false&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;datanucleus.readOnlyDatastore&lt;/name&gt;
        &lt;value&gt;false&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;datanucleus.fixedDatastore&lt;/name&gt;
        &lt;value&gt;false&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;datanucleus.autoCreateSchema&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;datanucleus.autoCreateTables&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;datanucleus.autoCreateColumns&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre> 
<p>8. 配置hive-env.sh</p> 
<p>cd /opt/apache-hive-3.1.2-bin/conf/</p> 
<blockquote> 
 <p>cp hive-env.sh.template hive-env.sh</p> 
</blockquote> 
<p>在顶部添加：</p> 
<blockquote> 
 <p>export HADOOP_HOME=/opt/hadoop-3.1.3<br> export HIVE_CONF_DIR=/opt/apache-hive-3.1.2-bin/conf</p> 
</blockquote> 
<p></p> 
<p> 9.初始化Mysql服务器</p> 
<p>在启动Hive之前，需要执行schematool -dbType mysql -initSchema</p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/c5/be/eFIwl852_o.png" width="1136"></p> 
<p></p> 
<p>10.启动hive成功的界面（<strong>一定要先启动Hadoop集群</strong>）：</p> 
<p>使用hive命令启动</p> 
<p></p> 
<p><img alt="" height="601" src="https://images2.imgbox.com/44/fc/kSJRj55E_o.png" width="1142"></p> 
<h2 id="%E6%80%BB%E7%BB%93"><a id="_55"></a>总结</h2> 
<p>到此，我们Hadoop安装和配置就到了尾声，Hadoop第一次安装配置的过程中可能会遇到各种困难，但是各位同学一定要坚持下去!!!  勇敢牛牛，不怕困难！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e130acd74578d5bf4e4c9fe3b1796618/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">让你的 iPhone 更酷炫：iOS 18 深色模式应用图标设置指南</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/61874a568b832bbe7d987f828dbe2677/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Hive学习</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>