<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Html转PDF，前端JS实现Html页面导出PDF（html2canvas&#43;jspdf） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/128ca782081778c878d53ec7c9826dca/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Html转PDF，前端JS实现Html页面导出PDF（html2canvas&#43;jspdf）">
  <meta property="og:description" content="Html转PDF，前端JS实现Html页面导出PDF（html2canvas&#43;jspdf） 文章目录 Html转PDF，前端JS实现Html页面导出PDF（html2canvas&#43;jspdf）一、背景介绍二、疑问三、所使用技术html2canvas&#43;jspdf 四、展示开始1、效果展示2、代码部分3、参数说明3.1、html2canvas常用参数3.2、jsPDF常用参数 五、常见问题 一、背景介绍 ​ 当我们在不想改变后端代码的同时想是纯html页面导出PDF，那么（html2canvas&#43;jspdf）就是无疑最好的选择，导出时它不占用我们服务器的资源，而是由用户本地自行执行js文件下载PDF，不占用我们系统的带宽，所以这无非是最好的选择方式。
二、疑问 1、为什么要使用html2canvas，单jspdf也能实现pdf下载？
​ HTML2Canvas 和 jsPDF 是 JavaScript 库，用于在浏览器中生成 PDF 文件。
​ HTML2Canvas 用于将 HTML 元素渲染成图像，可以将整个页面或特定区域以图像形式进行捕获。这对于将复杂的 HTML 结构转换为 PDF 格式非常有用，因为它可以捕获 HTML 中的样式、布局和图像等细节。 jsPDF 是一个 PDF 生成库，它允许你通过 JavaScript 代码创建和编辑 PDF 文档。与 HTML2Canvas 结合使用，你可以将 HTML 元素渲染成图像，然后将图像插入到 jsPDF 创建的 PDF 文档中。 虽然单独使用 jsPDF 也可以实现 PDF 下载，但是在某些情况下，使用 HTML2Canvas 可能更方便。例如，当你需要将整个页面转换为 PDF 或以图像形式捕获特定区域时，HTML2Canvas 提供了更灵活的选项。然后，你可以将 HTML2Canvas 生成的图像插入到 jsPDF 中，进一步编辑和操作 PDF。 综上所述，使用 HTML2Canvas 结合 jsPDF 可以更容易地将 HTML 转换为 PDF，并提供更多灵活性和控制力。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-10T22:22:48+08:00">
    <meta property="article:modified_time" content="2023-12-10T22:22:48+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Html转PDF，前端JS实现Html页面导出PDF（html2canvas&#43;jspdf）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="HtmlPDFJSHtmlPDFhtml2canvasjspdf_0"></a>Html转PDF，前端JS实现Html页面导出PDF（html2canvas+jspdf）</h3> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#HtmlPDFJSHtmlPDFhtml2canvasjspdf_0" rel="nofollow">Html转PDF，前端JS实现Html页面导出PDF（html2canvas+jspdf）</a></li><li><ul><li><a href="#_5" rel="nofollow">一、背景介绍</a></li><li><a href="#_9" rel="nofollow">二、疑问</a></li><li><a href="#_17" rel="nofollow">三、所使用技术</a></li><li><ul><li><a href="#html2canvasjspdf_19" rel="nofollow">html2canvas+jspdf</a></li></ul> 
    </li><li><a href="#_31" rel="nofollow">四、展示开始</a></li><li><ul><li><a href="#1_33" rel="nofollow">1、效果展示</a></li><li><a href="#2_45" rel="nofollow">2、代码部分</a></li><li><a href="#3_98" rel="nofollow">3、参数说明</a></li><li><ul><li><a href="#31html2canvas_100" rel="nofollow">3.1、html2canvas常用参数</a></li><li><a href="#32jsPDF_130" rel="nofollow">3.2、jsPDF常用参数</a></li></ul> 
    </li></ul> 
    </li><li><a href="#_145" rel="nofollow">五、常见问题</a></li><li><ul><li><a href="#_200" rel="nofollow"></a></li><li><a href="#_218" rel="nofollow"></a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_5"></a>一、背景介绍</h4> 
<p>​ 当我们在不想改变后端代码的同时想是纯html页面导出PDF，那么（html2canvas+jspdf）就是无疑最好的选择，导出时它不占用我们服务器的资源，而是由用户本地自行执行js文件下载PDF，不占用我们系统的带宽，所以这无非是最好的选择方式。</p> 
<h4><a id="_9"></a>二、疑问</h4> 
<p>1、为什么要使用html2canvas，单jspdf也能实现pdf下载？</p> 
<p>​ HTML2Canvas 和 jsPDF 是 JavaScript 库，用于在浏览器中生成 PDF 文件。</p> 
<p>​ HTML2Canvas 用于将 HTML 元素渲染成图像，可以将整个页面或特定区域以图像形式进行捕获。这对于将复杂的 HTML 结构转换为 PDF 格式非常有用，因为它可以捕获 HTML 中的样式、布局和图像等细节。 jsPDF 是一个 PDF 生成库，它允许你通过 JavaScript 代码创建和编辑 PDF 文档。与 HTML2Canvas 结合使用，你可以将 HTML 元素渲染成图像，然后将图像插入到 jsPDF 创建的 PDF 文档中。 虽然单独使用 jsPDF 也可以实现 PDF 下载，但是在某些情况下，使用 HTML2Canvas 可能更方便。例如，当你需要将整个页面转换为 PDF 或以图像形式捕获特定区域时，HTML2Canvas 提供了更灵活的选项。然后，你可以将 HTML2Canvas 生成的图像插入到 jsPDF 中，进一步编辑和操作 PDF。 综上所述，使用 HTML2Canvas 结合 jsPDF 可以更容易地将 HTML 转换为 PDF，并提供更多灵活性和控制力。</p> 
<h4><a id="_17"></a>三、所使用技术</h4> 
<h5><a id="html2canvasjspdf_19"></a>html2canvas+jspdf</h5> 
<p>js引入：引入线上js直接使用</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>pdf下载 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://html2canvas.hertzen.com/dist/html2canvas.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>jquery 方便后续使用jquery原生函数，可不引入<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://code.jquery.com/jquery-3.6.0.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="_31"></a>四、展示开始</h4> 
<h5><a id="1_33"></a>1、效果展示</h5> 
<p>html页面</p> 
<p><img src="https://images2.imgbox.com/90/8d/7Fi27coF_o.png" alt="在这里插入图片描述"></p> 
<p>下载成PDF</p> 
<p><img src="https://images2.imgbox.com/2a/15/jBUSIiuC_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2_45"></a>2、代码部分</h5> 
<p>js引入：</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>pdf下载 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://html2canvas.hertzen.com/dist/html2canvas.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>jquery 方便后续使用jquery原生函数，可不引入<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://code.jquery.com/jquery-3.6.0.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>整体流程：</p> 
<ol><li>先将页面通过html2canvas转换成图片</li><li>(jsPDF)将转换成的图片导出成PDF的形式</li></ol> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>pdf下载 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"assets/js/jspdf/html2canvas.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"assets/js/jspdf/jspdf.umd.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://code.jquery.com/jquery-3.6.0.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#downloadPDF'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始下载PDF'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token function">htmlToPdf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">htmlToPdf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取HTML元素</span>
        <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"layout-wrapper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">dpi</span><span class="token operator">:</span> <span class="token number">192</span><span class="token punctuation">,</span>  <span class="token comment">//dpi属性的值为192，表示图像的分辨率</span>
            <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//scale属性的值为2，表示图像的缩放比例。</span>
            <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">"#F1F6FE"</span>  <span class="token comment">//backgroundColor属性的值为"#F1F6FE"，表示图像的背景颜色。</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 将元素转换为canvas对象</span>
        <span class="token function">html2canvas</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">canvas</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">var</span> contentWidth <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">;</span>   <span class="token comment">//获取Canvas(上面元素id 'layout-wrapper')对象的宽度</span>
            <span class="token keyword">var</span> contentHeight <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">;</span> <span class="token comment">//获取Canvas(上面元素id 'layout-wrapper')对象的高度</span>
            <span class="token comment">// 创建jsPDF对象	</span>
            jsPDF <span class="token operator">=</span> jspdf<span class="token punctuation">.</span>jsPDF<span class="token punctuation">;</span>  <span class="token comment">//导入jsPDF库，用于创建PDF文件</span>
            <span class="token keyword">const</span> pdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">jsPDF</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'pt'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>contentWidth<span class="token punctuation">,</span> contentHeight<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建一个新的PDF对象，参数包括页面格式（'1'表示A4纸张）、单位（'pt'）和页面尺寸（[contentWidth, contentHeight]）</span>
            <span class="token keyword">var</span> pageData <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">'image/jpeg'</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//将Canvas对象转换为JPEG格式的数据，并将其存储在pageData变量中。1.0表示图片质量</span>
            pdf<span class="token punctuation">.</span><span class="token function">addImage</span><span class="token punctuation">(</span>pageData<span class="token punctuation">,</span> <span class="token string">'JPEG'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> contentWidth<span class="token punctuation">,</span> contentHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//将JPEG格式的图片添加到PDF文件中，图片的左上角坐标为(0, 0)，宽度为contentWidth，高度为contentHeight</span>
            pdf<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">"test.pdf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/09/d8/FwMcF9EH_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_98"></a>3、参数说明</h5> 
<h6><a id="31html2canvas_100"></a>3.1、html2canvas常用参数</h6> 
<p><code>html2canvas</code> 函数接受一些常用的参数，用于配置转换后的 canvas 元素的行为和样式。以下是一些常用的参数：</p> 
<ul><li><code>element</code>: 必需参数，表示需要转换为 canvas 的 HTML 元素。</li><li><code>width</code> 和 <code>height</code>: 可选参数，分别表示转换后的 canvas 元素的宽度和高度。如果不设置这些参数，则 canvas 元素会自动调整大小以适应所包含的 HTML 元素。</li><li><code>scale</code>: 可选参数，表示 canvas 元素的比例。默认值为 1，表示 canvas 元素会保持原始大小。</li><li><code>border</code>: 可选参数，表示 canvas 元素的边框宽度。默认值为 0，表示没有边框。</li><li><code>backgroundColor</code>: 可选参数，表示 canvas 元素的背景颜色。默认值为 “#ffffff”，表示白色。</li><li><code>foregroundColor</code>: 可选参数，表示 canvas 元素的前景色颜色。默认值为 “#000000”，表示黑色。</li><li><code>imageQuality</code>: 可选参数，表示转换后的图像的质量。默认值为 1，表示高质量。</li><li><code>jsPDF</code>: 可选参数，表示需要使用的 jsPDF 对象。如果不设置这个参数，则不会将 canvas 转换为 PDF 文件。</li></ul> 
<p>以下是一个使用 <code>html2canvas</code> 函数的示例，其中包含了上述参数：</p> 
<pre><code class="prism language-javascript"><span class="token function">html2canvas</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"my-element"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
 <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
 <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
 <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
 <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
 <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">"#cccccc"</span><span class="token punctuation">,</span>
 <span class="token literal-property property">foregroundColor</span><span class="token operator">:</span> <span class="token string">"#000000"</span><span class="token punctuation">,</span>
 <span class="token literal-property property">imageQuality</span><span class="token operator">:</span> <span class="token number">0.9</span><span class="token punctuation">,</span>
 <span class="token literal-property property">jsPDF</span><span class="token operator">:</span> pdf
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">canvas</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 <span class="token comment">// 处理转换后的 canvas 元素</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="32jsPDF_130"></a>3.2、jsPDF常用参数</h6> 
<p>jsPDF 是一个用于创建 PDF 文件的 JavaScript 库。以下是 jsPDF 常用的参数：</p> 
<ol><li><code>jsPDF('1', 'pt', [width, height])</code>: 创建一个新的 PDF 对象，其中 <code>'1'</code> 表示 A4 纸张（l:竖向，p:横向），<code>'pt'</code> 表示单位为 point，<code>width</code> 和 <code>height</code> 分别表示页面宽度和高度。</li><li><code>pdf.setFont(font, size)</code>: 设置 PDF 文件的字体和大小。其中 <code>font</code> 表示字体名称，如 <code>'Helvetica'</code> 或 <code>'Times'</code>，<code>size</code> 表示字体大小。</li><li><code>pdf.setLineWidth(width)</code>: 设置 PDF 文件的线宽。其中 <code>width</code> 表示线宽的像素值。</li><li><code>pdf.drawLine(x1, y1, x2, y2)</code>: 在 PDF 文件中绘制一条直线。其中 <code>x1</code>、<code>y1</code> 和 <code>x2</code>、<code>y2</code> 分别表示直线的起点和终点坐标。</li><li><code>pdf.drawRect(x, y, width, height)</code>: 在 PDF 文件中绘制一个矩形。其中 <code>x</code>、<code>y</code> 分别表示矩形左上角的坐标，<code>width</code> 和 <code>height</code> 分别表示矩形的宽度和高度。</li><li><code>pdf.drawText(text, x, y)</code>: 在 PDF 文件中绘制一段文本。其中 <code>text</code> 表示要绘制的文本，<code>x</code> 和 <code>y</code> 分别表示文本的左上角坐标。</li><li><code>pdf.save('filename.pdf')</code>: 将 PDF 文件保存为指定的文件名。其中 <code>'filename.pdf'</code> 表示要保存的 PDF 文件的文件名。</li><li><code>pdf.addImage(imageData, type, x, y, width, height)</code>: 在 PDF 文件中添加一个图像。其中 <code>imageData</code> 表示图像的数据，<code>type</code> 表示图像的类型，如 <code>'JPEG'</code> 或 <code>'PNG'</code>，<code>x</code>、<code>y</code> 分别表示图像左上角的坐标，<code>width</code> 和 <code>height</code> 分别表示图像的宽度和高度。</li><li><code>pdf.rotate(angle, x, y)</code>: 旋转 PDF 文件中的图像或文本。其中 <code>angle</code> 表示旋转的角度，<code>x</code> 和 <code>y</code> 分别表示旋转中心的位置。</li><li><code>pdf.translate(x, y)</code>: 将 PDF 文件中的文本或图像移动到指定位置。其中 <code>x</code> 和 <code>y</code> 分别表示要移动的坐标。</li></ol> 
<h4><a id="_145"></a>五、常见问题</h4> 
<p>1、图片跨域</p> 
<p>解决方案：</p> 
<ul><li> <p>设置配置项 <code>allowTaint: false</code></p> 
  <blockquote> 
   <p>canvas 的 CanvasRenderingContext2D 属于浏览器的对象，如果渲染过跨域资源，浏览器就认定 canvas 已经被污染了 <code>Taint</code>：污点</p> 
  </blockquote> </li><li> <p>设置配置项 <code>useCORS: false</code></p> 
  <blockquote> 
   <p>表示允许跨域资源共享，注意不能与 allowTaint 同时配置为 true</p> 
  </blockquote> </li><li> <p>img 标签中添加 <code>crossOrigin = "anonymous"</code></p> 
  <blockquote> 
   <p>anonymous：如果使用这个值的话就会在请求 header 中带上 Origin 属性，但请求不会带上 cookie 和客户端 ssl 证书等其他的一些认证信息</p> 
  </blockquote> </li><li> <p>图片服务器配置 <code>Access-Control-Allow-Origin: *</code></p> 
  <blockquote> 
   <p>重要的配置项，是跨域问题的根本源泉，需要后端配合</p> 
  </blockquote> </li></ul> 
<p>2、截图锯齿</p> 
<p>解决方案：根据设备像素比进行缩放</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 设置放大倍数</span>
<span class="token keyword">const</span> scale <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
</code></pre> 
<p>4、对 css3 支持不好</p> 
<p>html2canvas 暂不支持的 CSS 样式属性:</p> 
<p>background-blend-mode、background-clip: text、box-decoration-break、repeating-linear-gradient()、font-variant-ligatures、mix-blend-mode、writing-mode、writing-mode、border-image、box-shadow、filter、zoom、transform</p> 
<p>解决方案：</p> 
<p>对于一些必要的样式，可以选择使用图片做兜底实现</p> 
<blockquote> 
 <p>box-shadow 可以参考 <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fniklasvh%2Fhtml2canvas%2Fpull%2F1848" rel="nofollow">这个pr</a>，修改源码解决，但是，实际效果也不是太理想……</p> 
</blockquote> 
<p>5、svg 标签</p> 
<p>问题原因：vue-lottie 动画库渲染的标签是 svg(也可能是你自己写的 svg 标签)</p> 
<p>html2canvas 对于 svg 标签的支持也不尽人意，解决办法同样是用图片做兜底</p> 
<p>在项目中，我们是用 svg 做动画，截图的时候把动画换成一张静态图，这样只要设置要静态图的样式，截图效果还是可以接受的</p> 
<h5><a id="_200"></a></h5> 
<p>想……</p> 
<p>5、svg 标签</p> 
<p>问题原因：vue-lottie 动画库渲染的标签是 svg(也可能是你自己写的 svg 标签)</p> 
<p>html2canvas 对于 svg 标签的支持也不尽人意，解决办法同样是用图片做兜底</p> 
<p>在项目中，我们是用 svg 做动画，截图的时候把动画换成一张静态图，这样只要设置要静态图的样式，截图效果还是可以接受的</p> 
<h5><a id="_218"></a></h5>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8c4ff56e2440cd5473bf48aef6304ce5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android Studio连接MYSQL数据库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/466a0889b77c34c74bf45df2cf139034/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">保姆级——成功解决Android studio中下载gradle慢的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>