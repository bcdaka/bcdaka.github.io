<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp本地打包app安装说明 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c335cda78a246e77cb03dee6462ce107/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="uniapp本地打包app安装说明">
  <meta property="og:description" content="uniapp本地打包app安装说明 目录 uniapp本地打包app安装说明一、打包说明1.HBuilder X 生成本地打包资源2.Android Studio和App离线SDK环境准备2.1 下载Android Studio和 App离线SDK2.2 资源替换2.3 id属性值修改。2.4 添加provider信息到`AndroidManifest.xml`中的`&lt;application&gt;`节点2.5 包名设置。2.6 版本信息设置。2.7 证书签名信息设置。 3.Appkey申请4.Apk打包5.其他问题1、uniapp离线打包Android 10上无法启动相机 一、打包说明 本文档主要说明uniapp打包成apk的步骤，仅供参考。
项目打包需要使用到HBuilder X、Android Studio和Android SDK。
1.HBuilder X 生成本地打包资源 发行 – 原生App本地打包 – 生成本地打包App资源
（注：本地打包的项目代码文件名不能含有中文，如图片资源名字等，问就是本人亲身试过，另外iconfont打包的资源有直接引用的也需要注意icon的名称）
2.Android Studio和App离线SDK环境准备 2.1 下载Android Studio和 App离线SDK 官网路径：https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android.html
（注意：下载的Android 离线SDK与本地开发工具版本对应）
下载后解压得到以下内容：
2.2 资源替换 使用Android Studio打开目录”HBuilder-Integrate-AS”（使用“HBuilder-HelloUniApp”也可以），并将HBuilder X生成的本地打包资源替换到“src/main/assets/apps”目录下
2.3 id属性值修改。 将dcloud_control.xml的appid值改为与manifest.json里面的id值相同，如图所示。
！！！！一共三个地方
2.4 添加provider信息到AndroidManifest.xml中的&lt;application&gt;节点 2.5 包名设置。 修改AndroidManifest.xml和build.gradle的值，如图3处位置的值要相同，这个包名要与后续在“开发者中心”设置“应用信息”时的“包名/appid/域名”一致。
2.6 版本信息设置。 build.gradle中的versionName和versionCode的值需要与manifest.json中的version信息对应上。
2.7 证书签名信息设置。 自3.1.10版本起需要申请Appkey配置项目，申请Appkey需要使用SHA1和SHA256。
可以使用Android Studio生成。
（注意：因为示例中有自己的默认配置“src/test.jks”，可以直接使用，或者自己新生成。）
填好信息，点击“ok”回到上一页，关闭，可以看到“src”目录下已经有新生成的“key.jks”文件。
然后到key.jks所在目录下打开cmd，执行命令keytool -list -v -keystore key.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-09T09:46:19+08:00">
    <meta property="article:modified_time" content="2024-08-09T09:46:19+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp本地打包app安装说明</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="uniappapp_0"></a>uniapp本地打包app安装说明</h2> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#uniappapp_0" rel="nofollow">uniapp本地打包app安装说明</a></li><li><ul><li><a href="#_2" rel="nofollow">一、打包说明</a></li><li><a href="#1HBuilder_X__6" rel="nofollow">1.HBuilder X 生成本地打包资源</a></li><li><a href="#2Android_StudioAppSDK_10" rel="nofollow">2.Android Studio和App离线SDK环境准备</a></li><li><ul><li><a href="#21_Android_Studio_AppSDK_11" rel="nofollow">2.1 下载Android Studio和 App离线SDK</a></li><li><a href="#22___18" rel="nofollow">2.2 资源替换</a></li><li><a href="#23_id_21" rel="nofollow">2.3 id属性值修改。</a></li><li><a href="#24_providerAndroidManifestxmlapplication_26" rel="nofollow">2.4 添加provider信息到`AndroidManifest.xml`中的`&lt;application&gt;`节点</a></li><li><a href="#25__30" rel="nofollow">2.5 包名设置。</a></li><li><a href="#26__34" rel="nofollow">2.6 版本信息设置。</a></li><li><a href="#27__37" rel="nofollow">2.7 证书签名信息设置。</a></li></ul> 
   </li><li><a href="#3Appkey_49" rel="nofollow">3.Appkey申请</a></li><li><a href="#4Apk_58" rel="nofollow">4.Apk打包</a></li><li><a href="#5_64" rel="nofollow">5.其他问题</a></li><li><ul><li><a href="#1uniappAndroid_10_65" rel="nofollow">1、uniapp离线打包Android 10上无法启动相机</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_2"></a>一、打包说明</h3> 
<p>本文档主要说明uniapp打包成apk的步骤，仅供参考。<br> 项目打包需要使用到HBuilder X、Android Studio和Android SDK。</p> 
<h3><a id="1HBuilder_X__6"></a>1.HBuilder X 生成本地打包资源</h3> 
<p>发行 – 原生App本地打包 – 生成本地打包App资源<br> <code>（注：本地打包的项目代码文件名不能含有中文，如图片资源名字等，问就是本人亲身试过，另外iconfont打包的资源有直接引用的也需要注意icon的名称）</code><br> <img src="https://images2.imgbox.com/54/fa/A1oySI3N_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2Android_StudioAppSDK_10"></a>2.Android Studio和App离线SDK环境准备</h3> 
<h4><a id="21_Android_Studio_AppSDK_11"></a>2.1 下载Android Studio和 App离线SDK</h4> 
<p>官网路径：https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android.html<br> （注意：下载的Android 离线SDK与本地开发工具版本对应）<br> <img src="https://images2.imgbox.com/b7/8d/P6aNr6J8_o.png" alt="在这里插入图片描述"><br> 下载后解压得到以下内容：<br> <img src="https://images2.imgbox.com/7d/33/zrsVlPA6_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22___18"></a>2.2 资源替换</h4> 
<p>使用Android Studio打开目录”HBuilder-Integrate-AS”（使用“HBuilder-HelloUniApp”也可以），并将HBuilder X生成的本地打包资源替换到“src/main/assets/apps”目录下<br> <img src="https://images2.imgbox.com/ca/b0/Z5RNd5pj_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="23_id_21"></a>2.3 id属性值修改。</h4> 
<p>将<code>dcloud_control.xml</code>的<code>appid</code>值改为与<code>manifest.json</code>里面的<code>id</code>值相同，如图所示。<br> <strong>！！！！一共三个地方</strong><br> <img src="https://images2.imgbox.com/cd/9c/8Revcpgv_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="24_providerAndroidManifestxmlapplication_26"></a>2.4 添加provider信息到<code>AndroidManifest.xml</code>中的<code>&lt;application&gt;</code>节点</h4> 
<p><img src="https://images2.imgbox.com/c4/31/RW3n4mEj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d8/bb/bcEpTpAq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="25__30"></a>2.5 包名设置。</h4> 
<p>修改<code>AndroidManifest.xml</code>和<code>build.gradle</code>的值，如图3处位置的值要相同，这个包名要与后续在“开发者中心”设置“应用信息”时的“包名/appid/域名”一致。</p> 
<p><img src="https://images2.imgbox.com/cc/aa/KPYZdJvT_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="26__34"></a>2.6 版本信息设置。</h4> 
<p><code>build.gradle</code>中的<code>versionName</code>和<code>versionCode</code>的值需要与<code>manifest.json</code>中的<code>version</code>信息对应上。<br> <img src="https://images2.imgbox.com/f7/4a/6Kqgz4ad_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="27__37"></a>2.7 证书签名信息设置。</h4> 
<p>自3.1.10版本起需要申请Appkey配置项目，申请Appkey需要使用SHA1和SHA256。<br> 可以使用Android Studio生成。<br> （注意：因为示例中有自己的默认配置“src/test.jks”，可以直接使用，或者自己新生成。）<br> <img src="https://images2.imgbox.com/74/a3/X5PKQnG7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c8/ec/vYrkIlm2_o.png" alt="在这里插入图片描述"><br> 填好信息，点击“ok”回到上一页，关闭，可以看到“src”目录下已经有新生成的“key.jks”文件。<br> <img src="https://images2.imgbox.com/01/ee/ZnTDe6Ra_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/61/12/b0EVr2Dk_o.png" alt="在这里插入图片描述"><br> 然后到<code>key.jks</code>所在目录下打开cmd，执行命令<code>keytool -list -v -keystore key.jks</code>，输入刚才设置的密码，可以看到返回的证书信息，保存好证书信息。<br> <img src="https://images2.imgbox.com/08/42/tyQZBxhK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3Appkey_49"></a>3.Appkey申请</h3> 
<p>登录开发者中心（https://dev.dcloud.net.cn/pages/app/list），可以看到自己名下的uniapp项目<br> <img src="https://images2.imgbox.com/5a/7b/POTGdi6w_o.png" alt="登录开发者中心（https://dev.dcloud.net.cn/pages/app/list），可以看到自己名下的uniapp"></p> 
<p><img src="https://images2.imgbox.com/bb/b4/2wp1XYwf_o.png" alt="在这里插入图片描述"><br> 填写好信息后点击“提交”即可，然后返回“各平台信息”页面，选择对应版本信息查看<code>appkey</code><br> <img src="https://images2.imgbox.com/09/07/vpkin5aD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4Apk_58"></a>4.Apk打包</h3> 
<p>将<code>appKey</code>复制到<code>AndroidManifest.xml</code>文件对位位置，保存后就可以点击“build”进行打包了。<br> 打包可以打成debug包或者正式包，按自己需求进行。<br> <img src="https://images2.imgbox.com/ce/a9/2glkXLCM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fd/d3/k3LelByZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_64"></a>5.其他问题</h3> 
<h4><a id="1uniappAndroid_10_65"></a>1、uniapp离线打包Android 10上无法启动相机</h4> 
<p>uniapp项目中已经设置了摄像头权限访问，在开发测试时也可以正常使用，但是本地离线打包后就无法启动相机</p> 
<p>解决方法：<br> 在<code>AndroidManifest.xml</code>中插入权限摄像机权限<br> <img src="https://images2.imgbox.com/03/9a/Yrv1BGB5_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b640553f9f4e49e774af4b7921ac8909/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LangChain 推出 LangGraph Studio：首款用于可视化、交互和调试复杂代理应用的代理 IDE</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d7190b57e023108336754d26dd9fd8c8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Hot100】LeetCode—124. 二叉树中的最大路径和</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>