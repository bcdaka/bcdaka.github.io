<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>头歌（第五章 机器学习基本模型与算法在线实验闯关） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cf2f686cce45a7f8aa8e6779c0fa69bf/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="头歌（第五章 机器学习基本模型与算法在线实验闯关）">
  <meta property="og:description" content="头歌（第五章 机器学习基本模型与算法在线实验闯关） 第1关:缺失值填充 任务描述
本关任务：读取“银行贷款审批数据.xlsx”表，自变量为x1-x15，决策变量为y（1-同意贷款，0-不同意贷款），其中x1-x6为数值变量，x7-x15为名义变量，请对x1-x6中存在的缺失值用均值策略填充，x7-x15用最频繁值策略填充。
#********** Begin **********# # 读取“银行贷款审批数据.xlsx”表，自变量为x1~x15，决策变量为y（1-同意贷款，0-不同意贷款） # 其中x1~x6为数值变量，x7~x15为名义变量 # 请对x1~x6中存在的缺失值用均值策略填充，x7~x15用最频繁值策略填充 # 最后返回填充处理后的X（即x1~x15），以及决策变量Y(即y) import pandas as pd def return_values(): df = pd.read_excel(&#34;银行贷款审批数据.xlsx&#34;) df.fillna(df.mean(), inplace=True) for col in df.columns[6:]: df[col].fillna(df[col].mode()[0], inplace=True) X = df.drop(columns=[&#39;y&#39;]) Y = df[&#39;y&#39;] return X, Y #********** End **********# 第2关:数据标准化 任务描述
本关任务：在第一关的基础上，对x1 ~ x6数值型变量作均值-方差标准化处理，需要注意的是x7~x15名义变量不需要作标准化处理。
#********** Begin **********# #在上一关的基础上，对自变量X中的数值变量（x1~x6）作均值-方差标准化处理 # 需要注意的是x7~x15名义变量不需要作标准化处理 # 返回结果X1，数据结构为数组形式 # X1中含有标准化后的x1~x6和未标准化的x7~x15 import pandas as pd from sklearn.preprocessing import StandardScaler import numpy as np def return_values(): df = pd.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-18T20:03:48+08:00">
    <meta property="article:modified_time" content="2024-04-18T20:03:48+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">头歌（第五章 机器学习基本模型与算法在线实验闯关）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="__0"></a>头歌（第五章 机器学习基本模型与算法在线实验闯关）</h2> 
<h3><a id="1_1"></a>第1关:缺失值填充</h3> 
<p>任务描述<br> 本关任务：读取“银行贷款审批数据.xlsx”表，自变量为x1-x15，决策变量为y（1-同意贷款，0-不同意贷款），其中x1-x6为数值变量，x7-x15为名义变量，请对x1-x6中存在的缺失值用均值策略填充，x7-x15用最频繁值策略填充。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment"># 读取“银行贷款审批数据.xlsx”表，自变量为x1~x15，决策变量为y（1-同意贷款，0-不同意贷款）</span>
<span class="token comment"># 其中x1~x6为数值变量，x7~x15为名义变量</span>
<span class="token comment"># 请对x1~x6中存在的缺失值用均值策略填充，x7~x15用最频繁值策略填充</span>
<span class="token comment"># 最后返回填充处理后的X（即x1~x15），以及决策变量Y(即y)</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">"银行贷款审批数据.xlsx"</span><span class="token punctuation">)</span>
    df<span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> col <span class="token keyword">in</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 
        df<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>mode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    X <span class="token operator">=</span> df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
    Y <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> 
    
    <span class="token keyword">return</span> X<span class="token punctuation">,</span> Y
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="2_23"></a>第2关:数据标准化</h3> 
<p>任务描述<br> 本关任务：在第一关的基础上，对x1 ~ x6数值型变量作均值-方差标准化处理，需要注意的是x7~x15名义变量不需要作标准化处理。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">#在上一关的基础上，对自变量X中的数值变量（x1~x6）作均值-方差标准化处理</span>
<span class="token comment"># 需要注意的是x7~x15名义变量不需要作标准化处理</span>
<span class="token comment"># 返回结果X1，数据结构为数组形式</span>
<span class="token comment"># X1中含有标准化后的x1~x6和未标准化的x7~x15</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">"银行贷款审批数据.xlsx"</span><span class="token punctuation">)</span>
    df<span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> col <span class="token keyword">in</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        df<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>mode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    numerical_cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'x1'</span><span class="token punctuation">,</span> <span class="token string">'x2'</span><span class="token punctuation">,</span> <span class="token string">'x3'</span><span class="token punctuation">,</span> <span class="token string">'x4'</span><span class="token punctuation">,</span> <span class="token string">'x5'</span><span class="token punctuation">,</span> <span class="token string">'x6'</span><span class="token punctuation">]</span>
    categorical_cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'x7'</span><span class="token punctuation">,</span> <span class="token string">'x8'</span><span class="token punctuation">,</span> <span class="token string">'x9'</span><span class="token punctuation">,</span> <span class="token string">'x10'</span><span class="token punctuation">,</span> <span class="token string">'x11'</span><span class="token punctuation">,</span> <span class="token string">'x12'</span><span class="token punctuation">,</span> <span class="token string">'x13'</span><span class="token punctuation">,</span> <span class="token string">'x14'</span><span class="token punctuation">,</span> <span class="token string">'x15'</span><span class="token punctuation">]</span>
    scaler <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>
    df<span class="token punctuation">[</span>numerical_cols<span class="token punctuation">]</span> <span class="token operator">=</span> scaler<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>df<span class="token punctuation">[</span>numerical_cols<span class="token punctuation">]</span><span class="token punctuation">)</span>
    X1 <span class="token operator">=</span> df<span class="token punctuation">[</span>numerical_cols <span class="token operator">+</span> categorical_cols<span class="token punctuation">]</span><span class="token punctuation">.</span>values
    <span class="token keyword">return</span> X1
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="3_48"></a>第3关:支持向量机分类模型及其应用</h3> 
<p>任务描述<br> 本关任务：基于关卡2基础上，取数据集前600条记录作为训练数据，后90条记录作为测试数据，构建支持向量机模型，输出其模型准确率和预测准确率。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">#在上一关基础，对经过缺失值填充、数值变量标准化后的数据集，取前600条记录作为训练数据，后90条记录作为测试数据</span>
<span class="token comment">#构建支持向量机模型，返回计算结果模型准确率rv和预测准确率r</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    X1<span class="token operator">=</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'X1.npy'</span><span class="token punctuation">)</span> <span class="token comment">#经过缺失值填充、数值变量标准化后的数据集，numpy数组690*15</span>
    Y<span class="token operator">=</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'Y.npy'</span><span class="token punctuation">)</span>   <span class="token comment">#因变量，numpy数组，690个元素</span>
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>svm <span class="token keyword">import</span> SVC
    x1 <span class="token operator">=</span> X1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    y1 <span class="token operator">=</span> Y<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">600</span><span class="token punctuation">]</span>
    x2 <span class="token operator">=</span> X1<span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    y2 <span class="token operator">=</span> Y<span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    clf <span class="token operator">=</span> SVC<span class="token punctuation">(</span>kernel<span class="token operator">=</span><span class="token string">'rbf'</span><span class="token punctuation">)</span>
    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span>
    rv <span class="token operator">=</span> clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span>
    r <span class="token operator">=</span> clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>rv<span class="token punctuation">,</span>r<span class="token punctuation">)</span>
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="4_72"></a>第4关:逻辑回归模型及其应用</h3> 
<p>任务描述<br> 本关任务：以澳大利亚信贷批准数据集为本关数据集，划分前600为训练数据集，后90数据为测试数据集，利用逻辑回归模型预测及输出准确率。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">#在上一关基础，对经过缺失值填充、数值变量标准化后的数据集，取前600条记录作为训练数据，后90条记录作为测试数据</span>
<span class="token comment">#构逻辑回归模型，返回计算结果模型准确率rv和预测准确率r</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    X1<span class="token operator">=</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'X1.npy'</span><span class="token punctuation">)</span> <span class="token comment">#经过缺失值填充、数值变量标准化后的数据集，numpy数组690*15</span>
    Y<span class="token operator">=</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'Y.npy'</span><span class="token punctuation">)</span>   <span class="token comment">#因变量，numpy数组，690个元素</span>
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>svm <span class="token keyword">import</span> SVC
    x1 <span class="token operator">=</span> X1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    y1 <span class="token operator">=</span> Y<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">600</span><span class="token punctuation">]</span>
    x2 <span class="token operator">=</span> X1<span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    y2 <span class="token operator">=</span> Y<span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    clf <span class="token operator">=</span> SVC<span class="token punctuation">(</span>kernel<span class="token operator">=</span><span class="token string">'rbf'</span><span class="token punctuation">)</span>
    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span>
    rv <span class="token operator">=</span> clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span>
    r <span class="token operator">=</span> clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span>
    <span class="token keyword">return</span> rv<span class="token punctuation">,</span> r
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="5_96"></a>第5关:神经网络分类模型及其应用</h3> 
<p>任务描述<br> 本关任务：编写利用神经网络解决分类问题和预测问题的程序</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">#在上一关基础，对经过缺失值填充、数值变量标准化后的数据集，取前600条记录作为训练数据，后90条记录作为测试数据</span>
<span class="token comment">#构建神经网络分类模型，返回计算结果模型准确率rv和预测准确率r</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    X1<span class="token operator">=</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'X1.npy'</span><span class="token punctuation">)</span> <span class="token comment">#经过缺失值填充、数值变量标准化后的数据集，numpy数组690*15</span>
    Y<span class="token operator">=</span>np<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'Y.npy'</span><span class="token punctuation">)</span>   <span class="token comment">#因变量，numpy数组，690个元素</span>
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>neural_network <span class="token keyword">import</span> MLPClassifier
    x <span class="token operator">=</span> X1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    y <span class="token operator">=</span> Y<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">600</span><span class="token punctuation">]</span>
    x1 <span class="token operator">=</span> X1<span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    y1 <span class="token operator">=</span> Y<span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

    clf <span class="token operator">=</span> MLPClassifier<span class="token punctuation">(</span>solver<span class="token operator">=</span><span class="token string">'lbfgs'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1e-5</span><span class="token punctuation">,</span> hidden_layer_sizes<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> max_iter<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>
    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    rv <span class="token operator">=</span> clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    R <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x1<span class="token punctuation">)</span>
    Z <span class="token operator">=</span> R <span class="token operator">-</span> y1
    r <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>Z<span class="token punctuation">[</span>Z <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>Z<span class="token punctuation">)</span>
    <span class="token keyword">return</span> rv<span class="token punctuation">,</span> r
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="6_123"></a>第6关:线性回归模型及其应用</h3> 
<p>任务描述<br> 在发电场中电力输出（PE）与AT（温度）、V（压力）、AP（湿度）、RH（压强）有关，相关测试数据见“发电场数据.xlsx”文件，请完成以下任务：1）利用线性回归分析命令，求出PE与AT、V、AP、RH之间的线性回归关系式系数向量（包括常数项）和拟合优度（判定系数），并在命令窗口输出；2）今有某次测试数据AT=28.4、V=50.6、AP=1011.9、RH=80.54，试利用构建的线性回归模型预测其PE值。</p> 
<pre><code class="prism language-python"><span class="token comment">#**********Begin**********#</span>
<span class="token comment">#在发电场中电力输出（PE）与AT（温度）、V（压力）、AP（湿度）、RH（压强）有关，</span>
<span class="token comment"># 相关测试数据见“发电场数据.xlsx”文件，请完成以下任务：</span>
<span class="token comment"># 1)求出PE与AT、V、AP、RH之间的线性回归关系式系数向量,用列表b表示，其元素依次为常数项、AT回归系数、V回归系数、AP回归系数、RH回归系数。</span>
<span class="token comment"># 2)求出回归方程的拟合优度（判定系数），用变量r表示</span>
<span class="token comment"># 3)今有某次测试数据AT=28.4、V=50.6、AP=1011.9、RH=80.54，试利用构建的线性回归模型预测其PE值</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np  
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LinearRegression <span class="token keyword">as</span> LR  
    data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'发电场数据.xlsx'</span><span class="token punctuation">)</span>
    x<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    y<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    
    lr <span class="token operator">=</span> LR<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">#创建线性回归模型类  </span>
    lr<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">#拟合  </span>
    <span class="token comment">#判定系数</span>
    r<span class="token operator">=</span>lr<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> 
    <span class="token comment">#系数</span>
    c_x<span class="token operator">=</span>lr<span class="token punctuation">.</span>coef_    
    <span class="token comment">#常系数     </span>
    c_b<span class="token operator">=</span>lr<span class="token punctuation">.</span>intercept_  
    b<span class="token operator">=</span><span class="token punctuation">[</span>c_b<span class="token punctuation">,</span>c_x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c_x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c_x<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>c_x<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token comment">#对数据进行预测</span>
    x1<span class="token operator">=</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">28.4</span><span class="token punctuation">,</span><span class="token number">50.6</span><span class="token punctuation">,</span><span class="token number">1011.9</span><span class="token punctuation">,</span><span class="token number">80.54</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>  
    PE<span class="token operator">=</span>lr<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x1<span class="token punctuation">)</span>  
 
    <span class="token keyword">return</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>r<span class="token punctuation">,</span>PE<span class="token punctuation">)</span>
<span class="token comment">#**********End**********#</span>
</code></pre> 
<h3><a id="7_158"></a>第7关:神经网络回归模型及其应用</h3> 
<p>任务描述<br> 基于5.6的数据集，构建神经网络回归模型，输出其模型准确率，并针对测试数据AT=28.4、V=50.6、AP=1011.9、RH=80.54，预测其PE值。</p> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment">#基于上一关的数据集，构建神经网络回归模型，返回计算结果模型准确率r，</span>
<span class="token comment">#并针对测试数据AT=28.4、V=50.6、AP=1011.9、RH=80.54，预测其PE值。</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>neural_network <span class="token keyword">import</span> MLPRegressor 
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'发电场数据.xlsx'</span><span class="token punctuation">)</span>
    x<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    y<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    clf <span class="token operator">=</span> MLPRegressor<span class="token punctuation">(</span>solver<span class="token operator">=</span><span class="token string">'lbfgs'</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1e-5</span><span class="token punctuation">,</span>hidden_layer_sizes<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> 
    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    r<span class="token operator">=</span>clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>
    x1<span class="token operator">=</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">28.4</span><span class="token punctuation">,</span><span class="token number">50.6</span><span class="token punctuation">,</span><span class="token number">1011.9</span><span class="token punctuation">,</span><span class="token number">80.54</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    PE<span class="token operator">=</span>clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x1<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>PE<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="8_179"></a>第8关:支持向量机回归模型及其应用</h3> 
<p>任务描述<br> 本关任务：基于关卡6的数据集，构建支持向量机回归模型，输出其拟合优度，并针对测试数据AT=28.4、V=50.6、AP=1011.9、RH=80.54，预测其PE值。（备注：需对采用的核函数进行说明，比如高斯核、线性核、多项式核或者sigmoid核等）</p> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment">#基于上一关的数据集，构建支持向量机回归模型（采用线性核函数），返回计算结果模型的拟合优度r，</span>
<span class="token comment">#并针对测试数据AT=28.4、V=50.6、AP=1011.9、RH=80.54，预测其PE值。</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    <span class="token keyword">from</span> sklearn <span class="token keyword">import</span> svm
    data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'发电场数据.xlsx'</span><span class="token punctuation">)</span>
    x<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    y<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    kernel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'linear'</span><span class="token punctuation">,</span><span class="token string">'poly'</span><span class="token punctuation">,</span><span class="token string">'rbf'</span><span class="token punctuation">,</span><span class="token string">'sigmoid'</span><span class="token punctuation">]</span>
    list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#保存针对训练数据获得的模型准确度</span>
    list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#保存预测值</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> kernel<span class="token punctuation">:</span>
        clf <span class="token operator">=</span> svm<span class="token punctuation">.</span>SVR<span class="token punctuation">(</span>kernel<span class="token operator">=</span>i<span class="token punctuation">)</span>
        clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
        x1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">28.4</span><span class="token punctuation">,</span><span class="token number">50.6</span><span class="token punctuation">,</span><span class="token number">1011.9</span><span class="token punctuation">,</span><span class="token number">80.54</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
        list1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>clf<span class="token punctuation">.</span>score<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
        list2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'核函数'</span><span class="token punctuation">:</span>kernel<span class="token punctuation">,</span><span class="token string">'模型准确度'</span><span class="token punctuation">:</span>list1<span class="token punctuation">,</span><span class="token string">'预测值'</span><span class="token punctuation">:</span>list2<span class="token punctuation">}</span>
    result <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    r<span class="token operator">=</span>result<span class="token punctuation">[</span><span class="token string">'模型准确度'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    PE<span class="token operator">=</span>result<span class="token punctuation">[</span><span class="token string">'预测值'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>PE<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="9_208"></a>第9关:基于主成分分析的综合评价</h3> 
<p>任务描述<br> 本关任务：读取“农村居民人均可支配收入来源2016.xlsx”数据表，其中数据来源于2016年《中国统计年鉴》，对表中给出的我国内陆31个地区做主成分分析，并基于主成分进行综合排名,输出排名结果。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">#读取“农村居民人均可支配收入来源2016.xlsx”数据表，其中数据来源于2016年《中国统计年鉴》，</span>
<span class="token comment">#首先，对指标数据进行均值方差标准化处理</span>
<span class="token comment">#其次，其次对标准化处理后的指标数据作主成分分析，要求提前累计贡献率在95%以上</span>
<span class="token comment">#再次，基于提取的主成分计算综合得分，综合得分=提取的各主成分与对应贡献率之和</span>
<span class="token comment">#最后，基于综合得分获得各地区的排名，得分按从高到低排序，用一个序列Rs来表示，其中index为地区名称，值为综合得分</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>decomposition <span class="token keyword">import</span> PCA   
    Data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'农村居民人均可支配收入来源2016.xlsx'</span><span class="token punctuation">)</span>
    X<span class="token operator">=</span>Data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    R<span class="token operator">=</span>X<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span>
    scaler <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>
    scaler<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span> 
    X<span class="token operator">=</span>scaler<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
 
    pca<span class="token operator">=</span>PCA<span class="token punctuation">(</span>n_components<span class="token operator">=</span><span class="token number">0.95</span><span class="token punctuation">)</span>
    pca<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
    Y<span class="token operator">=</span>pca<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
    tzxl<span class="token operator">=</span>pca<span class="token punctuation">.</span>components_              
    tz<span class="token operator">=</span>pca<span class="token punctuation">.</span>explained_variance_           
    gxl<span class="token operator">=</span>pca<span class="token punctuation">.</span>explained_variance_ratio_    <span class="token comment">#返回主成分方差百分比（贡献率）</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        Y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">sum</span><span class="token punctuation">(</span>X<span class="token punctuation">[</span>i<span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">*</span>tzxl<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    F<span class="token operator">=</span>gxl<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>Y<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>gxl<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>Y<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>gxl<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">*</span>Y<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment">#综合得分=各个主成分×贡献率之和</span>
    dq<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span>Data<span class="token punctuation">[</span><span class="token string">'地区'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">)</span>         <span class="token comment">#提取地区</span>
    Rs<span class="token operator">=</span>pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>F<span class="token punctuation">,</span>index<span class="token operator">=</span>dq<span class="token punctuation">)</span>             <span class="token comment">#以地区作为index,综合得分为值,构建序列</span>
    Rs<span class="token operator">=</span>Rs<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment">#按综合得分降序进行排序</span>
 
    <span class="token keyword">return</span> Rs
 
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="10K_246"></a>第10关:K均值聚类算法及其应用</h3> 
<p>任务描述<br> 本关任务：读取“农村居民人均可支配收入来源 2016.xlsx”数据表，其中数据来源于2016 年《中国统计年鉴》，对表中给出的我国内陆 31 个地区做 K-均值聚类分析（K=4），并在控制台中输出聚类结果和各个类的聚类中心。运用K-均值聚类算法解决实际问题。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">#读取“农村居民人均可支配收入来源2016.xlsx”数据表，数据来源于2016年《中国统计年鉴》，</span>
<span class="token comment"># 首先，对指标数据作均值-方差标准化处理，注意首列为地区名称，不用标准化</span>
<span class="token comment"># 其次，对标准化后的指标数据，作K-均值聚类分析（K=4），</span>
<span class="token comment"># 最后，给出聚类分析结果，用一个序列Fs来表示，其中index为地区名称，值为所属类别的标签值（0、1、2、3）。</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#导入K-均值聚类模块KMeans。</span>
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>cluster <span class="token keyword">import</span> KMeans
    <span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    Data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'农村居民人均可支配收入来源2016.xlsx'</span><span class="token punctuation">)</span>
    X<span class="token operator">=</span>Data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    <span class="token comment">#对X做均值-方差规范化处理</span>
    scaler <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>
    scaler<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span> 
    X<span class="token operator">=</span>scaler<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
    <span class="token comment">#利用KMeans创建K-均值聚类对象model。</span>
    model <span class="token operator">=</span> KMeans<span class="token punctuation">(</span>n_clusters <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> max_iter <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">)</span> 
    <span class="token comment">#调用model对象中的fit()方法进行拟合训练。</span>
    model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
    <span class="token comment">#获取model对象中的labels_属性，可以返回其聚类的标签。</span>
    c<span class="token operator">=</span>model<span class="token punctuation">.</span>labels_<span class="token comment">#聚类结果</span>
    jlzx <span class="token operator">=</span> model<span class="token punctuation">.</span>cluster_centers_<span class="token comment">#各个类的聚类中心</span>
    Fs<span class="token operator">=</span>pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>c<span class="token punctuation">,</span>index<span class="token operator">=</span>Data<span class="token punctuation">[</span><span class="token string">'地区'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#地区</span>
 
    <span class="token keyword">return</span> Fs
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="11_279"></a>第11关:布尔数据集构建</h3> 
<p>任务描述<br> 将以下超市的购买记录：<br> I1：西红柿、排骨、鸡蛋、毛巾、水果刀、苹果<br> I2：西红柿、茄子、水果刀、香蕉<br> I3：鸡蛋、袜子、毛巾、肥皂、苹果、水果刀<br> I4：西红柿、排骨、茄子、毛巾、水果刀<br> I5：西红柿、排骨、酸奶、苹果<br> I6：鸡蛋、茄子、酸奶、肥皂、苹果、香蕉<br> I7：排骨、鸡蛋、茄子、水果刀、苹果<br> I8：土豆、鸡蛋、袜子、香蕉、苹果、水果刀<br> I9：西红柿、排骨、鞋子、土豆、香蕉、苹果<br> 转换为布尔数据集，其中数据集用数据框来表示，数据框中的字段名称即为商品名称，如果商品在某个购买记录中出现用1来表示，否则为0。</p> 
<pre><code class="prism language-python"><span class="token comment">#********** Begin **********#</span>
<span class="token comment">##将以下超市的购买记录（已用一个"超市购买记录.txt"来存放，读取该文件即可）</span>
<span class="token comment">##注意：文件内容存放与下列展示一致，即顿号分隔，“##”号不是文件内容，文件编码为utf-8）：</span>
<span class="token comment">##  I1、西红柿、排骨、鸡蛋、毛巾、水果刀、苹果</span>
<span class="token comment">##  I2、西红柿、茄子、水果刀、香蕉</span>
<span class="token comment">##  I3、鸡蛋、袜子、毛巾、肥皂、苹果、水果刀</span>
<span class="token comment">##  I4、西红柿、排骨、茄子、毛巾、水果刀</span>
<span class="token comment">##  I5、西红柿、排骨、酸奶、苹果</span>
<span class="token comment">##  I6、鸡蛋、茄子、酸奶、肥皂、苹果、香蕉</span>
<span class="token comment">##  I7、排骨、鸡蛋、茄子、水果刀、苹果</span>
<span class="token comment">##  I8、土豆、鸡蛋、袜子、香蕉、苹果、水果刀</span>
<span class="token comment">##  I9、西红柿、排骨、鞋子、土豆、香蕉、苹果</span>
<span class="token comment">## 将其转换为布尔数据集，其中数据集用数据框Data来表示，数据框中的字段名称即为商品名称，如果商品在某个购买记录中出现用1来表示，否则为0</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    tiem<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'西红柿'</span><span class="token punctuation">,</span><span class="token string">'排骨'</span><span class="token punctuation">,</span><span class="token string">'鸡蛋'</span><span class="token punctuation">,</span><span class="token string">'茄子'</span><span class="token punctuation">,</span><span class="token string">'袜子'</span><span class="token punctuation">,</span><span class="token string">'酸奶'</span><span class="token punctuation">,</span><span class="token string">'土豆'</span><span class="token punctuation">,</span><span class="token string">'鞋子'</span><span class="token punctuation">]</span><span class="token comment">#商品名称，也是数据框的字段名</span>
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
    data<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_table<span class="token punctuation">(</span><span class="token string">'超市购买记录.txt'</span><span class="token punctuation">,</span>engine<span class="token operator">=</span><span class="token string">'python'</span><span class="token punctuation">,</span>sep<span class="token operator">=</span><span class="token string">'、'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
    data<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    D<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> t <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>tiem<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        z<span class="token operator">=</span>np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        li<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            s<span class="token operator">=</span>data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>k<span class="token punctuation">]</span><span class="token operator">==</span>tiem<span class="token punctuation">[</span>t<span class="token punctuation">]</span>
            li<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>s<span class="token punctuation">.</span>values<span class="token operator">==</span><span class="token boolean">True</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>
        z<span class="token punctuation">[</span>li<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
        D<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>tiem<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span>z<span class="token punctuation">)</span>
    Data<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>D<span class="token punctuation">)</span>  <span class="token comment">#布尔值数据表</span>
    <span class="token keyword">return</span> Data
<span class="token comment">#********** End **********#</span>
</code></pre> 
<h3><a id="12_326"></a>第12关:基于布尔数据集的一对一和多对一关联规则挖掘</h3> 
<p>任务描述<br> 本关任务：针对以下布尔数据集，请编程计算规则“A-&gt;B”和“A,B-&gt;C”的支持度和置信度。<br> A B C<br> 1 1 0<br> 0 1 1<br> 1 0 0<br> 1 1 1<br> 1 1 1<br> 1 0 0<br> 1 1 1<br> 0 1 1<br> 1 0 0<br> 1 1 1<br> 1 1 0<br> 1 1 1<br> 1 1 0</p> 
<pre><code class="prism language-python"><span class="token comment">#针对以下布尔数据集(已用一个“test12.xlsx”表格来存取，直接读取即可，字段名称为A、B、C，“#”号非表格数据):</span>
<span class="token comment">#   A	B	C</span>
<span class="token comment">#   1	1	0</span>
<span class="token comment">#   0	1	1</span>
<span class="token comment">#   1	0	0</span>
<span class="token comment">#   1	1	1</span>
<span class="token comment">#   1	1	1</span>
<span class="token comment">#   1	0	0</span>
<span class="token comment">#   1	1	1</span>
<span class="token comment">#   0	1	1</span>
<span class="token comment">#   1	0	0</span>
<span class="token comment">#   1	1	1</span>
<span class="token comment">#   1	1	0</span>
<span class="token comment">#   1	1	1</span>
<span class="token comment">#   1	1	0</span>
<span class="token comment">##请编程计算规则“A-&gt;B”和“A,B-&gt;C”的支持度和置信度，分别用sp1和co1,sp2和co2来表示</span>
<span class="token keyword">def</span> <span class="token function">return_values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
    <span class="token comment"># 读取数据</span>
    data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'test12.xlsx'</span><span class="token punctuation">)</span>
    <span class="token comment"># 计算指标</span>
    total_records <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    AB_records <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    ABC_records <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    A_records <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    AB_records <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 计算支持度和置信度</span>
    sp1 <span class="token operator">=</span> AB_records <span class="token operator">/</span> total_records
    co1 <span class="token operator">=</span> AB_records <span class="token operator">/</span> A_records
    sp2 <span class="token operator">=</span> ABC_records <span class="token operator">/</span> total_records
    co2 <span class="token operator">=</span> ABC_records <span class="token operator">/</span> AB_records
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span>sp1<span class="token punctuation">,</span>co1<span class="token punctuation">,</span>sp2<span class="token punctuation">,</span>co2<span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/88c4a91256aab6c9c7000d05cf3aa7a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入浅出MHA（MySQL Master High Availability）集群：原理、部署与实践</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e51afa84a2331fd4909db4f5fd38ac9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mac下brew安装php7.4</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>