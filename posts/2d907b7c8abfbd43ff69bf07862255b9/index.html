<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【2】Spring Cloud 工程搭建 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2d907b7c8abfbd43ff69bf07862255b9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【2】Spring Cloud 工程搭建">
  <meta property="og:description" content="🎥 个人主页：Dikz12🔥个人专栏：Spring Cloud实战📕格言：吾愚多不敏，而愿加学欢迎大家👍点赞✍评论⭐收藏 目录
1.声明项目依赖和项目构建插件
2.完善子项目订单服务 2.1完善启动类和配置文件
2.2 业务代码
3.远程调用
3.1需求 ​3.2 实现
1.声明项目依赖和项目构建插件 把下面代码分别引入到两个子项目的pom.xml中. &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--mybatis--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;includes&gt; &lt;include&gt;**/**&lt;/include&gt; &lt;/includes&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;/build&gt; 2.完善子项目订单服务 2.1完善启动类和配置文件 启动类 @SpringBootApplication public class OrderApplication { public static void main(String[] args) { SpringApplication.run(OrderApplication.class,args); } } 配置文件
在resource文件夹中建立,application.yml 文件.
server: port: 8080 spring: datasource: url: jdbc:mysql://127.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-22T21:04:39+08:00">
    <meta property="article:modified_time" content="2024-07-22T21:04:39+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【2】Spring Cloud 工程搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="320" src="https://images2.imgbox.com/94/86/Pqw1h6vI_o.jpg" width="569"></p> 
<ul><li>🎥 个人主页：<a href="https://blog.csdn.net/m0_65465009?type=blog" title="Dikz12">Dikz12</a></li><li>🔥个人专栏：<a href="https://blog.csdn.net/m0_65465009/category_12736738.html" title="Spring Cloud实战">Spring Cloud实战</a></li><li>📕格言：吾愚多不敏，而愿加学</li><li>欢迎大家👍点赞✍评论⭐收藏</li></ul> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E5%A3%B0%E6%98%8E%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E5%92%8C%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%8F%92%E4%BB%B6%01-toc" style="margin-left:0px;"><a href="#1.%E5%A3%B0%E6%98%8E%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E5%92%8C%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%8F%92%E4%BB%B6%01" rel="nofollow">1.声明项目依赖和项目构建插件</a></p> 
<p id="2.%E5%AE%8C%E5%96%84%E5%AD%90%E9%A1%B9%E7%9B%AE%E8%AE%A2%E5%8D%95%E6%9C%8D%E5%8A%A1%C2%A0-toc" style="margin-left:0px;"><a href="#2.%E5%AE%8C%E5%96%84%E5%AD%90%E9%A1%B9%E7%9B%AE%E8%AE%A2%E5%8D%95%E6%9C%8D%E5%8A%A1%C2%A0" rel="nofollow">2.完善子项目订单服务 </a></p> 
<p id="2.1%E5%AE%8C%E5%96%84%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#2.1%E5%AE%8C%E5%96%84%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">2.1完善启动类和配置文件</a></p> 
<p id="%C2%A02.2%20%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#%C2%A02.2%20%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81" rel="nofollow"> 2.2 业务代码</a></p> 
<p id="3.%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8-toc" style="margin-left:0px;"><a href="#3.%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8" rel="nofollow">3.远程调用</a></p> 
<p id="3.1%E9%9C%80%E6%B1%82%C2%A0-toc" style="margin-left:40px;"><a href="#3.1%E9%9C%80%E6%B1%82%C2%A0" rel="nofollow">3.1需求 </a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%913.2%20%E5%AE%9E%E7%8E%B0-toc" style="margin-left:40px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%913.2%20%E5%AE%9E%E7%8E%B0" rel="nofollow">​3.2 实现</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E5%A3%B0%E6%98%8E%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96%E5%92%8C%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%8F%92%E4%BB%B6%01" style="background-color:transparent;">1.声明项目依赖和项目构建插件</h2> 
<p>把下面代码分别引入到两个子项目的pom.xml中. </p> 
<pre><code class="hljs">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;!--mybatis--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
     &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;filtering&gt;true&lt;/filtering&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/**&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
    &lt;/resources&gt;
&lt;/build&gt;</code></pre> 
<p class="img-center"><img alt="" height="438" src="https://images2.imgbox.com/47/8d/6ecHag8o_o.png" width="645"></p> 
<h2 id="2.%E5%AE%8C%E5%96%84%E5%AD%90%E9%A1%B9%E7%9B%AE%E8%AE%A2%E5%8D%95%E6%9C%8D%E5%8A%A1%C2%A0">2.完善子项目订单服务 </h2> 
<h3 id="2.1%E5%AE%8C%E5%96%84%E5%90%AF%E5%8A%A8%E7%B1%BB%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">2.1完善启动类和配置文件</h3> 
<p><strong>启动类 </strong></p> 
<pre><code class="hljs">@SpringBootApplication
public class OrderApplication {
    public static void main(String[] args) {
        SpringApplication.run(OrderApplication.class,args);
    }
}</code></pre> 
<p><img alt="" height="193" src="https://images2.imgbox.com/01/95/LtmL0KOZ_o.png" width="713"><strong>配置文件</strong></p> 
<p> 在resource文件夹中建立,application.yml 文件.</p> 
<pre><code class="hljs">server:
  port: 8080
spring:
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/cloud_order?characterEncoding=utf8&amp;useSSL=false
    username:
    password:
    driver-class-name: com.mysql.cj.jdbc.Driver
mybatis:
  configuration: # 配置打印 MyBatis 执行的 SQL
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true  #自动驼峰转换</code></pre> 
<p><img alt="" height="319" src="https://images2.imgbox.com/c7/6a/WQOyLFhY_o.png" width="706"></p> 
<h3 id="%C2%A02.2%20%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81" style="background-color:transparent;"> 2.2 业务代码</h3> 
<blockquote> 
 <p>订单服务：根据订单id，获取订单详情.. </p> 
</blockquote> 
<p><strong> 1. 先搭架子</strong></p> 
<p class="img-center"><img alt="" height="261" src="https://images2.imgbox.com/c3/10/cenPKKDx_o.png" width="482"></p> 
<p><strong>2. 实体类. </strong></p> 
<p> 子项目pom并没有引入lombok，但依然可以使用。@Date</p> 
<pre><code class="hljs">@Data
public class OrderInfo {
    private Integer orderId;
    private Integer userId;
    private Integer productId;
    private Integer num;
    private Integer price; //随便了
    private Date createTime;
    private Date updateTime;
}</code></pre> 
<p><strong>3.Controller</strong></p> 
<pre><code class="hljs">import com.dome.order.model.OrderInfo;
import com.dome.order.service.OrderService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/order")
public class OrderController {
    @Autowired
    private OrderService orderService;
    
    @RequestMapping("/{orderId}")
    public OrderInfo getOrderById(@PathVariable("orderId") Integer orderId) { //从url中拿参数
        return orderService.selectOrderById(orderId);
    }
}</code></pre> 
<p><strong>4.Service</strong></p> 
<pre><code class="hljs">import com.dome.order.mapper.OrderMapper;
import com.dome.order.model.OrderInfo;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class OrderService {
    @Autowired
    private OrderMapper orderMapper;

    public OrderInfo selectOrderById(Integer orderId) {
        return orderMapper.selectOrderById(orderId);
    }
}</code></pre> 
<p><strong>5.Mapper</strong></p> 
<pre><code class="hljs">import com.dome.order.model.OrderInfo;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;

@Mapper
public interface OrderMapper {
    @Select("select  * from order_detail where id = #{orderId}")
    OrderInfo selectOrderById(Integer orderId);
}
</code></pre> 
<p><strong> 测试</strong> </p> 
<p>启动OrderApplication类. </p> 
<p><img alt="" height="346" src="https://images2.imgbox.com/fc/9f/z5jfsStu_o.png" width="1200"> 访问url:http://127.0.0.1:8080/order/1.</p> 
<p><img alt="" height="167" src="https://images2.imgbox.com/e7/2a/CRw1Ncez_o.png" width="1200"></p> 
<blockquote> 
 <p><strong>完善子项目商品服务</strong>，跟上诉过程一样，只需要修改端口号就可以了，因为后⾯需要多个服务⼀起启动,所以要设置为不同的端⼝号。（这里就不在展示了）</p> 
 <p><img alt="" height="133" src="https://images2.imgbox.com/ca/f1/hYoTixS1_o.png" width="1200"></p> 
</blockquote> 
<h2 id="3.%E8%BF%9C%E7%A8%8B%E8%B0%83%E7%94%A8">3.远程调用</h2> 
<h3 id="3.1%E9%9C%80%E6%B1%82%C2%A0">3.1需求 </h3> 
<p>根据订单查询订单信息时,根据订单⾥产品ID,获取产品的详细信息.</p> 
<h3 id="%E2%80%8B%E7%BC%96%E8%BE%913.2%20%E5%AE%9E%E7%8E%B0" style="background-color:transparent;"><img alt="" height="447" src="https://images2.imgbox.com/2c/f8/kNilsMjs_o.png" width="1044"><br> 3.2 实现</h3> 
<p><strong>实现思路:  </strong>order-service服务向product-service服务发送⼀个http请求,把得到的返回结果,和订单结果融合在⼀起,返回给调⽤⽅.<br><strong>实现⽅式:  </strong>采⽤ Spring 提供的 <span style="color:#fe2c24;">RestTemplate</span>.</p> 
<blockquote> 
 <p>实现http请求的⽅式,有很多,可参考:<a class="link-info" href="https://zhuanlan.zhihu.com/p/670101467" rel="nofollow" title="https://zhuanlan.zhihu.com/p/670101467">https://zhuanlan.zhihu.com/p/670101467</a></p> 
</blockquote> 
<p><strong> 准备工作</strong></p> 
<p>把product实体类添加到order-service中的mode中并在OrderInfo中添加product属性.</p> 
<p class="img-center"><img alt="" height="322" src="https://images2.imgbox.com/83/6c/GQVFvwiV_o.png" width="429"></p> 
<p> </p> 
<p class="img-center"><img alt="" height="314" src="https://images2.imgbox.com/7e/63/rl1KqLHQ_o.png" width="436"></p> 
<p><strong> 1. 定义RestTemplate. （第三方对象需要使用@Bean注解）</strong></p> 
<pre><code class="hljs">import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.client.RestTemplate;

@Configuration
public class BeanConfig {
    @Bean
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}</code></pre> 
<p><img alt="" height="296" src="https://images2.imgbox.com/4e/09/QBF5frRH_o.png" width="1032"><br><strong> 2.修改order-service中的OrderService</strong></p> 
<pre><code class="hljs">@Service
public class OrderService {
    @Autowired
    private OrderMapper orderMapper;
    @Autowired
    private RestTemplate restTemplate;

    public OrderInfo selectOrderById(Integer orderId) {
        OrderInfo orderInfo = orderMapper.selectOrderById(orderId);
        String url = "http://127.0.0.1:9090/product/" + orderInfo.getProductId();
        ProductInfo productInfo = restTemplate.getForObject(url, ProductInfo.class);
        orderInfo.setProductInfo(productInfo);
        return orderInfo;
    }
}</code></pre> 
<p>3. 测试.</p> 
<p>例 url:  http://127.0.0.1:8080/order/1</p> 
<p><img alt="" height="152" src="https://images2.imgbox.com/e0/47/TAKrVJtP_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a37f0d85b45956865b2f2671e91e58d5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python爬虫实战案例（爬取图片）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fca6aaed56bfd7cdeda2dc563d1e499f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">集训 Day 3 总结 虚树 &#43; dfs tree &#43; 基环树</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>