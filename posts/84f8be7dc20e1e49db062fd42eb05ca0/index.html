<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux虚拟机上Hadoop的安装与使用 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/84f8be7dc20e1e49db062fd42eb05ca0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Linux虚拟机上Hadoop的安装与使用">
  <meta property="og:description" content="此次安装的的jdk版本为1.8，Hadoop版本为3.1.3。
一：实验前准备 1.虚拟机自行下好，要带有vim编辑器
sudo apt install vim 如若懒的安装，可将文章中一些vim的命令替换成
gedit 要打开的文件路径 2.在此次实验之前命令行必须进入超级用户，以免出现不必要的麻烦（权限不足）
sudo su 如下图所示
用户名为root，且末尾带有“#”号。
二：安装JDK 1.执行以下命令，下载JDK1.8安装包（华为云下载）。
wget --no-check-certificate https://repo.huaweicloud.com/java/jdk/8u151-b12/jdk-8u151-linux-x64.tar.gz 2.执行以下命令，解压下载的JDK1.8安装包。
tar -zxvf jdk-8u151-linux-x64.tar.gz 3.移动并重命名JDK包。
mv jdk1.8.0_151/ /usr/java8 4.配置Java环境变量。
source 为读取变量的作用。
echo &#39;export JAVA_HOME=/usr/java8&#39; &gt;&gt; /etc/profile echo &#39;export PATH=$PATH:$JAVA_HOME/bin&#39; &gt;&gt; /etc/profile source /etc/profile 5.查看Java是否成功安装。
java -version 三：安装Hadoop 1. 执行以下命令，下载Hadoop安装包（华为云下载）。
wget --no-check-certificate https://repo.huaweicloud.com/apache/hadoop/common/hadoop-3.1.3/hadoop-3.1.3.tar.gz 2. 执行以下命令，解压Hadoop安装包至/opt/hadoop。
tar -zxvf hadoop-3.1.3.tar.gz -C /opt/ mv /opt/hadoop-3.1.3 /opt/hadoop 3. 执行以下命令，配置Hadoop环境变量。
source 为读取变量的作用。
echo &#39;export HADOOP_HOME=/opt/hadoop/&#39; &gt;&gt; /etc/profile echo &#39;export PATH=$PATH:$HADOOP_HOME/bin&#39; &gt;&gt; /etc/profile echo &#39;export PATH=$PATH:$HADOOP_HOME/sbin&#39; &gt;&gt; /etc/profile source /etc/profile 4.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-15T11:00:15+08:00">
    <meta property="article:modified_time" content="2024-03-15T11:00:15+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux虚拟机上Hadoop的安装与使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>此次安装的的jdk版本为1.8，Hadoop版本为3.1.3。</p> 
<h2>一：实验前准备</h2> 
<p>1.虚拟机自行下好，要带有vim编辑器</p> 
<pre><code>sudo apt install vim</code></pre> 
<p>如若懒的安装，可将文章中一些vim的命令替换成</p> 
<pre><code class="language-bash">gedit 要打开的文件路径</code></pre> 
<p>2.在此次实验之前命令行必须进入超级用户，以免出现不必要的麻烦（权限不足）</p> 
<pre><code class="language-bash">sudo su</code></pre> 
<p>如下图所示</p> 
<p><img alt="" height="23" src="https://images2.imgbox.com/75/a7/vmR76XOw_o.png" width="340"></p> 
<p>用户名为root，且末尾带有“#”号。</p> 
<h2>二：安装JDK</h2> 
<p style="margin-left:0;">1.执行以下命令，下载JDK1.8安装包（华为云下载）。</p> 
<pre><code class="language-bash">wget --no-check-certificate https://repo.huaweicloud.com/java/jdk/8u151-b12/jdk-8u151-linux-x64.tar.gz</code></pre> 
<p style="margin-left:0;">2.执行以下命令，解压下载的JDK1.8安装包。</p> 
<pre><code class="language-bash">tar -zxvf jdk-8u151-linux-x64.tar.gz</code></pre> 
<p style="margin-left:0;">3.移动并重命名JDK包。</p> 
<pre><code class="language-bash">mv jdk1.8.0_151/ /usr/java8</code></pre> 
<p style="margin-left:0;">4.配置Java环境变量。</p> 
<p style="margin-left:0;">source 为读取变量的作用。</p> 
<pre><code class="language-bash">echo 'export JAVA_HOME=/usr/java8' &gt;&gt; /etc/profile

echo 'export PATH=$PATH:$JAVA_HOME/bin' &gt;&gt; /etc/profile

source /etc/profile</code></pre> 
<p style="margin-left:0;">5.查看Java是否成功安装。</p> 
<pre><code class="language-bash">java -version</code></pre> 
<p><img alt="" height="151" src="https://images2.imgbox.com/31/28/ddnKowIZ_o.png" width="833"></p> 
<h2 style="margin-left:0px;">三：安装Hadoop</h2> 
<p style="margin-left:0;">1. 执行以下命令，下载Hadoop安装包（华为云下载）。</p> 
<pre><code class="language-bash">wget --no-check-certificate https://repo.huaweicloud.com/apache/hadoop/common/hadoop-3.1.3/hadoop-3.1.3.tar.gz</code></pre> 
<p style="margin-left:0;">2. 执行以下命令，解压Hadoop安装包至/opt/hadoop。</p> 
<pre><code class="language-bash">tar -zxvf hadoop-3.1.3.tar.gz -C /opt/

mv /opt/hadoop-3.1.3 /opt/hadoop</code></pre> 
<p style="margin-left:0;">3. 执行以下命令，配置Hadoop环境变量。</p> 
<p style="margin-left:0;">source 为读取变量的作用。</p> 
<pre><code class="language-bash">echo 'export HADOOP_HOME=/opt/hadoop/' &gt;&gt; /etc/profile

echo 'export PATH=$PATH:$HADOOP_HOME/bin' &gt;&gt; /etc/profile

echo 'export PATH=$PATH:$HADOOP_HOME/sbin' &gt;&gt; /etc/profile

source /etc/profile   </code></pre> 
<p style="margin-left:0;">4. 执行以下命令，修改配置文件yarn-env.sh和hadoop-env.sh。</p> 
<p style="margin-left:0;">这里JAVA_HOME为JDK安装目录，可自行更改。</p> 
<pre><code class="language-bash">echo "export JAVA_HOME=/usr/java8" &gt;&gt; /opt/hadoop/etc/hadoop/yarn-env.sh

echo "export JAVA_HOME=/usr/java8" &gt;&gt; /opt/hadoop/etc/hadoop/hadoop-env.sh</code></pre> 
<p style="margin-left:0;">5. 执行以下命令，测试Hadoop是否安装成功。</p> 
<pre><code class="language-bash">hadoop version</code></pre> 
<p>成功如下图所示</p> 
<p><img alt="" height="156" src="https://images2.imgbox.com/b1/aa/sR9EmkZ7_o.png" width="865"></p> 
<p>如若未找到，请重新查看/etc/profile文件中的内容是否增加，若增加，请重新运行source。</p> 
<h2 style="background-color:transparent;margin-left:0px;">四：配置Hadoop</h2> 
<p style="margin-left:0;">1. 修改Hadoop配置文件 core-site.xml。</p> 
<p style="margin-left:0;">a. 执行以下命令开始进入编辑页面。</p> 
<pre><code class="language-bash">vim /opt/hadoop/etc/hadoop/core-site.xml</code></pre> 
<p style="margin-left:0;">b. 输入i进入编辑模式。</p> 
<p style="margin-left:0;">c. 在&lt;configuration&gt;&lt;/configuration&gt;节点内插入如下内容。</p> 
<pre><code class="language-bash">&lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;file:/opt/hadoop/tmp&lt;/value&gt;
        &lt;description&gt;location to store temporary files&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://127.0.0.1:9000&lt;/value&gt;
&lt;/property&gt;
</code></pre> 
<p style="margin-left:0;">d. 按Esc键退出编辑模式，输入:wq保存退出。</p> 
<p style="margin-left:0;">2. 修改Hadoop配置文件 hdfs-site.xml。</p> 
<p style="margin-left:0;">a. 执行以下命令开始进入编辑页面。</p> 
<pre><code class="language-bash">vim /opt/hadoop/etc/hadoop/hdfs-site.xml</code></pre> 
<p style="margin-left:0;">b. 输入i进入编辑模式。</p> 
<p style="margin-left:0;">c. 在&lt;configuration&gt;&lt;/configuration&gt;节点内插入如下内容。</p> 
<pre><code class="language-bash">&lt;property&gt;

        &lt;name&gt;dfs.replication&lt;/name&gt;

        &lt;value&gt;1&lt;/value&gt;

    &lt;/property&gt;

    &lt;property&gt;

        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;

        &lt;value&gt;file:/opt/hadoop/tmp/dfs/name&lt;/value&gt;

    &lt;/property&gt;

    &lt;property&gt;

        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;

        &lt;value&gt;file:/opt/hadoop/tmp/dfs/data&lt;/value&gt;

&lt;/property&gt;

&lt;property&gt;

        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;

        &lt;value&gt;127.0.0.1:50070&lt;/value&gt;

&lt;/property&gt;</code></pre> 
<p style="margin-left:0;">d. 按Esc键退出编辑模式，输入:wq保存退出。</p> 
<h2 style="background-color:transparent;margin-left:0px;">五：配置SSH免密登录</h2> 
<p style="margin-left:0;">1. 执行以下命令，创建公钥和私钥。</p> 
<pre><code class="language-bash">ssh-keygen -t rsa</code></pre> 
<p style="margin-left:0;">重要的事情说三遍！！！</p> 
<p style="margin-left:0;">一直按确定，不输密钥。</p> 
<p style="margin-left:0;">一直按确定，不输密钥。</p> 
<p style="margin-left:0;">一直按确定，不输密钥。</p> 
<p style="margin-left:0;">不然会在初始化namenode时出错。</p> 
<p style="margin-left:0;">2. 执行以下命令，将公钥添加到authorized_keys文件中。</p> 
<pre><code class="language-bash">cd ~

cd .ssh

cat id_rsa.pub &gt;&gt; authorized_keys</code></pre> 
<p style="margin-left:0;">输入如下命令，在环境变量中添加下面的配置</p> 
<pre><code class="language-bash">vi /etc/profile</code></pre> 
<p style="margin-left:0;">然后向里面加入如下的内容</p> 
<pre><code class="language-bash">export HDFS_NAMENODE_USER=root

export HDFS_DATANODE_USER=root

export HDFS_SECONDARYNAMENODE_USER=root

export YARN_RESOURCEMANAGER_USER=root

export YARN_NODEMANAGER_USER=root</code></pre> 
<p style="margin-left:0;">输入如下命令使改动生效</p> 
<pre><code class="language-bash">source /etc/profile</code></pre> 
<h2 style="background-color:transparent;margin-left:0px;">六：启动Hadoop</h2> 
<p style="margin-left:0;">1. 执行以下命令，初始化namenode 。</p> 
<pre><code class="language-bash">hadoop namenode -format</code></pre> 
<p style="margin-left:0;">2. 依次执行以下命令，启动Hadoop。</p> 
<pre><code class="language-bash">start-dfs.sh</code></pre> 
<p style="margin-left:0;">第一次运行一般没有，若有选择Y/N的，选择Y;其他直接回车</p> 
<pre><code class="language-bash">start-yarn.sh</code></pre> 
<p style="margin-left:0;">3. 启动成功后，执行以下命令，查看已成功启动的进程。</p> 
<pre><code class="language-bash">jps</code></pre> 
<p style="margin-left:0;">正常会有6个进程；</p> 
<p style="margin-left:0;"><img alt="" height="185" src="https://images2.imgbox.com/98/87/nBAW34av_o.png" width="480"></p> 
<p style="margin-left:0;">若是没有其中的DataNode进程，则是因为不是第一次启动，导致没有显示出来，运行实际上是没有问题的。当然，也有解决方法。</p> 
<p style="margin-left:0;">如果已经启动hadoop，需要先输入以下代码以停止进程。</p> 
<pre><code>stop-all.sh</code></pre> 
<p style="margin-left:0;">然后在清理缓存，强制递归删除/hadoop/tmp文件夹以及所有文件</p> 
<pre><code class="language-bash">rm -rf /hadoop/tmp</code></pre> 
<p style="margin-left:0;">最后重新按步骤启动即可。</p> 
<p style="margin-left:0;">4. 打开浏览器访问<a class="link-info" href="" rel="nofollow">http://&lt;127.0.0.1&gt;:8088</a>和<a class="link-info" href="" rel="nofollow">http://&lt;127.0.0.1&gt;:50070</a>，显示如下界面则表示Hadoop伪分布式环境搭建完成。</p> 
<p style="margin-left:0;"><img alt="" height="914" src="https://images2.imgbox.com/80/a7/J0BledXY_o.png" width="1200"><img alt="" height="924" src="https://images2.imgbox.com/05/78/s0kp2Ol9_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/42e2a3d484bae962589679193864d521/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android 获取 usb 权限的两种方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4fee775d4e359eec63011474d88fe7f8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机考研｜南京大学AI宣布改考408的启示</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>