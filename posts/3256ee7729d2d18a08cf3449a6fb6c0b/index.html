<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43;ç¬¬ä¸‰åå…­å¼¹---äºŒå‰æœç´¢æ ‘çš„æ€§èƒ½é£è·ƒï¼šAVLæ ‘åŸç†ä¸å®ç° - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/3256ee7729d2d18a08cf3449a6fb6c0b/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="C&#43;&#43;ç¬¬ä¸‰åå…­å¼¹---äºŒå‰æœç´¢æ ‘çš„æ€§èƒ½é£è·ƒï¼šAVLæ ‘åŸç†ä¸å®ç°">
  <meta property="og:description" content="âœ¨ä¸ªäººä¸»é¡µï¼šÂ ç†¬å¤œå­¦ç¼–ç¨‹çš„å°æ—
ğŸ’—ç³»åˆ—ä¸“æ ï¼šÂ ã€Cè¯­è¨€è¯¦è§£ã€‘Â ã€æ•°æ®ç»“æ„è¯¦è§£ã€‘ã€C&#43;&#43;è¯¦è§£ã€‘
ç›®å½•
1 AVL æ ‘
1.1 AVLæ ‘çš„æ¦‚å¿µ
1.2 AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰
1.3 AVLæ ‘çš„æ’å…¥
1.4 AVLæ ‘çš„æ—‹è½¬
1.5 AVLæ ‘çš„éªŒè¯
1 AVL æ ‘ 1.1 AVLæ ‘çš„æ¦‚å¿µ äºŒå‰æœç´¢æ ‘è™½å¯ä»¥ç¼©çŸ­æŸ¥æ‰¾çš„æ•ˆç‡ï¼Œä½†å¦‚æœæ•°æ®æœ‰åºæˆ–æ¥è¿‘æœ‰åºäºŒå‰æœç´¢æ ‘å°†é€€åŒ–ä¸ºå•æ”¯æ ‘ï¼ŒæŸ¥
æ‰¾å…ƒç´ ç›¸å½“äºåœ¨é¡ºåºè¡¨ä¸­æœç´¢å…ƒç´ ï¼Œæ•ˆç‡ä½ä¸‹ã€‚å› æ­¤ï¼Œä¸¤ä½ä¿„ç½—æ–¯çš„æ•°å­¦å®¶G.M.Adelson-Velskii
å’ŒE.M.Landisåœ¨1962å¹´å‘æ˜äº†ä¸€ç§è§£å†³ä¸Šè¿°é—®é¢˜çš„æ–¹æ³•ï¼šå½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°ç»“ç‚¹åï¼Œå¦‚æœèƒ½ä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(éœ€è¦å¯¹æ ‘ä¸­çš„ç»“ç‚¹è¿›è¡Œè°ƒæ•´)ï¼Œå³å¯é™ä½æ ‘çš„é«˜åº¦ï¼Œä»è€Œå‡å°‘å¹³å‡æœç´¢é•¿åº¦ã€‚
ä¸ºä»€ä¹ˆä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œè€Œä¸æ˜¯é«˜åº¦å·®ä¸º0ï¼Ÿ
æœ‰äº›ç»“ç‚¹æƒ…å†µä¸‹ï¼Œæ¯”å¦‚2/4ï¼Œåšä¸åˆ°å¹³è¡¡ï¼Œå› æ­¤é€€è€Œæ±‚å…¶æ¬¡ï¼Œå·¦å³çš„é«˜åº¦å·®ä¸è¶…è¿‡1ã€‚
ä¸€æ£µAVLæ ‘æˆ–è€…æ˜¯ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„äºŒå‰æœç´¢æ ‘ï¼š
å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®(ç®€ç§°å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(-1/0/1)é«˜åº¦ä¹‹å·® == å³æ ‘é«˜åº¦ - å·¦æ ‘é«˜åº¦(åšä¸»å®ç°AVLæ ‘ä»¥è¿™ä¸ªä¸ºæ ‡å‡†) å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘ã€‚å¦‚æœå®ƒæœ‰nä¸ªç»“ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨
O(log2 n)ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O(log2 n)ã€‚
1.2 AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ AVLæ ‘çš„èŠ‚ç‚¹å®šä¹‰çš„æˆå‘˜å˜é‡ï¼š
å­˜å‚¨å€¼ï¼šæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„å€¼ã€‚å·¦èŠ‚ç‚¹æŒ‡é’ˆï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚å³èŠ‚ç‚¹æŒ‡é’ˆï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å³èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚åŒäº²èŠ‚ç‚¹æŒ‡é’ˆï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„åŒäº²èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚æ ¹èŠ‚ç‚¹çš„åŒäº²èŠ‚ç‚¹æŒ‡é’ˆä¸ºç©ºã€‚å¹³è¡¡å› å­ï¼šè¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘é«˜åº¦å’Œå·¦å­æ ‘é«˜åº¦ä¹‹å·®ã€‚å¹³è¡¡å› å­å¯ä»¥ä¸º-1ã€0æˆ–1ã€‚ AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ï¼šÂ template&lt;class K,class V&gt; struct AVLTreeNode { AVLTreeNode&lt;K, V&gt;* _left;// å·¦å­©å­ AVLTreeNode&lt;K, V&gt;* _right;// å³å­©å­ AVLTreeNode&lt;K, V&gt;* _parent;// åŒäº² pair&lt;K, V&gt; _kv; int _bf;// balance factor å¹³è¡¡å› å­ AVLTreeNode(const pair&lt;K,V&gt;&amp; kv) :_left(nullptr) ,_right(nullptr) ,_parent(nullptr) ,_kv(kv) ,_bf(0) {} }; AVLæ ‘åŸºæœ¬ç»“æ„çš„å®šä¹‰ï¼š">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-15T11:29:39+08:00">
    <meta property="article:modified_time" content="2024-08-15T11:29:39+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43;ç¬¬ä¸‰åå…­å¼¹---äºŒå‰æœç´¢æ ‘çš„æ€§èƒ½é£è·ƒï¼šAVLæ ‘åŸç†ä¸å®ç°</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;">âœ¨<span style="color:#956fe7;">ä¸ªäººä¸»é¡µï¼š</span><a href="https://blog.csdn.net/2201_75584283?spm=1011.2415.3001.5343" title="Â ç†¬å¤œå­¦ç¼–ç¨‹çš„å°æ—">Â ç†¬å¤œå­¦ç¼–ç¨‹çš„å°æ—</a></p> 
<p style="text-align:center;">ğŸ’—<span style="color:#fe2c24;">ç³»åˆ—ä¸“æ ï¼š</span>Â <a href="https://blog.csdn.net/2201_75584283/category_12556736.html" title="ã€Cè¯­è¨€è¯¦è§£ã€‘">ã€Cè¯­è¨€è¯¦è§£ã€‘</a>Â <a href="https://blog.csdn.net/2201_75584283/category_12556751.html" title="ã€æ•°æ®ç»“æ„è¯¦è§£ã€‘">ã€æ•°æ®ç»“æ„è¯¦è§£ã€‘</a><a href="https://blog.csdn.net/2201_75584283/category_12577595.html?spm=1001.2014.3001.5482" title="ã€C++è¯¦è§£ã€‘">ã€C++è¯¦è§£ã€‘</a></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1%20AVL%20%E6%A0%91-toc" style="margin-left:0px;"><a href="#1%20AVL%20%E6%A0%91" rel="nofollow">1 AVL æ ‘</a></p> 
<p id="1.1%20AVL%E6%A0%91%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#1.1%20AVL%E6%A0%91%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">1.1 AVLæ ‘çš„æ¦‚å¿µ</a></p> 
<p id="1.2%20AVL%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%9A%E4%B9%89-toc" style="margin-left:40px;"><a href="#1.2%20AVL%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%9A%E4%B9%89" rel="nofollow">1.2 AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰</a></p> 
<p id="1.3%20AVL%E6%A0%91%E7%9A%84%E6%8F%92%E5%85%A5-toc" style="margin-left:40px;"><a href="#1.3%20AVL%E6%A0%91%E7%9A%84%E6%8F%92%E5%85%A5" rel="nofollow">1.3 AVLæ ‘çš„æ’å…¥</a></p> 
<p id="1.4%20AVL%E6%A0%91%E7%9A%84%E6%97%8B%E8%BD%AC-toc" style="margin-left:40px;"><a href="#1.4%20AVL%E6%A0%91%E7%9A%84%E6%97%8B%E8%BD%AC" rel="nofollow">1.4 AVLæ ‘çš„æ—‹è½¬</a></p> 
<p id="1.5%20AVL%E6%A0%91%E7%9A%84%E9%AA%8C%E8%AF%81-toc" style="margin-left:40px;"><a href="#1.5%20AVL%E6%A0%91%E7%9A%84%E9%AA%8C%E8%AF%81" rel="nofollow">1.5 AVLæ ‘çš„éªŒè¯</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1%20AVL%20%E6%A0%91">1 AVL æ ‘</h2> 
<h3 id="1.1%20AVL%E6%A0%91%E7%9A%84%E6%A6%82%E5%BF%B5">1.1 AVLæ ‘çš„æ¦‚å¿µ</h3> 
<p><br> äºŒå‰æœç´¢æ ‘è™½å¯ä»¥ç¼©çŸ­æŸ¥æ‰¾çš„æ•ˆç‡ï¼Œä½†<span style="color:#0d0016;"><strong>å¦‚æœæ•°æ®æœ‰åºæˆ–æ¥è¿‘æœ‰åºäºŒå‰æœç´¢æ ‘å°†é€€åŒ–ä¸ºå•æ”¯æ ‘ï¼ŒæŸ¥<br> æ‰¾å…ƒç´ ç›¸å½“äºåœ¨é¡ºåºè¡¨ä¸­æœç´¢å…ƒç´ ï¼Œæ•ˆç‡ä½ä¸‹</strong></span>ã€‚å› æ­¤ï¼Œä¸¤ä½ä¿„ç½—æ–¯çš„æ•°å­¦å®¶G.M.Adelson-Velskii<br> å’ŒE.M.Landisåœ¨1962å¹´å‘æ˜äº†ä¸€ç§è§£å†³ä¸Šè¿°é—®é¢˜çš„æ–¹æ³•ï¼šå½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°ç»“ç‚¹åï¼Œå¦‚æœèƒ½<span style="color:#fe2c24;"><strong>ä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(éœ€è¦å¯¹æ ‘ä¸­çš„ç»“ç‚¹è¿›è¡Œè°ƒæ•´)ï¼Œå³å¯é™ä½æ ‘çš„é«˜åº¦ï¼Œä»è€Œå‡å°‘å¹³å‡æœç´¢é•¿åº¦</strong></span>ã€‚</p> 
<p>ä¸ºä»€ä¹ˆä¿è¯æ¯ä¸ªç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œè€Œä¸æ˜¯é«˜åº¦å·®ä¸º0ï¼Ÿ</p> 
<blockquote> 
 <p>æœ‰äº›ç»“ç‚¹æƒ…å†µä¸‹ï¼Œæ¯”å¦‚2/4ï¼Œåšä¸åˆ°å¹³è¡¡ï¼Œå› æ­¤é€€è€Œæ±‚å…¶æ¬¡ï¼Œå·¦å³çš„é«˜åº¦å·®ä¸è¶…è¿‡1ã€‚</p> 
</blockquote> 
<p><img alt="" height="356" src="https://images2.imgbox.com/17/a7/lQbKlZVV_o.png" width="764"></p> 
<p><br> ä¸€æ£µAVLæ ‘æˆ–è€…æ˜¯ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„äºŒå‰æœç´¢æ ‘ï¼š</p> 
<ul><li>å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘</li><li>å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®(ç®€ç§°å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(-1/0/1)</li><li><span style="color:#fe2c24;">é«˜åº¦ä¹‹å·® == å³æ ‘é«˜åº¦ - å·¦æ ‘é«˜åº¦</span>(åšä¸»å®ç°AVLæ ‘ä»¥è¿™ä¸ªä¸ºæ ‡å‡†)</li></ul> 
<p><img alt="" height="308" src="https://images2.imgbox.com/67/d2/Mu37yUip_o.png" width="570"></p> 
<p>å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘ã€‚å¦‚æœå®ƒæœ‰nä¸ªç»“ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨</p> 
<p>O(log2 n)ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O(log2 n)ã€‚</p> 
<h3 id="1.2%20AVL%E6%A0%91%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%9A%E4%B9%89">1.2 AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰</h3> 
<p>AVLæ ‘çš„èŠ‚ç‚¹å®šä¹‰çš„æˆå‘˜å˜é‡ï¼š</p> 
<ul><li>å­˜å‚¨å€¼ï¼šæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„å€¼ã€‚</li><li>å·¦èŠ‚ç‚¹æŒ‡é’ˆï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li><li>å³èŠ‚ç‚¹æŒ‡é’ˆï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å³èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li><li>åŒäº²èŠ‚ç‚¹æŒ‡é’ˆï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„åŒäº²èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚æ ¹èŠ‚ç‚¹çš„åŒäº²èŠ‚ç‚¹æŒ‡é’ˆä¸ºç©ºã€‚</li><li>å¹³è¡¡å› å­ï¼šè¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘é«˜åº¦å’Œå·¦å­æ ‘é«˜åº¦ä¹‹å·®ã€‚å¹³è¡¡å› å­å¯ä»¥ä¸º-1ã€0æˆ–1ã€‚</li></ul> 
<p><br><strong>AVLæ ‘èŠ‚ç‚¹çš„å®šä¹‰ï¼šÂ </strong></p> 
<pre><code>template&lt;class K,class V&gt;
struct AVLTreeNode
{
	AVLTreeNode&lt;K, V&gt;* _left;// å·¦å­©å­
	AVLTreeNode&lt;K, V&gt;* _right;// å³å­©å­
	AVLTreeNode&lt;K, V&gt;* _parent;// åŒäº²
	pair&lt;K, V&gt; _kv;

	int _bf;// balance factor å¹³è¡¡å› å­

	AVLTreeNode(const pair&lt;K,V&gt;&amp; kv)
		:_left(nullptr)
		,_right(nullptr)
		,_parent(nullptr)
		,_kv(kv)
		,_bf(0)
	{}
};</code></pre> 
<p><strong>AVLæ ‘åŸºæœ¬ç»“æ„çš„å®šä¹‰ï¼š</strong></p> 
<pre><code>template&lt;class K,class V&gt;
class AVLTree
{
    // é‡å‘½åç»“ç‚¹
	typedef AVLTreeNode&lt;K, V&gt; Node;
public:
    // æ’å…¥
	bool Insert(const pair&lt;K,V&gt;&amp; kv);
    // åˆ¤å¹³è¡¡
	bool IsBalance()
    // æ±‚é«˜åº¦
	int Height()
    // æ±‚ç»“ç‚¹ä¸ªæ•°
	int Size()
    // æŸ¥æ‰¾
	Node* Find(const K&amp; key)
    // ä¸­åºéå†
	void InOrder()
private:
    // ç»“ç‚¹æˆå‘˜
	Node* _root = nullptr;
};</code></pre> 
<p></p> 
<h3 id="1.3%20AVL%E6%A0%91%E7%9A%84%E6%8F%92%E5%85%A5">1.3 AVLæ ‘çš„æ’å…¥</h3> 
<p>AVLæ ‘å°±æ˜¯åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸Šå¼•å…¥äº†å¹³è¡¡å› å­ï¼Œå› æ­¤AVLæ ‘ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯äºŒå‰æœç´¢æ ‘ã€‚é‚£ä¹ˆ<br> AVLæ ‘çš„æ’å…¥è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸¤æ­¥ï¼š</p> 
<ul><li>1. æŒ‰ç…§äºŒå‰æœç´¢æ ‘çš„æ–¹å¼æ’å…¥æ–°èŠ‚ç‚¹</li><li>2. è°ƒæ•´èŠ‚ç‚¹çš„å¹³è¡¡å› å­</li></ul> 
<p><span style="background-color:#f9eda6;">æŒ‰ç…§æœç´¢æ ‘è§„åˆ™æ’å…¥èŠ‚ç‚¹</span></p> 
<pre><code>bool Insert(const pair&lt;K,V&gt;&amp; kv)
{
    // 1. å…ˆæŒ‰ç…§äºŒå‰æœç´¢æ ‘çš„è§„åˆ™å°†èŠ‚ç‚¹æ’å…¥åˆ°AVLæ ‘ä¸­
	if (_root == nullptr)
	{
		_root = new Node(kv);
		return true;
	}

	Node* parent = nullptr;
	Node* cur = _root;
	while (cur)
	{
		// æ’å…¥å€¼æ›´å¤§åˆ™æ’å…¥åˆ°å³è¾¹
		// .ä¼˜å…ˆçº§é«˜äº-&gt;
		if (cur-&gt;_kv.first &lt; kv.first)
		{
			parent = cur;
			cur = cur-&gt;_right;
		}
		// å°åˆ™åœ¨å·¦è¾¹
		else if (cur-&gt;_kv.first &gt; kv.first)
		{
			parent = cur;
			cur = cur-&gt;_left;
		}
		// äºŒå‰æœç´¢æ ‘é»˜è®¤ä¸èƒ½å†—ä½™ï¼Œå› æ­¤ç›¸ç­‰åˆ™è¿”å›false
		else
		{
			return false;
		}
	}
	// ä¸ºç©ºåˆ™æ‰¾åˆ°æ’å…¥ä½ç½® éœ€è¦å…ˆæ‰¾åˆ°çˆ¶äº²çš„ä½ç½®
	// keyå€¼å¤§äºçˆ¶äº²çš„å€¼åˆ™åœ¨å³ä¾§
	cur = new Node(kv);
	if (parent-&gt;_kv.first &lt; kv.first)
	{
		parent-&gt;_right = cur;
	}
	else
	{
		parent-&gt;_left = cur;
	}
     // é“¾æ¥åŒäº²ç»“ç‚¹ï¼Œæœç´¢äºŒå‰æ ‘æ²¡æœ‰åŒäº²ç»“ç‚¹
	cur-&gt;_parent = parent;
    //...
}</code></pre> 
<p><span style="background-color:#f9eda6;">æ›´æ–°æ’å…¥èŠ‚ç‚¹çš„å¹³è¡¡å› å­</span></p> 
<blockquote> 
 <p><strong>curæ’å…¥åï¼Œparentçš„å¹³è¡¡å› å­ä¸€å®šéœ€è¦è°ƒæ•´ï¼Œåœ¨æ’å…¥ä¹‹å‰ï¼Œparentçš„å¹³è¡¡å› å­åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š-1ï¼Œ0, 1, åˆ†ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</strong></p> 
 <ul><li>Â 1. å¦‚æœcuræ’å…¥åˆ°pParentçš„å·¦ä¾§ï¼Œåªéœ€ç»™parentçš„å¹³è¡¡å› å­-1å³å¯</li><li>Â 2. å¦‚æœcuræ’å…¥åˆ°pParentçš„å³ä¾§ï¼Œåªéœ€ç»™parentçš„å¹³è¡¡å› å­+1å³å¯</li></ul> 
 <p>Â <br><strong>æ­¤æ—¶ï¼šparentçš„å¹³è¡¡å› å­å¯èƒ½æœ‰ä¸‰ç§æƒ…å†µï¼š0ï¼Œæ­£è´Ÿ1ï¼Œ æ­£è´Ÿ2</strong></p> 
 <ul><li>Â 1. å¦‚æœparentçš„å¹³è¡¡å› å­ä¸º0ï¼Œè¯´æ˜æ’å…¥ä¹‹å‰parentçš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ1ï¼Œæ’å…¥åè¢«è°ƒæ•´æˆ0ï¼Œæ­¤æ—¶æ»¡è¶³AVLæ ‘çš„æ€§è´¨ï¼Œæ’å…¥æˆåŠŸ</li><li>Â 2. å¦‚æœparentçš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ1ï¼Œè¯´æ˜æ’å…¥å‰parentçš„å¹³è¡¡å› å­ä¸€å®šä¸º0ï¼Œæ’å…¥åè¢«æ›´æ–°æˆæ­£è´Ÿ1ï¼Œæ­¤æ—¶ä»¥parentä¸ºæ ¹çš„æ ‘çš„é«˜åº¦å¢åŠ ï¼Œéœ€è¦ç»§ç»­å‘ä¸Šæ›´æ–°</li><li>Â 3. å¦‚æœparentçš„å¹³è¡¡å› å­ä¸ºæ­£è´Ÿ2ï¼Œåˆ™parentçš„å¹³è¡¡å› å­è¿åå¹³è¡¡æ ‘çš„æ€§è´¨ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œæ—‹è½¬å¤„ç†</li></ul> 
</blockquote> 
<p><img alt="" height="642" src="https://images2.imgbox.com/ba/10/6BWwd7Rb_o.png" width="1200"></p> 
<p></p> 
<pre><code>bool Insert(const pair&lt;K,V&gt;&amp; kv)
{
    // 2. æ–°èŠ‚ç‚¹æ’å…¥åï¼ŒAVLæ ‘çš„å¹³è¡¡æ€§å¯èƒ½ä¼šé­åˆ°ç ´åï¼Œæ­¤æ—¶å°±éœ€è¦æ›´æ–°å¹³è¡¡å› å­ï¼Œå¹¶æ£€æµ‹æ˜¯å¦ç ´åäº†AVLæ ‘çš„å¹³è¡¡æ€§
	// æ›´æ–°å¹³è¡¡å› å­
	while (parent)// æœ€åæƒ…å†µä¸ºç©ºç»“æŸå¾ªç¯
	{
		// æ’å…¥çˆ¶äº²çš„å·¦è¾¹ï¼Œçˆ¶äº²çš„å¹³è¡¡å› å­--
		if (cur == parent-&gt;_left)
		{
			parent-&gt;_bf--;
		}
		// æ’å…¥çˆ¶äº²çš„å³è¾¹ï¼Œçˆ¶äº²çš„å¹³è¡¡å› å­++
		else
		{
			parent-&gt;_bf++;
		}

		// åˆ¤æ–­çˆ¶äº²çš„å¹³è¡¡å› å­çš„æƒ…å†µ

		// å¹³è¡¡å› å­ä¸º0ï¼Œæ ‘é«˜åº¦æ²¡å˜ï¼Œä¸å†æ›´æ–°
		if (parent-&gt;_bf == 0)
		{
			break;
		}
		// çˆ¶äº²çš„å­æ ‘é«˜åº¦å˜äº†ï¼Œéœ€è¦ç»§ç»­æ›´æ–°å¹³è¡¡å› å­
		else if (parent-&gt;_bf == 1 || parent-&gt;_bf == -1)
		{
			cur = parent;
			parent = parent-&gt;_parent;
		}
		// çˆ¶äº²æ‰€åœ¨çš„å­æ ‘é«˜åº¦ä¸å¹³è¡¡ï¼Œéœ€è¦æ—‹è½¬å¤„ç†
		else if (parent-&gt;_bf == 2 || parent-&gt;_bf == -2)
		{
			// æ—‹è½¬
		}
		// ç†è®ºä¸Šä¸å¯èƒ½å‡ºç°è¯¥æƒ…å†µ
		else
		{
			assert(false);
		}
	}
	return true;
}</code></pre> 
<h3 id="1.4%20AVL%E6%A0%91%E7%9A%84%E6%97%8B%E8%BD%AC">1.4 AVLæ ‘çš„æ—‹è½¬</h3> 
<p><br> å¦‚æœåœ¨ä¸€æ£µåŸæœ¬æ˜¯å¹³è¡¡çš„AVLæ ‘ä¸­æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¯èƒ½é€ æˆä¸å¹³è¡¡ï¼Œæ­¤æ—¶å¿…é¡»è°ƒæ•´æ ‘çš„ç»“æ„ï¼Œ<br> ä½¿ä¹‹å¹³è¡¡åŒ–ã€‚æ ¹æ®èŠ‚ç‚¹æ’å…¥ä½ç½®çš„ä¸åŒï¼ŒAVLæ ‘çš„æ—‹è½¬åˆ†ä¸ºå››ç§ï¼š</p> 
<p><br><strong>1. æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å·¦å­æ ‘çš„å·¦ä¾§---å·¦å·¦ï¼šå³å•æ—‹</strong></p> 
<p><span style="background-color:#f9eda6;">æŠ½è±¡å›¾</span></p> 
<p><img alt="" height="317" src="https://images2.imgbox.com/90/3a/XvPrxTkf_o.png" width="1072"></p> 
<p><span style="background-color:#f9eda6;">Â å…·è±¡å›¾</span></p> 
<p><img alt="" height="687" src="https://images2.imgbox.com/3f/9a/eUeNgux0_o.png" width="1200"></p> 
<blockquote> 
 <p>ä¸Šå›¾åœ¨æ’å…¥å‰ï¼ŒAVLæ ‘æ˜¯å¹³è¡¡çš„ï¼Œæ–°èŠ‚ç‚¹æ’å…¥åˆ°30çš„å·¦å­æ ‘(æ³¨æ„ï¼šæ­¤å¤„ä¸æ˜¯å·¦å­©å­)ä¸­ï¼Œ30å·¦å­æ ‘å¢åŠ äº†ä¸€å±‚ï¼Œå¯¼è‡´ä»¥60ä¸ºæ ¹çš„äºŒå‰æ ‘ä¸å¹³è¡¡ï¼Œè¦è®©60å¹³è¡¡ï¼Œåªèƒ½å°†60å·¦å­æ ‘çš„é«˜åº¦å‡å°‘ä¸€å±‚ï¼Œå³å­æ ‘å¢åŠ ä¸€å±‚ï¼Œå³å°†å·¦å­æ ‘å¾€ä¸Šæï¼Œè¿™æ ·60è½¬ä¸‹æ¥ï¼Œå› ä¸º60æ¯”30å¤§ï¼Œåªèƒ½å°†å…¶æ”¾åœ¨30çš„å³å­æ ‘ï¼Œè€Œå¦‚æœ30æœ‰å³å­æ ‘ï¼Œå³å­æ ‘æ ¹çš„å€¼ä¸€å®šå¤§äº30ï¼Œå°äº60ï¼Œåªèƒ½å°†å…¶æ”¾åœ¨60çš„å·¦å­æ ‘ï¼Œæ—‹è½¬å®Œæˆåï¼Œæ›´æ–°èŠ‚ç‚¹çš„å¹³è¡¡å› å­å³å¯ã€‚åœ¨æ—‹è½¬è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µéœ€è¦è™‘ï¼š</p> 
 <p><strong>Â 1. 30èŠ‚ç‚¹çš„å³å­©å­å¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨</strong></p> 
 <p><strong>Â 2. 60å¯èƒ½æ˜¯æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å­æ ‘</strong></p> 
 <ul><li>Â å¦‚æœæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ—‹è½¬å®Œæˆåï¼Œè¦æ›´æ–°æ ¹èŠ‚ç‚¹</li><li>Â å¦‚æœæ˜¯å­æ ‘ï¼Œå¯èƒ½æ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œä¹Ÿå¯èƒ½æ˜¯å³å­æ ‘Â </li></ul> 
</blockquote> 
<p><span style="background-color:#ffd900;">ä»£ç Â </span></p> 
<pre><code>// å³å•æ—‹ å·¦è¾¹è¾ƒé«˜
void RotateR(Node* parent)
{
	Node* subL = parent-&gt;_left;
	Node* subLR = subL-&gt;_right;

	// æ›´æ–°parent
	parent-&gt;_left = subLR;
	// subLRä¸ä¸ºç©ºåˆ™æ›´æ–°çˆ¶äº²ï¼ŒsubLRä¸º30çš„å³å­©å­
	if (subLR)
		subLR-&gt;_parent = parent;

	subL-&gt;_right = parent;//xxx

	// æå‰å­˜parentçš„çˆ¶äº²
	Node* ppNode = parent-&gt;_parent;
	parent-&gt;_parent = subL;

	// parentä¸ºæ ¹èŠ‚ç‚¹
	if (parent == _root)
	{
		_root = subL;
		_root-&gt;_parent = nullptr;
	}
	else
	{
		// parentä¸ºppNodeçš„å·¦ç»“ç‚¹
		if (parent == ppNode-&gt;_left)
		{
			ppNode-&gt;_left = subL;
		}
		else
		{
			ppNode-&gt;_right = subL;
		}

		subL-&gt;_parent = ppNode;
	}
	// æ›´æ–°å¹³è¡¡å› å­
	subL-&gt;_bf = parent-&gt;_bf = 0;
}</code></pre> 
<p><img alt="" height="377" src="https://images2.imgbox.com/4f/43/47f5Bbc9_o.png" width="1061"></p> 
<p></p> 
<p><strong>2. æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å³å­æ ‘çš„å³ä¾§---å³å³ï¼šå·¦å•æ—‹</strong></p> 
<p><img alt="" height="450" src="https://images2.imgbox.com/5c/17/jGVVouhR_o.png" width="1014"></p> 
<blockquote> 
 <p><strong>Â 1. 60èŠ‚ç‚¹çš„å·¦å­©å­å¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨</strong></p> 
 <p><strong>Â 2. 30å¯èƒ½æ˜¯æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å­æ ‘</strong></p> 
 <ul><li>Â å¦‚æœæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ—‹è½¬å®Œæˆåï¼Œè¦æ›´æ–°æ ¹èŠ‚ç‚¹</li><li>Â å¦‚æœæ˜¯å­æ ‘ï¼Œå¯èƒ½æ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œä¹Ÿå¯èƒ½æ˜¯å³å­æ ‘Â </li></ul> 
</blockquote> 
<p><span style="background-color:#f9eda6;">ä»£ç Â </span></p> 
<pre><code>// å·¦å•æ—‹ å³è¾¹è¾ƒé«˜
void RotateL(Node* parent)
{
	Node* subR = parent-&gt;_right;
	Node* subRL = subR-&gt;_left;

	// æ›´æ–°parent
	parent-&gt;_right = subRL;
	// subRLä¸ä¸ºç©ºï¼ŒsubRLä¸º60çš„å·¦å­©å­
	if (subRL)
		subRL-&gt;_parent = parent;

	subR-&gt;_left = parent;
	// æå‰å­˜parentçš„çˆ¶ç»“ç‚¹
	Node* ppNode = parent-&gt;_parent;
	parent-&gt;_parent = subR;

	// parentä¸ºæ ¹èŠ‚ç‚¹
	if (parent == _root)
	{
		_root = subR;
		_root-&gt;_parent = nullptr;
	}
	else
	{
		// å·¦
		if (parent == ppNode-&gt;_right)
		{
			ppNode-&gt;_right = subR;
		}
		else
		{
			ppNode-&gt;_left = subR;
		}
		subR-&gt;_parent = ppNode;
	}

	// å¹³è¡¡å› å­
	subR-&gt;_bf = parent-&gt;_bf = 0;
}</code></pre> 
<p></p> 
<p><strong>3. æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å·¦å­æ ‘çš„å³ä¾§---å·¦å³ï¼šå…ˆå·¦å•æ—‹å†å³å•æ—‹</strong></p> 
<p><span style="background-color:#f9eda6;">æŠ½è±¡å›¾</span></p> 
<p><strong>åœ¨ b å­æ ‘ä¸­æ’å…¥</strong></p> 
<p><img alt="" height="674" src="https://images2.imgbox.com/e2/17/zcL2AlTP_o.png" width="1200"></p> 
<p><strong>åœ¨ c å­æ ‘ä¸­æ’å…¥Â </strong></p> 
<p><img alt="" height="640" src="https://images2.imgbox.com/4f/c7/gka0ZPc1_o.png" width="954"></p> 
<p><span style="background-color:#f9eda6;">å…·è±¡å›¾Â </span></p> 
<p>Â <img alt="" height="827" src="https://images2.imgbox.com/dd/33/vPhZA99Z_o.png" width="1200"></p> 
<blockquote> 
 <p>å°†åŒæ—‹å˜æˆå•æ—‹åå†æ—‹è½¬ï¼Œå³ï¼š<span style="color:#fe2c24;">å…ˆå¯¹30è¿›è¡Œå·¦å•æ—‹ï¼Œç„¶åå†å¯¹90è¿›è¡Œå³å•æ—‹ï¼Œæ—‹è½¬å®Œæˆåå†<br> è€ƒè™‘å¹³è¡¡å› å­çš„æ›´æ–°ã€‚Â </span></p> 
</blockquote> 
<pre><code>// å·¦å³å•æ—‹
void RotateLR(Node* parent)
{
	Node* subL = parent-&gt;_left;
	Node* subLR = subL-&gt;_right;

	int bf = subLR-&gt;_bf;
	// å…ˆå¯¹å·¦å­©å­å·¦å•æ—‹
	RotateL(parent-&gt;_left);
	// å†å¯¹parentå³å•æ—‹
	RotateR(parent);

	if (bf == -1)
	{
		subLR-&gt;_bf = 0;
		subL-&gt;_bf = 0;
		parent-&gt;_bf = 1;
	}
	else if (bf == 1)
	{
		subLR-&gt;_bf = 0;
		parent-&gt;_bf = 0;
		subL-&gt;_bf = -1;
	}
	else if (bf == 0)
	{
		subLR-&gt;_bf = 0;
		parent-&gt;_bf = 0;
		subL-&gt;_bf = 0;
	}
	else
	{
		assert(false);
	}
}</code></pre> 
<p></p> 
<p><strong>4. æ–°èŠ‚ç‚¹æ’å…¥è¾ƒé«˜å³å­æ ‘çš„å·¦ä¾§---å³å·¦ï¼šå…ˆå³å•æ—‹å†å·¦å•æ—‹</strong></p> 
<p><span style="background-color:#f9eda6;">æŠ½è±¡å›¾</span></p> 
<p><strong>åœ¨c å­æ ‘ä¸­æ’å…¥</strong></p> 
<p><img alt="" height="678" src="https://images2.imgbox.com/81/a8/CgN5ANSJ_o.png" width="1200"></p> 
<p><strong>åœ¨ b å­æ ‘ä¸­æ’å…¥Â </strong></p> 
<p><img alt="" height="689" src="https://images2.imgbox.com/29/a5/dzwDmVOI_o.png" width="987"></p> 
<p><span style="background-color:#f9eda6;">å…·è±¡å›¾Â </span></p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/42/e6/eaAabN4x_o.png" width="915"></p> 
<blockquote> 
 <p>å°†åŒæ—‹å˜æˆå•æ—‹åå†æ—‹è½¬ï¼Œå³ï¼š<span style="color:#fe2c24;">å…ˆå¯¹90è¿›è¡Œå³å•æ—‹ï¼Œç„¶åå†å¯¹30è¿›è¡Œå·¦å•æ—‹ï¼Œæ—‹è½¬å®Œæˆåå†<br> è€ƒè™‘å¹³è¡¡å› å­çš„æ›´æ–°ã€‚Â </span>Â </p> 
</blockquote> 
<pre><code>void RotateRL(Node* parent)
{
	Node* subR = parent-&gt;_right;
	Node* subRL = subR-&gt;_left;

	int bf = subRL-&gt;_bf;//å†³å®šæœ€ç»ˆå¹³è¡¡å› å­çš„æƒ…å†µ

	// å…ˆå¯¹å³å­©å­å³å•æ—‹
	RotateR(parent-&gt;_right);
	// å†å¯¹è‡ªå·±å·¦å•æ—‹
	RotateL(parent);

	if (bf == 1)
	{
		subRL-&gt;_bf = 0;
		subR-&gt;_bf = 0;
		parent-&gt;_bf = -1;
	}
	else if (bf == -1)
	{
		subRL-&gt;_bf = 0;
		subR-&gt;_bf = 1;
		parent-&gt;_bf = 0;
	}
	else if (bf == 0)
	{
		subRL-&gt;_bf = 0;
		subR-&gt;_bf = 0;
		parent-&gt;_bf = 0;
	}
	else
	{
		assert(false);
	}
}</code></pre> 
<p><span style="color:#fe2c24;">Â æ³¨æ„ï¼šåŒæ—‹ä¹‹åéœ€è¦è°ƒèŠ‚æ ¹æ®æƒ…å†µè°ƒèŠ‚å¹³è¡¡å› å­ï¼Œå•æ—‹ä¹‹åå¹³è¡¡å› å­éƒ½ä¸º0ã€‚</span></p> 
<p><strong>æ€»ç»“ï¼š</strong><br> å‡å¦‚ä»¥parentä¸ºæ ¹çš„å­æ ‘ä¸å¹³è¡¡ï¼Œå³parentçš„å¹³è¡¡å› å­ä¸º2æˆ–è€…-2ï¼Œåˆ†ä»¥ä¸‹æƒ…å†µè€ƒè™‘<br><strong>1. parentçš„å¹³è¡¡å› å­ä¸º2ï¼Œè¯´æ˜parentçš„å³å­æ ‘é«˜ï¼Œè®¾parentçš„å³å­æ ‘çš„æ ¹ä¸ºSubR</strong></p> 
<ul><li>å½“SubRçš„å¹³è¡¡å› å­ä¸º1æ—¶ï¼Œæ‰§è¡Œå·¦å•æ—‹</li><li>å½“SubRçš„å¹³è¡¡å› å­ä¸º-1æ—¶ï¼Œæ‰§è¡Œå³å·¦åŒæ—‹</li></ul> 
<p><strong>2. parentçš„å¹³è¡¡å› å­ä¸º-2ï¼Œè¯´æ˜parentçš„å·¦å­æ ‘é«˜ï¼Œè®¾parentçš„å·¦å­æ ‘çš„æ ¹ä¸ºSubL</strong></p> 
<ul><li>å½“SubLçš„å¹³è¡¡å› å­ä¸º-1æ˜¯ï¼Œæ‰§è¡Œå³å•æ—‹</li><li>å½“SubLçš„å¹³è¡¡å› å­ä¸º1æ—¶ï¼Œæ‰§è¡Œå·¦å³åŒæ—‹</li></ul> 
<p>æ—‹è½¬å®Œæˆåï¼ŒåŸparentä¸ºæ ¹çš„å­æ ‘ä¸ªé«˜åº¦é™ä½ï¼Œå·²ç»å¹³è¡¡ï¼Œä¸éœ€è¦å†å‘ä¸Šæ›´æ–°ã€‚Â </p> 
<h3 id="1.5%20AVL%E6%A0%91%E7%9A%84%E9%AA%8C%E8%AF%81">1.5 AVLæ ‘çš„éªŒè¯</h3> 
<p><br> AVLæ ‘æ˜¯åœ¨äºŒå‰æœç´¢æ ‘çš„åŸºç¡€ä¸ŠåŠ å…¥äº†å¹³è¡¡æ€§çš„é™åˆ¶ï¼Œå› æ­¤è¦éªŒè¯AVLæ ‘ï¼Œå¯ä»¥åˆ†ä¸¤æ­¥ï¼š<br><strong>1. éªŒè¯å…¶ä¸ºäºŒå‰æœç´¢æ ‘</strong></p> 
<ul><li>å¦‚æœä¸­åºéå†å¯å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—ï¼Œå°±è¯´æ˜ä¸ºäºŒå‰æœç´¢æ ‘</li></ul> 
<p><strong>2. éªŒè¯å…¶ä¸ºå¹³è¡¡æ ‘</strong></p> 
<ul><li>æ¯ä¸ªèŠ‚ç‚¹å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1(æ³¨æ„èŠ‚ç‚¹ä¸­å¦‚æœæ²¡æœ‰å¹³è¡¡å› å­)</li><li>èŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯å¦è®¡ç®—æ­£ç¡®</li></ul> 
<p><strong><span style="color:#0d0016;">é«˜åº¦è®¡ç®—</span></strong></p> 
<pre><code>int _Height(Node* root)
{
	if (root == nullptr)
		return 0;
	// å·¦å³å­æ ‘è¾ƒé«˜æ ‘çš„é«˜åº¦+1
	return max(_Height(root-&gt;_left), _Height(root-&gt;_right)) + 1;
}</code></pre> 
<p><span style="color:#0d0016;"><strong>åˆ¤æ–­å¹³è¡¡</strong></span></p> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong>1.ç©ºæ ‘åˆ™æ»¡è¶³å¹³è¡¡æœç´¢äºŒå‰æ ‘</strong></span></p> 
 <p><span style="color:#0d0016;"><strong>2.åˆ¤æ–­å½“å‰ç»“ç‚¹é«˜åº¦å·®çš„ç»å¯¹å€¼æ˜¯å¦å°äºç­‰äº1</strong></span></p> 
 <p><span style="color:#0d0016;"><strong>3.æ£€æŸ¥å¹³è¡¡å› å­æ˜¯å¦æ­£ç¡®</strong></span></p> 
 <p><span style="color:#0d0016;"><strong>4.ç»§ç»­åˆ¤æ–­å·¦å­æ ‘ä¸å³å­æ ‘</strong></span></p> 
</blockquote> 
<pre><code>bool _IsBalance(Node* root)
{
	if (root == nullptr)
		return true;
	int leftHeight = _Height(root-&gt;_left);
	int rightHeight = _Height(root-&gt;_right);

	// ä¸å¹³è¡¡èƒ½ç›´æ¥è¿”å›ç»“æœ
	if (abs(leftHeight - rightHeight) &gt;= 2)
		return false;

	// é¡ºä¾¿æ£€æŸ¥ä¸€ä¸‹å¹³è¡¡å› å­æ˜¯å¦æ­£ç¡®
	if (rightHeight - leftHeight != root-&gt;_bf)
	{
		cout &lt;&lt; root-&gt;_kv.first &lt;&lt; endl;
		return false;
	}

	return _IsBalance(root-&gt;_left)
		&amp;&amp; _IsBalance(root-&gt;_right);
}</code></pre> 
<h3>1.7 AVLæ ‘çš„æ€§èƒ½</h3> 
<p><br> AVLæ ‘æ˜¯ä¸€æ£µç»å¯¹å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå…¶è¦æ±‚<span style="color:#0d0016;"><strong>æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼éƒ½ä¸è¶…è¿‡1</strong></span>ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æŸ¥è¯¢æ—¶é«˜æ•ˆçš„æ—¶é—´å¤æ‚åº¦ï¼Œå³<span style="color:#ed7976;"><span style="background-color:#fbd4d0;">log2 N</span></span>ã€‚ä½†æ˜¯å¦‚æœè¦å¯¹AVLæ ‘åšä¸€äº›ç»“æ„ä¿®æ”¹çš„æ“ä½œï¼Œæ€§èƒ½éå¸¸ä½ä¸‹ï¼Œæ¯”å¦‚ï¼šæ’å…¥æ—¶è¦ç»´æŠ¤å…¶ç»å¯¹å¹³è¡¡ï¼Œæ—‹è½¬çš„æ¬¡æ•°æ¯”è¾ƒå¤šï¼Œæ›´å·®çš„æ˜¯åœ¨åˆ é™¤æ—¶ï¼Œæœ‰å¯èƒ½ä¸€ç›´è¦è®©æ—‹è½¬æŒç»­åˆ°æ ¹çš„ä½ç½®ã€‚å› æ­¤ï¼šå¦‚æœ<span style="background-color:#f9eda6;">éœ€è¦ä¸€ç§æŸ¥è¯¢é«˜æ•ˆä¸”æœ‰åºçš„æ•°æ®ç»“æ„ï¼Œè€Œä¸”æ•°æ®çš„ä¸ªæ•°ä¸ºé™æ€çš„(å³ä¸ä¼šæ”¹å˜)</span>ï¼Œ<span style="background-color:#fbd4d0;">å¯ä»¥è€ƒè™‘AVLæ ‘</span>ï¼Œä½†ä¸€ä¸ªç»“æ„ç»å¸¸ä¿®æ”¹ï¼Œå°±ä¸å¤ªé€‚åˆã€‚Â </p> 
<p></p> 
<h3><span style="color:#0d0016;"><strong>1.8 AVLæ ‘å®Œæ•´ä»£ç </strong></span></h3> 
<pre><code>template&lt;class K,class V&gt;
struct AVLTreeNode
{
	AVLTreeNode&lt;K, V&gt;* _left;
	AVLTreeNode&lt;K, V&gt;* _right;
	AVLTreeNode&lt;K, V&gt;* _parent;
	pair&lt;K, V&gt; _kv;

	int _bf;// balance factor

	AVLTreeNode(const pair&lt;K,V&gt;&amp; kv)
		:_left(nullptr)
		,_right(nullptr)
		,_parent(nullptr)
		,_kv(kv)
		,_bf(0)
	{}
};

template&lt;class K,class V&gt;
class AVLTree
{
	typedef AVLTreeNode&lt;K, V&gt; Node;
public:
	bool Insert(const pair&lt;K,V&gt;&amp; kv)
	{
		if (_root == nullptr)
		{
			_root = new Node(kv);
			return true;
		}

		Node* parent = nullptr;
		Node* cur = _root;
		while (cur)
		{
			// æ’å…¥å€¼æ›´å¤§åˆ™æ’å…¥åˆ°å³è¾¹
			// .ä¼˜å…ˆçº§é«˜äº-&gt;
			if (cur-&gt;_kv.first &lt; kv.first)
			{
				parent = cur;
				cur = cur-&gt;_right;
			}
			// å°åˆ™åœ¨å·¦è¾¹
			else if (cur-&gt;_kv.first &gt; kv.first)
			{
				parent = cur;
				cur = cur-&gt;_left;
			}
			// äºŒå‰æœç´¢æ ‘é»˜è®¤ä¸èƒ½å†—ä½™ï¼Œå› æ­¤ç›¸ç­‰åˆ™è¿”å›false
			else
			{
				return false;
			}
		}
		// ä¸ºç©ºåˆ™æ‰¾åˆ°æ’å…¥ä½ç½® éœ€è¦å…ˆæ‰¾åˆ°çˆ¶äº²çš„ä½ç½®
		// keyå€¼å¤§äºçˆ¶äº²çš„å€¼åˆ™åœ¨å³ä¾§
		cur = new Node(kv);
		if (parent-&gt;_kv.first &lt; kv.first)
		{
			parent-&gt;_right = cur;
		}
		else
		{
			parent-&gt;_left = cur;
		}
		cur-&gt;_parent = parent;

		// æ›´æ–°å¹³è¡¡å› å­
		while (parent)// æœ€åæƒ…å†µä¸ºç©ºç»“æŸå¾ªç¯
		{
			// æ’å…¥çˆ¶äº²çš„å·¦è¾¹ï¼Œçˆ¶äº²çš„å¹³è¡¡å› å­--
			if (cur == parent-&gt;_left)
			{
				parent-&gt;_bf--;
			}
			// æ’å…¥çˆ¶äº²çš„å³è¾¹ï¼Œçˆ¶äº²çš„å¹³è¡¡å› å­++
			else
			{
				parent-&gt;_bf++;
			}

			// åˆ¤æ–­çˆ¶äº²çš„å¹³è¡¡å› å­çš„æƒ…å†µ
	
			// å¹³è¡¡å› å­ä¸º0ï¼Œæ ‘é«˜åº¦æ²¡å˜ï¼Œä¸å†æ›´æ–°
			if (parent-&gt;_bf == 0)
			{
				break;
			}
			// çˆ¶äº²çš„å­æ ‘é«˜åº¦å˜äº†ï¼Œéœ€è¦ç»§ç»­æ›´æ–°å¹³è¡¡å› å­
			else if (parent-&gt;_bf == 1 || parent-&gt;_bf == -1)
			{
				cur = parent;
				parent = parent-&gt;_parent;
			}
			// çˆ¶äº²æ‰€åœ¨çš„å­æ ‘é«˜åº¦ä¸å¹³è¡¡ï¼Œéœ€è¦æ—‹è½¬å¤„ç†
			else if (parent-&gt;_bf == 2 || parent-&gt;_bf == -2)
			{
				// å³å•æ—‹
				if (parent-&gt;_bf == -2 &amp;&amp; cur-&gt;_bf == -1)
				{
					RotateR(parent);
				}
				// å·¦å•æ—‹
				else if (parent-&gt;_bf == 2 &amp;&amp; cur-&gt;_bf == 1)
				{
					RotateL(parent);
				}
				// å³å·¦å•æ—‹ å³é«˜ å·¦é«˜
				else if (parent-&gt;_bf == 2 &amp;&amp; cur-&gt;_bf == -1)
				{
					RotateRL(parent);
				}
				// å·¦å³å•æ—‹ å·¦é«˜ å³é«˜
				else if (parent-&gt;_bf == -2 &amp;&amp; cur-&gt;_bf == 1)
				{
					RotateLR(parent);
				}

				break;// è·³å‡ºå¾ªç¯ï¼Œæ—‹è½¬ä¹‹åä¸€å®šå¹³è¡¡
			}
			// ç†è®ºä¸Šä¸å¯èƒ½å‡ºç°è¯¥æƒ…å†µ
			else
			{
				assert(false);
			}
		}
		return true;
	}
	// å³å•æ—‹ å·¦è¾¹è¾ƒé«˜
	void RotateR(Node* parent)
	{
		Node* subL = parent-&gt;_left;
		Node* subLR = subL-&gt;_right;

		// æ›´æ–°parent
		parent-&gt;_left = subLR;
		// subLRä¸ä¸ºç©ºåˆ™æ›´æ–°çˆ¶äº²
		if (subLR)
			subLR-&gt;_parent = parent;

		subL-&gt;_right = parent;//xxx

		// æå‰å­˜parentçš„çˆ¶äº²
		Node* ppNode = parent-&gt;_parent;
		parent-&gt;_parent = subL;

		// parentä¸ºæ ¹èŠ‚ç‚¹
		if (parent == _root)
		{
			_root = subL;
			_root-&gt;_parent = nullptr;
		}
		else
		{
			// parentä¸ºppNodeçš„å·¦ç»“ç‚¹
			if (parent == ppNode-&gt;_left)
			{
				ppNode-&gt;_left = subL;
			}
			else
			{
				ppNode-&gt;_right = subL;
			}

			subL-&gt;_parent = ppNode;
		}
		// æ›´æ–°å¹³è¡¡å› å­
		subL-&gt;_bf = parent-&gt;_bf = 0;
	}
	// å·¦å•æ—‹ å³è¾¹è¾ƒé«˜
	void RotateL(Node* parent)
	{
		Node* subR = parent-&gt;_right;
		Node* subRL = subR-&gt;_left;

		// æ›´æ–°parent
		parent-&gt;_right = subRL;
		// subRLä¸ä¸ºç©º
		if (subRL)
			subRL-&gt;_parent = parent;

		subR-&gt;_left = parent;
		// æå‰å­˜parentçš„çˆ¶ç»“ç‚¹
		Node* ppNode = parent-&gt;_parent;
		parent-&gt;_parent = subR;

		// parentä¸ºæ ¹èŠ‚ç‚¹
		if (parent == _root)
		{
			_root = subR;
			_root-&gt;_parent = nullptr;
		}
		else
		{
			// å·¦
			if (parent == ppNode-&gt;_right)
			{
				ppNode-&gt;_right = subR;
			}
			else
			{
				ppNode-&gt;_left = subR;
			}
			subR-&gt;_parent = ppNode;
		}

		// å¹³è¡¡å› å­
		subR-&gt;_bf = parent-&gt;_bf = 0;
	}

	void RotateRL(Node* parent)
	{
		Node* subR = parent-&gt;_right;
		Node* subRL = subR-&gt;_left;

		int bf = subRL-&gt;_bf;//å†³å®šæœ€ç»ˆå¹³è¡¡å› å­çš„æƒ…å†µ

		// å…ˆå¯¹å³å­©å­å³å•æ—‹
		RotateR(parent-&gt;_right);
		// å†å¯¹è‡ªå·±å·¦å•æ—‹
		RotateL(parent);

		if (bf == 1)
		{
			subRL-&gt;_bf = 0;
			subR-&gt;_bf = 0;
			parent-&gt;_bf = -1;
		}
		else if (bf == -1)
		{
			subRL-&gt;_bf = 0;
			subR-&gt;_bf = 1;
			parent-&gt;_bf = 0;
		}
		else if (bf == 0)
		{
			subRL-&gt;_bf = 0;
			subR-&gt;_bf = 0;
			parent-&gt;_bf = 0;
		}
		else
		{
			assert(false);
		}
	}
	// å·¦å³å•æ—‹
	void RotateLR(Node* parent)
	{
		Node* subL = parent-&gt;_left;
		Node* subLR = subL-&gt;_right;

		int bf = subLR-&gt;_bf;
		// å…ˆå¯¹å·¦å­©å­å·¦å•æ—‹
		RotateL(parent-&gt;_left);
		// å†å¯¹parentå³å•æ—‹
		RotateR(parent);

		if (bf == -1)
		{
			subLR-&gt;_bf = 0;
			subL-&gt;_bf = 0;
			parent-&gt;_bf = 1;
		}
		else if (bf == 1)
		{
			subLR-&gt;_bf = 0;
			parent-&gt;_bf = 0;
			subL-&gt;_bf = -1;
		}
		else if (bf == 0)
		{
			subLR-&gt;_bf = 0;
			parent-&gt;_bf = 0;
			subL-&gt;_bf = 0;
		}
		else
		{
			assert(false);
		}
	}
	bool IsBalance()
	{
		return _IsBalance(_root);
	}
	int Height()
	{
		return _Height(_root);
	}
	int Size()
	{
		return _Size(_root);
	}

	Node* Find(const K&amp; key)
	{
		Node* cur = _root;
		while (cur)
		{
			if (cur-&gt;_kv.first &lt; key)
			{
				cur = cur-&gt;_right;
			}
			else if (cur-&gt;_kv.first &gt; key)
			{
				cur = cur-&gt;_left;
			}
			else
			{
				return cur;
			}
		}
		return nullptr;
	}

	void InOrder()
	{
		_InOrder(_root);
		cout &lt;&lt; endl;
	}
private:
	void _InOrder(Node* root)
	{
		if (root == nullptr)
		{
			return;
		}
		_InOrder(root-&gt;_left);
		cout &lt;&lt; root-&gt;_kv.first &lt;&lt; ":" &lt;&lt; root-&gt;_kv.second &lt;&lt; endl;
		_InOrder(root-&gt;_right);
	}
	int _Height(Node* root)
	{
		if (root == nullptr)
			return 0;
		// è¾ƒé«˜æ ‘çš„é«˜åº¦+1
		return max(_Height(root-&gt;_left), _Height(root-&gt;_right)) + 1;
	}
	int _Size(Node* root)
	{
		return root == nullptr ? 0 : _Size(root-&gt;_left) + _Size(root-&gt;_right) + 1;
	}
	bool _IsBalance(Node* root)
	{
		if (root == nullptr)
			return true;
		int leftHeight = _Height(root-&gt;_left);
		int rightHeight = _Height(root-&gt;_right);

		// ä¸å¹³è¡¡èƒ½ç›´æ¥è¿”å›ç»“æœ
		if (abs(leftHeight - rightHeight) &gt;= 2)
			return false;

		// é¡ºä¾¿æ£€æŸ¥ä¸€ä¸‹å¹³è¡¡å› å­æ˜¯å¦æ­£ç¡®
		if (rightHeight - leftHeight != root-&gt;_bf)
		{
			cout &lt;&lt; root-&gt;_kv.first &lt;&lt; endl;
			return false;
		}

		return _IsBalance(root-&gt;_left)
			&amp;&amp; _IsBalance(root-&gt;_right);
	}
private:
	Node* _root = nullptr;
};</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b28b004ea005095e8449595a8c1282ce/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Langchain pandas agent - Azure OpenAI account</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5886b57439e2de1f3f297572c8939d8b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">LearnOpenGLâ€”â€”å‡ ä½•ç€è‰²å™¨ã€å®ä¾‹åŒ–</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>