<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL表的约束 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/332fdac4d47b034f4e92311143a1bb8b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL表的约束">
  <meta property="og:description" content="文章目录 表的约束空属性defaultzerofill主键自增长唯一键(unique)外键 表的约束 在MySQL中表要有一定的约束，通过约束让我们未来插入的数据是可预期的。约束的本质是通过技术手段，倒逼程序员插入正确的数据，反过来，站在MySQL的角度，凡是插入进来的数据都是符合数据约束的。真正约束字段的是数据类型，但是数据类型约束很单一，需要有一些额外的约束，更好的保证数据的合法性，从业务逻辑角度保证数据的正确性。
空属性 两个值：null（默认的）和not null(不为空)。
数据库默认字段基本都是字段为空，但是实际开发时，尽可能保证字段不为空，因为数据为空没办法参与运算。
我们在创建表是，可以在属性后面给列属性添加not null约束，添加完之后，在插入数据时这一列就不能为空。
default 默认值：某一种数据会经常性的出现某个具体的值，可以在一开始就指定好，在需要真实数据的时候，用户可以选择性的使用默认值。默认值的生效：数据在插入的时候不给该字段赋值，就使用默认值。default一般自己不设置MySQL会默认设置以为空。所以，如果设置了not null属性在设置一个不是空的default属性，在插入是也可以不指定这一列，当然如果不设置，默认就是空，就会被not null拦截。
comment
列描述：
没有实际含义，专门用来描述字段，会根据表创建语句保存，用来给程序员或DBA来进行了解。
zerofill 我们会看到在desc后每个类型后面都有个数字，没有zerofill这个属性，括号内的数字是毫无意义的。
如果宽度小于设定的宽度，自动填充0。要注意的是，这只是最后显示的结果，在MySQL中实际存储的还是设置的那个数。
zerofill可以理解为一种格式化输出。
主键 primary key用来唯一的约束该字段里面的数据，不能重复，不能为空，一张表中最多只能有一个主键；主键所在的列通常是整数类型。
主键约束：主键对应的字段中不能重复，一旦重复，操作失败。
当表创建好以后但是没有主键的时候，可以再次追加主键。
alter table 表名 add primary key(字段列表) 删除主键
alter table 表名 drop primary key; 复合主键：
在创建表的时候，在所有字段之后，使用primary key(主键字段列表)来创建主键，如果有多个字段作为主键，可以使用复合主键。
create table tt14( -&gt; id int unsigned, -&gt; course char(10) -&gt; score tinyint unsigned default 60 comment &#39;成绩&#39;, -&gt; primary key(id, course) -- id和course为复合主键 -&gt; ); 表示值都等id和coutse都相同时才会插入失败，两者有一个不一样都会插入成功。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-05T15:54:20+08:00">
    <meta property="article:modified_time" content="2024-08-05T15:54:20+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL表的约束</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">表的约束</a></li><li><ul><li><a href="#_4" rel="nofollow">空属性</a></li><li><a href="#default_13" rel="nofollow">default</a></li><li><a href="#zerofill_22" rel="nofollow">zerofill</a></li><li><a href="#_28" rel="nofollow">主键</a></li><li><a href="#_62" rel="nofollow">自增长</a></li><li><a href="#unique_74" rel="nofollow">唯一键(unique)</a></li><li><a href="#_79" rel="nofollow">外键</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>表的约束</h2> 
<p>在MySQL中表要有一定的约束，通过约束让我们未来插入的数据是可预期的。约束的本质是通过技术手段，倒逼程序员插入正确的数据，反过来，站在MySQL的角度，凡是插入进来的数据都是符合数据约束的。真正约束字段的是数据类型，但是数据类型约束很单一，需要有一些额外的约束，更好的保证数据的合法性，从业务逻辑角度保证数据的正确性。</p> 
<h3><a id="_4"></a>空属性</h3> 
<p>两个值：null（默认的）和not null(不为空)。<br> 数据库默认字段基本都是字段为空，但是实际开发时，尽可能保证字段不为空，因为数据为空没办法参与运算。</p> 
<p>我们在创建表是，可以在属性后面给列属性添加not null约束，添加完之后，在插入数据时这一列就不能为空。</p> 
<p><img src="https://images2.imgbox.com/63/a0/v5XygoJC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="default_13"></a>default</h3> 
<p>默认值：某一种数据会经常性的出现某个具体的值，可以在一开始就指定好，在需要真实数据的时候，用户可以选择性的使用默认值。默认值的生效：数据在插入的时候不给该字段赋值，就使用默认值。default一般自己不设置MySQL会默认设置以为空。所以，如果设置了not null属性在设置一个不是空的default属性，在插入是也可以不指定这一列，当然如果不设置，默认就是空，就会被not null拦截。</p> 
<p><img src="https://images2.imgbox.com/ea/5a/iy9RX64X_o.png" alt="在这里插入图片描述"><br> <strong>comment</strong><br> 列描述：<br> 没有实际含义，专门用来描述字段，会根据表创建语句保存，用来给程序员或DBA来进行了解。</p> 
<h3><a id="zerofill_22"></a>zerofill</h3> 
<p>我们会看到在desc后每个类型后面都有个数字，没有zerofill这个属性，括号内的数字是毫无意义的。<br> 如果宽度小于设定的宽度，自动填充0。要注意的是，这只是最后显示的结果，在MySQL中实际存储的还是设置的那个数。<br> <img src="https://images2.imgbox.com/1c/e4/b3bymRsY_o.png" alt="在这里插入图片描述"><br> zerofill可以理解为一种格式化输出。</p> 
<h3><a id="_28"></a>主键</h3> 
<p>primary key用来唯一的约束该字段里面的数据，不能重复，不能为空，一张表中最多只能有一个主键；主键所在的列通常是整数类型。</p> 
<p>主键约束：主键对应的字段中不能重复，一旦重复，操作失败。</p> 
<p>当表创建好以后但是没有主键的时候，可以再次追加主键。</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>字段列表<span class="token punctuation">)</span>
</code></pre> 
<p>删除主键</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>复合主键：</strong><br> 在创建表的时候，在所有字段之后，使用primary key(主键字段列表)来创建主键，如果有多个字段作为主键，可以使用复合主键。</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> tt14<span class="token punctuation">(</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> id <span class="token keyword">int</span> <span class="token keyword">unsigned</span><span class="token punctuation">,</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> course <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> 
<span class="token operator">-</span><span class="token operator">&gt;</span> score <span class="token keyword">tinyint</span> <span class="token keyword">unsigned</span> <span class="token keyword">default</span> <span class="token number">60</span> <span class="token keyword">comment</span> <span class="token string">'成绩'</span><span class="token punctuation">,</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> course<span class="token punctuation">)</span> <span class="token comment">-- id和course为复合主键</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>表示值都等id和coutse都相同时才会插入失败，两者有一个不一样都会插入成功。</p> 
<p><img src="https://images2.imgbox.com/f2/cd/8gLpVkso_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_62"></a>自增长</h3> 
<p>auto_increment：当对应的字段，不给值，会自动的被系统触发，系统会从当前字段中已经有的最大值+1操作，得到一个新的不同的值。通常和主键搭配使用，作为逻辑主键。<br> 任何一个字段要做自增长，前提是本身是一个索引（key一栏有值），自增长字段必须是整数，一张表最多只能有一个自增长。</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> test<span class="token punctuation">(</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> id <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span>
<span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="unique_74"></a>唯一键(unique)</h3> 
<p>一张表中有往往有很多字段需要唯一性，数据不能重复，但是一张表中只能有一个主键：唯一键就可以解决表中有多个字段需要唯一性约束的问题。唯一键的本质和主键差不多，唯一键允许为空，而且可以多个为空，空字段不做唯一性比较。</p> 
<p>唯一键主要是我们的场景中需要唯一的字段不一定只有一个，比如说一个人的身份证号和电话号码，很明显这两个属性对于每一个人来说都是不一样的，所以就可以把身份证号当做主键，把电话号码设置为唯一键。</p> 
<h3><a id="_79"></a>外键</h3> 
<p>外键用于定义主表和从表之间的关系：外键约束主要定义在从表上，主表则必须是有主键约束或unique约束。当定义外键后，要求外键列数据必须在主表的主键列存在或为null。</p> 
<p>语法</p> 
<pre><code class="prism language-sql"><span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表<span class="token punctuation">(</span>列<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9f/08/GVvD99pE_o.png" alt="在这里插入图片描述"><br> 当我们对stu和myclass建立了外键约束后，stu的class_id就只能是myclass中id列的值，如果是别的MySQL就会拦截，同理如果我们想要删除是myclass中id列的值，如果stu的class_id还有对应的值，那么MySQL也会拦截不让删除。这个世界是数据很多都是相关性的，建立外键的本质其实就是把相关性交给mysql去审核了，提前告诉mysql表之间的约束关系，那么当用户插入不符合业务逻辑的数据的时候，mysql不允许你插入。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/58b54580ed3078f4b801247fe685d236/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">阿尔泰科技8路16位多功能同步模拟信号采集卡PCIe9770/1 (A/B)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e987738141367277a06efe06ae5f713/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">单片机振荡电路晶振不起振原因分析与解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>