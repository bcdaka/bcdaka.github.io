<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL 图书管理系统 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6c2c1124fcf1367d51d806ad5a23f334/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL 图书管理系统">
  <meta property="og:description" content="1.需求分析 1.1项目需求分析简介 1.1.1信息需求分析 (1) 图书信息：包括书籍编号，书籍名称，出版社，作者，库存量，出版日期，价格，库存，剩余量，类别等；
(2) 借阅证信息：包括借阅证编号，办证日期，可借数量等；
(3) 读者信息：读者编号，读者姓名，读者性别，读者电话
(4) 图书借还信息：包括图书编号，借阅证编号，读者编号，借阅日期，借阅数量，归还日期，归还数量，超期天数，罚款金额等；
1.1.2功能需求 学校图书借阅系统主要由：图书信息管理，读者信息管理，借阅证信息管理，借还信息管理，规则信息等模块组成。进入改系统后，用户可以对系统中的信息进行添加、修改、删除、查询等操作，包括以下功能：
(1) 图书信息管理模块：对图书信息进行增、删、改、查等操作；
(2) 读者信息管理模块：对读者信息进行增、删、改、查等操作；
(3) 借阅证信息管理模块：增加办卡，注销借阅卡等操作；
(4) 借还信息管理模块：进行借书、续借、还书等操作，查找出逾期的人及其逾期的天数；
(5) 操作记录管理模块：对读者的借，还，续借进行实时记录，便于管理员查找出指定读者的所有借阅记录。
(6) 规则信息管理模块：记录借书逾期的人及其逾期的天数，罚款。
1.2数据字典 1.2.1数据结构 1.数据结构：图书
含义说明：是学校图书借阅管理系统的主要数据结构，定义了图书的信息
组成：图书编号，书名，作者，出版日期，出版社，库存，剩余量，类别；
2.数据结构：读者
含义说明：是学校图书借阅管理系统的主要数据结构，定义了借阅者的基本信息
组成：读者编号，姓名，性别，电话号码；
3.数据结构：借阅证
含义说明：是学校图书借阅管理系统的主要数据结构，定义了借阅证的信息
组成：借阅证号，办证日期，可借数量；
4.数据结构：借，还，续借
含义说明：是学校图书借阅管理系统的主要数据结构，定义了图书借还的详细情况
组成：图书编号，借阅证编号，读者编号，借还日期，借还数量，是否续借
5.数据结构：规则
含义说明：是学校图书借阅管理系统的主要数据结构，定义了规则的详细情况
组成：读者编号，图书编号，借阅证编号，超期天数，超期本书，超期处罚
1.3系统分析 1.3.1功能模块简介 1.3.2功能需求描述 借阅功能： 图书出借时考虑三个问题：
读者是否因为超期、罚款等情况被关闭了借阅权限；
读者是否已经借满其限额。
该书是否不在库中；
如果不存在以上情况，则可以出借。
预约功能： 读者想借的书如果不在库中（已经被出借），读者可以预约该图书，当该图书被归还时系统给读者发送邮件，提醒他来借阅，此时其他读者也可以借阅该书。
续借功能： 读者还书的时候可以续借该图书，续借的过程包括先执行还书操作，再执行借阅操作。
发送催还邮件： 管理员可以发送邮件提醒读者到期还书。
读者管理功能： 对读者信息进行查看、添加、修改、删除。将读者分为不同类别，赋以不同权限。
系统管理功能： 对管理员的登录账号、密码进行添加、修改、删除。
借阅规则管理功能： 对图书借阅规则进行查看、添加、修改、删除。
概念结构设计 2.画E-R图 （1）图书实体E-R图
（2）图书类别实体E-R图
（3）借阅证实体E-R图
（4）读者实体E-R图">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-25T16:57:32+08:00">
    <meta property="article:modified_time" content="2023-08-25T16:57:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL 图书管理系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="color:#000000;">1.需求分析</span></h2> 
<h3 style="margin-left:0px;text-align:left;"><span style="color:#000000;">1.1</span><span style="color:#000000;">项目需求分析简介</span></h3> 
<h4 style="margin-left:0px;text-align:left;"><span style="color:#000000;">1.1.1</span><span style="color:#000000;">信息需求分析</span></h4> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(1) </span><span style="color:#000000;">图书信息：包括书籍编号，书籍名称，出版社，作者，库存量，出版日期，价格，库存，剩余量，类别等；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(2) </span><span style="color:#000000;">借阅证信息：包括借阅证编号，办证日期，可借数量等；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(3) </span><span style="color:#000000;">读者信息：读者编号，读者姓名，读者性别，读者电话</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(4) </span><span style="color:#000000;">图书借还信息：包括图书编号，借阅证编号，读者编号，借阅日期，借阅数量，归还日期，归还数量，超期天数，罚款金额等；</span></p> 
<h4 style="margin-left:0px;text-align:left;"><span style="color:#000000;">1.1.2</span><span style="color:#000000;">功能需求</span></h4> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">学校图书借阅系统主要由：图书信息管理，读者信息管理，借阅证信息管理，借还信息管理，规则信息等模块组成。进入改系统后，用户可以对系统中的信息进行添加、修改、删除、查询等操作，包括以下功能：</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(1) </span><span style="color:#000000;">图书信息管理模块：对图书信息进行增、删、改、查等操作；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(2) </span><span style="color:#000000;">读者信息管理模块：对读者信息进行增、删、改、查等操作；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(3) </span><span style="color:#000000;">借阅证信息管理模块：增加办卡，注销借阅卡等操作；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(4) </span><span style="color:#000000;">借还信息管理模块：进行借书、续借、还书等操作，查找出逾期的人及其逾期的天数；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(5) </span><span style="color:#000000;">操作记录管理模块：对读者的借，还，续借进行实时记录，便于管理员查找出指定读者的所有借阅记录。</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">(6) </span><span style="color:#000000;">规则信息管理模块：记录借书逾期的人及其逾期的天数，罚款。</span></p> 
<h3 style="margin-left:0px;text-align:left;"><span style="color:#000000;">1.2</span><span style="color:#000000;">数据字典</span></h3> 
<h4 style="background-color:transparent;margin-left:0px;text-align:left;"><span style="color:#000000;">1.2.1</span><span style="color:#000000;">数据结构</span></h4> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">1.</span><span style="color:#000000;">数据结构：图书</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">含义说明：是学校图书借阅管理系统的主要数据结构，定义了图书的信息</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">组成：图书编号，书名，作者，出版日期，出版社，库存，剩余量，类别；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">2.</span><span style="color:#000000;">数据结构：读者</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">含义说明：是学校图书借阅管理系统的主要数据结构，定义了借阅者的基本信息</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">组成：读者编号，姓名，性别，电话号码；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">3.</span><span style="color:#000000;">数据结构：借阅证</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">含义说明：是学校图书借阅管理系统的主要数据结构，定义了借阅证的信息</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">组成：借阅证号，办证日期，可借数量；</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">4.</span><span style="color:#000000;">数据结构：借，还，续借</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">含义说明：是学校图书借阅管理系统的主要数据结构，定义了图书借还的详细情况</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">组成：图书编号，借阅证编号，读者编号，借还日期，借还数量，是否续借</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">5.</span><span style="color:#000000;">数据结构：规则</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">含义说明：是学校图书借阅管理系统的主要数据结构，定义了规则的详细情况</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">组成：读者编号，图书编号，借阅证编号，超期天数，超期本书，超期处罚</span></p> 
<h3 style="margin-left:0px;text-align:justify;"><span style="color:#000000;">1.3</span><span style="color:#000000;">系统分析</span></h3> 
<h4 style="background-color:transparent;margin-left:0px;text-align:justify;"><span style="color:#000000;">1.3.1</span><span style="color:#000000;">功能模块简介</span></h4> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="433" src="https://images2.imgbox.com/6c/e6/vVzZ8nUd_o.jpg" width="581"></p> 
<h4 style="background-color:transparent;margin-left:0px;text-align:justify;">1.3.2功能需求描述</h4> 
<ol><li style="text-align:justify;">借阅功能：</li></ol> 
<p style="margin-left:0;text-align:justify;">图书出借时考虑三个问题：</p> 
<p style="margin-left:0;text-align:justify;">读者是否因为超期、罚款等情况被关闭了借阅权限；</p> 
<p style="margin-left:0;text-align:justify;">读者是否已经借满其限额。</p> 
<p style="margin-left:0;text-align:justify;">该书是否不在库中；</p> 
<p style="margin-left:0;text-align:justify;">如果不存在以上情况，则可以出借。</p> 
<ol><li style="text-align:justify;">预约功能：</li></ol> 
<p style="margin-left:0;text-align:justify;">读者想借的书如果不在库中（已经被出借），读者可以预约该图书，当该图书被归还时系统给读者发送邮件，提醒他来借阅，此时其他读者也可以借阅该书。</p> 
<ol><li style="text-align:justify;">续借功能：</li></ol> 
<p style="margin-left:0;text-align:justify;">读者还书的时候可以续借该图书，续借的过程包括先执行还书操作，再执行借阅操作。</p> 
<ol><li style="text-align:justify;">发送催还邮件：</li></ol> 
<p style="margin-left:0;text-align:justify;">管理员可以发送邮件提醒读者到期还书。</p> 
<ol><li style="text-align:justify;">读者管理功能：</li></ol> 
<p style="margin-left:0;text-align:justify;">对读者信息进行查看、添加、修改、删除。将读者分为不同类别，赋以不同权限。</p> 
<ol><li style="text-align:justify;">系统管理功能：</li></ol> 
<p style="margin-left:0;text-align:justify;">对管理员的登录账号、密码进行添加、修改、删除。</p> 
<ol><li style="text-align:justify;">借阅规则管理功能：</li></ol> 
<p style="margin-left:0;text-align:justify;">对图书借阅规则进行查看、添加、修改、删除。</p> 
<ol><li style="text-align:left;"><span style="color:#000000;">概念结构设计</span></li></ol> 
<h2 style="margin-left:0px;text-align:left;"><span style="color:#000000;">2.</span><span style="color:#000000;">画E-R图</span></h2> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">（1）图书实体E-R图</span></span></p> 
<p>  </p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="306" src="https://images2.imgbox.com/6d/c4/MhsRg3Dl_o.png" width="540"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">（2）图书类别实体E-R图</span></span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="235" src="https://images2.imgbox.com/79/c2/crMsPNKk_o.png" width="453"></p> 
<p> </p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">（3）借阅证实体E-R图</span></span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="270" src="https://images2.imgbox.com/b1/54/ymQFDHKU_o.png" width="545"></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">（4）读者实体E-R图</span></span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="234" src="https://images2.imgbox.com/78/36/3jFU8nrp_o.png" width="609"></p> 
<p>（5）<span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">规则实体E-R图</span></span></p> 
<p><img alt="" height="253" src="https://images2.imgbox.com/e0/71/qyrZvRH8_o.png" width="563"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">（6）记录实体E-R图</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="258" src="https://images2.imgbox.com/a4/21/02DGcSXe_o.png" width="523"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">（7）学校图书借阅管理系统E-R图</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="400" src="https://images2.imgbox.com/bb/2f/XTxn4ygt_o.png" width="308"></p> 
<h2 style="background-color:transparent;margin-left:0px;text-align:left;"><span style="color:#000000;"> 3.</span><span style="color:#000000;">逻辑结构设计</span></h2> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">学校图书管理系统关系模型</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">通过E-R图转换得到关系模型如下：</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">图书（书籍编号，书籍名称，作者，出版日期，出版社，价格，储存量，剩余量）</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">图书类别（类别编号，类别名称）</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">借阅证（借阅证号，办证日期，读者编号，说明，可借数量）</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">读者（读者编号，读者姓名，读者性别，读者电话，借阅证号）</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">借还（借读证编号，读者编号，书籍编号，借书日期，还书日期，是否续借，借书数量，还书数量，说明）</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">规则（读者编号，读者姓名，借阅证号，超期天数，本书，超期罚款）</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">记录表（序号，读者编号，记录时间，说明）</span></p> 
<h2 style="margin-left:0px;text-align:left;"><span style="color:#000000;">4.</span><span style="color:#000000;">物理结构设计</span></h2> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">图书表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="529" src="https://images2.imgbox.com/a0/60/4NUffKhf_o.png" width="1123"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">书籍类别表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="165" src="https://images2.imgbox.com/c8/f7/rGxWHgqp_o.png" width="1096"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">借阅证表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="321" src="https://images2.imgbox.com/1f/a6/qPCKBi7F_o.png" width="1110"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">读者表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="324" src="https://images2.imgbox.com/39/63/lMZKLcpv_o.png" width="1125"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">借还表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="622" src="https://images2.imgbox.com/4a/e1/gsfBkYCc_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">规则表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="438" src="https://images2.imgbox.com/77/a5/d6BUs4lw_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">记录表</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="307" src="https://images2.imgbox.com/3d/6c/vBMIEfha_o.png" width="1200"></p> 
<h2 style="margin-left:0px;text-align:left;"> <span style="color:#000000;"> 5.</span><span style="color:#000000;">数据库实施</span></h2> 
<p style="margin-left:0;text-align:left;">  <span style="color:#000000;">创建数据库：</span></p> 
<pre><code class="language-sql">CREATE database tushuguanli;</code></pre> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建图书表：</span></p> 
<pre><code class="language-sql">use tushuguanli;

CREATE TABLE book (

book_id INT(10) NOT NULL,

book_name VARCHAR(30) NOT NULL,

author VARCHAR(30) NOT NULL,

pubdate DATE NOT NULL ,

publish VARCHAR(50) NOT NULL ,

Price INT(20) NOT NULL,

inventory INT(100) NOT NULL ,

residue INT(100) NOT NULL ,

typeid VARCHAR(20) NOT NULL ,

PRIMARY KEY (book_id),

KEY bo1 (typeid),

CONSTRAINT book_ibfk_1 FOREIGN KEY (typeid) REFERENCES book_type (typeid)

)</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建图书类别表：</span></p> 
<pre><code class="language-sql">CREATE TABLE book_type (

typeid VARCHAR(5) NOT NULL,

typename VARCHAR(100) DEFAULT NULL,

PRIMARY KEY (typeid)

)</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建借阅证表：</span></p> 
<pre><code class="language-sql">CREATE TABLE js_card (

js_id CHAR(5) NOT NULL,

period DATE DEFAULT NULL,

read_id VARCHAR(10) DEFAULT NULL,

state VARCHAR(50) DEFAULT NULL,

kj_number INT(4) DEFAULT NULL,

kejie VARCHAR(10) DEFAULT NULL,

PRIMARY KEY (js_id),

KEY read_id (read_id),

CONSTRAINT js_card_ibfk_1 FOREIGN KEY (read_id) REFERENCES reader (read_id)

)</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建读者表：</span></p> 
<pre><code class="language-sql">CREATE TABLE reader (

read_id VARCHAR(10) NOT NULL,

read_name VARCHAR(20) NOT NULL,

read_sex CHAR(2) NOT NULL,

read_tel INT(20) NOT NULL,

js_id CHAR(5) NOT NULL,

PRIMARY KEY (read_id),

KEY js_id (js_id),

CONSTRAINT reader_ibfk_1 FOREIGN KEY (js_id) REFERENCES js_card (js_id)

)</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建借还表：</span></p> 
<pre><code class="language-sql">CREATE TABLE borrow_back (

js_id VARCHAR(10) DEFAULT NULL,

read_id VARCHAR(10) DEFAULT NULL,

book_id INT(10) DEFAULT NULL,

borrowdate DATE DEFAULT NULL,

due DATE DEFAULT NULL,

shf_xvjie TINYINT(4) DEFAULT NULL,

js_count INT(100) DEFAULT NULL,

hs_count INT(100) DEFAULT NULL,

text_jh VARCHAR(100) DEFAULT NULL,

KEY bb1 (js_id),

KEY bb2 (read_id),

KEY bb3 (book_id),

CONSTRAINT bb1 FOREIGN KEY (js_id) REFERENCES js_card (js_id),

CONSTRAINT bb2 FOREIGN KEY (read_id) REFERENCES reader (read_id),

CONSTRAINT bb3 FOREIGN KEY (book_id) REFERENCES book (book_id)

)</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建规则表：</span></p> 
<pre><code class="language-sql">CREATE TABLE sf_rule (

read_id varchar(10) DEFAULT NULL,

book_id int(10) DEFAULT NULL,

js_id varchar(10) DEFAULT NULL,

days int(30) DEFAULT NULL,

num int(100) DEFAULT NULL,

mony varchar(100) DEFAULT NULL,

KEY js_id (js_id),

KEY read_id (read_id),

KEY book_id (book_id),

CONSTRAINT sf_rule_ibfk_3 FOREIGN KEY (js_id) REFERENCES js_card (js_id),

CONSTRAINT sf_rule_ibfk_1 FOREIGN KEY (read_id) REFERENCES reader (read_id),

CONSTRAINT sf_rule_ibfk_2 FOREIGN KEY (book_id) REFERENCES book (book_id)

)</code></pre> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">创建操作记录表：</span></p> 
<pre><code class="language-sql">CREATE TABLE record (

jishu int(100) NOT NULL AUTO_INCREMENT,

read_id varchar(10) NOT NULL,

time datetime DEFAULT NULL,

text varchar(200) DEFAULT NULL,

PRIMARY KEY (jishu)

)</code></pre> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">增加数据</span></p> 
<pre><code class="language-sql">INSERT into js_card VALUES('003','2021-03-29','rw3','最多借五本','5','');</code></pre> 
<p style="margin-left:0;text-align:left;"><img alt="" height="294" src="https://images2.imgbox.com/cf/41/LtCvpt1h_o.png" width="918"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">删除数据</span></p> 
<pre><code class="language-sql">delete from record where read_id='rw1';</code></pre> 
<p style="margin-left:0;text-align:left;"><img alt="" height="223" src="https://images2.imgbox.com/13/67/JlAY0vfU_o.png" width="630"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">修改数据</span></p> 
<pre><code class="language-sql">UPDATE js_card SET state='不得超期10天' WHERE js_id='001';</code></pre> 
<p style="margin-left:0;text-align:left;"><img alt="" height="254" src="https://images2.imgbox.com/f3/91/g91kzClE_o.png" width="757"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">查询数据</span></p> 
<pre><code class="language-sql">SELECT * from book_type;</code></pre> 
<p style="margin-left:0;text-align:left;"><img alt="" height="247" src="https://images2.imgbox.com/9f/6e/Mqr1T1CW_o.png" width="465"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">存储过程</span></p> 
<pre><code class="language-sql">create procedure proc_borrow_book(IN a char(4),IN b int, IN m int,OUT state varchar(20))

begin

    declare read_count int default 0;

    declare book_count int default 0;

    declare stock int default 0;

    select count(read_id) INTO read_count from reader where read_id=a;

    if read_count&gt;0 then

        select count(book_id) INTO book_count from book where book_id=b;

        if book_count &gt;0 then

              select inventory INTO stock from book where book_id=b;

              if stock &gt;= m then

                  set state='借书成功';

              else

                  set state='库存不足';

              end if;             

        else

              set state = '图书不存在';

        end if;

    else

        set state = '非学校人员';

    end if;

    end;</code></pre> 
<p style="margin-left:0;text-align:left;"><img alt="" height="98" src="https://images2.imgbox.com/d3/bb/om0Eud2g_o.png" width="253"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#000000;">触发器</span></p> 
<pre><code class="language-sql">创建触发器实现借阅图书时，自动更新图书剩余量

CREATE TRIGGER jie_1

AFTER INSERT

ON borrow_back

FOR EACH ROW

UPDATE book SET residue=residue-NEW .js_count WHERE book_id=NEW .book_id ;

 创建触发器实现借阅图书时，自动更新借阅证的可借量

CREATE TRIGGER jie_2

BEFORE INSERT

ON borrow_back

FOR EACH ROW

UPDATE js_card SET kj_number=kj_number-NEW .js_count WHERE js_id=NEW .js_id;

创建触发器实现还书图书时，自动更新图书的剩余量

DELIMITER @@

CREATE TRIGGER huan_1

BEFORE UPDATE

ON borrow_back

FOR EACH ROW

BEGIN

IF OLD .due IS NULL AND NEW .due IS NOT NULL

THEN

UPDATE book SET residue=residue+NEW .hs_count WHERE book_id=NEW .book_id;

END IF;

END @@</code></pre> 
<h2 style="margin-left:0px;text-align:left;"> <span style="color:#000000;"> 6.</span><span style="color:#000000;">总结</span></h2> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">这个图书馆系统我写了好长时间，而且也改了很多次，因为写的不是这不完整就是那不完整，总会有一些问题，第一次写的时候，一次就只能增加一条信息，第二次写的时候又出现了错误，增加信息是无限循环，总之，出现了很多错误，来来回回改了无数次，我学到很多知识，也学会如何去写一个完整的系统，写系统时应该注意什么。</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="background-color:#FFFFFF;"><span style="color:#4d4d4d;">我们写这个图书管理系统，就是一个很大的挑战我们都要去勇敢的迎接挑战，写代码过程中，我们也会遇到很多问题，我们应该去慢慢解决，不是后退，因为只有我们练得多了，解决的问题多了，才会有掌握写代码的技巧。我们也要相信自己，对自己有自信，还应该多花时间去学好我们的专业课。</span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65e1d9b0d99fab85fb906851ac7772cf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【哈士奇赠书活动 - 36期】- 〖Django Web 开发实例精解〗</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b5e111319ea96d68d6d3dd9aae903710/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构双向链表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>