<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>程序编译及链接 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7fa027e1542f9a04e0f85f5bc257f293/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="程序编译及链接">
  <meta property="og:description" content="你好！感谢支持孔乙己的新作，本文就程序的编译及链接与大家分析我的思路。
希望能大佬们多多纠正及支持！！！
个人主页：爱摸鱼的孔乙己-CSDN博客 ​ ​
1.翻译译环境与运行环境 当我们进行程序设计时，使用编译器、开发工具编写代码（.c文件），则需要在翻译环境，通过编译将文件中源代码转换为可执行的机器指令（二进制指令），作用于运行环境实际执行代码。
1.1.翻译环境 顾名思义，翻译环境是由编译和链接两大过程组成的，编译又可拆分为：预处理（有些书籍或许称之为预编译）、编译、汇编三个过程。 在一个包含多个.C文件的项目中，多个.C文件单独进行编译并生成对应的目标文件（Windows环境下的目标文件后缀是.obj，Linux环境下后缀是.o） 多个目标文件和链接库一起经过链接器处理生成最终的可执行程序（链接库是指运行时库支持程序运行的基本函数集合或者第三方库）
接下来，我们观察一下编译器的进程：
首先，编译过程始于源文件，通常是以.c或.cpp结尾的代码文件。接下来，这些源文件经过预处理，生成一个中间文件（通常是.i文件），在这个阶段，预处理会处理宏定义和文件包含等指令。随后，预处理后的文件被编译，生成汇编语言文件（通常是 .s 文件）。在这个过程中，编译器将源代码转换为更接近机器语言的形式。接下来是链接阶段，编译器将生成的汇编文件与标准库（如 libc.a）进行链接。链接器在这一阶段负责将所有目标文件和库文件合并，最终生成可执行文件。最后，经过链接器处理后，输出的可执行文件便是用户可以运行的最终结果。
1.2.预处理（预编译） 在预处理阶段，源文件和头文件会被处理为.i 为后缀的文件。在预处理阶段主要是处理源文件中#开始的预编译指令，处理规则如下：
• 将所有的 #define 删除，并展开所有的宏定义。 • 处理所有的条件编译指令，如： #if、#ifdef、#elif、#else、#endif 。 • 处理#include 预编译指令，将包含的头⽂件的内容插⼊到该预编译指令的位置。 这个过程是递归进⾏的，也就是说被包含的头⽂件也可能包含其他⽂件。 • 删除所有的注释 • 添加⾏号和⽂件名标识，⽅便后续编译器⽣成调试信息等。 • 或保留所有的#pragma的编译器指令，编译器后续会使⽤。 1.3.编译 编译过程就是将预处理的文件进行一系列操作：词法分析、语法分析、语义分析及优化，并生成相应的汇编代码文件。
1.3.1.词法分析 将源代码程序输入扫描器，进行简单的词法分析，把代码中字符分割成一系列的记号（关键字、标识符、字面符与特殊符号） 记号 类型array标识符【左方括号index 标识符
】右方括号=赋值（左圆括号index标识符&#43;加号4数字）右圆括号*乘号（左圆括号2数字&#43;加号6数字）右圆括号 1.3.2.语法分析 接下来语法分析器，将对扫描产⽣的记号进⾏语法分析，从⽽产⽣语法树。这些语法树是以表达式为节点的树。 1.3.3.语义分析 由语义分析器来完成语义分析，即对表达式的语法层⾯分析。编译器所能做的分析是语义的静态分析。静态语义分析通常包括声明和类型的匹配，类型的转换等。这个阶段会报告错误的语法信息。 1.4.链接 链接作为一个复杂的过程，链接时需要把一堆文件链接在一起方可生成可执行程序。链接的过程主要包括：地址和空间分配，符号决议和重定位这些步骤；链接解决的是一个项目中多文件、多模块之间互相调用的问题。
1.5.运行环境 程序必须载入内存中，在有操作系统的环境中：一般这个由操作系统完成。在独立的环境中，程序的载入必须由手工安排，也可能是通过可执行代码置入只读内存来完成；程序的执行便开始，紧接着，调用main函数，开始执行程序代码，这个时候程序将使用一个运行时堆栈（stack），存储函数的局部变量和返回地址。程序同时也可以使用静态（static）内存，存储于静态内存中的变量在程序的整个执行过程一直保留他们的值，终止程序。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-06T22:09:53+08:00">
    <meta property="article:modified_time" content="2024-08-06T22:09:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">程序编译及链接</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>           你好！感谢支持孔乙己的新作，本文就<strong>程序的编译及链接</strong>与大家分析我的思路。</p> 
 <p>           希望能大佬们多多纠正及支持！！！</p> 
 <p><img src="https://images2.imgbox.com/e6/ad/fDpEPhk6_o.jpg" alt="7edab4be0868428c9c0a750f6d39f83d.jpeg"></p> 
 <p>     个人主页：<a href="https://blog.csdn.net/2301_81348661?" title="爱摸鱼的孔乙己-CSDN博客 ">爱摸鱼的孔乙己-CSDN博客 </a> </p> 
</blockquote> 
<p> </p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/ff/a5/7p9UMjXR_o.gif" alt="dbff71fcb0f14f67b7ff1eeec3eec17f.gif">​  <img src="https://images2.imgbox.com/99/7a/XvtqcTU4_o.jpg" alt="16216ce83d2b4087b3b350ce06ebd3ba.jpeg">​</p> 
<p> </p> 
<hr> 
<h2>1.翻译译环境与运行环境</h2> 
<hr> 
<p>当我们进行程序设计时，使用编译器、开发工具编写代码（.c文件），则需要在翻译环境，通过编译将文件中源代码转换为可执行的机器指令（二进制指令），作用于运行环境实际执行代码。</p> 
<p><img src="https://images2.imgbox.com/f1/95/oOzsDXCO_o.png" alt="bf49d11b4f3445b2b1125914e912c80d.png"></p> 
<h3>1.1.翻译环境</h3> 
<p>顾名思义，翻译环境是由编译和链接两大过程组成的，编译又可拆分为：预处理（有些书籍或许称之为预编译）、编译、汇编三个过程。 </p> 
<p>在一个包含多个<strong>.C</strong>文件的项目中，多个<strong>.C</strong>文件单独进行编译并生成对应的目标文件（<strong>Windows环境下的目标文件后缀是.obj，Linux环境下后缀是.o</strong>） 多个目标文件和链接库一起经过链接器处理生成最终的可执行程序（<strong>链接库是指运行时库支持程序运行的基本函数集合或者第三方库</strong>）</p> 
<p>接下来，我们观察一下编译器的进程：</p> 
<p><img src="https://images2.imgbox.com/32/d5/YA5eI1Uc_o.png" alt="461a62ff2fca49b2b345b4dcf33aa026.png"></p> 
<blockquote> 
 <p>        首先，编译过程始于源文件，通常是以.c或.cpp结尾的代码文件。接下来，这些源文件经过预处理，生成一个中间文件（通常是.i文件），在这个阶段，预处理会处理宏定义和文件包含等指令。随后，预处理后的文件被编译，生成汇编语言文件（通常是 <code>.s</code> 文件）。在这个过程中，编译器将源代码转换为更接近机器语言的形式。接下来是链接阶段，编译器将生成的汇编文件与标准库（如 <code>libc.a</code>）进行链接。链接器在这一阶段负责将所有目标文件和库文件合并，最终生成可执行文件。最后，经过链接器处理后，输出的可执行文件便是用户可以运行的最终结果。</p> 
</blockquote> 
<h3>1.2.预处理（预编译）</h3> 
<p>在预处理阶段，源文件和头文件会被处理为.i 为后缀的文件。在预处理阶段主要是处理源文件中#开始的预编译指令，处理规则如下：</p> 
<blockquote> 
 <div>
   • 将所有的 #define 删除，并展开所有的宏定义。 
 </div> 
 <div>
   • 处理所有的条件编译指令，如： #if、#ifdef、#elif、#else、#endif 。 
 </div> 
 <div>
   • 处理#include 预编译指令，将包含的头⽂件的内容插⼊到该预编译指令的位置。 
 </div> 
 <div>
     这个过程是递归进⾏的，也就是说被包含的头⽂件也可能包含其他⽂件。 
 </div> 
 <div>
   • 删除所有的注释 
 </div> 
 <div>
   • 添加⾏号和⽂件名标识，⽅便后续编译器⽣成调试信息等。 
 </div> 
 <div>
   • 或保留所有的#pragma的编译器指令，编译器后续会使⽤。 
 </div> 
</blockquote> 
<p> </p> 
<h3>1.3.编译</h3> 
<blockquote> 
 <p>        编译过程就是将预处理的文件进行一系列操作：<strong>词法分析、语法分析、语义分析及优化</strong>，并生成相应的汇编代码文件。</p> 
</blockquote> 
<h4>        1.3.1.词法分析</h4> 
<p>         将源代码程序输入扫描器，进行简单的词法分析，把代码中字符分割成一系列的记号（关键字、标识符、字面符与特殊符号）       </p> 
<table border="3" cellpadding="1" cellspacing="1" style="width:379px;"><tbody><tr><td style="text-align:center;width:168px;"><strong>  记号</strong></td><td style="text-align:center;width:204px;"><strong> 类型</strong></td></tr><tr><td style="text-align:center;width:168px;">array</td><td style="text-align:center;width:204px;">标识符</td></tr><tr><td style="text-align:center;width:168px;">【</td><td style="text-align:center;width:204px;">左方括号</td></tr><tr><td style="text-align:center;width:168px;">index</td><td style="width:204px;"> <p style="text-align:center;">标识符</p> </td></tr><tr><td style="text-align:center;width:168px;">  】</td><td style="text-align:center;width:204px;">右方括号</td></tr><tr><td style="text-align:center;width:168px;">=</td><td style="text-align:center;width:204px;">赋值</td></tr><tr><td style="text-align:center;width:168px;">（</td><td style="text-align:center;width:204px;">左圆括号</td></tr><tr><td style="text-align:center;width:168px;">index</td><td style="text-align:center;width:204px;">标识符</td></tr><tr><td style="text-align:center;width:168px;">+</td><td style="text-align:center;width:204px;">加号</td></tr><tr><td style="text-align:center;width:168px;">4</td><td style="text-align:center;width:204px;">数字</td></tr><tr><td style="text-align:center;width:168px;">）</td><td style="text-align:center;width:204px;">右圆括号</td></tr><tr><td style="text-align:center;width:168px;">*</td><td style="text-align:center;width:204px;">乘号</td></tr><tr><td style="text-align:center;width:168px;">（</td><td style="text-align:center;width:204px;">左圆括号</td></tr><tr><td style="text-align:center;width:168px;">2</td><td style="text-align:center;width:204px;">数字</td></tr><tr><td style="text-align:center;width:168px;">+</td><td style="text-align:center;width:204px;">加号</td></tr><tr><td style="text-align:center;width:168px;">6</td><td style="text-align:center;width:204px;">数字</td></tr><tr><td style="text-align:center;width:168px;">）</td><td style="text-align:center;width:204px;">右圆括号</td></tr></tbody></table> 
<h4>            1.3.2.语法分析</h4> 
<div>
                       接下来语法分析器，将对扫描产⽣的记号进⾏语法分析，从⽽产⽣语法树。这些语法树是以表达式为节点的树。 
 <img src="https://images2.imgbox.com/01/6c/JTgufzO6_o.png" alt="b8f8d80afd6e4a87a9e1507b9f28f613.png"> 
</div> 
<p> </p> 
<h4>        1.3.3.语义分析 </h4> 
<div>
                   由语义分析器来完成语义分析，即对表达式的语法层⾯分析。编译器所能做的分析是语义的静态分析。静态语义分析通常包括声明和类型的匹配，类型的转换等。这个阶段会报告错误的语法信息。 
 <img src="https://images2.imgbox.com/9e/78/mf2ri5FN_o.png" alt="744345b8813f4c3ea47a90163a6c33fb.png"> 
</div> 
<h3>1.4.链接                                   </h3> 
<blockquote> 
 <p>     链接作为一个复杂的过程，链接时需要把一堆文件链接在一起方可生成可执行程序。链接的过程主要包括：地址和空间分配，符号决议和重定位这些步骤；链接解决的是一个项目中多文件、多模块之间互相调用的问题。</p> 
</blockquote> 
<p>       </p> 
<h3>1.5.运行环境    </h3> 
<blockquote> 
 <p style="text-align:center;">        程序必须载入内存中，在有操作系统的环境中：一般这个由操作系统完成。在独立的环境中，程序的载入必须由手工安排，也可能是通过可执行代码置入只读内存来完成；程序的执行便开始，紧接着，调用main函数，开始执行程序代码，这个时候程序将使用一个运行时堆栈（stack），存储函数的局部变量和返回地址。程序同时也可以使用静态（static）内存，存储于静态内存中的变量在程序的整个执行过程一直保留他们的值，终止程序。</p> 
 <p style="text-align:center;">   </p> 
</blockquote> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/ee/7d/wZvHTP6O_o.gif" alt="85803f8a14cf40ebb99f336439c4dc86.gif">                                                                                                                                                                          </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fbdb2a1c7383e412ebd6c54914580983/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Crowd-SAM：SAM作为拥挤场景中目标检测的智能标注器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e488ab10ba1907ec7e823e165c560c21/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">国产版Sora复现——智谱AI开源CogVideoX-2b 本地部署复现实践教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>