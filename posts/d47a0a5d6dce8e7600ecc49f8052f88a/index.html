<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>åœ¨k8sä¸­éƒ¨ç½²Elasticsearché«˜å¯ç”¨é›†ç¾¤è¯¦ç»†æ•™ç¨‹ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d47a0a5d6dce8e7600ecc49f8052f88a/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="åœ¨k8sä¸­éƒ¨ç½²Elasticsearché«˜å¯ç”¨é›†ç¾¤è¯¦ç»†æ•™ç¨‹">
  <meta property="og:description" content="ğŸ‡æ˜æ˜è·Ÿä½ è¯´è¿‡ï¼šä¸ªäººä¸»é¡µ
ğŸ…ä¸ªäººä¸“æ ï¼šã€Šæ´å¯Ÿä¹‹çœ¼ï¼šELKç›‘æ§ä¸å¯è§†åŒ–ã€‹ğŸ…
ğŸ”–è¡Œè·¯æœ‰è‰¯å‹ï¼Œä¾¿æ˜¯å¤©å ‚ğŸ”–
ç›®å½•
ä¸€ã€å¼•è¨€
1ã€Elasticsearchç®€ä»‹
2ã€ä¸ºä»€ä¹ˆåœ¨k8sä¸­éƒ¨ç½²elasticsearch
äºŒã€k8såŸºç¡€
1ã€k8sç®€ä»‹
2ã€Podsã€Servicesã€StatefulSetç­‰åŸºæœ¬æ¦‚å¿µ
2.1 Pods
2.2 Services
2.3 StatefulSets
ä¸‰ã€Elasticsearché›†ç¾¤æ¶æ„
1ã€Elasticsearché›†ç¾¤çš„ç»„æˆ
2ã€Elasticsearchå·¥ä½œåŸç†
3ã€é›†ç¾¤é«˜å¯ç”¨è®¾è®¡
å››ã€éƒ¨ç½²ç¯å¢ƒå‡†å¤‡
1ã€å‡†å¤‡k8sé›†ç¾¤
2ã€å‡†å¤‡StorageClassÂ äº”ã€éƒ¨ç½²Elasticsearché›†ç¾¤Â 1ã€ç¼–å†™éƒ¨ç½²Elasticsearchçš„YAMLæ–‡ä»¶
2ã€éƒ¨ç½²Â Elasticsearch
3ã€æŸ¥çœ‹PodçŠ¶æ€
4ã€è®¿é—®æµ‹è¯•Â ä¸€ã€å¼•è¨€ 1ã€Elasticsearchç®€ä»‹ Elasticsearchæ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäºLuceneçš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œè®¾è®¡ç”¨äºäº‘è®¡ç®—ç¯å¢ƒä¸­ï¼Œèƒ½å¤Ÿå®ç°å®æ—¶çš„ã€å¯æ‰©å±•çš„æœç´¢ã€åˆ†æå’Œæ¢ç´¢å…¨æ–‡å’Œç»“æ„åŒ–æ•°æ®ã€‚
1. æ ¸å¿ƒç‰¹æ€§ï¼š
åˆ†å¸ƒå¼ï¼šElasticsearchæ˜¯åˆ†å¸ƒå¼çš„ï¼Œå¯ä»¥åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨å°†æ•°æ®åœ¨æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚å¯æ‰©å±•æ€§ï¼šElasticsearchæä¾›äº†å¯æ‰©å±•çš„æ¶æ„ï¼Œæ— è®ºæ˜¯å­˜å‚¨ã€èŠ‚ç‚¹è¿˜æ˜¯æŸ¥è¯¢ååé‡ï¼Œéƒ½å¯ä»¥éšç€ä¸šåŠ¡éœ€æ±‚çš„å˜åŒ–è€Œå¢åŠ èµ„æºã€‚å®ƒå¯ä»¥æ‰©å±•åˆ°ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¤„ç†PBçº§åˆ«çš„æ•°æ®ã€‚å®æ—¶æ€§ï¼šElasticsearchèƒ½å¤Ÿå®æ—¶åœ°å¤„ç†æ•°æ®ï¼Œæä¾›äº†è¿‘å®æ—¶çš„æœç´¢å’Œåˆ†æåŠŸèƒ½ã€‚å…¨æ–‡æ£€ç´¢ï¼šElasticsearchæä¾›äº†å…¨æ–‡æ£€ç´¢åŠŸèƒ½ï¼Œæ”¯æŒå¯¹å¤§é‡æ•°æ®è¿›è¡Œå¤æ‚çš„æœç´¢å’Œåˆ†æã€‚åˆ†ææ€§ï¼šElasticsearchæä¾›äº†å¼ºå¤§çš„åˆ†æåŠŸèƒ½ï¼ŒåŒ…æ‹¬èšåˆã€ç»Ÿè®¡å’Œæ’åºç­‰ã€‚å¤šç§Ÿæˆ·èƒ½åŠ›ï¼šElasticsearchå¯ä»¥é…ç½®ä¸ºå¤šç§Ÿæˆ·ç¯å¢ƒï¼Œå…è®¸ä¸åŒçš„ç”¨æˆ·å’Œåº”ç”¨å…±äº«ç›¸åŒçš„é›†ç¾¤èµ„æºã€‚ç›‘æ§å’Œè­¦æŠ¥ï¼šElasticsearchæä¾›äº†å†…ç½®çš„ç›‘æ§å’Œè­¦æŠ¥åŠŸèƒ½ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥å®æ—¶äº†è§£ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åœ¨å‡ºç°å¼‚å¸¸æ—¶å¾—åˆ°é€šçŸ¥ã€‚ 2. æ•°æ®æ”¯æŒï¼š
Elasticsearchä¸ºæ‰€æœ‰ç±»å‹çš„æ•°æ®æä¾›è¿‘ä¹å®æ—¶çš„æœç´¢å’Œåˆ†æã€‚æ— è®ºæ‚¨æ‹¥æœ‰ç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ–‡æœ¬ã€æ•°å­—æ•°æ®è¿˜æ˜¯åœ°ç†ç©ºé—´æ•°æ®ï¼ŒElasticsearchéƒ½èƒ½ä»¥æ”¯æŒå¿«é€Ÿæœç´¢çš„æ–¹å¼é«˜æ•ˆåœ°å­˜å‚¨å’Œç´¢å¼•å®ƒã€‚ 3. æŠ€æœ¯å®ç°ï¼š
Elasticsearchä½¿ç”¨Javaå¼€å‘ï¼Œå¹¶åŸºäºLuceneä½œä¸ºå…¶æ ¸å¿ƒæ¥å®ç°æ‰€æœ‰ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ã€‚ä½†å…¶ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„RESTful APIæ¥éšè—Luceneçš„å¤æ‚æ€§ï¼Œé€šè¿‡é¢å‘æ–‡æ¡£ä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•ã€‚Elasticsearchæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸç­‰ã€‚Elasticsearchçš„æ°´å¹³å¯æ‰©å±•æ€§å…è®¸é€šè¿‡å¢åŠ èŠ‚ç‚¹æ¥æ‰©å±•å…¶å¤„ç†èƒ½åŠ›ã€‚åœ¨ç¡¬ä»¶æ•…éšœæˆ–èŠ‚ç‚¹æ•…éšœçš„æƒ…å†µä¸‹ï¼ŒElasticsearchå…·æœ‰å®¹é”™èƒ½åŠ›ï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®çš„å®Œæ•´æ€§å’ŒæœåŠ¡çš„å¯ç”¨æ€§ã€‚ 4. åº”ç”¨åœºæ™¯ï¼š
Elasticsearchåœ¨ä¼—å¤šåœºæ™¯ä¸‹éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå¦‚ä¼ä¸šæœç´¢ã€æ—¥å¿—å’Œäº‹ä»¶æ•°æ®åˆ†æã€å®‰å…¨ç›‘æ§ç­‰ã€‚ 5. é›†æˆæ–¹æ¡ˆï¼š
Elasticsearchä¸åä¸ºLogstashçš„æ•°æ®æ”¶é›†å’Œæ—¥å¿—è§£æå¼•æ“ä»¥åŠåä¸ºKibanaçš„åˆ†æå’Œå¯è§†åŒ–å¹³å°ä¸€èµ·å¼€å‘çš„ã€‚è¿™ä¸‰ä¸ªäº§å“è¢«è®¾è®¡æˆä¸€ä¸ªé›†æˆè§£å†³æ–¹æ¡ˆï¼Œç§°ä¸ºâ€œElastic Stackâ€ï¼ˆä»¥å‰ç§°ä¸ºâ€œELK stackâ€ï¼‰ã€‚ 2ã€ä¸ºä»€ä¹ˆåœ¨k8sä¸­éƒ¨ç½²elasticsearch 1. è‡ªåŠ¨åŒ–å’Œç¼–æ’
è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç®¡ç†: Kubernetes æä¾›äº†è‡ªåŠ¨åŒ–çš„éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥ç®€åŒ– Elasticsearch é›†ç¾¤çš„é…ç½®ã€å¯åŠ¨å’Œç›‘æ§ã€‚è‡ªæ„ˆèƒ½åŠ›: Kubernetes èƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°è°ƒåº¦å¤±è´¥çš„ Podï¼Œç¡®ä¿ Elasticsearch é›†ç¾¤çš„é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚ 2. å¯æ‰©å±•æ€§
æ°´å¹³æ‰©å±•: Elasticsearch çš„èŠ‚ç‚¹å¯ä»¥åœ¨ Kubernetes ä¸­æ°´å¹³æ‰©å±•ï¼Œé€šè¿‡å¢åŠ æˆ–å‡å°‘èŠ‚ç‚¹æ•°ç›®æ¥åº”å¯¹æ•°æ®é‡å’ŒæŸ¥è¯¢é‡çš„å˜åŒ–ã€‚å¼¹æ€§èµ„æºåˆ†é…: Kubernetes å…è®¸ä¸ºä¸åŒçš„ Elasticsearch èŠ‚ç‚¹ï¼ˆå¦‚æ•°æ®èŠ‚ç‚¹ã€ä¸»èŠ‚ç‚¹ã€åè°ƒèŠ‚ç‚¹ï¼‰åˆ†é…ä¸åŒçš„èµ„æºé…é¢ï¼Œç¡®ä¿èµ„æºçš„åˆç†åˆ©ç”¨å’Œä¼˜åŒ–ã€‚ 3.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-13T07:30:00+08:00">
    <meta property="article:modified_time" content="2024-06-13T07:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">åœ¨k8sä¸­éƒ¨ç½²Elasticsearché«˜å¯ç”¨é›†ç¾¤è¯¦ç»†æ•™ç¨‹</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="1080" src="https://images2.imgbox.com/e7/66/Qb8AFTbp_o.jpg" width="1200"></p> 
<p style="text-align:center;">ğŸ‡æ˜æ˜è·Ÿä½ è¯´è¿‡ï¼š<a href="https://blog.csdn.net/weixin_53269650?spm=1011.2415.3001.5343" title="ä¸ªäººä¸»é¡µ">ä¸ªäººä¸»é¡µ</a></p> 
<p style="text-align:center;">ğŸ…ä¸ªäººä¸“æ ï¼š<a href="https://blog.csdn.net/weixin_53269650/category_12664280.html?spm=1001.2014.3001.5482" title="ã€Šæ´å¯Ÿä¹‹çœ¼ï¼šELKç›‘æ§ä¸å¯è§†åŒ–ã€‹">ã€Šæ´å¯Ÿä¹‹çœ¼ï¼šELKç›‘æ§ä¸å¯è§†åŒ–ã€‹</a>ğŸ…</p> 
<p style="text-align:center;">ğŸ”–è¡Œè·¯æœ‰è‰¯å‹ï¼Œä¾¿æ˜¯å¤©å ‚ğŸ”–</p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80" rel="nofollow">ä¸€ã€å¼•è¨€</a></p> 
<p id="1%E3%80%81Elasticsearch%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#1%E3%80%81Elasticsearch%E7%AE%80%E4%BB%8B" rel="nofollow">1ã€Elasticsearchç®€ä»‹</a></p> 
<p id="2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8k8s%E4%B8%AD%E9%83%A8%E7%BD%B2elasticsearch-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8k8s%E4%B8%AD%E9%83%A8%E7%BD%B2elasticsearch" rel="nofollow">2ã€ä¸ºä»€ä¹ˆåœ¨k8sä¸­éƒ¨ç½²elasticsearch</a></p> 
<p id="%E4%BA%8C%E3%80%81k8s%E5%9F%BA%E7%A1%80-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81k8s%E5%9F%BA%E7%A1%80" rel="nofollow">äºŒã€k8såŸºç¡€</a></p> 
<p id="1%E3%80%81k8s%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#1%E3%80%81k8s%E7%AE%80%E4%BB%8B" rel="nofollow">1ã€k8sç®€ä»‹</a></p> 
<p id="2%E3%80%81Pods%E3%80%81Services%E3%80%81StatefulSet%E7%AD%89%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#2%E3%80%81Pods%E3%80%81Services%E3%80%81StatefulSet%E7%AD%89%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" rel="nofollow">2ã€Podsã€Servicesã€StatefulSetç­‰åŸºæœ¬æ¦‚å¿µ</a></p> 
<p id="2.1%20Pods-toc" style="margin-left:80px;"><a href="#2.1%20Pods" rel="nofollow">2.1 Pods</a></p> 
<p id="2.2%20Services-toc" style="margin-left:80px;"><a href="#2.2%20Services" rel="nofollow">2.2 Services</a></p> 
<p id="2.3%20StatefulSets-toc" style="margin-left:80px;"><a href="#2.3%20StatefulSets" rel="nofollow">2.3 StatefulSets</a></p> 
<p id="%E4%B8%89%E3%80%81Elasticsearch%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Elasticsearch%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84" rel="nofollow">ä¸‰ã€Elasticsearché›†ç¾¤æ¶æ„</a></p> 
<p id="1%E3%80%81Elasticsearch%E9%9B%86%E7%BE%A4%E7%9A%84%E7%BB%84%E6%88%90-toc" style="margin-left:40px;"><a href="#1%E3%80%81Elasticsearch%E9%9B%86%E7%BE%A4%E7%9A%84%E7%BB%84%E6%88%90" rel="nofollow">1ã€Elasticsearché›†ç¾¤çš„ç»„æˆ</a></p> 
<p id="2%E3%80%81Elasticsearch%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#2%E3%80%81Elasticsearch%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">2ã€Elasticsearchå·¥ä½œåŸç†</a></p> 
<p id="3%E3%80%81%E9%9B%86%E7%BE%A4%E9%AB%98%E5%8F%AF%E7%94%A8%E8%AE%BE%E8%AE%A1-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E9%9B%86%E7%BE%A4%E9%AB%98%E5%8F%AF%E7%94%A8%E8%AE%BE%E8%AE%A1" rel="nofollow">3ã€é›†ç¾¤é«˜å¯ç”¨è®¾è®¡</a></p> 
<p id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87" rel="nofollow">å››ã€éƒ¨ç½²ç¯å¢ƒå‡†å¤‡</a></p> 
<p id="1%E3%80%81%E5%87%86%E5%A4%87k8s%E9%9B%86%E7%BE%A4-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%87%86%E5%A4%87k8s%E9%9B%86%E7%BE%A4" rel="nofollow">1ã€å‡†å¤‡k8sé›†ç¾¤</a></p> 
<p id="2%E3%80%81%E5%87%86%E5%A4%87StorageClass%C2%A0-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%87%86%E5%A4%87StorageClass%C2%A0" rel="nofollow">2ã€å‡†å¤‡StorageClassÂ </a></p> 
<p id="%E4%BA%94%E3%80%81%E9%83%A8%E7%BD%B2Elasticsearch%E9%9B%86%E7%BE%A4%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E9%83%A8%E7%BD%B2Elasticsearch%E9%9B%86%E7%BE%A4%C2%A0" rel="nofollow">äº”ã€éƒ¨ç½²Elasticsearché›†ç¾¤Â </a></p> 
<p id="1%E3%80%81%E7%BC%96%E5%86%99%E9%83%A8%E7%BD%B2Elasticsearch%E7%9A%84YAML%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E7%BC%96%E5%86%99%E9%83%A8%E7%BD%B2Elasticsearch%E7%9A%84YAML%E6%96%87%E4%BB%B6" rel="nofollow">1ã€ç¼–å†™éƒ¨ç½²Elasticsearchçš„YAMLæ–‡ä»¶</a></p> 
<p id="2%E3%80%81%E9%83%A8%E7%BD%B2%C2%A0Elasticsearch-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E9%83%A8%E7%BD%B2%C2%A0Elasticsearch" rel="nofollow">2ã€éƒ¨ç½²Â Elasticsearch</a></p> 
<p id="3%E3%80%81%E6%9F%A5%E7%9C%8BPod%E7%8A%B6%E6%80%81-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E6%9F%A5%E7%9C%8BPod%E7%8A%B6%E6%80%81" rel="nofollow">3ã€æŸ¥çœ‹PodçŠ¶æ€</a></p> 
<p id="4%E3%80%81%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95%C2%A0-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95%C2%A0" rel="nofollow">4ã€è®¿é—®æµ‹è¯•Â </a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80">ä¸€ã€å¼•è¨€</h2> 
<h3 id="1%E3%80%81Elasticsearch%E7%AE%80%E4%BB%8B">1ã€Elasticsearchç®€ä»‹</h3> 
<blockquote> 
 <p>Elasticsearchæ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäºLuceneçš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œè®¾è®¡ç”¨äºäº‘è®¡ç®—ç¯å¢ƒä¸­ï¼Œèƒ½å¤Ÿå®ç°å®æ—¶çš„ã€å¯æ‰©å±•çš„æœç´¢ã€åˆ†æå’Œæ¢ç´¢å…¨æ–‡å’Œç»“æ„åŒ–æ•°æ®ã€‚</p> 
</blockquote> 
<p><strong>1. æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p> 
<p></p> 
<ul><li><strong>åˆ†å¸ƒå¼ï¼š</strong>Elasticsearchæ˜¯åˆ†å¸ƒå¼çš„ï¼Œå¯ä»¥åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨å°†æ•°æ®åœ¨æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</li><li><strong>å¯æ‰©å±•æ€§ï¼š</strong>Elasticsearchæä¾›äº†å¯æ‰©å±•çš„æ¶æ„ï¼Œæ— è®ºæ˜¯å­˜å‚¨ã€èŠ‚ç‚¹è¿˜æ˜¯æŸ¥è¯¢ååé‡ï¼Œéƒ½å¯ä»¥éšç€ä¸šåŠ¡éœ€æ±‚çš„å˜åŒ–è€Œå¢åŠ èµ„æºã€‚å®ƒå¯ä»¥æ‰©å±•åˆ°ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¤„ç†PBçº§åˆ«çš„æ•°æ®ã€‚</li><li><strong>å®æ—¶æ€§ï¼š</strong>Elasticsearchèƒ½å¤Ÿå®æ—¶åœ°å¤„ç†æ•°æ®ï¼Œæä¾›äº†è¿‘å®æ—¶çš„æœç´¢å’Œåˆ†æåŠŸèƒ½ã€‚</li><li>å…¨æ–‡æ£€ç´¢ï¼šElasticsearchæä¾›äº†å…¨æ–‡æ£€ç´¢åŠŸèƒ½ï¼Œæ”¯æŒå¯¹å¤§é‡æ•°æ®è¿›è¡Œå¤æ‚çš„æœç´¢å’Œåˆ†æã€‚</li><li><strong>åˆ†ææ€§ï¼š</strong>Elasticsearchæä¾›äº†å¼ºå¤§çš„åˆ†æåŠŸèƒ½ï¼ŒåŒ…æ‹¬èšåˆã€ç»Ÿè®¡å’Œæ’åºç­‰ã€‚</li><li><strong>å¤šç§Ÿæˆ·èƒ½åŠ›ï¼š</strong>Elasticsearchå¯ä»¥é…ç½®ä¸ºå¤šç§Ÿæˆ·ç¯å¢ƒï¼Œå…è®¸ä¸åŒçš„ç”¨æˆ·å’Œåº”ç”¨å…±äº«ç›¸åŒçš„é›†ç¾¤èµ„æºã€‚</li><li><strong>ç›‘æ§å’Œè­¦æŠ¥ï¼š</strong>Elasticsearchæä¾›äº†å†…ç½®çš„ç›‘æ§å’Œè­¦æŠ¥åŠŸèƒ½ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥å®æ—¶äº†è§£ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åœ¨å‡ºç°å¼‚å¸¸æ—¶å¾—åˆ°é€šçŸ¥ã€‚</li></ul> 
<p><span id="cke_bm_6163C">Â </span></p> 
<p><strong>2. æ•°æ®æ”¯æŒï¼š</strong></p> 
<p></p> 
<ul><li>Elasticsearchä¸ºæ‰€æœ‰ç±»å‹çš„æ•°æ®æä¾›è¿‘ä¹å®æ—¶çš„æœç´¢å’Œåˆ†æã€‚æ— è®ºæ‚¨æ‹¥æœ‰ç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ–‡æœ¬ã€æ•°å­—æ•°æ®è¿˜æ˜¯åœ°ç†ç©ºé—´æ•°æ®ï¼ŒElasticsearchéƒ½èƒ½ä»¥æ”¯æŒå¿«é€Ÿæœç´¢çš„æ–¹å¼é«˜æ•ˆåœ°å­˜å‚¨å’Œç´¢å¼•å®ƒã€‚</li></ul> 
<p><br><strong>3. æŠ€æœ¯å®ç°ï¼š</strong></p> 
<p></p> 
<ul><li>Elasticsearchä½¿ç”¨Javaå¼€å‘ï¼Œå¹¶åŸºäºLuceneä½œä¸ºå…¶æ ¸å¿ƒæ¥å®ç°æ‰€æœ‰ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ã€‚ä½†å…¶ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„RESTful APIæ¥éšè—Luceneçš„å¤æ‚æ€§ï¼Œé€šè¿‡é¢å‘æ–‡æ¡£ä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•ã€‚</li><li>Elasticsearchæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸç­‰ã€‚</li><li>Elasticsearchçš„æ°´å¹³å¯æ‰©å±•æ€§å…è®¸é€šè¿‡å¢åŠ èŠ‚ç‚¹æ¥æ‰©å±•å…¶å¤„ç†èƒ½åŠ›ã€‚</li><li>åœ¨ç¡¬ä»¶æ•…éšœæˆ–èŠ‚ç‚¹æ•…éšœçš„æƒ…å†µä¸‹ï¼ŒElasticsearchå…·æœ‰å®¹é”™èƒ½åŠ›ï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®çš„å®Œæ•´æ€§å’ŒæœåŠ¡çš„å¯ç”¨æ€§ã€‚</li></ul> 
<p><br><strong>4. åº”ç”¨åœºæ™¯ï¼š</strong></p> 
<p></p> 
<ul><li>Elasticsearchåœ¨ä¼—å¤šåœºæ™¯ä¸‹éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå¦‚ä¼ä¸šæœç´¢ã€æ—¥å¿—å’Œäº‹ä»¶æ•°æ®åˆ†æã€å®‰å…¨ç›‘æ§ç­‰ã€‚</li></ul> 
<p><br><strong>5. é›†æˆæ–¹æ¡ˆï¼š</strong></p> 
<p></p> 
<ul><li>Elasticsearchä¸åä¸ºLogstashçš„æ•°æ®æ”¶é›†å’Œæ—¥å¿—è§£æå¼•æ“ä»¥åŠåä¸ºKibanaçš„åˆ†æå’Œå¯è§†åŒ–å¹³å°ä¸€èµ·å¼€å‘çš„ã€‚è¿™ä¸‰ä¸ªäº§å“è¢«è®¾è®¡æˆä¸€ä¸ªé›†æˆè§£å†³æ–¹æ¡ˆï¼Œç§°ä¸ºâ€œElastic Stackâ€ï¼ˆä»¥å‰ç§°ä¸ºâ€œELK stackâ€ï¼‰ã€‚</li></ul> 
<p class="img-center"><img alt="" height="520" src="https://images2.imgbox.com/e8/0e/Pkb5SfC6_o.png" width="1200"></p> 
<p>Â </p> 
<h3 id="2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8k8s%E4%B8%AD%E9%83%A8%E7%BD%B2elasticsearch" style="background-color:transparent;">2ã€ä¸ºä»€ä¹ˆåœ¨k8sä¸­éƒ¨ç½²elasticsearch</h3> 
<p><strong>1. è‡ªåŠ¨åŒ–å’Œç¼–æ’</strong></p> 
<p></p> 
<ul><li>è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç®¡ç†: 
  <ul><li><span id="cke_bm_11499C">Â </span>Kubernetes æä¾›äº†è‡ªåŠ¨åŒ–çš„éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥ç®€åŒ– Elasticsearch é›†ç¾¤çš„é…ç½®ã€å¯åŠ¨å’Œç›‘æ§ã€‚</li></ul></li><li>è‡ªæ„ˆèƒ½åŠ›: 
  <ul><li><span id="cke_bm_12128C">Â </span>Kubernetes èƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°è°ƒåº¦å¤±è´¥çš„ Podï¼Œç¡®ä¿ Elasticsearch é›†ç¾¤çš„é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚</li></ul></li></ul> 
<p><br><strong>2. å¯æ‰©å±•æ€§</strong></p> 
<p></p> 
<ul><li>æ°´å¹³æ‰©å±•: 
  <ul><li><span id="cke_bm_13602C">Â </span>Elasticsearch çš„èŠ‚ç‚¹å¯ä»¥åœ¨ Kubernetes ä¸­æ°´å¹³æ‰©å±•ï¼Œé€šè¿‡å¢åŠ æˆ–å‡å°‘èŠ‚ç‚¹æ•°ç›®æ¥åº”å¯¹æ•°æ®é‡å’ŒæŸ¥è¯¢é‡çš„å˜åŒ–ã€‚</li></ul></li><li>å¼¹æ€§èµ„æºåˆ†é…: 
  <ul><li><span id="cke_bm_13917C">Â </span>Kubernetes å…è®¸ä¸ºä¸åŒçš„ Elasticsearch èŠ‚ç‚¹ï¼ˆå¦‚æ•°æ®èŠ‚ç‚¹ã€ä¸»èŠ‚ç‚¹ã€åè°ƒèŠ‚ç‚¹ï¼‰åˆ†é…ä¸åŒçš„èµ„æºé…é¢ï¼Œç¡®ä¿èµ„æºçš„åˆç†åˆ©ç”¨å’Œä¼˜åŒ–ã€‚</li></ul></li></ul> 
<p><br><strong>3. é«˜å¯ç”¨æ€§</strong></p> 
<p></p> 
<ul><li>å¤šå‰¯æœ¬ç®¡ç†: 
  <ul><li><span id="cke_bm_14823C">Â </span>Kubernetes èƒ½å¤Ÿé€šè¿‡å…¶å‰¯æœ¬æ§åˆ¶å™¨å’Œ StatefulSets ç®¡ç† Elasticsearch çš„æ•°æ®å‰¯æœ¬å’Œåˆ†ç‰‡ï¼Œç¡®ä¿åœ¨èŠ‚ç‚¹å¤±è´¥æ—¶æ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œå¹¶ä¸”æœåŠ¡èƒ½è¿…é€Ÿæ¢å¤ã€‚</li></ul></li><li>è·¨å¯ç”¨åŒºåˆ†å¸ƒ: 
  <ul><li><span id="cke_bm_15123C">Â </span>Kubernetes å¯ä»¥å°† Elasticsearch èŠ‚ç‚¹åˆ†å¸ƒåœ¨ä¸åŒçš„å¯ç”¨åŒºï¼ˆAvailability Zonesï¼‰ï¼Œæé«˜å®¹ç¾èƒ½åŠ›ã€‚</li></ul></li></ul> 
<p><br><strong>4. å®¹å™¨åŒ–ä¼˜åŠ¿</strong></p> 
<p></p> 
<ul><li>ä¸€è‡´çš„ç¯å¢ƒ: 
  <ul><li><span id="cke_bm_15768C">Â </span>ä½¿ç”¨å®¹å™¨åŒ–çš„ Elasticsearch å¯ä»¥ç¡®ä¿åœ¨å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œçš„ä¸€è‡´æ€§ï¼Œå‡å°‘ç¯å¢ƒå·®å¼‚å¸¦æ¥çš„é—®é¢˜ã€‚</li></ul></li><li>ä¾èµ–ç®¡ç†: 
  <ul><li><span id="cke_bm_16176C">Â </span>å®¹å™¨åŒ–å¯ä»¥ç®€åŒ–ä¾èµ–ç®¡ç†ï¼Œç¡®ä¿ Elasticsearch åŠå…¶ä¾èµ–ç»„ä»¶èƒ½å¤Ÿåœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li></ul></li></ul> 
<p class="img-center"><img alt="" height="432" src="https://images2.imgbox.com/e5/c0/oJqk0JYk_o.png" width="1200"></p> 
<h2 id="%E4%BA%8C%E3%80%81k8s%E5%9F%BA%E7%A1%80">äºŒã€k8såŸºç¡€</h2> 
<h3 id="1%E3%80%81k8s%E7%AE%80%E4%BB%8B">1ã€k8sç®€ä»‹</h3> 
<blockquote> 
 <p>K8sï¼Œå…¨ç§°Kubernetesï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨ç¼–æ’ç³»ç»Ÿï¼Œæ—¨åœ¨è‡ªåŠ¨åŒ–å®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†ã€‚</p> 
</blockquote> 
<p><strong>1. å®šä¹‰ä¸æ¦‚å¿µï¼š</strong></p> 
<p></p> 
<ul><li>K8sæ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å®¹å™¨çš„å¼€æºå¹³å°ï¼Œå…è®¸ç”¨æˆ·æ–¹ä¾¿åœ°éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚</li><li>å®ƒé€šè¿‡è‡ªåŠ¨åŒ–çš„æ–¹å¼å®ç°è´Ÿè½½å‡è¡¡ã€æœåŠ¡å‘ç°å’Œè‡ªåŠ¨å¼¹æ€§ä¼¸ç¼©ç­‰åŠŸèƒ½ã€‚</li><li>Kuberneteså°†åº”ç”¨ç¨‹åºæ‰“åŒ…æˆå®¹å™¨ï¼Œå¹¶å°†è¿™äº›å®¹å™¨éƒ¨ç½²åˆ°ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œè‡ªåŠ¨å¤„ç†å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€è‡ªåŠ¨æ‰©å®¹ç­‰æ“ä½œã€‚</li></ul> 
<p><br><strong>2. ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p> 
<p></p> 
<ul><li><strong>è‡ªåŠ¨åŒ–ç®¡ç†ï¼š</strong>è‡ªåŠ¨åŒ–ç®¡ç†å®¹å™¨åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€æ‰©å±•ã€è¿ç»´ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œå‡å°‘äº†äººå·¥å¹²é¢„ï¼Œæé«˜äº†æ•ˆç‡ã€‚</li><li><strong>å¼¹æ€§ä¼¸ç¼©ï¼š</strong>æ ¹æ®åº”ç”¨è´Ÿè½½æƒ…å†µè‡ªåŠ¨è¿›è¡Œæ‰©å®¹æˆ–ç¼©å®¹ï¼Œä¿è¯åº”ç”¨çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</li><li><strong>é«˜å¯ç”¨æ€§ï¼š</strong>å½“æŸä¸ªèŠ‚ç‚¹æ•…éšœæ—¶ï¼ŒK8sä¼šè‡ªåŠ¨å°†åº”ç”¨è¿ç§»è‡³å…¶ä»–å¥åº·èŠ‚ç‚¹ï¼Œä¿è¯åº”ç”¨çš„æ­£å¸¸è¿è¡Œã€‚</li><li><strong>è‡ªæ„ˆèƒ½åŠ›ï¼š</strong>èƒ½å¤Ÿç›‘æµ‹åº”ç”¨çŠ¶æ€å¹¶è¿›è¡Œè‡ªåŠ¨ä¿®å¤ï¼Œå¦‚è‡ªåŠ¨é‡å¯æˆ–è¿ç§»æ•…éšœåº”ç”¨ã€‚</li></ul> 
<p><br><strong>3. æ¶æ„ä¸ç»„ä»¶ï¼š</strong></p> 
<p></p> 
<ul><li>K8sé›†ç¾¤ç”±å¤šä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰ç»„æˆï¼ŒåŒ…æ‹¬MasterèŠ‚ç‚¹å’ŒWorkerèŠ‚ç‚¹ã€‚</li><li>MasterèŠ‚ç‚¹ä½œä¸ºæ•´ä¸ªé›†ç¾¤çš„æ§åˆ¶ä¸­å¿ƒï¼Œè´Ÿè´£é›†ç¾¤çš„ç®¡ç†å’Œè°ƒåº¦å·¥ä½œï¼ŒåŒ…æ‹¬APIæœåŠ¡å™¨ã€è°ƒåº¦å™¨ã€æ§åˆ¶å™¨ç®¡ç†å™¨ç­‰æ ¸å¿ƒç»„ä»¶ã€‚</li><li>WorkerèŠ‚ç‚¹æ˜¯é›†ç¾¤çš„å·¥ä½œèŠ‚ç‚¹ï¼Œè´Ÿè´£è¿è¡ŒPodï¼ˆå®¹å™¨ç»„ï¼‰å¹¶æä¾›åº”ç”¨ç¨‹åºçš„è¿è¡Œç¯å¢ƒã€‚</li></ul> 
<p>Â </p> 
<p class="img-center"><img alt="" height="607" src="https://images2.imgbox.com/5b/ea/8KseBuJE_o.png" width="1200"></p> 
<h3 id="2%E3%80%81Pods%E3%80%81Services%E3%80%81StatefulSet%E7%AD%89%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">2ã€Podsã€Servicesã€StatefulSetç­‰åŸºæœ¬æ¦‚å¿µ</h3> 
<h4 id="2.1%20Pods"><strong>2.1 Pods</strong></h4> 
<p><br> Pods æ˜¯Kubernetesä¸­æœ€å°çš„å¯éƒ¨ç½²è®¡ç®—å•å…ƒã€‚ä¸€ä¸ªPodå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ï¼Œè¿™äº›å®¹å™¨å…±äº«ç½‘ç»œå‘½åç©ºé—´å’Œå­˜å‚¨èµ„æºï¼Œå¹¶æ€»æ˜¯å…±åŒè°ƒåº¦åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p> 
<ul><li><span id="cke_bm_23974S">Â </span><strong>å•å®¹å™¨Pod:</strong> æœ€å¸¸è§çš„æƒ…å†µï¼Œä¸€ä¸ªPodåŒ…å«ä¸€ä¸ªå®¹å™¨ã€‚</li><li><strong>å¤šå®¹å™¨Pod: </strong>åŒ…å«å¤šä¸ªéœ€è¦ç´§å¯†åä½œçš„å®¹å™¨ï¼Œä¾‹å¦‚å…±äº«å­˜å‚¨æˆ–ç½‘ç»œçš„ååŒè¿›ç¨‹ã€‚</li></ul> 
<p><strong>ç‰¹ç‚¹ï¼š</strong><span id="cke_bm_23974E">Â </span></p> 
<ul><li>å…±äº«ç›¸åŒçš„å­˜å‚¨å·å’Œç½‘ç»œå‘½åç©ºé—´ã€‚</li><li>ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«è°ƒåº¦åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚</li></ul> 
<h4 id="2.2%20Services">2.2 Services</h4> 
<p><br> Services æ˜¯ä¸€ç§æŠ½è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„é€»è¾‘ä¸Šç›¸åŒçš„Podsï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªç¨³å®šçš„è®¿é—®å…¥å£ï¼ˆIPåœ°å€å’Œç«¯å£ï¼‰ã€‚Serviceså®ç°äº†è´Ÿè½½å‡è¡¡ï¼Œå¹¶ä¸”å…è®¸Podè¿›è¡Œè‡ªåŠ¨å‘ç°å’Œé€šä¿¡ã€‚</p> 
<p><strong>ç±»å‹ï¼š</strong></p> 
<ul><li><strong>ClusterIP: </strong>é»˜è®¤ç±»å‹ï¼Œä»…åœ¨é›†ç¾¤å†…éƒ¨å¯è®¿é—®ã€‚</li><li><strong>NodePort: </strong>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå¼€æ”¾ä¸€ä¸ªé™æ€ç«¯å£ï¼Œä½¿å¾—æœåŠ¡å¯ä»¥é€šè¿‡&lt;NodeIP&gt;:&lt;NodePort&gt;è®¿é—®ã€‚</li><li><strong>LoadBalancer: </strong>ä½¿ç”¨äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå…¬å¼€æœåŠ¡åˆ°å¤–éƒ¨ç½‘ç»œã€‚</li><li><strong>ExternalName: </strong>å°†æœåŠ¡æ˜ å°„åˆ°å¤–éƒ¨åç§°ï¼Œæ¯”å¦‚DNSåç§°ã€‚</li></ul> 
<p><strong>åŠŸèƒ½ï¼š</strong></p> 
<ul><li>æä¾›Podçš„è´Ÿè½½å‡è¡¡ã€‚</li><li>ç¨³å®šçš„ç½‘ç»œæ¥å£ï¼Œä¸ä¼šå› ä¸ºPodçš„åˆ›å»ºå’Œé”€æ¯è€Œå˜åŒ–ã€‚</li></ul> 
<h4 id="2.3%20StatefulSets">2.3 StatefulSets</h4> 
<p><br> StatefulSets ä¸“é—¨ç”¨äºç®¡ç†æœ‰çŠ¶æ€åº”ç”¨ï¼Œç¡®ä¿Podæœ‰å›ºå®šçš„æ ‡è¯†ç¬¦å’Œç¨³å®šçš„å­˜å‚¨ã€‚é€‚ç”¨äºæ•°æ®åº“ã€åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿç­‰éœ€è¦æŒä¹…åŒ–å­˜å‚¨çš„åº”ç”¨ã€‚</p> 
<p><strong>ç‰¹ç‚¹ï¼š</strong></p> 
<ul><li>ç¨³å®šçš„ç½‘ç»œæ ‡è¯†: æ¯ä¸ªPodæœ‰ä¸€ä¸ªå›ºå®šçš„DNSåï¼Œä¾‹å¦‚pod-0.service.namespace.svc.cluster.localã€‚</li><li>æœ‰åºéƒ¨ç½²å’Œæ›´æ–°: PodæŒ‰é¡ºåºè¿›è¡Œåˆ›å»ºã€åˆ é™¤å’Œæ›´æ–°ï¼ˆä¾‹å¦‚ä»pod-0åˆ°pod-Nï¼‰ã€‚</li><li>ç¨³å®šçš„å­˜å‚¨: æ¯ä¸ªPodå¯ä»¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„PersistentVolumeï¼Œä¸Podçš„ç”Ÿå‘½å‘¨æœŸæ— å…³ã€‚</li></ul> 
<p>Â Â Â </p> 
<p class="img-center"><img alt="" height="697" src="https://images2.imgbox.com/59/dc/XgRe0wmr_o.png" width="1200"></p> 
<h2 id="%E4%B8%89%E3%80%81Elasticsearch%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84">ä¸‰ã€Elasticsearché›†ç¾¤æ¶æ„</h2> 
<h3 id="1%E3%80%81Elasticsearch%E9%9B%86%E7%BE%A4%E7%9A%84%E7%BB%84%E6%88%90">1ã€Elasticsearché›†ç¾¤çš„ç»„æˆ</h3> 
<p>ä¸€ä¸ªElasticsearché›†ç¾¤ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p> 
<p><strong>1. èŠ‚ç‚¹ï¼ˆNodeï¼‰:</strong></p> 
<ul><li>èŠ‚ç‚¹æ˜¯Elasticsearché›†ç¾¤ä¸­çš„ä¸€ä¸ªå•ç‹¬è¿è¡Œå®ä¾‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å­˜å‚¨æ•°æ®å¹¶å‚ä¸é›†ç¾¤çš„ç´¢å¼•å’Œæœç´¢åŠŸèƒ½ã€‚</li></ul> 
<p><br><strong>2. ä¸»èŠ‚ç‚¹ï¼ˆMaster Nodeï¼‰:</strong></p> 
<ul><li>è´Ÿè´£é›†ç¾¤èŒƒå›´å†…çš„ç®¡ç†ä»»åŠ¡ï¼Œå¦‚åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ã€è·Ÿè¸ªé›†ç¾¤ä¸­å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ï¼Œå¹¶é€‰æ‹©ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡çš„ä½ç½®ã€‚</li><li>ä¸€ä¸ªé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹æ˜¯æ´»åŠ¨çš„ï¼Œä½†å¯ä»¥é…ç½®å¤šä¸ªå€™é€‰ä¸»èŠ‚ç‚¹ä»¥æé«˜å®¹é”™æ€§ã€‚</li></ul> 
<p><br><strong>3. æ•°æ®èŠ‚ç‚¹ï¼ˆData Nodeï¼‰:</strong></p> 
<ul><li>è´Ÿè´£å­˜å‚¨æ•°æ®å’Œå¤„ç†CRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰æ“ä½œä»¥åŠæœç´¢è¯·æ±‚ã€‚æ•°æ®èŠ‚ç‚¹éœ€è¦è¾ƒå¤šçš„å†…å­˜å’Œå­˜å‚¨èµ„æºã€‚</li></ul> 
<p><span id="cke_bm_33336C">Â </span></p> 
<p><strong>4. åè°ƒèŠ‚ç‚¹ï¼ˆCoordinating Nodeï¼‰:</strong></p> 
<ul><li>å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå°†è¯·æ±‚åˆ†å‘åˆ°åˆé€‚çš„æ•°æ®èŠ‚ç‚¹ï¼Œå¹¶æ±‡æ€»ç»“æœåè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>ä»»ä½•èŠ‚ç‚¹éƒ½å¯ä»¥ä½œä¸ºåè°ƒèŠ‚ç‚¹ï¼Œä½†å¯ä»¥ä¸“é—¨é…ç½®ä¸€äº›èŠ‚ç‚¹åªä½œä¸ºåè°ƒèŠ‚ç‚¹ã€‚</li></ul> 
<p><br><strong>5. ä¸»èŠ‚ç‚¹å€™é€‰èŠ‚ç‚¹ï¼ˆMaster-Eligible Nodeï¼‰:</strong></p> 
<ul><li>å¯ä»¥è¢«é€‰ä¸¾ä¸ºä¸»èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚é€šå¸¸ï¼Œé›†ç¾¤ä¼šé…ç½®å¤šä¸ªå€™é€‰ä¸»èŠ‚ç‚¹ï¼Œä»¥é˜²æ­¢å•ç‚¹æ•…éšœã€‚</li></ul> 
<p><br><strong>6. ä¸“ç”¨èŠ‚ç‚¹ï¼ˆDedicated Nodeï¼‰:</strong></p> 
<ul><li>å¯ä»¥é…ç½®ä¸“é—¨çš„èŠ‚ç‚¹æ¥å¤„ç†ç‰¹å®šä»»åŠ¡ï¼Œå¦‚ä¸“ç”¨çš„ä¸»èŠ‚ç‚¹ã€æ•°æ®èŠ‚ç‚¹æˆ–åè°ƒèŠ‚ç‚¹ï¼Œä»¥ä¼˜åŒ–é›†ç¾¤æ€§èƒ½ã€‚</li></ul> 
<p class="img-center"><img alt="" height="732" src="https://images2.imgbox.com/86/e5/DCsW3xYQ_o.png" width="1200"></p> 
<h3 id="2%E3%80%81Elasticsearch%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">2ã€Elasticsearchå·¥ä½œåŸç†</h3> 
<p><strong>1. ç´¢å¼•å’Œåˆ†ç‰‡ï¼ˆShardsï¼‰:</strong></p> 
<ul><li>æ•°æ®åœ¨å­˜å‚¨æ—¶è¢«åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†ç‰‡ã€‚æ¯ä¸ªç´¢å¼•ï¼ˆç±»ä¼¼äºå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨ï¼‰å¯ä»¥è¢«åˆ†æˆä¸€ä¸ªæˆ–å¤šä¸ªä¸»åˆ†ç‰‡ï¼ˆPrimary Shardï¼‰ï¼Œæ¯ä¸ªä¸»åˆ†ç‰‡å¯ä»¥æœ‰å¤šä¸ªå‰¯æœ¬åˆ†ç‰‡ï¼ˆReplica Shardï¼‰ã€‚</li><li>ä¸»åˆ†ç‰‡è´Ÿè´£å¤„ç†æ•°æ®å†™å…¥ï¼Œå‰¯æœ¬åˆ†ç‰‡ç”¨äºæ•°æ®å†—ä½™å’Œè¯»å–æ“ä½œï¼Œä»¥æé«˜æŸ¥è¯¢æ€§èƒ½å’Œæ•°æ®å®‰å…¨æ€§ã€‚</li></ul> 
<p><br><strong>2. æ•°æ®åˆ†å¸ƒ:</strong></p> 
<ul><li>Elasticsearchä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°†åˆ†ç‰‡åˆ†å¸ƒåˆ°é›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹ä¸Šã€‚ä¸»èŠ‚ç‚¹è´Ÿè´£è·Ÿè¸ªåˆ†ç‰‡çš„ä½ç½®ï¼Œå¹¶åœ¨èŠ‚ç‚¹æ•…éšœæ—¶é‡æ–°åˆ†é…åˆ†ç‰‡ã€‚</li></ul> 
<p><br><strong>3. æŸ¥è¯¢å’Œæœç´¢:</strong></p> 
<ul><li>å½“å®¢æˆ·ç«¯å‘é€æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œåè°ƒèŠ‚ç‚¹ä¼šè§£æè¯·æ±‚å¹¶å°†å…¶åˆ†å‘åˆ°ç›¸å…³çš„åˆ†ç‰‡ä¸Šã€‚æ¯ä¸ªåˆ†ç‰‡åœ¨æœ¬åœ°æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¹¶è¿”å›ç»“æœç»™åè°ƒèŠ‚ç‚¹ï¼Œåè°ƒèŠ‚ç‚¹æ±‡æ€»ç»“æœåè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>æŸ¥è¯¢å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li></ul> 
<p><br><strong>4. æ•°æ®å†™å…¥:</strong></p> 
<ul><li>å½“å®¢æˆ·ç«¯å‘é€æ•°æ®å†™å…¥è¯·æ±‚æ—¶ï¼Œåè°ƒèŠ‚ç‚¹å°†æ•°æ®å‘é€åˆ°ç›¸å…³çš„ä¸»åˆ†ç‰‡ã€‚ä¸»åˆ†ç‰‡å¤„ç†å†™å…¥åï¼Œå°†æ•°æ®åŒæ­¥åˆ°æ‰€æœ‰å‰¯æœ¬åˆ†ç‰‡ã€‚ç¡®ä¿æ‰€æœ‰å‰¯æœ¬åˆ†ç‰‡éƒ½æˆåŠŸå†™å…¥æ•°æ®åï¼Œåè°ƒèŠ‚ç‚¹æ‰ä¼šå‘å®¢æˆ·ç«¯ç¡®è®¤å†™å…¥æˆåŠŸã€‚</li></ul> 
<p>Â Â Â </p> 
<p class="img-center"><img alt="" height="763" src="https://images2.imgbox.com/88/b4/V9cldyNf_o.png" width="1200"></p> 
<h3 id="3%E3%80%81%E9%9B%86%E7%BE%A4%E9%AB%98%E5%8F%AF%E7%94%A8%E8%AE%BE%E8%AE%A1">3ã€é›†ç¾¤é«˜å¯ç”¨è®¾è®¡</h3> 
<p>æœ¬æ¬¡éƒ¨ç½²çš„elasticsearchè®¾è®¡ä¸º5èŠ‚ç‚¹ï¼Œä¸€ä¸»å¤šä»çš„é«˜å¯ç”¨æ–¹å¼ï¼Œå¦‚æœä¸€ä¸ªä¸»èŠ‚ç‚¹æ„å¤–å®•æ‰ï¼Œå…¶ä»–èŠ‚ç‚¹è‡ªä¸»é€‰ä¸¾å‡ºæ–°çš„MasterèŠ‚ç‚¹æ¥ç®¡ä»»åŠ¡ï¼Œä»è€Œä¿è¯é›†ç¾¤çš„é«˜å¯ç”¨æ€§</p> 
<p class="img-center"><img alt="" height="565" src="https://images2.imgbox.com/63/4c/bLsRebD9_o.png" width="1200"></p> 
<h2 id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">å››ã€éƒ¨ç½²ç¯å¢ƒå‡†å¤‡</h2> 
<h3 id="1%E3%80%81%E5%87%86%E5%A4%87k8s%E9%9B%86%E7%BE%A4" style="background-color:transparent;">1ã€å‡†å¤‡k8sé›†ç¾¤</h3> 
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„k8sé›†ç¾¤ç‰ˆæœ¬ä¸º 1.23ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ç‰ˆæœ¬ï¼Œåªæ˜¯é•œåƒå¯¼å…¥å‘½ä»¤ä¸é€šï¼Œå¦‚æœè¿˜æœªæ­å»ºk8sé›†ç¾¤ï¼Œè¯·å‚è€ƒ<a href="https://blog.csdn.net/weixin_53269650/article/details/135836786" title="ã€Šåœ¨Centosä¸­æ­å»º K8s 1.23 é›†ç¾¤è¶…è¯¦ç»†è®²è§£ã€‹">ã€Šåœ¨Centosä¸­æ­å»º K8s 1.23 é›†ç¾¤è¶…è¯¦ç»†è®²è§£ã€‹</a>è¿™ç¯‡æ–‡ç« </p> 
<p class="img-center"><img alt="" height="190" src="https://images2.imgbox.com/da/fc/9Bvw2KsA_o.png" width="759"></p> 
<h3 id="2%E3%80%81%E5%87%86%E5%A4%87StorageClass%C2%A0">2ã€å‡†å¤‡StorageClassÂ </h3> 
<p>å› ä¸ºæˆ‘ä»¬è¦å¯¹Elasticsearchä¸­çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ–ï¼Œé¿å…Podæ¼‚ç§»åæ•°æ®ä¸¢å¤±ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ä¸å¯ç”¨æ€§</p> 
<p>å¦‚æœè¿˜æœªåˆ›å»ºå­˜å‚¨ç±»ï¼Œè¯·å‚è€ƒ<a href="https://blog.csdn.net/weixin_53269650/article/details/137592622?spm=1001.2014.3001.5502" title="ã€Šk8s å­˜å‚¨ç±»ï¼ˆStorageClassï¼‰åˆ›å»ºä¸åŠ¨æ€ç”ŸæˆPVè§£æï¼Œï¼ˆé™„å¸¦é•œåƒï¼‰ã€‹">ã€Šk8s å­˜å‚¨ç±»ï¼ˆStorageClassï¼‰åˆ›å»ºä¸åŠ¨æ€ç”ŸæˆPVè§£æï¼Œï¼ˆé™„å¸¦é•œåƒï¼‰ã€‹</a>è¿™ç¯‡æ–‡ä»¶ã€‚</p> 
<p class="img-center"><img alt="" height="213" src="https://images2.imgbox.com/b3/56/Kuou4tR0_o.png" width="1087"></p> 
<h2 id="%E4%BA%94%E3%80%81%E9%83%A8%E7%BD%B2Elasticsearch%E9%9B%86%E7%BE%A4%C2%A0">äº”ã€éƒ¨ç½²Elasticsearché›†ç¾¤Â </h2> 
<h3 id="1%E3%80%81%E7%BC%96%E5%86%99%E9%83%A8%E7%BD%B2Elasticsearch%E7%9A%84YAML%E6%96%87%E4%BB%B6">1ã€ç¼–å†™éƒ¨ç½²Elasticsearchçš„YAMLæ–‡ä»¶</h3> 
<pre><code class="hljs">apiVersion: v1
kind: Namespace
metadata:
  name: es
---
#åˆ›å»ºConfigMapç”¨äºæŒ‚è½½é…ç½®æ–‡ä»¶
apiVersion: v1
kind: ConfigMap
metadata:
  name: sirc-elasticsearch-config
  namespace: es
  labels:
    app: elasticsearch
data:             #å…·ä½“æŒ‚è½½çš„é…ç½®æ–‡ä»¶
  elasticsearch.yml: |+     
    cluster.name: "es-cluster"
    network.host: 0.0.0.0
    http.cors.enabled: true
    http.cors.allow-origin: "*"
    http.cors.allow-headers: "*"
    bootstrap.system_call_filter: false
    xpack.security.enabled: false
    index.number_of_shards: 5
    index.number_of_replicas: 1
#åˆ›å»ºStatefulSetï¼ŒESå±äºæ•°æ®åº“ç±»å‹çš„åº”ç”¨ï¼Œæ­¤ç±»åº”ç”¨é€‚åˆStatefulSetç±»å‹
---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: elasticsearch
  namespace: es
spec:
  serviceName: "elasticsearch-cluster"   #å¡«å†™æ— å¤´æœåŠ¡çš„åç§°
  replicas: 5
  selector: 
    matchLabels: 
      app: elasticsearch
  template:
    metadata:
      labels:
        app: elasticsearch
    spec:
      initContainers:
      - name: fix-permissions
        image: busybox
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c", "chown -R 1000:1000 /usr/share/elasticsearch/data"]
        securityContext:
          privileged: true
        volumeMounts:
        - name: es-data
          mountPath: /usr/share/elasticsearch/data
      - name: increase-vm-max-map
        image: busybox
        imagePullPolicy: IfNotPresent
        command: ["sysctl", "-w", "vm.max_map_count=262144"]
        securityContext:
          privileged: true
      - name: increase-fd-ulimit
        image: busybox
        imagePullPolicy: IfNotPresent
        command: ["sh", "-c", "ulimit -n 65536"]
        securityContext:
          privileged: true
      containers:
      - name: elasticsearch
        image: elasticsearch:7.17.18
        imagePullPolicy: Never
        resources:
          requests:
            memory: "1000Mi"
            cpu: "1000m"
          limits:
            memory: "2000Mi"
            cpu: "2000m"
        ports:
        - containerPort: 9200
          name: elasticsearch
        env:
        - name: node.name
          valueFrom:
            fieldRef:
              fieldPath: metadata.name  #metadata.nameè·å–è‡ªå·±podåç§°æ·»åŠ åˆ°å˜é‡MY_POD_NAMEï¼Œstatus.hostIPè·å–è‡ªå·±ipç­‰ç­‰å¯ä»¥è‡ªå·±å»ç™¾åº¦
        - name: discovery.type
          value: zen
        - name: cluster.name
          value: elasticsearch
        - name: cluster.initial_master_nodes
          value: "elasticsearch-0,elasticsearch-1,elasticsearch-2,elasticsearch-3,elasticsearch-4"
        - name: discovery.zen.minimum_master_nodes
          value: "3"
        - name: discovery.seed_hosts
          value: "elasticsearch-0.elasticsearch-cluster.es,elasticsearch-1.elasticsearch-cluster.es,elasticsearch-2.elasticsearch-cluster.es,elasticsearch-3.elasticsearch-cluster.es,elasticsearch-4.elasticsearch-cluster.es"
        - name: network.host
          value: "0.0.0.0"
        - name: "http.cors.allow-origin"
          value: "*"
        - name: "http.cors.enabled"
          value: "true"
        - name: "number_of_shards"
          value: "5"
        - name: "number_of_replicas"
          value: "1"
        - name: path.data
          value:  /usr/share/elasticsearch/data
        volumeMounts:                           
          - name: es-data                  #æŒ‚è½½æ•°æ®
            mountPath: /usr/share/elasticsearch/data 
      volumes:
      - name: elasticsearch-config
        configMap:                                #configMapæŒ‚è½½
          name: sirc-elasticsearch-config
  volumeClaimTemplates:                     #è¿™æ­¥è‡ªåŠ¨åˆ›å»ºpvcï¼Œå¹¶æŒ‚è½½åŠ¨æ€pv
    - metadata:
        name: es-data
      spec:
        accessModes: ["ReadWriteMany"]
        storageClassName: nfs
        resources:
          requests:
            storage: 10Gi
#åˆ›å»ºService
---
apiVersion: v1
kind: Service
metadata:
  name: elasticsearch-cluster  #æ— å¤´æœåŠ¡çš„åç§°ï¼Œéœ€è¦é€šè¿‡è¿™ä¸ªè·å–ipï¼Œä¸ä¸»æœºçš„å¯¹åº”å…³ç³»
  namespace: es
  labels:
    app: elasticsearch
spec:
  ports:
    - port: 9200
      name: elasticsearch
  clusterIP: None
  selector:
    app: elasticsearch  
---
apiVersion: v1
kind: Service
metadata:
  name: elasticsearch   #serviceæœåŠ¡çš„åç§°ï¼Œå‘å¤–æš´éœ²ç«¯å£
  namespace: es
  labels:
    app: elasticsearch
spec:
  ports:
    - port: 9200
      name: elasticsearch
  type: NodePort
  selector:
    app: elasticsearch
---
apiVersion: v1
kind: Service
metadata:
  name: my-nodeport-service-0
  namespace: es
spec:
  type: NodePort
  selector:
    statefulset.kubernetes.io/pod-name: elasticsearch-0
  ports:
    - protocol: TCP
      port: 80        # Service æš´éœ²çš„ç«¯å£
      targetPort: 9200   # Pod ä¸­å®¹å™¨çš„ç«¯å£
      nodePort: 30000    # NodePort ç±»å‹çš„ç«¯å£èŒƒå›´ä¸º 30000-32767ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´
---
apiVersion: v1
kind: Service
metadata:
  name: my-nodeport-service-1
  namespace: es
spec:
  type: NodePort
  selector:
    statefulset.kubernetes.io/pod-name: elasticsearch-1
  ports:
    - protocol: TCP
      port: 80        # Service æš´éœ²çš„ç«¯å£
      targetPort: 9200   # Pod ä¸­å®¹å™¨çš„ç«¯å£
      nodePort: 30001    # NodePort ç±»å‹çš„ç«¯å£èŒƒå›´ä¸º 30000-32767ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´
---
apiVersion: v1
kind: Service
metadata:
  name: my-nodeport-service-2
  namespace: es
spec:
  type: NodePort
  selector:
    statefulset.kubernetes.io/pod-name: elasticsearch-2
  ports:
    - protocol: TCP
      port: 80        # Service æš´éœ²çš„ç«¯å£
      targetPort: 9200   # Pod ä¸­å®¹å™¨çš„ç«¯å£
      nodePort: 30002    # NodePort ç±»å‹çš„ç«¯å£èŒƒå›´ä¸º 30000-32767ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´
---
apiVersion: v1
kind: Service
metadata:
  name: my-nodeport-service-3
  namespace: es
spec:
  type: NodePort
  selector:
    statefulset.kubernetes.io/pod-name: elasticsearch-3
  ports:
    - protocol: TCP
      port: 80        # Service æš´éœ²çš„ç«¯å£
      targetPort: 9200   # Pod ä¸­å®¹å™¨çš„ç«¯å£
      nodePort: 30003    # NodePort ç±»å‹çš„ç«¯å£èŒƒå›´ä¸º 30000-32767ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´
---
apiVersion: v1
kind: Service
metadata:
  name: my-nodeport-service-4
  namespace: es
spec:
  type: NodePort
  selector:
    statefulset.kubernetes.io/pod-name: elasticsearch-4
  ports:
    - protocol: TCP
      port: 80        # Service æš´éœ²çš„ç«¯å£
      targetPort: 9200   # Pod ä¸­å®¹å™¨çš„ç«¯å£
      nodePort: 30004    # NodePort ç±»å‹çš„ç«¯å£èŒƒå›´ä¸º 30000-32767ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: elasticsearchhead
  namespace: es
spec:
  replicas: 1
  selector:
    matchLabels:
      app: elasticsearchhead
  template:
    metadata:
      labels:
        app: elasticsearchhead
    spec:
      containers:
      - name: elasticsearchhead
        image: mobz/elasticsearch-head:5
        ports:
        - containerPort: 9100
---
apiVersion: v1
kind: Service
metadata:
  name: elasticsearchhead-service
  namespace: es
spec:
  type: NodePort
  ports:
  - port: 9100
    targetPort: 9100
    nodePort: 30910  # å¯æ ¹æ®éœ€è¦é€‰æ‹©åˆé€‚çš„ç«¯å£å·
  selector:
    app: elasticsearchhead</code></pre> 
<p>ä¸Šè¿°Kubernetesé…ç½®æ–‡ä»¶å®šä¹‰äº†Elasticsearché›†ç¾¤çš„éƒ¨ç½²ï¼Œä½¿ç”¨StatefulSetæ¥ç®¡ç†å…¶æœ‰çŠ¶æ€çš„Podã€‚</p> 
<p><strong>é…ç½®è¯´æ˜</strong></p> 
<p><br><strong>1. å‘½åç©ºé—´ (Namespace)</strong></p> 
<ul><li>åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´esï¼Œç”¨äºç»„ç»‡å’Œéš”ç¦»Elasticsearchèµ„æºã€‚</li></ul> 
<p><strong>2. ConfigMap</strong></p> 
<ul><li>åˆ›å»ºä¸€ä¸ªConfigMapï¼Œç”¨äºå­˜å‚¨Elasticsearchçš„é…ç½®æ–‡ä»¶elasticsearch.ymlã€‚</li></ul> 
<p><strong>3. StatefulSet</strong></p> 
<ul><li>StatefulSet ç”¨äºéƒ¨ç½²å’Œç®¡ç†æœ‰çŠ¶æ€åº”ç”¨ã€‚</li><li>åŒ…å«5ä¸ªå‰¯æœ¬ï¼ˆreplicasï¼‰ï¼Œæ¯ä¸ªå‰¯æœ¬éƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆå¦‚elasticsearch-0ï¼‰ã€‚</li><li>ä½¿ç”¨åˆå§‹åŒ–å®¹å™¨ï¼ˆinitContainersï¼‰æ¥å¤„ç†æƒé™ã€ç³»ç»Ÿå‚æ•°å’Œæ–‡ä»¶æè¿°ç¬¦çš„è®¾ç½®ã€‚</li><li>å®šä¹‰äº†ä¸»å®¹å™¨elasticsearchï¼Œå¹¶æŒ‡å®šäº†ç¯å¢ƒå˜é‡ã€èµ„æºè¯·æ±‚å’Œé™åˆ¶ï¼Œä»¥åŠæŒ‚è½½æ•°æ®å·ã€‚</li></ul> 
<p><strong>4. Services</strong></p> 
<ul><li>åˆ›å»ºäº†ä¸€ä¸ªæ— å¤´æœåŠ¡elasticsearch-clusterï¼Œç”¨äºPodä¹‹é—´çš„å†…éƒ¨é€šä¿¡ã€‚</li><li>åˆ›å»ºäº†ä¸€ä¸ªNodePortæœåŠ¡elasticsearchï¼Œæš´éœ²9200ç«¯å£åˆ°é›†ç¾¤å¤–éƒ¨ã€‚</li><li>ä¸ºæ¯ä¸ªStatefulSetçš„Podåˆ›å»ºå•ç‹¬çš„NodePortæœåŠ¡ï¼Œåˆ†åˆ«æš´éœ²åœ¨ä¸åŒçš„ç«¯å£ï¼ˆ30000-30004ï¼‰ï¼Œç”¨äºç›´æ¥è®¿é—®ç‰¹å®šçš„Podã€‚</li></ul> 
<p><strong>5. Elasticsearch Head éƒ¨ç½²å’ŒæœåŠ¡</strong></p> 
<ul><li>éƒ¨ç½²Elasticsearch Headæ’ä»¶ï¼Œç”¨äºå›¾å½¢åŒ–ç®¡ç†å’Œæµè§ˆElasticsearché›†ç¾¤ã€‚</li><li>æš´éœ²Elasticsearch Headçš„9100ç«¯å£ï¼Œä½¿ç”¨NodePortç±»å‹æœåŠ¡ï¼Œç«¯å£å·ä¸º30910ã€‚</li></ul> 
<h3 id="2%E3%80%81%E9%83%A8%E7%BD%B2%C2%A0Elasticsearch">2ã€éƒ¨ç½²Â Elasticsearch</h3> 
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p> 
<p class="img-center"><img alt="" height="357" src="https://images2.imgbox.com/61/90/VPsNxnP3_o.png" width="777"></p> 
<h3 id="3%E3%80%81%E6%9F%A5%E7%9C%8BPod%E7%8A%B6%E6%80%81">3ã€æŸ¥çœ‹PodçŠ¶æ€</h3> 
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p> 
<p class="img-center"><img alt="" height="261" src="https://images2.imgbox.com/8c/1f/dMQ9SB3l_o.png" width="915"></p> 
<h3 id="4%E3%80%81%E8%AE%BF%E9%97%AE%E6%B5%8B%E8%AF%95%C2%A0">4ã€è®¿é—®æµ‹è¯•Â </h3> 
<p>æŸ¥çœ‹svcçš„nodeportç«¯å£</p> 
<p class="img-center"><img alt="" height="279" src="https://images2.imgbox.com/69/06/zELgSZCj_o.png" width="1180"></p> 
<p>åœ¨æµè§ˆå™¨è¾“å…¥Nodeçš„IPåŠ 30910ç«¯å£</p> 
<p>åœ¨è¿æ¥çª—å£è¾“å…¥ Nodeçš„IPåŠ 30001ç«¯å£ï¼Œç‚¹å‡»è¿æ¥</p> 
<p>å¦‚æœèƒ½æ˜¾ç¤ºä¸‹é¢çš„ç»“æœï¼Œåˆ™é›†ç¾¤éƒ¨ç½²æˆåŠŸ</p> 
<p class="img-center"><img alt="" height="1140" src="https://images2.imgbox.com/41/3e/OM0iDcVz_o.png" width="1200"></p> 
<blockquote> 
 <p>Â ğŸ’•ğŸ’•ğŸ’•æ¯ä¸€æ¬¡çš„åˆ†äº«éƒ½æ˜¯ä¸€æ¬¡æˆé•¿çš„æ—…ç¨‹ï¼Œæ„Ÿè°¢æ‚¨çš„é™ªä¼´å’Œå…³æ³¨ã€‚å¸Œæœ›è¿™äº›å…³äºElasticsearchçš„æ–‡ç« èƒ½é™ªä¼´æ‚¨èµ°è¿‡æŠ€æœ¯çš„ä¸€æ®µæ—…ç¨‹ï¼Œå…±åŒè§è¯æˆé•¿å’Œè¿›æ­¥ï¼ğŸ˜ºğŸ˜ºğŸ˜º</p> 
 <p></p> 
 <p>ğŸ§¨ğŸ§¨ğŸ§¨è®©æˆ‘ä»¬ä¸€èµ·åœ¨æŠ€æœ¯çš„æµ·æ´‹ä¸­æ¢ç´¢å‰è¡Œï¼Œå…±åŒä¹¦å†™ç¾å¥½çš„æœªæ¥ï¼ï¼ï¼Â </p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/47909f28a6aee600dc5f9d92cc42ef81/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">oracleçš„json_arrayaggçš„ç”¨æ³•å’Œä¾‹å­</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/febd54d8f768ef1474d7f0868017c1ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ä¸€ç¯‡æ–‡ç« çœ‹æ‡‚RedissionåŸç†</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>