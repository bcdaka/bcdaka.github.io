<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Tomcat 部署及优化 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7c7c6c53f9d742cf3118765f8d3fac47/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Tomcat 部署及优化">
  <meta property="og:description" content="Tomcat概述
自2017年11月编程语言排行榜Java 占比13%,高居榜首，Tomcat 也一度成为Java 开发人员的首选。其开源、占用系统资源少、跨平台等特性深受广大程序员喜爱。
Tomcat核心组件
Tomcat由一系列的组件构成，其中核心的组件有三个。
Web 容器：完成Web 服务器的功能。
Servlet容器：名字为catalina,用于处理Servlet 代码。
JSP 容器：用于将JSP 动态网页翻译成Servlet代码。
Tomcat请求处理
用户在浏览器中输入网址localhost:8080/test/index jsp,请求被发送到本机端口8080,被在那里监听的Coyote HTTP/1.1 Connector获得；Connector 把该请求交给它所在的Service 的Engine (Container) 来处理，并等待Engine 的回应：Engine获得请求localhost/test/indexjsp, 匹配所有的虚拟主机Host;Engine匹配到名为localhost的Host (即使匹配不到也把请求交给该Host 处理，因为该Host被定义为该Engine的默认主机),名为localhost的 Host 获得请求 /testindexjsp,匹配它所拥有的所有Context。Host匹配到路径为/test的 Context (如果匹配不到就把该请求交给路径名为“”的Context去处理);path=&#34;/test&#34;的Context 获得请求/indexjsp, 在它的mapping table 中寻找出对应的Servlet。Context 匹配到URL Pattern为*jsp的Servlet,对应于JspServlet类；
构造HttpServletRequest对象和 HttpServletResponse 对象，作为参数调用JspServlet的doGet()或doPost() ,执行业务逻辑、数据存储等；Context 把执行完之后的HttpServletResponse 对象返回给Host;Host 把 HttpServletResponse 对象返回给Engine;Engine 把HttpServletResponse对象返回Connector;Connector 把 HttpServletResponse对象返回给客户Browser。
下载并安装JDK
下载完安装包后，将其上传到服务器/root目录下，执行安装命令。
[root@localhost ~]#rpm -ivhjdk-8u171-linux-X64.rpm
查看版本号
安装启动Tomcat
1.安装Tomcat服务
2. 优 化Tomcat 服务启动时间
3.Tomcat目录结构
conf目录：用于存放Tomcat服务器的各种配置文件，比较常用的是server.xml、context.xml 、tomcat-users.xml 、web.xml四个文件。
bin 目录：用于存放启动和关闭Tomcat的脚本文件，比较常用的是catalina.sh、startup.sh、shutdown.sh三个文件。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-22T17:40:26+08:00">
    <meta property="article:modified_time" content="2024-07-22T17:40:26+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Tomcat 部署及优化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Tomcat概述</p> 
<p>自2017年11月编程语言排行榜Java 占比13%,高居榜首，Tomcat 也一度成为Java 开发人员的首选。其开源、占用系统资源少、跨平台等特性深受广大程序员喜爱。</p> 
<p>Tomcat核心组件</p> 
<p>Tomcat由一系列的组件构成，其中核心的组件有三个。</p> 
<p>Web  容器：完成Web 服务器的功能。</p> 
<p>Servlet容器：名字为catalina,用于处理Servlet 代码。</p> 
<p>JSP 容器：用于将JSP 动态网页翻译成Servlet代码。</p> 
<p>Tomcat请求处理</p> 
<p>用户在浏览器中输入网址localhost:8080/test/index  jsp,请求被发送到本机端口8080,被在那里监听的Coyote HTTP/1.1 Connector获得；Connector 把该请求交给它所在的Service 的Engine  (Container)  来处理，并等待Engine 的回应：Engine获得请求localhost/test/indexjsp, 匹配所有的虚拟主机Host;Engine匹配到名为localhost的Host (即使匹配不到也把请求交给该Host 处理，因为该Host被定义为该Engine的默认主机),名为localhost的 Host 获得请求 /testindexjsp,匹配它所拥有的所有Context。Host匹配到路径为/test的 Context (如果匹配不到就把该请求交给路径名为“”的Context去处理);path="/test"的Context 获得请求/indexjsp, 在它的mapping table 中寻找出对应的Servlet。Context 匹配到URL Pattern为*jsp的Servlet,对应于JspServlet类；</p> 
<p>构造HttpServletRequest对象和 HttpServletResponse 对象，作为参数调用JspServlet的doGet()或doPost() ,执行业务逻辑、数据存储等；Context 把执行完之后的HttpServletResponse 对象返回给Host;Host   把 HttpServletResponse 对象返回给Engine;Engine 把HttpServletResponse对象返回Connector;Connector 把 HttpServletResponse对象返回给客户Browser。</p> 
<p>下载并安装JDK</p> 
<p>下载完安装包后，将其上传到服务器/root目录下，执行安装命令。</p> 
<p>[root@localhost ~]#rpm -ivhjdk-8u171-linux-X64.rpm</p> 
<p><img alt="" height="834" src="https://images2.imgbox.com/9f/ac/BpyCIRlp_o.png" width="1200"></p> 
<p>查看版本号</p> 
<p><img alt="" height="685" src="https://images2.imgbox.com/e7/ec/dpxGHSLv_o.png" width="1038"></p> 
<p>安装启动Tomcat</p> 
<p>1.安装Tomcat服务</p> 
<p><img alt="" height="988" src="https://images2.imgbox.com/9d/54/ZJKJ2EJw_o.png" width="1200"></p> 
<p>2. 优 化Tomcat 服务启动时间</p> 
<p><img alt="" height="748" src="https://images2.imgbox.com/90/92/Dld61Nw1_o.png" width="1200"></p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/2c/13/3xCxA7mD_o.png" width="1200"></p> 
<p>3.Tomcat目录结构</p> 
<p><img alt="" height="487" src="https://images2.imgbox.com/4d/bb/Nm3SN743_o.png" width="1200"></p> 
<p>conf目录：用于存放Tomcat服务器的各种配置文件，比较常用的是server.xml、context.xml 、tomcat-users.xml 、web.xml四个文件。</p> 
<p>bin 目录：用于存放启动和关闭Tomcat的脚本文件，比较常用的是catalina.sh、startup.sh、shutdown.sh三个文件。</p> 
<p>lib 目录：用于存放Tomcat服务器的jar包，一般不作任何改动，除非连接第三方服务，比如redis ,那就需要添加相对应的jar 包。logs 目录：用于存放Tomcat日志。</p> 
<p>temp 目 录：用于存放Tomcat 运行时产生的文件。</p> 
<p>webapps  目录：用于存放项目资源的目录。</p> 
<p>work目录：是Tomcat工作目录，一般清除Tomcat 缓存的时候会使用到。</p> 
<p>Tomcat配置与优化</p> 
<p>虚拟主机配置</p> 
<p>1.创建www和 bbs项目目录和文件</p> 
<p><img alt="" height="361" src="https://images2.imgbox.com/81/aa/CrBoXxQP_o.png" width="1200"></p> 
<p>2. 修改Tomcat 主配置文件</p> 
<p><img alt="" height="978" src="https://images2.imgbox.com/7f/16/ztmJaM7r_o.png" width="919"></p> 
<p>3.虚拟主机访问测试</p> 
<p>客户端绑定两个域名需要写入本机 hosts,Tomcat 默认端口是8080。</p> 
<p><img alt="" height="168" src="https://images2.imgbox.com/c8/55/bEm6Gryb_o.png" width="552"></p> 
<p>Tomcat优化</p> 
<p>1.Tomcat 配置文件参数优化</p> 
<p>maxThreads:Tomcat    使用线程来处理接收的每个请求，这个值表示Tomcat 可创建的 最大的线程数，默认值是200。</p> 
<p>minSpareThreads:   最小空闲线程数，Tomcat  启动时的初始化线程数，表示即使没有人使用也开这么多空线程等待，默认值是 10。maxSpareThreads:   最大备用线程数，一旦创建的线程超过这个值，Tomcat  就会关闭不再需要的socket线程。默认值是-1(无限制),一般不需要指定。</p> 
<p>URIEncoding: 指定 Tomcat 容器的 URL 编码格式，Tomcat语言编码格式这块不如其它Web服务器软件配置方便，需要分别指定。</p> 
<p>connnectionTimeout:   网络连接超时，单位：毫秒，设置为0表示永不超时，这样设置有隐患的。通常默认20000 毫秒就可以。</p> 
<p>enableLookups:   是否反查域名，以返回远程主机的主机名，取值为：true 或 false,如果设置为false,则直接返回IP 地址，为了提高处理能力，应设置为false。</p> 
<p>disableUploadTimeout: 上传时是否使用超时机制。应设置为true。</p> 
<p>connectionUploadTimeout :上传超时时间，毕竟文件上传可能需要消耗更多的时间，该参数需要根据自己的业务需要自行调整，以使Servlet有较长的时间来完成它的执行，需要与上一个参数一起配合使用才会生效。</p> 
<p>acceptCount:   指定当所有可以使用的处理请求的线程都被使用时，可传入连接请求的最大队列长度，超过这个数的请求将不予处理，默认为100 个。</p> 
<p>compression:   是否对响应的数据进行GZIP  压缩，off表示禁止压缩、on 表示允许压缩(文本将被压缩)、force表示所有情况下都进行压缩，默认值为 off。压缩数据后可以有效的减少页面的大小，一般可以减小1/3 左右，因而节省带宽。</p> 
<p>compressionMinSize:  表示压缩响应的最小值，只有当响应报文大小大于这个值的时候才会对报文进行压缩，如果开启了压缩功能，默认值就是2048。</p> 
<p>compressableMimeType:  压缩类型，指定对哪些类型的文件进行数据压缩。</p> 
<p>2.jmeter压测工具</p> 
<p>(1)客户端安装JDK</p> 
<p>从 Oracle 官方下载JDK 软件，JDK 安装过程直接下一步即可。因为本章中所使用的客户端是Windows  10,所 以JDK 使用jdk-8u102-windows-x64版本。</p> 
<p>(2)运行 jmeter软件</p> 
<p><img alt="" height="759" src="https://images2.imgbox.com/f4/b3/KBVR1gve_o.png" width="1200"></p> 
<p>(3) 打开压测脚本进行压测</p> 
<p><img alt="" height="805" src="https://images2.imgbox.com/58/07/orYlyVbC_o.png" width="1200"></p> 
<p><img alt="" height="784" src="https://images2.imgbox.com/be/5f/EoA5JtTC_o.png" width="1200"></p> 
<p><img alt="" height="327" src="https://images2.imgbox.com/01/e7/4CXgQNdn_o.png" width="1200"></p> 
<p>(4)修改Tomcat配置</p> 
<p><img alt="" height="1024" src="https://images2.imgbox.com/25/c1/xiPrUdyS_o.png" width="1089"></p> 
<p><img alt="" height="364" src="https://images2.imgbox.com/c0/41/uWUxivkL_o.png" width="1200"></p> 
<p>(5)修改配置参数后压测</p> 
<p><img alt="" height="334" src="https://images2.imgbox.com/34/8f/rfHcqfgm_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a6792b5d455fb33cc0bbded0ec67dc57/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ML.Net 学习之使用经过训练的模型进行预测</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d807c6f034dcf4260f7318691fa18746/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">容器内压力测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>