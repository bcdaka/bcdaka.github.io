<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Docker】Docker Compose（容器编排） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6148bba44b78497a83c9395a92a703ea/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Docker】Docker Compose（容器编排）">
  <meta property="og:description" content="一、什么是 Docker Compose docker-compose 是 Docker 官方的开源项目，使用 python 编写，实现上调用了 Docker 服务的 API 进行容器管理及编排，其官方定义为定义和运行多个 Docker 容器的应用。
docker-compose 中有两个非常重要的概念：
服务（service）：一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。项目（project）：由一组关联的应用容器组成的一个完整业务单元，在 docker-compose.yml 文件中定义，整个 docker-compose.yml 定义一个项目。 Compose 的默认管理对象是项目，通过子命令对项目中的一组容器进行便捷地生命周期管理。
通过 compose 可以方便的管理多个服务。
二、生活案例 docker compose 就像航母一样，有舰载机、防空导弹，舰载机、导弹就是一个个容器。
三、为什么要 Docker Compose Docker 是一个轻量化的应用程序，Docker 官方推荐每个 Docker 容器中只运行一个进程。如果一个应用需要涉及到 MySQL、nginx 等环境， 那么就需要分别为应用、数据库和 nginx 创建单独的 docker 容器，然后再分别启动容器。
如果构建好 Docker 之后，每次启动应用都至少需要 docker run 三次或者写一些脚本来实现，这样会比较繁琐。另外，这些 docker 容器都是分散独立的，也不方便镜像管理。
既然这些 docker 容器都是为了同一个应用服务，就应该把它们放到一起，这就引出了 docker-compose 来解决这类型的问题。 四、Docker Compose 的安装 安装 docker 的时候，我已经安装了 docker-compose，安装的组件包名称为 docker-compose-plugin。
检查安装是否成功：
五、Docker Compose 的功能 1、使用步骤 Compose 使用的步骤： 使用 docker-compose.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-18T17:14:32+08:00">
    <meta property="article:modified_time" content="2024-08-18T17:14:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Docker】Docker Compose（容器编排）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、<span style="color:#000000;">什么是 Docker Compose</span></h2> 
<p><span style="color:#fe2c24;"><strong>docker-compose</strong></span><span style="color:#000000;"> 是 </span><span style="color:#000000;">Docker </span><span style="color:#000000;">官方的开源项目，使用 </span><span style="color:#000000;">python </span><span style="color:#000000;">编写，实现上<span style="background-color:#ffd900;">调用了 Docker 服务的 </span></span><span style="color:#000000;"><span style="background-color:#ffd900;">API </span></span><span style="color:#000000;"><span style="background-color:#ffd900;">进行容器管理及编排</span>，其官方定义为<span style="background-color:#ffd900;">定义和运行多个 </span></span><span style="color:#000000;"><span style="background-color:#ffd900;">Docker 容器的应用</span>。</span></p> 
<p><span style="color:#000000;">docker-compose 中有两个非常重要的概念：</span></p> 
<ol><li><span style="color:#fe2c24;"><strong>服务</strong></span><span style="color:#000000;"><strong>（service）</strong>：</span><span style="color:#000000;">一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。</span></li><li><span style="color:#fe2c24;"><strong>项目</strong></span><span style="color:#000000;"><strong>（project）</strong>：由一组关联的应用容器组成的一个完整业务单元，在 </span><span style="color:#000000;">docker-compose.yml 文件中定义，</span><span style="color:#000000;">整个 </span><span style="color:#000000;">docker-compose.yml </span><span style="color:#000000;">定义一个项目。</span></li></ol> 
<p><span style="color:#000000;">Compose 的默认管理对象是项目，通过子命令对项目中的一组容器进行便捷地生命周期管理。</span></p> 
<p><span style="color:#000000;">通过 compose </span><span style="color:#000000;"><span style="background-color:#ffd900;">可以方便的管理多个服务</span>。</span></p> 
<p><img alt="" height="277" src="https://images2.imgbox.com/8d/55/Pd92vqkH_o.png" width="560"></p> 
<hr> 
<h2>二、<span style="color:#000000;">生活案例 </span></h2> 
<p><span style="color:#000000;">docker compose </span><span style="color:#000000;">就像航母一样，有舰载机、防空导弹，舰载机、导弹就是一个个容器。</span></p> 
<hr> 
<h2> <span style="color:#000000;">三、为什么要 Docker Compose </span> </h2> 
<p><span style="color:#000000;">Docker 是一个轻量化的应用程序，</span><span style="color:#000000;">Docker </span><span style="color:#000000;">官方推荐每个 </span><span style="color:#000000;">Docker </span><span style="color:#000000;">容器中只运行一个进程<strong>。</strong>如果一个应用需要涉及到 MySQL、</span><span style="color:#000000;">nginx </span><span style="color:#000000;">等环境， 那么就需要分别为应用、数据库和 nginx </span><span style="color:#000000;">创建单独的 </span><span style="color:#000000;">docker </span><span style="color:#000000;">容器，然后再分别启动容器。</span></p> 
<p><span style="color:#000000;">如果构建好 Docker 之后，每次启动应用都至少需要 docker run 三次或者写一些脚本来实现，这样会比较繁琐。另外，这些 docker 容器都是分散独立的，也不方便镜像管理。</span></p> 
<p><span style="color:#000000;">既然这些 docker 容器都是为了同一个应用服务，就应该把它们放到一起，这就引出了 docker-compose 来解决这类型的问题。 </span></p> 
<hr> 
<h2>四、<span style="color:#000000;">Docker Compose 的安装 </span></h2> 
<p><span style="color:#000000;">安装 </span><span style="color:#000000;">docker </span><span style="color:#000000;">的时候，我已经安装了 </span><span style="color:#000000;">docker-compose，</span><span style="color:#000000;">安装的组件包名称为 docker-compose-plugin。</span></p> 
<p><strong><span style="color:#000000;">检查安装是否成功：</span></strong></p> 
<p><img alt="" height="42" src="https://images2.imgbox.com/e7/46/Zc2fZXF8_o.png" width="420"></p> 
<hr> 
<h2>五、<span style="color:#000000;">Docker Compose 的功能 </span></h2> 
<h3><span style="color:#000000;">1、使用步骤 </span></h3> 
<p><strong><span style="color:#000000;">Compose </span><span style="color:#000000;">使用的步骤： </span></strong></p> 
<ul><li><span style="color:#000000;">使用<strong> </strong></span><strong><span style="color:#000000;">docker-compose.yml </span></strong><span style="color:#000000;">定义构成应用程序的服务，这样它们就可以在隔离环境中一起运行。 </span></li><li><span style="color:#000000;">执行 </span><span style="color:#fe2c24;">docker compose up</span><span style="color:#000000;"> </span><span style="color:#000000;">命令来启动并运行整个应用程序。 </span></li></ul> 
<hr> 
<h3><span style="color:#000000;">2、核心功能 </span></h3> 
<p><strong><span style="color:#000000;">Compose </span><span style="color:#000000;">具有管理应用程序整个生命周期的命令： </span></strong></p> 
<ul><li><span style="color:#000000;">启动，停止和重建服务 </span></li><li><span style="color:#000000;">查看正在运行的服务的状态 </span></li><li><span style="color:#000000;">流式传输运行服务的日志输出 </span></li><li><span style="color:#000000;">在服务上运行一次性命令</span></li></ul> 
<hr> 
<h2>六、<span style="color:#000000;">Docker Compose 使用场景 </span></h2> 
<h3><span style="color:#000000;">1、单主机部署 </span></h3> 
<p><span style="color:#000000;">快速搭建一个单节点开发或者测试环境，方便使用。 </span></p> 
<hr> 
<h3><span style="color:#000000;">2、不同环境隔离 </span></h3> 
<p><span style="color:#000000;">通过指定 </span><span style="color:#000000;">project </span><span style="color:#000000;">来运行不同的环境，实现隔离的目的。 </span></p> 
<div> 
 <hr> 
 <h2><span style="color:#000000;">七、Docker Compose </span><span style="color:#000000;">文件（</span><span style="color:#000000;">docker-compose.yml</span><span style="color:#000000;">） </span></h2> 
 <h3>1、<span style="color:#000000;">文件语法版本 </span></h3> 
 <p><span style="color:#000000;">目前官方支持三个大版本， 即 </span><span style="color:#000000;">Version 1</span><span style="color:#000000;">、</span><span style="color:#000000;">Version 2 </span><span style="color:#000000;">及 </span><span style="color:#000000;">Version 3</span><span style="color:#000000;">， 其中 </span><span style="color:#000000;">Version 1 </span><span style="color:#000000;">已经被废弃掉了。当前最新的版本是 3.8</span><span style="color:#000000;">，它支持的 </span><span style="color:#000000;">Docker Engine </span><span style="color:#000000;">版本不得低于 </span><span style="color:#000000;">19.03.0</span><span style="color:#000000;">。后面的学习主要是基于 3.8 </span><span style="color:#000000;">版本的 </span><span style="color:#000000;">Compose file 语法进行讲解，其他版本的介绍可以参考：</span></p> 
 <p><a href="https://docs.docker.com/compose/compose-file/compose-versioning/" rel="nofollow" title="https://docs.docker.com/compose/compose-file/compose-versioning/">https://docs.docker.com/compose/compose-file/compose-versioning/</a></p> 
 <p><img alt="" height="468" src="https://images2.imgbox.com/77/10/ujOWp2Ig_o.png" width="520"></p> 
 <hr> 
 <h3>2、<span style="color:#000000;">文件基本结构及常见指令</span></h3> 
 <pre><code class="hljs">version: "3.8" # 定义版本， 表示当前使用的 docker-compose 语法的版本

services: # 服务, 可以存在多个
servicename: # 服务名字, 它也是内部 bridge 网络可以使用的 DNS name, 如果不是集群模式相当于 docker run 的时候指定的一个名称
  #集群(Swarm)模式是多个容器的逻辑抽象
  image: # 必选，镜像的名字
  command: # 可选，如果设置，则会覆盖默认镜像里的 CMD 命令
  environment: # 可选，等价于 docker container run 里的 --env 选项设置环境变量
  volumes: # 可选，等价于 docker container run 里的 -v 选项 绑定数据卷
  networks: # 可选，等价于 docker container run 里的 --network 选项指定网络
  ports: # 可选，等价于 docker container run 里的 -p 选项指定端口映射
  expose: # 可选，指定容器暴露的端口 
  build: #构建目录
  depends_on: #服务依赖配置
  env_file: #环境变量文件
servicename2:
  image: 
  command: 
  networks: 
  ports: 
servicename3:
  #...

volumes: # 可选，等价于 docker volume create
networks: # 可选，等价于 docker network create</code></pre> 
 <hr> 
 <h4>（1）<span style="color:#000000;">常见字段格式语法 </span></h4> 
 <h5 style="background-color:transparent;"><span style="color:#000000;">A. image </span></h5> 
 <blockquote> 
  <p><span style="color:#000000;">指定容器运行的镜像。</span></p> 
 </blockquote> 
 <p><span style="color:#000000;">以下格式都可以： </span></p> 
 <pre><code class="hljs">image: redis
image: redis:5
image: 
redis@sha256:0ed5d5928d4737458944eb604cc8509e245c3e19d02ad83935398
bc4b991aac7
image: library/redis
image: docker.io/library/redis
image: my_private.registry:5000/redis</code></pre> 
 <p><img alt="" height="161" src="https://images2.imgbox.com/3b/8e/RUX76D0a_o.png" width="320"></p> 
 <hr> 
 <h5 style="background-color:transparent;">B. <span style="color:#000000;">command </span></h5> 
 <blockquote> 
  <div> 
   <span style="color:#000000;">覆盖容器启动的默认命令。 </span> 
  </div> 
 </blockquote> 
 <div> 
  <pre><code class="hljs">command: ["bundle", "exec", "thin", "-p", "3000"]
command: bundle exec thin -p 3000</code></pre> 
  <p><img alt="" height="144" src="https://images2.imgbox.com/90/4a/23FPVdca_o.png" width="360"></p> 
  <hr> 
  <h5>C. <span style="color:#000000;">entrypoint </span></h5> 
  <blockquote> 
   <div> 
    <span style="color:#000000;">覆盖容器默认的 </span> 
    <span style="color:#000000;">entrypoint</span> 
    <span style="color:#000000;">。 </span> 
   </div> 
  </blockquote> 
  <div> 
   <pre><code class="hljs">entrypoint: /code/entrypoint.sh</code></pre> 
   <p><span style="color:#000000;">也可以是以下格式：</span></p> 
   <pre><code class="hljs">entrypoint:
  - php
  - -d
  - zend_extension=/usr/local/lib/php/extensions/no-debug-nonzts-20100525/xdebug.so
  - -d
  - memory_limit=-1
  - vendor/bin/phpunit</code></pre> 
   <p><img alt="" height="221" src="https://images2.imgbox.com/8f/59/z91JXoOk_o.png" width="320"></p> 
   <hr> 
   <h5>D. <span style="color:#000000;">environment </span></h5> 
   <p><span style="color:#000000;">添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML </span><span style="color:#000000;">解析器不会将其转换为 </span><span style="color:#000000;">True </span><span style="color:#000000;">或 </span><span style="color:#000000;">False</span><span style="color:#000000;">。</span></p> 
   <pre><code class="hljs">#map 语法
environment:
  RACK_ENV: development
  SHOW: "true"
  USER_INPUT:
#数组语法
environment:
  - RACK_ENV=development
  - SHOW=true
  - USER_INPUT</code></pre> 
   <p><img alt="" height="22" src="https://images2.imgbox.com/5c/62/OikBZdUX_o.png" width="320"></p> 
   <p><img alt="" height="96" src="https://images2.imgbox.com/87/fc/xnVzIzJy_o.png" width="520"></p> 
   <hr> 
   <h5><span style="color:#000000;">E. networks </span></h5> 
   <p><span style="color:#000000;">指定容器运行的网络： </span></p> 
   <p><span style="color:#000000;">配置容器网络：</span></p> 
   <pre><code class="hljs">services:
  frontend:
    image: awesome/webapp
    networks:
      - front-tier
      - back-tier

  monitoring:
    image: awesome/monitoring
    networks:
      - admin

  backend:
    image: awesome/backend
    networks:
      back-tier:
        aliases:
          - database
    admin:
      aliases:
        - mysql

networks:
  front-tier:
  back-tier:
  admin:</code></pre> 
   <p><span style="color:#000000;">配置网络驱动和子网信息：</span></p> 
   <pre><code class="hljs">services:
  frontend:
    image: awesome/webapp
    networks:
      front-tier:
        ipv4_address: 172.16.238.10

networks:
  front-tier:
    ipam:
      driver: default
      config:
        - subnet: "172.16.238.0/24"</code></pre> 
   <p><img alt="" height="284" src="https://images2.imgbox.com/d5/79/Ix2SfgIu_o.png" width="260"></p> 
   <p><img alt="" height="288" src="https://images2.imgbox.com/4c/2a/xX560u6g_o.png" width="700"></p> 
   <hr> 
   <h5><span style="color:#000000;">F. volumes </span></h5> 
   <blockquote> 
    <div> 
     <span style="color:#000000;">将主机的数据卷或者文件挂载到容器里。 </span> 
    </div> 
   </blockquote> 
   <div> 
    <pre><code class="hljs">#短语法
services:
  db:
  image: postgres:latest
  volumes:
    - "/localhost/postgres.sock:/var/run/postgres/postgres.sock"
    - "/localhost/data:/var/lib/postgresql/data"
 
#完整语法
services:
  backend:
  image: awesome/backend
  volumes:
    - type: volume
      #命名卷
      source: db-data
      target: /data
      volume:
        nocopy: true
      #绑定卷
    - type: bind
      source: /var/run/postgres/postgres.sock
      target: /var/run/postgres/postgres.sock

volumes:
  db-data:</code></pre> 
    <p><img alt="" height="195" src="https://images2.imgbox.com/43/89/vGbnGCP5_o.png" width="420"></p> 
    <p><img alt="" height="314" src="https://images2.imgbox.com/a0/73/31PZhctZ_o.png" width="700"></p> 
    <p><img alt="" height="97" src="https://images2.imgbox.com/77/1a/4vtsBwzb_o.png" width="520"></p> 
    <p><img alt="" height="42" src="https://images2.imgbox.com/17/37/4qYTGB3g_o.png" width="360"></p> 
    <hr> 
    <h5>G. <span style="color:#000000;">ports </span></h5> 
    <p><span style="color:#000000;">指定端口映射。以下格式都可以： </span></p> 
    <pre><code class="hljs">#完整语法
ports:
  - target: 80
    host_ip: 127.0.0.1
    published: 8080
    protocol: tcp
    mode: host
   
 - target: 80
    host_ip: 127.0.0.1
    published: 8000-9000
    protocol: tcp
    mode: host
#短语法
ports:
  - "3000"
  - "3000-3005"
  - "8000:8000"
  - "9090-9091:8080-8081"
  - "49100:22"
  - "127.0.0.1:8001:8001"
  - "127.0.0.1:5000-5010:5000-5010"
  - "6060:6060/udp"</code></pre> 
    <p><img alt="" height="222" src="https://images2.imgbox.com/67/7a/R2PJjzUr_o.png" width="320"></p> 
    <p><img alt="" height="301" src="https://images2.imgbox.com/4c/a8/6clWe3y3_o.png" width="700"></p> 
    <p><img alt="" height="59" src="https://images2.imgbox.com/47/16/mErSKfgU_o.png" width="420"></p> 
    <p><img alt="" height="240" src="https://images2.imgbox.com/d3/73/tAoVPGVa_o.png" width="700"></p> 
    <hr> 
    <h5>H. <span style="color:#000000;">expose </span></h5> 
    <p><span style="color:#000000;">暴露端口，但不映射到宿主机，只被连接的服务访问。 </span></p> 
    <p><span style="color:#000000;">仅可以指定内部端口为参数：</span></p> 
    <pre><code class="hljs">expose:
  - "3000"
  - "8000"</code></pre> 
    <p><img alt="" height="24" src="https://images2.imgbox.com/7a/b2/rW1WxhAl_o.png" width="320"></p> 
    <p><img alt="" height="261" src="https://images2.imgbox.com/a9/08/1DKjmgha_o.png" width="700"></p> 
    <hr> 
    <h5>I. <span style="color:#000000;">build </span></h5> 
    <p><span style="color:#000000;">指定为构建镜像上下文路径： </span></p> 
    <p><span style="color:#000000;">例如 </span><span style="color:#000000;">webapp </span><span style="color:#000000;">服务，指定为从上下文路径 </span><span style="color:#000000;">./dir/Dockerfile </span><span style="color:#000000;">所构建的镜像：</span></p> 
    <pre><code class="hljs">version: "3.7"
services:
  webapp:
  build: ./dir</code></pre> 
    <p><span style="color:#000000;">或者，作为具有在上下文指定的路径的对象，以及可选的 </span><span style="color:#000000;">Dockerfile </span><span style="color:#000000;">和 </span><span style="color:#000000;">args</span><span style="color:#000000;">：</span></p> 
    <pre><code class="hljs">version: "3.7"
services:
  webapp:
    build:
      context: ./dir
      dockerfile: Dockerfile-alternate
      args:
        buildno: 1
      labels:
        - "com.example.description=Accounting webapp"
        - "com.example.department=Finance"
        - "com.example.label-with-empty-value"</code></pre> 
    <ul><li><span style="color:#000000;">context</span><span style="color:#000000;">：上下文路径。 </span></li><li><span style="color:#000000;">dockerfile</span><span style="color:#000000;">：指定构建镜像的 </span><span style="color:#000000;">Dockerfile </span><span style="color:#000000;">文件名。 </span></li><li><span style="color:#000000;">args</span><span style="color:#000000;">：添加构建参数，这是只能在构建过程中访问的环境变量。 </span></li><li><span style="color:#000000;">labels</span><span style="color:#000000;">：设置构建镜像的标签。</span></li></ul> 
    <hr> 
    <h5>J. <span style="color:#000000;">depends_on </span></h5> 
    <blockquote> 
     <div> 
      <span style="color:#000000;">设置依赖关系。 </span> 
     </div> 
    </blockquote> 
    <ul><li><span style="color:#000000;">docker compose up：</span><span style="color:#000000;">以依赖性顺序启动服务。在以下示例中，先启动 </span><span style="color:#000000;">db </span><span style="color:#000000;">和 </span><span style="color:#000000;">redis </span><span style="color:#000000;">，才会启动 </span><span style="color:#000000;">web</span><span style="color:#000000;">。 </span></li><li><span style="color:#000000;">docker compose up SERVICE：</span><span style="color:#000000;">自动包含 </span><span style="color:#000000;">SERVICE </span><span style="color:#000000;">的依赖项。在以下示例中，</span><span style="color:#000000;">docker compose up web </span><span style="color:#000000;">还将创建并启动 </span><span style="color:#000000;">db </span><span style="color:#000000;">和 </span><span style="color:#000000;">redis</span><span style="color:#000000;">。 </span></li><li><span style="color:#000000;">docker compose stop：</span><span style="color:#000000;">按依赖关系顺序停止服务。在以下示例中，</span><span style="color:#000000;">web </span><span style="color:#000000;">在 </span><span style="color:#000000;">db </span><span style="color:#000000;">和 </span><span style="color:#000000;">redis </span><span style="color:#000000;">之前停止。</span></li></ul> 
    <pre><code class="hljs">version: "3.7"
services:
  web:
    build: .
    depends_on:
      - db
      - redis
  redis:
    image: redis
  db:
    image: postgres</code></pre> 
    <p><span style="color:#000000;">可以指定条件，</span><span style="color:#000000;">healthy </span><span style="color:#000000;">需要配置 </span><span style="color:#000000;">healthcheck </span><span style="color:#000000;">来完成。</span></p> 
    <pre><code class="hljs">services:
  web:
    build: .
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_started
  redis:
    image: redis
  db:
    image: postgres</code></pre> 
    <p><span style="color:#000000;">health check </span><span style="color:#000000;">样例</span>：</p> 
    <p><img alt="" height="345" src="https://images2.imgbox.com/07/f1/beIs7jjm_o.png" width="420"></p> 
    <p><img alt="" height="315" src="https://images2.imgbox.com/f5/ac/axEokBZG_o.png" width="700"></p> 
    <hr> 
    <h5>K. <span style="color:#000000;">env_file </span></h5> 
    <blockquote> 
     <div> 
      <span style="color:#000000;">从文件添加环境变量。可以是单个值或列表的多个值。 </span> 
     </div> 
    </blockquote> 
    <div> 
     <pre><code class="hljs">env_file: .env</code></pre> 
     <p><span style="color:#000000;">也可以是列表格式：</span></p> 
     <pre><code class="hljs">env_file:
  - ./common.env
  - ./apps/web.env
  - /opt/secrets.env</code></pre> 
    </div> 
   </div> 
  </div> 
 </div> 
 <p><img alt="" height="203" src="https://images2.imgbox.com/2b/c1/cjHnbp4f_o.png" width="260"></p> 
 <p><img alt="" height="156" src="https://images2.imgbox.com/53/e0/I2e3APyN_o.png" width="360"></p> 
 <p><img alt="" height="279" src="https://images2.imgbox.com/e1/59/VFB8p6nC_o.png" width="700"></p> 
 <p><img alt="" height="297" src="https://images2.imgbox.com/b7/e7/PqSmJs9J_o.png" width="700"></p> 
 <hr> 
 <h2>八、<span style="color:#000000;">Docker Compose 命令清单 </span></h2> 
 <p><span style="color:#000000;">官网参考地址：</span><a href="https://docs.docker.com/compose/reference/" rel="nofollow" title="https://docs.docker.com/compose/reference/">https://docs.docker.com/compose/reference/</a></p> 
 <p><span style="color:#000000;">命令清单如下：</span></p> 
 <p><img alt="" height="686" src="https://images2.imgbox.com/53/91/6dwfhwk4_o.png" width="700"></p> 
 <p><img alt="" height="1110" src="https://images2.imgbox.com/78/e3/dADV4Xyz_o.png" width="700"></p> 
 <hr> 
 <h3>1、<span style="color:#000000;">命令格式 </span></h3> 
 <p><span style="color:#000000;">对于 </span><span style="color:#000000;">Compose </span><span style="color:#000000;">来说，大部分命令的对象既可以是项目本身，也可以指定为项目中的服务或者容器。如果没有特别的说明，命令对象将是项目，这意味着项目中所有的服务都会受到命令影响。 </span></p> 
 <p><span style="color:#000000;"><strong>docker-compose</strong> </span><span style="color:#000000;">命令的基本的使用格式为：</span></p> 
 <blockquote> 
  <p><span style="color:#fe2c24;">docker compose [OPTIONS] COMMAND [ARGS...] </span></p> 
 </blockquote> 
</div> 
<hr> 
<h3 style="background-color:transparent;">2、<span style="color:#000000;">常见选项说明 </span></h3> 
<ul><li><span style="color:#000000;">-f，--file </span><span style="color:#000000;">指定使用的 </span><span style="color:#000000;">Compose </span><span style="color:#000000;">模板文件，默认为 </span><span style="color:#000000;">docker-compose.yml</span><span style="color:#000000;">，可以多次指定。</span></li><li><span style="color:#000000;">-p，--project-name </span><span style="color:#000000;">指定项目名称，默认将使用所在目录名称作为项目名。</span></li></ul> 
<p><img alt="" height="230" src="https://images2.imgbox.com/97/82/TJXidxzo_o.png" width="700"></p> 
<p><img alt="" height="192" src="https://images2.imgbox.com/bb/e2/EUOuOnrl_o.png" width="700"></p> 
<div> 
 <hr> 
 <h3 style="background-color:transparent;"><span style="color:#000000;">3、常见命令说明 </span></h3> 
</div> 
<h4 style="background-color:transparent;"><span style="color:#000000;">（1）up</span></h4> 
<p><span style="color:#000000;">该命令的作用十分强大，它会尝试自动完成包括构建镜像、（重新）创建服务、启动服务并关联服务相关容器的一系列操作，可以直接通过该命令来启动一个项目。 </span></p> 
<blockquote> 
 <p><span style="color:#fe2c24;">docker compose up [options] [SERVICE...]</span></p> 
</blockquote> 
<ul><li><span style="color:#000000;">-d </span><span style="color:#000000;">在后台运行服务容器，推荐在生产环境下使用该选项。</span></li><li><span style="color:#000000;">--force-recreate </span><span style="color:#000000;">强制重新创建容器，不能与 </span><span style="color:#000000;">--no-recreate </span><span style="color:#000000;">同时使用。</span></li><li><span style="color:#000000;">--no-recreate </span><span style="color:#000000;">如果容器已经存在了，则不重新创建，不能与 </span><span style="color:#000000;">--force-recreate 同时使用。</span></li></ul> 
<p><img alt="" height="161" src="https://images2.imgbox.com/52/e8/Iv41xUpY_o.png" width="320"></p> 
<p><img alt="" height="93" src="https://images2.imgbox.com/93/b2/BIqSKa7z_o.png" width="700"></p> 
<p><img alt="" height="68" src="https://images2.imgbox.com/a6/a9/cFZyVEm4_o.png" width="700"></p> 
<p><img alt="" height="54" src="https://images2.imgbox.com/77/30/pWEPyM9v_o.png" width="700"></p> 
<hr> 
<h4>（2）<span style="color:#000000;">down </span></h4> 
<p><span style="color:#000000;">停止所有容器，并删除容器和网络。</span></p> 
<blockquote> 
 <p><span style="color:#fe2c24;">docker compose down [options] [SERVICE...]</span><span style="color:#000000;"> </span></p> 
</blockquote> 
<ul><li><span style="color:#000000;">-v，--volumes </span><span style="color:#000000;">删除容器同时删除目录映射。</span> </li></ul> 
<p><img alt="" height="55" src="https://images2.imgbox.com/b0/d3/rEFXhGXC_o.png" width="420"></p> 
<p><img alt="" height="433" src="https://images2.imgbox.com/73/6a/9dGAs2ID_o.png" width="420"></p> 
<p><img alt="" height="197" src="https://images2.imgbox.com/da/6a/v6Fv4QsX_o.png" width="700"></p> 
<hr> 
<h4>（3）<span style="color:#000000;">run </span></h4> 
<p><span style="color:#000000;">该命令可以在指定服务容器上执行相关的命令。</span></p> 
<ul><li><span style="color:#000000;">-d：</span><span style="color:#000000;">后台运行容器。</span></li><li><span style="color:#000000;">--name NAME：</span><span style="color:#000000;">为容器指定一个名字。</span></li><li><span style="color:#000000;">--entrypoint CMD：</span><span style="color:#000000;">覆盖默认的容器启动指令。</span></li><li><span style="color:#000000;">-e KEY=VAL：</span><span style="color:#000000;">设置环境变量值，可多次使用选项来设置多个环境变量。</span></li><li><span style="color:#000000;">-u, --user=""：</span><span style="color:#000000;">指定运行容器的用户名或者 </span><span style="color:#000000;">uid。</span></li><li><span style="color:#000000;">--rm：</span><span style="color:#000000;">运行命令后自动删除容器。</span></li><li><span style="color:#000000;">-p，--publish=[]：</span><span style="color:#000000;">映射容器端口到本地主机。</span></li></ul> 
<p><img alt="" height="148" src="https://images2.imgbox.com/ff/18/pv6rbt1l_o.png" width="700"></p> 
<hr> 
<h2>九、<span style="color:#000000;">操作案例 </span></h2> 
<h3><span style="color:#000000;">1、Docker Compose </span><span style="color:#000000;">基本操作 </span></h3> 
<h4><span style="color:#000000;">（1）创建 </span><span style="color:#000000;">compose </span><span style="color:#000000;">目录</span></h4> 
<p><img alt="" height="26" src="https://images2.imgbox.com/26/01/BjkSgvy4_o.png" width="460"></p> 
<hr> 
<h4>（2）<span style="color:#000000;">进入 </span><span style="color:#000000;">prj15 </span><span style="color:#000000;">目录，</span><span style="color:#000000;">创建 </span><span style="color:#000000;">docker-compose.yml </span><span style="color:#000000;">文件</span></h4> 
<p><img alt="" height="43" src="https://images2.imgbox.com/32/df/0Jk9EEBZ_o.png" width="460"></p> 
<hr> 
<h4>（3）<span style="color:#000000;">输入内容</span></h4> 
<p><img alt="" height="797" src="https://images2.imgbox.com/79/d0/um8cWifL_o.png" width="460"></p> 
<hr> 
<h4><span style="color:#000000;">（4）输入 </span><span style="color:#000000;">docker config </span><span style="color:#000000;">会做检查</span></h4> 
<p><img alt="" height="934" src="https://images2.imgbox.com/47/c9/ZOsffUHt_o.png" width="600"></p> 
<hr> 
<h4>（5）<span style="color:#000000;">创建首页目录，编辑首页内容</span></h4> 
<p><img alt="" height="97" src="https://images2.imgbox.com/b7/f9/6KMXmDDU_o.png" width="560"></p> 
<hr> 
<h4>（6）<span style="color:#000000;">启动服务</span></h4> 
<p><img alt="" height="140" src="https://images2.imgbox.com/6f/f1/HMt9yPYn_o.png" width="750"></p> 
<hr> 
<h4>（7）<span style="color:#000000;">通过页面访问</span></h4> 
<p><img alt="" height="202" src="https://images2.imgbox.com/88/84/h0oMrytY_o.png" width="460"></p> 
<hr> 
<h4>（8）<span style="color:#000000;">停止服务</span></h4> 
<p><img alt="" height="80" src="https://images2.imgbox.com/e5/2e/KQRbc7xr_o.png" width="700"></p> 
<hr> 
<h4>（9）<span style="color:#000000;">启动服务</span></h4> 
<p><img alt="" height="80" src="https://images2.imgbox.com/6b/a5/pp0aLczN_o.png" width="700"></p> 
<hr> 
<h4>（10）<span style="color:#000000;">删除服务 </span></h4> 
<p><img alt="" height="91" src="https://images2.imgbox.com/90/c7/5H6VMPzJ_o.png" width="700"></p> 
<hr> 
<h2>十、<span style="color:#000000;">综合案例 </span></h2> 
<h3><span style="color:#000000;">1、Docker Compose </span><span style="color:#000000;">部署自定义服务 </span></h3> 
<p><img alt="" height="309" src="https://images2.imgbox.com/75/69/Bq6H1LIj_o.png" width="560"></p> 
<p><span style="color:#000000;">编写一个简单的案例，</span><span style="color:#000000;">nginx </span><span style="color:#000000;">反向代理到我们的一个 </span><span style="color:#000000;">springboot </span><span style="color:#000000;">微服务，微服务访问我们的 msyql </span><span style="color:#000000;">数据库查询用户信息。 </span></p> 
<hr> 
<h4><span style="color:#000000;">（1）设计数据非常简单的一个表信息，写入两条数据，文件为 </span><span style="color:#000000;">init.sq</span></h4> 
<p><img alt="" height="260" src="https://images2.imgbox.com/f1/7b/0b69wPBB_o.png" width="600"></p> 
<p><img alt="" height="259" src="https://images2.imgbox.com/b7/5e/Dtv1vrmb_o.png" width="560"></p> 
<p><strong>数据初始化脚本：</strong></p> 
<p><img alt="" height="383" src="https://images2.imgbox.com/ac/b9/P3Lmesrb_o.png" width="560"></p> 
<hr> 
<h4>（2）<span style="color:#000000;">创建一个 </span><span style="color:#000000;">springboot </span><span style="color:#000000;">应用，配置 </span><span style="color:#000000;">maven </span><span style="color:#000000;">项目</span></h4> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.7.8&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.bit&lt;/groupId&gt;
    &lt;artifactId&gt;demojdbc&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;demojdbc&lt;/name&gt;
    &lt;description&gt;demojdbc&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;8&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.1.49&lt;/version&gt;
        &lt;/dependency&gt;
 
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;</code></pre> 
<hr> 
<h4><span style="color:#000000;">（3）添加启动类</span></h4> 
<pre><code class="language-java">package com.bit.demojdbc;

import org.springframework.boot.SpringApplication;
import
org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class DemojdbcApplication {

    public static void main(String[] args) {
        SpringApplication.run(DemojdbcApplication.class, args);
    }
}</code></pre> 
<hr> 
<h4><span style="color:#000000;">（4）配置数据库信息</span></h4> 
<p><span style="color:#000000;">注意本地测试的时候红色部分调整为 ip </span><span style="color:#000000;">地址，而我们实际的服务使用的 mysql </span><span style="color:#000000;">的一个服务名称。</span></p> 
<pre><code class="language-java">spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://mysql:3306/test
spring.datasource.username=root
spring.datasource.password=root</code></pre> 
<hr> 
<h4>（5）<span style="color:#000000;">配置用户控制器，简单配置，不再去涉及 mapper </span><span style="color:#000000;">那些内容通过 </span><span style="color:#000000;">jdbc </span><span style="color:#000000;">直接完成操作 </span></h4> 
<pre><code class="language-java">package com.bit.demojdbc;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/user")
public class UserController {

    @Autowired
    JdbcTemplate jdbcTemplate;

    @RequestMapping("/list")
    @ResponseBody
    public Object Users(){
        return jdbcTemplate.queryForList("select * from users");
    }
}</code></pre> 
<hr> 
<h4>（6）<span style="color:#000000;">编译打包</span></h4> 
<h4><img alt="" height="394" src="https://images2.imgbox.com/77/a9/rzYsPNf3_o.png" width="460"></h4> 
<hr> 
<h4><span style="color:#000000;">（7）进入打包的目录，本地测试正常启动</span></h4> 
<pre><code class="language-java">PS D:\src\bit\demojdbc\target&gt; java -jar .\demojdbc-0.0.1-SNAPSHOT.jar

  .   ____          _           __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
==========|_|==============|___/=/_/_/_/
::  Spring Boot ::                (v2.7.8)

2023-04-26 00:21:41.578 INFO 23736 --- [ main] com.bit.demojdbc.DemojdbcApplication : Starting DemojdbcApplication v0.0.1-SNAPSHOT using Java 1.8.0_202 on maxhou with PID 23736 (D:\src\bit\demojdbc\target\demojdbc-0.0.1-SNAPSHOT.jar started by facea in D:\src\bit\demojdbc\target)
2023-04-26 00:21:41.580 INFO 23736 --- [ main] com.bit.demojdbc.DemojdbcApplication : No active profile set, falling back to 1 default profile: "default"
2023-04-26 00:21:43.877 INFO 23736 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2023-04-26 00:21:43.886 INFO 23736 --- [ main] o.apache.catalina.core.StandardService : Starting service [Tomcat]
2023-04-26 00:21:43.886 INFO 23736 --- [ main] org.apache.catalina.core.StandardEngine : Starting Servlet engine: [Apache Tomcat/9.0.71]
2023-04-26 00:21:43.989 INFO 23736 --- [ main] o.a.c.c.C.[Tomcat].[localhost].[/] : Initializing Spring embedded WebApplicationContext
2023-04-26 00:21:43.989 INFO 23736 --- [ main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2356 ms
2023-04-26 00:21:44.671 INFO 23736 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2023-04-26 00:21:44.687 INFO 23736 --- [ main] com.bit.demojdbc.DemojdbcApplication : Started DemojdbcApplication in 3.457 seconds (JVM running for 3.804)</code></pre> 
<hr> 
<h4><span style="color:#000000;">（8）本地测试正常访问</span></h4> 
<h4><img alt="" height="145" src="https://images2.imgbox.com/cb/ed/PIZggVVl_o.png" width="560"></h4> 
<hr> 
<h4><span style="color:#000000;">（9） 创建目录</span></h4> 
<h4><img alt="" height="97" src="https://images2.imgbox.com/f4/e9/nKKkAgwN_o.png" width="520"></h4> 
<hr> 
<h4><span style="color:#000000;">（10）编写 </span><span style="color:#000000;">docker-compose.yml </span></h4> 
<p><img alt="" height="64" src="https://images2.imgbox.com/f2/a2/Yxxklkoy_o.png" width="520"></p> 
<hr> 
<h4>（11）<span style="color:#000000;">创建工程目录和卷目录 </span></h4> 
<p><img alt="" height="17" src="https://images2.imgbox.com/e9/a8/Rnwp4DFN_o.png" width="520"></p> 
<p><img alt="" height="41" src="https://images2.imgbox.com/61/a4/iaAwG0HP_o.png" width="460"></p> 
<hr> 
<h4><span style="color:#000000;">（12）将 </span><span style="color:#000000;">nginx </span><span style="color:#000000;">的反向代理配置 </span><span style="color:#000000;">xyl.conf </span><span style="color:#000000;">放入到 </span><span style="color:#000000;">./nginx/conf.d</span></h4> 
<p><span style="color:#000000;">其中内容为：</span> </p> 
<p><img alt="" height="19" src="https://images2.imgbox.com/88/ee/vgHtNzef_o.png" width="420"> </p> 
<hr> 
<h4>（13）<span style="color:#000000;">将数据库初始化文件 init.sql </span><span style="color:#000000;">放入到 </span><span style="color:#000000;">./mysql/initdb </span><span style="color:#000000;">目录 </span></h4> 
<p><img alt="" height="151" src="https://images2.imgbox.com/07/eb/z3ZyJ6N9_o.png" width="520"></p> 
<hr> 
<h4><span style="color:#000000;">（14）将应用 </span><span style="color:#000000;">jar </span><span style="color:#000000;">包放入到 </span><span style="color:#000000;">./app </span><span style="color:#000000;">目录</span></h4> 
<hr> 
<h4><span style="color:#000000;">（15）启动项目 </span></h4> 
<p><img alt="" height="98" src="https://images2.imgbox.com/b9/78/neaADP7e_o.png" width="560"></p> 
<hr> 
<h4>（16）<span style="color:#000000;">浏览器访问 </span><span style="color:#000000;">nginx</span></h4> 
<p><span style="color:#000000;">可以看到用户信息正常返回：</span></p> 
<p><img alt="" height="128" src="https://images2.imgbox.com/a3/9d/xNMwOb55_o.png" width="560"></p> 
<p><span style="color:#000000;">到此完成了我们的 </span><span style="color:#000000;">nginx </span><span style="color:#000000;">服务，后台服务和数据的完整的一个应用。</span></p> 
<hr> 
<h3>2、<span style="color:#000000;">Docker Compose </span><span style="color:#000000;">部署 WordPress </span></h3> 
<h4><span style="color:#000000;">（1）什么是 </span><span style="color:#000000;">WordPress </span></h4> 
<p><span style="color:#fe2c24;"><strong>WordPress </strong></span><span style="color:#000000;">是使用 </span><strong><span style="color:#000000;">PHP </span></strong><span style="color:#000000;">语言开发的<strong>博客平台</strong>，用户可以在支持 </span><span style="color:#000000;">PHP </span><span style="color:#000000;">和 </span><span style="color:#000000;">MySQL </span><span style="color:#000000;">数据库的服务器上架设属于自己的网站，也可以把 WordPress </span><span style="color:#000000;">当作一个内容管理系统（CMS</span><span style="color:#000000;">）来使用。WordPress 是一款个人博客系统，并逐步演化成一款内容管理系统软件，它是使用 PHP 语言和 </span><span style="color:#000000;">MySQL </span><span style="color:#000000;">数据库开发的，用户可以在支持 </span><span style="color:#000000;">PHP </span><span style="color:#000000;">和 </span><span style="color:#000000;">MySQL </span><span style="color:#000000;">数据库的服务器上使用自己的博客。 </span></p> 
<p><span style="color:#000000;">WordPress </span><span style="color:#000000;">有许多第三方开发的免费模板，安装方式简单易用。不过要做一个自己的模板，则需要你有一定的专业知识。比如你至少要懂的标准通用标记语言下的一个应用 HTML </span><span style="color:#000000;">代码、</span><span style="color:#000000;">CSS</span><span style="color:#000000;">、</span><span style="color:#000000;">PHP </span><span style="color:#000000;">等相关知识。 </span></p> 
<p><span style="color:#000000;">WordPress </span><span style="color:#000000;">官方支持中文版，同时有爱好者开发的第三方中文语言包，如 </span><span style="color:#000000;">wopus </span><span style="color:#000000;">中文语言包。WordPress </span><span style="color:#000000;">拥有成千上万个各式插件和不计其数的主题模板样式。 </span></p> 
<hr> 
<h4><span style="color:#000000;">（2）部署 </span><span style="color:#000000;">WordPress </span></h4> 
<h5><span style="color:#000000;">A. 编写 </span><span style="color:#000000;">Docker Compose</span></h5> 
<p><img alt="" height="58" src="https://images2.imgbox.com/bc/72/SmuqzNVV_o.png" width="460"></p> 
<p><img alt="" height="601" src="https://images2.imgbox.com/b1/97/KIr6T3dG_o.png" width="420"></p> 
<hr> 
<h5>B. <span style="color:#000000;">运行站点</span></h5> 
<p><img alt="" height="117" src="https://images2.imgbox.com/f1/9b/p5HxZUb0_o.png" width="800"></p> 
<hr> 
<h5>C. <span style="color:#000000;">访问 </span><span style="color:#000000;">web </span><span style="color:#000000;">页面</span></h5> 
<p><img alt="" height="401" src="https://images2.imgbox.com/3e/84/Cz672lVP_o.png" width="600"></p> 
<hr> 
<h5>D. <span style="color:#000000;">配置参数，点击安装</span></h5> 
<p><img alt="" height="545" src="https://images2.imgbox.com/34/b8/GQagtcpg_o.png" width="560"></p> 
<p></p> 
<hr> 
<h5>E. <span style="color:#000000;">登录</span></h5> 
<p><img alt="" height="341" src="https://images2.imgbox.com/62/f3/XsmuIekx_o.png" width="260"></p> 
<hr> 
<h5><span style="color:#000000;">G. 进入后台</span></h5> 
<p><img alt="" height="407" src="https://images2.imgbox.com/53/dc/xCobvchc_o.png" width="600"></p> 
<hr> 
<h5>H. <span style="color:#000000;">删除，释放空间 </span></h5> 
<p><img alt="" height="105" src="https://images2.imgbox.com/ba/90/KTz5qcpQ_o.png" width="700"></p> 
<hr> 
<h2>十一、<span style="color:#000000;">常见问题 </span></h2> 
<h3><span style="color:#000000;">1、up</span><span style="color:#000000;">、</span><span style="color:#000000;">run </span><span style="color:#000000;">和 </span><span style="color:#000000;">start </span><span style="color:#000000;">之间有什么区别 </span></h3> 
<p><span style="color:#000000;">通常我们想要 </span><span style="color:#fe2c24;"><strong>docker compose up</strong></span><span style="color:#000000;">，</span><span style="color:#000000;">用于 </span><span style="color:#000000;">up </span><span style="color:#000000;">启动或重新启动 </span><span style="color:#000000;">docker-compose.yml。</span></p> 
<ul><li><span style="color:#000000;">在默认的 “</span><span style="color:#000000;">附加</span><span style="color:#000000;">” </span><span style="color:#000000;">模式下，会看到来自所有容器的所有日志。</span></li><li><span style="color:#000000;">在 </span><span style="color:#000000;">“</span><span style="color:#000000;">分离</span><span style="color:#000000;">” </span><span style="color:#000000;">模式（</span><span style="color:#000000;">-d）</span><span style="color:#000000;">中，启动容器后 Compose </span><span style="color:#000000;">退出，但容器继续在后台运行。</span></li></ul> 
<p><span style="color:#000000;">该 </span><span style="color:#fe2c24;"><strong>docker compose run </strong></span><span style="color:#000000;">命令用于运行 </span><span style="color:#000000;">“</span><span style="color:#000000;">一次性</span><span style="color:#000000;">” </span><span style="color:#000000;">或 </span><span style="color:#000000;">“</span><span style="color:#000000;">临时</span><span style="color:#000000;">” </span><span style="color:#000000;">任务。它需要您要运行的服务名称，并且只为正在运行的服务所依赖的服务启动容器。用于 run </span><span style="color:#000000;">运行测试或执行管理任务，例如从数据卷容器中删除或添加数据。该 run </span><span style="color:#000000;">命令的作用类似于 </span><span style="color:#000000;">docker run -ti 它打开容器的交互式终端并返回与容器中进程的退出状态匹配的退出状态。</span></p> 
<p><span style="color:#fe2c24;"><strong>docker compose start </strong></span><span style="color:#000000;">命令仅对重新启动先前创建但已停止的容器有用，它从不创建新容器。 </span></p> 
<div> 
 <hr> 
 <h3><span style="color:#000000;">2、如何在同一主机上运行 </span><span style="color:#000000;">Compose </span><span style="color:#000000;">文件的多个副本 </span></h3> 
</div> 
<blockquote> 
 <p><span style="color:#000000;">Compose </span><span style="color:#000000;">使用项目名称为项目的所有容器和其他资源创建唯一标识符。要运行项目的多个副本，请<span style="background-color:#ffd900;">使用 -p </span></span><span style="color:#000000;"><span style="background-color:#ffd900;">命令行选项</span>或 </span><span style="color:#000000;"><span style="background-color:#ffd900;">COMPOSE_PROJECT_NAME </span></span><span style="color:#000000;"><span style="background-color:#ffd900;">环境变量设置自定义项目名称</span>。 </span></p> 
</blockquote> 
<div> 
 <hr> 
 <h3><span style="color:#000000;">3、可以控制服务启动顺序吗？ </span></h3> 
</div> 
<blockquote> 
 <p><span style="color:#000000;">可以控制启动顺序。通过依赖指定，并且可以配合 </span><strong><span style="color:#000000;">healthcheck </span></strong><span style="color:#000000;">等健康检查成功以后再启动。 </span></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/225005f2ef5296cbdbd4badcad2b9046/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Eureka高可用性配置：如何实现Eureka集群与故障转移</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5e63087c6cc42ba2c2e54b19a877311/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">这是啥设计模式-组合模式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>