<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据结构】顺序结构实现：特殊完全二叉树（堆）&#43;堆排序 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f30778c427543c0241240f4371bb4b3f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【数据结构】顺序结构实现：特殊完全二叉树（堆）&#43;堆排序">
  <meta property="og:description" content="二叉树 一.二叉树的顺序结构二.堆的概念及结构三.堆的实现1.堆的结构2.堆的初始化、销毁、打印、判空3.堆中的值交换4.堆顶元素5.堆向上调整算法：实现小堆的插入6.堆向下调整算法：实现小堆的删除7.堆的创建1.堆向上调整算法：建堆&#43;建堆的时间复杂度：O（n * logn）1.堆向下调整算法：建堆&#43;建堆的时间复杂度：O（n） 四.堆的应用1.TOP-K问题2.堆排序&#43;堆排序时间复杂度：O（n * logn） 一.二叉树的顺序结构 普通的二叉树是不适合用数组来存储的，因为可能会存在大量的空间浪费。而完全二叉树更适合使用顺序结构存储。现实中我们通常把堆(完全二叉树)使用顺序结构的数组来存储，需要注意的是这里的堆和操作系统虚拟进程地址空间中的堆是两回事，一个是数据结构，一个是操作系统中管理内存的一块区域分段。
二.堆的概念及结构 堆的性质：
堆中某个结点的值总是不大于或不小于其父结点的值；堆总是一棵完全二叉树。 三.堆的实现 1.堆的结构 将堆（完全二叉树）看作顺序表，利用顺序表存储堆中的值。结构如下：
typedef int HPDataType; typedef struct Heap { HPDataType* a; int size; int capacity; }HP; 2.堆的初始化、销毁、打印、判空 实际就是顺序表的那一套。
void HPInit(HP* php) { assert(php); php-&gt;a = NULL; php-&gt;size = php-&gt;capacity = 0; } void HPDestory(HP* php) { assert(php); free(php-&gt;a); php-&gt;a = NULL; php-&gt;size = php-&gt;capacity = 0; } bool HPEmpty(HP* php) { assert(php); return php-&gt;size == 0; } void HPPrint(HP* php) { assert(php); for (int i = 0; i &lt; php-&gt;size; i&#43;&#43;) { printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-07T22:31:29+08:00">
    <meta property="article:modified_time" content="2024-08-07T22:31:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据结构】顺序结构实现：特殊完全二叉树（堆）&#43;堆排序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>二叉树</h4> 
 <ul><li><a href="#_1" rel="nofollow">一.二叉树的顺序结构</a></li><li><a href="#_4" rel="nofollow">二.堆的概念及结构</a></li><li><a href="#_14" rel="nofollow">三.堆的实现</a></li><li><ul><li><a href="#1_16" rel="nofollow">1.堆的结构</a></li><li><a href="#2_30" rel="nofollow">2.堆的初始化、销毁、打印、判空</a></li><li><a href="#3_67" rel="nofollow">3.堆中的值交换</a></li><li><a href="#4_78" rel="nofollow">4.堆顶元素</a></li><li><a href="#5_90" rel="nofollow">5.堆向上调整算法：实现小堆的插入</a></li><li><a href="#6_148" rel="nofollow">6.堆向下调整算法：实现小堆的删除</a></li><li><a href="#7_202" rel="nofollow">7.堆的创建</a></li><li><ul><li><a href="#1On__logn_204" rel="nofollow">1.堆向上调整算法：建堆+建堆的时间复杂度：O（n * logn）</a></li><li><a href="#1On_253" rel="nofollow">1.堆向下调整算法：建堆+建堆的时间复杂度：O（n）</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_295" rel="nofollow">四.堆的应用</a></li><li><ul><li><a href="#1TOPK_297" rel="nofollow">1.TOP-K问题</a></li><li><a href="#2On__logn_443" rel="nofollow">2.堆排序+堆排序时间复杂度：O（n * logn）</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一.二叉树的顺序结构</h2> 
<p>  普通的二叉树是不适合用数组来存储的，因为可能会存在大量的空间浪费。而完全二叉树更适合使用顺序结构存储。现实中我们通常把<code>堆(完全二叉树)</code>使用<code>顺序结构的数组来存储</code>，需要注意的是这里的<code>堆和操作系统虚拟进程地址空间中的堆是两回事</code>，一个是数据结构，一个是操作系统中管理内存的一块区域分段。<br> <img src="https://images2.imgbox.com/80/53/w4fSq4Zs_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_4"></a>二.堆的概念及结构</h2> 
<p><img src="https://images2.imgbox.com/03/19/IXMaYLLm_o.png" alt="在这里插入图片描述"><br> 堆的性质：</p> 
<ol><li>堆中某个结点的值总是不大于或不小于其父结点的值；</li><li>堆总是一棵完全二叉树。</li></ol> 
<p><img src="https://images2.imgbox.com/6d/42/q5lisZij_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/88/0c/xPv1wnMO_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_14"></a>三.堆的实现</h2> 
<h3><a id="1_16"></a>1.堆的结构</h3> 
<p>将堆（完全二叉树）看作顺序表，利用顺序表存储堆中的值。结构如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> HPDataType<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Heap</span>
<span class="token punctuation">{<!-- --></span>
	HPDataType<span class="token operator">*</span> a<span class="token punctuation">;</span>
	<span class="token keyword">int</span> size<span class="token punctuation">;</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>HP<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="2_30"></a>2.堆的初始化、销毁、打印、判空</h3> 
<p>实际就是顺序表的那一套。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HPInit</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>a <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HPDestory</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">free</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>a <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bool <span class="token function">HPEmpty</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> php<span class="token operator">-&gt;</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HPPrint</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> php<span class="token operator">-&gt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3_67"></a>3.堆中的值交换</h3> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HPDataType<span class="token operator">*</span> x<span class="token punctuation">,</span> HPDataType<span class="token operator">*</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	HPDataType tmp <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span>
	<span class="token operator">*</span>x <span class="token operator">=</span> <span class="token operator">*</span>y<span class="token punctuation">;</span>
	<span class="token operator">*</span>y <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_78"></a>4.堆顶元素</h3> 
<pre><code class="prism language-c">HPDataType <span class="token function">HPTop</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> php<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="5_90"></a>5.堆向上调整算法：实现小堆的插入</h3> 
<p>堆的插入：在已知是堆的条件下进行尾插，利用堆向上调整算法使其依旧保持堆的特征。</p> 
<p>堆向上调整算法：</p> 
<ol><li>先将元素插入堆的末尾。</li><li>插入之后如果堆的性质遭到破坏，将新插入的节点顺着父亲节点往上调整到合适的位置即可。</li></ol> 
<p>例如：先插入一个10到数组的尾上，再进行向上调整算法，直到满足堆。</p> 
<p><img src="https://images2.imgbox.com/66/d2/a6bS9J62_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HPDataType<span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//小堆</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//大堆就是将小于号变成大于号</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HPPush</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">,</span> HPDataType x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//容量满了——&gt;扩容</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">==</span> php<span class="token operator">-&gt;</span>capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> php<span class="token operator">-&gt;</span>capacity<span class="token punctuation">;</span>
		HPDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>HPDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>HPDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc fail!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		php<span class="token operator">-&gt;</span>a <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//尾插</span>
	php<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span>php<span class="token operator">-&gt;</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>

	<span class="token comment">//向上调整算法</span>
	<span class="token function">AdjustUp</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6_148"></a>6.堆向下调整算法：实现小堆的删除</h3> 
<p>堆的删除：在已知是堆的条件下删除堆顶的数据（堆的尾删无意义依旧是堆），先将堆顶与堆尾的数据进行交换，再删除堆尾的数据，最后利用堆向下调整算法，将堆顶向下调整，使其依旧保持堆的特征。</p> 
<p>堆向下调整算法：</p> 
<ol><li>将堆顶元素与堆中最后一个元素进行交换。</li><li>删除堆中最后一个元素。</li><li>将堆顶元素向下调整到满足堆特性为止。</li></ol> 
<p>例如：现在我们给出一个数组，逻辑上看做一颗完全二叉树。我们通过从根结点开始的向下调整算法可以把它调整成一个小堆。<code>向下调整算法有一个前提：左右子树必须是都是堆，才能调整</code>。</p> 
<p><img src="https://images2.imgbox.com/a5/f4/TeieZT9R_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HPDataType<span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//假设左孩子小</span>
	<span class="token keyword">int</span> child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> parent <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//找出真正小的那个孩子</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//大堆就是将小于号变成大于号</span>
		<span class="token punctuation">{<!-- --></span>
			child<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> a<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//大堆就是将小于号变成大于号</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HPPop</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">[</span>php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size<span class="token operator">--</span><span class="token punctuation">;</span>

	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="7_202"></a>7.堆的创建</h3> 
<h4><a id="1On__logn_204"></a>1.堆向上调整算法：建堆+建堆的时间复杂度：O（n * logn）</h4> 
<pre><code class="prism language-c"><span class="token comment">//假设模拟php-&gt;a[] = {19,34,65,18,15,28}; </span>
</code></pre> 
<p><img src="https://images2.imgbox.com/59/4e/aFW2koTd_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustUpCreateHeap</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//根节点不需调整，从第二个节点开始调整</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> php<span class="token operator">-&gt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">AdjustUp</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	HP hp<span class="token punctuation">;</span>
	<span class="token function">HPInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">(</span>HPDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>HPDataType<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>size <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>capacity <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token function">AdjustUpCreateHeap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">HPPrint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//15 18 28 34 19 65</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>计算向上调整算法建堆时间复杂度：</p> 
<p>因为堆是完全⼆叉树，而满⼆叉树也是完全⼆叉树，此处为了简化使用满⼆叉树来证明(时间复杂度本来看的就是近似值，多几个结点不影响最终结果)<br> <img src="https://images2.imgbox.com/61/ba/X7Xd4b7m_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/02/4a/x5qzdV9u_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/00/44/C4wu2UDD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1On_253"></a>1.堆向下调整算法：建堆+建堆的时间复杂度：O（n）</h4> 
<pre><code class="prism language-c"><span class="token comment">//假设模拟php-&gt;a[] = {19,34,65,18,15,28}; </span>
</code></pre> 
<p><img src="https://images2.imgbox.com/64/f6/eNhjmYMq_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustDownCreateHeap</span><span class="token punctuation">(</span>HP<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//叶子节点不需调整，从倒数第一个非叶子节点开始调整</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">AdjustDown</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>a<span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	HP hp<span class="token punctuation">;</span>
	<span class="token function">HPInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">(</span>HPDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>HPDataType<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">34</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">65</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>size <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	hp<span class="token punctuation">.</span>capacity <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token function">AdjustDownCreateHeap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//15 18 28 19 34 65</span>
	<span class="token function">HPPrint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>计算向下调整算法建堆时间复杂度：</p> 
<p><img src="https://images2.imgbox.com/d3/85/GYKHWTor_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c6/de/TRlAwabD_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_295"></a>四.堆的应用</h2> 
<h3><a id="1TOPK_297"></a>1.TOP-K问题</h3> 
<p>TOP-K问题：即求数据个数N中前K个最大的元素或者最小的元素，一般情况下数据量都比较大。</p> 
<p>对于Top-K问题，能想到的最简单直接的方式就是排序，但是：如果数据量非常大，排序就不太可取了(可能数据都不能一下子全部加载到内存中)。最佳的方式就是用堆来解决，基本思路如下：</p> 
<p>前置知识：</p> 
<ol><li><code>1 GB = 1024 MB = 1024*1024 KB = 1024*1024*1024 Byte</code>（大约10.7亿Byte）</li><li>40Byte转化为GB：<code>40 / 10.7 近似：3.72GB内存</code></li></ol> 
<p><code>问题一</code>：假设只有4GB内存，要在10亿个整数中，如何找出最大的前10个数？</p> 
<p>方法：</p> 
<ol><li>建一个10亿个整数的大堆（利用向下调整算法）。时间复杂度：<code>O(n)</code></li><li>进行10次（Top+Pop）：取最大的前10个数。时间复杂度：<code>O(10 * logn) = O(logn)</code>（10忽略不计）</li></ol> 
<p>总时间复杂度：<code>O(n) </code>； 空间复杂度：<code>O(n) </code></p> 
<p><code>问题二</code>：假设只有1GB内存，在这些磁盘文件中，取最大的前10个数。</p> 
<p>方法：</p> 
<ol><li>先存储1GB内存的数据，再取最大前10个数，依次循环4次</li><li>最后在40个数据中取最大的前10个数</li></ol> 
<p>虽然节省了一些内存，但是依旧要花费相当大的内存，而且频繁的读取数据效率低。有无不需要花费多少内存就能完成的呢？</p> 
<p><code>问题三</code>：假设只有1KB内存，在这些磁盘文件中，取最大的前10个数。</p> 
<p>方法：</p> 
<ol><li>用数据集合中前K个元素来建堆：</li></ol> 
<ul><li>取前K个最大的元素，则建小堆</li><li>取前K个最小的元素，则建大堆</li></ul> 
<p>时间复杂度：<code>O(k)</code></p> 
<ol start="2"><li>用剩余的N-K个元素依次与堆顶元素来比较，不满足则替换堆顶元素。将剩余N-K个元素依次与堆顶元素比完之后，堆中剩余的K个元素就是所求的前K个最小或者最大的元素。</li></ol> 
<p>时间复杂度：<code>O((n-k) * logk) </code></p> 
<p>总时间复杂度：<code>O(n) </code>；空间复杂度：<code>O(1)</code>；（k忽略不计）</p> 
<p>代码如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">CreateNDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//写入n个数值</span>
	<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10000000</span><span class="token punctuation">;</span>
	<span class="token function">srand</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//以写的方式打开文件</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> file <span class="token operator">=</span> <span class="token string">"data.txt"</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> pf <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pf <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"fopen fail!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//写数据进入文件</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> val <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10000000</span><span class="token punctuation">;</span>
		<span class="token function">fprintf</span><span class="token punctuation">(</span>pf<span class="token punctuation">,</span> <span class="token string">"%d\n"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//关闭文件</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pf <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">TopK</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//以读的方式打开文件</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> file <span class="token operator">=</span> <span class="token string">"data.txt"</span><span class="token punctuation">;</span>
	FILE<span class="token operator">*</span> pf <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pf <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"fopen fail!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//开K个空间：为建小堆做准备</span>
	<span class="token keyword">int</span> k<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入要取的最大前k个数："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> kminheap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>kminheap <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc fail!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//读取文件中的前K个数据</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">fscanf</span><span class="token punctuation">(</span>pf<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>kminheap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//建K个数的小堆（向下调整算法）</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">AdjustDown</span><span class="token punctuation">(</span>kminheap<span class="token punctuation">,</span> k<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//取剩下的N-K个数与堆顶进行比较+向下调整</span>
	<span class="token keyword">int</span> val<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">fscanf</span><span class="token punctuation">(</span>pf<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>val<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">EOF</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">&gt;</span> kminheap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			kminheap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
			<span class="token function">AdjustDown</span><span class="token punctuation">(</span>kminheap<span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"最大的前%d个数："</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> kminheap<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//关闭文件</span>
	<span class="token function">fclose</span><span class="token punctuation">(</span>pf<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pf <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">CreateNDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">TopK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/63/7b/qeiY9i6V_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2On__logn_443"></a>2.堆排序+堆排序时间复杂度：O（n * logn）</h3> 
<p>假设降序：那是建小堆还是建大堆呢？</p> 
<p>结论：</p> 
<ol><li>升序：建大堆。</li><li>降序：建小堆。</li></ol> 
<p>利用堆删除思想来进行排序：建堆和堆删除中都用到了<code>向下调整</code>，因此掌握了向下调整，就可以完成堆排序。</p> 
<p>假设6个数据建小堆：</p> 
<ol><li>已知堆顶最小，可以将堆顶与队尾进行交换。</li><li>向下调整保持前5个数据为小堆。</li><li>循环步骤1与步骤2直到排序完成。</li></ol> 
<p><img src="https://images2.imgbox.com/a8/d2/x3gXON6H_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HeapSort</span><span class="token punctuation">(</span>HPDataType<span class="token operator">*</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">向上调整算法建小堆：O(n*logn)</span>
	<span class="token comment">//for (int i = 1; i &lt; n; i++)</span>
	<span class="token comment">//{<!-- --></span>
	<span class="token comment">//	AdjustUp(a, i);</span>
	<span class="token comment">//}</span>

	<span class="token comment">//向下调整算法建小堆：O(n)</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">AdjustDown</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> n<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//O(n*logn)</span>
	<span class="token keyword">int</span> end <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">AdjustDown</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> end<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		end<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">HeapSort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2e/b1/XyqSaPEe_o.png" alt="在这里插入图片描述"></p> 
<p>堆排序时间复杂度计算：</p> 
<p><img src="https://images2.imgbox.com/58/b8/D6opp2sx_o.png" alt="在这里插入图片描述"></p> 
<p><code>重点理解</code>：向下调整算法。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f388653c6b965ad4f9bec44bf742a21a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【力扣】3143.正方形中的最多点数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9160acb393272124772b06084af9b1c4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言：手撕单链表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>