<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€wikiçŸ¥è¯†åº“ã€‘06.æ–‡æ¡£ç®¡ç†é¡µé¢çš„æ·»åŠ --å‰ç«¯Vueéƒ¨åˆ† - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/60bc46b66395cdf14700c8914ab48e9d/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€wikiçŸ¥è¯†åº“ã€‘06.æ–‡æ¡£ç®¡ç†é¡µé¢çš„æ·»åŠ --å‰ç«¯Vueéƒ¨åˆ†">
  <meta property="og:description" content="ğŸ“ä¸ªäººä¸»é¡µï¼šå“ˆ__
æœŸå¾…æ‚¨çš„å…³æ³¨Â ç›®å½•
ä¸€ã€ğŸ”¥ä»Šæ—¥ç›®æ ‡
äºŒã€ğŸ»å‰ç«¯Vueæ¨¡å—çš„æ”¹é€ 
BUGä¿®æ”¹
1.wangeditoræ— æ³•å±•ç¤ºé—®é¢˜
2.å¼¹çª—æ— æ³•æ­£å¸¸å…³é—­é—®é¢˜
2.1 æ·»åŠ admin-doc.vue
2.1.1 ç‚¹å‡»admin-ebookä¸­çš„è·¯ç”±è·³è½¬åˆ°admin-doc
2.2.2 è¿›å…¥åˆ°admin-docä¸­è°ƒç”¨åˆå§‹åŒ–æŸ¥è¯¢æ–¹æ³•
2.2.3 æ–‡æ¡£ç¼–è¾‘ä¸­çš„ä¸€äº›ç»†èŠ‚
2.2.4 æ–‡æ¡£çš„åˆ é™¤
2.2.5 admin-doc.vueå…¨éƒ¨ä»£ç 
2.2 æ·»åŠ DocView.vue
2.3 æ·»åŠ æ–°çš„è·¯ç”±è§„åˆ™
ä¸€ã€ğŸ”¥ä»Šæ—¥ç›®æ ‡ ä¸Šä¸€æ¬¡å¸¦å¤§å®¶æŠŠå‰ç«¯çš„åˆ†ç±»ç®¡ç†æ¨¡å—åšäº†å‡ºæ¥ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç½‘ç«™çš„åˆ†ç±»åŠŸèƒ½ï¼Œä»¥åŠåˆ†ç±»çš„æ ‘å½¢ç»“æ„å±•ç¤ºåŠŸèƒ½ã€‚åˆ°æ­¤ä¸ºæ­¢å·²ç»å¸¦å¤§å®¶åšäº†ç”µå­ä¹¦ç®¡ç†æ¨¡å—ã€åˆ†ç±»æ¨¡å—ï¼Œé‚£ä¹ˆåªè¦å†æŠŠæ–‡æ¡£ç®¡ç†æ¨¡å—ä¹Ÿåšå‡ºæ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆæ­¥å®ç°ç”µå­ä¹¦è¿™æ•´ä¸ªä¸€å¥—æµç¨‹äº†ã€‚æˆ‘ä»¬å¯ä»¥ç¼–è¾‘æ·»åŠ ç”µå­ä¹¦ï¼Œå®ç°åˆ†ç±»ï¼Œå¹¶ä¸”çœŸæ­£çš„å¾€ç”µå­ä¹¦çš„æ–‡æ¡£æ¨¡å—ä¸­æ·»åŠ å†…å®¹ã€‚ã€wikiçŸ¥è¯†åº“ã€‘05.åˆ†ç±»ç®¡ç†å®ç°--å‰ç«¯Vueæ¨¡å—-CSDNåšå®¢
æˆ‘ä»¬ä»Šå¤©å°±è¦å®ç°ä¸‹æ–¹å›¾ç‰‡ä¸­ç®­å¤´æŒ‡å‘çš„åŠŸèƒ½
é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸»é¡µçš„å±•ç¤ºåŠŸèƒ½ã€‚
äºŒã€ğŸ»å‰ç«¯Vueæ¨¡å—çš„æ”¹é€  åœ¨æ­¤ä¹‹å‰æˆ‘è¦è¦è¯´ä¸€ä»¶äº‹æƒ…ï¼Œæˆ‘åœ¨åšè¿™ä¸ªæ¨¡å—çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬ä¹‹åè¦ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨wangeditoræ— æ³•æ­£å¸¸å±•ç¤ºï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯å¼¹çª—æ— æ³•å…³é—­çš„é—®é¢˜ã€‚è¿™é‡Œæˆ‘æŠŠè§£å†³æ–¹æ³•å‘Šè¯‰å¤§å®¶ã€‚
BUGä¿®æ”¹ 1.wangeditoræ— æ³•å±•ç¤ºé—®é¢˜ å‡ºç°è¿™ä¸ªé—®é¢˜å¯èƒ½æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œè¿›å…¥åˆ°æˆ‘ä»¬çš„webç›®å½•ä¸­ï¼Œæ‰“å¼€ç»ˆç«¯çª—å£ç„¶åè¾“å…¥ä¸‹æ–¹æŒ‡ä»¤ã€‚é‡æ–°å®‰è£…wangeditorã€‚
npm i wangeditor@4.6.3 --save 2.å¼¹çª—æ— æ³•æ­£å¸¸å…³é—­é—®é¢˜ è¿™ä¸ªé—®é¢˜æ˜¯wangeditorå’Œvueç‰ˆæœ¬å…¼å®¹çš„é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹package.jsonã€‚å°†vueç‰ˆæœ¬æ”¹æˆä¸‹æ–¹å›¾ä¸­æ‰€ç¤ºï¼Œæ³¨æ„å‰è¾¹çš„ç¬¦å·ã€‚
2.1 æ·»åŠ admin-doc.vue 2.1.1 ç‚¹å‡»admin-ebookä¸­çš„è·¯ç”±è·³è½¬åˆ°admin-doc è¿˜è®°å¾—æˆ‘å½“åˆåœ¨admin-ebook.vueä¸­å†™çš„ä¸€ä¸ªrouterå—ï¼Ÿåœ¨æˆ‘ä»¬ç‚¹å‡»æ–‡æ¡£ç®¡ç†è·³è½¬åˆ°å¯¹åº”çš„ç»„ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯æœ‰ä¼ ä¸€ä¸ªebookIdè¿›æ¥çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯è·¯ç”±ä¼ å‚ã€‚
2.2.2 è¿›å…¥åˆ°admin-docä¸­è°ƒç”¨åˆå§‹åŒ–æŸ¥è¯¢æ–¹æ³• è¿›å…¥åˆ°è¿™ä¸ªé¡µé¢å‘¢è°ƒç”¨äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯editor.create()ï¼Œç”¨äºåŠ è½½æˆ‘ä»¬çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦å¤–ä¸€ä¸ªæ–¹æ³•è°ƒç”¨çš„æ˜¯handleQuery()æ–¹æ³•ï¼Œå‘åç«¯å‘é€æŸ¥è¯¢è¯·æ±‚ã€‚
onMounted(() =&gt; { editor.create(); handleQuery(); }); è¿™ä¸ªæ–¹æ³•è¿›å…¥çš„æ—¶å€™ï¼Œä¿®æ”¹äº†ä¸€ä¸ªå˜é‡loadingï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œä¿¡æ¯æŸ¥è¯¢çš„æ—¶å€™ä¼šç»™ç”¨æˆ·ä¸€ä¸ªåé¦ˆï¼Œå‘Šè¯‰ç”¨æˆ·ç¨ç­‰ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸ºtrueä¹‹åå°±ä¼šæœ‰é¡µé¢æ•°æ®åŠ è½½çš„æ•ˆæœã€‚
level1å˜é‡æˆ‘ä»¬ä¹‹å‰ä¹Ÿè¯´è¿‡ï¼Œç”¨äºä¿å­˜æ ‘å½¢ç»“æ„çš„æ•°æ®ã€‚ä¹‹åå‘¢å°±ä¼šå‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œç­‰æˆ‘ä»¬çš„æ•°æ®è¿”å›æ¥ä¹‹åå°±è¦æŠŠloadingæ”¹ä¸ºfalseäº†ã€‚
è‡³äºä¸‹è¾¹çš„treeSelectDataï¼Œåœ¨æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæ–‡æ¡£çš„çˆ¶æ–‡æ¡£çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬è¦æŠŠè¿™ä¸ªæ–‡æ¡£ä½œä¸ºæ ¹æ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯ä¸€çº§æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªæ–‡æ¡£çš„çˆ¶æ–‡æ¡£è®¾ç½®ä¸ºæ— ï¼Œä½†æ˜¯æˆ‘ä»¬çš„levelä¸­å­˜å‚¨çš„æ˜¯æ•°æ®åº“ä¸­æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œæ²¡æœ‰æ— è¿™ä¸ªé€‰é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ–°åŠ ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨level1çš„ç»“æœå’Œæ— ï¼Œè¿™æ ·ä¸ä¼šå½±å“æˆ‘ä»¬æŸ¥å‡ºæ¥çš„æ•°æ®ã€‚
const handleQuery = () =&gt; { loading.value = true; // å¦‚æœä¸æ¸…ç©ºç°æœ‰æ•°æ®ï¼Œåˆ™ç¼–è¾‘ä¿å­˜é‡æ–°åŠ è½½æ•°æ®åï¼Œå†ç‚¹ç¼–è¾‘ï¼Œåˆ™åˆ—è¡¨æ˜¾ç¤ºçš„è¿˜æ˜¯ç¼–è¾‘å‰çš„æ•°æ® level1.value = []; axios.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-09T19:05:24+08:00">
    <meta property="article:modified_time" content="2024-06-09T19:05:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€wikiçŸ¥è¯†åº“ã€‘06.æ–‡æ¡£ç®¡ç†é¡µé¢çš„æ·»åŠ --å‰ç«¯Vueéƒ¨åˆ†</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" height="150" src="https://images2.imgbox.com/95/0c/BnXMtGLS_o.png" width="150"></p> 
<p style="text-align:center;">Â <strong>Â ğŸ“ä¸ªäººä¸»é¡µï¼š<a class="link-info" href="https://blog.csdn.net/qq_61024956?type=blog" title="å“ˆ__">å“ˆ__</a></strong></p> 
<p style="text-align:center;"><span style="color:#fe2c24;">æœŸå¾…æ‚¨çš„å…³æ³¨Â </span></p> 
<p style="text-align:center;"><img alt="" height="100" src="https://images2.imgbox.com/f2/0d/r0eWvfYJ_o.gif" width="1000"></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E4%B8%80%E3%80%81%F0%9F%94%A5%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%F0%9F%94%A5%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87" rel="nofollow">ä¸€ã€ğŸ”¥ä»Šæ—¥ç›®æ ‡</a></p> 
<p id="%C2%A0%E4%BA%8C%E3%80%81%F0%9F%90%BB%E5%89%8D%E7%AB%AFVue%E6%A8%A1%E5%9D%97%E7%9A%84%E6%94%B9%E9%80%A0-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%8C%E3%80%81%F0%9F%90%BB%E5%89%8D%E7%AB%AFVue%E6%A8%A1%E5%9D%97%E7%9A%84%E6%94%B9%E9%80%A0" rel="nofollow">Â äºŒã€ğŸ»å‰ç«¯Vueæ¨¡å—çš„æ”¹é€ </a></p> 
<p id="BUG%E4%BF%AE%E6%94%B9-toc" style="margin-left:40px;"><a href="#BUG%E4%BF%AE%E6%94%B9" rel="nofollow">BUGä¿®æ”¹</a></p> 
<p id="1.wangeditor%E6%97%A0%E6%B3%95%E5%B1%95%E7%A4%BA%E9%97%AE%E9%A2%98-toc" style="margin-left:40px;"><a href="#1.wangeditor%E6%97%A0%E6%B3%95%E5%B1%95%E7%A4%BA%E9%97%AE%E9%A2%98" rel="nofollow">1.wangeditoræ— æ³•å±•ç¤ºé—®é¢˜</a></p> 
<p id="2.%E5%BC%B9%E7%AA%97%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%85%B3%E9%97%AD%E9%97%AE%E9%A2%98-toc" style="margin-left:40px;"><a href="#2.%E5%BC%B9%E7%AA%97%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%85%B3%E9%97%AD%E9%97%AE%E9%A2%98" rel="nofollow">2.å¼¹çª—æ— æ³•æ­£å¸¸å…³é—­é—®é¢˜</a></p> 
<p id="2.1%20%E6%B7%BB%E5%8A%A0admin-doc.vue-toc" style="margin-left:40px;"><a href="#2.1%20%E6%B7%BB%E5%8A%A0admin-doc.vue" rel="nofollow">2.1 æ·»åŠ admin-doc.vue</a></p> 
<p id="2.1.1%20%E7%82%B9%E5%87%BBadmin-ebook%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E5%88%B0admin-doc-toc" style="margin-left:80px;"><a href="#2.1.1%20%E7%82%B9%E5%87%BBadmin-ebook%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E5%88%B0admin-doc" rel="nofollow">2.1.1 ç‚¹å‡»admin-ebookä¸­çš„è·¯ç”±è·³è½¬åˆ°admin-doc</a></p> 
<p id="%C2%A02.2.2%20%E8%BF%9B%E5%85%A5%E5%88%B0admin-doc%E4%B8%AD%E8%B0%83%E7%94%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#%C2%A02.2.2%20%E8%BF%9B%E5%85%A5%E5%88%B0admin-doc%E4%B8%AD%E8%B0%83%E7%94%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95" rel="nofollow">Â 2.2.2 è¿›å…¥åˆ°admin-docä¸­è°ƒç”¨åˆå§‹åŒ–æŸ¥è¯¢æ–¹æ³•</a></p> 
<p id="2.2.3%20%E6%96%87%E6%A1%A3%E7%BC%96%E8%BE%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82-toc" style="margin-left:80px;"><a href="#2.2.3%20%E6%96%87%E6%A1%A3%E7%BC%96%E8%BE%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82" rel="nofollow">2.2.3 æ–‡æ¡£ç¼–è¾‘ä¸­çš„ä¸€äº›ç»†èŠ‚</a></p> 
<p id="2.2.4%20%E6%96%87%E6%A1%A3%E7%9A%84%E5%88%A0%E9%99%A4-toc" style="margin-left:80px;"><a href="#2.2.4%20%E6%96%87%E6%A1%A3%E7%9A%84%E5%88%A0%E9%99%A4" rel="nofollow">2.2.4 æ–‡æ¡£çš„åˆ é™¤</a></p> 
<p id="2.2.5%20admin-doc.vue%E5%85%A8%E9%83%A8%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><a href="#2.2.5%20admin-doc.vue%E5%85%A8%E9%83%A8%E4%BB%A3%E7%A0%81" rel="nofollow">2.2.5 admin-doc.vueå…¨éƒ¨ä»£ç </a></p> 
<p id="2.2%20%E6%B7%BB%E5%8A%A0DocView.vue-toc" style="margin-left:40px;"><a href="#2.2%20%E6%B7%BB%E5%8A%A0DocView.vue" rel="nofollow">2.2 æ·»åŠ DocView.vue</a></p> 
<p id="2.3%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99-toc" style="margin-left:40px;"><a href="#2.3%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99" rel="nofollow">2.3 æ·»åŠ æ–°çš„è·¯ç”±è§„åˆ™</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%F0%9F%94%A5%E4%BB%8A%E6%97%A5%E7%9B%AE%E6%A0%87">ä¸€ã€ğŸ”¥ä»Šæ—¥ç›®æ ‡</h2> 
<blockquote> 
 <p>ä¸Šä¸€æ¬¡å¸¦å¤§å®¶æŠŠå‰ç«¯çš„åˆ†ç±»ç®¡ç†æ¨¡å—åšäº†å‡ºæ¥ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç½‘ç«™çš„åˆ†ç±»åŠŸèƒ½ï¼Œä»¥åŠåˆ†ç±»çš„æ ‘å½¢ç»“æ„å±•ç¤ºåŠŸèƒ½ã€‚åˆ°æ­¤ä¸ºæ­¢å·²ç»å¸¦å¤§å®¶åšäº†ç”µå­ä¹¦ç®¡ç†æ¨¡å—ã€åˆ†ç±»æ¨¡å—ï¼Œé‚£ä¹ˆåªè¦å†æŠŠæ–‡æ¡£ç®¡ç†æ¨¡å—ä¹Ÿåšå‡ºæ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆæ­¥å®ç°ç”µå­ä¹¦è¿™æ•´ä¸ªä¸€å¥—æµç¨‹äº†ã€‚æˆ‘ä»¬å¯ä»¥ç¼–è¾‘æ·»åŠ ç”µå­ä¹¦ï¼Œå®ç°åˆ†ç±»ï¼Œå¹¶ä¸”çœŸæ­£çš„å¾€ç”µå­ä¹¦çš„æ–‡æ¡£æ¨¡å—ä¸­æ·»åŠ å†…å®¹ã€‚<a href="https://blog.csdn.net/qq_61024956/article/details/139468674?spm=1001.2014.3001.5502" title="ã€wikiçŸ¥è¯†åº“ã€‘05.åˆ†ç±»ç®¡ç†å®ç°--å‰ç«¯Vueæ¨¡å—-CSDNåšå®¢">ã€wikiçŸ¥è¯†åº“ã€‘05.åˆ†ç±»ç®¡ç†å®ç°--å‰ç«¯Vueæ¨¡å—-CSDNåšå®¢</a></p> 
 <p>æˆ‘ä»¬ä»Šå¤©å°±è¦å®ç°ä¸‹æ–¹å›¾ç‰‡ä¸­ç®­å¤´æŒ‡å‘çš„åŠŸèƒ½</p> 
 <p><img alt="" height="830" src="https://images2.imgbox.com/02/8f/iNpJRON2_o.png" width="1200"></p> 
 <p><img alt="" height="924" src="https://images2.imgbox.com/34/fc/qSazoar4_o.png" width="1200">Â é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸»é¡µçš„å±•ç¤ºåŠŸèƒ½ã€‚</p> 
 <p><img alt="" height="694" src="https://images2.imgbox.com/82/1e/FNWTtra3_o.png" width="1200"></p> 
</blockquote> 
<h2 id="%C2%A0%E4%BA%8C%E3%80%81%F0%9F%90%BB%E5%89%8D%E7%AB%AFVue%E6%A8%A1%E5%9D%97%E7%9A%84%E6%94%B9%E9%80%A0">Â äºŒã€ğŸ»å‰ç«¯Vueæ¨¡å—çš„æ”¹é€ </h2> 
<blockquote> 
 <p>åœ¨æ­¤ä¹‹å‰æˆ‘è¦è¦è¯´ä¸€ä»¶äº‹æƒ…ï¼Œæˆ‘åœ¨åšè¿™ä¸ªæ¨¡å—çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬ä¹‹åè¦ä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨wangeditoræ— æ³•æ­£å¸¸å±•ç¤ºï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯å¼¹çª—æ— æ³•å…³é—­çš„é—®é¢˜ã€‚è¿™é‡Œæˆ‘æŠŠè§£å†³æ–¹æ³•å‘Šè¯‰å¤§å®¶ã€‚</p> 
 <h3 id="BUG%E4%BF%AE%E6%94%B9">BUGä¿®æ”¹</h3> 
 <h3 id="1.wangeditor%E6%97%A0%E6%B3%95%E5%B1%95%E7%A4%BA%E9%97%AE%E9%A2%98">1.wangeditoræ— æ³•å±•ç¤ºé—®é¢˜</h3> 
 <p>å‡ºç°è¿™ä¸ªé—®é¢˜å¯èƒ½æ˜¯ç‰ˆæœ¬çš„é—®é¢˜ï¼Œè¿›å…¥åˆ°æˆ‘ä»¬çš„webç›®å½•ä¸­ï¼Œæ‰“å¼€ç»ˆç«¯çª—å£ç„¶åè¾“å…¥ä¸‹æ–¹æŒ‡ä»¤ã€‚é‡æ–°å®‰è£…wangeditorã€‚</p> 
 <pre><code>npm i wangeditor@4.6.3 --save</code></pre> 
 <hr> 
 <h3 id="2.%E5%BC%B9%E7%AA%97%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%85%B3%E9%97%AD%E9%97%AE%E9%A2%98">2.å¼¹çª—æ— æ³•æ­£å¸¸å…³é—­é—®é¢˜</h3> 
 <p>è¿™ä¸ªé—®é¢˜æ˜¯wangeditorå’Œvueç‰ˆæœ¬å…¼å®¹çš„é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹package.jsonã€‚å°†vueç‰ˆæœ¬æ”¹æˆä¸‹æ–¹å›¾ä¸­æ‰€ç¤ºï¼Œæ³¨æ„å‰è¾¹çš„ç¬¦å·ã€‚</p> 
 <p><img alt="" height="339" src="https://images2.imgbox.com/8a/c7/P2fuDbyX_o.png" width="701"></p> 
 <hr> 
 <h3 id="2.1%20%E6%B7%BB%E5%8A%A0admin-doc.vue">2.1 æ·»åŠ admin-doc.vue</h3> 
 <h4 id="2.1.1%20%E7%82%B9%E5%87%BBadmin-ebook%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E5%88%B0admin-doc">2.1.1 ç‚¹å‡»admin-ebookä¸­çš„è·¯ç”±è·³è½¬åˆ°admin-doc</h4> 
 <p>è¿˜è®°å¾—æˆ‘å½“åˆåœ¨admin-ebook.vueä¸­å†™çš„ä¸€ä¸ªrouterå—ï¼Ÿåœ¨æˆ‘ä»¬ç‚¹å‡»æ–‡æ¡£ç®¡ç†è·³è½¬åˆ°å¯¹åº”çš„ç»„ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯æœ‰ä¼ ä¸€ä¸ªebookIdè¿›æ¥çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯è·¯ç”±ä¼ å‚ã€‚</p> 
 <p><img alt="" height="175" src="https://images2.imgbox.com/63/78/pPJ67GrL_o.png" width="797"></p> 
 <hr> 
 <h4 id="%C2%A02.2.2%20%E8%BF%9B%E5%85%A5%E5%88%B0admin-doc%E4%B8%AD%E8%B0%83%E7%94%A8%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95">Â 2.2.2 è¿›å…¥åˆ°admin-docä¸­è°ƒç”¨åˆå§‹åŒ–æŸ¥è¯¢æ–¹æ³•</h4> 
 <p>è¿›å…¥åˆ°è¿™ä¸ªé¡µé¢å‘¢è°ƒç”¨äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯editor.create()ï¼Œç”¨äºåŠ è½½æˆ‘ä»¬çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦å¤–ä¸€ä¸ªæ–¹æ³•è°ƒç”¨çš„æ˜¯handleQuery()æ–¹æ³•ï¼Œå‘åç«¯å‘é€æŸ¥è¯¢è¯·æ±‚ã€‚</p> 
 <pre><code class="language-javascript">onMounted(() =&gt; {
        editor.create();
        handleQuery();
      });</code></pre> 
 <p>Â è¿™ä¸ªæ–¹æ³•è¿›å…¥çš„æ—¶å€™ï¼Œä¿®æ”¹äº†ä¸€ä¸ªå˜é‡loadingï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œä¿¡æ¯æŸ¥è¯¢çš„æ—¶å€™ä¼šç»™ç”¨æˆ·ä¸€ä¸ªåé¦ˆï¼Œå‘Šè¯‰ç”¨æˆ·ç¨ç­‰ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸ºtrueä¹‹åå°±ä¼šæœ‰é¡µé¢æ•°æ®åŠ è½½çš„æ•ˆæœã€‚</p> 
 <p>level1å˜é‡æˆ‘ä»¬ä¹‹å‰ä¹Ÿè¯´è¿‡ï¼Œç”¨äºä¿å­˜æ ‘å½¢ç»“æ„çš„æ•°æ®ã€‚ä¹‹åå‘¢å°±ä¼šå‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œç­‰æˆ‘ä»¬çš„æ•°æ®è¿”å›æ¥ä¹‹åå°±è¦æŠŠloadingæ”¹ä¸ºfalseäº†ã€‚</p> 
 <p>è‡³äºä¸‹è¾¹çš„treeSelectDataï¼Œåœ¨æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæ–‡æ¡£çš„çˆ¶æ–‡æ¡£çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬è¦æŠŠè¿™ä¸ªæ–‡æ¡£ä½œä¸ºæ ¹æ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯ä¸€çº§æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªæ–‡æ¡£çš„çˆ¶æ–‡æ¡£è®¾ç½®ä¸ºæ— ï¼Œä½†æ˜¯æˆ‘ä»¬çš„levelä¸­å­˜å‚¨çš„æ˜¯æ•°æ®åº“ä¸­æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œæ²¡æœ‰æ— è¿™ä¸ªé€‰é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ–°åŠ ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨level1çš„ç»“æœå’Œæ— ï¼Œè¿™æ ·ä¸ä¼šå½±å“æˆ‘ä»¬æŸ¥å‡ºæ¥çš„æ•°æ®ã€‚</p> 
 <pre><code class="language-javascript">const handleQuery = () =&gt; {
        loading.value = true;
        // å¦‚æœä¸æ¸…ç©ºç°æœ‰æ•°æ®ï¼Œåˆ™ç¼–è¾‘ä¿å­˜é‡æ–°åŠ è½½æ•°æ®åï¼Œå†ç‚¹ç¼–è¾‘ï¼Œåˆ™åˆ—è¡¨æ˜¾ç¤ºçš„è¿˜æ˜¯ç¼–è¾‘å‰çš„æ•°æ®
        level1.value = [];
        axios.get("/doc/all/" + route.query.ebookId).then((response) =&gt; {
          loading.value = false;
          const data = response.data;
          if (data.success) {
            docs.value = data.content;
            console.log("åŸå§‹æ•°ç»„ï¼š", docs.value);

            level1.value = [];
            level1.value = Tool.array2Tree(docs.value, 0);
            console.log("æ ‘å½¢ç»“æ„ï¼š", level1);

            // çˆ¶æ–‡æ¡£ä¸‹æ‹‰æ¡†åˆå§‹åŒ–ï¼Œç›¸å½“äºç‚¹å‡»æ–°å¢
            treeSelectData.value = Tool.copy(level1.value) || [];
            // ä¸ºé€‰æ‹©æ ‘æ·»åŠ ä¸€ä¸ª"æ— "
            treeSelectData.value.unshift({id: 0, name: 'æ— '});
          } else {
            message.error(data.message);
          }
        });
      };</code></pre> 
 <hr> 
 <h4 id="2.2.3%20%E6%96%87%E6%A1%A3%E7%BC%96%E8%BE%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82">2.2.3 æ–‡æ¡£ç¼–è¾‘ä¸­çš„ä¸€äº›ç»†èŠ‚</h4> 
 <p>åœ¨æˆ‘ä»¬è¿›è¡Œæ–‡æ¡£ç¼–è¾‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æŠŠè¯¥æ–‡æ¡£çš„çˆ¶æ–‡æ¡£æ”¹ä¸ºè‡ªå·±ï¼Œæˆ–è€…æ”¹ä¸ºå®ƒçš„å­æ–‡æ¡£ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ªç¯é”™è¯¯ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ä¿®æ”¹ä¸€ä¸ªæ–‡æ¡£çš„æ—¶å€™è¦æŠŠè¿™ä¸ªæ–‡æ¡£çš„å­æ–‡æ¡£å’Œè‡ªå·±è®¾ç½®ä¸ºä¸å¯é€‰ä¸­ã€‚</p> 
 <p><img alt="" height="709" src="https://images2.imgbox.com/7b/86/zgsrpl4z_o.png" width="1200"></p> 
 <p>Â æ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠæ ‘å½¢ç»“æ„çš„æ•°æ®ï¼Œè¿˜æœ‰æˆ‘ä»¬è¦ç¼–è¾‘çš„æ–‡æ¡£çš„idä¼ è¿›æ¥ï¼Œé¦–å…ˆè¿›è¡Œforå¾ªç¯å»æ‰¾åˆ°è¿™ä¸ªç»“ç‚¹ï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºä¸å¯è§ï¼Œç„¶åæˆ‘ä»¬å»éå†è¿™ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œé€’å½’è°ƒç”¨ã€‚</p> 
 <pre><code class="language-javascript">/**
       * å°†æŸèŠ‚ç‚¹åŠå…¶å­å­™èŠ‚ç‚¹å…¨éƒ¨ç½®ä¸ºdisabled
       */
      const setDisable = (treeSelectData: any, id: any) =&gt; {
        // console.log(treeSelectData, id);
        // éå†æ•°ç»„ï¼Œå³éå†æŸä¸€å±‚èŠ‚ç‚¹
        for (let i = 0; i &lt; treeSelectData.length; i++) {
          const node = treeSelectData[i];
          if (node.id === id) {
            // å¦‚æœå½“å‰èŠ‚ç‚¹å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹
            console.log("disabled", node);
            // å°†ç›®æ ‡èŠ‚ç‚¹è®¾ç½®ä¸ºdisabled
            node.disabled = true;

            // éå†æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå°†æ‰€æœ‰å­èŠ‚ç‚¹å…¨éƒ¨éƒ½åŠ ä¸Šdisabled
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              for (let j = 0; j &lt; children.length; j++) {
                setDisable(children, children[j].id)
              }
            }
          } else {
            // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™åˆ°å…¶å­èŠ‚ç‚¹å†æ‰¾æ‰¾çœ‹ã€‚
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              setDisable(children, id);
            }
          }
        }
      };</code></pre> 
 <hr> 
 <h4 id="2.2.4%20%E6%96%87%E6%A1%A3%E7%9A%84%E5%88%A0%E9%99%A4">2.2.4 æ–‡æ¡£çš„åˆ é™¤</h4> 
 <p>æ–‡æ¡£çš„åˆ é™¤å¹¶ä¸åªæ˜¯è¯¥æ–‡æ¡£ç®€å•åˆ é™¤å°±å®Œäº†ï¼Œè¿™ä¸ªæ–‡æ¡£åˆ æ‰ä¹‹åï¼Œè¿™ä¸ªæ–‡æ¡£çš„æ‰€æœ‰å­æ–‡æ¡£éƒ½è¦åˆ é™¤ã€‚æˆ‘ä»¬ä¹‹å‰åˆ†ç±»ç®¡ç†æ¨¡å—ä¹Ÿå¤„ç†è¿‡è¿™æ ·çš„åˆ é™¤ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯åç«¯å¤„ç†çš„åˆ é™¤é€»è¾‘ï¼Œåç«¯å¤„ç†èµ·æ¥å‘¢æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç«¯å¤„ç†ä¸€ä¸‹ã€‚æ—¢ç„¶è¦åˆ é™¤å­åˆ†æ”¯ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸ªè¦åˆ é™¤çš„æ–‡æ¡£çš„å­æ–‡æ¡£çš„idéƒ½æŸ¥å‡ºæ¥ä¸€èµ·ä¼ åˆ°åç«¯ã€‚</p> 
 <pre><code class="language-javascript">/**
       * æŸ¥æ‰¾æ•´æ ¹æ ‘æ
       */
      const getDeleteIds = (treeSelectData: any, id: any) =&gt; {
        // console.log(treeSelectData, id);
        // éå†æ•°ç»„ï¼Œå³éå†æŸä¸€å±‚èŠ‚ç‚¹
        for (let i = 0; i &lt; treeSelectData.length; i++) {
          const node = treeSelectData[i];
          if (node.id === id) {
            // å¦‚æœå½“å‰èŠ‚ç‚¹å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹
            console.log("delete", node);
            // å°†ç›®æ ‡IDæ”¾å…¥ç»“æœé›†ids
            // node.disabled = true;
            deleteIds.push(id);
            deleteNames.push(node.name);

            // éå†æ‰€æœ‰å­èŠ‚ç‚¹
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              for (let j = 0; j &lt; children.length; j++) {
                getDeleteIds(children, children[j].id)
              }
            }
          } else {
            // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™åˆ°å…¶å­èŠ‚ç‚¹å†æ‰¾æ‰¾çœ‹ã€‚
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              getDeleteIds(children, id);
            }
          }
        }
      };</code></pre> 
 <hr> 
 <h4 id="2.2.5%20admin-doc.vue%E5%85%A8%E9%83%A8%E4%BB%A3%E7%A0%81">2.2.5 admin-doc.vueå…¨éƒ¨ä»£ç </h4> 
 <pre><code class="language-html">&lt;template&gt;
  &lt;a-layout&gt;
    &lt;a-layout-content
      :style="{ background: '#fff', padding: '24px', margin: 0, minHeight: '280px' }"
    &gt;
      &lt;a-row :gutter="24"&gt;
        &lt;a-col :span="8"&gt;
          &lt;p&gt;
            &lt;a-form layout="inline" :model="param"&gt;
              &lt;a-form-item&gt;
                &lt;a-button type="primary" @click="handleQuery()"&gt;
                  æŸ¥è¯¢
                &lt;/a-button&gt;
              &lt;/a-form-item&gt;
              &lt;a-form-item&gt;
                &lt;a-button type="primary" @click="add()"&gt;
                  æ–°å¢
                &lt;/a-button&gt;
              &lt;/a-form-item&gt;
            &lt;/a-form&gt;
          &lt;/p&gt;
          &lt;a-table
            v-if="level1.length &gt; 0"
            :columns="columns"
            :row-key="record =&gt; record.id"
            :data-source="level1"
            :loading="loading"
            :pagination="false"
            size="small"
            :defaultExpandAllRows="true"
          &gt;
            &lt;template #name="{ text, record }"&gt;
              {<!-- -->{record.sort}} {<!-- -->{text}}
            &lt;/template&gt;
            &lt;template v-slot:action="{ text, record }"&gt;
              &lt;a-space size="small"&gt;
                &lt;a-button type="primary" @click="edit(record)" size="small"&gt;
                  ç¼–è¾‘
                &lt;/a-button&gt;
                &lt;a-popconfirm
                  title="åˆ é™¤åä¸å¯æ¢å¤ï¼Œç¡®è®¤åˆ é™¤?"
                  ok-text="æ˜¯"
                  cancel-text="å¦"
                  @confirm="handleDelete(record.id)"
                &gt;
                  &lt;a-button type="danger" size="small"&gt;
                    åˆ é™¤
                  &lt;/a-button&gt;
                &lt;/a-popconfirm&gt;
              &lt;/a-space&gt;
            &lt;/template&gt;
          &lt;/a-table&gt;
        &lt;/a-col&gt;
        &lt;a-col :span="16"&gt;
          &lt;p&gt;
            &lt;a-form layout="inline" :model="param"&gt;
              &lt;a-form-item&gt;
                &lt;a-button type="primary" @click="handleSave()"&gt;
                  ä¿å­˜
                &lt;/a-button&gt;
              &lt;/a-form-item&gt;
            &lt;/a-form&gt;
          &lt;/p&gt;
          &lt;a-form :model="doc" layout="vertical"&gt;
            &lt;a-form-item&gt;
              &lt;a-input v-model:value="doc.name" placeholder="åç§°"/&gt;
            &lt;/a-form-item&gt;
            &lt;a-form-item&gt;
              &lt;a-tree-select
                v-model:value="doc.parent"
                style="width: 100%"
                :dropdown-style="{ maxHeight: '400px', overflow: 'auto' }"
                :tree-data="treeSelectData"
                placeholder="è¯·é€‰æ‹©çˆ¶æ–‡æ¡£"
                tree-default-expand-all
                :replaceFields="{title: 'name', key: 'id', value: 'id'}"
              &gt;
              &lt;/a-tree-select&gt;
            &lt;/a-form-item&gt;
            &lt;a-form-item&gt;
              &lt;a-input v-model:value="doc.sort" placeholder="é¡ºåº"/&gt;
            &lt;/a-form-item&gt;
            &lt;a-form-item&gt;
              &lt;a-button type="primary" @click="handlePreviewContent()"&gt;
                &lt;EyeOutlined /&gt; å†…å®¹é¢„è§ˆ
              &lt;/a-button&gt;
            &lt;/a-form-item&gt;
            &lt;a-form-item&gt;
              &lt;div id="content"&gt;&lt;/div&gt;
            &lt;/a-form-item&gt;
          &lt;/a-form&gt;
        &lt;/a-col&gt;
      &lt;/a-row&gt;

      &lt;a-drawer width="900" placement="right" :closable="false" :visible="drawerVisible" @close="onDrawerClose"&gt;
        &lt;div class="wangeditor" :innerHTML="previewHtml"&gt;&lt;/div&gt;
      &lt;/a-drawer&gt;

    &lt;/a-layout-content&gt;
  &lt;/a-layout&gt;

&lt;/template&gt;

&lt;script lang="ts"&gt;
  import { defineComponent, onMounted, ref, createVNode } from 'vue';
  import axios from 'axios';
  import {message, Modal} from 'ant-design-vue';
  import {Tool} from "@/util/tool";
  import {useRoute} from "vue-router";
  import ExclamationCircleOutlined from "@ant-design/icons-vue/ExclamationCircleOutlined";
  import E from 'wangeditor'

  export default defineComponent({
    name: 'AdminDoc',
    setup() {
      const route = useRoute();
      console.log("è·¯ç”±ï¼š", route);
      console.log("route.pathï¼š", route.path);
      console.log("route.queryï¼š", route.query);
      console.log("route.paramï¼š", route.params);
      console.log("route.fullPathï¼š", route.fullPath);
      console.log("route.nameï¼š", route.name);
      console.log("route.metaï¼š", route.meta);
      const param = ref();
      param.value = {};
      const docs = ref();
      const loading = ref(false);
      // å› ä¸ºæ ‘é€‰æ‹©ç»„ä»¶çš„å±æ€§çŠ¶æ€ï¼Œä¼šéšå½“å‰ç¼–è¾‘çš„èŠ‚ç‚¹è€Œå˜åŒ–ï¼Œæ‰€ä»¥å•ç‹¬å£°æ˜ä¸€ä¸ªå“åº”å¼å˜é‡
      const treeSelectData = ref();
      treeSelectData.value = [];

      const columns = [
        {
          title: 'åç§°',
          dataIndex: 'name',
          slots: { customRender: 'name' }
        },
        {
          title: 'Action',
          key: 'action',
          slots: { customRender: 'action' }
        }
      ];

     
      const level1 = ref(); // ä¸€çº§æ–‡æ¡£æ ‘ï¼Œchildrenå±æ€§å°±æ˜¯äºŒçº§æ–‡æ¡£
      level1.value = [];

      /**
       * æ•°æ®æŸ¥è¯¢
       **/
      const handleQuery = () =&gt; {
        loading.value = true;
        // å¦‚æœä¸æ¸…ç©ºç°æœ‰æ•°æ®ï¼Œåˆ™ç¼–è¾‘ä¿å­˜é‡æ–°åŠ è½½æ•°æ®åï¼Œå†ç‚¹ç¼–è¾‘ï¼Œåˆ™åˆ—è¡¨æ˜¾ç¤ºçš„è¿˜æ˜¯ç¼–è¾‘å‰çš„æ•°æ®
        level1.value = [];
        axios.get("/doc/all/" + route.query.ebookId).then((response) =&gt; {
          loading.value = false;
          const data = response.data;
          if (data.success) {
            docs.value = data.content;
            console.log("åŸå§‹æ•°ç»„ï¼š", docs.value);

            level1.value = [];
            level1.value = Tool.array2Tree(docs.value, 0);
            console.log("æ ‘å½¢ç»“æ„ï¼š", level1);

            // çˆ¶æ–‡æ¡£ä¸‹æ‹‰æ¡†åˆå§‹åŒ–ï¼Œç›¸å½“äºç‚¹å‡»æ–°å¢
            treeSelectData.value = Tool.copy(level1.value) || [];
            // ä¸ºé€‰æ‹©æ ‘æ·»åŠ ä¸€ä¸ª"æ— "
            treeSelectData.value.unshift({id: 0, name: 'æ— '});
          } else {
            message.error(data.message);
          }
        });
      };

      // -------- è¡¨å• ---------
      const doc = ref();
      doc.value = {
        ebookId: route.query.ebookId
      };
      const modalVisible = ref(false);
      const modalLoading = ref(false);
      const editor = new E('#content');
      editor.config.zIndex = 0;
      // æ˜¾ç¤ºä¸Šä¼ å›¾ç‰‡æŒ‰é’®ï¼Œè½¬æˆBase64å­˜å‚¨ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ‹–æ‹½å›¾ç‰‡
     
      editor.config.uploadImgShowBase64 = true;

      const handleSave = () =&gt; {
        modalLoading.value = true;
        doc.value.content = editor.txt.html();
        axios.post("/doc/save", doc.value).then((response) =&gt; {
          modalLoading.value = false;
          const data = response.data; // data = commonResp
          if (data.success) {
            // modalVisible.value = false;
            message.success("ä¿å­˜æˆåŠŸï¼");

            // é‡æ–°åŠ è½½åˆ—è¡¨
            handleQuery();
          } else {
            message.error(data.message);
          }
        });
      };

      /**
       * å°†æŸèŠ‚ç‚¹åŠå…¶å­å­™èŠ‚ç‚¹å…¨éƒ¨ç½®ä¸ºdisabled
       */
      const setDisable = (treeSelectData: any, id: any) =&gt; {
        // console.log(treeSelectData, id);
        // éå†æ•°ç»„ï¼Œå³éå†æŸä¸€å±‚èŠ‚ç‚¹
        for (let i = 0; i &lt; treeSelectData.length; i++) {
          const node = treeSelectData[i];
          if (node.id === id) {
            // å¦‚æœå½“å‰èŠ‚ç‚¹å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹
            console.log("disabled", node);
            // å°†ç›®æ ‡èŠ‚ç‚¹è®¾ç½®ä¸ºdisabled
            node.disabled = true;

            // éå†æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå°†æ‰€æœ‰å­èŠ‚ç‚¹å…¨éƒ¨éƒ½åŠ ä¸Šdisabled
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              for (let j = 0; j &lt; children.length; j++) {
                setDisable(children, children[j].id)
              }
            }
          } else {
            // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™åˆ°å…¶å­èŠ‚ç‚¹å†æ‰¾æ‰¾çœ‹ã€‚
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              setDisable(children, id);
            }
          }
        }
      };

      const deleteIds: Array&lt;string&gt; = [];
      const deleteNames: Array&lt;string&gt; = [];
      /**
       * æŸ¥æ‰¾æ•´æ ¹æ ‘æ
       */
      const getDeleteIds = (treeSelectData: any, id: any) =&gt; {
        // console.log(treeSelectData, id);
        // éå†æ•°ç»„ï¼Œå³éå†æŸä¸€å±‚èŠ‚ç‚¹
        for (let i = 0; i &lt; treeSelectData.length; i++) {
          const node = treeSelectData[i];
          if (node.id === id) {
            // å¦‚æœå½“å‰èŠ‚ç‚¹å°±æ˜¯ç›®æ ‡èŠ‚ç‚¹
            console.log("delete", node);
            // å°†ç›®æ ‡IDæ”¾å…¥ç»“æœé›†ids
            // node.disabled = true;
            deleteIds.push(id);
            deleteNames.push(node.name);

            // éå†æ‰€æœ‰å­èŠ‚ç‚¹
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              for (let j = 0; j &lt; children.length; j++) {
                getDeleteIds(children, children[j].id)
              }
            }
          } else {
            // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™åˆ°å…¶å­èŠ‚ç‚¹å†æ‰¾æ‰¾çœ‹ã€‚
            const children = node.children;
            if (Tool.isNotEmpty(children)) {
              getDeleteIds(children, id);
            }
          }
        }
      };

      /**
       * å†…å®¹æŸ¥è¯¢
       **/
      const handleQueryContent = () =&gt; {
        axios.get("/doc/find-content/" + doc.value.id).then((response) =&gt; {
          const data = response.data;
          if (data.success) {
            editor.txt.html(data.content)
          } else {
            message.error(data.message);
          }
        });
      };

      /**
       * ç¼–è¾‘
       */
      const edit = (record: any) =&gt; {
        // æ¸…ç©ºå¯Œæ–‡æœ¬æ¡†
        editor.txt.html("");
        modalVisible.value = true;
        doc.value = Tool.copy(record);
        handleQueryContent();

        // ä¸èƒ½é€‰æ‹©å½“å‰èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œä½œä¸ºçˆ¶èŠ‚ç‚¹ï¼Œä¼šä½¿æ ‘æ–­å¼€
        treeSelectData.value = Tool.copy(level1.value);
        setDisable(treeSelectData.value, record.id);

        // ä¸ºé€‰æ‹©æ ‘æ·»åŠ ä¸€ä¸ª"æ— "
        treeSelectData.value.unshift({id: 0, name: 'æ— '});
      };

      /**
       * æ–°å¢
       */
      const add = () =&gt; {
        // æ¸…ç©ºå¯Œæ–‡æœ¬æ¡†
        editor.txt.html("");
        modalVisible.value = true;
        doc.value = {
          ebookId: route.query.ebookId
        };

        treeSelectData.value = Tool.copy(level1.value) || [];

        // ä¸ºé€‰æ‹©æ ‘æ·»åŠ ä¸€ä¸ª"æ— "
        treeSelectData.value.unshift({id: 0, name: 'æ— '});
      };

      const handleDelete = (id: number) =&gt; {
        // console.log(level1, level1.value, id)
        // æ¸…ç©ºæ•°ç»„ï¼Œå¦åˆ™å¤šæ¬¡åˆ é™¤æ—¶ï¼Œæ•°ç»„ä¼šä¸€ç›´å¢åŠ 
        deleteIds.length = 0;
        deleteNames.length = 0;
        getDeleteIds(level1.value, id);
        Modal.confirm({
          title: 'é‡è¦æé†’',
          icon: createVNode(ExclamationCircleOutlined),
          content: 'å°†åˆ é™¤ï¼šã€' + deleteNames.join("ï¼Œ") + "ã€‘åˆ é™¤åä¸å¯æ¢å¤ï¼Œç¡®è®¤åˆ é™¤ï¼Ÿ",
          onOk() {
            // console.log(ids)
            axios.delete("/doc/delete/" + deleteIds.join(",")).then((response) =&gt; {
              const data = response.data; // data = commonResp
              if (data.success) {
                // é‡æ–°åŠ è½½åˆ—è¡¨
                handleQuery();
              } else {
                message.error(data.message);
              }
            });
          },
        });
      };

      // ----------------å¯Œæ–‡æœ¬é¢„è§ˆ--------------
      const drawerVisible = ref(false);
      const previewHtml = ref();
      const handlePreviewContent = () =&gt; {
        const html = editor.txt.html();
        previewHtml.value = html;
        drawerVisible.value = true;
      };
      const onDrawerClose = () =&gt; {
        drawerVisible.value = false;
      };

      onMounted(() =&gt; {
        editor.create();
        handleQuery();
      });

      return {
        param,
        // docs,
        level1,
        columns,
        loading,
        handleQuery,

        edit,
        add,

        doc,
        modalVisible,
        modalLoading,
        handleSave,

        handleDelete,

        treeSelectData,

        drawerVisible,
        previewHtml,
        handlePreviewContent,
        onDrawerClose,
      }
    }
  });
&lt;/script&gt;

&lt;style scoped&gt;
  img {
    width: 50px;
    height: 50px;
  }
&lt;/style&gt;
</code></pre> 
 <hr> 
 <h3 id="2.2%20%E6%B7%BB%E5%8A%A0DocView.vue">2.2 æ·»åŠ DocView.vue</h3> 
 <p>è¿™ä¸ªç»„ä»¶å‘¢å°±æ˜¯ä¸ºäº†åœ¨ä¸»é¡µå±•ç¤ºæ–‡æ¡£æ•°æ®ã€‚ä½†æ˜¯å…¶ä¸­çš„ä¸€äº›åŠŸèƒ½åç«¯è¿˜æœªå®ç°ã€‚</p> 
 <pre><code class="language-html">&lt;template&gt;
  &lt;a-layout&gt;
    &lt;a-layout-content :style="{ background: '#fff', padding: '24px', margin: 0, minHeight: '280px' }"&gt;
      &lt;h3 v-if="level1.length === 0"&gt;å¯¹ä¸èµ·ï¼Œæ‰¾ä¸åˆ°ç›¸å…³æ–‡æ¡£ï¼&lt;/h3&gt;
      &lt;a-row&gt;
        &lt;a-col :span="6"&gt;
          &lt;a-tree
            v-if="level1.length &gt; 0"
            :tree-data="level1"
            @select="onSelect"
            :replaceFields="{title: 'name', key: 'id', value: 'id'}"
            :defaultExpandAll="true"
            :defaultSelectedKeys="defaultSelectedKeys"
          &gt;
          &lt;/a-tree&gt;
        &lt;/a-col&gt;
        &lt;a-col :span="18"&gt;
          &lt;div&gt;
            &lt;h2&gt;{<!-- -->{doc.name}}&lt;/h2&gt;
            &lt;div&gt;
              &lt;span&gt;é˜…è¯»æ•°ï¼š{<!-- -->{doc.viewCount}}&lt;/span&gt; &amp;nbsp; &amp;nbsp;
              &lt;span&gt;ç‚¹èµæ•°ï¼š{<!-- -->{doc.voteCount}}&lt;/span&gt;
            &lt;/div&gt;
            &lt;a-divider style="height: 2px; background-color: #9999cc"/&gt;
          &lt;/div&gt;
          &lt;div class="wangeditor" :innerHTML="html"&gt;&lt;/div&gt;
          &lt;div class="vote-div"&gt;
            &lt;a-button type="primary" shape="round" :size="'large'" @click="vote"&gt;
              &lt;template #icon&gt;&lt;LikeOutlined /&gt; &amp;nbsp;ç‚¹èµï¼š{<!-- -->{doc.voteCount}} &lt;/template&gt;
            &lt;/a-button&gt;
          &lt;/div&gt;
        &lt;/a-col&gt;
      &lt;/a-row&gt;
    &lt;/a-layout-content&gt;
  &lt;/a-layout&gt;
&lt;/template&gt;

&lt;script lang="ts"&gt;
  import { defineComponent, onMounted, ref, createVNode } from 'vue';
  import axios from 'axios';
  import {message} from 'ant-design-vue';
  import {Tool} from "@/util/tool";
  import {useRoute} from "vue-router";

  export default defineComponent({
    name: 'Doc',
    setup() {
      const route = useRoute();
      const docs = ref();
      const html = ref();
      const defaultSelectedKeys = ref();
      defaultSelectedKeys.value = [];
      // å½“å‰é€‰ä¸­çš„æ–‡æ¡£
      const doc = ref();
      doc.value = {};

     
      const level1 = ref(); // ä¸€çº§æ–‡æ¡£æ ‘ï¼Œchildrenå±æ€§å°±æ˜¯äºŒçº§æ–‡æ¡£
      level1.value = [];

      /**
       * å†…å®¹æŸ¥è¯¢
       **/
      const handleQueryContent = (id: number) =&gt; {
        axios.get("/doc/find-content/" + id).then((response) =&gt; {
          const data = response.data;
          if (data.success) {
            html.value = data.content;
          } else {
            message.error(data.message);
          }
        });
      };

      /**
       * æ•°æ®æŸ¥è¯¢
       **/
      const handleQuery = () =&gt; {
        axios.get("/doc/all/" + route.query.ebookId).then((response) =&gt; {
          const data = response.data;
          if (data.success) {
            docs.value = data.content;

            level1.value = [];
            level1.value = Tool.array2Tree(docs.value, 0);

            if (Tool.isNotEmpty(level1)) {
              defaultSelectedKeys.value = [level1.value[0].id];
              handleQueryContent(level1.value[0].id);
              // åˆå§‹æ˜¾ç¤ºæ–‡æ¡£ä¿¡æ¯
              doc.value = level1.value[0];
            }
          } else {
            message.error(data.message);
          }
        });
      };

      const onSelect = (selectedKeys: any, info: any) =&gt; {
        console.log('selected', selectedKeys, info);
        if (Tool.isNotEmpty(selectedKeys)) {
          // é€‰ä¸­æŸä¸€èŠ‚ç‚¹æ—¶ï¼ŒåŠ è½½è¯¥èŠ‚ç‚¹çš„æ–‡æ¡£ä¿¡æ¯
          doc.value = info.selectedNodes[0].props;
          // åŠ è½½å†…å®¹
          handleQueryContent(selectedKeys[0]);
        }
      };

      // ç‚¹èµ
      const vote = () =&gt; {
        axios.get('/doc/vote/' + doc.value.id).then((response) =&gt; {
          const data = response.data;
          if (data.success) {
            doc.value.voteCount++;
          } else {
            message.error(data.message);
          }
        });
      };

      onMounted(() =&gt; {
        handleQuery();
      });

      return {
        level1,
        html,
        onSelect,
        defaultSelectedKeys,
        doc,
        vote
      }
    }
  });
&lt;/script&gt;

&lt;style&gt;
  /* table æ ·å¼ */
  .wangeditor table {
    border-top: 1px solid #ccc;
    border-left: 1px solid #ccc;
  }
  .wangeditor table td,
  .wangeditor table th {
    border-bottom: 1px solid #ccc;
    border-right: 1px solid #ccc;
    padding: 3px 5px;
  }
  .wangeditor table th {
    border-bottom: 2px solid #ccc;
    text-align: center;
  }

  /* blockquote æ ·å¼ */
  .wangeditor blockquote {
    display: block;
    border-left: 8px solid #d0e5f2;
    padding: 5px 10px;
    margin: 10px 0;
    line-height: 1.4;
    font-size: 100%;
    background-color: #f1f1f1;
  }

  /* code æ ·å¼ */
  .wangeditor code {
    display: inline-block;
    *display: inline;
    *zoom: 1;
    background-color: #f1f1f1;
    border-radius: 3px;
    padding: 3px 5px;
    margin: 0 3px;
  }
  .wangeditor pre code {
    display: block;
  }

  /* ul ol æ ·å¼ */
  .wangeditor ul, ol {
    margin: 10px 0 10px 20px;
  }

  /* å’Œantdv på†²çªï¼Œè¦†ç›–æ‰ */
  .wangeditor blockquote p {
    font-family:"YouYuan";
    margin: 20px 10px !important;
    font-size: 16px !important;
    font-weight:600;
  }

  /* ç‚¹èµ */
  .vote-div {
    padding: 15px;
    text-align: center;
  }

  /* å›¾ç‰‡è‡ªé€‚åº” */
  .wangeditor img {
    max-width: 100%;
    height: auto;
  }

  /* è§†é¢‘è‡ªé€‚åº” */
  .wangeditor iframe {
    width: 100%;
    height: 400px;
  }
&lt;/style&gt;
</code></pre> 
 <hr> 
 <h3 id="2.3%20%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99">2.3 æ·»åŠ æ–°çš„è·¯ç”±è§„åˆ™</h3> 
 <p>åœ¨routerä¸‹çš„index.jsä¸­æ–°å¢ä¸¤ä¸ªè·¯ç”±è§„åˆ™ã€‚</p> 
 <pre><code class="language-html"> {
    path: '/doc',
    name: 'doc',
    component:DocView
  },
 {
    path: '/admin/doc',
    name: 'AdminDoc',
    component: AdminDoc
  }</code></pre> 
 <p>åç»­æˆ‘ä¼šæŠŠåç«¯çš„ä»£ç è¡¥ä¸Šçš„ã€‚</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f99dfc8a85e8007e1c3aecdc54df4160/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">SQL Serverä¸­çš„CTEå’Œä¸´æ—¶è¡¨ä¼˜åŒ–</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e355149da4ee3421a801505a6feb6ea3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">kafkaç”Ÿäº§æ¶ˆè´¹æµç¨‹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>