<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java将html转成图片 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a49caf47e63b2a7a29d5d259cbbe44f9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="java将html转成图片">
  <meta property="og:description" content="java 将html转成图片 1.导入jar2.代码3.展示结果4.注意事项 最近有一个需求需要根据指定的样式生成图片，使用java原生技术有些麻烦，所以上网搜了下案例，最后发现最好用的还是html2image，这里进行简单总结下。 1.导入jar &lt;!-- 用于将html转图片--&gt; &lt;dependency&gt; &lt;groupId&gt;gui.ava&lt;/groupId&gt; &lt;artifactId&gt;html2image&lt;/artifactId&gt; &lt;version&gt;2.0.1&lt;/version&gt; &lt;/dependency&gt; 2.代码 下面是示例代码，这里使用String的方式传入html信息，除了直接传入还支持传入文件流、传入文件等其他方式，差距不大，这里不列举其他方式的细节了。
import gui.ava.html.parser.HtmlParser; import gui.ava.html.parser.HtmlParserImpl; import gui.ava.html.renderer.ImageRenderer; import gui.ava.html.renderer.ImageRendererImpl; public class TestTableToImage { public static void main(String[] args) throws Exception { HtmlParser htmlParser = new HtmlParserImpl(); String HtmlTemplateStr = &#34;&lt;html lang=\&#34;zh-CN\&#34;&gt;\n&#34; &#43; &#34;&lt;head&gt;\n&#34; &#43; &#34; &lt;meta charset=\&#34;UTF-8\&#34;&gt;\n&#34; &#43; &#34; &lt;title&gt;入库单&lt;/title&gt;\n&#34; &#43; &#34;&lt;/head&gt;\n&#34; &#43; &#34;&lt;body&gt;\n&#34; &#43; &#34;\t&lt;!--外层的表格 --&gt;\n&#34; &#43; &#34;\t&lt;table style=\&#34;border: 2px solid black;padding: 10px \&#34; cellpadding=\&#34;5\&#34; align=\&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-26T09:26:52+08:00">
    <meta property="article:modified_time" content="2024-06-26T09:26:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java将html转成图片</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>java 将html转成图片</h4> 
 <ul><li><ul><li><a href="#1jar_2" rel="nofollow">1.导入jar</a></li><li><a href="#2_12" rel="nofollow">2.代码</a></li><li><a href="#3_106" rel="nofollow">3.展示结果</a></li><li><a href="#4_111" rel="nofollow">4.注意事项</a></li></ul> 
 </li></ul> 
</div> 
<br> 最近有一个需求需要根据指定的样式生成图片，使用java原生技术有些麻烦，所以上网搜了下案例，最后发现最好用的还是html2image，这里进行简单总结下。 
<p></p> 
<h3><a id="1jar_2"></a>1.导入jar</h3> 
<pre><code class="prism language-xml"> <span class="token comment">&lt;!-- 用于将html转图片--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>gui.ava<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>html2image<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="2_12"></a>2.代码</h3> 
<p>下面是示例代码，这里使用String的方式传入html信息，除了直接传入还支持传入文件流、传入文件等其他方式，差距不大，这里不列举其他方式的细节了。</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">gui<span class="token punctuation">.</span>ava<span class="token punctuation">.</span>html<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span><span class="token class-name">HtmlParser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">gui<span class="token punctuation">.</span>ava<span class="token punctuation">.</span>html<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span><span class="token class-name">HtmlParserImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">gui<span class="token punctuation">.</span>ava<span class="token punctuation">.</span>html<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span></span><span class="token class-name">ImageRenderer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">gui<span class="token punctuation">.</span>ava<span class="token punctuation">.</span>html<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span></span><span class="token class-name">ImageRendererImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestTableToImage</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">HtmlParser</span> htmlParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HtmlParserImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> <span class="token class-name">HtmlTemplateStr</span> <span class="token operator">=</span> <span class="token string">"&lt;html lang=\"zh-CN\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"&lt;head&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"    &lt;meta charset=\"UTF-8\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"    &lt;title&gt;入库单&lt;/title&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"&lt;/head&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"&lt;body&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t&lt;!--外层的表格 --&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t&lt;table style=\"border: 2px solid black;padding: 10px \"  cellpadding=\"5\" align=\"center\" &gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t&lt;tr &gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t&lt;th style=\"font-size:25px;height: 60px;\" align=\"center\"&gt;入库单&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t&lt;tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t&lt;th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t&lt;table border=\"1\" style=\"border-color: #ccc;\" cellspacing=\"0\" cellpadding=\"15\" width=\"900px\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 60px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th style=\"width: 150px;\"&gt;调度单号&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;调度单号22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th style=\"width: 150px;\"&gt;客户名称&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;客户名称22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th &gt;车牌照号&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;车牌照号22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;装运时间&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;装运时间22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr height=\"50px;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;td colspan=\"6\" style=\"font-size:23px;color: #696969\" align=\"center\"&gt;货物信息&lt;/td&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;钢卷号&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;钢卷号22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;磅单号&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;磅单号22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;材质&lt;/th&gt;&lt;th style=\"width: 150px;\"&gt;材质22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;规格型号&lt;/th&gt;&lt;th style=\"width: 150px;\"&gt;规格型号22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;td&gt;货物名称&lt;/td&gt;&lt;th style=\"width: 150px;\"&gt;货物名称22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\" align=\"center\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;td&gt;件数&lt;/td&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;件数22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;td&gt;重量&lt;/td&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;重量22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\" align=\"center\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;td colspan=\"6\" style=\"font-size:23px;color: #696969\"&gt;客户信息&lt;/td&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;收货联系人&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;收货联系人22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th&gt;收货人电话&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;收货人电话22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr  style=\"color: #696969;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th &gt;库房名称&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;库房名称22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th &gt;库房地址&lt;/th&gt; &lt;th colspan=\"2\" style=\"width: 300px;\"&gt;库房地址22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;!--\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;tr style=\"color: #696969;height: 50px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t\t&lt;th &gt;收货地点&lt;/th&gt; &lt;th colspan=\"5\" style=\"width: 750px;\"&gt;收货地点22&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t\t --&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\t&lt;/table&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t&lt;tr style=\"height: 150px;\"&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\t&lt;th&gt;&lt;/th&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t&lt;/tr&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t\t\n"</span> <span class="token operator">+</span>
                <span class="token string">"\t&lt;/table&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"&lt;/body&gt;\n"</span> <span class="token operator">+</span>
                <span class="token string">"&lt;/html&gt;"</span><span class="token punctuation">;</span>
        htmlParser<span class="token punctuation">.</span><span class="token function">loadHtml</span><span class="token punctuation">(</span><span class="token class-name">HtmlTemplateStr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ImageRenderer</span> imageRenderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageRendererImpl</span><span class="token punctuation">(</span>htmlParser<span class="token punctuation">)</span><span class="token punctuation">;</span>
        imageRenderer<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">955</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        imageRenderer<span class="token punctuation">.</span><span class="token function">saveImage</span><span class="token punctuation">(</span><span class="token string">"D:\\66.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="3_106"></a>3.展示结果</h3> 
<p>执行上面的代码生成的图片如下，可以看到效果还是不错的，相比于其他的三方jar来说这个jar还是挺方便，笔者也是尝试了多个jar最后决定用的这个三方包，推进使用，可以看到生成的效果还是不错的。<br> <img src="https://images2.imgbox.com/bf/99/5QnMBx3y_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4_111"></a>4.注意事项</h3> 
<p>我去maven仓库中找这个jar时，发现这个包已经很多年没有更新了，不过还是很好用，可以不用在意这个事。</p> 
<ul><li>需要注意的是有一些格式如果不放到style中直接写可能识别不了，所以在使用时尽量所有<strong>格式写在style</strong>中，防止不生效</li><li>此外还有一点，自动生成图片的宽度需要自己调整，这个宽度可能会有一些白边，<strong>使用imageRenderer.setWidth进行调整宽度</strong>即可</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7c4c01cd5e7a2e2bde3c724036748c08/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Django中，update_or_create()</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/679387bdb0c400255bf0c2e46d4b1e10/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android 解决 “Module was compiled with an incompatible version of Kotlin“ 问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>