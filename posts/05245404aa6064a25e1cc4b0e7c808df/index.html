<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaScript轮播图 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/05245404aa6064a25e1cc4b0e7c808df/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="JavaScript轮播图">
  <meta property="og:description" content="HTML部分
&lt;div class=&#34;box&#34; onmouseover=&#34;over()&#34; onmouseout=&#34;noover()&#34;&gt; &lt;img src=&#34;./img/zuo.png&#34; alt=&#34;&#34; class=&#34;left_arrow&#34; onclick=&#34;left_last()&#34;&gt; &lt;img src=&#34;./img/yy.png&#34; alt=&#34;&#34; class=&#34;right_arrow&#34; onclick=&#34;right_word()&#34;&gt; &lt;div id=&#34;carousel&#34;&gt; &lt;/div&gt; &lt;div class=&#34;round&#34;&gt; &lt;/div&gt; &lt;/div&gt; JavaScript部分：携带注释哟家人们
&lt;script&gt; let data; // 声明一个变量用于存储从服务器获取的数据 let k = 0; // 当前显示的图片索引 let imgwidth; // 图片宽度 let imgheight; // 图片高度 let inter; // 用于存储定时器的变量 // 创建一个XMLHttpRequest对象用于发送请求 let xhr = new XMLHttpRequest(); // 设置请求方式和请求地址 xhr.open(&#39;get&#39;, &#39;./js/banner.json&#39;, true); // 发送请求 xhr.send(); // 接收返回的响应数据 xhr.onreadystatechange = function() { if (xhr.readyState == 4 &amp;&amp; xhr.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-24T21:26:04+08:00">
    <meta property="article:modified_time" content="2024-07-24T21:26:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaScript轮播图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>HTML部分</p> 
<pre><code class="language-html">&lt;div class="box" onmouseover="over()" onmouseout="noover()"&gt;
			&lt;img src="./img/zuo.png" alt="" class="left_arrow" onclick="left_last()"&gt;
			&lt;img src="./img/yy.png" alt="" class="right_arrow" onclick="right_word()"&gt;
			&lt;div id="carousel"&gt;
			&lt;/div&gt;
			&lt;div class="round"&gt;

			&lt;/div&gt;
		&lt;/div&gt;
</code></pre> 
<p>JavaScript部分：携带注释哟家人们</p> 
<pre><code class="language-javascript">&lt;script&gt;
			let data; // 声明一个变量用于存储从服务器获取的数据
			let k = 0; // 当前显示的图片索引
			let imgwidth; // 图片宽度
			let imgheight; // 图片高度
			let inter; // 用于存储定时器的变量

			// 创建一个XMLHttpRequest对象用于发送请求
			let xhr = new XMLHttpRequest();
			// 设置请求方式和请求地址
			xhr.open('get', './js/banner.json', true);
			// 发送请求
			xhr.send();
			// 接收返回的响应数据
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
					let text = xhr.responseText;
					// 将获取的文本数据转换为JSON格式
					data = JSON.parse(text);
					// 调用展示图片的函数
					console.log(data); // 打印获取到的数据到控制台
					// 调用展示图片的函数
					show(data);
				}
			};

			// 获取轮播图容器元素
			let carsoule = document.getElementById('carousel');

			function show(data) {
				let str = ``; // 声明一个空字符串用于存储要渲染的图片标签
				let sti = ``; // 声明一个空字符串用于存储轮播图指示器的标签
				for (let i = 0; i &lt; data.imge.length; i++) {
					// 渲染图片到页面中
					str += `&lt;img src="${data.imge[i]}" alt="" class="img_carousel"&gt;`;
					// 根据索引，渲染轮播图指示器
					if (i == 0) {
						sti += `&lt;div style="background-color: aqua;"&gt;&lt;/div&gt;`;
					} else {
						sti += `&lt;div&gt;&lt;/div&gt;`;
					}
				}

				// 将最后一张图片再次添加到轮播图容器中，用于实现循环播放
				str += `&lt;img src="${data.imge[0]}" alt=""&gt;`;
				// 将图片和轮播图指示器渲染到页面中
				document.getElementById('carousel').innerHTML = str;
				document.getElementsByClassName('round')[0].innerHTML = sti;

				// 获取第一张图片的宽度
				imgwidth = document.getElementsByClassName('img_carousel')[0].offsetWidth;
				// 调用轮播功能
				noover();
			}

			// 获取轮播图指示器的所有子元素
			let dots = document.getElementsByClassName('round')[0].children;

			// 下一张图片函数
			function next() {
				k++; // 索引加1，显示下一张图片
				carsoule.style.marginLeft = "-" + imgwidth * k + "px"; // 设置轮播图容器的左边距
				carousel.style.transition = "margin-left 1s"; // 设置过渡效果

				// 如果达到最后一张图片，回到第一张图片
				if (k == data.imge.length) {
					setTimeout(function() {
						carousel.style.transition = "none"; // 去掉过渡效果
						k = 0; // 将索引设置为0，回到第一张图片
						carousel.style.marginLeft = `-${k * 100}%`; // 设置轮播图容器的左边距
					}, 1000);
				}

				// 根据索引，设置轮播图指示器的样式
				if (k &lt; dots.length) {
					dots[k].style.background = "aqua"; // 当前图片指示器背景颜色为aqua
					dots[k - 1].style.background = "pink"; // 上一张图片指示器背景颜色为pink
				} else if (k == dots.length) {
					dots[0].style.background = "aqua"; // 第一张图片指示器背景颜色为aqua
					dots[k - 1].style.background = "pink"; // 最后一张图片指示器背景颜色为pink
					k = 0; // 将索引设置为0，回到第一张图片
				}
			}

			// 自动轮播函数
			function noover() {
				inter = setInterval(next, 2000); // 每2秒调用一次next函数，实现自动轮播
			}

			// 鼠标悬停在轮播图上，停止自动轮播
			function over() {
				clearInterval(inter); // 清除定时器，停止自动轮播
			}

			// 获取右箭头元素
			let right = document.getElementsByClassName('right_arrow')[0];

			// 点击右箭头切换到下一张图片
			function right_word() {
				right.onclick = null; // 防止连续点击
				next(); // 调用下一张图片函数

				// 1.5秒后恢复右箭头的点击事件
				setTimeout(function() {
					right.onclick = right_word;
				}, 1500);
			}

			// 获取左箭头元素
			// let left = document.getElementsByClassName('left_arrow')[0];

			// 点击左箭头切换到上一张图片
			function left_last() {
				k--; // 索引减1，显示上一张图片

				// 如果索引小于0，回到最后一张图片
				if (k &lt; 0) {
					k = dots.length; // 将索引设置为指示器数量，显示最后一张图片
					carousel.style.transition = ""; // 去掉过渡效果
					carsoule.style.marginLeft = "-" + imgwidth * k + "px"; // 设置轮播图容器的左边距

					// 0.01秒后，过渡效果生效，显示倒数第二张图片
					setTimeout(function() {
						k--; // 索引减1，显示倒数第二张图片
						carousel.style.transition = "all 1s"; // 添加过渡效果
						carsoule.style.marginLeft = "-" + imgwidth * k + "px"; // 设置轮播图容器的左边距
						dots[k].style.background = "aqua"; // 当前图片指示器背景颜色为aqua
						dots[0].style.background = "pink"; // 第一张图片指示器背景颜色为pink
					}, 10);
				} else {
					carousel.style.transition = "all 1s"; // 添加过渡效果
					carsoule.style.marginLeft = "-" + imgwidth * k + "px"; // 设置轮播图容器的左边距
					dots[k].style.background = "aqua"; // 当前图片指示器背景颜色为aqua
					dots[k + 1].style.background = "pink"; // 下一张图片指示器背景颜色为pink
				}
			}
		&lt;/script&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/16012fa681065156c2c023e8a5b84336/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;】透析类和对象（上）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/07c47120f50209417f0633d85f2ff5ec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spark学习</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>