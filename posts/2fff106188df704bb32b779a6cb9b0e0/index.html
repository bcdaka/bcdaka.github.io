<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL | JDBC连接数据库详细教程【全程干货】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2fff106188df704bb32b779a6cb9b0e0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL | JDBC连接数据库详细教程【全程干货】">
  <meta property="og:description" content="文章目录 一、什么是JDBC？二、JDBC工作原理三、使用JDBC连接MySQL数据库【✔】1、安装对应数据驱动包2、将jar包导入项目中3、编写代码连接数据库【⭐】1️⃣ 创建数据源2️⃣ 和数据库建立网络连接3️⃣ 构造SQL语句4️⃣ 执行SQL语句5️⃣ 断开连接，释放资源 4、测试观察5、代码优化1️⃣灵活变通SQL2️⃣防止SQL注入攻击 6、SQL查找的写法7、SQL修改和删除的写法 四、整体代码展示五、总结与提炼 一、什么是JDBC？ JDBC，即Java Database Connectivity，java数据库连接。是一种用于执行SQL语句的Java API，它是Java中的数据库连接规范。这个API由 java.sql.*,javax.sql.* 包中的一些类和接口组成，它为Java开发人员操作数据库提供了一个标准的API，可以为多种关系数据库提供统一访问
二、JDBC工作原理 JDBC 为多种关系数据库提供了统一访问方式，作为特定厂商数据库访问API的一种高级抽象，它主要包含一些通用的接口类
下面是我画的一张有关JDBC访问数据库层次结构的图：
可以看到，我们程序员在开发JavaEE应用的时候，通过调用Sun公司提供给我们的JDBC相关API，就可以切访问数据库的JSBC驱动程序，继而通过驱动来加载数据库
JDBC优势：
Java语言访问数据库操作完全面向抽象接口编程开发数据库应用不用限定在特定数据库厂商的API程序的可移植性大大增强 三、使用JDBC连接MySQL数据库【✔】 1、安装对应数据驱动包 那有同学就问了，数据驱动包是什么？
💬 对于数据驱动包而言，其实就是上面我所说到的各个【数据库厂商】所提供给我们的JDBC驱动程序，因为只有数据库厂商那边提供给了我们加载数据库的驱动，我们才能去获取到数据库中的数据表然后进行CRUD等操作
这样说呢可能还不是很好理解，我们可以通过画图来帮助理解，知道了JDBC的工作原理后，我们还要去了解什么去驱动包 接下去就要去下载这个驱动包，去哪里下呢？当然是官网！
但是呢，官网很麻烦，你要一个个地去找，不知道要下那个才好，下面是MySQL的官网的驱动下载处，很好找。但若是你用的是Oracle数据库的话，就会很麻烦了，因为它们这家公司很大，产品也很多，所以官网中会很很多东西，你很难去找到自己想要的驱动程序 难道这就没办法了吗？要一个个找吗😥当然有，那就是我们心爱的【Maven】
对于Maven而言，学Java的同学一定不陌生，它是一个 “中央仓库”，Maven 作为 Java 项目管理工具，它不仅可以用作包管理，还有许多的插件，可以支持整个项目的开发、打包、测试及部署等一系列行为，简直是居家旅行、杀人灭口必备良药！咳咳，然后我们就可以去下载MySQL对应的驱动包了，按照下图指示来即可 点进去之后就可以选择对应的驱动包版本了，但是这里在选择的时候要注意了，需要和你MySQL安装的版本一致才可，我的MySQL是5.7的，所以这里大版本不能变，要选择5.1开头的，后面的小版本没关系；当然如果你的MySQL是8.x版本的，你就要选择8开头的驱动包了 点进去之后我们看到有个jar，点一下它，你就可以拥有一个MySQL相关的驱动包了，就和我们平常使用的.rar、.zip压缩包没什么区别，就是Java的压缩包以.jar结尾 下载好了之后就是这个样子的 2、将jar包导入项目中 现在我们有了这个jar后，就要把它用起来
那现在我们去新建一个项目，然后把这个包导进来，不过在此之前要新建一个名为lib的目录，它是library库的缩写，当然你也可以写其他的名称 然后右键这个目录选择【添加为库…】 此时这个MySQL的驱动库就导入到我们的项目中了 3、编写代码连接数据库【⭐】 加载完MySQL的驱动包之后，我们就可以使用一些API去操作数据库了，准备好了吗，发车了🚗
1️⃣ 创建数据源 👉首先第一点，要连接数据库的话，我们就要知道这个数据库在哪里
这里我会介绍两种方式，一个是通过DataSource（数据源）对象获取，另一种则是通过DriverManager（驱动管理类）的静态方法获取，不过重点在于第一种 ①DataSource（数据源）对象获取
下面是创建数据源的相关代码，我使用到了Java中的向上转型和向下转型，不是很清楚的同学可以先去了解一下 DataSource dataSource = new MysqlDataSource(); ((MysqlDataSource)dataSource).setURL(&#34;jdbc:mysql://127.0.0.1:3306/test?characterEncoding=utf8&amp;useSSL=false&#34;); ((MysqlDataSource)dataSource).setUser(&#34;root&#34;); ((MysqlDataSource)dataSource).setPassword(&#34;xxxxxxxxxxx&#34;); 也就是这一句我使用到了向上转型，DataSource是Java中的一个接口，MysqlDataSource则是它的实现类，下面这种便是很典型的使用接口来实现向上转型 DataSource dataSource = new MysqlDataSource(); 然后下面的setURL()、setUser()、setPassWord()都是【MysqlDataSource】这个接口实现类中的一些方法，但是由于向上转型后父类无法去调用子类独有的方法，所以我们还要去进行一个向下转型通过去进行一个强制类型转换就可以做到，此时我们便能调用到实现类中的方法了 ((MysqlDataSource)dataSource).">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-08T10:26:27+08:00">
    <meta property="article:modified_time" content="2023-12-08T10:26:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL | JDBC连接数据库详细教程【全程干货】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/24/0f/1eqBEE4X_o.gif" alt="在这里插入图片描述"></p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#JDBC_4" rel="nofollow">一、什么是JDBC？</a></li><li><a href="#JDBC_6" rel="nofollow">二、JDBC工作原理</a></li><li><a href="#JDBCMySQL_19" rel="nofollow">三、使用JDBC连接MySQL数据库【✔】</a></li><li><ul><li><a href="#1_20" rel="nofollow">1、安装对应数据驱动包</a></li><li><a href="#2jar_47" rel="nofollow">2、将jar包导入项目中</a></li><li><a href="#3_59" rel="nofollow">3、编写代码连接数据库【⭐】</a></li><li><ul><li><a href="#1__61" rel="nofollow">1️⃣ 创建数据源</a></li><li><a href="#2__114" rel="nofollow">2️⃣ 和数据库建立网络连接</a></li><li><a href="#3_SQL_167" rel="nofollow">3️⃣ 构造SQL语句</a></li><li><a href="#4_SQL_188" rel="nofollow">4️⃣ 执行SQL语句</a></li><li><a href="#5__201" rel="nofollow">5️⃣ 断开连接，释放资源</a></li></ul> 
   </li><li><a href="#4_218" rel="nofollow">4、测试观察</a></li><li><a href="#5_233" rel="nofollow">5、代码优化</a></li><li><ul><li><a href="#1SQL_236" rel="nofollow">1️⃣灵活变通SQL</a></li><li><a href="#2SQL_261" rel="nofollow">2️⃣防止SQL注入攻击</a></li></ul> 
   </li><li><a href="#6SQL_284" rel="nofollow">6、SQL查找的写法</a></li><li><a href="#7SQL_311" rel="nofollow">7、SQL修改和删除的写法</a></li></ul> 
  </li><li><a href="#_335" rel="nofollow">四、整体代码展示</a></li><li><a href="#_462" rel="nofollow">五、总结与提炼</a></li></ul> 
</div> 
<p></p> 
<h2><a id="JDBC_4"></a>一、什么是JDBC？</h2> 
<blockquote> 
 <p>JDBC，即<code>Java Database Connectivity</code>，java数据库连接。是一种用于执行SQL语句的Java API，它是Java中的数据库连接规范。这个API由 <code>java.sql.*,javax.sql.*</code> 包中的一些类和接口组成，它为Java开发人员操作数据库提供了一个<strong>标准的API</strong>，可以为多种关系数据库提供统一访问</p> 
</blockquote> 
<h2><a id="JDBC_6"></a>二、JDBC工作原理</h2> 
<blockquote> 
 <p>JDBC 为多种关系数据库提供了统一访问方式，作为特定厂商数据库访问API的一种高级抽象，它主要包含一些通用的接口类</p> 
</blockquote> 
<p><strong>下面是我画的一张有关JDBC访问数据库层次结构的图：</strong></p> 
<p><strong>可以看到，我们程序员在开发JavaEE应用的时候，通过调用Sun公司提供给我们的JDBC相关API，就可以切访问数据库的JSBC驱动程序，继而通过驱动来加载数据库</strong></p> 
<p><img src="https://images2.imgbox.com/3b/5e/iMOBJCYX_o.jpg" alt="在这里插入图片描述"><br> <u>JDBC优势：</u></p> 
<ol><li>Java语言访问数据库操作完全面向抽象接口编程</li><li>开发数据库应用不用限定在特定数据库厂商的API</li><li>程序的可移植性大大增强</li></ol> 
<h2><a id="JDBCMySQL_19"></a>三、使用JDBC连接MySQL数据库【✔】</h2> 
<h3><a id="1_20"></a>1、安装对应数据驱动包</h3> 
<blockquote> 
 <p>那有同学就问了，数据驱动包是什么？</p> 
</blockquote> 
<p>💬 对于数据驱动包而言，其实就是上面我所说到的各个【数据库厂商】所提供给我们的JDBC驱动程序，因为<strong>只有数据库厂商那边提供给了我们加载数据库的驱动，我们才能去获取到数据库中的数据表然后进行CRUD等操作</strong></p> 
<ul><li>这样说呢可能还不是很好理解，我们可以通过画图来帮助理解，知道了JDBC的工作原理后，我们还要去了解什么去驱动包</li></ul> 
<p><img src="https://images2.imgbox.com/2e/64/PMAh5Yej_o.jpg" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>接下去就要去下载这个驱动包，去哪里下呢？当然是<a href="https://dev.mysql.com/downloads/" rel="nofollow">官网</a>！</p> 
</blockquote> 
<ul><li>但是呢，官网很麻烦，你要一个个地去找，不知道要下那个才好，下面是MySQL的官网的驱动下载处，很好找。但若是你用的是Oracle数据库的话，就会很麻烦了，因为它们这家公司很大，产品也很多，所以<a href="https://www.oracle.com/" rel="nofollow">官网</a>中会很很多东西，你很难去找到自己想要的驱动程序</li></ul> 
<p><img src="https://images2.imgbox.com/ca/88/p7xq24AF_o.jpg" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>难道这就没办法了吗？要一个个找吗😥当然有，那就是我们心爱的【<a href="https://mvnrepository.com/" rel="nofollow">Maven</a>】</p> 
</blockquote> 
<ul><li>对于Maven而言，学Java的同学一定不陌生，它是一个 “<strong>中央仓库</strong>”，Maven 作为 Java 项目管理工具，它不仅可以用作包管理，还有许多的插件，可以支持整个项目的开发、打包、测试及部署等一系列行为，简直是居家旅行、<s>杀人灭口</s>必备良药！</li><li>咳咳，然后我们就可以去下载MySQL对应的驱动包了，按照下图指示来即可</li></ul> 
<p><img src="https://images2.imgbox.com/18/1e/X21MixyD_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>点进去之后就可以选择对应的驱动包版本了，但是这里在选择的时候要注意了，需要和你MySQL安装的版本一致才可，我的MySQL是<code>5.7</code>的，所以这里大版本不能变，要选择5.1开头的，后面的小版本没关系；当然如果你的MySQL是<code>8.x</code>版本的，你就要选择8开头的驱动包了</li></ul> 
<p><img src="https://images2.imgbox.com/a9/e3/PmpG9DNr_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>点进去之后我们看到有个<code>jar</code>，点一下它，你就可以拥有一个MySQL相关的驱动包了，就和我们平常使用的<code>.rar</code>、<code>.zip</code>压缩包没什么区别，就是Java的压缩包以<code>.jar</code>结尾</li></ul> 
<p><img src="https://images2.imgbox.com/69/a7/WrkqMp5A_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>下载好了之后就是这个样子的</li></ul> 
<p><img src="https://images2.imgbox.com/b3/6a/PgwCDI4j_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="2jar_47"></a>2、将jar包导入项目中</h3> 
<blockquote> 
 <p>现在我们有了这个jar后，就要把它用起来</p> 
</blockquote> 
<ul><li>那现在我们去新建一个项目，然后把这个包导进来，不过在此之前要新建一个名为<code>lib</code>的目录，它是<code>library库</code>的缩写，当然你也可以写其他的名称</li></ul> 
<p><img src="https://images2.imgbox.com/5f/3a/11WtfivG_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>然后右键这个目录选择【添加为库…】</li></ul> 
<p><img src="https://images2.imgbox.com/dc/b6/jdx1CykW_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>此时这个MySQL的驱动库就导入到我们的项目中了</li></ul> 
<p><img src="https://images2.imgbox.com/77/8d/U3xtcHFJ_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="3_59"></a>3、编写代码连接数据库【⭐】</h3> 
<blockquote> 
 <p>加载完MySQL的驱动包之后，我们就可以使用一些API去操作数据库了，准备好了吗，发车了🚗</p> 
</blockquote> 
<h4><a id="1__61"></a>1️⃣ 创建数据源</h4> 
<p>👉<strong>首先第一点，要连接数据库的话，我们就要知道这个数据库在哪里</strong></p> 
<ul><li>这里我会介绍两种方式，一个是通过<u><code>DataSource</code>（数据源）对象获取</u>，另一种则是通过<u><code>DriverManager</code>（驱动管理类）的静态方法获取</u>，不过重点在于第一种</li></ul> 
<p><strong>①<code>DataSource</code>（数据源）对象获取</strong></p> 
<ul><li>下面是创建数据源的相关代码，我使用到了<a href="https://blog.csdn.net/Fire_Cloud_1/article/details/128748177">Java中的向上转型和向下转型</a>，不是很清楚的同学可以先去了解一下</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setURL</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/test?characterEncoding=utf8&amp;useSSL=false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"xxxxxxxxxxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>也就是这一句我使用到了向上转型，<code>DataSource</code>是Java中的一个接口，<code>MysqlDataSource</code>则是它的实现类，下面<strong>这种便是很典型的使用接口来实现<mark>向上转型</mark></strong></li></ul> 
<pre><code class="prism language-java"><span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>然后下面的<code>setURL()</code>、<code>setUser()</code>、<code>setPassWord()</code>都是【MysqlDataSource】这个接口实现类中的一些方法，但是由于向上转型后父类无法去调用子类独有的方法，所以我们还要去进行一个<mark>向下转型</mark></li><li>通过去进行一个强制类型转换就可以做到，此时我们便能调用到实现类中的方法了</li></ul> 
<pre><code class="prism language-java"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setURL</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassWord</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> 
<p>💬 那有同学问：为什么要这么麻烦呢？转上又转下？直接使用<code>MysqlDataSource</code>不就好了</p> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 道理确实是这样，如果我们直接将代码写成下面这样子，那么就可以直接去调用这个类中的方法了，无需再去做一个<strong>向下转型</strong>，<u>但是这却隐藏着巨大的隐患…</u></li></ul> 
<pre><code class="prism language-java"><span class="token class-name">MysqlDataSource</span> dataSource1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>可能没有真正做过开发的同学还体会不到这一点，因为我们在设计一些接口、类的时候始终要遵循【高内聚 · 低耦合】的思想，<mark>即类的内部各个方法之间要紧密关联，但类与类之间不要产生太大的依赖</mark></p> 
</blockquote> 
<ul><li> <p>光这么说可能说不太清楚，有兴趣的同学可以先去了解一下<a href="https://blog.csdn.net/smilehappiness/article/details/106198813?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168466103916800182184851%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168466103916800182184851&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-106198813-null-null.142%5Ev87%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&amp;utm_term=Java%E9%AB%98%E5%86%85%E8%81%9A%E4%BD%8E%E8%80%A6%E5%90%88&amp;spm=1018.2226.3001.4187">高内聚 · 低耦合</a></p> </li><li> <p>因为在上面我们使用的是【MysqlDataSource 】，所以在程序的其他方法中，我们可能也需要使用到这个类去做一个接受，就是因为这种<mark>高内聚</mark>的原因，导致了【MysqlDataSource 】被大量地进行扩散，此危害性就在于<strong>后续我们的项目要更换数据库的就需要改动很多的代码，加大了工作量！！！</strong></p> </li></ul> 
<pre><code class="prism language-java"><span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span> dataSource1<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span> dataSource2<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<hr> 
<blockquote> 
 <p>然后呢我们再来说说为什么要去调用这些API</p> 
</blockquote> 
<ul><li>首先的话是<code>serURL()</code>，对于【URL】来说，学习过HTTP协议的同学应该是非常熟悉，对于浏览器发送的HTTP请求中第一行就是URL，它叫做 <u><strong>统一资源定位符</strong></u>，也就是我们日常生活中所说的【网址】，描述了互联网上唯一一个资源的位置</li></ul> 
<p><strong>我们可以来解读一下这个所传入的这个URL</strong><br> <img src="https://images2.imgbox.com/d2/19/apDFrnqB_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>那对于下面的<code>User</code>和<code>PassWord</code>就很清楚了，就是用户名和密码，MySQL用户名固定就是【root】，密码的话就是你安装MySQL的时候手动设置的密码。</li><li>虽然很多数据库是根据用户名和密码来进行认证的，<strong>但是有些数据库，向<code>SQLite</code>就不是用的这个进行认证</strong>，所以这就是为什么这些方法均在【MysqlDataSource 】里的原因了，每个数据库都有它们独特的验证方式，所以我们在<strong>使用不同数据库时加载不同的驱动包即可</strong></li></ul> 
<h4><a id="2__114"></a>2️⃣ 和数据库建立网络连接</h4> 
<blockquote> 
 <p>在上面呢，我们只是进行了数据源的创建操作，只是描述了服务器在哪，并没有真正得进行访问，那现在我们所要做的操作就是【连接】，通过网络去进行一个通信</p> 
</blockquote> 
<ul><li>然后我们就可以通过【DataSource】接口中一个方法叫做<code>getConnection()</code>这个方法去建立一个网络连接，它会返回一个实例为【Connection】的对象，不过从下图可以看到很多种类的Connection，那我们选哪个呢？</li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 这里要注意，选择这个<code>java.sql</code>的，这才是我们想要的Connection</li></ul> 
<p><img src="https://images2.imgbox.com/2c/30/RaiAHLAM_o.jpg" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token class-name">Connection</span> connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>要注意这里了连接（Connection），而不是链接（Link），对于连接而言并不复杂，因为只有这么一句代码，因为在网络中客户端和服务器之间要去建立一个连接，就只是找个地方记录下而已，并不需要非常繁琐的步骤</li><li>而且还要注意的是这个<code>getConnection()</code>还需要去处理异常，一般来说像我们在进行文件读取、数据库操作都是需要去捕获这个异常的，这里我直接【throws】了，你也可以【try…catch】，如果<a href="https://blog.csdn.net/Fire_Cloud_1/article/details/127135009">异常</a>还不是很了解的同学再去学习一下</li></ul> 
<p><img src="https://images2.imgbox.com/f2/dc/JY1mKKgX_o.jpg" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>打个比方说，就像民政局登记结婚一样，只是找个地方登记一下我们结婚了，也无需像婚礼那样大动干戈</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ab/a7/hqwL8fyt_o.jpg" alt="在这里插入图片描述"></p> 
<p><strong>②<code>DriverManager</code>（驱动管理类）的静态方法获取</strong></p> 
<blockquote> 
 <p>讲了这么多，别忘了我们只讲了一种数据库连接方式，别忘了还有第二种，那就是使用<code>DriverManager</code></p> 
</blockquote> 
<ul><li>但是我并不打算讲解这种方式，因为它需要借助我们在JavaSE中所学习的【反射】，但是对于反射来说其实是不属于常规的编程手段，不在特殊的情况下还是不推荐使用的。你可以在看了下面这两种连接方式的区别后再来回顾</li></ul> 
<pre><code class="prism language-java"><span class="token comment">// 加载JDBC驱动程序</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建数据库连接</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>区别：</strong></p> 
<ol><li>DriverManager类来获取的Connection连接，<u>是无法重复利用的</u>，每次使用完以后释放资源时，通过connection.close()都是<strong>关闭物理连接</strong>。</li><li>DataSource提供连接池的支持。连接池在初始化时将内置了【数据库连接池】，<u>这些连接是可以复用的</u>，每次使用完数据库连接，释放资源调用connection.close()都是将Conncetion连接对象回收</li></ol> 
<p>💬 可能有同学对这个【数据库连接池】不太理解，我们这里来讲一讲（doge）</p> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 在Java中呢我们学习过很多的<font size="4"><strong>池</strong></font>，比方说：String字符串常量池、进程池、线程池、内存池，它们都是池</li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 那谈到池这个东西我们就想到了【池塘】，那假设呢你现在是个妹子，长得好看，又有才华，所以追求者就与很多，但是呢同一时间只能谈一个对象，但是你又不想拒绝其他的追求者，因为如果当前这个对象谈到后面谈不来的话，就需要再换一个，此时的话就会有很多的成本，因为需要重新培养感情</li></ul> 
<p><img src="https://images2.imgbox.com/74/20/UIx3Y9h4_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 那于是你就想了一个很不错的办法来提高效率，那就是【养鱼🐟】</li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 怎么养鱼呢？也就是在和A谈对象的同时和B搞暧昧，同时培养感情基础，一旦你和A分手了，就可以立马和B在一起，此时大大提高了效率，那么这个B就被亲切地称之为【备胎】</li></ul> 
<p><img src="https://images2.imgbox.com/46/05/0rVpdFhQ_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 但是你的备胎可能还不只B这一个，可能还有CDEFGHI…，此时它们就构成了一个“<strong>备胎池</strong>”，若是B不合适了还可以换其他人上位，而且呢，这个时候A也还在池子里，若是你和其他人都不和的时候，<u>又想到A了，此时你就可以再和A在一起</u></li></ul> 
<blockquote> 
 <p>当然，上面只是举一个小小的案例，现实生活中我们不提倡这么去做~ 但是在计算机里这种做法还是很常见的，可以了解一下</p> 
</blockquote> 
<h4><a id="3_SQL_167"></a>3️⃣ 构造SQL语句</h4> 
<blockquote> 
 <p>接下去呢，我们就要去构造SQL语句了</p> 
</blockquote> 
<ul><li>首先定义一个字符串表示一条插入语句</li></ul> 
<pre><code class="prism language-sql">String <span class="token keyword">sql</span> <span class="token operator">=</span> <span class="token string">"insert into student values (1, 'zhansan')"</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>但是呢有这条语句还不够，在JDBC中，我们还需要搭配一个对象去描述这里的sql情况</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>💬 这里主要讲一下这个<code>PreparedStatement </code>，可能有很多同学看懵了。首先对于【startment】对象来说，是<u>将SQL语句发送到数据库中</u>。JDBC API中主要提供了三种Statement对象</p> 
<ol><li>Statement</li><li>PreparedStatement</li><li>CallableStartment</li></ol> 
<p>不过我们在工作中用得最多的还是<code>PreparedStatement</code>，字面意思的话就是【<strong>预处理语句</strong>】</p> 
<ul><li>对于<code>PreparedStatement</code>来说，它其实在底层帮我们做了许多事情，不过这里不做详解，有兴趣的同学可以去了解一下<br> <a href="https://blog.csdn.net/nnzhuilian/article/details/86241787?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168476038716800217239021%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168476038716800217239021&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-86241787-null-null.142%5Ev87%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&amp;utm_term=PreparedStatement&amp;spm=1018.2226.3001.4187">Java数据库JDBC——prepareStatement的用法和解释</a></li></ul> 
<h4><a id="4_SQL_188"></a>4️⃣ 执行SQL语句</h4> 
<blockquote> 
 <p>在构造完SQL语句后，我们就可以去通过这个<code>statement</code>对象去执行SQL语句了</p> 
</blockquote> 
<ul><li>只需要调用这个类中的<code>executeUpdate()</code>即可，如果你要执行的SQL语句是【增】、【删】、【改】操作的话，那么你的SQL执行语句就写下面这一条就可以了</li></ul> 
<pre><code class="prism language-java">statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>但若是你执行的是【查】操作的话，结果就不是这样了，而是要写成下面这句</li></ul> 
<pre><code class="prism language-java">statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="5__201"></a>5️⃣ 断开连接，释放资源</h4> 
<blockquote> 
 <p>当然在执行完了之后还要再断开连接，释放掉必要的资源</p> 
</blockquote> 
<ul><li>可以看到我们上面所创建出来的两个对象<code>connection</code>和<code>statement</code>，但是你自己观察就可以发现我在关闭资源的时候是反着来的，这就是因为<mark>资源释放的顺序和创建的顺序是相反的</mark></li></ul> 
<pre><code class="prism language-java">statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>如果读者学习过C++的话就会很好理解了，因为<a href="https://blog.csdn.net/Fire_Cloud_1/article/details/130436679?spm=1001.2014.3001.5502">C++类和对象</a>中存在【析构函数】，对象销毁的时候是存在顺序的；但是因为Java中有<strong>GC（垃圾自动回收机制）</strong>，所以我们一般不需要自己去释放申请的空间，编译器会去做这件事的</li></ul> 
<blockquote> 
 <p>这里我还是来讲一下这个构造析构的顺序，帮助读者来进行理解</p> 
</blockquote> 
<ul><li>不知道你去过东北没有，反正那边是冬天是挺冷的❄，零下三四十度，不过北方的房子还是很有意思的，一般我们家里都是只有一个院子的，但是在北方一般都有两个院子，而且有两个门，你跨入第一个门相当于进入外院，再跨一个门才算是进入了内院（主院）</li><li>那此时也就是意味着你要进入内院的话就需要先通过【大门】，然后再通过【二门】；但若是你要出来的话肯定就得先通过【二门】，才能到达【大门】（假设你不会飞🐦）</li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> 那通过上面这样已说明，相信你对构造、析构的这么一个过程很熟悉了，<u>后构造的对象就需要先析构才可以</u></li></ul> 
<p><img src="https://images2.imgbox.com/00/2c/qtOx5Kgl_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="4_218"></a>4、测试观察</h3> 
<blockquote> 
 <p>写好了JDBC连接MySQL数据库的代码逻辑，接下去我们就来测试一下是否真的可以去操作数据库</p> 
</blockquote> 
<ul><li>首先可以看到的是当前这个数据表<code>studennt</code>中是不存在任何记录的</li></ul> 
<p><img src="https://images2.imgbox.com/bc/10/oREbSOmK_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>然后我们到IDEA中去执行一下这段代码的话就可以看到<code>ret</code>的结果为1，表名SQL语句执行成功</li></ul> 
<p><img src="https://images2.imgbox.com/b1/dc/cNs9Dj2Z_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>然后我们再到数据库中去查看的时候就可以发现有一条记录被插入进来了，<strong>这也就实现了用JDBC去操作数据表的功能</strong></li></ul> 
<p><img src="https://images2.imgbox.com/62/1d/s61cGkKZ_o.jpg" alt="在这里插入图片描述"><br> 💬 如果你是第一次看到的话，一定会觉得很神奇，就像我在第一次看到<strong>后端代码可以与前端进行交互</strong>的时候，我也很吃惊；现在又看到可以<strong>通过后端的代码来操作数据库</strong>，又让我觉得耳目一新</p> 
<h3><a id="5_233"></a>5、代码优化</h3> 
<blockquote> 
 <p>上面只是做了基本的测试，代表我们的代码可以去连接到数据库，但是这份代码还不够【完善】，我们再来完善一下~</p> 
</blockquote> 
<h4><a id="1SQL_236"></a>1️⃣灵活变通SQL</h4> 
<ul><li>这是我们写的SQL语句，但你是否觉得这样去写太死了，通常我们在操作数据库的时候都会写很多SQL语句，是非常灵活的，但是就下面这样的话确实是不太好</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into student values (1, 'zhansan')"</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>所以我们可以将代码改为下面这样，记录中的【学号】和【姓名】字段我们可以通过自己输入来进行控制</li></ul> 
<pre><code class="prism language-java"><span class="token comment">// 3.输入学号和姓名</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入学号："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Scanner</span> sc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> id <span class="token operator">=</span> sc1<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入姓名："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Scanner</span> sc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> sc2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.构造一个 SQL 语句，来完成插入操作</span>
<span class="token comment">//String sql = "insert into student values (1, 'zhansan')";</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into student values ("</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">", '"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"')"</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>此时我们通过控制台去进行输入就后构造出SQL语句然后执行就可以发现也是可以插入一条记录的，</li></ul> 
<p><img src="https://images2.imgbox.com/2c/07/PcJQLFLX_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="2SQL_261"></a>2️⃣防止SQL注入攻击</h4> 
<blockquote> 
 <p>但是对于上面这样的SQL语句构造你可以看出来是比较丑的，不方便阅读与理解，不仅如此，它还容易引起【SQL注入攻击】</p> 
</blockquote> 
<ul><li>可能有的同学不太清楚这个【SQL注入攻击】，它是黑客入侵服务器的一种形式，黑客可以通过代码<u><strong>直接拼接构造sql语句</strong></u>导致sql语句结构可被恶意篡改，有兴趣的同学可以去了解一下 <a href="https://blog.csdn.net/qq_32731075/article/details/117359544?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168480751916782425177963%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168480751916782425177963&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-117359544-null-null.142%5Ev87%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&amp;utm_term=SQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB&amp;spm=1018.2226.3001.4187">链接</a></li></ul> 
<blockquote> 
 <p>对于上面这种危害，我们进行预防最靠谱的方案，就是使用<code>PreparedStatement</code>中占位符替换的方式，来实现SQL的构造~</p> 
</blockquote> 
<ul><li>我们可以把SQL语句构造成下面这样，两个【?】就相当于是占位符</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into student values (?, ?)"</span><span class="token punctuation">;</span>       <span class="token comment">//通过占位符进行替换</span>
</code></pre> 
<ul><li>还记得我们上面使用到的那个<code>statement</code>对象吗，它可以用来描述SQL的情况，我们可以通过里面的【setInt()】和【setString()】方法来设置记录中的两个字段，<strong>从而将这个SQL语句构造完整</strong></li></ul> 
<pre><code class="prism language-java"><span class="token comment">// jdbc中还需要搭配一个特定的对象，来搭配描述这里的sql情况</span>
<span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>然后再去运行的话就可以看到也是可以把记录插入到数据表中的</li></ul> 
<p><img src="https://images2.imgbox.com/58/70/V86OrkQW_o.jpg" alt="在这里插入图片描述"><br> 💬 对于上面这种形式，就是较为安全的SQL语句写法，代码会在文末给出，可供读者参考</p> 
<h3><a id="6SQL_284"></a>6、SQL查找的写法</h3> 
<blockquote> 
 <p>上面的话就只是SQL的插入，学习过CRUD的同学们一定还会其他操作，对于【删除】、【修改】的话和插入是一模一样的，只需要修改一下SQL语句的构造即可。</p> 
</blockquote> 
<p>👉但是对于【查找】操作就不一样了，和上面的这些操作相比，多了一个<u><strong>遍历结果集</strong></u></p> 
<ul><li>首先的话我们要去修改一下SQL语句，改为查询的语句</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from student"</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>然后在执行SQL语句的时候就不能写成<code>executeUpdate()</code>了，而是要写成<code>executeQuery()</code>，而且返回的结果也不一样，若是【增】、【删】、【改】的话返回的就只是一个【int】类型的值，表示SQL语句是否执行成功</li><li>但是对于【查】的话就不一样了，因为一个数据表中的记录不止一条，所以它查找就会返回一个结果集，我们要使用<code>[ResultSet]</code>来进行接受</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">ResultSet</span> ret <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>那既然这是一个集合的话，我们要看到里面的内容就要去进行一个遍历的操作，此时，和【迭代器】的遍历很相似，通过<code>ret.next()</code>去进行判断是否还有下一条记录需要遍历即可，内部去获取到记录中的相关字段，然后显示打印出来即可</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">while</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id = "</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">"; name = "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>执行程序就可以看到，遍历出了这张表中的所有内容</li></ul> 
<p><img src="https://images2.imgbox.com/d6/c7/y6EV5EBz_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="7SQL_311"></a>7、SQL修改和删除的写法</h3> 
<blockquote> 
 <p>本小节是后面补充的，主要是为了让读者更加明白JDBC中如何构造SQL语句并连接数据库</p> 
</blockquote> 
<ul><li>以下是具体的<code>Update</code>修改语句，同样我们使用<code>?</code>来作为占位符</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update student set name = ? where id = ?"</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>然后在描述SQL的时候将参数值给设置上去，然后才能变成一个完整的SQL</li></ul> 
<p><img src="https://images2.imgbox.com/6d/1f/R6zLtWZV_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>然后来看一下执行的结果，看到返回值是1，就可以知道修改成功了</li></ul> 
<p><img src="https://images2.imgbox.com/97/e5/gnvGNTdF_o.jpg" alt="在这里插入图片描述"></p> 
<hr> 
<ul><li>接下去我们来看看删除语句该如何去写，同样只需要去修改一下SQL语句即可，以及在描述SQL的时候也要去做一个改进</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from student where id = ?"</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a1/9c/qMsP33bP_o.jpg" alt="在这里插入图片描述"></p> 
<ul><li>然后再去执行这个SQL的时候就可以发现当前数据库中的唯一记录也被删除了</li></ul> 
<p><img src="https://images2.imgbox.com/a4/42/cbokNXzA_o.jpg" alt="在这里插入图片描述"></p> 
<h2><a id="_335"></a>四、整体代码展示</h2> 
<blockquote> 
 <p>上面就是通过JDBC连接数据库的这么一套流程，你学会了吗😎</p> 
</blockquote> 
<p><strong>JDBC往数据表插入记录</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCInsertDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/**
         * 使用 JDBC 往数据库中插入一个记录
         * 需要提前准备好数据库(java106) 和 数据表(student)
         */</span>

        <span class="token comment">// 1.创建数据源，描述了数据库服务器在哪</span>
        <span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setURL</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/test?characterEncoding=utf8&amp;useSSL=false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"panjialie1218"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.和数据库建立网络连接 (写JDBC实际上是实现一个MySQL客户端，通过网络和服务器进行通讯)</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.输入学号和姓名</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入学号："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Scanner</span> sc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> id <span class="token operator">=</span> sc1<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入姓名："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Scanner</span> sc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> sc2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4.构造一个 SQL 语句，来完成插入操作</span>
        <span class="token comment">//String sql = "insert into student values (1, 'zhansan')";     -- 太死板</span>
        <span class="token comment">//String sql = "insert into student values (" + id + ", '" + name + "')";   -- 会SQL注入攻击</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into student values (?, ?)"</span><span class="token punctuation">;</span>       <span class="token comment">//通过占位符进行替换</span>
        <span class="token comment">// jdbc中还需要搭配一个特定的对象，来搭配描述这里的sql情况</span>
        <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 5.执行 SQL 语句 (控制客户端给服务器发送请求)</span>
        <span class="token keyword">int</span> ret <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ret = "</span> <span class="token operator">+</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 6.断开和数据库的连接，并且释放掉必要的资源</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>JDBC查询数据表记录</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCSelectDemo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">/**
         * 使用 JDBC 往数据库中插入一个记录
         * 需要提前准备好数据库(java106) 和 数据表(student)
         */</span>

        <span class="token comment">// 1.创建数据源，描述了数据库服务器在哪</span>
        <span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setURL</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/test?characterEncoding=utf8&amp;useSSL=false"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MysqlDataSource</span><span class="token punctuation">)</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"panjialie1218"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.和数据库建立网络连接 (写JDBC实际上是实现一个MySQL客户端，通过网络和服务器进行通讯)</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.构造一个 SQL 语句，来完成插入操作</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from student"</span><span class="token punctuation">;</span>
        <span class="token comment">// jdbc中还需要搭配一个特定的对象，来搭配描述这里的sql情况</span>
        <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 5.执行 SQL 语句 (控制客户端给服务器发送请求)</span>
        <span class="token class-name">ResultSet</span> ret <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">int</span> id <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id = "</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">"; name = "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 6.断开和数据库的连接，并且释放掉必要的资源</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<blockquote> 
 <p>对于【修改】和【删除】这里只给出改动的地方，其余的参照【插入】</p> 
</blockquote> 
<p><strong>JDBC修改数据表记录</strong></p> 
<pre><code class="prism language-java"><span class="token comment">// 3.输入学号和姓名</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入你要修改的学号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Scanner</span> sc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> id <span class="token operator">=</span> sc1<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入你要修改的姓名"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Scanner</span> sc2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> sc2<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.构造SQL语句, 来完成更新操作</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update student set name = ? where id = ?"</span><span class="token punctuation">;</span>

<span class="token comment">// jdbc中还需要搭配一个特定的对象, 来搭配描述这里的sql情况</span>
<span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>JDBC删除数据表记录</strong></p> 
<pre><code class="prism language-java"><span class="token comment">// 3.输入学号和姓名</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"请输入你要删除学生的学号"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> id <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4.构造SQL语句, 来完成更新操作</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from student where id = ?"</span><span class="token punctuation">;</span>

<span class="token comment">// jdbc中还需要搭配一个特定的对象, 来搭配描述这里的sql情况</span>
<span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_462"></a>五、总结与提炼</h2> 
<blockquote> 
 <p>最后来总结一下本文所学习的内容📖</p> 
</blockquote> 
<ul><li>在本文中，我们首先了解了JDBC的概念以及其相关工作原理，然后的话就通过调用这些JDBC相关的API去加载MySQL数据库的驱动，一步步地去创建数据源、建立连接、构造与执行SQL语句，最后释放连接，完成了通过后端代码去操作数据库，成功往数据表中插入了一条记录</li><li>接下去呢我们又对代码去进行了一个优化，既提高了代码的灵活性，还可以防止SQL注入攻击，加固了代码的安全性。然后又完成了查询数据表的相关记录的操作，需要涉及对集合的遍历</li></ul> 
<p>💬 可能本文的读者不会很多，但如果你读到这里的话那我要和你说一个事实：因为现在几乎都不用JDBC了，市面上有一个很成熟的框架叫做【MyBatis】，它是⼀款优秀的持久层框架，它⽀持⾃定义 SQL、存储过程以及⾼级映射，但是其底层的实现还是基于JDBC的。<u>框架都是层出不穷的，唯有内部核心是永恒不变的，学到底层才是关键🙂</u></p> 
<blockquote> 
 <p>以上就是本文要介绍的所有内容，感谢您的阅读🌹</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/03/c2/bFrbMrb1_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00e2e84bd189e42fcc1415a18c2e15aa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac OS镜像包免费下载地址，我来告诉你！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ac040cb78cea23e9bfeb016fd8167a9a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">h5或uniapp或微信小程序，实现左上角返回到指定页面，侧滑左滑返回指定页面，安卓物理返回键返沪指定页面解决思路的思考</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>