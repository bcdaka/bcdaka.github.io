<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL库的操作『增删改查 ‖ 编码问题 ‖ 备份与恢复』 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e2d3ee2a2cd44125cae28670a09ae376/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL库的操作『增删改查 ‖ 编码问题 ‖ 备份与恢复』">
  <meta property="og:description" content="✨个人主页： 北 海
🎉所属专栏： MySQL 学习
🎃操作环境： CentOS 7.6 阿里云远程服务器
🎁软件版本： MySQL 5.7.44
文章目录 1.创建数据库2.数据库中的编码问题2.1.字符集与校验集2.3.支持的字符集与校验集2.4.自由设置字符集与校验集2.2.校验集对查询的影响 3.查看数据库4.修改数据库5.删除数据库6.数据库的备份与恢复7.查看数据库的连接情况 1.创建数据库 创建数据库的语法为
CREATE DATABASE [IF NOT EXISTS] database_name; [ ] 中的关键字可以选择不加，IF NOT EXISTS 的意思是如果不存在才创建 数据库
登录 MySQL 后输入指令进行创建
mysql&gt; create database if not exists db1; MySQL 中的语法不区分大小写，语法中通常 将关键字写成大写，方便学习和查看
注意： 如果数据库已存在，再次创建会报错，可以通过 if not exists 关键字将报错降低为警告
在 Linux 中创建数据库的本质就是 在 /var/lib/mysql 目录下创建了一个目录
进入 db1 目录，可以看到里面只有一个后缀为 .opt 的配置文件
通过 cat 指令查看其中的类型，可以发现默认只有 字符 character 和 校对 collation 相关的配置信息，这俩其实就是 字符集 和 检验集，用于设置 数据库 中的编码规则">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-06T12:24:10+08:00">
    <meta property="article:modified_time" content="2023-12-06T12:24:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL库的操作『增删改查 ‖ 编码问题 ‖ 备份与恢复』</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><font face="微软雅黑" color="" size="4px"><strong>✨个人主页：</strong></font> <font face="微软雅黑" color="" size="3px"><strong><a href="https://blog.csdn.net/weixin_61437787?type=blog">北 海</a></strong></font><br> <font face="微软雅黑" color="" size="4px"><strong>🎉所属专栏：</strong></font> <font face="微软雅黑" color="" size="3px"><strong><a href="https://blog.csdn.net/weixin_61437787/category_12142834.html?spm=1001.2014.3001.5482">MySQL 学习</a></strong></font><br> <font face="微软雅黑" color="" size="4px"><strong>🎃操作环境：</strong></font> <font face="微软雅黑" color="" size="3px"><strong><a href="https://www.aliyun.com/product/swas?spm=a2c6h.12883283.J_4VYgf18xNlTAyFFbOuOQe.111.4f944307qDqsKU&amp;scm=20140722.X_data-d4b68a29ba28f53e56fa._.V_1" rel="nofollow">CentOS 7.6 阿里云远程服务器</a></strong></font><br> <font face="微软雅黑" color="" size="4px"><strong>🎁软件版本：</strong></font> <font face="微软雅黑" color="" size="3px"><strong><a href="https://pan.quark.cn/s/dc1ed007d726" rel="nofollow">MySQL 5.7.44</a></strong></font></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/64/68/1ff3AoZE_o.gif" alt="成就一亿技术人" title="成就一亿技术人"></p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_13" rel="nofollow">1.创建数据库</a></li><li><a href="#2_51" rel="nofollow">2.数据库中的编码问题</a></li><li><ul><li><a href="#21_52" rel="nofollow">2.1.字符集与校验集</a></li><li><a href="#23_98" rel="nofollow">2.3.支持的字符集与校验集</a></li><li><a href="#24_121" rel="nofollow">2.4.自由设置字符集与校验集</a></li><li><a href="#22_167" rel="nofollow">2.2.校验集对查询的影响</a></li></ul> 
  </li><li><a href="#3_227" rel="nofollow">3.查看数据库</a></li><li><a href="#4_282" rel="nofollow">4.修改数据库</a></li><li><a href="#5_317" rel="nofollow">5.删除数据库</a></li><li><a href="#6_342" rel="nofollow">6.数据库的备份与恢复</a></li><li><a href="#7_432" rel="nofollow">7.查看数据库的连接情况</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="1_13"></a>1.创建数据库</h2> 
<p>创建数据库的语法为</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> database_name<span class="token punctuation">;</span>
</code></pre> 
<p><code>[ ]</code> 中的关键字可以选择不加，<code>IF NOT EXISTS</code> 的意思是如果不存在才创建 <strong>数据库</strong></p> 
<p>登录 <code>MySQL</code> 后输入指令进行创建</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> db1<span class="token punctuation">;</span>
</code></pre> 
<p><code>MySQL</code> 中的语法不区分大小写，语法中通常 <strong>将关键字写成大写，方便学习和查看</strong></p> 
<p><img src="https://images2.imgbox.com/89/b4/VHkeuUo8_o.png" alt=""><br> <mark>注意：</mark> <strong>如果数据库已存在，再次创建会报错，可以通过 <code>if not exists</code> 关键字将报错降低为警告</strong></p> 
<p>在 <code>Linux</code> 中创建数据库的本质就是 <strong>在 <code>/var/lib/mysql</code> 目录下创建了一个目录</strong></p> 
<p><img src="https://images2.imgbox.com/ff/d6/BeHqbzaw_o.png" alt=""></p> 
<p>进入 <code>db1</code> 目录，可以看到里面只有一个后缀为 <code>.opt</code> 的配置文件</p> 
<p><img src="https://images2.imgbox.com/a9/e9/RamuOXeD_o.png" alt=""></p> 
<p>通过 <code>cat</code> 指令查看其中的类型，可以发现默认只有 <strong>字符 <code>character</code></strong> 和 <strong>校对 <code>collation</code></strong> 相关的配置信息，这俩其实就是 <strong>字符集</strong> 和 <strong>检验集</strong>，用于设置 <strong>数据库</strong> 中的编码规则</p> 
<p><img src="https://images2.imgbox.com/fe/8d/MjCQt1nO_o.png" alt=""></p> 
<p>为什么要设置编码？</p> 
<p>因为 <strong>数据库</strong> 是用来存放 <strong>表</strong> 的，而 <strong>表</strong> 是用来存放内容的，内容又是以不同编码格式存储的，所以需要先确定 <strong>数据库</strong> 中的编码规则，才能确保后续能正常使用</p> 
<hr> 
<h2><a id="2_51"></a>2.数据库中的编码问题</h2> 
<h3><a id="21_52"></a>2.1.字符集与校验集</h3> 
<p><code>MySQL</code> 中与编码相关的主要是 <strong>字符集</strong> 与 <strong>校验集</strong></p> 
<p><strong>字符集</strong> 用于规定未来存储时的编码格式</p> 
<p><strong>校验集</strong> 则是规定数据查询时的校验规则</p> 
<p>查看 <code>MySQL</code> 所有关于默认 <strong>字符集</strong> 与 <strong>校验集</strong> 的使用情况</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'character_%'</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'collation_%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>注：<strong><code>%</code> 在 <code>MySQL</code> 表示匹配一个或任意多个字符，类似于 <code>Linux</code> 中的 <code>*</code></strong></p> 
<p><img src="https://images2.imgbox.com/fb/52/ZR8oZAd2_o.png" alt=""></p> 
<p>其中 <strong>字符集</strong> 的使用涵盖了 <strong>客户端、连接、数据库、文件系统、结果、服务端、系统、目录</strong>，<strong>校验集</strong> 则主要用于 <strong>连接、数据库、服务端</strong></p> 
<p>主要都是使用 <code>utf8</code> 作为 <strong>字符集</strong>，<code>utf8_general_ci</code> 作为 <strong>校验集</strong></p> 
<blockquote> 
 <p><strong>校验集 <code>utf8_general_ci</code></strong> 是适用于 <code>utf8</code> 的一种校验规则，除此之外还有其他校验规则（后面说）</p> 
</blockquote> 
<hr> 
<p>接下来查看 <strong>数据库</strong> 默认使用的 <strong>字符集</strong> 与 <strong>编码集</strong></p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'character_set_database'</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'collation_database'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/a8/oiT47mQy_o.png" alt=""></p> 
<p>当前 <code>MySQL</code> 对于数据库的默认 <strong>字符集</strong> 是 <code>utf8</code>，这是因为之前安装 <code>MySQL</code> 时在配置文件 <code>my.cnf</code> 设置的默认字符集就是 <code>utf8</code>；默认的 <strong>校验集</strong> 则是 <code>utf8_general_ci</code></p> 
<p><img src="https://images2.imgbox.com/38/f6/c4yh4F9G_o.png" alt=""></p> 
<p>以上是创建 <strong>数据库</strong> 时默认使用的 <strong>字符集</strong> 与 <strong>校验集</strong>，如果想要查看具体某个 <strong>数据库</strong> 的编码使用情况，可以 <code>cd</code> 到 <code>/var/lib/mysql</code> 目录中，在进入具体的数据库目录，查看后缀为 <code>.opt</code> 的配置文件信息即可</p> 
<p><img src="https://images2.imgbox.com/18/7a/4HBxg2S7_o.png" alt=""></p> 
<h3><a id="23_98"></a>2.3.支持的字符集与校验集</h3> 
<p><code>MySQL</code> 支持很多 <strong>字符集</strong>，通过指令查看</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">charset</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e4/cd/uUOrZhjG_o.png" alt=""><br> 几乎所有主流 <strong>编码</strong> 它都支持，接下来看看支持的 <strong>校验集</strong></p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> collation<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>截图过长，只截取了部分</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/bc/eb/JmMI9hDC_o.png" alt=""></p> 
<p>一种 <strong>字符集</strong> 可以有多种 <strong>校验集</strong>，所以这张表会很大，不同的 <strong>校验集</strong> 的校验规则有所不同，比如 <code>utf8_general_ci</code> 与 <code>utf8_bin</code> 的区别在于 <strong>是否忽略大小写</strong></p> 
<p><code>utf8_general_ci</code> 是忽略大小写的，而 <code>MySQL</code> 服务端使用的 <strong>校验集</strong> 正是 <code>utf8_general_ci</code>，这也就是解释了为什么在 <code>MySQL</code> 中输入指令可以忽略大小写；至于 <code>utf8_bin</code> 区分大小写，这两种 <strong>校验集</strong> 的演示放在后面细谈</p> 
<h3><a id="24_121"></a>2.4.自由设置字符集与校验集</h3> 
<p>配置文件 <code>my.cnf</code> 中设置的 <strong>字符集</strong> 配置信息就像一个 <strong>“缺省值”</strong>，如果用户不指定，就使用默认的，如果用户指定了，就优先使用用户指定的 <strong>字符集</strong>，<strong>校验集</strong> 也是如此</p> 
<p><mark>注意：</mark> <strong>校验集要能适用于字符集，否则会导致无法创建</strong></p> 
<p>创建 <strong>数据库</strong> 时指定编码相关信息的语法如下</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> database_name <span class="token punctuation">[</span><span class="token keyword">CHARSET</span><span class="token operator">=</span>xxx <span class="token operator">|</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> xxx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">COLLATE</span> xxx<span class="token punctuation">]</span>
</code></pre> 
<p><strong><code>|</code> 表示存在多种写法，可以任意选择其中一种</strong></p> 
<p>接下来演示创建 <strong>数据库</strong> 时指定 <strong>字符集</strong> 与 <strong>校验集</strong></p> 
<blockquote> 
 <p>这里指定字符集为 <code>gbk</code>，校验集为 <code>gdk_chinese_ci</code></p> 
</blockquote> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> db2 <span class="token keyword">charset</span><span class="token operator">=</span>gbk <span class="token keyword">collate</span> gbk_chinese_ci<span class="token punctuation">;</span>

<span class="token comment">// 或者</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> db2 <span class="token keyword">character</span> <span class="token keyword">set</span> gbk <span class="token keyword">collate</span> gbk_chinese_ci<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4c/c5/MFzJcJ2q_o.png" alt=""><br> <img src="https://images2.imgbox.com/70/7d/Gxs8Jnp9_o.png" alt=""></p> 
<hr> 
<p>如果只指定 <strong>字符集</strong> 或者 <strong>校验集</strong> 可以成功创建吗？</p> 
<p>可以的，会根据 <strong>字符集</strong> 或者 <strong>校验集</strong> 推导出它的另一半</p> 
<p><img src="https://images2.imgbox.com/4d/66/llKMtxe2_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/06/4f/QsFKp4Uq_o.png" alt=""></p> 
<p>那如果指定毫不相关的 <strong>字符集</strong> 与 <strong>校验集</strong> 能成功创建 <strong>数据库</strong> 吗？</p> 
<p>不行，会直接报错的，既然校验规则不适用，创建了也没意义，这就好比你往语文卷子上写英语，语文老师大概率是看不懂的，并且不会批改你的卷子</p> 
<p><img src="https://images2.imgbox.com/b5/b0/XrpmhZv9_o.png" alt=""></p> 
<p>总之，<code>MySQL</code> 支持在创建 <strong>数据库</strong> 时自由设置 <strong>字符集</strong> 与 <strong>校验集</strong>，只指定其中一方也能成功创建，因为 <code>MySQL</code> 可以进行推导，但如果指定的 <strong>字符集</strong> 与 <strong>校验集</strong> 没有关系，是无法创建 <strong>数据库</strong> 的，根据实际情况灵活设置</p> 
<h3><a id="22_167"></a>2.2.校验集对查询的影响</h3> 
<p>一个 <strong>字符集</strong> 拥有多个 <strong>校验集</strong>，也就意味着可以使用不同的校验规则，接下来演示 <code>utf8_general_ci</code> 与 <code>utf8_bin</code> 这两种不同的 <strong>校验集</strong> 对查询的影响</p> 
<p>首先创建一个 <strong>校验集</strong> 为 <code>utf8_general_ci</code> 的 <strong>数据库</strong>，随后创建一张 <strong>表</strong>，并向 <strong>表</strong> 中插入多条数据，然后条件查询其中的结果</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test1 <span class="token keyword">collate</span> utf8_general_ci<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> test1<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> t <span class="token punctuation">(</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">;</span> 
</code></pre> 
<p><mark>注意：</mark> <strong>在对数据库进行操作前，需要先 <code>use database_name</code> 指明数据库</strong></p> 
<p>执行结果如下</p> 
<p><img src="https://images2.imgbox.com/aa/02/f4lRsqFT_o.png" alt=""><br> 注：<strong><code>where</code> 是条件查询语句，可以用来指定查看规则，这里的 <code>where name='a'</code> 是查询 <code>t</code> 表中 <code>name</code> 为 <code>a</code> 的行信息</strong></p> 
<p>可以看到最终查询结果为 <code>a</code>、<code>A</code>，明明只要求 <code>name='a'</code>，但最终查出来 <code>A</code>，这是因为 <code>utf8_general_ci</code> <strong>校验集</strong> 在进行校验时，是 <strong>不区分大小写</strong> 的</p> 
<p>接下来看看 <code>utf8_bin</code> <strong>校验集</strong> 对查询的影响</p> 
<p>同样的创建数据库、创建表、插入数据、查询结果</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> test2 <span class="token keyword">collate</span> utf8_bin<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> test2<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> t <span class="token punctuation">(</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> t <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">;</span> 
</code></pre> 
<p><img src="https://images2.imgbox.com/e4/15/Ovsc6dOS_o.png" alt=""></p> 
<p>可以看到，当 <strong>校验集</strong> 为 <code>utf8_bin</code> 时，查询结果是 <strong>区分大小写</strong> 的，最终查出了 <code>a</code> 这行数据</p> 
<p>这里想说的是 <strong>不同校验集对查询结果是有差异的，需要结合具体业务场景选择校验集，编码集也是如此，不过一般情况下都不需要指定，使用默认的 <code>utf8</code> 和 <code>utf8_general_ci</code> 就行了</strong></p> 
<hr> 
<h2><a id="3_227"></a>3.查看数据库</h2> 
<p>可以查看当前 <code>MySQL</code> 中已经创建了哪些 <strong>数据库</strong></p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ab/32/Q4jSUOTa_o.png" alt=""></p> 
<p>当然也可以直接去 <code>/var/lib/mysql</code> 目录中查看</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /var/lib/mysql

ll
</code></pre> 
<p><img src="https://images2.imgbox.com/b6/75/xuOBgchE_o.png" alt=""></p> 
<p>存在这么多 <strong>数据库</strong>，如何知道自己当前处于哪个数据库中？</p> 
<p>通过 <code>database()</code> 函数查看，这是一个函数，可以用于查看当前所处 <strong>数据库</strong>（个人猜测是调用了显示当前所处路径的相关接口实现）</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">databases</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>可以看到当前处于 <code>test2</code> 数据库中</p> 
<p><img src="https://images2.imgbox.com/db/c0/HutODH2w_o.png" alt=""></p> 
<p>如何查看 <strong>数据库</strong> 创建时的详细信息？</p> 
<p>可以通过 <code>show</code> 进行查看，这里看看 <code>test2</code> 的创建信息</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> test2<span class="token punctuation">;</span>

<span class="token comment">// 或者</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> test2 \G
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/03/64tZGke5_o.png" alt=""></p> 
<p>在后面加上 <code>\G</code> 是为了格式化显示，让显示结果更加清晰</p> 
<p>可以看到创建 <code>test2</code> 时的详细信息，比如指定的 <strong>字符集</strong> 和 <strong>编码集</strong></p> 
<blockquote> 
 <p><code>/*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_bin */</code> 是什么意思？<br> <strong>这是句话是为了确保兼容性，因为在 <code>MySQL 4.1</code> 之前，是无法在创建数据库时指定字符集和校验集的。所以这句话的意思是 如果 <code>MySQL</code> 版本高于 <code>4.1</code> 就加上这句话（创建字符集和校验集），否则就不加</strong></p> 
</blockquote> 
<hr> 
<h2><a id="4_282"></a>4.修改数据库</h2> 
<p><strong>数据库</strong> 可以修改很多东西（不只是编码格式），修改相关的语法如下</p> 
<p>修改数据库名（<code>MySQL 5.1.23</code> 之前的版本适用）</p> 
<pre><code class="prism language-sql"><span class="token keyword">RENAME</span> <span class="token keyword">DATABASE</span> old_name <span class="token keyword">TO</span> new_name<span class="token punctuation">;</span>
</code></pre> 
<p>出于安全考虑，这个语法在当前的 <code>MySQL</code> 中已经不被支持了，因为 <strong>数据库</strong> 更名后，上层应用在使用 <strong>数据库</strong> 时会受到影响，比较稳妥的更名方法是 <strong>备份数据、新建数据库（更名）、导入数据（还是不推荐改名）</strong></p> 
<p><strong><mark>数据库轻易不要删除，数据库轻易不要改名</mark></strong></p> 
<p>修改编码格式</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> database_name <span class="token punctuation">[</span>alter_spacification <span class="token punctuation">[</span><span class="token punctuation">,</span>alter_spacification<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>之前的 <code>test2</code> 数据使用的是 <code>utf8</code> 和 <code>utf8_bin</code>，现在将其修改为 <code>gbk</code> 和 <code>gbk_chinese_ci</code></p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">alter</span> <span class="token keyword">database</span> test2 <span class="token keyword">charset</span><span class="token operator">=</span>gbk <span class="token keyword">collate</span> gbk_chinese_ci<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ed/76/z9iGqeIs_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/40/97/6uyY0pU9_o.png" alt=""></p> 
<p>除此之外，还可以修改 <strong>数据库所有者、启用/禁用数据库的自动提交等</strong>，这些东西需要结合后面的相关知识理解，这里就不再阐述</p> 
<hr> 
<h2><a id="5_317"></a>5.删除数据库</h2> 
<p>在 <code>Linux</code> 中，<strong>数据库</strong> 的本质就是一个 <strong>目录</strong>，因此 <strong>数据库</strong> 也是可以删除的，具体语法如下</p> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> database_ name<span class="token punctuation">;</span>
</code></pre> 
<p>在这里 <code>IF EXISTS</code> 表示检查 <strong>数据库</strong>，存在才删除，删除不存在的 <strong>数据库</strong> 是会报错的，加了 <code>IF EXISTS</code> 后可以避免报错，转为警告</p> 
<p>删除之前创建的数据库</p> 
<p><img src="https://images2.imgbox.com/59/f5/Ck2pOXCq_o.png" alt=""></p> 
<p>执行删除之后的结果:</p> 
<ul><li><strong>数据库内部看不到对应的数据库</strong></li><li><strong>对应的数据库文件夹被删除，级联删除（里面的数据表全部被删）</strong></li></ul> 
<p><mark>注意：</mark> <strong>不要轻易删除数据库，数据库删除后很难恢复</strong></p> 
<p><img src="https://images2.imgbox.com/6a/b7/BLbumkdb_o.png" alt=""><br> 为了避免误删 <strong>数据库</strong>，通常需要将 <strong>数据库</strong> 进行备份</p> 
<hr> 
<h2><a id="6_342"></a>6.数据库的备份与恢复</h2> 
<p>有一种简单粗暴的备份方式：<strong>直接将对应的目录打包，需要使用时解压至指定目录即可</strong></p> 
<p>这种方式 <strong>严重不推荐</strong>，原因是恢复时可能会出现问题，假设恢复至版本更低的 <code>MySQL</code> 中，会出现各种奇怪的问题，毕竟老版本没有新特性，还有就是这种做法太暴力了</p> 
<p>推荐使用 <code>MySQL</code> 提供的备份工具 <code>mysqldump</code> 进行备份，具体语法为</p> 
<pre><code class="prism language-bash">mysqldump <span class="token parameter variable">-u</span> 用户 <span class="token parameter variable">-p</span> <span class="token parameter variable">-P</span> 端口 <span class="token parameter variable">-B</span> 待备份的数据库 <span class="token operator">&gt;</span> 目标路径<span class="token punctuation">(</span>含目标文件<span class="token punctuation">)</span>
</code></pre> 
<p>比如把之前创建的 <code>test2</code> 数据库进行备份</p> 
<p><mark>注意：</mark> <strong>如果有人在使用该数据库，需要先断开连接</strong></p> 
<pre><code class="prism language-bash">mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> <span class="token parameter variable">-P</span> <span class="token number">8080</span>  <span class="token parameter variable">-B</span> test2 <span class="token operator">&gt;</span> /home/Yohifo/MySQL/test2.sql
</code></pre> 
<p>回车并输入密码后，对应的数据库就备份成功了</p> 
<p><img src="https://images2.imgbox.com/b9/58/1qiwA8Cg_o.png" alt=""></p> 
<p>看看备份文件是什么内容</p> 
<pre><code class="prism language-bash"><span class="token function">cat</span> test2.sql
</code></pre> 
<p><img src="https://images2.imgbox.com/03/86/dMYWMeuf_o.png" alt=""></p> 
<p>其实就是一些 <strong>数据库</strong> 的配置信息 + 执行过的 <code>SQL</code> 语句</p> 
<hr> 
<p>有备份就有恢复，恢复的语法如下</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> SOURCE 路径<span class="token punctuation">;</span> 
</code></pre> 
<p>接下来先删除 <code>MySQL</code> 中的 <code>test2</code> <strong>数据库</strong></p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> test2<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fe/55/qGbxLaoY_o.png" alt=""></p> 
<p>然后从 <code>Linux</code> 中读取备份文件，并进行恢复</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> source <span class="token operator">/</span>home<span class="token operator">/</span>Yohifo<span class="token operator">/</span>MySQL<span class="token operator">/</span>test2<span class="token punctuation">.</span><span class="token keyword">sql</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/e5/nX2KTaHk_o.png" alt=""></p> 
<p>一瞬间执行了很多条语句，并且都是成功状态，接下来查看是否存在 <code>test2</code> <strong>数据库</strong></p> 
<p><img src="https://images2.imgbox.com/e9/35/oCDY2lKw_o.png" alt=""><br> <strong>数据库</strong> <code>test2</code> 已经成功恢复，包括其中的 <strong>表</strong> 和 <strong>表中的数据</strong> 都已经恢复了</p> 
<p>所以备份与恢复 <strong>数据库</strong> 还是比较简单的，只需要从 <code>MySQL</code> 中获取备份后的 <code>sql</code> 文件，可将该备份文件进行传输，其他 <code>MySQL</code> 客户端只需要 <code>source</code> 即可轻松恢复整个 <strong>数据库</strong></p> 
<hr> 
<p>可以只备份 <strong>数据库</strong> 中的 <strong>表</strong>，语法如下</p> 
<pre><code class="prism language-bash">mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> <span class="token parameter variable">-P</span> 端口 数据库名 表名1 <span class="token operator">&gt;</span> 目标路径<span class="token punctuation">(</span>含文件<span class="token punctuation">)</span>
</code></pre> 
<p><mark>注意：</mark> <strong>备份表时无需加 <code>-B</code> 选项</strong></p> 
<p>也可以同时备份多个 <strong>数据库</strong></p> 
<pre><code class="prism language-bash">mysqldump <span class="token parameter variable">-u</span> 用户 <span class="token parameter variable">-p</span> <span class="token parameter variable">-P</span> 端口 <span class="token parameter variable">-B</span> 数据库1 数据库2 数据库3 <span class="token operator">&gt;</span> 目标路径<span class="token punctuation">(</span>含目标文件<span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>语法中的 <code>-B</code> 含义是什么？<br> <strong><code>-B</code> 表示备份时，将创建数据库的语句也进行了备份，恢复时可以一键恢复；但如果不加 <code>-B</code> 选项，恢复时就需要先创建数据库，再 <code>use</code> 数据库，然后才能 <code>source</code></strong></p> 
</blockquote> 
<hr> 
<h2><a id="7_432"></a>7.查看数据库的连接情况</h2> 
<p><code>MySQL</code> 支持多用户访问，可以通过指令查看当前的使用情况</p> 
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> processlist<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/28/0a/zARANRav_o.png" alt=""></p> 
<p>支持 <strong>本地连接</strong> 和 <strong>远程连接（需要进行设置）</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f8f159909362646789309c1fe6747423/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java LeetCode篇-深入了解二叉树经典解法（三种方式实现：获取二叉树的最大深度）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ff34b0b47f8605cbcc5c5376fef9e6f6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一文带你了解如何在Java中操作Redis</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>