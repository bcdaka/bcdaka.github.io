<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Jmeter进行http接口测试，这一篇就搞定 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/70e42e749f1e1d2101b78554472c5dc0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Jmeter进行http接口测试，这一篇就搞定">
  <meta property="og:description" content="jmeter-http接口测试脚本 jmeter进行http接口测试的主要步骤（1.添加线程组 2.添加http请求 3.在http请求中写入接口的URL，路径，请求方式，参数 4.添加查看结果树 5.调用接口，查看返回值）
针对接口添加header在如下途径添加：
jmeter做http接口测试添加cookie：
3.jmeter-webservice脚本
进行webservice测试的一般步骤
1、在soapui中新建已经soap项目，导入wsdl地址，获取到请求报文、SOAPAction和请求url（在soapui的raw中能找到）
2、打开jmeter新建一个线程组
3、新建一个SOAP/XML-RPC Request
4、把url、soapaction和请求报文写到soaprequest中5、调用接口、查看返回值）
4.jmeter-参数化
参数化的作用：调用接口入参时。有时要求参数经常变化，如果每次去修改就会变得很繁琐，这时候就需要把经常变化的值改变为提前编辑好的文档或函数中，便于调用时使用不同的值。
Jmeter参数化的方式有三种：
1）用户定义的变量（这种就是为了方便管理参数，只能有一个值，比如说ip地址不经常变化的）。
在线程组中添加一个用户定义的变量，然后写key和value就可以了，key就是这个参数的名称，也就是你在脚本里面取的值，value就是具体值了。在取参数化的值的时候，使用${name}这样去取值，name就是你取的变量名称。
在脚本中获取参数化的值
2）函数生成器（函数生成器可以参照一定的规则生成数据，这样的比如说生成一些随机数）。
函数助手的话，可以按照规则生成一些参数，比如说随机数取当前时间，最常用的就是这两种。
随机数__Random，可以在你指定的一个范围内取随机值
取当前时间__time，如果在有一些需要传时间的情况下可以使用，日期格式是：yyyy-MM-dd HH:mm:ss 年-月-日-小时:分钟:秒
取唯一id，__UUID，这个就是每次会生成一个随机的uuid，都是唯一的。
利用函数助手可以按照规则生成一些参数。
3）从文件中读取（文件读取就是事先写好一些数据，然后从文件中读取，这样的话，比如说登录接口，账号和密码都是我们事先注册好的）
从文件中读取的有3个步骤：
1、读取文件
2、取文件内容里面的参数，给它一个名字
3、使用值（从文件读取的话，需要在线程组里面添加一个CSV Data Set Config，它就是做前面两步的操作的）。
5.jmeter断言
断言的作用是用来查看返回结果是否正确，如果正确就代表这个请求的返回值是正确的，如果没有的话就代表这个请求的结果和我们预期的不一致，这样我们就可以通断言来检查返回结果，测试是否通过。
6.jmeter关联
关联作用是由于后面操作需要用到前面服务器返回的结果，所以将该值保存传递过来以便使用。
Jmeter中的关联一般通过正则表达式提取器来完成（如果有特殊的jar包也可）
关联的值在其他请求引用时，直接使用${name}即可，name就是你关联的时候设置的变量名。
7.jmeter操作数据库mysql
操作数据库的步骤：
1.导入jdbc的jar包，因为jmeter本身不能直接连接mysql，所以需要导入第三方的jar包，来连接mysql。
2、创建数据库连接配置，mysql的url、端口号、账号、密码
3、写sql，执行sql
4、查看结果
Jmeter导入jdbcjar包
配置mysql连接
(1)添加一个JDBC Connection Configuration
(2)配置mysql连接池的名称，后面发sql请求的时候指定连接哪里
(3)数据库的url：jdbc:mysql://192.168.1.116:3307/bugfree?allowMultiQueries=true
(4)数据库驱动：这里就是指定连接什么类型的数据库，mysql、oracle、SqlServer等等
(5)账号密码
Jmeter执行sql
查看sql结果
8.Linux下运行jmeter压测
我们在做测试的时候，有时候要运行很久，公司用的测试服务器一般都是linux，就可以运行在linux下面，linux下面不能像windows一样有图形化界面，那怎么运行脚本呢，就先在windows上把脚本做好，然后在linux下运行即可，linux下运行jmeter是在jmeter的bin目录下的jmeter.sh这个shell脚本。
sh jmeter.sh -n –t a.jmx -l res.jtl">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-20T19:50:05+08:00">
    <meta property="article:modified_time" content="2024-08-20T19:50:05+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Jmeter进行http接口测试，这一篇就搞定</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>jmeter-http<a href="https://so.csdn.net/so/search?q=%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95&amp;spm=1001.2101.3001.7020" title="接口测试">接口测试</a>脚本</h4> 
<p>jmeter进行http接口测试的主要步骤（1.添加线程组 2.添加http请求 3.在http请求中写入接口的URL，路径，请求方式，参数 4.添加查看结果树 5.调用接口，查看返回值）</p> 
<p><img alt="图片" src="https://images2.imgbox.com/2b/52/qvxpOYNH_o.png"></p> 
<p>针对接口添加header在如下途径添加：</p> 
<p><img alt="图片" src="https://images2.imgbox.com/f4/d7/99IKTd9X_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/57/ab/1m4MXlb2_o.png"></p> 
<p>jmeter做http接口测试添加cookie：</p> 
<p><img alt="图片" src="https://images2.imgbox.com/76/4f/Ncv1bsRm_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/b2/fe/UFl2RPQx_o.png"></p> 
<p><strong>3.jmeter-webservice脚本</strong></p> 
<p>进行webservice测试的一般步骤</p> 
<p>1、在soapui中新建已经soap项目，导入wsdl地址，获取到请求报文、SOAPAction和请求url（在soapui的raw中能找到）</p> 
<p>2、打开jmeter新建一个线程组</p> 
<p>3、新建一个SOAP/XML-RPC Request</p> 
<p>4、把url、soapaction和请求报文写到soaprequest中5、调用接口、查看返回值）</p> 
<p><img alt="图片" src="https://images2.imgbox.com/9b/c7/WFAZh8RY_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/c9/85/ZSyMydK5_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/9f/e7/L28yIDB5_o.png"></p> 
<p><strong>4.jmeter-参数化</strong></p> 
<p>参数化的作用：调用接口入参时。有时要求参数经常变化，如果每次去修改就会变得很繁琐，这时候就需要把经常变化的值改变为提前编辑好的文档或函数中，便于调用时使用不同的值。</p> 
<p><a href="https://so.csdn.net/so/search?q=Jmeter%E5%8F%82%E6%95%B0%E5%8C%96&amp;spm=1001.2101.3001.7020" title="Jmeter参数化">Jmeter参数化</a>的方式有三种：</p> 
<p>1）用户定义的变量（这种就是为了方便管理参数，只能有一个值，比如说ip地址不经常变化的）。</p> 
<p>在线程组中添加一个用户定义的变量，然后写key和value就可以了，key就是这个参数的名称，也就是你在脚本里面取的值，value就是具体值了。在取参数化的值的时候，使用${name}这样去取值，name就是你取的变量名称。</p> 
<p><img alt="图片" src="https://images2.imgbox.com/90/29/iQxMmT2D_o.png"></p> 
<p>在脚本中获取参数化的值</p> 
<p><img alt="图片" src="https://images2.imgbox.com/a1/37/NLxGubbw_o.png"></p> 
<p>2）函数生成器（函数生成器可以参照一定的规则生成数据，这样的比如说生成一些随机数）。</p> 
<p>函数助手的话，可以按照规则生成一些参数，比如说随机数取当前时间，最常用的就是这两种。</p> 
<p>随机数__Random，可以在你指定的一个范围内取随机值</p> 
<p>取当前时间__time，如果在有一些需要传时间的情况下可以使用，日期格式是：yyyy-MM-dd HH:mm:ss 年-月-日-小时:分钟:秒</p> 
<p>取唯一id，__UUID，这个就是每次会生成一个随机的uuid，都是唯一的。</p> 
<p>利用函数助手可以按照规则生成一些参数。<br><img alt="图片" src="https://images2.imgbox.com/7c/3d/R2Yfme8u_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/9a/96/jYEvE8Dy_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/83/10/eskKFKTo_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/e6/77/9cHrplVM_o.png"></p> 
<p>3）从文件中读取（文件读取就是事先写好一些数据，然后从文件中读取，这样的话，比如说登录接口，账号和密码都是我们事先注册好的）</p> 
<p>从文件中读取的有3个步骤：</p> 
<p>1、读取文件</p> 
<p>2、取文件内容里面的参数，给它一个名字</p> 
<p>3、使用值（从文件读取的话，需要在线程组里面添加一个CSV Data Set Config，它就是做前面两步的操作的）。</p> 
<p><img alt="图片" src="https://images2.imgbox.com/b3/53/DPwAa0UZ_o.png"></p> 
<p>5.jmeter断言</p> 
<p>断言的作用是用来查看返回结果是否正确，如果正确就代表这个请求的返回值是正确的，如果没有的话就代表这个请求的结果和我们预期的不一致，这样我们就可以通断言来检查返回结果，测试是否通过。</p> 
<p><img alt="图片" src="https://images2.imgbox.com/7f/94/jTNPZEJg_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/76/a4/7QdSZiWs_o.png"></p> 
<p>6.jmeter关联</p> 
<p>关联作用是由于后面操作需要用到前面服务器返回的结果，所以将该值保存传递过来以便使用。</p> 
<p>Jmeter中的关联一般通过正则表达式提取器来完成（如果有特殊的jar包也可）</p> 
<p><img alt="图片" src="https://images2.imgbox.com/36/38/dCrGai8o_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/c4/e8/ePtWyZv9_o.png"></p> 
<p>关联的值在其他请求引用时，直接使用${name}即可，name就是你关联的时候设置的变量名。</p> 
<p><strong>7.jmeter操作数据库mysql</strong></p> 
<p>操作数据库的步骤：</p> 
<p>1.导入jdbc的jar包，因为jmeter本身不能直接连接mysql，所以需要导入第三方的jar包，来连接mysql。</p> 
<p>2、创建数据库连接配置，mysql的url、端口号、账号、密码</p> 
<p>3、写sql，执行sql</p> 
<p>4、查看结果</p> 
<p>Jmeter导入jdbcjar包</p> 
<p><img alt="图片" src="https://images2.imgbox.com/08/e4/CRypILmg_o.png"></p> 
<p>配置mysql连接</p> 
<p><img alt="图片" src="https://images2.imgbox.com/83/ef/FtFIUCf7_o.png"></p> 
<p>(1)添加一个JDBC Connection Configuration</p> 
<p>(2)配置mysql连接池的名称，后面发sql请求的时候指定连接哪里</p> 
<p>(3)数据库的url：jdbc:mysql://192.168.1.116:3307/bugfree?allowMultiQueries=true</p> 
<p>(4)数据库驱动：这里就是指定连接什么类型的数据库，mysql、oracle、SqlServer等等</p> 
<p>(5)账号密码</p> 
<p>Jmeter执行sql</p> 
<p><img alt="图片" src="https://images2.imgbox.com/67/58/P7usaY2V_o.png"></p> 
<p>查看sql结果</p> 
<p><img alt="图片" src="https://images2.imgbox.com/70/d7/l7tkh818_o.png"></p> 
<p><img alt="图片" src="https://images2.imgbox.com/c5/79/O8mW7ZmO_o.png"></p> 
<p><strong>8.Linux下运行jmeter压测</strong></p> 
<p>我们在做测试的时候，有时候要运行很久，公司用的测试服务器一般都是linux，就可以运行在linux下面，linux下面不能像windows一样有图形化界面，那怎么运行脚本呢，就先在windows上把脚本做好，然后在linux下运行即可，linux下运行jmeter是在jmeter的bin目录下的jmeter.sh这个shell脚本。</p> 
<p>sh jmeter.sh -n –t a.jmx -l res.jtl</p> 
<p>-n代表以没有图形化界面启动，-t代表后面是测试脚本，a.jmx也就是我们做好的jmeter脚本，-l代表测试结果 res.jtl就是测试结果文件，查看结果的话，在查看结果树视图中导入这个res.jtl就可以查看到测试结果了</p> 
<p><strong>9.jmeter添加负载机</strong></p> 
<p>我们在压测的时候，可能并发比较大， 一台机子已经启动不了那么多并发了，这个时候我们就要使用多台机子一起来发压力，就要添加压力机，添加压力机怎么添加呢，首先要在做压力机的机子上启动jmeter的代理，然后做为控制机的机子上添加上压力机的ip即可。</p> 
<p>Jmeter的bin目录下有一个jmeter-server，启动它即可，windows机子作为压力机的话，运行jmeter-sever.bat，linux作为压力机的话，运行jmeter-server。</p> 
<p>然后在作为控制机的jmeter配置文件里添加压力机ip即可，jmeter的配置文件在bin目录下jmeter.properties，添加压力机的时候，在配置文件里面找到remote_hosts添加ip，然后重启jmeter就可以看到远程压力机了</p> 
<p><strong>jmeter 添加压力机：</strong></p> 
<p>1、先在其他的负载机（另外的电脑）上启动jmeter-server（jmeter-server.bat windows） (jmeter-server.sh mac、linux)主控机和负载机</p> 
<p>2、修改主控机jmeter的配置文件，找到remot_hosts，然后把负载机的ip加入到里面就好了remot_hosts=127.0.0.1,192.168.1.2:1099,192.168.1.3:1099默认jmeter-server的端口号是1099，如果说负载机上的端口号改了，那么你在这里也得改</p> 
<p>3、启动时候要选择远程全部运行ps：如果有参数化文件，那么在负载机同样的位置上也得有一个参数化文件。</p> 
<p><img alt="图片" src="https://images2.imgbox.com/5d/36/ZG201e4c_o.png"></p> 
<p><strong>感谢每一个认真阅读我文章的人，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走：</strong></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/d5/53/cj5Vlutb_o.png"></p> 
<p>这些资料，对于【<a href="https://so.csdn.net/so/search?q=%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95&amp;spm=1001.2101.3001.7020" title="软件测试">软件测试</a>】的朋友来说应该是最全面最完整的备战仓库，这个仓库也陪伴上万个测试工程师们走过最艰难的路程，希望也能帮助到你!<strong>有需要的小伙伴可以点击下方小卡片领取</strong>   </p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ea/72/Na8f9Kew_o.gif"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4fa5a7b9227f24b44d1e07dbd7b53c6d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《区块链：能源市场变革的引领者》</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/282285a2d6bcfd7e722d9ec0e3964821/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">传统的进程间通信——管道通信</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>