<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>最新 CentOS7 上使用 yum 安装 MySQL8 超详细教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/3a68d241f348ec6351d5ac95089004ed/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="最新 CentOS7 上使用 yum 安装 MySQL8 超详细教程">
  <meta property="og:description" content="CentOS7 使用 yum 安装 MySQL8 卸载 1、检查本机是否已经安装mysql # rpm -qa | grep mysql
# rpm -qa | grep mariabd
命令举例如下：
[zhang@node4 yum.repos.d]$ rpm -qa | grep mysql mysql-community-libs-compat-8.0.36-1.el7.x86_64 mysql-community-client-plugins-8.0.36-1.el7.x86_64 mysql-community-libs-8.0.36-1.el7.x86_64 mysql-community-server-8.0.36-1.el7.x86_64 mysql-community-client-8.0.36-1.el7.x86_64 mysql-community-common-8.0.36-1.el7.x86_64 mysql80-community-release-el7-8.noarch mysql-community-icu-data-files-8.0.36-1.el7.x86_64 2、如已经安装，卸载已安装的mysql，不检查依赖关系 # rpm -e --nodeps 已经安装程序名称
命令举例：
[zhang@node4 yum.repos.d]$ su root Password: [root@node4 yum.repos.d]# rpm -e --nodeps mysql-community-libs-compat-8.0.36-1.el7.x86_64 [root@node4 yum.repos.d]# rpm -e --nodeps mysql-community-client-plugins-8.0.36-1.el7.x86_64 [root@node4 yum.repos.d]# rpm -e --nodeps mysql-community-libs-8.0.36-1.el7.x86_64 [root@node4 yum.repos.d]# rpm -e --nodeps mysql-community-server-8.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-21T16:50:26+08:00">
    <meta property="article:modified_time" content="2024-04-21T16:50:26+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">最新 CentOS7 上使用 yum 安装 MySQL8 超详细教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CentOS7__yum__MySQL8_0"></a>CentOS7 使用 yum 安装 MySQL8</h2> 
<h3><a id="_2"></a>卸载</h3> 
<h4><a id="1mysql_4"></a>1、检查本机是否已经安装mysql</h4> 
<blockquote> 
 <p># rpm -qa | grep mysql</p> 
 <p># rpm -qa | grep mariabd</p> 
</blockquote> 
<p>命令举例如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>zhang@node4 yum.repos.d<span class="token punctuation">]</span>$ <span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> mysql
mysql-community-libs-compat-8.0.36-1.el7.x86_64
mysql-community-client-plugins-8.0.36-1.el7.x86_64
mysql-community-libs-8.0.36-1.el7.x86_64
mysql-community-server-8.0.36-1.el7.x86_64
mysql-community-client-8.0.36-1.el7.x86_64
mysql-community-common-8.0.36-1.el7.x86_64
mysql80-community-release-el7-8.noarch
mysql-community-icu-data-files-8.0.36-1.el7.x86_64
</code></pre> 
<h4><a id="2mysql_28"></a>2、如已经安装，卸载已安装的mysql，不检查依赖关系</h4> 
<blockquote> 
 <p># rpm -e --nodeps 已经安装程序名称</p> 
</blockquote> 
<p>命令举例：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>zhang@node4 yum.repos.d<span class="token punctuation">]</span>$ <span class="token function">su</span> root
Password: 
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-libs-compat-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-client-plugins-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-libs-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-server-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-client-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-common-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql80-community-release-el7-8.noarch</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -e --nodeps mysql-community-icu-data-files-8.0.36-1.el7.x86_64</span>
<span class="token punctuation">[</span>root@node4 yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep mysql</span>

</code></pre> 
<h3><a id="_yum__49"></a>修改 yum 源为阿里云</h3> 
<h4><a id="1wget_53"></a>1、安装下载工具wget</h4> 
<blockquote> 
 <p>检查是否已经安装 wget ，默认都是自带 wget ，如果存在，则跳过此步骤</p> 
 <p>输入 <code>wget --version</code> 或者 <code>wget -V</code> 并按回车键。</p> 
 <p>如果 wget 已经安装，系统会显示出wget的版本信息</p> 
</blockquote> 
<p>查看安装情况</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># wget -V</span>
GNU Wget <span class="token number">1.14</span> built on linux-gnu.

+digest +https +ipv6 +iri +large-file +nls +ntlm +opie +ssl/openssl 

Wgetrc: 
    /etc/wgetrc <span class="token punctuation">(</span>system<span class="token punctuation">)</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>

<span class="token comment"># 也可以通过下面命令查看</span>
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa wget</span>
wget-1.14-18.el7_6.1.x86_64
<span class="token punctuation">[</span>root@node1 ~<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<p>如果没有wget 可以通过下面命令安装</p> 
<pre><code class="prism language-shell"><span class="token comment"># yum install -y wget</span>
</code></pre> 
<h4><a id="2_yum__86"></a>2、备份 yum 源源文件</h4> 
<blockquote> 
 <p>为了保存原有默认配置及防止误操作，先做备份</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span>
</code></pre> 
<h4><a id="3_yum__94"></a>3、下载阿里云 yum 源文件</h4> 
<blockquote> 
 <p>下载阿里云的 yum 源文件，里面的下载镜像网址全部为阿里云服务器</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span>
</code></pre> 
<h4><a id="4yum_102"></a>4、清理yum缓存</h4> 
<blockquote> 
 <p>清理yum缓存，重新生成</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># yum clean all</span>

<span class="token comment"># yum makecache</span>
</code></pre> 
<blockquote> 
 <p>如果需要更新系统中所有的已安装软件，可以使用命令</p> 
 <p>yum update -y</p> 
 <p>该命令的作用是检查系统中所有已安装软件包的最新版本，并自动下载并安装这些更新。</p> 
</blockquote> 
<h3><a id="_mysql__118"></a>安装 mysql 源</h3> 
<blockquote> 
 <p>CentOS 7 的默认软件仓库中并不包含 MySQL 社区版，在 CentOS 7 中直接使用 <code>yum install -y mysql-community-server</code> 来安装 MySQL 通常是不行的</p> 
 <p>首先需要添加 MySQL 官方提供的 Yum 仓库，可以通过下载并安装一个特殊的 RPM 包来实现</p> 
</blockquote> 
<h4><a id="1_mysql__124"></a>1、下载 mysql 源安装包</h4> 
<blockquote> 
 <p><strong><code>mysql80-community-release-el7-8.noarch.rpm</code></strong> 是一个 RPM 包，它用于在 CentOS 7 系统上配置 MySQL 8.0 Community Edition 的官方 Yum 仓库。这个包安装后，系统就能够通过 Yum 命令从官方仓库中安装、更新或卸载 MySQL 8.0 的相关软件包。</p> 
 <p>简要说明：</p> 
 <ul><li><code>mysql80</code>：标识这是 MySQL 8.0 版本的配置包。</li><li><code>community-release</code>：表明这是 MySQL 社区版的发布包，非商业版。</li><li><code>el7</code>：代表这个包适用于基于 Red Hat Enterprise Linux 7 或与其兼容的操作系统，比如 CentOS 7。</li><li><code>8</code>：可能是该配置包的版本号。</li><li><code>noarch</code>：表示这是一个与架构无关的包，也就是说它可以在任意 CPU 架构的 CentOS 7 系统上安装。</li></ul> 
 <p>安装这个包之后，可以通过 <code>yum repolist</code> 查看已添加的仓库，然后使用 <code>yum install mysql-community-server</code> 安装 MySQL 8.0 Server。</p> 
</blockquote> 
<p>在当前目录下载</p> 
<pre><code class="prism language-shell"><span class="token comment"># wget http://dev.mysql.com/get/mysql80-community-release-el7-8.noarch.rpm</span>
</code></pre> 
<blockquote> 
 <p>上面命令执行后，会在当前目录下查看已下载的安装包 mysql80-community-release-el7-8.noarch.rpm</p> 
</blockquote> 
<p>执行过程举例：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># rpm -qa -i mysql</span>
<span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># wget http://dev.mysql.com/get/mysql80-community-release-el7-8.noarch.rpm</span>
--2024-03-27 01:38:12--  http://dev.mysql.com/get/mysql80-community-release-el7-8.noarch.rpm
Resolving dev.mysql.com <span class="token punctuation">(</span>dev.mysql.com<span class="token punctuation">)</span><span class="token punctuation">..</span>. <span class="token number">23.64</span>.178.143, <span class="token number">2600</span>:1417:1000:884::2e31, <span class="token number">2600</span>:1417:1000:8ac::2e31
Connecting to dev.mysql.com <span class="token punctuation">(</span>dev.mysql.com<span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">23.64</span>.178.143<span class="token operator">|</span>:80<span class="token punctuation">..</span>. connected.
HTTP request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">301</span> Moved Permanently
。。。。。。。。省略

<span class="token comment"># 查看</span>
<span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># ls</span>
Desktop    Downloads  mysql80-community-release-el7-8.noarch.rpm
</code></pre> 
<h4><a id="2mysql_162"></a>2、安装mysql源</h4> 
<pre><code class="prism language-shell"><span class="token comment"># yum localinstall -y mysql80-community-release-el7-8.noarch.rpm</span>
</code></pre> 
<p>命令执行过程如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># yum localinstall -y mysql80-community-release-el7-8.noarch.rpm</span>
Loaded plugins: fastestmirror, langpacks
Examining mysql80-community-release-el7-8.noarch.rpm: mysql80-community-release-el7-8.noarch
Marking mysql80-community-release-el7-8.noarch.rpm to be installed
Resolving Dependencies
--<span class="token operator">&gt;</span> Running transaction check
---<span class="token operator">&gt;</span> Package mysql80-community-release.noarch <span class="token number">0</span>:el7-8 will be installed
--<span class="token operator">&gt;</span> Finished Dependency Resolution

Dependencies Resolved

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
 Package                       Arch       Version     Repository                                   Size
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Installing:
 mysql80-community-release     noarch     el7-8       /mysql80-community-release-el7-8.noarch      <span class="token number">12</span> k
Transaction Summary
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Install  <span class="token number">1</span> Package

Total size: <span class="token number">12</span> k
Installed size: <span class="token number">12</span> k
Downloading packages:
Running transaction check
<span class="token comment"># ...............部分省略</span>
Installed:
  mysql80-community-release.noarch <span class="token number">0</span>:el7-8                                                     
Complete<span class="token operator">!</span>

<span class="token comment"># 再次检查是否安装成功</span>
<span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># rpm -qa |grep mysql</span>
mysql80-community-release-el7-8.noarch

</code></pre> 
<h4><a id="3_208"></a>3、检查源是否安装成功</h4> 
<blockquote> 
 <p><code>yum repolist enabled | grep mysql</code></p> 
 <p>这个命令是用来列出当前系统中所有已启用（enabled）的 Yum 仓库，并从中筛选出包含 “mysql” 关键字的仓库</p> 
 <p>具体解释：</p> 
 <ul><li><code>yum repolist enabled</code>：这条命令会列出所有当前启用状态的 Yum 仓库及其相关信息，包括仓库的名称、状态、URL、是否启用等。</li><li><code>|</code>（管道符号）：用于将前面命令的输出结果作为后面命令的输入。</li><li><code>grep mysql</code>：这是一个文本搜索工具，它会在接收到的输入流中搜索包含字符串 “mysql” 的行。</li></ul> 
 <p>所以整个命令的目的是为了检查系统中<strong>是否有启用了的包含 “mysql” 字样的软件仓库</strong>，这通常用于确定 MySQL 的相关仓库是否已经正确添加并启用，<strong>以便于后续通过 Yum 安装或管理 MySQL 相关软件包</strong>。</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># yum repolist enabled | grep mysql</span>
<span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># yum repolist enabled | grep mysql</span>
mysql-connectors-community/x86_64 MySQL Connectors Community                 <span class="token number">242</span>
mysql-tools-community/x86_64      MySQL Tools Community                      <span class="token number">104</span>
mysql80-community/x86_64          MySQL <span class="token number">8.0</span> Community Server                 <span class="token number">465</span>
<span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<h4><a id="4yum_232"></a>4、修改yum源默认安装版本（跳过）</h4> 
<blockquote> 
 <p>已经默认安装 MySQL8，所以这一步可以跳过！（默认安装版本enbaled=1，其他enabled=0）</p> 
 <p>也可以自己通过</p> 
 <p>cat /etc/yum.repo.d/mysql-community.repo</p> 
 <p>查看里面内容做个了解</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># vim /etc/yum.repo.d/mysql-community.repo</span>
</code></pre> 
<h3><a id="mysql_246"></a>安装mysql</h3> 
<blockquote> 
 <p>上面的 yum 源安装完成后，下面就可以开始正式安装 mysql 了</p> 
</blockquote> 
<h4><a id="1_yum__mysql_250"></a>1、使用 yum 安装 mysql</h4> 
<blockquote> 
 <p>yum 安装，可以自动处理软件包之间的依赖关系。</p> 
 <p>当你安装一个软件包时，<code>yum</code> 会检查并自动下载、安装所需的任何依赖包，避免了手动寻找和安装依赖的麻烦</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># yum install -y mysql-community-server</span>
</code></pre> 
<blockquote> 
 <p>上面面命令是通过 yum 安装 MySQL 服务器，在安装前会自动检查依赖包，并自动完成查找和下载</p> 
 <p>注意：这一步可能需要等待几分钟才能完成下载和安装</p> 
</blockquote> 
<p>命令执行过如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># yum install -y mysql-community-server</span>
Loaded plugins: fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirrors.aliyun.com
 * extras: mirrors.aliyun.com
 * updates: mirrors.aliyun.com
Resolving Dependencies
--<span class="token operator">&gt;</span> Running transaction check
---<span class="token operator">&gt;</span> Package mysql-community-server.x86_64 <span class="token number">0</span>:8.0.36-1.el7 will be installed
--<span class="token operator">&gt;</span> Processing Dependency: mysql-community-common<span class="token punctuation">(</span>x86-64<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">8.0</span>.36-1.el7 <span class="token keyword">for</span> package: mysql-community-server-8.0.36-1.el7.x86_64
--<span class="token operator">&gt;</span> Processing Dependency: mysql-community-icu-data-files <span class="token operator">=</span> <span class="token number">8.0</span>.36-1.el7 <span class="token keyword">for</span> package: mysql-community-server-8.0.36-1.el7.x86_64
--<span class="token operator">&gt;</span> Processing Dependency: mysql-community-client<span class="token punctuation">(</span>x86-64<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">8.0</span>.11 <span class="token keyword">for</span> package: mysql-community-server-8.0.36-1.el7.x86_64
--<span class="token operator">&gt;</span> Running transaction check
---<span class="token operator">&gt;</span> Package mysql-community-client.x86_64 <span class="token number">0</span>:8.0.36-1.el7 will be installed
--<span class="token operator">&gt;</span> Processing Dependency: mysql-community-client-plugins <span class="token operator">=</span> <span class="token number">8.0</span>.36-1.el7 <span class="token keyword">for</span> package: mysql-community-client-8.0.36-1.el7.x86_64
--<span class="token operator">&gt;</span> Processing Dependency: mysql-community-libs<span class="token punctuation">(</span>x86-64<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">8.0</span>.11 <span class="token keyword">for</span> package: mysql-community-client-8.0.36-1.el7.x86_64
---<span class="token operator">&gt;</span> Package mysql-community-common.x86_64 <span class="token number">0</span>:8.0.36-1.el7 will be installed
---<span class="token operator">&gt;</span> Package mysql-community-icu-data-files.x86_64 <span class="token number">0</span>:8.0.36-1.el7 will be installed
--<span class="token operator">&gt;</span> Running transaction check
---<span class="token operator">&gt;</span> Package mysql-community-client-plugins.x86_64 <span class="token number">0</span>:8.0.36-1.el7 will be installed
---<span class="token operator">&gt;</span> Package mysql-community-libs.x86_64 <span class="token number">0</span>:8.0.36-1.el7 will be installed
--<span class="token operator">&gt;</span> Finished Dependency Resolution

Dependencies Resolved

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
 Package                               Arch          Version             Repository                Size
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Installing:
 mysql-community-server                x86_64        <span class="token number">8.0</span>.36-1.el7        mysql80-community         <span class="token number">64</span> M
Installing <span class="token keyword">for</span> dependencies:
 mysql-community-client                x86_64        <span class="token number">8.0</span>.36-1.el7        mysql80-community         <span class="token number">16</span> M
 mysql-community-client-plugins        x86_64        <span class="token number">8.0</span>.36-1.el7        mysql80-community        <span class="token number">3.5</span> M
 mysql-community-common                x86_64        <span class="token number">8.0</span>.36-1.el7        mysql80-community        <span class="token number">665</span> k
 mysql-community-icu-data-files        x86_64        <span class="token number">8.0</span>.36-1.el7        mysql80-community        <span class="token number">2.2</span> M
 mysql-community-libs                  x86_64        <span class="token number">8.0</span>.36-1.el7        mysql80-community        <span class="token number">1.5</span> M

Transaction Summary
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Install  <span class="token number">1</span> Package <span class="token punctuation">(</span>+5 Dependent packages<span class="token punctuation">)</span>

Total download size: <span class="token number">88</span> M
Installed size: <span class="token number">415</span> M
Downloading packages:
warning: /var/cache/yum/x86_64/7/mysql80-community/packages/mysql-community-client-plugins-8.0.36-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID a8d3785c: NOKEY
Public key <span class="token keyword">for</span> mysql-community-client-plugins-8.0.36-1.el7.x86_64.rpm is not installed
<span class="token punctuation">(</span><span class="token number">1</span>/6<span class="token punctuation">)</span>: mysql-community-client-plugins-8.0.36-1.el7.x86_64.rpm                    <span class="token operator">|</span> <span class="token number">3.5</span> MB  00:00:16     
<span class="token punctuation">(</span><span class="token number">2</span>/6<span class="token punctuation">)</span>: mysql-community-common-8.0.36-1.el7.x86_64.rpm                            <span class="token operator">|</span> <span class="token number">665</span> kB  00:00:03     
<span class="token punctuation">(</span><span class="token number">3</span>/6<span class="token punctuation">)</span>: mysql-community-icu-data-files-8.0.36-1.el7.x86_64.rpm                    <span class="token operator">|</span> <span class="token number">2.2</span> MB  00:00:09     
<span class="token punctuation">(</span><span class="token number">4</span>/6<span class="token punctuation">)</span>: mysql-community-libs-8.0.36-1.el7.x86_64.rpm                              <span class="token operator">|</span> <span class="token number">1.5</span> MB  00:00:06     
<span class="token punctuation">(</span><span class="token number">5</span>/6<span class="token punctuation">)</span>: mysql-community-client-8.0.36-1.el7.x86_64.rpm                            <span class="token operator">|</span>  <span class="token number">16</span> MB  00:01:16     
<span class="token punctuation">(</span><span class="token number">6</span>/6<span class="token punctuation">)</span>: mysql-community-server-8.0.36-1.el7.x86_64.rpm                            <span class="token operator">|</span>  <span class="token number">64</span> MB  00:02:44     
--------------------------------------------------------------------------------------
Total                                                                   <span class="token number">450</span> kB/s <span class="token operator">|</span>  <span class="token number">88</span> MB  00:03:20     
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql


The GPG keys listed <span class="token keyword">for</span> the <span class="token string">"MySQL 8.0 Community Server"</span> repository are already installed but they are not correct <span class="token keyword">for</span> this package.
Check that the correct key URLs are configured <span class="token keyword">for</span> this repository.

<span class="token comment">## 注意：这里提示失败！！！！！！</span>

 Failing package is: mysql-community-client-8.0.36-1.el7.x86_64
 GPG Keys are configured as: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022, file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql

</code></pre> 
<p>从上面安装过程可以看到，会先解析依赖并列出所有依赖，然后开始下载，再安装。</p> 
<blockquote> 
 <p>注意：最后一步，提示错误</p> 
 <p>Failing package is: mysql-community-client-8.0.36-1.el7.x86_64<br> GPG Keys are configured as: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2022, file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</p> 
</blockquote> 
<p><strong>这个是由于由于GPG密钥验证问题引起的</strong></p> 
<p><strong>解决方法1：</strong></p> 
<p>需要禁掉GPG验证检查，指令：</p> 
<blockquote> 
 <p># yum -y install mysql-community-server --nogpgcheck</p> 
</blockquote> 
<p>再次执行，显示成功！</p> 
<pre><code class="prism language-shell">Transaction <span class="token builtin class-name">test</span> succeeded
Running transaction
  Installing <span class="token builtin class-name">:</span> mysql-community-common-8.0.36-1.el7.x86_64                                           <span class="token number">1</span>/6 
  Installing <span class="token builtin class-name">:</span> mysql-community-client-plugins-8.0.36-1.el7.x86_64                                   <span class="token number">2</span>/6 
  Installing <span class="token builtin class-name">:</span> mysql-community-libs-8.0.36-1.el7.x86_64                                             <span class="token number">3</span>/6 
  Installing <span class="token builtin class-name">:</span> mysql-community-client-8.0.36-1.el7.x86_64                                           <span class="token number">4</span>/6 
  Installing <span class="token builtin class-name">:</span> mysql-community-icu-data-files-8.0.36-1.el7.x86_64                                   <span class="token number">5</span>/6 
  Installing <span class="token builtin class-name">:</span> mysql-community-server-8.0.36-1.el7.x86_64                                           <span class="token number">6</span>/6 
  Verifying  <span class="token builtin class-name">:</span> mysql-community-client-8.0.36-1.el7.x86_64                                           <span class="token number">1</span>/6 
  Verifying  <span class="token builtin class-name">:</span> mysql-community-client-plugins-8.0.36-1.el7.x86_64                                   <span class="token number">2</span>/6 
  Verifying  <span class="token builtin class-name">:</span> mysql-community-server-8.0.36-1.el7.x86_64                                           <span class="token number">3</span>/6 
  Verifying  <span class="token builtin class-name">:</span> mysql-community-common-8.0.36-1.el7.x86_64                                           <span class="token number">4</span>/6 
  Verifying  <span class="token builtin class-name">:</span> mysql-community-libs-8.0.36-1.el7.x86_64                                             <span class="token number">5</span>/6 
  Verifying  <span class="token builtin class-name">:</span> mysql-community-icu-data-files-8.0.36-1.el7.x86_64                                   <span class="token number">6</span>/6 

Installed:
  mysql-community-server.x86_64 <span class="token number">0</span>:8.0.36-1.el7                                                      
Dependency Installed:
  mysql-community-client.x86_64 <span class="token number">0</span>:8.0.36-1.el7   mysql-community-client-plugins.x86_64 <span class="token number">0</span>:8.0.36-1.el7  
  mysql-community-common.x86_64 <span class="token number">0</span>:8.0.36-1.el7   mysql-community-icu-data-files.x86_64 <span class="token number">0</span>:8.0.36-1.el7  
  mysql-community-libs.x86_64 <span class="token number">0</span>:8.0.36-1.el7    

Complete<span class="token operator">!</span>
</code></pre> 
<p>执行完成后，可以检查是否安装完成</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># rpm -qa |grep mysql</span>
mysql-community-client-8.0.36-1.el7.x86_64
mysql-community-common-8.0.36-1.el7.x86_64
mysql-community-client-plugins-8.0.36-1.el7.x86_64
mysql-community-server-8.0.36-1.el7.x86_64
mysql-community-libs-8.0.36-1.el7.x86_64
mysql80-community-release-el7-8.noarch
mysql-community-icu-data-files-8.0.36-1.el7.x86_64

</code></pre> 
<h4><a id="2mysql_394"></a>2、启动mysql</h4> 
<blockquote> 
 <p>安装完成后，开始启动 MySQL 服务器</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># systemctl start mysqld</span>
</code></pre> 
<h4><a id="3_402"></a>3、设置开机启动</h4> 
<pre><code class="prism language-shell"><span class="token comment"># systemctl enable mysqld</span>
</code></pre> 
<h4><a id="4_408"></a>4、重新加载配置文件</h4> 
<pre><code class="prism language-shell"><span class="token comment"># systemctl daemon-reload</span>
</code></pre> 
<h3><a id="_414"></a>防火墙配置</h3> 
<blockquote> 
 <p>为了方便通过其他主机来远程访问 mysql ，就需要停止防火墙或配置开放 3306 端口来允许服务器外的请求访问</p> 
</blockquote> 
<h4><a id="13306_418"></a>1、开启3306端口</h4> 
<blockquote> 
 <p>如果已经关闭或禁用防火墙了，这里可以不用配置。</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># firewall-cmd --zone=public --add-port=3306/tcp --permanent</span>
</code></pre> 
<h4><a id="2_426"></a>2、加载配置</h4> 
<blockquote> 
 <p>修改后，需要重新加载配置</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># firewall-cmd --reload</span>
</code></pre> 
<h3><a id="mysql_434"></a>登录mysql</h3> 
<h4><a id="1mysql_436"></a>1、查看mysql密码</h4> 
<blockquote> 
 <p>一般都会返回一串无规律的字符串，如果没有返回则为空密码</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token comment"># cat /var/log/mysqld.log | grep password</span>
</code></pre> 
<p>命令执行过程如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># cat /var/log/mysqld.log | grep password</span>
<span class="token number">2024</span>-03-27T06:56:23.739180Z <span class="token number">6</span> <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-010454<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: oBBk<span class="token operator">&gt;</span>Pw_y5<span class="token punctuation">(</span>r
<span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre> 
<blockquote> 
 <p>注意：</p> 
 <p>上面的 “oBBk&gt;Pw_y5(r” 即为初始密码，下面登录时需要用到。所以这里复制一下。</p> 
</blockquote> 
<h4><a id="2_457"></a>2、尝试登录</h4> 
<blockquote> 
 <p>这里的登录，需要使用到上面查询出来的密码</p> 
</blockquote> 
<pre><code># mysql -uroot -p （有密码登录）
</code></pre> 
<p>执行命令如下：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># mysql -uroot -p'oBBk&gt;Pw_y5(r'</span>
mysql: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> Using a password on the <span class="token builtin class-name">command</span> line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">8</span>
Server version: <span class="token number">8.0</span>.36

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2024</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">&gt;</span> 
</code></pre> 
<p>上面表示登录成功！</p> 
<blockquote> 
 <p>注意：</p> 
 <p>mysql -uroot -p’oBBk&gt;Pw_y5(r’</p> 
 <ul><li><code>mysql</code>：这是 MySQL 客户端程序，用于与 MySQL 服务器进行交互，执行 SQL 查询和其他数据库管理操作。</li><li><code>-u root</code>：这里的 <code>-u</code> 参数指定了登录的用户名，这里是 <code>root</code>，也就是 MySQL 服务器的超级用户。</li><li><code>-p'oBBk&gt;Pw_y5(r'</code>：这里的 <code>-p</code> 参数后面跟随的是登录密码，但这里需要注意的是，密码应当紧跟着 <code>-p</code> 参数而没有空格，且出于安全考虑，通常建议在命令行中不直接显示密码内容，而是等待命令行提示输入密码后再手动输入</li></ul> 
</blockquote> 
<h4><a id="3_493"></a>3、修改密码</h4> 
<blockquote> 
 <p>注意：下面的执行是在 <strong>mysql 登录状态</strong>下执行的命令</p> 
 <p>为了后面登录方便，还需要修改为自己容易记住的密码</p> 
 <p>ALTER USER ‘root’@‘localhost’ IDENTIFIED WITH mysql_native_password BY ‘root’;</p> 
</blockquote> 
<p>命令执行过程如下：</p> 
<pre><code class="prism language-shell">mysql<span class="token operator">&gt;</span> ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'root'</span><span class="token punctuation">;</span>
ERROR <span class="token number">1819</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Your password does not satisfy the current policy requirements
mysql<span class="token operator">&gt;</span> ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'root1234'</span><span class="token punctuation">;</span>
ERROR <span class="token number">1819</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Your password does not satisfy the current policy requirements
mysql<span class="token operator">&gt;</span> ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'root1234;'</span><span class="token punctuation">;</span>
ERROR <span class="token number">1819</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Your password does not satisfy the current policy requirements
mysql<span class="token operator">&gt;</span> ALTER <span class="token environment constant">USER</span> <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">'rootA1234;'</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>注意：默认密码策略要求包含数字、大小写字母、特殊字符、长度8位等</p> 
</blockquote> 
<p>修改后，可以直接使用新密码登录尝试。</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@node4 zhang<span class="token punctuation">]</span><span class="token comment"># mysql -uroot -p'rootA1234;'</span>
mysql: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> Using a password on the <span class="token builtin class-name">command</span> line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">14</span>
Server version: <span class="token number">8.0</span>.36 MySQL Community Server - GPL

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2024</span>, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.

</code></pre> 
<h4><a id="4_535"></a>4、远程登录</h4> 
<blockquote> 
 <p>默认情况下，MySQL 是不允许远程通过本地外的机子访问的</p> 
 <p>比如下图通过客户端访问被拒绝效果</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/2a/9b/m5JdKbag_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意：下面的执行是在 <strong>mysql 登录状态</strong>下执行的命令</p> 
</blockquote> 
<pre><code class="prism language-shell">create user <span class="token string">'root'</span>@<span class="token string">'%'</span> identified with mysql_native_password by <span class="token string">'root'</span><span class="token punctuation">;</span>
grant all privileges on *.* to <span class="token string">'root'</span>@<span class="token string">'%'</span> with grant option<span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre> 
<p>实际操作如下：</p> 
<pre><code class="prism language-shell">mysql<span class="token operator">&gt;</span> create user <span class="token string">'root'</span>@<span class="token string">'%'</span> identified with mysql_native_password by <span class="token string">'root'</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> grant all privileges on *.* to <span class="token string">'root'</span>@<span class="token string">'%'</span> with grant option<span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

</code></pre> 
<p>注意最后刷新权限。</p> 
<p>再次使用客户端访问，就可以成功登录了！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/15c8aadceab5b7329eb306277ae2349a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">毕设：《基于hive的音乐数据分析系统的设计与实现》</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f6799b8a3df9a2fa9007f50c79b8db6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小程序获取微信头像与昵称</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>