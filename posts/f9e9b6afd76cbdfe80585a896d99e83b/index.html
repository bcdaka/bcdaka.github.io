<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于网页自动化工具DrissionPage进行爬虫的使用方法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f9e9b6afd76cbdfe80585a896d99e83b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="关于网页自动化工具DrissionPage进行爬虫的使用方法">
  <meta property="og:description" content="目录 一. 简介二. 使用1. 安装方式2. 基本用法3. 模式4. 元素交互4. SessionPage5. 运行JS6. 结语 一. 简介 最近在学python的过程中，发现了一个好用的爬虫库DrissionPage —— 一个基于 python 的网页自动化工具。据具官方文档（官方网址：https://drissionpage.cn/）介绍：
它既能控制浏览器，也能收发数据包，还能把两者合而为一。可兼顾浏览器自动化的便利性和 requests 的高效率。它功能强大，内置无数人性化设计和便捷功能。它的语法简洁而优雅，代码量少，对新手友好。 笔者在用的过程中发现还不错，语法简洁方便，可无配置运行。就写一篇文章分享一下这个工具的使用方法。
二. 使用 1. 安装方式 开始之前，我们要先安装一个这个库，注意：Python版本要在3.6及以上，我们使用pip安装，安装命令：
pip install DrissionPage 升级最新稳定版本版本使用：
pip install DrissionPage --upgrade 或者指定版本安装：
pip install DrissionPage==4.0.0b17 2. 基本用法 在我们的Python文件中导入DrissionPage库，写一个最简单的demo，我们来爬取百度的热搜榜单。
我们先来观察一下百度首页的页面结构，我们可以看到这些热搜都用到了title-content-title类，那我们就可以使用这个类名来获取信息。
from DrissionPage import ChromiumPage # 创建ChromiumPage对象时会在指定端口启动浏览器，或接管该端口已有浏览器。 # 默认情况下，程序使用 9222 端口 page = ChromiumPage() # 只传入一个url就行，后面那些参数都有默认值 page.get(&#39;https://www.baidu.com&#39;,retry=99, show_errmsg=True, timeout=10) # 这里我们通过类名获取元素 lists = page.eles(&#39;.title-content-title&#39;) for i in lists: print(i.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-05T15:06:24+08:00">
    <meta property="article:modified_time" content="2024-06-05T15:06:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于网页自动化工具DrissionPage进行爬虫的使用方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#___1" rel="nofollow">一. 简介</a></li><li><a href="#___10" rel="nofollow">二. 使用</a></li><li><ul><li><a href="#1__11" rel="nofollow">1. 安装方式</a></li><li><a href="#2__28" rel="nofollow">2. 基本用法</a></li><li><a href="#3__77" rel="nofollow">3. 模式</a></li><li><a href="#4__90" rel="nofollow">4. 元素交互</a></li><li><a href="#4_SessionPage_136" rel="nofollow">4. SessionPage</a></li><li><a href="#5_JS_152" rel="nofollow">5. 运行JS</a></li><li><a href="#6__224" rel="nofollow">6. 结语</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="___1"></a>一. 简介</h2> 
<p>最近在学python的过程中，发现了一个好用的爬虫库<code>DrissionPage</code> —— 一个基于 python 的网页自动化工具。据具官方文档（官方网址：<code>https://drissionpage.cn/</code>）介绍：</p> 
<ul><li>它既能控制浏览器，也能收发数据包，还能把两者合而为一。</li><li>可兼顾浏览器自动化的便利性和 requests 的高效率。</li><li>它功能强大，内置无数人性化设计和便捷功能。</li><li>它的语法简洁而优雅，代码量少，对新手友好。</li></ul> 
<p>笔者在用的过程中发现还不错，语法简洁方便，可无配置运行。就写一篇文章分享一下这个工具的使用方法。</p> 
<h2><a id="___10"></a>二. 使用</h2> 
<h3><a id="1__11"></a>1. 安装方式</h3> 
<p>开始之前，我们要先安装一个这个库，注意：<em><code>Python版本要在3.6及以上</code></em>，我们使用<code>pip</code>安装，安装命令：</p> 
<pre><code class="prism language-powershell">pip install DrissionPage
</code></pre> 
<p>升级最新稳定版本版本使用：</p> 
<pre><code class="prism language-powershell">pip install DrissionPage <span class="token operator">--</span>upgrade
</code></pre> 
<p>或者指定版本安装：</p> 
<pre><code class="prism language-powershell">pip install DrissionPage==4<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0b17
</code></pre> 
<h3><a id="2__28"></a>2. 基本用法</h3> 
<p>在我们的Python文件中导入<code>DrissionPage</code>库，写一个最简单的demo，我们来爬取百度的热搜榜单。<br> 我们先来观察一下百度首页的页面结构，我们可以看到这些热搜都用到了<code>title-content-title</code>类，那我们就可以使用这个类名来获取信息。<br> <img src="https://images2.imgbox.com/eb/5f/oT5V7VSG_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> DrissionPage <span class="token keyword">import</span> ChromiumPage

<span class="token comment"># 创建ChromiumPage对象时会在指定端口启动浏览器，或接管该端口已有浏览器。</span>
<span class="token comment"># 默认情况下，程序使用 9222 端口</span>
page <span class="token operator">=</span> ChromiumPage<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 只传入一个url就行，后面那些参数都有默认值</span>
page<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>retry<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">,</span> show_errmsg<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment"># 这里我们通过类名获取元素</span>
lists <span class="token operator">=</span> page<span class="token punctuation">.</span>eles<span class="token punctuation">(</span><span class="token string">'.title-content-title'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> lists<span class="token punctuation">:</span>  
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
</code></pre> 
<p>执行这个文件，在控制台中我们看到成功获取了我们在页面上看到的那些热搜<br> <img src="https://images2.imgbox.com/82/31/bK5Mxl6a_o.png" alt="![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/30508bfc940a40ba86adc9ea0e9d3ebc.png"></p> 
<p>怎么样，只要六行代码，是不是很简单呢，那我们接着往下看<br> <img src="https://images2.imgbox.com/46/a5/IFB4NPX3_o.gif" alt="在这里插入图片描述"><br> 在上面的demo中，我们可以使用class类名来获取指定元素，那么你可能要问了，既然能通过类名，是不是也能通过id，标签呢。是的，DrissionPage库提供了多种定位元素的方式，这里列举一下，我们还是以百度首页的 <code>百度一下</code> 按钮为例：</p> 
<pre><code class="prism language-python"><span class="token comment"># 获取 id 为 su的元素,也就是搜索按钮</span>
div1 <span class="token operator">=</span> page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'#su'</span><span class="token punctuation">)</span>

<span class="token comment"># 获取 type 属性为 submit的元素</span>
p1 <span class="token operator">=</span> page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'@type=submit'</span><span class="token punctuation">)</span>

<span class="token comment"># 获取包含“百度一下”文本的元素</span>
div2 <span class="token operator">=</span> page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'百度一下'</span><span class="token punctuation">)</span>

<span class="token comment"># 获取所有input元素</span>
div_list <span class="token operator">=</span> page<span class="token punctuation">.</span>eles<span class="token punctuation">(</span><span class="token string">'tag:input'</span><span class="token punctuation">)</span>
</code></pre> 
<p><code>ele</code>是获取匹配到的第一个元素，<code>eles</code>是获取匹配到的所有元素，返回一个<code>list</code>，还有更多的定位元素的方式，这里就不再赘述了，可移步官网 <a href="https://drissionpage.cn/get_elements/usage" rel="nofollow">https://drissionpage.cn/get_elements/usage</a>。<br> ★ 这里解释下<code>get()</code>方法：该方法用于跳转到一个网址。当连接失败时，程序会进行重试。该方法返回一个<code>bool</code>类型，表示是否连接成功。</p> 
<table><thead><tr><th>参数名称</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>url</code></td><td><code>str</code></td><td>目标 url，可指向本地文件路径 必填</td></tr><tr><td><code>retry</code></td><td><code>int</code></td><td>重试次数，为None时使用页面参数，默认 3</td></tr><tr><td><code>timeout</code></td><td><code>float</code></td><td>加载超时时间（秒）</td></tr><tr><td><code>interval</code></td><td><code>int</code></td><td>重试间隔（秒），为None时使用页面参数，默认 2</td></tr><tr><td><code>show_errmsg</code></td><td><code>bool</code></td><td>连接出错时是否显示和抛出异常，默认False</td></tr></tbody></table> 
<h3><a id="3__77"></a>3. 模式</h3> 
<p>在上面的demo中，你会发现启动的时候会自动打开浏览器，那么你可能想，我就要悄悄的爬，不想打开浏览器呢？这个也有的，也就是我们要将的无头模式，还是那段代码，我们只需要加一个<code>ChromiumOptions</code>配置就可以以无界面模式启动浏览器。<code>headless</code>该方法用于设置是否以无界面模式启动浏览器。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> DrissionPage <span class="token keyword">import</span> ChromiumPage<span class="token punctuation">,</span>ChromiumOptions

co <span class="token operator">=</span> ChromiumOptions<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>headless<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
page <span class="token operator">=</span> ChromiumPage<span class="token punctuation">(</span>co<span class="token punctuation">)</span>
page<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>retry<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">,</span> show_errmsg<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
lists <span class="token operator">=</span> page<span class="token punctuation">.</span>eles<span class="token punctuation">(</span><span class="token string">'.title-content-title'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> lists<span class="token punctuation">:</span>  
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4__90"></a>4. 元素交互</h3> 
<p>在示例中我们看到页面上只有几条热搜，我们想要获取更多的信息怎么办呢，我们可以看到点击换一换按钮，即可加载更多信息，这也就需要我们要与页面进行交互。如你所知，库也具有元素交互的能力。这里我们以<code>id</code>方式获取到这个元素，并且调用<code>click()</code>方法进行操作。<br> <img src="https://images2.imgbox.com/e1/7a/GSzc9Rw1_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> DrissionPage <span class="token keyword">import</span> ChromiumPage<span class="token punctuation">,</span>ChromiumOptions

co <span class="token operator">=</span> ChromiumOptions<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>headless<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
page <span class="token operator">=</span> ChromiumPage<span class="token punctuation">(</span>co<span class="token punctuation">)</span>
page<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.baidu.com'</span><span class="token punctuation">,</span>retry<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">,</span> show_errmsg<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment"># 收集数据 </span>
<span class="token keyword">def</span> <span class="token function">gatherDataBD</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">:</span>
    lists <span class="token operator">=</span> page<span class="token punctuation">.</span>eles<span class="token punctuation">(</span><span class="token string">'.title-content-title'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> lists<span class="token punctuation">:</span>  
        <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment"># 每次循环完成之后，点击换一换按钮</span>
    page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'#hotsearch-refresh-btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    gatherDataBD<span class="token punctuation">(</span>page<span class="token punctuation">)</span>
<span class="token comment"># 如果不继续用该浏览器，可调用此方法关闭哦</span>
page<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行过程中，你会在页面上看到换一换按钮被真实的点击，控制会打印更多的数据。<br> 那么你可能要问了，既然可以这样，为什么不能那样呢？<br> <img src="https://images2.imgbox.com/e3/c2/wrBqQv4d_o.gif" alt="在这里插入图片描述"><br> 下面我们以gitee为例，演示一下脚本自动输入元素，并自动登录功能。这里我们先获取到两个输入框，然后调用<code>input()</code>方法去输入值，然后我们通过属性值去获取登录按钮并调用<code>click()</code>点击事件进行登录。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> DrissionPage <span class="token keyword">import</span> ChromiumPage<span class="token punctuation">,</span>ChromiumOptions

co <span class="token operator">=</span> ChromiumOptions<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>headless<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
page <span class="token operator">=</span> ChromiumPage<span class="token punctuation">(</span>co<span class="token punctuation">)</span>
page<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://gitee.com/login?redirect_to_url=%2F'</span><span class="token punctuation">)</span>

page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'#user_login'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'你的账号'</span><span class="token punctuation">)</span>
page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'#user_password'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'你的密码'</span><span class="token punctuation">)</span>

page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'@type=submit'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>效果如下：可以看到信息已被填入输入框<br> <img src="https://images2.imgbox.com/28/cb/TztKGkmk_o.png" alt="在这里插入图片描述"></p> 
<p>这里提醒大家遵守相关规定合理使用哦！<br> DrissionPage还提供了很多有用的元素交互的事件，如<code>focus()</code>使元素获取焦点、<code>hover()</code>悬停在元素上、<code>click.multi()</code>实现左键多次点击元素，更多事件请移步：<a href="https://drissionpage.cn/ChromiumPage/ele_operation" rel="nofollow">https://drissionpage.cn/ChromiumPage/ele_operation</a></p> 
<h3><a id="4_SessionPage_136"></a>4. SessionPage</h3> 
<p>那么如果我们想通过调接口的方式去爬取数据呢，这就用到了<code>SessionPage</code>模式了。顾名思义，SessionPage是一个使用<code>Session（requests 库）</code>对象的页面，它使用 POM 模式封装了网络连接和 html 解析功能，使收发数据包也可以像操作页面一样便利。<br> 这里我就自己写一个接口，就不用真实的网站接口了。以下是我接口返回的数据：<br> <img src="https://images2.imgbox.com/6f/68/d34BRXjY_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> DrissionPage <span class="token keyword">import</span> SessionPage

apiObj <span class="token operator">=</span> SessionPage<span class="token punctuation">(</span><span class="token punctuation">)</span>
apiObj<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://localhost:8000/getDataList'</span><span class="token punctuation">,</span> retry<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> show_errmsg<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment"># 这里可以调用接口获取数据</span>
result <span class="token operator">=</span> apiObj<span class="token punctuation">.</span>json
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre> 
<p>控制台打印如下：可见已经正确获取到<br> <img src="https://images2.imgbox.com/0c/ef/Mh4QzsTf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_JS_152"></a>5. 运行JS</h3> 
<p>假设你有一个自动填充表单的需求，有一个type为<code>date</code>类型的<code>input</code>框，这里我们使用原生<code>html</code>演示，页面效果如下：<br> <img src="https://images2.imgbox.com/95/41/Cy9NdvfJ_o.png" alt="在这里插入图片描述"><br> 前端代码简化如下：</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>表单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderForm<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-group<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item-label<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>下单日期：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderDate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>normal-input<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>你会发现这个框你是没法输入的，你如果直接用<code>DrissionPage</code>的<code>input()</code>方法，你会发现输入无效。</p> 
<pre><code class="prism language-python">page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'@name=orderDate'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'2024-06-10'</span><span class="token punctuation">)</span>
</code></pre> 
<p>这里看到这个input框，确实被点击了，但是值没有进去<br> <img src="https://images2.imgbox.com/3a/3e/bjBzahHg_o.png" alt="在这里插入图片描述"><br> 要想对于这种类型的input赋值，只需要在上面的input方法中传一个<code>by_js</code>即可，即使用 <code>js</code>方式输入</p> 
<pre><code class="prism language-python">page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'@name=orderDate'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'2024-06-10'</span><span class="token punctuation">,</span>by_js<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>输入成功：<br> <img src="https://images2.imgbox.com/40/81/XvSSciwf_o.png" alt="在这里插入图片描述"><br> input()方法接收3个参数：</p> 
<table><thead><tr><th>参数名称</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>vals</code></td><td><code>Any</code></td><td><code>False</code></td><td>文本值或按键组合，对文件上传控件时输入路径字符串或其组成的列表</td></tr><tr><td><code>clear</code></td><td><code>bool</code></td><td><code>False</code></td><td>输入前是否清空文本框</td></tr><tr><td><code>by_js</code></td><td><code>bool</code></td><td><code>False</code></td><td>是否用 js 方式输入，为True时不能输入组合键</td></tr></tbody></table> 
<p>通过上面的实例你已经知道DrissionPage是可以<code>执行js</code>代码的，其实DrissionPage的很多方法都可以以js方式执行，比如<code>click()</code>、<code>to_upload()</code>。当你发现在使用某些方法无效的时候，不妨试着传入一个<code>by_js=True</code>试试，或许有奇效。</p> 
<p>除了其中方法提供js执行方式外，<code>DrissionPage</code>还可以执行用户自己编写的<code>js脚本</code>。<br> 还是上面的那个input时间选择器，我们可以使用以下代码实现：</p> 
<pre><code class="prism language-python">input_ele <span class="token operator">=</span> page<span class="token punctuation">.</span>ele<span class="token punctuation">(</span><span class="token string">'@name=orderDate'</span><span class="token punctuation">)</span>
input_ele<span class="token punctuation">.</span>run_js<span class="token punctuation">(</span><span class="token string">"document.querySelector('[name=orderDate]').value = '2024-05-25'"</span><span class="token punctuation">)</span>
<span class="token comment"># 这两种都可以达到同样的效果，下面的this即指代当前元素</span>
input_ele<span class="token punctuation">.</span>run_js<span class="token punctuation">(</span><span class="token string">"this.value = '2024-06-18'"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f5/c6/rbJaN3la_o.png" alt="在这里插入图片描述"><br> 比如我们要打开一个弹窗：</p> 
<pre><code class="prism language-python">page<span class="token punctuation">.</span>run_js<span class="token punctuation">(</span><span class="token string">'alert("我是一条" + arguments[0] + "，弹走" + arguments[1]);'</span><span class="token punctuation">,</span> <span class="token string">'弹窗'</span><span class="token punctuation">,</span> <span class="token string">'鱼尾纹!'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0d/8d/Kg6O0lUD_o.png" alt="在这里插入图片描述"><br> run_js的参数列表：</p> 
<table><thead><tr><th>参数名称</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>script</code></td><td><code>str</code></td><td>必填</td><td>js 脚本文本或脚本文件路径</td></tr><tr><td><code>*args</code></td><td><code>-</code></td><td>无</td><td>传入的参数，按顺序在js文本中对应<code>arguments[0]</code>、<code>arguments[1]</code>…</td></tr><tr><td><code>as_expr</code></td><td><code>bool</code></td><td><code>False</code></td><td>是否作为表达式运行，为<code>True</code>时<code>args</code>参数无效</td></tr><tr><td><code>timetout</code></td><td><code>float</code></td><td><code>None</code></td><td>js 超时时间，为<code>None</code>则使用页面<code>timeouts.script</code>设置</td></tr></tbody></table> 
<h3><a id="6__224"></a>6. 结语</h3> 
<p>好了，以上就是<code>DrissionPage</code> 基本的使用方式了，你学会了吗？后续我会继续更新本文，介绍更多爬虫实用的方法。觉得本文对您有所帮助的话，可以点个赞支持一下哦！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/80ce1a67ca19751838138c1ecf3f6b5b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Nginx正向代理让内网主机通过外网主机访问互联网</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/35feff184058f6b503e139e06d13069b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA的使用配置Maven(及selenium&#43;webdriver的下载配置)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>