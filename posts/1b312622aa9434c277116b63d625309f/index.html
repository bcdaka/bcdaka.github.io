<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL查询语句大全（基础查询、函数使用、高级查询） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1b312622aa9434c277116b63d625309f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL查询语句大全（基础查询、函数使用、高级查询）">
  <meta property="og:description" content="目录 一、基础查询1.1、直接查询1.2、为字段取别名1.3、去重查询1.4、条件查询1.5、模糊查询1.6、逻辑运算符1.7、in与not in运算符1.8、算术运算符1.9、between and的范围查询1.10、排序查询1.11、分组查询1.12、分页查询 二、函数使用2.1、统计函数2.2、字符串函数2.2.1、CONCAT（拼接内容）2.2.2、REPLACE / INSERT（字符串替换）2.2.3、LOWER（指定内容转换为小写）2.2.4、UPPER（指定内容转换为大写）2.2.5、SUBSTRING（指定内容截取）2.2.6、CAST / CONVERT （将字符串数字转换成数字类型） 2.3、时间函数2.3.1、获取时间相关函数2.3.2、将数字类型时间戳转换成时间格式2.3.3、将字符串时间转换成数字时间戳 2.4、取整、取小数、取模函数2.4.1、向上取整2.4.2、向下取整2.4.3、不四舍五入取整、取小数2.4.4、四舍五入取整、取小数2.4.5、取模 2.5、特殊函数（例如获取随机数）2.5.1、获取随机数2.5.2、判断正负 三、高级查询3.1 内连接3.2 左连接3.3 右连接3.4 union 拼接结果集（不包含重复行）3.5 union all 拼接结果集（包含重复行） 一、基础查询 1.1、直接查询 # 语法：select 字段 from 表名； # 举例： 从 student 表中查询 name 与 age select name, age from student; 1.2、为字段取别名 # 语法：select 字段 as 别名 from 表名； # 举例： 从 student 表中查询 name 与 age select name as &#39;myName&#39;, age as &#39;myAge&#39; from student; 1.3、去重查询 # 语法：select distinct 字段 from 表名； # 举例： 从 student 表中查询 name 并且将结果去重 select distinct name from student; 1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-04T18:58:06+08:00">
    <meta property="article:modified_time" content="2023-12-04T18:58:06+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL查询语句大全（基础查询、函数使用、高级查询）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">一、基础查询</a></li><li><ul><li><a href="#11_2" rel="nofollow">1.1、直接查询</a></li><li><a href="#12_9" rel="nofollow">1.2、为字段取别名</a></li><li><a href="#13_15" rel="nofollow">1.3、去重查询</a></li><li><a href="#14_23" rel="nofollow">1.4、条件查询</a></li><li><a href="#15_29" rel="nofollow">1.5、模糊查询</a></li><li><a href="#16_36" rel="nofollow">1.6、逻辑运算符</a></li><li><a href="#17innot_in_43" rel="nofollow">1.7、in与not in运算符</a></li><li><a href="#18_50" rel="nofollow">1.8、算术运算符</a></li><li><a href="#19between_and_58" rel="nofollow">1.9、between and的范围查询</a></li><li><a href="#110_65" rel="nofollow">1.10、排序查询</a></li><li><a href="#111_72" rel="nofollow">1.11、分组查询</a></li><li><a href="#112_93" rel="nofollow">1.12、分页查询</a></li></ul> 
   </li><li><a href="#_101" rel="nofollow">二、函数使用</a></li><li><ul><li><a href="#21_102" rel="nofollow">2.1、统计函数</a></li><li><a href="#22_119" rel="nofollow">2.2、字符串函数</a></li><li><ul><li><a href="#221CONCAT_120" rel="nofollow">2.2.1、CONCAT（拼接内容）</a></li><li><a href="#222REPLACE___INSERT_125" rel="nofollow">2.2.2、REPLACE / INSERT（字符串替换）</a></li><li><a href="#223LOWER_133" rel="nofollow">2.2.3、LOWER（指定内容转换为小写）</a></li><li><a href="#224UPPER_138" rel="nofollow">2.2.4、UPPER（指定内容转换为大写）</a></li><li><a href="#225SUBSTRING_143" rel="nofollow">2.2.5、SUBSTRING（指定内容截取）</a></li><li><a href="#226CAST__CONVERT__148" rel="nofollow">2.2.6、CAST / CONVERT （将字符串数字转换成数字类型）</a></li></ul> 
    </li><li><a href="#23_159" rel="nofollow">2.3、时间函数</a></li><li><ul><li><a href="#231_160" rel="nofollow">2.3.1、获取时间相关函数</a></li><li><a href="#232_188" rel="nofollow">2.3.2、将数字类型时间戳转换成时间格式</a></li><li><a href="#233_196" rel="nofollow">2.3.3、将字符串时间转换成数字时间戳</a></li></ul> 
    </li><li><a href="#24_212" rel="nofollow">2.4、取整、取小数、取模函数</a></li><li><ul><li><a href="#241_213" rel="nofollow">2.4.1、向上取整</a></li><li><a href="#242_219" rel="nofollow">2.4.2、向下取整</a></li><li><a href="#243_225" rel="nofollow">2.4.3、不四舍五入取整、取小数</a></li><li><a href="#244_232" rel="nofollow">2.4.4、四舍五入取整、取小数</a></li><li><a href="#245_239" rel="nofollow">2.4.5、取模</a></li></ul> 
    </li><li><a href="#25_246" rel="nofollow">2.5、特殊函数（例如获取随机数）</a></li><li><ul><li><a href="#251_247" rel="nofollow">2.5.1、获取随机数</a></li><li><a href="#252_255" rel="nofollow">2.5.2、判断正负</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_267" rel="nofollow">三、高级查询</a></li><li><ul><li><a href="#31__268" rel="nofollow">3.1 内连接</a></li><li><a href="#32__277" rel="nofollow">3.2 左连接</a></li><li><a href="#33__284" rel="nofollow">3.3 右连接</a></li><li><a href="#34_union__292" rel="nofollow">3.4 union 拼接结果集（不包含重复行）</a></li><li><a href="#35_union_all__304" rel="nofollow">3.5 union all 拼接结果集（包含重复行）</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>一、基础查询</h3> 
<h4><a id="11_2"></a>1.1、直接查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名；</span>
<span class="token comment"># 举例： 从 student 表中查询 name 与 age</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span> age <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="12_9"></a>1.2、为字段取别名</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 as 别名 from 表名；</span>
<span class="token comment"># 举例： 从 student 表中查询 name 与 age</span>
<span class="token keyword">select</span> name <span class="token keyword">as</span> <span class="token string">'myName'</span><span class="token punctuation">,</span> age <span class="token keyword">as</span> <span class="token string">'myAge'</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="13_15"></a>1.3、去重查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select distinct 字段 from 表名；</span>
<span class="token comment"># 举例： 从 student 表中查询 name 并且将结果去重</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> name <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="14_23"></a>1.4、条件查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名 where 条件；</span>
<span class="token comment"># 举例：从 student 表中查询 age = 15 的 name</span>
<span class="token keyword">select</span> name <span class="token keyword">from</span> student <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="15_29"></a>1.5、模糊查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名 where 字段 like '%数据%';</span>
<span class="token comment"># 举例：从 student 表中查询 name 中含有 '张' 的所有记录</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%张%'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="16_36"></a>1.6、逻辑运算符</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：and（且）, or（或）, not（非）</span>
<span class="token comment"># 举例：从 student 表中查询 age = 15 或 sex = 'man' 的所有记录</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">15</span> <span class="token operator">or</span> sex <span class="token operator">=</span> <span class="token string">'man'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="17innot_in_43"></a>1.7、in与not in运算符</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名 where 字段 in(列表)//或 not in(列表);</span>
<span class="token comment"># 举例：从 student 表中查询 age 为 (13, 14, 15) 之间的所有记录</span>
举例：<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> age <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="18_50"></a>1.8、算术运算符</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：&gt;（大于）, &lt;（小于）, =（等于）, !=（不等于）, &lt;&gt;（不等于）, &gt;=（大于等于）, &lt;=（小于等于）</span>
<span class="token comment"># 举例：解析：从 student 表中查询 age &lt; 15 的所有记录</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> age <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="19between_and_58"></a>1.9、between and的范围查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名 where 字段 between 起始值 and 结束值;</span>
<span class="token comment"># 举例：从 student 表中查询 age&gt;=10 且 age&lt;=20 之间的数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> age <span class="token operator">between</span> <span class="token number">10</span> <span class="token operator">and</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="110_65"></a>1.10、排序查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名 order by 字段 排序方式(升序 asc, 降序 desc);</span>
<span class="token comment"># 举例：从 student 表中查询所有记录并按照 age 升序排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">asc</span>
</code></pre> 
<h4><a id="111_72"></a>1.11、分组查询</h4> 
<ul><li>简单分组查询</li></ul> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 分组字段,count(1) from 表名 group by 分组字段;</span>
<span class="token comment"># 举例：从 student 表中查询name，并且对name进行分组统计</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> name<span class="token punctuation">;</span>
</code></pre> 
<ul><li>分组查询将每组中的id都显示出来</li></ul> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 分组字段,group_concat(字段) from 表名 group by 分组字段;</span>
<span class="token comment"># 举例：从 student 表中查询name，并且对name进行分组统计，将分组后的id都显示出来</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> name<span class="token punctuation">;</span>
</code></pre> 
<ul><li>配合having一起使用</li></ul> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 分组字段,count(1) from 表名 group by 分组字段 having count(1)&gt;=2 order by count(1) desc;</span>
<span class="token comment"># 举例：从 student 表中分组查询name总数大于等于2个的数据，并且对name分组后统计数量进行倒序</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> name <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">2</span> <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="112_93"></a>1.12、分页查询</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表名 limit 页码,每页显示条数;</span>
<span class="token comment"># 举例：查询 student 表从第一行开始，往后查询5条数据包含第一条， 0 表示第一行记录，也是从 0 开始，和数值类似</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment"># or</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_101"></a>二、函数使用</h3> 
<h4><a id="21_102"></a>2.1、统计函数</h4> 
<ul><li>count() ：统计记录的条数；</li><li>sum()：计算字段的值的总和；</li><li>avg()：可以求出表中某个字段取值的平均值；</li><li>max()：可以求出表中某个字段取值的最大值；</li><li>min()：可以求出表中某个字段取值的最小值。</li></ul> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 函数(字段) from 表名;</span>
<span class="token comment"># 举例：统计 student 表中有多少条数据</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> 
<p><font color="red"> PS: 聚合函数会自动忽略null值那一行</font><br> 如： <code>select name,count(name) from student group by name;</code> 就算有多个name值为空，最后统计出来name=null的值也是0，可以使用 ifnull(字段名，默认值) ，不去忽略null值的哪一行，而是赋值一个默认值<br> <code>select name,count(ifnull(name,'张三')) from student group by name;</code></p> 
<h4><a id="22_119"></a>2.2、字符串函数</h4> 
<h5><a id="221CONCAT_120"></a>2.2.1、CONCAT（拼接内容）</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token string">'My'</span><span class="token punctuation">,</span><span class="token string">'S'</span><span class="token punctuation">,</span><span class="token string">'QL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果：MySQL</span>
</code></pre> 
<h5><a id="222REPLACE___INSERT_125"></a>2.2.2、REPLACE / INSERT（字符串替换）</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">'这是一个数据库'</span><span class="token punctuation">,</span> <span class="token string">'一个'</span><span class="token punctuation">,</span> <span class="token string">'MySQL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果：这是MySQL数据库</span>

<span class="token keyword">SELECT</span> <span class="token keyword">INSERT</span><span class="token punctuation">(</span><span class="token string">'这是一个数据库'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'MySQL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果：这是MySQL数据库</span>
</code></pre> 
<h5><a id="223LOWER_133"></a>2.2.3、LOWER（指定内容转换为小写）</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> LOWER<span class="token punctuation">(</span><span class="token string">'MYSQL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果：mysql</span>
</code></pre> 
<h5><a id="224UPPER_138"></a>2.2.4、UPPER（指定内容转换为大写）</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果：MYSQL</span>
</code></pre> 
<h5><a id="225SUBSTRING_143"></a>2.2.5、SUBSTRING（指定内容截取）</h5> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> SUBSTRING<span class="token punctuation">(</span><span class="token string">'JavaMySQLOracle'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果：MySQL</span>
</code></pre> 
<h5><a id="226CAST__CONVERT__148"></a>2.2.6、CAST / CONVERT （将字符串数字转换成数字类型）</h5> 
<pre><code class="prism language-sql"><span class="token comment"># 将字符串数字转换成整型</span>
<span class="token keyword">SELECT</span> CAST<span class="token punctuation">(</span><span class="token string">'123'</span> <span class="token keyword">AS</span> SIGNED<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CONVERT</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">,</span> SIGNED<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 将字符串数字转换成浮点型</span>
<span class="token keyword">SELECT</span> CAST<span class="token punctuation">(</span><span class="token string">'123.45'</span> <span class="token keyword">AS</span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CONVERT</span><span class="token punctuation">(</span><span class="token string">'123.45'</span><span class="token punctuation">,</span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="23_159"></a>2.3、时间函数</h4> 
<h5><a id="231_160"></a>2.3.1、获取时间相关函数</h5> 
<ul><li>UNIX_TIMESTAMP() ：获取当前时间秒数</li><li>SYSDATE() ：当前系统时间 (日、月、年、时、分、秒)，取的是动态的实时时间</li><li>NOW() ：取的是语句开始执行的系统时间，取自MySQL的一个变量”TIMESTAMP”，而这个变量在语句开始执行的时候就设定好了，因此在整个语句执行过程中都不会变化</li><li>CURDATE() ：获取当前日期</li><li>CURTIME() ：获取当前时间</li><li>WEEK(DATE) ：获取指定日期为一年中的第几周</li><li>YEAR(DATE) ：获取指定日期的年份</li><li>HOUR(TIME) ：获取指定时间的小时值</li><li>MINUTE(TIME) ：获取时间的分钟值</li><li>DATEDIFF(DATE1DATE2) ：获取DATE1和DATE2之间相隔的天数</li><li>ADDDATE(DATEN) ：计算DATE加上N天后的日期</li></ul> 
<pre><code class="prism language-sql"><span class="token comment"># 获取当前时间秒数</span>
<span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 获取当前时间毫秒数</span>
<span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>

<span class="token comment"># 查询系统当前时间</span>
<span class="token keyword">SELECT</span> SYSDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查询当前时间</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查询当前日期</span>
<span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 获取指定日期的年份</span>
<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token string">'2023-09-11 00:05:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 结果：2023，这里可以传字符串格式时间也可以传datetime等时间类型，但是不支持时间戳</span>
</code></pre> 
<h5><a id="232_188"></a>2.3.2、将数字类型时间戳转换成时间格式</h5> 
<p><img src="https://images2.imgbox.com/4e/a2/usVY3DIk_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> FROM_UNIXTIME<span class="token punctuation">(</span><span class="token number">1694239200000</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment"># 结果：2023-09-09 14:00:00</span>
</code></pre> 
<h5><a id="233_196"></a>2.3.3、将字符串时间转换成数字时间戳</h5> 
<ul><li>标准日期时间格式</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2023-09-09 14:00:00'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ts<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2023/9/9 14:00:00'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ts<span class="token punctuation">;</span>
<span class="token comment"># 结果 1694239200 ，这里得到的是秒，需要乘1000得到毫秒</span>

<span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2023-09-09'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ts<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2023/9/9'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ts<span class="token punctuation">;</span>
<span class="token comment"># 结果 1694188800 ，这里得到的是秒，需要乘1000得到毫秒</span>
</code></pre> 
<ul><li>不是标准的日期时间格式</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> UNIX_TIMESTAMP<span class="token punctuation">(</span>STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'2023.09.09 14:00:00'</span><span class="token punctuation">,</span> <span class="token string">'%Y.%m.%d %H:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ts<span class="token punctuation">;</span>
<span class="token comment"># 结果 1694239200 ，这里得到的是秒，需要乘1000得到毫秒</span>
</code></pre> 
<h4><a id="24_212"></a>2.4、取整、取小数、取模函数</h4> 
<h5><a id="241_213"></a>2.4.1、向上取整</h5> 
<p>ceil(x)或ceiling(x)</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> ceil<span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 2</span>
</code></pre> 
<h5><a id="242_219"></a>2.4.2、向下取整</h5> 
<p>floor(x)</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> floor<span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 1</span>
</code></pre> 
<h5><a id="243_225"></a>2.4.3、不四舍五入取整、取小数</h5> 
<p>truncate(x ,y)，y代表小数点后几位</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">truncate</span><span class="token punctuation">(</span><span class="token number">1.56</span> <span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 1.5</span>
</code></pre> 
<h5><a id="244_232"></a>2.4.4、四舍五入取整、取小数</h5> 
<p>round(x ,y)</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 2</span>
</code></pre> 
<h5><a id="245_239"></a>2.4.5、取模</h5> 
<p>mod(x,y)</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 1</span>
</code></pre> 
<h4><a id="25_246"></a>2.5、特殊函数（例如获取随机数）</h4> 
<h5><a id="251_247"></a>2.5.1、获取随机数</h5> 
<p>rand()，返回 0 到 1 的随机数</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果类似 0.4608162319854053</span>
</code></pre> 
<h5><a id="252_255"></a>2.5.2、判断正负</h5> 
<p>sign(x)，返回 x 的符号，x 是负数返回 -1、x 是0返回 0、x 是正数返回 1</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> sign<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 -1</span>
<span class="token keyword">SELECT</span> sign<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 0</span>
<span class="token keyword">SELECT</span> sign<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 结果 1</span>
</code></pre> 
<h3><a id="_267"></a>三、高级查询</h3> 
<h4><a id="31__268"></a>3.1 内连接</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表1 inner join 表2 on 表1.字段 = 表2.字段;</span>
<span class="token comment">#	根据两个表中共有的字段进行匹配，然后将符合条件的合集进行拼接</span>
<span class="token comment">#	on后面是连接条件，也就是共有字段</span>

<span class="token comment"># 举例：将 student 表与 engScore 表通过相同的 name 拼接起来，简单的来说就是两个 excel 合并</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">inner</span> <span class="token keyword">join</span> engScore <span class="token keyword">on</span> student<span class="token punctuation">.</span>name <span class="token operator">=</span> engScore<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="32__277"></a>3.2 左连接</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表1 left join 表2 on 连接条件;</span>
<span class="token comment"># 举例：与内连接形式相同，但左表为主表，指定字段都会显示，右表为从表，无内容会显示 null</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> engScore <span class="token keyword">on</span> student<span class="token punctuation">.</span>name <span class="token operator">=</span> engScore<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="33__284"></a>3.3 右连接</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：select 字段 from 表1 right join 表2 on 连接条件;</span>
<span class="token comment"># 举例：与内连接形式相同，但右表为主表，指定字段都会显示，左表为从表，无内容会显示 null</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">right</span> <span class="token keyword">join</span> engScore <span class="token keyword">on</span> student<span class="token punctuation">.</span>name <span class="token operator">=</span> engScore<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="34_union__292"></a>3.4 union 拼接结果集（不包含重复行）</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：</span>
<span class="token comment"># select id,name from 表名 where 字段 = 条件</span>
<span class="token comment"># union </span>
<span class="token comment"># select id,name from 表名 where 字段 = 条件</span>

<span class="token comment"># 举例：查询name=张三 和 name=李四的数据，不包含重复行</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">"张三"</span>
<span class="token keyword">union</span> 
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">"李四"</span>
</code></pre> 
<h4><a id="35_union_all__304"></a>3.5 union all 拼接结果集（包含重复行）</h4> 
<pre><code class="prism language-sql"><span class="token comment"># 语法：</span>
<span class="token comment"># select id,name from 表名 where 字段 = 条件</span>
<span class="token comment"># union all</span>
<span class="token comment"># select id,name from 表名 where 字段 = 条件</span>

<span class="token comment"># 举例：查询name=张三 和 name=李四的数据，包含重复行</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">"张三"</span>
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">"李四"</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f3e5126716cc8a970faaae0eb3f21277/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java_JDK8到JDK21各版本发行时间及重要特性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f5bbeb32157ad13dc84dff05613ab6b8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">掌握排序的艺术：Python中sorted()函数全面解析！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>