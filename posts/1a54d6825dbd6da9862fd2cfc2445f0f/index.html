<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL数据库期末项目 图书馆管理系统 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1a54d6825dbd6da9862fd2cfc2445f0f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL数据库期末项目 图书馆管理系统">
  <meta property="og:description" content="1 项目需求分析
1.1 项目名称
图书馆管理系统
1.2 项目功能
在以前大多部分图书馆都是由人工直接管理，其中每天的业务和操作流程非常繁琐复杂，纸质版的登记信息耗费了大量的人力物力。因此图书馆管理系统应运而生，该系统采用智能化设计，在业务流程的实现方面更加注重智能化、规范化、流程化，极大地提高图书馆的管理效率及服务质量。
其中管理员负责图书的信息录入和类型归纳，以及读者借阅图书和归还图书时的信息登记；图书信息和图书类型为管理员或读者们查找所需要的图书时提供便捷；图书借阅负责记录读者的借阅信息并对借阅信息做一个统筹处理；图书归还负责读者归还图书后的信息的记录；读者信息方便图书的借阅与归还，凭借读者信息可以直接在网上进行借阅和归还。这样的流程大大降低了图书馆管理员的工作量，也提高了图书馆的管理效率。
1.3 项目系统结构图
图书馆管理系统分为三部分，管理员部分负责管理员信息的增删改查，图书管理部分主要包括图书信息、类型、借阅和归还，而读者管理负责读者信息的修改、增加、查询和修改。
2 数据库的设计
2.1 概念结构设计
（一）实体之间的联系如下：
一个管理员可以整理多本图书信息，因此管理员和图书信息具有一对多的联系，用整理来表示管理员和图书信息的关系。
一个管理员可以对多种图书类型进行归类，因此管理员和图书类型具有一对多的联系，用归类来表示管理员和图书类型的关系。
一个管理员可以管理多个图书借阅信息，因此管理员和图书借阅信息具有一对多的联系，用管理来表示管理员和图书借阅信息的关系。
一个管理员可以管理多个图书归还信息，因此管理员和图书归还信息具有一对多的联系，用管理来表示管理员和图书归还信息的关系。
一个管理员可以管理多个读者信息，因此管理员和读者信息具有一对多的联系，用管理来表示管理员和读者信息的关系。
一本图书可由多个读者借阅，一个读者也可借阅多本图书，因此读者和图书借阅具有多对多的联系，用借阅来表示读者和图书借阅的关系。
一本图书可由多个读者归还，一个读者也可归还多本图书，因此读者和图书归还具有多对多的联系，用归还来表示读者和图书归还的关系。
（二）E-R图设计如下：
2.2 逻辑结构设计
将E-R图转换为关系模型如下：
管理员（ID编号、管理员名称、管理员密码）
图书信息（ID编号、图书编号、书名、作者、价格、出版社）
图书类型（图书编号、书名、数量、类型、所在书架）
图书借阅（读者编号、图书编号、读者姓名、借书时间、归还时间、是否归还）
图书归还（读者编号、图书编号、读者姓名、归还时间）
读者（读者编号、姓名、性别、职业、出生日期、证件号码、电话、电子邮箱）
对关系模型进行规范化，最终规范为第三范式。
2.3 物理结构设计
（1）manager(管理员信息表)
列名
数据类型
长度
约束
说明
Id
Char(10)
10
Not null primary key
ID编号
Name
Varchar(30)
30
Not null
管理员名称
Password
Varchar(30)
30
Not null
管理员密码
（2）bookinfo(图书信息表)
列名
数据类型
长度
约束
说明">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-01-10T12:08:29+08:00">
    <meta property="article:modified_time" content="2023-01-10T12:08:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL数据库期末项目 图书馆管理系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:15pt;"><span class="kdocs-bold" style="font-weight:bold;">1 项目需求分析</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">1.1 项目名称</span></span></p> 
 <p style="padding-left:1.4em;text-align:null;">图书馆管理系统</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">1.2 项目功能</span></span></p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">在以前大多部分图书馆都是由人工直接管理，其中每天的业务和操作流程非常繁琐复杂，纸质版的登记信息耗费了大量的人力物力。因此图书馆管理系统应运而生，该系统采用智能化设计，在业务流程的实现方面更加注重智能化、规范化、流程化，极大地提高图书馆的管理效率及服务质量。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">其中管理员负责图书的信息录入和类型归纳，以及读者借阅图书和归还图书时的信息登记；图书信息和图书类型为管理员或读者们查找所需要的图书时提供便捷；图书借阅负责记录读者的借阅信息并对借阅信息做一个统筹处理；图书归还负责读者归还图书后的信息的记录；读者信息方便图书的借阅与归还，凭借读者信息可以直接在网上进行借阅和归还。这样的流程大大降低了图书馆管理员的工作量，也提高了图书馆的管理效率。</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">1.3 项目系统结构图</span></span></p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">图书馆管理系统分为三部分，管理员部分负责管理员信息的增删改查，图书管理部分主要包括图书信息、类型、借阅和归还，而读者管理负责读者信息的修改、增加、查询和修改。</p> 
 <div class="kdocs-line-container" style="display:flex;justify-content:center;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:554;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:46.750904%;height:0;"> 
    <img src="https://images2.imgbox.com/a7/4b/zJqeC7mI_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-46.750904%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:15pt;"><span class="kdocs-bold" style="font-weight:bold;">2 数据库的设计</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">2.1 概念结构设计</span></span></p> 
 <p style="text-align:null;">（一）实体之间的联系如下：</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一个管理员可以整理多本图书信息，因此管理员和图书信息具有一对多的联系，用整理来表示管理员和图书信息的关系。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一个管理员可以对多种图书类型进行归类，因此管理员和图书类型具有一对多的联系，用归类来表示管理员和图书类型的关系。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一个管理员可以管理多个图书借阅信息，因此管理员和图书借阅信息具有一对多的联系，用管理来表示管理员和图书借阅信息的关系。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一个管理员可以管理多个图书归还信息，因此管理员和图书归还信息具有一对多的联系，用管理来表示管理员和图书归还信息的关系。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一个管理员可以管理多个读者信息，因此管理员和读者信息具有一对多的联系，用管理来表示管理员和读者信息的关系。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一本图书可由多个读者借阅，一个读者也可借阅多本图书，因此读者和图书借阅具有多对多的联系，用借阅来表示读者和图书借阅的关系。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">一本图书可由多个读者归还，一个读者也可归还多本图书，因此读者和图书归还具有多对多的联系，用归还来表示读者和图书归还的关系。</p> 
 <p style="text-align:null;">（二）E-R图设计如下：</p> 
 <div class="kdocs-line-container" style="display:flex;justify-content:center;"> 
  <div class="kdocs-img" style="background-color:#F5F7F9;flex-direction:column;max-width:100%;display:flex;width:561;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:60.0713%;height:0;"> 
    <img src="https://images2.imgbox.com/ad/af/mtlCCtfq_o.png" style="margin-left:;display:block;width:100.0%;margin-top:-60.0713%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">2.2 逻辑结构设计</span></span></p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">将E-R图转换为关系模型如下：</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">管理员（<span class="kdocs-underline" style="text-decoration:underline;">ID编号</span>、管理员名称、管理员密码）</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">图书信息（<span class="kdocs-underline" style="text-decoration:underline;">ID编号、图书编号</span>、书名、作者、价格、出版社）</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">图书类型（<span class="kdocs-underline" style="text-decoration:underline;">图书编号</span>、书名、数量、类型、所在书架）</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">图书借阅（<span class="kdocs-underline" style="text-decoration:underline;">读者编号、图书编号</span>、读者姓名、借书时间、归还时间、是否归还）</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">图书归还（<span class="kdocs-underline" style="text-decoration:underline;">读者编号、图书编号</span>、读者姓名、归还时间）</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">读者（<span class="kdocs-underline" style="text-decoration:underline;">读者编号</span>、姓名、性别、职业、出生日期、证件号码、电话、电子邮箱）</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">对关系模型进行规范化，最终规范为第三范式。</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">2.3 物理结构设计</span></span></p> 
 <p style="text-align:null;">（1）manager(管理员信息表)</p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">列名</p></td><td class="kdocs-tableCell" style="width:121px;vertical-align:top;height:51px;"><p style="text-align:center;">数据类型</p></td><td class="kdocs-tableCell" style="width:94px;vertical-align:top;height:51px;"><p style="text-align:center;">长度</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">约束</p></td><td class="kdocs-tableCell" style="width:88px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Id</p></td><td class="kdocs-tableCell" style="width:121px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:94px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null primary key</p></td><td class="kdocs-tableCell" style="width:88px;vertical-align:top;height:51px;"><p style="text-align:center;">ID编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Name</p></td><td class="kdocs-tableCell" style="width:121px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(30)</p></td><td class="kdocs-tableCell" style="width:94px;vertical-align:top;height:51px;"><p style="text-align:center;">30</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:88px;vertical-align:top;height:51px;"><p style="text-align:center;">管理员名称</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Password</p></td><td class="kdocs-tableCell" style="width:121px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(30)</p></td><td class="kdocs-tableCell" style="width:94px;vertical-align:top;height:51px;"><p style="text-align:center;">30</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:88px;vertical-align:top;height:51px;"><p style="text-align:center;">管理员密码</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;">（2）bookinfo(图书信息表)</p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">列名</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">数据类型</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">长度</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">约束</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">Id</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null foreign key</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">ID编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">Bookname</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(60)</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">60</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">书名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">Author</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(60)</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">60</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">作者</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">BookId</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null primary key</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">图书编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">Price</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">Decimal(10,2)</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">30</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">价格</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:115px;vertical-align:top;height:51px;"><p style="text-align:center;">Publish</p></td><td class="kdocs-tableCell" style="width:135px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(30)</p></td><td class="kdocs-tableCell" style="width:77px;vertical-align:top;height:51px;"><p style="text-align:center;">30</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">出版社</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;">（3）booktype（图书类型表）</p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">列名</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">数据类型</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">长度</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">约束</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">BookId</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null primary key</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">图书编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Bookname</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(60)</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">60</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">书名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Quantity</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(20)</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">20</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">数量</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Type</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(30)</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">30</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">类型</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Shelf</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(20)</p></td><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">20</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">所在书架</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;">（4）bookborrow（图书借阅表）</p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">列名</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">数据类型</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;">长度</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">约束</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">ReaderId</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null primary key</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">读者编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">ReaderName</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(10)</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">读者姓名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">BookId</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null foreign key</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">图书编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">BorrowTime</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Date</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;"> </p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">借书时间</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">BackTime</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Date</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;"> </p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">归还时间</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">IfBack</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(10)</p></td><td class="kdocs-tableCell" style="width:86px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:97px;vertical-align:top;height:51px;"><p style="text-align:center;">是否归还</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;">（5）bookback（图书归还表）</p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">列名</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">数据类型</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">长度</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">约束</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">ReaderId</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null primary key</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">读者编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">ReaderName</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(10)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">读者姓名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">BookId</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null foreign key</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:51px;"><p style="text-align:center;">图书编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:73px;"><p style="text-align:center;">BackTime</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:73px;"><p style="text-align:center;">Date</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:73px;"><p style="text-align:center;"> </p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:73px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:99px;vertical-align:top;height:73px;"><p style="text-align:center;">归还时间</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;">（6）readerinfo(读者信息表)</p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">列名</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">数据类型</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">长度</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">约束</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">ReaderId</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Char(10)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null primary key</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">读者编号</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">ReaderName</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(10)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">姓名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Sex</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(10)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">10</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">性别</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Vocation</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(30)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">30</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">职业</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Birthday</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Date</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;"> </p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">出生日期</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Identify</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(20)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">20</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">证件号码</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Tel</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(20)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">20</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">电话</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:114px;vertical-align:top;height:51px;"><p style="text-align:center;">Email</p></td><td class="kdocs-tableCell" style="width:122px;vertical-align:top;height:51px;"><p style="text-align:center;">Varchar(20)</p></td><td class="kdocs-tableCell" style="width:82px;vertical-align:top;height:51px;"><p style="text-align:center;">20</p></td><td class="kdocs-tableCell" style="width:139px;vertical-align:top;height:51px;"><p style="text-align:center;">Not null</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">电子邮箱</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:15pt;"><span class="kdocs-bold" style="font-weight:bold;">3 数据库的实现</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.1 数据库</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">数据库名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义数据库语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">library_lwl</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create database library_lwl;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建数据库</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.2 表</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">表名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义表语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">manager</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table manager(</p><p style="text-align:center;">Id char(10) not null primary key,</p><p style="text-align:center;">Name varchar(30) not null,</p><p style="text-align:center;">Password varchar(30) not null );</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建manager(管理员信息表)</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">bookinfo</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table bookinfo(</p><p style="text-align:center;">Id char(10) not null,</p><p style="text-align:center;">Bookname varchar(60) not null,</p><p style="text-align:center;">Author varchar(60) not null,</p><p style="text-align:center;">BookId char(10) not null primary key,</p><p style="text-align:center;">Price Decimal(10,2) not null,</p><p style="text-align:center;">Publish varchar(30) not null,</p><p style="text-align:center;">constraint bookinfo_fk foreign key (Id) references manager(Id) );</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建bookinfo(图书信息表)</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">booktype</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table booktype(</p><p style="text-align:center;">BookId char(10) not null primary key,</p><p style="text-align:center;">Bookname varchar(60) not null,</p><p style="text-align:center;">Quantity char(20) not null,</p><p style="text-align:center;">Type varchar(30) not null,</p><p style="text-align:center;">Shelf varchar(20) not null );</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建booktype(图书类型表)</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">bookborrow</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table bookborrow(</p><p style="text-align:center;">ReaderId char(10) not null primary key,</p><p style="text-align:center;">ReaderName varchar(10) not null,</p><p style="text-align:center;">BookId char(10) not null,</p><p style="text-align:center;">BorrowTime date not null,</p><p style="text-align:center;">BackTime date not null,</p><p style="text-align:center;">IfBack varchar(10) not null,</p><p style="text-align:center;">constraint bookborrow_fk foreign key (BookId) references bookinfo(BookId) );</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建bookborrow(图书借阅表)</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">bookback</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table bookback(</p><p style="text-align:center;">ReaderId char(10) not null primary key,</p><p style="text-align:center;">ReaderName varchar(10) not null,</p><p style="text-align:center;">BookId char(10) not null,</p><p style="text-align:center;">BackTime date not null,</p><p style="text-align:center;">constraint bookback_fk foreign key (BookId) references bookinfo(BookId) );</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建bookback(图书归还表)</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">readerinfo</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table readerinfo(</p><p style="text-align:center;">ReaderId char(10) not null primary key,</p><p style="text-align:center;">ReaderName varchar(10) not null,</p><p style="text-align:center;">Sex varchar(10) not null,</p><p style="text-align:center;">Vocation varchar(30) not null,</p><p style="text-align:center;">Birthday date not null,</p><p style="text-align:center;">Identify varchar(20) not null,</p><p style="text-align:center;">Tel varchar(20) not null,</p><p style="text-align:center;">Email varchar(20) not null );</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建readerinfo(读者信息表)</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.3 数据操纵</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">数据操纵类型</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">数据操纵语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">查询数据</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">select * from bookborrow,readerinfo where readerinfo.ReaderId = 'R0001' and bookborrow.ReaderId = readerinfo.ReaderId;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">查询读者编号为R0001的读者信息和图书借阅信息</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">插入数据</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">insert into manager values ('001', '李**', 'l123');</p><p style="text-align:center;">insert into manager values ('002', '董**', 'd123');</p><p style="text-align:center;">insert into bookinfo values ('001', 'MySql数据库', '林某某', '000001', 49.8, '人民邮电出版社');</p><p style="text-align:center;">insert into bookinfo values ('001', 'Java程序设计', '赵某某', '000002', 59.0, '机械工业出版社');</p><p style="text-align:center;">insert into booktype values ('000001', 'MySql数据库', 100, '编程书籍', '1号书架');</p><p style="text-align:center;">insert into booktype values ('000002', 'Java程序设计', '89', '编程书籍', '1号书架');</p><p style="text-align:center;">insert into bookborrow values ('R0001', '青玉案', '000001', '2022-10-23', '2022-12-10', '是');</p><p style="text-align:center;">insert into bookborrow values ('R0002', '北顾亭', '000001', '2022-10-24', '2022-12-10', '否');</p><p style="text-align:center;">insert into bookback values ('R0001', '青玉案', '000001','2022-12-10');</p><p style="text-align:center;">insert into bookback values ('R0002', '北顾亭', '000001','2022-12-10');</p><p style="text-align:center;">insert into readerinfo values ('R0001', '青玉案', '男', '学生', '2001-04-12', '411456', '1582476', '<a class="kdocs-link" style="color:#0A6CFF;" href="mailto:297@qq.com" rel="nofollow noopener noreferrer" target="_blank">297@qq.com</a>');</p><p style="text-align:center;">insert into readerinfo values ('R0002', '北顾亭', '男', '工人', '2001-11-23', '411423', '1352686', '<a class="kdocs-link" style="color:#0A6CFF;" href="mailto:225@qq.com" rel="nofollow noopener noreferrer" target="_blank">225@qq.com</a>');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">在每张表里分别插入两条数据</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">修改数据</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">update bookinfo set Price = 59.8 where BookId in (select BookId from booktype where Bookname = "MySql数据库");</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">通过图书名称在类型表里查询图书编号，根据编号更改信息表里的图书价格</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">删除数据</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delete from bookback where ReaderId = (select ReaderId from readerinfo where ReaderId = 'R0001');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">根据从读者信息表里查找的读者编号在图书归还表里删除数据</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.4 视图</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">视图名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义视图和查询视图语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">readerinfo_v</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create view readerinfo_v (读者编号,姓名,性别,职业,出生日期,证件号码,电话,电子邮箱)as select ReaderId,ReaderName,Sex,Vocation,Birthday,Identify,Tel,Emailfrom readerinfo where Vocation = '学生';</p><p style="text-align:center;">select * from readerinfo_v;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建视图readerinfo_v，字段名用中文表示，包含所有学生的读者编号、姓名、性别、职业、出生日期、证件号码、电话和电子邮箱</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">readerlist_v</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create view readerlist_v (ReaderId,ReaderName,Bookname,BorrowTime,BackTime)as select readerinfo.ReaderId,readerinfo.ReaderName,Bookname,BorrowTime,BackTimefrom readerinfo,bookinfo,bookborrow where readerinfo.ReaderId = bookborrow.ReaderId and bookborrow.BookId = bookinfo.BookId;</p><p style="text-align:center;">select * from readerlist_v;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建视图readerlist_v，包含读者编号，姓名，书名，借书时间和归还时间</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.5 索引</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">索引名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义索引语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">manager_index</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create index manager_index on manager(Name);</p><p style="text-align:center;">show index from manager;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">对管理员信息表的管理员名称创建普通索引</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">bookinfo_index</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create unique index bookinfo_index on bookinfo(Bookname);</p><p style="text-align:center;">show index from bookinfo;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">对图书信息表中的Bookname创建唯一性索引</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">combine_index</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create index combine_index on readerinfo(ReaderId,ReaderName,Tel);</p><p style="text-align:center;">show index from readerinfo;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">对读者信息表中的读者编号、姓名和电话创建组合索引</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.6 存储过程</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">存储过程名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义及调用存储过程语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">select_p</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure select_p(in Bid char(10))</p><p style="text-align:center;">begin</p><p style="text-align:center;">select * from bookinfo,bookborrow </p><p style="text-align:center;">where bookinfo.BookId = Bid and bookinfo.BookId = bookborrow.BookId;</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call select_p('000001');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，通过输入图书编号来查询图书信息和图书借阅信息</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">update_p</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure update_p(in Rid char(10),in Rn varchar(10))</p><p style="text-align:center;">begin</p><p style="text-align:center;">update bookback set ReaderName = Rn where ReaderId = Rid;</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call update_p('R0001',"浪淘沙");</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，根据输入的读者编号来更改图书归还表中的读者姓名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">interval_p</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure interval_p(in Date1 date,out Date2 integer)</p><p style="text-align:center;">begin</p><p style="text-align:center;">set Date2 = datediff(curdate(),Date1);</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call interval_p('2022-10-23',@Date2);</p><p style="text-align:center;">select @Date2;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，通过读者借书时间与当前时间比较，得出实际借阅天数</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">compare_p</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure compare_p(in b1 char(10),in b2 char(10),out v varchar(30))</p><p style="text-align:center;">begin declare quantity1,quantity2 integer;</p><p style="text-align:center;">select quantity into quantity1 from booktype where BookId = b1;</p><p style="text-align:center;">select quantity into quantity2 from booktype where BookId = b2;</p><p style="text-align:center;">if quantity1&gt;quantity2 </p><p style="text-align:center;">then set v = "推荐您读第一本书！";</p><p style="text-align:center;">else set v = "推荐您读第二本书！" ;</p><p style="text-align:center;">end if;</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call compare_p('000001','000002',@v);</p><p style="text-align:center;">select @v;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，通过比较两本图书的图书数量，来为读者推荐所读书籍</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">cursor_p</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure cursor_p()</p><p style="text-align:center;">begin</p><p style="text-align:center;">declare ReaderIds char(10);</p><p style="text-align:center;">declare BorrowTimes date;</p><p style="text-align:center;">declare BackTimes date;</p><p style="text-align:center;">declare IfBacks varchar(10);</p><p style="text-align:center;">declare infor_cursor cursor for select ReaderId,BorrowTime,BackTime,IfBack from bookborrow;</p><p style="text-align:center;">declare continue handler for not found set @cur=0;</p><p style="text-align:center;">set @cur=1;</p><p style="text-align:center;">open infor_cursor;</p><p style="text-align:center;">fetch infor_cursor into ReaderIds,BorrowTimes,BackTimes,IfBacks;</p><p style="text-align:center;">while @cur do</p><p style="text-align:center;">select ReaderIds,BorrowTimes,BackTimes,IfBacks;</p><p style="text-align:center;">fetch infor_cursor into ReaderIds,BorrowTimes,BackTimes,IfBacks;</p><p style="text-align:center;">end while;</p><p style="text-align:center;">close infor_cursor;</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call cursor_p();</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，使用fetch语句检索数据，并将游标指向从图书借阅表里查询出的结果集里</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.7 存储函数</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">存储函数名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义及调用存储函数语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">count_fun</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create function count_fun()</p><p style="text-align:center;">returns char(10)</p><p style="text-align:center;">deterministic</p><p style="text-align:center;">begin </p><p style="text-align:center;">declare sumc char(20);</p><p style="text-align:center;">select count(*) into sumc from bookinfo where Price &gt;= 50;</p><p style="text-align:center;">return sumc;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select count_fun();</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储函数，返回图书价格不小于50的总数</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">total_fun</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create function total_fun(Bid char(10))</p><p style="text-align:center;">returns decimal(10,2)</p><p style="text-align:center;">deterministic</p><p style="text-align:center;">begin </p><p style="text-align:center;">declare pri decimal(10,2);</p><p style="text-align:center;">declare qy char(20);</p><p style="text-align:center;">declare totals decimal(10,2);</p><p style="text-align:center;">select Price into pri from bookinfo where BookId = Bid;</p><p style="text-align:center;">select Quantity into qy from booktype where BookId = Bid;</p><p style="text-align:center;">set totals = pri * qy;</p><p style="text-align:center;">return totals;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select total_fun('000001');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储函数，通过输入的图书编号来计算剩余书本的总价</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">select_fun</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create function select_fun(Rid char(10))</p><p style="text-align:center;">returns char(10)</p><p style="text-align:center;">deterministic</p><p style="text-align:center;">begin </p><p style="text-align:center;">declare Rne char(10);</p><p style="text-align:center;">select ReaderName into Rne from readerinfo where ReaderId = Rid;</p><p style="text-align:center;">if Rne is null then</p><p style="text-align:center;">set Rne = "未找到该读者！";</p><p style="text-align:center;">return Rne;</p><p style="text-align:center;">else </p><p style="text-align:center;">return Rne;</p><p style="text-align:center;">end if;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select select_fun('R0001');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储函数，通过输入的读者编号来查询读者姓名，如果为空返回"未找到该读者！"，否则返回读者姓名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">compare_fun</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create function compare_fun(Id1 char(10),Id2 char(10))</p><p style="text-align:center;">returns char(20)</p><p style="text-align:center;">DETERMINISTIC</p><p style="text-align:center;">begin</p><p style="text-align:center;">declare Rid1 char(10);</p><p style="text-align:center;">declare Rid2 char(10);</p><p style="text-align:center;">declare pce1 Decimal(10,2);</p><p style="text-align:center;">declare pce2 Decimal(10,2);</p><p style="text-align:center;">declare Bn varchar(60);</p><p style="text-align:center;">select Price into pce1 from bookinfo where BookId = Rid1;</p><p style="text-align:center;">select Price into pce2 from bookinfo where BookId = Rid2;</p><p style="text-align:center;">if pce1 &lt; pce2 then</p><p style="text-align:center;">set Bn = "第一本书较便宜！";</p><p style="text-align:center;">else</p><p style="text-align:center;">set Bn = "第二本书较便宜！";</p><p style="text-align:center;">end if;</p><p style="text-align:center;">return Bn;</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select compare_fun('000001','000002');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储函数，通过输入两个图书编号来比较相应价格，为读者选择较便宜的书籍</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">pric_fun</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create function pric_fun(Bid char(10))</p><p style="text-align:center;">returns decimal(10,2)</p><p style="text-align:center;">deterministic</p><p style="text-align:center;">begin</p><p style="text-align:center;">declare p decimal(10,2);</p><p style="text-align:center;">select Price into p from bookinfo where BookId=Bid;</p><p style="text-align:center;">return p;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select pric_fun('000001');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储函数，通过输入图书编号来返回对应的图书价格</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.8 触发器</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">触发器名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义及使用触发器语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">update_trig</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create trigger update_trig before update</p><p style="text-align:center;">on readerinfo for each row</p><p style="text-align:center;">begin</p><p style="text-align:center;">update bookborrow set ReaderName=new.ReaderName;</p><p style="text-align:center;">update bookback set ReaderName=new.ReaderName;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">update readerinfo set ReaderName = "望海潮" where ReaderId = 'R0001';</p><p style="text-align:center;">select * from bookborrow where ReaderId = 'R0001';</p><p style="text-align:center;">select * from bookback where ReaderId = 'R0001';</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建触发器，修改读者信息表中的读者姓名时同时修改图书借阅表和图书归还表中的读者姓名</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">delete_trig</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create trigger delete_trig after delete</p><p style="text-align:center;">on readerinfo for each row</p><p style="text-align:center;">begin</p><p style="text-align:center;">delete from bookborrow where ReaderId=old.ReaderId;</p><p style="text-align:center;">delete from bookback where ReaderId=old.ReaderId;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">delete from readerinfo where ReaderId='R0002';</p><p style="text-align:center;">select * from bookborrow where ReaderId = 'R0002';</p><p style="text-align:center;">select * from bookback where ReaderId = 'R0002';</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建触发器，删除读者信息表中的读者信息时同时把借阅信息与归还信息全部删除</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">insert_trig</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create trigger insert_trig before insert</p><p style="text-align:center;">on bookinfo for each row</p><p style="text-align:center;">begin</p><p style="text-align:center;">if new.Price &lt; 20 then signal sqlstate 'HY000' set message_text = '价格不能低于20！';</p><p style="text-align:center;">end if ;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">insert into bookinfo values ('001', '软件工程', '张某某', '000003', 19.8, '清华大学出版社');</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建触发器，限制插入数据，当图书价格低于20时插入失败并给出提示</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">drop_trig</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create trigger drop_trig after delete</p><p style="text-align:center;">on bookback for each row</p><p style="text-align:center;">begin</p><p style="text-align:center;">if old.ReaderId = 'R0001' then signal sqlstate 'HY000' set message_text = '删除失败，你不是管理员！';</p><p style="text-align:center;">end if ;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">delete from bookback where ReaderId = 'R0001';</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建触发器，删除图书归还表中的数据时提示“非管理员，删除失败”</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.9 事件</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">事件名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义事件语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">update_event</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">set @@global.event_scheduler = true;</p><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create event update_event on schedule every 2 year starts now() </p><p style="text-align:center;">do begin </p><p style="text-align:center;">update bookborrow set IfBack = "黑名单"</p><p style="text-align:center;">where datediff(curdate(),BorrowTime) &gt; datediff(BackTime,BorrowTime)</p><p style="text-align:center;">and IfBack = "否";</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select * from bookborrow;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建事件，现在开始并每两年执行一次，把逾期未归还的读者的IfBack改为黑名单</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">clean_event</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">set @@global.event_scheduler = true;</p><p style="text-align:center;">create event clean_event on schedule </p><p style="text-align:center;">every 15 second ends '2022-12-13 16:10:00'</p><p style="text-align:center;">do truncate readerinfo;</p><p style="text-align:center;">select * from readerinfo;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建事件，清空readerinfo表，现在开始并每15S执行一次，在规定时间终止</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">blacklist_event</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">set @@global.event_scheduler = true;</p><p style="text-align:center;">create table blacklist like bookborrow;</p><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create event blacklist_event on schedule every 1 year starts now()</p><p style="text-align:center;">do begin</p><p style="text-align:center;">insert into blacklist select * from bookborrow </p><p style="text-align:center;">where datediff(curdate(),BorrowTime) &gt; datediff(BackTime,BorrowTime)</p><p style="text-align:center;">and IfBack = "否";</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select * from blacklist;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建事件，现在开始并每一年执行一次，把逾期未归还的读者信息插入blacklist表中</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">delback_event</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">set @@global.event_scheduler = true;</p><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create event delback_event on schedule every 1 year starts now() </p><p style="text-align:center;">do begin </p><p style="text-align:center;">delete from bookback </p><p style="text-align:center;">where ReaderId in (select ReaderId from bookborrow where IfBack = "黑名单");</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select * from bookback;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建事件，现在开始并每一年执行一次，把变为黑名单的图书归还表信息删掉</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">book_total</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">set @@global.event_scheduler = true;</p><p style="text-align:center;">create table book_total(counts int not null primary key);</p><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create event counts_event on schedule every 1 year starts now()</p><p style="text-align:center;">do begin </p><p style="text-align:center;">insert into book_total select sum(Quantity) from booktype;</p><p style="text-align:center;">end//</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">select * from book_total;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建事件，现在开始并每一年执行一次，合计图书总数量</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.10 事务（在存储过程中使用事务）</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">存储过程名</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">定义及调用存储过程语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">delete_aff</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure delete_aff(in Rid char(10))</p><p style="text-align:center;">begin </p><p style="text-align:center;">declare exit handler for sqlexception rollback;</p><p style="text-align:center;">start transaction;</p><p style="text-align:center;">delete from bookborrow where bookborrow.ReaderId = Rid;</p><p style="text-align:center;">delete from bookback where bookback.ReaderId = Rid;</p><p style="text-align:center;">commit;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call delete_aff('R0002');</p><p style="text-align:center;">select * from bookborrow where ReaderId='R0002';</p><p style="text-align:center;">select * from bookback where ReaderId='R0002';</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，在其中使用事务，当删除借阅表中的信息同时删除归还表的对应信息</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">insert_aff</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure insert_aff(in Bid char(10),in Bne varchar(60),in Qty char(20),in Tp varchar(30),in Sf varchar(20))</p><p style="text-align:center;">begin </p><p style="text-align:center;">declare exit handler for sqlexception rollback;</p><p style="text-align:center;">start transaction;</p><p style="text-align:center;">insert into booktype values(Bid,Bne,Qty,Tp,Sf);</p><p style="text-align:center;">commit;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call insert_aff('000003',"C语言程序设计",97,"编程书籍","3号书架");</p><p style="text-align:center;">select * from booktype where BookId=000003;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，在其中使用事务，向图书类型表中插入数据</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">update_aff</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">delimiter //</p><p style="text-align:center;">create procedure update_aff(in Rne varchar(10),in Rid char(10))</p><p style="text-align:center;">begin </p><p style="text-align:center;">declare exit handler for sqlexception rollback;</p><p style="text-align:center;">start transaction;</p><p style="text-align:center;">update readerinfo set ReaderName = Rne where ReaderId = Rid;</p><p style="text-align:center;">update bookborrow set ReaderName = Rne where ReaderId = Rid;</p><p style="text-align:center;">update bookback set ReaderName = Rne where ReaderId = Rid;</p><p style="text-align:center;">commit;</p><p style="text-align:center;">end //</p><p style="text-align:center;">delimiter ;</p><p style="text-align:center;">call update_aff("燕歌行",'R0002');</p><p style="text-align:center;">select * from readerinfo where ReaderId='R0002';</p><p style="text-align:center;">select * from bookborrow where ReaderId='R0002';</p><p style="text-align:center;">select * from bookback where ReaderId='R0002';</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建存储过程，在其中使用事务，当修改读者信息表中的读者姓名同时修改借阅表和归还表中的读者姓名</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.11 数据库用户及权限分配</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">用户名</p></td><td class="kdocs-tableCell" style="width:200px;vertical-align:top;height:51px;"><p style="text-align:center;">定义用户语句</p></td><td class="kdocs-tableCell" style="width:183px;vertical-align:top;height:51px;"><p style="text-align:center;">权限分配与回收语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">admin01</p></td><td class="kdocs-tableCell" style="width:200px;vertical-align:top;height:51px;"><p style="text-align:center;">create user 'admin01'@'localhost' identified by '123456';</p></td><td class="kdocs-tableCell" style="width:183px;vertical-align:top;height:51px;"><p style="text-align:center;">grant select on readerinfo to 'admin01'@'localhost';</p><p style="text-align:center;">grant update on bookinfo to 'admin01'@'localhost';</p><p style="text-align:center;">revoke update on bookinfo from 'admin01'@'localhost';</p><p style="text-align:center;">show grants for admin01@localhost;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建用户，授予用户对读者信息表select权限，对图书信息表update权限。回收图书信息表update权限</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:87px;vertical-align:top;height:51px;"><p style="text-align:center;">admin02</p></td><td class="kdocs-tableCell" style="width:200px;vertical-align:top;height:51px;"><p style="text-align:center;">create user 'admin02'@'localhost' identified by '123456';</p></td><td class="kdocs-tableCell" style="width:183px;vertical-align:top;height:51px;"><p style="text-align:center;">grant all on manager to 'admin02'@'localhost' identified by '123456' with grant option;</p><p style="text-align:center;">revoke update,delete on manager from 'admin02'@'localhost';</p><p style="text-align:center;">show grants for admin02@localhost;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建用户，授予用户对管理员信息表的所有权限，并允许授予其他用户。回收修改和删除权限</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:13pt;"><span class="kdocs-bold" style="font-weight:bold;">3.12 备份与恢复</span></span></p> 
 <div style="max-width:100%;overflow-x:auto;"> 
  <table class="kdocs-table" border="1" style="table-layout:fixed;width:28px;"><tbody><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">操作类型</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">对应操作的SQL语句</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">说明</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">备份</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">mysqldump -u root -p library_lwl &gt;D:\library_lwl_backup.sql</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">使用mysqldump命令备份library_lwl数据库中的所有表到D盘</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">恢复</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">drop table bookback;</p><p style="text-align:center;">mysql -u root -p library_lwl &lt;D:\library_lwl_backup.sql</p><p style="text-align:center;">source D:\library_lwl_backup.sql</p><p style="text-align:center;">select * from bookback;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">使用mysql或source命令将备份文件恢复到数据库</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">导出</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">select * from readerinfo into outfile 'D:/readerinfo.txt'</p><p style="text-align:center;">fields terminated by ' '</p><p style="text-align:center;">optionally enclosed by '"'</p><p style="text-align:center;">lines terminated by ';';</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">导出读者信息表的数据到D盘，字符用双引号标注，字段值间用空格隔开，每行以分号结束</p></td></tr><tr class="kdocs-tableRow"><td class="kdocs-tableCell" style="width:111px;vertical-align:top;height:51px;"><p style="text-align:center;">导入</p></td><td class="kdocs-tableCell" style="width:359px;vertical-align:top;height:51px;"><p style="text-align:center;">create table bk_readerinfo like readerinfo;</p><p style="text-align:center;">select * from bk_readerinfo;</p><p style="text-align:center;">load data infile 'D:/readerinfo.txt' into table bk_readerinfo</p><p style="text-align:center;">fields terminated by ' '</p><p style="text-align:center;">optionally enclosed by '"'</p><p style="text-align:center;">lines terminated by ';';</p><p style="text-align:center;">select * from bk_readerinfo;</p></td><td class="kdocs-tableCell" style="width:98px;vertical-align:top;height:51px;"><p style="text-align:center;">创建bk_readerinfo表，将导出的数据导入到该表中</p></td></tr></tbody></table> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:15pt;"><span class="kdocs-bold" style="font-weight:bold;">4 项目总结及心得</span></span></p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">项目刚开始是非常难的，虽然内容都是之前讲过的，但是如果只局限于学过的内容是提高不了自己的能力的，所以每道题我都会思考很多新的思路，通过询问老师，与同学交流，我真的学到了课堂上没有的内容。</p> 
 <p style="text-indent:1.4em;padding-left:1.4em;text-align:null;">虽然期间遇到了许许多多的问题与错误，但只要相信自己，一直坚持做下去，就一定可以学会学好。通过这次项目的学习，真真正正的让我学到了好多书上没有的内容，老师的耐心解答和同学们的互帮互助使我受益匪浅，而这次项目也会成为我积累的经验，使得我以后的工作可以顺利进行，并进一步提高自己的学习能力和思考能力。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/774517220f1a0586657e27cdc4230cdb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">挥别2022，坦迎2023。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1633e556561a3f25cbd8e0877c217e1f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">归一化 （Normalization）、标准化 （Standardization）和中心/零均值化 （Zero-centered）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>