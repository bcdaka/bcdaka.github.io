<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>npm安装心得（依赖库Python及node-sass依赖环境） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6b79398b420e7497556fc830879aac16/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="npm安装心得（依赖库Python及node-sass依赖环境）">
  <meta property="og:description" content="在使用vue的开发环境过程中，总会遇到这样哪样的安装或者打包错误，
vue运行或打包常见错误如下：
1. npm install时 node-sass npm ERR command failed （可能是node.js的版本和node-sass的版本不符，就是卸掉原来的node.js，下载一个符合node-sass版本的node.js）
2. npm run build无法打包的可能原因 npm ERR! missing script: build （package.json中scripts参数为&#34;build:prod&#34;: &#34;vue-cli-service build&#34;，所以换命令打包：npm rum build:prod）
3. npm WARN npm Supported releases of Node.js are the latest release of 6, 8, 9, 10, 11. (据自己的node版本来更新npm 版本npm -g install npm@6.14.8 ,如果仍然报错，依旧显示npm 不支持这个版本 ，这说明npm存在旧的npm缓存，还是旧的npm 环境
此时需要到C:\Users\administrator\AppData\Roaming 根目录下删除npm和npm-cache两个文件夹)
4. npm install时 node-sass npm ERR command failed问题解决 （卸载当前版本的node-sass和sass-loader,因为版本和当前的不兼容,安装对应版本的包即可。）
5. Syntax Error: Error: PostCSS received undefined instead of CSS string （卸载当前版本的node-sass和sass-loader,因为版本和当前的不兼容,安装对应版本的包即可。）">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-20T10:00:01+08:00">
    <meta property="article:modified_time" content="2023-12-20T10:00:01+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">npm安装心得（依赖库Python及node-sass依赖环境）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在使用vue的开发环境过程中，总会遇到这样哪样的安装或者打包错误，</p> 
<p>vue运行或打包常见错误如下：<br> 1. npm install时 <em>node-sass npm ERR command failed</em> （可能是node.js的版本和node-sass的版本不符，就是卸掉原来的node.js，下载一个符合node-sass版本的node.js）<br> 2. npm run build无法打包的可能原因 <em>npm ERR! missing script: build</em>  （package.json中scripts参数为"build:prod": "vue-cli-service build"，所以换命令打包：npm rum build:prod）<br> 3. <em>npm WARN npm Supported releases of Node.js are the latest release of 6, 8, 9, 10, 11</em>.  (据自己的node版本来更新npm 版本npm -g install npm@6.14.8 ,如果仍然报错，依旧显示npm 不支持这个版本 ，这说明npm存在旧的npm缓存，还是旧的npm 环境<br> 此时需要到C:\Users\administrator\AppData\Roaming 根目录下删除npm和npm-cache两个文件夹)</p> 
<p>4. npm install时 <em>node-sass npm ERR command failed</em>问题解决 （卸载当前版本的node-sass和sass-loader,因为版本和当前的不兼容,安装对应版本的包即可。）<br> 5. <em>Syntax Error: Error: PostCSS received undefined instead of CSS string</em> （卸载当前版本的node-sass和sass-loader,因为版本和当前的不兼容,安装对应版本的包即可。）<br> 6. <em>npm ERR! gyp ERR! find Python Python is not set from command line or npm con</em> <br> 7. <em>npm ERR! gyp verb check python checking for Python executable "python2" in the PATH</em>  （通过npm指令安装对应版本的python（建议方式）： npm install --global --production windows-build-tools）<br> 8. npm install时报错 <em>gyp ERR! stack Error: Can't find Python executable "2.7"</em>  （通过npm指令安装对应版本的python（建议方式）： npm install --global --production windows-build-tools）<br> 9.使用npm下载直接卡死，超简单解决办法(放大缩小cmd命令窗口或者ctrl+c可中断错误，继续重试脚本)</p> 
<p><br> 在install这些框架时，往往还需要安装其要求的依赖，或是相关的编译环境，下面将记录描述下python和node-sass的安装办法：</p> 
<p><strong>(一) python安装：</strong><br> 1.官网下载安装包，传统安装，然后配置相关环境变量</p> 
<p>2.在安装了node但是为安装python的前提下，通过npm指令安装对应版本的python（建议方式）：</p> 
<p>    <strong>npm install --global --production windows-build-tools   (会自动安装对应python)</strong></p> 
<p><br> 对于非python玩家，建议方式二安装python环境，该方式，node会为你匹配对应node版本的python，这样将避免后续使用中的版本过高或过低造成的编译失败问题，比如node16+在python2.x下编译会抛出version问题。</p> 
<p><strong>(二) node-sass安装</strong><br> node-sass的安装有很多方式，在此我仅介绍一种（多次尝试，这种方式最方便稳定<strong>，适合node8.x以上版本</strong>，现在大多数是node-v14以上的版本了，直接执行以下安装命令吧）</p> 
<blockquote> 
 <p>npm install --save node-sass --registry=https://registry.npm.taobao.org --disturl=https://npm.taobao.org/dist --sass-binary-site=<strong>https://npm.taobao.org/mirrors/node-sass/</strong> </p> 
</blockquote> 
<p> <em>–registry=https://registry.npm.taobao.org 淘宝npm包镜像<br> –disturl=https://npm.taobao.org/dist   淘宝node源码镜像，一些二进制包编译时用<br> –sass-binary-site=<strong>http://npm.taobao.org/mirrors/node-sass</strong>  这个才是node-sass镜像</em><br>  </p> 
<p>另外一种<strong>设置全局镜像源命令适合node 8.x 以下版本</strong>：<br><em>npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/<br> npm config set registry=https://registry.npm.taobao.org  </em><br>  </p> 
<p>如果嫌国外npm不好用，可以尝试安装cnpm,完全等同于npm, <br> 1.先全局安装cnpm<br>    <em> npm install -g cnpm --registry=https://registry.npm.taobao.org</em><br> 2.利用淘宝的npm镜像安装node-sass<br>    <strong><em>cnpm install node-sass</em></strong><br><br> CNPM 是中国 npm 镜像的客户端，支持所有 npm命令。</p> 
<p></p> 
<p><strong>安装nodejs环境（自带安装npm）：</strong><br> ---------------------------------------------------------------------<br> 在NodeJS官网（https://nodejs.org/）下载安装合适的版本</p> 
<p><em>https://nodejs.org/dist/v14.17.1/  node-v14.17.1 对应npm版本 6.14.13(依赖python2.7x) </em></p> 
<p><em>https://nodejs.org/dist/v16.9.1/   node-v16.9.1 对应npm版本 8.19.2(依赖python3.8x)</em></p> 
<p><em>https://nodejs.org/dist/v18.17.1/  （太新了，不推荐） </em></p> 
<p>npm常见命令：<br> ---------------------------------------------------------------------<br><em>npm insall  （安装失败的话，删除目录下的node_modules文件夹）</em></p> 
<p><em>npm run dev  </em></p> 
<p><em>npm rum serve</em></p> 
<p><em>npm uninstall -g @vue/cli  安装打包命令cli</em></p> 
<p><em>npm install -g @vue/cli</em></p> 
<p><em>npm list webpack  查看包 </em></p> 
<p><br><em>npm cache clean --force  清理缓存 </em></p> 
<p><em>npm start</em></p> 
<p><em>npm run dev：只是用来调试的，开发就够了；</em></p> 
<p>补充说明：<br> 有一个相似的命令就是下面这个，也是用来搭建环境的，但有一点小区别，具体情况具体额分析。<br> npm run build：你想用提交小程序版本的时候，运行，然后代码都会被压缩，提交的时候就更小了。<br>  </p> 
<p>gyp ERR stack Error: Can ‘t find Python executable python2.7, you can set the PYTHON env variable.</p> 
<p><br> 在公司部署前端项目的时候,npm install 安装依赖的时候出现了问题，发现是node-sass这个包下载失败</p> 
<p>在这里插入图片描述在这里插入图片描述</p> 
<p>我在想是不是没安装什么呢，因为我是面向百度编程的，所以就百度了一下，发现需要安装编译环境</p> 
<p>npm install -g node-gyp <br> npm install --global --production windows-build-tools     (这条命令需管理员运行)</p> 
<p><br> 然后卸载安装失败的包</p> 
<p>npm uninstall node-sass</p> 
<p>然后重新安装</p> 
<p>npm install node-sass</p> 
<p>最后npm install , npm run dev 直接运行就好了。</p> 
<p></p> 
<p></p> 
<p> If you have multiple Python versions installed, you can identify which Python version node-gyp uses by setting the '--python' variable:</p> 
<p><strong>node-gyp --python /path/to/python2.7</strong><br> If node-gyp is called by way of npm and you have multiple versions of Python installed, then you can set npm's 'python' config key to the appropriate value:</p> 
<p><strong>npm config set python /path/to/executable/python2.7</strong><br> Note that OS X is just a flavour of Unix and so needs python, make, and C/C++. An easy way to obtain these is to install XCode from Apple, and then use it to install the command line tools (under Preferences -&gt; Downloads). </p> 
<p>1、下载安装Python2.7，设置环境变量，以下命令可指定npm用哪个版本的python : <br><strong>npm config set python "D:\python27"</strong></p> 
<p></p> 
<p><strong>d:\&gt;npm config get  （查看当前npm的安装环境）</strong><br> ; cli configs<br> metrics-registry = "https://registry.npm.taobao.org/"<br> scope = ""<br> user-agent = "npm/6.14.13 node/v14.17.1 win32 x64"</p> 
<p>; userconfig C:\Users\Administrator\.npmrc<br> python = "D:\\Python27\\python.exe"<br> registry = "https://registry.npm.taobao.org/"</p> 
<p>; builtin config undefined<br> prefix = "C:\\Users\\Administrator\\AppData\\Roaming\\npm"</p> 
<p>; node bin location = D:\nodejs\node.exe<br> ; cwd = d:\BaiduYunDownload\vue_backup\vue_backup\vue_agent<br> ; HOME = C:\Users\Administrator<br> ; "npm config ls -l" to show all defaults.<br><br> npm跟node.js 版本对照表 ：</p> 
<p><img alt="" src="https://images2.imgbox.com/38/ad/nYiiPZlU_o.png"><br><br>  </p> 
<h4 id="4%3A%E8%A1%A5%E5%85%A8%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%2C%E6%96%B0%E5%BB%BA%20node_cache%20%2C%20node_global%20%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%9C%A8%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95%E4%B8%8B">补全安装文件,新建 node_cache , node_global 两个文件在安装目录下</h4> 
<h4 id="%E5%85%88%E5%A6%82%E4%B8%8B%E5%9B%BE%E5%BB%BA%E7%AB%8B2%E4%B8%AA%E7%9B%AE%E5%BD%95%EF%BC%9A"><a name="t6"></a>先如下图建立2个目录：</h4> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/de/36/POn7haoY_o.png"><br>  </p> 
<p><br> 运行以下2条命令,<strong>修改目录</strong><br>  <br> npm config set prefix "D:\nodejs\node_global"  </p> 
<p> npm config set cache  "D:\nodejs\node_cache"</p> 
<p> npm list -global         //查看目录是否已修改<br>  </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/33/93/U1gbkeAp_o.png"><br><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/af2b1369c5dbd1251186a276225b93af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java中java.lang.ClassCastException异常原因及解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/92e3011ecaf8f637d43e227674cc74f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python中计算圆周率的n种方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>