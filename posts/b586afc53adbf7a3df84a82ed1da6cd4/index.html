<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python获取去哪儿旅游数据并作可视化攻略 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b586afc53adbf7a3df84a82ed1da6cd4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python获取去哪儿旅游数据并作可视化攻略">
  <meta property="og:description" content="嗨喽，大家好呀~这里是爱看美女的茜茜呐 开发环境： 版 本： python 3.8
编辑器：pycharm
第三方库： requests &gt;&gt;&gt; pip install requests
parsel &gt;&gt;&gt; pip install parsel
模块安装:
按住键盘 win &#43; r, 输入cmd回车 打开命令行窗口, 在里面输入 pip install 模块名
👇 👇 👇 更多精彩机密、教程，尽在下方，赶紧点击了解吧~ python源码、视频教程、插件安装教程、资料我都准备好了，直接在文末名片自取就可
需求分析 确定需要的数据
找数据真实来源
https://travel.qunar.com/travelbook/list.htm?order=hot_heat
静态数据
代码实现步骤 发送请求
获取数据
提取数据
保存数据
数据获取 导入模块
import requests # 发送请求 代码当中用来访问网站的模块 import parsel # 解析数据的模块 import csv with open(&#39;攻略.csv&#39;, mode=&#39;a&#39;, encoding=&#39;utf-8&#39;, newline=&#39;&#39;) as f: csv_writer = csv.writer(f) csv_writer.writerow([&#39;title&#39;, &#39;date&#39;, &#39;days&#39;, &#39;photo_nums&#39;, &#39;fee&#39;, &#39;people&#39;, &#39;trip&#39;, &#39;view&#39;, &#39;love&#39;, &#39;comment&#39;, &#39;href&#39;]) for page in range(1, 201): url = f&#39;https://travel.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-16T15:02:54+08:00">
    <meta property="article:modified_time" content="2023-12-16T15:02:54+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python获取去哪儿旅游数据并作可视化攻略</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>嗨喽，大家好呀~这里是爱看美女的茜茜呐</h4> 
<p><img src="https://images2.imgbox.com/61/39/4Vk7veac_o.png" alt="" width="400"></p> 
<h4><a id="_4"></a>开发环境：</h4> 
<ul><li> <p>版 本： python 3.8</p> </li><li> <p>编辑器：pycharm</p> </li></ul> 
<h4><a id="_10"></a>第三方库：</h4> 
<ul><li> <p>requests &gt;&gt;&gt; pip install requests</p> </li><li> <p>parsel &gt;&gt;&gt; pip install parsel</p> </li></ul> 
<p><strong>模块安装:</strong></p> 
<p>按住键盘 win + r, 输入cmd回车 打开命令行窗口, 在里面输入 pip install 模块名</p> 
<hr> 
<h5><a id="____23"></a>👇 👇 👇 更多精彩机密、教程，尽在下方，赶紧点击了解吧~</h5> 
<p><strong><a href="#article_bottom" rel="nofollow">python源码、视频教程、插件安装教程、资料我都准备好了，直接在文末名片自取就可</a></strong></p> 
<hr> 
<h4><a id="_31"></a>需求分析</h4> 
<p>确定需要的数据</p> 
<p>找数据真实来源</p> 
<p>https://travel.qunar.com/travelbook/list.htm?order=hot_heat</p> 
<p>静态数据</p> 
<h4><a id="_41"></a>代码实现步骤</h4> 
<ol><li> <p>发送请求</p> </li><li> <p>获取数据</p> </li><li> <p>提取数据</p> </li><li> <p>保存数据</p> </li></ol> 
<h4><a id="_51"></a>数据获取</h4> 
<p>导入模块</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests     <span class="token comment"># 发送请求 代码当中用来访问网站的模块</span>
<span class="token keyword">import</span> parsel       <span class="token comment"># 解析数据的模块</span>
<span class="token keyword">import</span> csv
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'攻略.csv'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'date'</span><span class="token punctuation">,</span> <span class="token string">'days'</span><span class="token punctuation">,</span> <span class="token string">'photo_nums'</span><span class="token punctuation">,</span> <span class="token string">'fee'</span><span class="token punctuation">,</span> <span class="token string">'people'</span><span class="token punctuation">,</span> <span class="token string">'trip'</span><span class="token punctuation">,</span> <span class="token string">'view'</span><span class="token punctuation">,</span> <span class="token string">'love'</span><span class="token punctuation">,</span> <span class="token string">'comment'</span><span class="token punctuation">,</span> <span class="token string">'href'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> page <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://travel.qunar.com/travelbook/list.htm?page=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>page<span class="token punctuation">}</span></span><span class="token string">&amp;order=hot_heat'</span></span>
</code></pre> 
<ol><li>发送请求</li></ol> 
<pre><code class="prism language-python">    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">)</span>
</code></pre> 
<ol start="2"><li>获取数据</li></ol> 
<pre><code class="prism language-python">    html_data <span class="token operator">=</span> response<span class="token punctuation">.</span>text
</code></pre> 
<ol start="3"><li>提取数据</li></ol> 
<pre><code class="prism language-python">    <span class="token comment"># re / css / xpath</span>
    <span class="token comment"># css: ul.b_strategy_list &gt; li</span>
    <span class="token comment"># xpath: //ul[@class="b_strategy_list "]/li</span>
    select <span class="token operator">=</span> parsel<span class="token punctuation">.</span>Selector<span class="token punctuation">(</span>html_data<span class="token punctuation">)</span>
    lis <span class="token operator">=</span> select<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//ul[@class="b_strategy_list "]/li'</span><span class="token punctuation">)</span>
    <span class="token comment"># 二次的数据提取</span>
    <span class="token keyword">for</span> li <span class="token keyword">in</span> lis<span class="token punctuation">:</span>
        <span class="token comment"># li.css('h2 &gt; a::text').get()</span>
        title <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h2/a/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        date <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="date"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        days <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="days"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        photo_nums <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="photo_nums"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        fee <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="fee"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        people <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="people"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        trip <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="trip"]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        view <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="icon_view"]/span/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        love <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="icon_love"]/span/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        comment <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p[@class="user_info"]//span[@class="icon_comment"]/span/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        href <span class="token operator">=</span> li<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h2/a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> date<span class="token punctuation">,</span> days<span class="token punctuation">,</span> photo_nums<span class="token punctuation">,</span> fee<span class="token punctuation">,</span> people<span class="token punctuation">,</span> trip<span class="token punctuation">,</span> view<span class="token punctuation">,</span> love<span class="token punctuation">,</span> comment<span class="token punctuation">,</span> href<span class="token punctuation">)</span>
</code></pre> 
<ol start="4"><li>保存数据</li></ol> 
<pre><code class="prism language-python">        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'攻略.csv'</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
            csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span>title<span class="token punctuation">,</span> date<span class="token punctuation">,</span> days<span class="token punctuation">,</span> photo_nums<span class="token punctuation">,</span> fee<span class="token punctuation">,</span> people<span class="token punctuation">,</span> trip<span class="token punctuation">,</span> view<span class="token punctuation">,</span> love<span class="token punctuation">,</span> comment<span class="token punctuation">,</span> href<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_104"></a>数据可视化</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>utils <span class="token keyword">import</span> JsCode
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> pyecharts <span class="token keyword">import</span> options <span class="token keyword">as</span> opts
</code></pre> 
<pre><code class="prism language-python">data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'去哪儿_数分.csv'</span><span class="token punctuation">)</span>
data
</code></pre> 
<p><img src="https://images2.imgbox.com/61/19/TNym8K5H_o.png" alt=""></p> 
<pre><code class="prism language-python">data<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token operator">~</span>data<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'攻略'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token operator">~</span>data<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'99+'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
data
</code></pre> 
<pre><code class="prism language-python">data<span class="token punctuation">.</span>drop_duplicates<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data<span class="token punctuation">[</span><span class="token string">'人均费用'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
data<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token string">'独自一人'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
data<span class="token punctuation">[</span><span class="token string">'玩法'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token string">'没有'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data <span class="token operator">=</span> data<span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token string">'人均费用'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token operator">&gt;</span><span class="token number">200</span><span class="token punctuation">]</span>
data <span class="token operator">=</span> data<span class="token punctuation">[</span>data<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span><span class="token number">15</span><span class="token punctuation">]</span>
data
</code></pre> 
<pre><code class="prism language-python">data <span class="token operator">=</span> data<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
data
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">Month</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">:</span>
    m <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'01'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'一月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'02'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'二月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'03'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'三月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'04'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'四月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'05'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'五月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'06'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'六月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'07'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'七月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'08'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'八月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'09'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'九月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'10'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'十月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'11'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'十一月'</span>
    <span class="token keyword">if</span> m<span class="token operator">==</span><span class="token string">'12'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'十二月'</span>
</code></pre> 
<pre><code class="prism language-python">data<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'出发时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>Month<span class="token punctuation">)</span>
data<span class="token punctuation">[</span><span class="token string">'出发时间'</span><span class="token punctuation">]</span><span class="token operator">=</span>pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'出发时间'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
data
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">Look</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token string">'万'</span> <span class="token keyword">in</span> e<span class="token punctuation">:</span>
        num1 <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'(.*?)万'</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">float</span><span class="token punctuation">(</span>num1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10000</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">float</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data<span class="token punctuation">[</span><span class="token string">'浏览次数'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'浏览量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>Look<span class="token punctuation">)</span>
data<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'浏览量'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
data<span class="token punctuation">[</span><span class="token string">'浏览次数'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'浏览次数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
data<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data1 <span class="token operator">=</span> data
data1<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/e5/hG3ZnQNe_o.png" alt=""></p> 
<pre><code class="prism language-python">loc <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>loc<span class="token punctuation">)</span>
loc_data <span class="token operator">=</span> data1<span class="token punctuation">[</span>data1<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>loc<span class="token punctuation">)</span><span class="token punctuation">]</span>
price_mean <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>loc_data<span class="token punctuation">[</span><span class="token string">'人均费用'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>loc_data<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>price_mean<span class="token punctuation">)</span>
price_mean2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1630.1</span><span class="token punctuation">,</span><span class="token number">1862.9</span><span class="token punctuation">,</span><span class="token number">1697.9</span><span class="token punctuation">,</span><span class="token number">1743.4</span><span class="token punctuation">,</span><span class="token number">1482.4</span><span class="token punctuation">,</span><span class="token number">1586.4</span><span class="token punctuation">,</span><span class="token number">1897.0</span><span class="token punctuation">,</span><span class="token number">1267.5</span><span class="token punctuation">,</span><span class="token number">1973.8</span><span class="token punctuation">,</span><span class="token number">1723.7</span><span class="token punctuation">]</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/92/96/PRsCiSwp_o.png" alt=""></p> 
<h5><a id="Top10_225"></a>旅游胜地Top10及对应费用</h5> 
<pre><code class="prism language-python">m2 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
n2 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'地点'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">bar<span class="token operator">=</span><span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>height<span class="token operator">=</span><span class="token string">'500px'</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token string">'1000px'</span><span class="token punctuation">,</span>theme<span class="token operator">=</span><span class="token string">'dark'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>m2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span>
        <span class="token string">'目的地Top10'</span><span class="token punctuation">,</span>
        n2<span class="token punctuation">,</span>
        label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>position<span class="token operator">=</span><span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        itemstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">(</span>
            color<span class="token operator">=</span>JsCode<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""new echarts.graphic.LinearGradient(
            0, 0, 0, 1,[{offset: 0,color: 'rgb(255,99,71)'}, {offset: 1,color: 'rgb(32,178,170)'}])
            """</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>
            title<span class="token operator">=</span><span class="token string">'目的地Top10'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'景点名称'</span><span class="token punctuation">,</span>
            type_<span class="token operator">=</span><span class="token string">'category'</span><span class="token punctuation">,</span>                                           
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>rotate<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string">'数量'</span><span class="token punctuation">,</span>
            min_<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
            max_<span class="token operator">=</span><span class="token number">120.0</span><span class="token punctuation">,</span>
            splitline_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>SplitLineOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>linestyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LineStyleOpts<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'dash'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        tooltip_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TooltipOpts<span class="token punctuation">(</span>trigger<span class="token operator">=</span><span class="token string">'axis'</span><span class="token punctuation">,</span>axis_pointer_type<span class="token operator">=</span><span class="token string">'cross'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>
        markline_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>MarkLineOpts<span class="token punctuation">(</span>
            data<span class="token operator">=</span><span class="token punctuation">[</span>
                opts<span class="token punctuation">.</span>MarkLineItem<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'average'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'均值'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                opts<span class="token punctuation">.</span>MarkLineItem<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'max'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'最大值'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                opts<span class="token punctuation">.</span>MarkLineItem<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'min'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'最小值'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'1.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/9d/08yP9BMK_o.png" alt=""></p> 
<pre><code class="prism language-python">bar<span class="token operator">=</span><span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>height<span class="token operator">=</span><span class="token string">'500px'</span><span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token string">'1000px'</span><span class="token punctuation">,</span>theme<span class="token operator">=</span><span class="token string">'dark'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>loc<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span>
        <span class="token string">'人均费用'</span><span class="token punctuation">,</span>
        price_mean2<span class="token punctuation">,</span>
        label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>position<span class="token operator">=</span><span class="token string">'top'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        itemstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">(</span>
            color<span class="token operator">=</span>JsCode<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""new echarts.graphic.LinearGradient(
            0, 0, 0, 1,[{offset: 0,color: 'rgb(255,99,71)'}, {offset: 1,color: 'rgb(32,178,170)'}])
            """</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>
            title<span class="token operator">=</span><span class="token string">'各景点人均费用'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'景点名称'</span><span class="token punctuation">,</span>
            type_<span class="token operator">=</span><span class="token string">'category'</span><span class="token punctuation">,</span>                                           
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>rotate<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            name<span class="token operator">=</span><span class="token string">'数量'</span><span class="token punctuation">,</span>
            min_<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
            max_<span class="token operator">=</span><span class="token number">2000.0</span><span class="token punctuation">,</span>
            splitline_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>SplitLineOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>linestyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LineStyleOpts<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'dash'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        tooltip_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TooltipOpts<span class="token punctuation">(</span>trigger<span class="token operator">=</span><span class="token string">'axis'</span><span class="token punctuation">,</span>axis_pointer_type<span class="token operator">=</span><span class="token string">'cross'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>
        markline_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>MarkLineOpts<span class="token punctuation">(</span>
            data<span class="token operator">=</span><span class="token punctuation">[</span>
                opts<span class="token punctuation">.</span>MarkLineItem<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'average'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'均值'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                opts<span class="token punctuation">.</span>MarkLineItem<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'max'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'最大值'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                opts<span class="token punctuation">.</span>MarkLineItem<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'min'</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">'最小值'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'2.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/01/51/DGjXJ4Lk_o.png" alt=""></p> 
<pre><code class="prism language-python">data1<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data1<span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span><span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'天'</span><span class="token punctuation">)</span>
data1
</code></pre> 
<pre><code class="prism language-python">data1<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">m <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'浏览次数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data1 <span class="token operator">=</span> data1<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>m<span class="token punctuation">]</span>
data1 <span class="token operator">=</span> data1<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>drop <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
data1
</code></pre> 
<pre><code class="prism language-python">data1<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">word_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> data1<span class="token punctuation">[</span><span class="token string">'玩法'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    s <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\xa0'</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span>
    word_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>s<span class="token punctuation">)</span>  
<span class="token builtin">dict</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>word_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> word_list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> i <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token builtin">dict</span><span class="token punctuation">:</span>
            <span class="token builtin">dict</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">dict</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+=</span><span class="token number">1</span>
<span class="token comment">#print(dict)</span>
<span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token builtin">dict</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">list</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">list</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token builtin">list</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token builtin">list</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data1<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">m1 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
n1 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_383"></a>出游方式分析</h5> 
<pre><code class="prism language-python">pie <span class="token operator">=</span> <span class="token punctuation">(</span>Pie<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span><span class="token string">'dark'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token string">'1000px'</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">'800px'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>z <span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>m1<span class="token punctuation">,</span>n1<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            radius<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"40%"</span><span class="token punctuation">,</span> <span class="token string">"65%"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"去哪儿\n\n出游结伴方式"</span><span class="token punctuation">,</span> pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>
                                               title_textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>
                                                   color<span class="token operator">=</span><span class="token string">'#FF6A6A'</span><span class="token punctuation">,</span> font_size<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> font_weight<span class="token operator">=</span><span class="token string">'bold'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                               <span class="token punctuation">)</span><span class="token punctuation">,</span>
                        visualmap_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>VisualMapOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> 
                                          min_<span class="token operator">=</span><span class="token number">38</span><span class="token punctuation">,</span>
                                          max_<span class="token operator">=</span><span class="token number">641</span><span class="token punctuation">,</span>
                                          is_piecewise<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                                          dimension<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>
                                          range_color<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'#9400D3'</span><span class="token punctuation">,</span> <span class="token string">'#008afb'</span><span class="token punctuation">,</span> <span class="token string">'#ffec4a'</span><span class="token punctuation">,</span> <span class="token string">'#FFA500'</span><span class="token punctuation">,</span><span class="token string">'#ce5777'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">'5%'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span>
       <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>formatter<span class="token operator">=</span><span class="token string">"{b}: {c}"</span><span class="token punctuation">,</span> font_size<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        tooltip_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TooltipOpts<span class="token punctuation">(</span>trigger<span class="token operator">=</span><span class="token string">"item"</span><span class="token punctuation">,</span> formatter<span class="token operator">=</span><span class="token string">"{b}: {c}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        itemstyle_opts<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"normal"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
                                                    <span class="token string">"barBorderRadius"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                    <span class="token string">'shadowBlur'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                                                    <span class="token string">'shadowColor'</span><span class="token punctuation">:</span> <span class="token string">'rgba(0,191,255,0.5)'</span><span class="token punctuation">,</span>
                                                    <span class="token string">'shadowOffsetY'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                                                    <span class="token string">'opacity'</span><span class="token punctuation">:</span> <span class="token number">0.8</span>
                                                <span class="token punctuation">}</span>
                                       <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
                        <span class="token punctuation">)</span>
pie<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'3.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/9e/vrpu4f8c_o.png" alt=""></p> 
<pre><code class="prism language-python">m3 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'出发时间'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
m4 <span class="token operator">=</span> m3<span class="token punctuation">[</span><span class="token string">'2021'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index
n4 <span class="token operator">=</span> m3<span class="token punctuation">[</span><span class="token string">'2021'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
</code></pre> 
<pre><code class="prism language-python">m3<span class="token punctuation">[</span><span class="token string">'2021'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tail<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_427"></a>出游时间分析</h5> 
<pre><code class="prism language-python">line <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>m4<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>n4<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
line<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'4.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/a4/7ioiWKQW_o.png" alt=""></p> 
<p>2021年的旅游时间曲线大约在五月一号起伏最大，原因肯定是因为假期调休延长至4天，为了调整自己生活及工作的状态，很多人利用这个假期去旅行放松自己。</p> 
<h5><a id="_441"></a>出游玩法分析</h5> 
<pre><code class="prism language-python">m5 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
n5 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    m5<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    n5<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
m5<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
m6 <span class="token operator">=</span> m5
n5<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
n6 <span class="token operator">=</span> n5

bar <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span><span class="token string">'dark'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token string">'1000px'</span><span class="token punctuation">,</span>height <span class="token operator">=</span><span class="token string">'500px'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>m6<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> n6<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> 
                                                       position<span class="token operator">=</span><span class="token string">'insideRight'</span><span class="token punctuation">,</span>
                                                       font_style<span class="token operator">=</span><span class="token string">'italic'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            itemstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">(</span>
                                color<span class="token operator">=</span>JsCode<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""new echarts.graphic.LinearGradient(1, 0, 0, 0, 
                                             [{
                                                 offset: 0,
                                                 color: 'rgb(255,99,71)'
                                             }, {
                                                 offset: 1,
                                                 color: 'rgb(32,178,170)'
                                             }])"""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"出游玩法分析"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>rotate<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'5.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2e/28/aSq8Fn3Q_o.png" alt=""></p> 
<p>“摄影”和“美食”可谓与旅行息息相关，一次完整的旅行最不能缺的就是“摄影”，拍美食发到朋友圈、拍风景发到朋友圈、拍完美的自己发到朋友圈；</p> 
<p>工作之后就没有了寒暑假，所以利用周末来一次短途旅行就成为了大多数人的首选。</p> 
<pre><code class="prism language-python">m7 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
n7 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_day <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_495"></a>出游天数分析</h5> 
<pre><code class="prism language-python">bar <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span><span class="token string">'dark'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token string">'1000px'</span><span class="token punctuation">,</span>height <span class="token operator">=</span><span class="token string">'500px'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>data_day<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>data_day<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> 
                                                       position<span class="token operator">=</span><span class="token string">'insideRight'</span><span class="token punctuation">,</span>
                                                       font_style<span class="token operator">=</span><span class="token string">'italic'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            itemstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">(</span>
                                color<span class="token operator">=</span>JsCode<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""new echarts.graphic.LinearGradient(1, 0, 0, 0, 
                                             [{
                                                 offset: 0,
                                                 color: 'rgb(255,99,71)'
                                             }, {
                                                 offset: 1,
                                                 color: 'rgb(32,178,170)'
                                             }])"""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"旅行时长"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>rotate<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'6.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d2/2e/BycrfyBn_o.png" alt=""></p> 
<p>旅行时长主要分布在2-5天之间，3天最为普遍，太短会未尽兴致，太长又会花销太大，若有一份好的旅行计划，3天应该足够让你赏过一座城市的名胜，吃过大部分的特色美食，领略到这个城市的风情，也足够让你喜欢上这座城市。</p> 
<pre><code class="prism language-python">data_mo <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data1<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token string">'七月'</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>data1<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token string">'八月'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>data1<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'三五好友'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
data_mo<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data_mo2 <span class="token operator">=</span> data1<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data1<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token string">'情侣'</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>data1<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token string">'独自一人'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>data1<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'十月'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
data_mo2<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">import</span> jieba
<span class="token keyword">import</span> jieba<span class="token punctuation">.</span>analyse
<span class="token keyword">import</span> re
</code></pre> 
<pre><code class="prism language-python">punc <span class="token operator">=</span> <span class="token string">'~`!#$%^&amp;*()_+-=|\';":/.,?&gt;&lt;~·！@#￥%……&amp;*（）——+-=“：’；、。，？》《{}【】'</span>
<span class="token keyword">def</span> <span class="token function">remove_fuhao</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">:</span>
    short <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r"[%s]+"</span> <span class="token operator">%</span> punc<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token keyword">return</span> short
<span class="token keyword">def</span> <span class="token function">cut_word</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
    text <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut_for_search<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">data2 <span class="token operator">=</span> data1
</code></pre> 
<pre><code class="prism language-python">data2<span class="token punctuation">[</span><span class="token string">'简介'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data2<span class="token punctuation">[</span><span class="token string">'短评'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>remove_fuhao<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>cut_word<span class="token punctuation">)</span>
data2<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">word <span class="token operator">=</span> data2<span class="token punctuation">[</span><span class="token string">'简介'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
fb <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r'.\travel_text.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fb<span class="token punctuation">.</span>write<span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r'.\travel_text.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">as</span> f<span class="token punctuation">:</span>
    words <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>close
</code></pre> 
<pre><code class="prism language-python">jieba<span class="token punctuation">.</span>analyse<span class="token punctuation">.</span>set_stop_words<span class="token punctuation">(</span><span class="token string">r'./stopwords.txt'</span><span class="token punctuation">)</span>
new_words <span class="token operator">=</span> jieba<span class="token punctuation">.</span>analyse<span class="token punctuation">.</span>textrank<span class="token punctuation">(</span>words<span class="token punctuation">,</span> topK<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> withWeight<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>new_words<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">word1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
num1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>new_words<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    
    word1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_words<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    num1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_words<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_586"></a>短评词云分析</h5> 
<pre><code class="prism language-python">wordcloud<span class="token operator">=</span> <span class="token punctuation">(</span>
    WordCloud<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'简介词云分析'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>z <span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>word1<span class="token punctuation">,</span>num1<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>word_size_range<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">,</span>shape <span class="token operator">=</span> <span class="token string">'diamond'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
wordcloud<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'7.html'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/b2/g20I4LY2_o.png" alt=""></p> 
<p>食”、“成都”、“自驾”是权重最高的三个词，事实确实如此，当我们计划到一个陌生城市游玩时，可能脑海里第一个想到的并不是当地有什么风景可看，而是有什么美食可吃，大概每个人都能算得上一个吃货吧；</p> 
<p>自驾游也是当下火热的出游方式，随时都可以来一场说走就走的旅行。</p> 
<pre><code class="prism language-python">data4 <span class="token operator">=</span> data1<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'旅行时长'</span><span class="token punctuation">,</span><span class="token string">'简介'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
data4
</code></pre> 
<h5><a id="_606"></a>旅游景点推荐</h5> 
<pre><code class="prism language-python">k_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
the_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
keyword <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入旅行月份：'</span><span class="token punctuation">)</span>
data5 <span class="token operator">=</span> data4<span class="token punctuation">[</span>data4<span class="token punctuation">[</span><span class="token string">'旅行月份'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">]</span>
keyword1 <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入结伴出游方式：'</span><span class="token punctuation">)</span>
data6 <span class="token operator">=</span> data5<span class="token punctuation">[</span>data5<span class="token punctuation">[</span><span class="token string">'人物'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">(</span>keyword1<span class="token punctuation">)</span><span class="token punctuation">]</span>
price <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入预期价格上限：'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
data7 <span class="token operator">=</span> data6<span class="token punctuation">[</span>data6<span class="token punctuation">[</span><span class="token string">'人均费用'</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>price<span class="token punctuation">]</span>
day1 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入旅行时长下限：'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
day2 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入旅行时长上限：'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
data8 <span class="token operator">=</span> data7<span class="token punctuation">[</span><span class="token punctuation">(</span>data7<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token operator">&gt;=</span>day1<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>data7<span class="token punctuation">[</span><span class="token string">'天数'</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>day2<span class="token punctuation">)</span><span class="token punctuation">]</span>
data8
</code></pre> 
<p><strong>综上述分析可得到一些结论：</strong></p> 
<ol><li> <p>个人认为性价比较高的旅游城市：三亚、成都。</p> </li><li> <p>旅游天数大多控制在2-5天内，不宜过多。</p> </li><li> <p>三五好友一起旅游是最令人们喜欢的出游方式。</p> </li><li> <p>“摄影”与“美食”已成为旅游的代名词。</p> </li><li> <p>避开旅游高峰期，三月和六月的周末短途旅行也是不错的选择。</p> </li></ol> 
<h4><a id="_637"></a>尾语</h4> 
<p>感谢你观看我的文章呐~本次航班到这里就结束啦 🛬</p> 
<p>希望本篇文章有对你带来帮助 🎉，有学习到一点知识~</p> 
<p>躲起来的星星🍥也在努力发光，你也要努力加油（让我们一起努力叭）。</p> 
<p><img src="https://images2.imgbox.com/2f/72/reWfDvBR_o.gif" alt=""></p> 
<p><a id="article_bottom"></a>最后，宣传一下呀~👇👇👇<strong>更多源码、资料、素材、解答、交流</strong>皆点击下方名片获取呀👇👇</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1dba2725394c1d6399383211252e6a2c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">后端Windows软件环境安装配置大全[JDK、Redis、RedisDesktopManager、Mysql、navicat、VMWare、finalshell、MongoDB...持续更新中]</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/623cd219af19b7cf58fbfb78d573df0d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构-迷宫问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>