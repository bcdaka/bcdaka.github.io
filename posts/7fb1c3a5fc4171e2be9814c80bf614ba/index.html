<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AIç»˜å›¾å¼€æºå·¥å…·Stable Diffusion WebUIå‰ç«¯APIè°ƒç”¨ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7fb1c3a5fc4171e2be9814c80bf614ba/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="AIç»˜å›¾å¼€æºå·¥å…·Stable Diffusion WebUIå‰ç«¯APIè°ƒç”¨">
  <meta property="og:description" content="èƒŒæ™¯ æœ¬æ–‡ä¸»è¦ä»‹ç» AI ç»˜å›¾å¼€æºå·¥å…· Stable Diffusion WebUI çš„ API å¼€å¯å’ŒåŸºæœ¬è°ƒç”¨æ–¹æ³•ï¼Œé€šè¿‡æœ¬æ–‡çš„é˜…è¯»ï¼Œä½ å°†äº†è§£åˆ° stable-diffusion-webui çš„åŸºæœ¬ä»‹ç»ã€å®‰è£…åŠ API ç¯å¢ƒé…ç½®ï¼›æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€å±€éƒ¨é‡ç»˜ã€åæœŸå¤„ç†ç­‰ API æ¥å£è°ƒç”¨ï¼›å›¾åƒå¤„ç†å¼€å‘ä¸­å¸¸ç”¨åˆ°ä¸€äº›æ–¹æ³•å¦‚ Base64ã€PNGã€CanvasåŠ URL ç›¸äº’è½¬æ¢ã€Canvas é¢œè‰²è½¬æ¢ç­‰ã€‚
AI ç»˜å›¾å·¥å…·ç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒå¹¿æ³›ä½¿ç”¨çš„ä¸»è¦æœ‰ä¸¤æ¬¾ï¼Œä¸€ä¸ªæ˜¯ Midjourneyï¼Œå®ƒæä¾›é¢å‘ç”¨æˆ·æœ‰å¥½çš„æ“ä½œç•Œé¢ï¼Œæ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ç­‰åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€æ¬¾æ”¶è´¹è½¯ä»¶ï¼›å¦ä¸€ä¸ªå°±æ˜¯å¼€æºå·¥å…· Stable Diffusion, åŒæ ·å…·æœ‰å¼ºå¤§çš„AIç»˜å›¾å’Œå›¾ç‰‡å†åˆ›é€ èƒ½åŠ›ï¼Œä½†æ˜¯å­¦ä¹ æˆæœ¬å’Œä¸Šæ‰‹éš¾åº¦ç›¸å¯¹è¾ƒå¤§ï¼Œä¸è¿‡ç”±äºå®ƒæ˜¯å¼€æºçš„ï¼Œç°åœ¨æœ‰éå¸¸å¤šçš„ç”¨æˆ·å’Œå¼€å‘è€…ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸°å¯Œçš„è®­ç»ƒæ¨¡å‹å’Œå­¦ä¹ èµ„æºã€‚æœ¬æ–‡ä»‹ç»çš„ Stable Diffusion WebUI å°±æ˜¯åŸºäº Stable Diffusion çš„å…·æœ‰æ¯”è¾ƒå®Œå–„çš„å¯è§†åŒ–æ“ä½œç•Œé¢çš„ AI ç»˜å›¾å¼€æºå·¥å…·ï¼Œå®ƒçš„ github è®¿é—®åœ°å€æ˜¯ github.com/AUTOMATIC11â€¦ã€‚
é¡ºä¾¿ä¸€æï¼Œæœ¬æ–‡ä¸Šæ–¹çš„ Banner å›¾å°±æ˜¯ä½¿ç”¨ Stable Diffusion ç”Ÿæˆçš„ ğŸ˜
ä½¿ç”¨ä½“éªŒ åœ¨æ­£å¼å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½“éªŒä¸€ä¸‹ Stable Diffusion WebUI ä»¥åŠä¸¤ä¸ªæ¥å£å°è£…å’Œæ“ä½œç•Œé¢æ¯”è¾ƒä¼˜ç§€çš„ AI ç»˜å›¾ç½‘ç«™ï¼Œäº†è§£æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€åæœŸå¤„ç†ç­‰åŸºæœ¬æ“ä½œæ­¥éª¤ã€‚
ğŸ”— stablediffusionweb.com/WebUIğŸ”— d.designğŸ”— www.liblibai.com ç¯å¢ƒé…ç½® å®‰è£… Stable Diffusion WebUI æˆ‘ä»¬é¦–å…ˆéœ€è¦å…ˆåœ¨æœ¬åœ°æˆ–è€…æœåŠ¡å™¨å®‰è£…éƒ¨ç½² Stable Diffusion WebUIï¼Œå¯ä»¥ä»Githubå…‹éš†ä»“åº“ï¼Œç„¶åæŒ‰è¯´æ˜æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼Œå¯¹å‰ç«¯å¼€å‘æ¥è¯´å®‰è£…æµç¨‹éå¸¸ç®€å•ï¼Œè¯¦ç»†å®‰è£…æµç¨‹å¤§å®¶å¯ä»¥è‡ªè¡Œæœç´¢ï¼Œç°åœ¨ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šä¿å§†çº§çš„æ•™ç¨‹ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚
å®‰è£…å®Œæˆåï¼Œåœ¨ Windowsæ“ä½œç³»ç»Ÿä¸­è¿›å…¥ stable-diffusion-webui æ ¹ç›®å½•ï¼Œç„¶ååŒå‡» webui-user.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-20T10:45:44+08:00">
    <meta property="article:modified_time" content="2024-05-20T10:45:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AIç»˜å›¾å¼€æºå·¥å…·Stable Diffusion WebUIå‰ç«¯APIè°ƒç”¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_2"></a>èƒŒæ™¯</h3> 
<p>æœ¬æ–‡ä¸»è¦ä»‹ç» <code>AI</code> ç»˜å›¾å¼€æºå·¥å…· <code>Stable Diffusion WebUI</code> çš„ <code>API</code> å¼€å¯å’ŒåŸºæœ¬è°ƒç”¨æ–¹æ³•ï¼Œé€šè¿‡æœ¬æ–‡çš„é˜…è¯»ï¼Œä½ å°†äº†è§£åˆ° <code>stable-diffusion-webui</code> çš„åŸºæœ¬ä»‹ç»ã€å®‰è£…åŠ <code>API</code> ç¯å¢ƒé…ç½®ï¼›æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€å±€éƒ¨é‡ç»˜ã€åæœŸå¤„ç†ç­‰ <code>API</code> æ¥å£è°ƒç”¨ï¼›å›¾åƒå¤„ç†å¼€å‘ä¸­å¸¸ç”¨åˆ°ä¸€äº›æ–¹æ³•å¦‚ <code>Base64</code>ã€<code>PNG</code>ã€<code>Canvas</code>åŠ <code>URL</code> ç›¸äº’è½¬æ¢ã€<code>Canvas</code> é¢œè‰²è½¬æ¢ç­‰ã€‚</p> 
<p><code>AI</code> ç»˜å›¾å·¥å…·ç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒå¹¿æ³›ä½¿ç”¨çš„ä¸»è¦æœ‰ä¸¤æ¬¾ï¼Œä¸€ä¸ªæ˜¯ <code>Midjourney</code>ï¼Œå®ƒæä¾›é¢å‘ç”¨æˆ·æœ‰å¥½çš„æ“ä½œç•Œé¢ï¼Œæ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ç­‰åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€æ¬¾æ”¶è´¹è½¯ä»¶ï¼›å¦ä¸€ä¸ªå°±æ˜¯å¼€æºå·¥å…· <code>Stable Diffusion</code>, åŒæ ·å…·æœ‰å¼ºå¤§çš„AIç»˜å›¾å’Œå›¾ç‰‡å†åˆ›é€ èƒ½åŠ›ï¼Œä½†æ˜¯å­¦ä¹ æˆæœ¬å’Œä¸Šæ‰‹éš¾åº¦ç›¸å¯¹è¾ƒå¤§ï¼Œä¸è¿‡ç”±äºå®ƒæ˜¯å¼€æºçš„ï¼Œç°åœ¨æœ‰éå¸¸å¤šçš„ç”¨æˆ·å’Œå¼€å‘è€…ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸°å¯Œçš„è®­ç»ƒæ¨¡å‹å’Œå­¦ä¹ èµ„æºã€‚æœ¬æ–‡ä»‹ç»çš„ <code>Stable Diffusion WebUI</code> å°±æ˜¯åŸºäº <code>Stable Diffusion</code> çš„å…·æœ‰æ¯”è¾ƒå®Œå–„çš„å¯è§†åŒ–æ“ä½œç•Œé¢çš„ <code>AI</code> ç»˜å›¾å¼€æºå·¥å…·ï¼Œå®ƒçš„ <code>github</code> è®¿é—®åœ°å€æ˜¯ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FAUTOMATIC1111%2Fstable-diffusion-webui" rel="nofollow" title="https://github.com/AUTOMATIC1111/stable-diffusion-webui">github.com/AUTOMATIC11â€¦</a>ã€‚</p> 
<blockquote> 
 <p>é¡ºä¾¿ä¸€æï¼Œæœ¬æ–‡ä¸Šæ–¹çš„ <code>Banner</code> å›¾å°±æ˜¯ä½¿ç”¨ <code>Stable Diffusion</code> ç”Ÿæˆçš„ <code>ğŸ˜</code></p> 
</blockquote> 
<h3><a id="_11"></a>ä½¿ç”¨ä½“éªŒ</h3> 
<p>åœ¨æ­£å¼å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½“éªŒä¸€ä¸‹ <code>Stable Diffusion WebUI</code> ä»¥åŠä¸¤ä¸ªæ¥å£å°è£…å’Œæ“ä½œç•Œé¢æ¯”è¾ƒä¼˜ç§€çš„ <code>AI</code> ç»˜å›¾ç½‘ç«™ï¼Œäº†è§£<strong>æ–‡ç”Ÿå›¾</strong>ã€<strong>å›¾ç”Ÿå›¾</strong>ã€<strong>åæœŸå¤„ç†</strong>ç­‰åŸºæœ¬æ“ä½œæ­¥éª¤ã€‚</p> 
<ul><li><code>ğŸ”—</code> <a href="https://link.juejin.cn/?target=https%3A%2F%2Fstablediffusionweb.com%2FWebUI" rel="nofollow" title="https://stablediffusionweb.com/WebUI">stablediffusionweb.com/WebUI</a></li><li><code>ğŸ”—</code> <a href="https://link.juejin.cn/?target=https%3A%2F%2Fd.design%2F" rel="nofollow" title="https://d.design/">d.design</a></li><li><code>ğŸ”—</code> <a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.liblibai.com%2F" rel="nofollow" title="https://www.liblibai.com/">www.liblibai.com</a></li></ul> 
<p><img src="https://images2.imgbox.com/ed/7a/D9OgXj2C_o.png" alt="website.png"></p> 
<h3><a id="_22"></a>ç¯å¢ƒé…ç½®</h3> 
<h4><a id="_Stable_Diffusion_WebUI_25"></a>å®‰è£… Stable Diffusion WebUI</h4> 
<p>æˆ‘ä»¬é¦–å…ˆéœ€è¦å…ˆåœ¨æœ¬åœ°æˆ–è€…æœåŠ¡å™¨å®‰è£…éƒ¨ç½² <code>Stable Diffusion WebUI</code>ï¼Œå¯ä»¥ä»<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FAUTOMATIC1111%2Fstable-diffusion-webui" rel="nofollow" title="https://github.com/AUTOMATIC1111/stable-diffusion-webui">Github</a>å…‹éš†ä»“åº“ï¼Œç„¶åæŒ‰è¯´æ˜æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼Œå¯¹å‰ç«¯å¼€å‘æ¥è¯´å®‰è£…æµç¨‹éå¸¸ç®€å•ï¼Œè¯¦ç»†å®‰è£…æµç¨‹å¤§å®¶å¯ä»¥è‡ªè¡Œæœç´¢ï¼Œç°åœ¨ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šä¿å§†çº§çš„æ•™ç¨‹ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p> 
<p><img src="https://images2.imgbox.com/8e/db/ImZtI35m_o.png" alt="cmd.png"></p> 
<p>å®‰è£…å®Œæˆåï¼Œåœ¨ <code>Windows</code>æ“ä½œç³»ç»Ÿä¸­è¿›å…¥ <code>stable-diffusion-webui</code> æ ¹ç›®å½•ï¼Œç„¶ååŒå‡» <code>webui-user.bat</code> æ–‡ä»¶å³å¯å¼€å¯æœ¬åœ°è¿è¡ŒæœåŠ¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>http://localhost:7860</code> åŠ è½½å¦‚ä¸‹æ‰€ç¤ºçš„ç•Œé¢ã€‚åœ¨ <code>txt2img</code> è¾“å…¥æ¡†ä¸­è¾“å…¥éœ€è¦ç”Ÿå›¾å›¾åƒçš„çš„æ­£å‘å…³é”®è¯å’Œåå‘å…³é”®è¯ï¼Œç‚¹å‡» <code>Generate</code> æŒ‰é’®å³å¯ç”Ÿæˆå›¾åƒã€‚</p> 
<p><img src="https://images2.imgbox.com/66/95/LchdfURS_o.png" alt="screenshot.png"></p> 
<p>å®ŒæˆåŸºæœ¬å®‰è£…åï¼Œè¿˜å¯ä»¥å®‰è£…ç•Œé¢æ±‰åŒ–æ’ä»¶ã€å…³é”®å­—ä¸­æ–‡ç¿»è¯‘æ’ä»¶ã€è‡ªå·±å–œæ¬¢çš„é£æ ¼æ¨¡å‹ç­‰ï¼Œéƒ½å¯ä»¥æŒ‰ç…§æ•™ç¨‹éå¸¸å®¹æ˜“å®ç°ã€‚</p> 
<h4><a id="_API__37"></a>å¼€å¯ API åŠŸèƒ½</h4> 
<p>åœ¨ <code>stable-diffusion-webui</code> æ ¹ç›®å½•ä¸‹æ‰¾åˆ°æ–‡ä»¶ <code>webui-user.bat</code>ï¼Œä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶ååœ¨ <code>COMMANDLINE_ARGS</code> é…ç½®é¡¹åé¢æ·»åŠ  <code>--api</code>ã€‚</p> 
<pre><code>set COMMANDLINE_ARGS= --lowvram --precision full --api --listen

</code></pre> 
<p>ç„¶ååŒå‡» <code>webui-user.bat</code> é‡å¯æœåŠ¡ï¼Œæ­¤æ—¶åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€ <code>https://localhost:7860/doc</code>ï¼Œå°±èƒ½çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„æ‰€æœ‰æ¥å£æ–‡æ¡£äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ–‡æ¡£ä¸­æ‰¾åˆ°éœ€è¦æ¥å…¥çš„æ¥å£åŠè¯¦ç»†å‚æ•°ã€‚</p> 
<p><img src="https://images2.imgbox.com/e9/80/Bdgq7Ql4_o.png" alt="api.png"></p> 
<blockquote> 
 <p><code>ğŸ’¡</code> æˆ‘ä»¬è¿˜å¯ä»¥é…ç½®å¦‚ä¸Šæ‰€ç¤ºçš„ --listen å‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å±€åŸŸç½‘è®¿é—® stable-diffusion-webui çš„æ¥å£äº†ã€‚</p> 
</blockquote> 
<h3><a id="_52"></a>å®ç°</h3> 
<h4><a id="_55"></a>æ–‡ç”Ÿå›¾</h4> 
<p><strong>æ–‡ç”Ÿå›¾æ¥å£</strong>ï¼Œå¯ä»¥é€šè¿‡å‘ <code>stable-diffusion-webui</code> æœåŠ¡å‘é€æ­£å‘å…³é”®å­—ã€åå‘å…³é”®å­—ã€å›¾ç‰‡å°ºå¯¸ã€é‡‡æ ·æ­¥æ•°ç­‰å‚æ•°æ¥è°ƒç”¨AIèƒ½åŠ›ç”Ÿæˆå›¾ç‰‡ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®ƒæœ‰å“ªäº›å¯é…ç½®çš„ <code>payload</code> å‚æ•°é€‰é¡¹ã€‚ï¼ˆæš‚æ—¶åªç”¨åˆ°åé¢å†™äº†æ³¨é‡Šçš„å‚æ•°ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†æ–‡ç”Ÿå›¾å‚æ•°é…ç½®ï¼‰</p> 
<p><img src="https://images2.imgbox.com/63/e1/kZek8Kg8_o.png" alt="txt2img.png"></p> 
<pre><code>{
  "enable_hr": false,                 // å¼€å¯é«˜æ¸…hr
  "denoising_strength": 0,            // é™å™ªå¼ºåº¦
  "hr_scale": 2,                      // é«˜æ¸…çº§åˆ«
  "hr_upscaler": "string",
  "hr_second_pass_steps": 0,
  "hr_resize_x": 0,
  "hr_resize_y": 0,
  "hr_sampler_name": "string",
  "hr_prompt": "",
  "hr_negative_prompt": "",
  "prompt": "",                       // æ­£å‘å…³é”®å­—
  "styles": [
    "string"
  ],
  "seed": -1,                         // éšæœºç§å­
  "subseed": -1,                      // å­çº§ç§å­
  "subseed_strength": 0,              // å­çº§ç§å­å½±å“åŠ›åº¦
  "seed_resize_from_h": -1,
  "seed_resize_from_w": -1,
  "sampler_name": "string",
  "batch_size": 1,                    // æ¯æ¬¡ç”Ÿæˆçš„å¼ æ•°
  "n_iter": 1,                        // ç”Ÿæˆæ‰¹æ¬¡
  "steps": 50,                        // ç”Ÿæˆæ­¥æ•°
  "cfg_scale": 7,                     // å…³é”®è¯ç›¸å…³æ€§
  "width": 512,                       // ç”Ÿæˆå›¾åƒå®½åº¦
  "height": 512,                      // ç”Ÿæˆå›¾åƒé«˜åº¦
  "restore_faces": false,             // é¢éƒ¨ä¿®å¤
  "tiling": false,                    // å¹³é“º
  "do_not_save_samples": false,
  "do_not_save_grid": false,
  "negative_prompt": "string",        // åå‘å…³é”®å­—
  "eta": 0,                           // ç­‰å¾…æ—¶é—´
  "s_min_uncond": 0,
  "s_churn": 0,
  "s_tmax": 0,
  "s_tmin": 0,
  "s_noise": 1,
  "override_settings": {},             // è¦†ç›–æ€§é…ç½®
  "override_settings_restore_afterwards": true,
  "script_args": [],                   // lora æ¨¡å‹å‚æ•°é…ç½®
  "sampler_index": "Euler",            // é‡‡æ ·æ–¹æ³•
  "script_name": "string",
  "send_images": true,                 // æ˜¯å¦å‘é€å›¾åƒ
  "save_images": false,                // æ˜¯å¦åœ¨æœåŠ¡ç«¯ä¿å­˜ç”Ÿæˆçš„å›¾åƒ
  "alwayson_scripts": {}               // alwaysoné…ç½®
}

</code></pre> 
<p>æ ¹æ®éœ€è¦çš„å‚æ•°ï¼Œåœ¨é¡µé¢é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å®ç°ï¼Œæ­¤æ—¶æœåŠ¡ç«¯ä¼šæ ¹æ®æ¥å£å‚æ•°ï¼Œä¸€æ¬¡ç”Ÿæˆ4å¼ å¯¹åº”çš„å›¾ã€‚æ¥å£è¿”å›æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåŒ…å«æ‰€æœ‰å›¾ç‰‡æ•°æ®åä¸º <code>images</code> çš„æ•°ç»„ï¼Œæ•°ç»„é¡¹æ˜¯æ ¼å¼ä¸º <code>base64</code> çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥å‘ä¸‹é¢è¿™æ ·è½¬åŒ–ä¸ºé¡µé¢ä¸Šå¯ç›´æ¥æ˜¾ç¤ºçš„å›¾ç‰‡ã€‚</p> 
<pre><code>const response = await txt2img({
  id_task: `task(${taskId})`,
  // æ­£å‘å…³é”®è¯
  prompt: 'xxxx',
  // åå‘å…³é”®è¯
  negative_prompt: 'xxxx',
  // éšæœºç§å­
  seed: 'xxxx',
  // ç”Ÿæˆæ­¥æ•°
  steps: 7,
  // å…³é”®è¯ç›¸å…³æ€§
  cfg_scale: 20,
  width: 1024,
  height: 1024,
  // æ¯æ¬¡ç”Ÿæˆçš„å¼ æ•°
  batch_size: 4,
  // ç”Ÿæˆæ‰¹æ¬¡
  n_iter: 1,
  // é‡‡æ ·æ–¹æ³•
  sampler_index: 'xxxx',
  // é‡‡ç”¨çš„æ¨¡å‹å“ˆå¸Œå€¼
  sd_model_hash: 'xxxx',
  override_settings: {
    sd_model_checkpoint: sdModelCheckpoint,
    eta_noise_seed_delta: 0.0,
    CLIP_stop_at_last_layers: 1.0,
  },
})
if (response.status === 200 &amp;&amp; response.data) {
  try {
    const images = response.data.images;
    if (images.length === 0) return;
    data.imageUrls = images.map(item =&gt; `data:image/png;base64,${item}`);
  } catch (err) {}
}

</code></pre> 
<p>ç”Ÿæˆæ•ˆæœå°±æ˜¯æœ¬æ–‡ <code>Banner</code> å›¾ä¸­çš„ç²‰è‰²é•¿å¤´å‘çš„ <code>3D</code> å¡é€šé£æ ¼å°å§å§ <code>âœ¨</code> ï¼Œ<strong>æ­£å‘å…³é”®å­—</strong>å¤§è‡´æ˜¯ <code>girl, long hair, pink</code>ï¼Œæ¨¡å‹é‡‡ç”¨çš„æ˜¯ <code>3dAnimationDiffusion_v10</code>ï¼Œå…¶ä»–å‚æ•°å¯è‡ªè¡Œè°ƒèŠ‚ã€‚æœ¬æ–‡åç»­å®ä¾‹çš„<strong>å›¾ç”Ÿå›¾</strong>ã€<strong>å›¾ä¼˜åŒ–</strong>éƒ½å°†é‡‡ç”¨è¿™å¼ å›¾ä½œä¸º<strong>å‚è€ƒå›¾</strong>è¿›è¡Œæ¼”ç¤ºã€‚</p> 
<p><img src="https://images2.imgbox.com/b9/8c/z2KeO6w4_o.png" alt="txt2img_result.png"></p> 
<h4><a id="_157"></a>å›¾ç”Ÿå›¾</h4> 
<p><strong>å›¾ç”Ÿå›¾æ¥å£</strong>ï¼Œ<code>stable-diffusion-webui</code> å°†æ ¹æ®æˆ‘ä»¬ä»æ¥å£ä¼ é€çš„å‚è€ƒå›¾ï¼Œç”Ÿæˆå†…å®¹å’Œé£æ ¼ç±»ä¼¼çš„å›¾ç‰‡ï¼Œå°±åƒæœ€è¿‘æŠ–éŸ³ä¸Šå¾ˆç«çš„<strong>ç¬æ¯å…¨å®‡å®™</strong>ç‰¹æ•ˆä¸€æ ·ï¼Œä¹Ÿå¯ä»¥å°†åŒä¸€å¼ å›¾ç‰‡é€šè¿‡é€‰æ‹©ä¸åŒæ¨¡å‹è½¬åŒ–ä¸ºå¦ä¸€ç§ç”»é£ã€‚ä¸‹é¢æ˜¯<strong>å›¾ç”Ÿå›¾</strong>æ¥å£çš„è¯¦ç»† <code>payload</code> å‚æ•°ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°åŸºæœ¬ä¸Šå’Œ<strong>æ–‡ç”Ÿå›¾</strong>æ˜¯ä¸€æ ·çš„ï¼Œå¤šäº†ä¸€äº›ä¸<strong>å‚è€ƒå›¾ç‰‡</strong>ç›¸å…³çš„é…ç½®ï¼Œå¦‚ <code>init_images</code>ã€‚</p> 
<p><img src="https://images2.imgbox.com/7a/9b/Zluf4nA4_o.png" alt="img2img.png"></p> 
<pre><code>{
  "init_images": [
    "string"
  ],
  "resize_mode": 0,
  "denoising_strength": 0.75,
  "image_cfg_scale": 0,
  "mask": "string",
  "mask_blur": 0,
  "mask_blur_x": 4,
  "mask_blur_y": 4,
  "inpainting_fill": 0,
  "inpaint_full_res": true,
  "inpaint_full_res_padding": 0,
  "inpainting_mask_invert": 0,
  "initial_noise_multiplier": 0,
  "prompt": "",
  "styles": [
    "string"
  ],
  "seed": -1,
  "subseed": -1,
  "subseed_strength": 0,
  "seed_resize_from_h": -1,
  "seed_resize_from_w": -1,
  "sampler_name": "string",
  "batch_size": 1,
  "n_iter": 1,
  "steps": 50,
  "cfg_scale": 7,
  "width": 512,
  "height": 512,
  "restore_faces": false,
  "tiling": false,
  "do_not_save_samples": false,
  "do_not_save_grid": false,
  "negative_prompt": "string",
  "eta": 0,
  "s_min_uncond": 0,
  "s_churn": 0,
  "s_tmax": 0,
  "s_tmin": 0,
  "s_noise": 1,
  "override_settings": {},
  "override_settings_restore_afterwards": true,
  "script_args": [],
  "sampler_index": "Euler",
  "include_init_images": false,
  "script_name": "string",
  "send_images": true,
  "save_images": false,
  "alwayson_scripts": {}
}

</code></pre> 
<p>åœ¨é¡µé¢æ¥å£é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®ç°ï¼Œå…¶ä»–å‚æ•°å’Œæ–‡ç”Ÿå›¾éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå‚è€ƒå›¾ä»¥ <code>base64</code> æ ¼å¼æ·»åŠ åˆ° <code>init_images</code> æ•°ç»„å³å¯ã€‚</p> 
<pre><code>const response = await img2img({
  // æ­£å‘å…³é”®è¯
  prompt: prompt,
  // åå‘å…³é”®è¯
  negative_prompt: negativePrompt,
  // åˆå§‹å›¾åƒ
  init_images: [sourceImage.value],
  // å°ºå¯¸ç¼©æ”¾
  resize_mode: 0,
  // ...
});

</code></pre> 
<p>æˆ‘ä»¬å°†<strong>æ–‡ç”Ÿå›¾</strong>ç¤ºä¾‹ä¸­çš„å›¾ç‰‡ä½œä¸º<strong>å‚è€ƒå›¾</strong>ï¼Œç„¶åå°†å¤§æ¨¡å‹åˆ‡æ¢ä¸º <code>å¢¨å¹½äººé€ äºº_v1030</code>ï¼Œå°±èƒ½å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„<strong>çœŸäººå†™å®é£æ ¼</strong>çš„å›¾ç‰‡ã€‚</p> 
<p><img src="https://images2.imgbox.com/52/17/dTErY13Z_o.png" alt="img2img_result.png"></p> 
<h4><a id="_241"></a>å±€éƒ¨é‡ç»˜</h4> 
<p>å›¾ç”Ÿå›¾ <code>API</code> è¿˜å¯ä»¥å®ç°å›¾ç‰‡<strong>å±€éƒ¨é‡ç»˜ã€æ¶‚é¸¦ã€é‡ç»˜è’™ç‰ˆã€é«˜æ¸…æ”¾å¤§ã€å›¾åƒæ‰©å……</strong>ç­‰æ•ˆæœã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç®€å•è®²è§£ä»¥ä¸‹å¦‚ä½•å®ç°å±€éƒ¨é‡ç»˜åŠŸèƒ½ã€‚</p> 
<p>è¦å®ç°<strong>å±€éƒ¨é‡ç»˜</strong>åŠŸèƒ½ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>Canvas</code> åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼Œç„¶åé€šè¿‡é¼ æ ‡ç§»åŠ¨åœ¨ç”»å¸ƒä¸Š<strong>æ¶‚æŠ¹</strong>å‡ºéœ€è¦é‡ç»˜çš„è·¯å¾„ï¼Œåœ¨å®é™…å¼€å‘æ—¶æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„å›¾ç‰‡é‡ç»˜ç¼–è¾‘å™¨ï¼Œå³ä¾§å›¾ç‰‡é»„è‰²åŒºåŸŸ <code>ğŸŸ¨</code> æ˜¯ç»è¿‡ç”»ç¬”æ¶‚æŠ¹éœ€è¦é‡ç»˜ä¿®æ”¹çš„åŒºåŸŸã€‚æ¶‚æŠ¹åŠŸèƒ½å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ç®€å•å®ç°ï¼Œåƒ<strong>æ“¦é™¤</strong>ã€<strong>ç”»ç¬”å¤§å°é¢œè‰²é€‰æ‹©</strong>ã€<strong>æ’¤é”€é‡åš</strong>ç­‰æ‰©å±•åŠŸèƒ½å¯è‡ªè¡Œæœç´¢å¦‚ä½•å®ç°ã€‚</p> 
<p><img src="https://images2.imgbox.com/00/a1/KETMCZZr_o.png" alt="editor.png"></p> 
<pre><code>&lt;div&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
  &lt;img src="your_image.jpg" id="image"&gt;
  &lt;button onclick="clearMask()"&gt;æ¸…é™¤é®ç½©&lt;/button&gt;
&lt;/div&gt;

&lt;script&gt;
var canvas = document.getElementById('canvas');
var image = document.getElementById('image');
// è®¾ç½®canvaså®½é«˜ä¸å›¾åƒå°ºå¯¸ç›¸åŒ
canvas.width = image.width;
canvas.height = image.height;
var ctx = canvas.getContext('2d');
var isDrawing = false; // æ˜¯å¦æ­£åœ¨ç»˜åˆ¶
var lastX = 0;
var lastY = 0;
// é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶å¤„ç†ç¨‹åº
canvas.addEventListener('mousedown', function(e) {
  isDrawing = true;
  [lastX, lastY] = [e.offsetX, e.offsetY];
});
// é¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†ç¨‹åº
canvas.addEventListener('mousemove', function(e) {
  if (!isDrawing) return;
  drawMask(e.offsetX, e.offsetY);
});
// é¼ æ ‡é‡Šæ”¾äº‹ä»¶å¤„ç†ç¨‹åº
canvas.addEventListener('mouseup', function() {
  isDrawing = false;
});
// ç»˜åˆ¶é®ç½©å‡½æ•°
function drawMask(x, y) {
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  ctx.lineTo(x, y);
  ctx.strokeStyle = 'rgba(0, 0, 0, 1)'; // è®¾ç½®é®ç½©é¢œè‰²ï¼ˆé»‘è‰²ï¼‰
  ctx.lineWidth = 20;                   // è®¾ç½®é®ç½©å®½åº¦
  ctx.lineCap = 'round';                // è®¾ç½®çº¿æ¡æœ«ç«¯å½¢çŠ¶ä¸ºåœ†å½¢
  ctx.stroke();
  [lastX, lastY] = [x, y];
}
// æ¸…é™¤é®ç½©å‡½æ•°
function clearMask() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}
&lt;/script&gt;

</code></pre> 
<p>æ¶‚æŠ¹å®Œæˆåï¼Œæˆ‘ä»¬å³é”®ä¿å­˜å›¾ç‰‡ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹å›¾å·¦ä¾§æ‰€ç¤ºçš„å›¾ç‰‡ã€‚ä½†æ˜¯ <code>stable-diffusion-webui</code> éœ€è¦çš„ <strong>Maské®ç½©å›¾æ˜¯æ¶‚æ”¹åŒºåŸŸä¸ºçº¯ç™½è‰²ï¼Œéä¿®æ”¹åŒºåŸŸä¸ºé»‘è‰²ï¼Œä¸”å¤§å°éœ€è¦å’ŒåŸå›¾ä¸€è‡´</strong>ï¼Œå¦‚å³ä¾§å›¾ç‰‡æ‰€ç¤ºã€‚æ­¤æ—¶å°±éœ€è¦å°†å¾—åˆ°çš„å·¦ä¾§é€æ˜é®ç½©å±‚è½¬æ¢ä¸ºå³ä¾§éœ€è¦çš„é®ç½©å±‚å›¾ç‰‡ã€‚</p> 
<p><img src="https://images2.imgbox.com/ad/c7/9XXwI7LN_o.png" alt="mask.png"></p> 
<p><code>Canvas</code> é®ç½©å±‚è½¬æ¢æ–¹æ³•å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å®ç°ï¼Œç»˜åˆ¶ <code>Mask</code> å›¾ç‰‡ï¼Œ<code>Canvas</code> ä½¿ç”¨é¼ æ ‡ç»˜åˆ¶é»‘è‰²å›¾æ¡ˆï¼Œå¯¼å‡ºå›¾ç‰‡æ—¶éœ€è¦æŠŠç©ºç™½éƒ¨åˆ†å˜ä¸ºé»‘è‰²ï¼Œç»˜åˆ¶çº¿æ¡çš„éƒ¨åˆ†å˜ä¸ºç™½è‰²ï¼Œå¹¶ä¸”éœ€è¦è½¬æ¢æˆå’ŒåŸå›¾ç›¸åŒçš„å°ºå¯¸ã€‚å…¶ä¸­ä¸¤ä¸ªå‚æ•° <code>_canvas</code> æ˜¯éœ€è¦è½¬æ¢çš„ç”»å¸ƒï¼Œ<code>_image</code> æ˜¯æ¶‚æŠ¹çš„åŸå›¾ã€‚å…¶ä¸­ç”¨äºè·å–å›¾åƒåŸå§‹å°ºå¯¸çš„æ–¹æ³• <code>getImageOriginSize</code> å¯ä»¥åœ¨æœ¬æ–‡æœ«å°¾æ–¹æ³•æ±‡æ€»ä¸­æŸ¥çœ‹</p> 
<pre><code>export const drawMask = async (_canvas, _image) =&gt; {
  return new Promise(async(resolve) =&gt; {
    const canvas = _canvas;
    const ctx = canvas.getContext('2d');
    const imageData = ctx.getImageData(0, 0, canvas.clientWidth, canvas.clientHeight);
    const imageDataContent = imageData.data;
    // ä¿®æ”¹å›¾åƒæ•°æ®ä¸­çš„åƒç´ é¢œè‰²
    for (let i = 0; i &lt; imageDataContent.length; i += 4) {
      // åˆ¤æ–­é€æ˜åº¦æ˜¯å¦å°äºé˜ˆå€¼
      if (imageDataContent[i + 3] &lt; 128) {
      // å°†é€æ˜éƒ¨åˆ†è®¾ç½®ä¸ºé»‘è‰²
        imageDataContent[i] = 0;
        imageDataContent[i + 1] = 0;
        imageDataContent[i + 2] = 0;
        imageDataContent[i + 3] = 255;
      } else {
        // å°†çº¿æ¡éƒ¨åˆ†è®¾ç½®ä¸ºç™½è‰²
        imageDataContent[i] = 255;
        imageDataContent[i + 1] = 255;
        imageDataContent[i + 2] = 255;
        imageDataContent[i + 3] = 255;
      }
    }
    // å°†ä¿®æ”¹åçš„å›¾åƒæ•°æ®å¯¼å‡ºä¸ºå›¾ç‰‡æ ¼å¼
    const exportCanvas = document.createElement('canvas');
    exportCanvas.width = canvas.clientWidth;
    exportCanvas.height = canvas.clientHeight;
    const exportCtx = exportCanvas.getContext('2d');
    exportCtx.putImageData(imageData, 0, 0);
    // maskæ”¾å¤§åˆ°å’ŒåŸå›¾ä¸€è‡´
    const size = await getImageOriginSize(_image);
    const finalMask = await scaleImage(exportCanvas.toDataURL(), size.width, size.height);
    resolve(finalMask);
  });
}

</code></pre> 
<p>ç„¶åæˆ‘ä»¬å°†è½¬æ¢åçš„é®ç½©å›¾ä»¥ <code>base64</code> çš„å½¢å¼ä½œä¸º <code>mask</code> å‚æ•°æ·»åŠ åˆ°æ¥å£å‚æ•°ä¸­ï¼Œæ·»åŠ ä¸€äº›æ­£å‘å…³é”®å­—ç­‰å‚æ•°è¿›è¡Œå›¾ç”Ÿå›¾æ¥å£è¯·æ±‚ï¼Œè¿”å›ç»“æœå’Œä¸Šè¿° <code>API</code> éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ€ç»ˆå°±å¯ä»¥å¾—åˆ°ä¸‹é¢æ‰€ç¤ºçš„å›¾åƒï¼Œå¯ä»¥è§‚å¯Ÿåˆ°è¢«æ¶‚æŠ¹åŒºåŸŸçš„èŠ±æœµæ¶ˆå¤±äº† <code>ğŸŒº</code>ã€‚</p> 
<pre><code>const response = await img2img({
  init_images: [sourceImage.value],
  mask: data.mask,
  // ...
});

</code></pre> 
<p><img src="https://images2.imgbox.com/47/58/IiIE87uq_o.png" alt="extra_img_result.png"></p> 
<blockquote> 
 <p><code>ğŸ’¡</code> æœ¬æ–‡å®ç°ä¸­å°†ç”¨åˆ°éå¸¸å¤šå…³äºå›¾åƒè½¬æ¢çš„æ–¹æ³•ï¼Œï¼Œæ¯”å¦‚PNGè½¬Base64ã€URLè½¬Base64ã€Canvasè½¬Base64ç­‰ï¼Œè¿™äº›æ–¹æ³•çš„å…·ä½“å®ç°å°†æ”¾åœ¨æ–‡ç« æœ«å°¾çš„æ±‡æ€»ä¸­ã€‚</p> 
</blockquote> 
<h4><a id="_359"></a>åæœŸå¤„ç†</h4> 
<p><strong>åæœŸå¤„ç†æ¥å£</strong>ï¼Œå¯ä»¥å®ç°å›¾ç‰‡<strong>é«˜æ¸…æ”¾å¤§ã€è£åˆ‡ã€æ‰©å……</strong>ç­‰åŠŸèƒ½ï¼Œæœ‰æ‰¹é‡å’Œå•å›¾è°ƒæ•´ä¸¤ç§æ¥å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºæ˜¯å•å›¾è°ƒæ•´æ¥å£ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å•å›¾ä¼˜åŒ– <code>API</code> å¯ä»¥æ¥æ”¶çš„å‚æ•°æœ‰å“ªäº›ï¼š</p> 
<p><img src="https://images2.imgbox.com/33/5d/l9Q6PUVd_o.png" alt="extraSingleImage.png"></p> 
<pre><code>{
  "resize_mode": 0,
  "show_extras_results": true,
  "gfpgan_visibility": 0,
  "codeformer_visibility": 0,
  "codeformer_weight": 0,
  "upscaling_resize": 2,
  "upscaling_resize_w": 512,
  "upscaling_resize_h": 512,
  "upscaling_crop": true,
  "upscaler_1": "None",
  "upscaler_2": "None",
  "extras_upscaler_2_visibility": 0,
  "upscale_first": false,
  "image": ""                       // åŸå›¾
}

</code></pre> 
<p><img src="https://images2.imgbox.com/9b/0d/neFpscx1_o.png" alt="crop.png"></p> 
<h4><a id="_387"></a>å…¶ä»–</h4> 
<h5><a id="_389"></a>æ›´å¤šæ¥å£</h5> 
<p><code>stable-diffusion-webui</code> è¿˜æœ‰è®¸å¤šå®ç”¨çš„ <code>API</code> å¯ä»¥è°ƒç”¨ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡<strong>è¿›åº¦æŸ¥è¯¢</strong>æ¥å£å®æ—¶è·å–åˆ°ç”Ÿæˆå›¾ç‰‡çš„è¿›åº¦ã€å‰©ä½™æ—¶é—´ã€æ’é˜ŸçŠ¶æ€ç­‰ã€å¯ä»¥é€šè¿‡<strong>é…ç½®æŸ¥è¯¢</strong>æ¥å£è·å–åˆ°é…ç½®ä¿¡æ¯ã€å·²å®‰è£…çš„æ¨¡å‹åˆ—è¡¨ç­‰ï¼›<strong>åå‘æ¨ç†</strong>æ¥å£å¯ä»¥é€šè¿‡å·²ç”Ÿæˆçš„å›¾ç‰‡åæ¨å‡ºå›¾åƒä¿¡æ¯ã€æè¿°å…³é”®å­—ç­‰ã€‚å…·ä½“æ¥å£ä½¿ç”¨æ–¹æ³•å’Œå‚æ•°éƒ½å¯ä»¥åœ¨ <code>API</code> æ–‡æ¡£ä¸­æŸ¥è¯¢ã€‚</p> 
<p><img src="https://images2.imgbox.com/0f/70/rT4QcVxV_o.png" alt="progress.png"></p> 
<h5><a id="_395"></a>å®ç”¨æ–¹æ³•</h5> 
<p>åœ¨åš <code>Web</code> å›¾ç‰‡å¤„ç†åº”ç”¨æ—¶éœ€è¦ç”¨åˆ°å¾ˆå¤šå›¾ç‰‡ç›¸å…³çš„å®ç”¨æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ç®€å•æ±‡æ€»ã€‚</p> 
<h6><a id="_CanvasBase64PNG_399"></a>â‘  Canvasè½¬Base64/PNG</h6> 
<p>è¦å°† <code>Canvas</code> è½¬æ¢ä¸º <code>Base64</code> æ ¼å¼å›¾åƒæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ <code>Canvas</code> çš„ <code>toDataURL()</code> æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†è¿”å›ä¸€ä¸ªåŒ…å«å›¾åƒæ•°æ®çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…æ‹¬å›¾åƒçš„ç±»å‹ï¼Œå¦‚ <code>image/png</code> å’Œ <code>Base64</code> ç¼–ç çš„å›¾åƒæ•°æ®ã€‚</p> 
<pre><code>// è·å– Canvas å…ƒç´ 
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
// å°† Canvas è½¬æ¢ä¸º Base64 æ ¼å¼çš„å›¾åƒæ•°æ®
var dataURL = canvas.toDataURL();

</code></pre> 
<h6><a id="_URLBase64_412"></a>â‘¡ å›¾ç‰‡URLè½¬Base64</h6> 
<pre><code>export const convertUrlToBase64 = src =&gt; {
  return new Promise(resolve =&gt; {
    const img = new Image()
    img.crossOrigin = ''
    img.src = src
    img.onload = function () {
      const canvas = document.createElement('canvas');
      canvas.width = img.width;
      canvas.height = img.height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0, img.width, img.height);
      const ext = img.src.substring(img.src.lastIndexOf('.') + 1).toLowerCase();
      const dataURL = canvas.toDataURL('image/' + ext);
      resolve(dataURL);
    }
  });
};

</code></pre> 
<h6><a id="_Base64PNG_435"></a>â‘¢ Base64è½¬PNG</h6> 
<pre><code>export const convertBase64ToImage = src =&gt; {
  return new Promise((resolve) =&gt; {
    const arr = src.split(',');
    const byteString = atob(arr[1]);
    const ab = new ArrayBuffer(byteString.length);
    const ia = new Uint8Array(ab);
    for (let i = 0; i &lt; byteString.length; i++) {
      ia[i] = byteString.charCodeAt(i);
    }
    const file = new File([ab], generateRandomId(), { type: 'image/png' });
    resolve(file);
  });
}

</code></pre> 
<h6><a id="__454"></a>â‘£ è·å–å›¾åƒåŸå§‹å°ºå¯¸</h6> 
<pre><code>export const getImageOriginSize = (src) =&gt; {
  return new Promise((resolve) =&gt; {
    const image = new Image();
    image.src = src;
    image.onload = () =&gt; {
      resolve({
        width: image.naturalWidth,
        height: image.naturalHeight
      });
    };
  });
}

</code></pre> 
<h6><a id="_Base64_472"></a>â‘¤ ç­‰æ¯”ç¼©æ”¾Base64</h6> 
<pre><code>export const scaleImage = (src, width, height) =&gt; {
  return new Promise((resolve) =&gt; {
    const image = new Image();
    image.src = src;
    image.onload = () =&gt; {
      const canvas = document.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(image, 0, 0, width, height);
      resolve(canvas.toDataURL());
    };
  })
};

</code></pre> 
<p>è¿˜æœ‰ä¸Šè¿°æ–‡ç« ä¸­æåˆ°çš„å°†é€æ˜å½©è‰² <code>Canvas</code> è½¬åŒ–ä¸º <code>stable-diffusion-webui</code> å±€éƒ¨é‡ç»˜æ‰€éœ€çš„<strong>é»‘åº•ç™½è‰²å›¾æ¡ˆ</strong>æ–¹æ³•ç­‰ã€‚</p> 
<h3><a id="_494"></a>æ€»ç»“</h3> 
<p>æœ¬æ–‡ä¸»è¦åŒ…å«çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬ï¼š</p> 
<ul><li><code>stable-diffusion-webui</code> çš„åŸºæœ¬ä»‹ç»</li><li><code>stable-diffusion-webui</code> å®‰è£…åŠ <code>API</code> ç¯å¢ƒé…ç½®</li><li>æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€å±€éƒ¨é‡ç»˜ã€åæœŸå¤„ç†ç­‰ <code>API</code> æ¥å£è°ƒç”¨</li><li>å›¾åƒå¤„ç†å¼€å‘ä¸­å¸¸ç”¨åˆ°ä¸€äº›æ–¹æ³•å¦‚ <code>Base64</code>ã€<code>PNG</code>ã€<code>Canvas</code>åŠ <code>URL</code> ç›¸äº’è½¬æ¢ã€<code>Canvas</code> é¢œè‰²è½¬æ¢ç­‰</li></ul> 
<blockquote> 
 <p>æƒ³äº†è§£å…¶ä»–å‰ç«¯çŸ¥è¯†æˆ–å…¶ä»–æœªåœ¨æœ¬æ–‡ä¸­è¯¦ç»†æè¿°çš„<strong>AIç›¸å…³</strong>å¼€å‘æŠ€æœ¯ç›¸å…³çŸ¥è¯†ï¼Œå¯é˜…è¯»æˆ‘å¾€æœŸçš„æ–‡ç« ã€‚å¦‚æœæœ‰ç–‘é—®å¯ä»¥åœ¨è¯„è®ºä¸­<strong>ç•™è¨€</strong>ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦å¿˜äº†<strong>ä¸€é”®ä¸‰è¿å“¦ ğŸ‘</strong>ã€‚</p> 
</blockquote> 
<h3><a id="_507"></a>å†™åœ¨æœ€å</h3> 
<p><font face="å¹¼åœ†" size="4" color="red">æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ï¼Œèµ é€å…¨å¥—AIGCå­¦ä¹ èµ„æ–™ï¼ŒåŒ…å«AIç»˜ç”»ã€AIäººå·¥æ™ºèƒ½ç­‰å‰æ²¿ç§‘æŠ€æ•™ç¨‹å’Œè½¯ä»¶å·¥å…·ï¼Œå…·ä½“çœ‹è¿™é‡Œã€‚<br> â€‹<img src="https://images2.imgbox.com/e4/e7/yTQBnD0r_o.jpg"></font></p> 
<p>AIGCæŠ€æœ¯çš„æœªæ¥å‘å±•å‰æ™¯å¹¿é˜”ï¼Œéšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒAIGCæŠ€æœ¯ä¹Ÿå°†ä¸æ–­æé«˜ã€‚æœªæ¥ï¼ŒAIGCæŠ€æœ¯å°†åœ¨æ¸¸æˆå’Œè®¡ç®—é¢†åŸŸå¾—åˆ°æ›´å¹¿æ³›çš„åº”ç”¨ï¼Œä½¿æ¸¸æˆå’Œè®¡ç®—ç³»ç»Ÿå…·æœ‰æ›´é«˜æ•ˆã€æ›´æ™ºèƒ½ã€æ›´çµæ´»çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼ŒAIGCæŠ€æœ¯ä¹Ÿå°†ä¸äººå·¥æ™ºèƒ½æŠ€æœ¯ç´§å¯†ç»“åˆï¼Œåœ¨æ›´å¤šçš„é¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´å½±å“è‡³å…³é‡è¦ã€‚æœªæ¥ï¼ŒAIGCæŠ€æœ¯å°†ç»§ç»­å¾—åˆ°æé«˜ï¼ŒåŒæ—¶ä¹Ÿå°†ä¸äººå·¥æ™ºèƒ½æŠ€æœ¯ç´§å¯†ç»“åˆï¼Œåœ¨æ›´å¤šçš„é¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚<br> â€ƒ<br> <img src="https://images2.imgbox.com/24/09/3s20FLeL_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>ä¸€ã€AIGCæ‰€æœ‰æ–¹å‘çš„å­¦ä¹ è·¯çº¿</strong></p> 
<p>AIGCæ‰€æœ‰æ–¹å‘çš„æŠ€æœ¯ç‚¹åšçš„æ•´ç†ï¼Œå½¢æˆå„ä¸ªé¢†åŸŸçš„çŸ¥è¯†ç‚¹æ±‡æ€»ï¼Œå®ƒçš„ç”¨å¤„å°±åœ¨äºï¼Œä½ å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„çŸ¥è¯†ç‚¹å»æ‰¾å¯¹åº”çš„å­¦ä¹ èµ„æºï¼Œä¿è¯è‡ªå·±å­¦å¾—è¾ƒä¸ºå…¨é¢ã€‚</p> 
<p><img src="https://images2.imgbox.com/a0/d1/Ab6FF93L_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/9a/f6/tsYQPIli_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>äºŒã€AIGCå¿…å¤‡å·¥å…·</strong></p> 
<p>å·¥å…·éƒ½å¸®å¤§å®¶æ•´ç†å¥½äº†ï¼Œå®‰è£…å°±å¯ç›´æ¥ä¸Šæ‰‹ï¼<br> <img src="https://images2.imgbox.com/02/dc/DMsexxnD_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>ä¸‰ã€æœ€æ–°AIGCå­¦ä¹ ç¬”è®°</strong></p> 
<p>å½“æˆ‘å­¦åˆ°ä¸€å®šåŸºç¡€ï¼Œæœ‰è‡ªå·±çš„ç†è§£èƒ½åŠ›çš„æ—¶å€™ï¼Œä¼šå»é˜…è¯»ä¸€äº›å‰è¾ˆæ•´ç†çš„ä¹¦ç±æˆ–è€…æ‰‹å†™çš„ç¬”è®°èµ„æ–™ï¼Œè¿™äº›ç¬”è®°è¯¦ç»†è®°è½½äº†ä»–ä»¬å¯¹ä¸€äº›æŠ€æœ¯ç‚¹çš„ç†è§£ï¼Œè¿™äº›ç†è§£æ˜¯æ¯”è¾ƒç‹¬åˆ°ï¼Œå¯ä»¥å­¦åˆ°ä¸ä¸€æ ·çš„æ€è·¯ã€‚<br> <img src="https://images2.imgbox.com/aa/50/rdetDG5H_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/4f/01/qelS9BZ5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>å››ã€AIGCè§†é¢‘æ•™ç¨‹åˆé›†</strong></p> 
<p>è§‚çœ‹å…¨é¢é›¶åŸºç¡€å­¦ä¹ è§†é¢‘ï¼Œçœ‹è§†é¢‘å­¦ä¹ æ˜¯æœ€å¿«æ·ä¹Ÿæ˜¯æœ€æœ‰æ•ˆæœçš„æ–¹å¼ï¼Œè·Ÿç€è§†é¢‘ä¸­è€å¸ˆçš„æ€è·¯ï¼Œä»åŸºç¡€åˆ°æ·±å…¥ï¼Œè¿˜æ˜¯å¾ˆå®¹æ˜“å…¥é—¨çš„ã€‚</p> 
<p><img src="https://images2.imgbox.com/63/ad/5SDF5gZw_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>äº”ã€å®æˆ˜æ¡ˆä¾‹</strong></p> 
<p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œè¦å­¦ä¼šè·Ÿç€è§†é¢‘ä¸€èµ·æ•²ï¼Œè¦åŠ¨æ‰‹å®æ“ï¼Œæ‰èƒ½å°†è‡ªå·±çš„æ‰€å­¦è¿ç”¨åˆ°å®é™…å½“ä¸­å»ï¼Œè¿™æ—¶å€™å¯ä»¥æç‚¹å®æˆ˜æ¡ˆä¾‹æ¥å­¦ä¹ ã€‚<br> <img src="https://images2.imgbox.com/d0/5c/W0vANuPS_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> â€‹<img src="https://images2.imgbox.com/a5/c9/rIuYNZT6_o.jpg"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/973b9a1503adc6ba3f0bbeacac5bacc0/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€2024æœ€æ–°ã€‘å²ä¸Šæœ€å¼ºAI-GPT4oå›½å†…ä¿å§†çº§ä½¿ç”¨æ•™ç¨‹</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bf2485ccaea6d2c79bb1cc8c0accc6f1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">æ•°æ®ç»“æ„æ ˆå’Œé˜Ÿåˆ—</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>