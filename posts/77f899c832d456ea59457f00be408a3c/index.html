<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Studio 中使用 SQLite 数据库实现登录和注册 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/77f899c832d456ea59457f00be408a3c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Android Studio 中使用 SQLite 数据库实现登录和注册">
  <meta property="og:description" content="引言
在 Android 应用程序中，管理用户数据至关重要。SQLite 是 Android 中广泛使用的轻量级数据库，非常适合存储和管理用户登录和注册信息。本文将指导你如何在 Android Studio 中使用 SQLite 数据库实现登录和注册功能。
创建 SQLite 数据库
首先，你需要创建一个 SQLite 数据库来存储用户数据。为此，请执行以下步骤：
在你的项目中创建一个名为 DBHelper 的类，它扩展自 SQLiteOpenHelper。在 DBHelper 类中，实现 onCreate() 方法，该方法将在数据库首次创建时调用。在 onCreate() 方法中，使用 execSQL() 方法创建名为 userInfo 的表，其中包含 uname（用户名）和 psw（密码）列。在 DBHelper 类中，还实现 onUpgrade() 方法，该方法将在数据库版本更改时调用。在这个方法中，你可以执行必要的更新操作。 实现登录功能
要实现登录功能，请执行以下步骤：
在你的登录活动中，获取用户名和密码输入框的引用。使用 DBHelper 类获取数据库的可写实例。执行 SQL 查询以检查输入的用户名和密码是否与数据库中的记录匹配。如果查询结果不为空，则表示找到了匹配的记录，并且显示 &#34;登录成功&#34; 的消息。如果查询结果为空，则显示 &#34;用户名或密码输入错误&#34; 的消息。 实现注册功能
要实现注册功能，请执行以下步骤：
在你的注册活动中，获取用户名和密码输入框的引用。使用 DBHelper 类获取数据库的可写实例。检查用户名和密码是否为空。如果为空，则显示 &#34;用户名或密码未输入&#34; 的消息。执行 SQL 查询以检查输入的用户名是否已存在。如果查询结果为空，则表示用户名不存在，可以进行注册。使用 ContentValues 对象创建包含用户名和密码的新记录。使用 insert() 方法将新记录插入到数据库中。显示 &#34;注册成功&#34; 的消息，并跳转回登录界面。 示例代码
DBHelper.java
package com.example.loginandregister; import android.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-17T21:07:50+08:00">
    <meta property="article:modified_time" content="2024-04-17T21:07:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Studio 中使用 SQLite 数据库实现登录和注册</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>引言</strong></p> 
<p>在 Android 应用程序中，管理用户数据至关重要。SQLite 是 Android 中广泛使用的轻量级数据库，非常适合存储和管理用户登录和注册信息。本文将指导你如何在 Android Studio 中使用 SQLite 数据库实现登录和注册功能。</p> 
<p><strong>创建 SQLite 数据库</strong></p> 
<p>首先，你需要创建一个 SQLite 数据库来存储用户数据。为此，请执行以下步骤：</p> 
<ol><li>在你的项目中创建一个名为 <code>DBHelper</code> 的类，它扩展自 <code>SQLiteOpenHelper</code>。</li><li>在 <code>DBHelper</code> 类中，实现 <code>onCreate()</code> 方法，该方法将在数据库首次创建时调用。在 <code>onCreate()</code> 方法中，使用 <code>execSQL()</code> 方法创建名为 <code>userInfo</code> 的表，其中包含 <code>uname</code>（用户名）和 <code>psw</code>（密码）列。</li><li>在 <code>DBHelper</code> 类中，还实现 <code>onUpgrade()</code> 方法，该方法将在数据库版本更改时调用。在这个方法中，你可以执行必要的更新操作。</li></ol> 
<p><strong>实现登录功能</strong></p> 
<p>要实现登录功能，请执行以下步骤：</p> 
<ol><li>在你的登录活动中，获取用户名和密码输入框的引用。</li><li>使用 <code>DBHelper</code> 类获取数据库的可写实例。</li><li>执行 SQL 查询以检查输入的用户名和密码是否与数据库中的记录匹配。</li><li>如果查询结果不为空，则表示找到了匹配的记录，并且显示 "登录成功" 的消息。</li><li>如果查询结果为空，则显示 "用户名或密码输入错误" 的消息。</li></ol> 
<p><strong>实现注册功能</strong></p> 
<p>要实现注册功能，请执行以下步骤：</p> 
<ol><li>在你的注册活动中，获取用户名和密码输入框的引用。</li><li>使用 <code>DBHelper</code> 类获取数据库的可写实例。</li><li>检查用户名和密码是否为空。如果为空，则显示 "用户名或密码未输入" 的消息。</li><li>执行 SQL 查询以检查输入的用户名是否已存在。</li><li>如果查询结果为空，则表示用户名不存在，可以进行注册。</li><li>使用 <code>ContentValues</code> 对象创建包含用户名和密码的新记录。</li><li>使用 <code>insert()</code> 方法将新记录插入到数据库中。</li><li>显示 "注册成功" 的消息，并跳转回登录界面。</li></ol> 
<p><strong>示例代码</strong></p> 
<p><strong>DBHelper.java</strong></p> 
<pre><code class="language-java">package com.example.loginandregister;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHelper extends SQLiteOpenHelper {

    public DBHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        //创建一个表
        String SQLstr = "create table userInfo(uname text,psw text)";
        db.execSQL(SQLstr);
        //往表里边插入一个数据
        SQLstr = "insert into userInfo(uname,psw) values('admin','123456')";
        db.execSQL(SQLstr);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
}
</code></pre> 
<p><strong>登录界面设计</strong></p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"&gt;

    &lt;EditText
        android:id="@+id/username"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="请输入用户名" /&gt;

    &lt;EditText
        android:id="@+id/password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="请输入密码"
        android:inputType="textPassword" /&gt;

    &lt;Button
        android:id="@+id/btn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="登录" /&gt;

    &lt;TextView
        android:id="@+id/zhuce"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="注册" /&gt;

&lt;/LinearLayout&gt;
</code></pre> 
<p><strong>登录界面功能代码</strong></p> 
<pre><code class="language-java">package com.example.login;

import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // 导入必要的包
        import android.database.sqlite.SQLiteDatabase;

        // 添加必要的权限
        &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;

        // 创建 DBHelper 类的实例，用于管理名为 "test.db" 的 SQLite 数据库
        DBHelper dbHelper = new DBHelper(MainActivity.this,"test.db",null,1);

        // 获取数据库的可写实例
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        // 获取用户名和密码输入框的引用
        EditText unametxt = findViewById(R.id.username);
        EditText pswtxt = findViewById(R.id.password);

        // 处理登录按钮的点击事件
        Button btn = findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // 获取用户名和密码输入框中的文本
                String uname = unametxt.getText().toString();
                String psw = pswtxt.getText().toString();

                // 执行 SQL 查询，以检查输入的用户名和密码是否与数据库中的记录匹配
                Cursor cursor =  db.query("userInfo",new String[]{"uname,psw"},"uname=? and psw=?",new String[]{uname,psw},null,null,null);

                // 检查查询结果是否为空
                if(cursor.moveToFirst()) {
                    // 如果结果不为空，则表示找到了匹配的记录，并且显示 "登录成功" 的 Toast 消息
                    Toast.makeText(MainActivity.this,"登录成功",Toast.LENGTH_SHORT).show();
                } else {
                    // 如果结果为空，则显示 "用户名或密码输入错误" 的 Toast 消息
                    Toast.makeText(MainActivity.this,"用户名或密码输入错误",Toast.LENGTH_SHORT).show();
                }
            }
        });

        // 处理注册按钮的点击事件
        TextView zhuce = findViewById(R.id.zhuce);
        zhuce.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // 创建到 MainActivity2 类的意图并启动该活动
                Intent intent = new Intent(MainActivity.this,MainActivity2.class);
                startActivity(intent);
            }
        });
    }
}
</code></pre> 
<p><strong>注册界面设计</strong></p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"&gt;

    &lt;EditText
        android:id="@+id/username"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="请输入用户名" /&gt;

    &lt;EditText
        android:id="@+id/password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="请输入密码"
        android:inputType="textPassword" /&gt;

    &lt;Button
        android:id="@+id/btn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="注册" /&gt;

&lt;/LinearLayout&gt;
</code></pre> 
<p><strong>注册界面功能代码</strong></p> 
<pre><code class="language-java">package com.example.login;

import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import androidx.appcompat.app.AppCompatActivity;

public class MainActivity2 extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

        // 导入必要的包
        import android.database.sqlite.SQLiteDatabase;

        // 添加必要的权限
        &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;

        // 创建 DBHelper 类的实例，用于管理名为 "test.db" 的 SQLite 数据库
        DBHelper dbHelper = new DBHelper(MainActivity2.this,"test.db",null,1);

        // 获取数据库的可写实例
        SQLiteDatabase db = dbHelper.getWritableDatabase();

        // 获取用户名和密码输入框的引用
        EditText unametxt = findViewById(R.id.username);
        EditText pswtxt = findViewById(R.id.password);

        // 处理注册按钮的点击事件
        Button btn = findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // 获取用户名和密码输入框中的文本
                String uname = unametxt.getText().toString();
                String psw = pswtxt.getText().toString();

                // 执行 SQL 查询，以检查输入的用户名是否已存在
                Cursor cursor =  db.query("userInfo",new String[]{"uname"},"uname=?",new String[]{uname},null,null,null);

                // 检查查询结果是否为空
                if(cursor.moveToFirst()) {
                    // 如果结果不为空，则表示用户名已存在，并且显示 "用户名已存在" 的 Toast 消息
                    Toast.makeText(MainActivity2.this,"用户名已存在",Toast.LENGTH_SHORT).show();
                } else {
                    // 如果结果为空，则表示用户名不存在，并且执行 SQL 插入语句，将用户名和密码插入数据库
                    String SQLstr = "insert into userInfo(uname,psw) values(?,?)";
                    db.execSQL(SQLstr,new String[]{uname,psw});

                    // 显示 "注册成功" 的 Toast 消息
                    Toast.makeText(MainActivity2.this,"注册成功",Toast.LENGTH_SHORT).show();

                    // 创建到 MainActivity 类的意图并启动该活动
                    Intent intent = new Intent(MainActivity2.this,MainActivity.class);
                    startActivity(intent);
                }
            }
        });
    }
}
</code></pre> 
<p>通过使用 SQLite 数据库，我们成功地实现了 Android 应用程序中的登录和注册功能。本教程旨在为开发者提供一个循序渐进的指南，帮助他们轻松地将这些功能集成到自己的应用程序中。希望这篇文章能为广大开发者带来帮助，使他们能够为用户提供安全且无缝的登录和注册体验。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d1652b0930d1466d5cd15e34e21c9435/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端篇-js中var、let、const详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb2564771543617353e14eb11c1a0637/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【flink报错】flink cdc无主键时的操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>