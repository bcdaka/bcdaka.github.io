<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决在Windows安装stable diffusion遇到“Torch is not able to use GPU”的问题 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/bc51f1bb3bd0946fe385d7d31b6c50eb/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="解决在Windows安装stable diffusion遇到“Torch is not able to use GPU”的问题">
  <meta property="og:description" content="解决在Windows安装stable diffusion遇到“Torch is not able to use GPU”的问题 遇到的问题解决方法参考链接 遇到的问题 在Windows上安装stable diffusion的最后一步执行webui-user.bat时，提示了错误信息AssertionError: Torch is not able to use GPU; add --skip-torch-cuda-test to COMMANDLINE_ARGS variable to disable this check
具体错误代码如下：
venv &#34;C:\Users\giray\stable-diffusion-webui\venv\Scripts\Python.exe&#34; Python 3.10.6 (tags/v3.10.6:9c7b4bd, Aug 1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)] Commit hash: 67d011b Traceback (most recent call last): File &#34;C:\Users\giray\stable-diffusion-webui\launch.py&#34;, line 110, in run_python(&#34;import torch; assert torch.cuda.is_available(), &#39;Torch is not able to use GPU; add --skip-torch-cuda-test to COMMANDLINE_ARGS variable to disable this check&#39;&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-04-13T15:33:58+08:00">
    <meta property="article:modified_time" content="2023-04-13T15:33:58+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决在Windows安装stable diffusion遇到“Torch is not able to use GPU”的问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>解决在Windows安装stable diffusion遇到“Torch is not able to use GPU”的问题</h4> 
 <ul><li><a href="#_2" rel="nofollow">遇到的问题</a></li><li><a href="#_27" rel="nofollow">解决方法</a></li><li><a href="#_36" rel="nofollow">参考链接</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>遇到的问题</h2> 
<p>在Windows上安装stable diffusion的最后一步执行<strong>webui-user.bat</strong>时，提示了错误信息<strong>AssertionError: Torch is not able to use GPU; add --skip-torch-cuda-test to COMMANDLINE_ARGS variable to disable this check</strong></p> 
<p>具体错误代码如下：</p> 
<pre><code class="prism language-javascript">venv <span class="token string">"C:\Users\giray\stable-diffusion-webui\venv\Scripts\Python.exe"</span>
Python <span class="token number">3.10</span><span class="token number">.6</span> <span class="token punctuation">(</span>tags<span class="token operator">/</span>v3<span class="token punctuation">.</span><span class="token number">10.6</span><span class="token operator">:</span>9c7b4bd<span class="token punctuation">,</span> Aug <span class="token number">1</span> <span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token operator">:</span><span class="token number">53</span><span class="token operator">:</span><span class="token number">49</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token constant">MSC</span> v<span class="token punctuation">.</span><span class="token number">1932</span> <span class="token number">64</span> <span class="token function">bit</span> <span class="token punctuation">(</span><span class="token constant">AMD64</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
Commit hash<span class="token operator">:</span> 67d011b
<span class="token function">Traceback</span> <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token operator">:</span>
File <span class="token string">"C:\Users\giray\stable-diffusion-webui\launch.py"</span><span class="token punctuation">,</span> line <span class="token number">110</span><span class="token punctuation">,</span> <span class="token keyword">in</span>
<span class="token function">run_python</span><span class="token punctuation">(</span><span class="token string">"import torch; assert torch.cuda.is_available(), 'Torch is not able to use GPU; add --skip-torch-cuda-test to COMMANDLINE_ARGS variable to disable this check'"</span><span class="token punctuation">)</span>
File <span class="token string">"C:\Users\giray\stable-diffusion-webui\launch.py"</span><span class="token punctuation">,</span> line <span class="token number">60</span><span class="token punctuation">,</span> <span class="token keyword">in</span> run_python
<span class="token keyword">return</span> <span class="token function">run</span><span class="token punctuation">(</span>f<span class="token string">'"{python}" -c "{code}"'</span><span class="token punctuation">,</span> desc<span class="token punctuation">,</span> errdesc<span class="token punctuation">)</span>
File <span class="token string">"C:\Users\giray\stable-diffusion-webui\launch.py"</span><span class="token punctuation">,</span> line <span class="token number">54</span><span class="token punctuation">,</span> <span class="token keyword">in</span> run
raise <span class="token function">RuntimeError</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
<span class="token literal-property property">RuntimeError</span><span class="token operator">:</span> Error running command<span class="token punctuation">.</span>
<span class="token literal-property property">Command</span><span class="token operator">:</span> <span class="token string">"C:\Users\giray\stable-diffusion-webui\venv\Scripts\python.exe"</span> <span class="token operator">-</span>c <span class="token string">"import torch; assert torch.cuda.is_available(), 'Torch is not able to use GPU; add --skip-torch-cuda-test to COMMANDLINE_ARGS variable to disable this check'"</span>
Error code<span class="token operator">:</span> <span class="token number">1</span>
<span class="token literal-property property">stdout</span><span class="token operator">:</span>
<span class="token literal-property property">stderr</span><span class="token operator">:</span> <span class="token function">Traceback</span> <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token operator">:</span>
File <span class="token string">""</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span>
<span class="token literal-property property">AssertionError</span><span class="token operator">:</span> Torch is not able to use <span class="token constant">GPU</span><span class="token punctuation">;</span> add <span class="token operator">--</span>skip<span class="token operator">-</span>torch<span class="token operator">-</span>cuda<span class="token operator">-</span>test to <span class="token constant">COMMANDLINE_ARGS</span> variable to disable <span class="token keyword">this</span> check
</code></pre> 
<h2><a id="_27"></a>解决方法</h2> 
<p>参考了github上的issue，需要修改<strong>webui-user.bat</strong>文件，具体更改如下：</p> 
<blockquote> 
 <p>COMMANDLINE_ARGS=<br> and change it to:<br> COMMANDLINE_ARGS= --lowvram --precision full --no-half --skip-torch-cuda-test</p> 
</blockquote> 
<p>保存修改之后再次运行<strong>webui-user.bat</strong>就可以了。如果这个解决方法还没解决问题，可以查看同个issue下的其它回答，或者能找到解决方法。</p> 
<h2><a id="_36"></a>参考链接</h2> 
<ol><li><a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/issues/1742#issuecomment-1288228624">Torch is not able to use GPU</a></li><li><a href="https://stable-diffusion-art.com/install-windows/" rel="nofollow">How to install Stable Diffusion on Windows (AUTOMATIC1111)</a></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cd9f6b51cd79c742a34f9713f1afe8e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">’sass_binary_site‘ is not a valid npm option问题的产生原因及解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/89efbeb5a6315752744d807d05005a26/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何用SPSS做logistic回归</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>