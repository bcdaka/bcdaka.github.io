<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hadoop的安装与配置 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0d9821bf928a6a48902e172186e9b448/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Hadoop的安装与配置">
  <meta property="og:description" content="创建hadoop用户 创建了可以登陆的 hadoop 用户，并使用 /bin/bash 作为 shell。
sudo useradd -m hadoop -s /bin/bash 为 hadoop 用户增加管理员权限，方便部署
sudo passwd hadoop 最后注销当前用户（点击屏幕右上角的齿轮，选择注销），返回登陆界面。在登陆界面中选择刚创建的 hadoop 用户进行登陆。
sudo adduser hadoop sudo 更新apt 用 hadoop 用户登录后，我们先更新一下 apt，后续我们使用 apt 安装软件，如果没更新可能有一些软件安装不了
sudo apt-get update 后续需要更改一些配置文件，安装一下vim
sudo apt-get install vim 安装SSH、配置SSH无密码登陆 安装 SSH server
sudo apt-get install openssh-server 使用如下命令登陆本机
ssh localhost 首先退出刚才的 ssh，就回到了我们原先的终端窗口，然后利用 ssh-keygen 生成密钥，并将密钥加入到授权中
exit # 退出刚才的 ssh localhost cd ~/.ssh/ # 若没有该目录，请先执行一次ssh localhost ssh-keygen -t rsa # 会有提示，都按回车就可以 cat .">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-08T18:20:15+08:00">
    <meta property="article:modified_time" content="2024-06-08T18:20:15+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hadoop的安装与配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3></h3> 
<h3>创建hadoop用户</h3> 
<p> 创建了可以登陆的 hadoop 用户，并使用 /bin/bash 作为 shell。</p> 
<pre><code class="language-bash">sudo useradd -m hadoop -s /bin/bash</code></pre> 
<p> 为 hadoop 用户增加管理员权限，方便部署</p> 
<pre><code class="language-bash">sudo passwd hadoop</code></pre> 
<p>  最后注销当前用户（点击屏幕右上角的齿轮，选择注销），返回登陆界面。在登陆界面中选择刚创建的 hadoop 用户进行登陆。</p> 
<pre><code class="language-bash">sudo adduser hadoop sudo</code></pre> 
<h3>更新apt</h3> 
<p>用 hadoop 用户登录后，我们先更新一下 apt，后续我们使用 apt 安装软件，如果没更新可能有一些软件安装不了</p> 
<pre><code class="language-bash">sudo apt-get update</code></pre> 
<p>后续需要更改一些配置文件，安装一下vim</p> 
<pre><code class="language-bash">sudo apt-get install vim</code></pre> 
<h3>安装SSH、配置SSH无密码登陆</h3> 
<p> 安装 SSH server</p> 
<pre><code class="language-bash">sudo apt-get install openssh-server</code></pre> 
<p> 使用如下命令登陆本机</p> 
<pre><code class="language-bash">ssh localhost</code></pre> 
<p>首先退出刚才的 ssh，就回到了我们原先的终端窗口，然后利用 ssh-keygen 生成密钥，并将密钥加入到授权中</p> 
<pre><code class="language-bash">exit                           # 退出刚才的 ssh localhost
cd ~/.ssh/                     # 若没有该目录，请先执行一次ssh localhost
ssh-keygen -t rsa              # 会有提示，都按回车就可以
cat ./id_rsa.pub &gt;&gt; ./authorized_keys  # 加入授权</code></pre> 
<p>此时再用 <code>ssh localhost</code> 命令，无需输入密码就可以直接登陆了</p> 
<h3>安装Java环境</h3> 
<p>全部资料都放在下面的链接中了</p> 
<p>链接：https://pan.baidu.com/s/1k86b13HvuB8wAF2b7iCzBA?pwd=ptr0 <br> 提取码：ptr0</p> 
<p>请把压缩格式的文件jdk-8u162-linux-x64.tar.gz下载到本地电脑</p> 
<p>通过VMware tools的共享文档或者Xftp软件将压缩包放进虚拟机中，假设保存在“/home/lin/Downloads/”目录下，解压。</p> 
<pre><code class="language-bash">cd /home/lin/Downloads
sudo tar -zxvf jdk-8u162-linux-x64.tar.gz -C /usr/lib #解压并将解压后的文件放进。usr/lib中
cd /usr/lib
sudo mv jdk1.8.0_162 jdk #修改文件名</code></pre> 
<p>设置环境变量</p> 
<pre><code class="language-bash">cd ~
vim ~/.bashrc</code></pre> 
<p> 添加以下内容：</p> 
<pre><code class="language-bash">export JAVA_HOME=/usr/lib/jdk
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
export PATH=${JAVA_HOME}/bin:$PATH</code></pre> 
<p> 保存，退出后更新.bashrc配置</p> 
<pre><code class="language-bash">source ~/.bashrc</code></pre> 
<p>查看安装是否成功</p> 
<pre><code class="language-bash">java -version</code></pre> 
<p>出现下图，说明成功</p> 
<pre><code class="language-bash">java version "1.8.0_162"
Java(TM) SE Runtime Environment (build 1.8.0_162-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.162-b12, mixed mode)
</code></pre> 
<h3>安装 Hadoop3.1.3</h3> 
<pre><code class="language-bash">sudo tar -zxvf ~/下载/hadoop-3.1.3.tar.gz -C /usr/local    # 解压到/usr/local中
cd /usr/local/
sudo mv ./hadoop-3.1.3/ ./hadoop            # 将文件夹名改为hadoop
sudo chown -R hadoop ./hadoop       # 修改文件权限</code></pre> 
<p> Hadoop 解压后即可使用。</p> 
<pre><code class="language-bash">cd /usr/local/hadoop
./bin/hadoop version</code></pre> 
<h3>Hadoop单机配置</h3> 
<p>Hadoop 默认模式为非分布式模式（本地模式），无需进行其他配置即可运行。</p> 
<h3>Hadoop伪分布式配置</h3> 
<p>修改配置文件 <strong>core-site.xml</strong></p> 
<p>修改为下面配置：</p> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;
        &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p> 修改配置文件 <strong>hdfs-site.xml</strong>：</p> 
<pre><code class="language-bash">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
        &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
        &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<p> 配置完成后，执行 NameNode 的格式化:</p> 
<pre><code class="language-bash">cd /usr/local/hadoop
./bin/hdfs namenode -format</code></pre> 
<p> 成功的话，会看到 "successfully formatted" 的提示。</p> 
<p>接着开启 NameNode 和 DataNode 守护进程。</p> 
<pre><code class="language-bash">cd /usr/local/hadoop
./sbin/start-dfs.sh  #start-dfs.sh是个完整的可执行文件，中间没有空格</code></pre> 
<p>如果启动 Hadoop 时遇到输出非常多“ssh: Could not resolve hostname xxx”的异常情况</p> 
<p>在 hadoop-env.sh中，增加如下两行内容：</p> 
<pre><code class="language-bash">export HADOOP_HOME=/usr/local/hadoop
export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native</code></pre> 
<p>在~/.bashrc,修改path</p> 
<pre><code class="hljs">export PATH=.:${JAVA_HOME}/bin:${HADOOP_HOME}/bin:$PATH
</code></pre> 
<p>通过命令 <code>jps</code> 来判断是否成功启动。</p> 
<p>成功启动后，可以访问 Web 界面 <a href="http://localhost:9870/" rel="nofollow" title="http://localhost:9870">http://localhost:9870</a> 查看 NameNode 和 Datanode 信息，还可以在线查看 HDFS 中的文件。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d4eef116b0b4f087a8f54d2232490f16/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C语言】基于C语言实现的贪吃蛇游戏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/548fd7b52ebeda464f632a8d627f8a83/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ChatGPT Prompt技术全攻略-探索篇：前沿Prompt工程技术</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>