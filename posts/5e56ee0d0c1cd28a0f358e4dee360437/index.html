<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为ensp中链路聚合两种(lacp-static)模式配置方法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5e56ee0d0c1cd28a0f358e4dee360437/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="华为ensp中链路聚合两种(lacp-static)模式配置方法">
  <meta property="og:description" content="作者主页：点击！
ENSP专栏：点击！
创作时间：2024年4月26日11点54分
链路聚合（Link Aggregation），又称为端口聚合（Port Trunking），是一种将多条物理链路聚合成一条逻辑链路的技术。它可以提高网络带宽、增强网络冗余性和改善网络负载均衡。
💯趣站推荐💯 前些天发现了一个巨牛的🤖人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家,人工智能, 机器算法等...... 点击跳转网页！https://www.captainbed.cn/sis
链路聚合的作用 提高网络带宽
链路聚合可以将多条物理链路的带宽叠加起来，从而提供更高的带宽。例如，将两条 1 Gbps 的物理链路聚合在一起，可以提供 2 Gbps 的带宽。
增强网络冗余性
如果一条或多条物理链路出现故障，链路聚合可以将流量自动切换到其他正常的链路上，从而保证网络的正常运行。
改善网络负载均衡
链路聚合可以将流量在多条物理链路上进行均衡分配，从而提高网络的整体性能。
使用场景 需要高带宽的网络，例如服务器集群、数据中心等。需要高可靠性的网络，例如金融机构、医疗机构等。需要负载均衡的网络，例如大型企业网络、ISP 网络等。 手动模式配置 实验拓扑 LSW1基本配置 &lt;Huawei&gt;sys Enter system view, return user view with Ctrl&#43;Z. [Huawei]un in en Info: Information center is disabled. [Huawei]int eth-trunk 10 [Huawei-Eth-Trunk10]trunk	[Huawei-Eth-Trunk10]trunkport g 0/0/1 to 0/0/3 Info: This operation may take a few seconds. Please wait for a moment...done. [Huawei-Eth-Trunk10]port link-type trunk [Huawei-Eth-Trunk10]port trunk allow-pass vlan all [Huawei-Eth-Trunk10]q int eth-trunk 10 ：进入Eth-Trunk 10的接口配置模式。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-22T22:18:50+08:00">
    <meta property="article:modified_time" content="2024-05-22T22:18:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为ensp中链路聚合两种(lacp-static)模式配置方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" height="80" src="https://images2.imgbox.com/94/6e/mI6HODZz_o.gif" width="640"></p> 
<p style="text-align:center;"><strong>作者主页：<strong><strong><strong><a href="https://blog.csdn.net/jxjdhdnd?type=blog" title="点击！">点击！</a></strong></strong></strong></strong></p> 
<p style="text-align:center;"><strong>ENSP专栏：<strong><a href="https://blog.csdn.net/jxjdhdnd/category_12536826.html?spm=1001.2014.3001.5482" title="点击！">点击！</a></strong></strong></p> 
<p style="text-align:center;"><strong>创作时间：2024年4月26日11点54分</strong></p> 
<p style="text-align:center;"><img alt="" height="80" src="https://images2.imgbox.com/66/14/3uPklrgJ_o.gif" width="640"></p> 
<hr> 
<p>链路聚合（Link Aggregation），又称为端口聚合（Port Trunking），是一种将多条物理链路聚合成一条逻辑链路的技术。它可以提高网络带宽、增强网络冗余性和改善网络负载均衡。</p> 
<h4> 💯趣站推荐💯</h4> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a3/61/Rp3r6c2y_o.png"></p> 
<blockquote> 
 <p><strong>前些天发现了一个巨牛的🤖人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家,人工智能, 机器算法等......  <strong><strong><strong><a href="https://www.captainbed.cn/sis" rel="nofollow" title="点击跳转网页！"><span class="link-card-box"><span class="link-title">点击跳转网页！</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/51/d2/pk6Xpt66_o.png" alt="icon-default.png?t=N7T8">https://www.captainbed.cn/sis</span></span></a></strong></strong></strong></strong></p> 
</blockquote> 
<p></p> 
<h4>链路聚合的作用</h4> 
<blockquote> 
 <p><strong>提高网络带宽</strong></p> 
 <p>链路聚合可以将多条物理链路的带宽叠加起来，从而提供更高的带宽。例如，将两条 1 Gbps 的物理链路聚合在一起，可以提供 2 Gbps 的带宽。</p> 
 <p><strong>增强网络冗余性</strong></p> 
 <p>如果一条或多条物理链路出现故障，链路聚合可以将流量自动切换到其他正常的链路上，从而保证网络的正常运行。</p> 
 <p><strong>改善网络负载均衡</strong></p> 
 <p>链路聚合可以将流量在多条物理链路上进行均衡分配，从而提高网络的整体性能。</p> 
</blockquote> 
<h4>使用场景</h4> 
<blockquote> 
 <ul><li>需要高带宽的网络，例如服务器集群、数据中心等。</li><li>需要高可靠性的网络，例如金融机构、医疗机构等。</li><li>需要负载均衡的网络，例如大型企业网络、ISP 网络等。</li></ul> 
</blockquote> 
<h3>手动模式配置</h3> 
<h4>实验拓扑</h4> 
<p></p> 
<p><img alt="" height="290" src="https://images2.imgbox.com/e1/f5/Z575KMlL_o.png" width="542"></p> 
<p></p> 
<h4>LSW1基本配置</h4> 
<pre><code>&lt;Huawei&gt;sys
Enter system view, return user view with Ctrl+Z.
[Huawei]un in en
Info: Information center is disabled.
[Huawei]int eth-trunk 10
[Huawei-Eth-Trunk10]trunk	
[Huawei-Eth-Trunk10]trunkport g 0/0/1 to 0/0/3
Info: This operation may take a few seconds. Please wait for a moment...done.
[Huawei-Eth-Trunk10]port link-type trunk
[Huawei-Eth-Trunk10]port trunk allow-pass vlan all
[Huawei-Eth-Trunk10]q
</code></pre> 
<blockquote> 
 <ul><li> <p><code>int eth-trunk 10</code> ：进入Eth-Trunk 10的接口配置模式。</p> </li><li> <p><code>trunk</code> ：在Eth-Trunk 10接口上启用Trunk模式。这实质上是将其从一组单独的物理链路转换为单个逻辑链路。</p> </li><li> <p><code>trunkport g 0/0/1 to 0/0/3</code> ：此命令将千兆以太网接口 g 0/0/1 至 g 0/0/3 添加为 Eth-Trunk 10 的成员接口。流量现在将分布在这些物理链路上。</p> </li><li> <p><code>port link-type trunk</code> ：设置Eth-Trunk 10的链路类型为trunk。这可确保交换机将其视为单个逻辑链路。</p> </li><li> <p><code>port trunk allow-pass vlan all</code> ：允许所有VLAN通过Eth-Trunk 10。默认情况下，Eth-Trunk只允许带标签的VLAN。此命令在 Eth-Trunk 上启用标记和未标记的 VLAN 流量。</p> </li></ul> 
</blockquote> 
<p>配置完成之后查看链路聚合</p> 
<pre><code>[Huawei]dis eth-trunk 
Eth-Trunk10's state information is:
WorkingMode: NORMAL         Hash arithmetic: According to SIP-XOR-DIP         
Least Active-linknumber: 1  Max Bandwidth-affected-linknumber: 8              
Operate status: up          Number Of Up Port In Trunk: 3                     
--------------------------------------------------------------------------------
PortName                      Status      Weight 
GigabitEthernet0/0/1          Up          1      
GigabitEthernet0/0/2          Up          1      
GigabitEthernet0/0/3          Up          1      </code></pre> 
<blockquote> 
 <ul><li>Eth-Trunk10的状态信息为： 该行表示Eth-Trunk 10的以下信息。</li><li>工作模式：NORMAL：表示Eth-Trunk 10工作在正常模式，这是理想的情况。</li><li>哈希算法：根据 SIP-XOR-DIP：这指定用于跨成员接口负载平衡流量的哈希算法。在这种情况下，它使用源 IP (SIP) 地址与目标 IP (DIP) 地址进行异或。</li><li>最少活动链路数：1：此时此值可能不相关。它可能表示与负载均衡的最小活动链路数相关的设置，但具体含义取决于交换机型号。</li><li>Max Bandwidth-affected-linknumber: 8：这可能是指可以贡献 Eth-Trunk 整体带宽的成员接口的最大数量。它设置为 8，这可能是交换机型号支持的最大值。</li><li>运行状态： up：这是个好消息！它确认 Eth-Trunk 10 正在运行并且可以承载流量。</li><li>Number Of Up Port In Trunk: 3：这表示可能配置的成员接口中有 3 个当前已启动并参与 Eth-Trunk。</li></ul> 
</blockquote> 
<p></p> 
<h4>LSW2的基本配置</h4> 
<pre><code>&lt;Huawei&gt;sys
Enter system view, return user view with Ctrl+Z.
[Huawei]un in en
Info: Information center is disabled.
[Huawei]int Eth-Trunk 10

[Huawei-Eth-Trunk10]trunkport g 0/0/1 to 0/0/3
Info: This operation may take a few seconds. Please wait for a moment...done.
[Huawei-Eth-Trunk10]port link-type trunk 
[Huawei-Eth-Trunk10]port trunk allow-pass vlan all
[Huawei-Eth-Trunk10]q
[Huawei]q

	</code></pre> 
<p>查看链路聚合</p> 
<pre><code>&lt;Huawei&gt;dis eth-trunk 
Eth-Trunk10's state information is:
WorkingMode: NORMAL         Hash arithmetic: According to SIP-XOR-DIP         
Least Active-linknumber: 1  Max Bandwidth-affected-linknumber: 8              
Operate status: up          Number Of Up Port In Trunk: 3                     
--------------------------------------------------------------------------------
PortName                      Status      Weight 
GigabitEthernet0/0/1          Up          1      
GigabitEthernet0/0/2          Up          1      
GigabitEthernet0/0/3</code></pre> 
<p></p> 
<h3>自动模式配置</h3> 
<p></p> 
<h4>实验拓扑</h4> 
<h4><img alt="" height="268" src="https://images2.imgbox.com/94/ec/t9qzEMYX_o.png" width="580"></h4> 
<p></p> 
<h4>LSW3的基本配置</h4> 
<pre><code>&lt;Huawei&gt;sys
Enter system view, return user view with Ctrl+Z.
[Huawei]un in en
Info: Information center is disabled.
[Huawei]int eth	
[Huawei]int Eth-Trunk 10
[Huawei-Eth-Trunk10]mode lacp-static 
[Huawei-Eth-Trunk10]load-balance dst-mac 
[Huawei-Eth-Trunk10]trunkport g 0/0/1 to 0/0/3
Info: This operation may take a few seconds. Please wait for a moment...done.
[Huawei-Eth-Trunk10]q

</code></pre> 
<blockquote> 
 <p><code>mode lacp-static</code> ：这会将链路聚合控制协议 (LACP) 模式设置为静态。静态LACP模式下，交换机手动捆绑指定的成员接口，无需与其他设备协商。</p> 
 <p><code>load-balance dst-mac</code> ：配置Eth-Trunk使用目的MAC地址对成员接口之间的流量进行负载均衡。数据包将根据目的 MAC 地址进行哈希处理，结果值将决定数据包通过哪个成员接口发送。</p> 
 <p><code>trunkport g 0/0/1 to 0/0/3</code> ：此命令将千兆以太网接口 g 0/0/1 至 g 0/0/3 添加为 Eth-Trunk 10 的成员接口。现在流量将根据目标 MAC 在这些物理链路上分配每个数据包的地址。</p> 
</blockquote> 
<pre><code>&lt;Huawei&gt;dis eth-trunk 
Eth-Trunk10's state information is:
Local:
LAG ID: 10                  WorkingMode: STATIC                               
Preempt Delay: Disabled     Hash arithmetic: According to DA                  
System Priority: 32768      System ID: 4c1f-cce1-2e0a                         
Least Active-linknumber: 1  Max Active-linknumber: 8                          
Operate status: up          Number Of Up Port In Trunk: 3                     
--------------------------------------------------------------------------------
ActorPortName          Status   PortType PortPri PortNo PortKey PortState Weight
GigabitEthernet0/0/1   Selected 1GE      32768   2      2609    10111100  1     
GigabitEthernet0/0/2   Selected 1GE      32768   3      2609    10111100  1     
GigabitEthernet0/0/3   Selected 1GE      32768   4      2609    10111100  1     

Partner:
--------------------------------------------------------------------------------
ActorPortName          SysPri   SystemID        PortPri PortNo PortKey PortState
GigabitEthernet0/0/1   32768    4c1f-cc09-06f6  32768   2      2609    10111100
GigabitEthernet0/0/2   32768    4c1f-cc09-06f6  32768   3      2609    10111100
GigabitEthernet0/0/3   32768    4c1f-cc09-06f6  32768   4      2609    10111100</code></pre> 
<h4>LSW4的配置命令</h4> 
<pre><code>&lt;Huawei&gt;sys
Enter system view, return user view with Ctrl+Z.
[Huawei]un in en
Info: Information center is disabled.
[Huawei]int e	
[Huawei]int Eth-Trunk 10	
[Huawei-Eth-Trunk10]mode lacp-static 	
[Huawei-Eth-Trunk10]load-balance dst-mac 
[Huawei-Eth-Trunk10]trunkport g 0/0/1 to 0/0/3
Info: This operation may take a few seconds. Please wait for a moment...done.
[Huawei-Eth-Trunk10]q</code></pre> 
<pre><code>[Huawei]dis eth-trunk 
Eth-Trunk10's state information is:
Local:
LAG ID: 10                  WorkingMode: STATIC                               
Preempt Delay: Disabled     Hash arithmetic: According to DA                  
System Priority: 32768      System ID: 4c1f-cc09-06f6                         
Least Active-linknumber: 1  Max Active-linknumber: 8                          
Operate status: down        Number Of Up Port In Trunk: 0                     
--------------------------------------------------------------------------------
ActorPortName          Status   PortType PortPri PortNo PortKey PortState Weight
GigabitEthernet0/0/1   Unselect 1GE      32768   2      2609    10100010  1     
GigabitEthernet0/0/2   Unselect 1GE      32768   3      2609    10100010  1     
GigabitEthernet0/0/3   Unselect 1GE      32768   4      2609    10100010  1     

Partner:
--------------------------------------------------------------------------------
ActorPortName          SysPri   SystemID        PortPri PortNo PortKey PortState
GigabitEthernet0/0/1   0        0000-0000-0000  0       0      0       10100011
GigabitEthernet0/0/2   0        0000-0000-0000  0       0      0       10100011
GigabitEthernet0/0/3   0        0000-0000-0000  0       0      0       10100011</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/93c2b64227c9f475af1fb538600096ca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【二叉树】：LeetCode：100.相同的数(分治）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3810169264452ca4114165f2ffe7bfe9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">不同 Android Studio 版本的 SDK 及 NDK 选择</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>