<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Git的原理与使用(一):Git的基本操作(包含:版本回退) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b66d955a64ca9e06570b895af43087fc/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Git的原理与使用(一):Git的基本操作(包含:版本回退)">
  <meta property="og:description" content="Git原理与使用一 一.Git的初识与安装1.什么是Git2.如何安装Git1.git命令与git help(Git下的&#34;man手册&#34;)2.centos下安装Git3.ubantu下安装Git 二.Git的前置操作与前置知识1.创建Git本地仓库2.配置Git3.理解Git的分区1.工作区2.暂存区3.版本库4.分区关系总结 三.添加文件1.git add2.git commit3.git log查看历史提交记录4.git log --pretty=oneline 四.初步认识.git目录1.初步介绍2.HEAD跟master分支3.object和commit id4.总结 五.git diff查看修改六.版本回退1.git reset2.演示1.--soft2.--mixed3.--hard4.版本回退的实质5.版本回退中的后悔药 七.撤销修改1.未add2.已经add,还未commit3.已经commit了,但是还没有push4.已经push了 八.删除文件1.能否直接rm呢?2.误删3.的确要删除 一.Git的初识与安装 1.什么是Git Git是一个版本控制器
在这里我们重点介绍Linux操作系统下的Git的使用
因为在未来的开发过程中Linux操作系统的使用更为频繁
而且Git最初就是在Linux操作系统下面开发的
2.如何安装Git 1.git命令与git help(Git下的&#34;man手册&#34;) 首先我们可以使用git命令来查看我们有没有安装Git
git 如果结果中有: command not found:说明我们还没有安装Git 如果结果是这样的
说明我们已经安装过Git了
在这里我们可以使用
git help Git下的具体命令/概念 来查看对应命令/概念的使用文档
跟man手册类似,按q键退出
2.centos下安装Git 安装git命令: sudo yum install -y git 查看git安装的版本: git --version 3.ubantu下安装Git 安装git命令: sudo apt-get install -y git 查看git安装的版本: git --version 二.Git的前置操作与前置知识 我们要想对文件进行版本控制
就必须先创建出一个仓库出来
仓库:进行版本控制的一个文件目录
1.创建Git本地仓库 我们目前在gitblog目录下面,我们想在这个目录下面创建一个git的本地仓库
使用命令:
git init 这个.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-27T20:29:19+08:00">
    <meta property="article:modified_time" content="2023-11-27T20:29:19+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Git的原理与使用(一):Git的基本操作(包含:版本回退)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Git原理与使用一</h4> 
 <ul><li><a href="#Git_1" rel="nofollow">一.Git的初识与安装</a></li><li><ul><li><a href="#1Git_2" rel="nofollow">1.什么是Git</a></li><li><a href="#2Git_8" rel="nofollow">2.如何安装Git</a></li><li><ul><li><a href="#1gitgit_helpGitman_9" rel="nofollow">1.git命令与git help(Git下的"man手册")</a></li><li><a href="#2centosGit_26" rel="nofollow">2.centos下安装Git</a></li><li><a href="#3ubantuGit_35" rel="nofollow">3.ubantu下安装Git</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Git_42" rel="nofollow">二.Git的前置操作与前置知识</a></li><li><ul><li><a href="#1Git_47" rel="nofollow">1.创建Git本地仓库</a></li><li><a href="#2Git_66" rel="nofollow">2.配置Git</a></li><li><a href="#3Git_103" rel="nofollow">3.理解Git的分区</a></li><li><ul><li><a href="#1_104" rel="nofollow">1.工作区</a></li><li><a href="#2_118" rel="nofollow">2.暂存区</a></li><li><a href="#3_130" rel="nofollow">3.版本库</a></li><li><a href="#4_135" rel="nofollow">4.分区关系总结</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_138" rel="nofollow">三.添加文件</a></li><li><ul><li><a href="#1git_add_149" rel="nofollow">1.git add</a></li><li><a href="#2git_commit_162" rel="nofollow">2.git commit</a></li><li><a href="#3git_log_166" rel="nofollow">3.git log查看历史提交记录</a></li><li><a href="#4git_log_prettyoneline_186" rel="nofollow">4.git log --pretty=oneline</a></li></ul> 
  </li><li><a href="#git_194" rel="nofollow">四.初步认识.git目录</a></li><li><ul><li><a href="#1_202" rel="nofollow">1.初步介绍</a></li><li><a href="#2HEADmaster_204" rel="nofollow">2.HEAD跟master分支</a></li><li><a href="#3objectcommit_id_208" rel="nofollow">3.object和commit id</a></li><li><a href="#4_234" rel="nofollow">4.总结</a></li></ul> 
  </li><li><a href="#git_diff_239" rel="nofollow">五.git diff查看修改</a></li><li><a href="#_269" rel="nofollow">六.版本回退</a></li><li><ul><li><a href="#1git_reset_273" rel="nofollow">1.git reset</a></li><li><a href="#2_290" rel="nofollow">2.演示</a></li><li><ul><li><a href="#1soft_291" rel="nofollow">1.--soft</a></li><li><a href="#2mixed_299" rel="nofollow">2.--mixed</a></li><li><a href="#3hard_304" rel="nofollow">3.--hard</a></li><li><a href="#4_307" rel="nofollow">4.版本回退的实质</a></li><li><a href="#5_309" rel="nofollow">5.版本回退中的后悔药</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_335" rel="nofollow">七.撤销修改</a></li><li><ul><li><a href="#1add_343" rel="nofollow">1.未add</a></li><li><a href="#2addcommit_353" rel="nofollow">2.已经add,还未commit</a></li><li><a href="#3commitpush_368" rel="nofollow">3.已经commit了,但是还没有push</a></li><li><a href="#4push_379" rel="nofollow">4.已经push了</a></li></ul> 
  </li><li><a href="#_382" rel="nofollow">八.删除文件</a></li><li><ul><li><a href="#1rm_386" rel="nofollow">1.能否直接rm呢?</a></li><li><a href="#2_389" rel="nofollow">2.误删</a></li><li><a href="#3_395" rel="nofollow">3.的确要删除</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Git_1"></a>一.Git的初识与安装</h2> 
<h3><a id="1Git_2"></a>1.什么是Git</h3> 
<p>Git是一个版本控制器<br> <img src="https://images2.imgbox.com/c5/47/LXKmtLj4_o.png" alt="在这里插入图片描述"><br> 在这里我们重点介绍Linux操作系统下的Git的使用<br> 因为在未来的开发过程中Linux操作系统的使用更为频繁<br> 而且Git最初就是在Linux操作系统下面开发的</p> 
<h3><a id="2Git_8"></a>2.如何安装Git</h3> 
<h4><a id="1gitgit_helpGitman_9"></a>1.git命令与git help(Git下的"man手册")</h4> 
<p>首先我们可以使用git命令来查看我们有没有安装Git</p> 
<pre><code class="prism language-bash"><span class="token function">git</span>
如果结果中有:
<span class="token builtin class-name">command</span> not found:说明我们还没有安装Git
</code></pre> 
<p>如果结果是这样的<br> <img src="https://images2.imgbox.com/f9/d6/DRiokha2_o.png" alt="在这里插入图片描述"><br> 说明我们已经安装过Git了<br> 在这里我们可以使用</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> <span class="token builtin class-name">help</span> Git下的具体命令/概念
</code></pre> 
<p>来查看对应命令/概念的使用文档<br> <img src="https://images2.imgbox.com/f1/d4/QZ5uwx1I_o.gif" alt="在这里插入图片描述"><br> 跟man手册类似,按q键退出</p> 
<h4><a id="2centosGit_26"></a>2.centos下安装Git</h4> 
<pre><code class="prism language-bash">安装git命令:
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">git</span>
查看git安装的版本:
<span class="token function">git</span> <span class="token parameter variable">--version</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ec/a1/ESOBiomL_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/f5/KoTT0B4Y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3ubantuGit_35"></a>3.ubantu下安装Git</h4> 
<pre><code class="prism language-bash">安装git命令:
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">git</span>
查看git安装的版本:
<span class="token function">git</span> <span class="token parameter variable">--version</span>
</code></pre> 
<h2><a id="Git_42"></a>二.Git的前置操作与前置知识</h2> 
<p>我们要想对文件进行版本控制<br> 就必须先创建出一个仓库出来</p> 
<p>仓库:进行版本控制的一个文件目录</p> 
<h3><a id="1Git_47"></a>1.创建Git本地仓库</h3> 
<p><img src="https://images2.imgbox.com/64/40/wugmsXYi_o.png" alt="在这里插入图片描述"><br> 我们目前在gitblog目录下面,我们想在这个目录下面创建一个git的本地仓库<br> 使用命令:</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> init
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/20/Rrh4RMzO_o.png" alt="在这里插入图片描述"><br> 这个.git目录是Git用来跟踪管理仓库的,不要手动修改这个目录里面的文件,如果改乱了,那么就把Git仓库给破坏了</p> 
<p>关于Git仓库里面有很多细节,大家感兴趣的话可以看一看</p> 
<pre><code class="prism language-bash">tree .git
</code></pre> 
<p><img src="https://images2.imgbox.com/29/b6/bUwucrHU_o.png" alt="在这里插入图片描述"><br> 这里面的一部分属性我们以后都会介绍的</p> 
<p>我们在以后的操作当中为了方便理解<br> 也经常会去这样看这个Git仓库</p> 
<h3><a id="2Git_66"></a>2.配置Git</h3> 
<p>当我们安装完Git之后首先要做的事情就是<br> 设置用户名称和email地址<br> 如何进行配置呢?</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> config user.name <span class="token string">"用户名称"</span>
<span class="token function">git</span> config user.email <span class="token string">"email地址"</span>

还有一个选项:--global:
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"用户名称"</span>
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"email地址"</span>

这个--global的意思就是:如果加上这个--global
那么就表示这台机器上的所有的Git仓库都会使用这个配置.

如果你希望在不同仓库中使用不同的用户名或email地址
那么可以不加这个选项
</code></pre> 
<p>查看配置:</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> config <span class="token parameter variable">-l</span>
</code></pre> 
<p>删除配置:</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> config <span class="token parameter variable">--unset</span> user.name
<span class="token function">git</span> config <span class="token parameter variable">--unset</span> user.email

<span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> user.name
<span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> user.email
</code></pre> 
<p><img src="https://images2.imgbox.com/ed/7c/pYvqyTPJ_o.png" alt="在这里插入图片描述"><br> 下面我在去配置一个用户名和email<br> 这次我配置一个不带–global选项的<br> <img src="https://images2.imgbox.com/e6/62/k4Tqu0xX_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/61/fd/G54x3ATi_o.png" alt="在这里插入图片描述"><br> 如何进行配置,如何查看配置,如何删除配置都给大家介绍完毕了<br> 大家可以自行配置</p> 
<h3><a id="3Git_103"></a>3.理解Git的分区</h3> 
<h4><a id="1_104"></a>1.工作区</h4> 
<p>工作区就是我们写代码或者文件的目录<br> 也就是我们目前所处的</p> 
<pre><code class="prism language-bash">/home/wzs/wzsblog/gitblog
</code></pre> 
<p>这个路径下(也就是包含.git的这个目录)<br> 注意:<br> 即使.git的确也是在gitblog这个目录下面<br> 但是.git并不属于工作区!!!</p> 
<p>平常我们在工作区中写代码(之所以被称为工作区也是这个原因)<br> 写完之后如果想要将该文件交由Git来管理的话<br> 就需要执行<code>git add</code>命令将该文件添加到暂存区</p> 
<h4><a id="2_118"></a>2.暂存区</h4> 
<p>暂存区也可以被称为索引区<br> 一般是存放在.git目录下的index文件中</p> 
<p>之所以被称为暂存区是因为只有当执行<code>git commit</code>命令之后,才能将暂存区中的文件添加到版本库中,才能让Git来管理这个文件!!</p> 
<p>之所以被称为索引区,是因为暂存区其实存放的不是文件本身,而是文件的索引</p> 
<p>这一点我们后续会详细介绍的,大家目前先知道这一点即可</p> 
<p>当我们对于工作区修改或者新增的文件执行<code>git add</code>命令之后<br> 就会更新暂存区中的文件索引</p> 
<h4><a id="3_130"></a>3.版本库</h4> 
<p>版本库其实就是这个隐藏文件.git<br> 这个版本库里面的所有文件都会被Git管理起来<br> 每一个文件的修改,删除都会被Git跟踪记录到<br> 以便于我们任何时刻都可以追踪历史或者"还原"(也就是版本回退,这一点我们以后会介绍的)</p> 
<h4><a id="4_135"></a>4.分区关系总结</h4> 
<p><img src="https://images2.imgbox.com/09/dd/QFXb8YM1_o.png" alt="在这里插入图片描述"><br> 关于git add和git commit命令我们下面就会进行介绍</p> 
<h2><a id="_138"></a>三.添加文件</h2> 
<p>下面我们通过一个场景来介绍git add和git commit的使用方法</p> 
<p>场景:<br> 我们想要在工作区创建一个test.txt文件<br> 然后通过git add和git commit来将这个文件交由Git管理<br> 这是我创建的一个test.txt文件<br> <img src="https://images2.imgbox.com/95/d4/qBary0FE_o.png" alt="在这里插入图片描述"><br> 这里为了方便,使用了echo与重定向新建test.txt并向其中写入<br> hello git<br> <img src="https://images2.imgbox.com/85/df/Q5zS8sTO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1git_add_149"></a>1.git add</h3> 
<p><img src="https://images2.imgbox.com/83/1b/QfwJFbt2_o.png" alt="在这里插入图片描述"><br> 下面我们就选择第一种来演示一下吧<br> 其他的大家感兴趣的话也可以试试</p> 
<p>这里介绍一个命令:</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> status
这个命令可以查看当前git仓库的状态
他会提示我们接下来的操作
</code></pre> 
<p><img src="https://images2.imgbox.com/cf/0a/MkmxXlef_o.png" alt="在这里插入图片描述"><br> 它提示我们接下来要进行git commit操作</p> 
<h3><a id="2git_commit_162"></a>2.git commit</h3> 
<p><img src="https://images2.imgbox.com/4c/7e/lJhaIXuS_o.png" alt="在这里插入图片描述"><br> 下面我们来演示一下<br> <img src="https://images2.imgbox.com/e8/71/t4MwLpi8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3git_log_166"></a>3.git log查看历史提交记录</h3> 
<p>截至目前,我们成功将test.txt文件提交到本地仓库交由Git管理了<br> 但是随着我们写的代码越来越多,要维护的文件也越来越多<br> 我们难免会遗忘很多信息</p> 
<p>因此git log就派上用场了</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> log
</code></pre> 
<p>可以用来查看历史提交记录<br> <img src="https://images2.imgbox.com/2d/94/ZNCiyyKD_o.png" alt="在这里插入图片描述"><br> 可是当我们提交的文件变多了呢?<br> 比方说我现在又创建并提交了3个文件<br> <img src="https://images2.imgbox.com/e5/1c/EEF3970Y_o.png" alt="在这里插入图片描述"><br> 然后git log<br> <img src="https://images2.imgbox.com/7d/26/3ejWNqQY_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意:git log命令是现实最近到最远的提交日志</p> 
</blockquote> 
<p>这才仅仅是进行了2次提交,如果未来我们要进行几十次,几百次提交呢?<br> 那git log就太不"善解人意"了吧…</p> 
<h3><a id="4git_log_prettyoneline_186"></a>4.git log --pretty=oneline</h3> 
<p>有没有一种简易的方法呢?</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> log <span class="token parameter variable">--pretty</span><span class="token operator">=</span>oneline
</code></pre> 
<p><img src="https://images2.imgbox.com/2e/b8/05KjN3MO_o.png" alt="在这里插入图片描述"><br> 此时只会显示commit id和我们写的提交信息<br> 而且每一次的提交信息只占行</p> 
<h2><a id="git_194"></a>四.初步认识.git目录</h2> 
<p>目前我们向本地仓库添加完文件了<br> 下面我们再去</p> 
<pre><code class="prism language-bash">tree .git
</code></pre> 
<p>看一下.git的目录结构<br> 来初步认识一下.git中到底有什么</p> 
<h3><a id="1_202"></a>1.初步介绍</h3> 
<p><img src="https://images2.imgbox.com/dc/26/9T9rtvom_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2HEADmaster_204"></a>2.HEAD跟master分支</h3> 
<p>下面我们就来看一下<br> 这个HEAD存放的是什么?master存放的是什么?<br> <img src="https://images2.imgbox.com/ef/20/BC0KtVxu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3objectcommit_id_208"></a>3.object和commit id</h3> 
<p>下面我们来看一下这个object存放的是什么<br> <img src="https://images2.imgbox.com/6c/7f/KNzNe7wn_o.png" alt="在这里插入图片描述"><br> 我们就查看这个最近的一次提交吧<br> commit id是:76ba3c583103ad526fb5cd5281a539eac782dc49</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> cat-file 76ba3c583103ad526fb5cd5281a539eac782dc49
</code></pre> 
<p><img src="https://images2.imgbox.com/e2/a0/0awGxWMy_o.png" alt="在这里插入图片描述"><br> 在这里我们只介绍-p选项<br> 其他选项大家感兴趣的话可以试一下<br> <img src="https://images2.imgbox.com/b1/a5/WnWCmYp6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b5/d7/9cgrCYPX_o.png" alt="在这里插入图片描述"><br> 至此,大家只需要知道:</p> 
<pre><code class="prism language-bash">tree的commit <span class="token function">id</span> 保存的是当前提交和当前提交之前的所有提交的commit <span class="token function">id</span>

parent的commit id保存的是上一次提交时产生的commit <span class="token function">id</span>

其中,我们git log显示的都是parent的commit <span class="token function">id</span>
如果我们想要查看具体某个文件的修改
先查看git log显示的那一次提交的commit id的内容
然后tree 
然后就能看到具体的文件的commit id了
然后就可以使用具体文件的commit id来查看对应文件的修改了
</code></pre> 
<h3><a id="4_234"></a>4.总结</h3> 
<p><img src="https://images2.imgbox.com/21/73/wZ51XTcD_o.png" alt="在这里插入图片描述"><br> 后面在学习的过程中<br> 大家最好能够将常见的git操作跟.git目录的结构内容的变化相对应起来<br> 这样有助于我们理解git的细节流程</p> 
<h2><a id="git_diff_239"></a>五.git diff查看修改</h2> 
<p>我们可以看出,上面那种查看修改的方法实在是有些麻烦<br> 难道就没有什么更好的方法能让我们查看修改吗?<br> 当然有啦</p> 
<p>首先我们先对test.txt进行一次修改吧<br> <img src="https://images2.imgbox.com/b4/a3/n7lrm1Ph_o.png" alt="在这里插入图片描述"><br> 我们使用追加重定向新增了两行内容<br> 此时,本地仓库中的test.txt文件跟我们工作区的test.txt文件就不同了<br> 我们也可以使用</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> status
</code></pre> 
<p>来查看在我们上一次提交之后有没有对文件进行再次修改<br> <img src="https://images2.imgbox.com/57/f1/1UDjxrN9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/63/87/MwmABUOe_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9d/f6/mwEJr342_o.png" alt="在这里插入图片描述"><br> 此时因为我们既没有add,更别提commit了<br> 因此当前暂存区和版本库(本地仓库)中的内容是一样的<br> 所以此时<br> git diff 和 git diff HEAD显示的结果是一样的<br> <img src="https://images2.imgbox.com/51/b6/u8H9HC1g_o.png" alt="在这里插入图片描述"><br> 下面我们git add<br> 让工作区和暂存区的内容一致<br> <img src="https://images2.imgbox.com/b9/24/QyKsVF2m_o.png" alt="在这里插入图片描述"><br> 此时git diff就和git diff HEAD的结果不一致了<br> 然后下面我在git commit<br> <img src="https://images2.imgbox.com/78/70/lJUKLIz2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a5/33/JKh9YmNi_o.png" alt="在这里插入图片描述"><br> 此时工作区的文件就跟暂存区和版本库中的文件没有任何差异了</p> 
<h2><a id="_269"></a>六.版本回退</h2> 
<p>之前我们也提到过，Git 能够管理⽂件的历史版本，这也是版本控制器重要的能⼒<br> 如果有⼀天你发现之前的代码出现了很⼤的问题，需要在某个特定的历史版本重新开始.<br> 这个时候，就需要版本回退的功能了</p> 
<h3><a id="1git_reset_273"></a>1.git reset</h3> 
<p><img src="https://images2.imgbox.com/01/c6/ivQYGG40_o.png" alt="在这里插入图片描述"><br> 关于具体的<br> –soft --mixed --hard这三个选项,大家可以看这个表格<br> <img src="https://images2.imgbox.com/b5/81/INNlt4U5_o.png" alt="在这里插入图片描述"><br> 下面我们修改test1.txt这个文件<br> 并且进行add 和 commit操作来让暂存区和版本库的内容都更新为<br> test1<br> <img src="https://images2.imgbox.com/84/1b/g2MwTlt4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8f/9a/Km3BoSbg_o.png" alt="在这里插入图片描述"><br> 准备工作已经做好了</p> 
<p>我们规定:<br> 这三个选项的所有初始状态都是当前状态(初始版本都是当前版本)<br> 都要回退到test1.txt的内容是test1.txt的那个版本<br> <img src="https://images2.imgbox.com/23/be/QOUqlsfx_o.png" alt="在这里插入图片描述"><br> 也就是这一个版本</p> 
<h3><a id="2_290"></a>2.演示</h3> 
<h4><a id="1soft_291"></a>1.–soft</h4> 
<p><img src="https://images2.imgbox.com/18/44/Ep6ZnB7f_o.png" alt="在这里插入图片描述"><br> 下面我们再使用git diff来看一下是否真的只有版本库被回退了<br> <img src="https://images2.imgbox.com/57/a9/CB5mtZS6_o.png" alt="在这里插入图片描述"><br> 可见–soft的确是只会回退版本库<br> 而不会回退暂存区和工作区<br> 然后我们commit调整为我们规定好的初始状态<br> <img src="https://images2.imgbox.com/1e/cf/wE8f453F_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2mixed_299"></a>2.–mixed</h4> 
<p>下面我们用–mixed来回退<br> <img src="https://images2.imgbox.com/ff/32/adLZP11E_o.png" alt="在这里插入图片描述"><br> 然后我们add commit调整为我们规定好的初始状态<br> <img src="https://images2.imgbox.com/1b/29/5cEh1S6U_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3hard_304"></a>3.–hard</h4> 
<p>下面我们用–hard来回退<br> <img src="https://images2.imgbox.com/b8/e9/DbR5TjM4_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_307"></a>4.版本回退的实质</h4> 
<p><img src="https://images2.imgbox.com/77/45/c38DqKC5_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_309"></a>5.版本回退中的后悔药</h4> 
<p>可是如果我不小心用–hard之后后悔了怎么办?<br> 现实生活中很多时候是没有后悔药可吃的<br> 但是git给了我们一次机会<br> 我们可以使用</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> reflog
这个命令是用来记录本地的每一次命令的
我们可以找到我们进行版本回退前的那个版本
然后我们就可以再次使用git reset回退到那个版本
就相当于吃了后悔药了
</code></pre> 
<p>刚才演示完–hard之后,我后悔了<br> 我要吃后悔药<br> 下面给大家演示一下,顺便证明一下版本回退的实质<br> <img src="https://images2.imgbox.com/fb/62/otK7o0jG_o.png" alt="在这里插入图片描述"><br> 此时master里面存放的的确是我们之前规定好要回退到的那个版本<br> 下面我们使用<code>git reflog</code><br> <img src="https://images2.imgbox.com/0a/58/g1xaMVpx_o.png" alt="在这里插入图片描述"><br> 可见Linux不仅仅是一种操作系统,它也是一种哲学,一种艺术啊<br> <img src="https://images2.imgbox.com/b2/5a/izs1uePz_o.png" alt="在这里插入图片描述"><br> 此时,回退成功<br> 后悔药生效了<br> <img src="https://images2.imgbox.com/54/24/g6B72lUN_o.png" alt="在这里插入图片描述"><br> 而且此时master分支当中存放的版本也改变了<br> 这也证实了版本回退的实质</p> 
<h2><a id="_335"></a>七.撤销修改</h2> 
<p>如果我们在我们的⼯作区写了很⻓时间代码，越写越写不下去，觉得⾃⼰写的实在是垃圾，想恢复到上⼀个版本<br> 此时怎么办呢?<br> <img src="https://images2.imgbox.com/08/91/LCQMRx5f_o.png" alt="在这里插入图片描述"><br> 下面我们分为三种情况来介绍<br> 我们这次对test2.txt进行操作<br> 先修改test2.txt的内容<br> <img src="https://images2.imgbox.com/e5/c3/itCofAFs_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1add_343"></a>1.未add</h3> 
<p>直接执行</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout -- test2.txt
</code></pre> 
<p>丢弃工作区的修改即可<br> <img src="https://images2.imgbox.com/b4/99/BPRzTzZO_o.png" alt="在这里插入图片描述"><br> 成功撤销之前的修改<br> 然后我们恢复成刚才的样子,并进行add为下面做准备<br> <img src="https://images2.imgbox.com/c2/e8/SjIwzxGC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2addcommit_353"></a>2.已经add,还未commit</h3> 
<p>此时我们先进行暂存区的版本回退<br> 使用–mixed选项</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> reset <span class="token parameter variable">--mixed</span> HEAD
</code></pre> 
<p><img src="https://images2.imgbox.com/45/fe/C1Aby4hl_o.png" alt="在这里插入图片描述"><br> 通过版本回退将暂存区回退了之后,下面我们只需要回退工作区即可</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout -- test2.txt
</code></pre> 
<p><img src="https://images2.imgbox.com/f2/f5/29RvTxIB_o.png" alt="在这里插入图片描述"><br> 回退成功<br> 然后继续为下面做好准备<br> <img src="https://images2.imgbox.com/1a/15/9mImLnpo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3commitpush_368"></a>3.已经commit了,但是还没有push</h3> 
<p>下面会说明什么是push的<br> 此时我们就要用</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD^
这里为什么是HEAD^呢
因为我们commit之后把版本库的HEAD指针更新了
所以要回退到上一次HEAD指向的版本
</code></pre> 
<p><img src="https://images2.imgbox.com/4b/c1/kd21xkkd_o.png" alt="在这里插入图片描述"><br> 其实跟直接版本回退的情况是一样的</p> 
<h3><a id="4push_379"></a>4.已经push了</h3> 
<p>注意:只有commit之后才可以push<br> <img src="https://images2.imgbox.com/8d/9a/iILYRzqX_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_382"></a>八.删除文件</h2> 
<p>注意,在Git中不仅新建文件是修改操作<br> 删除文件也是修改操作<br> 下面我们要删除test2.txt</p> 
<h3><a id="1rm_386"></a>1.能否直接rm呢?</h3> 
<p>我们来演示一下:<br> <img src="https://images2.imgbox.com/88/8a/oT8u5SmZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_389"></a>2.误删</h3> 
<pre><code class="prism language-bash"><span class="token function">git</span> checkout -- test2.txt
</code></pre> 
<p><img src="https://images2.imgbox.com/df/e3/61mSv5K3_o.png" alt="在这里插入图片描述"><br> 成功恢复</p> 
<h3><a id="3_395"></a>3.的确要删除</h3> 
<pre><code class="prism language-bash"><span class="token function">git</span> <span class="token function">rm</span> test2.txt
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"提交信息"</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/88/74/PLBadM1H_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/58/84/ZOFcU141_o.png" alt="在这里插入图片描述"><br> 成功删除</p> 
<blockquote> 
 <p>以上就是Git的原理与使用(一):Git的基本操作跟版本回退到的全部内容,希望能对大家有所帮助!</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8ed336bd00eebd115eb32f5e93d4ae1f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[MySQL] MySQL 表的增删查改</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71d1fef3a2736620629f455cc0e795ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python——Django 框架</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>