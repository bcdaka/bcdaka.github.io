<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库讲解---(数据查询)【MySQL版本】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/07cc5eebb92e000e9b49405f7eab359e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="数据库讲解---(数据查询)【MySQL版本】">
  <meta property="og:description" content="目录​​​​​​​
零.前言
一.单表查询
1.1SELECT语句
1.2例子说明
1.3SELECT使用
1.3.1在学生表中找出所有学生的籍贯
1.3.2查询学生表中的所有信息
1.3.3给列定义别名返回
1.4WHERE的使用
1.4.1查询所有不及格课程的学生的学号、课程号及成绩
1.4.2在学生表中找出信电学院2000年后出生的学生的记录
1.4.3查询出生年份在“1996-1998”年出生的学生的姓名、性别、学院、出生年份
1.4.4查询信电学院、理学院、计算机学院的学生的学号、姓名、学院
1.4.4查询学院不是“信电学院”的学生的学号、姓名、学院
1.5字符匹配(模糊匹配)
1.5.1查询所有姓王的学生的姓名、学号、性别
1.5.2查询名字中，第二个字为“小”字的学生的姓名和学号
1.5.3查找课程名是“DB_Design”课程的课程号、课程性质
1.5.4空值
1.6GROUP BY
1.6.1查询学号在091501~091506至少选修了三门课程的学生的学号和选修课程的课程数
1.7集函数
1.7.1查询学生总人数
1.7.2查询计算机学院学生的平均年龄
1.7.3查询学习180101号课程的学生的最高分数
1.8对查询结果排序
1.8.1查询选修了180102号课程的学生的学号和成绩，查询结果按照成绩从高到低排序
1.8.2查询全体学生情况，查询结果按所在学院的名称升序排列，对同一学院中的学生按年龄降序排列
二.多表查询(连接查询)
2.1等值与非等值连接查询
2.1.1查询每个学生及其选修课程的情况
2.1.2使用自然连接“学生”表和“学习”表
2.2自身连接查询
2.2.1求每一门课程的间接选修课(先修课的先修课)
2.3外连接查询
2.3.2查询所有学生的姓名以及他们选修课程的课程号和成绩
2.3.3查询所有的课程信息及选修该课程的学生的学号及成绩
2.4复合条件连接查询
2.4.1查询选修180101号课程且成绩在90分以上的学生学号，姓名及成绩
2.5多表连接
2.6集合运算连接查询
2.6.1查询选修了180101号或180102号课程或二者都选修了的学生学号、课程号和成绩
三.嵌套查询
3.1简介
3.1.1查询选修了180101号课程的学生姓名
3.2带有ANY或ALL谓词的子查询
3.2.1查询其它学院中比计算机学院某个学生年龄小的学生名单
3.3带有EXISTS谓词的子查询
3.3.1查询选修了180102号课程的学生学号和姓名
3.3.2查询没有选修180102号课程的学生学号和姓名
四.除法运算的实现（困难）
4.1查询至少选修了091501号课程选修的全部课程的学生学号
4.1.1第一步：明确两个集合
4.1.2第二步：表示A包含B
4.1.3第三步：筛选出结果集合
零.前言 数据库讲解（MySQL版）（超详细）【第一章】-CSDN博客
数据库-ER图教程_e-r图数据库-CSDN博客
数据库讲解（MySQL版）（超详细）【第二章】【上】-CSDN博客
​​​​​​​​​​​​​​数据库讲解---(SQL语句--表的使用)【MySQL版本】-CSDN博客
一.单表查询 1.1SELECT语句 SELECT语句用于查询数据库中数据：
语法：
SELECT [ALL | DISTINCT] &lt;属性列表&gt; FROM &lt;表1或视图1&gt;,&lt;表2或视图2&gt;,&lt;表3或视图3&gt;,.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-10T20:11:21+08:00">
    <meta property="article:modified_time" content="2024-04-10T20:11:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库讲解---(数据查询)【MySQL版本】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong>​​​​​​​</p> 
<p id="%E9%9B%B6.%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E9%9B%B6.%E5%89%8D%E8%A8%80" rel="nofollow">零.前言</a></p> 
<p id="%E4%B8%80.%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2-toc" style="margin-left:0px;"><a href="#%E4%B8%80.%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2" rel="nofollow">一.单表查询</a></p> 
<p id="1.1SELECT%E8%AF%AD%E5%8F%A5-toc" style="margin-left:40px;"><a href="#1.1SELECT%E8%AF%AD%E5%8F%A5" rel="nofollow">1.1SELECT语句</a></p> 
<p id="1.2%E4%BE%8B%E5%AD%90%E8%AF%B4%E6%98%8E-toc" style="margin-left:40px;"><a href="#1.2%E4%BE%8B%E5%AD%90%E8%AF%B4%E6%98%8E" rel="nofollow">1.2例子说明</a></p> 
<p id="1.3SELECT%E4%BD%BF%E7%94%A8-toc" style="margin-left:40px;"><a href="#1.3SELECT%E4%BD%BF%E7%94%A8" rel="nofollow">1.3SELECT使用</a></p> 
<p id="1.3.1%E5%9C%A8%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%BE%E5%87%BA%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E7%9A%84%E7%B1%8D%E8%B4%AF-toc" style="margin-left:80px;"><a href="#1.3.1%E5%9C%A8%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%BE%E5%87%BA%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E7%9A%84%E7%B1%8D%E8%B4%AF" rel="nofollow">1.3.1在学生表中找出所有学生的籍贯</a></p> 
<p id="1.3.2%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#1.3.2%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF" rel="nofollow">1.3.2查询学生表中的所有信息</a></p> 
<p id="1.3.3%E7%BB%99%E5%88%97%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%E8%BF%94%E5%9B%9E-toc" style="margin-left:80px;"><a href="#1.3.3%E7%BB%99%E5%88%97%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%E8%BF%94%E5%9B%9E" rel="nofollow">1.3.3给列定义别名返回</a></p> 
<p id="1.4WHERE%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:40px;"><a href="#1.4WHERE%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">1.4WHERE的使用</a></p> 
<p id="1.4.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E4%B8%8D%E5%8F%8A%E6%A0%BC%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%8F%8A%E6%88%90%E7%BB%A9-toc" style="margin-left:80px;"><a href="#1.4.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E4%B8%8D%E5%8F%8A%E6%A0%BC%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%8F%8A%E6%88%90%E7%BB%A9" rel="nofollow">1.4.1查询所有不及格课程的学生的学号、课程号及成绩</a></p> 
<p id="1.4.2%E5%9C%A8%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%BE%E5%87%BA%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A22000%E5%B9%B4%E5%90%8E%E5%87%BA%E7%94%9F%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E8%AE%B0%E5%BD%95-toc" style="margin-left:80px;"><a href="#1.4.2%E5%9C%A8%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%BE%E5%87%BA%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A22000%E5%B9%B4%E5%90%8E%E5%87%BA%E7%94%9F%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E8%AE%B0%E5%BD%95" rel="nofollow">1.4.2在学生表中找出信电学院2000年后出生的学生的记录</a></p> 
<p id="1.4.3%E6%9F%A5%E8%AF%A2%E5%87%BA%E7%94%9F%E5%B9%B4%E4%BB%BD%E5%9C%A8%E2%80%9C1996-1998%E2%80%9D%E5%B9%B4%E5%87%BA%E7%94%9F%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E3%80%81%E6%80%A7%E5%88%AB%E3%80%81%E5%AD%A6%E9%99%A2%E3%80%81%E5%87%BA%E7%94%9F%E5%B9%B4%E4%BB%BD-toc" style="margin-left:80px;"><a href="#1.4.3%E6%9F%A5%E8%AF%A2%E5%87%BA%E7%94%9F%E5%B9%B4%E4%BB%BD%E5%9C%A8%E2%80%9C1996-1998%E2%80%9D%E5%B9%B4%E5%87%BA%E7%94%9F%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E3%80%81%E6%80%A7%E5%88%AB%E3%80%81%E5%AD%A6%E9%99%A2%E3%80%81%E5%87%BA%E7%94%9F%E5%B9%B4%E4%BB%BD" rel="nofollow">1.4.3查询出生年份在“1996-1998”年出生的学生的姓名、性别、学院、出生年份</a></p> 
<p id="1.4.4%E6%9F%A5%E8%AF%A2%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A2%E3%80%81%E7%90%86%E5%AD%A6%E9%99%A2%E3%80%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E9%99%A2-toc" style="margin-left:80px;"><a href="#1.4.4%E6%9F%A5%E8%AF%A2%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A2%E3%80%81%E7%90%86%E5%AD%A6%E9%99%A2%E3%80%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E9%99%A2" rel="nofollow">1.4.4查询信电学院、理学院、计算机学院的学生的学号、姓名、学院</a></p> 
<p id="1.4.4%E6%9F%A5%E8%AF%A2%E5%AD%A6%E9%99%A2%E4%B8%8D%E6%98%AF%E2%80%9C%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A2%E2%80%9D%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E9%99%A2-toc" style="margin-left:80px;"><a href="#1.4.4%E6%9F%A5%E8%AF%A2%E5%AD%A6%E9%99%A2%E4%B8%8D%E6%98%AF%E2%80%9C%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A2%E2%80%9D%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E9%99%A2" rel="nofollow">1.4.4查询学院不是“信电学院”的学生的学号、姓名、学院</a></p> 
<p id="1.5%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D(%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D)-toc" style="margin-left:40px;"><a href="#1.5%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D%28%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D%29" rel="nofollow">1.5字符匹配(模糊匹配)</a></p> 
<p id="1.5.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%A7%93%E7%8E%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E5%8F%B7%E3%80%81%E6%80%A7%E5%88%AB-toc" style="margin-left:80px;"><a href="#1.5.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%A7%93%E7%8E%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E5%8F%B7%E3%80%81%E6%80%A7%E5%88%AB" rel="nofollow">1.5.1查询所有姓王的学生的姓名、学号、性别</a></p> 
<p id="1.5.2%E6%9F%A5%E8%AF%A2%E5%90%8D%E5%AD%97%E4%B8%AD%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E4%B8%BA%E2%80%9C%E5%B0%8F%E2%80%9D%E5%AD%97%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E5%92%8C%E5%AD%A6%E5%8F%B7-toc" style="margin-left:80px;"><a href="#1.5.2%E6%9F%A5%E8%AF%A2%E5%90%8D%E5%AD%97%E4%B8%AD%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E4%B8%BA%E2%80%9C%E5%B0%8F%E2%80%9D%E5%AD%97%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E5%92%8C%E5%AD%A6%E5%8F%B7" rel="nofollow">1.5.2查询名字中，第二个字为“小”字的学生的姓名和学号</a></p> 
<p id="1.5.3%E6%9F%A5%E6%89%BE%E8%AF%BE%E7%A8%8B%E5%90%8D%E6%98%AF%E2%80%9CDB_Design%E2%80%9D%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E6%80%A7%E8%B4%A8-toc" style="margin-left:80px;"><a href="#1.5.3%E6%9F%A5%E6%89%BE%E8%AF%BE%E7%A8%8B%E5%90%8D%E6%98%AF%E2%80%9CDB_Design%E2%80%9D%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E6%80%A7%E8%B4%A8" rel="nofollow">1.5.3查找课程名是“DB_Design”课程的课程号、课程性质</a></p> 
<p id="1.5.4%E7%A9%BA%E5%80%BC-toc" style="margin-left:80px;"><a href="#1.5.4%E7%A9%BA%E5%80%BC" rel="nofollow">1.5.4空值</a></p> 
<p id="1.6GROUP%20BY-toc" style="margin-left:40px;"><a href="#1.6GROUP%20BY" rel="nofollow">1.6GROUP BY</a></p> 
<p id="1.6.1%E6%9F%A5%E8%AF%A2%E5%AD%A6%E5%8F%B7%E5%9C%A8091501~091506%E8%87%B3%E5%B0%91%E9%80%89%E4%BF%AE%E4%BA%86%E4%B8%89%E9%97%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E6%95%B0-toc" style="margin-left:80px;"><a href="#1.6.1%E6%9F%A5%E8%AF%A2%E5%AD%A6%E5%8F%B7%E5%9C%A8091501~091506%E8%87%B3%E5%B0%91%E9%80%89%E4%BF%AE%E4%BA%86%E4%B8%89%E9%97%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E6%95%B0" rel="nofollow">1.6.1查询学号在091501~091506至少选修了三门课程的学生的学号和选修课程的课程数</a></p> 
<p id="1.7%E9%9B%86%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#1.7%E9%9B%86%E5%87%BD%E6%95%B0" rel="nofollow">1.7集函数</a></p> 
<p id="1.7.1%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F%E6%80%BB%E4%BA%BA%E6%95%B0-toc" style="margin-left:80px;"><a href="#1.7.1%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F%E6%80%BB%E4%BA%BA%E6%95%B0" rel="nofollow">1.7.1查询学生总人数</a></p> 
<p id="1.7.2%E6%9F%A5%E8%AF%A2%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E5%AD%A6%E7%94%9F%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B9%B4%E9%BE%84-toc" style="margin-left:80px;"><a href="#1.7.2%E6%9F%A5%E8%AF%A2%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E5%AD%A6%E7%94%9F%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B9%B4%E9%BE%84" rel="nofollow">1.7.2查询计算机学院学生的平均年龄</a></p> 
<p id="1.7.3%E6%9F%A5%E8%AF%A2%E5%AD%A6%E4%B9%A0180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E6%9C%80%E9%AB%98%E5%88%86%E6%95%B0-toc" style="margin-left:80px;"><a href="#1.7.3%E6%9F%A5%E8%AF%A2%E5%AD%A6%E4%B9%A0180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E6%9C%80%E9%AB%98%E5%88%86%E6%95%B0" rel="nofollow">1.7.3查询学习180101号课程的学生的最高分数</a></p> 
<p id="1.8%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F-toc" style="margin-left:40px;"><a href="#1.8%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F" rel="nofollow">1.8对查询结果排序</a></p> 
<p id="1.8.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E7%85%A7%E6%88%90%E7%BB%A9%E4%BB%8E%E9%AB%98%E5%88%B0%E4%BD%8E%E6%8E%92%E5%BA%8F-toc" style="margin-left:80px;"><a href="#1.8.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E7%85%A7%E6%88%90%E7%BB%A9%E4%BB%8E%E9%AB%98%E5%88%B0%E4%BD%8E%E6%8E%92%E5%BA%8F" rel="nofollow">1.8.1查询选修了180102号课程的学生的学号和成绩，查询结果按照成绩从高到低排序</a></p> 
<p id="1.8.2%E6%9F%A5%E8%AF%A2%E5%85%A8%E4%BD%93%E5%AD%A6%E7%94%9F%E6%83%85%E5%86%B5%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E6%89%80%E5%9C%A8%E5%AD%A6%E9%99%A2%E7%9A%84%E5%90%8D%E7%A7%B0%E5%8D%87%E5%BA%8F%E6%8E%92%E5%88%97%EF%BC%8C%E5%AF%B9%E5%90%8C%E4%B8%80%E5%AD%A6%E9%99%A2%E4%B8%AD%E7%9A%84%E5%AD%A6%E7%94%9F%E6%8C%89%E5%B9%B4%E9%BE%84%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97-toc" style="margin-left:80px;"><a href="#1.8.2%E6%9F%A5%E8%AF%A2%E5%85%A8%E4%BD%93%E5%AD%A6%E7%94%9F%E6%83%85%E5%86%B5%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E6%89%80%E5%9C%A8%E5%AD%A6%E9%99%A2%E7%9A%84%E5%90%8D%E7%A7%B0%E5%8D%87%E5%BA%8F%E6%8E%92%E5%88%97%EF%BC%8C%E5%AF%B9%E5%90%8C%E4%B8%80%E5%AD%A6%E9%99%A2%E4%B8%AD%E7%9A%84%E5%AD%A6%E7%94%9F%E6%8C%89%E5%B9%B4%E9%BE%84%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97" rel="nofollow">1.8.2查询全体学生情况，查询结果按所在学院的名称升序排列，对同一学院中的学生按年龄降序排列</a></p> 
<p id="%E4%BA%8C.%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2(%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2)-toc" style="margin-left:0px;"><a href="#%E4%BA%8C.%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%28%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%29" rel="nofollow">二.多表查询(连接查询)</a></p> 
<p id="2.1%E7%AD%89%E5%80%BC%E4%B8%8E%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#2.1%E7%AD%89%E5%80%BC%E4%B8%8E%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2" rel="nofollow">2.1等值与非等值连接查询</a></p> 
<p id="2.1.1%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E5%AD%A6%E7%94%9F%E5%8F%8A%E5%85%B6%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5-toc" style="margin-left:80px;"><a href="#2.1.1%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E5%AD%A6%E7%94%9F%E5%8F%8A%E5%85%B6%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5" rel="nofollow">2.1.1查询每个学生及其选修课程的情况</a></p> 
<p id="2.1.2%E4%BD%BF%E7%94%A8%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5%E2%80%9C%E5%AD%A6%E7%94%9F%E2%80%9D%E8%A1%A8%E5%92%8C%E2%80%9C%E5%AD%A6%E4%B9%A0%E2%80%9D%E8%A1%A8-toc" style="margin-left:80px;"><a href="#2.1.2%E4%BD%BF%E7%94%A8%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5%E2%80%9C%E5%AD%A6%E7%94%9F%E2%80%9D%E8%A1%A8%E5%92%8C%E2%80%9C%E5%AD%A6%E4%B9%A0%E2%80%9D%E8%A1%A8" rel="nofollow">2.1.2使用自然连接“学生”表和“学习”表</a></p> 
<p id="2.2%E8%87%AA%E8%BA%AB%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#2.2%E8%87%AA%E8%BA%AB%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2" rel="nofollow">2.2自身连接查询</a></p> 
<p id="2.2.1%E6%B1%82%E6%AF%8F%E4%B8%80%E9%97%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E9%97%B4%E6%8E%A5%E9%80%89%E4%BF%AE%E8%AF%BE(%E5%85%88%E4%BF%AE%E8%AF%BE%E7%9A%84%E5%85%88%E4%BF%AE%E8%AF%BE)-toc" style="margin-left:80px;"><a href="#2.2.1%E6%B1%82%E6%AF%8F%E4%B8%80%E9%97%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E9%97%B4%E6%8E%A5%E9%80%89%E4%BF%AE%E8%AF%BE%28%E5%85%88%E4%BF%AE%E8%AF%BE%E7%9A%84%E5%85%88%E4%BF%AE%E8%AF%BE%29" rel="nofollow">2.2.1求每一门课程的间接选修课(先修课的先修课)</a></p> 
<p id="2.3%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#2.3%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2" rel="nofollow">2.3外连接查询</a></p> 
<p id="2.3.2%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E4%BB%A5%E5%8F%8A%E4%BB%96%E4%BB%AC%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9-toc" style="margin-left:80px;"><a href="#2.3.2%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E4%BB%A5%E5%8F%8A%E4%BB%96%E4%BB%AC%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9" rel="nofollow">2.3.2查询所有学生的姓名以及他们选修课程的课程号和成绩</a></p> 
<p id="2.3.3%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E8%AF%BE%E7%A8%8B%E4%BF%A1%E6%81%AF%E5%8F%8A%E9%80%89%E4%BF%AE%E8%AF%A5%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%8F%8A%E6%88%90%E7%BB%A9-toc" style="margin-left:80px;"><a href="#2.3.3%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E8%AF%BE%E7%A8%8B%E4%BF%A1%E6%81%AF%E5%8F%8A%E9%80%89%E4%BF%AE%E8%AF%A5%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%8F%8A%E6%88%90%E7%BB%A9" rel="nofollow">2.3.3查询所有的课程信息及选修该课程的学生的学号及成绩</a></p> 
<p id="2.4%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#2.4%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2" rel="nofollow">2.4复合条件连接查询</a></p> 
<p id="2.4.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E4%B8%94%E6%88%90%E7%BB%A9%E5%9C%A890%E5%88%86%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%EF%BC%8C%E5%A7%93%E5%90%8D%E5%8F%8A%E6%88%90%E7%BB%A9-toc" style="margin-left:80px;"><a href="#2.4.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E4%B8%94%E6%88%90%E7%BB%A9%E5%9C%A890%E5%88%86%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%EF%BC%8C%E5%A7%93%E5%90%8D%E5%8F%8A%E6%88%90%E7%BB%A9" rel="nofollow">2.4.1查询选修180101号课程且成绩在90分以上的学生学号，姓名及成绩</a></p> 
<p id="2.5%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#2.5%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5" rel="nofollow">2.5多表连接</a></p> 
<p id="2.6%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#2.6%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2" rel="nofollow">2.6集合运算连接查询</a></p> 
<p id="2.6.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180101%E5%8F%B7%E6%88%96180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E6%88%96%E4%BA%8C%E8%80%85%E9%83%BD%E9%80%89%E4%BF%AE%E4%BA%86%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9-toc" style="margin-left:80px;"><a href="#2.6.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180101%E5%8F%B7%E6%88%96180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E6%88%96%E4%BA%8C%E8%80%85%E9%83%BD%E9%80%89%E4%BF%AE%E4%BA%86%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9" rel="nofollow">2.6.1查询选修了180101号或180102号课程或二者都选修了的学生学号、课程号和成绩</a></p> 
<p id="%E4%B8%89.%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2-toc" style="margin-left:0px;"><a href="#%E4%B8%89.%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2" rel="nofollow">三.嵌套查询</a></p> 
<p id="3.1%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#3.1%E7%AE%80%E4%BB%8B" rel="nofollow">3.1简介</a></p> 
<p id="3.1.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%A7%93%E5%90%8D-toc" style="margin-left:80px;"><a href="#3.1.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%A7%93%E5%90%8D" rel="nofollow">3.1.1查询选修了180101号课程的学生姓名</a></p> 
<p id="3.2%E5%B8%A6%E6%9C%89ANY%E6%88%96ALL%E8%B0%93%E8%AF%8D%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#3.2%E5%B8%A6%E6%9C%89ANY%E6%88%96ALL%E8%B0%93%E8%AF%8D%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2" rel="nofollow">3.2带有ANY或ALL谓词的子查询</a></p> 
<p id="3.2.1%E6%9F%A5%E8%AF%A2%E5%85%B6%E5%AE%83%E5%AD%A6%E9%99%A2%E4%B8%AD%E6%AF%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9F%90%E4%B8%AA%E5%AD%A6%E7%94%9F%E5%B9%B4%E9%BE%84%E5%B0%8F%E7%9A%84%E5%AD%A6%E7%94%9F%E5%90%8D%E5%8D%95-toc" style="margin-left:80px;"><a href="#3.2.1%E6%9F%A5%E8%AF%A2%E5%85%B6%E5%AE%83%E5%AD%A6%E9%99%A2%E4%B8%AD%E6%AF%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9F%90%E4%B8%AA%E5%AD%A6%E7%94%9F%E5%B9%B4%E9%BE%84%E5%B0%8F%E7%9A%84%E5%AD%A6%E7%94%9F%E5%90%8D%E5%8D%95" rel="nofollow">3.2.1查询其它学院中比计算机学院某个学生年龄小的学生名单</a></p> 
<p id="3.3%E5%B8%A6%E6%9C%89EXISTS%E8%B0%93%E8%AF%8D%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#3.3%E5%B8%A6%E6%9C%89EXISTS%E8%B0%93%E8%AF%8D%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2" rel="nofollow">3.3带有EXISTS谓词的子查询</a></p> 
<p id="3.3.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%A7%93%E5%90%8D-toc" style="margin-left:80px;"><a href="#3.3.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%A7%93%E5%90%8D" rel="nofollow">3.3.1查询选修了180102号课程的学生学号和姓名</a></p> 
<p id="3.3.2%E6%9F%A5%E8%AF%A2%E6%B2%A1%E6%9C%89%E9%80%89%E4%BF%AE180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%A7%93%E5%90%8D-toc" style="margin-left:80px;"><a href="#3.3.2%E6%9F%A5%E8%AF%A2%E6%B2%A1%E6%9C%89%E9%80%89%E4%BF%AE180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%A7%93%E5%90%8D" rel="nofollow">3.3.2查询没有选修180102号课程的学生学号和姓名</a></p> 
<p id="%E5%9B%9B.%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%9B%B0%E9%9A%BE%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E5%9B%9B.%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%9B%B0%E9%9A%BE%EF%BC%89" rel="nofollow">四.除法运算的实现（困难）</a></p> 
<p id="4.1%E6%9F%A5%E8%AF%A2%E8%87%B3%E5%B0%91%E9%80%89%E4%BF%AE%E4%BA%86091501%E5%8F%B7%E8%AF%BE%E7%A8%8B%E9%80%89%E4%BF%AE%E7%9A%84%E5%85%A8%E9%83%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7-toc" style="margin-left:40px;"><a href="#4.1%E6%9F%A5%E8%AF%A2%E8%87%B3%E5%B0%91%E9%80%89%E4%BF%AE%E4%BA%86091501%E5%8F%B7%E8%AF%BE%E7%A8%8B%E9%80%89%E4%BF%AE%E7%9A%84%E5%85%A8%E9%83%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7" rel="nofollow">4.1查询至少选修了091501号课程选修的全部课程的学生学号</a></p> 
<p id="4.1.1%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%98%8E%E7%A1%AE%E4%B8%A4%E4%B8%AA%E9%9B%86%E5%90%88-toc" style="margin-left:80px;"><a href="#4.1.1%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%98%8E%E7%A1%AE%E4%B8%A4%E4%B8%AA%E9%9B%86%E5%90%88" rel="nofollow">4.1.1第一步：明确两个集合</a></p> 
<p id="4.1.2%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%A1%A8%E7%A4%BAA%E5%8C%85%E5%90%ABB-toc" style="margin-left:80px;"><a href="#4.1.2%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%A1%A8%E7%A4%BAA%E5%8C%85%E5%90%ABB" rel="nofollow">4.1.2第二步：表示A包含B</a></p> 
<p id="4.1.3%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E7%AD%9B%E9%80%89%E5%87%BA%E7%BB%93%E6%9E%9C%E9%9B%86%E5%90%88-toc" style="margin-left:80px;"><a href="#4.1.3%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E7%AD%9B%E9%80%89%E5%87%BA%E7%BB%93%E6%9E%9C%E9%9B%86%E5%90%88" rel="nofollow">4.1.3第三步：筛选出结果集合</a></p> 
<h2 id="%E9%9B%B6.%E5%89%8D%E8%A8%80">零.前言</h2> 
<p><a href="https://blog.csdn.net/zheshiyangyang/article/details/136451427?spm=1001.2014.3001.5501" title="数据库讲解（MySQL版）（超详细）【第一章】-CSDN博客">数据库讲解（MySQL版）（超详细）【第一章】-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/zheshiyangyang/article/details/136516643?spm=1001.2014.3001.5501" title="数据库-ER图教程_e-r图数据库-CSDN博客">数据库-ER图教程_e-r图数据库-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/zheshiyangyang/article/details/136719326?spm=1001.2014.3001.5501" title="数据库讲解（MySQL版）（超详细）【第二章】【上】-CSDN博客">数据库讲解（MySQL版）（超详细）【第二章】【上】-CSDN博客</a></p> 
<p>​​​​​​​​​​​​​​<a href="https://blog.csdn.net/zheshiyangyang/article/details/137521818?spm=1001.2014.3001.5501" title="数据库讲解---(SQL语句--表的使用)【MySQL版本】-CSDN博客">数据库讲解---(SQL语句--表的使用)【MySQL版本】-CSDN博客</a></p> 
<h2 id="%E4%B8%80.%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2">一.单表查询</h2> 
<h3 id="1.1SELECT%E8%AF%AD%E5%8F%A5">1.1SELECT语句</h3> 
<p><strong>SELECT</strong>语句用于查询数据库中数据：</p> 
<p>语法：</p> 
<pre><code class="language-sql">SELECT [ALL | DISTINCT] &lt;属性列表&gt;
FROM &lt;表1或视图1&gt;,&lt;表2或视图2&gt;,&lt;表3或视图3&gt;,....
[WHERE &lt;&gt;条件表达式]
[GROUP BY &lt;列名&gt;]
[HAVING &lt;条件表达式&gt;]
[ORDER BY &lt;列名&gt; [ASC | DESC]];</code></pre> 
<p><strong>SELECT</strong>完成“<strong>投影运算</strong>”、<strong>WHERE</strong>完成“<strong>选择运算</strong>”</p> 
<p>至于“<strong>WHERE</strong>”、“<strong>GROUP BY</strong>”、”<strong>HAVING</strong>“、“<strong>ORDER BY</strong>”，我们之后再说 </p> 
<p>“<strong>DISTINCT</strong>”和“<strong>ALL</strong>”用来表示“<span style="color:#fe2c24;"><strong>是否对相同列去重</strong></span>”</p> 
<ul><li><strong>“DISTINCT”：“对具有相同属性值的记录去重”</strong></li><li><strong>“ALL”：“保留相同属性值记录”</strong></li></ul> 
<h3 id="1.2%E4%BE%8B%E5%AD%90%E8%AF%B4%E6%98%8E">1.2例子说明</h3> 
<p>在接下来的例子中，我们统一使用下面的三张“<strong>表</strong>”作为<strong>数据来源</strong>：</p> 
<p><strong>学生表：</strong></p> 
<p><img alt="" height="292" src="https://images2.imgbox.com/c8/81/pz5xtzj8_o.png" width="843"></p> 
<p><strong>课程表：</strong></p> 
<p><img alt="" height="270" src="https://images2.imgbox.com/fe/27/Yk7VQ379_o.png" width="542"></p> 
<p><strong>学习表：</strong></p> 
<p><img alt="" height="353" src="https://images2.imgbox.com/af/70/nLCpLDAG_o.png" width="307"></p> 
<h3 id="1.3SELECT%E4%BD%BF%E7%94%A8">1.3SELECT使用</h3> 
<p><strong>SQL</strong>查询可以归纳为下面<strong>五种操作</strong>：</p> 
<ul><li>选择表中的若干列</li><li>选择表中的若干元组(记录)</li><li>对查询进行分组</li><li>使用集函数</li><li>对查询结果排序</li></ul> 
<h4 id="1.3.1%E5%9C%A8%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%BE%E5%87%BA%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E7%9A%84%E7%B1%8D%E8%B4%AF">1.3.1在学生表中找出所有学生的籍贯</h4> 
<pre><code class="language-sql">SELECT DISTINCT 籍贯
FROM 学生;</code></pre> 
<h4 id="1.3.2%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E4%BF%A1%E6%81%AF">1.3.2查询学生表中的所有信息</h4> 
<p>两种方法：</p> 
<p>一种是<strong>手动列出所有属性</strong></p> 
<pre><code class="language-sql">SELECT 学号,姓名,性别,籍贯,出生年份,院系
FROM 学生;
</code></pre> 
<p>另一种使用：<strong>“<span style="color:#fe2c24;">*</span>”代指所有属性</strong></p> 
<pre><code class="language-sql">SELECT *
FROM 学生;
</code></pre> 
<h4 id="1.3.3%E7%BB%99%E5%88%97%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%E8%BF%94%E5%9B%9E">1.3.3给列定义别名返回</h4> 
<p>如果一个属性名字不是我们想要的，我们可以设置这个属性名字并返回，方法：</p> 
<blockquote> 
 <p><span style="color:#fe2c24;"><strong>COLUMN AS &lt;别名&gt; 或者 COLUMN &lt;别名&gt;</strong></span></p> 
</blockquote> 
<p> 例如：</p> 
<pre><code class="language-sql">SELECT 学号 year(now()) - 出生年份 AS 年龄
FROM 学生;</code></pre> 
<p>结果：</p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/ed/95/iOTOqQFF_o.png" width="862"></p> 
<p>在这里，我们将：“<strong>year(now()) - 出生年份</strong>”的名字修改为：“<strong>年龄</strong>”</p> 
<h3 id="1.4WHERE%E7%9A%84%E4%BD%BF%E7%94%A8">1.4WHERE的使用</h3> 
<p>查询满足指定条件的元组可以通过<strong>WHERE</strong>实现，可以这么理解，<strong>WHERE</strong>的作用是“<strong>编程语言中的<span style="color:#fe2c24;">if</span></strong>”</p> 
<p><strong>可用连接词：</strong></p> 
<p><img alt="" height="274" src="https://images2.imgbox.com/de/50/krIhkKG3_o.png" width="858"></p> 
<h4 id="1.4.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E4%B8%8D%E5%8F%8A%E6%A0%BC%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%8F%8A%E6%88%90%E7%BB%A9">1.4.1查询所有不及格课程的学生的学号、课程号及成绩</h4> 
<pre><code class="language-sql">SELECT 学号,课程号,成绩
FROM 学习
WHERE 成绩 &lt; 60;</code></pre> 
<p><img alt="" height="142" src="https://images2.imgbox.com/6d/05/SSOTE1fP_o.png" width="568"></p> 
<h4 id="1.4.2%E5%9C%A8%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%BE%E5%87%BA%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A22000%E5%B9%B4%E5%90%8E%E5%87%BA%E7%94%9F%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E8%AE%B0%E5%BD%95">1.4.2在学生表中找出信电学院2000年后出生的学生的记录</h4> 
<pre><code class="language-sql">SELECT *
FROM 学生
WHERE 学院 = '信电' AND 出生年份 &gt;= 2000;</code></pre> 
<h4 id="1.4.3%E6%9F%A5%E8%AF%A2%E5%87%BA%E7%94%9F%E5%B9%B4%E4%BB%BD%E5%9C%A8%E2%80%9C1996-1998%E2%80%9D%E5%B9%B4%E5%87%BA%E7%94%9F%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E3%80%81%E6%80%A7%E5%88%AB%E3%80%81%E5%AD%A6%E9%99%A2%E3%80%81%E5%87%BA%E7%94%9F%E5%B9%B4%E4%BB%BD">1.4.3查询出生年份在“1996-1998”年出生的学生的姓名、性别、学院、出生年份</h4> 
<pre><code class="language-sql">SELECT 姓名,性别,学院,出生年份
FROM 学生
WHERE 出生年份 BETWEEN 1996 AND 1998;</code></pre> 
<p><span style="color:#fe2c24;"><strong>这条查询语句等价于：</strong></span></p> 
<pre><code class="language-sql">SELECT 姓名,性别,学院,出生年份
FROM 学生
WHERE 出生年份 &gt;= 1996 AND 出生年份 &lt;= 1998;</code></pre> 
<h4 id="1.4.4%E6%9F%A5%E8%AF%A2%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A2%E3%80%81%E7%90%86%E5%AD%A6%E9%99%A2%E3%80%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E9%99%A2">1.4.4查询信电学院、理学院、计算机学院的学生的学号、姓名、学院</h4> 
<pre><code class="language-sql">SELECT 学号,姓名,学院
FROM 学生
WHERE 学院 IN ('信电','理学院','计算机');</code></pre> 
<p><span style="color:#fe2c24;"><strong>这条查询语句等价于：</strong></span></p> 
<pre><code class="language-sql">SELECT 学号,姓名,学院
FROM 学生
WHERE 学院 = '信电' OR 学院 = '理学院' OR 学院 = '计算机';</code></pre> 
<p><img alt="" height="292" src="https://images2.imgbox.com/85/8a/kGT7vu1h_o.png" width="884"></p> 
<p>可以看到“<strong>IN</strong>”在某个“<strong>()</strong>”中起到选择的作用，可以是“<strong>()</strong>”中的任意一个，即相当于“<strong>OR</strong>”(<span style="color:#fe2c24;"><strong>或</strong></span>)，因为我们查询的是三种学院，所以只要是<span style="color:#fe2c24;"><strong>三种学院中的一种</strong></span>即可。</p> 
<h4 id="1.4.4%E6%9F%A5%E8%AF%A2%E5%AD%A6%E9%99%A2%E4%B8%8D%E6%98%AF%E2%80%9C%E4%BF%A1%E7%94%B5%E5%AD%A6%E9%99%A2%E2%80%9D%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E9%99%A2">1.4.4查询学院不是“信电学院”的学生的学号、姓名、学院</h4> 
<p>在某个学院，我们可以使用“<strong>IN</strong>”，那么不在某个学院，我们可以使用“<strong>NOT IN</strong>”，表示“<span style="color:#fe2c24;"><strong>除了..</strong></span>”</p> 
<pre><code class="language-sql">SELECT *
FROM 学生
WHERE 学院 NOT IN ('信电');</code></pre> 
<h3 id="1.5%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D(%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D)">1.5字符匹配(模糊匹配)</h3> 
<p><strong>字符匹配可以帮助我们从<span style="color:#1c7892;">字符串</span>中筛选“符合要求”的“<span style="color:#fe2c24;">子串</span>”</strong></p> 
<p>语法：</p> 
<pre><code class="language-sql">[NOT] LIKE '&lt;匹配串&gt;' [ESCAPE '&lt;转码字符&gt;']</code></pre> 
<p>“<strong>匹配串</strong>”：可以是一个完整的字符串，也可以含有通配符“<strong>%</strong>”和“<strong>_</strong>”</p> 
<ul><li><strong>“%”：表示任意长度(<span style="color:#fe2c24;">可以为0</span>)的字符串</strong></li><li><strong>“_”：表示任意单个字符</strong></li></ul> 
<h4 id="1.5.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%A7%93%E7%8E%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E3%80%81%E5%AD%A6%E5%8F%B7%E3%80%81%E6%80%A7%E5%88%AB">1.5.1查询所有姓王的学生的姓名、学号、性别</h4> 
<pre><code class="language-sql">SELECT 姓名,学号,是性别
FROM 学生
WHERE 姓名 LIKE '王%';</code></pre> 
<p><img alt="" height="125" src="https://images2.imgbox.com/7b/c0/prKfbnjo_o.png" width="471"></p> 
<h4 id="1.5.2%E6%9F%A5%E8%AF%A2%E5%90%8D%E5%AD%97%E4%B8%AD%EF%BC%8C%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E4%B8%BA%E2%80%9C%E5%B0%8F%E2%80%9D%E5%AD%97%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E5%92%8C%E5%AD%A6%E5%8F%B7">1.5.2查询名字中，第二个字为“小”字的学生的姓名和学号</h4> 
<pre><code class="language-sql">SELECT 姓名,学号
FROM 学生
WHERE 姓名 LIKE '_王%';</code></pre> 
<p>因为是“<span style="color:#fe2c24;"><strong>第二个字</strong></span>”，所以<span style="color:#1c7331;"><strong>前面一定还有一个字</strong></span>，为此我们需要使用一个“<strong>_</strong>”来<span style="color:#fe2c24;"><strong>代指第一个字</strong></span>，那么名字可能有<strong>第三个字、第四个字</strong>...因此我们使用“<strong>%</strong>”来表示后面的<span style="color:#1c7331;"><strong>第“3”、“4”、“5”...个字</strong></span></p> 
<h4 id="1.5.3%E6%9F%A5%E6%89%BE%E8%AF%BE%E7%A8%8B%E5%90%8D%E6%98%AF%E2%80%9CDB_Design%E2%80%9D%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E6%80%A7%E8%B4%A8">1.5.3查找课程名是“DB_Design”课程的课程号、课程性质</h4> 
<pre><code class="language-sql">SELECT 课程号,课程性质
FROM 课程
WHERE 课程名 LIKE 'DB\_Design' ESCAPE '\';</code></pre> 
<p>在这里，因为“<strong>_</strong>”是<strong>特殊字符</strong>，所以需要使用“<span style="color:#fe2c24;"><strong>\</strong></span>”(<strong>转义字符</strong>)特别标出</p> 
<h4 id="1.5.4%E7%A9%BA%E5%80%BC">1.5.4空值</h4> 
<p>如果某条元组的某个属性，是一个“<strong>空值</strong>”即“<strong>NULL</strong>”，那么就需要用“<strong>IS</strong>”来指出，其实使用”<strong>=</strong>“也是可以的，不过<span style="color:#fe2c24;"><strong>不建议使用</strong></span></p> 
<pre><code class="language-sql">SELECT 学号,课程号,成绩
FROM 学习
WHERE 成绩 IS NULL;</code></pre> 
<h3 id="1.6GROUP%20BY">1.6GROUP BY</h3> 
<pre><code class="language-sql">SELECT 课程号,COUNT(学号) AS 选课人数
FROM 学习
GROUP BY 课程号;</code></pre> 
<p>“<span style="color:#333333;"><strong>COUNT()</strong></span>”函数用来计算每个组的人数，“<strong>COUNT()”</strong>函数只能和<span style="color:#fe2c24;"><strong>GROUP BY</strong></span>搭配使用，而“<span style="color:#fe2c24;"><strong>GROUP BY 课程号</strong></span>”，将<span style="color:#0d0016;"><strong>相同的课程号</strong></span>分为一组</p> 
<p><img alt="" height="193" src="https://images2.imgbox.com/bf/2f/kHGFINFw_o.png" width="424"></p> 
<h4 id="1.6.1%E6%9F%A5%E8%AF%A2%E5%AD%A6%E5%8F%B7%E5%9C%A8091501~091506%E8%87%B3%E5%B0%91%E9%80%89%E4%BF%AE%E4%BA%86%E4%B8%89%E9%97%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E6%95%B0">1.6.1查询学号在091501~091506至少选修了三门课程的学生的学号和选修课程的课程数</h4> 
<pre><code class="language-sql">SELECT FROM 学号,COUNT(课程号) AS 选课数
FROM 学习
WHERE 学号 BETWEEN '091501' AND '091506'
GROUP BY 学号
HAVING COUNT(课程号) &gt;= 3;</code></pre> 
<p><span style="color:#fe2c24;"><strong>我们来一步一步分析：</strong></span></p> 
<ol><li><strong>我们需要返回：“学号”、“课程数”，而课程数就是“课程号”的数量</strong></li><li><strong>学号在091501~091506之间是一个范围，因此我们需要使用WHERE 筛选出符合条件的学号</strong></li><li><strong>因为一个学生可能会修多门学科，所以一个学生就是一个组，每组中的元素是“课程”</strong></li><li><strong>HAVING用来对组筛选，只有组内课程(元素)大于等于3的组才会被展示出来</strong></li></ol> 
<p>怎么样，这么一分析，是不是很简单了？</p> 
<h3 id="1.7%E9%9B%86%E5%87%BD%E6%95%B0">1.7集函数</h3> 
<p><strong>SQL</strong>有许多集函数：</p> 
<ul><li><strong>COUNT([DISTINCT|ALL] *) ：统计元组个数</strong></li><li><strong>COUNT([DISTINCT|ALL] &lt;列名&gt;)：统计一列中值的个数</strong></li><li><strong>SUM([DISTINCT|ALL] &lt;列名&gt;)：计算一列值的总和</strong></li><li><strong>AVG([DISTINCT|ALL] &lt;列名&gt;)：计算一列值的平均值(此列必须是数值型)</strong></li><li><strong>MAX([DISTINCT|ALL] &lt;列名&gt;)：求一列值中最大值</strong></li><li><strong>MIN([DISTINCT|ALL] &lt;列名&gt;)：求一列值中最小值</strong></li></ul> 
<p>“<strong>DISTINCT</strong>”和“<strong>ALL</strong>”还是老作用，用来指定是否<strong>对重复值<span style="color:#fe2c24;">去重</span></strong></p> 
<h4 id="1.7.1%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F%E6%80%BB%E4%BA%BA%E6%95%B0">1.7.1查询学生总人数</h4> 
<pre><code class="language-sql">SELECT COUNT(*) AS 总人数
FROM 学生;</code></pre> 
<p><img alt="" height="119" src="https://images2.imgbox.com/cb/1f/XhahSCJK_o.png" width="294"></p> 
<p><span style="color:#1c7331;"><strong>COUNT(*)</strong></span>表示对所有元组统计，值得注意的是，使用COUNT之后，返回的元组只有一个(30)，这是因为<strong>COUNT(*)</strong>是<strong>对所有属性筛选并对所有属性别名</strong>为：“<span style="color:#fe2c24;"><strong>总人数</strong></span>”，并且计算后的结果只有一个“<strong>30</strong>”</p> 
<h4 id="1.7.2%E6%9F%A5%E8%AF%A2%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E5%AD%A6%E7%94%9F%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B9%B4%E9%BE%84">1.7.2查询计算机学院学生的平均年龄</h4> 
<pre><code class="language-sql">SELECT AVG(year(now())-出生年龄) AS 平均年龄
FROM 学生
WHERE 学院 = '计算机';</code></pre> 
<p><img alt="" height="105" src="https://images2.imgbox.com/c8/90/Sq8JAepp_o.png" width="274"></p> 
<h4 id="1.7.3%E6%9F%A5%E8%AF%A2%E5%AD%A6%E4%B9%A0180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E6%9C%80%E9%AB%98%E5%88%86%E6%95%B0">1.7.3查询学习180101号课程的学生的最高分数</h4> 
<pre><code class="language-sql">SELECT MAX(成绩) AS 最高分
FROM 学习
WHERE 课程号 = '180101';</code></pre> 
<p><img alt="" height="97" src="https://images2.imgbox.com/7e/f6/ADuEWYbg_o.png" width="285"></p> 
<h3 id="1.8%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F">1.8对查询结果排序</h3> 
<p>如果没有指定查询结果的显示顺序，SQL默认将其按照最方便的顺序(即先后顺序)输出结果</p> 
<p>如果需要对结果排序，我们可以使用：“<strong>ORDER BY <span style="color:#fe2c24;">ASC</span>(<span style="color:#1c7892;">升序</span>) | <span style="color:#fe2c24;">DESC</span>(<span style="color:#1c7892;">降序</span>)</strong>”进行排序</p> 
<p><strong>注意：“<span style="color:#fe2c24;">ORDER BY只对最终查询结果排序，不能对中间结果排序！！！</span>”</strong></p> 
<h4 id="1.8.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E7%85%A7%E6%88%90%E7%BB%A9%E4%BB%8E%E9%AB%98%E5%88%B0%E4%BD%8E%E6%8E%92%E5%BA%8F"><strong>1.8.1查询选修了180102号课程的学生的学号和成绩，查询结果按照成绩从高到低排序</strong></h4> 
<pre><code class="language-sql">SELECT 学号,成绩
FROM 学习
WHERE 课程号 = '180102'
ORDER BY 成绩 DESC;</code></pre> 
<p><img alt="" height="170" src="https://images2.imgbox.com/a5/49/y74AiQdg_o.png" width="361"></p> 
<h4 id="1.8.2%E6%9F%A5%E8%AF%A2%E5%85%A8%E4%BD%93%E5%AD%A6%E7%94%9F%E6%83%85%E5%86%B5%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E6%89%80%E5%9C%A8%E5%AD%A6%E9%99%A2%E7%9A%84%E5%90%8D%E7%A7%B0%E5%8D%87%E5%BA%8F%E6%8E%92%E5%88%97%EF%BC%8C%E5%AF%B9%E5%90%8C%E4%B8%80%E5%AD%A6%E9%99%A2%E4%B8%AD%E7%9A%84%E5%AD%A6%E7%94%9F%E6%8C%89%E5%B9%B4%E9%BE%84%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97">1.8.2查询全体学生情况，查询结果按所在学院的名称升序排列，对同一学院中的学生按年龄降序排列</h4> 
<pre><code class="language-sql">SELECT *
FROM 学生
ORDER BY 学院 ASC,year(now()) - 出生年份 DESC;</code></pre> 
<p><img alt="" height="340" src="https://images2.imgbox.com/77/28/bs8vYF4y_o.png" width="849"></p> 
<h2 id="%E4%BA%8C.%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2(%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2)">二.多表查询(连接查询)</h2> 
<h3 id="2.1%E7%AD%89%E5%80%BC%E4%B8%8E%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">2.1等值与非等值连接查询</h3> 
<p>用来<span style="color:#fe2c24;"><strong>连接两个表的条件</strong></span>称为“<strong>连接条件</strong>”或“<strong>连接谓词</strong>”，<strong>一般格式</strong>为：</p> 
<blockquote> 
 <p><strong>[&lt;表1&gt;] &lt;列1&gt; &lt;比较运算符&gt; [&lt;表2&gt;] &lt;列2&gt;</strong></p> 
</blockquote> 
<p><strong> 比较运算符</strong>主要有：</p> 
<p><span style="color:#1a439c;"><strong>“=”、“&gt;”、“&lt;”、“&gt;=”、“&lt;=”、“!=”</strong></span></p> 
<p>除此之外，连接谓词还可以使用以下形式：</p> 
<blockquote> 
 <p><strong>[&lt;表1&gt;] &lt;列1&gt; BETWEEN [&lt;表2&gt;] &lt;列2&gt; AND [&lt;表2&gt;] &lt;列3&gt;</strong></p> 
</blockquote> 
<p></p> 
<p>当<strong>连接谓词</strong>为“<span style="color:#fe2c24;"><strong>=</strong></span>”时，称为<strong>等值连接</strong>，使用<strong>其他运算符时为<span style="color:#fe2c24;">非等值</span>连接</strong>。</p> 
<h4 id="2.1.1%E6%9F%A5%E8%AF%A2%E6%AF%8F%E4%B8%AA%E5%AD%A6%E7%94%9F%E5%8F%8A%E5%85%B6%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%83%85%E5%86%B5">2.1.1查询每个学生及其选修课程的情况</h4> 
<pre><code class="language-sql">SELECT 学生.*,学习.*
FROM 学生,学习
WHERE 学生.学号 = 学习.学号;</code></pre> 
<p><img alt="" height="304" src="https://images2.imgbox.com/98/bb/WoawusW3_o.png" width="871"></p> 
<h4 id="2.1.2%E4%BD%BF%E7%94%A8%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5%E2%80%9C%E5%AD%A6%E7%94%9F%E2%80%9D%E8%A1%A8%E5%92%8C%E2%80%9C%E5%AD%A6%E4%B9%A0%E2%80%9D%E8%A1%A8">2.1.2使用自然连接“学生”表和“学习”表</h4> 
<p>自然连接是等值连接运算中的一种特殊情况，即按照两个表中的相同属性进行等值连接，且<strong>目标列中去掉了重复的属性列，但保留了所有不重复的属性列</strong></p> 
<p>使用自然连接，相同的属性会去重一列</p> 
<pre><code class="language-sql">SELECT 学生.学号,姓名,性别,出生年份,学院,课程号,成绩
FROM 学生,学习
WHERE 学生.学号 = 学习.学号;</code></pre> 
<p><img alt="" height="298" src="https://images2.imgbox.com/bc/cd/DDYlXVRp_o.png" width="833"></p> 
<h3 id="2.2%E8%87%AA%E8%BA%AB%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">2.2自身连接查询</h3> 
<p><strong>自身连接</strong>即将<strong>一张表与自身连接</strong>在一起</p> 
<h4 id="2.2.1%E6%B1%82%E6%AF%8F%E4%B8%80%E9%97%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E9%97%B4%E6%8E%A5%E9%80%89%E4%BF%AE%E8%AF%BE(%E5%85%88%E4%BF%AE%E8%AF%BE%E7%9A%84%E5%85%88%E4%BF%AE%E8%AF%BE)">2.2.1求每一门课程的间接选修课(先修课的先修课)</h4> 
<p>分析：<strong>“题目要求先修课的先修课，而表中只有先修课的信息，因此我们需要先找到一门课再按此先修课的课程号，查找它的先修课程，这相当于将表自身连接</strong>”</p> 
<pre><code class="language-sql">SELECT FIRST.课程号 AS 课程号,FIRST.课程名 AS 课程名,SECOND.先修课程号 AS 间接先修课程号
FROM 课程 AS FIRST,课程 AS SECOND
WHERE FIRST.先修课程号 = SECOND.课程号;</code></pre> 
<p><img alt="" height="198" src="https://images2.imgbox.com/b3/37/1xxSe8hU_o.png" width="858"></p> 
<h3 id="2.3%E5%A4%96%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">2.3外连接查询</h3> 
<p>外连接分为：“<strong>左外连接</strong>”和“<strong>右外连接</strong>”</p> 
<p><span style="color:#fe2c24;"><strong>左外连接</strong></span></p> 
<p>规定所有记录都应该从连接语句左侧的表中返回。</p> 
<p><strong>当右侧表中没有匹配的记录时，左标中的记录依然会返回，而对应的<span style="color:#fe2c24;">右侧表中的列值</span>会自动填充<span style="color:#fe2c24;">NULL</span>值</strong></p> 
<h4 id="2.3.2%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E4%BB%A5%E5%8F%8A%E4%BB%96%E4%BB%AC%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9">2.3.2查询所有学生的姓名以及他们选修课程的课程号和成绩</h4> 
<pre><code class="language-sql">SELECT 姓名,课程号,成绩
FROM 学生 LEFT OUTER JOIN 学习 ON 学生.学号 = 学习.学号;</code></pre> 
<p><img alt="" height="401" src="https://images2.imgbox.com/4c/33/7KAPMI6p_o.png" width="870"></p> 
<p><span style="color:#fe2c24;"><strong>右外连接</strong></span></p> 
<p><strong>规定所有记录都应该从连接语句右侧的表中返回，当左侧表中没有匹配的记录时，<span style="color:#fe2c24;">右侧表中的值</span>依然返回，而对应的<span style="color:#fe2c24;">左侧表中的值</span>将自动填充<span style="color:#fe2c24;">NULL</span>值</strong></p> 
<h4 id="2.3.3%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%9A%84%E8%AF%BE%E7%A8%8B%E4%BF%A1%E6%81%AF%E5%8F%8A%E9%80%89%E4%BF%AE%E8%AF%A5%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%8F%8A%E6%88%90%E7%BB%A9">2.3.3查询所有的课程信息及选修该课程的学生的学号及成绩</h4> 
<pre><code class="language-sql">SELECT 课程名,学号,成绩
FROM 学习 RIGHT OUTER JOIN 课程 ON 学习.课程号 = 课程.课程号;</code></pre> 
<p><img alt="" height="340" src="https://images2.imgbox.com/ed/47/mLAmjpCm_o.png" width="862"></p> 
<h3 id="2.4%E5%A4%8D%E5%90%88%E6%9D%A1%E4%BB%B6%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">2.4复合条件连接查询</h3> 
<p>WHERE字句中<span style="color:#be191c;"><strong>有多个条件的连接操作</strong></span>，称为<span style="color:#fe2c24;"><strong>复合条件连接</strong></span></p> 
<h4 id="2.4.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E4%B8%94%E6%88%90%E7%BB%A9%E5%9C%A890%E5%88%86%E4%BB%A5%E4%B8%8A%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%EF%BC%8C%E5%A7%93%E5%90%8D%E5%8F%8A%E6%88%90%E7%BB%A9">2.4.1查询选修180101号课程且成绩在90分以上的学生学号，姓名及成绩</h4> 
<pre><code class="language-sql">SELECT 学生.学号,姓名,成绩
FROM 学生,学习
WHERE 学生.学号 = 学习.学号 AND 学习.课程号 = '180101' AND 学习.成绩 &gt; 90;</code></pre> 
<p><img alt="" height="120" src="https://images2.imgbox.com/a3/9f/SM3FSWRR_o.png" width="858"></p> 
<h3 id="2.5%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5">2.5多表连接</h3> 
<p>有时我们可能需要<strong>两张</strong>以上的表来查询，这时叫作“<strong>多表连接</strong>”</p> 
<pre><code class="language-sql">SELECT 学生.学号,姓名,课程名,学习.成绩
FROM 学生,学习,课程
WHERE 学生.学号 = 学习.学号 AND 学习.课程号 = 课程.课程号;</code></pre> 
<p><img alt="" height="249" src="https://images2.imgbox.com/4c/46/10F2UBnH_o.png" width="864"></p> 
<h3 id="2.6%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2">2.6集合运算连接查询</h3> 
<p>当我们希望使用SQL语句完成：“集合运算(并、交、差)”来查询时，我们可以使用“<strong>UNION</strong>”、“<strong>INTERSECT</strong>”、“<strong>EXCEPT</strong>”</p> 
<p>而<strong><span style="color:#fe2c24;">MySQL</span>只</strong>支持<strong>并运算</strong>，所以我们在这里<strong>只</strong>介绍“<strong>并运算</strong>”：</p> 
<h4 id="2.6.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180101%E5%8F%B7%E6%88%96180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E6%88%96%E4%BA%8C%E8%80%85%E9%83%BD%E9%80%89%E4%BF%AE%E4%BA%86%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%B7%E5%92%8C%E6%88%90%E7%BB%A9">2.6.1查询选修了180101号或180102号课程或二者都选修了的学生学号、课程号和成绩</h4> 
<pre><code class="language-sql">(
    SELECT 学号,课程号,成绩
    FROM 学习
    WHERE 课程号 = '180101'
)
   UNION
(
    SELECT 学号,课程号,成绩
    FROM 学习
    WHERE 课程号 = '180102'
)</code></pre> 
<p><strong>注意：<span style="color:#fe2c24;">UNION运算自动去除重复</span></strong></p> 
<p><strong><span style="color:#fe2c24;">如果想保留重复，可以使用UNION ALL来代替UNION</span></strong></p> 
<p><strong><span style="color:#fe2c24;">UNION是在查询完结果之后，对两次结果进行并集</span></strong></p> 
<p><strong><span style="color:#fe2c24;">而OR是在中间结果中进行并集！！</span></strong></p> 
<p><img alt="" height="199" src="https://images2.imgbox.com/88/64/83eS72Cn_o.png" width="841"></p> 
<h2 id="%E4%B8%89.%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2">三.嵌套查询</h2> 
<h3 id="3.1%E7%AE%80%E4%BB%8B">3.1简介</h3> 
<p>在<strong>SQL</strong>中，一个<strong>SELECT...FROM...WHERE</strong>语句被称为一个<strong>查询块</strong>，将一个<strong>查询块</strong>嵌套在另一个<strong>查询块</strong>的<span style="color:#fe2c24;"><strong>WHERE字句或HAVING</strong></span>条件中的查询称为<span style="color:#1a439c;"><strong>嵌套查询</strong></span>：</p> 
<h4 id="3.1.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180101%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%A7%93%E5%90%8D">3.1.1查询选修了180101号课程的学生姓名</h4> 
<pre><code class="language-sql">SELECT 姓名
FROM 学生
WHERE 学号 IN(
    SELECT 学号
    FROM 学习
    WHERE 课程号 = '180101'
);</code></pre> 
<p>在上面这个例子中：“<strong>SELECT 学号 FROM 学习 WHERE 课程号 = '180101'</strong> ”叫作“<span style="color:#be191c;"><strong>下层查询块</strong></span>”</p> 
<p>“<strong>SELECT 姓名 FROM 学生 WHERE 学号 IN</strong>”叫作“<span style="color:#be191c;"><strong>上层查询块</strong></span>”</p> 
<p>“<span style="color:#be191c;"><strong>上层查询块</strong></span>”又叫做：“<strong>父查询</strong>”、“<strong>主查询</strong>”</p> 
<p>“<span style="color:#be191c;"><strong>下层查询块</strong></span>”又叫做：“<strong>内层查询</strong>”、“<strong>子查询</strong>”</p> 
<p><strong>注意</strong>：“<span style="color:#1c7331;"><strong>子查询的SELECT语句中不能使用ORDER BY语句，ORDER BY只能对最终结果排序</strong></span>”</p> 
<h3 id="3.2%E5%B8%A6%E6%9C%89ANY%E6%88%96ALL%E8%B0%93%E8%AF%8D%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2">3.2带有ANY或ALL谓词的子查询</h3> 
<p>子查询返回单值时可以使用比较运算符。但当返回的结果有<strong>可能不止一个</strong>时，则<span style="color:#be191c;"><strong>不能够使用</strong></span>比较运算符，此时可以使用<span style="color:#fe2c24;"><strong>“ALL</strong></span>”或者“<span style="color:#fe2c24;"><strong>ANY</strong></span>”加<span style="color:#1a439c;"><strong>比较运算符</strong></span>实现比较操作：</p> 
<p><img alt="" height="229" src="https://images2.imgbox.com/62/24/92xpIQis_o.png" width="853"></p> 
<h4 id="3.2.1%E6%9F%A5%E8%AF%A2%E5%85%B6%E5%AE%83%E5%AD%A6%E9%99%A2%E4%B8%AD%E6%AF%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9F%90%E4%B8%AA%E5%AD%A6%E7%94%9F%E5%B9%B4%E9%BE%84%E5%B0%8F%E7%9A%84%E5%AD%A6%E7%94%9F%E5%90%8D%E5%8D%95">3.2.1查询其它学院中比计算机学院某个学生年龄小的学生名单</h4> 
<pre><code class="language-sql">SELECT 姓名
FROM 学生
WHERE year(now()) - 出生年份 &lt; ANY (
    SELECT year(now()) - 出生年份
    FROM 学生
    WHERE 学院 = '计算机'
) AND 学院 != '计算机'
ORDER BY year(now()) - 出生年份 DESC;</code></pre> 
<p>同时，我们也可以使用：“<span style="color:#be191c;"><strong>集函数</strong></span>”来代替连接谓词，比如在这里“<strong>比计算机学院中某个学生的年龄小</strong>”可以转换为“<span style="color:#1c7331;"><strong>比计算机学院中年龄最大的学生小，那么该学生一定满足条件了</strong></span>”</p> 
<pre><code class="language-sql">SELECT 姓名,year(now()) - 出生年份
FROM 学生
WHERE year(now()) - 出生年份 &lt; (
    SELECT MAX(year(now()) - 出生年份)
    FROM 学生
    WHERE 学院 = '计算机'
) AND 学院 != '计算机'
ORDER BY year(now()) - 出生年份 DESC;</code></pre> 
<p>“<span style="color:#ad720d;"><strong>ANY</strong></span>”、“<span style="color:#ad720d;"><strong>ALL</strong></span>”与“<span style="color:#ad720d;"><strong>集函数</strong></span>”的关系如下表所示：</p> 
<p><img alt="" height="116" src="https://images2.imgbox.com/9f/63/gj2nrWxa_o.png" width="841"></p> 
<h3 id="3.3%E5%B8%A6%E6%9C%89EXISTS%E8%B0%93%E8%AF%8D%E7%9A%84%E5%AD%90%E6%9F%A5%E8%AF%A2">3.3带有EXISTS谓词的子查询</h3> 
<p><strong>EXISTS</strong>代表<span style="color:#fe2c24;"><strong>存在量词</strong></span>，带有<strong>EXISTS</strong>谓词的子查询不返回任何数据，只产生逻辑值“<span style="color:#fe2c24;"><strong>True</strong></span>”或者“<span style="color:#fe2c24;"><strong>False</strong></span>”</p> 
<h4 id="3.3.1%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E4%BA%86180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%A7%93%E5%90%8D">3.3.1查询选修了180102号课程的学生学号和姓名</h4> 
<pre><code class="language-sql">SELECT 学号,姓名
FROM 学生
WHERE EXISTS (
    SELECT *
    FROM 学习
    WHERE 学生.学号 = 学习.学号 AND 学习.课程号 = '180102'
);</code></pre> 
<p><img alt="" height="151" src="https://images2.imgbox.com/0a/66/pkhIlDGs_o.png" width="340"></p> 
<h4 id="3.3.2%E6%9F%A5%E8%AF%A2%E6%B2%A1%E6%9C%89%E9%80%89%E4%BF%AE180102%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%A7%93%E5%90%8D">3.3.2查询没有选修180102号课程的学生学号和姓名</h4> 
<pre><code class="language-sql">SELECT 学号,姓名
FROM 学生
WHERE NOT EXISTS (
    SELECT * 
    FROM 学习
    WHERE 学生.学号 = 学习.学号 AND 课程号 = '180102'
);</code></pre> 
<h2 id="%E5%9B%9B.%E9%99%A4%E6%B3%95%E8%BF%90%E7%AE%97%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%9B%B0%E9%9A%BE%EF%BC%89">四.除法运算的实现（<span style="color:#fe2c24;">困难</span>）</h2> 
<h3 id="4.1%E6%9F%A5%E8%AF%A2%E8%87%B3%E5%B0%91%E9%80%89%E4%BF%AE%E4%BA%86091501%E5%8F%B7%E8%AF%BE%E7%A8%8B%E9%80%89%E4%BF%AE%E7%9A%84%E5%85%A8%E9%83%A8%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7">4.1查询至少选修了091501号课程选修的全部课程的学生学号</h3> 
<p>查询用关系代数可以表示为：</p> 
<p><img alt="" height="47" src="https://images2.imgbox.com/ca/bb/tL09Z1Pc_o.png" width="462"></p> 
<p>有一个概念：“能使用除法的查询，必有一个集合包含另一个集合”</p> 
<p>在这里，我们需要的结果集合包含了091501号课程集合</p> 
<p>也可以这样说：“<strong>我们设有两个集合A、B，B - A得到的是在B集合中有的，而A集合中没有的，如果该结果集为空，说明B集合中的元素都存在于A集合中，即A包含B</strong>”</p> 
<p>“而在本题中，<strong>A是表示某个学生选修课程的课程号集合，B集合表示090101号学生选修的课程号集合</strong>”</p> 
<p>“<span style="color:#fe2c24;"><strong>如果A集合大于等于B集合，则当前学生是要查找的学生</strong></span>”</p> 
<h4 id="4.1.1%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E6%98%8E%E7%A1%AE%E4%B8%A4%E4%B8%AA%E9%9B%86%E5%90%88">4.1.1第一步：明确两个集合</h4> 
<p><span style="color:#fe2c24;"><strong>B集合：</strong></span></p> 
<pre><code class="language-sql">SELECT 课程号
FROM 学习
WHERE 学习.学号 = 'XXX';“XXX”表示某个结果学生的学号</code></pre> 
<p><span style="color:#fe2c24;"><strong>A集合：</strong></span></p> 
<pre><code class="language-sql">SELECT 课程号
FROM 学习
WHERE 学习.学号 = '091501';</code></pre> 
<h4 id="4.1.2%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%A1%A8%E7%A4%BAA%E5%8C%85%E5%90%ABB">4.1.2第二步：表示A包含B</h4> 
<p>A包含B可以这样表示：<img alt="" height="46" src="https://images2.imgbox.com/05/f5/so33iji1_o.png" width="129"></p> 
<p>即：“<span style="color:#fe2c24;"><strong>不存在一个B减A有结果的集合</strong></span>”，在<strong>MySQL</strong>中“<strong>减运算</strong>”等于“<strong>EXISTS</strong>”</p> 
<pre><code class="language-sql">NOT EXISTS(
    (
        SELECT 课程号
        FROM 学习 AS FIRST
        WHERE FIRST.学号 = '091501'
    )
    NOT EXISTS
    (
        SELECT 课程号
        FROM 学习 AS SECOND
        WHERE SECOND.学号 = 'XXX'
    )
);</code></pre> 
<h4 id="4.1.3%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E7%AD%9B%E9%80%89%E5%87%BA%E7%BB%93%E6%9E%9C%E9%9B%86%E5%90%88">4.1.3第三步：筛选出结果集合</h4> 
<pre><code class="language-sql">SELECT 学号
FROM 学生
WHERE NOT EXISTS(
    SELECT 课程号
    FROM 学习 AS FIRST
    WHERE FIRST.学号 = '091501' AND NOT EXISTS(
        SELECT 课程号
        FROM 学习 AS SECOND
        WHERE SECOND.学号 = 学生.学号 AND SECOND.课程号 = FIRST.课程号
    )
);</code></pre> 
<p>最后的“<strong>SECOND.课程号 = FIRST.课程号</strong>”目的是：“<span style="color:#fe2c24;"><strong>让课程号相同的元组作比较，不相同的元组不在比较范围内</strong></span>”</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/257cbc06c630e4922859ad31e14ad06c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Hadoop和Hive的聊天数据（FineBI）可视化分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aacfd2a7be7212de32f4ac37f2a51f45/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实习记录小程序|基于SSM的实习记录小程序设计与实现(源码&#43;数据库&#43;文档)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>