<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>手把手完成前端Vue3 &#43; Vite项目工程化搭建 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/822c14cd480f66fd6386e7628592bd1b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="手把手完成前端Vue3 &#43; Vite项目工程化搭建">
  <meta property="og:description" content="vue3_vite_project 基于 Vue3 &#43; Vite 搭建的前端工程化项目演示模板
环境准备 开发环境：Node.js v16.14.2 &#43; npm v8.3.2开发工具：Visual Studio Code or WebStorm源代码管理：Gitnpm镜像：npm config set registry https://registry.npmmirror.com 技术栈 技术栈描述Vue渐进式 JavaScript 框架Vite新一代前端开发与构建工具Element Plus基于 Vue 3，面向设计师和开发者的组件库Pinia符合直觉的 Vue.js 状态管理库vue-routerVue.js 的官方路由管理库SassCSS 预处理器VueUse基于 Vue 组合式 API 的实用工具集Axios用于浏览器和 Node.js 的基于 Promise 的 HTTP 请求库Echarts一个基于 JavaScript 的开源可视化图表库Eslint可配置的 JavaScript 检查器Prettier代码格式化工具 项目构建 #创建项目 npm create vite #安装依赖 npm install #启动项目 npm run dev #构建项目 npm run build 到这一步，如果能成功运行项目，恭喜你！一个项目的基本框架已经搭建完成！
整理项目结构 主要是让项目工程更加感觉清晰
&lt;!--src/App.vue--&gt; &lt;template&gt; &lt;div&gt; &lt;h1&gt;App&lt;/h1&gt; &lt;/div&gt; &lt;/template&gt; 删除 src/style.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-02T17:34:52+08:00">
    <meta property="article:modified_time" content="2024-03-02T17:34:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">手把手完成前端Vue3 &#43; Vite项目工程化搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="vue3_vite_project_0"></a>vue3_vite_project</h2> 
<p>基于 <code>Vue3</code> + <code>Vite</code> 搭建的前端工程化项目演示模板</p> 
<h3><a id="_3"></a>环境准备</h3> 
<ul><li>开发环境：<code>Node.js v16.14.2</code> + <code>npm v8.3.2</code></li><li>开发工具：<code>Visual Studio Code</code> or <code>WebStorm</code></li><li>源代码管理：<code>Git</code></li><li>npm镜像：<code>npm config set registry https://registry.npmmirror.com</code></li></ul> 
<h3><a id="_10"></a>技术栈</h3> 
<table><thead><tr><th>技术栈</th><th>描述</th></tr></thead><tbody><tr><td><a href="https://cn.vuejs.org/" rel="nofollow">Vue</a></td><td>渐进式 JavaScript 框架</td></tr><tr><td><a href="https://cn.vitejs.dev//" rel="nofollow">Vite</a></td><td>新一代前端开发与构建工具</td></tr><tr><td><a href="https://element-plus.org/zh-CN/" rel="nofollow">Element Plus</a></td><td>基于 Vue 3，面向设计师和开发者的组件库</td></tr><tr><td><a href="https://pinia.vuejs.org/zh/" rel="nofollow">Pinia</a></td><td>符合直觉的 Vue.js 状态管理库</td></tr><tr><td><a href="https://router.vuejs.org/zh/" rel="nofollow">vue-router</a></td><td>Vue.js 的官方路由管理库</td></tr><tr><td><a href="https://sass-lang.com/" rel="nofollow">Sass</a></td><td>CSS 预处理器</td></tr><tr><td><a href="https://www.vueusejs.com/" rel="nofollow">VueUse</a></td><td>基于 Vue 组合式 API 的实用工具集</td></tr><tr><td><a href="https://axios-http.com/" rel="nofollow">Axios</a></td><td>用于浏览器和 Node.js 的基于 Promise 的 HTTP 请求库</td></tr><tr><td><a href="https://echarts.apache.org/zh/index.html" rel="nofollow">Echarts</a></td><td>一个基于 JavaScript 的开源可视化图表库</td></tr><tr><td><a href="https://zh-hans.eslint.org/" rel="nofollow">Eslint</a></td><td>可配置的 JavaScript 检查器</td></tr><tr><td><a href="https://prettier.io/" rel="nofollow">Prettier</a></td><td>代码格式化工具</td></tr></tbody></table> 
<h3><a id="_26"></a>项目构建</h3> 
<pre><code class="prism language-bash"><span class="token comment">#创建项目</span>
<span class="token function">npm</span> create vite

<span class="token comment">#安装依赖</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment">#启动项目</span>
<span class="token function">npm</span> run dev

<span class="token comment">#构建项目</span>
<span class="token function">npm</span> run build
</code></pre> 
<p>到这一步，如果能成功运行项目，恭喜你！一个项目的基本框架已经搭建完成！</p> 
<h3><a id="_44"></a>整理项目结构</h3> 
<p>主要是让项目工程更加感觉清晰</p> 
<pre><code class="prism language-vue">&lt;!--src/App.vue--&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;App&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<p>删除 <code>src/style.css</code> 文件</p> 
<p>删除 <code>src/main.js</code> 中引入的 <code>style.css</code> 文件</p> 
<h3><a id="_Git__60"></a>使用 Git 管理源代码</h3> 
<pre><code class="prism language-bash"><span class="token comment">#Git仓库初始化</span>
<span class="token function">git</span> init

<span class="token comment">#添加所有文件到版本库</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>

<span class="token comment">#提交所有文件到版本库</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"feat: 项目初始化完成"</span>

<span class="token comment">#新建 dev 分支，并切换到 dev 分支</span>
<span class="token function">git</span> checkout <span class="token parameter variable">-b</span> dev
</code></pre> 
<p>本地代码仓库初始化完成，之后的开发工作都在当 dev 分支上进行</p> 
<h3><a id="_79"></a>根据技术栈提供的文档，完成项目搭建</h3> 
<h4><a id="_Element_PlushttpselementplusorgzhCN__81"></a>安装 <a href="https://element-plus.org/zh-CN/" rel="nofollow">Element Plus</a> 组件库</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Element Plus</span>
<span class="token function">npm</span> <span class="token function">install</span> element-plus
</code></pre> 
<p>引入 Element Plus 组件库并使用测试安装结果</p> 
<pre><code class="prism language-bash"><span class="token comment"># src/main.js</span>

<span class="token function">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> from <span class="token string">'vue'</span>
<span class="token function">import</span> ElementPlus from <span class="token string">'element-plus'</span> <span class="token comment"># 新增</span>
<span class="token function">import</span> <span class="token string">'element-plus/dist/index.css'</span> <span class="token comment"># 新增</span>
<span class="token function">import</span> App from <span class="token string">'./App.vue'</span>

const app <span class="token operator">=</span> createApp<span class="token punctuation">(</span>App<span class="token punctuation">)</span>
app.use<span class="token punctuation">(</span>ElementPlus<span class="token punctuation">)</span> <span class="token comment"># 新增：使用 Element Plus 组件库</span>
app.mount<span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<p>测试安装结果</p> 
<pre><code class="prism language-vue">&lt;!--src/App.vue--&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;App&lt;/h1&gt;
    &lt;el-button type="primary"&gt;button&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<p>当按钮能正常显示时，说明安装成功</p> 
<h4><a id="_Vue_Routerhttpsroutervuejsorgzh__117"></a>安装 <a href="https://router.vuejs.org/zh/" rel="nofollow">Vue Router</a> 路由管理库</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Vue Router</span>
<span class="token function">npm</span> <span class="token function">install</span> vue-router
</code></pre> 
<p>在项目的 src 目录下新建一个 <code>views</code> 目录，然后在 views 目录下新建两个页面，用于路由跳转。</p> 
<p>在项目的 src 目录下新建一个 <code>router</code> 目录，然后在 router 目录下新建一个 index.js 文件，该文件会作为 Vue Router 的入口文件，该文件内容如下</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/router/index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>createRouter<span class="token punctuation">,</span> createWebHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/login"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Login"</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"../views/login/index.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/dashboard"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Dashboard"</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"../views/dashboard/index.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre> 
<p>在 src/main.js 文件中引入 Vue Router，并使用 Vue Router</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/main.js</span>
<span class="token comment">// ...</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span> <span class="token comment">// 新增</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span> <span class="token comment">// 新增：使用 Vue Router</span>
<span class="token comment">// ...</span>
</code></pre> 
<p>修改 App.vue 文件，添加路由跳转</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="app-container"&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;router-link to="/dashboard"&gt;首页&lt;/router-link&gt;&lt;/li&gt;
      &lt;li&gt;&lt;router-link to="/login"&gt;登录&lt;/router-link&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;router-view /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<p>访问首页和登录页，查看路由是否正常跳转</p> 
<p><strong><code>router-link</code> 和 <code>router-view</code> 是 Vue Router 的两个核心组件，router-link 是用来实现路由跳转，router-view 是用来显示路由对应的内容。</strong></p> 
<h4><a id="_Piniahttpspiniavuejsorgzh__178"></a>安装 <a href="https://pinia.vuejs.org/zh/" rel="nofollow">Pinia</a> 状态管理库</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Pinia</span>
<span class="token function">npm</span> <span class="token function">install</span> pinia
</code></pre> 
<p>在项目的 src 目录下新建一个 <code>store</code> 目录，然后在 store 目录下新建一个 index.js 文件，该文件会作为 Pinia 的入口文件</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/store/index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>createPinia<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> pinia
</code></pre> 
<p>在 src/main.js 文件中引入 Pinia，并使用 Pinia</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/main.js</span>
<span class="token comment">// ...</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">'./store'</span> <span class="token comment">// 新增</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span> <span class="token comment">// 新增：使用 Pinia</span>
<span class="token comment">// ...</span>
</code></pre> 
<p>在 src/store 目录下创建一个 modules 目录，然后在 modules 目录下创建一个 <code>user</code> 状态管理对象，用于管理整个项目的用户登录状态</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/store/modules/user.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> loginStatus <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token comment">/**
     * 登录
     */</span>
    <span class="token keyword">function</span> <span class="token function">handleLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                loginStatus<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
                token<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                userInfo<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif?imageView2/1/w/80/h/80'</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'登录成功'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'登录失败'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 退出登录
     */</span>
    <span class="token keyword">function</span> <span class="token function">handleLogout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            loginStatus<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
            token<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span>
            userInfo<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        userInfo<span class="token punctuation">,</span>
        loginStatus<span class="token punctuation">,</span>
        token<span class="token punctuation">,</span>
        handleLogin<span class="token punctuation">,</span>
        handleLogout
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useUserStore
</code></pre> 
<p>在登录页面，使用 Pinia 获取用户状态管理对象，并调用登录方法</p> 
<pre><code class="prism language-vue">&lt;!--src/views/login/index.vue--&gt;
&lt;script setup&gt;
import useUserStore from '../../store/modules/user'
const userStore = useUserStore()
import {ElMessage } from 'element-plus'

/**
 * 登录
 */
function login() {
  userStore.handleLogin().then((res) =&gt; {
    ElMessage.success(res)
  }).catch(err =&gt; {
    ElMessage.error(err)

  })
}

/**
 * 退出登录
 */
function loginOut() {
  userStore.handleLogout().then(() =&gt; {
    ElMessage.success('退出登录成功')
  }).catch(err =&gt; {
    ElMessage.error(err)
  })
}
&lt;/script&gt;

&lt;template&gt;
&lt;div class="login-container"&gt;
  &lt;el-button type="primary" @click="login"&gt;登 录&lt;/el-button&gt;
  &lt;el-button type="primary" @click="loginOut"&gt;退出登录&lt;/el-button&gt;

  &lt;hr&gt;
  &lt;h1&gt;当前登录状态：{<!-- -->{ userStore.loginStatus ? '已登录' : '未登录' }}&lt;/h1&gt;
  &lt;ul&gt;
    &lt;li&gt;用户名：{<!-- -->{ userStore.userInfo.name }}&lt;/li&gt;
    &lt;li&gt;头 像：&lt;img :src="userStore.userInfo.avatar" alt=""&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<h4><a id="_Sasshttpssasslangcom_CSS__306"></a>安装 <a href="https://sass-lang.com/" rel="nofollow">Sass</a> CSS 预处理器</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Sass，安装时需要添加 -D 参数，表示将 Sass 添加到开发依赖中，在打包过程中，Sass 会自动编译为 CSS</span>
<span class="token function">npm</span> <span class="token function">install</span> sass <span class="token parameter variable">-D</span>
</code></pre> 
<p>在项目的 src 目录下新建一个 <code>styles</code> 目录，然后在 styles 目录下新建一个 <code>variables.scss</code> 文件，该文件存放全局的 Sass 变量</p> 
<pre><code class="prism language-scss">//src/styles/variables.scss
$success: #48C78E;
$danger: #F28482;
</code></pre> 
<p>在首页测试 Sass 变量，在 src/views/dashboard/index.vue 文件中修改如下</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;h1 class="success"&gt;这是一个成功样式&lt;/h1&gt;
  &lt;h2 class="danger"&gt;这是一个告警样式&lt;/h2&gt;
&lt;/template&gt;

&lt;style scoped lang="scss"&gt;
.success{
  color:$success;
}
.danger{
  color: $danger;
}
&lt;/style&gt;

</code></pre> 
<p>此时浏览器会提示 <code>Undefined variable.</code> ，因为我们需要在 vite.config.js 文件中引入该文件，才能使用 Sass 变量</p> 
<pre><code class="prism language-javascript"><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// CSS 预处理器</span>
        <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 定义全局 SCSS 变量</span>
            <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token string">"@use '/src/styles/variables.scss' as *;"</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>查看页面会显示成功和告警样式，表示 Sass 变量已经正常工作了</p> 
<h4><a id="_VueUsehttpswwwvueusejscom__364"></a>安装 <a href="https://www.vueusejs.com/" rel="nofollow">VueUse</a> 工具库</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 VueUse</span>
<span class="token function">npm</span> i @vueuse/core
</code></pre> 
<p>在 src/views/dashboard/index.vue 文件中，使用 VueUse 的 <code>useMouse</code> 方法，获取当前鼠标实时位置</p> 
<pre><code class="prism language-vue">&lt;script setup&gt;
import {useMouse} from '@vueuse/core'
const {x,y} = useMouse()
&lt;/script&gt;
&lt;template&gt;
  &lt;h1 class="success"&gt;这是一个成功样式&lt;/h1&gt;
  &lt;h2 class="danger"&gt;这是一个告警样式&lt;/h2&gt;

  &lt;p&gt;当前鼠标位置：X:{<!-- -->{ x }}、Y:{<!-- -->{ y }}&lt;/p&gt;
&lt;/template&gt;

&lt;style scoped lang="scss"&gt;
.success{
  color:$success;
}
.danger{
  color: $danger;
}
&lt;/style&gt;
</code></pre> 
<p>页面上会实时显示鼠标的位置，表示 VueUse 工具库已经正常工作了，需要使用其它函数，可以参考 <a href="https://www.vueusejs.com/" rel="nofollow">VueUse</a> 文档</p> 
<h4><a id="_Axioshttpsaxioshttpcom__397"></a>安装 <a href="https://axios-http.com/" rel="nofollow">Axios</a> 网络请求库</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Axios</span>
<span class="token function">npm</span> <span class="token function">install</span> axios
</code></pre> 
<p>在 src 目录下新建一个 utils 目录，然后在 utils 目录下新建一个 <code>request.js</code> 文件，在该文件中，可以在发起请求前向请求头中添加一些请求头等信息</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/utils/request.js</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span>  <span class="token string">'axios'</span>

<span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> 'http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>xxx <span class="token comment">// 请求的后端接口地址</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/**
 * 请求拦截器
 */</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求参数：'</span><span class="token punctuation">,</span>config<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/**
 * 响应拦截器
 */</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'响应参数：'</span><span class="token punctuation">,</span>response<span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> request
</code></pre> 
<p>在 src 目录下新建一个 api 目录，然后在 api 目录下新建一个 <code>user.js</code> 文件，在该文件中，封装一些用户相关的接口</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">"../utils/request"</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 获取验证码
 * @param checkKey
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getCodeInfo</span><span class="token punctuation">(</span><span class="token parameter">checkKey</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/xxx/xxx/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>checkKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>回到登录页面，测试获取验证码接口，修改如下：</p> 
<pre><code class="prism language-vue">&lt;script setup&gt;
import {getCodeInfo} from '../../api/user'
import {onMounted, ref} from "vue";

const captchaInfo = ref('')
onMounted(() =&gt; {
  getCodeInfo(new Date().getTime()).then(({data}) =&gt; {
    captchaInfo.value = data.result
  })
})

&lt;/script&gt;

&lt;template&gt;
&lt;div class="login-container"&gt;
  &lt;ul&gt;
    &lt;li&gt;验证码：&lt;img :src="captchaInfo" alt=""&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<p>页面上成功显示了验证码，表示 Axios 工具库已经正常工作了，之后其它 API 接口都统一放到 src/api 目录下统一管理</p> 
<h4><a id="_Echartshttpsechartsapacheorgzhindexhtml__475"></a>安装 <a href="https://echarts.apache.org/zh/index.html" rel="nofollow">Echarts</a> 图表库</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Echarts</span>
<span class="token function">npm</span> <span class="token function">install</span> echarts
</code></pre> 
<p>在 src/views/dashboard/index.vue 文件中，使用 Echarts 的 <code>init</code> 方法，初始化一个图表</p> 
<pre><code class="prism language-vue">&lt;script setup&gt;
import * as echarts from 'echarts';
import {onMounted, ref} from "vue";

const chartRef = ref(null)
let echartClient = null
onMounted(() =&gt; {
  initChart()
})
function initChart() {
  echartClient =  echarts.init(chartRef.value)
  echartClient.setOption({
    tooltip: {},
    xAxis: {
      data: ['衬衫', '羊毛衫', '雪纺衫', '裤子', '高跟鞋', '袜子']
    },
    yAxis: {},
    series: [
      {
        name: '销量',
        type: 'bar',
        data: [5, 20, 36, 10, 10, 20]
      }
    ]
  })
}

&lt;/script&gt;
&lt;template&gt;
  &lt;div class="chart-box" ref="chartRef" &gt;&lt;/div&gt;
&lt;/template&gt;

&lt;style scoped lang="scss"&gt;
.chart-box{
  width: 600px;
  height: 400px;
}
&lt;/style&gt;
</code></pre> 
<p>页面上可以看到一个柱状图，表示 Echarts 工具库已经正常工作了</p> 
<h4><a id="_Eslinthttpszhhanseslintorg__526"></a>安装 <a href="https://zh-hans.eslint.org/" rel="nofollow">Eslint</a> 代码检查工具</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Eslint 及相关插件</span>
<span class="token function">npm</span> <span class="token function">install</span> eslint <span class="token parameter variable">-D</span>
<span class="token function">npm</span> <span class="token function">install</span> eslint-config-airbnb-base <span class="token parameter variable">-D</span>
<span class="token function">npm</span> <span class="token function">install</span> eslint-define-config <span class="token parameter variable">-D</span>
<span class="token function">npm</span> <span class="token function">install</span> eslint-plugin-import <span class="token parameter variable">-D</span>
<span class="token function">npm</span> <span class="token function">install</span> eslint-plugin-vue <span class="token parameter variable">-D</span>
</code></pre> 
<p>在项目更目录下新建一个 <code>.eslintrc.js</code> 文件，配置如下：</p> 
<pre><code class="prism language-javascript"><span class="token comment">// .eslintrc.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint-define-config"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jest</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es6</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"vue"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">"vue-eslint-parser"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">"latest"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allowImportExportEverywhere</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">ecmaFeatures</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"eslint-config-airbnb-base"</span><span class="token punctuation">,</span>
    <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:vue/vue3-essential"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:vue/vue3-recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:vue/vue3-strongly-recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:import/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:import/errors"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:import/warnings"</span><span class="token punctuation">,</span>
    <span class="token comment">// ".eslintrc-auto-import.json", // 解决 Eslint 提示 no-undef 错误</span>
    <span class="token string">"prettier"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:prettier/recommended"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 规则说明：off 或 0 - 关闭规则；warn 或 1 - 打开规则作为警告（不影响退出代码）；error 或 2 - 打开规则作为错误（退出代码将为 1）
   */</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 不使用制表符</span>
    <span class="token string-property property">"prettier/prettier"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制使用分号</span>
    <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"always"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制使用双引号</span>
    <span class="token literal-property property">quotes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"double"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 解决最后一个逗号</span>
    <span class="token comment">// "comma-dangle": [2, "never"],</span>
    <span class="token comment">// 关闭默认参数应为最后一个</span>
    <span class="token string-property property">"default-param-last"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止未使用的变量</span>
    <span class="token string-property property">"no-unused-vars"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// 关闭组件命名规则</span>
    <span class="token string-property property">"vue/multi-word-component-names"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止使用多余的包</span>
    <span class="token string-property property">"import/no-extraneous-dependencies"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 确保在导入路径内一致使用文件扩展名</span>
    <span class="token string-property property">"import/extensions"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 确保导入指向可以解析的文件/模块</span>
    <span class="token string-property property">"import/no-unresolved"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 首选默认导出导入/首选默认导出</span>
    <span class="token string-property property">"import/prefer-default-export"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求使用 let 或 const 而不是 var</span>
    <span class="token string-property property">"no-var"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止使用 new 以避免产生副作用</span>
    <span class="token string-property property">"no-new"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止变量声明与外层作用域的变量同名</span>
    <span class="token string-property property">"no-shadow"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用 console</span>
    <span class="token string-property property">"no-console"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止标识符中有悬空下划线</span>
    <span class="token string-property property">"no-underscore-dangle"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止在可能与比较操作符相混淆的地方使用箭头函数</span>
    <span class="token string-property property">"no-confusing-arrow"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用一元操作符 ++ 和 --</span>
    <span class="token string-property property">"no-plusplus"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止对 function 的参数进行重新赋值</span>
    <span class="token string-property property">"no-param-reassign"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用特定的语法</span>
    <span class="token string-property property">"no-restricted-syntax"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止在变量定义之前使用它们</span>
    <span class="token string-property property">"no-use-before-define"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止直接调用 Object.prototypes 的内置属性</span>
    <span class="token string-property property">"no-prototype-builtins"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止可以在有更简单的可替代的表达式时使用三元操作符</span>
    <span class="token string-property property">"no-unneeded-ternary"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止重复模块导入</span>
    <span class="token string-property property">"no-duplicate-imports"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止在对象中使用不必要的计算属性</span>
    <span class="token string-property property">"no-useless-computed-key"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止不必要的转义字符</span>
    <span class="token string-property property">"no-useless-escape"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁用 continue 语句</span>
    <span class="token string-property property">"no-continue"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制使用一致的缩进</span>
    <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">SwitchCase</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制使用骆驼拼写法命名约定</span>
    <span class="token literal-property property">camelcase</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制类方法使用 this</span>
    <span class="token string-property property">"class-methods-use-this"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求构造函数首字母大写</span>
    <span class="token string-property property">"new-cap"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制一致地使用 function 声明或表达式</span>
    <span class="token string-property property">"func-style"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制一行的最大长度</span>
    <span class="token string-property property">"max-len"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求 return 语句要么总是指定返回的值，要么不指定</span>
    <span class="token string-property property">"consistent-return"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制switch要有default分支</span>
    <span class="token string-property property">"default-case"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制剩余和扩展运算符及其表达式之间有空格</span>
    <span class="token string-property property">"rest-spread-spacing"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 要求使用 const 声明那些声明后不再被修改的变量</span>
    <span class="token string-property property">"prefer-const"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 强制箭头函数的箭头前后使用一致的空格</span>
    <span class="token string-property property">"arrow-spacing"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token comment">// 只强制对象解构，不强制数组解构</span>
    <span class="token string-property property">"prefer-destructuring"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">object</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">array</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 禁止在对象中使用不必要的计算属性</span>
    <span class="token string-property property">"no-unused-expressions"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>修改 <code>package.json</code> 文件，在 <code>scripts</code> 中添加 <code>"lint": "eslint --ext .js,.vue --fix src"</code> ，运行 <code>npm run lint</code> 命令，会自动修复所有代码问题</p> 
<h4><a id="_Prettierhttpsprettierio__665"></a>安装 <a href="https://prettier.io/" rel="nofollow">Prettier</a> 代码格式化工具</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装 Prettier 及相关插件</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> prettier
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> eslint-plugin-prettier
</code></pre> 
<p>在项目根目录下新建一个 <code>.prettierrc.cjs</code> 文件，配置如下：</p> 
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// JSX 中的右尖括号是否换行，默认false</span>
  <span class="token literal-property property">jsxBracketSameLine</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 文件末尾是否换行，默认true</span>
  <span class="token literal-property property">endOfLine</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>
  <span class="token comment">// 换行符类型 (lf|crlf|cr;默认lf)</span>
  <span class="token literal-property property">rangeStart</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token comment">// 单个属性是否换行，默认false</span>
  <span class="token literal-property property">singleAttributePerLine</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否使用双引号，默认true</span>
  <span class="token literal-property property">doubleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否使用单行注释，默认false</span>
  <span class="token literal-property property">experimentalTernaries</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// (x)=&gt;{},单个参数箭头函数是否显示小括号。(always:始终显示;avoid:省略括号。默认:always)</span>
  <span class="token literal-property property">arrowParens</span><span class="token operator">:</span> <span class="token string">"always"</span><span class="token punctuation">,</span>
  <span class="token comment">// 开始标签的右尖括号是否跟随在最后一行属性末尾，默认false</span>
  <span class="token literal-property property">bracketSameLine</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 对象字面量的括号之间打印空格 (true - Example: { foo: bar } ; false - Example: {foo:bar})</span>
  <span class="token literal-property property">bracketSpacing</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否格式化一些文件中被嵌入的代码片段的风格(auto|off;默认auto)</span>
  <span class="token literal-property property">embeddedLanguageFormatting</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>
  <span class="token comment">// 指定 HTML 文件的空格敏感度 (css|strict|ignore;默认css)</span>
  <span class="token literal-property property">htmlWhitespaceSensitivity</span><span class="token operator">:</span> <span class="token string">"css"</span><span class="token punctuation">,</span>
  <span class="token comment">// 当文件已经被 Prettier 格式化之后，是否会在文件顶部插入一个特殊的 @format 标记，默认false</span>
  <span class="token literal-property property">insertPragma</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 在 JSX 中使用单引号替代双引号，默认false</span>
  <span class="token literal-property property">jsxSingleQuote</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 每行最多字符数量，超出换行(默认80)</span>
  <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
  <span class="token comment">// 超出打印宽度 (always | never | preserve )</span>
  <span class="token literal-property property">proseWrap</span><span class="token operator">:</span> <span class="token string">"preserve"</span><span class="token punctuation">,</span>
  <span class="token comment">// 对象属性是否使用引号(as-needed | consistent | preserve;默认as-needed:对象的属性需要加引号才添加;)</span>
  <span class="token literal-property property">quoteProps</span><span class="token operator">:</span> <span class="token string">"as-needed"</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否只格式化在文件顶部包含特定注释(@prettier| @format)的文件，默认false</span>
  <span class="token literal-property property">requirePragma</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 结尾添加分号</span>
  <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 使用单引号 (true:单引号;false:双引号)</span>
  <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 缩进空格数，默认2个空格</span>
  <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token comment">// 元素末尾是否加逗号，默认es5: ES5中的 objects, arrays 等会添加逗号，TypeScript 中的 type 后不加逗号</span>
  <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
  <span class="token comment">// 指定缩进方式，空格或tab，默认false，即使用空格</span>
  <span class="token literal-property property">useTabs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// vue 文件中是否缩进 &lt;style&gt; 和 &lt;script&gt; 标签，默认 false</span>
  <span class="token literal-property property">vueIndentScriptAndStyle</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>修改 <code>package.json</code> 文件，在 <code>scripts</code> 中添加 <code>"prettier": "prettier --write src/**/*.{vue,js,jsx,ts,tsx,json,css,scss,md}"</code> ，运行 <code>npm run prettier</code> 命令，会自动格式化所有代码</p> 
<h3><a id="_728"></a>性能优化及打包策略</h3> 
<h4><a id="_Element_PlushttpselementplusorgzhCNguidequickstarthtml__730"></a>配置 <a href="https://element-plus.org/zh-CN/guide/quickstart.html#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5" rel="nofollow">Element Plus</a> 按需导入</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装插件</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> unplugin-vue-components unplugin-auto-import
</code></pre> 
<p>修改 <code>vite.config.js</code> 文件，添加了 <code>vue</code>, <code>vue-router</code>, <code>@vueuse/core</code> 相关函数自动导入配置</p> 
<p>自动导入 <code>src/**/components</code> 目录下的组件，无需在页面中手动导入组件，添加了路径别名，<code>@</code> 默认指向 <code>src</code> 目录，导入模块的时候可以直接使用 <code>import xxx from "@/xxx/xxx"</code> 形式</p> 
<pre><code class="prism language-javascript"><span class="token comment">// vite.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">"@vitejs/plugin-vue"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">"unplugin-auto-import/vite"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">"unplugin-vue-components/vite"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"unplugin-vue-components/resolvers"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"path"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pathSrc <span class="token operator">=</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动导入</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 自动导入 Vue 相关函数，如：ref, reactive, toRef 等</span>
      <span class="token literal-property property">imports</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"vue"</span><span class="token punctuation">,</span> <span class="token string">"vue-router"</span><span class="token punctuation">,</span> <span class="token string">"@vueuse/core"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 自动导入 Element Plus 相关函数</span>
        <span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">eslintrc</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 解决 Eslint 提示 no-undef 错误</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 配置文件位置 (false:关闭自动生成)</span>
      <span class="token literal-property property">dts</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src/types/auto-imports.d.ts"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 自动导入 Element Plus 组件</span>
        <span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 指定自定义组件位置(默认:src/components)</span>
      <span class="token literal-property property">dirs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/**/components"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 配置文件位置 (false:关闭自动生成)</span>
      <span class="token literal-property property">dts</span><span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src/types/components.d.ts"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 导入文件时省略文件扩展名</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">".js"</span><span class="token punctuation">,</span> <span class="token string">".ts"</span><span class="token punctuation">,</span> <span class="token string">".vue"</span><span class="token punctuation">,</span> <span class="token string">".json"</span><span class="token punctuation">,</span> <span class="token string">"es"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置路径别名</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token string-property property">"@"</span><span class="token operator">:</span> pathSrc <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>删除 <code>src/main.js</code> 文件中之前引入的 Element Plus 的代码</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
<span class="token comment">// import ElementPlus from "element-plus";  // 删除</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"./router"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">"./store"</span><span class="token punctuation">;</span>
<span class="token comment">// import "element-plus/dist/index.css";  // 删除</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// app.use(ElementPlus); // 删除</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>删除 <code>src/views/login/index.vue</code> 中的 <code>import { ElMessage } from "element-plus";</code> 代码，现在所有与 Element Plus 相关的代码都被自动导入了，无需再手动引入。</p> 
<p><strong>修改 <code>.eslintrc.cjs</code> 文件中 <code>extends</code> 项，添加 <code>".eslintrc-auto-import.json"</code> 配置，解决 Eslint 提示 no-undef 错误</strong></p> 
<pre><code class="prism language-bash"><span class="token comment"># ...</span>
extends: <span class="token punctuation">[</span>
<span class="token comment"># ...</span>
  <span class="token string">".eslintrc-auto-import.json"</span>, <span class="token comment"># 解决 Eslint 提示 no-undef 错误</span>
<span class="token punctuation">]</span>
<span class="token comment"># ...</span>
</code></pre> 
<h4><a id="_Echartshttpsechartsapacheorghandbookzhbasicsimportecharts__822"></a>按需导入 <a href="https://echarts.apache.org/handbook/zh/basics/import#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5-echarts-%E5%9B%BE%E8%A1%A8%E5%92%8C%E7%BB%84%E4%BB%B6" rel="nofollow">Echarts</a> 图表库</h4> 
<p>在 <code>src/utils</code> 文件夹下创建 <code>echarts.js</code> 文件，把需要用到的图表组件导入到该文件中，在需要使用 Echarts 的地方直接导入该文件，这样就可以按需导入 Echarts 图表库了</p> 
<pre><code class="prism language-javascript"><span class="token comment">// src/utils/echarts.js</span>

<span class="token comment">// 引入 echarts 核心模块，核心模块提供了 echarts 使用必须要的接口。</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> echarts <span class="token keyword">from</span> <span class="token string">"echarts/core"</span><span class="token punctuation">;</span>
<span class="token comment">// 引入柱状图图表，图表后缀都为 Chart</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> BarChart <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"echarts/charts"</span><span class="token punctuation">;</span>
<span class="token comment">// 引入提示框，标题，直角坐标系，数据集，内置数据转换器组件，组件后缀都为 Component</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  TitleComponent<span class="token punctuation">,</span>
  TooltipComponent<span class="token punctuation">,</span>
  GridComponent<span class="token punctuation">,</span>
  DatasetComponent<span class="token punctuation">,</span>
  TransformComponent<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"echarts/components"</span><span class="token punctuation">;</span>
<span class="token comment">// 标签自动布局、全局过渡动画等特性</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> LabelLayout<span class="token punctuation">,</span> UniversalTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"echarts/features"</span><span class="token punctuation">;</span>
<span class="token comment">// 引入 Canvas 渲染器，注意引入 CanvasRenderer 或者 SVGRenderer 是必须的一步</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> CanvasRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"echarts/renderers"</span><span class="token punctuation">;</span>

<span class="token comment">// 注册必须的组件</span>
echarts<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  TitleComponent<span class="token punctuation">,</span>
  TooltipComponent<span class="token punctuation">,</span>
  GridComponent<span class="token punctuation">,</span>
  DatasetComponent<span class="token punctuation">,</span>
  TransformComponent<span class="token punctuation">,</span>
  BarChart<span class="token punctuation">,</span>
  LabelLayout<span class="token punctuation">,</span>
  UniversalTransition<span class="token punctuation">,</span>
  CanvasRenderer<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> echarts<span class="token punctuation">;</span>
</code></pre> 
<p>修改 <code>src/views/dashboard/index.vue</code> 文件，引入 <code>src/utils/echarts.js</code> 文件，这样就可以按需导入 Echarts 图表库了</p> 
<pre><code class="prism language-javascript"><span class="token comment">// import * as echarts from "echarts"; // 删除</span>
<span class="token keyword">import</span> echarts <span class="token keyword">from</span> <span class="token string">"@/utils/echarts"</span><span class="token punctuation">;</span> <span class="token comment">// 新增</span>
<span class="token comment">// ...</span>
</code></pre> 
<h4><a id="_870"></a>打包静态资源优化</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装插件</span>
<span class="token function">npm</span> <span class="token function">install</span> terser <span class="token parameter variable">-D</span>
</code></pre> 
<p>修改 <code>vite.config.js</code> 文件，添加了 <code>terser</code> 配置，打包时会自动压缩 js 文件，配置了 <code>build.rollupOptions</code> 将打包后的静态资源按文件类型进行分类</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
 <span class="token comment">// ...</span>
  <span class="token comment">// 预览模式配置</span>
  <span class="token literal-property property">preview</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 开发模式配置</span>
  <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">https</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否开启 https</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span> <span class="token comment">// 端口号</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span> <span class="token comment">// 监听所有地址</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 服务启动时是否自动打开浏览器</span>
    <span class="token literal-property property">cors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许跨域</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 自定义代理规则</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 构建配置</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">chunkSizeWarningLimit</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token comment">// 消除打包大小超过500kb警告</span>
    <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token string">"terser"</span><span class="token punctuation">,</span> <span class="token comment">// Vite 2.6.x 以上需要配置 minify: "terser", terserOptions 才能生效</span>
    <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">keep_infinity</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 防止 Infinity 被压缩成 1/0，这可能会导致 Chrome 上的性能问题</span>
        <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生产环境去除 console</span>
        <span class="token literal-property property">drop_debugger</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生产环境去除 debugger</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 删除注释</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rollupOptions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 用于从入口点创建的块的打包输出格式[name]表示文件名,[hash]表示该文件内容hash值</span>
        <span class="token literal-property property">entryFileNames</span><span class="token operator">:</span> <span class="token string">"js/[name].[hash].js"</span><span class="token punctuation">,</span>
        <span class="token comment">// 用于命名代码拆分时创建的共享块的输出命名</span>
        <span class="token literal-property property">chunkFileNames</span><span class="token operator">:</span> <span class="token string">"js/[name].[hash].js"</span><span class="token punctuation">,</span>
        <span class="token comment">// 用于输出静态资源的命名，[ext]表示文件扩展名</span>
        <span class="token function-variable function">assetFileNames</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">assetInfo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">const</span> info <span class="token operator">=</span> assetInfo<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">let</span> extType <span class="token operator">=</span> info<span class="token punctuation">[</span>info<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token comment">// console.log('文件信息', assetInfo.name)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>assetInfo<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            extType <span class="token operator">=</span> <span class="token string">"media"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpe?g|gif|svg)(\?.*)?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>assetInfo<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            extType <span class="token operator">=</span> <span class="token string">"img"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff2?|eot|ttf|otf)(\?.*)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>assetInfo<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            extType <span class="token operator">=</span> <span class="token string">"fonts"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>extType<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/[name].[hash].[ext]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h4><a id="_Gzip__940"></a>开启 Gzip 压缩</h4> 
<pre><code class="prism language-bash"><span class="token comment">#安装插件</span>
<span class="token function">npm</span> <span class="token function">install</span> vite-plugin-compression <span class="token parameter variable">-D</span>
</code></pre> 
<p>修改 <code>vite.config.js</code> 文件，添加了 <code>vite-plugin-compression</code> 插件</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token keyword">import</span> viteCompression <span class="token keyword">from</span> <span class="token string">"vite-plugin-compression"</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token function">viteCompression</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>在 <code>Vite</code> 构建项目时开启 <code>Gzip</code> 压缩后，为了确保 <code>Nginx</code> 能够正确处理并返回 <code>Gzip</code> 压缩后的文件，你需要在 <code>Nginx</code> 服务器上进行相应的配置</p> 
<pre><code class="prism language-bash">http <span class="token punctuation">{<!-- --></span>
    <span class="token function">gzip</span> on<span class="token punctuation">;</span>
    gzip_static on<span class="token punctuation">;</span> <span class="token comment"># 开启静态gzip功能，优先返回预压缩的.gz文件</span>
    server <span class="token punctuation">{<!-- --></span>
        listen <span class="token number">8080</span><span class="token punctuation">;</span>
        server_name localhost<span class="token punctuation">;</span>
        location / <span class="token punctuation">{<!-- --></span>
              root /usr/share/nginx/html/dist<span class="token punctuation">;</span> <span class="token comment"># 替换为你的实际项目部署目录</span>
              index  index.html index.htm<span class="token punctuation">;</span>
              try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
              <span class="token comment"># 指定如果存在预压缩文件，则优先返回 .gz 文件</span>
              gzip_static always<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> /50x.html <span class="token punctuation">{<!-- --></span>
            root   html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个配置中，Nginx会在接收到请求时首先查找是否存在对应的.gz预压缩文件，如果存在则直接返回该文件，否则会返回原始未压缩的文件。</p> 
<p>确保Vite构建时生成的预压缩文件与原始文件位于同一目录下，并且命名规范遵循Nginx的预期（即与原始文件同名，但扩展名为.gz）。同时，在重启Nginx服务后使新配置生效。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d284b3c551b72e6ccc4d9ce6b38e17b0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux下C&#43;&#43;轻量级WebServer服务器 框架梳理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/541aab8271a7d78ccabb898a30348534/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Spring Boot 3】的安全防线：整合 【Spring Security 6】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>