<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决Session.connect: java.net.SocketException: Connection reset - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f453560ff042d1830136156c407a7886/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="解决Session.connect: java.net.SocketException: Connection reset">
  <meta property="og:description" content="前提要求：① 虚拟机防火墙已关闭，且运行了SSH服务正常运行；
② 之前可以连接，IP地址、端口（默认为22）、用户名和密码都是正确的；
③ 无其他可能影响连接的外部影响，只是FinalShell这种Linux远程连接的工具与虚拟机之间的操作。
问题原因 原本之前就配置好了FinalShell可以正常连接虚拟机，突然修改了某些IP或有一天重新连接却连接不上了，出现Session.connect: java.net.SocketException: Connection reset ：连接重置的错误信息。（如下图）
​
甚至有时出现Session.connect: java.net.SocketException: Connection reset by peer ：对等方重置连接的错误信息。
即使再三确定了
① VMware的虚拟网络编辑器中IP配置与电脑网卡的虚拟网卡VMware Virtual Ethernet Adapter for VMnet8配置一致；（如下图）
​
② FinalShell的配置与虚拟机网络配置配置一致。（如下图）
​
③ 并且自己ping这些ip也ping得通。（如下图）
​
有时候改来改去突然又连接上了，最后重复尝试，即使连接上了还特意制造同样情况的错误，终于知道是因为在连接断开后的读和写操作引起的。
1、Connect reset by peer：如果一端的Socket被关闭（或主动关闭，或因为异常退出而引起的关闭），另一端仍发送数据，发送的第一个数据包引发该异常。（Socket默认连接60秒，60秒之内没有进行心跳交互，即读写数据，就会自动关闭连接。）
2、Connection reset：一端退出，但退出时并未关闭该连接，另一端如果在从连接中读数据则抛出该异常。
解决办法 就是改动电脑网卡的虚拟网卡VMware Virtual Ethernet Adapter for VMnet8和FinalShell的配置尝试连接后再按原来的改回来。
步骤一 修改电脑网卡的虚拟网卡VMware Virtual Ethernet Adapter for VMnet8的IP，数字随意。（如下图，以Win11为例）（点击网络和Internet后在最下面找到高级网络设置，才进入网络适配器）
步骤二 特意改错FinalShell的配置，并尝试连接出现连接超时错误后，再改回正确的IP，即可重新连接。（下图为错误的）
下图为正确的">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-19T17:48:04+08:00">
    <meta property="article:modified_time" content="2024-03-19T17:48:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决Session.connect: java.net.SocketException: Connection reset</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>前提要求</strong>：① 虚拟机防火墙已关闭，且运行了SSH服务正常运行；<br> ② 之前可以连接，IP地址、端口（默认为22）、用户名和密码都是正确的；<br> ③ 无其他可能影响连接的外部影响，只是FinalShell这种Linux远程连接的工具与虚拟机之间的操作。</p> 
<hr> 
<h2>问题原因</h2> 
<p>原本之前就配置好了FinalShell可以正常连接虚拟机，突然修改了某些IP或有一天重新连接却连接不上了，出现Session.connect: java.net.SocketException: Connection reset ：连接重置的错误信息。（如下图）<br><img alt="" height="125" src="https://images2.imgbox.com/ce/d5/3FJTWrlU_o.png" width="562">​<br> 甚至有时出现Session.connect: java.net.SocketException: Connection reset by peer ：对等方重置连接的错误信息。</p> 
<p>即使再三确定了<br> ① VMware的虚拟网络编辑器中IP配置与电脑网卡的虚拟网卡VMware Virtual Ethernet Adapter for VMnet8配置一致；（如下图）<br><img alt="" height="322" src="https://images2.imgbox.com/6a/cf/zkUnOkqJ_o.png" width="523">​</p> 
<p>② FinalShell的配置与虚拟机网络配置配置一致。（如下图）<br><img alt="" height="280" src="https://images2.imgbox.com/92/c2/OWopbh0W_o.png" width="522">​</p> 
<p>③ 并且自己ping这些ip也ping得通。（如下图）<br><img alt="" height="466" src="https://images2.imgbox.com/f2/c1/PWIqFsjE_o.png" width="522">​</p> 
<p>有时候改来改去突然又连接上了，最后重复尝试，即使连接上了还特意制造同样情况的错误，终于知道是因为在连接断开后的读和写操作引起的。</p> 
<p>1、Connect reset by peer：如果一端的Socket被关闭（或主动关闭，或因为异常退出而引起的关闭），另一端仍发送数据，发送的第一个数据包引发该异常。（Socket默认连接60秒，60秒之内没有进行心跳交互，即读写数据，就会自动关闭连接。）</p> 
<p>2、Connection reset：一端退出，但退出时并未关闭该连接，另一端如果在从连接中读数据则抛出该异常。</p> 
<hr> 
<h2>解决办法</h2> 
<p>就是改动电脑网卡的虚拟网卡VMware Virtual Ethernet Adapter for VMnet8和FinalShell的配置尝试连接后再按原来的改回来。</p> 
<h3>步骤一</h3> 
<p>修改电脑网卡的虚拟网卡VMware Virtual Ethernet Adapter for VMnet8的IP，数字随意。（如下图，以Win11为例）（点击网络和Internet后在最下面找到高级网络设置，才进入网络适配器）</p> 
<h3><img alt="" height="259" src="https://images2.imgbox.com/7f/dd/EOL0TJjo_o.png" width="524"><br>  </h3> 
<h3>步骤二</h3> 
<p>特意改错FinalShell的配置，并尝试连接出现连接超时错误后，再改回正确的IP，即可重新连接。（下图为错误的）<br><img alt="" height="451" src="https://images2.imgbox.com/72/27/SgphuvBk_o.png" width="497"><br><img alt="" height="46" src="https://images2.imgbox.com/1e/be/RAThea2Q_o.png" width="490"></p> 
<p>下图为正确的</p> 
<p><img alt="" height="452" src="https://images2.imgbox.com/67/07/Ga5D2ZFO_o.png" width="499"><br><img alt="" height="119" src="https://images2.imgbox.com/0d/fe/d40BR1CV_o.png" width="529"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f6252405f4f2fadb2955b217beb187f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">uniapp和小程序如何分包，详细步骤手把手（图解，前端高级开发岗必问知识点</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f2517a9affd05a50c7159d856be2370f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java 数据长度获取方式对比：length属性、length()和size()方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>