<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>深度理解指针（5）----指针完结 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/77769e8b2cb9e2a797e2d7f4d783fb5f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="深度理解指针（5）----指针完结">
  <meta property="og:description" content="hello，各位小伙伴们我们现在已经对指针有了深刻的理解，指针来到了收尾环节！让我们来做几题例题来复习之前学习的内容吧！
最近爆火的黑神话悟空不知道小伙伴们体验了没有，小编对八戒还有蜘蛛精的凄惨爱情深深打动特意找了一张他们的动漫合影！
一、sizeof和strlen的对比 1、sizeof sizeof 计算变量所占内存内存空间大小的，单位是字节，如果操作数是类型的话，计算的是使用类型创建的变量所占内存空间的大小。sizeof 只关注占用内存空间的大小，不在乎内存中存放什么数据。
例如：
#include&lt;stdio.h&gt; int main () { int a = 10; printf(&#34;%d\n&#34;, sizeof(a)); printf(&#34;%d\n&#34;,sizeof(int)); return 0; } sizeof是一个操作数！
2、strlen strlen是C语言库函数，是用来求字符串的长度的·。格式：
size_t strlen (const char*str); strlen统计的是字符串中\0之前的个数。
#include&lt;stdio.h&gt; int main () { char arr1[3] = {&#39;a&#39;,&#39;b&#39;,&#39;c&#39;}; char arr2[] = &#34;abcdef&#34;; printf(&#34;%d\n&#34;,strlen(arr1)); printf(&#34;%d\n&#34;,strlen(arr2)); return 0; } 在字符数组中不包含\0而在字符串数组中末尾包含\0，同时要注意strlen只能用来统计字符数组的元素个数，不能统计整型数组元素个数！
二、数组和指针笔试题解析​ 1、一维数组​ #include&lt;stdio.h&gt; int main () { int a[] = {1,2,3,4}; printf(&#34;%d\n&#34;,sizeof(a));// 16 此时传递的是整个数组,所以大小为4*sizeof(int) printf(&#34;%d\n&#34;,sizeof(a&#43;0));// 4或8 a没有单独的放在sizeof中，所以a是数组首元素地址!,地址的大小为4或8 printf(&#34;%d\n&#34;,sizeof(*a));// 4 同样a没有单独的放在sizeof中,a是数组首元素地址,解引用后为数组首元素！ printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-29T18:08:18+08:00">
    <meta property="article:modified_time" content="2024-08-29T18:08:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">深度理解指针（5）----指针完结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>hello，各位小伙伴们我们现在已经对指针有了深刻的理解，指针来到了收尾环节！让我们来做几题例题来复习之前学习的内容吧！</p> 
<p>最近爆火的黑神话悟空不知道小伙伴们体验了没有，小编对八戒还有蜘蛛精的凄惨爱情深深打动特意找了一张他们的动漫合影！</p> 
<p style="text-align:center;"><img alt="" height="415" src="https://images2.imgbox.com/c0/74/r2LhHpDg_o.png" width="612"></p> 
<h2>一、sizeof和strlen的对比</h2> 
<h3>1、sizeof</h3> 
<p>sizeof 计算变量所占内存内存空间大小的，单位是字节，如果操作数是类型的话，计算的是使用类型创建的变量所占内存空间的大小。sizeof 只关注占用内存空间的大小，不在乎内存中存放什么数据。</p> 
<p>例如：</p> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    int a = 10;
    printf("%d\n", sizeof(a));
    printf("%d\n",sizeof(int));
    return 0;
}</code></pre> 
<p>sizeof是一个操作数！</p> 
<h3>2、strlen</h3> 
<p>strlen是C语言库函数，是用来求字符串的长度的·。格式：</p> 
<pre><code class="language-cpp">size_t strlen (const char*str);</code></pre> 
<p>strlen统计的是字符串中\0之前的个数。</p> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    char arr1[3] = {'a','b','c'};
    char arr2[]  = "abcdef";
    printf("%d\n",strlen(arr1));
    printf("%d\n",strlen(arr2));
    return 0;
}</code></pre> 
<p>在字符数组中不包含\0而在字符串数组中末尾包含\0，同时要注意strlen只能用来统计字符数组的元素个数，不能统计整型数组元素个数！</p> 
<p><img alt="" height="286" src="https://images2.imgbox.com/08/ac/GdF1WFTB_o.png" width="1190"></p> 
<h2>二、数组和指针笔试题解析​</h2> 
<h3>1、一维数组​</h3> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    int a[] = {1,2,3,4};
    printf("%d\n",sizeof(a));// 16  此时传递的是整个数组,所以大小为4*sizeof(int)
    printf("%d\n",sizeof(a+0));// 4或8   a没有单独的放在sizeof中，所以a是数组首元素地址!,地址的大小为4或8
    printf("%d\n",sizeof(*a));// 4 同样a没有单独的放在sizeof中,a是数组首元素地址,解引用后为数组首元素！
    printf("%d\n",sizeof(a+1));// 4或8 a是数组首元素地址,+1后为数组第2个元素的地址
    printf("%d\n",sizeof(a[1]));// 4  a[1]是数组的第二个元素,为int类型
    printf("%d\n",sizeof(&amp;a));// 4或8 此时&amp;a是数组的整个地址,仍然是指针变量！
    printf("%d\n",sizeof(*&amp;a));// 16  取出整个数组的地址后在进行解引用操作,为整个数组的元素
    printf("%d\n",sizeof(&amp;a+1))// 4 或者8  取出整个数组的地址后,+1会跳过整个数组,虽然越界,但sizeof不会真实访问
    printf("%d\n",sizeof(&amp;a[0]));// 4 或者8 表示的是数组首元素的地址
    printf("%d\n",sizeof(&amp;a[0]+1));// 4 或者8  +1后表示数组第二个元素的地址
    return 0; 
}</code></pre> 
<h3>2、字符数组​</h3> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    char arr[] = {'a','b','c','d','e','f'};
    printf("%d\n", sizeof(arr));//6 一共6个字符,每个字符的大小为一个字节
    printf("%d\n", sizeof(arr+0));// 4或者8 传递的是数组首元素地址
    printf("%d\n", sizeof(*arr));// 1 arr没有单独的放入sizeof中,即表示数组首元素地址,解引用后为数组首元素！类型为char
    printf("%d\n", sizeof(arr[1]));// 1 表示数组中第二个元素,类型为char
    printf("%d\n", sizeof(&amp;arr));// 4或者8  &amp;arr传递的是整个数组的地址
    printf("%d\n", sizeof(&amp;arr+1));// 4或者8 &amp;arr传递整个数组后进行+1,会跳过整个数组,会越界但不会进行访问
    printf("%d\n", sizeof(&amp;arr[0]+1));//4或者8  表示的是第二个元素的地址
    return 0;
}</code></pre> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    char arr[] = {'a','b','c','d','e','f'};
    printf("%d\n", strlen(arr));// 随机值 strlen统计的是字符中\0之前字符的个数,但在字符数组中不存在\0,随机值
    printf("%d\n", strlen(arr+0));// 随机值 arr表示的是数组首元素的地址,从该地址向后统计\0之前元素的个数
    printf("%d\n", strlen(*arr));// 报错！arr仍然表示的是数组首元素地址,解引用以后为数组首元素,strlen的传参为指针类型,与规定传递类型不同！
    printf("%d\n", strlen(arr[1]));//  报错！
    printf("%d\n", strlen(&amp;arr));// 随机值  &amp;arr表示的是整个数组的地址,但仍然是从数组的首元素开始!,向后统计\0之前元素的个数!
    printf("%d\n", strlen(&amp;arr+1));// 随机值  &amp;arr表示的是整个数组的地址+1后会跳过整个数组！,之后在向后统计\0之前的元素个数！,但后面的内存中\0的位置未知,会是随机值
    printf("%d\n", strlen(&amp;arr[0]+1));// 随机值 数组首元素地址+1后变为第二个元素的地址,从此次位置开始进行统计\0之前的元素个数
    return 0;
}</code></pre> 
<p></p> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    char arr[] = "abcdef";
    printf("%d\n", sizeof(arr));// 7 arr传递的是整个数组,统计整个数组中元素个数,包含\0（易错）
    printf("%d\n", sizeof(arr+0));// 4或者8   数组首元素地址
    printf("%d\n", sizeof(*arr));// 1  arr为数组首元素地址,解引用后为数组首元素类型为char
    printf("%d\n", sizeof(arr[1]));//  1 为数组第二个元素地址
    printf("%d\n", sizeof(&amp;arr));//  4或8 
    printf("%d\n", sizeof(&amp;arr+1));//  4或8
    printf("%d\n", sizeof(&amp;arr[0]+1));//4或8
    return 0;
}</code></pre> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
   char arr[] = "abcdef";
    printf("%d\n", strlen(arr));// 6 arr表示数组首元素的地址,从当前的位置开始统计\0之前的字符个数 
    printf("%d\n", strlen(arr+0));// 6 同理
    printf("%d\n", strlen(*arr));// 报错 arr表示数组首元素的地址,解引用后为数组首元素,传递给strlen的参数错误会报错
    printf("%d\n", strlen(arr[1]));//  报错
    printf("%d\n", strlen(&amp;arr));// 6 &amp;arr虽然表示的数组的地址,但仍然是从数组的起始位置开始统计
    printf("%d\n", strlen(&amp;arr+1));// 随机值 &amp;arr+1后会从数组的首元素地址跳过整个数组,但后面的\0的位置未知
    printf("%d\n", strlen(&amp;arr[0]+1));// 5  数组首元素地址+1为数组第二个元素的地址
    return 0;

}</code></pre> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    char *p = "abcdef";//p是指针变量, 是数组首元素地址
    printf("%d\n", sizeof(p));// 4或8  p是指针变量
    printf("%d\n", sizeof(p+1));//  4或8  p是数组首元素地址,+1后变为数组第二个元素的地址
    printf("%d\n", sizeof(*p));//*p表示的是数组首元素,类型为char
    printf("%d\n", sizeof(p[0]));// 可以翻译为*(p+0),为数组首元素,类型为char
    printf("%d\n", sizeof(&amp;p));//  4或8  p为数组首元素地址,将此地址取出放入到二级指针变量中,仍为指针
    printf("%d\n", sizeof(&amp;p+1));// 4或8 二级指针变量+1后会跳过一个char*类型变量的大小
    printf("%d\n", sizeof(&amp;p[0]+1));// 4或8 p[0]为a,&amp;p[0]后为a的地址+1后b为的地址
    return 0;
}</code></pre> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    char *p = "abcdef";
    printf("%d\n", strlen(p));//6
    printf("%d\n", strlen(p+1));//5
    printf("%d\n", strlen(*p));//err
    printf("%d\n", strlen(p[0]));//err
    printf("%d\n", strlen(&amp;p));//随机值
    printf("%d\n", strlen(&amp;p+1));//随机值
    printf("%d\n", strlen(&amp;p[0]+1));//5

    return 0;
}</code></pre> 
<p>小伙伴自己尝试进行分析。</p> 
<p style="text-align:center;"></p> 
<h3>3、二维数组​</h3> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main ()
{
    int a[3][4] = {0};
    printf("%d\n",sizeof(a));//  48 代表着整个数组,3*4*sizeof(int)
    printf("%d\n",sizeof(a[0][0]));//  4  代表数组的第一个元素
    printf("%d\n",sizeof(a[0]));// 16 16  a[0]是第一行的数组名,现在单独放在sizeof内部，计算的是一行的大小
    printf("%d\n",sizeof(a[0]+1));// 4或者8   a[0]是第一行的数组名,没有单独放在sizeof中即为数组第一行首元素地址,+1后为数组第二行首元素地址
    printf("%d\n",sizeof(*(a[0]+1)));//  4  数组第二行首元素地址解引用后为数组第二行首元素类型为int
    printf("%d\n",sizeof(a+1));// 4或者8   数组第二行的地址
    printf("%d\n",sizeof(*(a+1)));//16    
    printf("%d\n",sizeof(&amp;a[0]+1));//4或者8
    printf("%d\n",sizeof(*(&amp;a[0]+1)));//
    printf("%d\n",sizeof(*a));
    printf("%d\n",sizeof(a[3]));
    return 0;
}</code></pre> 
<h3>4、指针运算</h3> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
 int a[5] = { 1, 2, 3, 4, 5 };
 int *ptr = (int *)(&amp;a + 1);
 printf( "%d,%d", *(a + 1), *(ptr - 1));
 return 0;
}
</code></pre> 
<p>在做指针类型的题目的时候要注意画图！</p> 
<div> 
 <img alt="" height="435" src="https://images2.imgbox.com/65/ee/T99sobGb_o.png" width="581"> 
</div> 
<div>
  画完图后答案一目了然：2   5 
</div> 
<div> 
 <pre><code class="language-cpp">//在X86环境下​
//假设结构体的大小是20个字节​
//程序输出的结果是啥？​
#include&lt;stdio.h&gt;
struct Test
{

 int Num;
 char *pcName;
 short sDate;
 char cha[2];
 short sBa[4];
}*p = (struct Test*)0x100000;//将16进制数强制类型转化成struct Test*指针类型,并赋值给p
int main()
{
 printf("%p\n", p + 0x1);//加1后要加上20个字节！要将十进制位转化成16进制位,即为0x100014
 printf("%p\n", (unsigned long)p + 0x1);//此时将p强制类型转化成(unsigned long)类型,为十进制数+1后为0x100001
 printf("%p\n", (unsigned int*)p + 0x1);//p转化为(unsigned int *)类型,+1后会加上4个字节即为0x100004
 return 0;
}
</code></pre> 
 <pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
 int a[3][2] = { (0, 1), (2, 3), (4, 5) };
 int *p;
 p = a[0];
 printf( "%d", p[0]);
 return 0;
}
</code></pre> 
 <p>让我们一起来动手画一画！</p> 
 <p><img alt="" height="232" src="https://images2.imgbox.com/8b/30/JvP03qLI_o.png" width="543"></p> 
</div> 
<p> 小伙伴们要注意啦！花括号里面是<span style="background-color:#ffd900;">逗号表达式</span>，只会保留最后一位数字。这里非常容易忽出错！</p> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
 int a[5][5];
 int(*p)[4];
 p = a;
 printf( "%p,%d\n", &amp;p[4][2] - &amp;a[4][2], &amp;p[4][2] - &amp;a[4][2]);
 return 0;
}
</code></pre> 
<p>画图：</p> 
<div> 
 <div style="margin-left:0in;"> 
  <div style="margin-left:0in;"> 
   <img alt="" height="477" src="https://images2.imgbox.com/2a/a4/TbepWXou_o.png" width="1041"> 
  </div> 
 </div> 
</div> 
<blockquote> 
 <p>画完图后逻辑关系一目了然！要注意的是指针减去指针为中间元素的个数，同时指针是从底地址到高地址。第一个占位符是%p要将-4转化成补码后在转化成16进制的数！</p> 
 <p>运行结果为FFFFFFFFFFFFFFFC,-4</p> 
</blockquote> 
<p>如果你已经看到这里，证明你非常优秀呢！加油。<img alt="" height="89" src="https://images2.imgbox.com/eb/a2/wImuMbbs_o.png" width="167"></p> 
<p> </p> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
 int aa[2][5] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
 int *ptr1 = (int *)(&amp;aa + 1);
 int *ptr2 = (int *)(*(aa + 1));
 printf( "%d,%d", *(ptr1 - 1), *(ptr2 - 1));
 return 0;
}
</code></pre> 
<div> 
 <div style="margin-left:0in;"> 
  <div style="margin-left:0in;"> 
   <div> 
    <div style="margin-left:0in;"> 
     <div style="margin-left:0in;"> 
      <img alt="" height="250" src="https://images2.imgbox.com/e7/24/AiL3idfc_o.png" width="809"> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div style="margin-left:0in;"></div> 
 </div> 
</div> 
<p> </p> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
 char *a[] = {"work","at","alibaba"};
 char**pa = a;
 pa++;
 printf("%s\n", *pa);
 return 0;
}
</code></pre> 
<p> </p> 
<div> 
 <div style="margin-left:0in;"> 
  <div style="margin-left:0in;"> 
   <img alt="" height="255" src="https://images2.imgbox.com/f6/af/BmkzOIIE_o.png" width="427">值得注意的是在指针数组中，存储的只是首字母！ 
  </div> 
  <div style="margin-left:0in;">
    运行结果为at。 
  </div> 
  <div style="margin-left:0in;"></div> 
  <div style="margin-left:0in;">
    终于我们迎来了最后一题，各位小伙伴们加油！ 
  </div> 
  <div style="margin-left:0in;"> 
   <pre><code class="language-cpp">#include &lt;stdio.h&gt;
int main()
{
 char *c[] = {"ENTER","NEW","POINT","FIRST"};
 char**cp[] = {c+3,c+2,c+1,c};
 char***cpp = cp;
 printf("%s\n", **++cpp);
 printf("%s\n", *--*++cpp+3);
 printf("%s\n", *cpp[-2]+3);
 printf("%s\n", cpp[-1][-1]+1);
 return 0;
}
</code></pre> 
   <div> 
    <div style="margin-left:0in;"> 
     <div style="margin-left:0in;"> 
      <img alt="" height="370" src="https://images2.imgbox.com/16/bc/ehiK90mF_o.png" width="558"> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div style="margin-left:0in;">
    这道笔试题还是非常有难度的，这里小编只给大家画了草图，具体分析细节供给大家取分析！ 
  </div> 
  <div style="margin-left:0in;">
    今天所有关于指针的内容就结束啦，但小伙伴们要好好复习呀！拜拜，我们下期再见。 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fa101a96b284c193c7e52a0cf4664ec7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">智能合约漏洞（四）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e04b20c50cfd26b1a374f857846f8de/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序引入unocss</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>