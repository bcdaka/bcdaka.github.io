<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【JavaEE】Spring IoC&amp;DI详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7984b0ea9bebd63867f0c012db23f09b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【JavaEE】Spring IoC&DI详解">
  <meta property="og:description" content="一.基本概念 1.Ioc基本概念 Ioc: Inversion of Control (控制反转), 也就是说 Spring 是⼀个&#34;控制反转&#34;的容器. 什么是控制反转呢?
也就是控制权反转. 什么的控制权发发了反转? 获得依赖对象的过程被反转了也就是说, 当需要某个对象时, 传统开发模式中需要自己通过 new 创建对象, 现在不需要再进行创建, 把创建对象的任务交给容器, 程序中只需要依赖注入(Dependency Injection,DI)就可以了. 这个容器称为：IoC容器. Spring是一个IoC容器,所以有时Spring也称为Spring容器.
控制反转是一种思想, 在生活中也是处处体现.
比如自动驾驶, 传统驾驶方式, 车辆的横向和纵向驾驶控制权由驾驶员来控制, 现在交给了驾驶自动化系统来控制, 这也是控制反转思想在生活中的实现.比如招聘, 企业的员工招聘,入职, 解雇等控制权. 老板转交给HR(人力资源)来处理 2.DI基本概念 DI: Dependency Injection(依赖注入)容器在运行期间, 动态的为应用程序提供运行时所依赖的资源，称之为依赖注入。程序运行时需要某个资源，此时容器就为其提供这个资源.从这点来看, 依赖注入（DI）和控制反转（IoC）是从不同的角度的描述的同⼀件事情，就是指通过引入 IoC 容器，利用依赖关系注入的方式，实现对象之间的解耦。IoC 是⼀种思想，也是&#34;目标&#34;, 而思想只是一种指导原则，最终还是要有可行的落地方案，而 DI 就属于具体的实现。所以也可以说, DI 是IoC的一种实现. 比如说我今天心情比较好，吃一顿好的犒劳犒劳自己，那么&#34;吃一顿好的&#34;是思想和目标（是IoC），但最后我是吃海底捞还是杨国福？这就是具体的实现，就是 DI。 二.Ioc的使用. IoC交给Spring管理共有两类注解可以实现: 类注解：@Controller、@Service、@Repository、@Component、@Configuration. 方法注解：@Bean. 2.1类注解 2.1.1@Controller注解 使用@Controller存储 bean 的代码如下所示：
@Controller // 将对象存储到 Spring 中 public class UserController { public void sayHi(){ System.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-09T22:39:10+08:00">
    <meta property="article:modified_time" content="2024-06-09T22:39:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【JavaEE】Spring IoC&amp;DI详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一.基本概念</h2> 
<h3><a id="1Ioc_1"></a>1.Ioc基本概念</h3> 
<ul><li><strong>Ioc</strong>: Inversion of Control (控制反转), 也就是说 Spring 是⼀个"控制反转"的容器.</li></ul> 
<blockquote> 
 <p>什么是控制反转呢?<br> 也就是控制权反转. 什么的控制权发发了反转? 获得依赖对象的过程被反转了也就是说, 当需要某个对象时, <mark>传统开发模式中需要自己通过 new 创建对象</mark>, 现在不需要再进行创建, <mark>把创建对象的任务交给容器</mark>, 程序中只需要依赖注入(Dependency Injection,DI)就可以了. 这个容器称为：IoC容器. Spring是一个IoC容器,所以有时Spring也称为Spring容器.</p> 
</blockquote> 
<ul><li>控制反转是一种思想, 在生活中也是处处体现.<br> 比如自动驾驶, 传统驾驶方式, 车辆的横向和纵向驾驶控制权由驾驶员来控制, 现在交给了驾驶自动化系统来控制, 这也是控制反转思想在生活中的实现.比如招聘, 企业的员工招聘,入职, 解雇等控制权. 老板转交给HR(人力资源)来处理</li></ul> 
<h3><a id="2DI_9"></a>2.DI基本概念</h3> 
<ul><li><strong>DI</strong>: Dependency Injection(依赖注入)容器在运行期间, <mark>动态的为应用程序提供运行时所依赖的资源</mark>，称之为依赖注入。</li><li>程序运行时需要某个资源，此时容器就为其提供这个资源.从这点来看, 依赖注入（DI）和控制反转（IoC）是从不同的角度的描述的同⼀件事情，就是指通过引入 IoC 容器，利用依赖关系注入的方式，实现对象之间的解耦。</li><li>IoC 是⼀种思想，也是"目标", 而思想只是一种指导原则，最终还是要有可行的落地方案，而 DI 就属于具体的实现。所以也可以说, DI 是IoC的一种实现. 
  <ul><li>比如说我今天心情比较好，吃一顿好的犒劳犒劳自己，那么"吃一顿好的"是思想和目标（是IoC），但最后我是吃海底捞还是杨国福？这就是具体的实现，就是 DI。</li></ul> </li></ul> 
<h2><a id="Ioc_15"></a>二.Ioc的使用.</h2> 
<ul><li>IoC交给Spring管理共有两类注解可以实现: 
  <ul><li> 
    <ol><li>类注解：@Controller、@Service、@Repository、@Component、@Configuration.</li></ol> </li><li> 
    <ol start="2"><li>方法注解：@Bean.</li></ol> </li></ul> </li></ul> 
<h3><a id="21_20"></a>2.1类注解</h3> 
<h4><a id="211Controller_21"></a>2.1.1@Controller注解</h4> 
<p>使用@Controller存储 bean 的代码如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span> <span class="token comment">// 将对象存储到 Spring 中</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hi,UserController..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>读取 bean 的代码：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//获取Spring上下⽂对象</span>
 	<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//从Spring上下⽂中获取对象</span>
 	<span class="token class-name">UserController</span> userController <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token comment">//使⽤对象</span>
 	userController<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>ApplicationContext 翻译过来就是: Spring 上下文因为对象都交给 Spring 管理了，所以获取对象要从 Spring 中获取，那么就得先得到 Spring 的上下文.<br> 关于上下文的概念上学时, 阅读理解经常会这样问: 根据上下文, 说⼀下你对XX的理解, 在计算机领域, 上下文这个概念, 咱们最早是在学习线程时了解到过, 比如我们应用进行线程切换的时候，切换前都会把线程的状态信息暂时储存起来，这里的上下文就包括了当前线程的信息，等下次该线程又得到CPU时间的时候, 从上下文中拿到线程上次运行的信息这个上下文, 就是指当前的运行环境, 也可以看作是⼀个容器, 容器里存了很多内容, 这些内容是当前运行的环境<br> <img src="https://images2.imgbox.com/f1/49/W9jjAGeV_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果把@Controller删掉, 再观察运行结果</li><li>报错信息显示: 找不到类型是: com.example.demo.controller.UserController的bean<br> <img src="https://images2.imgbox.com/8b/4c/R3YwV4cm_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="Bean__53"></a>Bean 命名约定</h5> 
<ul><li>官方文档关于Bean命名的叙述: 链接:<a href="https://docs.spring.io/spring-framework/reference/core/beans/definition.html#beans-beanname" rel="nofollow">link</a><br> <img src="https://images2.imgbox.com/4b/fd/mAroWBdu_o.png" alt="在这里插入图片描述"></li><li>命名约定使用Java标准约定作为实例字段名. 也就是说，bean名称以小写字母开头，然后使用驼峰式大小写.比如<br> 类名: UserController, Bean的名称为: userController<br> 类名: AccountManager, Bean的名称为: accountManager<br> 类名: AccountService, Bean的名称为: accountService</li><li>也有一些特殊情况, <mark>当有多个字符并且第一个和第二个字符都是大写时, 将保留原始的大小写.</mark> 这些规则与java.beans.Introspector.decapitalize (Spring在这里使用的)定义的规则相同.<br> 比如<br> 类名: UController, Bean的名称为: UController<br> 类名: AManager</li></ul> 
<h4><a id="212Server____65"></a>2.1.2@Server注解 ( 服务存储 )</h4> 
<p>使用@Service 存储 bean 的代码如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hi,"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>读取 bean 的代码：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//获取Spring上下⽂对象</span>
 	<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//从Spring中获取UserService对象</span>
 	<span class="token class-name">UserService</span> userService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//使⽤对象</span>
 	userService<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>观察运行结果, 发现成功从Spring中获取到UserService对象, 并执行UserService的sayHi方法<br> <img src="https://images2.imgbox.com/12/3c/rckf2pk5_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="213Repository____92"></a>2.1.3@Repository ( 仓库存储 )</h4> 
<p>使用@Repository 存储 bean 的代码如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRepository</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hi, UserRepository~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>读取 bean 的代码：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//获取Spring上下⽂对象</span>
	 <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span>cla
 	<span class="token comment">//从Spring上下⽂中获取对象</span>
 	<span class="token class-name">UserRepository</span> userRepository <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserRepository</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//使⽤对象</span>
 	userRepository<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>观察运行结果, 发现成功从Spring中获取到UserRepository 对象, 并执行UserRepository 的sayHi方法<br> <img src="https://images2.imgbox.com/ad/9c/aUNIFfAr_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="214Component____119"></a>2.1.4@Component ( 组件存储 )</h4> 
<p>使用@Component 存储 bean 的代码如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserComponent</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hi, UserComponent~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>读取 bean 的代码：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//获取Spring上下⽂对象</span>
 	<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//从Spring上下⽂中获取对象</span>
 	<span class="token class-name">UserComponent</span> userComponent <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserComponent</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//使⽤对象</span>
 	userComponent<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>观察运行结果, 发现成功从Spring中获取到UserComponent 对象, 并执行UserComponent 的sayHi方法<br> <img src="https://images2.imgbox.com/2f/df/3znFl63E_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="215Configuration___147"></a>2.1.5@Configuration( 组件存储 )</h4> 
<p>使用 @Configuration 存储 bean 的代码如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserConfiguration</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hi,UserConfiguration~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>读取 bean 的代码：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//获取Spring上下⽂对象</span>
 	<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//从Spring上下⽂中获取对象</span>
 	<span class="token class-name">UserConfiguration</span> userConfiguration <span class="token operator">=</span> 
	context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//使⽤对象</span>
 	userConfiguration<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>观察运行结果, 发现成功从Spring中获取到UserConfiguration 对象, 并执行UserConfiguration 的sayHi方法<br> <img src="https://images2.imgbox.com/b8/57/PwT0pmY2_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_177"></a>2.2为什么要这么多类注解？</h3> 
<ul><li>这个也是和应用分层是呼应的. 让程序员看到类注解之后，就能直接了解当前类的用途. 
  <ul><li>@Controller：控制层, 接收请求, 对请求进⾏处理, 并进⾏响应.</li><li>@Servie：业务逻辑层, 处理具体的业务逻辑.</li><li>@Repository：数据访问层，也称为持久层. 负责数据访问操</li><li>@Configuration：配置层. 处理项⽬中的⼀些配置信息</li></ul> </li></ul> 
<blockquote> 
 <p>这和每个省/市都有自己的车牌号是一样的.车牌号都是唯一的, 标识⼀个车辆的. 但是为什么还需要设置不同的车牌开头呢.比如陕西的车牌号就是：陕X：XXXXXX，北京的车牌号：京X：XXXXXX，甚至一个省不同的县区也是不同的，比如西安就是，陕A：XXXXX，咸阳：陕B：XXXXXX，宝鸡，陕C：XXXXXX，一样.这样做的好处除了可以节约号码之外，更重要的作用是可以直观的标识一辆车的归属地.</p> 
</blockquote> 
<p>这样做的好处除了可以节约号码之外，更重要的作⽤是可以直观的标</p> 
<p><strong>类注解之间的关系</strong><br> 查看 @Controller / @Service / @Repository / @Configuration 等注解的源码发<br> 现：</p> 
<blockquote> 
 <p>其实这些注解里面都有⼀个注解 @Component ，说明它们本⾝就是属于 @Component 的"子类". @Component 是⼀个元注解，也就是说可以注解其他类注解，如 @Controller , @Service ,@Repository 等. 这些注解被称为 @Component 的衍生注解.@Controller , @Service 和 @Repository ⽤于更具体的用例(分别在控制层, 业务逻辑层, 持久化层), 在开发过程中, 如果你要在业务逻辑层使用 @Component 或@Service，显然@Service是更好的选择</p> 
</blockquote> 
<h3><a id="23_Bean_192"></a>2.3方法注解 @Bean</h3> 
<p>类注解是添加到某个类上的， 但是存在两个问题:</p> 
<ol><li>使用外部包里的类, 没办法添加类注解</li><li>⼀个类, 需要多个对象, 比如多个数据源, 这种场景, 我们就需要使用方法注解 @Bean</li></ol> 
<ul><li>方法注解如何使用</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanConfig</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token annotation punctuation">@Bean</span>
 	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 	<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token keyword">return</span> user<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然而，当我们写完以上代码，尝试获取 bean 对象中的 user 时却发现，根本获取不到：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//获取Spring上下⽂对象</span>
 	<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//从Spring上下⽂中获取对象</span>
 	<span class="token class-name">User</span> user <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token comment">//使⽤对象</span>
 	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>以上程序的执行结果如下：<br> <img src="https://images2.imgbox.com/45/46/DskWgRBb_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="231__226"></a>2.3.1 方法注解要配合类注解使用</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanConfig</span> <span class="token punctuation">{<!-- --></span>
 <span class="token annotation punctuation">@Bean</span>
 <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> user<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>再次执行以上代码，运行结果如下：<br> <img src="https://images2.imgbox.com/c9/a0/ULYX2QL8_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="232__242"></a>2.3.2 定义多个对象</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanConfig</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token annotation punctuation">@Bean</span>
 	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> user<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 	<span class="token annotation punctuation">@Bean</span>
 	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> user<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
 		<span class="token comment">//获取Spring上下⽂对象</span>
 		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemo</span>
 		<span class="token comment">//从Spring上下⽂中获取对象</span>
 		<span class="token class-name">User</span> user <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">U</span>
 		<span class="token comment">//使⽤对象</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果:<br> <img src="https://images2.imgbox.com/5f/1d/AT4XSM1V_o.png" alt="在这里插入图片描述"><br> 报错信息显示: 期望只有⼀个匹配, 结果发现了两个, user1, user2从报错信息中, 可以看出来, @Bean 注解的bean, bean的名称就是它的方法名<br> 接下来我们根据名称来获取bean对象</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token comment">//获取Spring上下⽂对象</span>
 		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//根据bean名称, 从Spring上下⽂中获取对象</span>
 		<span class="token class-name">User</span> user1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"user1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"user2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>运行结果:<br> <img src="https://images2.imgbox.com/18/51/bnCY36Hc_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="233__Bean_301"></a>2.3.3 重命名 Bean</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"u1"</span><span class="token punctuation">,</span><span class="token string">"user1"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 	<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>此时我们使⽤ u1 就可以获取到 User对象了,代码如下:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token comment">//获取Spring上下⽂对象</span>
 		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//从Spring上下⽂中获取对象</span>
 		<span class="token class-name">User</span> u1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//适用对象</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="234__328"></a>2.3.4 扫描路径</h4> 
<p><img src="https://images2.imgbox.com/f3/1d/Qjjl98Mo_o.png" alt="在这里插入图片描述"><br> 再运行代码:</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
 		<span class="token comment">//获取Spring上下⽂对象</span>
 		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemo</span>
	 	<span class="token comment">//从Spring上下⽂中获取对象</span>
 		<span class="token class-name">User</span> u1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span>getB
 		<span class="token comment">//使⽤对象</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果:<br> <img src="https://images2.imgbox.com/52/c1/f945ZdHw_o.png" alt="在这里插入图片描述"><br> <strong>使用五大注解声明的bean，要想生效, 还需要配置扫描路径, 让Spring扫描到这些注解</strong>. 也就是通过 @ComponentScan 来配置扫描路径.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.example.demo"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token comment">//获取Spring上下⽂对象</span>
 		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//从Spring上下⽂中获取对象</span>
 		<span class="token class-name">User</span> u1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//使⽤对象</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<ul><li>默认扫描的范围是SpringBoot启动类所在包及其子包</li></ul> 
<h2><a id="DI_365"></a>三.DI的使用.</h2> 
<ul><li>关于依赖注入, Spring也给我们提供了三种方式: 
  <ul><li> 
    <ol><li>属性注入(Field Injection)</li></ol> </li><li> 
    <ol start="2"><li>构造方法注⼊(Constructor Injection)</li></ol> </li><li> 
    <ol start="3"><li>Setter 注入</li></ol> </li></ul> </li></ul> 
<h3><a id="31_371"></a>3.1属性注入</h3> 
<ul><li>属性注入是使用 @Autowired 实现的，将 Service 类注入到 Controller 类中.</li><li>Service 类的实现代码如下</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hi,UserService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Controller 类的实现代码如下：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//注⼊⽅法1: 属性注⼊</span>
 	<span class="token annotation punctuation">@Autowired</span>
 	<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hi,UserController..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		userService<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>获取 Controller 中的 sayHi方法:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringIocDemoApplication</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token comment">//获取Spring上下⽂对象</span>
 		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringIocDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//从Spring上下⽂中获取对象</span>
 		<span class="token class-name">UserController</span> userController <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserController</span><span class="token punctuation">)</span> 
		context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userController"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token comment">//使⽤对象</span>
 		userController<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>最终运行结果:<br> <img src="https://images2.imgbox.com/4e/c9/p6P5g0PG_o.png" alt="在这里插入图片描述"><br> 去掉@Autowired , 再运行一下程序看看结果<br> <img src="https://images2.imgbox.com/88/ee/u1mmY8ya_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_420"></a>3.2构造方法注入</h3> 
<ul><li>构造方法注入是在类的构造方法中实现注入，如下代码所示：</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController2</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token comment">//注⼊⽅法2: 构造⽅法</span>
 	<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
 	<span class="token annotation punctuation">@Autowired</span>
 	<span class="token keyword">public</span> <span class="token class-name">UserController2</span><span class="token punctuation">(</span><span class="token class-name">UserService</span> userService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userService <span class="token operator">=</span> userService<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hi,UserController2..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		userService<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><mark>注意事项：如果类只有一个构造方法，那么 @Autowired 注解可以省略；如果类中有多个构造方法，那么需要添加上 @Autowired 来明确指定到底使用哪个构造方法。</mark></p> 
<h3><a id="33Setter_440"></a>3.3Setter注入</h3> 
<p>Setter 注入和属性的 Setter 方法实现类似，只不过在设置 set ⽅法的时候需要加上 @Autowired 注解 ，如下代码所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController3</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token comment">//注⼊⽅法3: Setter⽅法注⼊</span>
 		<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
 		<span class="token annotation punctuation">@Autowired</span>
 		<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserService</span><span class="token punctuation">(</span><span class="token class-name">UserService</span> userService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 			<span class="token keyword">this</span><span class="token punctuation">.</span>userService <span class="token operator">=</span> userService<span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 		<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hi,UserController3..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 			userService<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="34_459"></a>3.4三重注入方式的优缺点分析.</h3> 
<h4><a id="_460"></a>属性注入</h4> 
<ul><li>优点: 简洁，使用方便；</li><li>缺点: 
  <ul><li>只能用于 IoC 容器，如果是非 IoC 容器不可用，并且只有在使用的时候才会出现 NPE（空指针异常）</li><li>不能注入一个Final修饰的属性.</li></ul> </li></ul> 
<h4><a id="Spring_4X_465"></a>构造函数注入(Spring 4.X推荐)</h4> 
<ul><li> <p>优点:</p> 
  <ul><li>可以注入final修饰的属性</li><li>注入的对象不会被修改</li><li>依赖对象在使用前一定会被完全初始化，因为依赖是在类的构造方法中执行的，而构造方法是在类加载阶段就会执行的方法.</li><li>通⽤性好, 构造方法是JDK支持的, 所以更换任何框架,他都是适用的</li></ul> </li><li> <p>缺点:</p> 
  <ul><li>注入多个对象时, 代码会比较繁琐</li></ul> </li></ul> 
<h4><a id="SetterSpring_3X_474"></a>Setter注⼊(Spring 3.X推荐)</h4> 
<ul><li>优点: 方便在类实例之后, 重新对该对象进行配置或者注入</li><li>缺点: 
  <ul><li>不能注入一个Final修饰的属性</li><li>注入对象可能会被改变, 因为setter方法可能会被多次调用,就有被修改的风险</li></ul> </li></ul> 
<h3><a id="35Autowired_481"></a>3.5@Autowired存在问题</h3> 
<p>当同一类型存在多个bean时, 使用@Autowired会存在问题.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanConfig</span> <span class="token punctuation">{<!-- --></span>
 	<span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">)</span>
 	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> user<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 	<span class="token annotation punctuation">@Bean</span>
 	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> user<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{<!-- --></span>
 
 	<span class="token annotation punctuation">@Autowired</span>
 	<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
 	<span class="token comment">//注⼊user</span>
 	<span class="token annotation punctuation">@Autowired</span>
 	<span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hi,UserController..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		userService<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果:<br> <img src="https://images2.imgbox.com/03/d7/Yw3TOhyb_o.png" alt="在这里插入图片描述"><br> 报错的原因是，非唯一的 Bean 对象。</p> 
<p>如何解决上述问题呢？Spring提供了以下几种解决方案：</p> 
<ol><li> <p>@Primary<br> 使用@Primary注解：当存在多个相同类型的Bean注入时，加上@Primary注解，来确定默认的实现.</p> </li><li> <p>@Qualifier</p> 
  <ul><li>使用@Qualifier注解：指定当前要注入的bean对象。 在@Qualifier的value属性中，指定注入的bean的名称。</li><li>@Qualifier注解不能单独使⽤，必须配合@Autowired使⽤</li></ul> </li><li> <p>@Resource</p> 
  <ul><li>使用@Resource注解：是按照bean的名称进行注入。通过name属性指定要注入的bean的名称。</li></ul> </li></ol> 
<blockquote> 
 <p>@Autowird 与 @Resource的区别</p> 
</blockquote> 
<ul><li>@Autowired 是spring框架提供的注解，而@Resource是JDK提供的注解</li><li>@Autowired 默认是按照类型注⼊，而@Resource是按照名称注入. 相比于@Autowired 来说，@Resource 支持更多的参数设置，例如 name 设置，根据名称获取 Bean。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/97eeac0514d47eb4a304b391ac75226b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">轻松上手MYSQL：SQL优化之Explain详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8b573d52256218b07ecbf430c23d01e8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">动态IP掉线该怎么解决？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>