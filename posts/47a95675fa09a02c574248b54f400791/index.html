<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java 中的 static：静态变量、静态方法，一切都在掌握中 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/47a95675fa09a02c574248b54f400791/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Java 中的 static：静态变量、静态方法，一切都在掌握中">
  <meta property="og:description" content="🎏：你只管努力，剩下的交给时间
🏠 ：小破站
Java 中的 static：静态变量、静态方法，一切都在掌握中 前言第一：静态方法第二：静态变量第三：静态块第四：静态内部类第五：静态导入第六：单例模式第七：常见问题和最佳实践第八：案例研究 前言 static，这个小小的关键字在Java中扮演着重要的角色，但它的用途和工作原理可能会让人感到困惑。你是否曾想过为什么有些方法和变量可以直接从类访问，而无需创建实例？或者为什么某些变量在多个实例之间共享相同的值？在本文中，我们将探索static的奥秘，深入了解它的各种用法，从静态方法的调用到静态变量的共享，让你对Java中的static有一个清晰的认识。
第一：静态方法 静态方法（Static Method）是属于类而不是类的实例的方法。它可以在不创建类的实例的情况下被调用。静态方法通常用于执行与类相关的操作，而不需要访问或修改特定实例的状态。
以下是关于静态方法的声明、调用以及与实例方法的区别：
声明静态方法：
在Java中，声明静态方法需要使用static关键字。静态方法可以直接属于类，而不是类的实例。
public class MyClass { public static void myStaticMethod() { // 静态方法的代码 } } 调用静态方法：
你可以通过类名来调用静态方法，而不需要创建类的实例。
MyClass.myStaticMethod(); 静态方法与实例方法的区别：
关联性：静态方法与类本身相关，而实例方法与类的实例相关。
调用方式：静态方法通过类名调用，而实例方法需要通过对象实例来调用。
访问权限：静态方法可以访问类的静态成员，但不能访问非静态成员（实例成员）。实例方法可以访问类的静态和非静态成员。
内部引用：静态方法中不能使用this关键字，因为它没有当前对象的引用。实例方法可以使用this来引用当前对象。
生命周期：静态方法在类加载时初始化，而实例方法在对象创建时初始化。
总之，静态方法是与类本身相关的方法，通常用于执行通用操作或访问静态成员。实例方法则是与类的实例相关的方法，可以访问和修改实例的状态。选择使用静态方法还是实例方法取决于你的需求和代码设计。
第二：静态变量 静态变量，也称为类变量，是属于类而不是类的实例的变量。它在类加载时被初始化，只有一个副本，被所有类的实例共享。静态变量通常用于存储类级别的数据，它们不依赖于特定对象的状态，而是与整个类相关联。
以下是有关静态变量的声明、使用、生命周期和作用域的信息：
声明静态变量：
在Java中，声明静态变量需要使用static关键字。静态变量通常位于类的顶部，通常在类内部，方法外部进行声明。静态变量通常用public, private, 或 protected等修饰符修饰。
public class MyClass { // 静态变量声明 public static int staticVariable; private static String name; } 使用静态变量：
你可以通过类名来访问静态变量，也可以通过类的实例来访问它。通常建议使用类名来访问静态变量，因为它们与类相关联，而不是与特定对象实例相关。
MyClass.staticVariable = 42; // 通过类名访问静态变量 int value = MyClass.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-03T13:38:30+08:00">
    <meta property="article:modified_time" content="2023-11-03T13:38:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java 中的 static：静态变量、静态方法，一切都在掌握中</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>🎏：你只管努力，剩下的交给时间</p> 
 <p>🏠 ：<a href="https://todoitbo.fun" rel="nofollow">小破站</a></p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>Java 中的 static：静态变量、静态方法，一切都在掌握中</h4> 
 <ul><li><a href="#_5" rel="nofollow">前言</a></li><li><a href="#_9" rel="nofollow">第一：静态方法</a></li><li><a href="#_49" rel="nofollow">第二：静态变量</a></li><li><a href="#_89" rel="nofollow">第三：静态块</a></li><li><a href="#_124" rel="nofollow">第四：静态内部类</a></li><li><a href="#_172" rel="nofollow">第五：静态导入</a></li><li><a href="#_217" rel="nofollow">第六：单例模式</a></li><li><a href="#_298" rel="nofollow">第七：常见问题和最佳实践</a></li><li><a href="#_326" rel="nofollow">第八：案例研究</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_5"></a>前言</h2> 
<p><code>static</code>，这个小小的关键字在Java中扮演着重要的角色，但它的用途和工作原理可能会让人感到困惑。你是否曾想过为什么有些方法和变量可以直接从类访问，而无需创建实例？或者为什么某些变量在多个实例之间共享相同的值？在本文中，我们将探索<code>static</code>的奥秘，深入了解它的各种用法，从静态方法的调用到静态变量的共享，让你对Java中的<code>static</code>有一个清晰的认识。</p> 
<h2><a id="_9"></a>第一：静态方法</h2> 
<p><strong>静态方法</strong>（Static Method）是属于类而不是类的实例的方法。它可以在不创建类的实例的情况下被调用。静态方法通常用于执行与类相关的操作，而不需要访问或修改特定实例的状态。</p> 
<p>以下是关于静态方法的声明、调用以及与实例方法的区别：</p> 
<p><strong>声明静态方法</strong>：</p> 
<p>在Java中，声明静态方法需要使用<code>static</code>关键字。静态方法可以直接属于类，而不是类的实例。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">myStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 静态方法的代码</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>调用静态方法</strong>：</p> 
<p>你可以通过类名来调用静态方法，而不需要创建类的实例。</p> 
<pre><code class="prism language-java"><span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token function">myStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>静态方法与实例方法的区别</strong>：</p> 
<ol><li> <p><strong>关联性</strong>：静态方法与类本身相关，而实例方法与类的实例相关。</p> </li><li> <p><strong>调用方式</strong>：静态方法通过类名调用，而实例方法需要通过对象实例来调用。</p> </li><li> <p><strong>访问权限</strong>：静态方法可以访问类的静态成员，但不能访问非静态成员（实例成员）。实例方法可以访问类的静态和非静态成员。</p> </li><li> <p><strong>内部引用</strong>：静态方法中不能使用<code>this</code>关键字，因为它没有当前对象的引用。实例方法可以使用<code>this</code>来引用当前对象。</p> </li><li> <p><strong>生命周期</strong>：静态方法在类加载时初始化，而实例方法在对象创建时初始化。</p> </li></ol> 
<p>总之，静态方法是与类本身相关的方法，通常用于执行通用操作或访问静态成员。实例方法则是与类的实例相关的方法，可以访问和修改实例的状态。选择使用静态方法还是实例方法取决于你的需求和代码设计。</p> 
<h2><a id="_49"></a>第二：静态变量</h2> 
<p><strong>静态变量</strong>，也称为类变量，是属于类而不是类的实例的变量。它在类加载时被初始化，只有一个副本，被所有类的实例共享。静态变量通常用于存储类级别的数据，它们不依赖于特定对象的状态，而是与整个类相关联。</p> 
<p>以下是有关静态变量的声明、使用、生命周期和作用域的信息：</p> 
<p><strong>声明静态变量</strong>：</p> 
<p>在Java中，声明静态变量需要使用<code>static</code>关键字。静态变量通常位于类的顶部，通常在类内部，方法外部进行声明。静态变量通常用<code>public</code>, <code>private</code>, 或 <code>protected</code>等修饰符修饰。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 静态变量声明</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> staticVariable<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>使用静态变量</strong>：</p> 
<p>你可以通过类名来访问静态变量，也可以通过类的实例来访问它。通常建议使用类名来访问静态变量，因为它们与类相关联，而不是与特定对象实例相关。</p> 
<pre><code class="prism language-java"><span class="token class-name">MyClass</span><span class="token punctuation">.</span>staticVariable <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// 通过类名访问静态变量</span>
<span class="token keyword">int</span> value <span class="token operator">=</span> <span class="token class-name">MyClass</span><span class="token punctuation">.</span>staticVariable<span class="token punctuation">;</span> <span class="token comment">// 通过类名获取静态变量的值</span>

<span class="token class-name">MyClass</span> myObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myObject<span class="token punctuation">.</span>staticVariable <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 也可以通过对象实例访问静态变量</span>
</code></pre> 
<p><strong>静态变量的生命周期</strong>：</p> 
<p>静态变量的生命周期与类的生命周期相同。它们在类加载时初始化，一直存在，直到程序结束或类被卸载。静态变量的值在类加载后保持不变，因为它们是类级别的，而不是与对象实例相关联。</p> 
<p><strong>静态变量的作用域</strong>：</p> 
<p>静态变量在整个类中可见，它们的作用域覆盖整个类。可以在类的任何方法内部或外部访问静态变量。</p> 
<p>总之，静态变量是属于类的，而不是类的实例的变量。它们在类加载时初始化，具有全局作用域，用于存储类级别的数据。静态变量通常用于存储不依赖于特定对象实例的信息，如常量值、计数器等。</p> 
<h2><a id="_89"></a>第三：静态块</h2> 
<p><strong>静态初始化块</strong>是Java中的一种特殊的块，用于在类加载时执行静态初始化操作。静态初始化块通常用于执行一些与静态成员变量相关的初始化任务，或在类加载时执行一些必要的设置。</p> 
<p>以下是关于静态初始化块的用途和如何使用它来初始化静态变量的信息：</p> 
<p><strong>静态初始化块的用途</strong>：</p> 
<ol><li> <p><strong>初始化静态变量</strong>：静态初始化块可以用于初始化静态变量，通常在静态变量的初始值不能直接赋值时使用。</p> </li><li> <p><strong>执行复杂初始化逻辑</strong>：如果静态变量的初始化需要复杂的逻辑或依赖于其他类的加载，可以在静态初始化块中执行这些操作。</p> </li><li> <p><strong>资源管理</strong>：静态初始化块可以用于管理资源，如数据库连接或文件句柄的初始化和释放。</p> </li></ol> 
<p><strong>如何使用静态块初始化静态变量</strong>：</p> 
<p>在Java中，你可以在类中使用静态初始化块，它以<code>static {}</code>的形式定义，包含初始化代码。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 静态变量声明</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> staticVariable<span class="token punctuation">;</span>

    <span class="token comment">// 静态初始化块</span>
    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 执行初始化操作</span>
        staticVariable <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在上述示例中，静态初始化块在类加载时执行，并初始化了静态变量<code>staticVariable</code>的值为42。静态初始化块允许你执行更复杂的逻辑，如根据条件初始化静态变量，执行多步骤的初始化等。</p> 
<p>请注意，静态初始化块只在类加载时执行一次，因此它适合用于一次性的初始化操作。如果你有多个静态初始化块，它们会按照在类中的顺序执行。</p> 
<h2><a id="_124"></a>第四：静态内部类</h2> 
<p><strong>静态内部类</strong>是嵌套在另一个类中的类，但它是一个静态类，与外部类的实例无关。静态内部类可以在不创建外部类实例的情况下被实例化，并可以访问外部类的静态成员，但不能访问外部类的非静态成员。</p> 
<p>静态内部类的主要特点包括：</p> 
<ol><li>它被声明为静态（使用<code>static</code>关键字）。</li><li>它不能访问外部类的非静态成员（即实例成员）。</li><li>它可以访问外部类的静态成员和方法。</li><li>静态内部类的实例化不依赖于外部类的实例。</li></ol> 
<p><strong>静态内部类的用途</strong>：</p> 
<p>静态内部类常用于以下情况：</p> 
<ol><li> <p><strong>封装</strong>：将一组相关的类封装在一个类内部，以减少命名冲突，提高代码的组织性和可读性。</p> </li><li> <p><strong>工厂模式</strong>：静态内部类可用于实现工厂模式，其中外部类充当工厂，而静态内部类作为工厂方法。</p> </li><li> <p><strong>单例模式</strong>：静态内部类通常用于实现懒加载的单例模式，因为它在需要时才加载并初始化。</p> </li><li> <p><strong>优化类结构</strong>：将一些与外部类不直接关联但与其有某种联系的类组织在一起，以减少类的数量和提高代码可维护性。</p> </li></ol> 
<p><strong>示例</strong>：</p> 
<p>下面是一个示例，展示了如何使用静态内部类：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OuterClass</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> outerStaticVariable <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>

    <span class="token comment">// 静态内部类</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">StaticInnerClass</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printOuterStaticVariable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Outer static variable: "</span> <span class="token operator">+</span> outerStaticVariable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建静态内部类的实例</span>
        <span class="token class-name">StaticInnerClass</span> inner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StaticInnerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inner<span class="token punctuation">.</span><span class="token function">printOuterStaticVariable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，<code>StaticInnerClass</code>是一个静态内部类，它可以访问外部类<code>OuterClass</code>的静态成员<code>outerStaticVariable</code>，但不能访问非静态成员。这允许你将相关的类组织在一起，提高了代码的可读性。</p> 
<h2><a id="_172"></a>第五：静态导入</h2> 
<p><strong>静态导入</strong>是Java中的一项特性，它允许你在代码中直接引用类的静态成员，而不需要显式指定类名。静态导入的主要目的是简化代码，提高可读性，减少重复的类名引用。</p> 
<p><strong>静态导入的目的和使用场景</strong>：</p> 
<ol><li> <p><strong>简化代码</strong>：静态导入可以简化代码，特别是当你频繁使用某个类的静态方法或常量时，省去了重复输入类名的麻烦。</p> </li><li> <p><strong>提高可读性</strong>：通过静态导入，你可以更清晰地表达代码的意图，减少了冗长的类名前缀，提高了可读性。</p> </li><li> <p><strong>避免命名冲突</strong>：在某些情况下，静态导入还可以帮助避免命名冲突，因为你可以选择性地导入需要的静态成员，而不会污染命名空间。</p> </li></ol> 
<p><strong>如何使用静态导入简化代码</strong>：</p> 
<p>假设有一个名为<code>MathUtil</code>的类，其中包含了一些静态方法和常量：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MathUtil</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.14159265359</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用静态导入，你可以在代码中直接引用这些静态方法和常量，而不需要显式指定类名：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span></span><span class="token class-name">MathUtil</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不需要写 MathUtil.add</span>
        <span class="token keyword">double</span> circleArea <span class="token operator">=</span> <span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 不需要写 MathUtil.PI</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Result: "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Circle Area: "</span> <span class="token operator">+</span> circleArea<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在上述示例中，使用<code>import static</code>语句导入了<code>MathUtil</code>类的静态方法和常量，使得在<code>Main</code>类中可以直接使用它们，而不需要写类名前缀。</p> 
<p>需要注意的是，尽量避免滥用静态导入，只导入必要的静态成员，以确保代码的可读性。</p> 
<h2><a id="_217"></a>第六：单例模式</h2> 
<p><strong>单例模式</strong>是一种创建型设计模式，它确保一个类只有一个实例，并提供一种访问该实例的全局点。使用静态变量可以很容易实现单例模式。</p> 
<p>以下是如何使用静态变量实现单例模式的示例代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 使用静态变量来存储单例实例</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">// 私有构造方法，防止外部实例化</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 公共静态方法，用于获取单例实例</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上述代码中，<code>Singleton</code>类的构造方法是私有的，这意味着外部类无法直接实例化它。而通过<code>getInstance</code>方法，你可以获取<code>Singleton</code>类的单一实例。这个实例是通过静态变量<code>instance</code>来存储的，只有在第一次调用<code>getInstance</code>方法时才会创建。以后的调用都会返回同一个实例。</p> 
<p><strong>线程安全问题和解决方法</strong>：</p> 
<p>上述的单例模式示例是基本的单例模式，但它不是线程安全的。当多个线程同时访问<code>getInstance</code>方法时，可能会创建多个实例。为了确保线程安全，有几种解决方法：</p> 
<ol><li> <p><strong>饿汉式单例</strong>（Eager Initialization）：在类加载时就创建单例实例，确保线程安全，但可能会导致资源浪费。</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><strong>双重检查锁定</strong>（Double-Check Locking）：在第一次获取实例时加锁，之后的访问不需要再加锁，提高性能。</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><strong>静态内部类</strong>：使用静态内部类来延迟加载单例实例，利用类加载机制确保线程安全。</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<p>这些是一些常见的单例模式的线程安全实现方式。选择哪种方式取决于项目的需求和性能考虑。最常用的是双重检查锁定和静态内部类方式，它们都是线程安全且延迟加载的。</p> 
<h2><a id="_298"></a>第七：常见问题和最佳实践</h2> 
<p>静态成员的生命周期和线程安全性、避免滥用<code>static</code>的最佳实践以及静态变量的命名规范是编写高质量Java代码时需要考虑的关键问题。以下是这些问题的详细解释和最佳实践：</p> 
<p><strong>静态成员的生命周期和线程安全性</strong>：</p> 
<ul><li> <p><strong>生命周期</strong>：静态成员在类加载时初始化，生命周期与应用程序的运行时间相同。它们只会初始化一次。</p> </li><li> <p><strong>线程安全性</strong>：静态成员是全局共享的，因此可能存在线程安全问题。如果多个线程同时访问和修改静态成员，你需要采取适当的措施确保线程安全，如使用同步或其他并发控制机制。</p> </li></ul> 
<p><strong>避免滥用<code>static</code>的最佳实践</strong>：</p> 
<ol><li> <p><strong>不必要的静态</strong>：避免在类中过度使用静态成员。只有当数据需要被类的所有实例共享时，才应该将其定义为静态。避免将每个成员都声明为静态，这会导致不必要的全局状态。</p> </li><li> <p><strong>全局变量的谨慎使用</strong>：避免过度使用静态变量作为全局状态。全局变量可以使代码更难理解、调试和维护。尽量将变量的作用范围限制在需要的最小范围内。</p> </li><li> <p><strong>静态方法的明智使用</strong>：静态方法通常用于实用工具类、工厂方法、单例模式等情况，但不应滥用。确保它们的使用合理，而不是为了方便而将所有方法都定义为静态。</p> </li></ol> 
<p><strong>静态变量的命名规范</strong>：</p> 
<ul><li> <p>静态变量的命名通常采用大写字母，单词之间使用下划线分隔，以增加可读性。例如：<code>MAX_VALUE</code>, <code>DEFAULT_TIMEOUT</code>.</p> </li><li> <p>静态变量应该是恒定不变的，不应该在运行时改变其值。如果静态变量需要修改，通常会使用<code>final</code>关键字声明。</p> </li><li> <p>静态常量（如枚举的常量）通常使用全大写字母，单词之间使用下划线分隔，以表示它们是不可变的。例如：<code>RED</code>, <code>GREEN</code>.</p> </li></ul> 
<p>总之，静态成员的生命周期与类加载相同，线程安全性需要注意。避免滥用<code>static</code>，只有在必要时才使用。在命名静态变量时，遵循命名规范，使用大写字母和下划线以提高可读性。</p> 
<h2><a id="_326"></a>第八：案例研究</h2> 
<p>在实际项目中，<code>static</code>关键字经常用于各种场景，以下是一些示例说明如何在实际项目中使用<code>static</code>：</p> 
<ol><li> <p><strong>常量定义</strong>：<code>static</code>常量通常用于定义不变的常量，以避免魔法数字和提高代码可读性。例如，在一个几何计算库中，可以定义<code>static final</code>常量来表示圆周率π：</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MathConstants</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">double</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.14159265359</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><strong>工具类</strong>：静态方法和静态变量通常用于工具类，这些类提供一组静态方法来执行通用任务。例如，<code>java.lang.Math</code>类中的所有方法都是静态的，用于执行数学运算。</p> <pre><code class="prism language-java"><span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">16.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用静态方法</span>
</code></pre> </li><li> <p><strong>单例模式</strong>：静态变量常用于实现单例模式，确保只有一个类的实例。在单例类中，通常会有一个私有静态变量来存储单例实例。</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><strong>静态内部类</strong>：静态内部类常用于实现延迟加载的单例模式，它充当了工厂并实现了懒加载。</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><strong>静态工厂方法</strong>：静态工厂方法通常用于创建对象实例，而不是使用构造方法。例如，<code>java.util.Collections</code>类提供了许多静态工厂方法用于创建不可变集合。</p> <pre><code class="prism language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> unmodifiableList <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>originalList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li><li> <p><strong>缓存</strong>：静态变量可以用于缓存数据，以提高性能。例如，你可以使用静态<code>Map</code>来缓存计算结果，以避免重复计算。</p> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MathCache</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> squareRootCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> <span class="token function">getSquaredRoot</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>squareRootCache<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
            squareRootCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> squareRootCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<p>这些示例展示了在实际项目中使用<code>static</code>关键字的常见场景，包括定义常量、创建工具类、实现单例模式、实现静态内部类、提供静态工厂方法和使用缓存。<code>static</code>在这些场景中有助于提供全局状态、提高性能和提供工具方法。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e20f81fb356da9df929362be6b3db82/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis内存满的最佳解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bfad7363c147555e7b5ab48592641601/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java 8 中的 Stream API - map() 方法详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>