<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何在 Debian 8 上安装和使用 PostgreSQL 9.4 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ceeab73504d1874949c51ddc47fa3bab/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="如何在 Debian 8 上安装和使用 PostgreSQL 9.4">
  <meta property="og:description" content="前些天发现了一个巨牛的人工智能学习网站，通俗易懂，风趣幽默，忍不住分享一下给大家。点击跳转到网站。
简介 关系型数据库是满足多种需求的数据组织的基石。它们支持从在线购物到火箭发射等各种应用。PostgreSQL 是一种历史悠久但仍然活跃的数据库，它遵循大部分 SQL 标准，支持 ACID 事务，支持外键和视图，并且仍在积极开发中。
如果你运行的应用程序需要稳定性、软件包质量和简单的管理，Debian 8（代号“Jessie”）是 Linux 发行版中最佳的选择之一。它的更新速度比其他“发行版”慢一些，但其稳定性和质量得到了广泛认可。如果你的应用程序或服务需要数据库，Debian 8 和 PostgreSQL 的组合是最佳选择之一。
本文将向您展示如何在新的 Debian 8 Stable 实例上安装 PostgreSQL 并开始使用。
先决条件 首先要做的是启动 Debian 8 Stable 系统。你可以按照《使用 Debian 8 进行初始服务器设置》中的说明进行操作。本教程假设你已经准备好了一个 Debian 8 Stable Droplet。
除非另有说明，本教程中的所有命令都应该以具有 sudo 权限的非 root 用户身份运行。要了解如何创建用户并授予他们 sudo 权限，请查看《使用 Debian 8 进行初始服务器设置》。
安装 PostgreSQL 在安装 PostgreSQL 之前，请确保通过以下命令更新 apt 软件包列表，以获取来自 Debian 软件仓库的最新信息：
sudo apt-get update 你应该看到软件包列表正在更新，并出现以下消息：
Reading package lists... Done. 有几个以 postgresql 开头的软件包：
postgresql-9.4：PostgreSQL 服务器软件包postgresql-client-9.4：PostgreSQL 客户端postgresql：Debian 手册或 Debian 新维护者指南中更好解释的“元软件包” 要直接安装 postgresql-9.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-26T01:00:00+08:00">
    <meta property="article:modified_time" content="2024-07-26T01:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何在 Debian 8 上安装和使用 PostgreSQL 9.4</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>前些天发现了一个巨牛的<a href="https://www.captainbed.cn/rubys" rel="nofollow">人工智能学习网站</a>，通俗易懂，风趣幽默，忍不住分享一下给大家。<a href="https://www.captainbed.cn/rubys" rel="nofollow">点击跳转到网站</a>。</p> 
<h4><a id="_3"></a>简介</h4> 
<p>关系型数据库是满足多种需求的数据组织的基石。它们支持从在线购物到火箭发射等各种应用。PostgreSQL 是一种历史悠久但仍然活跃的数据库，它遵循大部分 SQL 标准，支持 ACID 事务，支持外键和视图，并且仍在积极开发中。</p> 
<p>如果你运行的应用程序需要稳定性、软件包质量和简单的管理，Debian 8（代号“Jessie”）是 Linux 发行版中最佳的选择之一。它的更新速度比其他“发行版”慢一些，但其稳定性和质量得到了广泛认可。如果你的应用程序或服务需要数据库，Debian 8 和 PostgreSQL 的组合是最佳选择之一。</p> 
<p>本文将向您展示如何在新的 Debian 8 Stable 实例上安装 PostgreSQL 并开始使用。</p> 
<h3><a id="_11"></a>先决条件</h3> 
<p>首先要做的是启动 Debian 8 Stable 系统。你可以按照《使用 Debian 8 进行初始服务器设置》中的说明进行操作。本教程假设你已经准备好了一个 Debian 8 Stable Droplet。</p> 
<p>除非另有说明，本教程中的所有命令都应该以具有 sudo 权限的非 root 用户身份运行。要了解如何创建用户并授予他们 sudo 权限，请查看《使用 Debian 8 进行初始服务器设置》。</p> 
<h3><a id="_PostgreSQL_17"></a>安装 PostgreSQL</h3> 
<p>在安装 PostgreSQL 之前，请确保通过以下命令更新 apt 软件包列表，以获取来自 Debian 软件仓库的最新信息：</p> 
<pre><code class="prism language-command">sudo apt-get update
</code></pre> 
<p>你应该看到软件包列表正在更新，并出现以下消息：</p> 
<pre><code>Reading package lists... Done.
</code></pre> 
<p>有几个以 <code>postgresql</code> 开头的软件包：</p> 
<ul><li><code>postgresql-9.4</code>：PostgreSQL 服务器软件包</li><li><code>postgresql-client-9.4</code>：PostgreSQL 客户端</li><li><code>postgresql</code>：Debian 手册或 Debian 新维护者指南中更好解释的“元软件包”</li></ul> 
<p>要直接安装 <code>postgresql-9.4</code> 软件包：</p> 
<pre><code class="prism language-command">sudo apt-get install postgresql-9.4 postgresql-client-9.4
</code></pre> 
<p>在提示时，输入 <code>Y</code> 安装软件包。如果一切顺利，软件包现在已从软件仓库下载并安装。</p> 
<h3><a id="_45"></a>检查安装</h3> 
<p>要检查 PostgreSQL 服务器是否正确安装并正在运行，可以使用 <code>ps</code> 命令：</p> 
<pre><code class="prism language-command">ps -ef | grep postgre
</code></pre> 
<p>你应该在终端上看到类似以下内容：</p> 
<pre><code>postgres 32164     1  0 21:58 ?        00:00:00 /usr/lib/postgresql/9.4/bin/postgres -D /var/lib/   postgresql/9.4/main -c config_file=/etc/postgresql/9.4/main/postgresql.conf
postgres 32166 32164  0 21:58 ?        00:00:00 postgres: checkpointer process
postgres 32167 32164  0 21:58 ?        00:00:00 postgres: writer process
postgres 32168 32164  0 21:58 ?        00:00:00 postgres: wal writer process
postgres 32169 32164  0 21:58 ?        00:00:00 postgres: autovacuum launcher process
postgres 32170 32164  0 21:58 ?        00:00:00 postgres: stats collector process 
</code></pre> 
<p>成功！PostgreSQL 已成功安装并正在运行。</p> 
<h3><a id="_PostgreSQL__66"></a>访问 PostgreSQL 数据库</h3> 
<p>在 Debian 上，PostgreSQL 安装了一个名为 <code>postgres</code> 的默认用户和默认数据库。要连接到数据库，首先需要切换到 <code>postgres</code> 用户，方法是在以 root 用户登录的情况下发出以下命令（使用 sudo 权限无法执行此操作）：</p> 
<pre><code class="prism language-command">su - postgres
</code></pre> 
<p>现在你应该已经以 <code>postgres</code> 用户登录。要启动 PostgreSQL 控制台，输入 <code>psql</code>：</p> 
<pre><code class="prism language-command">psql
</code></pre> 
<p>完成！你应该已经登录到 PostgreSQL 控制台。你应该看到以下提示：</p> 
<pre><code>psql (9.4.2)
Type "help" for help.

postgres=# 
</code></pre> 
<p>要退出 psql 控制台，只需使用命令 <code>\q</code>。</p> 
<h3><a id="_91"></a>创建新角色</h3> 
<p>默认情况下，Postgres 使用称为“角色”的概念来帮助进行身份验证和授权。在某些方面，这些与常规的 Unix 风格帐户类似，但 PostgreSQL 不区分用户和组，而是更倾向于更灵活的术语“角色”。</p> 
<p>在安装时，PostgreSQL 被设置为使用“ident”身份验证，这意味着它将 PostgreSQL 角色与匹配的 Unix/Linux 系统帐户关联起来。如果存在 PostgreSQL 角色，可以通过登录到关联的 Linux 系统帐户来登录。</p> 
<p>安装过程创建了一个名为 postgres 的用户帐户，该帐户与默认的 Postgres 角色关联。</p> 
<p>要创建其他角色，我们可以使用 <code>createuser</code> 命令。请注意，此命令应该作为用户 <code>postgres</code> 发出，而不是在 PostgreSQL 控制台内部：</p> 
<pre><code class="prism language-command">createuser --interactive
</code></pre> 
<p>这基本上是一个交互式的 shell 脚本，调用正确的 PostgreSQL 命令来根据你的规格创建用户。它会询问你一些问题：角色的名称、是否应该是超级用户、角色是否应该能够创建新数据库，以及角色是否能够创建新角色。<code>man</code> 页面中有更多信息：</p> 
<pre><code class="prism language-command">man createuser
</code></pre> 
<h3><a id="_111"></a>创建新数据库</h3> 
<p>PostgreSQL 默认设置了通过匹配系统帐户请求的身份验证角色（您可以在 postgresql.org 上获取更多信息）。它还假定匹配的数据库将存在于角色连接的数据库中。因此，如果我有一个名为 <code>test1</code> 的用户，该角色将默认尝试连接到名为 <code>test1</code> 的数据库。</p> 
<p>您可以通过简单地以 <code>postgres</code> 用户的身份调用以下命令来创建适当的数据库：</p> 
<pre><code class="prism language-command">createdb test1
</code></pre> 
<p>现在已创建了新数据库 <code>test1</code>。</p> 
<h3><a id="_PostgreSQL_123"></a>使用新用户连接到 PostgreSQL</h3> 
<p>假设您有一个名为 <code>test1</code> 的 Linux 帐户，创建了一个 PostgreSQL <code>test1</code> 角色与之匹配，并创建了数据库 <code>test1</code>。要在 Linux 中切换用户帐户为 <code>test1</code>：</p> 
<pre><code class="prism language-command">su - test1
</code></pre> 
<p>然后，使用以下命令以 <code>test1</code> PostgreSQL 角色连接到 <code>test1</code> 数据库：</p> 
<pre><code class="prism language-command">psql
</code></pre> 
<p>现在，您应该看到新创建的用户 <code>test1</code> 而不是 <code>postgres</code> 的 PostgreSQL 提示符。</p> 
<h3><a id="_139"></a>创建和删除表</h3> 
<p>现在您知道如何连接到 PostgreSQL 数据库系统，我们将开始介绍如何完成一些基本任务。</p> 
<p>首先，让我们创建一个表来存储一些数据。让我们创建一个描述游乐场设备的表。</p> 
<p>此命令的基本语法如下：</p> 
<pre><code>CREATE TABLE table_name (
    column_name1 col_type (field_length) column_constraints,
    column_name2 col_type (field_length),
    column_name3 col_type (field_length)
);
</code></pre> 
<p>如您所见，我们为表指定了一个名称，然后定义了我们想要的列，以及列类型和字段数据的最大长度。我们还可以为每个列可选地添加表约束。</p> 
<p>您可以在《如何在云服务器上创建、删除和管理 PostgreSQL 表》文章中了解有关如何在 Postgres 中创建和管理表的更多信息。</p> 
<p>对于我们的目的，我们将创建一个类似于以下内容的简单表：</p> 
<pre><code>CREATE TABLE playground (
    equip_id serial PRIMARY KEY,
    type varchar (50) NOT NULL,
    color varchar (25) NOT NULL,
    location varchar(25) check (location in ('north', 'south', 'west', 'east', 'northeast', 'southeast', 'southwest', 'northwest')),
    install_date date
);
</code></pre> 
<p>我们已经创建了一个记录我们拥有的设备的游乐场表。这始于一个设备 ID，它是序列类型的。此数据类型是自增整数。我们已经给了这个列主键的约束，这意味着值必须是唯一的且不为空。</p> 
<p>对于我们的两个列，我们没有给出字段长度。这是因为某些列类型不需要设置长度，因为长度由类型隐含确定。</p> 
<p>然后，我们为设备类型和颜色创建列，每个列都不能为空。然后我们创建一个位置列，并创建一个要求值为八个可能值之一的约束。最后一列是一个记录我们安装设备日期的日期列。</p> 
<p>要查看表，请在 psql 提示符上使用命令 <code>\dt</code>。结果类似于</p> 
<pre><code>             List of relations
 Schema |    Name    | Type  |  Owner 
--------+------------+-------+----------
 public | playground | table | postgres
</code></pre> 
<p>如您所见，我们有我们的游乐场表。</p> 
<h3><a id="_188"></a>向表中添加、查询和删除数据</h3> 
<p>现在我们已经创建了一个表，我们可以向其中插入一些数据。</p> 
<p>让我们添加一个滑梯和一个秋千。我们通过调用我们要添加到的表，命名列，然后为每个列提供数据来完成这个操作。我们的滑梯和秋千可以这样添加：</p> 
<pre><code>INSERT INTO playground (type, color, location, install_date) VALUES ('slide', 'blue', 'south', '2014-04-28');
INSERT INTO playground (type, color, location, install_date) VALUES ('swing', 'yellow', 'northwest', '2010-08-16');
</code></pre> 
<p>您应该注意到几件事情。首先，请记住，列名不应该用引号括起来，但您输入的列值确实需要引号。</p> 
<p>另一件需要注意的事情是，我们不为 <code>equip_id</code> 列输入值。这是因为每当在表中创建新行时，此列会自动生成。</p> 
<p>然后，我们可以通过键入以下内容来获取我们添加的信息：</p> 
<pre><code>SELECT * FROM playground;
</code></pre> 
<p>输出应该是</p> 
<pre><code> equip_id | type  | color  | location  | install_date 
----------+-------+--------+-----------+--------------
        1 | slide | blue   | south     | 2014-04-28
        2 | swing | yellow | northwest | 2010-08-16
</code></pre> 
<p>在这里，您可以看到我们的 <code>equip_id</code> 已成功填充，并且我们的其他所有数据都已正确组织。如果我们的滑梯损坏，并且我们将其从游乐场移除，我们也可以通过键入以下内容从我们的表中删除该行：</p> 
<pre><code>DELETE FROM playground WHERE type = 'slide';
</code></pre> 
<p>如果我们再次查询我们的表：</p> 
<pre><code>SELECT * FROM playground;
</code></pre> 
<p>我们将看到我们的滑梯不再是表的一部分：</p> 
<pre><code> equip_id | type  | color | location | install_date 
----------+-------+-------+----------+--------------
        1 | slide | blue  | south    | 2014-04-28
</code></pre> 
<h3><a id="_238"></a>有用的命令</h3> 
<p>以下是一些可以帮助您了解当前环境的命令：</p> 
<ul><li> <p><strong>?</strong>: 获取包括这里未列出的所有 psql 命令的完整列表。</p> </li><li> <p><strong>\h</strong>: 获取有关 SQL 命令的帮助。您可以在其后跟上特定命令以获取语法帮助。</p> </li><li> <p><strong>\q</strong>: 退出 psql 程序并返回到 Linux 提示符。</p> </li><li> <p><strong>\d</strong>: 列出当前数据库中可用的表、视图和序列。</p> </li><li> <p><strong>\du</strong>: 列出可用角色。</p> </li><li> <p><strong>\dp</strong>: 列出访问权限。</p> </li><li> <p><strong>\dt</strong>: 列出表格。</p> </li><li> <p><strong>\l</strong>: 列出数据库。</p> </li><li> <p><strong>\c</strong>: 连接到不同的数据库。在其后跟上数据库名称。</p> </li><li> <p><strong>\password</strong>: 更改接下来的用户名的密码。</p> </li><li> <p><strong>\conninfo</strong>: 获取有关当前数据库和连接的信息。</p> </li></ul> 
<p>有了这些命令，您应该能够在短时间内浏览 PostgreSQL 数据库、表格和角色。</p> 
<h3><a id="_265"></a>结论</h3> 
<p>您现在应该在 Debian 系统上拥有一个完全功能的 PostgreSQL 数据库。恭喜！这里有大量的文档可供参考：</p> 
<ul><li> <p>PostgreSQL 手册</p> </li><li> <p>安装包 <code>postgresql-doc</code>：<code>sudo apt-get install postgresql-doc</code></p> </li><li> <p>安装在 <code>/usr/share/doc/postgresql-doc-9.4/tutorial/README</code> 的 <code>README</code> 文件</p> </li></ul> 
<p>要获取 PostgreSQL 中支持的所有 SQL 命令的完整列表，请访问以下链接：</p> 
<ul><li>SQL 命令</li></ul> 
<p>要比较不同数据库的功能，请查看：</p> 
<ul><li>SQLite vs MySQL vs PostgreSQL</li></ul> 
<p>要更好地理解角色和权限，请参阅：</p> 
<ul><li>如何在 VPS 上使用角色和管理授予权限的 PostgreSQL</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1bf1fdf56faf1359da5eb75a2f42b36a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【数据结构初阶】一篇文章带你超深度理解【单链表】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/84aaff66a9f5e07c7fe80a71f87b8e4d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">深度模型中的优化 - 基本算法篇</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>