<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Datawhale X 魔搭 AI夏令营 第四期 魔搭-AIGC方向 Task02 笔记 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/61da75be1ef616199bb2f80066ff6c11/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Datawhale X 魔搭 AI夏令营 第四期 魔搭-AIGC方向 Task02 笔记">
  <meta property="og:description" content="从零入门AI生图原理&amp;实践 是 Datawhale 2024 年 AI 夏令营第四期的学习活动（“AIGC”方向），基于魔搭社区“可图Kolors-LoRA风格故事挑战赛”开展的实践学习。
Datawhale官方的速通教程链接：
Task 1 从零入门AI生图原理&amp;实践
Datawhale（Task2）
下面是根据教程实践的记录
Part1：AI生图技术能力及局限 ①通俗来说，AI生图模型获得图片生成能力主要是通过 学习 图片描述 以及 图片特征，尝试将这两者进行一一对应，存储在自己的记忆里。
模型根据我们输入的文字&#43;凭借它的能力→生成我们需要的图片
②不同模型用于训练的数据有限且不一定相同→匹配的描述和特征也是有限的
所以不同模型在风格和具体事物上会有很大的生成差异，且存在诸多于现实不符的情况
③关于“ai味”辨别方法：
*观察图片的细节（人物面部特征，特别是眼睛和嘴巴）
*检查光线和阴影（光源是否一致，阴影是否与光源相符，光线阴影会不会不正常）
*分析像素（是否有模糊/像素化部分）
*注意背景（是否有不协调eg.边缘是平滑，有无不自然的重复）
Part2：AI生图前沿探索 可以从魔搭社区各种AIGC开始探索 →魔搭社区
通过task1的学习，觉得数据集很重要！可以在魔搭开源数据集中寻找我们要的数据集
Kolors（可图）模型(点击即可跳转魔搭模型介绍页) 是快手开源的文本到图像生成模型，该模型具有对英语和汉语的深刻理解，并能够生成高质量、逼真的图像。以下是一些相关链接：
代码开源链接：https://github.com/Kwai-Kolors/Kolors
模型开源链接：https://modelscope.cn/models/Kwai-Kolors/Kolors
技术报告链接：https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf
魔搭研习社最佳实践说明：https://www.modelscope.cn/learn/575?pid=543
可图区别过去SD系列基础模型的一个特点是它支持中文文生图，
魔搭社区还开源了专门的各种风格的可图优质咒语书(点击即可跳转)，可以针对600&#43;种不同风格，完善prompt，生成各种风格图片
Part3：通过魔搭社区持续探索AI生图前沿 目前让ai稳定生成相似效果的海报还是比较困难，一些创意海报工具（eg.
创意海报生成 ）往往是通过固定文字位置及字体进行相应海报生成，
大致是①ai生成背景②通过代码将对应的文字显示到对应位置，然后渲染合成照片输出给我们
自己想多多探索的话可以往这些方向思考
可以用在哪些业务里？有哪些行业在使用？用的是哪个 AI 模型？是自己部署的AI模型，还是用的API？使用到了哪些 AI 能力？如果要复现，需要做哪些额外的设置和开发？还可以有哪些优化点？ 可以在刚刚的创意海报生成空间文件里进行相关代码的查看/下载到本地/云服务器复现，验证思考及学习相关的设计开发
一、认识通义千问 通义千问（点击直达）。
它相当于一个AI助手
二、使用这样一个AI助手帮我们精读baseline——①分析代码的主体架构②逐行代码解析 根据教程里图片可以直观感知文生图代码的框架结构
使用AI助手前我们先整理出baseline里所有的代码
!pip install simple-aesthetics-predictor !pip install -v -e data-juicer !pip uninstall pytorch-lightning -y !">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-14T23:36:43+08:00">
    <meta property="article:modified_time" content="2024-08-14T23:36:43+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Datawhale X 魔搭 AI夏令营 第四期 魔搭-AIGC方向 Task02 笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>从零入门AI生图原理&amp;实践 </strong>是 Datawhale 2024 年 AI 夏令营第四期的学习活动（<strong>“AIGC”方向</strong>），基于魔搭社区<strong>“<a href="https://tianchi.aliyun.com/competition/entrance/532254" rel="nofollow" title="可图Kolors-LoRA风格故事挑战赛">可图Kolors-LoRA风格故事挑战赛</a></strong><strong>”</strong>开展的实践学习。</p> 
<p>Datawhale官方的速通教程链接：</p> 
<p><a href="https://linklearner.com/activity/14/10/24" rel="nofollow" title="Task 1 从零入门AI生图原理&amp;实践">Task 1 从零入门AI生图原理&amp;实践</a></p> 
<p><a href="https://linklearner.com/activity/14/10/32" rel="nofollow" title="Datawhale">Datawhale</a>（Task2）</p> 
<p>下面是根据教程实践的记录</p> 
<h2 style="margin-left:0px;">Part1：AI生图技术能力及局限</h2> 
<p style="margin-left:0;">①通俗来说，<strong><u><span style="color:#245bdb;">AI生图模型</span></u>获得图片生成能力</strong>主要是通过 学习 <strong><u>图片描述 </u></strong>以及 <strong><u>图片特征</u></strong>，尝试将这两者进行一一对应，存储在自己的记忆里。</p> 
<p style="margin-left:0;">模型根据我们输入的文字+凭借它的能力→生成我们需要的图片</p> 
<p style="margin-left:0;">②不同模型用于训练的<strong>数据有限且不一定相同</strong>→匹配的描述和特征也是有限的</p> 
<p style="margin-left:0;">所以不同模型在风格和具体事物上会有很大的生成差异，且存在诸多于现实不符的情况</p> 
<p style="margin-left:0;"><strong>③关于“ai味”辨别方法：</strong></p> 
<p style="margin-left:0;">*观察图片的细节（人物面部特征，特别是眼睛和嘴巴）</p> 
<p style="margin-left:0;">*检查光线和阴影（光源是否一致，阴影是否与光源相符，光线阴影会不会不正常）</p> 
<p style="margin-left:0;">*分析像素（是否有模糊/像素化部分）</p> 
<p style="margin-left:0;">*注意背景（是否有不协调eg.边缘是平滑，有无不自然的重复）</p> 
<h2 style="margin-left:0px;">Part2：AI生图前沿探索</h2> 
<h3 style="margin-left:0px;">可以从魔搭社区各种AIGC开始探索</h3> 
<p style="margin-left:0;">→<a href="https://modelscope.cn/" rel="nofollow" title="魔搭社区">魔搭社区</a></p> 
<p style="margin-left:0;">通过task1的学习，觉得数据集很重要！可以在魔搭开源数据集中寻找我们要的数据集</p> 
<p style="margin-left:0;"><img alt="" height="914" src="https://images2.imgbox.com/be/2f/U3MlhBqp_o.png" width="1200"></p> 
<p style="margin-left:0;"><a href="https://modelscope.cn/models/Kwai-Kolors/Kolors" rel="nofollow" title="Kolors（可图）模型(点击即可跳转魔搭模型介绍页)">Kolors（可图）模型(点击即可跳转魔搭模型介绍页)</a> 是快手开源的<strong><span style="color:#d83931;">文本到图像生成模型</span></strong>，该模型具有对英语和汉语的深刻理解，并能够生成高质量、逼真的图像。以下是一些相关链接：</p> 
<p style="margin-left:0;">代码开源链接：https://github.com/Kwai-Kolors/Kolors</p> 
<p style="margin-left:0;">模型开源链接：https://modelscope.cn/models/Kwai-Kolors/Kolors</p> 
<p style="margin-left:0;">技术报告链接：https://github.com/Kwai-Kolors/Kolors/blob/master/imgs/Kolors_paper.pdf</p> 
<p style="margin-left:0;">魔搭研习社最佳实践说明：https://www.modelscope.cn/learn/575?pid=543</p> 
<p style="margin-left:0;">可图区别过去SD系列基础模型的一个特点是它支持中文文生图，</p> 
<p style="margin-left:0;"><a href="https://modelscope.cn/" rel="nofollow" title="魔搭社区">魔搭社区</a>还开源了专门的各种风格的<a href="https://modelscope.cn/datasets/modelscope/Kolors_awesome_prompts/dataPeview" rel="nofollow" title="可图优质咒语书(点击即可跳转)">可图优质咒语书(点击即可跳转)</a>，可以针对600+种不同风格，完善prompt，生成各种风格图片</p> 
<p style="margin-left:0;"><img alt="" height="880" src="https://images2.imgbox.com/ed/1f/3iswnXHi_o.png" width="1200"></p> 
<h2 style="margin-left:0px;">Part3：<strong>通过</strong><a href="https://modelscope.cn/" rel="nofollow" title="魔搭社区">魔搭社区</a><strong>持续探索</strong><strong>AI</strong><strong>生图前沿</strong></h2> 
<p style="margin-left:0;">目前让ai稳定生成相似效果的海报还是比较困难，一些创意海报工具（eg.</p> 
<p style="margin-left:0;"><a href="https://modelscope.cn/studios/iic/PosterGenius" rel="nofollow" title="创意海报生成">创意海报生成</a><strong> </strong>）往往是通过固定文字位置及字体进行相应海报生成，</p> 
<p style="margin-left:0;">大致是①ai生成背景②通过代码将对应的文字显示到对应位置，然后渲染合成照片输出给我们</p> 
<p style="margin-left:0;">自己想多多探索的话可以往这些方向思考</p> 
<ul><li>可以用在哪些业务里？有哪些行业在使用？</li><li>用的是哪个 AI 模型？</li><li>是自己部署的AI模型，还是用的API？</li><li>使用到了哪些 AI 能力？</li><li>如果要复现，需要做哪些额外的设置和开发？</li><li>还可以有哪些优化点？</li></ul> 
<p style="margin-left:0;">可以在刚刚的<a href="https://modelscope.cn/studios/iic/PosterGenius" rel="nofollow" title="创意海报生成">创意海报生成</a>空间文件里进行相关代码的查看/下载到本地/云服务器复现，验证思考及学习相关的设计开发</p> 
<p style="margin-left:0;"></p> 
<h3 style="margin-left:0px;">一、认识通义千问</h3> 
<p style="margin-left:0;">通义千问（<a href="https://tongyi.aliyun.com/qianwen/" rel="nofollow" title="点击直达">点击直达</a>）。</p> 
<p style="margin-left:0;">它相当于一个AI助手</p> 
<h3 style="margin-left:0px;">二、使用这样一个AI助手帮我们精读baseline——①分析代码的主体架构②逐行代码解析</h3> 
<p style="margin-left:0;">根据教程里图片可以直观感知文生图代码的框架结构</p> 
<p style="margin-left:0;"><img alt="" height="472" src="https://images2.imgbox.com/4b/c8/MDm1tuJp_o.png" width="714"></p> 
<p style="margin-left:0;">使用AI助手前我们先整理出baseline里所有的代码</p> 
<pre><code class="language-python">!pip install simple-aesthetics-predictor

!pip install -v -e data-juicer

!pip uninstall pytorch-lightning -y
!pip install peft lightning pandas torchvision

!pip install -e DiffSynth-Studio

from modelscope.msdatasets import MsDataset

ds = MsDataset.load(
    'AI-ModelScope/lowres_anime',
    subset_name='default',
    split='train',
    cache_dir="/mnt/workspace/kolors/data"
)

import json, os
from data_juicer.utils.mm_utils import SpecialTokens
from tqdm import tqdm


os.makedirs("./data/lora_dataset/train", exist_ok=True)
os.makedirs("./data/data-juicer/input", exist_ok=True)
with open("./data/data-juicer/input/metadata.jsonl", "w") as f:
    for data_id, data in enumerate(tqdm(ds)):
        image = data["image"].convert("RGB")
        image.save(f"/mnt/workspace/kolors/data/lora_dataset/train/{data_id}.jpg")
        metadata = {"text": "二次元", "image": [f"/mnt/workspace/kolors/data/lora_dataset/train/{data_id}.jpg"]}
        f.write(json.dumps(metadata))
        f.write("\n")

data_juicer_config = """
# global parameters
project_name: 'data-process'
dataset_path: './data/data-juicer/input/metadata.jsonl'  # path to your dataset directory or file
np: 4  # number of subprocess to process your dataset

text_keys: 'text'
image_key: 'image'
image_special_token: '&lt;__dj__image&gt;'

export_path: './data/data-juicer/output/result.jsonl'

# process schedule
# a list of several process operators with their arguments
process:
    - image_shape_filter:
        min_width: 1024
        min_height: 1024
        any_or_all: any
    - image_aspect_ratio_filter:
        min_ratio: 0.5
        max_ratio: 2.0
        any_or_all: any
"""
with open("data/data-juicer/data_juicer_config.yaml", "w") as file:
    file.write(data_juicer_config.strip())

!dj-process --config data/data-juicer/data_juicer_config.yaml

import pandas as pd
import os, json
from PIL import Image
from tqdm import tqdm


texts, file_names = [], []
os.makedirs("./data/data-juicer/output/images", exist_ok=True)
with open("./data/data-juicer/output/result.jsonl", "r") as f:
    for line in tqdm(f):
        metadata = json.loads(line)
        texts.append(metadata["text"])
        file_names.append(metadata["image"][0])

df = pd.DataFrame({"text": texts, "file_name": file_names})
df.to_csv("./data/data-juicer/output/result.csv", index=False)

df

from transformers import CLIPProcessor, CLIPModel
import torch

model = CLIPModel.from_pretrained("openai/clip-vit-base-patch32")
processor = CLIPProcessor.from_pretrained("openai/clip-vit-base-patch32")

images = [Image.open(img_path) for img_path in df["file_name"]]
inputs = processor(text=df["text"].tolist(), images=images, return_tensors="pt", padding=True)

outputs = model(**inputs)
logits_per_image = outputs.logits_per_image  # this is the image-text similarity score
probs = logits_per_image.softmax(dim=1)  # we can take the softmax to get the probabilities

probs

from torch.utils.data import Dataset, DataLoader

class CustomDataset(Dataset):
    def __init__(self, df, processor):
        self.texts = df["text"].tolist()
        self.images = [Image.open(img_path) for img_path in df["file_name"]]
        self.processor = processor

    def __len__(self):
        return len(self.texts)

    def __getitem__(self, idx):
        inputs = self.processor(text=self.texts[idx], images=self.images[idx], return_tensors="pt", padding=True)
        return inputs

dataset = CustomDataset(df, processor)
dataloader = DataLoader(dataset, batch_size=8)

for batch in dataloader:
    outputs = model(**batch)
    logits_per_image = outputs.logits_per_image
    probs = logits_per_image.softmax(dim=1)
    print(probs)

import torch
from diffusers import StableDiffusionPipeline

torch.manual_seed(1)
pipe = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v-1-4", torch_dtype=torch.float16)
pipe = pipe.to("cuda")

prompt = "二次元，一个紫色长发小女孩穿着粉色吊带漏肩连衣裙，在练习室练习唱歌，手持话筒"
negative_prompt = "丑陋、变形、嘈杂、模糊、低对比度"
guidance_scale = 4
num_inference_steps = 50

image = pipe(
    prompt=prompt,
    negative_prompt=negative_prompt,
    guidance_scale=guidance_scale,
    num_inference_steps=num_inference_steps,
    height=1024,
    width=1024,
).images[0]

image.save("example_image.png")
image

from PIL import Image

torch.manual_seed(1)
image = pipe(
    prompt="二次元，日系动漫，演唱会的观众席，人山人海，一个紫色短发小女孩穿着粉色吊带漏肩连衣裙坐在演唱会的观众席，舞台上衣着华丽的歌星们在唱歌",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("1.jpg")

torch.manual_seed(1)
image = pipe(
    prompt="二次元，一个紫色短发小女孩穿着粉色吊带漏肩连衣裙坐在演唱会的观众席，露出憧憬的神情",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度，色情擦边",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("2.jpg")

torch.manual_seed(2)
image = pipe(
    prompt="二次元，一个紫色短发小女孩穿着粉色吊带漏肩连衣裙坐在演唱会的观众席，露出憧憬的神情",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度，色情擦边",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("3.jpg")

torch.manual_seed(5)
image = pipe(
    prompt="二次元，一个紫色短发小女孩穿着粉色吊带漏肩连衣裙，对着流星许愿，闭着眼睛，十指交叉，侧面",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度，扭曲的手指，多余的手指",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("4.jpg")

torch.manual_seed(0)
image = pipe(
    prompt="二次元，一个紫色中等长度头发小女孩穿着粉色吊带漏肩连衣裙，在练习室练习唱歌",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("5.jpg")

torch.manual_seed(1)
image = pipe(
    prompt="二次元，一个紫色长发小女孩穿着粉色吊带漏肩连衣裙，在练习室练习唱歌，手持话筒",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("6.jpg")

torch.manual_seed(7)
image = pipe(
    prompt="二次元，紫色长发少女，穿着黑色连衣裙，试衣间，心情忐忑",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("7.jpg")

torch.manual_seed(0)
image = pipe(
    prompt="二次元，紫色长发少女，穿着黑色礼服，连衣裙，在台上唱歌",
    negative_prompt="丑陋、变形、嘈杂、模糊、低对比度",
    cfg_scale=4,
    num_inference_steps=50, height=1024, width=1024,
)
image.save("8.jpg")

import numpy as np
from PIL import Image


images = [np.array(Image.open(f"{i}.jpg")) for i in range(1, 9)]
image = np.concatenate([
    np.concatenate(images[0:2], axis=1),
    np.concatenate(images[2:4], axis=1),
    np.concatenate(images[4:6], axis=1),
    np.concatenate(images[6:8], axis=1),
], axis=0)
image = Image.fromarray(image).resize((1024, 2048))
image
</code></pre> 
<p style="margin-left:0;">好了，现在请借助AI助手实战！</p> 
<h4 style="margin-left:0px;">→①分析代码的主体架构</h4> 
<h5 style="margin-left:0px;"><strong>Ⅰ.向AI助手输入prompt</strong></h5> 
<p style="margin-left:0;">你是一个优秀的python开发工程师，现在我们需要你帮我们分析这个代码的主体框架，你需要把代码按照工作流分成几部分，用中文回答我的问题。<span style="background-color:#ffe928;"><strong><span style="color:#d83931;">{<!-- --></span></strong></span><span style="background-color:#ffe928;"><strong><span style="color:#d83931;">此处替换前面的代码</span></strong></span><span style="background-color:#ffe928;"><strong><span style="color:#d83931;">}</span></strong></span></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;">*插个题外话，看见“工作流”的时候我其实不太懂这个词的实际意思，就去csdn上查了一下（</p> 
<p style="margin-left:0;">工作流：工作流是一系列有序的任务、活动和决策，以实现特定的业务过程或工作流程。它描述了任务的先后顺序、依赖关系、条件和规则等，用于指导和管理工作的执行，后面第一个附的是两篇文章链接，不清楚工作流的小伙伴也可以看看，很详细奥~）</p> 
<p>来自 &lt;<a href="https://blog.csdn.net/weixin_37833693/article/details/139496626?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%E5%B7%A5%E4%BD%9C%E6%B5%81&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~sobaiduweb~default-0-139496626.nonecase&amp;spm=1018.2226.3001.4450" title="【工作流】 工作流相关概念及Activiti基本介绍_activity工作流-CSDN博客">【工作流】 工作流相关概念及Activiti基本介绍_activity工作流-CSDN博客</a>&gt;</p> 
<p style="margin-left:0;"><a href="https://longxuan.blog.csdn.net/article/details/34468739" rel="nofollow" title="从程序员的角度来看为什么我们需要工作流_是否有必要使用工作流-CSDN博客">从程序员的角度来看为什么我们需要工作流_是否有必要使用工作流-CSDN博客</a></p> 
<p style="margin-left:0;"></p> 
<h5 style="margin-left:0px;"><strong>Ⅱ.AI助手返回的结果</strong></h5> 
<p style="margin-left:0;">→这段代码主要完成了以下几个任务：</p> 
<p style="margin-left:0;">1. **环境准备**：</p> 
<p style="margin-left:0;">   - 安装所需的Python包，包括`simple-aesthetics-predictor`, `data-juicer`, `peft`, `lightning`, `pandas`, `torchvision`, 和 `DiffSynth-Studio`。</p> 
<p style="margin-left:0;">   - 卸载`pytorch-lightning`并安装一些替代版本。</p> 
<p style="margin-left:0;">2. **数据集加载与处理**：</p> 
<p style="margin-left:0;">   - 从ModelScope加载了一个名为`lowres_anime`的数据集，并将其保存到指定的目录。</p> 
<p style="margin-left:0;">   - 将数据集中的图片转换为RGB格式，并将每张图片和对应的描述性文本保存到本地文件系统中。同时，这些信息被记录在一个JSON Lines文件`metadata.jsonl`中。</p> 
<p style="margin-left:0;">3. **数据筛选与处理配置**：</p> 
<p style="margin-left:0;">   - 创建了一个配置文件`data_juicer_config.yaml`来定义数据处理的规则，包括过滤图片的尺寸和宽高比。</p> 
<p style="margin-left:0;">   - 使用`data-juicer`工具根据上述配置文件对数据进行预处理，并输出到`result.jsonl`文件中。</p> 
<p style="margin-left:0;">4. **数据分析与准备**：</p> 
<p style="margin-left:0;">   - 读取经过筛选后的数据集，创建一个Pandas DataFrame来存储图像文件名和对应的文本描述。</p> 
<p style="margin-left:0;">   - 将DataFrame保存为CSV文件。</p> 
<p style="margin-left:0;">   - 利用CLIP模型计算图像和文本之间的相似度得分。</p> 
<p style="margin-left:0;">5. **自定义数据集类**：</p> 
<p style="margin-left:0;">   - 定义了一个PyTorch的`Dataset`子类`CustomDataset`，用于将图像和文本配对，并准备好输入给下游模型。</p> 
<p style="margin-left:0;">6. **数据加载与模型推理**：</p> 
<p style="margin-left:0;">   - 创建了`DataLoader`对象来批量加载数据，并通过CLIP模型计算每个批次的图像与文本相似度。</p> 
<p style="margin-left:0;">7. **生成图像**：</p> 
<p style="margin-left:0;">   - 使用`StableDiffusionPipeline`根据不同的提示（prompt）生成了一系列二次元风格的图像，并保存这些图像。</p> 
<p style="margin-left:0;">8. **图像展示**：</p> 
<p style="margin-left:0;">   - 最后，代码尝试将生成的图像拼接在一起并调整大小以方便展示。</p> 
<p style="margin-left:0;">总结来说，整个流程涵盖了从数据集的加载、处理、分析到使用预训练模型进行推理以及图像生成等多个环节。这样的流水线非常适合于处理大规模图像数据集，并且可以用来训练或评估图像生成模型的效果。</p> 
<h5 style="margin-left:0px;"><strong>Ⅲ.使用AI助手例图</strong></h5> 
<p style="margin-left:0;"><img alt="" height="913" src="https://images2.imgbox.com/23/30/SZaNkHXQ_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><img alt="" height="906" src="https://images2.imgbox.com/40/16/P7Xf2OQ6_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<h4 style="margin-left:0px;">→②逐行代码解析</h4> 
<h5 style="margin-left:0px;"><strong>Ⅰ.同样地，向AI助手输入prompt</strong></h5> 
<p style="margin-left:0;">你是一个优秀的python开发工程师，现在我们需要你帮我们逐行分析这个代码，用中文回答我的问题。<strong><span style="color:#d83931;">{<!-- --></span></strong><strong><span style="color:#d83931;">此处替换前面的代码</span></strong><strong><span style="color:#d83931;">}</span></strong></p> 
<p style="margin-left:0;"></p> 
<h5 style="margin-left:0px;"><strong>Ⅱ.AI助手返回结果</strong></h5> 
<p style="margin-left:0;">这段代码可以分为几个主要部分来进行逐行分析：</p> 
<p style="margin-left:0;">### 1. 环境准备</p> 
<p style="margin-left:0;">- `!pip install simple-aesthetics-predictor`: 安装`simple-aesthetics-predictor`包。</p> 
<p style="margin-left:0;">- `!pip install -v -e data-juicer`: 安装`data-juicer`包，并使其可编辑运行。</p> 
<p style="margin-left:0;">- `!pip uninstall pytorch-lightning -y`: 卸载`pytorch-lightning`包。</p> 
<p style="margin-left:0;">- `!pip install peft lightning pandas torchvision`: 安装`peft`、`lightning`、`pandas`和`torchvision`包。</p> 
<p style="margin-left:0;">- `!pip install -e DiffSynth-Studio`: 安装`DiffSynth-Studio`包，并使其可编辑运行。</p> 
<p style="margin-left:0;">### 2. 数据集加载与处理</p> 
<p style="margin-left:0;">- `from modelscope.msdatasets import MsDataset`: 导入ModelScope的数据集模块。</p> 
<p style="margin-left:0;">- `ds = MsDataset.load('AI-ModelScope/lowres_anime', subset_name='default', split='train', cache_dir="/mnt/workspace/kolors/data")`: 加载名为`lowres_anime`的数据集，并设置缓存目录。</p> 
<p style="margin-left:0;">### 3. 数据预处理</p> 
<p style="margin-left:0;">- `import json, os`: 导入`json`和`os`模块。</p> 
<p style="margin-left:0;">- `from data_juicer.utils.mm_utils import SpecialTokens`: 导入`SpecialTokens`类。</p> 
<p style="margin-left:0;">- `from tqdm import tqdm`: 导入`tqdm`模块以显示进度条。</p> 
<p style="margin-left:0;">- `os.makedirs("./data/lora_dataset/train", exist_ok=True)`: 创建目录`./data/lora_dataset/train`，如果已存在则不报错。</p> 
<p style="margin-left:0;">- `os.makedirs("./data/data-juicer/input", exist_ok=True)`: 创建目录`./data/data-juicer/input`。</p> 
<p style="margin-left:0;">- `with open("./data/data-juicer/input/metadata.jsonl", "w") as f:`: 打开`metadata.jsonl`文件以写入数据。</p> 
<p style="margin-left:0;">- `for data_id, data in enumerate(tqdm(ds)):`: 遍历数据集中的每一项数据。</p> 
<p style="margin-left:0;">- `image = data["image"].convert("RGB")`: 将图片转换为RGB模式。</p> 
<p style="margin-left:0;">- `image.save(f"/mnt/workspace/kolors/data/lora_dataset/train/{data_id}.jpg")`: 保存图片到指定路径。</p> 
<p style="margin-left:0;">- `metadata = {"text": "二次元", "image": [f"/mnt/workspace/kolors/data/lora_dataset/train/{data_id}.jpg"]}`: 创建元数据字典。</p> 
<p style="margin-left:0;">- `f.write(json.dumps(metadata))`: 写入元数据到文件。</p> 
<p style="margin-left:0;">- `f.write("\n")`: 每个元数据项后添加换行符。</p> 
<p style="margin-left:0;">### 4. 数据筛选配置</p> 
<p style="margin-left:0;">- 定义`data_juicer_config`字符串，包含了数据处理的配置信息。</p> 
<p style="margin-left:0;">- `with open("data/data-juicer/data_juicer_config.yaml", "w") as file:`: 写入配置文件。</p> 
<p style="margin-left:0;">- `file.write(data_juicer_config.strip())`: 将配置信息写入文件。</p> 
<p style="margin-left:0;">- `!dj-process --config data/data-juicer/data_juicer_config.yaml`: 调用`data-juicer`工具对数据进行处理。</p> 
<p style="margin-left:0;">### 5. 数据分析与准备</p> 
<p style="margin-left:0;">- `import pandas as pd`: 导入`pandas`模块。</p> 
<p style="margin-left:0;">- `os.makedirs("./data/data-juicer/output/images", exist_ok=True)`: 创建输出目录。</p> 
<p style="margin-left:0;">- 读取处理后的数据，并将元数据存储为列表。</p> 
<p style="margin-left:0;">- `df = pd.DataFrame({"text": texts, "file_name": file_names})`: 创建DataFrame。</p> 
<p style="margin-left:0;">- `df.to_csv("./data/data-juicer/output/result.csv", index=False)`: 将DataFrame保存为CSV文件。</p> 
<p style="margin-left:0;">- `df`: 显示DataFrame的内容。</p> 
<p style="margin-left:0;">### 6. 计算图像与文本相似度</p> 
<p style="margin-left:0;">- `from transformers import CLIPProcessor, CLIPModel`: 导入`CLIP`模型和处理器。</p> 
<p style="margin-left:0;">- `model = CLIPModel.from_pretrained("openai/clip-vit-base-patch32")`: 加载预训练的CLIP模型。</p> 
<p style="margin-left:0;">- `processor = CLIPProcessor.from_pretrained("openai/clip-vit-base-patch32")`: 加载预训练的CLIP处理器。</p> 
<p style="margin-left:0;">- `images = [Image.open(img_path) for img_path in df["file_name"]]`: 读取图像。</p> 
<p style="margin-left:0;">- `inputs = processor(text=df["text"].tolist(), images=images, return_tensors="pt", padding=True)`: 处理文本和图像。</p> 
<p style="margin-left:0;">- `outputs = model(**inputs)`: 使用CLIP模型进行推理。</p> 
<p style="margin-left:0;">- `logits_per_image = outputs.logits_per_image`: 获取图像与文本相似度得分。</p> 
<p style="margin-left:0;">- `probs = logits_per_image.softmax(dim=1)`: 计算概率分布。</p> 
<p style="margin-left:0;">### 7. 自定义数据集类</p> 
<p style="margin-left:0;">- `class CustomDataset(Dataset):`: 定义一个自定义的数据集类。</p> 
<p style="margin-left:0;">- 实现`__init__`, `__len__`, `__getitem__`方法。</p> 
<p style="margin-left:0;">- `dataset = CustomDataset(df, processor)`: 创建数据集实例。</p> 
<p style="margin-left:0;">- `dataloader = DataLoader(dataset, batch_size=8)`: 创建数据加载器。</p> 
<p style="margin-left:0;">- `for batch in dataloader:`: 遍历数据加载器中的批次。</p> 
<p style="margin-left:0;">- `outputs = model(**batch)`: 对每个批次进行模型推理。</p> 
<p style="margin-left:0;">- `print(probs)`: 输出每个批次的概率分布。</p> 
<p style="margin-left:0;">### 8. 图像生成</p> 
<p style="margin-left:0;">- `import torch`: 导入`torch`模块。</p> 
<p style="margin-left:0;">- `from diffusers import StableDiffusionPipeline`: 导入`StableDiffusionPipeline`。</p> 
<p style="margin-left:0;">- 设置随机种子以确保结果可复现。</p> 
<p style="margin-left:0;">- `pipe = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v-1-4", torch_dtype=torch.float16)`: 加载预训练的图像生成模型。</p> 
<p style="margin-left:0;">- `pipe = pipe.to("cuda")`: 将模型移动到GPU上。</p> 
<p style="margin-left:0;">- 使用不同的提示和配置生成图像，并保存。</p> 
<p style="margin-left:0;">### 9. 图像展示</p> 
<p style="margin-left:0;">- `images = [np.array(Image.open(f"{i}.jpg")) for i in range(1, 9)]`: 读取生成的图像。</p> 
<p style="margin-left:0;">- `image = np.concatenate([...])`: 将图像拼接起来。</p> 
<p style="margin-left:0;">- `image = Image.fromarray(image).resize((1024, 2048))`: 将图像转换为`PIL.Image`对象并调整大小。</p> 
<p style="margin-left:0;">- `image`: 展示最终的拼接图像。</p> 
<p style="margin-left:0;">以上是对这段代码的逐行分析。这段代码主要涉及了数据集的加载、处理、图像与文本相似度计算、自定义数据集、图像生成和展示等功能。</p> 
<p style="margin-left:0;"></p> 
<h6 style="margin-left:0px;">一些感悟~</h6> 
<p style="margin-left:0;">通过和Datawhale教程的对比，我们发现返回的结果存在出入，以上面的prompt输入，AI助手返回的结果比较粗略，如果想要更细致，可以选择调整一下提示词（更有指向性AI返回结果会更清晰，也不会省略、跳过一些代码，下面也有更好的办法！）</p> 
<p style="margin-left:0;">→②修改成：你是一个优秀的python代码开发工程师，我们现在有一个python文件，需要你来逐行分析，每一行代码都增加上中文语义备注（调整后的提示词AI的返回结果会更加细致）</p> 
<h5 style="margin-left:0px;"><strong>Ⅲ示例.</strong></h5> 
<p style="margin-left:0;"><img alt="" height="654" src="https://images2.imgbox.com/30/1b/lu2hm9rZ_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><img alt="" height="703" src="https://images2.imgbox.com/76/b6/dynQ4Omb_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><img alt="" height="533" src="https://images2.imgbox.com/0e/cd/5J0jzxhn_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><img alt="" height="675" src="https://images2.imgbox.com/6b/38/xnnlxjz2_o.png" width="1200"></p> 
<p style="margin-left:0;">想要更细致更好的方法↓（Datawhale教程里面代码分析应该是多次追问的结果，多多探索！）</p> 
<h5 style="margin-left:0px;">Ⅳ..向AI追问！</h5> 
<p style="margin-left:0;">在逐行分析后，继续向你想要更深入了解的部分追问</p> 
<p style="margin-left:0;">提示词：</p> 
<p style="margin-left:0;">我对其中<span style="background-color:#ffe928;"><strong><span style="color:#d83931;">{<!-- --></span></strong></span><span style="background-color:#ffe928;"><strong><span style="color:#d83931;">替换成你的问题</span></strong></span><span style="background-color:#ffe928;"><strong><span style="color:#d83931;">}</span></strong></span>还是不太理解，给我再详细介绍一下</p> 
<p style="margin-left:0;">示例：</p> 
<p><img alt="" height="301" src="https://images2.imgbox.com/41/37/WykSsS8B_o.png" width="741"></p> 
<p><img alt="" height="709" src="https://images2.imgbox.com/18/0c/Xql0Pk3i_o.png" width="1200"></p> 
<p style="margin-left:0;">觉得一开始AI逐行分析代码粗略仍然可以多多提问不断了解代码。</p> 
<h3 style="margin-left:0px;">三、实战演练——基于话剧的连环画制作</h3> 
<h4 style="margin-left:0px;">1、数据准备（用通义）</h4> 
<h5 style="margin-left:0px;">Eg.输入下面的提示词</h5> 
<p style="margin-left:0;">（下面是我实践的一个例子，每个part有空行应该是为了让AI便于思考输出，空行感觉不删除更好，在这一部分大家也可以自己想一些剧情进行尝试~）</p> 
<p style="margin-left:0;">你是一个文生图专家，我们现在要做一个实战项目，就是要编排一个文生图话剧 话剧由8张场景图片生成，你需要输出每张图片的生图提示词</p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;">具体的场景图片</p> 
<p style="margin-left:0;">1、女主是一个大学生，正在大学课堂上课</p> 
<p style="margin-left:0;">2、开始睡着了</p> 
<p style="margin-left:0;">3、进入梦乡，梦到自己回到了初中</p> 
<p style="margin-left:0;">4、初中同学在操场上追逐打闹</p> 
<p style="margin-left:0;">5、女主穿着初中校服迎风笑</p> 
<p style="margin-left:0;">6、女主和初中同学谈笑风生</p> 
<p style="margin-left:0;">7、下课了，梦醒了</p> 
<p style="margin-left:0;">8、女主看了一下手机微信列表早已灰暗的初中同学账号</p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;">生图提示词要求</p> 
<p style="margin-left:0;">1、风格为二次元，日系动漫</p> 
<p style="margin-left:0;">2、根据场景确定是使用全身还是上半身</p> 
<p style="margin-left:0;">3、人物描述</p> 
<p style="margin-left:0;">4、场景描述</p> 
<p style="margin-left:0;">5、做什么事情</p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;">例子：</p> 
<p style="margin-left:0;">二次元、日系动漫、一个黑色长发少女，坐在教室里，盯着黑板，手里拿着笔，深思，上半身，蓝白条纹T恤</p> 
<h5 style="margin-left:0px;">询问通义</h5> 
<p style="margin-left:0;"><img alt="" height="696" src="https://images2.imgbox.com/df/42/VuylJSEK_o.png" width="1200"></p> 
<h5 style="margin-left:0px;">最后整理出来的表格</h5> 
<p>结合通义返回的结果就是下面这样了，负向提示词是人为添加到表格上的（不是通义返回的，我暂时还没试通义能不能返回负向提示词结果）一般负向提示词大致就是像下面这么写，有什么还想规避的就往上添加</p> 
<div> 
 <table cellspacing="0"><tbody><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">编号</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0784in;"> <p style="margin-left:0;">场景</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2381in;"> <p style="margin-left:0;">正向提示词</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.1777in;"> <p style="margin-left:0;">负向提示词</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片1</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">女主是一个大学生，正在大学课堂上课</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">一个黑色长发少女，上半身特写</span></li><li><span style="background-color:#FFFFFF;">身穿浅蓝白色T恤</span></li><li><span style="background-color:#FFFFFF;">坐在宽敞明亮的大学教室里，周围是其他学生</span></li><li><span style="background-color:#FFFFFF;">认真听讲，手里拿着笔，偶尔记笔记</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲手臂，扭曲手指，多余手臂，多余手指</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片2</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">开始睡着了</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">黑色长发少女，上半身特写</span></li><li><span style="background-color:#FFFFFF;">身穿浅蓝白色T恤</span></li><li><span style="background-color:#FFFFFF;">在大学教室里，头轻轻垂向一侧，表情放松</span></li><li><span style="background-color:#FFFFFF;">手里的笔滑落，桌面放着打开的笔记本</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲面部，扭曲手臂，扭曲手指，多余手臂，多余手指</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片3</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">进入梦乡，梦到自己回到了初中</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">黑色短发小女孩，上半身特写</span></li><li><span style="background-color:#FFFFFF;">身穿初中校服（蓝色领带配白色衬衫）</span></li><li><span style="background-color:#FFFFFF;">站在充满阳光的初中教室门口</span></li><li><span style="background-color:#FFFFFF;">微笑着，似乎对周围的环境感到既熟悉又惊讶</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲的脑海框，模糊手臂，模糊色块，曲面部，扭曲手臂，扭曲手指，多余手臂，扭曲身体，不规则身体</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片4</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">初中同学在操场上追逐打闹</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">操场上的多个角色，全身特写</span></li><li><span style="background-color:#FFFFFF;">包括黑色短发小女孩在内的初中生们</span></li><li><span style="background-color:#FFFFFF;">穿着各式各样的运动服装</span></li><li><span style="background-color:#FFFFFF;">在宽阔的操场上嬉戏打闹，背景是蓝天白云</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲的手指，多余的手指，扭曲身体，不规则身体</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片5</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">女主穿着初中校服迎风笑</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">黑色短发小女孩，上半身特写</span></li><li><span style="background-color:#FFFFFF;">穿着蓝色领带配白色衬衫的初中校服</span></li><li><span style="background-color:#FFFFFF;">站在操场边，头发随风飘扬</span></li><li><span style="background-color:#FFFFFF;">面带微笑，眼神中透露出对美好时光的怀念</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲身体，扭曲面部，扭曲模糊画面，扭曲身体，不规则身体</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片6</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">女主和初中同学谈笑风生</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">黑色短发小女孩和其他几个同学，上半身特写</span></li><li><span style="background-color:#FFFFFF;">穿着蓝色领带配白色衬衫的初中校服</span></li><li><span style="background-color:#FFFFFF;">围坐在教室的桌旁</span></li><li><span style="background-color:#FFFFFF;">大家聚在一起交谈，气氛轻松愉快</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲手指，多余手指，扭曲面部，扭曲身体，不规则身体</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片7</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">下课了，梦醒了</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">黑色长发少女，上半身特写</span></li><li><span style="background-color:#FFFFFF;">身穿浅蓝白色T恤</span></li><li><span style="background-color:#FFFFFF;">坐在大学教室里，刚刚醒来</span></li><li><span style="background-color:#FFFFFF;">表情略显迷茫，环顾四周确认自己回到了现实</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲手指，多余手指，扭曲面部，扭曲身体，不规则身体</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.6673in;"> <p style="margin-left:0;">图片8</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.0006in;"> <p style="margin-left:0;">女主看了一下手机微信列表早已灰暗的初中同学账号</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:1.3159in;"> <p style="margin-left:0;"></p> 
     <ul><li><span style="background-color:#FFFFFF;">二次元、日系动漫</span></li><li><span style="background-color:#FFFFFF;">黑色长发少女，上半身特写</span></li><li><span style="background-color:#FFFFFF;">身穿浅蓝白色T恤</span></li><li><span style="background-color:#FFFFFF;">坐在大学教室里，低头看着手机</span></li><li><span style="background-color:#FFFFFF;">表情有些失落，手指轻触屏幕上的初中同学微信列表</span></li></ul></td><td style="border-color:#a3a3a3;vertical-align:top;width:1.2145in;"> <p style="margin-left:0;">丑陋、变形、嘈杂、模糊、低对比度，扭曲嘴巴，扭曲面部，扭曲手指，多余手指，扭曲手机屏幕，异常手机页面</p> </td></tr></tbody></table> 
</div> 
<p style="margin-left:0;">按照这样再跑一遍task1流程即可！</p> 
<p style="margin-left:0;">展示图（我描述出来人物还是有一些不一致，我会再继续尝试的！下面是输出的一张我比较喜欢的画风，明天试试调整成这样的画风，现在不小心出现CUDA内存不够的错误了qaq）</p> 
<p style="margin-left:0px;text-align:center;"><img alt="" src="https://images2.imgbox.com/20/cf/I5Fmp4WC_o.jpg"></p> 
<h2>Part4：更多的选择一一浅尝scepter webui</h2> 
<p>这是教程里面鼓励我们再多尝试的一个part~</p> 
<h4>   1、浅尝功能</h4> 
<p>魔搭体验网址：https://www.modelscope.cn/studios/iic/scepter_studio</p> 
<h4>   2、核心组件</h4> 
<ul><li> <p><u><u><a href="https://github.com/modelscope/scepter#tutorials" title="生成训练和推理框架">生成训练和推理框架</a></u></u></p> </li><li> <p><u><u><a href="https://github.com/modelscope/scepter#currently-supported-approaches" title="轻松实施流行方法">轻松实施流行方法</a></u></u></p> </li><li> <p><u><u><a href="https://github.com/modelscope/scepter#launch" title="交互式用户界面：SCEPTER Studio">交互式用户界面：SCEPTER Studio</a></u></u></p> </li></ul> 
<h4>   3、私有部署（<strong>挑战型</strong>）</h4> 
<p><u><strong><a href="https://modelscope.cn/" rel="nofollow" title="魔搭社区">魔搭社区</a></strong></u>提供的体验地址里面<strong>缺失了微调模型</strong>的功能，如果大家希望能使用secpter完整的功能，我们可以将其私有部署到我们自己的服务器。</p> 
<p><strong>github地址：</strong>https://github.com/modelscope/scepter</p> 
<p><strong>可以通过官方readme文件中的教程进行操作，该模块对基础有一定的要求，适合</strong><strong>学有余力</strong><strong>的同学</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac8069e9bc61660f8051a1b0db78974d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">八股面试大总结②——Linux系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/205b9da086900dfc9399ce426a504fc5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">贪心算法3</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>