<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pgsql 常用命令 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/add820804547598cd8536cce8f475868/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="pgsql 常用命令">
  <meta property="og:description" content="以下是一些常用的 PostgreSQL (pgsql) 命令，用于在 PostgreSQL 数据库中执行各种操作：
1. 连接到 PostgreSQL 数据库 psql -U username -d database_name 这将连接到指定的数据库。您需要替换 username 为您的 PostgreSQL 用户名，database_name 为您要连接的数据库名称。
2. 退出 PostgreSQL \q 这个命令用于退出 PostgreSQL 的命令行界面。
3. 列出所有数据库 \l 这个命令用于列出 PostgreSQL 中所有的数据库。
4. 连接到指定数据库 \c database_name 这个命令用于切换到指定名称的数据库。
5. 列出所有表 \dt 这个命令用于列出当前数据库中的所有表。
6. 显示表结构 \d table_name 这个命令用于显示指定表的结构，包括列名、数据类型等。
7. 显示视图 \dv 这个命令用于显示当前数据库中的所有视图。
8. 执行 SQL 查询 SELECT column1, column2 FROM table_name WHERE condition; 这是一个简单的 SQL 查询语句示例，从表中选择特定的列，并使用条件过滤结果。
9. 创建数据库 CREATE DATABASE database_name; 这个命令用于创建一个新的数据库。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-17T23:39:39+08:00">
    <meta property="article:modified_time" content="2024-05-17T23:39:39+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pgsql 常用命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>以下是一些常用的 PostgreSQL (pgsql) 命令，用于在 PostgreSQL 数据库中执行各种操作：</p> 
<h4><a id="1__PostgreSQL__2"></a>1. 连接到 PostgreSQL 数据库</h4> 
<pre><code class="prism language-bash">psql <span class="token parameter variable">-U</span> username <span class="token parameter variable">-d</span> database_name
</code></pre> 
<p>这将连接到指定的数据库。您需要替换 <code>username</code> 为您的 PostgreSQL 用户名，<code>database_name</code> 为您要连接的数据库名称。</p> 
<h4><a id="2__PostgreSQL_8"></a>2. 退出 PostgreSQL</h4> 
<pre><code class="prism language-sql">\q
</code></pre> 
<p>这个命令用于退出 PostgreSQL 的命令行界面。</p> 
<h4><a id="3__14"></a>3. 列出所有数据库</h4> 
<pre><code class="prism language-sql">\l
</code></pre> 
<p>这个命令用于列出 PostgreSQL 中所有的数据库。</p> 
<h4><a id="4__20"></a>4. 连接到指定数据库</h4> 
<pre><code class="prism language-sql">\c database_name
</code></pre> 
<p>这个命令用于切换到指定名称的数据库。</p> 
<h4><a id="5__26"></a>5. 列出所有表</h4> 
<pre><code class="prism language-sql">\dt
</code></pre> 
<p>这个命令用于列出当前数据库中的所有表。</p> 
<h4><a id="6__32"></a>6. 显示表结构</h4> 
<pre><code class="prism language-sql">\d table_name
</code></pre> 
<p>这个命令用于显示指定表的结构，包括列名、数据类型等。</p> 
<h4><a id="7__38"></a>7. 显示视图</h4> 
<pre><code class="prism language-sql">\dv
</code></pre> 
<p>这个命令用于显示当前数据库中的所有视图。</p> 
<h4><a id="8__SQL__44"></a>8. 执行 SQL 查询</h4> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2 <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>
</code></pre> 
<p>这是一个简单的 SQL 查询语句示例，从表中选择特定的列，并使用条件过滤结果。</p> 
<h4><a id="9__50"></a>9. 创建数据库</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> database_name<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建一个新的数据库。</p> 
<h4><a id="10__56"></a>10. 创建表</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">(</span>
    column1 datatype<span class="token punctuation">,</span>
    column2 datatype<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建一个新的表，您需要指定表名、列名和对应的数据类型。</p> 
<h4><a id="11__66"></a>11. 插入数据</h4> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于向表中插入新的行。</p> 
<h4><a id="12__72"></a>12. 更新数据</h4> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> column1 <span class="token operator">=</span> value1<span class="token punctuation">,</span> column2 <span class="token operator">=</span> value2 <span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于更新表中的现有行。</p> 
<h4><a id="13__78"></a>13. 删除数据</h4> 
<pre><code class="prism language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于从表中删除符合条件的行。</p> 
<h4><a id="14__84"></a>14. 创建索引</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建一个新的索引，以加快查询操作。</p> 
<h4><a id="15__90"></a>15. 查看函数列表</h4> 
<pre><code class="prism language-sql">\df
</code></pre> 
<p>这个命令用于查看当前数据库中的所有函数。</p> 
<h4><a id="16__96"></a>16. 查看特定函数的定义</h4> 
<pre><code class="prism language-sql">\df<span class="token operator">+</span> function_name
</code></pre> 
<p>这个命令用于查看特定函数的详细定义和信息。</p> 
<h4><a id="17__102"></a>17. 备份数据库</h4> 
<pre><code class="prism language-bash">pg_dump <span class="token parameter variable">-U</span> username <span class="token parameter variable">-d</span> database_name <span class="token operator">&gt;</span> backup_file.sql
</code></pre> 
<p>这个命令用于将指定数据库的备份输出到一个 SQL 文件中。</p> 
<h4><a id="18__108"></a>18. 恢复数据库</h4> 
<pre><code class="prism language-bash">psql <span class="token parameter variable">-U</span> username <span class="token parameter variable">-d</span> database_name <span class="token operator">&lt;</span> backup_file.sql
</code></pre> 
<p>这个命令用于从一个 SQL 文件中恢复数据库。</p> 
<h4><a id="19__114"></a>19. 查看服务器信息</h4> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于查看 PostgreSQL 服务器的版本信息。</p> 
<p>这些是一些常用的 PostgreSQL 命令，用于在 PostgreSQL 数据库中执行各种操作，包括连接数据库、管理表、执行 SQL 查询、创建索引、备份恢复等等。</p> 
<h3><a id="_123"></a>复杂命令</h3> 
<p>当您处理更复杂的 PostgreSQL 数据库操作时，可能需要使用一些更高级的命令和功能。以下是一些复杂操作的 PostgreSQL 命令和功能：</p> 
<h4><a id="1__127"></a>1. 使用事务</h4> 
<pre><code class="prism language-sql"><span class="token keyword">BEGIN</span><span class="token punctuation">;</span>
<span class="token comment">-- 执行一系列 SQL 命令</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于在一个事务中执行多个 SQL 命令，并在所有命令执行成功后将更改保存到数据库中。</p> 
<h4><a id="2__135"></a>2. 锁定表</h4> 
<pre><code class="prism language-sql"><span class="token keyword">LOCK</span> <span class="token keyword">TABLE</span> table_name <span class="token operator">IN</span> lock_mode<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于锁定表，防止其他会话对其进行修改。</p> 
<h4><a id="3__Triggers_141"></a>3. 触发器 (Triggers)</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> trigger_name
BEFORE <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> table_name
<span class="token keyword">FOR EACH ROW</span>
<span class="token keyword">EXECUTE</span> <span class="token keyword">FUNCTION</span> function_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建触发器，可以在插入、更新或删除表中数据时触发特定的操作。</p> 
<h4><a id="4__Replication_150"></a>4. 复制 (Replication)</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> PUBLICATION publication_name <span class="token keyword">FOR</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建发布，以便在 PostgreSQL 中设置数据复制。</p> 
<h4><a id="5__Foreign_Tables_156"></a>5. 外部表 (Foreign Tables)</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">TABLE</span> foreign_table_name <span class="token punctuation">(</span>
    column1 datatype<span class="token punctuation">,</span>
    column2 datatype<span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span> SERVER server_name OPTIONS <span class="token punctuation">(</span>option1 <span class="token string">'value1'</span><span class="token punctuation">,</span> option2 <span class="token string">'value2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建外部表，可以让 PostgreSQL 访问和查询外部数据源，如其他数据库或文件。</p> 
<h4><a id="6__Window_Functions_166"></a>6. 窗口函数 (Window Functions)</h4> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span> <span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> column1 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column2<span class="token punctuation">)</span> <span class="token keyword">AS</span> row_num
<span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于在查询结果集中执行基于窗口的计算，如排名、累积和、分区等。</p> 
<h4><a id="7__FullText_Search_173"></a>7. 全文搜索 (Full-Text Search)</h4> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> to_tsvector<span class="token punctuation">(</span><span class="token string">'english'</span><span class="token punctuation">,</span> column1<span class="token punctuation">)</span> @@ to_tsquery<span class="token punctuation">(</span><span class="token string">'search_query'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于执行全文搜索，允许您在文本列中进行高级搜索。</p> 
<h4><a id="8__Recursive_Queries_181"></a>8. 递归查询 (Recursive Queries)</h4> 
<pre><code class="prism language-sql"><span class="token keyword">WITH</span> RECURSIVE cte <span class="token keyword">AS</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> parent_id<span class="token punctuation">,</span> name
    <span class="token keyword">FROM</span> categories
    <span class="token keyword">WHERE</span> parent_id <span class="token operator">IS</span> <span class="token boolean">NULL</span>
    <span class="token keyword">UNION</span>
    <span class="token keyword">SELECT</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>parent_id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>name
    <span class="token keyword">FROM</span> categories c
    <span class="token keyword">JOIN</span> cte <span class="token keyword">ON</span> cte<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>parent_id
<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> cte<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于执行递归查询，允许您在层次结构数据中进行查询，如组织架构、目录结构等。</p> 
<h4><a id="9__196"></a>9. 数据类型转换</h4> 
<pre><code class="prism language-sql">CAST<span class="token punctuation">(</span>column_name <span class="token keyword">AS</span> new_data_type<span class="token punctuation">)</span>
</code></pre> 
<p>这个命令用于将列的数据类型转换为新的数据类型。</p> 
<h4><a id="10__202"></a>10. 多行插入</h4> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span>value1_1<span class="token punctuation">,</span> value1_2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>value2_1<span class="token punctuation">,</span> value2_2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>这个命令用于一次性插入多行数据到表中。</p> 
<h4><a id="11__212"></a>11. 配置参数</h4> 
<pre><code class="prism language-sql"><span class="token keyword">SHOW</span> parameter_name<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于查看当前 PostgreSQL 服务器的配置参数。</p> 
<h4><a id="12__218"></a>12. 安全性和权限</h4> 
<pre><code class="prism language-sql"><span class="token keyword">GRANT</span> permission <span class="token keyword">ON</span> table_name <span class="token keyword">TO</span> user_name<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于授予用户对表的特定权限，如 SELECT、INSERT、UPDATE 等。</p> 
<h4><a id="13__224"></a>13. 存储过程和函数</h4> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> function_name<span class="token punctuation">(</span>parameter1 datatype<span class="token punctuation">,</span> parameter2 datatype<span class="token punctuation">)</span>
<span class="token keyword">RETURNS</span> return_datatype <span class="token keyword">AS</span> $$
<span class="token keyword">BEGIN</span>
    <span class="token comment">-- 函数体</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>
$$ <span class="token keyword">LANGUAGE</span> plpgsql<span class="token punctuation">;</span>
</code></pre> 
<p>这个命令用于创建存储过程和函数，允许您在数据库中定义自定义的数据处理逻辑。</p> 
<p>这些是一些更复杂的 PostgreSQL 命令和功能，可用于处理高级的数据库操作、数据转换、数据分析和管理。在进行这些操作时，请务必仔细阅读 PostgreSQL 官方文档，并确保在测试环境中进行充分测试。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e5b89b88bc038257cff73bd7bdc45f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;】初识类和对象</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/30043689f10aa90fad8737d232f20a63/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Flutter 中的 DropdownButton 小部件：全面指南</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>