<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>为什么说Python 是胶水语言? - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2142607c90e551b9804588538b8ffc36/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="为什么说Python 是胶水语言?">
  <meta property="og:description" content="​ &#34;Python 是胶水语言&#34;这一说法是指它很擅长将不同的程序或代码库连接在一起，能够让来自不同编程语言或框架的组件无缝协作。Python 具有丰富的库和简单的语法，使得它可以轻松调用其他语言编写的程序或使用不同技术栈的模块。
​ 以下是几个具体的实例，展示了Python 作为胶水语言的特性：
实例 1：调用 C/C&#43;&#43; 代码 ​ 使用ctypes 库可以方便地调用 C 函数。
假设有一个简单的 C 函数：
// example.c #include &lt;stdio.h&gt; int add(int a, int b) { return a &#43; b; } void say_hello() { printf(&#34;Hello, World!\n&#34;); } 采用编译它为共享库：
gcc -shared -o libexample.so -fPIC example.c 然后用 Python 调用这个库：
# example.py import ctypes # 加载共享库 lib = ctypes.CDLL(&#39;./libexample.so&#39;) # 定义函数原型 lib.add.argtypes = (ctypes.c_int, ctypes.c_int) # 表示该函数接收两个整数参数 lib.add.restype = ctypes.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-15T18:43:09+08:00">
    <meta property="article:modified_time" content="2024-06-15T18:43:09+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">为什么说Python 是胶水语言?</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>​ "Python 是胶水语言"这一说法是指它很擅长将不同的程序或代码库连接在一起，能够让来自不同编程语言或框架的组件无缝协作。Python 具有丰富的库和简单的语法，使得它可以轻松调用其他语言编写的程序或使用不同技术栈的模块。</p> 
<p>​ 以下是几个具体的实例，展示了Python 作为胶水语言的特性：</p> 
<h2><a id="_1_CC__3"></a>实例 1：调用 C/C++ 代码</h2> 
<p>​ 使用<code>ctypes</code> 库可以方便地调用 C 函数。<br> 假设有一个简单的 C 函数：</p> 
<pre><code class="prism language-c"><span class="token comment">// example.c</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello, World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>采用编译它为共享库：</p> 
<pre><code class="prism language-sh">gcc <span class="token parameter variable">-shared</span> <span class="token parameter variable">-o</span> libexample.so <span class="token parameter variable">-fPIC</span> example.c
</code></pre> 
<p>然后用 Python 调用这个库：</p> 
<pre><code class="prism language-python"><span class="token comment"># example.py</span>
<span class="token keyword">import</span> ctypes

<span class="token comment"># 加载共享库</span>
lib <span class="token operator">=</span> ctypes<span class="token punctuation">.</span>CDLL<span class="token punctuation">(</span><span class="token string">'./libexample.so'</span><span class="token punctuation">)</span>

<span class="token comment"># 定义函数原型</span>
lib<span class="token punctuation">.</span>add<span class="token punctuation">.</span>argtypes <span class="token operator">=</span> <span class="token punctuation">(</span>ctypes<span class="token punctuation">.</span>c_int<span class="token punctuation">,</span> ctypes<span class="token punctuation">.</span>c_int<span class="token punctuation">)</span> <span class="token comment"># 表示该函数接收两个整数参数</span>
lib<span class="token punctuation">.</span>add<span class="token punctuation">.</span>restype <span class="token operator">=</span> ctypes<span class="token punctuation">.</span>c_int <span class="token comment"># 设置 `add` 函数的返回类型</span>

<span class="token comment"># 调用 C 函数</span>
result <span class="token operator">=</span> lib<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'Result of add(3, 5): </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>result<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>

<span class="token comment"># 调用无参数 C 函数</span>
lib<span class="token punctuation">.</span>say_hello<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行这个 Python 脚本，你会看到：</p> 
<p><img src="https://images2.imgbox.com/f0/b3/6VyaNU05_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_2_Web__50"></a>实例 2：集成数据库和 Web 服务</h2> 
<p>​ Python 强大的库生态，使得它在集成不同技术栈方面非常有优势。例如，连接一个数据库并通过 Flask 框架提供一个简单的 Web API。</p> 
<pre><code class="prism language-python"><span class="token comment"># Install required packages:</span>
<span class="token comment"># pip install flask sqlalchemy</span>

<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> jsonify<span class="token punctuation">,</span> request
<span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> create_engine<span class="token punctuation">,</span> Column<span class="token punctuation">,</span> Integer<span class="token punctuation">,</span> String<span class="token punctuation">,</span> Sequence
<span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>declarative <span class="token keyword">import</span> declarative_base
<span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> sessionmaker

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
Base <span class="token operator">=</span> declarative_base<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建数据库表 User(id, name, age)</span>
<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">:</span>
    __tablename__ <span class="token operator">=</span> <span class="token string">'users'</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">,</span> Sequence<span class="token punctuation">(</span><span class="token string">'user_id_seq'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>

<span class="token comment"># 使用的是 SQLite 文件数据库,数据存储到本地文件中，程序结束后数据也会被保留</span>

engine <span class="token operator">=</span> create_engine<span class="token punctuation">(</span><span class="token string">'sqlite:///mydatabase.db'</span><span class="token punctuation">)</span>  <span class="token comment"># 使用文件存储的 SQLite 数据库</span>
Base<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span>engine<span class="token punctuation">)</span>  <span class="token comment"># 创建所有的表</span>

Session <span class="token operator">=</span> sessionmaker<span class="token punctuation">(</span>bind<span class="token operator">=</span>engine<span class="token punctuation">)</span>  <span class="token comment"># 这个Session对象实际上是一个数据库会话或连接，它用于执行数据库操作（如查询、插入、更新、删除等）。</span>
session <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 添加一些数据</span>
new_user <span class="token operator">=</span> User<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Bobo'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">52</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>new_user<span class="token punctuation">)</span>
session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    users <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span>age<span class="token punctuation">}</span> <span class="token keyword">for</span> user <span class="token keyword">in</span> users<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">add_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> request<span class="token punctuation">.</span>json
    new_user <span class="token operator">=</span> User<span class="token punctuation">(</span>name<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> age<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>new_user<span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span> new_user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>​ 这个脚本使用 <code>SQLAlchemy</code>连接 SQLite 数据库，并且通过 Flask 框架提供了一个 Web 接口。运行这个脚本并访问 <code>http://127.0.0.1:5000/users</code> 获取表中记录信息。</p> 
<p>​</p> 
<p>​ 使用 <code>http://127.0.0.1:5000/user</code>，访问在本程序中会出现如下错误，出现如下 <code>Method Not Allowed</code>。 错误的原因是因为 HTTP 方法错误。访问 URL <code>http://127.0.0.1:5000/user</code> 时，浏览器默认使用 GET 方法请求，而代码中，<code>/user</code> 端点只允许 POST 方法。<br> <img src="https://images2.imgbox.com/25/87/omkTSve6_o.png" alt="在这里插入图片描述"></p> 
<p>我们可以使用<code>cURL</code>来发送POST请求：</p> 
<pre><code class="prism language-sh">结合之前的 Flask 示例，我们可以使用 cURL 向我们的 Flask 应用发送一个 POST 请求来添加用户：

在 Git Bash
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token parameter variable">-H</span> <span class="token string">"Content-Type: application/json"</span> <span class="token parameter variable">-d</span> <span class="token string">'{"name": "Bo", "age": 30}'</span> http://127.0.0.1:5000/user

在 Windows 命令提示符（CMD）或 PowerShell
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST <span class="token parameter variable">-H</span> <span class="token string">"Content-Type: application/json"</span> <span class="token parameter variable">-d</span> <span class="token string">"{<!-- --><span class="token entity" title='\"'>\"</span>name<span class="token entity" title='\"'>\"</span>: <span class="token entity" title='\"'>\"</span>Bobo<span class="token entity" title='\"'>\"</span>, <span class="token entity" title='\"'>\"</span>age<span class="token entity" title='\"'>\"</span>: 30}"</span> http://127.0.0.1:5000/user

注意：
<span class="token number">1</span>. 双引号问题：在 Windows CMD 中，双引号会被用来包裹整个字符串，内部的双引号需要进行转义。 
<span class="token number">2</span>. 单引号和双引号的区别：在 Unix 风格的 Shell（如 Git Bash）中，你可以使用单引号包裹整个字符串，JSON 字符串内部的引号不需要转义。

建议用Git Bash来测试
</code></pre> 
<p>​ 第二个实例展示了<strong>如何利用Python作为胶水语言，将不同的技术和组件集成在一起进行协作</strong>。具体来说，它通过几个方面体现了Python的胶水作用：</p> 
<h5><a id="1__130"></a>1. 数据库连接与操作</h5> 
<p>​ 在该实例中，使用了<code>SQLAlchemy</code>库与SQLite数据库进行连接和操作。<code>SQLAlchemy</code>是Python中一个非常强大的ORM（对象关系映射）框架，它允许开发者使用面向对象的方式来操作数据库。</p> 
<p>代码片段：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> jsonify<span class="token punctuation">,</span> request
<span class="token keyword">from</span> sqlalchemy <span class="token keyword">import</span> create_engine<span class="token punctuation">,</span> Column<span class="token punctuation">,</span> Integer<span class="token punctuation">,</span> String<span class="token punctuation">,</span> Sequence
<span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>ext<span class="token punctuation">.</span>declarative <span class="token keyword">import</span> declarative_base
<span class="token keyword">from</span> sqlalchemy<span class="token punctuation">.</span>orm <span class="token keyword">import</span> sessionmaker

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
Base <span class="token operator">=</span> declarative_base<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建数据库表 User(id, name, age)</span>
<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">:</span>
    __tablename__ <span class="token operator">=</span> <span class="token string">'users'</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">,</span> Sequence<span class="token punctuation">(</span><span class="token string">'user_id_seq'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> Column<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    age <span class="token operator">=</span> Column<span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>

<span class="token comment"># 使用的是 SQLite 文件数据库,数据存储到本地文件中，程序结束后数据也会被保留</span>

engine <span class="token operator">=</span> create_engine<span class="token punctuation">(</span><span class="token string">'sqlite:///mydatabase.db'</span><span class="token punctuation">)</span>  <span class="token comment"># 使用文件存储的 SQLite 数据库</span>
Base<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span>engine<span class="token punctuation">)</span>  <span class="token comment"># 创建所有的表</span>

Session <span class="token operator">=</span> sessionmaker<span class="token punctuation">(</span>bind<span class="token operator">=</span>engine<span class="token punctuation">)</span>  <span class="token comment"># 这个Session对象实际上是一个数据库会话或连接，它用于执行数据库操作（如查询、插入、更新、删除等）。</span>
session <span class="token operator">=</span> Session<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 添加一些数据</span>
new_user <span class="token operator">=</span> User<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Bobo'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">52</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>new_user<span class="token punctuation">)</span>
session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2_Web_165"></a>2. 提供Web服务</h5> 
<p>​ 实例中使用了<code>Flask</code>框架来提供Web服务。<code>Flask</code>是一个轻量级的Web应用框架，适合快速开发和部署Web应用。通过<code>Flask</code>框架，可以轻松定义API端点，并处理HTTP请求和响应。</p> 
<p>代码片段：</p> 
<pre><code class="prism language-python"><span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    users <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span>age<span class="token punctuation">}</span> <span class="token keyword">for</span> user <span class="token keyword">in</span> users<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">add_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data <span class="token operator">=</span> request<span class="token punctuation">.</span>json
    new_user <span class="token operator">=</span> User<span class="token punctuation">(</span>name<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> age<span class="token operator">=</span>data<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>new_user<span class="token punctuation">)</span>
    session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span> new_user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="3__187"></a>3. 数据格式转换</h5> 
<p>​ 通过<code>jsonify</code>函数，实例实现了将Python对象（如列表和字典）转换为JSON格式的HTTP响应。这体现了Python在数据格式转换和处理方面的灵活性。</p> 
<p>代码片段：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> flask <span class="token keyword">import</span> jsonify

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/users'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">get_users</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    users <span class="token operator">=</span> session<span class="token punctuation">.</span>query<span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> jsonify<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> user<span class="token punctuation">.</span>age<span class="token punctuation">}</span> <span class="token keyword">for</span> user <span class="token keyword">in</span> users<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="4__200"></a>4. 跨模块和库的协作</h5> 
<p>​ 该实例展示了如何将不同功能的库和模块结合在一起工作。比如，<code>Flask</code>负责处理Web请求和响应，而<code>SQLAlchemy</code>负责数据库操作。Python通过其简单的语法和强大的库生态，使得整合这些组件变得非常方便和高效。</p> 
<h5><a id="5__203"></a>5. 使用第三方库</h5> 
<p>​ <code>SQLAlchemy</code>和 Flask 都是Python的第三方库，<strong>Python的胶水功能在这里表现为它能够无缝地集成和使用这些库以实现复杂的功能</strong>，而不需要开发者编写大量的底层代码。</p> 
<p>​ 综上所述，这个实例在数据库连接与操作、提供Web服务、数据格式转换、不同模块和库的协作以及第三方库的使用方面，展示了Python作为胶水语言将各种不同技术和组件整合起来的强大能力。</p> 
<h2><a id="_3_208"></a>实例 3：控制和管理系统进程</h2> 
<p>​ 通过 Python 提供的 <code>subprocess</code> 库，你可以轻松地调用和管理系统进程。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> subprocess

<span class="token comment"># 运行一个简单的系统命令适用于Windows平台</span>
result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'cmd'</span><span class="token punctuation">,</span> <span class="token string">'/c'</span><span class="token punctuation">,</span> <span class="token string">'dir'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 使用cmd命令解释器，并通过 `/c` 参数执行 `dir` 命令。</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>

<span class="token comment"># 运行另一个 Python 脚本</span>
result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'python'</span><span class="token punctuation">,</span> <span class="token string">'other_script.py'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
</code></pre> 
<p>​ 第三个实例展示了如何使用 Python 的 <code>subprocess</code> 模块来调用和管理系统级别的命令和其他 Python 脚本。这些功能在以下几个方面展示了 Python 作为胶水语言的能力：</p> 
<h5><a id="1__225"></a>1. 调用系统命令</h5> 
<p>​ Python 可以通过 <code>subprocess</code> 模块轻松地调用和执行系统命令。这使得 Python 能够扮演脚本语言的角色，用于自动化各种系统管理任务，与操作系统直接交互。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> subprocess

<span class="token comment"># 运行一个简单的系统命令适用于Windows平台</span>
result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'cmd'</span><span class="token punctuation">,</span> <span class="token string">'/c'</span><span class="token punctuation">,</span> <span class="token string">'dir'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 使用cmd命令解释器，并通过 `/c` 参数执行 `dir` 命令。</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
</code></pre> 
<p>​ 在这个例子中，Python 调用系统自带的<code>dir</code>/c命令，列出当前目录下的文件并将结果输出。这展示了 <strong>Python 与操作系统之间的无缝集成。</strong></p> 
<h5><a id="2__Python__238"></a>2. 执行其他 Python 脚本</h5> 
<p>​ 除了系统命令，Python 还可以调用其他 Python 脚本，执行这些脚本并捕获其输出。这使得 Python 可以作为主调度器，将多个 Python 脚本整合到一个更大的应用程序或工作流程中。</p> 
<pre><code class="prism language-python"><span class="token comment"># 运行另一个 Python 脚本</span>
result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'python'</span><span class="token punctuation">,</span> <span class="token string">'other_script.py'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
</code></pre> 
<p>​ 这个例子展示了如何通过 Python 调用另一个 Python 脚本 <code>other_script.py</code> 并获取其输出。这在多脚本项目或分布式系统中尤其有用。</p> 
<h5><a id="3__249"></a>3. 捕获和处理外部命令的输出</h5> 
<p>​ 通过 <code>capture_output=True</code> 和 <code>text=True</code> 参数，Python 可以捕获并直接处理外部命令的输出，便于后续的逻辑处理或数据分析。这使得 Python 可以整合外部工具的功能，将它们的输出纳入到整个应用程序的工作流程中。</p> 
<pre><code class="prism language-python"><span class="token comment"># 运行一个简单的系统命令适用于Windows平台</span>
result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'cmd'</span><span class="token punctuation">,</span> <span class="token string">'/c'</span><span class="token punctuation">,</span> <span class="token string">'dir'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
</code></pre> 
<p>在这个例子中，Python 捕获了 <code>ls -l</code> 命令的输出，并将其作为字符串处理和打印。</p> 
<h5><a id="4__260"></a>4. 统一的错误处理机制</h5> 
<p>​ <code>subprocess</code> 模块还提供了统一的错误处理机制。当外部命令失败时，Python 可以捕获错误信息并进行相应的处理。这使得错误管理变得更加简单和一致。</p> 
<pre><code class="prism language-python"><span class="token keyword">try</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'some_non_existing_command'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> check<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> subprocess<span class="token punctuation">.</span>CalledProcessError <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Command failed with exit status </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>e<span class="token punctuation">.</span>returncode<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>output<span class="token punctuation">)</span>
</code></pre> 
<p>在这个例子中，如果外部命令失败，Python 可以捕获异常并处理错误信息，提供更好的错误管理能力。</p> 
<h5><a id="5__273"></a>5. 平台独立性</h5> 
<p>​ Python 的 <code>subprocess</code> 模块是跨平台的，这意味着同样的代码可以在不同操作系统上运行，而不需要做多余的修改。这极大地提高了代码的可移植性和维护性。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> subprocess

<span class="token comment"># 运行一个简单的系统命令 Linux下</span>
result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'ls'</span><span class="token punctuation">,</span> <span class="token string">'-l'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
</code></pre> 
<p>无论是在 Linux、macOS 还是 Windows，这段代码都能够工作（在 Windows 上需要将 <code>ls -l</code> 换成相应的命令，例如 <code>dir</code>）。</p> 
<h5><a id="6__286"></a>6. 管道和数据流</h5> 
<p><code>subprocess</code> 模块允许我们通过管道将不同进程的输入和输出连接起来，形成数据流。这使得 Python 可以将多个独立的程序组合起来，共同完成一个复杂任务。</p> 
<pre><code class="prism language-python"><span class="token comment"># Example: Using pipeline</span>
<span class="token keyword">import</span> subprocess
<span class="token comment"># 第一阶段：使用 echo 产生文本</span>
<span class="token comment"># 我们使用 cmd 来调用 echo，因为 echo 是 cmd 的内置命令</span>
cmd1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'cmd'</span><span class="token punctuation">,</span> <span class="token string">'/c'</span><span class="token punctuation">,</span> <span class="token string">'echo Hello, World! This is a test.'</span><span class="token punctuation">]</span>
<span class="token comment"># 第二阶段：使用 findstr 查找特定单词</span>
cmd2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'findstr'</span><span class="token punctuation">,</span> <span class="token string">'World'</span><span class="token punctuation">]</span>  <span class="token comment"># findstr 在 Windows 上用它来查找文本</span>
<span class="token comment"># 运行第一个命令</span>
result1 <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>cmd1<span class="token punctuation">,</span> stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment"># 将第一个命令的输出作为输入传递给第二个命令</span>
result2 <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>cmd2<span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token operator">=</span>result1<span class="token punctuation">.</span>stdout<span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment"># 打印第二个命令的输出</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Filtered output:"</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
</code></pre> 
<p>​ 在这个实例中，使用了 Windows 平台下的 <code>cmd</code> 和 <code>findstr</code> 命令，演示了如何通过管道将一个命令的输出传递给另一个命令。这种方式在 Windows 平台上非常实用，可以有效地实现数据流处理和命令的组合使用。</p> 
<p>​ 第三个实例通过调用系统命令、执行其他 Python 脚本、捕获和处理外部命令的输出、统一的错误处理机制、平台独立性以及管道和数据流的使用，充分展示了 Python 作为胶水语言的强大能力。它能够将不同的工具和组件无缝地集成到一个统一的工作流程中，提高开发效率和代码的可维护性。</p> 
<h2><a id="_309"></a>小结</h2> 
<p>​ 从调用底层的高效 C/C++ 代码，到无缝集成数据库操作及 web 服务，再到进行复杂的系统级别命令管理和数据流处理，Python 出色地充当了“胶水”的角色，把各自独立的发展语言、工具和技术整合到一个统一的环境中。</p> 
<ol><li> <p><strong>与多种语言和技术的无缝整合</strong>： 不管是与 C/C++ 库交互，还是与数据库或 Web 服务的整合，Python 都能够轻松完成。</p> <p><strong>丰富的库和框架支持</strong>： <code>SQLAlchemy</code>、<code>Flask</code>、<code>ctypes</code> 和 <code>subprocess</code> 等强大的三方库和框架让 Python 的集成功能变得平易近人。</p> </li><li> <p><strong>简洁优雅的语法</strong>： 简单而清晰的语法使开发者能够迅速编写和调试代码，提高开发效率。</p> </li><li> <p><strong>跨平台</strong>： Python 脚本在 Windows、macOS 和 Linux 环境下都能无缝运行，使其成为跨平台开发的理想选择。</p> </li></ol> 
<p>​ 因此，Python 作为“胶水语言”不仅是在技术上的能力，更在于它通过简洁优雅的编程方式，将不同的技术轻松连接在一起，使开发者得以在复杂的技术栈中游刃有余。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e5d926cffde71f9d00ce65e4cd67207a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springboot与flowable（8）：候选人</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/786f36d071a2669b18df1347a2ef48af/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BBS (CUTE): 1.0.2</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>