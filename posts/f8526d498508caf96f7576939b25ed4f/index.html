<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 高德地图 添加 天地图 卫星瓦片图片（解决高德地图部分地区放大后无卫星图片问题） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f8526d498508caf96f7576939b25ed4f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Android 高德地图 添加 天地图 卫星瓦片图片（解决高德地图部分地区放大后无卫星图片问题）">
  <meta property="og:description" content="废话不多说，直接商代吗
高德地图的加载就不多说了，这个直接去高德官网看就行了
高德官网：概述-Android 地图SDK | 高德地图API
下面我们就说如何添加天地图瓦片图层
天地图官网：天地图API
1.先去天地图注册成为开发者
2.创建应用，需要添加你的Android发布的密钥sha1,这里生成的key需要在添加图层时用
3.高德地图添加图层代码如下
final String url = &#34;http://t4.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&amp;REQUEST=GetTile&amp;VERSION&#34; &#43; &#34;=1.0.0&amp;LAYER=img&amp;STYLE=default&amp;TILEMATRIXSET=w&amp;FORMAT=tiles&amp;TILEMATRIX=%s&amp;&#34; &#43; &#34;TILEROW=%s&amp;TILECOL=%s&amp;tk=天地图申请key&#34;; final String url2 = &#34;http://t4.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&amp;REQUEST=GetTile&amp;VERSION&#34; &#43; &#34;=1.0.0&amp;LAYER=cia&amp;STYLE=default&amp;TILEMATRIXSET=w&amp;FORMAT=tiles&amp;TILEMATRIX=%s&amp;&#34; &#43; &#34;TILEROW=%s&amp;TILECOL=%s&amp;tk=天地图申请key&#34;; 加载图层的方法onlineTdtLoad()，直接在你地图初始化后执行就可以 mAMap是你实例化的高德地图
aMap.setMaxZoomLevel(Float.parseFloat(&#34;18.5&#34;)); //设置最大缩放等级
这里注意一下，在实例化高德地图时，需要设置一下最大的缩放等级，要不然放到最大，天地图也会出现没有卫星图的问题
private void onlineTdtLoad() { UrlTileProvider mUrlTileProvider = new UrlTileProvider(256, 256) { @Override public URL getTileUrl(int x, int y, int zoom) { try { String real_url = String.format(url, zoom, y, x); LatLng mLatLng = mAMap.getProjection().fromScreenLocation(new Point(x,y)); Log.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-14T12:10:25+08:00">
    <meta property="article:modified_time" content="2024-05-14T12:10:25+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 高德地图 添加 天地图 卫星瓦片图片（解决高德地图部分地区放大后无卫星图片问题）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>废话不多说，直接商代吗</p> 
<p>高德地图的加载就不多说了，这个直接去高德官网看就行了</p> 
<p>高德官网：<a href="https://lbs.amap.com/api/android-sdk/summary/" rel="nofollow" title="概述-Android 地图SDK | 高德地图API">概述-Android 地图SDK | 高德地图API</a></p> 
<p>下面我们就说如何添加天地图瓦片图层</p> 
<p>天地图官网：<a href="http://lbs.tianditu.gov.cn/" rel="nofollow" title="天地图API">天地图API</a></p> 
<p>1.先去天地图注册成为开发者</p> 
<p>2.创建应用，需要添加你的Android发布的密钥sha1,这里生成的key需要在添加图层时用</p> 
<p><img alt="" height="571" src="https://images2.imgbox.com/ff/ef/8P1kKAbg_o.png" width="1200"></p> 
<p>3.高德地图添加图层代码如下</p> 
<pre>final String url = "http://t4.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&amp;REQUEST=GetTile&amp;VERSION" +
        "=1.0.0&amp;LAYER=img&amp;STYLE=default&amp;TILEMATRIXSET=w&amp;FORMAT=tiles&amp;TILEMATRIX=%s&amp;" +
        "TILEROW=%s&amp;TILECOL=%s&amp;tk=天地图申请key";

final String url2 = "http://t4.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&amp;REQUEST=GetTile&amp;VERSION" +
        "=1.0.0&amp;LAYER=cia&amp;STYLE=default&amp;TILEMATRIXSET=w&amp;FORMAT=tiles&amp;TILEMATRIX=%s&amp;" +
        "TILEROW=%s&amp;TILECOL=%s&amp;tk=天地图申请key";</pre> 
<p> </p> 
<p>加载图层的方法onlineTdtLoad()，直接在你地图初始化后执行就可以 mAMap是你实例化的高德地图</p> 
<p><strong><span style="color:#fe2c24;">aMap.setMaxZoomLevel(Float.parseFloat("18.5")); //设置最大缩放等级</span></strong></p> 
<p><strong><span style="color:#fe2c24;">这里注意一下，在实例化高德地图时，需要设置一下最大的缩放等级，要不然放到最大，天地图也会出现没有卫星图的问题</span></strong></p> 
<pre></pre> 
<pre>    private void onlineTdtLoad() {
        UrlTileProvider mUrlTileProvider = new UrlTileProvider(256, 256) {
            @Override
            public URL getTileUrl(int x, int y, int zoom) {
                try {
                    String real_url = String.format(url, zoom, y, x);
                    LatLng mLatLng = mAMap.getProjection().fromScreenLocation(new Point(x,y));
                    Log.e("getTileUrl",x+","+y+""+" "+mLatLng+" "+real_url);
//                    aMap.addMarker(new MarkerOptions().position(mLatLng).icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN)));
//                    aMap.addMarker(new MarkerOptions().icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_BLUE))).setPositionByPixels(x,y);
                    return new URL(real_url);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                return null;
            }
        };
        TileOverlayOptions tileOverlayOptions =
                new TileOverlayOptions().tileProvider(mUrlTileProvider);

        UrlTileProvider mUrlTileProvider2 = new UrlTileProvider(256, 256) {
            @Override
            public URL getTileUrl(int x, int y, int zoom) {
                try {
                    String real_url = String.format(url2, zoom, y, x);
                    LatLng mLatLng = mAMap.getProjection().fromScreenLocation(new Point(x,y));
                    Log.e("getTileUrl2",x+","+y+""+" "+mLatLng+" "+real_url);
                    return new URL(real_url);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                return null;
            }
        };
        TileOverlayOptions tileOverlayOptions2 =
                new TileOverlayOptions().tileProvider(mUrlTileProvider2);

        mAMap.addTileOverlay(tileOverlayOptions).setZIndex(1);
        mAMap.addTileOverlay(tileOverlayOptions2).setZIndex(2);
    }</pre> 
<p>者部分也是参考了大佬的文章<a href="https://blog.csdn.net/jiaxiang123456/article/details/137105463" title="Android使用高德地图添加天地图作为底图_高德加载天地图卫星-CSDN博客">Android使用高德地图添加天地图作为底图_高德加载天地图卫星-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ee99fca0b5a0caaa356973b8b43ddf64/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言全网最全sscanf函数用法，没有的评论区提，随时更新</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69d923797883ccbf9bfb0542990cdd9f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">GPT-4o 免费开放！体验 AI 对话的无限可能！手把手教你普通用户如何切换到4o版本使用！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>