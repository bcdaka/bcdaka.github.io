<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hive超详细安装 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2f5be814e1760a306140e201913a0bcf/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Hive超详细安装">
  <meta property="og:description" content="一、Hive相关知识 Hive是基于Hadoop的数据仓库工具，可以用来对HDFS中存储的数据进行查询和分析。Hive能够将HDFS上结构化的数据文件映射为数据库表，并提供SQL查询功能，将SQL语句转变成MapReduce任务来执行。Hive通过简单的SQL语句实现快速调用MapReduce机制进行数据统计分析，因此不必专门开发MapReduce应用程序即可实现大数据分析。
Hive对存储在HDFS中的数据进行分析和管理，它可以将结构化的数据文件映射为一张数据库表，通过SQL查询分析需要的内容，查询Hive使用的SQL语句简称Hive SQL（HQL）。Hive的运行机制使不熟悉MapReduce的用户也能很方便地利用SQL语言对数据进行查询、汇总、分析。同时，Hive也允许熟悉MapReduce开发者们开发自定义的Mappers和Reducers来处理内建的Mappers和Reducers无法完成的复杂的分析工作。Hive还允许用户编写自己定义的函数UDF，用来在查询中使用。
二、Hive的优缺点 优点：
1.简单容易上手 提供了类SQL的查询语言HQL。
2.热扩容 不需要重启服务Hive即可自由的扩展集群计算节点的规模。
3.延展性强 Hive支持用户自定义函数，用户可以根据自己的需求来编写功能函数，在Hive中实现调用，扩展Hive的计算能力。
4.可扩展强 为超大数据集设计了计算/扩展能力（MR作为计算引擎，HDFS作为存储系统）。
5.元数据管理 提供统一的元数据管理。
6.容错行强 Hive具有良好的容错性，某个或某几个计算节点出现故障时，Hive仍可利用其它正常的计算节点完成计算任务执行。
缺点：
1.Hive的HQL表达能力有限，更适用于完成基础的数据分析任务。
2.Hive的效率比较低。
3.Hive调优比较困难，可优化程度不高。
4.Hive计算过程可控性差。
三、Hive组件架构 1.Hive与Hadoop的关系
Hive构建在Hadoop之上，HQL中对查询语句的解释、优化、生成查询计划是由Hive完成的。Hive读取的所有数据都是存储在Hadoop文件系统中。Hive查询计划被转化为MapReduce任务，在Hadoop中执行。
2.Hive与数据库的异同
由于Hive采用了SQL的查询语言HQL，因此很容易将Hive理解为数据库。其实从结构上来看，Hive和数据库除了拥有类似的查询语言，再无类似之处。MapReduce开发人员可以把自己写的Mapper和Reducer作为插件支持Hive做更复杂的数据分析。它与关系型数据库的SQL略有不同，但支持了绝大多数的语句（如DDL、DML）以及常见的聚合函数、连接查询、条件查询等操作。
Hive不适合用于联机(online)事务处理，也不提供实时查询功能。它最适合应用在基于大量不可变数据的批处理作业。Hive的特点是可伸缩（在Hadoop 的集群上动态的添加设备），可扩展、容错、输入格式的松散耦合。Hive的入口是DRIVER，执行的SQL语句首先提交到DRIVER驱动，然后调用COMPILER解释驱动，最终解释成MapReduce任务执行，最后将结果返回。
四、Hive的安装 1.Hive的基础环境和安装准备 Hive组件需要基于Hadoop系统进行安装。因此，在安装Hive组件前，需要确保Hadoop系统能够正常运行。本章节内容是基于之前已部署完毕的Hadoop全分布系统，在master节点上实现Hive组件安装。
Hive组件的部署规划和软件包路径如下：
（1）当前环境中已安装Hadoop全分布系统。
（2）本地安装MySQL数据库（账号root，密码Password123$），
软件包在/opt/software/mysql-5.7.18路径下。
（3）MySQL端口号（3306）。
（4）MySQL的JDBC驱动包/opt/software/mysql-connector-java-5.1.47.jar，
在此基础上更新Hive元数据存储。
（5）Hive软件包/opt/software/apache-hive-2.0.0-bin.tar.gz。 2.解压安装文件 （1）使用root用户，将Hive安装包
/opt/software/apache-hive-2.0.0-bin.tar.gz路解压到/usr/local/src路径下。
[root@master ~]# tar -zxvf /opt/software/apache-hive-2.0.0-bin.tar.gz -C /usr/local/src
（2）将解压后的apache-hive-2.0.0-bin文件夹更名为hive；
[root@master ~]# mv /usr/local/src/apache-hive-2.0.0-bin usr/local/src/hive
（3）修改hive目录归属用户和用户组为hadoop
[root@master ~]# chown -R hadoop:hadoop /usr/local/src/hive
3.安装MySQL数据库 （1）将Linux系统中/opt/sofeware/mysql-5.7.18.rar包移动到home目录下并下载到windows系统中 [root@master ~]# mv /opt/sofeware/mysql-5.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-09T18:18:32+08:00">
    <meta property="article:modified_time" content="2024-04-09T18:18:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hive超详细安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin-left:0in;text-align:left;">一、Hive相关知识</h3> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">    Hive</span><span style="color:#262626;">是基于</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">的数据仓库工具，可以用来对</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">中存储的数据进行查询和分析。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">能够将</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">上结构化的数据文件映射为数据库表，并提供</span><span style="color:#262626;">SQL</span><span style="color:#262626;">查询功能，将</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句转变成</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">任务来执行。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">通过简单的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句实现快速调用</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">机制进行数据统计分析，因此不必专门开发</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">应用程序即可实现大数据分析。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">    Hive对存储在</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">中的数据进行分析和管理，它可以将结构化的数据文件映射为一张数据库表，通过</span><span style="color:#262626;">SQL</span><span style="color:#262626;">查询分析需要的内容，查询</span><span style="color:#262626;">Hive</span><span style="color:#262626;">使用的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句简称</span><span style="color:#262626;">Hive SQL</span><span style="color:#262626;">（</span><span style="color:#262626;">HQL</span><span style="color:#262626;">）。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的运行机制使不熟悉</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">的用户也能很方便地利用</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语言对数据进行查询、汇总、分析。同时，</span><span style="color:#262626;">Hive</span><span style="color:#262626;">也允许熟悉</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">开发者们开发自定义的</span><span style="color:#262626;">Mappers</span><span style="color:#262626;">和</span><span style="color:#262626;">Reducers</span><span style="color:#262626;">来处理内建的</span><span style="color:#262626;">Mappers</span><span style="color:#262626;">和</span><span style="color:#262626;">Reducers</span><span style="color:#262626;">无法完成的复杂的分析工作。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">还允许用户编写自己定义的函数</span><span style="color:#262626;">UDF</span><span style="color:#262626;">，用来在查询中使用。</span></p> 
<h3 style="margin-left:0in;text-align:left;"><span style="color:#262626;">二、Hive的优缺点</span></h3> 
<p style="margin-left:0in;text-align:left;"><span style="color:#1a439c;"><strong>优点：</strong></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        </span><span style="color:#262626;">1.</span><span style="color:#262626;"><strong>简单容易上手 </strong>提供了类</span><span style="color:#262626;">SQL</span><span style="color:#262626;">的查询语言</span><span style="color:#262626;">HQL</span><span style="color:#262626;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        2.<strong>热扩容 </strong>不需要重启服务</span><span style="color:#262626;">Hive</span><span style="color:#262626;">即可自由的扩展集群计算节点的规模。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        3.<strong>延展性强  </strong>Hive</span><span style="color:#262626;">支持用户自定义函数，用户可以根据自己的需求来编写功能函数，在</span><span style="color:#262626;">Hive</span><span style="color:#262626;">中实现调用，扩展</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的计算能力。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        4.<strong>可扩展强 </strong>为超大数据集设计了计算</span><span style="color:#262626;">/</span><span style="color:#262626;">扩展能力（</span><span style="color:#262626;">MR</span><span style="color:#262626;">作为计算引擎，</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">作为存储系统）。</span></p> 
<p style="margin-left:0in;text-align:left;">        5.<span style="color:#262626;"><strong>元数据管理 </strong>提供统一的元数据管理。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        6.<strong>容错行强  </strong>Hive</span><span style="color:#262626;">具有良好的容错性，某个或某几个计算节点出现故障时，</span><span style="color:#262626;">Hive</span><span style="color:#262626;">仍可利用其它正常的计算节点完成计算任务执行。</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="290" src="https://images2.imgbox.com/1d/c2/L7MgKlIr_o.png" width="632"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#1a439c;"><strong>缺点：</strong></span></p> 
<p style="margin-left:0in;text-align:left;">        1.<span style="color:#262626;">Hive</span><span style="color:#262626;">的</span><span style="color:#262626;">HQL</span><span style="color:#262626;">表达能力有限，更适用于完成基础的数据分析任务。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        2.Hive</span><span style="color:#262626;">的效率比较低。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">        3.Hive</span><span style="color:#262626;">调优比较困难，可优化程度不高。</span></p> 
<p style="margin-left:0in;text-align:left;">        4.<span style="color:#262626;">Hive</span><span style="color:#262626;">计算过程可控性差。</span></p> 
<h3 style="margin-left:0in;text-align:left;"><img alt="" height="273" src="https://images2.imgbox.com/0b/87/ozb4ZUjf_o.png" width="704"><span style="color:#262626;"> 三、<strong>Hive组件架构</strong></span></h3> 
<p style="text-align:left;"><span style="color:#262626;">  1.Hive</span><span style="color:#262626;">与</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">的关系</span></p> 
<p style="text-align:left;"><span style="color:#262626;">        Hive</span><span style="color:#262626;">构建在</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">之上，</span><span style="color:#262626;">HQL</span><span style="color:#262626;">中对查询语句的解释、优化、生成查询计划是由</span><span style="color:#262626;">Hive</span><span style="color:#262626;">完成的。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">读取的所有数据都是存储在</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">文件系统中。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">查询计划被转化为</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">任务，在</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">中执行。</span></p> 
<p style="text-align:left;"></p> 
<p style="text-align:left;"><span style="color:#262626;">2.Hive</span><span style="color:#262626;">与数据库的异同</span></p> 
<p style="text-align:left;">     <span style="color:#262626;">由于</span><span style="color:#262626;">Hive</span><span style="color:#262626;">采用了</span><span style="color:#262626;">SQL</span><span style="color:#262626;">的查询语言</span><span style="color:#262626;">HQL</span><span style="color:#262626;">，因此很容易将</span><span style="color:#262626;">Hive</span><span style="color:#262626;">理解为数据库。其实从结构上来看，</span><span style="color:#262626;">Hive</span><span style="color:#262626;">和数据库除了拥有类似的查询语言，再无类似之处。</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">开发人员可以把自己写的</span><span style="color:#262626;">Mapper</span><span style="color:#262626;">和</span><span style="color:#262626;">Reducer</span><span style="color:#262626;">作为插件支持</span><span style="color:#262626;">Hive</span><span style="color:#262626;">做更复杂的数据分析。它与关系型数据库的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">略有不同，但支持了绝大多数的语句（如</span><span style="color:#262626;">DDL</span><span style="color:#262626;">、</span><span style="color:#262626;">DML</span><span style="color:#262626;">）以及常见的聚合函数、连接查询、条件查询等操作。</span></p> 
<p style="text-align:left;"><span style="color:#262626;">    Hive</span><span style="color:#262626;">不适合用于联机</span><span style="color:#262626;">(online)</span><span style="color:#262626;">事务处理，也不提供实时查询功能。它最适合应用在基于大量不可变数据的批处理作业。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的特点是可伸缩（在</span><span style="color:#262626;">Hadoop </span><span style="color:#262626;">的集群上动态的添加设备），可扩展、容错、输入格式的松散耦合。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的入口是</span><span style="color:#262626;">DRIVER</span><span style="color:#262626;">，执行的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句首先提交到</span><span style="color:#262626;">DRIVER</span><span style="color:#262626;">驱动，然后调用</span><span style="color:#262626;">COMPILER</span><span style="color:#262626;">解释驱动，最终解释成</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">任务执行，最后将结果返回。</span></p> 
<h3 style="text-align:left;"><span style="color:#262626;">四、Hive的安装</span></h3> 
<h4 style="text-align:left;"><span style="color:#262626;">1.Hive的基础环境和安装准备</span></h4> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">    Hive</span><span style="color:#262626;">组件需要基于</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">系统进行安装。因此，在安装</span><span style="color:#262626;">Hive</span><span style="color:#262626;">组件前，需要确保</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">系统能够正常运行。本章节内容是基于之前已部署完毕的</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">全分布系统，在</span><span style="color:#262626;">master</span><span style="color:#262626;">节点上实现</span><span style="color:#262626;">Hive</span><span style="color:#262626;">组件安装。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">    Hive组件的部署规划和软件包路径如下：</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（1）当前环境中已安装Hadoop全分布系统。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（2）本地安装</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库（账号</span><span style="color:#262626;">root</span><span style="color:#262626;">，密码Password123$），</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">软件包在/opt/software/mysql-5.7.18路径下。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（3）</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">端口号（3306）。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（4）</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">的</span><span style="color:#262626;">JDBC</span><span style="color:#262626;">驱动包/opt/software/mysql-connector-java-5.1.47.jar，</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">在此基础上更新Hive元数据存储。</span></p> 
<p><span style="color:#262626;">（5）</span><span style="color:#262626;">Hive</span><span style="color:#262626;">软件包/opt/software/apache-hive-2.0.0-bin.tar.gz。</span>  </p> 
<h4><span style="color:#262626;">2.解压安装文件</span></h4> 
<p></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">1</span><span style="color:#262626;">）使用</span><span style="color:#262626;">root</span><span style="color:#262626;">用户，将</span><span style="color:#262626;">Hive</span><span style="color:#262626;">安装包</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">/opt/software/apache-hive-2.0.0-bin.tar.gz</span><span style="color:#262626;">路解压到</span><span style="color:#262626;">/</span><span style="color:#262626;">usr</span><span style="color:#262626;">/local/</span><span style="color:#262626;">src</span><span style="color:#262626;">路径下。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# tar -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">zxvf</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> /opt/software/apache-hive-2.0.0-bin.tar.gz -C /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">2</span><span style="color:#262626;">）将解压后的</span><span style="color:#262626;">apache-hive-2.0.0-bin</span><span style="color:#262626;">文件夹更名为</span><span style="color:#262626;">hive</span><span style="color:#262626;">；</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# mv /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/apache-hive-2.0.0-bin </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">3</span><span style="color:#262626;">）修改</span><span style="color:#262626;">hive</span><span style="color:#262626;">目录归属用户和用户组为</span><span style="color:#262626;">hadoop</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">chown</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> -R </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop:hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive</span></span></p> 
</blockquote> 
<h4>3.安装MySQL数据库</h4> 
<p style="text-align:left;"><span style="color:#262626;">（1</span><span style="color:#262626;">）将</span><span style="color:#262626;">Linux</span><span style="color:#262626;">系统中</span><span style="color:#262626;">/opt/</span><span style="color:#262626;">sofeware</span><span style="color:#262626;">/mysql-5.7.18.rar</span><span style="color:#262626;">包移动到</span><span style="color:#262626;">home</span><span style="color:#262626;">目录下并下载到</span><span style="color:#262626;">windows</span><span style="color:#262626;">系统中</span> </p> 
<blockquote> 
 <p style="text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# mv /opt/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">sofeware</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/mysql-5.7.18.rar ~/</span></span></p> 
</blockquote> 
<p style="text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">2</span><span style="color:#262626;">）</span><span style="color:#262626;">解压</span><span style="color:#262626;">Windows</span><span style="color:#262626;">中的</span><span style="color:#262626;">mysql-5.7.18.rar</span></p> 
<p style="text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">3</span><span style="color:#262626;">）</span><span style="color:#262626;">将这</span><span style="color:#262626;">5</span><span style="color:#262626;">个</span><span style="color:#262626;">rpm</span><span style="color:#262626;">文件上传到</span><span style="color:#262626;">Linux</span><span style="color:#262626;">系统中</span></p> 
<p style="text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">4</span><span style="color:#262626;">）</span><span style="color:#262626;">将文件移动到</span><span style="color:#262626;">/opt/</span><span style="color:#262626;">sofeware</span><span style="color:#262626;">/mysql-5.7.18/</span><span style="color:#262626;">目录下</span></p> 
<blockquote> 
 <p style="text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mkdir</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> /opt/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">sofeware</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/mysql-5.7.18/</span></span></p> 
</blockquote> 
<blockquote> 
 <p style="text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# mv ~/*.rpm /opt/software/mysql-5.7.18/</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（5</span><span style="color:#262626;">）按如下顺序依次按照</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库的</span><span style="color:#262626;">mysql</span><span style="color:#262626;"> common</span><span style="color:#262626;">、</span><span style="color:#262626;">mysql</span><span style="color:#262626;"> libs</span><span style="color:#262626;">、</span><span style="color:#262626;">mysql</span><span style="color:#262626;"> client</span><span style="color:#262626;">软件包。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# cd /opt/software/mysql-5.7.18/  # MySQL</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">软件包路径</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# rpm -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">ivh</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> mysql-community-common-5.7.18-1.el7.x86_64.rpm</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# rpm -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">ivh</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> mysql-community-libs-5.7.18-1.el7.x86_64.rpm</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# rpm -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">ivh</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> mysql-community-client-5.7.18-1.el7.x86_64.rpm</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（6</span><span style="color:#262626;">）安装</span><span style="color:#262626;">mysql</span><span style="color:#262626;"> server</span><span style="color:#262626;">软件的两个依赖软件包。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# yum install -y net-tools</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# yum install -y </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">perl</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（7）将以下配置信息添加到</span><span style="color:#262626;">/</span><span style="color:#262626;">etc</span><span style="color:#262626;">/</span><span style="color:#262626;">my.cnf</span><span style="color:#262626;">文件</span><span style="color:#262626;">symbolic-links=0</span><span style="color:#262626;">配置信息的下方。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">default-storage-engine=</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">innodb</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">innodb_file_per_table</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">collation-server=utf8_general_ci</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">init</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">-connect='SET NAMES utf8'</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">character-set-server=utf8</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;">（8）启动MySQL数据库</p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">systemctl</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> start </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;">（9）<span style="color:#262626;">查询MySQL数据库状态。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">mysqld</span><span style="color:#262626;">进程状态为</span><span style="color:#262626;">active (running)</span><span style="color:#262626;">，则表示</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库正常运行。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">如果</span><span style="color:#262626;">mysqld</span><span style="color:#262626;">进程状态为</span><span style="color:#262626;">failed</span><span style="color:#262626;">，则表示</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库启动异常。此时需要排查</span><span style="color:#262626;">/</span><span style="color:#262626;">etc</span><span style="color:#262626;">/</span><span style="color:#262626;">my.cnf</span><span style="color:#262626;">文件。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">systemctl</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> status </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">● </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld.service</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> - MySQL Server</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">   Loaded: loaded (/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/lib/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">systemd</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/system/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld.service</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">; enabled; vendor </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">preset:</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> disabled)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">   Active: active (running) since </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">一 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">2020-05-11 16:28:27 CST; 1h 26min ago</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">     Docs: </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">man:mysqld</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">(8)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">           http://dev.mysql.com/doc/refman/en/using-systemd.html</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">  Process: 941 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">ExecStart</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">sbin</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> --</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">daemonize</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> --</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">pid</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">-file=/var/run/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld.pid</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> $MYSQLD_OPTS (code=exited, status=0/SUCCESS)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">  Process: 911 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">ExecStartPre</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/bin/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld_pre_systemd</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> (code=exited, status=0/SUCCESS)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;"> Main PID: 944 (</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">)</span></span></p> 
 <p style="margin-left:0in;text-align:left;">   <span style="background-color:#C0C0C0;"><span style="color:#262626;">CGroup</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">: /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">system.slice</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld.service</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">           └─944 /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">sbin</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> --</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">daemonize</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> --</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">pid</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">-file=/var/run/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysqld.pid</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;">（10）<span style="color:#262626;">查询MySQL</span><span style="color:#262626;">数据库默认密码。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库安装后的默认密码保存在</span><span style="color:#262626;">/var/log/mysqld.log</span><span style="color:#262626;">文件中，在该文件中以</span><span style="color:#262626;">password</span><span style="color:#262626;">关键字搜索默认密码。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# cat /var/log/mysqld.log | grep password</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">2020-05-07T02:34:03.336724Z 1 [Note] A temporary password is generated for </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@localhost</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">: MPg5lhk4?&gt;Ui <strong> #</strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">默认密码为</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">MPg5lhk4?&gt;Ui</span></span></strong></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#fe2c24;">MySQL数据库是安装后随机生成的，所以每次安装后生成的默认密码不相同。</span></strong></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（11）</span><span style="color:#262626;">MySQL数据库初始化。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">执行</span><span style="color:#262626;">mysql_secure_installation</span><span style="color:#262626;">命令初始化</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库，初始化过程中需要设定数据库</span><span style="color:#262626;">root</span><span style="color:#262626;">用户登录密码，密码需符合安全规则，包括大小写字符、数字和特殊符号，可设定密码为</span><span style="color:#262626;">Password123$</span><span style="color:#262626;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#262626;">在进行</span><span style="color:#262626;">MySQL</span></strong><span style="color:#262626;"><strong>数据库初始化过程中会出现以下交互确认信息</strong>：</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="color:#262626;">1</span><span style="color:#262626;">）</span><span style="color:#262626;">Change the password for root ? ((Press </span><span style="color:#262626;">y|Y</span><span style="color:#262626;"> for Yes, any other key for No)</span><span style="color:#262626;">表示是否更改</span><span style="color:#262626;">root</span><span style="color:#262626;">用户密码，<span style="background-color:#ad720d;">在键盘输入</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">y</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">和回车</span>。</span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="color:#262626;">2</span><span style="color:#262626;">）</span><span style="color:#262626;">Do you wish to continue with the password provided?(Press </span><span style="color:#262626;">y|Y</span><span style="color:#262626;"> for Yes, any other key for No)</span><span style="color:#262626;">表示是否使用设定的密码继续，<span style="background-color:#ad720d;">在键盘输入</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">y</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">和回车</span>。</span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="color:#262626;">3</span><span style="color:#262626;">）</span><span style="color:#262626;">Remove anonymous users? (Press </span><span style="color:#262626;">y|Y</span><span style="color:#262626;"> for Yes, any other key for No)</span><span style="color:#262626;">表示是否删除匿名用户，<span style="background-color:#ad720d;">在键盘输入</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">y</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">和回车</span>。</span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="color:#262626;">4</span><span style="color:#262626;">）</span><span style="color:#262626;">Disallow root login remotely? (Press </span><span style="color:#262626;">y|Y</span><span style="color:#262626;"> for Yes, any other key for No)</span><span style="color:#262626;">表示是否拒绝</span><span style="color:#262626;">root</span><span style="color:#262626;">用户远程登录，<span style="background-color:#ad720d;">在键盘输入</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">n</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">和回车，表示允许</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">root</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">用户远程登录</span>。</span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="color:#262626;">5</span><span style="color:#262626;">）</span><span style="color:#262626;">Remove test database and access to it? (Press </span><span style="color:#262626;">y|Y</span><span style="color:#262626;"> for Yes, any other key for No)</span><span style="color:#262626;">表示是否删除测试数据库，<span style="background-color:#ad720d;">在键盘输入</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">y</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">和回车</span>。</span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="color:#262626;">6</span><span style="color:#262626;">）</span><span style="color:#262626;">Reload privilege tables now? (Press </span><span style="color:#262626;">y|Y</span><span style="color:#262626;"> for Yes, any other key for No) </span><span style="color:#262626;">表示是否重新加载授权表，<span style="background-color:#ad720d;">在键盘输入</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">y</span></span><span style="color:#262626;"><span style="background-color:#ad720d;">和回车</span>。</span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">(12) </span><span style="color:#262626;">添加root</span><span style="color:#262626;">用户从本地和远程访问</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库表单的授权。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&gt; grant all privileges on *.* to </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@'localhost</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">' identified by 'Password123$'; <strong> # </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">添加</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">用户本地访问授权</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Query OK, 0 rows affected, 1 warning (0.01 sec)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&gt; grant all privileges on *.* to root@'%' identified by 'Password123$';  <strong># </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">添加</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">用户远程访问授权</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Query OK, 0 rows affected, 1 warning (0.00 sec)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&gt; flush privileges;  <strong># </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">刷新授权</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Query OK, 0 rows affected (0.00 sec)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&gt; select </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">user,host</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> from </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql.user</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> where user='root';  <strong># </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">查询</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">用户授权情况</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">+------+-----------+</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">| user | host      |</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">+------+-----------+</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">| root | %         |</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">| root | localhost |</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">+------+-----------+</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">2 rows in set (0.00 sec)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&gt; exit;  <strong># </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">退出</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">MySQL</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">数据库</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Bye</span></span></p> 
</blockquote> 
<h4 style="margin-left:0in;text-align:left;"><span style="color:#262626;">4.配置Hive组件</span></h4> 
<p></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">1</span><span style="color:#262626;">）设置</span><span style="color:#262626;">Hive</span><span style="color:#262626;">环境变量并使其生效。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# vi /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">etc</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/profile  <strong># </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">在文件末尾追加以下配置内容</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;"># set hive environment</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">export HIVE_HOME=/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">export PATH=$PATH:$HIVE_HOME/bin</span></span></p> 
 <p style="margin-left:0in;text-align:left;"></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">source /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">etc</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/profile<strong>  # </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">使环境变量配置生效</span></span></strong></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">2</span><span style="color:#262626;">）修改</span><span style="color:#262626;">Hive</span><span style="color:#262626;">组件配置文件。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">切换到</span><span style="color:#262626;">hadoop</span><span style="color:#262626;">用户执行以下对</span><span style="color:#262626;">Hive</span><span style="color:#262626;">组件的配置操作。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">将</span><span style="color:#262626;">/</span><span style="color:#262626;">usr</span><span style="color:#262626;">/local/</span><span style="color:#262626;">src</span><span style="color:#262626;">/hive</span><span style="color:#262626;">文件夹下</span><span style="color:#262626;">hive-</span><span style="color:#262626;">default.xml.template</span><span style="color:#262626;">文件，更名为</span><span style="color:#262626;">hive-site.xml</span><span style="color:#262626;">。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">su</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> - </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ cp /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/conf/hive-</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">default.xml.template</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/conf/hive-site.xml</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">3</span><span style="color:#262626;">）通过</span><span style="color:#fe2c24;"><strong>vi编辑器修改hive-site.xml文件</strong></span><span style="color:#262626;">实现</span><span style="color:#262626;">Hive</span><span style="color:#262626;">连接</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库，并设定</span><span style="color:#262626;">Hive</span><span style="color:#262626;">临时文件存储路径。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ vi /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/conf/hive-site.xml</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">1</span><span style="color:#262626;">）设置</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库连接。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;name&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">javax.jdo.option.ConnectionURL</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/name&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;value&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jdbc:mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">://master:3306/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hive?createDatabaseIfNotExist</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">true&amp;amp;useSSL</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=false&lt;/value&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;description&gt;JDBC connect string for a JDBC </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/description&gt;</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">2</span><span style="color:#262626;">）配置</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库</span><span style="color:#262626;">root</span><span style="color:#262626;">的密码。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;property&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;name&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">javax.jdo.option.ConnectionPassword</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/name&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;value&gt;Password123$&lt;/value&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;description&gt;password to use against </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> database&lt;/description&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/property&gt;</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">3</span><span style="color:#262626;">）验证元数据存储版本一致性。若默认</span><span style="color:#262626;">false</span><span style="color:#262626;">，则不用修改。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;property&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;name&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hive.metastore.schema.verification</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/name&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;value&gt;false&lt;/value&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;description&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">  Enforce </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> schema version consistency.</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">True: Verify that version information stored in is compatible with one from Hive jars.  Also disable automatic</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">  False: Warn if the version information stored in </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> doesn't match with one from in Hive jars.</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/description&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/property&gt;</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">4</span><span style="color:#262626;">）配置数据库驱动。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;property&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;name&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">javax.jdo.option.ConnectionDriverName</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/name&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;value&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">com.mysql.jdbc.Driver</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/value&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;description&gt;Driver class name for a JDBC </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/description&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/property&gt;</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">5</span><span style="color:#262626;">）配置数据库用户名</span><span style="color:#262626;">javax.jdo.option.ConnectionUserName</span><span style="color:#262626;">为</span><span style="color:#262626;">root</span><span style="color:#262626;">。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;property&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;name&gt;</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">javax.jdo.option.ConnectionUserName</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/name&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;value&gt;root&lt;/value&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;description&gt;Username to use against </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> database&lt;/description&gt;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">&lt;/property&gt;</span></span></p> 
</blockquote> 
<h4 style="margin-left:0in;text-align:left;">5.初始化Hive元数据</h4> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">1</span><span style="color:#262626;">）将</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库驱动文件</span><span style="color:#262626;">/opt/software/mysql-connector-java-5.1.47.jar</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">拷贝到</span><span style="color:#262626;">Hive</span><span style="color:#262626;">安装目录的</span><span style="color:#262626;">/</span><span style="color:#262626;">usr</span><span style="color:#262626;">/local/</span><span style="color:#262626;">src</span><span style="color:#262626;">/hive/lib</span><span style="color:#262626;">目录下。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ exit  <strong># </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">返回到</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">用户登录状态</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# cp ~/mysql-connector-java-5.1.47.jar /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/lib</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">chown</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> -R </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop:hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/lib/mysql-connector-java-5.1.47.jar</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">su</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> - </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> <strong> # </strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">再次切换到</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">用户</span></span></strong></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">2</span><span style="color:#262626;">）删除</span><span style="color:#262626;">/</span><span style="color:#262626;">usr</span><span style="color:#262626;">/local/</span><span style="color:#262626;">src</span><span style="color:#262626;">/</span><span style="color:#262626;">hadoop</span><span style="color:#262626;">/share/</span><span style="color:#262626;">hadoop</span><span style="color:#262626;">/yarn/lib/jline-0.9.94.jar</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">文件，若未删除该文件会导致</span><span style="color:#262626;">Hive</span><span style="color:#262626;">元数据初始化失败。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ rm -f /</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/share/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/yarn/lib/jline-0.9.94.jar</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">3</span><span style="color:#262626;">）启动</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">相关进程。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ start-all.sh</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（4）分布在</span><span style="color:#262626;">master</span><span style="color:#262626;">、</span><span style="color:#262626;">slave1</span><span style="color:#262626;">、</span><span style="color:#262626;">slave2</span><span style="color:#262626;">三个节点执行</span><span style="color:#262626;">JPS</span><span style="color:#262626;">命令检查</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">进程运行是否正常。需要关注进程</span><span style="color:#262626;">ID</span><span style="color:#262626;">号每次启动会发生变化。</span></p> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#262626;">master:</span></strong></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span></strong><span style="background-color:#C0C0C0;"><span style="color:#262626;"><strong>hadoop</strong>@</span><span style="color:#fe2c24;">master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jps</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">  <strong># master</strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">节点</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1152 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">NameNode</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1472 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">ResourceManager</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1330 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">SecondaryNameNode</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">2025 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">Jps</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><strong>slave1：</strong></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[root@</span><span style="color:#fe2c24;">slave1</span><span style="color:#262626;"> ~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">su</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> - </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> <strong> # slave1</strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">节点</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[hadoop@slave1 ~]$ </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jps</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1173 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">NodeManager</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1322 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">Jps</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1069 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">DataNode</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><strong>slave2:</strong></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[root@</span><span style="color:#fe2c24;">slave2 </span><span style="color:#262626;">~]# </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">su</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> - </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">  <strong># slave2</strong></span></span><strong><span style="background-color:#C0C0C0;"><span style="color:#262626;">节点</span></span></strong></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[hadoop@slave2 ~]$ </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jps</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1076 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">DataNode</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1317 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">Jps</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">1180 </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">NodeManager</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">4</span><span style="color:#262626;">）初始化</span><span style="color:#262626;">Hive</span><span style="color:#262626;">元数据。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">使用</span><span style="color:#262626;">schematool</span><span style="color:#262626;">升级元数据，将</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的元数据重新写入</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库中。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">schematool</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">initSchema</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">dbType</span></span> <span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> connection URL:        </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jdbc:mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">://master:3306/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hive?createDatabaseIfNotExist</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">true&amp;useSSL</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=false</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> Connection Driver :    </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">com.mysql.jdbc.Driver</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> connection User:       root</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Starting </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> schema initialization to 2.0.0</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Initialization script hive-schema-2.0.0.mysql.sql</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Initialization script completed</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">schemaTool</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> completed</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#262626;">以上命令结果显示</span><span style="color:#262626;">schemaTool</span><span style="color:#262626;"> completed</span><span style="color:#262626;">，则表示</span><span style="color:#262626;">Hive</span><span style="color:#262626;">元数据写入</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库成功</span></strong></p> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#262626;">若执行</span><span style="color:#262626;">schematool</span><span style="color:#262626;"> -</span><span style="color:#262626;">initSchema</span><span style="color:#262626;"> -</span><span style="color:#262626;">dbType</span> <span style="color:#262626;">mysql</span><span style="color:#262626;">显示</span><span style="color:#262626;">schemaTool</span><span style="color:#262626;"> failed</span><span style="color:#262626;">报错，很可能是</span></strong></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">schematool</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">initSchema</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> -</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">dbType</span></span> <span style="background-color:#C0C0C0;"><span style="color:#262626;">mysql</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> connection URL:        </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jdbc:mysql</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">://master:3306/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hive?createDatabaseIfNotExist</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">true&amp;useSSL</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">=false</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> Connection Driver :    </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">com.mysql.jdbc.Driver</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> connection User:       root</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Starting </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> schema initialization to 2.0.0</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Initialization script hive-schema-2.0.0.mysql.sql</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Error: Duplicate key name 'PCS_STATS_IDX' (state=42000,code=1061)</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">org.apache.hadoop.hive.metastore.HiveMetaException</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">: Schema initialization FAILED! </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">Metastore</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> state would be inconsistent !!</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">*** </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">schemaTool</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> failed ***</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#fe2c24;">解决方法：</span><span style="color:#262626;">可以删除</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">中的</span><span style="color:#262626;">hive</span><span style="color:#262626;">数据库后，重新执行</span><span style="color:#262626;">schematool</span><span style="color:#262626;"> -</span><span style="color:#262626;">initSchema</span><span style="color:#262626;"> -</span><span style="color:#262626;">dbType</span> <span style="color:#262626;">mysql</span><span style="color:#262626;">处理。</span></strong></p> 
<h4 style="margin-left:0in;text-align:left;"><strong><span style="color:#262626;">6.启动Hive</span></strong></h4> 
<p></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">1</span><span style="color:#262626;">）在系统的任意目录下，执行</span><span style="color:#262626;">hive</span><span style="color:#262626;">命令即可启动</span><span style="color:#262626;">Hive</span><span style="color:#262626;">组件。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$ hive</span></span></p> 
 <p style="margin-left:0in;text-align:left;"></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">Logging initialized using configuration in </span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jar:file</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">:/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/lib/hive-common-2.0.0.jar!/hive-log4j.properties</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">SLF4J: Class path contains multiple SLF4J bindings.</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">SLF4J: Found binding in [</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jar:file</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">:/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/share/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/common/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">impl</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">StaticLoggerBinder.class</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">]</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">SLF4J: Found binding in [</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">jar:file</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">:/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">usr</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">src</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/hive/lib/hive-jdbc-2.0.0-standalone.jar!/org/slf4j/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">impl</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">/</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">StaticLoggerBinder.class</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">]</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">hive&gt;</span></span></p> 
</blockquote> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">2</span><span style="color:#262626;">）执行</span><span style="color:#262626;">exit</span><span style="color:#262626;">命令退出</span><span style="color:#262626;">Hive</span><span style="color:#262626;">命令行状态。</span></p> 
<blockquote> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">hive&gt; exit;</span></span></p> 
 <p style="margin-left:0in;text-align:left;"><span style="background-color:#C0C0C0;"><span style="color:#262626;">[</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;">hadoop@master</span></span><span style="background-color:#C0C0C0;"><span style="color:#262626;"> ~]$</span></span></p> 
</blockquote> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a781da6abf7eadedc02cc3ddf5b8a9a3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据库大作业：学生就业管理系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bc1e5a612a4ff914c6ba72158ddfbc92/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构——线性表（顺序存储结构）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>