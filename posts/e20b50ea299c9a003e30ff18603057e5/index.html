<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python--连接oracle数据库 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e20b50ea299c9a003e30ff18603057e5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="python--连接oracle数据库">
  <meta property="og:description" content="python--连接oracle数据库 前言一、安装cx_Oracle二、导入库三、数据库操作实例3.1 连接3.2数据库查询3.3数据库插入3.4 实例从某网站上面爬取彩票号码 四、异常4.1、运行时，出现连接数据库失败:DatabaseError:DPI-1047解决连接失败问题1、查看Oracle的版本号2、进入官网，下载对应Oracle版本3.下载cx_Oracle包:https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyhook4.在使用python连接时，需要注意以下点： 前言 在进行数据库连接之前，一般都需要导入依赖的库，通过专门的库去处理对应的数据库连接，所以没安装对应的处理库的话，需要先进行安装、再导入，导入后即可正常使用。
一、安装cx_Oracle cx_Oracle:python链接oracle的驱动包，这个需要自己安装，https://pypi.python.org/pypi/cx_Oracle/5.3在这个网址中下载对应的驱动，下载驱动的时候一定要选好对应的版本，我的python是3.6的32位版本，所以在下载驱动的时候也要选择对应的版本，我选择的版本是cx_Oracle-5.3-11g.win32-py3.6.exe (md5)，下载后直接安装运行就行了，他会有一个自检，如果没有通过就说明你的驱动版本没有下载对。
在刚才下载好的oracle客户端版本中找到下面三个文件：oci.dll、oraocci11.dll、oraociei11.dll，将这几个dll文件复制到
Python\Python36-32\Lib\site-packages文件夹中。
二、导入库 代码如下（示例）：
import cx_Oracle 三、数据库操作实例 3.1 连接 import cx_Oracle conn = cx_Oracle.connect(&#39;xzt/xzt@localhost/testdb&#39;)#这里的顺序是用户名/密码@oracleserver的ip地址/数据库名字 cursor = conn.cursor() print(&#39;连接数据库成功！&#39;) sql = &#34;select * from student&#34; all = cursor.execute(sql) print(all.fetchall()) 3.2数据库查询 import cx_Oracle conn = cx_Oracle.connect(&#39;xzt/xzt@localhost/testdb&#39;) cursor = conn.cursor () cursor.execute (&#34;SELECT * FROM STUDENT_TB&#34;) rows = cursor.fetchall() #得到所有数据集 for row in rows: print(&#34;%d, %s, %s, %s&#34; % (row[0], row[1], row[2], row[3]))#python3以上版本中print()要加括号用了 print(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-29T22:29:14+08:00">
    <meta property="article:modified_time" content="2023-06-29T22:29:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python--连接oracle数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>python--连接oracle数据库</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#cx_Oracle_3" rel="nofollow">一、安装cx_Oracle</a></li><li><a href="#_9" rel="nofollow">二、导入库</a></li><li><a href="#_15" rel="nofollow">三、数据库操作实例</a></li><li><ul><li><a href="#31__16" rel="nofollow">3.1 连接</a></li><li><a href="#32_26" rel="nofollow">3.2数据库查询</a></li><li><a href="#33_53" rel="nofollow">3.3数据库插入</a></li><li><a href="#34__71" rel="nofollow">3.4 实例从某网站上面爬取彩票号码</a></li></ul> 
  </li><li><a href="#_131" rel="nofollow">四、异常</a></li><li><ul><li><a href="#41DatabaseErrorDPI1047_132" rel="nofollow">4.1、运行时，出现连接数据库失败:DatabaseError:DPI-1047</a></li><li><ul><li><a href="#_134" rel="nofollow">解决连接失败问题</a></li><li><ul><li><a href="#1Oracle_135" rel="nofollow">1、查看Oracle的版本号</a></li><li><a href="#2Oracle_143" rel="nofollow">2、进入官网，下载对应Oracle版本</a></li><li><a href="#3cx_Oraclehttpswwwlfduciedugohlkepythonlibspyhook_147" rel="nofollow">3.下载cx_Oracle包:https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyhook</a></li><li><a href="#4python_162" rel="nofollow">4.在使用python连接时，需要注意以下点：</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>在进行数据库连接之前，一般都需要导入依赖的库，通过专门的库去处理对应的数据库连接，所以没安装对应的处理库的话，需要先进行安装、再导入，导入后即可正常使用。</p> 
<h2><a id="cx_Oracle_3"></a>一、安装cx_Oracle</h2> 
<p>cx_Oracle:python链接oracle的驱动包，这个需要自己安装，https://pypi.python.org/pypi/cx_Oracle/5.3在这个网址中下载对应的驱动，下载驱动的时候一定要选好对应的版本，我的python是3.6的32位版本，所以在下载驱动的时候也要选择对应的版本，我选择的版本是cx_Oracle-5.3-11g.win32-py3.6.exe (md5)，下载后直接安装运行就行了，他会有一个自检，如果没有通过就说明你的驱动版本没有下载对。</p> 
<p>在刚才下载好的oracle客户端版本中找到下面三个文件：oci.dll、oraocci11.dll、oraociei11.dll，将这几个dll文件复制到<br> Python\Python36-32\Lib\site-packages文件夹中。</p> 
<h2><a id="_9"></a>二、导入库</h2> 
<p>代码如下（示例）：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cx_Oracle
</code></pre> 
<h2><a id="_15"></a>三、数据库操作实例</h2> 
<h3><a id="31__16"></a>3.1 连接</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cx_Oracle
conn <span class="token operator">=</span> cx_Oracle<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'xzt/xzt@localhost/testdb'</span><span class="token punctuation">)</span><span class="token comment">#这里的顺序是用户名/密码@oracleserver的ip地址/数据库名字</span>
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'连接数据库成功！'</span><span class="token punctuation">)</span>
sql <span class="token operator">=</span> <span class="token string">"select * from student"</span>
<span class="token builtin">all</span> <span class="token operator">=</span> cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">all</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="32_26"></a>3.2数据库查询</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cx_Oracle  
  
conn <span class="token operator">=</span> cx_Oracle<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'xzt/xzt@localhost/testdb'</span><span class="token punctuation">)</span>    
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor <span class="token punctuation">(</span><span class="token punctuation">)</span>  
  
cursor<span class="token punctuation">.</span>execute <span class="token punctuation">(</span><span class="token string">"SELECT * FROM STUDENT_TB"</span><span class="token punctuation">)</span>  
rows <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#得到所有数据集 </span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> rows<span class="token punctuation">:</span>  
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d, %s, %s, %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#python3以上版本中print()要加括号用了</span>
  
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Number of rows returned: %d"</span> <span class="token operator">%</span> cursor<span class="token punctuation">.</span>rowcount<span class="token punctuation">)</span>  
  
cursor<span class="token punctuation">.</span>execute <span class="token punctuation">(</span><span class="token string">"SELECT * FROM STUDENT_TB"</span><span class="token punctuation">)</span>  
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  
    row <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#逐行得到数据集</span>
    <span class="token keyword">if</span> row <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">:</span>  
        <span class="token keyword">break</span>  
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%d, %s, %s, %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
      
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Number of rows returned: %d"</span> <span class="token operator">%</span> cursor<span class="token punctuation">.</span>rowcount<span class="token punctuation">)</span>
  
cursor<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span>  
conn<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre> 
<h3><a id="33_53"></a>3.3数据库插入</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> cx_Oracle  
  
conn <span class="token operator">=</span> cx_Oracle<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'xzp/xzp@localhost/testdb'</span><span class="token punctuation">)</span>    
cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>  
  
cursor<span class="token punctuation">.</span>execute <span class="token punctuation">(</span><span class="token string">"CREATE TABLE INSERTTEST(ID INT, C1 VARCHAR(50), C2 VARCHAR(50), C3 VARCHAR(50))"</span><span class="token punctuation">)</span>  
  
cursor<span class="token punctuation">.</span>execute <span class="token punctuation">(</span><span class="token string">"INSERT INTO INSERTTEST (ID, COL1, COL2, COL3)VALUES(1213412, 'asdfa', 'ewewe', 'sfjgsfg')"</span><span class="token punctuation">)</span>  
cursor<span class="token punctuation">.</span>execute <span class="token punctuation">(</span><span class="token string">"INSERT INTO INSERTTEST (ID, COL1, COL2, COL3)VALUES(12341, 'ashdfh', 'shhsdfh', 'sghs')"</span><span class="token punctuation">)</span>  
cursor<span class="token punctuation">.</span>execute <span class="token punctuation">(</span><span class="token string">"INSERT INTO INSERTTEST (ID, COL1, COL2, COL3)VALUES(123451235, 'werwerw', 'asdfaf', 'awew')"</span><span class="token punctuation">)</span>  
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#这里一定要commit才行，要不然数据是不会插入的 </span>
  
cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>  
conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="34__71"></a>3.4 实例从某网站上面爬取彩票号码</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re
<span class="token keyword">import</span> urllib
<span class="token keyword">import</span> cx_Oracle
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request
 
<span class="token keyword">def</span> <span class="token function">getHtml</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span>
	page <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
	html<span class="token operator">=</span> page<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> html
<span class="token keyword">def</span> <span class="token function">getNumber</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">:</span>
	reg <span class="token operator">=</span> <span class="token string">r'&lt;li class="ball_red"&gt;(\d{2})&lt;/li&gt;'</span>
	reg2 <span class="token operator">=</span> <span class="token string">r'&lt;li class="ball_blue"&gt;(\d{2})&lt;/li&gt;'</span>
	regqnumber <span class="token operator">=</span> <span class="token string">r'第 &lt;font class="cfont2"&gt;&lt;strong&gt;(\d*)&lt;/strong&gt;&lt;/font&gt;'</span>
	number <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>
	numberblue <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>reg2<span class="token punctuation">)</span>
	qnumber <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>regqnumber<span class="token punctuation">)</span>
	numberlist <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>number<span class="token punctuation">,</span>html<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	numberblue <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>numberblue<span class="token punctuation">,</span>html<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	qnum <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>qnumber<span class="token punctuation">,</span>html<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> number <span class="token keyword">in</span> numberblue<span class="token punctuation">:</span>
		numberlist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>number<span class="token punctuation">)</span>
	<span class="token keyword">for</span> n <span class="token keyword">in</span> qnum<span class="token punctuation">:</span>
		numberlist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>numberlist<span class="token punctuation">)</span>
	<span class="token keyword">return</span> numberlist
 
	<span class="token comment">#将查询到的号码入库</span>
<span class="token keyword">def</span> <span class="token function">RecodeToOracle</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	conn <span class="token operator">=</span> cx_Oracle<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">'xzp/xzp@localhost/testdb.domain'</span><span class="token punctuation">)</span>
	cur <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
	sql <span class="token operator">=</span> <span class="token string">"INSERT INTO SSQ (REDNUM1,REDNUM2,REDNUM3,REDNUM4,REDNUM5,REDNUM6,BLUENUM,QNUMBER) VALUES ('%s','%s','%s','%s','%s','%s','%s','%s')"</span><span class="token operator">%</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
	cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
	conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#这里一定要提交，要不然是没有办法将数据入库的</span>
	conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#记得要关闭会话</span>
<span class="token keyword">def</span> <span class="token function">Geturl</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">:</span>
	reg <span class="token operator">=</span> <span class="token string">r'上一期：&lt;a href="(.*)" target="_blank"&gt;'</span>
	url <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>
	urllist <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>url<span class="token punctuation">,</span>html<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gbk'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>urllist<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">:</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span>urllist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> urllist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token string">'http:'</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">:</span>
			urllist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'http:'</span><span class="token operator">+</span>urllist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
		htmlbefore <span class="token operator">=</span> getHtml<span class="token punctuation">(</span>urllist<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token comment"># print(htmlbefore)</span>
		numberlist <span class="token operator">=</span> getNumber<span class="token punctuation">(</span>htmlbefore<span class="token punctuation">)</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>numberlist<span class="token punctuation">)</span><span class="token punctuation">)</span>
		RecodeToOracle<span class="token punctuation">(</span>numberlist<span class="token punctuation">)</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span>numberlist<span class="token punctuation">)</span>
		Geturl<span class="token punctuation">(</span>htmlbefore<span class="token punctuation">)</span>
	<span class="token keyword">else</span><span class="token punctuation">:</span>	
		<span class="token keyword">return</span>
 
str1 <span class="token operator">=</span> <span class="token string">'网站地址'</span>
html1 <span class="token operator">=</span> getHtml<span class="token punctuation">(</span>str1<span class="token punctuation">)</span>
RecodeToOracle<span class="token punctuation">(</span>getNumber<span class="token punctuation">(</span>html1<span class="token punctuation">)</span><span class="token punctuation">)</span>
Geturl<span class="token punctuation">(</span>html1<span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_131"></a>四、异常</h2> 
<h3><a id="41DatabaseErrorDPI1047_132"></a>4.1、运行时，出现连接数据库失败:DatabaseError:DPI-1047</h3> 
<p><img src="https://images2.imgbox.com/c4/96/wFnLZSYF_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_134"></a>解决连接失败问题</h4> 
<h5><a id="1Oracle_135"></a>1、查看Oracle的版本号</h5> 
<pre><code>
#linux下查询
sqlplus / as sysdba
select * from v$version;
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/21/VbO67mXY_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2Oracle_143"></a>2、进入官网，下载对应Oracle版本</h5> 
<p>https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html<br> <img src="https://images2.imgbox.com/06/6b/O5J1EkgI_o.png" alt="在这里插入图片描述"><br> 将下载的包解压，添加到环境变量</p> 
<h5><a id="3cx_Oraclehttpswwwlfduciedugohlkepythonlibspyhook_147"></a>3.下载cx_Oracle包:https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyhook</h5> 
<p>ctrl+f 搜索：cx_Oracle，进入选择匹配python版本的包<br> 这里我的python版本是3.6 64位<br> <img src="https://images2.imgbox.com/2d/62/tqgle6I1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/42/90/I9wpzjii_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b6/cf/6n8DsENd_o.png" alt="在这里插入图片描述"><br> cmd进入下载cx_Oracle-8.1.0-cp36-cp36m-win_amd64.whl的目录，以下是我本地目录，应修改成你自己的下载目录安装最新下载的包</p> 
<pre><code class="prism language-python">pip install cx_Oracle<span class="token operator">-</span><span class="token number">8.1</span><span class="token number">.0</span><span class="token operator">-</span>cp36<span class="token operator">-</span>cp36m<span class="token operator">-</span>win_amd64<span class="token punctuation">.</span>whl
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/ba/swCM2cTO_o.png" alt="在这里插入图片描述"><br> 打开oracle版本的解压包，进入解压后的目录，C:\work\instantclient-basic-windows.x64-12.2.0.1.0\instantclient_12_2（换成你本地的目录，这里是我本地的），把所有的.dll文件全部拷贝到python的根目录<br> <img src="https://images2.imgbox.com/d0/98/SffYGRja_o.png" alt="在这里插入图片描述"><br> 拷贝到目录如下<br> <img src="https://images2.imgbox.com/7f/f3/FK6wKLas_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4python_162"></a>4.在使用python连接时，需要注意以下点：</h5> 
<p>1、需要下载已安装的oracle数据库对应的版本<br> 2、需要下载与python版本对应的cx_Oracle包<br> 3、需要把oracle版本的ddl文件放置python安装根目录下</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4252d9787064982903e85343bbc1f724/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">详细解决linux安装mysql后登录报错:Can‘t connect to local MySQL server through socket ‘/tmp/mysql.sock‘ (2)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9ea6f7d44734e7c2d6535e02b9cc91ef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于人体姿势估计的舞蹈检测（AI Dance based on Human Pose Estimation）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>