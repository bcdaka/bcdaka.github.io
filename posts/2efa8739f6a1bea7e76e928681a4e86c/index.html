<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Java 基础篇】Java UDP通信详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2efa8739f6a1bea7e76e928681a4e86c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Java 基础篇】Java UDP通信详解">
  <meta property="og:description" content="UDP（User Datagram Protocol）是一种无连接的网络传输协议，它不像TCP那样需要建立连接和维护状态，因此更加轻量级。UDP适用于那些对数据传输的实时性要求较高，可以容忍一定数据丢失的场景。本文将详细介绍Java中如何使用UDP协议进行网络通信，包括UDP套接字、数据传输、服务器和客户端的创建等。
1. UDP基础知识 1.1. UDP工作原理 UDP是一种面向数据报的协议，它将数据分成小块，每个数据块称为数据报。每个UDP数据报都包含了目标地址和端口号，数据报之间相互独立，不建立连接。UDP的工作原理如下：
发送方将数据分割成数据报，加上目标地址和端口号，然后通过网络发送出去。接收方根据目标地址和端口号接收数据报，然后将数据还原成完整的消息。 1.2. UDP的特点 无连接性：UDP不需要建立连接，发送方直接发送数据，接收方直接接收数据，无需三次握手等连接建立步骤。不可靠性：UDP不保证数据的可靠性和顺序性，数据可能会丢失或乱序。轻量级：UDP的头部开销小，传输效率高。广播和多播：UDP支持广播和多播，可以向多个目标发送数据。 2. Java UDP编程基础 Java提供了用于UDP编程的相关类，主要位于java.net包中。下面是UDP编程的基本步骤：
2.1. 创建UDP套接字 在Java中，可以使用DatagramSocket类来创建UDP套接字，用于发送和接收数据报。
import java.net.*; // 创建UDP套接字 DatagramSocket socket = new DatagramSocket(); 2.2. 发送UDP数据 使用DatagramPacket类来创建要发送的数据报，并将其发送到指定的目标地址和端口。
// 创建要发送的数据 byte[] sendData = &#34;Hello, UDP!&#34;.getBytes(); // 指定目标地址和端口 InetAddress serverAddress = InetAddress.getByName(&#34;localhost&#34;); int serverPort = 8888; // 创建数据报 DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, serverAddress, serverPort); // 发送数据报 socket.send(sendPacket); 2.3. 接收UDP数据 使用DatagramPacket类来创建一个用于接收数据报的缓冲区，并接收来自指定端口的数据。
// 创建接收数据的缓冲区 byte[] receiveData = new byte[1024]; // 创建接收数据报 DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-21T23:16:59+08:00">
    <meta property="article:modified_time" content="2023-09-21T23:16:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Java 基础篇】Java UDP通信详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/26/e4/HZxMw2Ec_o.png" alt="在这里插入图片描述"></p> 
<p>UDP（User Datagram Protocol）是一种无连接的网络传输协议，它不像TCP那样需要建立连接和维护状态，因此更加轻量级。UDP适用于那些对数据传输的实时性要求较高，可以容忍一定数据丢失的场景。本文将详细介绍Java中如何使用UDP协议进行网络通信，包括UDP套接字、数据传输、服务器和客户端的创建等。</p> 
<h3><a id="1_UDP_7"></a>1. UDP基础知识</h3> 
<h4><a id="11_UDP_9"></a>1.1. UDP工作原理</h4> 
<p>UDP是一种面向数据报的协议，它将数据分成小块，每个数据块称为数据报。每个UDP数据报都包含了目标地址和端口号，数据报之间相互独立，不建立连接。UDP的工作原理如下：</p> 
<ol><li>发送方将数据分割成数据报，加上目标地址和端口号，然后通过网络发送出去。</li><li>接收方根据目标地址和端口号接收数据报，然后将数据还原成完整的消息。</li></ol> 
<h4><a id="12_UDP_16"></a>1.2. UDP的特点</h4> 
<ul><li><strong>无连接性</strong>：UDP不需要建立连接，发送方直接发送数据，接收方直接接收数据，无需三次握手等连接建立步骤。</li><li><strong>不可靠性</strong>：UDP不保证数据的可靠性和顺序性，数据可能会丢失或乱序。</li><li><strong>轻量级</strong>：UDP的头部开销小，传输效率高。</li><li><strong>广播和多播</strong>：UDP支持广播和多播，可以向多个目标发送数据。</li></ul> 
<h3><a id="2_Java_UDP_23"></a>2. Java UDP编程基础</h3> 
<p>Java提供了用于UDP编程的相关类，主要位于<code>java.net</code>包中。下面是UDP编程的基本步骤：</p> 
<h4><a id="21_UDP_27"></a>2.1. 创建UDP套接字</h4> 
<p>在Java中，可以使用<code>DatagramSocket</code>类来创建UDP套接字，用于发送和接收数据报。</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token comment">// 创建UDP套接字</span>
<span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="22_UDP_40"></a>2.2. 发送UDP数据</h4> 
<p>使用<code>DatagramPacket</code>类来创建要发送的数据报，并将其发送到指定的目标地址和端口。</p> 
<pre><code class="prism language-java"><span class="token comment">// 创建要发送的数据</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sendData <span class="token operator">=</span> <span class="token string">"Hello, UDP!"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 指定目标地址和端口</span>
<span class="token class-name">InetAddress</span> serverAddress <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> serverPort <span class="token operator">=</span> <span class="token number">8888</span><span class="token punctuation">;</span>

<span class="token comment">// 创建数据报</span>
<span class="token class-name">DatagramPacket</span> sendPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>sendData<span class="token punctuation">,</span> sendData<span class="token punctuation">.</span>length<span class="token punctuation">,</span> serverAddress<span class="token punctuation">,</span> serverPort<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送数据报</span>
socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>sendPacket<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="23_UDP_59"></a>2.3. 接收UDP数据</h4> 
<p>使用<code>DatagramPacket</code>类来创建一个用于接收数据报的缓冲区，并接收来自指定端口的数据。</p> 
<pre><code class="prism language-java"><span class="token comment">// 创建接收数据的缓冲区</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> receiveData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 创建接收数据报</span>
<span class="token class-name">DatagramPacket</span> receivePacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>receiveData<span class="token punctuation">,</span> receiveData<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 接收数据报</span>
socket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>receivePacket<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 解析接收到的数据</span>
<span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>receivePacket<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> receivePacket<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"收到消息："</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="24_UDP_78"></a>2.4. 关闭UDP套接字</h4> 
<p>在完成UDP通信后，需要关闭UDP套接字以释放资源。</p> 
<pre><code class="prism language-java"><span class="token comment">// 关闭UDP套接字</span>
socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="3_Java_UDP_87"></a>3. Java UDP服务器和客户端示例</h3> 
<p>下面是一个简单的Java UDP服务器和客户端示例：</p> 
<p><strong>UDP服务器端代码：</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UDPServer</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 创建UDP套接字并绑定到指定端口</span>
            <span class="token class-name">DatagramSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"服务器已启动，等待客户端连接..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 创建接收数据的缓冲区</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> receiveData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>



            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 创建接收数据报</span>
                <span class="token class-name">DatagramPacket</span> receivePacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>receiveData<span class="token punctuation">,</span> receiveData<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// 接收数据报</span>
                serverSocket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>receivePacket<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// 解析接收到的数据</span>
                <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>receivePacket<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> receivePacket<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"收到消息："</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>UDP客户端代码：</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UDPClient</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 创建UDP套接字</span>
            <span class="token class-name">DatagramSocket</span> clientSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 创建要发送的数据</span>
            <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">"Hello, UDP!"</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sendData <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 指定服务器地址和端口</span>
            <span class="token class-name">InetAddress</span> serverAddress <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> serverPort <span class="token operator">=</span> <span class="token number">8888</span><span class="token punctuation">;</span>

            <span class="token comment">// 创建数据报</span>
            <span class="token class-name">DatagramPacket</span> sendPacket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>sendData<span class="token punctuation">,</span> sendData<span class="token punctuation">.</span>length<span class="token punctuation">,</span> serverAddress<span class="token punctuation">,</span> serverPort<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 发送数据报</span>
            clientSocket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>sendPacket<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 关闭UDP套接字</span>
            clientSocket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个示例中，UDP服务器不断接收来自客户端的消息，并将其打印出来。客户端发送一条消息到服务器。</p> 
<h3><a id="4__163"></a>4. 总结</h3> 
<p>本文介绍了Java中如何使用UDP协议进行网络通信，包括UDP的基础知识、UDP编程的基本步骤、创建UDP套接字、发送和接收UDP数据等内容。UDP适用于对数据传输的实时性要求较高的场景，但需要注意数据的不可靠性和无连接性。通过学习本文，您可以开始使用UDP协议来构建自己的网络应用程序。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/711d5698bbad8925ecd811a224950c26/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">改进召回（Retrieval）和引入重排（Reranking）提升RAG架构下的LLM应用效果</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c0a66f44952f73a8e770be52db8be9b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">华为云云耀云服务器L实例评测｜2核2G跑mysql性能测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>