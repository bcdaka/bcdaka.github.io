<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu22.04安装WordPress教程（利用nginx环境和MariaDB数据库，安装使用WordPress） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6514d4e9b76e4c96d08e06eda12ec88e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Ubuntu22.04安装WordPress教程（利用nginx环境和MariaDB数据库，安装使用WordPress）">
  <meta property="og:description" content="环境:ubunutu22.04.2LTS
利用nginx环境和MariaDB数据库，安装使用WordPress 前置条件 本教程需要已经在 Ubuntu 20.04 上设置了 LEMP 堆栈。如果没有，请查看以下教程。
-如何在ubuntu22.04上安装 LEMP堆栈（Nginx，MairaDB，PHP） 完成缺省的安装后，请返回此处继续阅读。
第 1 步：下载 WordPress 更新现有软件
sudo apt update &amp;&amp; sudo apt upgrade
在终端中，键入 wget 命令，输入链接 ，下载wordpress
wget https://wordpress.org/latest.zip
随后使用以下命令解压缩下载的wordpress zip文档
sudo apt install unzip
sudo mkdir -p /usr/share/nginx
sudo unzip latest.zip -d /usr/share/nginx/
文档将被提取到 /usr/share/nginx/ 目录中,并创建一个新目录( /usr/share/nginx/wordpress )
第 2 步：为 WordPress 网站创建数据库和用户 使用以下命令以 root 身份登录 MariaDB shell。
sudo mariadb -u root
登录后，使用以下命令为 WordPress 创建数据库。
create database wordpress;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-27T00:22:06+08:00">
    <meta property="article:modified_time" content="2023-11-27T00:22:06+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu22.04安装WordPress教程（利用nginx环境和MariaDB数据库，安装使用WordPress）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>环境:ubunutu22.04.2LTS</p> 
<ul><li>利用nginx环境和MariaDB数据库，安装使用WordPress</li></ul> 
<h2><a id="_2"></a>前置条件</h2> 
<p>本教程需要已经在 Ubuntu 20.04 上设置了 LEMP 堆栈。如果没有，请查看以下教程。<br> -<a href="https://blog.csdn.net/Yekong_/article/details/134539718">如何在ubuntu22.04上安装 LEMP堆栈（Nginx，MairaDB，PHP） </a><br> 完成缺省的安装后，请返回此处继续阅读。</p> 
<h2><a id="_1__WordPress_6"></a>第 1 步：下载 WordPress</h2> 
<p>更新现有软件</p> 
<blockquote> 
 <p>sudo apt update &amp;&amp; sudo apt upgrade</p> 
</blockquote> 
<p>在终端中，键入 <strong>wget</strong> 命令，输入链接 ，下载wordpress</p> 
<blockquote> 
 <p>wget https://wordpress.org/latest.zip</p> 
</blockquote> 
<p>随后使用以下命令解压缩下载的wordpress zip文档</p> 
<blockquote> 
 <p>sudo apt install unzip<br> sudo mkdir -p /usr/share/nginx<br> sudo unzip latest.zip -d /usr/share/nginx/</p> 
</blockquote> 
<p>文档将被提取到 /usr/share/nginx/ 目录中,并创建一个新目录( /usr/share/nginx/wordpress )</p> 
<h2><a id="_2__WordPress__19"></a>第 2 步：为 WordPress 网站创建数据库和用户</h2> 
<p>使用以下命令以 root 身份登录 MariaDB shell。</p> 
<blockquote> 
 <p>sudo mariadb -u root</p> 
</blockquote> 
<p>登录后，使用以下命令为 WordPress 创建数据库。</p> 
<blockquote> 
 <p>create database wordpress;</p> 
</blockquote> 
<p>然后输入以下命令为 WordPress 创建数据库用户。此命令还向用户授予 WordPress 数据库的所有权限。将 <strong>用户名</strong>和<strong>密码</strong> 替换为你自己要设置的用户名和密码。</p> 
<blockquote> 
 <p>grant all privileges on wordpress.* to 用户名@localhost identified by ‘密码’;</p> 
</blockquote> 
<p>刷新权限表以使更改生效，然后退出 MariaDB shell。</p> 
<blockquote> 
 <p>flush privileges;<br> exit;</p> 
</blockquote> 
<p>注：上述代码指令部分全大写或全小写</p> 
<h2><a id="_3__WordPress_34"></a>第 3 步：配置 WordPress</h2> 
<p>转到WordPress 所在目录。</p> 
<blockquote> 
 <p>cd /usr/share/nginx/wordpress/</p> 
</blockquote> 
<p>复制示例配置文件并将其重命名为 :<strong>wp-config.php</strong></p> 
<blockquote> 
 <p>sudo cp wp-config-sample.php wp-config.php</p> 
</blockquote> 
<p>现在使用文本编辑器（如 vim）编辑新的配置文件。</p> 
<blockquote> 
 <p>sudo vim wp-config.php</p> 
</blockquote> 
<p>找到以下行，并将下方中文文本替换为您在上一步中创建的数据库名称、用户名和密码。</p> 
<pre><code>/** The name of the database for WordPress */
define('DB_NAME', '这里填你自己创建的数据库名称');

/** MySQL database username */
define('DB_USER', '这里是你自己创建的用户名');

/** MySQL database password */
define('DB_PASSWORD', '这里是你自己设置的密码');
</code></pre> 
<p>我们还需要使用以下命令将 Nginx 用户设置为 WordPress 站点目录的所有者。</p> 
<blockquote> 
 <p>sudo chown www-data:www-data /usr/share/nginx/wordpress/ -R</p> 
</blockquote> 
<h2><a id="_4__WordPress__Nginx__57"></a>第 4 步：为 WordPress 创建 Nginx 服务器块</h2> 
<p>在目录中创建服务器块文件</p> 
<blockquote> 
 <p>sudo vim /etc/nginx/conf.d/wordpress.conf</p> 
</blockquote> 
<p>将以下文本放入文件中</p> 
<pre><code>server {
  listen 80;
  listen [::]:80;
  server_name www.wordpress wordpress;
  root /usr/share/nginx/wordpress/;
  index index.php index.html index.htm index.nginx-debian.html;

  location / {
    try_files $uri $uri/ /index.php;
  }

   location ~ ^/wp-json/ {
     rewrite ^/wp-json/(.*?)$ /?rest_route=/$1 last;
   }

  location ~* /wp-sitemap.*\.xml {
    try_files $uri $uri/ /index.php$is_args$args;
  }

  error_page 404 /404.html;
  error_page 500 502 503 504 /50x.html;

  client_max_body_size 20M;

  location = /50x.html {
    root /usr/share/nginx/html;
  }

  location ~ \.php$ {
    fastcgi_pass unix:/run/php/php8.1-fpm.sock;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
    include snippets/fastcgi-php.conf;
    fastcgi_buffers 1024 4k;
    fastcgi_buffer_size 128k;

    # Add headers to serve security related headers
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Permitted-Cross-Domain-Policies none;
    add_header X-Frame-Options "SAMEORIGIN";
  }

  #enable gzip compression
  gzip on;
  gzip_vary on;
  gzip_min_length 1000;
  gzip_comp_level 5;
  gzip_types application/json text/css application/x-javascript application/javascript image/svg+xml;
  gzip_proxied any;

  # A long browser cache lifetime can speed up repeat visits to your page
  location ~* \.(jpg|jpeg|gif|png|webp|svg|woff|woff2|ttf|css|js|ico|xml)$ {
       access_log        off;
       log_not_found     off;
       expires           360d;
  }
 }
</code></pre> 
<p>保存并关闭文件。然后测试 Nginx 配置。</p> 
<blockquote> 
 <p>sudo nginx -t</p> 
</blockquote> 
<p>如果测试成功，请重新加载 Nginx。</p> 
<blockquote> 
 <p>sudo systemctl reload nginx</p> 
</blockquote> 
<p>在浏览器地址栏中如下输入。</p> 
<blockquote> 
 <p>localhost/wp-admin/install.php</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/b3/f7/96WIMVaS_o.jpg" alt="请添加图片描述"><br> 如果未显示安装向导，则可能需要安装一些 PHP 扩展。</p> 
<blockquote> 
 <p>sudo apt install php-imagick php-fpm php-mbstring php-bcmath php-xml php-mysql php-common php-gd php-json php-cli php-curl php-zip</p> 
</blockquote> 
<p>然后重新加载 PHP-FPM 和 Nginx服务。现在应该显示向导。</p> 
<blockquote> 
 <p>sudo systemctl reload php8.1-fpm nginx</p> 
</blockquote> 
<h2><a id="5_138"></a>第5步：使用安装向导完成安装</h2> 
<p>如图填写信息创建一个管理员帐户，然后单击页面左下角“安装 WordPress”按钮。<br> <img src="https://images2.imgbox.com/8c/25/wS8waOui_o.png" alt="在这里插入图片描述"></p> 
<p>现在你的新 WordPress 网站已安装完毕。<br> <img src="https://images2.imgbox.com/e7/70/NggaXE2e_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6_HTTPS_147"></a>第6步：启用 HTTPS</h2> 
<p>要加密 HTTP 流量，我们可以通过安装 Let’s Encrypt 颁发的免费 TLS 证书来启用 HTTPS。运行以下命令以在 Ubuntu 22.04上安装 Let’s Encrypt 客户端 （certbot）。</p> 
<blockquote> 
 <p>sudo apt install certbot python3-certbot-nginx</p> 
</blockquote> 
<p>并运行此命令以获取并安装 TLS 证书。</p> 
<blockquote> 
 <p>sudo certbot --nginx --agree-tos --redirect --hsts --staple-ocsp --email you@example.com -d domainname1,domainname2</p> 
</blockquote> 
<ul><li>–nginx：使用 Nginx 插件。</li><li>–agree-tos：同意服务条款。</li><li>–redirect：强制 HTTPS by 301 重定向。</li><li>–hsts：将 Strict-Transport-Security 标头添加到每个 HTTP 响应中。强制浏览器始终对域使用 TLS。防御 SSL/TLS 剥离。</li><li>–staple-ocsp：启用 OCSP 装订。有效的 OCSP 响应将装订到服务器在 TLS 期间提供的证书中。</li><li>–email：用于注册和恢复联系人的电子邮件。</li><li>-d 后跟一个域名列表，用逗号分隔。最多可以添加 100 个域名。</li></ul> 
<p>重新加载WordPress设置向导，即可看到HTTP自动重定向到HTTPS连接。</p> 
<h3><a id="_www__www_164"></a>如何将 www 重定向到非 www（反之亦然）</h3> 
<p>我们已经启用了将 HTTP 重定向到 HTTPS，剩下要做的就是将 www 重定向到非 www，反之亦然。这很容易。只需转到 WordPress <strong>仪表板</strong>&gt;设置&gt;<strong>常规</strong>，然后在 <strong>WordPress</strong> 地址和<strong>站点地址</strong>中<strong>设置</strong>您的首选版本（www 或非 www）。请务必包含前缀。<code>https://</code><br> <img src="https://images2.imgbox.com/18/a2/4nEdWLnc_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="QA_168"></a>常见问题Q&amp;A:</h2> 
<h4><a id="_169"></a>待补充</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c32d792971840cf0700de1739d7289a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Midjourney可以通过接口调用啦</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af16eec20f5841b02b2fa84753f99114/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">jdk17安装全方位手把手安装教程 / 已有jdk8了，安装JDK17后如何配置环境变量 / 多个不同版本的JDK，如何配置环境变量？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>