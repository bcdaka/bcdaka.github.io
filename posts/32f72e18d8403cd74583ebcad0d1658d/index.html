<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python知识点：如何使用Appium进行移动应用测试 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/32f72e18d8403cd74583ebcad0d1658d/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python知识点：如何使用Appium进行移动应用测试">
  <meta property="og:description" content="Appium 是一个开源的测试工具，用于自动化移动应用的测试。它支持多种平台，如Android和iOS。以下是使用Appium进行移动应用测试的详细指南。
1. 安装Appium 首先，你需要安装Appium。Appium可以通过Node.js进行安装：
npm install -g appium 安装完成后，可以通过命令启动Appium服务器：
appium 2. 安装Appium客户端库 你还需要安装Appium的客户端库，以便在代码中与Appium服务器进行通信。可以使用pip安装Python客户端：
pip install Appium-Python-Client 3. 安装并配置Appium Desktop（可选） Appium Desktop是一个带有图形用户界面的工具，便于配置和管理Appium服务器。你可以从Appium官网下载并安装它。安装后，启动Appium服务器，并配置所需的Desired Capabilities。
4. 设置开发环境 你需要在开发环境中安装必要的工具，例如：
Java Development Kit (JDK)：Appium依赖于Java。Android SDK：用于Android设备测试。Xcode：用于iOS设备测试。 确保将这些工具添加到系统的环境变量中。
5. 配置Desired Capabilities Desired Capabilities用于指定设备和应用程序的配置。这些配置可以在测试脚本中定义，告诉Appium要测试哪个设备、哪个应用等。
以下是一个示例的Desired Capabilities配置，用于Android设备：
from appium import webdriver desired_caps = { &#34;platformName&#34;: &#34;Android&#34;, &#34;deviceName&#34;: &#34;Android Emulator&#34;, &#34;app&#34;: &#34;/path/to/your/app.apk&#34;, &#34;appPackage&#34;: &#34;com.example.android&#34;, &#34;appActivity&#34;: &#34;com.example.android.MainActivity&#34;, &#34;automationName&#34;: &#34;UiAutomator2&#34; } driver = webdriver.Remote(&#39;http://localhost:4723/wd/hub&#39;, desired_caps) 6. 编写测试脚本 一旦配置了Desired Capabilities，可以开始编写测试脚本。以下是一个简单的示例，它启动应用并进行基本的UI操作。
from appium import webdriver from appium.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-31T08:33:20+08:00">
    <meta property="article:modified_time" content="2024-08-31T08:33:20+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python知识点：如何使用Appium进行移动应用测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Appium 是一个开源的测试工具，用于自动化移动应用的测试。它支持多种平台，如Android和iOS。以下是使用Appium进行移动应用测试的详细指南。</p> 
<h4><a id="1_Appium_2"></a>1. 安装Appium</h4> 
<p>首先，你需要安装Appium。Appium可以通过Node.js进行安装：</p> 
<pre><code class="prism language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> appium
</code></pre> 
<p>安装完成后，可以通过命令启动Appium服务器：</p> 
<pre><code class="prism language-bash">appium
</code></pre> 
<h4><a id="2_Appium_16"></a>2. 安装Appium客户端库</h4> 
<p>你还需要安装Appium的客户端库，以便在代码中与Appium服务器进行通信。可以使用pip安装Python客户端：</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> Appium-Python-Client
</code></pre> 
<h4><a id="3_Appium_Desktop_24"></a>3. 安装并配置Appium Desktop（可选）</h4> 
<p>Appium Desktop是一个带有图形用户界面的工具，便于配置和管理Appium服务器。你可以从<a href="http://appium.io/" rel="nofollow">Appium官网</a>下载并安装它。安装后，启动Appium服务器，并配置所需的Desired Capabilities。</p> 
<h4><a id="4__28"></a>4. 设置开发环境</h4> 
<p>你需要在开发环境中安装必要的工具，例如：</p> 
<ul><li><strong>Java Development Kit (JDK)</strong>：Appium依赖于Java。</li><li><strong>Android SDK</strong>：用于Android设备测试。</li><li><strong>Xcode</strong>：用于iOS设备测试。</li></ul> 
<p>确保将这些工具添加到系统的环境变量中。</p> 
<h4><a id="5_Desired_Capabilities_38"></a>5. 配置Desired Capabilities</h4> 
<p>Desired Capabilities用于指定设备和应用程序的配置。这些配置可以在测试脚本中定义，告诉Appium要测试哪个设备、哪个应用等。</p> 
<p>以下是一个示例的Desired Capabilities配置，用于Android设备：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver

desired_caps <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"platformName"</span><span class="token punctuation">:</span> <span class="token string">"Android"</span><span class="token punctuation">,</span>
    <span class="token string">"deviceName"</span><span class="token punctuation">:</span> <span class="token string">"Android Emulator"</span><span class="token punctuation">,</span>
    <span class="token string">"app"</span><span class="token punctuation">:</span> <span class="token string">"/path/to/your/app.apk"</span><span class="token punctuation">,</span>
    <span class="token string">"appPackage"</span><span class="token punctuation">:</span> <span class="token string">"com.example.android"</span><span class="token punctuation">,</span>
    <span class="token string">"appActivity"</span><span class="token punctuation">:</span> <span class="token string">"com.example.android.MainActivity"</span><span class="token punctuation">,</span>
    <span class="token string">"automationName"</span><span class="token punctuation">:</span> <span class="token string">"UiAutomator2"</span>
<span class="token punctuation">}</span>

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">'http://localhost:4723/wd/hub'</span><span class="token punctuation">,</span> desired_caps<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="6__59"></a>6. 编写测试脚本</h4> 
<p>一旦配置了Desired Capabilities，可以开始编写测试脚本。以下是一个简单的示例，它启动应用并进行基本的UI操作。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> appium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>common<span class="token punctuation">.</span>mobileby <span class="token keyword">import</span> MobileBy
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support<span class="token punctuation">.</span>ui <span class="token keyword">import</span> WebDriverWait
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>support <span class="token keyword">import</span> expected_conditions <span class="token keyword">as</span> EC

<span class="token comment"># Desired Capabilities配置</span>
desired_caps <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"platformName"</span><span class="token punctuation">:</span> <span class="token string">"Android"</span><span class="token punctuation">,</span>
    <span class="token string">"deviceName"</span><span class="token punctuation">:</span> <span class="token string">"Android Emulator"</span><span class="token punctuation">,</span>
    <span class="token string">"app"</span><span class="token punctuation">:</span> <span class="token string">"/path/to/your/app.apk"</span><span class="token punctuation">,</span>
    <span class="token string">"appPackage"</span><span class="token punctuation">:</span> <span class="token string">"com.example.android"</span><span class="token punctuation">,</span>
    <span class="token string">"appActivity"</span><span class="token punctuation">:</span> <span class="token string">"com.example.android.MainActivity"</span><span class="token punctuation">,</span>
    <span class="token string">"automationName"</span><span class="token punctuation">:</span> <span class="token string">"UiAutomator2"</span>
<span class="token punctuation">}</span>

<span class="token comment"># 创建WebDriver实例</span>
driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">'http://localhost:4723/wd/hub'</span><span class="token punctuation">,</span> desired_caps<span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 等待某个元素可见</span>
    element <span class="token operator">=</span> WebDriverWait<span class="token punctuation">(</span>driver<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>until<span class="token punctuation">(</span>
        EC<span class="token punctuation">.</span>presence_of_element_located<span class="token punctuation">(</span><span class="token punctuation">(</span>MobileBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"com.example.android:id/button1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token comment"># 点击元素</span>
    element<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 获取文本内容</span>
    text_element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>MobileBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"com.example.android:id/textview"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>text_element<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token comment"># 退出应用</span>
    driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="7__99"></a>7. 运行测试脚本</h4> 
<p>将你的测试脚本保存为Python文件（例如 <code>test_app.py</code>），然后使用Python解释器运行它：</p> 
<pre><code class="prism language-bash">python test_app.py
</code></pre> 
<h4><a id="8_Appium_Inspector_107"></a>8. 使用Appium Inspector（可选）</h4> 
<p>Appium Inspector可以帮助你查看应用的UI层次结构，定位元素，以及生成XPath等定位策略。你可以通过Appium Desktop启动Inspector，连接到你的应用，并获取元素的详细信息。</p> 
<h4><a id="9__111"></a>9. 处理常见挑战</h4> 
<ul><li><strong>等待元素加载</strong>：在移动应用中，UI元素的加载可能需要时间。使用 <code>WebDriverWait</code> 和 <code>expected_conditions</code> 来处理动态加载的元素。</li><li><strong>切换上下文</strong>：如果你的应用包含WebView，需要在Native和WebView上下文之间切换。使用 <code>driver.contexts</code> 获取上下文列表，然后使用 <code>driver.switch_to.context()</code> 切换上下文。</li></ul> 
<h4><a id="10_iOS_116"></a>10. 示例：在iOS设备上测试</h4> 
<p>对于iOS设备，Desired Capabilities的配置略有不同。以下是一个简单的iOS测试示例：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> appium <span class="token keyword">import</span> webdriver

desired_caps <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"platformName"</span><span class="token punctuation">:</span> <span class="token string">"iOS"</span><span class="token punctuation">,</span>
    <span class="token string">"deviceName"</span><span class="token punctuation">:</span> <span class="token string">"iPhone Simulator"</span><span class="token punctuation">,</span>
    <span class="token string">"platformVersion"</span><span class="token punctuation">:</span> <span class="token string">"14.0"</span><span class="token punctuation">,</span>
    <span class="token string">"app"</span><span class="token punctuation">:</span> <span class="token string">"/path/to/your/app.app"</span><span class="token punctuation">,</span>
    <span class="token string">"automationName"</span><span class="token punctuation">:</span> <span class="token string">"XCUITest"</span>
<span class="token punctuation">}</span>

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Remote<span class="token punctuation">(</span><span class="token string">'http://localhost:4723/wd/hub'</span><span class="token punctuation">,</span> desired_caps<span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 在iOS上执行类似的操作</span>
    element <span class="token operator">=</span> driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span>MobileBy<span class="token punctuation">.</span>ACCESSIBILITY_ID<span class="token punctuation">,</span> <span class="token string">"Button"</span><span class="token punctuation">)</span>
    element<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">finally</span><span class="token punctuation">:</span>
    driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="11_Page_Object_Model_POM__142"></a>11. 使用Page Object Model (POM) 进行测试组织</h4> 
<p>Page Object Model (POM) 是一种设计模式，通过将页面的UI元素和操作封装在类中，提高测试代码的可维护性。你可以创建不同的类来表示应用的不同页面，并将元素查找和操作封装到这些类中。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">LoginPage</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> driver<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> driver
        self<span class="token punctuation">.</span>username_field <span class="token operator">=</span> <span class="token punctuation">(</span>MobileBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"com.example.android:id/username"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>password_field <span class="token operator">=</span> <span class="token punctuation">(</span>MobileBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"com.example.android:id/password"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>login_button <span class="token operator">=</span> <span class="token punctuation">(</span>MobileBy<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> <span class="token string">"com.example.android:id/login"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token operator">*</span>self<span class="token punctuation">.</span>username_field<span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>username<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token operator">*</span>self<span class="token punctuation">.</span>password_field<span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>password<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>find_element<span class="token punctuation">(</span><span class="token operator">*</span>self<span class="token punctuation">.</span>login_button<span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在测试脚本中，可以使用这个Page Object：</p> 
<pre><code class="prism language-python">login_page <span class="token operator">=</span> LoginPage<span class="token punctuation">(</span>driver<span class="token punctuation">)</span>
login_page<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"pass"</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="12__167"></a>12. 结论</h4> 
<p>使用Appium进行移动应用测试非常强大，它允许你在多种平台上进行自动化测试。通过合理配置Desired Capabilities，使用适当的等待机制和组织测试代码，你可以创建高效、可维护的自动化测试套件。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00b0d920ecca4ecd7caab76a0129e756/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Websocket测试工具,在线调试 - 在线工具</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e094c51bd1cd94a1c5ee814d98c053b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">网络基础知识</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>