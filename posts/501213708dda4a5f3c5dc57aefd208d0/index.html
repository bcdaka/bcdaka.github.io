<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL表的增删改查（进阶） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/501213708dda4a5f3c5dc57aefd208d0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL表的增删改查（进阶）">
  <meta property="og:description" content="博主主页: 码农派大星.
数据库专栏:MySQL数据库
关注博主带你了解更多MySQL数据库知识
1. 新增 create table student (id int, name varchar(20)); create table student2 (id int, name varchar(20)); insert into student values(1,&#39;张三&#39;),(2,&#39;李四&#39;),(3,&#39;王五&#39;),(100,&#39;赵六&#39;); insert into student2 select *from student where id&lt;50; 2. 查询 1 聚合查询 1.1 聚合函数 count: select count(*) from exam; 插入一行空值,查询也会算一行,所以查询为8
如果查询实在的属性 ,null则不算一行.
还有以下操作,大家可以看看:
sum: SELECT SUM(列名) FROM exam; 必须确保求和的每一列为数字.
求和不为数字时为0,并报告有警告: 并且在sum求和中,遇见null会直接跳过.
sum也会逐个列相加求总和:
avg: SELECT avg(列名) FROM exam; max和min也是如此操作.
2 GROUP BY子句 SELECT 中使用 GROUP BY 子句可以对指定列进行分组查询。需要满足：使用 GROUP BY 进行分组查询时，SELECT 指定的字段必须是“分组依据字段”，其他字段若想出现在SELECT 中则必须包含在聚合函数中。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-22T11:37:14+08:00">
    <meta property="article:modified_time" content="2024-05-22T11:37:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL表的增删改查（进阶）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="399" src="https://images2.imgbox.com/a6/c5/WlmXphbG_o.jpg" width="399"></p> 
<p style="text-align:center;"> 博主主页: <a class="link-info" href="https://blog.csdn.net/jj666mhhh?spm=1011.2447.3001.5343" title="码农派大星.">码农派大星.</a></p> 
<p style="text-align:center;"><span style="color:#fe2c24;"><strong>数据库专栏:</strong></span><a class="link-info" href="https://blog.csdn.net/jj666mhhh/category_12678080.html?spm=1001.2014.3001.5482" title="MySQL数据库">MySQL数据库</a></p> 
<p style="text-align:center;"><strong>关注博主带你了解更多MySQL数据库知识</strong></p> 
<hr> 
<h2>1. 新增</h2> 
<pre><code> create table student (id int, name varchar(20));
 create table student2 (id int, name varchar(20));
 insert into student values(1,'张三'),(2,'李四'),(3,'王五'),(100,'赵六');
 insert into student2 select *from student where id&lt;50;</code></pre> 
<p><img alt="" height="623" src="https://images2.imgbox.com/0b/54/P4ZrNKtB_o.png" width="1017"></p> 
<h2>2. 查询 </h2> 
<h3>1 聚合查询</h3> 
<h4>1.1 聚合函数</h4> 
<p><img alt="" height="202" src="https://images2.imgbox.com/a8/e7/3UQrcxI8_o.png" width="668"></p> 
<p> <img alt="" height="563" src="https://images2.imgbox.com/a5/31/4j7pvlZg_o.png" width="816"></p> 
<h5>count: </h5> 
<pre><code>select count(*) from exam;</code></pre> 
<p><img alt="" height="188" src="https://images2.imgbox.com/be/ce/MhHVVCS1_o.png" width="493"><img alt="" height="188" src="https://images2.imgbox.com/1e/11/9RJriUcX_o.png" width="491"></p> 
<p>插入一行空值,查询也会算一行,所以查询为8</p> 
<p><img alt="" height="613" src="https://images2.imgbox.com/f9/ef/I1dviZNd_o.png" width="756"></p> 
<p>如果查询实在的属性 ,null则不算一行.</p> 
<p><img alt="" height="223" src="https://images2.imgbox.com/2f/f2/MXiOGfi6_o.png" width="514"></p> 
<p>还有以下操作,大家可以看看:</p> 
<p><img alt="" height="385" src="https://images2.imgbox.com/e0/54/3ZY1dqP1_o.png" width="450"><img alt="" height="135" src="https://images2.imgbox.com/0a/f3/Bt4H3ZkM_o.png" width="441"></p> 
<h5>sum:</h5> 
<pre><code>SELECT SUM(列名) FROM exam;</code></pre> 
<p><strong><span style="color:#fe2c24;">必须确保求和的每一列为数字.</span></strong></p> 
<p><img alt="" height="525" src="https://images2.imgbox.com/49/b7/L3MZl24v_o.png" width="669"></p> 
<p>求和不为数字时为0,并报告有警告: </p> 
<p><img alt="" height="185" src="https://images2.imgbox.com/1b/de/hPV5yLsH_o.png" width="493"></p> 
<p>并且在sum求和中,遇见null会直接跳过.</p> 
<p>sum也会逐个列相加求总和:</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/f8/51/5TAOu1Lt_o.png" width="661"></p> 
<h5>avg:</h5> 
<pre><code>SELECT avg(列名) FROM exam;</code></pre> 
<p><img alt="" height="191" src="https://images2.imgbox.com/7b/5d/0q0s3Y7Q_o.png" width="644"></p> 
<p>max和min也是如此操作.</p> 
<h4>2 GROUP BY子句</h4> 
<p>SELECT 中使用 GROUP BY 子句可以对指定列进行<span style="color:#fe2c24;"><strong>分组查询</strong></span>。需要满足：使用 GROUP BY 进行分组查询时，SELECT 指定的字段必须是“分组依据字段”，其他字段若想出现在SELECT 中则必须包含在<strong>聚合函数</strong>中。</p> 
<p><img alt="" height="525" src="https://images2.imgbox.com/33/52/vkaAowpZ_o.png" width="597"></p> 
<p>统计员工类型与人数:</p> 
<p><img alt="" height="216" src="https://images2.imgbox.com/71/32/8AZECIiF_o.png" width="692"></p> 
<p>求各个岗位平均薪资;</p> 
<p><img alt="" height="220" src="https://images2.imgbox.com/86/66/Tysqy4Y7_o.png" width="688"> 求各个岗位平均,最高,最低工资:</p> 
<p><img alt="" height="221" src="https://images2.imgbox.com/cf/a8/WPR64PmF_o.png" width="994"> 求各个岗位平均工资并按降序排序:</p> 
<p><img alt="" height="234" src="https://images2.imgbox.com/96/37/uDeICdDW_o.png" width="1009"></p> 
<h5>搭配条件来使用: </h5> 
<h6>分组之前的条件查询:</h6> 
<p>除去张三后的平均工资查询:</p> 
<p><img alt="" height="218" src="https://images2.imgbox.com/8a/c5/Inb1Ny7L_o.png" width="915"></p> 
<h3>3.HAVING </h3> 
<p>GROUP BY 子句进行分组以后，需要对分组结果再进行条件过滤时，不能使用 WHERE 语句，而需要用 HAVING</p> 
<h6>分组之后的条件查询:</h6> 
<p>查询平均薪资,排除超过5w的记录:</p> 
<p><img alt="" height="205" src="https://images2.imgbox.com/11/8a/iXaHzrSc_o.png" width="1187"></p> 
<p> 一个查询,可以同时包含分组之前,分组之后的条件</p> 
<p>统计平均薪资,除去张三也排除超过5w的:</p> 
<p><img alt="" height="227" src="https://images2.imgbox.com/53/81/MFIvmGgH_o.png" width="1200"></p> 
<h2>3.联合查询</h2> 
<p>实际开发中往往数据来自不同的表，所以需要多表联合查询。多表查询是对多张表的数据取笛卡尔积：</p> 
<p> <img alt="" height="449" src="https://images2.imgbox.com/3b/21/JmcC2rHC_o.png" width="465"></p> 
<h2><img alt="" height="375" src="https://images2.imgbox.com/3c/b9/2zxxG0kI_o.png" width="696"></h2> 
<p> <img alt="" height="245" src="https://images2.imgbox.com/00/18/K9LiNU39_o.png" width="955"></p> 
<p></p> 
<hr> 
<p><img alt="" height="309" src="https://images2.imgbox.com/0c/3d/mP6Tbxq8_o.png" width="776"> <img alt="" height="584" src="https://images2.imgbox.com/4e/a1/y1Ghyn8M_o.png" width="491"></p> 
<p><img alt="" height="529" src="https://images2.imgbox.com/eb/8b/vMFsp1d6_o.png" width="976"></p> 
<h3 style="background-color:transparent;">1.内连接</h3> 
<pre><code>select 字段 from 表1 别名1 [inner] join 表2 别名2 on 连接条件 and 其他条件;
select 字段 from 表1 别名1,表2 别名2 where 连接条件 and 其他条件;</code></pre> 
<p><img alt="" height="273" src="https://images2.imgbox.com/ee/a4/7bCs1ghm_o.png" width="525"> </p> 
<h4>（1）查询“许仙”同学的 成绩</h4> 
<p>判断完,进行笛卡尔积:</p> 
<p><img alt="" height="415" src="https://images2.imgbox.com/78/f0/viXJghD5_o.png" width="1182"></p> 
<p>指定条件,筛选无用信息:</p> 
<p><img alt="" height="602" src="https://images2.imgbox.com/99/ed/jdzHL5sI_o.png" width="1109"></p> 
<p>进一步指定条件,再筛选: </p> 
<p><img alt="" height="224" src="https://images2.imgbox.com/03/b7/ixaLS55l_o.png" width="1030"> 针对查询的列,精简:<img alt="" height="269" src="https://images2.imgbox.com/6f/17/VI0zgFMI_o.png" width="1200"> </p> 
<p>另一个写法(join):</p> 
<p><img alt="" height="460" src="https://images2.imgbox.com/54/46/VnVziukN_o.png" width="1122"></p> 
<p><img alt="" height="611" src="https://images2.imgbox.com/31/d5/11nbspdj_o.png" width="1177"></p> 
<p><img alt="" height="238" src="https://images2.imgbox.com/00/d6/zboWpJ9j_o.png" width="1200"></p> 
<h4><img alt="" height="252" src="https://images2.imgbox.com/74/c8/8UucIGOT_o.png" width="1200"></h4> 
<h4 style="background-color:transparent;">（2）查询所有同学的总成绩，及同学的个人信息： </h4> 
<p>先明确信息来自那些表?</p> 
<p>再笛卡尔积:</p> 
<p><img alt="" height="524" src="https://images2.imgbox.com/c5/f0/tBhzS8Kw_o.png" width="1120"></p> 
<p>筛选:</p> 
<p><img alt="" height="606" src="https://images2.imgbox.com/3f/b4/XNALBwU4_o.png" width="1125"></p> 
<p>分组聚合:<img alt="" height="320" src="https://images2.imgbox.com/e2/ea/Sv039USP_o.png" width="1193"> 完成:</p> 
<p><img alt="" height="324" src="https://images2.imgbox.com/0e/f6/VH1jNdLh_o.png" width="1200"></p> 
<p>join写法:<img alt="" height="319" src="https://images2.imgbox.com/de/c9/Co8ycGVW_o.png" width="1200"></p> 
<h4 style="background-color:transparent;"> （3）查询所有同学的成绩，及同学的个人信息： </h4> 
<p>根据需求,查看需要查询哪些信息;</p> 
<p>课程的名字 ,成绩 和学生的姓名</p> 
<p>再进行笛卡尔积<img alt="" height="604" src="https://images2.imgbox.com/f0/18/44hIY6Iw_o.png" width="1200"></p> 
<p>指定连接条件:<img alt="" height="582" src="https://images2.imgbox.com/a1/ca/CJ5gka8i_o.png" width="1200"> 进行精简:</p> 
<p><img alt="" height="611" src="https://images2.imgbox.com/ee/d0/4ki76xny_o.png" width="1200"></p> 
<p>通过join 写:</p> 
<pre><code class="hljs">-- 左外连接，表1完全显示
select 字段名  from 表名1 left join 表名2 on 连接条件;
-- 右外连接，表2完全显示
select 字段 from 表名1 right join 表名2 on 连接条件;
</code></pre> 
<p> </p> 
<h3 style="background-color:transparent;">2.外连接 </h3> 
<p>外连接分为左外连接和右外连接。如果联合查询，左侧的表完全显示我们就说是左外连接；右侧的表完 全显示我们就说是右外连接。</p> 
<pre><code class="hljs">-- 左外连接，表1完全显示
select 字段名  from 表名1 left join 表名2 on 连接条件;
-- 右外连接，表2完全显示
select 字段 from 表名1 right join 表名2 on 连接条件;
</code></pre> 
<p><img alt="" height="637" src="https://images2.imgbox.com/c9/39/DJoxZ5s5_o.png" width="915"></p> 
<p>我们修改一下值就会发现,有一条数据已经不是内链接了. </p> 
<p><img alt="" height="523" src="https://images2.imgbox.com/a8/12/ijls09dr_o.png" width="1029"> </p> 
<p> 外连接就是join这样的写法(不支持from多个表)</p> 
<p>给join前面加上left/right 就是外连接了</p> 
<h4 style="background-color:transparent;">左外连接:</h4> 
<p><img alt="" height="281" src="https://images2.imgbox.com/c7/08/mgSna0Lj_o.png" width="530"></p> 
<p>就是以左表为基准,确保左表中的每个数据出现在最终结果中</p> 
<p>如果左表中的记录,再对应右表中没有数据,就会显示右表为NULL.</p> 
<p><img alt="" height="209" src="https://images2.imgbox.com/ed/8d/nv5ueOpG_o.png" width="962"> </p> 
<h4 style="background-color:transparent;">右外连接:</h4> 
<p><img alt="" height="265" src="https://images2.imgbox.com/52/99/4YSDu5x9_o.png" width="556"></p> 
<p>就是以右表为基准,确保右表中的每个数据出现在最终结果中</p> 
<p>如果右表中的记录,再对应左表中没有数据,就会显示左表为NULL.</p> 
<p><img alt="" height="219" src="https://images2.imgbox.com/de/22/313DfiaO_o.png" width="994"></p> 
<h3>3 自连接 </h3> 
<p>自连接是指在同一张表连接自身进行查询</p> 
<p>显示所有“计算机原理”成绩比“Java”成绩高的成绩信息(行与行之间比较):</p> 
<p>这里我们需查询行与行之间的关系发现会报错</p> 
<p><img alt="" height="83" src="https://images2.imgbox.com/b8/a9/pTTYUn9o_o.png" width="738"></p> 
<p>其实我们各取别名就可以了 </p> 
<p><img alt="" height="662" src="https://images2.imgbox.com/4d/f7/aOUfBNAW_o.png" width="882"></p> 
<p>然后指定连接条件,去掉无效数据 </p> 
<p><img alt="" height="549" src="https://images2.imgbox.com/92/92/eYh9erD0_o.png" width="1200"></p> 
<p>这样的结果说明只有三个同学同时具有计算机原理和java课程.</p> 
<p><img alt="" height="239" src="https://images2.imgbox.com/82/20/1LHdH63K_o.png" width="1200"> 最终我们就查出来了</p> 
<p><img alt="" height="209" src="https://images2.imgbox.com/05/c6/Pdh5VLuC_o.png" width="1200"></p> 
<h3><img alt="" height="220" src="https://images2.imgbox.com/ff/f8/mDayGaRB_o.png" width="1200"> 4 子查询</h3> 
<p>子查询是指嵌入在其他sql语句中的select语句，也叫嵌套查询</p> 
<h4>单行子查询：返回一行记录的子查询</h4> 
<p>查询与“不想毕业” 同学的同班同学：</p> 
<pre><code class="hljs">select * from student where classes_id=(select classes_id from student where
name='不想毕业');</code></pre> 
<p><img alt="" height="313" src="https://images2.imgbox.com/ed/b2/7e5pHauG_o.png" width="1119"></p> 
<h4>多行子查询：返回多行记录的子查询 </h4> 
<p>查询“语文”或“英文”课程的成绩信息</p> 
<pre><code class="hljs">-- 使用IN
select * from score where course_id in (select id from course where
name='语文' or name='英文');
-- 使用 NOT IN
select * from score where course_id not in (select id from course where
name!= '语文' and name!='英文');
</code></pre> 
<p><img alt="" height="590" src="https://images2.imgbox.com/2d/ba/l7lLnKgG_o.png" width="993"></p> 
<h2>4 合并查询 </h2> 
<p>在实际应用中，为了合并多个select的执行结果，可以使用集合操作符 union，union all。使用UNION 和UNION ALL时，前后查询的结果集中，字段需要一致。</p> 
<h3>union</h3> 
<p>虽然结果一样,但是这是在相同的表中,union也可在不同表中操作</p> 
<p>该操作符用于取得两个结果集的并集。当使用该操作符时，会自动去掉结果集中的重复行。</p> 
<p><img alt="" height="432" src="https://images2.imgbox.com/2d/47/3bcbJ6dT_o.png" width="975"></p> 
<p><img alt="" height="651" src="https://images2.imgbox.com/6d/ed/zxTrqCD0_o.png" width="753"> </p> 
<h3>union all </h3> 
<p>该操作符用于取得两个结果集的并集。当使用该操作符时，不会去掉结果集中的重复行</p> 
<p><img alt="" height="228" src="https://images2.imgbox.com/dd/d6/cuccVpx1_o.png" width="651"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ff18cb5044868dec070f4615fe46e8b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac上地下城与勇士DNF手游如何通过微信登录？两种方式可选择</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7c4c7cf9609db354a76b03a76086c1fc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">我把我的声音训练成了AI模型，并让它唱了一首歌...（附超全面教程，你奶奶看了都会用）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>