<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>nvm-desktop window安装，支持动态切换nodejs版本 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cdcae92c90240e0161646b744191ec38/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="nvm-desktop window安装，支持动态切换nodejs版本">
  <meta property="og:description" content="一、安装 nvm-desktop 概述 1 、卸载干净笔记的nodejs 和nodejs的环境变量 2、安装 nvm-desktop 软件 3、配置环境变量 4、测试功能 # 此时已安装完成 其他：常见nodejs的问题解决 参考：官网 mac 安装教程
https://github.com/1111mp/nvm-desktop/blob/main/README-zh_CN.md#下载 1、卸载干净笔记的nodejs 1、卸载nodejs 软件 2、删除电脑下载的npm 和 C:\Users\用户 下的 nodejs 相关的文件 3、删除 电脑环境变量的 NODE_HOME 或 NODE_PATH 的 ，删除 环境变量 “Path” 与 nodejs 相关 4、用电脑软件清理一下注册表并重启电脑（mac 教程写的需要） 2 、安装 nvm-desktop window 1）下载 访问地址 ：https://github.com/1111mp/nvm-desktop/releases
下载window x64版本 (当前3.3 - 2024-06-26， 网上说不要低于 2.6)
2）安装 选择安装位置，并点击安装
点击完成，此时先不要对软件任何操作，配置完环境变量再操作
3 配置环境变量 安装后 c 盘 用户下会存在 .nvmd 文件夹 ，且下面的bin文件夹会存在 npm.exe
1）配置变量 新增 NVMD_DIR ，配置 Path 添加 node">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-26T09:43:02+08:00">
    <meta property="article:modified_time" content="2024-07-26T09:43:02+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">nvm-desktop window安装，支持动态切换nodejs版本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_nvmdesktop_0"></a>一、安装 nvm-desktop</h2> 
<h3><a id="_1"></a>概述</h3> 
<pre><code>1 、卸载干净笔记的nodejs 和nodejs的环境变量
2、安装 nvm-desktop 软件
3、配置环境变量
4、测试功能
# 此时已安装完成
其他：常见nodejs的问题解决
</code></pre> 
<p>参考：官网 mac 安装教程</p> 
<pre><code>https://github.com/1111mp/nvm-desktop/blob/main/README-zh_CN.md#下载
</code></pre> 
<h3><a id="1nodejs_14"></a>1、卸载干净笔记的nodejs</h3> 
<pre><code>1、卸载nodejs 软件
2、删除电脑下载的npm 和 C:\Users\用户 下的 nodejs 相关的文件
3、删除 电脑环境变量的 NODE_HOME 或 NODE_PATH 的 ，删除 环境变量 “Path” 与 nodejs 相关
4、用电脑软件清理一下注册表并重启电脑（mac 教程写的需要）
</code></pre> 
<h3><a id="2__nvmdesktop_window_21"></a>2 、安装 nvm-desktop window</h3> 
<h4><a id="1_22"></a>1）下载</h4> 
<p>访问地址 ：https://github.com/1111mp/nvm-desktop/releases<br> 下载window x64版本 (当前3.3 - 2024-06-26， 网上说不要低于 2.6)<br> <img src="https://images2.imgbox.com/05/b5/dtPDexvT_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_26"></a>2）安装</h4> 
<p><img src="https://images2.imgbox.com/00/c0/v1XjcTtb_o.png" alt="在这里插入图片描述"><br> 选择安装位置，并点击安装<br> <img src="https://images2.imgbox.com/da/70/SSBtvHdA_o.png" alt="在这里插入图片描述"><br> 点击完成，此时先不要对软件任何操作，配置完环境变量再操作<br> <img src="https://images2.imgbox.com/f1/e2/AXittY6i_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__33"></a>3 配置环境变量</h3> 
<p>安装后 c 盘 用户下会存在 .nvmd 文件夹 ，且下面的bin文件夹会存在 npm.exe<br> <img src="https://images2.imgbox.com/1c/77/0PDv5lMC_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1_36"></a>1）配置变量</h4> 
<p>新增 NVMD_DIR ，配置 Path 添加 node</p> 
<pre><code>NVMD_DIR= C:\Users\你电脑的用户\.nvmd
Path 添加 %NVMD_DIR%\bin
</code></pre> 
<p><img src="https://images2.imgbox.com/c8/41/ySDdX45P_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d9/44/eKgC1MPx_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2nodejs__44"></a>2）配置nodejs 缓存路径</h4> 
<p>先用nvm-desktop 安装一个默认的nodejs，再配置nodejs 缓存路径</p> 
<h5><a id="1nvmdesktop__nodejs_46"></a>1、先设置nvm-desktop 默认 nodejs下载路径</h5> 
<p>点击软件右上角的设置按钮，展开如下图，可设置nodejs安装路径<br> <img src="https://images2.imgbox.com/7d/90/UR3mrIQX_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2nvmdesktop_nodejs_50"></a>2、用nvm-desktop 安装最新的稳定版nodejs</h5> 
<p><img src="https://images2.imgbox.com/18/4d/xL9fHu5Z_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3__52"></a>3 、设置当前为默认版本</h5> 
<p>如下图，点击更多中应用<br> <img src="https://images2.imgbox.com/93/fa/4qFbIKUs_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4_nodejs__55"></a>4 、查看当前系统默认的nodejs 版本</h5> 
<pre><code># 此时运行 cmd 运行，可查看系统的默认版本
node -v
npm -v
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/5c/meZwmSS7_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="5_62"></a>5、设置缓存路径（必须）</h5> 
<h6><a id="1_63"></a>1）设置缓存路径</h6> 
<p>在安装nvm-desktop 的文件夹下 新建文件夹 node_global 和 node_cache ，然后运行命令（根据安装路径调整）</p> 
<pre><code>npm config set prefix "D:\Program Files\nvm-desktop\node_global"
npm config set cache "D:\Program Files\nvm-desktop\node_cache"
# 查看缓存路径
npm config get prefix
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/8d/qnSdKdsT_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2_72"></a>2）将缓存路径加入到环境变量</h6> 
<pre><code># 注意：一定在 %NVMD_DIR%\bin 前面
D:\Program Files\nvm-desktop\node_global
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/0f/Fa0Jmb0p_o.png" alt="在这里插入图片描述"><br> 3）测试：全局安装yarn，并查看版本<br> 在 D:\Program Files\nvm-desktop 新建： yarn_cache、yarn_global</p> 
<pre><code># 安装yarn 和查看版本
npm install yarn -g
yarn -v
# 自定义缓存路径命令：
yarn config set cache-folder "D:\Program Files\nvm-desktop\yarn_cache"
# 自定义下载路径命令：
yarn config set global-folder "D:\Program Files\nvm-desktop\yarn_global"
# 查看缓存路径:
yarn config get cache-folder
# 查看下载路径
yarn global bin
</code></pre> 
<p><img src="https://images2.imgbox.com/66/a9/MYNaix7Q_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4__95"></a>4 测试</h3> 
<p>用切换nvm-desktop18版本，再查看版本<br> <img src="https://images2.imgbox.com/c3/66/RotcwZqz_o.png" alt="在这里插入图片描述"><br> 可发现系统用默认 nodejs 版本已经切换了<br> <img src="https://images2.imgbox.com/4f/f4/liYiTLKx_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_100"></a>此时已安装完成</h2> 
<h2><a id="_101"></a>二、其他可选配置</h2> 
<h3><a id="1_102"></a>1、切换阿里镜像源，并设置忽略镜像源证书过期</h3> 
<pre><code># cmd 运行
npm config set registry https://registry.npmmirror.com/
# 查看镜像是否切换
npm config get registry 

# 执行下面两个命令再进行npm install即可
npm cache clean --force
npm config set strict-ssl false

npm cache clean --force
这个命令用于清除 npm 的缓存。npm 在安装包时会将下载的包缓存到本地，以便下次使用时可以直接从缓存中获取，加快安装速度。使用 npm cache clean 可以清除缓存，而 --force 参数表示强制清除缓存，即使有其他进程正在使用缓存。

npm config set strict-ssl false

用于配置 npm 的 SSL 严格模式。默认情况下，npm 在下载包时会验证 SSL 证书的有效性，以确保安全性。通过设置 strict-ssl 为 false，可以禁用 SSL 严格模式，允许使用自签名或无效的 SSL 证书进行下载，此方法就会忽略淘宝证书过期
</code></pre> 
<h2><a id="_120"></a>三、开发中常见遇到版本问题</h2> 
<h3><a id="1_nodenpm_install__registrynlarkcom__122"></a>1 、低版本node，npm install 时，点击报错日志文件 registry.nlark.com 不可用</h3> 
<pre><code>替换 在 package-lock.json
registry.nlark.com 为
registry.npmmirror.com
</code></pre> 
<h3><a id="2nodesass_128"></a>2、node-sass问题</h3> 
<p>老项目用的 node-sass<br> 方案一：<br> 安装 node-sass 编译环境</p> 
<pre><code>需要执行：npm install --global --production windows-build-tools
安装 winodws sdk 开发工具和python 环境
可能执行失败，网上有手动下载2019版 windows-build-tools.exe 开发工具，这里不做详细介绍
</code></pre> 
<p>方案二：<br> 更新 node-sass 为 sass</p> 
<pre><code>将带 package.json 中 依赖的 sass名都删除
更换成："sass": "1.32.13",
    "sass-loader": "10.1.1",
更换 vue的版本为，并设置当前为默认环境
v18.11.0
10.2.154.15
8.19.2	
</code></pre> 
<p><img src="https://images2.imgbox.com/ab/53/srdopydP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="316_18_hashMap_150"></a>3、16 升级18报 hashMap错误</h3> 
<p>由于npm 要求nodejs 18 +，vue-cli-service 要求 ssl ，所以先关闭；vue3 +vite没这个问题；</p> 
<pre><code># 报错
node:internal/crypto/hash:71
  this[kHandle] = new _Hash(algorithm, xofLen);
 
# 修正方案，在 package.json 编译和执行命令前添加：SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp;
 "dev": "SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service serve",
  "build:prod": "SET NODE_OPTIONS=--openssl-legacy-provider &amp;&amp; vue-cli-service build",
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/203b2c00a7096697c542c228a61ae6c5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在WPF中使用WebView2详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/77580a5ecfabe189f959141cc3e75189/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt自定义MessageToast</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>