<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43; | 左值、右值】一文了解C&#43;&#43;的左值、右值、左值引用(&amp;)、右值引用(&amp;&amp;) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c68563a845d5a53df0048056762d9469/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43; | 左值、右值】一文了解C&#43;&#43;的左值、右值、左值引用(&)、右值引用(&&)">
  <meta property="og:description" content="😁博客主页😁：🚀https://blog.csdn.net/wkd_007🚀
🤑博客内容🤑：🍭嵌入式开发、Linux、C语言、C&#43;&#43;、数据结构、音视频🍭
⏰发布时间⏰：2024-06-12 16:35:55
本文未经允许，不得转发！！！
目录 🎄一、概述🎄二、左值(lvalue)🎄三、右值(rvalue)🎄四、左值引用🎄五、右值引用(rvalue reference)✨5.1 右值引用的理解✨5.2 std::move 🎄六、总结 🎄一、概述 左值、右值、左值引用、右值引用，这几个概念常常在C&#43;&#43;编程中出现，如果没弄清楚这几个概念的意思，有时会在看一些C&#43;&#43;书籍时会感到特别困惑。
左值和右值是表达式的属性。一些表达式生成或要求左值，而另外一些则生成或要求右值。一般而言，一个左值表达式表示的是一个对象的身份，而一个右值表达式表示的是对象的值。
左值、右值最初是出现在C语言中的，左值最初指的是可出现在赋值语句左边的实体，引入了const关键字之后，常规变量和 const 变量都可视为左值， 因为可通过地址访问它们，但常规变量属于可修改的左值， 而 const 变量属于不可修改的左值。右值一般是没有明确的内存位置，无法使用&amp;获取地址，值不可被修改。例如：立即数、常量、字面值、&amp;(变量)。
在C&#43;&#43;中，增加了引用的概念，所以会出现左值引用、右值引用，下文将举例说明这几个概念。
🎄二、左值(lvalue) 左值：英文简写为“lvalue”，是“locator value”的缩写，可意为存储在内存中、有明确存储地址（可寻址）的数据。
左值：本质上是可以操作的一块内存区域，一般可以通过&amp;取到该内存起始地址，这块内存的值可以被修改(const对象除外)。除了const对象的其他左值都可以出现在赋值语句左边。
常见的左值有：
1、变量(对象)；
2、const 变量(对象)；
3、对指针解引用，*(指针)；
4、数组元素，a[1]；
5、结构体成员、类成员，s.m_a、ps-&gt;ma；
// g&#43;&#43; 13_lvalue.cpp int main() { int i = 0;	i = 1;	// i是变量(对象)，左值 const int ci = 5;	//ci = 6;	// ci是const变量(对象)，是左值但不能出现在赋值号左边 int *pi = &amp;i; *pi = 1;	// *pi 对指针解引用，左值 int arr[5] = {0,}; arr[0] = 1;	// arr[0] 是数组元素，左值 struct { int m_a; int m_b; } st, *pst=&amp;st; st.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-12T16:36:35+08:00">
    <meta property="article:modified_time" content="2024-06-12T16:36:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43; | 左值、右值】一文了解C&#43;&#43;的左值、右值、左值引用(&amp;)、右值引用(&amp;&amp;)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><font face="楷体" color="red" size="4">😁博客主页😁：🚀<a href="https://blog.csdn.net/wkd_007">https://blog.csdn.net/wkd_007</a>🚀</font><br> <font face="楷体" color="green" size="4">🤑博客内容🤑：🍭嵌入式开发、Linux、C语言、C++、数据结构、音视频🍭</font><br> <font face="楷体" color="#06BEFF" size="4">⏰发布时间⏰：2024-06-12 16:35:55</font></p> 
</blockquote> 
<p><font color="red" size="6" face="楷体">本文未经允许，不得转发！！！</font></p> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_11" rel="nofollow">🎄一、概述</a></li><li><a href="#lvalue_23" rel="nofollow">🎄二、左值(lvalue)</a></li><li><a href="#rvalue_68" rel="nofollow">🎄三、右值(rvalue)</a></li><li><a href="#_116" rel="nofollow">🎄四、左值引用</a></li><li><a href="#rvalue_reference_174" rel="nofollow">🎄五、右值引用(rvalue reference)</a></li><li><ul><li><a href="#51__180" rel="nofollow">✨5.1 右值引用的理解</a></li><li><a href="#52_font_facecourier_colorredstdmovefont_238" rel="nofollow">✨5.2 <font face="courier" color="red">std::move</font></a></li></ul> 
  </li><li><a href="#_253" rel="nofollow">🎄六、总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<p><img src="https://images2.imgbox.com/06/30/9a4uG8Bx_o.jpg" alt=""><br> <img src="https://images2.imgbox.com/a4/a5/vX336GHh_o.gif" alt="在这里插入图片描述" height="40"></p> 
<h2><a id="_11"></a>🎄一、概述</h2> 
<p>左值、右值、左值引用、右值引用，这几个概念常常在C++编程中出现，如果没弄清楚这几个概念的意思，有时会在看一些C++书籍时会感到特别困惑。</p> 
<p>左值和右值是表达式的属性。一些表达式生成或要求左值，而另外一些则生成或要求右值。一般而言，一个左值表达式表示的是一个对象的身份，而一个右值表达式表示的是对象的值。</p> 
<p>左值、右值最初是出现在C语言中的，左值最初指的是可出现在赋值语句左边的实体，引入了const关键字之后，常规变量和 const 变量都可视为左值， 因为可通过地址访问它们，但常规变量属于可修改的左值， 而 const 变量属于不可修改的左值。右值一般是没有明确的内存位置，无法使用&amp;获取地址，值不可被修改。例如：立即数、常量、字面值、&amp;(变量)。</p> 
<p>在C++中，增加了引用的概念，所以会出现左值引用、右值引用，下文将举例说明这几个概念。</p> 
<hr> 
<p><img src="https://images2.imgbox.com/9b/2e/P87ZZVWB_o.gif" alt="在这里插入图片描述" height="40"></p> 
<h2><a id="lvalue_23"></a>🎄二、左值(lvalue)</h2> 
<p><font face="kaiti" color="red" size="5">左值：英文简写为“lvalue”，是“locator value”的缩写，可意为存储在内存中、有明确存储地址（可寻址）的数据。</font></p> 
<p><font face="kaiti" color="red" size="5">左值：本质上是可以操作的一块内存区域，一般可以通过&amp;取到该内存起始地址，这块内存的值可以被修改(const对象除外)。除了const对象的其他左值都可以出现在赋值语句左边。</font></p> 
<p>常见的左值有：<br> 1、变量(对象)；<br> 2、const 变量(对象)；<br> 3、对指针解引用，<code>*(指针)</code>；<br> 4、数组元素，<code>a[1]</code>；<br> 5、结构体成员、类成员，<code>s.m_a</code>、<code>ps-&gt;ma</code>；</p> 
<pre><code class="prism language-cpp"><span class="token comment">// g++ 13_lvalue.cpp</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>			
	i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>				<span class="token comment">// i是变量(对象)，左值</span>
	
	<span class="token keyword">const</span> <span class="token keyword">int</span> ci <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>	
	<span class="token comment">//ci = 6;			// ci是const变量(对象)，是左值但不能出现在赋值号左边</span>
	
	<span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
	<span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>			<span class="token comment">// *pi 对指针解引用，左值</span>

	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>			<span class="token comment">// arr[0] 是数组元素，左值</span>

	<span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> m_a<span class="token punctuation">;</span>
		<span class="token keyword">int</span> m_b<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> st<span class="token punctuation">,</span> <span class="token operator">*</span>pst<span class="token operator">=</span><span class="token operator">&amp;</span>st<span class="token punctuation">;</span>
	st<span class="token punctuation">.</span>m_a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>			<span class="token comment">// 结构体成员，左值</span>
	pst<span class="token operator">-&gt;</span>m_b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p><img src="https://images2.imgbox.com/5a/4b/nGt7LEXj_o.gif" alt="在这里插入图片描述" height="40"></p> 
<h2><a id="rvalue_68"></a>🎄三、右值(rvalue)</h2> 
<p><font face="kaiti" color="red" size="5">右值：英文简写为“rvalue”，是"read value"的缩写，指的是那些可以提供数据值的数据（不一定可以寻址，例如存储于寄存器中的数据）。</font></p> 
<p><font face="kaiti" color="red" size="5">右值：指一种表达式，其结果是值而非值所在的位置。一般是没有明确的内存位置，无法使用&amp;获取地址，值不可被修改的。例如：立即数、常量、字面值、&amp;(变量)。另外，很多时候左值可以当右值使用。</font></p> 
<p>关于右值的，有一个重要的原则，是在需要右值的地方 (除了移动构造函数) 可以用左值来代替，但是不能把右值当成左值(也就是位置)使用。当一个左值被当成右值使用时，实际使用的是它的内容(值）。</p> 
<p>常见的右值有：<br> 1、字面常量（立即数），引号括起的字符串除外(它们由其地址表示)，<code>42</code>、<code>'a'</code>；<br> 2、算术运算符(<code>+、-、*、/、%、正号、负号</code>)的求值结果，<code>1+2</code>；<br> 3、逻辑运算符(<code>&amp;&amp;、||、!</code>)的求值结果，<code>a!=10</code>；<br> 4、关系运算符(<code>&gt;、&gt;=、&lt;、&lt;=、==、!=</code>)的求值结果，<code>a&gt;10 &amp;&amp; a&lt;100</code>；<br> 5、函数的非引用返回值。这种返回值位于临时内存单元中，运行到下一条语句时，它们可能不再存在；<br> 6、当条件运算符的两个表达式都是左值或者能转换成同一种左值类型时，运算的结果是左值；否则运算的结果是右值。</p> 
<pre><code class="prism language-cpp"><span class="token comment">// g++ 13_rvalue.cpp</span>

<span class="token keyword">int</span> <span class="token function">get100</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>			
	i <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>				<span class="token comment">// 字面值42，右值</span>
	c <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">;</span>			<span class="token comment">// 字面值'a'，右值</span>
	
	i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>			<span class="token comment">// 算术运算符的求值结果，右值</span>
	
	i <span class="token operator">=</span> <span class="token punctuation">(</span>c<span class="token operator">!=</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 逻辑运算符的求值结果，右值</span>
	
	i <span class="token operator">=</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">// 关系运算符的求值结果，右值</span>
	
	i <span class="token operator">=</span> <span class="token function">get100</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 函数的非引用返回值，右值</span>
	
	i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">?</span>i<span class="token operator">:</span>c <span class="token operator">=</span> i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">// 条件运算符的两个表达式都是左值，则可以做左值，本例的 i&gt;0?i:c</span>
						<span class="token comment">// 条件运算符的两个表达式都是右值，则为右值，本例的 i&gt;0?1:0;</span>
						
	i <span class="token operator">=</span> c<span class="token punctuation">;</span>				<span class="token comment">// c是左值，左值的值可以当右值使用</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p><img src="https://images2.imgbox.com/c8/af/a5lW0dT5_o.gif" alt="在这里插入图片描述" height="40"></p> 
<h2><a id="_116"></a>🎄四、左值引用</h2> 
<p><font face="kaiti" color="red" size="5">左值引用：左值引用这个词是在C++11增加了右值引用之后才出现，为了与右值引用区分开，把C++11之前出现的引用成为左值引用。所以，左值引用就是C++中的引用类型，是己定义的变量的别名，主要用作函数形参或返回值。</font></p> 
<p>传统的 C++引用（现在称为左值引用） 使得标识符关联到左值，左值引用不能绑定到要求转换的表达式、字面常量或是返回右值的表达式。</p> 
<p>const左值引用既可以绑定到左值，也可以绑定到右值。但不能修改const左值引用绑定的内容。</p> 
<p>怎样声明、定义左值引用：左值引用的定义需要使用<code>&amp;</code>，格式一般是<code>类型 &amp;变量名 = 变量</code>。左值引用定义必须初始化，且初始化后无法改变该引用关联的对象。下面例子介绍了左值引用的定义、const左值引用初始化为左值、const左值引用初始化为右值，</p> 
<pre><code class="prism language-cpp"><span class="token comment">// g++ 13_lvalue_reference.cpp</span>
<span class="token keyword">int</span> <span class="token function">get100</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;</span>ri <span class="token operator">=</span> i<span class="token punctuation">;</span>		<span class="token comment">// 左值引用</span>
<span class="token comment">//	int &amp;*pri = &amp;ri;	// 不能定义引用的指针。报错：cannot declare pointer to ‘int&amp;’</span>
<span class="token comment">//	int &amp;&amp;rri = ri;		// 不能定义引用的引用。在C++11标准里，这是一个右值引用</span>
	
	<span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">&amp;</span>rpi <span class="token operator">=</span> pi<span class="token punctuation">;</span>		<span class="token comment">// pi是左值，rpi是指针的引用</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;</span>r_pi <span class="token operator">=</span> <span class="token operator">*</span>pi<span class="token punctuation">;</span>	<span class="token comment">// *pi是左值，可以初始化左值引用</span>
	
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;</span>rarr <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">// arr[0]是左值，可以初始化左值引用</span>
	
	<span class="token comment">// const 左值引用可以被初始化为一些左值</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cri <span class="token operator">=</span> i<span class="token punctuation">;</span>		<span class="token comment">// const 左值引用</span>
<span class="token comment">//	const int *&amp;crpi = pi;	// 报错：用 ‘int*’ 初始化 ‘const int*&amp;’ 无效</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cr_pi <span class="token operator">=</span> <span class="token operator">*</span>pi<span class="token punctuation">;</span>	<span class="token comment">// const 左值引用</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>crarr<span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	
	<span class="token comment">// const 左值引用可以被初始化为右值</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri0 <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri1 <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri2 <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri3 <span class="token operator">=</span> <span class="token punctuation">(</span>ri1 <span class="token operator">!=</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri4 <span class="token operator">=</span> <span class="token punctuation">(</span>ri1 <span class="token operator">&gt;=</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri5 <span class="token operator">=</span> <span class="token function">get100</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 函数的非引用返回值，右值</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ri6 <span class="token operator">=</span> i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>	
<span class="token comment">//	ri0 = 1;	// 报错，const引用是只读的，其值不能修改</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>左值引用常用作函数的形参、返回值。返回引用的函数是左值的，意味着这些函数返回的是对象本身而非对象的副本。返回左值引用的函数， 连同赋值、下标、解引用和前置递增/递减运算符， 都是返回左值的表达式的例子。</p> 
<p>另外，应尽可能将引用形参声明为 const ，有以下三个理由：<br> • 使用 const 可以避免无意中修改数据的编程错误；<br> • 使用 const 使函数能够处理 const 和非 const 实参， 否则将只能接受非 const 数据；<br> • 使用 const 引用使函数能够正确生成并使用临时变量。</p> 
<p>如果实参为右值， const 引用形参将指向一个临时变量。</p> 
<hr> 
<p><img src="https://images2.imgbox.com/bb/67/DfOl2jw7_o.gif" alt="在这里插入图片描述" height="40"></p> 
<h2><a id="rvalue_reference_174"></a>🎄五、右值引用(rvalue reference)</h2> 
<p><font face="kaiti" color="red" size="5">右值引用：这是为了支持移动操作，C++11标准引入的一种新的引用类型。所谓右值引用就是必须绑定到右值的引用。我们通过 <code>&amp;&amp;</code> 而不是 <code>&amp;</code> 来获得右值引用。编译时，需要加 -std=c++11 来支持C++11标准。<br> </font></p> 
<p>类似任何引用，一个右值引用也不过是某个对象的另一个名字而已。</p> 
<h3><a id="51__180"></a>✨5.1 右值引用的理解</h3> 
<blockquote> 
 <p>怎样定义右值引用？右值引用使用<code>&amp;&amp;</code>来定义，也是必须初始化，初始化后无法改变其绑定的对象。定义右值引用格式：<code>类型 &amp;&amp;引用名称 = 右值;</code>。定义一个右值引用可以参考下面代码：</p> 
 <pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>rl <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token operator">&amp;</span>rl<span class="token punctuation">;</span>
</code></pre> 
 <p>将右值关联到右值引用导致该右值被存储到特定的位置，且可以获取该位置的地址。也就是说，虽然不能将运算符&amp;用于 13，但可将其用于 rl。通过将数据与特定的地址关联，使得可以通过右值引用来访问该数据。</p> 
</blockquote> 
<p><font face="kaiti" color="red" size="5">右值引用只能绑定到一个右值，右值要么是字面常量，要么是在表达式求值过程中创建的临时对象；</font></p> 
<p>而临时对象有两个特点：<br> 1、该对象将要被销毁；<br> 2、该对象没有其他用户再使用它。<br> 这就意味着，右值引用的代码是最后使用这个对象的了，可以自由地接管所引用的对象的资源。</p> 
<p><img src="https://images2.imgbox.com/46/0b/Jj7zwCRb_o.png" alt="在这里插入图片描述"><br> 如上图，变量a、b相加之后会产生一个值，这个值就是临时量，但它在内存中肯定是存在某个地址的，没有右值引用之前，这个值使用完就会被销毁，我们也不会知道它的内存地址。现在，这块内存可以被右值引用关联，关联后，右值引用甚至可以改变内存的内容，等右值引用使用完再销毁。</p> 
<p>看看下面关于右值引用的例子，加深理解：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// g++ 13_rvalue_reference.cpp  -std=c++11</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">get100</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>rri<span class="token punctuation">)</span><span class="token comment">// 右值引用作为函数形参</span>
<span class="token punctuation">{<!-- --></span>
	rri <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 1、右值引用必须被初始化为右值</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri0 <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>		<span class="token comment">// 将 42 存到一个临时量，然后引用这个临时量</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri1 <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">;</span>	<span class="token comment">// 将 'a' 存到一个临时量，然后引用这个临时量</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri2 <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>	<span class="token comment">// 将 1+2 存到一个临时量，然后引用这个临时量</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri3 <span class="token operator">=</span> <span class="token punctuation">(</span>ri1 <span class="token operator">!=</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri4 <span class="token operator">=</span> <span class="token punctuation">(</span>ri1 <span class="token operator">&gt;=</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri5 <span class="token operator">=</span> <span class="token function">get100</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 函数的非引用返回值，右值</span>
	<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>ri6 <span class="token operator">=</span> ri0<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">?</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 2、右值引用的内容可以被修改</span>
	ri0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ri0="</span> <span class="token operator">&lt;&lt;</span> ri0 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	<span class="token comment">// 3、虽然没办法获取右值的地址，但可以获取右值引用的地址，并改变该地址的值</span>
	<span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token operator">&amp;</span>ri0<span class="token punctuation">;</span>
	<span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"pi="</span> <span class="token operator">&lt;&lt;</span> pi <span class="token operator">&lt;&lt;</span> <span class="token string">", *pi="</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>pi <span class="token operator">&lt;&lt;</span> <span class="token string">", ri0="</span> <span class="token operator">&lt;&lt;</span> ri0 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">// 4、传入右值</span>
	<span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="52_font_facecourier_colorredstdmovefont_238"></a>✨5.2 <font face="courier" color="red">std::move</font></h3> 
<p>虽然不能将一个右值引用直接绑定到一个左值上， 但我们可以显式地将一个左值转换为对应的右值引用类型。通过调用 <code>std::move</code> 的标准库函数可以获取绑定到左值上的右值引用，此函数定义在 utility 头文件中。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">&amp;&amp;</span>rri <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">move</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>std::move 告诉编译器，我们有一个左值，但希望像右值一样处理它。</p> 
<p>注意，使用 std::move 函数处理的对象，被成为移后源对象，我们可以修改该对象的值，但不可以再使用这个对象的值了，虽然语法上允许，但可能产生一些不可知的结果。因为调用了std::move 函数处理一个对象，也应被视为即将销毁的对象，如果这个对象还需要在后面的代码使用，则不建议对它调用 std::move 函数处理。</p> 
<hr> 
<p><img src="https://images2.imgbox.com/48/ee/CZpY8Lv4_o.gif" alt="在这里插入图片描述" height="40"></p> 
<h2><a id="_253"></a>🎄六、总结</h2> 
<p>👉本文介绍了C++的左值、右值、左值引用、右值引用。左值一般表示某一块内存，可以获取其地址；右值则一般只表示数据，不能被获取地址，很多情况，左值的值可以是右值；左值引用是某个左值的别名；右值引用是某个右值的别名。</p> 
<p><img src="https://images2.imgbox.com/7a/7f/lpH1rqnR_o.gif" alt="在这里插入图片描述"><br> 如果文章有帮助的话，点赞👍、收藏⭐，支持一波，谢谢 😁😁😁</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/91ade8e76fac456ad60a44832ce60dff/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LogicFlow 学习笔记——2. LogicFlow 基础 实例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/02db5298fcade5b29b3cdc0a1ae1379d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HBase中Master初始化错误~</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>