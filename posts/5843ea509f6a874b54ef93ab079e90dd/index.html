<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>node中如何定义中间件 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5843ea509f6a874b54ef93ab079e90dd/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="node中如何定义中间件">
  <meta property="og:description" content="1.中间件的概念
中间件可以理解为是一个进行数据或逻辑处理的方法，是数据或者逻辑处理的中枢，既然是中枢那么就有输入输出，输入就是我们使用该中间件的时候就是输入，输出就是要求我们在编写中间件的使用需要调用next(),没有next()那么处理完的数据还存放在中枢里那就没意义了。而全局中间件不管你在哪里做了什么都会进入该中间件进行处理；局部中间件就相当于有自己的作用域，一般挂载注册在需要该中间件去处理数据的路由上
2.局部中间件和全局中间件区别
2.1.全局中间件：使用server.use()注册挂载的中间件，而中间件其实就是进行数据处理和逻辑处理的方法，全局中间件在客服端访问了路由后就会调用中间件中的方法进行一系列处理
2.2.局部中间件：不使用server.use()注册挂载的中间件，而是在配置路由时直接在挂载在需要中间件去处理的路由中
// 1.导入express和router const express = require(&#39;express&#39;) const router = require(&#39;./21模块化路由&#39;) // 2.创建web服务器 const server = express() // 3.监听服务器的启动 server.listen(80,()=&gt;{ console.log(&#34;web服务器启动了 http://127.0.0.1:80&#34;); }) // 4.定义中间件：分为全局中间件和局部中间件 // 全局中间件：只要是客户端进行了请求就会进入中间件，使用server.use()进行挂载的中间件 // 局部中间件:不使用server.use()进行挂载的中间件,在配置路由时使用 // next是一个函数，中间件必须调用才能进入下一个中间件或者路由 // 自定义中间件 const mv = function (req,res,next){ // 用于注册为全局中间件 console.log(&#34;这是一个中间件&#34;); next() } const mv1 = function (req,res,next){ // 用于注册为局部中间件 console.log(&#34;这是第一个局部中间件&#34;); next() } const mv2 = function (req,res,next){ // 用于注册为局部中间件 console.log(&#34;这是第二个局部中间件&#34;); next() } const mv3 = function (req,res,next){ // 用于注册为局部中间件 console.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-30T09:39:56+08:00">
    <meta property="article:modified_time" content="2024-08-30T09:39:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">node中如何定义中间件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.中间件的概念</p> 
<p>中间件可以理解为是一个进行数据或逻辑处理的方法，是数据或者逻辑处理的中枢，既然是中枢那么就有输入输出，输入就是我们使用该中间件的时候就是输入，输出就是要求我们在编写中间件的使用需要调用next(),没有next()那么处理完的数据还存放在中枢里那就没意义了。而全局中间件不管你在哪里做了什么都会进入该中间件进行处理；局部中间件就相当于有自己的作用域，一般挂载注册在需要该中间件去处理数据的路由上</p> 
<p>2.局部中间件和全局中间件区别</p> 
<p>2.1.全局中间件：使用server.use()注册挂载的中间件，而中间件其实就是进行数据处理和逻辑处理的方法，全局中间件在客服端访问了路由后就会调用中间件中的方法进行一系列处理</p> 
<p>2.2.局部中间件：不使用server.use()注册挂载的中间件，而是在配置路由时直接在挂载在需要中间件去处理的路由中</p> 
<pre><code class="language-javascript">// 1.导入express和router
const express = require('express')
const router = require('./21模块化路由')

// 2.创建web服务器
const server = express()


// 3.监听服务器的启动
server.listen(80,()=&gt;{
    console.log("web服务器启动了 http://127.0.0.1:80");
})


// 4.定义中间件：分为全局中间件和局部中间件
// 全局中间件：只要是客户端进行了请求就会进入中间件，使用server.use()进行挂载的中间件
// 局部中间件:不使用server.use()进行挂载的中间件,在配置路由时使用
// next是一个函数，中间件必须调用才能进入下一个中间件或者路由

// 自定义中间件
const mv = function (req,res,next){ // 用于注册为全局中间件
    console.log("这是一个中间件");
    next()
}

const mv1 = function (req,res,next){ // 用于注册为局部中间件
    console.log("这是第一个局部中间件");
    next()
}

const mv2 = function (req,res,next){ // 用于注册为局部中间件
    console.log("这是第二个局部中间件");
    next()
}

const mv3 = function (req,res,next){ // 用于注册为局部中间件
    console.log("这是第三个局部中间件");
    next()
}

// 5.将中间件定义为局部中间件
server.get('/kanno1',mv1,(req,res)=&gt;{
    res.send({
        name:"龙body",
        classroom:"C class"
    })
})

server.get('/kanno2',mv2,(req,res)=&gt;{
    res.send({
        name:"佐仓 爱里",
        classroom:" class"
    })
})

// 6.同时定义多个局部中间件，以下两个局部中间件写法是等效的
server.get('/kanno3',[mv1,mv2],(req,res)=&gt;{
    res.send({
        name:"绫小路 铃音",
        classroom:"D class"
    })
})

server.get('/kanno4',mv1,mv2,(req,res)=&gt;{
    res.send({
        name:"绫小路 帆波",
        classroom:"D class"
    })
})

// 7.将mv中间件定义为全局中间件
server.use(mv)
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4340f83ef6c514de06f85703bb19cba8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Docker存储目录问题，如何修改Docker默认存储位置？（Docker存储路径、Docker空间）/etc/docker/daemon.json（docker占用、docker容量）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/90a745f24145779b0834dd2a440a63d9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">GraphRAG如何使用ollama提供的llm model 和Embedding model服务构建本地知识库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>