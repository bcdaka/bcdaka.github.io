<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€å¾®æœåŠ¡ã€‘Spring Cloud Busçš„æ³¨æ„äº‹é¡¹å’Œå¸¸ç”¨æ¡ˆä¾‹ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/49ed1b069456b9f5a91ea8afbe5fedca/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€å¾®æœåŠ¡ã€‘Spring Cloud Busçš„æ³¨æ„äº‹é¡¹å’Œå¸¸ç”¨æ¡ˆä¾‹">
  <meta property="og:description" content="æ–‡ç« ç›®å½• å¼ºçƒˆæ¨èå¼•è¨€å…³é”®æ–¹é¢æ³¨æ„äº‹é¡¹1. æ¶ˆæ¯ä»£ç†é€‰æ‹©2. æ¶ˆæ¯é˜Ÿåˆ—é…ç½®3. æ¶ˆæ¯æŒä¹…åŒ–4. å¹‚ç­‰æ€§5. å®‰å…¨æ€§6. æ¶ˆæ¯å¤§å°7. æ€§èƒ½ç›‘æ§8. é”™è¯¯å¤„ç†9. ç‰ˆæœ¬å…¼å®¹æ€§10. æµ‹è¯•11. é…ç½®åŒæ­¥12. æ—¥å¿—è®°å½• å¸¸ç”¨ç¤ºä¾‹ç¤ºä¾‹ 1: é…ç½®åŒæ­¥é…ç½®æœåŠ¡å™¨ (`config-server`)å®¢æˆ·ç«¯æœåŠ¡ (`client-service`)è§¦å‘é…ç½®åˆ·æ–° ç¤ºä¾‹ 2: äº‹ä»¶å¹¿æ’­ç¤ºä¾‹ 3: Spring Cloud Bus æ•´åˆ RabbitMQ æ€»ç»“å¼ºçƒˆæ¨èä¸“æ é›†é”¦å†™åœ¨æœ€å å¼ºçƒˆæ¨è å‰äº›å¤©å‘ç°äº†ä¸€ä¸ªå·¨ç‰›çš„äººå·¥æ™ºèƒ½å­¦ä¹ ç½‘ç«™ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œé£è¶£å¹½é»˜ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:äººå·¥æ™ºèƒ½
å¼•è¨€ Spring Cloud Bus æ˜¯ Spring Cloud æ¡†æ¶ä¸­çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œå®ƒé€šè¿‡è½»é‡çº§æ¶ˆæ¯ä»£ç†ï¼ˆå¦‚ RabbitMQ æˆ– Kafkaï¼‰è¿æ¥åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆé€šå¸¸æ˜¯å¾®æœåŠ¡ï¼‰ã€‚å®ƒæœ‰åŠ©äºåœ¨å¾®æœåŠ¡æ¶æ„çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œå¹¶æœ‰åŠ©äºè·¨é›†ç¾¤ä¼ æ’­çŠ¶æ€å˜åŒ–ã€‚
å…³é”®æ–¹é¢ ä»¥ä¸‹æ˜¯ Spring Cloud Bus çš„ä¸€äº›å…³é”®æ–¹é¢ï¼š
äº‹ä»¶ä¼ æ’­ï¼š
å®ƒä½¿ç”¨æ¶ˆæ¯ä»£ç†æ¥ä¼ æ’­é…ç½®æ›´æ”¹å’Œå…¶ä»–çŠ¶æ€æ›´æ”¹ï¼Œç¡®ä¿åœ¨ä¸åŒçš„å¾®æœåŠ¡å®ä¾‹ä¹‹é—´ä¿æŒä¸€è‡´æ€§ã€‚
é›†ä¸­é…ç½®ç®¡ç†ï¼š
ç»“åˆ Spring Cloud Configï¼ŒSpring Cloud Bus å¯ä»¥åœ¨ä¸é‡å¯åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹åˆ·æ–°å¤šä¸ªåº”ç”¨ç¨‹åºå®ä¾‹çš„é…ç½®ã€‚ä¾‹å¦‚ï¼Œå½“åœ¨é›†ä¸­é…ç½®åº“ä¸­æ›´æ–°é…ç½®å±æ€§æ—¶ï¼ŒSpring Cloud Bus å¯ä»¥å°†æ›´æ”¹å¹¿æ’­åˆ°æ‰€æœ‰ç›¸å…³æœåŠ¡ã€‚
å¯æ‰©å±•æ€§ï¼š
é€šè¿‡åˆ©ç”¨æ¶ˆæ¯ä»£ç†ï¼ŒSpring Cloud Bus å…è®¸åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿›è¡Œå¯æ‰©å±•çš„é€šä¿¡ã€‚è¿™åœ¨å¤§è§„æ¨¡ç³»ç»Ÿä¸­å°¤ä¸ºæœ‰ç”¨ï¼Œå› ä¸ºæœåŠ¡ä¹‹é—´çš„ç›´æ¥é€šä¿¡å¯èƒ½æ•ˆç‡ä¸é«˜ã€‚
å®ç°ï¼š
è¦å®ç° Spring Cloud Busï¼Œé€šå¸¸éœ€è¦åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­åŒ…å«ç›¸å…³ä¾èµ–é¡¹ï¼Œé…ç½®æ¶ˆæ¯ä»£ç†ï¼Œå¹¶ä½¿ç”¨æ³¨è§£æ ‡è®°éœ€è¦ä¼ æ’­çš„é…ç½®æ›´æ”¹æˆ–äº‹ä»¶ã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-24T00:30:21+08:00">
    <meta property="article:modified_time" content="2024-07-24T00:30:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€å¾®æœåŠ¡ã€‘Spring Cloud Busçš„æ³¨æ„äº‹é¡¹å’Œå¸¸ç”¨æ¡ˆä¾‹</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>æ–‡ç« ç›®å½•</h4> 
 <ul><li><ul><li><ul><li><a href="#font_colordd0000font_6" rel="nofollow"><font color="#dd0000">å¼ºçƒˆæ¨è</font></a></li><li><a href="#_20" rel="nofollow">å¼•è¨€</a></li><li><a href="#_30" rel="nofollow">å…³é”®æ–¹é¢</a></li><li><a href="#_56" rel="nofollow">æ³¨æ„äº‹é¡¹</a></li><li><ul><li><a href="#1__64" rel="nofollow">1. æ¶ˆæ¯ä»£ç†é€‰æ‹©</a></li><li><a href="#2__70" rel="nofollow">2. æ¶ˆæ¯é˜Ÿåˆ—é…ç½®</a></li><li><a href="#3__76" rel="nofollow">3. æ¶ˆæ¯æŒä¹…åŒ–</a></li><li><a href="#4__82" rel="nofollow">4. å¹‚ç­‰æ€§</a></li><li><a href="#5__88" rel="nofollow">5. å®‰å…¨æ€§</a></li><li><a href="#6__94" rel="nofollow">6. æ¶ˆæ¯å¤§å°</a></li><li><a href="#7__100" rel="nofollow">7. æ€§èƒ½ç›‘æ§</a></li><li><a href="#8__106" rel="nofollow">8. é”™è¯¯å¤„ç†</a></li><li><a href="#9__112" rel="nofollow">9. ç‰ˆæœ¬å…¼å®¹æ€§</a></li><li><a href="#10__118" rel="nofollow">10. æµ‹è¯•</a></li><li><a href="#11__124" rel="nofollow">11. é…ç½®åŒæ­¥</a></li><li><a href="#12__130" rel="nofollow">12. æ—¥å¿—è®°å½•</a></li></ul> 
    </li><li><a href="#_140" rel="nofollow">å¸¸ç”¨ç¤ºä¾‹</a></li><li><ul><li><a href="#_1__146" rel="nofollow">ç¤ºä¾‹ 1: é…ç½®åŒæ­¥</a></li><li><ul><li><a href="#_configserver_152" rel="nofollow">é…ç½®æœåŠ¡å™¨ (`config-server`)</a></li><li><a href="#_clientservice_207" rel="nofollow">å®¢æˆ·ç«¯æœåŠ¡ (`client-service`)</a></li><li><a href="#_275" rel="nofollow">è§¦å‘é…ç½®åˆ·æ–°</a></li></ul> 
     </li><li><a href="#_2__287" rel="nofollow">ç¤ºä¾‹ 2: äº‹ä»¶å¹¿æ’­</a></li><li><a href="#_3_Spring_Cloud_Bus__RabbitMQ_355" rel="nofollow">ç¤ºä¾‹ 3: Spring Cloud Bus æ•´åˆ RabbitMQ</a></li></ul> 
    </li><li><a href="#_424" rel="nofollow">æ€»ç»“</a></li><li><a href="#font_colordd0000font_440" rel="nofollow"><font color="#dd0000">å¼ºçƒˆæ¨è</font></a></li><li><a href="#_454" rel="nofollow">ä¸“æ é›†é”¦</a></li><li><a href="#_480" rel="nofollow">å†™åœ¨æœ€å</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 
<img src="https://images2.imgbox.com/4e/0a/TO8uz09z_o.gif" alt="579a429daf314744b995f37351b46548"> 
<p></p> 
<h4><a id="font_colordd0000font_6"></a><font color="#dd0000">å¼ºçƒˆæ¨è</font></h4> 
<p><font color="#dd0000">å‰äº›å¤©å‘ç°äº†ä¸€ä¸ªå·¨ç‰›çš„äººå·¥æ™ºèƒ½å­¦ä¹ ç½‘ç«™ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œé£è¶£å¹½é»˜ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:</font><a href="https://www.captainbed.cn/venus" rel="nofollow">äººå·¥æ™ºèƒ½</a></p> 
<p><img src="https://images2.imgbox.com/f1/45/X8EXIqgh_o.jpg" alt="b004071ozy_05_amzn"></p> 
<hr> 
<h4><a id="_20"></a>å¼•è¨€</h4> 
<p>Spring Cloud Bus æ˜¯ Spring Cloud æ¡†æ¶ä¸­çš„ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼Œå®ƒé€šè¿‡è½»é‡çº§æ¶ˆæ¯ä»£ç†ï¼ˆå¦‚ RabbitMQ æˆ– Kafkaï¼‰è¿æ¥åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆé€šå¸¸æ˜¯å¾®æœåŠ¡ï¼‰ã€‚å®ƒæœ‰åŠ©äºåœ¨å¾®æœåŠ¡æ¶æ„çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œå¹¶æœ‰åŠ©äºè·¨é›†ç¾¤ä¼ æ’­çŠ¶æ€å˜åŒ–ã€‚</p> 
<hr> 
<h4><a id="_30"></a>å…³é”®æ–¹é¢</h4> 
<p>ä»¥ä¸‹æ˜¯ Spring Cloud Bus çš„ä¸€äº›å…³é”®æ–¹é¢ï¼š</p> 
<ol><li> <p><strong>äº‹ä»¶ä¼ æ’­</strong>ï¼š</p> <p>å®ƒä½¿ç”¨æ¶ˆæ¯ä»£ç†æ¥ä¼ æ’­é…ç½®æ›´æ”¹å’Œå…¶ä»–çŠ¶æ€æ›´æ”¹ï¼Œç¡®ä¿åœ¨ä¸åŒçš„å¾®æœåŠ¡å®ä¾‹ä¹‹é—´ä¿æŒä¸€è‡´æ€§ã€‚</p> </li><li> <p><strong>é›†ä¸­é…ç½®ç®¡ç†</strong>ï¼š</p> <p>ç»“åˆ Spring Cloud Configï¼ŒSpring Cloud Bus å¯ä»¥åœ¨ä¸é‡å¯åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹åˆ·æ–°å¤šä¸ªåº”ç”¨ç¨‹åºå®ä¾‹çš„é…ç½®ã€‚ä¾‹å¦‚ï¼Œå½“åœ¨é›†ä¸­é…ç½®åº“ä¸­æ›´æ–°é…ç½®å±æ€§æ—¶ï¼ŒSpring Cloud Bus å¯ä»¥å°†æ›´æ”¹å¹¿æ’­åˆ°æ‰€æœ‰ç›¸å…³æœåŠ¡ã€‚</p> </li><li> <p><strong>å¯æ‰©å±•æ€§</strong>ï¼š</p> <p>é€šè¿‡åˆ©ç”¨æ¶ˆæ¯ä»£ç†ï¼ŒSpring Cloud Bus å…è®¸åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¿›è¡Œå¯æ‰©å±•çš„é€šä¿¡ã€‚è¿™åœ¨å¤§è§„æ¨¡ç³»ç»Ÿä¸­å°¤ä¸ºæœ‰ç”¨ï¼Œå› ä¸ºæœåŠ¡ä¹‹é—´çš„ç›´æ¥é€šä¿¡å¯èƒ½æ•ˆç‡ä¸é«˜ã€‚</p> </li><li> <p><strong>å®ç°</strong>ï¼š</p> <p>è¦å®ç° Spring Cloud Busï¼Œé€šå¸¸éœ€è¦åœ¨ Spring Boot åº”ç”¨ç¨‹åºä¸­åŒ…å«ç›¸å…³ä¾èµ–é¡¹ï¼Œé…ç½®æ¶ˆæ¯ä»£ç†ï¼Œå¹¶ä½¿ç”¨æ³¨è§£æ ‡è®°éœ€è¦ä¼ æ’­çš„é…ç½®æ›´æ”¹æˆ–äº‹ä»¶ã€‚</p> </li></ol> 
<hr> 
<h4><a id="_56"></a>æ³¨æ„äº‹é¡¹</h4> 
<p>åœ¨ä½¿ç”¨ Spring Cloud Bus æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p> 
<h5><a id="1__64"></a>1. æ¶ˆæ¯ä»£ç†é€‰æ‹©</h5> 
<p>Spring Cloud Bus æ”¯æŒå¤šç§æ¶ˆæ¯ä»£ç†ï¼ˆå¦‚ RabbitMQã€Kafkaï¼‰ï¼Œé€‰æ‹©é€‚åˆçš„æ¶ˆæ¯ä»£ç†éå¸¸é‡è¦ã€‚éœ€è¦æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚æ¥å†³å®šä½¿ç”¨å“ªä¸€ç§ã€‚</p> 
<h5><a id="2__70"></a>2. æ¶ˆæ¯é˜Ÿåˆ—é…ç½®</h5> 
<p>ç¡®ä¿æ¶ˆæ¯é˜Ÿåˆ—çš„é…ç½®æ­£ç¡®ï¼ŒåŒ…æ‹¬è¿æ¥ä¿¡æ¯ã€é˜Ÿåˆ—åç§°ã€ä¸»é¢˜ç­‰ã€‚å¦‚æœé…ç½®ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯æ— æ³•æ­£å¸¸ä¼ é€’æˆ–ä¸¢å¤±ã€‚</p> 
<h5><a id="3__76"></a>3. æ¶ˆæ¯æŒä¹…åŒ–</h5> 
<p>ç¡®ä¿æ¶ˆæ¯ä»£ç†é…ç½®äº†æŒä¹…åŒ–ç­–ç•¥ï¼Œä»¥é¿å…åœ¨æœåŠ¡é‡å¯æˆ–å´©æºƒæ—¶ä¸¢å¤±æ¶ˆæ¯ã€‚</p> 
<h5><a id="4__82"></a>4. å¹‚ç­‰æ€§</h5> 
<p>ç”±äºç½‘ç»œçš„ä¸ç¡®å®šæ€§ï¼Œæ¶ˆæ¯å¯èƒ½ä¼šè¢«å¤šæ¬¡æ¥æ”¶å’Œå¤„ç†ã€‚å› æ­¤ï¼ŒæœåŠ¡å¤„ç†æ¶ˆæ¯æ—¶éœ€è¦ä¿è¯å¹‚ç­‰æ€§ï¼Œé¿å…å› é‡å¤å¤„ç†æ¶ˆæ¯å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´ã€‚</p> 
<h5><a id="5__88"></a>5. å®‰å…¨æ€§</h5> 
<p>è€ƒè™‘åˆ°æ¶ˆæ¯ä¸­å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œéœ€é…ç½®åˆé€‚çš„å®‰å…¨æªæ–½ï¼Œå¦‚æ¶ˆæ¯åŠ å¯†ã€è®¤è¯æˆæƒç­‰ï¼Œé˜²æ­¢æ¶ˆæ¯è¢«éæ³•è®¿é—®æˆ–ç¯¡æ”¹ã€‚</p> 
<h5><a id="6__94"></a>6. æ¶ˆæ¯å¤§å°</h5> 
<p>æ¶ˆæ¯çš„å¤§å°ä¼šå½±å“ä¼ è¾“æ€§èƒ½å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚å°½é‡ä¿æŒæ¶ˆæ¯ä½“ç§¯å°ï¼Œå¦‚æœéœ€è¦ä¼ é€’å¤§æ•°æ®ï¼Œè€ƒè™‘å°†æ•°æ®æ”¾åœ¨å…±äº«å­˜å‚¨ä¸­ï¼Œä»…åœ¨æ¶ˆæ¯ä¸­ä¼ é€’æ•°æ®å¼•ç”¨æˆ–æ ‡è¯†ç¬¦ã€‚</p> 
<h5><a id="7__100"></a>7. æ€§èƒ½ç›‘æ§</h5> 
<p>ç›‘æ§æ¶ˆæ¯ä»£ç†å’Œæ¶ˆæ¯ä¼ é€’çš„æ€§èƒ½ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³æ€§èƒ½ç“¶é¢ˆã€‚å¯ä»¥ä½¿ç”¨æ¶ˆæ¯ä»£ç†æä¾›çš„ç›‘æ§å·¥å…·æˆ–ç¬¬ä¸‰æ–¹ç›‘æ§ç³»ç»Ÿã€‚</p> 
<h5><a id="8__106"></a>8. é”™è¯¯å¤„ç†</h5> 
<p>å»ºç«‹å¥å…¨çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿åœ¨æ¶ˆæ¯å¤„ç†å¤±è´¥æ—¶æœ‰ç›¸åº”çš„è¡¥æ•‘æªæ–½ï¼Œå¦‚é‡è¯•æœºåˆ¶ã€æ­»ä¿¡é˜Ÿåˆ—ç­‰ã€‚</p> 
<h5><a id="9__112"></a>9. ç‰ˆæœ¬å…¼å®¹æ€§</h5> 
<p>ç¡®ä¿ Spring Cloud Bus å’Œæ‰€ä½¿ç”¨çš„æ¶ˆæ¯ä»£ç†ç‰ˆæœ¬ä¹‹é—´çš„å…¼å®¹æ€§ã€‚å…³æ³¨ä¾èµ–åº“çš„æ›´æ–°æ—¥å¿—ï¼Œé¿å…å› ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´çš„é—®é¢˜ã€‚</p> 
<h5><a id="10__118"></a>10. æµ‹è¯•</h5> 
<p>åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œå……åˆ†æµ‹è¯•æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œç¡®ä¿åœ¨å„ç§æƒ…å†µä¸‹æ¶ˆæ¯éƒ½èƒ½æ­£ç¡®ä¼ é€’å’Œå¤„ç†ã€‚</p> 
<h5><a id="11__124"></a>11. é…ç½®åŒæ­¥</h5> 
<p>ä½¿ç”¨ Spring Cloud Bus æ¥åŒæ­¥é…ç½®æ—¶ï¼Œç¡®ä¿é…ç½®ä¸­å¿ƒä¸å„æœåŠ¡å®ä¾‹çš„åŒæ­¥æœºåˆ¶å¯é ï¼Œé¿å…å› é…ç½®ä¸åŒæ­¥å¯¼è‡´çš„æœåŠ¡å¼‚å¸¸ã€‚</p> 
<h5><a id="12__130"></a>12. æ—¥å¿—è®°å½•</h5> 
<p>è®°å½•æ¶ˆæ¯çš„ä¼ é€’å’Œå¤„ç†æ—¥å¿—ï¼Œæ–¹ä¾¿é—®é¢˜æ’æŸ¥å’Œç³»ç»Ÿç»´æŠ¤ã€‚</p> 
<hr> 
<h4><a id="_140"></a>å¸¸ç”¨ç¤ºä¾‹</h4> 
<p>ä¸‹é¢æ˜¯å‡ ä¸ªå¸¸ç”¨çš„ Spring Cloud Bus ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ Spring Cloud Bus æ¥å®ç°é…ç½®åŒæ­¥å’Œäº‹ä»¶å¹¿æ’­ã€‚</p> 
<h5><a id="_1__146"></a>ç¤ºä¾‹ 1: é…ç½®åŒæ­¥</h5> 
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœåŠ¡ <code>config-server</code> å’Œ <code>client-service</code>ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Spring Cloud Bus æ¥åŒæ­¥é…ç½®ã€‚</p> 
<h6><a id="_configserver_152"></a>é…ç½®æœåŠ¡å™¨ (<code>config-server</code>)</h6> 
<ol><li> <p><strong>æ·»åŠ ä¾èµ–</strong></p> <p>åœ¨ <code>config-server</code> çš„ <code>pom.xml</code> ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p> <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> </li><li> <p><strong>é…ç½®æ–‡ä»¶</strong></p> <p>åœ¨ <code>application.yml</code> ä¸­é…ç½® RabbitMQï¼š</p> <pre><code>spring:
  cloud:
    config:
      server:
        git:
          uri: https://github.com/your/repo
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
</code></pre> </li><li> <p><strong>ä¸»åº”ç”¨ç±»</strong></p> <p>åœ¨ <code>ConfigServerApplication.java</code> ä¸­å¯ç”¨é…ç½®æœåŠ¡å™¨ï¼š</p> <pre><code>@SpringBootApplication
@EnableConfigServer
public class ConfigServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(ConfigServerApplication.class, args);
    }
}
</code></pre> </li></ol> 
<h6><a id="_clientservice_207"></a>å®¢æˆ·ç«¯æœåŠ¡ (<code>client-service</code>)</h6> 
<ol><li> <p><strong>æ·»åŠ ä¾èµ–</strong></p> <p>åœ¨ <code>client-service</code> çš„ <code>pom.xml</code> ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p> <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> </li><li> <p><strong>é…ç½®æ–‡ä»¶</strong></p> <p>åœ¨ <code>bootstrap.yml</code> ä¸­é…ç½®ï¼š</p> <pre><code>spring:
  application:
    name: client-service
  cloud:
    config:
      uri: http://localhost:8888
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
</code></pre> </li><li> <p><strong>åˆ·æ–°ç«¯ç‚¹</strong></p> <p>åœ¨ <code>application.yml</code> ä¸­å¯ç”¨ Actuator ç«¯ç‚¹ï¼š</p> <pre><code>management:
  endpoints:
    web:
      exposure:
        include: bus-refresh
</code></pre> </li><li> <p><strong>ä¸»åº”ç”¨ç±»</strong></p> <p>åœ¨ <code>ClientServiceApplication.java</code> ä¸­å¯åŠ¨å®¢æˆ·ç«¯æœåŠ¡ï¼š</p> <pre><code>@SpringBootApplication
public class ClientServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(ClientServiceApplication.class, args);
    }
}
</code></pre> </li></ol> 
<h6><a id="_275"></a>è§¦å‘é…ç½®åˆ·æ–°</h6> 
<p>å½“ä½ åœ¨é…ç½®ä»“åº“ä¸­æ›´æ”¹é…ç½®æ–‡ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è§¦å‘é…ç½®åˆ·æ–°ï¼š</p> 
<p>å‘é€ POST è¯·æ±‚åˆ°é…ç½®æœåŠ¡å™¨çš„ <code>/actuator/bus-refresh</code> ç«¯ç‚¹ï¼š</p> 
<pre><code>curl -X POST http://localhost:8888/actuator/bus-refresh
</code></pre> 
<h5><a id="_2__287"></a>ç¤ºä¾‹ 2: äº‹ä»¶å¹¿æ’­</h5> 
<p>ä½¿ç”¨ Spring Cloud Bus è¿˜å¯ä»¥åœ¨å¤šä¸ªæœåŠ¡ä¹‹é—´å¹¿æ’­è‡ªå®šä¹‰äº‹ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚</p> 
<ol><li> <p><strong>å®šä¹‰äº‹ä»¶</strong></p> <p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ç±»ï¼š</p> <pre><code>public class CustomEvent extends RemoteApplicationEvent {
    private String message;

    // å¿…é¡»çš„é»˜è®¤æ„é€ å‡½æ•°
    public CustomEvent() {}

    public CustomEvent(Object source, String originService, String destinationService, String message) {
        super(source, originService, destinationService);
        this.message = message;
    }

    public String getMessage() {
        return message;
    }
}
</code></pre> </li><li> <p><strong>å‘å¸ƒäº‹ä»¶</strong></p> <p>åœ¨ä¸€ä¸ªæœåŠ¡ä¸­å‘å¸ƒäº‹ä»¶ï¼š</p> <pre><code>@RestController
public class EventController {
    @Autowired
    private ApplicationEventPublisher publisher;

    @PostMapping("/publish")
    public void publishEvent(@RequestParam String message) {
        CustomEvent event = new CustomEvent(this, "origin-service", "destination-service", message);
        publisher.publishEvent(event);
    }
}
</code></pre> </li><li> <p><strong>æ¥æ”¶äº‹ä»¶</strong></p> <p>åœ¨å¦ä¸€ä¸ªæœåŠ¡ä¸­æ¥æ”¶äº‹ä»¶ï¼š</p> <pre><code>@Component
public class CustomEventListener implements ApplicationListener&lt;CustomEvent&gt; {
    @Override
    public void onApplicationEvent(CustomEvent event) {
        System.out.println("Received event with message: " + event.getMessage());
    }
}
</code></pre> </li></ol> 
<h5><a id="_3_Spring_Cloud_Bus__RabbitMQ_355"></a>ç¤ºä¾‹ 3: Spring Cloud Bus æ•´åˆ RabbitMQ</h5> 
<p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ Spring Cloud Bus å’Œ RabbitMQ çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š</p> 
<ol><li> <p><strong>æ·»åŠ ä¾èµ–</strong>ï¼š</p> <p>åœ¨ <code>pom.xml</code> æˆ– <code>build.gradle</code> æ–‡ä»¶ä¸­æ·»åŠ å¿…è¦çš„ä¾èµ–é¡¹ã€‚</p> <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre> </li><li> <p><strong>é…ç½®æ¶ˆæ¯ä»£ç†</strong>ï¼š</p> <p>åœ¨ <code>application.properties</code> æˆ– <code>application.yml</code> æ–‡ä»¶ä¸­é…ç½®æ¶ˆæ¯ä»£ç†è®¾ç½®ã€‚</p> <pre><code>spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
</code></pre> </li><li> <p><strong>å¯ç”¨ Bus åˆ·æ–°</strong>ï¼š</p> <p>ä½¿ç”¨ <code>@RefreshScope</code> æ³¨è§£è¡¨ç¤ºå½“æ”¶åˆ°äº‹ä»¶æ—¶ï¼Œbean åº”è¯¥åˆ·æ–°å…¶é…ç½®ã€‚</p> <pre><code>@RestController
@RefreshScope
public class MyController {
    @Value("${my.config.property}")
    private String myConfigProperty;
    
    @GetMapping("/property")
    public String getProperty() {
        return myConfigProperty;
    }
}
</code></pre> </li><li> <p><strong>è§¦å‘åˆ·æ–°</strong>ï¼š</p> <p>è§¦å‘åˆ·æ–°äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ HTTP ç«¯ç‚¹ï¼‰æ¥ä¼ æ’­é…ç½®æ›´æ”¹ã€‚</p> <pre><code>@RestController
public class RefreshController {
    @Autowired
    private ApplicationContext applicationContext;
    
    @PostMapping("/refresh")
    public void refresh() {
        applicationContext.publishEvent(new RefreshRemoteApplicationEvent(this, "configServer", null));
    }
}
</code></pre> </li></ol> 
<p>Spring Cloud Bus æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç»´æŠ¤ä¸€è‡´æ€§å’Œç®¡ç†çŠ¶æ€çš„å¼ºå¤§å·¥å…·ã€‚å®ƒç®€åŒ–äº†è·¨å¤šä¸ªå¾®æœåŠ¡å®ä¾‹å¤„ç†é…ç½®æ›´æ”¹å’Œå…¶ä»–çŠ¶æ€æ›´æ”¹çš„è¿‡ç¨‹ã€‚</p> 
<hr> 
<h4><a id="_424"></a>æ€»ç»“</h4> 
<p>Spring Cloud Bus æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œèƒ½å¤Ÿåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°é…ç½®åŒæ­¥å’Œäº‹ä»¶å¹¿æ’­ï¼Œæœ‰æ•ˆæé«˜ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p> 
<p>é€šè¿‡é€‰æ‹©åˆé€‚çš„æ¶ˆæ¯ä»£ç†ã€é…ç½®æŒä¹…åŒ–å’Œå®‰å…¨æªæ–½ã€ä¿è¯æ¶ˆæ¯å¤„ç†çš„å¹‚ç­‰æ€§ã€å»ºç«‹å¥å…¨çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¹¶è¿›è¡Œå……åˆ†çš„æµ‹è¯•å’Œæ—¥å¿—è®°å½•ï¼Œå¯ä»¥ç¡®ä¿ Spring Cloud Bus çš„é«˜æ•ˆè¿è¡Œã€‚</p> 
<p>æ— è®ºæ˜¯å®ç°é…ç½®çš„åŠ¨æ€åŒæ­¥ï¼Œè¿˜æ˜¯åœ¨æœåŠ¡ä¹‹é—´å¹¿æ’­äº‹ä»¶ï¼ŒSpring Cloud Bus éƒ½èƒ½æ˜¾è‘—æå‡å¾®æœåŠ¡æ¶æ„çš„å¯é æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p> 
<hr> 
<h4><a id="font_colordd0000font_440"></a><font color="#dd0000">å¼ºçƒˆæ¨è</font></h4> 
<p><font color="#dd0000">å‰äº›å¤©å‘ç°äº†ä¸€ä¸ªå·¨ç‰›çš„äººå·¥æ™ºèƒ½å­¦ä¹ ç½‘ç«™ï¼Œé€šä¿—æ˜“æ‡‚ï¼Œé£è¶£å¹½é»˜ï¼Œå¿ä¸ä½åˆ†äº«ä¸€ä¸‹ç»™å¤§å®¶ã€‚ç‚¹å‡»è·³è½¬åˆ°ç½‘ç«™:</font><a href="https://www.captainbed.cn/venus" rel="nofollow">äººå·¥æ™ºèƒ½</a></p> 
<p><img src="https://images2.imgbox.com/b1/98/cmEQ3zcu_o.jpg" alt="b004071ozy_05_amzn"></p> 
<hr> 
<h4><a id="_454"></a>ä¸“æ é›†é”¦</h4> 
<p>å¤§ä½¬ä»¬å¯ä»¥æ”¶è—ä»¥å¤‡ä¸æ—¶ä¹‹éœ€ï¼š</p> 
<p>Spring Boot ä¸“æ ï¼šhttp://t.csdnimg.cn/peKde</p> 
<p>ChatGPT ä¸“æ ï¼šhttp://t.csdnimg.cn/cU0na</p> 
<p>Java ä¸“æ ï¼šhttp://t.csdnimg.cn/YUz5e</p> 
<p>Go ä¸“æ ï¼šhttp://t.csdnimg.cn/Jfryo</p> 
<p>Netty ä¸“æ ï¼šhttp://t.csdnimg.cn/0Mp1H</p> 
<p>Redis ä¸“æ ï¼šhttp://t.csdnimg.cn/JuTue</p> 
<p>Mysql ä¸“æ ï¼šhttp://t.csdnimg.cn/p1zU9</p> 
<p>æ¶æ„ä¹‹è·¯ ä¸“æ ï¼šhttp://t.csdnimg.cn/bXAPS</p> 
<hr> 
<h4><a id="_480"></a>å†™åœ¨æœ€å</h4> 
<p><strong>æ„Ÿè°¢æ‚¨çš„æ”¯æŒå’Œé¼“åŠ±ï¼ ğŸ˜ŠğŸ™</strong></p> 
<p><strong>å¦‚æœå¤§å®¶å¯¹ç›¸å…³æ–‡ç« æ„Ÿå…´è¶£ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·"æ¶æ„æ®¿å ‚"ï¼Œä¼šæŒç»­æ›´æ–°AIGCï¼ŒjavaåŸºç¡€é¢è¯•é¢˜, netty, spring boot, spring cloudç­‰ç³»åˆ—æ–‡ç« ï¼Œä¸€ç³»åˆ—å¹²è´§éšæ—¶é€è¾¾!</strong></p> 
<p><strong>å¦‚æœæœ‰é¡¹ç›®æˆ–è€…æ¯•è®¾åˆä½œï¼Œè¯·V:fengyelin8866,å¤‡æ³¨é¡¹ç›®åˆä½œ</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3716300ac946602ffa55fddaff24d1d7/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">NPOI å¯¼å‡ºåˆ—å¤ªå¤šæˆ–è€…æ•°æ®å¤ªå¤šçˆ†å†…å­˜</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba26cd2f6635426a8d5efec2390fb035/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Javaä¸­å®šæ—¶ä»»åŠ¡æ‰§è¡Œçš„ä¸‰ç§æ–¹å¼</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>