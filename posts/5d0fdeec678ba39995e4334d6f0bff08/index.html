<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL基础篇】SQL指令：DQL及DCL - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5d0fdeec678ba39995e4334d6f0bff08/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【MySQL基础篇】SQL指令：DQL及DCL">
  <meta property="og:description" content="1、DQL · DQL - 介绍 DQL英文全称是Data Query Language(数据查询语言)，数据查询语言，用来查询数据表中的记录。（在MySQL中应用是最为广泛的）
查询关键字：SELECT
· DQL - 语法 SELECT
字段列表
FROM
表名列表
WHERE
条件列表
GROUP UP
分组字段列表
HAVING
分组后条件列表
ORDER BY
排序字段列表
LIMIT
分页参数 · DQL - 基础查询 1、查询多个字段
SELECT 字段1，字段2，字段3，... FROM 表名; SELECT * FROM 表名; 2、设置别名（增强字段可读性）
SELECT 字段1 [AS 别名1]，字段2[AS 别名2] .... 表名; 3、去除重复记录
SELECT DISTINCT 字段列表 FROM 表名; insert into staff_table values(1,001,&#39;张无忌&#39;,&#39;男&#39;,&#39;123456789000000000&#39;,&#39;大理&#39;,&#39;2000-12-31&#39;), (2,002,&#39;赵敏&#39;,&#39;女&#39;,&#39;123456789000000001&#39;,&#39;北京&#39;,&#39;2000-01-01&#39;), (3,003,&#39;韦小宝&#39;,&#39;男&#39;,&#39;123456789000000002&#39;,&#39;上海&#39;,&#39;2001-03-04&#39;), (4,004,&#39;郭峰&#39;,&#39;男&#39;,&#39;123456789000000003&#39;,&#39;天津&#39;,&#39;2004-02-19&#39;), (5,005,&#39;黄蓉&#39;,&#39;女&#39;,&#39;123456789000000004&#39;,&#39;广东&#39;,&#39;2006-11-12&#39;), (6,006,&#39;杨过&#39;,&#39;男&#39;,&#39;123456789000000005&#39;,&#39;佛山&#39;,&#39;2004-02-14&#39;), (7,007,&#39;狗蛋&#39;,&#39;男&#39;,&#39;&#39;,&#39;上海&#39;,&#39;2011-01-01&#39;); #1、查询指定字段name，worknumber，dress，返回 select name,worknumber,dress from staff_table; #2、查询返回所有字段 select * from staff_table; #尽量不要去写*第一不直观，第二会影响效率，遵循开发规范 #也可以这样写 select id,worknumber,name,gender,idcard,dress,staff_date from staff_table; #3、查询所有员工的工作地址，起别名 select dress as &#39;工作地址&#39; from staff_table; #4、查询员工的上班地址（不要重复） select distinct dress &#39;工作地址&#39; from staff_table; · DQL - 条件查询 1、语法">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-30T00:00:18+08:00">
    <meta property="article:modified_time" content="2024-06-30T00:00:18+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL基础篇】SQL指令：DQL及DCL</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1、DQL</h2> 
<h3>· DQL - 介绍 </h3> 
<p>DQL英文全称是Data Query Language(数据查询语言)，数据查询语言，用来查询数据表中的记录。（在MySQL中应用是最为广泛的）</p> 
<p>查询关键字：SELECT</p> 
<h3>· DQL - 语法 </h3> 
<blockquote> 
 <p>SELECT</p> 
 <p>                字段列表</p> 
 <p>FROM</p> 
 <p>                表名列表</p> 
 <p>WHERE</p> 
 <p>                条件列表</p> 
 <p>GROUP UP</p> 
 <p>                分组字段列表</p> 
 <p>HAVING</p> 
 <p>                分组后条件列表</p> 
 <p>ORDER BY</p> 
 <p>                排序字段列表</p> 
 <p>LIMIT</p> 
 <p>                分页参数 </p> 
</blockquote> 
<h3>· DQL - 基础查询 </h3> 
<p>1、查询多个字段</p> 
<blockquote> 
 <p>SELECT 字段1，字段2，字段3，... FROM 表名; </p> 
</blockquote> 
<blockquote> 
 <p>SELECT * FROM 表名; </p> 
</blockquote> 
<p>2、设置别名（增强字段可读性）</p> 
<blockquote> 
 <p>SELECT 字段1 [AS 别名1]，字段2[AS 别名2] .... 表名; </p> 
</blockquote> 
<p>3、去除重复记录</p> 
<blockquote> 
 <p>SELECT DISTINCT 字段列表 FROM 表名; </p> 
</blockquote> 
<pre><code class="language-sql">insert into staff_table values(1,001,'张无忌','男','123456789000000000','大理','2000-12-31'),
                              (2,002,'赵敏','女','123456789000000001','北京','2000-01-01'),
                              (3,003,'韦小宝','男','123456789000000002','上海','2001-03-04'),
                              (4,004,'郭峰','男','123456789000000003','天津','2004-02-19'),
                              (5,005,'黄蓉','女','123456789000000004','广东','2006-11-12'),
                              (6,006,'杨过','男','123456789000000005','佛山','2004-02-14'),
                              (7,007,'狗蛋','男','','上海','2011-01-01');
#1、查询指定字段name，worknumber，dress，返回
select name,worknumber,dress from staff_table;
#2、查询返回所有字段
select * from staff_table;
#尽量不要去写*第一不直观，第二会影响效率，遵循开发规范
#也可以这样写
select id,worknumber,name,gender,idcard,dress,staff_date from staff_table;
#3、查询所有员工的工作地址，起别名
select dress as '工作地址' from staff_table;
#4、查询员工的上班地址（不要重复）
select distinct dress '工作地址' from staff_table;</code></pre> 
<h3 style="background-color:transparent;">· DQL - 条件查询</h3> 
<p>1、语法</p> 
<blockquote> 
 <p>SELECT 字段列表 FROM 表名 WHERE 条件列表； </p> 
</blockquote> 
<p>2、条件</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:700px;"><tbody><tr><td>比较运算符</td><td>功能</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt; 或 !=</td><td>不等于</td></tr><tr><td>BETWEEN ...AND ...</td><td>在某个范围值之内（含最小、最大值）</td></tr><tr><td>IN(...)</td><td>在in之后的列表中的值，多选一</td></tr><tr><td>LIKE (占位符)</td><td>模糊匹配（_匹配单个字符，%匹配任意个字符）</td></tr><tr><td>IS NULL</td><td>是NULL</td></tr></tbody></table> 
<table border="1" cellpadding="1" cellspacing="1" style="width:700px;"><tbody><tr><td>逻辑运算符</td><td>功能</td></tr><tr><td>AND 或 &amp;&amp;</td><td>并且（多个条件同时成立）</td></tr><tr><td>OR 或 ||</td><td>或者（多个条件任意一个成立）</td></tr><tr><td>NOT 或 ！</td><td>非，不是</td></tr></tbody></table> 
<pre><code class="language-sql">#1、查询编号等于4的员工
select * from staff_table where id=4;
#2、查询编号大于3的员工
select * from staff_table where id&gt;3;
#3、查询编号大于等于3的员工
select * from staff_table where id&gt;=3;
#4、查询没有身份证号的员工信息
select * from staff_table where idcard is null;
#5、查询有身份证号的员工信息
select * from staff_table where idcard is not null;
#6、查询编号不等于4的员工信息
select * from staff_table where id!=4;
#7、查询编号在2（包含）到6（包含）之间的信息
select * from staff_table where id between 2 and 6;
select * from staff_table where id&gt;=2&amp;&amp;id&lt;=6;
#8、查询性别为女且编号小于等于5的员工信息
select * from staff_table where gender='女'&amp;&amp;id&lt;=5;
#9、查询编号为2或8或10的员工信息
select * from staff_table where id=2||id=8||id=10;
select * from staff_table where id(2,8,10);
#10、查询姓名为两个字的员工信息
select * from staff_table where name like '__';
#11、查询身份证最后一位为X的信息
select * from staff_table where idcard like '%X';
</code></pre> 
<h3> · DQL - 聚合函数</h3> 
<p>1、聚合函数是将一列数据作为一个整体，进行纵向计算。</p> 
<p>2、常见聚合函数</p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:700px;"><tbody><tr><td>函数</td><td>功能</td></tr><tr><td>count</td><td>统计数量</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>avg</td><td>平均值</td></tr><tr><td>sum</td><td> <p>求和</p> </td></tr></tbody></table> 
<p>3、语法</p> 
<blockquote> 
 <p>SELECT 聚合函数(字段列表) FROM 表名; </p> 
</blockquote> 
<pre><code class="language-sql">#1、统计该企业员工数量
select count(*) from staff_table;
#2、统计该企业员工编号的平均值
select avg(id) from staff_table;
#3、统计该企业员工最晚入职时间
select max(staff_date) from staff_table;
#4、统计该企业员工最早入职时间
select min(staff_date) from staff_table;
#5、统计上海地区员工编号之和
select sum(id) from staff_table where dress='上海';</code></pre> 
<p>注意：null值不参与运算</p> 
<h3>· DQL - 分组查询</h3> 
<p>1、语法</p> 
<blockquote> 
 <p>SELECT 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段名 [HAVING 分组后过滤条件];</p> 
</blockquote> 
<p>2、where与having的区别：</p> 
<p>执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤；</p> 
<p>判断条件不同：where不能对聚合函数进行判断，而having可以。</p> 
<pre><code class="language-sql">#分组查询
#1、根据性别分组，统计男员工和女员工的数量
select gender,count(*) from staff_table group by gender;
#2、根据性别分组，统计男员工与女员工的平均编号
select gender,avg(id) from staff_table group by gender;
#3、查询编号小于5的员工，并根据工作地址分组，获取员工数量小于等于3的工作地址
select dress,count(*) from staff_table where id&lt;5 group by dress having count(*)&lt;=3;</code></pre> 
<p>注意：</p> 
<p>执行顺序：where&gt;聚合函数&gt;having</p> 
<p>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。</p> 
<h3>· DQL - 排序查询 </h3> 
<p>1、语法</p> 
<blockquote> 
 <p>SELECT 字段列表 FROM ORDER BY 字段1 排序方式1，字段2 排序方式2; </p> 
</blockquote> 
<p>2、排序方式</p> 
<p>ASC：升序（默认值)</p> 
<p>DESC：降序 </p> 
<p>注意：如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序 </p> 
<pre><code class="language-sql">#1、根据根据性别对公司员工进行升序排序
select * from staff_table order by gender;
#2、根据入职时间对员工进行降序排序
select * from staff_table order by staff_date desc;
#3、根据根据性别对员工进行升序排序，性别相同，再按照入职时间进行降序排序
select * from staff_table order by gender,staff_date desc;</code></pre> 
<h3>· DQL - 分页查询 </h3> 
<p>1、语法</p> 
<blockquote> 
 <p>SELECT 字段列表 FROM 表名 LIMIT 起始索引，查询记录数; </p> 
</blockquote> 
<p>注意：</p> 
<p>起始索引从0开始，起始索引=（查询页码-1）*每页显示记录数；</p> 
<p>分页查询是数据库的方言，不同的数据库有不同的实现方式MySQL是LIMIT；</p> 
<p>如果查询的是第一页的数据，起始索引可以省略，直接简写为limit 10。 </p> 
<pre><code class="language-sql">#1、查询第一页的员工数据，每页展示3条记录
select * from staff_table limit 3;
#2、查询第二页员工数据，每页展示3条记录
select * from staff_table limit 3,3;
#3、查询第三页员工信息
select * from staff_table limit 6,3;</code></pre> 
<p> 例题分析：</p> 
<pre><code class="language-sql">#1、查询编号为2，3，4的女员工信息
select * from staff_table where id in(2,3,4)&amp;&amp;gender='女';
#2、查询性别为男，并且编号在2~6（含）以内姓名为三个字的员工
select * from staff_table where gender='男'&amp;&amp;id between 2 and 6&amp;&amp;name like '___';
#3、统计员工表中，编号小于4的，男性员工与女性员工的人数
select gender,count(*) from staff_table where id&lt;4 group by gender;
#4、查询所有编号小于5的员工的姓名和编号，并对查询结果按性别升序排序，如果性别相同按入职时间降序排序
select name,id from staff_table where id&lt;5 order by gender,staff_date desc;
#5、查询性别为男，且编号在2~5（含）以内的前两个员工信息，查询结果按性别升序排序，如果性别相同按入职时间降序排序
select * from staff_table where gender='男'&amp;&amp;id between 2 and 5  order by gender,staff_date desc limit 2;</code></pre> 
<h3>· DQL - 执行顺序</h3> 
<p>首先执行FROM来决定要查询的是哪张表的数据紧接着通过where来指定查询条件第三步通过group by以及having来指定分组以及分组以后的条件第四步决定我们查询要返回哪些字段，执行SELECT，再往下就是order by以及limit。</p> 
<h2>2、DCL </h2> 
<p>1、介绍</p> 
<p>DCL英文全称是Date Control Language(数据控制语句)，用来管理数据库用户、控制数据库的访问权限。</p> 
<h3>· DCL - 用户管理</h3> 
<p>1、查询用户</p> 
<blockquote> 
 <p>USE mysql;</p> 
 <p>SELECT * FROM user; </p> 
</blockquote> 
<p>2、创建用户</p> 
<blockquote> 
 <p>CREATE USER '用户名'@'主机名' IDENTIFIED BY '密码'; </p> 
</blockquote> 
<p>3、修改用户密码</p> 
<blockquote> 
 <p>ALTER USER  '用户名'@'主机名' IDENTIFIED WITH mysql_native_password BY '新密码';</p> 
</blockquote> 
<p>4、删除用户</p> 
<blockquote> 
 <p>DROP USER  '用户名'@'主机名'; </p> 
</blockquote> 
<pre><code class="language-sql">#1、创建用户名为test，只能在主机localhost访问，密码123456
create user 'test'@'localhost' identified by '123456';
#2、创建用户xiaodu，可以在任意主机访问密码为123456
create user 'xiaodu'@'%' identified by '123456';
#3、修改用户xiaodu的访问密码为 1234
alter user 'xiaodu'@'%' identified with mysql_native_password by '1234';
#4、删除test@localhost用户
drop user 'xiaodu'@'%';</code></pre> 
<p><img alt="" height="218" src="https://images2.imgbox.com/bc/49/KNxaLxfq_o.png" width="1200"></p> 
<p>注意：</p> 
<p>主机名可以用%通配；</p> 
<p>这类SQL开发人员操作的比较少，主要是DBA（数据库管理员）使用。</p> 
<h3>· DCL - 权限控制</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:700px;"><tbody><tr><td>权限</td><td>说明</td></tr><tr><td>ALL,ALL PRIVILEGES</td><td>所有权限</td></tr><tr><td>SELECT</td><td>查询数据</td></tr><tr><td>INSERT</td><td>插入数据</td></tr><tr><td>UPDATE</td><td>修改数据</td></tr><tr><td>DELETE</td><td>删除数据</td></tr><tr><td>ALTER</td><td>修改表</td></tr><tr><td>DROP</td><td>删除数据库/表/视图</td></tr><tr><td>CREATE</td><td>创建数据库/表</td></tr></tbody></table> 
<p>1、查询权限</p> 
<blockquote> 
 <p>SHOW GRANTS FOR '用户名'@'主机名';</p> 
</blockquote> 
<p>2、授予权限 </p> 
<blockquote> 
 <p> GRANT 权限列表 ON 数据库名.表名 TO '用户名'@'主机名';</p> 
</blockquote> 
<p> 3、撤销权限</p> 
<blockquote> 
 <p> REVOKE 权限列表 ON 数据库名.表名 FROM '用户名'@'主机名';</p> 
</blockquote> 
<pre><code class="language-sql">#查询权限
show grants for 'test'@'localhost';
#授予权限
grant all on test.* to 'test'@'localhost';
#撤销权限
revoke all on test.* from 'test'@'localhost';</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2f8dc4e8f9238b9d6eb836fe257d2948/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入分析 Android Service (六)(完)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d102c79d98e61106f58862da50900058/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【面试干货】一个Java源文件中可以包含多个类吗？（不包括内部类）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>