<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>åœ¨æœ¬åœ°éƒ¨ç½²OllamaæœåŠ¡æ¥å£é™„åŠ OpenWebUIåšæµ‹è¯• - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9ff2782c5ec8513f501f02644d0f5864/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="åœ¨æœ¬åœ°éƒ¨ç½²OllamaæœåŠ¡æ¥å£é™„åŠ OpenWebUIåšæµ‹è¯•">
  <meta property="og:description" content="ä½¿ç”¨Ollamaåœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªç±»ä¼¼openaiçš„APIåšå¼€å‘å’Œæµ‹è¯• 1ã€å‡†å¤‡ä¸€ä¸ªæ—§ç”µè„‘ å› ä¸ºé…ç½®è¦æ±‚ä¸é«˜ï¼Œäº”å¹´å‰çš„ç”µè„‘éƒ½èƒ½ä½¿ç”¨ï¼Œè£…ä¸€å—æ—§æ˜¾å¡ï¼Œæ˜¾å­˜å¤§ä¸€ç‚¹çš„æœ€å¥½æœ‰8Gã€‚å®åœ¨æ²¡æ˜¾å¡ä¹Ÿæ²¡å…³ç³»ï¼Œç”µè„‘å†…å­˜å¤§ä¹Ÿèƒ½è¿è¡Œï¼Œæ— éè¿è¡Œçš„æ…¢ä¸€äº›ä¸å½±å“å¼€å‘æµ‹è¯•ã€‚åœ¨ç”µè„‘ä¸Šå®‰è£…centos stream 9 æœåŠ¡å™¨å¸¦ç•Œé¢ç‰ˆï¼Œè£…ä¸Šæ˜¾å¡é©±åŠ¨ï¼Œæ²¡æœ‰æ˜¾å¡çš„åªè£…ç³»ç»Ÿå°±è¡Œäº†ã€‚é…ç½®å¥½èƒ½ä¸Šç½‘ï¼ˆæœ¬ç¯‡ä¸ç”¨ç§‘å­¦ä¸Šç½‘ï¼‰ã€‚
2ã€å®‰è£…ollama éšä¾¿ä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
# curl -fsSL https://ollama.com/install.sh | sh
æ˜¾ç¤ºå¦‚ä¸‹ï¼šè¡¨ç¤ºå®‰è£…æˆåŠŸ
&gt;&gt;&gt; Downloading ollama...
######################################################################## 100.0%##O#-# &gt;&gt;&gt; Installing ollama to /usr/local/bin...
&gt;&gt;&gt; Creating ollama user...
&gt;&gt;&gt; Adding ollama user to render group...
&gt;&gt;&gt; Adding ollama user to video group...
&gt;&gt;&gt; Adding current user to ollama group...
&gt;&gt;&gt; Creating ollama systemd service...
&gt;&gt;&gt; Enabling and starting ollama service...
Created symlink /etc/systemd/system/default.target.wants/ollama.service â†’ /etc/systemd/system/ollama.service.
&gt;&gt;&gt; NVIDIA GPU installed.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-26T14:39:59+08:00">
    <meta property="article:modified_time" content="2024-07-26T14:39:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">åœ¨æœ¬åœ°éƒ¨ç½²OllamaæœåŠ¡æ¥å£é™„åŠ OpenWebUIåšæµ‹è¯•</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>ä½¿ç”¨Ollama</strong>åœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªç±»ä¼¼openaiçš„APIåšå¼€å‘å’Œæµ‹è¯•</h2> 
<h3>1ã€å‡†å¤‡ä¸€ä¸ªæ—§ç”µè„‘</h3> 
<p>å› ä¸ºé…ç½®è¦æ±‚ä¸é«˜ï¼Œäº”å¹´å‰çš„ç”µè„‘éƒ½èƒ½ä½¿ç”¨ï¼Œè£…ä¸€å—æ—§æ˜¾å¡ï¼Œæ˜¾å­˜å¤§ä¸€ç‚¹çš„æœ€å¥½æœ‰8Gã€‚å®åœ¨æ²¡æ˜¾å¡ä¹Ÿæ²¡å…³ç³»ï¼Œç”µè„‘å†…å­˜å¤§ä¹Ÿèƒ½è¿è¡Œï¼Œæ— éè¿è¡Œçš„æ…¢ä¸€äº›ä¸å½±å“å¼€å‘æµ‹è¯•ã€‚åœ¨ç”µè„‘ä¸Šå®‰è£…centos stream 9 æœåŠ¡å™¨å¸¦ç•Œé¢ç‰ˆï¼Œè£…ä¸Šæ˜¾å¡é©±åŠ¨ï¼Œæ²¡æœ‰æ˜¾å¡çš„åªè£…ç³»ç»Ÿå°±è¡Œäº†ã€‚é…ç½®å¥½èƒ½ä¸Šç½‘ï¼ˆæœ¬ç¯‡ä¸ç”¨ç§‘å­¦ä¸Šç½‘ï¼‰ã€‚</p> 
<h3>2ã€å®‰è£…ollama</h3> 
<p>éšä¾¿ä¸€ä¸ªç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p> 
<p>Â # curl -fsSL https://ollama.com/install.sh | sh</p> 
<p>æ˜¾ç¤ºå¦‚ä¸‹ï¼šè¡¨ç¤ºå®‰è£…æˆåŠŸ<br> &gt;&gt;&gt; Downloading ollama...<br> ######################################################################## 100.0%##O#-# Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <br> &gt;&gt;&gt; Installing ollama to /usr/local/bin...<br> &gt;&gt;&gt; Creating ollama user...<br> &gt;&gt;&gt; Adding ollama user to render group...<br> &gt;&gt;&gt; Adding ollama user to video group...<br> &gt;&gt;&gt; Adding current user to ollama group...<br> &gt;&gt;&gt; Creating ollama systemd service...<br> &gt;&gt;&gt; Enabling and starting ollama service...<br> Created symlink /etc/systemd/system/default.target.wants/ollama.service â†’ /etc/systemd/system/ollama.service.<br> &gt;&gt;&gt; NVIDIA GPU installed.</p> 
<p>æŸ¥çœ‹ollamaçš„çŠ¶æ€<br> # systemctl status ollama<br> å®‰è£…æˆåŠŸåæ‰§è¡Œollama -vå‘½ä»¤ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¦‚æœå¯ä»¥æ˜¾ç¤ºåˆ™ä»£è¡¨å·²ç»å®‰è£…å¥½<br> # ollama -v<br> ollama version is 0.2.20</p> 
<p>ollamaå®‰è£…å®Œæˆååªèƒ½æœ¬æœºè®¿é—®ï¼Œå¦‚éœ€å¤–ç½‘è®¿é—®ï¼Œè¿˜è¦é…ç½®ä¸€ä¸‹ï¼Œæˆ–è€…ä½¿ç”¨ä»£ç†è½¬å‘æ¥è§£å†³è·¨åŸŸè®¿é—®é—®é¢˜ã€‚</p> 
<p>cdåˆ°ç›®å½•/etc/systemd/systemä¸‹:vimÂ ollama.serviceï¼Œåœ¨[Service]æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œå¹¶ä¿å­˜ï¼š<br> Environment="OLLAMA_HOST=:11434"<br> Environment="OLLAMA_ORIGINS=*"</p> 
<p>è¿™ä¸¤è¡Œæ˜¯è§£å†³å…¶å®ƒç”µè„‘è®¿é—®å’Œè·¨åŸŸé—®é¢˜ã€‚æ³¨æ„ç‰ˆæœ¬å·ä½äº0.2.20çš„ä¸æ”¯æŒIPv6ï¼Œç«¯å£å‰é¢è¦åŠ IPï¼š0.0.0.0</p> 
<p>é‡å¯æœåŠ¡ï¼š</p> 
<p># systemctl daemon-reload</p> 
<p># systemctl restart ollama.service</p> 
<p>å¦‚ä¸æƒ³ä¿®æ”¹æœåŠ¡å™¨æ–‡ä»¶å¯è®¾ç½®ä»£ç†ã€‚</p> 
<p></p> 
<h3>3ã€åŠ ä¸€ä¸ªQwen2æ¨¡å‹æµ‹è¯•</h3> 
<p>å¦‚æœæ˜¾å¡å¤§å¯ä»¥é€‰ä¸ªå¤§æ¨¡å‹ã€‚</p> 
<p># ollama pull qwen2:7b //æ‹‰å–ä¸€ä¸ªæ¨¡å‹ï¼Œ7bæ˜¯ä¸­å‹çš„éœ€è¦6Gæ˜¾å­˜ï¼Œä¹Ÿå¯ä»¥æ‹‰1.5bæˆ–0.5bçš„2Gæ˜¾å­˜å¤Ÿäº†ã€‚</p> 
<p><br> æµ‹è¯•è¿è¡Œï¼š</p> 
<p>$ ollama run qwen2Â  Â </p> 
<p>å¯åŠ¨å®Œæ¯•ï¼Œåˆ°æ­¤å…¶å®æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæ§åˆ¶å°å¯¹è¯ç•Œé¢ï¼Œå·²å¯ä»¥ä¸Qwen2-7Bå¯¹è¯äº†ï¼Œ/bye é€€å‡ºã€‚</p> 
<p>è‡³æ­¤å°±éƒ¨ç½²å®Œæ¯•ï¼Œä¸‹é¢æµ‹è¯•ã€‚</p> 
<h3>4ã€æµ‹è¯•æ¥å£ï¼šå¯ä»¥ç”¨POSTå·¥å…·</h3> 
<p>è¿™é‡Œæ¨èapipostè½¯ä»¶ã€‚</p> 
<p>ollamaæä¾›openaiä¸€æ ·çš„APIæ¥å£ï¼š<br> http://192.168.0.1:11434/v1/chat/completions<br> è°ƒç”¨æ–¹å¼ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼šPOSTï¼Œè®¤è¯é€‰Bearerå¯ä»¥å¡«ollamaæˆ–å…¶å®ƒï¼Œå…¶å®å¹¶ä¸éªŒè¯ï¼Œåªæ˜¯ä¸ºäº†ä¸æ¥å£æ ¼å¼ç›¸å…¼å®¹ã€‚<br> Â {"Content-Type": "application/json", Authorization: "Bearer ollama" }<br> {<!-- --><br> Â  Â  "model": "Qwen2-7B",<br> Â  Â  "messages": [<br> Â  Â  Â  Â  {<!-- --><br> Â  Â  Â  Â  Â  Â  "role": "system",<br> Â  Â  Â  Â  Â  Â  "content": "ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½æœºå™¨äººåŠ©æ‰‹ï¼Œè¯·å¸®åŠ©å›ç­”é—®é¢˜ã€‚"<br> Â  Â  Â  Â  },<br> Â  Â  Â  Â  {<!-- --><br> Â  Â  Â  Â  Â  Â  "role": "user",<br> Â  Â  Â  Â  Â  Â  "content":"ä½ å¥½"<br> Â  Â  Â  Â  }<br> Â  Â  ],<br> Â  Â  "temperature": 0.8,<br> Â  Â  "top_p": 0.8,<br> Â  Â  "max_tokens": 1024,<br> Â  Â  "echo": false,<br> Â  Â  "stream": false, //å¦‚æœæ˜¯trueä¼šæœ‰åå­—æ•ˆæœï¼›å¦åˆ™æ‰€æœ‰å­—éƒ½ç”Ÿæˆæ‰è¿”å›ã€‚<br> Â  Â  "repetition_penalty": 1.1</p> 
<p>}<br> è¿”å›å†…å®¹ï¼šè·Ÿæ®æ˜¯å¦streamä¸ºtrueæˆ–falseï¼Œæ ¼å¼æœ‰æ‰€ä¸åŒï¼Œåœ¨å¼€å‘æ—¶æ³¨æ„choicesä¸‹é¢æ˜¯messageè¿˜æ˜¯deltaã€‚</p> 
<h3>5ã€ä½¿ç”¨OpenWebUIæµ‹è¯•</h3> 
<p>å®‰è£…Open WebUIï¼Œå¯ç”¨ä¸‰ç§æ–¹æ³•ï¼š</p> 
<p>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨dockerï¼Œæˆ‘æœ¬ä¸å–œæ¬¢dockerè¿™ä¸ªå‘½ä»¤å°±ä¸æ¨èè¿™ä¸ªæ–¹æ³•äº†ã€‚è¿™ç§æ–¹å¼ç½‘ä¸Šä¸€æœæœ‰ä¸€å †éƒ½æ˜¯è¿™ç§æ–¹æ³•å®‰è£…çš„ã€‚</p> 
<p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨gitï¼šç¯å¢ƒè¦æ±‚ï¼šNode.js &gt;= 20.10 å’Œ Bun &gt;= 1.0.21Â  å¹¶ä¸” Python &gt;= 3.11ï¼Œä¸ä¼šè£…ç¯å¢ƒçš„å‚è€ƒåé¢ç¬¬6æ¡ã€‚</p> 
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼šæ²¡gitå‘½ä»¤å¯ä»¥yum install gitå®‰è£…ä¸€ä¸ªã€‚<br> $ git clone https://github.com/open-webui/open-webui.git<br> $ cd open-webui/</p> 
<p># å¤åˆ¶ä¸€ä»½ .env ç›®å½•å’Œæ–‡ä»¶<br> $ cp -RPp .env.example .env</p> 
<p># ç”¨nodeç¼–ç»å‰ç«¯<br> $ npm i<br> $ npm run build</p> 
<p># å®‰è£…åç«¯æ‰€éœ€åŒ…<br> $ cd ./backend<br> ä¸‹é¢è¿™æ­¥è¦æ³¨æ„äº†ï¼šï¼ï¼ï¼å¦‚æœä¸ä½¿ç”¨å›½å†…æºï¼Œä¸€å¤©å¯èƒ½éƒ½åœ¨è£…åŒ…ï¼Œä¸æ˜¯å“å”¬ï¼Œæ˜¯çœŸçš„åŒ…å¾ˆå¤šå¾ˆæ…¢ã€‚<br> å¦‚æœç½‘é€Ÿä¸å¥½ï¼Œä¸€å®šæ¢å›½å†…æºï¼Œå¦‚ä¸‹ï¼š<br> $ pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</p> 
<p>å®‰è£…åŒ…ï¼š</p> 
<p>$ pip install -r requirements.txt -U</p> 
<p>å¯åŠ¨ï¼š<br> $ bash start.sh</p> 
<p>è¿è¡Œä¸å‡ºé”™çš„è¯ http://localhost:8080/ ï¼Œä½†æ˜¯ä¸ç”¨ç§‘å­¦ä¸Šç½‘çš„ä¸€å®šä¼šå‡ºé”™ğŸ˜„<br> ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šä¸Šhuggingfaceç½‘ä¸‹è½½ä¸€ç‚¹ä¸œè¥¿all-MiniLM-L6-v2ï¼šæ‰€ä»¥å…ˆæŒ‡å®šä¸€ä¸ªé•œåƒç½‘ç«™ï¼Œå†è¿è¡Œï¼ˆä¹Ÿå¯ä»¥å…ˆé­”æ­ä¸Šä¸‹è½½å¥½ï¼Œå†æŠŠbackend/apps/rag/utils.pyé‡Œçš„ç¬¬318è¡Œæ”¹æˆè¿™æ ·ï¼šembedding_model_repo_path = r'\ä¸‹è½½ç›®å½•\all-MiniLM-L6-v2'æ¥è¿è¡Œã€‚ï¼‰ï¼š</p> 
<p>Â $Â HF_ENDPOINT=https://hf-mirror.comÂ bash start.sh è¿™æ ·å°±ä¸ä¼šå‡ºé”™äº†ã€‚</p> 
<p>æµè§ˆå™¨è¾“å…¥http://localhost:8080/å»è®¿é—®å§ã€‚</p> 
<p>ç¬¬ä¸‰ç§æœ€ç®€å•ï¼šæ–°ç‰ˆçš„openwebuiå·²ç»åšåˆ°pythonçš„åŒ…é‡Œé¢äº†ï¼Œè‡³å°‘éœ€è¦python3.11ç‰ˆæœ¬ã€‚</p> 
<p>ä½¿ç”¨pip install open-webui å®‰è£…ï¼Œè£…ä¹‹å‰æœ€å¥½è®¾ç½®å›½å†…æºã€‚</p> 
<p>å®‰è£…å®Œæˆä½¿ç”¨ï¼šÂ open-webui serveå¯åŠ¨ï¼ŒåŒæ ·ç¬¬ä¸€æ¬¡è¿è¡Œè¦åŠ å˜é‡æŒ‡å®šé•œåƒç½‘ç«™ï¼š</p> 
<p>$ HF_ENDPOINT=https://hf-mirror.com open-webui serve</p> 
<p>ä»¥åç›´æ¥è¿è¡Œ$ open-webui serveå°±è¡Œäº†ã€‚</p> 
<p>å¯åŠ¨ååˆ°http://localhost:8080/è®¿é—®ï¼Œå…ˆæ³¨å†Œä¸€ä¸ªç”¨æˆ·ï¼Œè¿›å»åè®¾ç½®ä¸­æ–‡ï¼Œè®¾ç½®å¤–ç½‘é“¾æ¥ï¼šå…³æ‰openaiæ¥å£ï¼Œåªç•™ollamaæ¥å£ï¼Œä¿®æ”¹ollamaæ¥å£IPæˆ–åœ¨æœ¬æœºä¸Šä¸ç”¨ä¿®æ”¹ã€‚é€‰ä¸€ä¸‹æ¨¡å‹Qwen2-7B:latestå°±å¯ä»¥æ„‰å¿«çš„é€šè¿‡webç•Œé¢è¿›è¡ŒèŠå¤©å¯¹è¯äº†ã€‚</p> 
<h3>6ã€é™„ï¼šå®‰è£…ç¯å¢ƒ</h3> 
<h4>å®‰è£…miniconda3</h4> 
<p>ä½¿ç”¨condaç®¡ç†pythonè™šç¯å¢ƒï¼Œpythonçš„ç‰ˆæœ¬å¾ˆå¤šå¾ˆä¹±ï¼Œcondaæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ï¼Œä½¿ç”¨minicondaç®¡ç†pythonç‰ˆæœ¬å·²ç»å¤Ÿç”¨äº†ï¼š</p> 
<p># cd /usr/local/src<br> # wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</p> 
<p>sh Miniconda3-latest-Linux-x86_64.sh -p /usr/local/miniconda3</p> 
<p>å›è½¦åä¸€å †licenseçš„ä¿¡æ¯ï¼Œè¿™ä¸ªæŒ‰enterå»ºåå¿…é¡»yesæ‰èƒ½ç»§ç»­ï¼ŒæŒ‰ç©ºæ ¼é”®ä¸€æ¬¡ä¸€é¡µå¿«ä¸€äº›ã€‚</p> 
<p>éªŒè¯å®‰è£…</p> 
<p>You can undo this by running `conda init --reverse $SHELL`? [yes|no]<br> [no] &gt;&gt;&gt;</p> 
<p>You have chosen to not have conda modify your shell scripts at all.<br> To activate conda's base environment in your current shell session:<br> eval "$(/usr/local/miniconda3/bin/conda shell.YOUR_SHELL_NAME hook)"<br> To install conda's shell functions for easier access, first activate, then:<br> conda init</p> 
<p>è·Ÿæ® æç¤ºï¼šæ‰§è¡Œå‘½ä»¤eval "$(/usr/local/miniconda3/bin/conda shell.bash hook)"åˆ›å»ºç¯å¢ƒ<br> ç„¶åæ‰§è¡Œconda init<br> æ˜¾ç¤ºï¼š<br> no change Â  Â  /usr/local/miniconda3/condabin/conda<br> no change Â  Â  /usr/local/miniconda3/bin/conda<br> no change Â  Â  /usr/local/miniconda3/bin/conda-env<br> no change Â  Â  /usr/local/miniconda3/bin/activate<br> no change Â  Â  /usr/local/miniconda3/bin/deactivate<br> no change Â  Â  /usr/local/miniconda3/etc/profile.d/conda.sh<br> no change Â  Â  /usr/local/miniconda3/etc/fish/conf.d/conda.fish<br> no change Â  Â  /usr/local/miniconda3/shell/condabin/Conda.psm1<br> no change Â  Â  /usr/local/miniconda3/shell/condabin/conda-hook.ps1<br> no change Â  Â  /usr/local/miniconda3/lib/python3.12/site-packages/xontrib/conda.xsh<br> no change Â  Â  /usr/local/miniconda3/etc/profile.d/conda.csh<br> modified Â  Â  Â /root/.bashrc</p> 
<p>==&gt; For changes to take effect, close and re-open your current shell. &lt;==<br> å¯ä»¥æŸ¥çœ‹/root/.bashrcæ–‡ä»¶å¤‡æ›´æ”¹å¢åŠ äº†ç¯å¢ƒå‚æ•°å¦‚ä¸‹ï¼š<br> # &gt;&gt;&gt; conda initialize &gt;&gt;&gt;<br> # !! Contents within this block are managed by 'conda init' !!<br> __conda_setup="$('/usr/local/miniconda3/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)"<br> if [ $? -eq 0 ]; then<br> Â  Â  eval "$__conda_setup"<br> else<br> Â  Â  if [ -f "/usr/local/miniconda3/etc/profile.d/conda.sh" ]; then<br> Â  Â  Â  Â  . "/usr/local/miniconda3/etc/profile.d/conda.sh"<br> Â  Â  else<br> Â  Â  Â  Â  export PATH="/usr/local/miniconda3/bin:$PATH"<br> Â  Â  fi<br> fi<br> unset __conda_setup<br> # &lt;&lt;&lt; conda initialize &lt;&lt;&lt;<br> ä¸ªäººä¸å¤ªå–œæ¬¢è¿›å…¥ç³»ç»Ÿçš„æ—¶å€™è‡ªåŠ¨æ¿€æ´»condaçš„baseç¯å¢ƒï¼Œå› ä¸ºä¼šå ç”¨æ—¶é—´ï¼Œåˆ‡æ¢èŠ‚ç‚¹ä¼šå»¶è¿Ÿï¼Œæ‰€ä»¥å…³æ‰è‡ªåŠ¨æ¿€æ´»baseç¯å¢ƒï¼š<br> conda config --set auto_activate_base false<br> é‡å¯ï¼š# reboot<br><br> #è®¾ç½®condaé•œåƒæº<br> # conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/<br> # conda config --set show_channel_urls yes</p> 
<p>#æœ€å¥½å®‰è£…å®Œé‡å¯ä¸€ä¸‹ç³»ç»Ÿ</p> 
<h4>åˆ›å»ºpythonè™šç¯å¢ƒï¼š</h4> 
<p># conda create -n python311 python=3.11ï¼ˆå¦‚æœç²¾ç¡®åˆ°å­ç‰ˆæœ¬å¯ç”¨ä¸¤ä¸ªç­‰å·å¦‚ï¼š==3.10.6ï¼Œå¦åˆ™æ˜¯å¤§ç‰ˆæœ¬çš„æœ€æ–°å­ç‰ˆæœ¬ã€‚ï¼‰</p> 
<p># conda env list æ˜¾ç¤ºåˆ›å»ºçš„ç¯å¢ƒã€‚</p> 
<p>è¿›å…¥å’Œé€€å‡ºpythonè™šç¯å¢ƒï¼Œè¿›å…¥åå‘½ä»¤æç¤ºç¬¦å‰é¢æ˜¾ç¤ºè™šç¯å¢ƒåç§°ï¼š</p> 
<p># conda activate python311</p> 
<p>å¦‚æœé€€å‡ºä½¿ç”¨ï¼š# conda deactivateÂ </p> 
<p>#åœ¨py311ç¯å¢ƒä¸‹è®¾ç½®pipé•œåƒæº<br> # pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</p> 
<h4>å®‰è£…node ï¼š</h4> 
<p>linuxè‡ªå¸¦çš„node.jsç‰ˆæœ¬æœ‰äº›è€äº†ï¼Œä¸å¤Ÿç”¨çš„ï¼Œç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹nodeä¹Ÿè±¡pythonä¸€æ ·ç‰ˆæœ¬å¾ˆå¤šæƒ…å†µå¤æ‚ï¼Œä¹Ÿæœ‰è±¡conda è¿™æ ·çš„ç‰ˆæœ¬ç®¡ç†çš„è½¯ä»¶nvmæ¥ç®¡ç†ç‰ˆæœ¬ã€‚<br> å…ˆè£…nvm<br> $ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash</p> 
<p>å®‰è£…node.js 20çš„æœ€æ–°å­ç‰ˆæœ¬</p> 
<p>$ nvm install 20</p> 
<p>node -v # æ˜¾ç¤ºç‰ˆæœ¬å·ï¼š`v20.15.1`</p> 
<p>npm -v # æ˜¾ç¤ºç‰ˆæœ¬å·ï¼š `10.7.0`ï¼Œnpmæ˜¯nodeå¸¦çš„åŒ…ç®¡ç†å™¨å‘½ä»¤ï¼Œå°±è±¡pythoné‡Œçš„pipä¸€æ ·ã€‚</p> 
<h4>å®‰è£…Bunï¼š</h4> 
<p>Open WebUIç”¨åˆ°äº†bunå‘½ä»¤ï¼ŒBunæ˜¯å’Œnodeå·®ä¸å¤šçš„æ¡†æ¶ã€‚<br> # ä¸‹è½½å®‰è£…è„šæœ¬å¹¶å¼€å§‹å®‰è£…<br> curl -fsSL https://bun.sh/install | bash</p> 
<p># åˆ·æ–°ç¯å¢ƒå˜é‡<br> source /home/username/.bashrc</p> 
<p># æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ<br> bun --help<br> bun -v æ˜¾ç¤º1.1.1</p> 
<h3>7ã€ollamaå‘½ä»¤è¯´æ˜ï¼Œæ›´æ–°å’Œæ¸…é™¤</h3> 
<p>ollamaçš„æ“ä½œå‘½ä»¤è·Ÿdockeræ“ä½œå‘½ä»¤éå¸¸ç›¸ä¼¼ï¼š<br> ollama serveÂ Â Â Â # å¯åŠ¨ollama<br> ollama createÂ Â Â Â # ä»æ¨¡å‹æ–‡ä»¶åˆ›å»ºæ¨¡å‹<br> ollama showÂ Â Â Â Â Â Â Â # æ˜¾ç¤ºæ¨¡å‹ä¿¡æ¯<br> ollama runÂ Â Â Â Â Â Â Â # è¿è¡Œæ¨¡å‹<br> ollama pullÂ Â Â Â Â Â Â Â # ä»æ³¨å†Œä»“åº“ä¸­æ‹‰å–æ¨¡å‹<br> ollama pushÂ Â Â Â Â Â Â Â # å°†æ¨¡å‹æ¨é€åˆ°æ³¨å†Œä»“åº“<br> ollama listÂ Â Â Â Â Â Â Â # åˆ—å‡ºå·²ä¸‹è½½æ¨¡å‹<br> ollama cpÂ Â Â Â Â Â Â Â # å¤åˆ¶æ¨¡å‹<br> ollama rmÂ Â Â Â Â Â Â Â # åˆ é™¤æ¨¡å‹<br> ollama helpÂ Â Â Â Â Â Â Â # è·å–æœ‰å…³ä»»ä½•å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</p> 
<p>æ›´æ–°å’Œå®‰è£…ä¸€æ ·å†æ‰§è¡Œä¸€éå‘½ä»¤ï¼š</p> 
<p># curl -fsSL https://ollama.com/install.sh | sh</p> 
<p>å¸è½½Ollamaï¼š<br> åœæ­¢å¹¶ç¦ç”¨æœåŠ¡<br> systemctl stop ollama<br> systemctl disable ollama</p> 
<p>åˆ é™¤æœåŠ¡æ–‡ä»¶å’ŒOllamaäºŒè¿›åˆ¶æ–‡ä»¶<br> rm /etc/systemd/system/ollama.serviceÂ <br> rm $(which ollama)</p> 
<p>æ¸…ç†Ollamaç”¨æˆ·å’Œç»„<br> rm -r /usr/share/ollama<br> userdel ollama<br> groupdel ollama<br> Â </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b1cf8cfd18cb37292ca0e1ed7a29f184/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€ç®—æ³•/è®­ç»ƒã€‘ï¼šå‰ç¼€å’Œ&amp;&amp;å·®åˆ†</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a95f1188829a0b406cc7dc52da7fb640/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">2024æ²³åŒ—çœç ”ç©¶ç”Ÿæ•°å­¦å»ºæ¨¡ç«èµ›Cé¢˜å®¤å¤–ä¸‰ç»´ç‚¹äº‘æ•°æ®åˆ†å‰²è¯†åˆ«æ€è·¯ä»£ç åˆ†æ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>