<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot项目整合达梦数据库（MYSQL 转换 达梦数据库） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/6ab5f4887d451e25cb900debf5e31819/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SpringBoot项目整合达梦数据库（MYSQL 转换 达梦数据库）">
  <meta property="og:description" content="目录
一、达梦数据库的安装和使用
1、达梦数据库下载
2、Windows环境安装达梦数据库
二、MYSQL数据库 迁移至 达梦数据库
1、DM控制台工具：Console
2、DM数据迁移工具：DTS
三、Spring项目整合达梦数据库
1、配置java项目连接达梦，切换数据连接驱动
2、Maven导入达梦数据库驱动包
3、表的实体类映射。【访问形式：模式名.表名】
4、XML文件：查询表【模式名.表名】
​5、MYSQL字段类型与DM数据类型的转换。【DM：达梦数据库】
6、达梦数据库分页插件
7、SQL适配关键字列名
一、达梦数据库的安装和使用 1、达梦数据库下载 产品下载 | 达梦数据库
2、Windows环境安装达梦数据库 参考文章： Windows环境安装达梦数据库_达梦数据库安装-CSDN博客
二、MYSQL数据库 迁移至 达梦数据库 参考文章：MySQL数据迁移至达梦数据库_mysql迁移达梦-CSDN博客
在安装的tool目录下，查找相关的工具：
1、DM控制台工具：Console 服务器配置又该有两种方式：①DM控制台工具修改；②配置文件修改。
方法一：服务器配置：设置系统兼容性(DM控制台工具），兼容MySQL
方法二：（1）查找dm.ini文件
（2）dm.ini修改【#compatibility】的【COMPATIBLE_MODE】=4
(3)重启Dameng服务
2、DM数据迁移工具：DTS 在这里操作：MYSQL数据库迁移至DM数据库
注意：当迁移过程中出现下面问题时，如有触发器或者外键,需要先关掉触发器和外键,然后进行迁移,不然会导致迁移失败。
MYSQL的数据表转换成DM的数据表时，点击转换按钮。如下：
设置【1：迁移策略选项】 设置【2：列映射选项】 3、添加用户：如果导入的DM数据库需要和MYSQL的用户一样，添加ROOT用户。
三、Spring项目整合达梦数据库 1、配置java项目连接达梦，切换数据连接驱动 2、Maven导入达梦数据库驱动包 3、表的实体类映射。【访问形式：模式名.表名】 4、XML文件：查询表【模式名.表名】 5、MYSQL字段类型与DM数据类型的转换。【DM：达梦数据库】 package com.company.common.core.annotation; /** * 数据库类型 * * @author kally * @date 2023/12/13 */ public enum DbType { /** * 数据库类型（类型，描述） */ MYSQL(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-14T15:16:44+08:00">
    <meta property="article:modified_time" content="2023-12-14T15:16:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot项目整合达梦数据库（MYSQL 转换 达梦数据库）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8" rel="nofollow">一、达梦数据库的安装和使用</a></p> 
<p id="1%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%E8%BD%BD-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%E8%BD%BD" rel="nofollow">1、达梦数据库下载</a></p> 
<p id="2%E3%80%81Windows%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;"><a href="#2%E3%80%81Windows%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">2、Windows环境安装达梦数据库</a></p> 
<p id="%E4%BA%8C%E3%80%81MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20%E8%BF%81%E7%A7%BB%E8%87%B3%20%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20%E8%BF%81%E7%A7%BB%E8%87%B3%20%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">二、MYSQL数据库 迁移至 达梦数据库</a></p> 
<p id="1%E3%80%81DM%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B7%A5%E5%85%B7%EF%BC%9AConsole-toc" style="margin-left:40px;"><a href="#1%E3%80%81DM%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B7%A5%E5%85%B7%EF%BC%9AConsole" rel="nofollow">1、DM控制台工具：Console</a></p> 
<p id="2%E3%80%81DM%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%B7%A5%E5%85%B7%EF%BC%9ADTS-toc" style="margin-left:40px;"><a href="#2%E3%80%81DM%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%B7%A5%E5%85%B7%EF%BC%9ADTS" rel="nofollow">2、DM数据迁移工具：DTS</a></p> 
<p id="%E4%B8%89%E3%80%81Spring%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Spring%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">三、Spring项目整合达梦数据库</a></p> 
<p id="1%E3%80%81%E9%85%8D%E7%BD%AEjava%E9%A1%B9%E7%9B%AE%E8%BF%9E%E6%8E%A5%E8%BE%BE%E6%A2%A6%EF%BC%8C%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E9%A9%B1%E5%8A%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E9%85%8D%E7%BD%AEjava%E9%A1%B9%E7%9B%AE%E8%BF%9E%E6%8E%A5%E8%BE%BE%E6%A2%A6%EF%BC%8C%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E9%A9%B1%E5%8A%A8" rel="nofollow">1、配置java项目连接达梦，切换数据连接驱动</a></p> 
<p id="2%E3%80%81Maven%E5%AF%BC%E5%85%A5%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8%E5%8C%85-toc" style="margin-left:40px;"><a href="#2%E3%80%81Maven%E5%AF%BC%E5%85%A5%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8%E5%8C%85" rel="nofollow">2、Maven导入达梦数据库驱动包</a></p> 
<p id="3%E3%80%81%E8%A1%A8%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%98%A0%E5%B0%84%E3%80%82%E3%80%90%E8%AE%BF%E9%97%AE%E5%BD%A2%E5%BC%8F%EF%BC%9A%E6%A8%A1%E5%BC%8F%E5%90%8D.%E8%A1%A8%E5%90%8D%E3%80%91-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E8%A1%A8%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%98%A0%E5%B0%84%E3%80%82%E3%80%90%E8%AE%BF%E9%97%AE%E5%BD%A2%E5%BC%8F%EF%BC%9A%E6%A8%A1%E5%BC%8F%E5%90%8D.%E8%A1%A8%E5%90%8D%E3%80%91" rel="nofollow">3、表的实体类映射。【访问形式：模式名.表名】</a></p> 
<p id="XML%E6%96%87%E4%BB%B6%EF%BC%9A%E6%9F%A5%E8%AF%A2%E8%A1%A8%E3%80%90%E6%A8%A1%E5%BC%8F%E5%90%8D.%E8%A1%A8%E5%90%8D%E3%80%91%E3%80%82%E2%80%8B%E7%BC%96%E8%BE%914%E3%80%81MYSQL%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E4%B8%8EDM%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E3%80%82%E3%80%90DM%EF%BC%9A%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91-toc" style="margin-left:40px;"><a href="#XML%E6%96%87%E4%BB%B6%EF%BC%9A%E6%9F%A5%E8%AF%A2%E8%A1%A8%E3%80%90%E6%A8%A1%E5%BC%8F%E5%90%8D.%E8%A1%A8%E5%90%8D%E3%80%91%E3%80%82%E2%80%8B%E7%BC%96%E8%BE%914%E3%80%81MYSQL%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E4%B8%8EDM%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E3%80%82%E3%80%90DM%EF%BC%9A%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91" rel="nofollow">4、XML文件：查询表【模式名.表名】</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%915%E3%80%81MYSQL%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E4%B8%8EDM%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E3%80%82%E3%80%90DM%EF%BC%9A%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91-toc" style="margin-left:40px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%915%E3%80%81MYSQL%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E4%B8%8EDM%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E3%80%82%E3%80%90DM%EF%BC%9A%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91" rel="nofollow">​5、MYSQL字段类型与DM数据类型的转换。【DM：达梦数据库】</a></p> 
<p id="5%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6" rel="nofollow">6、达梦数据库分页插件</a></p> 
<p id="6%E3%80%81SQL%E9%80%82%E9%85%8D%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E5%90%8D%EF%BC%9Amysql%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%BC%95%E5%8F%B7%E6%9D%A5%E5%8C%BA%E5%88%86%E5%88%97%E5%90%8D%E5%92%8C%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%9B%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E6%9D%A5%E5%8C%BA%E5%88%86%EF%BC%9B%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%98%A0%E5%B0%84%E5%AD%97%E6%AE%B5%E4%B9%8B%E5%89%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E3%80%82-toc" style="margin-left:40px;"><a href="#6%E3%80%81SQL%E9%80%82%E9%85%8D%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E5%90%8D%EF%BC%9Amysql%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%BC%95%E5%8F%B7%E6%9D%A5%E5%8C%BA%E5%88%86%E5%88%97%E5%90%8D%E5%92%8C%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%9B%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E6%9D%A5%E5%8C%BA%E5%88%86%EF%BC%9B%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%98%A0%E5%B0%84%E5%AD%97%E6%AE%B5%E4%B9%8B%E5%89%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E3%80%82" rel="nofollow">7、SQL适配关键字列名</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">一、达梦数据库的安装和使用</h2> 
<h3 id="1%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%E8%BD%BD">1、达梦数据库下载</h3> 
<p><a href="https://eco.dameng.com/download/" rel="nofollow" title="产品下载 | 达梦数据库">产品下载 | 达梦数据库</a></p> 
<p><img alt="" height="704" src="https://images2.imgbox.com/19/24/uBhuIVTv_o.png" width="1200"></p> 
<h3 id="2%E3%80%81Windows%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93">2、Windows环境安装达梦数据库</h3> 
<p>参考文章： <a href="https://blog.csdn.net/qq_37358909/article/details/108372770" title="Windows环境安装达梦数据库_达梦数据库安装-CSDN博客">Windows环境安装达梦数据库_达梦数据库安装-CSDN博客</a></p> 
<h2 id="%E4%BA%8C%E3%80%81MYSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20%E8%BF%81%E7%A7%BB%E8%87%B3%20%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93">二、MYSQL数据库 迁移至 达梦数据库</h2> 
<p>参考文章：<a href="https://blog.csdn.net/m0_71845127/article/details/130347623" title="MySQL数据迁移至达梦数据库_mysql迁移达梦-CSDN博客">MySQL数据迁移至达梦数据库_mysql迁移达梦-CSDN博客</a></p> 
<p>在安装的tool目录下，查找相关的工具：</p> 
<p><img alt="" height="880" src="https://images2.imgbox.com/68/eb/dztqf89f_o.png" width="736"></p> 
<h3 id="1%E3%80%81DM%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B7%A5%E5%85%B7%EF%BC%9AConsole">1、DM控制台工具：Console</h3> 
<p><img alt="" height="222" src="https://images2.imgbox.com/79/82/rGJ6tkd6_o.png" width="414"></p> 
<p>服务器配置又该有两种方式：①DM控制台工具修改；②配置文件修改。</p> 
<p>方法一：服务器配置：设置系统兼容性(DM控制台工具），兼容MySQL</p> 
<p><img alt="" height="982" src="https://images2.imgbox.com/5a/12/lQy7lGRl_o.png" width="1200"></p> 
<p>方法二：（1）查找dm.ini文件</p> 
<p><img alt="" height="503" src="https://images2.imgbox.com/a5/bf/HXFrIyyY_o.png" width="598"></p> 
<p>（2）dm.ini修改【#compatibility】的【COMPATIBLE_MODE】=4</p> 
<p><img alt="" height="529" src="https://images2.imgbox.com/bb/7c/UQhXCrU2_o.png" width="1200"></p> 
<p>(3)重启Dameng服务</p> 
<p><img alt="" height="758" src="https://images2.imgbox.com/49/e0/iaKLgp8D_o.png" width="1200"></p> 
<h3 id="2%E3%80%81DM%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%B7%A5%E5%85%B7%EF%BC%9ADTS">2、DM数据迁移工具：DTS</h3> 
<p><img alt="" height="222" src="https://images2.imgbox.com/66/74/AgPnJ3L8_o.png" width="401"></p> 
<p>在这里操作：MYSQL数据库迁移至DM数据库</p> 
<p><img alt="" height="951" src="https://images2.imgbox.com/9b/ba/vI5P6ipf_o.png" width="1200"></p> 
<p>注意：当迁移过程中出现下面问题时，如有触发器或者外键,需要先关掉触发器和外键,然后进行迁移,不然会导致迁移失败。</p> 
<p><img alt="" height="562" src="https://images2.imgbox.com/5e/43/iSaJsPOq_o.png" width="1200"></p> 
<p>MYSQL的数据表转换成DM的数据表时，点击转换按钮。如下：</p> 
<p><img alt="" height="757" src="https://images2.imgbox.com/89/90/wfSUT8aq_o.png" width="1200"></p> 
<h4 id="%E8%AE%BE%E7%BD%AE%E3%80%901%EF%BC%9A%E8%BF%81%E7%A7%BB%E7%AD%96%E7%95%A5%E9%80%89%E9%A1%B9%E3%80%91">设置【1：迁移策略选项】</h4> 
<p><img alt="" height="729" src="https://images2.imgbox.com/14/7b/wn0lsjoo_o.png" width="1200"></p> 
<h4 id="%E8%AE%BE%E7%BD%AE%E3%80%902%EF%BC%9A%E5%88%97%E6%98%A0%E5%B0%84%E9%80%89%E9%A1%B9%E3%80%91">设置【2：列映射选项】</h4> 
<p><img alt="" height="733" src="https://images2.imgbox.com/96/11/4t93vvru_o.png" width="1122"></p> 
<p>3、添加用户：如果导入的DM数据库需要和MYSQL的用户一样，添加ROOT用户。</p> 
<p><img alt="" height="1004" src="https://images2.imgbox.com/be/bd/QWnZhh0f_o.png" width="1200"></p> 
<p><img alt="" height="1009" src="https://images2.imgbox.com/4a/f8/JwWWRdVu_o.png" width="1200"></p> 
<h2 id="%E4%B8%89%E3%80%81Spring%E9%A1%B9%E7%9B%AE%E6%95%B4%E5%90%88%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93">三、Spring项目整合达梦数据库</h2> 
<h3 id="1%E3%80%81%E9%85%8D%E7%BD%AEjava%E9%A1%B9%E7%9B%AE%E8%BF%9E%E6%8E%A5%E8%BE%BE%E6%A2%A6%EF%BC%8C%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5%E9%A9%B1%E5%8A%A8">1、配置java项目连接达梦，切换数据连接驱动</h3> 
<p><img alt="" height="575" src="https://images2.imgbox.com/40/49/jeAwRNrz_o.png" width="1200"></p> 
<h3 id="2%E3%80%81Maven%E5%AF%BC%E5%85%A5%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8%E5%8C%85">2、Maven导入达梦数据库驱动包</h3> 
<p><img alt="" height="166" src="https://images2.imgbox.com/ad/58/Wr04mVc9_o.png" width="586"></p> 
<h3 id="3%E3%80%81%E8%A1%A8%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%98%A0%E5%B0%84%E3%80%82%E3%80%90%E8%AE%BF%E9%97%AE%E5%BD%A2%E5%BC%8F%EF%BC%9A%E6%A8%A1%E5%BC%8F%E5%90%8D.%E8%A1%A8%E5%90%8D%E3%80%91">3、表的实体类映射。【访问形式：模式名.表名】</h3> 
<p><img alt="" height="686" src="https://images2.imgbox.com/62/82/D3DxVd3K_o.png" width="725"></p> 
<h3 id="XML%E6%96%87%E4%BB%B6%EF%BC%9A%E6%9F%A5%E8%AF%A2%E8%A1%A8%E3%80%90%E6%A8%A1%E5%BC%8F%E5%90%8D.%E8%A1%A8%E5%90%8D%E3%80%91%E3%80%82%E2%80%8B%E7%BC%96%E8%BE%914%E3%80%81MYSQL%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E4%B8%8EDM%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E3%80%82%E3%80%90DM%EF%BC%9A%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91">4、XML文件：查询表【模式名.表名】</h3> 
<h3 id="%E2%80%8B%E7%BC%96%E8%BE%915%E3%80%81MYSQL%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E4%B8%8EDM%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2%E3%80%82%E3%80%90DM%EF%BC%9A%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%91"><img alt="" height="814" src="https://images2.imgbox.com/b4/52/wcuiiGi9_o.png" width="1087">5、MYSQL字段类型与DM数据类型的转换。【DM：达梦数据库】</h3> 
<pre><code class="language-java">package com.company.common.core.annotation;

/**
 * 数据库类型
 *
 * @author kally
 * @date 2023/12/13
 */
public enum DbType {
    /**
     * 数据库类型（类型，描述）
     */
    MYSQL("mysql", "MySql数据库"),
    MARIADB("mariadb", "MariaDB数据库"),
    ORACLE("oracle", "Oracle11g及以下数据库(高版本推荐使用ORACLE_NEW)"),
    ORACLE_12C("oracle12c", "Oracle12c+数据库"),
    DB2("db2", "DB2数据库"),
    H2("h2", "H2数据库"),
    HSQL("hsql", "HSQL数据库"),
    SQLITE("sqlite", "SQLite数据库"),
    POSTGRE_SQL("postgresql", "Postgre数据库"),
    SQL_SERVER2005("sqlserver2005", "SQLServer2005数据库"),
    SQL_SERVER("sqlserver", "SQLServer数据库"),
    DM("dm", "达梦数据库"),
    XU_GU("xugu", "虚谷数据库"),
    KINGBASE_ES("kingbasees", "人大金仓数据库"),
    PHOENIX("phoenix", "Phoenix HBase数据库"),
    GAUSS("zenith", "Gauss 数据库"),
    CLICK_HOUSE("clickhouse", "clickhouse 数据库"),
    GBASE("gbase", "南大通用(华库)数据库"),
    GBASE_8S("gbase-8s", "南大通用数据库 GBase 8s"),

    @Deprecated
    GBASEDBT("gbasedbt", "南大通用数据库"),

    @Deprecated
    GBASE_INFORMIX("gbase 8s", "南大通用数据库 GBase 8s"),

    SINODB("sinodb", "星瑞格数据库"),
    OSCAR("oscar", "神通数据库"),
    SYBASE("sybase", "Sybase ASE 数据库"),
    OCEAN_BASE("oceanbase", "OceanBase 数据库"),
    FIREBIRD("Firebird", "Firebird 数据库"),
    HIGH_GO("highgo", "瀚高数据库"),
    CUBRID("cubrid", "CUBRID数据库"),
    GOLDILOCKS("goldilocks", "GOLDILOCKS数据库"),
    CSIIDB("csiidb", "CSIIDB数据库"),
    SAP_HANA("hana", "SAP_HANA数据库"),
    IMPALA("impala", "impala数据库"),
    VERTICA("vertica", "vertica数据库"),
    XCloud("xcloud", "行云数据库"),
    REDSHIFT("redshift", "亚马逊redshift数据库"),
    OPENGAUSS("openGauss", "华为 opengauss 数据库"),
    TDENGINE("TDengine", "TDengine数据库"),
    INFORMIX("informix", "Informix数据库"),
    UXDB("uxdb", "优炫数据库"),
    LEALONE("lealone", "Lealone数据库"),
    OTHER("other", "其他数据库");

    private final String db;
    private final String desc;

    public static DbType getDbType(String dbType) {
        DbType[] var1 = values();
        int var2 = var1.length;

        for (int var3 = 0; var3 &lt; var2; ++var3) {
            DbType type = var1[var3];
            if (type.db.equalsIgnoreCase(dbType)) {
                return type;
            }
        }

        return OTHER;
    }

    public String getDb() {
        return this.db;
    }

    public String getDesc() {
        return this.desc;
    }

    /**
     * 数据库类型
     *
     * @param db   数据库
     * @param desc 描述
     */
    private DbType(final String db, final String desc) {
        this.db = db;
        this.desc = desc;
    }

}
</code></pre> 
<h3 id="5%E3%80%81%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6">6、达梦数据库分页插件</h3> 
<p><img alt="" height="520" src="https://images2.imgbox.com/80/52/6euUGmoc_o.png" width="821"></p> 
<p><img alt="" height="411" src="https://images2.imgbox.com/9f/ca/hXx8TJl1_o.png" width="1097"></p> 
<h3 id="6%E3%80%81SQL%E9%80%82%E9%85%8D%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E5%90%8D%EF%BC%9Amysql%E4%BD%BF%E7%94%A8%E5%8F%8D%E5%BC%95%E5%8F%B7%E6%9D%A5%E5%8C%BA%E5%88%86%E5%88%97%E5%90%8D%E5%92%8C%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%9B%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8%E5%8F%8C%E5%BC%95%E5%8F%B7%E6%9D%A5%E5%8C%BA%E5%88%86%EF%BC%9B%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%98%A0%E5%B0%84%E5%AD%97%E6%AE%B5%E4%B9%8B%E5%89%8D%E7%9A%84%E4%BF%AE%E6%94%B9%E3%80%82">7、SQL适配关键字列名</h3> 
<p>mysql使用反引号来区分列名和关键字；达梦数据库使用双引号来区分；实体类映射字段之前的修改。</p> 
<p>MybatisPlusConfig.java文件再加入下列代码,复制即可。</p> 
<pre><code class="language-java">@Bean
    public DmFieldCustomizer getDmFieldCustomizer() {
        return new DmFieldCustomizer();
    }

    /**
     * 在mybatisPlus加载进spring容器之前自定义某些配置
     *
     * @author HetFrame
     */
    public static class DmFieldCustomizer implements MybatisPlusPropertiesCustomizer {
        public DmFieldCustomizer() {
            log.info("加载DmFieldCustomizer...");
        }

        @SneakyThrows
        @Override
        public void customize(MybatisPlusProperties properties) {
            // 使用达梦数据库
            if (Arrays.toString(properties.getMapperLocations()).contains("dm")) {
                log.info("使用达梦数据库");
                //实体类的class
                List&lt;Class&lt;?&gt;&gt; classList = new ArrayList&lt;&gt;();
                PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();
                //找到所有实体类的class
                Resource[] resources = resolver.getResources("classpath*:com/**/entity/**/*.class");
                for (Resource res : resources) {
                    // 先获取resource的元信息，然后获取class元信息，最后得到 class 全路径
                    String clsName = new SimpleMetadataReaderFactory().getMetadataReader(res).getClassMetadata().getClassName();
                    // 通过名称加载
                    Class&lt;?&gt; clazz = Class.forName(clsName);
                    classList.add(clazz);
                }

                classList.forEach(e -&gt; {
                    List&lt;Field&gt; list = TableInfoHelper.getAllFields(e);
                    list.forEach(field -&gt; {
                        TableField tableField = field.getAnnotation(TableField.class);
                        String metaColName;
                        if (tableField != null &amp;&amp; StringUtils.isNotBlank(metaColName = tableField.value()) &amp;&amp; metaColName.contains("`")) {

                            String newColName = metaColName.replace("`", "\"");

                            InvocationHandler invocationHandler = Proxy.getInvocationHandler(tableField);
                            try {
                                Field memberValues = invocationHandler.getClass().getDeclaredField("memberValues");
                                memberValues.setAccessible(true);
                                Map memberValuesMap = (Map) memberValues.get(invocationHandler);
                                memberValuesMap.put("value", newColName);
                                log.info("将实体类映射字段{}修改为{}", metaColName, newColName);
                            } catch (NoSuchFieldException | IllegalAccessException exception) {
                                throw new RuntimeException(exception);
                            }
                        }
                    });
                });

            } else {
                log.info("使用mysql数据库");
            }
        }
    }</code></pre> 
<pre><code class="language-java">package com.company.common.framework.mybatis;


import com.baomidou.mybatisplus.autoconfigure.MybatisPlusProperties;

/**
 * MybatisPlusPropertiesCustomizer 用于在读取 properties 之后进行一些自定义操作
 *
 * @author kally
 * @date 2023/12/13
 */
public interface MybatisPlusPropertiesCustomizer {
    /**
     * mysql中我们使用反引号来区分列名和关键字；但在达梦数据库中，使用双引号来区分。
     * 而如果创建实体类在注解 @TableField 中使用了反引号例如 @TableField(`range`)，
     * 这种我们改了的话，mysql 就用不了，不改达梦就用不了。所以从代码入手，在启动时用反射修改值。
     * 达梦数据库某些关键字例如 audit，在 mysql 中不是关键字的，需要手动设置 @TableField(`audit`)。
     */

    /**
     * MybatisPlusPropertiesCustomizer 用于在读取 properties 之后进行一些自定义操作
     *
     * @param properties {@link MybatisPlusProperties}
     */
    void customize(MybatisPlusProperties properties);
}</code></pre> 
<pre></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cfb0ad226dfcb03ea3e239aca8934169/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于jsp的图书馆管理系统的设计与实现 （含源码&#43;sql&#43;视频导入教程&#43;文档）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/457ada56dbb1df3617dafd119b7ac3e3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AIGC重塑教育：AI大模型驱动的教育变革与实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>