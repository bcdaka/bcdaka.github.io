<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JAVA PDF 给PDF添加文字/图片水印（指定内容），并且设置位置 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a33dfb9f13e19be52004ca1e8ce70e09/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="JAVA PDF 给PDF添加文字/图片水印（指定内容），并且设置位置">
  <meta property="og:description" content="提示：看完这个简单的demo 后就知道怎样去操作一个PDF了
文章目录 前言一、前提准备二、使用步骤 1.引入库2.以下是部分代码的作用总结 前言 提示：操作PDF其实是一件很简单的事情，比一般的CRUD都简单
例如：我们拿到了一个需求，我需要给这个PDF设置一个电子签名(就是一张图片盖在这个PDF上，然后输出到服务器的某个指定文件夹中)和年月日(自定义的文字)
提示：以下是本篇文章正文内容，下面案例可供参考
一、前提准备 示例：因为我这个是demo 所以我们准备两个文件
1.原始PDF（模板PDF，需要操作的文件） J:/test.pdf
2.需要放到PDF种的签名（就是一张图片嘛）J:/666.png
二、使用步骤 1.引入库 代码如下（示例）：
其实我们只需要用到两个包，maven引入即可（复制过去） &lt;!-- pdfbox --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt; &lt;artifactId&gt;pdfbox&lt;/artifactId&gt; &lt;version&gt;2.0.28&lt;/version&gt; &lt;/dependency&gt; &lt;!-- itextpdf --&gt; &lt;dependency&gt; &lt;groupId&gt;com.itextpdf&lt;/groupId&gt; &lt;artifactId&gt;itextpdf&lt;/artifactId&gt; &lt;version&gt;5.5.13.3&lt;/version&gt; &lt;/dependency&gt; 2.以下是部分代码的作用 代码如下（示例）：
首先我们需要读取这两个文件（路径换成你自己的服务器路径就好）File file = ResourceUtils.getFile(&#34;J:/test.pdf&#34;); Image img = Image.getInstance(&#34;J:/ikun.jpg&#34;); 然后我们需要提前设置需要输出的路径（就是你生成后文件放到哪儿） PdfStamper stamper = new PdfStamper(reader, Files.newOutputStream(Paths.get(&#34;J:/abc.pdf&#34;))); 图片操作的代码块
PdfGState pdfGState = new PdfGState(); pdfGState.setFillOpacity(0.7F); contentByte.setGState(pdfGState); //图片的位置 img.setAbsolutePosition(430, 220); //这是图片的尺寸 img.scaleAbsolute(100, 100); img.setCompressionLevel(100); 文字的代码块
//设置字体大小contentByte.setFontAndSize(BaseFont.createFont(fontFile.getAbsolutePath(),BaseFont .">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-27T16:31:11+08:00">
    <meta property="article:modified_time" content="2024-02-27T16:31:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JAVA PDF 给PDF添加文字/图片水印（指定内容），并且设置位置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>提示：看完这个简单的demo 后就知道怎样去操作一个PDF了</p> 
</blockquote> 
<p></p> 
<div> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">前言</a></li><li><a href="#pandas_16" rel="nofollow">一、</a>前提准备</li><li><a href="#_19" rel="nofollow">二、使用步骤</a> 
   <ul><li><a href="#1_20" rel="nofollow">1.引入库</a></li><li><a href="#2_34" rel="nofollow">2.</a>以下是部分代码的作用</li></ul></li><li><a href="#_45" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_7"></a>前言</h2> 
<p><code>提示：操作PDF其实是一件很简单的事情，比一般的CRUD都简单</code></p> 
<p>例如：我们拿到了一个需求，我需要给这个PDF设置一个<strong><span style="color:#fe2c24;">电子签名</span></strong>(<u><em>就是一张图片盖在这个PDF上，然后输出到服务器的某个指定文件夹中</em></u>)和<strong><span style="color:#fe2c24;">年月日</span></strong>(<u><em>自定义的文字</em></u>)</p> 
<hr> 
<p><code>提示：以下是本篇文章正文内容，下面案例可供参考</code></p> 
<h2><a id="pandas_16"></a>一、前提准备</h2> 
<p>示例：因为我这个是demo 所以我们准备两个文件<br>            1.原始PDF（模板PDF，需要操作的文件）   J:/test.pdf</p> 
<p>           2.需要放到PDF种的签名（就是一张图片嘛）J:/666.png</p> 
<h2><a id="_19"></a>二、使用步骤</h2> 
<h3><a id="1_20"></a>1.引入库</h3> 
<p>代码如下（示例）：</p> 
<pre><code class="language-c">其实我们只需要用到两个包，maven引入即可（复制过去）</code>
</pre> 
<pre>&lt;!-- pdfbox --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;
    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;
    &lt;version&gt;2.0.28&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- itextpdf --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;
    &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;
    &lt;version&gt;5.5.13.3&lt;/version&gt;
&lt;/dependency&gt;</pre> 
<h3><a id="2_34"></a>2.以下是部分代码的作用</h3> 
<p>代码如下（示例）：</p> 
<blockquote> 
 <pre><code class="language-c">首先我们需要读取这两个文件（路径换成你自己的服务器路径就好）</code>File file = ResourceUtils.getFile("J:/test.pdf");
Image img = Image.getInstance("J:/ikun.jpg");

  然后我们需要提前设置需要输出的路径（就是你生成后文件放到哪儿）
PdfStamper stamper = new PdfStamper(reader, Files.newOutputStream(Paths.get("J:/abc.pdf")));</pre> 
</blockquote> 
<blockquote> 
 <p>图片操作的代码块</p> 
 <pre>PdfGState pdfGState = new PdfGState();
pdfGState.setFillOpacity(0.7F);
contentByte.setGState(pdfGState);
//图片的位置
img.setAbsolutePosition(430, 220);
//这是图片的尺寸
img.scaleAbsolute(100, 100);
img.setCompressionLevel(100);
</pre> 
</blockquote> 
<blockquote> 
 <p>文字的代码块</p> 
 <pre>//设置字体大小contentByte.setFontAndSize(BaseFont.createFont(fontFile.getAbsolutePath(),BaseFont                .IDENTITY_H,BaseFont.NOT_EMBEDDED), 13f);
// 设置文字
contentByte.setColorFill(BaseColor.LIGHT_GRAY);
contentByte.showTextAligned(Element.ALIGN_CENTER, "13511111111", 450, 200, 0);
contentByte.showTextAligned(Element.ALIGN_CENTER,                 String.valueOf(LocalDate.now().getYear()), 450, 143, 0);
contentByte.showTextAligned(Element.ALIGN_CENTER,                 String.valueOf(LocalDate.now().getMonthValue()), 490, 143, 0);
contentByte.showTextAligned(Element.ALIGN_CENTER,                 String.valueOf(LocalDate.now().getDayOfMonth()), 128, 130, 0);</pre> 
</blockquote> 
<p>上面就是文件和文字的操作</p> 
<h3>3.总体的DEMO代码</h3> 
<pre><code class="language-java">package com.cm.email;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Element;
import com.itextpdf.text.Image;
import com.itextpdf.text.pdf.*;
import lombok.extern.slf4j.Slf4j;
import org.springframework.util.ResourceUtils;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.time.LocalDate;


@Slf4j
@RestController
public class WaterMarkUtils {

    @PostMapping("/set-pdf")
    public void pdfs() throws DocumentException, IOException {
        File file = ResourceUtils.getFile("J:/test.pdf");
        Image img = Image.getInstance("J:/ikun(1).jpg");
        File fontFile = ResourceUtils.getFile("classpath:font/simfang.ttf");
        InputStream inputStream = Files.newInputStream(file.toPath());
        // 读取原始 PDF 文件
        PdfReader reader = new PdfReader(inputStream);
        PdfStamper stamper = new PdfStamper(reader, Files.newOutputStream(Paths.get("J:/abc.pdf")));
        try {
            // 获取 PDF 中的页数
            int pageCount = reader.getNumberOfPages();
            // 获取第几页pdf
            PdfContentByte contentByte = stamper.getOverContent(pageCount);
            contentByte.beginText();
            //给图片设置透明度
            PdfGState pdfGState = new PdfGState();
            pdfGState.setFillOpacity(0.7F);
            contentByte.setGState(pdfGState);
            //图片的位置
            img.setAbsolutePosition(430, 220);
            //这是图片的尺寸
            img.scaleAbsolute(100, 100);
            img.setCompressionLevel(100);
            //设置字体大小
            contentByte.setFontAndSize(BaseFont.createFont(fontFile.getAbsolutePath(),BaseFont.IDENTITY_H,BaseFont.NOT_EMBEDDED), 13f);
            // 设置文字
            contentByte.setColorFill(BaseColor.LIGHT_GRAY);
            contentByte.showTextAligned(Element.ALIGN_CENTER, "13511111111", 450, 200, 0);
            contentByte.showTextAligned(Element.ALIGN_CENTER, String.valueOf(LocalDate.now().getYear()), 450, 143, 0);
            contentByte.showTextAligned(Element.ALIGN_CENTER, String.valueOf(LocalDate.now().getMonthValue()), 490, 143, 0);
            contentByte.showTextAligned(Element.ALIGN_CENTER, String.valueOf(LocalDate.now().getDayOfMonth()), 128, 130, 0);
            //添加图品结束等等
            contentByte.addImage(img);
            contentByte.endText();
        }catch (Exception e){
            e.printStackTrace();
        }finally {
            // 保存修改后的 PDF 文件并关闭文件流
            stamper.close();
            reader.close();
        }


    }

}
</code></pre> 
<h3>4.具体效果</h3> 
<p><img alt="" height="866" src="https://images2.imgbox.com/44/dc/MO2dwpEU_o.png" width="1200"></p> 
<hr> 
<h2><a id="_45"></a>总结</h2> 
<p>提示：关于字体这些东西，还有比如说文字的颜色啊，可以自己去看看，这里只是简单的演示</p> 
<p><br>          <strong>以上就是今天要讲的内容，本文仅仅简单介绍了java操作PDF的使用，代理直接拿过去运行即可。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f067bb501121a7f74b3bccb53384035d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Docker部署DataX3.0&#43;DataX-Web</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/089d2bfdc152f4188e43ddbacd454eb8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LLaMA-Factory 8卡4090 deepspeed zero3 微调Qwen14B-chat</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>