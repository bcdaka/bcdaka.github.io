<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HiveSQL常用函数 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/df28a7ee92582700ebc90394a0e91947/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="HiveSQL常用函数">
  <meta property="og:description" content="1.字符串函数 1.1 split()函数 用于切割字符串
格式: split(&#39;参数1&#39;,&#39;参数2&#39;),这里的参数1为数据,参数2为切割方式
细节:参数二可以用正则表达式
举例
select split(&#39;abcd&#39;,&#39;c&#39;); --结果为[&#34;ab&#34;,&#34;d&#34;] select split(&#39;asd11mcd22&#39;, &#39;11&#39;); --结果为[&#34;asd&#34;,&#34;mcd22&#34;] select split(&#39;asd11mc22dd&#39;, &#39;\\d&#43;&#39;); --结果为[&#34;asd&#34;,&#34;mc&#34;,&#34;dd&#34;] 1.2 concat()函数 用于拼接字符串
格式: concat(&#39;数据1&#39;,&#39;数据2&#39;......)
细节:该函数拼接没有拼接符,直接拼接在一起
举例
select concat(&#39;asd123&#39;,&#39;ff&#39;); --结果为asd123ff 1.3 concat_ws()函数 也是用于拼接字符串
格式: concat_ws(&#39;拼接符&#39;,&#39;数据1&#39;,&#39;数据2&#39;,......)
举例
select concat_ws(&#39;-&#39;,&#39;abcfs&#39;,&#39;mm&#39;,&#39;cc&#39;); --结果为abcfs-mm-cc 1.4 substr()函数 用于截取字符串
格式: substr(&#39;数据&#39;,起始位置,截取多少位)
细节:空格也算一位
举例
select substr(&#39;2001-07-09 00:00:00&#39;,1,10); --获取年月日 2001-07-09 select substr(&#39;2001-07-09 00:00:00&#39;,12,8); --获取时间 00:00:00 select substr(&#39;2001-07-09 00:00:00&#39;,1,4); --获取年 2001 select substr(&#39;2001-07-09 00:00:00&#39;,6,2); --获取月 07 2.时间函数 2.1 current_timestamp()函数 返回当前日期及时间">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-21T21:43:30+08:00">
    <meta property="article:modified_time" content="2024-01-21T21:43:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HiveSQL常用函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/fe/39/w30yaNdQ_o.png"></p> 
<h2>1.字符串函数</h2> 
<h3>1.1 split()函数</h3> 
<p>用于切割字符串</p> 
<p>格式: split('参数1','参数2'),这里的参数1为数据,参数2为切割方式</p> 
<p>细节:参数二可以用正则表达式</p> 
<p>举例</p> 
<pre><code class="language-sql">select split('abcd','c');  --结果为["ab","d"]
select split('asd11mcd22', '11');  --结果为["asd","mcd22"]

select split('asd11mc22dd', '\\d+');  --结果为["asd","mc","dd"]</code></pre> 
<h3>1.2 concat()函数</h3> 
<p>用于拼接字符串</p> 
<p>格式: concat('数据1','数据2'......)</p> 
<p>细节:该函数拼接没有拼接符,直接拼接在一起</p> 
<p>举例</p> 
<pre><code class="language-sql">select concat('asd123','ff');  --结果为asd123ff</code></pre> 
<h3>1.3 concat_ws()函数</h3> 
<p>也是用于拼接字符串</p> 
<p>格式: concat_ws('拼接符','数据1','数据2',......)</p> 
<p>举例</p> 
<pre><code class="language-sql">select concat_ws('-','abcfs','mm','cc');  --结果为abcfs-mm-cc</code></pre> 
<h3>1.4 substr()函数</h3> 
<p>用于截取字符串</p> 
<p>格式: substr('数据',起始位置,截取多少位)</p> 
<p>细节:空格也算一位</p> 
<p>举例</p> 
<pre><code class="language-sql">select substr('2001-07-09 00:00:00',1,10);  --获取年月日 2001-07-09
select substr('2001-07-09 00:00:00',12,8);  --获取时间 00:00:00
select substr('2001-07-09 00:00:00',1,4);  --获取年 2001
select substr('2001-07-09 00:00:00',6,2);  --获取月 07</code></pre> 
<h2 style="background-color:transparent;">2.时间函数</h2> 
<h3 style="background-color:transparent;">2.1 current_timestamp()函数</h3> 
<p>返回当前日期及时间</p> 
<p>举例</p> 
<pre><code class="language-sql">select `current_timestamp`();</code></pre> 
<h3 style="background-color:transparent;">2.2 current_date()函数</h3> 
<p>获取当前日期</p> 
<p>举例</p> 
<pre><code class="language-sql">select current_date();</code></pre> 
<h3 style="background-color:transparent;">2.3 unix_timestamp()函数</h3> 
<p>获取时间原点</p> 
<p>解释:时间原点指的是自1970年1月1日00:00:00 UTC以来的秒数，作为计算机系统中记录时间的基准。</p> 
<p>举例</p> 
<pre><code class="language-sql">select  unix_timestamp();  --1705844247</code></pre> 
<h3>2.5 from_unixtime()</h3> 
<p>用于将UNIX时间戳（表示从1970年1月1日00:00:00 UTC开始经过的秒数）转换为日期时间格式。</p> 
<p>举例</p> 
<pre><code class="language-sql">select from_unixtime(1888888889); --输出结果为 2029-11-09 11:21:29</code></pre> 
<h3>2.6 year month day函数</h3> 
<p>获取年月日</p> 
<p>举例</p> 
<pre><code class="language-sql">-- 获取时间年
select year('2024-10-12 10:12:10');

-- 获取时间月
select month('2024-10-12 10:12:10');

-- 获取日
select day('2024-10-12 10:12:10');</code></pre> 
<h3>2.7 quarter()函数</h3> 
<p>获取季度函数</p> 
<p>举例</p> 
<pre><code class="language-sql">select quarter('2024-10-12 10:12:10'); --输出结果为4,表示第四季度
select quarter('2024-5-12');  --输出结果为2,表示第二季度</code></pre> 
<h2>3.数学函数</h2> 
<h3>3.1 abs()函数</h3> 
<p>绝对值函数</p> 
<p>举例</p> 
<pre><code class="language-sql">select abs(-10); --输出结果为10</code></pre> 
<h3>3.2 round()函数</h3> 
<p>格式:round(参数1,参数2)</p> 
<p>参数1表示数据,参数2表示保留小数位数,注意四舍五入</p> 
<p>举例</p> 
<pre><code class="language-sql">select round(100.156,2);  --输出结果为100.16
</code></pre> 
<h3>3.3 rand()函数</h3> 
<p>取随机数</p> 
<p>举例</p> 
<pre><code class="language-sql">select rand();  --取0到1之间的随机数</code></pre> 
<pre><code class="language-sql">select rand()*100;  --取0到100之间的随机数</code></pre> 
<h3 style="background-color:transparent;">3.4 ceil()函数</h3> 
<p>天花板函数</p> 
<p>解释:取给定的数值转为最接近且大于等于它的整数</p> 
<p>举例</p> 
<pre><code class="language-sql">select ceil(10.6);  --输出结果为11</code></pre> 
<h3>3.5 floor()函数</h3> 
<p>地板函数</p> 
<p>解释:取给定的数值转为最接近且小于等于它的整数</p> 
<p>举例</p> 
<pre><code class="language-sql">select `floor`(10.6); --输出结果为10</code></pre> 
<h3>3.6 pow()函数</h3> 
<p>求次方函数</p> 
<p>格式:pow(参数1,参数2)</p> 
<p>表示参数1的参数2次方</p> 
<p>举例</p> 
<pre><code class="language-sql">select pow(3,2);  --表示3的2次方,结果为9</code></pre> 
<h2>4.转换函数</h2> 
<h3>4.1 if()函数</h3> 
<p>举例</p> 
<pre><code class="language-sql">select `if`(5&gt;3,true ,false); --输出为true
select `if`(0&lt;-1,true,false); --输出为flase</code></pre> 
<h3>4.2 isnull()函数</h3> 
<p>判断是否为空</p> 
<p>注意:只有为null时才是空</p> 
<p>举例</p> 
<pre><code class="language-sql">select isnull('');  --输出为false
select isnull(null);  --输出为true
select isnull(0);   --输出为false</code></pre> 
<h3>4.3 isnotnull()函数</h3> 
<p>判断是否不为空</p> 
<p>举例</p> 
<pre><code class="language-sql">select isnotnull('');  --输出为true
select isnotnull(null);  --输出为false
select isnotnull(0);  --输出为true</code></pre> 
<h3>4.4 nvl()函数</h3> 
<p>空值转换函数</p> 
<p>判断参数1是否为空,不为空就返回参数1,为空就返回参数2</p> 
<p>举例</p> 
<pre><code class="language-sql">select nvl(1,2);  --输出值为1
select nvl(null,2);  --输出值为2</code></pre> 
<h3>4.5 coalesce()函数</h3> 
<p>格式:coalesce(参数1,参数2,参数3......)</p> 
<p>返回第一个不为空的值</p> 
<p>举例</p> 
<pre><code class="language-sql">select coalesce(1,2,3,4,5,6);  --输出结果为1
select coalesce(null,1,5,null,67); --输出结果为1
select coalesce(null,null,null,5,1,null,88,null);  --输出结果为5</code></pre> 
<h3>4.6 case when 函数</h3> 
<p>格式 case when 条件 then 结果 else 结果</p> 
<p>举例</p> 
<pre><code class="language-sql">select case
    when 5&gt;3 then '大于'
    when 5&gt;3 then '小于'
    else '等于'
end;   --结果为大于</code></pre> 
<p>case when 语法糖</p> 
<pre><code class="language-sql">select case 5
 when 1 then '星期一'
 when 2 then '星期二'
 when 3 then '星期三'
 when 4 then '星期四'
 when 5 then '星期五'
else '周末'
end;   --结果为星期五</code></pre> 
<p>4.7 cast()函数</p> 
<p>用于转换类型</p> 
<p>举例</p> 
<pre><code class="language-sql">select cast(1 as string);
select cast(10.5 as int);  --结果为10
select cast(10.3 as int);  --结果为10
select cast(15 as double);
select cast('123' as boolean);  --结果为true
select cast('0' as boolean);  --结果为false
select cast('' as boolean);   --结果为false</code></pre> 
<h2>5.加密 脱敏相关函数</h2> 
<h3>5.1 hash()函数</h3> 
<p>哈希函数</p> 
<p>举例</p> 
<pre><code class="language-sql">select hash('asd123');</code></pre> 
<h3>5.2 加密函数</h3> 
<p>md5,sha1,sha2,crc32</p> 
<p>举例</p> 
<pre><code class="language-sql">select md5('123');  --加密后为202cb962ac59075b964b07152d234b70
select sha1('123');  --加密后结果为:40bd001563085fc35165329ea1ff5c5ecbdbbeef
select sha2('123',512);  --加密后结果为3c9909afec25354d551dae21590bb26e38d53f2173b8d3dc3eee4c047e7ab1c1eb8b85103e3be7ba613b31bb5c9c36214dc9f14a42fd7a2fdb84856bca5c44c2
select crc32('123');  --加密后结果为:2286445522</code></pre> 
<h3>5.3 mask()函数</h3> 
<p>脱敏函数</p> 
<p>默认为大写字母为X,小写字母为x,数字为n</p> 
<p>举例</p> 
<pre><code class="language-sql">select mask('AAbb123'); --默认为大写字母为X,小写字母为x,数字为n 所以结果为XXxxnn</code></pre> 
<h3>5.4 mask_first_n()函数</h3> 
<p>只脱敏前几个数</p> 
<p>举例</p> 
<pre><code class="language-sql">select mask_first_n('AAbb123',4); --结果为XXxx123,只脱敏前四个数</code></pre> 
<h3>5.5 mask_last_n()函数</h3> 
<p>只脱敏后几个数</p> 
<p>举例</p> 
<pre><code class="language-sql">select mask_last_n('AAbb123',4);  --结果为AAbxnnn,只脱敏后四位数</code></pre> 
<h2>6.其他函数</h2> 
<h3>6.1 current_user()函数</h3> 
<p>查看当前用户函数</p> 
<p>举例</p> 
<pre><code class="language-sql">select current_user();  --root</code></pre> 
<h3>6.2 current_database()函数</h3> 
<p>查看当前使用的数据库</p> 
<h3>6.3 version()函数</h3> 
<p>查看当前Hive版本</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/603329ae3996fa6009df9f17873ac7dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">动态规划-背包问题详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a4d5035fcf0246dd0848e57e0b6db74e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">.Net接入AzureOpenAI、OpenAI、通义千问、智谱AI、讯飞星火、文心一言大语言模型。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>