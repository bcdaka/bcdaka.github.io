<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【ETL工具】Datax-ETL-SqlServerToHDFS - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9d5037221a1ec55eda2393b9dd099fd7/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【ETL工具】Datax-ETL-SqlServerToHDFS">
  <meta property="og:description" content="🦄 个人主页——🎐个人主页 🎐✨🍁 🪁🍁🪁🍁🪁🍁🪁🍁 感谢点赞和关注 ，每天进步一点点！加油！🪁🍁🪁🍁🪁🍁🪁🍁
目录
🦄 个人主页——🎐个人主页 🎐✨🍁
一、DataX概览
1.1 DataX 简介
1.2 DataX框架
1.3 功能限制
1.4 Support Data Channels
二、配置样例
2.1 环境信息
2.2 SQLServer数据同步到HDFS
2.2 参数说明
一、DataX概览 1.1 DataX 简介 DataX 是阿里巴巴集团内被广泛使用的离线数据同步工具/平台，实现包括 MySQL、SQL Server、Oracle、PostgreSQL、HDFS、Hive、HBase、OTS、ODPS 等各种异构数据源之间高效的数据同步功能。
GitHub - alibaba/DataX: DataX是阿里云DataWorks数据集成的开源版本。
1.2 DataX框架 DataX本身作为数据同步框架，将不同数据源的同步抽象为从源头数据源读取数据的Reader插件，以及向目标端写入数据的Writer插件，理论上DataX框架可以支持任意数据源类型的数据同步工作。同时DataX插件体系作为一套生态系统, 每接入一套新数据源该新加入的数据源即可实现和现有的数据源互通。
DataX本身作为离线数据同步框架，采用Framework &#43; plugin架构构建。将数据源读取和写入抽象成为Reader/Writer插件，纳入到整个同步框架中。
角色
作用
Reader（采集模块）
负责采集数据源的数据，将数据发送给 Framework。
Writer（写入模块）
负责不断向 Framework 中取数据，并将数据写入到目的端。
Framework（中间商）
负责连接 Reader 和 Writer，作为两者的数据传输通道，并处理缓冲，流控，并发，数据转换等核心技术问题。
HdfsWriter 提供向 HDFS 文件系统指定路径中写入 TEXTFILE 文件和 ORCFile 文件，文件内容可与 Hive 表关联。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-10-27T16:57:04+08:00">
    <meta property="article:modified_time" content="2023-10-27T16:57:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【ETL工具】Datax-ETL-SqlServerToHDFS</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="vN7sk"></h3> 
<p class="img-center"><img alt="" height="534" id="Dn2P9" src="https://images2.imgbox.com/d1/de/l3nl0Ve2_o.png" width="950"></p> 
<blockquote> 
 <h3 id="lUSgZ" style="text-align:center;">🦄 <span style="color:#fe2c24;"><strong>个人主页——🎐</strong><a href="https://blog.csdn.net/qq_35995514?type=blog" title="个人主页">个人主页</a> </span>🎐✨🍁</h3> 
 <p id="u659b4a16" style="text-align:center;"><strong>🪁🍁🪁🍁🪁🍁🪁🍁 <span style="color:#fe2c24;">感谢点赞和关注 ，每天进步一点点！加油！</span>🪁🍁🪁🍁🪁🍁🪁🍁</strong></p> 
</blockquote> 
<p><strong>目录</strong></p> 
<p id="lUSgZ-toc" style="margin-left:40px;"><a href="#lUSgZ" rel="nofollow">🦄 个人主页——🎐个人主页 🎐✨🍁</a></p> 
<p id="qTPNZ-toc" style="margin-left:0px;"><a href="#qTPNZ" rel="nofollow">一、DataX概览</a></p> 
<p id="ehEw4-toc" style="margin-left:40px;"><a href="#ehEw4" rel="nofollow">1.1 DataX 简介</a></p> 
<p id="Hj12j-toc" style="margin-left:40px;"><a href="#Hj12j" rel="nofollow">1.2 DataX框架</a></p> 
<p id="CJzMS-toc" style="margin-left:40px;"><a href="#CJzMS" rel="nofollow">1.3 功能限制</a></p> 
<p id="Z6dkr-toc" style="margin-left:40px;"><a href="#Z6dkr" rel="nofollow">1.4 Support Data Channels</a></p> 
<p id="H6FUd-toc" style="margin-left:0px;"><a href="#H6FUd" rel="nofollow">二、配置样例</a></p> 
<p id="pmRg1-toc" style="margin-left:40px;"><a href="#pmRg1" rel="nofollow">2.1 环境信息</a></p> 
<p id="cEzkm-toc" style="margin-left:40px;"><a href="#cEzkm" rel="nofollow">2.2 SQLServer数据同步到HDFS</a></p> 
<p id="UNcxs-toc" style="margin-left:40px;"><a href="#UNcxs" rel="nofollow">2.2 参数说明</a></p> 
<hr id="hr-toc"> 
<h2 style="background-color:transparent;"><span style="color:#956fe7;">一、DataX概览</span></h2> 
<hr id="LHwjx"> 
<h3 id="ehEw4" style="background-color:transparent;"><span style="color:#4da8ee;">1.1 DataX 简介</span></h3> 
<hr id="O197H"> 
<blockquote> 
 <p id="u3fb99adb">DataX 是阿里巴巴集团内被广泛使用的离线数据同步工具/平台，实现包括 MySQL、SQL Server、Oracle、PostgreSQL、HDFS、Hive、HBase、OTS、ODPS 等各种异构数据源之间高效的数据同步功能。</p> 
</blockquote> 
<p id="u4a9ca7b7"></p> 
<p class="img-center"><img alt="" height="273" id="u6e507627" src="https://images2.imgbox.com/1c/c6/VdzuHTNV_o.png" width="900"></p> 
<p id="udbfa8a65"></p> 
<p id="u356f0c73"><a href="https://github.com/alibaba/DataX" title="GitHub - alibaba/DataX: DataX是阿里云DataWorks数据集成的开源版本。">GitHub - alibaba/DataX: DataX是阿里云DataWorks数据集成的开源版本。</a></p> 
<h3 id="Hj12j" style="background-color:transparent;"><span style="color:#4da8ee;">1.2 DataX框架</span></h3> 
<hr id="jXTl6"> 
<blockquote> 
 <p id="u0af8d81c">DataX本身作为数据同步框架，将不同数据源的同步抽象为从源头数据源读取数据的Reader插件，以及向目标端写入数据的Writer插件，理论上DataX框架可以支持任意数据源类型的数据同步工作。同时DataX插件体系作为一套生态系统, 每接入一套新数据源该新加入的数据源即可实现和现有的数据源互通。</p> 
</blockquote> 
<p id="ub63c361f"></p> 
<p class="img-center"><img alt="" height="197" id="u0050da46" src="https://images2.imgbox.com/7c/ca/v8s51llv_o.png" width="834"></p> 
<p id="udab72707">DataX本身作为离线数据同步框架，采用Framework + plugin架构构建。将数据源读取和写入抽象成为Reader/Writer插件，纳入到整个同步框架中。</p> 
<table id="p7tCN"><tbody><tr><td> <p id="ub00532d3"><strong>角色</strong></p> </td><td> <p id="u5e9bd7d5"><strong>作用</strong></p> </td></tr><tr><td> <p id="uc2ba5934">Reader（采集模块）</p> </td><td> <p id="u2c779ba4">负责采集数据源的数据，将数据发送给 Framework。</p> </td></tr><tr><td> <p id="uee179787">Writer（写入模块）</p> </td><td> <p id="u4a170f09">负责不断向 Framework 中取数据，并将数据写入到目的端。</p> </td></tr><tr><td> <p id="ude392e51">Framework（中间商）</p> </td><td> <p id="u9fb04e4c">负责连接 Reader 和 Writer，作为两者的数据传输通道，并处理缓冲，流控，并发，数据转换等核心技术问题。</p> </td></tr></tbody></table> 
<p id="u769fc875"><br> HdfsWriter 提供向 HDFS 文件系统指定路径中写入 TEXTFILE 文件和 ORCFile 文件，文件内容可与 Hive 表关联。</p> 
<h3 id="CJzMS" style="background-color:transparent;"><span style="color:#4da8ee;">1.3 功能限制</span></h3> 
<hr> 
<ul><li id="ud21e3960">目前 HdfsWriter 仅支持 textfile 和 orcfile 两种格式的文件，且文件内容存放的必须是一张逻辑意义上的二维表;</li><li id="uead9d0ea">由于 HDFS 是文件系统，不存在 schema 的概念，因此不支持对部分列写入;</li><li id="u7c6b0a6f">目前仅支持与以下 Hive 数据类型：<br> 数值型：TINYINT,SMALLINT,INT,BIGINT,FLOAT,DOUBLE</li></ul> 
<p id="u46a29f84">字符串类型：STRING,VARCHAR,CHAR</p> 
<p id="u742c5633">布尔类型：BOOLEAN</p> 
<p id="ub5f0c179">时间类型：DATE,TIMESTAMP</p> 
<p id="u96aae2c1">目前不支持：decimal、binary、arrays、maps、structs、union类型;</p> 
<ul><li id="ufb649050">对于 Hive 分区表目前仅支持一次写入单个分区;</li><li id="u3a544387">对于 textfile 需用户保证写入 hdfs 文件的分隔符与在 Hive 上创建表时的分隔符一致,从而实现写入 hdfs 数据与 Hive 表字段关联;</li></ul> 
<p id="u36728089"><span style="color:#1c7331;"><strong>HdfsWriter 实现过程是：</strong></span></p> 
<blockquote> 
 <p id="u9a143b01">首先根据用户指定的path，创建一个hdfs文件系统上不存在的临时目录，创建规则：path_随机； 然后将读取的文件写入这个临时目录； 全部写入后再将这个临时目录下的文件移动到用户指定目录（在创建文件时保证文件名不重复）; 最后删除临时目录。 如果在中间过程发生网络中断等情况造成无法与hdfs建立连接，需要用户手动删除已经写入的文件和临时目录。</p> 
</blockquote> 
<p id="u3b2a522b"></p> 
<h3 id="Z6dkr" style="background-color:transparent;"><span style="color:#4da8ee;">1.4 Support Data Channels</span></h3> 
<hr id="Q44tg"> 
<p id="uc117551d">DataX目前已经有了比较全面的插件体系，主流的RDBMS数据库、NOSQL、大数据计算系统都已经接入，目前支持数据如下图，详情请点击：<a href="https://github.com/alibaba/DataX/wiki/DataX-all-data-channels" title="DataX数据源参考指南">DataX数据源参考指南</a></p> 
<table id="pHznO"><tbody><tr><td> <p id="u0c9e0c3e"><strong>类型</strong></p> </td><td> <p id="ua6068edd"><strong>数据源</strong></p> </td><td> <p id="ud2fd5097"><strong>Reader(读)</strong></p> </td><td> <p id="uf400bd72"><strong>Writer(写)</strong></p> </td><td> <p id="u9d25e8a3"><strong>文档</strong></p> </td></tr><tr><td> <p id="ub17e811a">RDBMS 关系型数据库</p> </td><td> <p id="ub223465c">MySQL</p> </td><td> <p id="u470d39d1">√</p> </td><td> <p id="u9b7851f1">√</p> </td><td> <p id="u6300348b"><a href="https://github.com/alibaba/DataX/blob/master/mysqlreader/doc/mysqlreader.md" title="读">读</a></p> <p id="u9c845d33">、<a href="https://github.com/alibaba/DataX/blob/master/mysqlwriter/doc/mysqlwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="ude87f847">Oracle</p> </td><td> <p id="u20e72b3a">√</p> </td><td> <p id="u94c10f53">√</p> </td><td> <p id="u15a97624"><a href="https://github.com/alibaba/DataX/blob/master/oraclereader/doc/oraclereader.md" title="读">读</a></p> <p id="uc7aa037b">、<a href="https://github.com/alibaba/DataX/blob/master/oraclewriter/doc/oraclewriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u4ddd3736">OceanBase</p> </td><td> <p id="u40028bc1">√</p> </td><td> <p id="u40de8db3">√</p> </td><td> <p id="u8e29898c"><a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/use-datax-to-full-migration-data-to-oceanbase" rel="nofollow" title="读">读</a></p> <p id="u08a1a6a2">、<a href="https://open.oceanbase.com/docs/community/oceanbase-database/V3.1.0/use-datax-to-full-migration-data-to-oceanbase" rel="nofollow" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u49262c76">SQLServer</p> </td><td> <p id="ude0b7ae1">√</p> </td><td> <p id="ud9720de4">√</p> </td><td> <p id="u04efe33e"><a href="https://github.com/alibaba/DataX/blob/master/sqlserverreader/doc/sqlserverreader.md" title="读">读</a></p> <p id="ua72bb47f">、<a href="https://github.com/alibaba/DataX/blob/master/sqlserverwriter/doc/sqlserverwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u795b34e5">PostgreSQL</p> </td><td> <p id="uf96a1dfe">√</p> </td><td> <p id="ua7aceca6">√</p> </td><td> <p id="uc669b359"><a href="https://github.com/alibaba/DataX/blob/master/postgresqlreader/doc/postgresqlreader.md" title="读">读</a></p> <p id="u6ddcac7b">、<a href="https://github.com/alibaba/DataX/blob/master/postgresqlwriter/doc/postgresqlwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u15656a50">DRDS</p> </td><td> <p id="u88c327ae">√</p> </td><td> <p id="uee270d11">√</p> </td><td> <p id="u8a798d36"><a href="https://github.com/alibaba/DataX/blob/master/drdsreader/doc/drdsreader.md" title="读">读</a></p> <p id="uc31286e0">、<a href="https://github.com/alibaba/DataX/blob/master/drdswriter/doc/drdswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u7fe8860e">Kingbase</p> </td><td> <p id="u8862a2dd">√</p> </td><td> <p id="u93736ad7">√</p> </td><td> <p id="uaa71e357"><a href="https://github.com/alibaba/DataX/blob/master/drdsreader/doc/drdsreader.md" title="读">读</a></p> <p id="ue15ce2ab">、<a href="https://github.com/alibaba/DataX/blob/master/drdswriter/doc/drdswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="ue05704ce">通用RDBMS(支持所有关系型数据库)</p> </td><td> <p id="u32655eaa">√</p> </td><td> <p id="u5ae5bd56">√</p> </td><td> <p id="u790a6429"><a href="https://github.com/alibaba/DataX/blob/master/rdbmsreader/doc/rdbmsreader.md" title="读">读</a></p> <p id="ufb577fc8">、<a href="https://github.com/alibaba/DataX/blob/master/rdbmswriter/doc/rdbmswriter.md" title="写">写</a></p> </td></tr><tr><td> <p id="u7d8e8495">阿里云数仓数据存储</p> </td><td> <p id="ud9a00d94">ODPS</p> </td><td> <p id="u617c387c">√</p> </td><td> <p id="ub30f9c71">√</p> </td><td> <p id="uc96a722f"><a href="https://github.com/alibaba/DataX/blob/master/odpsreader/doc/odpsreader.md" title="读">读</a></p> <p id="ubdee9f97">、<a href="https://github.com/alibaba/DataX/blob/master/odpswriter/doc/odpswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u1571d47b">ADB</p> </td><td></td><td> <p id="ue99ca762">√</p> </td><td> <p id="ubeef5486"><a href="https://github.com/alibaba/DataX/blob/master/adbmysqlwriter/doc/adbmysqlwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u88b65152">ADS</p> </td><td></td><td> <p id="u6bab7004">√</p> </td><td> <p id="ue10e1da4"><a href="https://github.com/alibaba/DataX/blob/master/adswriter/doc/adswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u1172eed0">OSS</p> </td><td> <p id="uf3f2a8e8">√</p> </td><td> <p id="u43cb02af">√</p> </td><td> <p id="u6880ed1f"><a href="https://github.com/alibaba/DataX/blob/master/ossreader/doc/ossreader.md" title="读">读</a></p> <p id="u94037d61">、<a href="https://github.com/alibaba/DataX/blob/master/osswriter/doc/osswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u74fe7527">OCS</p> </td><td></td><td> <p id="uf18f4648">√</p> </td><td> <p id="u84e3bc6e"><a href="https://github.com/alibaba/DataX/blob/master/ocswriter/doc/ocswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u924e3a3c">Hologres</p> </td><td></td><td> <p id="uae111078">√</p> </td><td> <p id="ubdb466b5"><a href="https://github.com/alibaba/DataX/blob/master/hologresjdbcwriter/doc/hologresjdbcwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u336ee5ac">AnalyticDB For PostgreSQL</p> </td><td></td><td> <p id="u0fcf676e">√</p> </td><td> <p id="u8bc1ed52">写</p> </td></tr><tr><td> <p id="uaffe46c7">阿里云中间件</p> </td><td> <p id="u5c59cb7c">datahub</p> </td><td> <p id="u6bea96eb">√</p> </td><td> <p id="u74abde94">√</p> </td><td> <p id="ua8bf4f6c">读 、写</p> </td></tr><tr><td></td><td> <p id="u53b9d030">SLS</p> </td><td> <p id="u6fbe28b9">√</p> </td><td> <p id="u7d0dfdff">√</p> </td><td> <p id="ue042ce81">读 、写</p> </td></tr><tr><td> <p id="u5bc6e96f">图数据库</p> </td><td> <p id="u32aca856">阿里云 GDB</p> </td><td> <p id="u4658ce45">√</p> </td><td> <p id="u9892bc90">√</p> </td><td> <p id="u02578679"><a href="https://github.com/alibaba/DataX/blob/master/gdbreader/doc/gdbreader.md" title="读">读</a></p> <p id="u822d11bf">、<a href="https://github.com/alibaba/DataX/blob/master/gdbwriter/doc/gdbwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u5d7eba4b">Neo4j</p> </td><td></td><td> <p id="u1e16be06">√</p> </td><td> <p id="u3a70972f"><a href="https://github.com/alibaba/DataX/blob/master/neo4jwriter/doc/neo4jwriter.md" title="写">写</a></p> </td></tr><tr><td> <p id="u8c3d0228">NoSQL数据存储</p> </td><td> <p id="u9f388a0b">OTS</p> </td><td> <p id="u0caac854">√</p> </td><td> <p id="u8749185b">√</p> </td><td> <p id="u0e49ab61"><a href="https://github.com/alibaba/DataX/blob/master/otsreader/doc/otsreader.md" title="读">读</a></p> <p id="ua6c8cc7f">、<a href="https://github.com/alibaba/DataX/blob/master/otswriter/doc/otswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="ud35e0ebc">Hbase0.94</p> </td><td> <p id="u16cfcb1f">√</p> </td><td> <p id="u476a9004">√</p> </td><td> <p id="ubce96418"><a href="https://github.com/alibaba/DataX/blob/master/hbase094xreader/doc/hbase094xreader.md" title="读">读</a></p> <p id="ud505015d">、<a href="https://github.com/alibaba/DataX/blob/master/hbase094xwriter/doc/hbase094xwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u624bbf7f">Hbase1.1</p> </td><td> <p id="u5ab20949">√</p> </td><td> <p id="u1aa46ff2">√</p> </td><td> <p id="uce22c050"><a href="https://github.com/alibaba/DataX/blob/master/hbase11xreader/doc/hbase11xreader.md" title="读">读</a></p> <p id="uda22c14a">、<a href="https://github.com/alibaba/DataX/blob/master/hbase11xwriter/doc/hbase11xwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u1d558223">Phoenix4.x</p> </td><td> <p id="u792753ce">√</p> </td><td> <p id="u91ddcc88">√</p> </td><td> <p id="udbd6f2d3"><a href="https://github.com/alibaba/DataX/blob/master/hbase11xsqlreader/doc/hbase11xsqlreader.md" title="读">读</a></p> <p id="ue0936e3b">、<a href="https://github.com/alibaba/DataX/blob/master/hbase11xsqlwriter/doc/hbase11xsqlwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="ua293c95b">Phoenix5.x</p> </td><td> <p id="uffc8027f">√</p> </td><td> <p id="ua092df5e">√</p> </td><td> <p id="u92d1a833"><a href="https://github.com/alibaba/DataX/blob/master/hbase20xsqlreader/doc/hbase20xsqlreader.md" title="读">读</a></p> <p id="uc45c26b1">、<a href="https://github.com/alibaba/DataX/blob/master/hbase20xsqlwriter/doc/hbase20xsqlwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u30b1ef17">MongoDB</p> </td><td> <p id="u1bd16f8d">√</p> </td><td> <p id="u7ad2dd45">√</p> </td><td> <p id="u325c140f"><a href="https://github.com/alibaba/DataX/blob/master/mongodbreader/doc/mongodbreader.md" title="读">读</a></p> <p id="u3777e7a4">、<a href="https://github.com/alibaba/DataX/blob/master/mongodbwriter/doc/mongodbwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="uce01c5b3">Cassandra</p> </td><td> <p id="ueab3ecc7">√</p> </td><td> <p id="ua7ad18f2">√</p> </td><td> <p id="u44f6fb80"><a href="https://github.com/alibaba/DataX/blob/master/cassandrareader/doc/cassandrareader.md" title="读">读</a></p> <p id="u18743e59">、<a href="https://github.com/alibaba/DataX/blob/master/cassandrawriter/doc/cassandrawriter.md" title="写">写</a></p> </td></tr><tr><td> <p id="u4b601b53">数仓数据存储</p> </td><td> <p id="u8c65ec22">StarRocks</p> </td><td> <p id="uc989a9fa">√</p> </td><td> <p id="ufeaef6d1">√</p> </td><td> <p id="u8f15d6d1">读 、<a href="https://github.com/alibaba/DataX/blob/master/starrockswriter/doc/starrockswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="uca1ab8d0">ApacheDoris</p> </td><td></td><td> <p id="ubfac6124">√</p> </td><td> <p id="uc36156e1"><a href="https://github.com/alibaba/DataX/blob/master/doriswriter/doc/doriswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u067a2244">ClickHouse</p> </td><td> <p id="u802bcbdc">√</p> </td><td> <p id="u556dda47">√</p> </td><td> <p id="ubb1ff6a6"><a href="https://github.com/alibaba/DataX/blob/master/clickhousereader/doc/clickhousereader.md" title="读">读</a></p> <p id="ue1907f48">、<a href="https://github.com/alibaba/DataX/blob/master/clickhousewriter/doc/clickhousewriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u6285771f">Databend</p> </td><td></td><td> <p id="uef292bae">√</p> </td><td> <p id="u504a967c"><a href="https://github.com/alibaba/DataX/blob/master/databendwriter/doc/databendwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u06322c36">Hive</p> </td><td> <p id="u412b2536">√</p> </td><td> <p id="u5b7b6522">√</p> </td><td> <p id="udf26657e"><a href="https://github.com/alibaba/DataX/blob/master/hdfsreader/doc/hdfsreader.md" title="读">读</a></p> <p id="u8e68a9fc">、<a href="https://github.com/alibaba/DataX/blob/master/hdfswriter/doc/hdfswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u646dd6af">kudu</p> </td><td></td><td> <p id="uba92a15b">√</p> </td><td> <p id="uaafdf159"><a href="https://github.com/alibaba/DataX/blob/master/hdfswriter/doc/hdfswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u032117e0">selectdb</p> </td><td></td><td> <p id="u56feb730">√</p> </td><td> <p id="u21067bdb"><a href="https://github.com/alibaba/DataX/blob/master/selectdbwriter/doc/selectdbwriter.md" title="写">写</a></p> </td></tr><tr><td> <p id="ub4fa010d">无结构化数据存储</p> </td><td> <p id="u4d7b2e6b">TxtFile</p> </td><td> <p id="uce7e530e">√</p> </td><td> <p id="ue79ad19d">√</p> </td><td> <p id="ud6e9739c"><a href="https://github.com/alibaba/DataX/blob/master/txtfilereader/doc/txtfilereader.md" title="读">读</a></p> <p id="u64a88b2f">、<a href="https://github.com/alibaba/DataX/blob/master/txtfilewriter/doc/txtfilewriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u4364caec">FTP</p> </td><td> <p id="ub14abc04">√</p> </td><td> <p id="uc8ca5c63">√</p> </td><td> <p id="uc8d1d6b3"><a href="https://github.com/alibaba/DataX/blob/master/ftpreader/doc/ftpreader.md" title="读">读</a></p> <p id="u128c9f7b">、<a href="https://github.com/alibaba/DataX/blob/master/ftpwriter/doc/ftpwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u0a7f3e43">HDFS</p> </td><td> <p id="u48d571de">√</p> </td><td> <p id="u8bf48a84">√</p> </td><td> <p id="ucc711ac3"><a href="https://github.com/alibaba/DataX/blob/master/hdfsreader/doc/hdfsreader.md" title="读">读</a></p> <p id="u55aec4e3">、<a href="https://github.com/alibaba/DataX/blob/master/hdfswriter/doc/hdfswriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u5a5c2dc6">Elasticsearch</p> </td><td></td><td> <p id="u52d23a13">√</p> </td><td> <p id="uda67b0f7"><a href="https://github.com/alibaba/DataX/blob/master/elasticsearchwriter/doc/elasticsearchwriter.md" title="写">写</a></p> </td></tr><tr><td> <p id="u4fc3e9f8">时间序列数据库</p> </td><td> <p id="udce17541">OpenTSDB</p> </td><td> <p id="ufdacd793">√</p> </td><td></td><td> <p id="uab2a4ab3"><a href="https://github.com/alibaba/DataX/blob/master/opentsdbreader/doc/opentsdbreader.md" title="读">读</a></p> </td></tr><tr><td></td><td> <p id="u94cbfcc2">TSDB</p> </td><td> <p id="ucb1fb4af">√</p> </td><td> <p id="uf2686a29">√</p> </td><td> <p id="u5c05bc0b"><a href="https://github.com/alibaba/DataX/blob/master/tsdbreader/doc/tsdbreader.md" title="读">读</a></p> <p id="u5b9390d7">、<a href="https://github.com/alibaba/DataX/blob/master/tsdbwriter/doc/tsdbhttpwriter.md" title="写">写</a></p> </td></tr><tr><td></td><td> <p id="u8cb31e97">TDengine</p> </td><td> <p id="uc39a4914">√</p> </td><td> <p id="u7761b250">√</p> </td><td> <p id="u2a73cc89"><a href="https://github.com/alibaba/DataX/blob/master/tdenginereader/doc/tdenginereader-CN.md" title="读">读</a></p> <p id="u3cbe2790">、<a href="https://github.com/alibaba/DataX/blob/master/tdenginewriter/doc/tdenginewriter-CN.md" title="写">写</a></p> </td></tr></tbody></table> 
<hr id="P4FYT"> 
<h2 id="H6FUd" style="background-color:transparent;"><span style="color:#956fe7;">二、配置样例</span></h2> 
<hr id="ZVo51"> 
<h3 id="pmRg1" style="background-color:transparent;"><span style="color:#4da8ee;">2.1 环境信息</span></h3> 
<hr id="S4Lks"> 
<p id="uc6333923">集群HDP版本信息如下：</p> 
<p id="ub00fd421"></p> 
<p class="img-center"><img alt="" height="500" id="u1242ec2f" src="https://images2.imgbox.com/c5/e4/syRKJfai_o.png" width="648"></p> 
<h3 id="cEzkm" style="background-color:transparent;"><span style="color:#4da8ee;">2.2 SQLServer数据同步到HDFS</span></h3> 
<hr id="LQ2VW"> 
<p id="u708dc0e7">site_traffic_inout.json 配置文件</p> 
<pre id="HM9Li"><code class="language-cs">[winner_hdp@hdp104 yd]$ cat site_traffic_inout.json 
{
  "job": {
    "content": [
      {
        "reader": {
          "name": "sqlserverreader",
          "parameter": {
            "username": "$IPVA_WSHOP_USER",
            "password": "$IPVA_WSHOP_PASSWD",
            "connection": [
              {
                "jdbcUrl": ["$IPVA_URL"],
                "querySql": [
                  "SELECT StoreID,StoreName,SiteKey,SiteName from IPVA_WConfig.dbo.View_Site_Traffic_InOut;"
                ]
              }
            ]
          }
        },
        "writer": {
          "name": "hdfswriter",
          "parameter": {
            "column": [
              {"name":"StoreID"   , "type":"string"},
              {"name":"StoreName" , "type":"string"},
              {"name":"SiteKey"  , "type":"string"},
              {"name":"SiteName", "type":"string"}
            ],
            "path": "/winner/hadoop/winipva/wshop/tmp/",    
            "defaultFS":"hdfs://winner",
            "encoding": "UTF-8",
            "fieldDelimiter": ",",
            "hadoopConfig":{
              "dfs.nameservices": "winner",
              "dfs.ha.namenodes.winner": "nn1,nn2",
              "dfs.namenode.rpc-address.winner.nn1": "hdp103:8020",
              "dfs.namenode.rpc-address.winner.nn2": "hdp104:8020",
              "dfs.client.failover.proxy.provider.winner": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"
            },
            "haveKerberos": true,
            "kerberosKeytabFilePath": "/etc/security/keytabs/winner_hdp.keytab",
            "kerberosPrincipal": "winner_hdp@WINNER.COM",
            "fileType": "text",
            "fileName": "000000",
            "writeMode": "nonConflict",
          }
        }
        
      }
    ],
    "setting": {
      "speed": {
        "channel": "5"
      },
      "errorLimit": {
        "record": 0
      }
    }
  }
}
</code></pre> 
<p id="u4f15a2d2">运行脚本</p> 
<pre id="fDh48"><code class="language-bash"># !/bin/bash
#
#                                                                                                                                                                                                                                                         
# 脚本功能: sqlServer 数据同步到 HDFS                                                                                         
# 作    者: kangll                                                                                            
# 创建时间: 2022-10-27                                                                                        
# 修改内容: 无                                                                                                                                                                                                                                                                                     
# 调度周期:                                                                                                   
# 脚本参数: 无                                                                                                
#                                                                                                             
set -x
set -e
## datatime
date=`date  +%Y%m%d`


## json config file path
json_src=/hadoop/datadir/windeploy/script/ETL/datax_json/
## datax path
data_py=/hadoop/software/datax/bin/datax.py
##  ipva Wshop_config database connection
IPVA_USER=sa
IPVA_PASSWD='123456'
IPVA_URL="jdbc:sqlserver://192.168.2.103:1433;DatabaseName=IPVA_WConfig"

###
Site_ReID_InOut_Func() {
     ## 执行数据同步
      python $data_py  ${json_src}site_reid_inout.json -p "-DIPVA_USER=${IPVA_USER} -DIPVA_PASSWD=${IPVA_PASSWD} -DIPVA_URL=${IPVA_URL}  -Ddate=${date}"
}
######################## main ###############################
main(){
     Site_ReID_InOut_Func 
}
#############################################################  
###   
main</code></pre> 
<p id="u545f8e67">同步成功</p> 
<p id="uaee94725"></p> 
<p class="img-center"><img alt="" height="275" id="fzhKK" src="https://images2.imgbox.com/bf/c5/rBiPcjrC_o.png" width="1200"></p> 
<h3 id="UNcxs" style="background-color:transparent;"><span style="color:#4da8ee;">2.3 参数说明</span></h3> 
<hr id="VttKJ"> 
<ul><li id="uad77bf8a"><strong>defaultFS</strong></li></ul> 
<p id="u0a3a8984">描述：Hadoop hdfs文件系统namenode节点地址。格式：hdfs://ip:端口；例如：hdfs://127.0.0.1:9000 必选：是 默认值：无</p> 
<ul><li id="u5d7e1f1a"><strong>fileType</strong></li></ul> 
<p id="uc055c82c">描述：文件的类型，目前只支持用户配置为"text"或"orc"。 text表示textfile文件格式 orc表示orcfile文件格式 必选：是 默认值：无</p> 
<ul><li id="u6dc03936"><strong>fileName</strong></li></ul> 
<p id="u2791843c">描述：HdfsWriter写入时的文件名，实际执行时会在该文件名后添加随机的后缀作为每个线程写入实际文件名。 必选：是 默认值：无</p> 
<ul><li id="uc7d851d6"><strong>column</strong></li></ul> 
<pre id="X29YC"><code class="language-javascript">描述：写入数据的字段，不支持对部分列写入。为与hive中表关联，需要指定表中所有字段名和字段类型，其中：
name指定字段名，type指定字段类型。 

用户可以指定Column字段信息，配置如下：

 "column":
          [
                     {
                         "name": "userName","type": "string"
                     },
                     {
                         "name": "age","type": "long"
                     }
          ]

必选：是 

默认值：无 </code></pre> 
<p id="u227a21cc"></p> 
<ul><li id="ubae01dd7"><strong>writeMode</strong></li></ul> 
<p id="ua60f9592">描述：hdfswriter写入前数据清理处理模式： append，写入前不做任何处理，DataX hdfswriter直接使用filename写入，并保证文件名不冲突。 nonConflict，如果目录下有fileName前缀的文件，直接报错。 必选：是 默认值：无</p> 
<ul><li id="ud2e7b09c"><strong>fieldDelimiter</strong></li></ul> 
<p id="u100af19d">描述：hdfswriter写入时的字段分隔符,需要用户保证与创建的Hive表的字段分隔符一致，否则无法在Hive表中查到数据 必选：是 默认值：无</p> 
<ul><li id="u6d9b89ec"><strong>compress</strong></li></ul> 
<p id="u474b8d8a">描述：hdfs文件压缩类型，默认不填写意味着没有压缩。其中： text类型文件支持压缩类型有gzip、bzip2; orc类型文件支持的压缩类型有NONE、SNAPPY（需要用户安装SnappyCodec）。 必选：否 默认值：无压缩</p> 
<ul><li id="uc259f466"><strong>hadoopConfig</strong></li></ul> 
<pre id="sLIkK"><code>描述：hadoopConfig里可以配置与Hadoop相关的一些高级参数，比如HA的配置。

 "hadoopConfig":{
         "dfs.nameservices": "testDfs",
         "dfs.ha.namenodes.testDfs": "namenode1,namenode2",
         "dfs.namenode.rpc-address.aliDfs.namenode1": "",
         "dfs.namenode.rpc-address.aliDfs.namenode2": "",
         "dfs.client.failover.proxy.provider.testDfs": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"
 }
</code></pre> 
<ul><li id="ub86ebef9"><strong>encoding</strong></li></ul> 
<p id="u09982cac">描述：写文件的编码配置。 必选：否 默认值：utf-8，慎重修改</p> 
<ul><li id="u3f62ae98"><strong>haveKerberos</strong></li></ul> 
<p id="uba5f6fc2">描述：是否有Kerberos认证，默认false 例如如果用户配置true，则配置项kerberosKeytabFilePath，kerberosPrincipal为必填。 必选：haveKerberos 为true必选 默认值：false</p> 
<ul><li id="u070dba87"><strong>kerberosKeytabFilePath</strong></li></ul> 
<p id="ucdac0416">描述：Kerberos认证 keytab文件路径，绝对路径 必选：否 默认值：无</p> 
<ul><li id="ueda15ed7"><strong>kerberosPrincipal</strong></li></ul> 
<p id="u14abf05b">描述：Kerberos认证Principal名，如xxxx/hadoopclient@xxx.xxx 必选：haveKerberos 为true必选 默认值：无</p> 
<pre id="NhgMs"><code>"haveKerberos": true,
"kerberosKeytabFilePath": "/etc/security/keytabs/winner_hdp.keytab",
"kerberosPrincipal": "winner_hdp@WINNER.COM",</code></pre> 
<p id="u7df71ec5"><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a99eb519acb33cecd26de8519a8ec0dd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于解决Cannot resolve com.microsoft.sqlserver:sqljdbc4:4.0报错问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3a7886d2b3367703bed33766652e29b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SQL-正则表达式和约束</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>