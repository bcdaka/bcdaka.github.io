<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言——扫雷小游戏 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5d691ae6ef887ea7bae9917309618df6/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C语言——扫雷小游戏">
  <meta property="og:description" content="扫雷小游戏：
游戏最终效果：
1.先写一下游戏开始的简单界面。
用一个函数来写一下
void menu() { printf(&#34; ---------------------------- \n&#34;); printf(&#34;| 1.play |\n&#34;); printf(&#34;| 0.exit |\n&#34;); printf(&#34; ---------------------------- \n&#34;); } 这里的功能（说明）：
输入 1 代表游戏开始；
输入 0 代表游戏结束，并退出页面；
既然写扫雷，那地图中的地雷应该是随机出现的，那我们可以用一个srand函数让它随机出现生成地雷。
srand((unsigned int)time(NULL)); //生成随机数的一个函数
具体用法可以百度一下，简单的概括就是生成一个随机数字。
int main() { srand((unsigned int)time(NULL)); int input = 0; //用与while函数循环的选择 do { //也就是刚开始说的界面选择开始或结束的选项 menu(); printf(&#34;请选择&gt;&#34;); scanf(&#34;%d&#34;, &amp;input); //这里的input就是游戏开始或结束的选择 switch (input) //再循环里面嵌套一个switch { case 1: // 当输入1的时候，那就进入游戏开始的逻辑 printf(&#34;游戏开始！\n&#34;); system(&#34;cls&#34;); // ：这里是系统函数，用于清空控制台的消息与文字 game(); // 这个是游戏开始的函数接口 break; case 0: // 当选择0的时候，即退出游戏退出循环，并程序结束。 printf(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-19T18:00:41+08:00">
    <meta property="article:modified_time" content="2024-06-19T18:00:41+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言——扫雷小游戏</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p><strong>        扫雷小游戏：</strong></p> 
<p><strong>游戏最终效果：</strong></p> 
<p><img alt="" height="294" src="https://images2.imgbox.com/6a/77/32I4gWSM_o.png" width="293"></p> 
<p><img alt="" height="377" src="https://images2.imgbox.com/b4/9d/DlbrlRDT_o.png" width="295"></p> 
<p></p> 
<p>1.先写一下游戏开始的简单界面。</p> 
<p>用一个函数来写一下</p> 
<pre><code class="language-cpp">void menu()
{
	printf(" ---------------------------- \n");
	printf("|           1.play           |\n");
	printf("|           0.exit           |\n");
	printf(" ---------------------------- \n");

}</code></pre> 
<p>这里的功能（说明）：</p> 
<p>        输入 1  代表游戏开始；</p> 
<p>        输入 0  代表游戏结束，并退出页面；</p> 
<p>既然写扫雷，那地图中的地雷应该是随机出现的，那我们可以用一个srand函数让它随机出现生成地雷。</p> 
<p>         <span style="color:#fe2c24;">   srand((unsigned int)time(NULL));   //生成随机数的一个函数</span></p> 
<p>具体用法可以百度一下，简单的概括就是生成一个随机数字。</p> 
<pre><code class="language-cpp">int main()
{
	srand((unsigned int)time(NULL));
	int input = 0;    //用与while函数循环的选择
	do {              //也就是刚开始说的界面选择开始或结束的选项
		menu();
		printf("请选择&gt;");        
		scanf("%d", &amp;input);   //这里的input就是游戏开始或结束的选择
		switch (input)         //再循环里面嵌套一个switch  
		{
		case 1:                 //   当输入1的时候，那就进入游戏开始的逻辑
			printf("游戏开始！\n");
			system("cls");      // ：这里是系统函数，用于清空控制台的消息与文字
			game();             //  这个是游戏开始的函数接口
			break;
		case 0:                 //   当选择0的时候，即退出游戏退出循环，并程序结束。
			printf("\n即将退出游戏!\n");
			break;
		default :              //因为只有输入0/1，否则就是输入错误，需要重新输入
			printf("您的选择有误，请重新输入:\n");
		}
	} while (input);
	return 0;
}</code></pre> 
<p>当我们选择play时，我们将进入游戏，之后就是游戏逻辑的代码了。</p> 
<pre><code class="language-cpp">#define ROW 9   //棋盘  行
#define COL 9	//棋盘  列
#define ROWS ROW+2	//判断-棋盘  行
#define COLS COL+2  //判断-棋盘  列
#define COUNT 10	//地雷个数</code></pre> 
<p>扫雷，我们需要创建两个二维数组，之后的操作与逻辑都是围绕这两个棋盘来写</p> 
<p>一个用来展示覆盖与否的画面（代码中的  show数组）：</p> 
<p>一个用来记载着地雷的位置与判断（代码中的mine数组） ：</p> 
<pre><code class="language-cpp">void game() 
{
	char mine[ROWS][COLS];    //注： ROWS COLS  为头文件define出来的行和列
	char show[ROWS][COLS];

	//初始化数据 
	Initboard(mine, ROWS, COLS, '0');
	Initboard(show, ROWS, COLS, '*');

	//棋盘打印
	Displayboard(show, ROW, COL);

	//布置雷
	Setmine(mine, ROW, COL);
	
	//排查雷

	Findmine(mine, show, ROW, COL);
	//Displayboard(show, ROW, COL);

}</code></pre> 
<p>     之后我们需要先把两个二维数组给初始化一下：</p> 
<p>这里我们写一个函数Initboard</p> 
<pre><code class="language-cpp">//初始化棋盘
void Initboard(char borad[ROWS][COLS], int rows, int cols,char set)
{
	int i = 0;
	for (i = 0; i &lt; rows; i++)
	{
		for (int j = 0; j &lt; cols; j++)
		{
			borad[i][j] = set;
		}
	}
}</code></pre> 
<p>我们将mine的二维数组都初始化为’0‘</p> 
<p>        将show二维数组都初始化为’*‘</p> 
<p>注：我们展示出来的一般都是show的二维数组<br>  </p> 
<p>所以我们需要写一个格式函数</p> 
<pre><code class="language-cpp">//打印棋盘   //并设置格式
void Displayboard(char borad[ROWS][COLS], int row, int col)
{
	printf("======扫雷游戏======\n");
	int i = 0;
	for (i = 0; i &lt;= row; i++)
	{
		printf("%d ", i);
	}
	printf("\n");

	for (int a = 1; a &lt;=row; a++)
	{	
		printf("%d ", a);
		for (int b = 1; b &lt;= col; b++)
		{
			Sleep(10);
			printf("%c ", borad[a][b]);
		}
		printf("\n");
	}
	printf("======扫雷游戏======\n");

}</code></pre> 
<p><img alt="" height="433" src="https://images2.imgbox.com/c3/10/mdmZZZ9l_o.png" width="479"></p> 
<p>展示出来就是这个样子。</p> 
<p>游戏页面的大概就展示出来了，接下来我们需要写一下游戏判断逻辑了</p> 
<p>首先我们需要埋雷，但雷的位置是随机的，所以我们需要用一下srand函数，把雷随机的放进mine二维数组中，就是随机生成一个坐标</p> 
<p>        注：mine二维数组中 “0”代表该位置是安全的坐标</p> 
<p>                                         “1”代表该位置是埋有地雷的坐标）</p> 
<pre><code class="language-cpp">//布置雷
void Setmine(char mine[ROWS][COLS], int row, int col)
{
	int count = COUNT;    //COUNT代表的雷的个数，可以自己设置
	while (count)
	{
		int x = rand() % row + 1;        //随机生成x坐标
		int y = rand() % col + 1;        //随机生成y坐标
		if (mine[x][y] =='0')    
		{
			mine[x][y] = '1';            //把mine二维数组的该位置改为1
			count--;
		}                                //代表着埋入地雷
	}
}</code></pre> 
<p>接下来就是输入坐标来排查雷的步骤了</p> 
<pre><code class="language-cpp">//排查雷 
void Findmine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col)
{
	int a = 0;
	int b= 0;
	int win = 0;
while(win&lt;row*col-COUNT){                     
			printf("请输入您的坐标：");
			scanf("%d", &amp;a);            //输入坐标x和y
			scanf("%d", &amp;b);
		if ((a &lt;= row + 1 &amp;&amp; a &gt; 0) &amp;&amp; (b &lt;= col + 1 &amp;&amp; b &gt; 0))   
		{        //这里需要用if来判断一下x和y的值是否大于坐标，不在这个范围就需要重新输入坐标
			if (mine[a][b] == '1')    //这里判断的是如果坐标刚好在雷的位置，游戏就结束了
			{
				system("cls");    //清空屏幕
				printf("很抱歉，您被炸死了。\n");
				Displayboard(mine, ROW, COL);       //当炸死后，这里在打印一下mine的棋盘
				Sleep(1000);                        //提示一下并答应雷的位置告诉玩家这里是雷
				break;            //游戏结束后这里需要break一下结束这一层的循环
			}
			else
			{	
				int count=Getminecount(mine,a,b);//Getminecount函数排查这个坐标周围有多少颗雷
				show[a][b] = count+'0';
				system("cls");

				Displayboard(show, ROW, COL);
				win++;
			}
		}
		else        //当不在取值范围内就需要重新输入一下  并输出一个坐标有误的提示
		{
			printf("您输入的坐标有误，请重新输入：\n ");
		}
			}

		if (win == row * col - COUNT)    当把雷的排完后，就获胜了！
		{
			printf("恭喜你，排雷成功。\n");
			Displayboard(show, ROW, COL);

		}
}
</code></pre> 
<p> 该函数用于统计坐标周围有多少颗雷。</p> 
<pre><code class="language-cpp">//统计周围雷的个数
int Getminecount(char mine[ROWS][COLS], int x, int y)
{
	return (mine[x - 1][y - 1] +
		mine[x][y - 1] +
		mine[x + 1][y - 1] +
		mine[x + 1][y] +
		mine[x + 1][y + 1] +
		mine[x][y + 1] +
		mine[x - 1][y + 1] +
		mine[x - 1][y] - 8 * '0');
}</code></pre> 
<p>下面是全代码： </p> 
<pre><code class="language-cpp">#define _CRT_SECURE_NO_WARNINGS 1
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;windows.h&gt;
#define ROW 9   //棋盘  行
#define COL 9	//棋盘  列
#define ROWS ROW+2	//判断-棋盘  行
#define COLS COL+2  //判断-棋盘  列

#define COUNT 10	//地雷个数

//初始化棋盘
void Initboard(char borad[ROWS][COLS], int rows, int cols,char set)
{
	int i = 0;
	for (i = 0; i &lt; rows; i++)
	{
		for (int j = 0; j &lt; cols; j++)
		{
			borad[i][j] = set;
		}
	}
}

//打印棋盘   //并设置格式
void Displayboard(char borad[ROWS][COLS], int row, int col)
{
	printf("======扫雷游戏======\n");
	int i = 0;
	for (i = 0; i &lt;= row; i++)
	{
		printf("%d ", i);
	}
	printf("\n");

	for (int a = 1; a &lt;=row; a++)
	{	
		printf("%d ", a);
		for (int b = 1; b &lt;= col; b++)
		{
			Sleep(10);
			printf("%c ", borad[a][b]);
		}
		printf("\n");
	}
	printf("======扫雷游戏======\n");

}


//布置雷
void Setmine(char mine[ROWS][COLS], int row, int col)
{
	int count = COUNT;
	while (count)
	{
		int x = rand() % row + 1;
		int y = rand() % col + 1;
		if (mine[x][y] =='0')
		{
			mine[x][y] = '1';
			count--;
		}
	}
}

//排查雷 
void Findmine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col)
{
	int a = 0;
	int b= 0;
	int win = 0;
while(win&lt;row*col-COUNT){
			printf("请输入您的坐标：");
			scanf("%d", &amp;a);
			scanf("%d", &amp;b);
		//	a = a / a * a;
		//	b = b / b * b;
		if ((a &lt;= row + 1 &amp;&amp; a &gt; 0) &amp;&amp; (b &lt;= col + 1 &amp;&amp; b &gt; 0))
		{
			if (mine[a][b] == '1')
			{
				system("cls");
				printf("很抱歉，您被炸死了。\n");
				Displayboard(mine, ROW, COL);
				Sleep(1000);
				break;
			}
			else
			{	
				int count=Getminecount(mine,a,b);
				show[a][b] = count+'0';
				system("cls");

				Displayboard(show, ROW, COL);
				win++;
			}
		}
		else
		{
			printf("您输入的坐标有误，请重新输入：\n ");
		}
			}
		if (win == row * col - COUNT)
		{
			printf("恭喜你，排雷成功。\n");
			Displayboard(show, ROW, COL);

		}
}

//统计周围雷的个数
int Getminecount(char mine[ROWS][COLS], int x, int y)
{
	return (mine[x - 1][y - 1] +
		mine[x][y - 1] +
		mine[x + 1][y - 1] +
		mine[x + 1][y] +
		mine[x + 1][y + 1] +
		mine[x][y + 1] +
		mine[x - 1][y + 1] +
		mine[x - 1][y] - 8 * '0');

}

void menu()
{
	printf(" ---------------------------- \n");
	printf("|           1.play           |\n");
	printf("|           0.exit           |\n");
	printf(" ---------------------------- \n");

}
void game() 
{
	char mine[ROWS][COLS];
	char show[ROWS][COLS];
	//初始化数据 
	Initboard(mine, ROWS, COLS, '0');
	Initboard(show, ROWS, COLS, '*');

	//棋盘打印
	//Displayboard(mine, ROW, COL);
	Displayboard(show, ROW, COL);

	//布置雷
	Setmine(mine, ROW, COL);
	

	//排查雷

	Findmine(mine, show, ROW, COL);
	//Displayboard(show, ROW, COL);

}
int main()
{
	srand((unsigned int)time(NULL));
	int input = 0;
	do {
		menu();
		printf("请选择&gt;");
		scanf("%d", &amp;input);
		switch (input)
		{
		case 1:
			printf("游戏开始！\n");
			Sleep(1000);
			system("cls");
			game();
			break;
		case 0:
			printf("\n即将退出游戏!\n");
			break;
		default :
			printf("您的选择有误，请重新输入:\n");
		}
	} while (input);
	return 0;
}</code></pre> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/089e031278245465caf7d1659f36a0e0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python tkinter(GUI编程)模块最完整教程（上）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49cd720631d22c29a119f12d5044da86/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】线性表之《无头单链表》超详细实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>