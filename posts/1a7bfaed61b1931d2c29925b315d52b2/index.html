<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>动态规划入门：斐波那契数列模型以及多状态（C&#43;&#43;） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1a7bfaed61b1931d2c29925b315d52b2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="动态规划入门：斐波那契数列模型以及多状态（C&#43;&#43;）">
  <meta property="og:description" content="斐波那契数列模型以及多状态 动态规划简述斐波那契数列模型1.第 N 个泰波那契数（简单）2.三步问题（简单）3.使⽤最⼩花费爬楼梯（简单）4.解码方法（中等） 简单多状态1.打家劫舍（中等）2.打家劫舍II（中等）3.粉刷房子（中等）4.删除并获得点数（中等）5.买卖股票的最佳时期含⼿续费（中等）6.买卖股票的最佳时机含冷冻期（中等）7.买卖股票的最佳时机III（困难）8.买卖股票的最佳时机IV（困难） 动态规划简述 动态规划(Dynamic programming，简称 DP)是一种解决多阶段决策问题的算法思想。它将问题分解为多个阶段，并通过保存中间结果来避免重复计算，从而提高效率。
动态规划的解题步骤一般分为以下几步：
思考状态表示，创建dp表(重点)分析出状态转移方程(重点)初始化确定填表顺序确定返回值 斐波那契数列模型 1.第 N 个泰波那契数（简单） 链接：第 N 个泰波那契数
题目描述 做题步骤 状态表示 面对动态规划问题，我们一般有两种状态表示：
以某一个位置为起点，……以某一个位置为终点，…… 我们一般优先考虑第1种表示，但如果第1种无法解决就考虑第2种。
状态转移方程
这个题目直接告诉了我们状态转移方程：dp[i] = dp[i - 1] &#43; dp[i - 2] &#43; dp[i - 3]
初始化
泰波那契数的第0、1、2个是特殊的，不满足状态转移方程，因此我们需要初始化这三个位置为0、1、1
填表顺序
保证填当前状态时，所需状态已经计算过，填表顺序很明显是从左往右
返回值
根据状态表示，假设要求的是第n个，返回的应该是dp[n]
代码实现 class Solution { public: int tribonacci(int n) { //对于第0、1、2单独处理 if(n == 0) return 0; if(n == 1 || n == 2) return 1; //dp[i]：第i个泰波那契数 vector&lt;int&gt; dp(n &#43; 1); dp[0] = 0; dp[1] = 1; dp[2] = 1; for(int i = 3; i &lt; n &#43; 1; i&#43;&#43;) { dp[i] = dp[i-1] &#43; dp[i-2] &#43; dp[i-3]; } return dp[n]; //空间复杂度：O(N) //时间复杂度：O(N) } }; //不知道大家有没有发现向后填表的过程其实只需要前置的3个状态 //其余的状态都是多余的，我们可以用有限的变量来保存这些状态，这样就实现了空间优化 //这种优化方式被称为“滚动数组” //经过优化原O(N)-&gt;O(1) O(N^2)-&gt;O(N) //但这并不是动态规划讲解的要点，所以我只会把两种优化情况的代码给出 // class Solution { // public: // int tribonacci(int n) // { // if(n == 0) // return 0; // if(n == 1 || n == 2) // return 1; // int t1 = 0; // int t2 = 1; // int t3 = 1; // int ret = 0; // for(int i = 3; i &lt; n &#43; 1; i&#43;&#43;) // { // ret = t1 &#43; t2 &#43; t3; // t1 = t2; // t2 = t3; // t3 = ret; // } // return ret; // } // }; 2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-11T16:13:54+08:00">
    <meta property="article:modified_time" content="2023-09-11T16:13:54+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">动态规划入门：斐波那契数列模型以及多状态（C&#43;&#43;）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>斐波那契数列模型以及多状态</h4> 
 <ul><li><ul><li><a href="#_3" rel="nofollow">动态规划简述</a></li><li><a href="#_18" rel="nofollow">斐波那契数列模型</a></li><li><ul><li><a href="#1_N__20" rel="nofollow">1.第 N 个泰波那契数（简单）</a></li><li><a href="#2_113" rel="nofollow">2.三步问题（简单）</a></li><li><a href="#3_172" rel="nofollow">3.使⽤最⼩花费爬楼梯（简单）</a></li><li><a href="#4_242" rel="nofollow">4.解码方法（中等）</a></li></ul> 
   </li><li><a href="#_309" rel="nofollow">简单多状态</a></li><li><ul><li><a href="#1_311" rel="nofollow">1.打家劫舍（中等）</a></li><li><a href="#2II_365" rel="nofollow">2.打家劫舍II（中等）</a></li><li><a href="#3_428" rel="nofollow">3.粉刷房子（中等）</a></li><li><a href="#4_484" rel="nofollow">4.删除并获得点数（中等）</a></li><li><a href="#5_575" rel="nofollow">5.买卖股票的最佳时期含⼿续费（中等）</a></li><li><a href="#6_631" rel="nofollow">6.买卖股票的最佳时机含冷冻期（中等）</a></li><li><a href="#7III_691" rel="nofollow">7.买卖股票的最佳时机III（困难）</a></li><li><a href="#8IV_757" rel="nofollow">8.买卖股票的最佳时机IV（困难）</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_3"></a>动态规划简述</h3> 
<p>    动态规划(Dynamic programming，简称 DP)是一种解决多阶段决策问题的算法思想。它将问题分解为多个阶段，并通过保存中间结果来避免重复计算，从而提高效率。<br> <br><br> 动态规划的解题步骤一般分为以下几步：</p> 
<ol><li><strong>思考状态表示，创建dp表(重点)</strong></li><li><strong>分析出状态转移方程(重点)</strong></li><li>初始化</li><li>确定填表顺序</li><li>确定返回值</li></ol> 
<br> 
<h3><a id="_18"></a>斐波那契数列模型</h3> 
<h4><a id="1_N__20"></a>1.第 N 个泰波那契数（简单）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/n-th-tribonacci-number/description/" rel="nofollow">第 N 个泰波那契数</a></p> 
<ul><li>题目描述</li></ul> 
<p><img src="https://images2.imgbox.com/86/e2/FoNcWJsG_o.png" alt="在这里插入图片描述"></p> 
<ul><li>做题步骤</li></ul> 
<ol><li>状态表示</li></ol> 
<blockquote> 
 <p>面对动态规划问题，我们一般有两种状态表示：</p> 
 <ol><li><strong>以某一个位置为起点，……</strong></li><li><strong>以某一个位置为终点，……</strong></li></ol> 
 <p>我们一般优先考虑第1种表示，但如果第1种无法解决就考虑第2种。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/42/ce/nmH2PU8A_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li> <p>状态转移方程<br> 这个题目直接告诉了我们状态转移方程：<strong>dp[i] = dp[i - 1] + dp[i - 2] + dp[i - 3]</strong></p> </li><li> <p>初始化<br> 泰波那契数的<strong>第0、1、2个是特殊的</strong>，不满足状态转移方程，因此我们需要<strong>初始化这三个位置为0、1、1</strong></p> </li><li> <p>填表顺序<br> 保证填当前状态时，所需状态已经计算过，<strong>填表顺序很明显是从左往右</strong></p> </li><li> <p>返回值<br> 根据状态表示，假设要求的是第n个，<strong>返回的应该是dp[n]</strong></p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">tribonacci</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//对于第0、1、2单独处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> 
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment">//dp[i]：第i个泰波那契数</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
           
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//空间复杂度：O(N)</span>
        <span class="token comment">//时间复杂度：O(N)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//不知道大家有没有发现向后填表的过程其实只需要前置的3个状态</span>
<span class="token comment">//其余的状态都是多余的，我们可以用有限的变量来保存这些状态，这样就实现了空间优化</span>
<span class="token comment">//这种优化方式被称为“滚动数组”</span>
<span class="token comment">//经过优化原O(N)-&gt;O(1) O(N^2)-&gt;O(N)</span>
<span class="token comment">//但这并不是动态规划讲解的要点，所以我只会把两种优化情况的代码给出</span>

<span class="token comment">// class Solution {<!-- --></span>
<span class="token comment">// public:</span>
<span class="token comment">//     int tribonacci(int n) </span>
<span class="token comment">//     {<!-- --></span>
<span class="token comment">//         if(n == 0) </span>
<span class="token comment">//             return 0;</span>
<span class="token comment">//         if(n == 1 || n == 2)</span>
<span class="token comment">//             return 1;</span>

<span class="token comment">//         int t1 = 0;</span>
<span class="token comment">//         int t2 = 1;</span>
<span class="token comment">//         int t3 = 1;</span>
<span class="token comment">//         int ret = 0;</span>
           
<span class="token comment">//         for(int i = 3; i &lt; n + 1; i++)</span>
<span class="token comment">//         {<!-- --></span>
<span class="token comment">//             ret = t1 + t2 + t3;</span>
<span class="token comment">//             t1 = t2;</span>
<span class="token comment">//             t2 = t3;</span>
<span class="token comment">//             t3 = ret;</span>
<span class="token comment">//         }</span>
<span class="token comment">//         return ret;</span>
<span class="token comment">//     }</span>
<span class="token comment">// };</span>
</code></pre> 
<br> 
<h4><a id="2_113"></a>2.三步问题（简单）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/three-steps-problem-lcci/" rel="nofollow">三步问题</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/9f/b4/4HyoUVM3_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> <img src="https://images2.imgbox.com/b2/3f/nxrYNKoH_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态转移方程<br> 到达i阶可以转换成先到达i - 3、i - 2、i - 1阶，三者相加得到结果，所以<strong>状态转移方程为：dp[i] = dp[i - 1] + dp[i - 2] + dp[i - 3]。</strong></p> </li><li> <p>初始化<br> 为了保证填表不越界，我们<strong>把到达1、2、3阶的方法初始化</strong>。</p> </li><li> <p>填表顺序<br> 保证填当前状态时，所需状态已经计算过，<strong>填表顺序从左往右</strong>。</p> </li><li> <p>返回值<br> 根据状态表示，假设要求的是n阶，<strong>返回的应该是dp[n]</strong></p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">waysToStep</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//1、2、3阶特殊处理</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>

        <span class="token comment">//dp[i]表示到达i阶的方法数</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//多开一个空间，可以让下标和层数对应</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> dp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">int</span> mod <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span>  <span class="token comment">//有可能超出，需要取模</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> mod <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> mod<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//时间复杂度：O(N)</span>
        <span class="token comment">//空间复杂度：O(N)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="3_172"></a>3.使⽤最⼩花费爬楼梯（简单）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/min-cost-climbing-stairs/" rel="nofollow">使⽤最⼩花费爬楼梯</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/63/06/NvAJ0FgX_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> 这个题目的思路和第2题很相似，要<strong>到达终点n阶，我们可以从n - 1阶走一步、n - 2阶走两步到终点，从中选择费用最低的一方(从当前阶离开需要支付离开费用)</strong>；至于到达n - 1、n - 2阶的最低费用，我们可以以n - 1、n - 2层为终点进行分析，依此类推。到达终点的过程需要到达每一层的最低费用，我们可以用一个dp表存储，<strong>dp[i]表示到达下标i台阶所需要的最低费用</strong>。</p> </li><li> <p>状态转移方程<br> 到达i阶的最低花费可以转换为min(到达i - 1阶的最低花费 + 走出这一阶的花费， 到达i - 2阶的最低花费 + 走出这一阶的花费)，所以<strong>状态转移方程为：dp[i] = min(dp[i - 1] + cost[i - 1], dp[i - 2] + cost[i - 2])。</strong></p> </li><li> <p>初始化<br> 由转移方程可知更新某个状态需要前置的两个状态，为了确保填表时不越界，<strong>单独处理走到0、1阶的最低花费</strong>。</p> </li><li> <p>填表顺序<br> 保证填当前状态时，所需状态已经计算过，<strong>填表顺序从左往右</strong>。</p> </li><li> <p>返回值<br> 根据状态表示，假设数组有n个元素(终点是n阶)，<strong>返回的应该是dp[n]</strong></p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">minCostClimbingStairs</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> cost<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>      
        <span class="token comment">//dp[i] 表示到这一层的最小花费</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> cost<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//一开始就可以在0或1阶，花费为0，vector默认给0，不用处理</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> cost<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> cost<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//空间复杂度：O(N)</span>
        <span class="token comment">//时间复杂度：O(N)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// //第二种写法：反着来，以某个位置为起点，……</span>
<span class="token comment">// class Solution {<!-- --></span>
<span class="token comment">// public:</span>
<span class="token comment">//     int minCostClimbingStairs(vector&lt;int&gt;&amp; cost) </span>
<span class="token comment">//     {      </span>
<span class="token comment">//         //dp[i]：这一层为起点，到终点的最低花费</span>
<span class="token comment">//         int n = cost.size();</span>
<span class="token comment">//         vector&lt;int&gt; dp(n + 1);</span>
<span class="token comment">//         dp[n] = 0;</span>
<span class="token comment">//         dp[n - 1] = cost[n - 1];</span>
<span class="token comment">//         for(int i = n - 2; i &gt;= 0; i--)</span>
<span class="token comment">//         {            </span>
<span class="token comment">//             dp[i] = min(dp[i + 1] + cost[i], dp[i + 2] + cost[i]);</span>
<span class="token comment">//         }</span>

<span class="token comment">//         return min(dp[0], dp[1]);</span>
<span class="token comment">//     }</span>
<span class="token comment">// };</span>
</code></pre> 
<br> 
<h4><a id="4_242"></a>4.解码方法（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/decode-ways/" rel="nofollow">解码方法</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/45/82/PRTvHdJZ_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> <img src="https://images2.imgbox.com/d3/a3/Dkr0XmiP_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态表示<br> 除去第一位，每个位置都有单独解码和联合解码两种方式，<strong>n位置的状态转移方程为：dp[n] = dp[n - 1]（单独解码成功）+ dp[n - 2]（联合解码成功）</strong></p> </li><li> <p>初始化<br> 依据状态转移方程，<strong>某位置状态需要前置的两个状态</strong>，为了避免越界，我们需要单独处理第1、2个位置，但观察上面的分析过程，可以发现第2个位置和其它位置一样也有两种解码可能，我们可以<strong>在dp表前面多加个虚拟节点并初始为1</strong>，这样就只需要处理第1个位置了。（看图看图）</p> </li></ol> 
<p><img src="https://images2.imgbox.com/e3/77/QTozFCQP_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li> <p>填表顺序<br> 保证填当前状态时，所需状态已经计算过，<strong>填表顺序从左往右</strong>。</p> </li><li> <p>返回值<br> 依据状态定义，假设序列长度为n，返回的应该是以n位置为结尾的解码可能数，即dp[n]。</p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">numDecodings</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//dp[i]表示以i位置为结尾的解码可能数</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//第一个位置就为0，最终结果已经是0</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//初始化虚拟节点和第1个位置</span>
        dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//单独解码</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token char">'0'</span><span class="token punctuation">)</span>                      
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            
            <span class="token comment">//联合解码（联合解码小于10说明存在前导0，无法联合解码）</span>
            <span class="token keyword">int</span> com <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>com <span class="token operator">&gt;=</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> com <span class="token operator">&lt;=</span> <span class="token number">26</span><span class="token punctuation">)</span>                       
                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token comment">//都失败的情况是'00'，最终结果已经是0，这里可不加</span>
            <span class="token comment">//两个连续的0，后面全都是0</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h3><a id="_309"></a>简单多状态</h3> 
<h4><a id="1_311"></a>1.打家劫舍（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/house-robber/description/" rel="nofollow">打家劫舍</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/8d/69/XGW6SWB9_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li>状态表示<br> 依据前面的做题经验，我们可以把<strong>状态表示为以i位置为结尾的最大偷窃金额</strong>，但<strong>每个位置有偷和不偷两种选择</strong>，所以可以把状态再进行细化：<strong>状态f表示以i位置为结尾并偷窃本位置的最大金额；状态g表示以i位置为结尾但不偷窃本位置的最大金额。</strong></li></ol> 
<p><img src="https://images2.imgbox.com/4c/bd/T3TilUn2_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li> <p>状态转移方程<br> 由前面的分析可知，要偷i位置(f)需要i - 1位置不偷(g)的最大金额，不偷i位置就选择i - 1位置偷和不偷两种选择中大的一方，所以<strong>状态转移方程为：<br>(1) f[i] = g[i - 1] + nums[ i ] (本位置可偷金额)；<br>(2) g[i] = max(g[i - 1], f[i - 1])</strong></p> </li><li> <p>初始化<br> 由状态转移方程可知当今状态需要前一个状态，为保证填表时不越界，<strong>单独处理第一个位置：f[0] = nums[0]，g[0] = 0</strong>。</p> </li><li> <p>填表顺序<br> 保证填当前状态时，所需状态已经计算过，<strong>填表顺序从左往右</strong>。</p> </li><li> <p>返回值<br> 把自己代入成小偷，相邻位置不能同时偷的情况下是需要进行选择的，但偷的过程中不知道后面房子的价值，只能走一步看一步，保证每一步都是最好的，偷到最后一定是最优结果。<strong>假设数组有n个元素，返回值为max(f[n - 1], g[n - 1])。</strong></p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//f[i]表示到底这个位置并偷窃的最大金额</span>
        <span class="token keyword">auto</span> g <span class="token operator">=</span> f<span class="token punctuation">;</span>  <span class="token comment">//g[i]表示到达这个位置不偷窃的最大金额</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//初始化f[0],g[0]默认0不用处理</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//空间复杂度：O(N)</span>
        <span class="token comment">//时间复杂度：O(N)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="2II_365"></a>2.打家劫舍II（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/house-robber-ii/description/" rel="nofollow">打家劫舍II</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/03/88/yxEW2hwx_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> 这个题和前一个题唯一的不同只有首尾成环这一个点，我们延用上个题目的状态表示：<strong>状态f表示以i位置为结尾并偷窃本位置的最大金额；状态g表示以i位置为结尾但不偷窃本位置的最大金额。</strong><br> 处理成环问题，最直接的思路就是拆解。<br> <img src="https://images2.imgbox.com/8c/90/fJYoDulu_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态转移方程<br> 和上一道题目一致，<strong>状态转移方程为：<br>(1) f[i] = g[i - 1] + nums[ i ] (本位置可偷金额)；<br>(2) g[i] = max(g[i - 1], f[i - 1])</strong></p> </li><li> <p>初始化<br> 和上一道题目一致。</p> </li><li> <p>填表顺序<br> <strong>从左往右。</strong></p> </li><li> <p>返回值<br> _rob函数表示指定区间的打家劫舍，返回值为：<br> <strong>max(nums[0] + _rob(nums, 2, n - 2), _rob(nums, 1, n - 1))</strong>。</p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">_rob</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span><span class="token keyword">int</span> right<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//区间不存在返回0</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&gt;</span> right<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//到这个屋子偷的最大金额</span>
        <span class="token keyword">auto</span> g <span class="token operator">=</span> f<span class="token punctuation">;</span> <span class="token comment">//到这个屋子不偷的最大金额</span>
        f<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">,</span>g<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> <span class="token function">rob</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">_rob</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_rob</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="3_428"></a>3.粉刷房子（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/JEj789/" rel="nofollow">粉刷房子</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/9b/06/xNGdj69L_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> 依据经验和题目要求，我们可以把状态定义为把第i号房子粉刷成j颜色的最小花费。<br> <img src="https://images2.imgbox.com/1c/35/djaLz42O_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态转移方程<br> 状态转移方程为(0是红色、1是蓝色、2是绿色)：<br> <strong>(1)dp[i][0] = min(dp[i - 1][1], dp[i - 1][2]) + cost[i][0]（花费）<br> (2)dp[i][1] = min(dp[i - 1][0], dp[i - 1][2]) + cost[i][1]<br> (3)dp[i][2] = min(dp[i - 1][0], dp[i - 1][1]) + cost[i][2]</strong></p> </li><li> <p>初始化<br> 为了保证填表不越界，我们要初始化第一行的值，但是那样太麻烦了，<strong>我们可以多开一行并初始化0，这样就不用单独处理第一行了</strong>。（注意和cost数组的下标对应关系）</p> </li><li> <p>填表顺序<br> <strong>从上往下，每一行从左往右。</strong></p> </li></ol> 
<p>5.返回值<br> 依据状态表示，假设最后的房子是i号，<strong>返回值为min({dp[n][0], dp[n][1], dp[n][2]})。</strong></p> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">minCost</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">&amp;</span> costs<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> costs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//dp[i][j]表示第i号房子粉刷成j颜色的最低花费</span>
        <span class="token comment">//其中0表示红色，1表示蓝色，2表示绿色</span>
        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//空间多开一行并初始化0，不用单独处理第一行</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> costs<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> costs<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> costs<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//时间复杂度：O(N)</span>
        <span class="token comment">//空间复杂度：O(N)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="4_484"></a>4.删除并获得点数（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/delete-and-earn/description/" rel="nofollow">删除并获得点数</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/e7/44/7PuBYs1m_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> <img src="https://images2.imgbox.com/25/61/5NM1Oded_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态转移方程<br> 这个题就是变形的“打家劫舍”，转移方程一致：<strong><br>(1) f[i] = g[i - 1] + v[ i ] (删除本位置可得点数)；<br>(2) g[i] = max(g[i - 1], f[i - 1])</strong></p> </li><li> <p>初始化<br> 数组转化完成后dp表不需要处理。</p> </li><li> <p>填表顺序<br> <strong>从左往右。</strong></p> </li><li> <p>返回值<br> 返回值为max(f[N - 1],g[N - 1])</p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">deleteAndEarn</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token comment">//创建数组进行映射</span>
        <span class="token comment">//题目中1 &lt;= nums[i] &lt;= 10000</span>
        <span class="token keyword">const</span> <span class="token keyword">int</span> N <span class="token operator">=</span> <span class="token number">10001</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> v<span class="token punctuation">[</span>N<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> val <span class="token operator">:</span> nums<span class="token punctuation">)</span>
            v<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">+=</span> val<span class="token punctuation">;</span>

        <span class="token comment">//“打家劫舍”</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//f[i]表示以i区域为结尾并且删除本区域的最大点数</span>
        <span class="token keyword">auto</span> g <span class="token operator">=</span> f<span class="token punctuation">;</span>  <span class="token comment">//g[i]表示以i区域为结尾但不删除本区域的最大点数</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>g<span class="token punctuation">[</span>N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//时间复杂度：O(N)</span>
        <span class="token comment">//空间复杂度：O(1)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">//上面的写法简洁一些，但无论数据量多少都会遍历10000次</span>
<span class="token comment">//可以记录数组的最大、最小值，来加快速度</span>
<span class="token comment">// class Solution {<!-- --></span>
<span class="token comment">// public:</span>
<span class="token comment">//     int deleteAndEarn(vector&lt;int&gt;&amp; nums)</span>
<span class="token comment">//     {<!-- --></span>
<span class="token comment">//         int n = nums.size();</span>
<span class="token comment">//         vector&lt;int&gt; v(10001);</span>
<span class="token comment">//         //先遍历一次</span>
<span class="token comment">//         int _max = nums[0];</span>
<span class="token comment">//         int _min = nums[0];</span>
<span class="token comment">//         for (int i = 0; i &lt; n; i++)</span>
<span class="token comment">//         {<!-- --></span>
<span class="token comment">//             v[nums[i]] += nums[i];</span>
<span class="token comment">//             _max = max(_max, nums[i]);</span>
<span class="token comment">//             _min = min(_min, nums[i]);</span>
<span class="token comment">//         }</span>

<span class="token comment">//         vector&lt;int&gt; f(10001);</span>
<span class="token comment">//         auto g = f;</span>
<span class="token comment">//         for (int i = _min; i &lt;= _max; i++)</span>
<span class="token comment">//         {<!-- --></span>
<span class="token comment">//             f[i] = g[i - 1] + v[i];</span>
<span class="token comment">//             g[i] = max(f[i - 1], g[i - 1]);</span>
<span class="token comment">//         }</span>
        
<span class="token comment">//         return max(f[_max],g[_max]);</span>
<span class="token comment">//     }</span>
<span class="token comment">// };</span>
</code></pre> 
<br> 
<h4><a id="5_575"></a>5.买卖股票的最佳时期含⼿续费（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/description/" rel="nofollow">买卖股票的最佳时期含⼿续费</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/a6/b9/A9BNTOg7_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li>状态表示<br> <img src="https://images2.imgbox.com/ab/24/dE0QnZCj_o.png" alt="在这里插入图片描述"></li></ol> 
<p><strong>dp[i][j]：第i天结束时处于j状态的最大利润。</strong></p> 
<ol start="3"><li> <p>状态转移方程，0表示结束有股票，1表示结束没有股票，fee是手续费，prices[i]表示第i天的股票价格<br> <strong>(1)dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] - prices[i])<br> (2)dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] + prices[i] - fee)</strong></p> </li><li> <p>初始化<br> 初始化第0天状态即可，<strong>dp[0][0] -= prices[0];</strong>。</p> </li><li> <p>填表顺序<br> <strong>从上到下。</strong></p> </li><li> <p>返回值<br> 返回值为：<strong>max(dp[n - 1][1], dp[n - 1][0])</strong>。</p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> prices<span class="token punctuation">,</span> <span class="token keyword">int</span> fee<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//dp[i][j]:第i天结束处于j状态的最大利润</span>
        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//这种解法买入还是卖出交手续费都一样(反正买入了一定会卖出)</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> fee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//时间复杂度：O(N)</span>
        <span class="token comment">//空间复杂度：O(N)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="6_631"></a>6.买卖股票的最佳时机含冷冻期（中等）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/" rel="nofollow">买卖股票的最佳时机含冷冻期</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/a7/ff/FI5JWnCF_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> <img src="https://images2.imgbox.com/f0/bf/ZK9Vaij7_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态转移方程<br> 0是买入（有股票）、1是可交易、2是冷冻，prices[i]表示第i天的股票价格，状态转移方程为：<br> <strong>(1)dp[i][0] = max(dp[i - 1][1] - prices[i], dp[i - 1][0])<br> (2)dp[i][1] = max(dp[i - 1][2], dp[i - 1][1])<br> (3)dp[i][2] = dp[i - 1][0] + prices[i]</strong></p> </li><li> <p>初始化<br> 当前天的三种状态需要前一天的状态，所以初始化dp表的第一行<br> dp[0][0]：想该天结束后处于买入状态，必须把股票买了，<strong>dp[0][0] = -prices[i]；</strong><br> dp[0][1]：什么都不干，<strong>dp[0][1] = 0；</strong><br> dp[0][2]：想该天结束处于冷冻，在同一天买入和卖出，<strong>dp[0][2] = 0；</strong></p> </li><li> <p>填表顺序<br> 从上到下。</p> </li><li> <p>返回值<br> 最大值应该手中没有股票，假设数组有n个元素，最大值为<strong>max(dp[n - 1][1], dp[n - 1][ 2 ])</strong>。</p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> prices<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//dp[i][j]：第i天结束后处于j状态时的最大利润</span>
        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//初始化</span>
        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="7III_691"></a>7.买卖股票的最佳时机III（困难）</h4> 
<p>链接：<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/" rel="nofollow">买卖股票的最佳时机III</a></p> 
<ul><li> <p>题目描述<br> <img src="https://images2.imgbox.com/40/a8/Y8cx9RM8_o.png" alt="在这里插入图片描述"></p> </li><li> <p>做题步骤</p> </li></ul> 
<ol><li> <p>状态表示<br> <img src="https://images2.imgbox.com/f5/2e/PHcQCUi3_o.png" alt="在这里插入图片描述"></p> </li><li> <p>状态转移方程<br> 由前面的分析可知，状态转移方程为：<br> <strong>(1)f[i][j] = max(f[i - 1][j], g[i - 1][j] - prices[i])<br> (2)if(j &gt;= 1) g[i][j] = max(g[i - 1][j], f[i - 1][j - 1] + prices[i])<br>   else g[i][j] = g[i - 1][j]</strong></p> </li><li> <p>初始化<br> 需要i = 0的状态，初始化第一行。<br> (1)处于第一行的时候<strong>只有f[0][0]和g[0][0]存在，f[0][0] = -prices[0]，g[0][0] = 0</strong>。<br> (2)为了避免不存在的状态干扰取max值，我们<strong>把不存在的状态统一初始化为 INT_MIN / 2</strong>。（INT_MIN会越界，尽可能小就行）</p> </li><li> <p>填表顺序<br> <strong>从上往下填每一列，从左往右填每一行。</strong></p> </li><li> <p>返回值<br> <strong>返回最后一行的最大值即可。</strong></p> </li></ol> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">//可能会越界,取INT_MIN的一半</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> INT_MIN <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//dp[i][j]表示在第i天结束后完成j次交易，处于""状态下的最大利润</span>
        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//买入</span>
        <span class="token keyword">auto</span> g <span class="token operator">=</span> f<span class="token punctuation">;</span>  <span class="token comment">//可交易</span>
        <span class="token comment">//初始化</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        g<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token comment">//j == 0的时候前置状态f[i - 1][j - 1]不存在</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>
                    g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>                                    
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>g<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<br> 
<h4><a id="8IV_757"></a>8.买卖股票的最佳时机IV（困难）</h4> 
<p><strong>这个题目的思考方式和第7题完全一致，大家可以先自己试着做一下</strong>。<br> 链接：<a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/" rel="nofollow">买卖股票的最佳时机IV</a></p> 
<ul><li>代码实现</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span> INF <span class="token operator">=</span> INT_MIN <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">maxProfit</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> prices<span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>           
        <span class="token keyword">int</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//n天最多完成n / 2次交易，k不能超过这个值</span>
        k <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//买入</span>
        <span class="token comment">//dp[i][j]表示在第i天结束后完成j次交易，处于""状态下的最大利润</span>
        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//卖出</span>
        <span class="token keyword">auto</span> g <span class="token operator">=</span> f<span class="token punctuation">;</span>
        <span class="token comment">//初始化(先买再说)</span>
        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        g<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>
                    g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>g<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>                                    
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> ret <span class="token operator">=</span> g<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//把利润最大的那个找出来</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            ret <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ret<span class="token punctuation">,</span> g<span class="token punctuation">[</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fccaab03f9973338d5a971b924ae63d3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决Tomcat异常:java.lang.IllegalStateException: 非法访问：此Web应用程序实例已停止。无法加载。为了调试以及终止导致非法访问的线程，将抛出以下堆栈跟踪。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dd8dc5964e8224c26b116132d681bfe2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Web Component -- 即将爆发的原生的 UI 组件化标准</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>