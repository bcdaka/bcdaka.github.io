<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL时间类型函数整理 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b8cb4b916997359f57bc39ae9e65f4e0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL时间类型函数整理">
  <meta property="og:description" content="文章目录 一、MySQL 日期函数、时间函数总结1、MySQL 获得当前日期==时间==函数1.1 获得当前日期&#43;时间（date &#43; time）函数：now()1.2 获得当前日期&#43;时间（date &#43; time）函数：sysdate() 2. 获得当前日期（date）函数：curdate()3. 获得当前时间（time）函数：curtime()4. 获得当前 UTC 日期时间函数：utc_date(), utc_time(), utc_timestamp() 二、MySQL 日期时间 Extract（选取） 函数1. 选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒2. MySQL Extract() 函数，可以上面实现类似的功能：3. MySQL dayof... 函数：dayofweek(), dayofmonth(), dayofyear()4. MySQL week... 函数：week(), weekofyear(), dayofweek(), weekday(), yearweek()5. MySQL 返回星期和月份名称函数：dayname(), monthname()6. MySQL last_day() 函数：返回月份中的最后一天。 三、MySQL 日期时间计算函数1. MySQL 为日期增加一个时间间隔：date_add()2. MySQL 为日期减去一个时间间隔：date_sub()3. MySQL 另类日期函数：period_add(P,N), period_diff(P1,P2)4. MySQL 日期、时间相减函数：datediff(date1,date2), timediff(time1,time2) 四、MySQL 日期转换函数、时间转换函数1. MySQL （时间、秒）转换函数：time_to_sec(time), sec_to_time(seconds)2. MySQL （日期、天数）转换函数：to_days(date), from_days(days)3. MySQL Str to Date （字符串转换为日期）函数：str_to_date(str, format)4.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-14T00:08:27+08:00">
    <meta property="article:modified_time" content="2024-01-14T00:08:27+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL时间类型函数整理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#MySQL__5" rel="nofollow">一、MySQL 日期函数、时间函数总结</a></li><li><ul><li><a href="#1MySQL__9" rel="nofollow">1、MySQL 获得当前日期==时间==函数</a></li><li><ul><li><a href="#11_date__timenow_10" rel="nofollow">1.1 获得当前日期+时间（date + time）函数：now()</a></li><li><a href="#12_date__timesysdate_22" rel="nofollow">1.2 获得当前日期+时间（date + time）函数：sysdate()</a></li></ul> 
   </li><li><a href="#2_datecurdate_48" rel="nofollow">2. 获得当前日期（date）函数：curdate()</a></li><li><a href="#3_timecurtime_58" rel="nofollow">3. 获得当前时间（time）函数：curtime()</a></li><li><a href="#4__UTC_utc_date_utc_time_utc_timestamp_70" rel="nofollow">4. 获得当前 UTC 日期时间函数：utc_date(), utc_time(), utc_timestamp()</a></li></ul> 
  </li><li><a href="#MySQL__Extract__83" rel="nofollow">二、MySQL 日期时间 Extract（选取） 函数</a></li><li><ul><li><a href="#1__84" rel="nofollow">1. 选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒</a></li><li><a href="#2_MySQL_Extract__100" rel="nofollow">2. MySQL Extract() 函数，可以上面实现类似的功能：</a></li><li><a href="#3_MySQL_dayof_dayofweek_dayofmonth_dayofyear_128" rel="nofollow">3. MySQL dayof... 函数：dayofweek(), dayofmonth(), dayofyear()</a></li><li><a href="#4_MySQL_week_week_weekofyear_dayofweek_weekday_yearweek_138" rel="nofollow">4. MySQL week... 函数：week(), weekofyear(), dayofweek(), weekday(), yearweek()</a></li><li><a href="#5_MySQL_dayname_monthname_157" rel="nofollow">5. MySQL 返回星期和月份名称函数：dayname(), monthname()</a></li><li><a href="#6_MySQL_last_day__165" rel="nofollow">6. MySQL last_day() 函数：返回月份中的最后一天。</a></li></ul> 
  </li><li><a href="#MySQL__181" rel="nofollow">三、MySQL 日期时间计算函数</a></li><li><ul><li><a href="#1_MySQL_date_add_182" rel="nofollow">1. MySQL 为日期增加一个时间间隔：date_add()</a></li><li><a href="#2_MySQL_date_sub_220" rel="nofollow">2. MySQL 为日期减去一个时间间隔：date_sub()</a></li><li><a href="#3_MySQL_period_addPN_period_diffP1P2_232" rel="nofollow">3. MySQL 另类日期函数：period_add(P,N), period_diff(P1,P2)</a></li><li><a href="#4_MySQL_datediffdate1date2_timedifftime1time2_257" rel="nofollow">4. MySQL 日期、时间相减函数：datediff(date1,date2), timediff(time1,time2)</a></li></ul> 
  </li><li><a href="#MySQL__270" rel="nofollow">四、MySQL 日期转换函数、时间转换函数</a></li><li><ul><li><a href="#1_MySQL_time_to_sectime_sec_to_timeseconds_271" rel="nofollow">1. MySQL （时间、秒）转换函数：time_to_sec(time), sec_to_time(seconds)</a></li><li><a href="#2_MySQL_to_daysdate_from_daysdays_276" rel="nofollow">2. MySQL （日期、天数）转换函数：to_days(date), from_days(days)</a></li><li><a href="#3_MySQL_Str_to_Date_str_to_datestr_format_283" rel="nofollow">3. MySQL Str to Date （字符串转换为日期）函数：str_to_date(str, format)</a></li><li><a href="#4_MySQL_DateTime_to_Strdate_formatdateformat_time_formattimeformat_292" rel="nofollow">4. MySQL Date/Time to Str（日期/时间转换为字符串）函数：date_format(date,format), time_format(time,format)</a></li><li><a href="#5_MySQL_get_format_324" rel="nofollow">5. MySQL 获得国家地区时间格式函数：get_format()</a></li><li><a href="#6_MySQL_makdedateyeardayofyear_maketimehourminutesecond_347" rel="nofollow">6. MySQL 拼凑日期、时间函数：makdedate(year,dayofyear), maketime(hour,minute,second)</a></li></ul> 
  </li><li><a href="#MySQL_Timestamp_353" rel="nofollow">五、MySQL 时间戳（Timestamp）函数</a></li><li><ul><li><a href="#1_MySQL_current_timestamp_current_timestamp_354" rel="nofollow">1. MySQL 获得当前时间戳函数：current_timestamp, current_timestamp()</a></li><li><a href="#2_MySQL_Unix__366" rel="nofollow">2. MySQL （Unix 时间戳、日期）转换函数：</a></li><li><a href="#3_MySQL_timestamp_383" rel="nofollow">3. MySQL 时间戳（timestamp）转换、增、减函数：</a></li></ul> 
  </li><li><a href="#MySQL_timezone_405" rel="nofollow">六、MySQL 时区（timezone）转换函数</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="MySQL__5"></a>一、MySQL 日期函数、时间函数总结</h2> 
<p>以下SQL Fiddle模拟器：<br> http://sqlfiddle.com/</p> 
<h3><a id="1MySQL__9"></a>1、MySQL 获得当前日期<mark>时间</mark>函数</h3> 
<h4><a id="11_date__timenow_10"></a>1.1 获得当前日期+时间（date + time）函数：now()</h4> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>now()
2024-01-13 13:07:39
</code></pre> 
<p>除了 now() 函数能获得当前的日期时间外，MySQL 中还有下面的函数：<br> <strong>current_timestamp();current_timestamp;localtime();localtime;localtimestamp();localtimestamp</strong><br> 这些日期时间函数，都等同于 now()。<br> 鉴于 now() 函数简短易记，建议总是使用 now() 来替代上面列出的函数。</p> 
<h4><a id="12_date__timesysdate_22"></a>1.2 获得当前日期+时间（date + time）函数：sysdate()</h4> 
<p>sysdate() 日期时间函数跟 now() 类似，不同之处在于：now() 在执行开始时值就得到了， sysdate() 在函数执行时动态得到值。看下面的例子就明白了：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+---------------------+----------+---------------------+
| now() | sleep(3) | now() |
+---------------------+----------+---------------------+
| 2024-01-13 13:38:14 | 0 | 2024-01-13 13:38:14 |
+---------------------+----------+---------------------+
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+---------------------+----------+---------------------+
| sysdate() | sleep(3) | sysdate() |
+---------------------+----------+---------------------+
| 2024-01-13 13:39:33 | 0 | 2024-01-13 13:39:36 |
+---------------------+----------+---------------------+
</code></pre> 
<p>可以看到，虽然中途 sleep 3 秒，但 now() 函数两次的时间值是相同的；sysdate() 函数两次得到的时间值相差 3 秒。<br> MySQL Manual 中是这样描述 sysdate() 的：Return the time at which the function executes。<br> sysdate() 日期时间函数，一般情况下很少用到。</p> 
<h3><a id="2_datecurdate_48"></a>2. 获得当前日期（date）函数：curdate()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>curdate()
2024-01-13
</code></pre> 
<p>其中，下面的两个日期函数等同于 curdate()：<br> current_date(),current_date</p> 
<h3><a id="3_timecurtime_58"></a>3. 获得当前时间（time）函数：curtime()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> curtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>curtime()
13:47:08
</code></pre> 
<p>其中，下面的两个时间函数等同于 curtime()：<br> current_time(),current_time</p> 
<h3><a id="4__UTC_utc_date_utc_time_utc_timestamp_70"></a>4. 获得当前 UTC 日期时间函数：utc_date(), utc_time(), utc_timestamp()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> utc_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> utc_date<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> utc_time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+---------------------+------------+------------+---------------------+
| utc_timestamp() | utc_date() | utc_time() | now() |
+---------------------+------------+------------+---------------------+
| 2024-01-13 13:49:24 | 2024-01-13 | 13:49:24 | 2024-01-13 13:49:24 |
+---------------------+------------+------------+---------------------+
</code></pre> 
<p>因为我国位于东八时区，所以本地时间 = UTC 时间 + 8 小时。UTC 时间在业务涉及多个国家和地区的时候，非常有用。</p> 
<h2><a id="MySQL__Extract__83"></a>二、MySQL 日期时间 Extract（选取） 函数</h2> 
<h3><a id="1__84"></a>1. 选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒</h3> 
<pre><code class="prism language-sql"><span class="token keyword">set</span> <span class="token variable">@dt</span> <span class="token operator">=</span> <span class="token string">'2008-09-10 07:15:30.123456'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-09-10</span>
<span class="token keyword">select</span> <span class="token keyword">time</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 07:15:30.123456</span>
<span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008</span>
<span class="token keyword">select</span> quarter<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 3</span>
<span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 9</span>
<span class="token keyword">select</span> week<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 36</span>
<span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 10</span>
<span class="token keyword">select</span> <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 7</span>
<span class="token keyword">select</span> <span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 15</span>
<span class="token keyword">select</span> <span class="token keyword">second</span><span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 30</span>
<span class="token keyword">select</span> microsecond<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 123456</span>
</code></pre> 
<h3><a id="2_MySQL_Extract__100"></a>2. MySQL Extract() 函数，可以上面实现类似的功能：</h3> 
<pre><code class="prism language-sql"><span class="token keyword">set</span> <span class="token variable">@dt</span> <span class="token operator">=</span> <span class="token string">'2008-09-10 07:15:30.123456'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">year</span> <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>quarter <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 3</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 9</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>week <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 36</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">day</span> <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 10</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">hour</span> <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 7</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">minute</span> <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 15</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">second</span> <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 30</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>microsecond <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 123456</span>

<span class="token keyword">select</span> extract<span class="token punctuation">(</span>year_month <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 200809</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>day_hour <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 1007</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>day_minute <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 100715</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>day_second <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 10071530</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>day_microsecond <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 10071530123456</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>hour_minute <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 715</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>hour_second <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 71530</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>hour_microsecond <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 71530123456</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>minute_second <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 1530</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>minute_microsecond <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 1530123456</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span>second_microsecond <span class="token keyword">from</span> <span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 30123456</span>
</code></pre> 
<p>MySQL Extract() 函数除了没有date(),time() 的功能外，其他功能一应具全。并且还具有选取‘day_microsecond’ 等功能。注意这里不是只选取 day 和 microsecond，而是从日期的 day 部分一直选取到 microsecond 部分。够强悍的吧！<br> MySQL Extract() 函数唯一不好的地方在于：你需要多敲几次键盘。</p> 
<h3><a id="3_MySQL_dayof_dayofweek_dayofmonth_dayofyear_128"></a>3. MySQL dayof… 函数：dayofweek(), dayofmonth(), dayofyear()</h3> 
<p>分别返回日期参数，在一周、一月、一年中的位置。</p> 
<pre><code class="prism language-sql"><span class="token keyword">set</span> <span class="token variable">@dt</span> <span class="token operator">=</span> <span class="token string">'2008-08-08'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> dayofweek<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 6</span>
<span class="token keyword">select</span> dayofmonth<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 8</span>
<span class="token keyword">select</span> dayofyear<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 221</span>
</code></pre> 
<p>日期 ‘2008-08-08’ 是一周中的第 6 天（1 = Sunday, 2 = Monday, …, 7 = Saturday）；一月中的第 8 天；一年中的第 221 天。</p> 
<h3><a id="4_MySQL_week_week_weekofyear_dayofweek_weekday_yearweek_138"></a>4. MySQL week… 函数：week(), weekofyear(), dayofweek(), weekday(), yearweek()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">set</span> <span class="token variable">@dt</span> <span class="token operator">=</span> <span class="token string">'2008-08-08'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> week<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 31</span>
<span class="token keyword">select</span> week<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 32</span>
<span class="token keyword">select</span> weekofyear<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 32</span>

<span class="token keyword">select</span> dayofweek<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 6</span>
<span class="token keyword">select</span> weekday<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 4</span>

<span class="token keyword">select</span> yearweek<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 200831</span>
</code></pre> 
<p>MySQL week() 函数，可以有两个参数，具体可看手册。<br> weekofyear() 和 week() 一样，都是计算“某天”是位于一年中的第几周。 weekofyear(@dt) 等价于 week(@dt,3)。<br> MySQL weekday() 函数和 dayofweek() 类似，都是返回“某天”在一周中的位置。不同点在于参考的标准，<br> weekday：(0 = Monday, 1 = Tuesday, …, 6 = Sunday)；<br> dayofweek：（1 = Sunday, 2 = Monday, …, 7 = Saturday）<br> MySQL yearweek() 函数，返回 year(2008) + week 位置(31)。</p> 
<h3><a id="5_MySQL_dayname_monthname_157"></a>5. MySQL 返回星期和月份名称函数：dayname(), monthname()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">set</span> <span class="token variable">@dt</span> <span class="token operator">=</span> <span class="token string">'2008-08-08'</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> dayname<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- Friday</span>
<span class="token keyword">select</span> monthname<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- August</span>
</code></pre> 
<p>思考，如何返回中文的名称呢？</p> 
<h3><a id="6_MySQL_last_day__165"></a>6. MySQL last_day() 函数：返回月份中的最后一天。</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> last_day<span class="token punctuation">(</span><span class="token string">'2008-02-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-02-29</span>
<span class="token keyword">select</span> last_day<span class="token punctuation">(</span><span class="token string">'2008-08-08'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-31</span>
</code></pre> 
<p>MySQL last_day() 函数非常有用，比如我想得到当前月份中有多少天，可以这样来计算：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">(</span>last_day<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> days<span class="token punctuation">;</span>
</code></pre> 
<pre><code>+---------------------+------+
| now() | days |
+---------------------+------+
| 2024-01-13 14:03:54 | 31 |
+---------------------+------+
</code></pre> 
<h2><a id="MySQL__181"></a>三、MySQL 日期时间计算函数</h2> 
<h3><a id="1_MySQL_date_add_182"></a>1. MySQL 为日期增加一个时间间隔：date_add()</h3> 
<p>set @dt = now();</p> 
<p>select date_add(@dt, interval 1 day); – add 1 day<br> select date_add(@dt, interval 1 hour); – add 1 hour<br> select date_add(@dt, interval 1 minute); – …<br> select date_add(@dt, interval 1 second);<br> select date_add(@dt, interval 1 microsecond);<br> select date_add(@dt, interval 1 week);<br> select date_add(@dt, interval 1 month);<br> select date_add(@dt, interval 1 quarter);<br> select date_add(@dt, interval 1 year);</p> 
<p>select date_add(@dt, interval -1 day); – sub 1 day</p> 
<p>MySQL adddate(), addtime()函数，可以用 date_add() 来替代。下面是 date_add() 实现 addtime() 功能示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">set</span> <span class="token variable">@dt</span> <span class="token operator">=</span> <span class="token string">'2008-08-09 12:12:33'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'01:15:30'</span> hour_second<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+------------------------------------------------+
| date_add(@dt, interval '01:15:30' hour_second) |
+------------------------------------------------+
| 2008-08-09 13:28:03 |
+------------------------------------------------+
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token variable">@dt</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1 01:15:30'</span> day_second<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+-------------------------------------------------+
| date_add(@dt, interval '1 01:15:30' day_second) |
+-------------------------------------------------+
| 2008-08-10 13:28:03 |
+-------------------------------------------------+
</code></pre> 
<p>date_add() 函数，分别为 @dt 增加了“1小时 15分 30秒” 和 “1天 1小时 15分 30秒”。建议：总是使用 date_add() 日期时间函数来替代 adddate(), addtime()。</p> 
<h3><a id="2_MySQL_date_sub_220"></a>2. MySQL 为日期减去一个时间间隔：date_sub()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_sub<span class="token punctuation">(</span><span class="token string">'1998-01-01 00:00:00'</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token string">'1 1:1:1'</span> day_second<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+----------------------------------------------------------------+
| date_sub('1998-01-01 00:00:00', interval '1 1:1:1' day_second) |
+----------------------------------------------------------------+
| 1997-12-30 22:58:59 |
+----------------------------------------------------------------+
</code></pre> 
<p>MySQL date_sub() 日期时间函数 和 date_add() 用法一致，不再赘述。另外，MySQL 中还有两个函数 subdate(), subtime()，建议，用 date_sub() 来替代。</p> 
<h3><a id="3_MySQL_period_addPN_period_diffP1P2_232"></a>3. MySQL 另类日期函数：period_add(P,N), period_diff(P1,P2)</h3> 
<p>函数参数“P” 的格式为“YYYYMM” 或者 “YYMM”，第二个参数“N” 表示增加或减去 N month（月）。<br> MySQL period_add(P,N)：日期加/减去N月。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> period_add<span class="token punctuation">(</span><span class="token number">200808</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> period_add<span class="token punctuation">(</span><span class="token number">20080808</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code>+----------------------+-------------------------+
| period_add(200808,2) | period_add(20080808,-2) |
+----------------------+-------------------------+
| 200810 | 20080806 |
+----------------------+-------------------------+
</code></pre> 
<p>MySQL period_diff(P1,P2)：日期 P1-P2，返回 N 个月。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> period_diff<span class="token punctuation">(</span><span class="token number">200808</span><span class="token punctuation">,</span> <span class="token number">200801</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+-----------------------------+
| period_diff(200808, 200801) |
+-----------------------------+
| 7 |
+-----------------------------+
</code></pre> 
<p>在 MySQL 中，这两个日期函数，一般情况下很少用到。</p> 
<h3><a id="4_MySQL_datediffdate1date2_timedifftime1time2_257"></a>4. MySQL 日期、时间相减函数：datediff(date1,date2), timediff(time1,time2)</h3> 
<p>MySQL datediff(date1,date2)：两个日期相减 date1 - date2，返回天数。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2008-08-08'</span><span class="token punctuation">,</span> <span class="token string">'2008-08-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 7</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2008-08-01'</span><span class="token punctuation">,</span> <span class="token string">'2008-08-08'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- -7</span>
</code></pre> 
<p>MySQL timediff(time1,time2)：两个日期相减 time1 - time2，返回 time 差值。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> timediff<span class="token punctuation">(</span><span class="token string">'2008-08-08 08:08:08'</span><span class="token punctuation">,</span> <span class="token string">'2008-08-08 00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 08:08:08</span>
<span class="token keyword">select</span> timediff<span class="token punctuation">(</span><span class="token string">'08:08:08'</span><span class="token punctuation">,</span> <span class="token string">'00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 08:08:08</span>
</code></pre> 
<p>注意：timediff(time1,time2) 函数的两个参数类型必须相同。</p> 
<h2><a id="MySQL__270"></a>四、MySQL 日期转换函数、时间转换函数</h2> 
<h3><a id="1_MySQL_time_to_sectime_sec_to_timeseconds_271"></a>1. MySQL （时间、秒）转换函数：time_to_sec(time), sec_to_time(seconds)</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> time_to_sec<span class="token punctuation">(</span><span class="token string">'01:00:05'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 3605</span>
<span class="token keyword">select</span> sec_to_time<span class="token punctuation">(</span><span class="token number">3605</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '01:00:05'</span>
</code></pre> 
<h3><a id="2_MySQL_to_daysdate_from_daysdays_276"></a>2. MySQL （日期、天数）转换函数：to_days(date), from_days(days)</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> to_days<span class="token punctuation">(</span><span class="token string">'0000-00-00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 0</span>
<span class="token keyword">select</span> to_days<span class="token punctuation">(</span><span class="token string">'2008-08-08'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 733627</span>
<span class="token keyword">select</span> from_days<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '0000-00-00'</span>
<span class="token keyword">select</span> from_days<span class="token punctuation">(</span><span class="token number">733627</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2008-08-08'</span>
</code></pre> 
<h3><a id="3_MySQL_Str_to_Date_str_to_datestr_format_283"></a>3. MySQL Str to Date （字符串转换为日期）函数：str_to_date(str, format)</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'08/09/2008'</span><span class="token punctuation">,</span> <span class="token string">'%m/%d/%Y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-09</span>
<span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'08/09/08'</span> <span class="token punctuation">,</span> <span class="token string">'%m/%d/%y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-09</span>
<span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'08.09.2008'</span><span class="token punctuation">,</span> <span class="token string">'%m.%d.%Y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-09</span>
<span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'08:09:30'</span><span class="token punctuation">,</span> <span class="token string">'%h:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 08:09:30</span>
<span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'08.09.2008 08:09:30'</span><span class="token punctuation">,</span> <span class="token string">'%m.%d.%Y %h:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-09 08:09:30</span>
</code></pre> 
<p>可以看到，str_to_date(str,format) 转换函数，可以把一些杂乱无章的字符串转换为日期格式。另外，它也可以转换为时间。“format” 可以参看 MySQL 手册。</p> 
<h3><a id="4_MySQL_DateTime_to_Strdate_formatdateformat_time_formattimeformat_292"></a>4. MySQL Date/Time to Str（日期/时间转换为字符串）函数：date_format(date,format), time_format(time,format)</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_format<span class="token punctuation">(</span><span class="token string">'2008-08-08 22:23:00'</span><span class="token punctuation">,</span> <span class="token string">'%W %M %Y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+------------------------------------------------+
| date_format('2008-08-08 22:23:00', '%W %M %Y') |
+------------------------------------------------+
| Friday August 2008 |
+------------------------------------------------+
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_format<span class="token punctuation">(</span><span class="token string">'2008-08-08 22:23:01'</span><span class="token punctuation">,</span> <span class="token string">'%Y%m%d%H%i%s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+----------------------------------------------------+
| date_format('2008-08-08 22:23:01', '%Y%m%d%H%i%s') |
+----------------------------------------------------+
| 20080808222301 |
+----------------------------------------------------+
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> time_format<span class="token punctuation">(</span><span class="token string">'22:23:01'</span><span class="token punctuation">,</span> <span class="token string">'%H.%i.%s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+-------------------------------------+
| time_format('22:23:01', '%H.%i.%s') |
+-------------------------------------+
| 22.23.01 |
+-------------------------------------+
</code></pre> 
<p>MySQL 日期、时间转换函数：date_format(date,format), time_format(time,format) 能够把一个日期/时间转换成各种各样的字符串格式。它是 str_to_date(str,format) 函数的 一个逆转换。</p> 
<h3><a id="5_MySQL_get_format_324"></a>5. MySQL 获得国家地区时间格式函数：get_format()</h3> 
<p>MySQL get_format() 语法：<br> get_format(date|time|datetime, ‘eur’|‘usa’|‘jis’|‘iso’|‘internal’</p> 
<p>MySQL get_format() 用法的全部示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'usa'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%m.%d.%Y'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'jis'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y-%m-%d'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'iso'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y-%m-%d'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'eur'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%d.%m.%Y'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'internal'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y%m%d'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">datetime</span><span class="token punctuation">,</span><span class="token string">'usa'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y-%m-%d %H.%i.%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">datetime</span><span class="token punctuation">,</span><span class="token string">'jis'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y-%m-%d %H:%i:%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">datetime</span><span class="token punctuation">,</span><span class="token string">'iso'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y-%m-%d %H:%i:%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">datetime</span><span class="token punctuation">,</span><span class="token string">'eur'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y-%m-%d %H.%i.%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">datetime</span><span class="token punctuation">,</span><span class="token string">'internal'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%Y%m%d%H%i%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">'usa'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%h:%i:%s %p'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">'jis'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%H:%i:%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">'iso'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%H:%i:%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">'eur'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%H.%i.%s'</span>
<span class="token keyword">select</span> get_format<span class="token punctuation">(</span><span class="token keyword">time</span><span class="token punctuation">,</span><span class="token string">'internal'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">-- '%H%i%s'</span>
</code></pre> 
<p>MySQL get_format() 函数在实际中用到机会的比较少。</p> 
<h3><a id="6_MySQL_makdedateyeardayofyear_maketimehourminutesecond_347"></a>6. MySQL 拼凑日期、时间函数：makdedate(year,dayofyear), maketime(hour,minute,second)</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> makedate<span class="token punctuation">(</span><span class="token number">2001</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2001-01-31'</span>
<span class="token keyword">select</span> makedate<span class="token punctuation">(</span><span class="token number">2001</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2001-02-01'</span>
<span class="token keyword">select</span> maketime<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '12:15:30'</span>
</code></pre> 
<h2><a id="MySQL_Timestamp_353"></a>五、MySQL 时间戳（Timestamp）函数</h2> 
<h3><a id="1_MySQL_current_timestamp_current_timestamp_354"></a>1. MySQL 获得当前时间戳函数：current_timestamp, current_timestamp()</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>+---------------------+---------------------+
| current_timestamp | current_timestamp() |
+---------------------+---------------------+
| 2008-08-09 23:22:24 | 2008-08-09 23:22:24 |
+---------------------+---------------------+
</code></pre> 
<h3><a id="2_MySQL_Unix__366"></a>2. MySQL （Unix 时间戳、日期）转换函数：</h3> 
<p>unix_timestamp(),<br> unix_timestamp(date),<br> from_unixtime(unix_timestamp),<br> from_unixtime(unix_timestamp,format)<br> 下面是示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 1218290027</span>
<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2008-08-08'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 1218124800</span>
<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2008-08-08 12:30:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 1218169800</span>

<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1218290027</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2008-08-09 21:53:47'</span>
<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1218124800</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2008-08-08 00:00:00'</span>
<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1218169800</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2008-08-08 12:30:00'</span>

<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1218169800</span><span class="token punctuation">,</span> <span class="token string">'%Y %D %M %h:%i:%s %x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- '2008 8th August 12:30:00 2008'</span>
</code></pre> 
<h3><a id="3_MySQL_timestamp_383"></a>3. MySQL 时间戳（timestamp）转换、增、减函数：</h3> 
<p>timestamp(date) – date to timestamp<br> timestamp(dt,time) – dt + time<br> timestampadd(unit,interval,datetime_expr) –<br> timestampdiff(unit,datetime_expr1,datetime_expr2) –</p> 
<p>请看示例部分：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">timestamp</span><span class="token punctuation">(</span><span class="token string">'2008-08-08'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-08 00:00:00</span>
<span class="token keyword">select</span> <span class="token keyword">timestamp</span><span class="token punctuation">(</span><span class="token string">'2008-08-08 08:00:00'</span><span class="token punctuation">,</span> <span class="token string">'01:01:01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-08 09:01:01</span>
<span class="token keyword">select</span> <span class="token keyword">timestamp</span><span class="token punctuation">(</span><span class="token string">'2008-08-08 08:00:00'</span><span class="token punctuation">,</span> <span class="token string">'10 01:01:01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-18 09:01:01</span>
<span class="token keyword">select</span> timestampadd<span class="token punctuation">(</span><span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2008-08-08 08:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-09 08:00:00</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token string">'2008-08-08 08:00:00'</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">1</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-09 08:00:00</span>
</code></pre> 
<p>MySQL timestampadd() 函数类似于 date_add()。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">year</span><span class="token punctuation">,</span><span class="token string">'2002-05-01'</span><span class="token punctuation">,</span><span class="token string">'2001-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- -1</span>
<span class="token keyword">select</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">day</span> <span class="token punctuation">,</span><span class="token string">'2002-05-01'</span><span class="token punctuation">,</span><span class="token string">'2001-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- -485</span>
<span class="token keyword">select</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">hour</span><span class="token punctuation">,</span><span class="token string">'2008-08-08 12:00:00'</span><span class="token punctuation">,</span><span class="token string">'2008-08-08 00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- -12</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2008-08-08 12:00:00'</span><span class="token punctuation">,</span> <span class="token string">'2008-08-01 00:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 7</span>
</code></pre> 
<p>MySQL timestampdiff() 函数就比 datediff() 功能强多了，datediff() 只能计算两个日期（date）之间相差的天数。</p> 
<h2><a id="MySQL_timezone_405"></a>六、MySQL 时区（timezone）转换函数</h2> 
<p>convert_tz(dt,from_tz,to_tz)</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> convert_tz<span class="token punctuation">(</span><span class="token string">'2008-08-08 12:00:00'</span><span class="token punctuation">,</span> <span class="token string">'+08:00'</span><span class="token punctuation">,</span> <span class="token string">'+00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-08 04:00:00</span>
</code></pre> 
<p>时区转换也可以通过 date_add, date_sub, timestampadd 来实现。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token string">'2008-08-08 12:00:00'</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token operator">-</span><span class="token number">8</span> <span class="token keyword">hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-08 04:00:00</span>
<span class="token keyword">select</span> date_sub<span class="token punctuation">(</span><span class="token string">'2008-08-08 12:00:00'</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">8</span> <span class="token keyword">hour</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-08 04:00:00</span>
<span class="token keyword">select</span> timestampadd<span class="token punctuation">(</span><span class="token keyword">hour</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">'2008-08-08 12:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2008-08-08 04:00:00</span>
</code></pre> 
<p>​</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c48d7a1a125d1fe1f7e9bc6929ed929d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">毕业设计-基于深度学习的无人驾驶目标检测算法系统 YOLO python 人工智能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f40d7086009bef58e6822afe8b5d13e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">android studio——设计简单微信界面超详细教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>