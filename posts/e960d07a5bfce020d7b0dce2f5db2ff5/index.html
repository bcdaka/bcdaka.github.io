<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C#】图形图像编程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e960d07a5bfce020d7b0dce2f5db2ff5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C#】图形图像编程">
  <meta property="og:description" content="实验目标和要求： 掌握C#图形绘制基本概念；掌握C#字体处理；能进行C#图形图像综合设计。 运行效果如下所示：
1.功能说明与核心代码 使用panel为画板，完成以下设计内容：
使用pen绘制基础图形；使用LinearGradientBrush实现渐变色字体；使用GraphicsPath实现艺术字，部分核心代码如下所示； GraphicsPath gp = new GraphicsPath(FillMode.Winding); gp.AddString( &#34;字体轮廓&#34;,new FontFamily(&#34;方正舒体&#34;),(int)FontStyle.Regular, 80,new PointF(10, 20),new StringFormat()); Brush brush = XXXXXXXXXXXXXXXXXXXXXX; XXX．DrawPath(Pens.Green, gp); XXX．FillPath(brush, gp); 实现： 1.在vs中开一个c#的窗体应用：
2 .在设计界面中拉取两个button，一个textbox（用于输出自己想输出的内容（艺术字））以及一个panel（输出在panel上显示）
3.代码
（1）button1：
private void button1_Click(object sender, EventArgs e) { drawBasicShapes = true; drawArtText = false; DrawBasicShapes(); panel1.Invalidate(); // 触发重绘 } （2）button2:
private void button2_Click(object sender, EventArgs e) { drawBasicShapes = false; drawArtText = true; DrawArtText(); panel1.Invalidate(); // 触发重绘 } (3)button1调用的函数DrawBasicShapes()：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-15T21:32:58+08:00">
    <meta property="article:modified_time" content="2024-06-15T21:32:58+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C#】图形图像编程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 style="margin-left:.0001pt;text-align:justify;"><strong><strong>实验目标和要求：</strong></strong></h4> 
<ol><li style="text-align:justify;">掌握C#图形绘制基本概念；</li><li style="text-align:justify;">掌握C#字体处理；</li><li style="text-align:justify;">能进行C#图形图像综合设计。</li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">运行效果如下所示：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="200" src="https://images2.imgbox.com/1b/be/C6fle0pO_o.png" width="357"></p> 
<h5 style="margin-left:.0001pt;text-align:left;">1.功能说明与核心代码</h5> 
<p style="margin-left:.0001pt;text-align:justify;">使用panel为画板，完成以下设计内容：</p> 
<ol><li>使用pen绘制基础图形；</li><li>使用LinearGradientBrush实现渐变色字体；</li><li>使用GraphicsPath实现艺术字，部分核心代码如下所示；</li></ol> 
<pre><code>GraphicsPath gp = new GraphicsPath(FillMode.Winding);

            gp.AddString(

                "字体轮廓",new FontFamily("方正舒体"),(int)FontStyle.Regular,

                80,new PointF(10, 20),new StringFormat());

            Brush brush = XXXXXXXXXXXXXXXXXXXXXX;

            XXX．DrawPath(Pens.Green, gp);

            XXX．FillPath(brush, gp);</code></pre> 
<h4 style="margin-left:.0001pt;text-align:justify;">实现：</h4> 
<p>     1.在vs中开一个c#的窗体应用：<img alt="" height="625" src="https://images2.imgbox.com/24/e2/2CyCH5AI_o.png" width="888"></p> 
<p>  2 .在设计界面中拉取两个button，一个textbox（用于输出自己想输出的内容（艺术字））以及一个panel（输出在panel上显示）</p> 
<p><img alt="" height="615" src="https://images2.imgbox.com/3f/d7/BPdNzZ1Z_o.png" width="919"></p> 
<p>  3.代码</p> 
<p>（1）button1：</p> 
<pre><code>private void button1_Click(object sender, EventArgs e)
{
    drawBasicShapes = true;
    drawArtText = false;
    DrawBasicShapes();
    panel1.Invalidate(); // 触发重绘
}</code></pre> 
<p>（2）button2:</p> 
<pre><code> private void button2_Click(object sender, EventArgs e)
 {
     drawBasicShapes = false;
     drawArtText = true;
     DrawArtText();
     panel1.Invalidate(); // 触发重绘
 }</code></pre> 
<p>(3)button1调用的函数DrawBasicShapes()：</p> 
<pre><code>private void DrawBasicShapes()
{
    // 使用 Pen 绘制基础图形
    Pen blackPen = new Pen(Color.Black, 3);
    drawingGraphics.DrawRectangle(blackPen, 10, 70, 100, 50);
    drawingGraphics.DrawEllipse(blackPen, 10, 70, 100, 50);

    // 使用 LinearGradientBrush 实现渐变色字体
    Font font = new Font("Arial", 24);
    LinearGradientBrush gradientBrush = new LinearGradientBrush(
        new Rectangle(10, 20, 100, 50),
        Color.Blue,
        Color.Red,
        45);
    drawingGraphics.DrawString("直接拿捏", font, gradientBrush, new PointF(10, 150));
}</code></pre> 
<p>（4）button2调用的函数 DrawArtText()：</p> 
<pre><code>private void DrawArtText()
{
    string text = textBox1.Text;
    using (Font font = new Font("方正舒体", 40, FontStyle.Regular))
    using (GraphicsPath gp = new GraphicsPath(FillMode.Winding))
    using (SolidBrush brush = new SolidBrush(Color.AliceBlue)) // 使用 SolidBrush 填充艺术字  
    using (Pen pen = new Pen(Color.Green, 2)) // 使用 Pen 绘制艺术字的轮廓  
    {
        gp.AddString(
            text,
            font.FontFamily,
            (int)font.Style,
            font.Size,
            new PointF(80, 30), // 设置艺术字的起始位置  
            StringFormat.GenericDefault);

        drawingGraphics.DrawPath(pen, gp); // 绘制艺术字的轮廓  
        drawingGraphics.FillPath(brush, gp); // 填充艺术字  
    }
}</code></pre> 
<p>（5）panel：</p> 
<pre><code>private void panel1_Paint(object sender, PaintEventArgs e)
{
    // 将 Bitmap 绘制到 Panel 上
    e.Graphics.DrawImage(drawingBitmap, 0, 0);
}</code></pre> 
<p>4.代码细节补充（完整代码）</p> 
<pre><code>using System.Drawing.Drawing2D;
using System.Drawing;
using System.Windows.Forms;
using System;

namespace 图形图像编程
{
    public partial class Form1 : Form
    {
        // 标志位
        private bool drawBasicShapes = false;
        private bool drawArtText = false;

        // Bitmap 对象，用于保存绘制的图像
        private Bitmap drawingBitmap;
        private Graphics drawingGraphics;

        // 构造函数
        public Form1()
        {
            InitializeComponent();

            // 初始化 Bitmap 和 Graphics 对象
            drawingBitmap = new Bitmap(panel1.Width, panel1.Height);
            drawingGraphics = Graphics.FromImage(drawingBitmap);

            // 绑定按钮点击事件
            button1.Click += new EventHandler(this.button1_Click);
            button2.Click += new EventHandler(this.button2_Click);
            panel1.Paint += new PaintEventHandler(this.panel1_Paint);
        }

        // 绘制基础图形按钮点击事件处理
        private void button1_Click(object sender, EventArgs e)
        {
            drawBasicShapes = true;
            drawArtText = false;
            DrawBasicShapes();
            panel1.Invalidate(); // 触发重绘
        }

        // 添加艺术字按钮点击事件处理
        private void button2_Click(object sender, EventArgs e)
        {
            drawBasicShapes = false;
            drawArtText = true;
            DrawArtText();
            panel1.Invalidate(); // 触发重绘
        }

        // 绘制基础图形的方法
        private void DrawBasicShapes()
        {
            // 使用 Pen 绘制基础图形
            Pen blackPen = new Pen(Color.Black, 3);
            drawingGraphics.DrawRectangle(blackPen, 10, 70, 100, 50);
            drawingGraphics.DrawEllipse(blackPen, 10, 70, 100, 50);

            // 使用 LinearGradientBrush 实现渐变色字体
            Font font = new Font("Arial", 24);
            LinearGradientBrush gradientBrush = new LinearGradientBrush(
                new Rectangle(10, 20, 100, 50),
                Color.Blue,
                Color.Red,
                45);
            drawingGraphics.DrawString("直接拿捏", font, gradientBrush, new PointF(10, 150));
        }

        // 绘制艺术字的方法
        private void DrawArtText()
        {
            string text = textBox1.Text;
            using (Font font = new Font("方正舒体", 40, FontStyle.Regular))
            using (GraphicsPath gp = new GraphicsPath(FillMode.Winding))
            using (SolidBrush brush = new SolidBrush(Color.AliceBlue)) // 使用 SolidBrush 填充艺术字  
            using (Pen pen = new Pen(Color.Green, 2)) // 使用 Pen 绘制艺术字的轮廓  
            {
                gp.AddString(
                    text,
                    font.FontFamily,
                    (int)font.Style,
                    font.Size,
                    new PointF(80, 30), // 设置艺术字的起始位置  
                    StringFormat.GenericDefault);

                drawingGraphics.DrawPath(pen, gp); // 绘制艺术字的轮廓  
                drawingGraphics.FillPath(brush, gp); // 填充艺术字  
            }
        }

        // Panel的Paint事件处理
        private void panel1_Paint(object sender, PaintEventArgs e)
        {
            // 将 Bitmap 绘制到 Panel 上
            e.Graphics.DrawImage(drawingBitmap, 0, 0);
        }
    }
}
</code></pre> 
<h4>运行结果：</h4> 
<p><img alt="" height="798" src="https://images2.imgbox.com/7f/f9/QMw4GKVy_o.png" width="1200"></p> 
<p><img alt="" height="792" src="https://images2.imgbox.com/78/bb/vkm60aa1_o.png" width="1200"></p> 
<h4>小结：</h4> 
<h5>1.实现细节</h5> 
<p style="margin-left:0;text-align:left;">·  <strong>创建项目和设计窗体</strong>：</p> 
<ul><li style="text-align:justify;">新建一个Windows Forms应用程序项目。</li><li style="text-align:justify;">在窗体上添加一个Panel控件和两个Button控件以及textbox。</li><li style="text-align:justify;">设置Button控件的文本为“绘制基础图形”和“添加艺术字”。</li></ul> 
<p style="margin-left:0;text-align:left;">·  <strong>初始化绘图资源</strong>：</p> 
<ul><li style="text-align:justify;">在窗体构造函数中，初始化一个Bitmap对象和一个Graphics对象。</li><li style="text-align:justify;">将Bitmap对象的大小设置为Panel控件的大小。</li><li style="text-align:justify;">使用Graphics.FromImage方法从Bitmap对象创建一个Graphics对象，用于绘图。</li></ul> 
<p style="margin-left:0;text-align:left;">·  <strong>实现按钮点击事件处理函数</strong>：</p> 
<ul><li style="text-align:justify;">在第一个按钮的点击事件处理函数中，调用绘制基础图形的方法。</li><li style="text-align:justify;">在第二个按钮的点击事件处理函数中，调用绘制艺术文字的方法。</li><li style="text-align:justify;">在每个事件处理函数中，调用panel1.Invalidate方法，触发重绘。</li></ul> 
<p style="margin-left:0;text-align:left;">·  <strong>实现绘图方法</strong>：</p> 
<ul><li style="text-align:justify;">在绘制基础图形的方法中，使用Pen对象绘制矩形和椭圆，使用LinearGradientBrush对象绘制渐变色文字。</li><li style="text-align:justify;">在绘制艺术文字的方法中，使用GraphicsPath对象创建艺术文字的路径，并使用SolidBrush对象填充文字。</li></ul> 
<p style="margin-left:0;text-align:left;">·  <strong>处理</strong>Panel<strong>的</strong>Paint<strong>事件</strong>：</p> 
<ul><li style="text-align:justify;">在Paint事件处理函数中，使用Graphics.DrawImage方法将Bitmap对象绘制到Panel控件上。</li></ul> 
<p style="text-align:justify;">2.小结</p> 
<p style="margin-left:.0001pt;text-align:justify;">本次实验通过使用GDI+进行图形和文字的绘制，成功实现了一个可以动态更新绘图内容的Windows窗体应用程序。关键点在于使用Bitmap对象作为绘图表面，从而保留之前的绘图内容。这种方法适用于需要动态更新和保留图形内容的应用场景</p> 
<h5 style="margin-left:.0001pt;text-align:justify;">难点分析</h5> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>（1）Bitmap与Graphics的初始化和使用：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">         初始化Bitmap和Graphics对象并确保它们的大小与Panel一致，这样才能确保绘制内容能够正确显示在Panel上。</p> 
<p style="margin-left:.0001pt;text-align:justify;">         在Panel的Paint事件中使用Graphics.DrawImage方法将Bitmap绘制到Panel上，以实现内容的保留和更新。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>（2）不同绘图操作的协调：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">         实现多个绘图方法并确保它们能够在同一个Bitmap对象上操作，不会互相覆盖或清除之前的绘图内容。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><strong><strong>（3）处理界面刷新：</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">         通过调用panel1.Invalidate方法触发重绘，并在Paint事件中绘制Bitmap对象，这样可以确保每次绘制新内容时，之前的内容不会被清除。</p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bd15febffca5bc7ae75690ffa6723350/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">贪心算法学习四</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f58726b21f9bd845b0997c4a9a4de8e6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CVPR2024｜AIGC(图像生成，视频生成，3D生成等)相关论文汇总（附论文链接/开源代码/解析）【持续更新】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>