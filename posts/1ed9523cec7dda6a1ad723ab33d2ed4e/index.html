<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Spring] Spring Web MVC基础理论 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1ed9523cec7dda6a1ad723ab33d2ed4e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="[Spring] Spring Web MVC基础理论">
  <meta property="og:description" content="🌸个人主页:https://blog.csdn.net/2301_80050796?spm=1000.2115.3001.5343
🏵️热门专栏:
🧊 Java基本语法(97平均质量分)https://blog.csdn.net/2301_80050796/category_12615970.html?spm=1001.2014.3001.5482
🍕 Collection与数据结构 (92平均质量分)https://blog.csdn.net/2301_80050796/category_12621348.html?spm=1001.2014.3001.5482
🧀Java EE(96平均质量分) https://blog.csdn.net/2301_80050796/category_12643370.html?spm=1001.2014.3001.5482
🍭MySql数据库(93平均质量分)https://blog.csdn.net/2301_80050796/category_12629890.html?spm=1001.2014.3001.5482
🍬算法(97平均质量分)https://blog.csdn.net/2301_80050796/category_12676091.html?spm=1001.2014.3001.5482
🍃 Spring(97平均质量分)https://blog.csdn.net/2301_80050796/category_12724152.html?spm=1001.2014.3001.5482
感谢点赞与关注~~~
目录 1. 什么是Spring Web MVC1.1 什么是MVC1.2 什么是Spring MVC 2. Spring MVC深入学习2.1 建立连接2.2.1 @RequsetMapping注解介绍2.2.2 @RequsetMapping的使用2.2.3 @RequsetMapping支持哪些方法类型的请求 2.3 请求2.3.1 传递单个参数2.3.2 传递多个参数2.3.3 传递对象2.3.4 后端参数重命名2.3.5 传递数组2.3.6 传递集合2.3.7 传递json数据2.3.8 获取URL中的参数@PathVariable2.3.9 上传文件@RequestPart2.3.10 获取Cookie/Session2.3.11 获取Header 2.4 响应2.4.1 返回静态页面2.4.2 返回数据@ResponseBody2.4.3 返回html代码片段2.4.4 返回json2.4.5 设置状态码2.4.6 设置header 1. 什么是Spring Web MVC Spring Web MVC是基于Servlet API构建的原始Web框架，从⼀开始就包在Spring框架中。它的正式名称“Spring Web MVC”来自其源模块的名称(Spring-webmvc)，但它通常被称为&#34;Spring MVC&#34;.
总结来说,Spring Web MVC是一个Web框架.
想要理解什么是Spring MVC我们首先先要理解什么是MVC
1.1 什么是MVC MVC是Model View Controller的缩写,是软件工程中共的一种软件架构的设计模式.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-13T20:00:46+08:00">
    <meta property="article:modified_time" content="2024-07-13T20:00:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Spring] Spring Web MVC基础理论</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>🌸个人主页:<a href="https://blog.csdn.net/2301_80050796?spm=1000.2115.3001.5343">https://blog.csdn.net/2301_80050796?spm=1000.2115.3001.5343</a><br> 🏵️热门专栏:<br> 🧊 Java基本语法(97平均质量分)<a href="https://blog.csdn.net/2301_80050796/category_12615970.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12615970.html?spm=1001.2014.3001.5482</a><br> 🍕 Collection与数据结构 (92平均质量分)<a href="https://blog.csdn.net/2301_80050796/category_12621348.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12621348.html?spm=1001.2014.3001.5482</a><br> 🧀Java EE(96平均质量分) <a href="https://blog.csdn.net/2301_80050796/category_12643370.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12643370.html?spm=1001.2014.3001.5482</a><br> 🍭MySql数据库(93平均质量分)<a href="https://blog.csdn.net/2301_80050796/category_12629890.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12629890.html?spm=1001.2014.3001.5482</a><br> 🍬算法(97平均质量分)<a href="https://blog.csdn.net/2301_80050796/category_12676091.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12676091.html?spm=1001.2014.3001.5482</a><br> 🍃 Spring(97平均质量分)<a href="https://blog.csdn.net/2301_80050796/category_12724152.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12724152.html?spm=1001.2014.3001.5482</a><br> 感谢点赞与关注~~~<br> <img src="https://images2.imgbox.com/13/e0/jaZQDZNE_o.jpg" alt="在这里插入图片描述"></p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#1_Spring_Web_MVC_12" rel="nofollow">1. 什么是Spring Web MVC</a></li><li><ul><li><a href="#11_MVC_16" rel="nofollow">1.1 什么是MVC</a></li><li><a href="#12_Spring_MVC_28" rel="nofollow">1.2 什么是Spring MVC</a></li></ul> 
  </li><li><a href="#2_Spring_MVC_40" rel="nofollow">2. Spring MVC深入学习</a></li><li><ul><li><a href="#21__52" rel="nofollow">2.1 建立连接</a></li><li><ul><li><a href="#221_RequsetMapping_68" rel="nofollow">2.2.1 @RequsetMapping注解介绍</a></li><li><a href="#222_RequsetMapping_88" rel="nofollow">2.2.2 @RequsetMapping的使用</a></li><li><a href="#223_RequsetMapping_106" rel="nofollow">2.2.3 @RequsetMapping支持哪些方法类型的请求</a></li></ul> 
   </li><li><a href="#23__189" rel="nofollow">2.3 请求</a></li><li><ul><li><a href="#231__192" rel="nofollow">2.3.1 传递单个参数</a></li><li><a href="#232__227" rel="nofollow">2.3.2 传递多个参数</a></li><li><a href="#233__240" rel="nofollow">2.3.3 传递对象</a></li><li><a href="#234__285" rel="nofollow">2.3.4 后端参数重命名</a></li><li><a href="#235__328" rel="nofollow">2.3.5 传递数组</a></li><li><a href="#236__345" rel="nofollow">2.3.6 传递集合</a></li><li><a href="#237_json_359" rel="nofollow">2.3.7 传递json数据</a></li><li><a href="#238_URLPathVariable_494" rel="nofollow">2.3.8 获取URL中的参数@PathVariable</a></li><li><a href="#239_RequestPart_518" rel="nofollow">2.3.9 上传文件@RequestPart</a></li><li><a href="#2310_CookieSession_533" rel="nofollow">2.3.10 获取Cookie/Session</a></li><li><a href="#2311_Header_673" rel="nofollow">2.3.11 获取Header</a></li></ul> 
   </li><li><a href="#24__700" rel="nofollow">2.4 响应</a></li><li><ul><li><a href="#241__702" rel="nofollow">2.4.1 返回静态页面</a></li><li><a href="#242_ResponseBody_761" rel="nofollow">2.4.2 返回数据@ResponseBody</a></li><li><a href="#243_html_786" rel="nofollow">2.4.3 返回html代码片段</a></li><li><a href="#244_json_796" rel="nofollow">2.4.4 返回json</a></li><li><a href="#245__827" rel="nofollow">2.4.5 设置状态码</a></li><li><a href="#246_header_843" rel="nofollow">2.4.6 设置header</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_Spring_Web_MVC_12"></a>1. 什么是Spring Web MVC</h2> 
<p>Spring Web MVC是基于Servlet API构建的原始Web框架，从⼀开始就包在Spring框架中。它的正式名称“Spring Web MVC”来自其源模块的名称(Spring-webmvc)，但它通常被称为"Spring MVC".<br> 总结来说,Spring Web MVC是一个Web框架.<br> 想要理解什么是Spring MVC我们首先先要理解什么是MVC</p> 
<h3><a id="11_MVC_16"></a>1.1 什么是MVC</h3> 
<p>MVC是Model View Controller的缩写,是软件工程中共的一种<mark>软件架构的设计模式</mark>.把软件系统分为<mark>模型,控制器,视图三个部分</mark>.<br> <img src="https://images2.imgbox.com/22/e5/QyupxEvL_o.png" alt="在这里插入图片描述"></p> 
<ul><li>view(视图): 指的是在应用中专门用来<mark>与浏览器交互,展示数据的资源</mark>.</li><li>model(模型): 只应用程序的主题部分,<mark>用来处理程序中数据逻辑的部分</mark>.</li><li>controller(控制器): 可以理解为一个<strong>分发器</strong>,用来决定对于视图发来的请求,<mark>需要哪一个模型来处理,以及处理之后需要跳回哪个视图</mark>.即用来连接视图和模型.</li></ul> 
<blockquote> 
 <p>比如我们去饭店吃饭:<br> 顾客进店之后,服务员来接待客户点餐,客户点完餐之后,把客户菜单交给前厅,前厅根据客户菜单给后厨下达命令.后厨负责做饭,做完之后,再根据菜单告诉服务员,这是X号餐桌客人的饭.<br> 在这个过程中:</p> 
 <ul><li>服务员就是view(视图):负责接待顾客,给顾客点餐,给顾客端饭.</li><li>前厅就是controller(控制器):用来给后厨下达做菜的命令.</li><li>后厨就是model(模型):根据前厅发来的要求来做菜.</li></ul> 
</blockquote> 
<h3><a id="12_Spring_MVC_28"></a>1.2 什么是Spring MVC</h3> 
<p>MVC是一种架构模式,也是一种思想.<mark>而Spring MVC是对MVC思想的具体实现</mark>.除此之外,Spring MVC还是一个Web框架.<br> 总结:<mark>Spring MVC是一个实现了MVC软件设计模式的Web框架</mark>.<br> 其实Spring MVC在前面我们就使用过了.在我们创建Spring Boot项目的时候,选择Spring Web的时候,其实就是Spring MVC框架.<mark>也就是在创建的Spring Boot项目中添加了Spring Web MVC 的相关依赖,使得该项目具有了网络通信的功能</mark>.<br> <img src="https://images2.imgbox.com/2c/f9/XccAxMvk_o.png" alt="在这里插入图片描述"></p> 
<ul><li>那么这时候问题又来了,Spring Boot和Spring MVC究竟有什么关系?<br> Spring Boot只是实现Spring MVC的一种方式而已.Spring Boot中可以添加很多依赖,我们在<strong>Spring Boot项目中添加了Spring MVC的框架,那么这个Spring Boot项目就可以实现Web的功能</strong>.</li></ul> 
<p>不过Spring MVC在实现MVC模式的时候,也结合了自身的一些特点,下面这个图更加适合描述Spring MVC.<br> <img src="https://images2.imgbox.com/a7/71/ww1MQI3C_o.png" alt="在这里插入图片描述"><br> 通过浏览器来向后端发送请求的时候,没有经过view,而是直接把请求传递给了controller,之后controller选择合适的模型,传递给model,model处理数据之后,把响应返回给controller,之后controller再把响应返回给view,之后view把响应返回给浏览器.</p> 
<blockquote> 
 <p>就比如我们去公司面试:我们(浏览器)想要面试的时候,我们可以直接找到公司某部门的负责人(controller),说我要面试(请求),之后部门负责人会找到面试你的那个人(model),面试之后,加入你通过了面试,面试你的那个人会把面试结果传递给部门负责人,之后部门负责人把消息通知给HR(view),之后HR会给你发offer.</p> 
</blockquote> 
<h2><a id="2_Spring_MVC_40"></a>2. Spring MVC深入学习</h2> 
<p>学习Spring MVC,重点也就是学习<strong>用户通过浏览器与服务端交互的过程</strong>.<br> 主要分为一下三个点:</p> 
<ul><li>建立连接:将用户(浏览器)和Java程序连接起来,也就是Java程序打开了大门,允许外界访问.此时<mark>访问的地址能够调用我们的Spring程序</mark>.</li><li>传递参数:<mark>用户请求的时候会带一些参数</mark>.这些参数会传递到后端,在后端程序中要想办法获取到参数.</li><li>返回结果:执行了业务逻辑之后,<mark>需要把执行的结果返回给用户,也就是响应</mark>.</li></ul> 
<blockquote> 
 <p>比如去银行存款:</p> 
 <ol><li>建立连接:去柜台</li><li>传递参数:拿着身份证,银行卡去存款</li><li>返回结果:银行返回一张存折.</li></ol> 
</blockquote> 
<p>掌握了上面的三个功能就相当于掌握了Spring MVC.</p> 
<h3><a id="21__52"></a>2.1 建立连接</h3> 
<p>在Spring MVC中使用<code>@RequestMapping</code>来实现URL的路由映射,也就是<mark>通过这个注解来使得Spring项目与浏览器建立连接</mark>.代码如下:</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token comment">//可以理解为资源路径</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接下来访问<code>http://127.0.0.1:8080/hello</code>就可以看到返回的程序了.<br> <img src="https://images2.imgbox.com/cd/75/lofDExlz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="221_RequsetMapping_68"></a>2.2.1 @RequsetMapping注解介绍</h4> 
<p><code>@RequestMapping</code>是Spring Web MVC应用程序最常被用到的注解之一.<mark>它用来注册接口的路由映射</mark>.表示的是,服务器在接收到请求的时候,<mark>路径为<code>/hello</code>的请求就会调用hello这个方法的代码</mark>.</p> 
<blockquote> 
 <p>何为路由映射?<br> 当用户访问⼀个URL时,<mark>将用户的请求对应到程序中某个类的某个方法的过程就叫路由映射</mark>.</p> 
</blockquote> 
<ul><li>问题:既然<code>@RequestMapping</code>已经达到了我们的目的,我们为什么还要加<code>@RestController</code>呢?<br> <code>@RestController</code>在资源访问的过程中起着相当重要的作用,在Spring项目接收到一个请求之后,Spring会对所有的类进行扫描,<mark>如果家里注解<code>@RestController</code>,Spring才会去看这个类里面有没有加<code>@RequestMapping</code>这个注解</mark>,才可以通过浏览器中输入的URL对应到这个类中注册的路由映射.<br> 如果我们把<code>@RestController</code>去掉,就访问不到了.</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/demo"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token comment">//可以理解为资源路径</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/30/b2/gMsYvGAY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="222_RequsetMapping_88"></a>2.2.2 @RequsetMapping的使用</h4> 
<p>不仅仅方法前面可以加上<code>@RequestMapping</code>注解,类的前面也可以加该注解,即<code>@RequestMapping</code><mark>不仅仅可以修饰方法,还可以修饰类</mark>.<strong>当修饰类和方法的时候,访问的地址是类路径+方法路径</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/demo"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token comment">//可以理解为资源路径</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>那么在访问hello这个方法的时候,路径就会变为<code>/demo/hello</code>.<br> <img src="https://images2.imgbox.com/e3/28/njrOxZ3f_o.png" alt="在这里插入图片描述"><br> 注: 注解中的<code>/hello</code>和<code>"demo"</code>虽然不加/也可以正确响应,但是为了编程的规范,还是建议加上.</p> 
<h4><a id="223_RequsetMapping_106"></a>2.2.3 @RequsetMapping支持哪些方法类型的请求</h4> 
<p>首先给出结论,<mark><code>@RequsetMapping</code>支持所有方法类型的请求</mark>.下面我们来通过Postman构造请求来实验一下.<br> <img src="https://images2.imgbox.com/be/7b/lL3CttvR_o.png" alt="在这里插入图片描述"><br> GET方法支持<br> <img src="https://images2.imgbox.com/08/02/2gNCXWBM_o.png" alt=""><br> POST方法支持<br> 剩下的方法都是同样的道理,显示的结果都是Hello World,这里不再一一展示.</p> 
<ul><li>那么如何使<code>@RequsetMapping</code>只接受指定的几种方法的请求呢?<br> <mark>我们就需要再注解中加上另外的一个参数,method键值对</mark></li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello1"</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Hello World 1"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5b/f9/qyNGMMTT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ce/e8/6zfQJEa7_o.png" alt="在这里插入图片描述"><br> 我们看到<code>/hello1</code>对应的路由映射只支持GET方法.<br> 现在我们去看看method键值对截取的部分源码</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RequestMapping</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">RequestMethod</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//method返回的是一个RequestMethod类型的数组</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">params</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">consumes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">produces</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>在源码中,我们可以看到,<strong>method返回的是一个RequestMethod类型的数组</strong>.那么这个<code>RequestMethod</code>中都有什么,我们再去查看截取的部分源码.</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">RequestMethod</span> <span class="token punctuation">{<!-- --></span>
    <span class="token constant">GET</span><span class="token punctuation">,</span>
    <span class="token constant">HEAD</span><span class="token punctuation">,</span>
    <span class="token constant">POST</span><span class="token punctuation">,</span>
    <span class="token constant">PUT</span><span class="token punctuation">,</span>
    <span class="token constant">PATCH</span><span class="token punctuation">,</span>
    <span class="token constant">DELETE</span><span class="token punctuation">,</span>
    <span class="token constant">OPTIONS</span><span class="token punctuation">,</span>
    <span class="token constant">TRACE</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里我们可以看到<code>RequestMethod</code>是一个枚举类型,<strong>这里面存放的都是请求中的方法</strong>.<br> 由于<code>method</code>那里接收的是一个关于<code>RequestMethod</code>枚举类型的数组,所以我们在注解后的键值对的值上传入的也是枚举类型的数组,比如我们想支持GET和POST两种方法:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/hello1"</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">,</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Hello World 1"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><mark>当然当元素只有一个的时候,大括号是可以省略的</mark>.就比如上面那个只有GET方法的例子.</p> 
<ul><li>如果指定的方法只有一种,我们也可以采用其他注解来解决<br> 比如只支持GET方法,我们就可以使用<code>@GetMapping</code>注解来解决.</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello3"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Hello World 3"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在比如只支持POST方法,可以使用<code>@PostMapping</code>来解决</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/hello4"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"Hello World 4"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="23__189"></a>2.3 请求</h3> 
<p>访问不同的路径,就是发送不同的请求.在发送请求时,<mark>可能会带⼀些参数,所以学习Spring的请求,主要是学习如何传递参数到后端以及后端如何接收</mark>.<br> 传递参数,主要是以浏览器和Postman来模拟.</p> 
<h4><a id="231__192"></a>2.3.1 传递单个参数</h4> 
<p>在前面,我们的方法都是没有参数存在的,如果给我们的方法加上参数之后会怎么样呢?</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/name1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">name1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接收到了"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"接收到了"</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们在请求的URL中加上查询字符串,即参数:<code>http://127.0.0.1:8080/demo/name1?name=zhangsan</code>(?后面的是参数)<br> 在URL中加上的参数传入到后端之后,<mark>Spring MVC会根据方法的参数名,找到对应的参数,赋值给方法</mark>.之后拿到传入的参数在方法中进行一系列操作之后返回给前端.比如我们将这个请求通过Postman发送给Spring项目.<br> <img src="https://images2.imgbox.com/80/ef/1hOAIXeV_o.png" alt="在这里插入图片描述"><br> 我们发现成功返回了响应,并且返回了正确的响应.<br> 如果参数不一致,则获取不到参数.<br> <img src="https://images2.imgbox.com/9e/11/jsgOQyXa_o.png" alt="在这里插入图片描述"></p> 
<ul><li>注意事项:参数类型是包装类型和基本类型的区别 
  <ul><li>当参数类型是包装类型和基本类型的时候,<mark>传入的参数Spring进行隐式转换之后发现参数类型不一致均会报400错误</mark>.</li></ul> <pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/age1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">age1</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接收到了"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"接收到了"</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/age2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">age2</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"接收到了"</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <img src="https://images2.imgbox.com/0e/27/5jglhVGP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/72/7d/aAEiOJZt_o.png" alt="在这里插入图片描述"> 
  <ul><li>但是如果我们不传递任何参数的时候,这时候基本类型和包装类型就会有所区别,<mark>基本类型会直接抛出500错误,而包装类型会输出默认的空值null</mark>.<br> <img src="https://images2.imgbox.com/af/10/P8ixmMZk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/04/ab/RjHFQrXM_o.png" alt="在这里插入图片描述"><br> 所以,我们在企业开发中,<strong>对于参数可能为空的数据,我们建议使用包装类型</strong>.</li></ul> </li></ul> 
<h4><a id="232__227"></a>2.3.2 传递多个参数</h4> 
<p>和接收单个参数⼀样,<mark>直接使用方法的参数接收即可</mark>.使用多个形参.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/person1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"接收到了name"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"接收到了age"</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2b/52/R5x4or7x_o.png" alt="在这里插入图片描述"><br> 注:</p> 
<ol><li>也可以通过构造form表单来发送请求,这时候在URL中就没有了参数的存在,参数<mark>跑到了请求中的正文内容</mark>.</li><li>如果在项目运行的过程中,我们要对方法的参数进行修改,我们<strong>不建议在原来的方法上直接进行修改,而是另起一个方法重新写</strong>.</li></ol> 
<h4><a id="233__240"></a>2.3.3 传递对象</h4> 
<p>如果需要传递的参数比较多的时候,我们不妨把<strong>这些参数封装成一个对象</strong>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/person3"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">person3</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>person<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>person<span class="token punctuation">.</span><span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSex</span><span class="token punctuation">(</span><span class="token class-name">String</span> sex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>之后我们使用Postman进行请求发送.<code>http://127.0.0.1:8080/demo/person3?name=zhangsan&amp;age=20&amp;sex=男</code><br> <img src="https://images2.imgbox.com/94/d1/cyhdFNoE_o.png" alt="在这里插入图片描述"><br> 注意:</p> 
<ol><li>如果某个基本类型的参数未传递,如果这个基本类型参数是一个类中的成员变量,<mark>如果这个参数未传递,那么这个参数会有默认的初始值</mark>,这一点是和上面直接把基本参数类型的参数写在方法的参数列表中是不一样的.比如我没有传入age参数.<br> <img src="https://images2.imgbox.com/be/42/7aVcZk8U_o.png" alt="在这里插入图片描述"><br> 我们可以看到age的初始值被默认赋值为了0.</li><li>如果我们针对参数是对象的使用form表单进行参数传递,<mark>在GET和POST两种方法中,只有POST方法会返回正确的结果,而GET方法会返回默认的空值.</mark><br> <img src="https://images2.imgbox.com/b3/43/tyfygieb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bc/4c/QbObjriR_o.png" alt="在这里插入图片描述"></li></ol> 
<h4><a id="234__285"></a>2.3.4 后端参数重命名</h4> 
<p>在一些特殊的情况下,<mark>前端传递的参数key和我们后端接收的key可能不⼀致</mark>,比如我们传递了一个Name给后端,但是后端需要接收的参数是name,这时候就需要用到<code>@RequestParam</code>(翻译:请求参数)来对后端的参数进行重命名.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/person2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"Name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"接收到name"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"接收到age"</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上面这段代码,其中Name就是前端要传递的参数,而name是后端使用的参数,<mark>此时Spring可以正确的把请求传递的参数Name绑定到后端参数name参数上</mark>.<br> 我们使用<code>http://127.0.0.1:8080/demo/person2?Name=zhangsan&amp;age=20</code>来进行请求传递<br> <img src="https://images2.imgbox.com/58/0d/p2L9OQsR_o.png" alt="在这里插入图片描述"><br> 如果我们把Name改成name,就无法进行正确的参数传递了.</p> 
<p><img src="https://images2.imgbox.com/8d/c5/T8gA5SLY_o.png" alt="在这里插入图片描述"><br> [注意事项]<br> 在使用<code>@RequestParam</code>对参数进行重命名的时候,<mark>参数就变成了必传参数</mark>.<br> <img src="https://images2.imgbox.com/75/e5/bX3Nj3a7_o.png" alt="在这里插入图片描述"><br> 那么造成上面这种情况的原因是什么呢,又该如何让他变成一个非必传参数呢?现在我们来查看<code>@RequestParam</code>的源码:</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RequestParam</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> <span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"\n\t\t\n\t\t\n\ue000\ue001\ue002\n\t\t\t\t\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们可以看到,required那一栏默认的值是true,<mark>表示的含义就是,该注解修饰的参数是必传参数</mark>.既然如此,<mark>我们可以通过设置<code>@RequestParam</code>的required参数=false来实现让这个参数成为非必传参数</mark>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/person2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"Name"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"接收到name"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"接收到age"</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/29/71/Ls3vocas_o.png" alt="在这里插入图片描述"><br> 此时Name为传递的时候,会有默认的初始值null来返回.</p> 
<h4><a id="235__328"></a>2.3.5 传递数组</h4> 
<p>Spring MVC可以<mark>自动绑定数组参数的赋值</mark>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param1</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arrayParam<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arrayParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用Postman进行传参:</p> 
<ul><li><mark>请求参数名与形参数组名称相同且请求参数为多个</mark>,后端的方法形式参数中即可自动接收传输过来的参数.<br> <img src="https://images2.imgbox.com/dd/3b/ahGala3p_o.png" alt="在这里插入图片描述"></li><li>把所要传递的参数合并在一起传递,<mark>中间用逗号隔开</mark>.<br> <img src="https://images2.imgbox.com/77/d1/geG6gerD_o.png" alt="在这里插入图片描述"><br> 可以看到以上两种方法均返回了正确的响应.</li><li>我们如果使用from表单进行发送的话,<strong>这时候请求GET和POST就只有POST返回的是正确的结果,而GET返回的是null</strong>.<br> <img src="https://images2.imgbox.com/d0/d7/iwfXhZPS_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="236__345"></a>2.3.6 传递集合</h4> 
<p>集合参数: 和数组传递参数的方法类似,<mark>可以是相同的参数名多个参数,也可以把参数写到一起</mark>,但是在后端那里,需要<mark>加上<code>@RequestParam</code>来绑定参数关系</mark>.<br> 默认的情况下,请求中的参数名相同的多个值,封装的时候是一个数组,而如果要封装集合的话,就需要在参数前面加上<code>@RequestParam</code>来绑定参数关系,表示传过来的是一个数组,需要转换成集合.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"ArrayParam"</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arrayParam<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>arrayParam<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/13/3b/ZKgUjUNN_o.png" alt="在这里插入图片描述"></p> 
<p>如果不加注解后面的参数的话,<strong>在前端传递参数的时候默认就和后端的方法参数是一样的</strong>.<br> <img src="https://images2.imgbox.com/3a/a7/fEHKJdZO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="237_json_359"></a>2.3.7 传递json数据</h4> 
<ul><li>什么是json<br> JSON就是⼀种数据格式,有自己的格式和语法,<mark>使用文本表示一个对象或数组的信息,因此JSON本质是字符串</mark>.主要负责在不同的语言中<strong>数据传递和交换</strong>.</li><li>json的语法<br> json是一个<strong>字符串</strong>,其格式非常类似于python中的字典和JavaScript对象字面量的格式. 
  <ol><li>数据存储在键值对(key/value)中,key和value之间用:分割.</li><li>键值对之间由,分割.</li><li>对象用{ }表示</li><li>数组用[ ]表示</li><li>值可以为对象,数组,字符串等等.</li></ol> </li><li>json的两种结构 
  <ol><li>对象: 大括号<code>{}</code>保存的对象是⼀个<mark>无序的键值对</mark>集合.⼀个对象以左括号<code>{ </code>开始，右括号<code>}</code>结束。每个"键"后跟⼀个冒号<code>:</code> ,键值对使用逗号<code>,</code>分隔</li><li>数组: 中括号<code>[]</code>保存的数组是值（value）的有序集合.⼀个数组以左中括号<code>[</code>开始，右中括号<code>]</code>结束，值之间使用逗号, 分隔,数组中可以存放多个对象,对象和对象之间用<code>,</code>分割.</li></ol> </li></ul> 
<p>下面我们展示一段json字符串:</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
	 <span class="token string-property property">"squadName"</span><span class="token operator">:</span> <span class="token string">"Super hero squad"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"homeTown"</span><span class="token operator">:</span> <span class="token string">"Metro City"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"formed"</span><span class="token operator">:</span> <span class="token number">2016</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"secretBase"</span><span class="token operator">:</span> <span class="token string">"Super tower"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"active"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	 <span class="token comment">//数据保存在键值对中</span>
	 <span class="token comment">//键和值之间使用:分割,键值对之间使用,分割</span>
	 <span class="token string-property property">"members"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
	 <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Molecule Man"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"secretIdentity"</span><span class="token operator">:</span> <span class="token string">"Dan Jukes"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"powers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Radiation resistance"</span><span class="token punctuation">,</span> <span class="token string">"Turning tiny"</span><span class="token punctuation">,</span> "Radiation 
	blast"<span class="token punctuation">]</span><span class="token comment">//数组中可以包含多个元素</span>
	 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//这个元素也可以是对象</span>
	 <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Madame Uppercut"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">39</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"secretIdentity"</span><span class="token operator">:</span> <span class="token string">"Jane Wilson"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"powers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Million tonne punch"</span><span class="token punctuation">,</span> <span class="token string">"Damage resistance"</span><span class="token punctuation">,</span> "Superhuman 
	reflexes"<span class="token punctuation">]</span>
	 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
	 <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"Eternal Flame"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"age"</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"secretIdentity"</span><span class="token operator">:</span> <span class="token string">"Unknown"</span><span class="token punctuation">,</span>
	 <span class="token string-property property">"powers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Immortality"</span><span class="token punctuation">,</span> <span class="token string">"Heat Immunity"</span><span class="token punctuation">,</span> <span class="token string">"Inferno"</span><span class="token punctuation">,</span> 
	<span class="token string">"Teleportation"</span><span class="token punctuation">,</span> <span class="token string">"Interdimensional travel"</span><span class="token punctuation">]</span>
	 <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>也可以压缩表示为:</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span><span class="token string-property property">"squadName"</span><span class="token operator">:</span><span class="token string">"Super hero squad"</span><span class="token punctuation">,</span><span class="token string-property property">"homeTown"</span><span class="token operator">:</span>"Metro 
City<span class="token string">","</span>formed<span class="token string">":2016,"</span>secretBase<span class="token string">":"</span>Super tower<span class="token string">","</span>active<span class="token string">":true,"</span>members"<span class="token operator">:</span>
<span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span><span class="token string">"Molecule Man"</span><span class="token punctuation">,</span><span class="token string-property property">"age"</span><span class="token operator">:</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token string-property property">"secretIdentity"</span><span class="token operator">:</span><span class="token string">"Dan Jukes"</span><span class="token punctuation">,</span><span class="token string-property property">"powers"</span><span class="token operator">:</span>
<span class="token punctuation">[</span><span class="token string">"Radiation resistance"</span><span class="token punctuation">,</span><span class="token string">"Turning tiny"</span><span class="token punctuation">,</span><span class="token string">"Radiation blast"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string-property property">"name"</span><span class="token operator">:</span>"Madame 
Uppercut<span class="token string">","</span>age<span class="token string">":39,"</span>secretIdentity<span class="token string">":"</span>Jane Wilson<span class="token string">","</span>powers<span class="token string">":["</span>Million tonne 
punch<span class="token string">","</span>Damage resistance<span class="token string">","</span>Superhuman reflexes<span class="token string">"]},{"</span>name<span class="token string">":"</span>Eternal 
Flame<span class="token string">","</span>age<span class="token string">":1000000,"</span>secretIdentity<span class="token string">":"</span>Unknown<span class="token string">","</span>powers<span class="token string">":["</span>Immortality<span class="token string">","</span>Heat 
Immunity<span class="token string">","</span>Inferno<span class="token string">","</span>Teleportation<span class="token string">","</span>Interdimensional travel"<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> 
<p>可以使用json在线工具来校验json的书写,如<a href="https://www.json.cn/" rel="nofollow">https://www.json.cn/</a>.</p> 
<ul><li>json字符串和Java对象的互转<br> Spring MVC框架集成了json的转换工具,我们可以直接拿来使用.我们可以使用<code>ObjectMapper</code>中的一系列方法来对json和Java对象两者之间进行转换.</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JsonProcessingException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> json <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        person<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        person<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        person<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Person</span> person2 <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传入一个json字符串和一个类的类对象</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSex</span><span class="token punctuation">(</span><span class="token class-name">String</span> sex<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>
                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>
                <span class="token string">", sex='"</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fe/3a/y14bFZVF_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如何传递json对象<br> 接收json对象,需要使用<code>@RequestBody</code>注解,这个注解翻译过来就是请求正文的意思,<mark>意思是这个注解起到的作用是从请求中的正文部分获取数据.请求的参数必须写在正文中</mark>.而我们的json字符串就写在请求的正文中.<br> 后端是这样实现的:</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param3"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param3</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> person<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接下来我们使用Postman构造请求,把json字符串写入请求的正文中:</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"name"</span><span class="token operator">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"age"</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token string-property property">"sex"</span><span class="token operator">:</span><span class="token string">"male"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>响应结果如下:<br> <img src="https://images2.imgbox.com/ee/dd/ejupiyYe_o.png" alt="在这里插入图片描述"><br> 如果去掉注解<code>@RequestBody</code>,那么后端就无法正确接收json数据,前端返回的响应也不正确.<br> <img src="https://images2.imgbox.com/c1/38/Tp0WvsbJ_o.png" alt="在这里插入图片描述"><br> 由于后端没有接收到关于person对象传递的任何信息,所以都默认都赋值为了初始值.</p> 
<h4><a id="238_URLPathVariable_494"></a>2.3.8 获取URL中的参数@PathVariable</h4> 
<p>PathVariable翻译过来之后,是"路径可变"的意思,<mark>意思是我们要通过URL获取路径作为传递过来的参数</mark>,而这个路径是不固定的.<br> 这个注解主要的作用就是在请求URL路径上的数据绑定.之前我们通过http请求传递参数都是在<code>?</code>后面的查询字符串中.而现在我们要通过URL中的资源路径来传递参数.<br> 后端代码实现如下:<br> 在<code>@RequestMapping</code>的参数中在加上一些路径的标识,每个参数外面使用<code>{ }</code>括起来.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param4/{name}/{age}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param4</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> name<span class="token operator">+</span>age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们通过Postman来构造请求<code>http://127.0.0.1:8080/demo/param4/zhangsan/18</code><br> <img src="https://images2.imgbox.com/8e/7a/VLXoa0fs_o.png" alt="在这里插入图片描述"><br> 我们看到前端返回了正确的响应.<br> [注意事项]<br> 如果方法参数名称和需要绑定的URL中的变量名称不⼀致时,需要<code>@PathVariable</code>的属性value赋值.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param4/{Name}/{Age}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param4</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"Name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"Age"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> name<span class="token operator">+</span>age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/26/5a/CF96lDCx_o.png" alt="在这里插入图片描述"><br> 前端还是会返回正确的响应.</p> 
<h4><a id="239_RequestPart_518"></a>2.3.9 上传文件@RequestPart</h4> 
<p>后端代码实现:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param5"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param5</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:/personal/"</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//上传文件,前面写的是存储文件的路径,后面加上原文件的名字</span>
    <span class="token keyword">return</span> <span class="token string">"已经获取到"</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用Postman向指定位置发送文件.<br> <img src="https://images2.imgbox.com/9a/45/9r5nj50o_o.png" alt="在这里插入图片描述"><br> 指定位置接收到了文件.<br> <img src="https://images2.imgbox.com/d9/70/VSoGJUdr_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2310_CookieSession_533"></a>2.3.10 获取Cookie/Session</h4> 
<ul><li> <p>回顾Cookie和Session<br> Cookie中的内容和URL中的query string内容类似,<strong>都是键值对内容</strong>,它们都是程序员自定义的.每个键值对之间用";“隔开,键和值之间用”="隔开.<br> <img src="https://images2.imgbox.com/75/d0/Tpj8BgMh_o.png" alt="在这里插入图片描述"></p> 
  <ul><li><mark>Cookie是浏览器本地存储的一种机制,Cookie本质上可以在客户端的硬盘上持久化保存的</mark>.是浏览器给网页的一种能够持久化存储数据的机制.</li><li>有的网站,需要在客户端这边存储一些必要的信息,希望可以持久化存储,于是浏览器就给网页提供了Cookie,是<strong>浏览器对于硬盘的操作做了一些特殊的封装</strong>,相当于提供了一个或者一组特殊的文件,并且<strong>内容只能是键值对</strong>.</li><li>那么Cookie是具体如何保存的呢?<br> 浏览器会<strong>针对不同的域名</strong>,每个网站都有自己的Cookie文件保存在硬盘中.</li><li>Cookie从哪里来?<br> Cookie中的数据,<mark>来自于服务器</mark>(服务器返回给浏览器的数据),访问网站的时候,网站的服务器会返回http响应,在http响应中,<mark>会包含Set-Cookie这样的header</mark>,它就会把一些键值对保存到浏览器的Cookie中.Cookie保存到浏览器之后,后续浏览器访问该网站的时候,就会在请求的header中,<strong>把之前保存的键值对都带入进去,在返回给服务器</strong>.</li><li>那么问题又来了,为什么还要返回给服务器?<br> 这是因为Cookie可以<mark>使客户端存储一些必要的"配置信息"</mark>,从而让服务器对于用户提供的服务更加"个性化".</li></ul> </li></ul> 
<blockquote> 
 <p>举例说明:剪头发<br> A去了一家理发店之后,理发师就问他:“你想怎么剪?” 但是这时候A就会反问理发师:“你能怎么剪”?于是理发师就说:“可以剪平头,毛寸…”,于是A就说:"给我剪个平头."在A下次去了之后,就可以直接告诉理发师,剪个平头.同理,B也经历了上述过程,他最终选择了毛寸.</p> 
</blockquote> 
<p>和上面剪头发是相同的道理,客户端也不止有一个,每个客户端都会有自己的偏好,<strong>此时就需要让每个客户端保存这样的数据,之后就可以通过Cookie随时把这样的信息返回给服务器</strong>.例如:浏览器的夜间模式和白日模式,一次设置好了之后,下次再打开服务器的时候,浏览器的颜色模式不会改变.</p> 
<ul><li>Cookie自动登录<br> Cookie中虽然有很多的键值对都是程序员自定义的,<mark>但是往往会有一个特殊的键值对,用来标识用户的身份信息</mark>.<br> <img src="https://images2.imgbox.com/f4/c1/BWcT0s8P_o.png" alt="在这里插入图片描述"> 
  <ul><li>首先在获取登录页面与返回登录登录页面的html的过程中<strong>不包含任何的Cookie</strong>.</li><li>在用户输入用户名和密码之后,这时候用户名和密码就会交给服务器,验证它们的正确性,在确认正确之后,就会创建会话(session),(会话可以理解为一个类,其中类中具体包含什么,要看业务逻辑,但是其中一定有sessionId,也就是令牌)<mark>并把sessionId返回给浏览器,这个sessionId存在于响应报文header中的Set-Cookie中,我们也可以把他叫做"令牌"</mark>,令牌中存储的是一个字符串,类似于"<strong>身份标识</strong>",不会存储太多的信息,在浏览器收到sessionId之后,就会把Id存储在硬盘中,即创建了Cookie.</li><li>在之后客户端要访问该域名下的其他页面的时候,就可以把sessionId交给服务器,服务器获取到sessionId之后,就可以根据这个值,知道用户的详细信息.也就是直接通过之前创建的sessionId的Cookie就可以访问到,无需再次登录.</li></ul> </li></ul> 
<blockquote> 
 <p>举例说明:去医院看病</p> 
 <ol><li>到了医院先挂号.挂号时候需要提供⾝份证,同时得到了⼀张"就诊卡",这个就诊卡存储着关于患者身份信息的sessionId,就相当于患者的"令牌".</li><li>后续去各个科室进行检查,诊断,开药等操作,都不必再出示⾝份证了,只要凭就诊卡即可识别出当前患者的⾝份.在就诊室的刷卡机上刷一下就诊卡,医生就会知道你的所有信息.</li><li>看完病了之后,不想要就诊卡了,就可以注销这个卡.此时患者的⾝份和就诊卡的关联就销毁了.(类似于⽹站的注销操作)</li><li>⼜来看病,可以办⼀张新的就诊卡,此时就得到了⼀个新的"令牌"</li></ol> 
</blockquote> 
<ul><li>使用Spring获取Cookie 
  <ul><li>传统获取Cookie<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param6"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param6</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span>  <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">"已经获取到Cookie"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 之后我们通过浏览器伪造Cookie,来向后端传递请求.<code>http://127.0.0.1:8080/demo/param6</code><br> <img src="https://images2.imgbox.com/e3/f3/13LtXiBx_o.png" alt="在这里插入图片描述"><br> 我们看到了后端已经成功拿到了Cookie中的数据.<br> <img src="https://images2.imgbox.com/7f/93/vFEZiNhe_o.png" alt="在这里插入图片描述"><br> Spring MVC是Spring基于Servlet实现的.其中上面一段代码中的<code>HttpServletRequest</code>和<code>HttpServletResponse</code>是Servlet提供的两个类.<em>这两个类在每一个接口中均默认存在</em>,需要的时候写出来就可以.<br> <code>HttpServletRequest</code> 对象代表客户端的请求.请求中的所有信息均可以通过这个类拿到.<br> <code>HttpServletResponse</code>对象代表服务器的响应.响应中的所有信息均可以通过这个类拿到.</li><li>获取Cookie中的某一个键值对<br> 方法一: 使用<code>equals()</code>方法<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param7"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param7</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"bite"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">"为获取到指定的Cookie"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 通过浏览器构造Cookie,我们看到了前端返回了正确的响应.<br> <img src="https://images2.imgbox.com/89/bc/KjDn9ouL_o.png" alt="在这里插入图片描述"><br> 后端打印了相应的日志:<br> <img src="https://images2.imgbox.com/8e/1f/YvymhFwS_o.png" alt="在这里插入图片描述"><br> 方法二:通过<code>@CookieValue</code>注解获取.<pre><code class="prism language-java">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param8"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param8</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">"bite"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> bite<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"获取到了"</span> <span class="token operator">+</span> bite<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bite<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 前端与后端响应均正确:<br> <img src="https://images2.imgbox.com/a3/fd/dyDAEcH6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b2/ce/WtyaVXk8_o.png" alt="在这里插入图片描述"></li></ul> </li><li>Session的存储和获取<br> Session是服务器端的机制,<mark>它需要先存储,才能获取到</mark>. 
  <ul><li>Session的存储<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param9"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param9</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//获取Session对象,如果不存在Session对象,getSession之后不加或参数为true会自动创建</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//确保Session成功创建</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bite"</span><span class="token punctuation">,</span> <span class="token string">"888"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">"Session存储成功"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 方法解释:<br> <code>getSession(boolean create)</code>: 如果参数为true的时候,就会在Session不存在的时候,自动创建Session,如果参数为false,就不会创建.<br> <code>getSession()</code>:和上一种方法参数为true的时候效果相同.<br> <code>setAttribute(String s,String o)</code>:设置Session中的参数.</li><li>Session的读取<br> 读取Session依然使用<code>HttpServletRequest</code><pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param10"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param10</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"bite"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"获取到了Session"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> s<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">"未获取到Session"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li>运行<br> [注意事项] 在重启服务器之后,上一次存在内存中的Session数据会被清空,需要重新设置Session之后才可以获取到.<br> <img src="https://images2.imgbox.com/0e/36/vrzeHKYM_o.png" alt="在这里插入图片描述"><br> 我们可以看到,存储了Session之后,浏览器把SessionID存储在了Cookie中.<br> <img src="https://images2.imgbox.com/ab/2a/hoeiMWaN_o.png" alt="在这里插入图片描述"><br> 之后我们可以使用浏览器存储的令牌获取Session.<br> <img src="https://images2.imgbox.com/4d/e8/ZrUUQKF6_o.png" alt="在这里插入图片描述"></li><li>简洁获取Session<br> 上面获取Session的方法比较传统,我们下面展示两种简洁的方法.<br> 方法一:使用<code>@SessionAttribute</code>注解<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param11"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param11</span><span class="token punctuation">(</span><span class="token annotation punctuation">@SessionAttribute</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"bite"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
                      <span class="token class-name">String</span> bite<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> bite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 运行结果如下:<img src="https://images2.imgbox.com/5f/44/e6uuCCVD_o.png" alt="在这里插入图片描述"><br> <code>@SessionAttribute</code>的后面两个注解表示的意思和前面<code>@RequestParam</code>注解后面的两个参数的作用非常像.<mark>第一个作用是参数绑定的作用,第二个参数如果为true或者不写,表示这个参数是必传参数,如果为false,就是非必传参数,如果Session传递未成功,就返回null</mark>.<br> 方法二:直接使用<code>HttpSession</code>作为参数<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param12"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param12</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> string <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"bite"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"成功获取到了Session"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <code>HttpSession</code>作为参数的时候,效果和<code>getSession()</code>方法一样,在没有Session的时候,<mark>会自动创建Session</mark>.<br> 运行结果如下:<br> <img src="https://images2.imgbox.com/1d/1e/hMn2fBIQ_o.png" alt="在这里插入图片描述"></li></ul> </li></ul> 
<h4><a id="2311_Header_673"></a>2.3.11 获取Header</h4> 
<ul><li>传统获取方法<br> 传统的方法依然是从<code>HttpServletRequst</code>中获取.</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param13"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param13</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们使用<code>getHeader</code>方法来获取Header.<mark>在后面的参数是Header中的"key"</mark>.<br> 运行测试:<br> <img src="https://images2.imgbox.com/13/40/mswp9aXm_o.png" alt="在这里插入图片描述"><br> 下面是我们通过抓包软件抓取的网络通行信息.我们发现Header中的User-Agent一栏与浏览器上的一致.<br> <img src="https://images2.imgbox.com/77/90/jTBgoogd_o.png" alt="在这里插入图片描述"></p> 
<ul><li>简洁获取方法<br> 通过<code>@RequestHeader</code>注解来获取,在注解后面加上需要获取Header中的"key".</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param14"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param14</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"sec-ch-ua-platform"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> string<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果:<br> <img src="https://images2.imgbox.com/3f/13/k5ICCb71_o.png" alt="在这里插入图片描述"><br> 与抓包工具中的结果一致:<br> <img src="https://images2.imgbox.com/33/34/KFfNiTKP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24__700"></a>2.4 响应</h3> 
<p>在我们前面代码的例子中,每次浏览器都会返回响应的响应,而前面的响应都是数据响应,响应还可以是页面,状态码,Header等.</p> 
<h4><a id="241__702"></a>2.4.1 返回静态页面</h4> 
<p>首先我们需要穿件一个前端页面index.html.创建的文件放在static目录下.</p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>我是index文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>[注意] 在写完前端文件之后,不要通过idea右上角的浏览器小图标的方式打开,<mark>我们需要通过后端返回页面的方式打开</mark>.<br> <img src="https://images2.imgbox.com/c7/5c/u27ueaTL_o.png" alt="在这里插入图片描述"><br> 下面我们展示一种后端代码的写法:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/demo2"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param1"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">param1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"/index.html"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ba/09/IHmrYoqx_o.png" alt="在这里插入图片描述"><br> 我们看到,浏览器并没有返回对应的html页面,而是直接返回了一串字符串数据.那么怎么解决呢.<mark>我们需要把<code>@RestController</code>注解变成<code>@Controller</code>注解.</mark></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/demo2"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param1"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">param1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"/index.html"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们看到这次浏览器返回了对应的html页面.<br> <img src="https://images2.imgbox.com/64/ef/aBCAuKxi_o.png" alt="在这里插入图片描述"></p> 
<ul><li>那么<code>@RestController</code>和<code>@Controller</code>有什么区别呢?<br> <mark><code>@RestController</code>一般用来返回数据,这些数据的响应报头中的Content-Type都是<strong>text/html</strong>格式的,<code>@Controller</code>一般用来返回视图</mark>.<em>这个视图一般是用前端的代码写好的文件</em>.就是前面我们在MVC设计模式中提到过的视图(view).<br> <code>@RestController</code> == <code>@Controller</code> + <code>@ResponseBody</code>.其中<code>@Controller</code>表示的是我们前面我们MVC模式中的控制器.<mark>而<code>@ResponseBody</code>表示的是响应正文,定义返回的数据为非视图模式</mark>.<br> <code>@RestController</code>的源码如下,我们也可以看到这个注解上面也标有<code>@Controller</code> + <code>@ResponseBody</code>两个注解:</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RestController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>
        annotation <span class="token operator">=</span> <span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span>
    <span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="242_ResponseBody_761"></a>2.4.2 返回数据@ResponseBody</h4> 
<p>上面我们提到了<code>@ResponseBody</code>注解表示的是返回数据,也就是以<mark>text/html的格式返回</mark><br> <code>@ResponseBody</code>即是类注解又是方法注解.<mark>给类加上该注解之后,就表示类中所有的方法返回的都是数据,给方法加上之后,表示的是只有这个方法返回的是数据</mark>.</p> 
<blockquote> 
 <p>同样,如果类上有<code>@RestController</code>注解的时候,就证明给所有的方法都加了<code>@ResponseBody</code>注解,所有的方法都以数据的方式返回.</p> 
</blockquote> 
<p>如果一个类中即有页面要返回,也有数据要返回,就在需要返回数据的方法上面加上<code>@ResponseBody</code>.类的控制器使用<code>@Controller</code>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/demo2"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController2</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param1"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">param1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"/index.html"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"param2"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">param2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"String"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>浏览器返回的视图与数据如下:<br> <img src="https://images2.imgbox.com/b9/28/RgzWyJkA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/80/25/8k7kAork_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="243_html_786"></a>2.4.3 返回html代码片段</h4> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param3"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"&lt;h1&gt;我是html~&lt;/h1&gt;"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/52/f0/mcKtTI4y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="244_json_796"></a>2.4.4 返回json</h4> 
<p>后端返回json的方法是使用对象返回.<strong>可以使用HashMap返回,也可以另外创建一个对象,按属性返回</strong>.<br> 方法一:创建HashMap</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param4"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">param4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"aa"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"bb"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"cc"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>浏览器返回响应,是json格式的数据:<br> <img src="https://images2.imgbox.com/f8/aa/ffPn2MIv_o.png" alt="在这里插入图片描述"><br> 方法二:通过类中的属性</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param5"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">param5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    person<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    person<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    person<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">"male"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>浏览器返回响应,依然是json格式的数据,<mark>返回的是对象中属性的值</mark>:<br> <img src="https://images2.imgbox.com/65/42/SrLcOb4J_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="245__827"></a>2.4.5 设置状态码</h4> 
<p>SpringMVC也为程序员提供了自定义状态码的功能,可以让程序员手动指定状态码.<br> 使用<code>HttpServletResponse</code>+<code>setStatus</code>方法访问到响应中的状态码.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param6"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param6</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"设置状态码为400"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>浏览器返回响应,需要注意的是,我们自定义的错误状态码返回的不一定是浏览器报错的一大坨信息,状态码并不影响页面的显示.<br> <img src="https://images2.imgbox.com/f8/aa/3QnPuvl2_o.png" alt="在这里插入图片描述"><br> 我们通过抓包工具发现,响应的状态码被设置为了400.图标也变为了红色.<br> <img src="https://images2.imgbox.com/04/fe/XONut1ZX_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/10/c3/oi4FzePN_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="246_header_843"></a>2.4.6 设置header</h4> 
<p>Http响应报头也会向客户端传递一些附加信息,如:Content-Type,Local等.这些信息就是通过<code>@RequestMapping</code>来实现的.先来看一看<code>@RequestMapping</code>的源码:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Mapping</span>
<span class="token annotation punctuation">@Reflective</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token class-name">ControllerMappingReflectiveProcessor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RequestMapping</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">RequestMethod</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">params</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">consumes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">produces</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ol><li><code>value(),path()</code>:指定映射的URL.</li><li><code>method()</code>:指定请求的方法.如GET,POST等.</li><li><code>consumes()</code>:指定处理的请求的<mark>提交内容类型(Content-Type)</mark>,例如:application/json, text/html等.</li><li><code>produces()</code>:<mark>指定返回的内容类型</mark>,也就是浏览器上响应之后显示的内容类型.和上面的<code>consumes()</code>一样.</li></ol> 
<ul><li>设置Content-Type<br> 我们<mark>通过设置produces的值,设置响应报头的Content-Type</mark>.</li></ul> 
<pre><code class="prism language-java"><span class="token comment">//返回的响应是json格式</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/param7"</span><span class="token punctuation">,</span>produces <span class="token operator">=</span> <span class="token string">"application/json"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"{\"success\":true}"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/89/97/BiXljUXo_o.png" alt="在这里插入图片描述"><br> 我们看到浏览器返回的响应数据是json格式的数据.</p> 
<blockquote> 
 <p>如果不在<code>@RequestMapping</code>后面加上produces参数的话,返回响应的时候,Spring还是会以默认的text.html格式返回.</p> 
</blockquote> 
<ul><li>设置其他的Header<br> 设置其他Header,需要使用<mark>Spring中提供的<code>HttpServletResponse</code>提供的方法来设置</mark>.</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/param8"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">param8</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"MyHeader"</span><span class="token punctuation">,</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"设置Header成功"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们通过Fiddler抓包可以看到,报头中自定义的header已经被加入进去了.<br> <img src="https://images2.imgbox.com/ff/86/bddCzR5g_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>如果header的名称已经存在,在设置它的Value的时候会覆盖掉原来的值.</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/40149d26da5347bad2d1d66cc09d519b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title"># Redis 入门到精通（二）通用指令</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a78e75d66abf1aef5ee9dd0be2b0cc2d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】初探数据结构面纱：栈和队列全面剖析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>