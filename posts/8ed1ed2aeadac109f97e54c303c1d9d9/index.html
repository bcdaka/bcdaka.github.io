<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 爬虫入门（一）：从零开始学爬虫 「详细介绍」 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8ed1ed2aeadac109f97e54c303c1d9d9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python 爬虫入门（一）：从零开始学爬虫 「详细介绍」">
  <meta property="og:description" content="Python 爬虫入门（一）：从零开始学爬虫 「详细介绍」 前言1.爬虫概念1.1 什么是爬虫？1.2 爬虫的工作原理 2. HTTP 简述2.1 什么是 HTTP？2.2 HTTP 请求2.3 HTTP 响应2.4 常见的 HTTP 方法 3. 网页的组成3.1 HTML3.2 CSS3.3 JavaScript 4. 使用 Python 进行 Web 爬虫4.1 常用的 Python 库4.2 安装所需库4.3 编写一个简单的爬虫4.4 示例代码 5. 处理复杂的网页5.1 使用 Playwright 示例 6. 编写一个完整的爬虫项目6.1 项目要求6.2 项目步骤6.3 示例代码 7. robots.txt 文件是什么？8. 注意事项 总结 前言 欢迎来到“Python 爬虫入门”系列的第一篇文章。你有没有想过，怎么能从网页上自动抓取你需要的数据？比如，一次性下载所有喜欢的图片，或者获取最新的新闻资讯。其实，这就是网络爬虫能做的事情。Python 是一门非常受欢迎的编程语言，简单易学，而且有很多强大的库可以用来编写网络爬虫。即使你是编程新手，也不用担心，这个系列会从最基础的知识讲起，带你一步步掌握写爬虫的技能。在这篇文章里，我们会先聊聊什么是网络爬虫，它是怎么工作的，然后教你如何安装和配置开发环境、如何使用 Python 编写爬虫脚本。 1.爬虫概念 1.1 什么是爬虫？ 网络爬虫，也称为网络蜘蛛、网络机器人，是一种自动化脚本或程序，用于自动浏览互联网并收集数据。
爬虫可以帮助我们从网页中提取信息，从而实现数据采集、信息检索、网站分析等功能。
1.2 爬虫的工作原理 发送请求：爬虫向目标网站发送 HTTP 请求。获取响应：目标网站返回 HTTP 响应，包含请求的网页内容。解析数据：爬虫解析网页内容，提取所需数据。存储数据：将提取的数据存储在本地或数据库中。 2. HTTP 简述 2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-27T14:47:31+08:00">
    <meta property="article:modified_time" content="2024-07-27T14:47:31+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 爬虫入门（一）：从零开始学爬虫 「详细介绍」</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Python 爬虫入门（一）：从零开始学爬虫 「详细介绍」</h4> 
 <ul><li><a href="#_2" rel="nofollow">前言</a></li><li><ul><li><a href="#1_8" rel="nofollow">1.爬虫概念</a></li><li><ul><li><a href="#11__10" rel="nofollow">1.1 什么是爬虫？</a></li><li><a href="#12__16" rel="nofollow">1.2 爬虫的工作原理</a></li></ul> 
   </li><li><a href="#2_HTTP__25" rel="nofollow">2. HTTP 简述</a></li><li><ul><li><a href="#21__HTTP_27" rel="nofollow">2.1 什么是 HTTP？</a></li><li><a href="#22_HTTP__33" rel="nofollow">2.2 HTTP 请求</a></li><li><a href="#23_HTTP__41" rel="nofollow">2.3 HTTP 响应</a></li><li><a href="#24__HTTP__49" rel="nofollow">2.4 常见的 HTTP 方法</a></li></ul> 
   </li><li><a href="#3__57" rel="nofollow">3. 网页的组成</a></li><li><ul><li><a href="#31_HTML_62" rel="nofollow">3.1 HTML</a></li><li><a href="#32_CSS_83" rel="nofollow">3.2 CSS</a></li><li><a href="#33_JavaScript_103" rel="nofollow">3.3 JavaScript</a></li></ul> 
   </li><li><a href="#4__Python__Web__118" rel="nofollow">4. 使用 Python 进行 Web 爬虫</a></li><li><ul><li><a href="#41__Python__120" rel="nofollow">4.1 常用的 Python 库</a></li><li><a href="#42__127" rel="nofollow">4.2 安装所需库</a></li><li><a href="#43__140" rel="nofollow">4.3 编写一个简单的爬虫</a></li><li><a href="#44__144" rel="nofollow">4.4 示例代码</a></li></ul> 
   </li><li><a href="#5__166" rel="nofollow">5. 处理复杂的网页</a></li><li><ul><li><a href="#51__Playwright__170" rel="nofollow">5.1 使用 Playwright 示例</a></li></ul> 
   </li><li><a href="#6__217" rel="nofollow">6. 编写一个完整的爬虫项目</a></li><li><ul><li><a href="#61__221" rel="nofollow">6.1 项目要求</a></li><li><a href="#62__226" rel="nofollow">6.2 项目步骤</a></li><li><a href="#63__233" rel="nofollow">6.3 示例代码</a></li></ul> 
   </li><li><a href="#7_robotstxt__283" rel="nofollow">7. robots.txt 文件是什么？</a></li><li><a href="#8__301" rel="nofollow">8. 注意事项</a></li></ul> 
  </li><li><a href="#_310" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>前言</h2> 
<blockquote> 
 <ul><li>欢迎来到“Python 爬虫入门”系列的第一篇文章。你有没有想过，怎么能从网页上自动抓取你需要的数据？比如，一次性下载所有喜欢的图片，或者获取最新的新闻资讯。其实，这就是网络爬虫能做的事情。</li><li>Python 是一门非常受欢迎的编程语言，简单易学，而且有很多强大的库可以用来编写网络爬虫。即使你是编程新手，也不用担心，这个系列会从最基础的知识讲起，带你一步步掌握写爬虫的技能。</li><li>在这篇文章里，我们会先聊聊什么是网络爬虫，它是怎么工作的，然后教你如何安装和配置开发环境、如何使用 Python 编写爬虫脚本。</li></ul> 
</blockquote> 
<h3><a id="1_8"></a>1.爬虫概念</h3> 
<h4><a id="11__10"></a>1.1 什么是爬虫？</h4> 
<blockquote> 
 <p>网络爬虫，也称为网络蜘蛛、网络机器人，是一种自动化脚本或程序，用于自动浏览互联网并收集数据。</p> 
</blockquote> 
<p>爬虫可以帮助我们从网页中提取信息，从而实现<strong>数据采集、信息检索、网站分析</strong>等功能。</p> 
<h4><a id="12__16"></a>1.2 爬虫的工作原理</h4> 
<p><img src="https://images2.imgbox.com/a5/42/3qGgU2Xo_o.png" alt="在这里插入图片描述"></p> 
<ol><li><strong>发送请求</strong>：爬虫向目标网站发送 HTTP 请求。</li><li><strong>获取响应</strong>：目标网站返回 HTTP 响应，包含请求的网页内容。</li><li><strong>解析数据</strong>：爬虫解析网页内容，提取所需数据。</li><li><strong>存储数据</strong>：将提取的数据存储在本地或数据库中。</li></ol> 
<h3><a id="2_HTTP__25"></a>2. HTTP 简述</h3> 
<h4><a id="21__HTTP_27"></a>2.1 什么是 HTTP？</h4> 
<blockquote> 
 <p>HTTP（HyperText Transfer Protocol）是用于在 Web 浏览器和 Web服务器之间传递信息的协议。它是一种基于请求 - 响应模式的协议，客户端发送请求，服务器返回响应。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/9f/0b/OyAd3fAP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22_HTTP__33"></a>2.2 HTTP 请求</h4> 
<p><strong>HTTP 请求由以下几个部分组成：</strong></p> 
<ul><li><strong>请求行</strong>：包括请求方法（如 GET、POST）、请求 URL 和 HTTP 版本。</li><li><strong>请求头</strong>：包含有关客户端环境的信息和请求体的元数据。</li><li><strong>请求体</strong>：在 POST 请求中，包含要发送到服务器的数据。</li></ul> 
<h4><a id="23_HTTP__41"></a>2.3 HTTP 响应</h4> 
<p><strong>HTTP 响应由以下几个部分组成：</strong></p> 
<ul><li><strong>状态行</strong>：包括 HTTP 版本、状态码和状态描述。</li><li><strong>响应头</strong>：包含有关服务器环境的信息和响应体的元数据。</li><li><strong>响应体</strong>：包含实际的响应内容，如 HTML 文档、图像或其他数据。</li></ul> 
<h4><a id="24__HTTP__49"></a>2.4 常见的 HTTP 方法</h4> 
<ul><li><strong>GET</strong>：请求指定的资源。一般用于请求数据。</li><li><strong>POST</strong>：向指定的资源提交数据进行处理。</li><li><strong>PUT</strong>：向指定资源位置上传最新内容。</li><li><strong>DELETE</strong>：请求删除指定的资源。</li><li><strong>HEAD</strong>：类似于 GET，但只返回响应头，不返回响应体。</li></ul> 
<h3><a id="3__57"></a>3. 网页的组成</h3> 
<p><strong>一个典型的网页由以下几个部分组成：</strong><br> <img src="https://images2.imgbox.com/8c/06/xrgyzF3P_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="31_HTML_62"></a>3.1 HTML</h4> 
<blockquote> 
 <p>HTML（HyperText Markup Language）是用于创建和结构化网页内容的标准标记语言。HTML 使用标签来标记不同类型的内容，如文本、图像、链接等。</p> 
</blockquote> 
<p><strong>HTML 基础结构示例如下：</strong></p> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello, World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Welcome to my website.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="32_CSS_83"></a>3.2 CSS</h4> 
<blockquote> 
 <p>CSS（Cascading Style Sheets）是一种样式表语言，用于描述 HTML 文档的外观和格式。CSS 可以控制网页的布局、颜色、字体等。</p> 
</blockquote> 
<p><strong>CSS 示例如下：</strong></p> 
<pre><code class="prism language-css"><span class="token selector">body</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h1</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">p</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="33_JavaScript_103"></a>3.3 JavaScript</h4> 
<blockquote> 
 <p>JavaScript 是一种高效的编程语言，通常用于网页开发，可以使网页具有动态交互功能。JavaScript 可以操作 HTML 和 CSS，响应用户事件，创建动态效果等。</p> 
</blockquote> 
<p><strong>JavaScript 示例如下：</strong></p> 
<pre><code class="prism language-javascript">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myButton'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Button clicked!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="4__Python__Web__118"></a>4. 使用 Python 进行 Web 爬虫</h3> 
<h4><a id="41__Python__120"></a>4.1 常用的 Python 库</h4> 
<ul><li><strong>requests</strong>：用于发送 HTTP 请求。</li><li><strong>BeautifulSoup</strong>：用于解析 HTML 和 XML 文档。</li><li><strong>Scrapy</strong>：一个功能强大的爬虫框架。</li><li><strong>Playwright</strong>：用于模拟浏览器操作，支持多种浏览器。</li></ul> 
<h4><a id="42__127"></a>4.2 安装所需库</h4> 
<p>使用 pip 安装下列库：</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> requests 
pip <span class="token function">install</span> beautifulsoup4 
pip <span class="token function">install</span> scrapy 
pip <span class="token function">install</span> openpyxl 
pip <span class="token function">install</span> playwright
python <span class="token parameter variable">-m</span> playwright <span class="token function">install</span>
</code></pre> 
<h4><a id="43__140"></a>4.3 编写一个简单的爬虫</h4> 
<p>下面是一个使用 requests 编写的简单爬虫示例。</p> 
<h4><a id="44__144"></a>4.4 示例代码</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests

<span class="token comment"># 发送请求</span>
url <span class="token operator">=</span> <span class="token string">'https://www.zhihu.com/api/v3/feed/topstory/hot-lists/total'</span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token comment"># 解析JSON数据</span>
data <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token string">'data'</span> <span class="token keyword">in</span> data<span class="token punctuation">:</span>
    <span class="token comment"># 遍历数据</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'target'</span> <span class="token keyword">in</span> item <span class="token keyword">and</span> <span class="token string">'title'</span> <span class="token keyword">in</span> item<span class="token punctuation">[</span><span class="token string">'target'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token string">'target'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有获取到数据"</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>执行结果如下：</strong><br> <img src="https://images2.imgbox.com/c9/21/FEsxNpDQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5__166"></a>5. 处理复杂的网页</h3> 
<p>对于一些动态加载内容的网页，仅靠 requests 和 BeautifulSoup 可能无法获取所有数据。这时可以使用 Playwright 模拟浏览器操作。</p> 
<h4><a id="51__Playwright__170"></a>5.1 使用 Playwright 示例</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">from</span> playwright<span class="token punctuation">.</span>async_api <span class="token keyword">import</span> async_playwright


<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>playwright<span class="token punctuation">:</span> async_playwright<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    browser <span class="token operator">=</span> <span class="token keyword">await</span> playwright<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>launch<span class="token punctuation">(</span>headless<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    context <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>new_context<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page <span class="token operator">=</span> <span class="token keyword">await</span> context<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 访问网页</span>
    <span class="token keyword">await</span> page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">'https://nba.hupu.com/'</span><span class="token punctuation">)</span>

    <span class="token comment"># 获取页面内容</span>
    content <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>content<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 解析 HTML（同样使用 BeautifulSoup）</span>
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>

    <span class="token comment"># 提取页面标题</span>
    title <span class="token operator">=</span> soup<span class="token punctuation">.</span>title<span class="token punctuation">.</span>string
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Title:'</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span>

    <span class="token comment"># 提取推荐文章的标题及链接</span>
    links <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>locator<span class="token punctuation">(</span><span class="token string">'.list-recommend a, .list-container a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> link <span class="token keyword">in</span> links<span class="token punctuation">:</span>
        title <span class="token operator">=</span> <span class="token keyword">await</span> link<span class="token punctuation">.</span>inner_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
        href <span class="token operator">=</span> <span class="token keyword">await</span> link<span class="token punctuation">.</span>get_attribute<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> href<span class="token punctuation">)</span>

    <span class="token comment"># 关闭浏览器和上下文</span>
    <span class="token keyword">await</span> context<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment"># 异步运行函数</span>
<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> async_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> playwright<span class="token punctuation">:</span>
        <span class="token keyword">await</span> run<span class="token punctuation">(</span>playwright<span class="token punctuation">)</span>

<span class="token comment"># 运行主函数</span>
asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/01/3zv0RJp4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6__217"></a>6. 编写一个完整的爬虫项目</h3> 
<p>下面，我们将编写一个完整的爬虫项目，从一个网站中提取数据并保存到本地文件。</p> 
<h4><a id="61__221"></a>6.1 项目要求</h4> 
<ol><li>从一个演出票务网站中提取演出信息；</li><li>将演出数据保存到 Excel 文件中。</li></ol> 
<h4><a id="62__226"></a>6.2 项目步骤</h4> 
<ol><li><strong>发送请求并获取响应</strong></li><li><strong>解析响应内容</strong></li><li><strong>创建 Excel 工作簿、Sheet</strong></li><li><strong>将遍历数据保存到 Excel 文件</strong></li></ol> 
<h4><a id="63__233"></a>6.3 示例代码</h4> 
<p>下面是一个使用 requests 和 BeautifulSoup 编写的爬虫示例。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">from</span> openpyxl <span class="token keyword">import</span> Workbook
<span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Path


<span class="token keyword">def</span> <span class="token function">showStart</span><span class="token punctuation">(</span>city_code<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 发送请求获取网页内容</span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://www.showstart.com/event/list?pageNo=1&amp;pageSize=99999&amp;cityCode=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>city_code<span class="token punctuation">}</span></span><span class="token string">'</span></span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
        items <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'show-item item'</span><span class="token punctuation">)</span>

        <span class="token comment"># 创建Excel工作簿</span>
        wb <span class="token operator">=</span> Workbook<span class="token punctuation">(</span><span class="token punctuation">)</span>
        sheet <span class="token operator">=</span> wb<span class="token punctuation">.</span>active
        <span class="token comment"># 添加标题行</span>
        sheet<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'标题'</span><span class="token punctuation">,</span> <span class="token string">'艺人'</span><span class="token punctuation">,</span> <span class="token string">'价格'</span><span class="token punctuation">,</span> <span class="token string">'时间'</span><span class="token punctuation">,</span> <span class="token string">'地址'</span><span class="token punctuation">,</span> <span class="token string">'链接'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token keyword">for</span> item <span class="token keyword">in</span> items<span class="token punctuation">:</span>
            title <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            artist <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'artist'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            price <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            time <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'time'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            addr <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'addr'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
            href <span class="token operator">=</span> <span class="token string">'https://www.showstart.com'</span> <span class="token operator">+</span> item<span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>

            <span class="token comment"># 将数据写入Excel</span>
            sheet<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>title<span class="token punctuation">,</span> artist<span class="token punctuation">,</span> price<span class="token punctuation">,</span> time<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> href<span class="token punctuation">]</span><span class="token punctuation">)</span>

        <span class="token comment"># 保存Excel文件</span>
        root_dir <span class="token operator">=</span> Path<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parent
        file_path <span class="token operator">=</span> root_dir <span class="token operator">/</span> <span class="token string-interpolation"><span class="token string">f'showstart_</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>city_code<span class="token punctuation">}</span></span><span class="token string">.xlsx'</span></span>
        wb<span class="token punctuation">.</span>save<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'数据已保存到 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>file_path<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'请求失败，状态码：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    city_code <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请输入城市编码："</span><span class="token punctuation">)</span>
    showStart<span class="token punctuation">(</span>city_code<span class="token punctuation">)</span>
</code></pre> 
<p><strong>打开Excel 文件，内容如下：</strong><br> <img src="https://images2.imgbox.com/0b/ab/4t33yQmQ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7_robotstxt__283"></a>7. robots.txt 文件是什么？</h3> 
<blockquote> 
 <p>robots.txt 文件是一个文本文件，通常放置在网站的根目录下。</p> 
</blockquote> 
<p>它用来告诉搜索引擎的爬虫（spider）哪些页面可以抓取，哪些页面不可以抓取。</p> 
<p>要找到网站的 robots.txt 文件，在浏览器的地址栏输入以下格式的URL：</p> 
<blockquote> 
 <p>http://www.xxx.com/robots.txt</p> 
</blockquote> 
<p>如果访问的是不带www的域名：</p> 
<blockquote> 
 <p>http://xxx.com/robots.txt</p> 
</blockquote> 
<ul><li><em>这里的 xxx.com 替换成想要查找 robots.txt 的网站域名。如果该网站有 robots.txt 文件，将能够直接在浏览器中看到它的内容。如果不存在，可能会看到404错误页面或者其他错误信息。</em></li><li><em>此外，有些网站可能会使用 robots.txt 文件来提供关于网站地图（sitemap）的信息，这可以帮助搜索引擎更快地发现和索引网站上的新内容。</em></li></ul> 
<h3><a id="8__301"></a>8. 注意事项</h3> 
<ul><li><strong>尊重网站的 robots.txt 文件</strong>：大多数网站都有一个 robots.txt 文件，告知爬虫哪些页面可以抓取，哪些页面不可以。一定要遵守这些规则，避免抓取被禁止的内容。</li><li><strong>避免过度抓取</strong>：频繁的请求可能会给目标网站的服务器带来负担，甚至导致服务器宕机。请合理设置抓取的频率，避免对服务器造成过大的压力；</li><li><strong>尊重网站的使用条款</strong>：有些网站的使用条款中明确禁止未经授权的数据抓取。在抓取数据前，一定要仔细阅读并遵守网站的使用条款和隐私政策。</li><li><strong>处理敏感数据</strong>：在抓取和处理数据时，要特别注意保护个人隐私和敏感信息。避免抓取和存储敏感数据，确保数据的合法性和安全性。</li><li><strong>合法合规</strong>：在进行数据抓取时，要确保自己的行为合法合规。不同国家和地区对数据抓取的法律规定不同，务必了解并遵守相关法律法规。</li><li><strong>正确识别身份</strong>：在请求头中使用合理的 User-Agent，明确表明自己的身份，避免被误认为恶意爬虫。</li></ul> 
<h2><a id="_310"></a>总结</h2> 
<p>希望你通过本文，对 Python 爬虫有了一个全面的了解。我们从 Python 爬虫的基本概念、HTTP 基础知识以及网页的基本组成部分讲起，逐步学习了如何使用 Python 编写简单的爬虫，以及如何处理动态加载内容的网页。最后，我们用一个完整的爬虫项目，把学到的知识都串联起来，实战演练了一遍。相信通过这次学习，你对爬虫的工作流程和技术细节都有了更深入的理解。</p> 
<hr> 
<p><em>如果你有任何问题或者好的想法，欢迎随时和我交流。</em></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b9000042975abaa66555369b7bf622ce/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java springboot 生成pdf 的方式有哪些</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f311c8fefc03769fc74f0d852b07f31c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue elementui 上传视频 以及上传视频失败重新上传没反应的处理方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>