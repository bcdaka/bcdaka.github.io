<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 安装 Redis 教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/64edc3041cc05d86d553e8baf6e008e0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Linux 安装 Redis 教程">
  <meta property="og:description" content="优质博文：IT-BLOG-CN
一、准备工作 配置gcc：安装Redis前需要配置gcc：
yum install gcc 如果配置gcc出现依赖包问题，在安装时提示需要的依赖包版本和本地版本不一致，本地版本过高，出现如下问题：
[root@localhost ~] yum install gcc Loaded plugins: fastestmirror Loading mirror speeds from cached hostfile * base: mirrors.aliyun.com * epel: mirrors.bfsu.edu.cn * extras: mirros.aliyun.com * updates: mirros.aliyun.com No package gcc available. Error: Nothing to do 使用--skip--broken命令尝试绕过依赖包时，直接把gcc安装包也绕过了
卸载依赖包重装版本的方法过于繁琐，可能扯出来一堆版本问题。这种问题原因是之前配置yum源时配置的阿里源所以下载的大多数依赖包版本都比较高，在安装很多较低版本软件时都会遇到这个问题。
所以，如果是因为配置yum源问题，这里建议直接将yum源更换为Centos官方源。这里我的Centos版本是7.9 到官方找了镜像地址为：http://mirror.centos.org/centos-7/7.9.2009/os/x86_64/Packages/centos-release-7-9.2009.0.el7.centos.x86_64.rpm
操作步骤：
1、进入repo目录
cd /etc/yum.repos.d/ 2、备份系统原来的repo文件
mv CentOS-Base.repo CentOS-Base.repo.backup 3、用wget下载repo文件
wget http://mirrors.163.com/.help/CentOS6-Base-163.repo 4、替换系统原理的repo文件
mv CentOS6-Base-163.repo CentOS-Base.repo 5、清理缓存
yum clean all 6、缓存文件
yum makecache 7、重新更新yum源
yum update -y 二、Redis 安装包 Redis官网链接">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-01T05:30:00+08:00">
    <meta property="article:modified_time" content="2024-07-01T05:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 安装 Redis 教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>优质博文：<a href="https://it-blog-cn.com/" rel="nofollow">IT-BLOG-CN</a></p> 
<h3><a id="_1"></a>一、准备工作</h3> 
<p>配置<code>gcc</code>：安装<code>Redis</code>前需要配置<code>gcc</code>：</p> 
<pre><code class="prism language-shell">yum <span class="token function">install</span> gcc
</code></pre> 
<p>如果配置<code>gcc</code>出现依赖包问题，在安装时提示需要的依赖包版本和本地版本不一致，本地版本过高，出现如下问题：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span> yum <span class="token function">install</span> gcc
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.aliyun.com
 * epel: mirrors.bfsu.edu.cn
 * extras: mirros.aliyun.com
 * updates: mirros.aliyun.com
 No package gcc available.
 Error: Nothing to <span class="token keyword">do</span>
</code></pre> 
<p>使用<code>--skip--broken</code>命令尝试绕过依赖包时，直接把<code>gcc</code>安装包也绕过了</p> 
<p>卸载依赖包重装版本的方法过于繁琐，可能扯出来一堆版本问题。这种问题原因是之前配置<code>yum</code>源时配置的阿里源所以下载的大多数依赖包版本都比较高，在安装很多较低版本软件时都会遇到这个问题。</p> 
<p>所以，如果是因为配置<code>yum</code>源问题，这里建议直接将<code>yum</code>源更换为<code>Centos</code>官方源。这里我的<code>Centos</code>版本是<code>7.9 </code>到官方找了镜像地址为：<code>http://mirror.centos.org/centos-7/7.9.2009/os/x86_64/Packages/centos-release-7-9.2009.0.el7.centos.x86_64.rpm</code></p> 
<p><strong>操作步骤：</strong><br> 1、进入<code>repo</code>目录</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /etc/yum.repos.d/
</code></pre> 
<p>2、备份系统原来的<code>repo</code>文件</p> 
<pre><code class="prism language-shell"><span class="token function">mv</span> CentOS-Base.repo CentOS-Base.repo.backup
</code></pre> 
<p>3、用<code>wget</code>下载<code>repo</code>文件</p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> http://mirrors.163.com/.help/CentOS6-Base-163.repo
</code></pre> 
<p>4、替换系统原理的<code>repo</code>文件</p> 
<pre><code class="prism language-shell"><span class="token function">mv</span> CentOS6-Base-163.repo CentOS-Base.repo
</code></pre> 
<p>5、清理缓存</p> 
<pre><code class="prism language-shell">yum clean all
</code></pre> 
<p>6、缓存文件</p> 
<pre><code class="prism language-shell">yum makecache
</code></pre> 
<p>7、重新更新<code>yum</code>源</p> 
<pre><code class="prism language-shell">yum update <span class="token parameter variable">-y</span>
</code></pre> 
<h3><a id="Redis__54"></a>二、Redis 安装包</h3> 
<p><code>Redis</code><a href="https://redis.io/download/" rel="nofollow">官网链接</a><br> <img src="https://images2.imgbox.com/83/16/Y1NjnYTE_o.png" alt="在这里插入图片描述"><br> 获取<code>redis</code>资源：或者手动下载后进行上传即可。</p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> http://download.redis.io/releases/redis-5.0.7.tar.gz
</code></pre> 
<p><code>Redis 6.2.11</code><a href="https://download.redis.io/releases/redis-6.2.11.tar.gz" rel="nofollow">官网下载链接</a></p> 
<p>解压<code>redis</code>安装包到<code>/usr/local</code>路径下：</p> 
<pre><code class="prism language-shell"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> redis-5.0.7.tar.gz <span class="token parameter variable">-C</span> /usr/local
</code></pre> 
<p>解压成功后将文件夹名修改为<code>redis</code></p> 
<pre><code class="prism language-shell"><span class="token function">mv</span> redis-5.0.7 redis
</code></pre> 
<h3><a id="_Redis_73"></a>三、安装 Redis</h3> 
<p><strong>编译：</strong> 进入到<code>/usr/local/redis</code>目录，输入命令<code>make</code>执行编译命令，接下来控制台会输出各种编译过程中输出的内容。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> redis-5.0.7
<span class="token function">make</span>
</code></pre> 
<p><strong>安装：</strong> 输入以下命令</p> 
<pre><code class="prism language-shell"><span class="token function">make</span> <span class="token function">install</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/redis
</code></pre> 
<p>这里多了一个关键字<code>PREFIX=</code>这个关键字的作用是编译的时候用于指定程序存放的路径。比如我们现在就是指定了<code>redis</code>必须存放在<code>/usr/local/redis</code>目录。假设不添加该关键字<code>Linux</code>会将可执行文件存放在<code>/usr/local/bin</code>目录，库文件会存放在<code>/usr/local/lib</code>目录。配置文件会存放在<code>/usr/local/etc</code>目录。其他的资源文件会存放在<code>usr/local/share</code>目录。这里指定号目录也方便后续的卸载，后续直接<code>rm -rf /usr/local/redis</code>即可删除<code>redis</code>。</p> 
<p><strong>启动Redis：</strong> 进入<code>redis</code>安装目录，执行下面命令启动<code>redis</code>服务</p> 
<pre><code class="prism language-shell">./bin/redis-server redis.conf
</code></pre> 
<p><img src="https://images2.imgbox.com/9f/4a/A7DClsz0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_Redis_91"></a>四、配置 Redis服务</h3> 
<p>【1】如上启动<code>redis</code>不能退出控制台，如果退出控制台<code>redis</code>服务也会停止。如果想要让<code>redis</code>以<strong>后台的方式运行</strong>，需要修改<code>redis</code>的配置文件：<code>redis.conf</code>。将该配置文件中的<code>daemonize no</code>改为 <code>daemonize yes</code>即可:</p> 
<pre><code class="prism language-text">daemonize yes
</code></pre> 
<p>修改完配置文件后，重新启动一下<code>redis</code>服务</p> 
<pre><code class="prism language-shell">./bin/redis-server redis.conf
</code></pre> 
<p>【2】查看<code>redis</code>服务器运行情况：端口号<code>6379</code></p> 
<pre><code class="prism language-shell"><span class="token function">netstat</span> <span class="token parameter variable">-tunlp</span> <span class="token operator">|</span> <span class="token function">grep</span> redis
</code></pre> 
<p><img src="https://images2.imgbox.com/85/1a/W96RE1zp_o.png" alt="在这里插入图片描述"><br> 【3】如果需要在其他主机连接<code>redis</code>，记得要修改<code>redis.conf</code>配置文件，增加一行<code>bind * -::* </code>，即配置了允许所有主机连接。<br> <img src="https://images2.imgbox.com/67/41/c9MDF4H5_o.png" alt="在这里插入图片描述"><br> 修改完后记得重启<code>redis</code>服务使配置文件生效。</p> 
<p>【4】进入<code>redis</code>客户端模式：</p> 
<pre><code class="prism language-shell">./bin/redis-cli
</code></pre> 
<p>关闭<code>redis</code>客户端模式</p> 
<pre><code class="prism language-shell"><span class="token function">shutdown</span>
</code></pre> 
<p>【5】通过<code>CONFIG GET *</code>的方式读取所有配置项。这里列举下比较重要的配置项</p> 
<table><thead><tr><th>配置项名称</th><th>配置项值范围</th><th>说明</th></tr></thead><tbody><tr><td>daemonize</td><td>yes、no</td><td><code>yes</code>表示启用守护进程，默认是<code>no</code>即不以守护进程方式运行。其中<code>Windows</code>系统下不支持启用守护进程方式运行</td></tr><tr><td>port</td><td></td><td>指定<code>Redis</code>监听端口，默认端口为<code>6379</code></td></tr><tr><td>bind</td><td></td><td>绑定的主机地址，如果需要设置远程访问则直接将这个属性备注下或者改为<code>bind *</code>即可，这个属性和下面的protected-mode控制了是否可以远程访问 。</td></tr><tr><td>protected-mode</td><td>yes 、no</td><td>保护模式，该模式控制外部网是否可以连接<code>redis</code>服务，默认是<code>yes</code>，所以默认我们外网是无法访问的，如需外网连接<code>rendis</code>服务则需要将此属性改为<code>no</code>。</td></tr><tr><td>timeout</td><td>300</td><td>当客户端闲置多长时间后关闭连接，如果指定为<code>0</code>，表示关闭该功能</td></tr><tr><td>loglevel</td><td>debug、verbose、notice、warning</td><td>日志级别，默认为<code>notice</code></td></tr><tr><td>databases</td><td>16</td><td>设置数据库的数量，默认的数据库是<code>0</code>。整个通过客户端工具可以看得到</td></tr><tr><td>rdbcompression</td><td>yes、no</td><td>指定存储至本地数据库时是否压缩数据，默认为<code>yes</code>，<code>Redis</code>采用<code>LZF</code>压缩，如果为了节省<code>CPU</code>时间，可以关闭该选项，但会导致数据库文件变的巨大。</td></tr><tr><td>dbfilename</td><td>dump.rdb</td><td>指定本地数据库文件名，默认值为<code>dump.rdb</code></td></tr><tr><td>dir</td><td></td><td>指定本地数据库存放目录</td></tr><tr><td>requirepass</td><td></td><td>设置 Redis 连接密码，如果配置了连接密码，客户端在连接<code>Redis</code>时需要通过<code>AUTH &lt;password&gt;</code>命令提供密码，默认关闭</td></tr><tr><td>maxclients</td><td>0</td><td>设置同一时间最大客户端连接数，默认无限制，<code>Redis</code>可以同时打开的客户端连接数为<code>Redis</code>进程可以打开的最大文件描述符数，如果设置<code>maxclients 0</code>，表示不作限制。当客户端连接数到达限制时，<code>Redis</code>会关闭新的连接并向客户端返回<code>max number of clients reached</code>错误信息。</td></tr><tr><td>maxmemory</td><td>XXX </td><td>指定<code>Redis</code>最大内存限制，<code>Redis</code>在启动时会把数据加载到内存中，达到最大内存后，<code>Redis</code>会先尝试清除已到期或即将到期的<code>Key</code>，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。<code>Redis</code>新的<code>vm</code>机制，会把 Key 存放内存，<code>Value</code>会存放在<code>swap</code>区。配置项值范围列里<code>XXX</code>为数值。</td></tr></tbody></table> 
<p>【6】将<code>redis</code>加入到开机启动</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/rc.local //在里面添加内容：/usr/local/redis/bin/redis-server /usr/local/redis/etc/redis.conf <span class="token punctuation">(</span>意思就是开机调用这段开启redis的命令<span class="token punctuation">)</span>
</code></pre> 
<p>【7】将<code>redis-cli</code>，<code>redis-server</code>拷贝到<code>bin</code>下，让<code>redis-cli</code>指令可以在任意目录下直接使用</p> 
<pre><code class="prism language-shell"><span class="token function">cp</span> /usr/local/redis/bin/redis-server /usr/local/bin/
<span class="token function">cp</span> /usr/local/redis/bin/redis-cli /usr/local/bin/
</code></pre> 
<p>【8】设置<code>redis</code>密码</p> 
<pre><code class="prism language-shell">a.运行命令：redis-cli
b.查看现有的redis密码<span class="token punctuation">(</span>可选操作，可以没有<span class="token punctuation">)</span>
　　运行命令：config get requirepass 如果没有设置过密码的话运行结果会如下图所示
c.设置redis密码
    运行命令：config <span class="token builtin class-name">set</span> requirepass ****<span class="token punctuation">(</span>****为你要设置的密码<span class="token punctuation">)</span>，设置成功的话会返回‘OK’字样
d.测试连接
　　重启redis服务
　　//（redis-cli <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-p</span> <span class="token number">6379</span> <span class="token parameter variable">-a</span> ****（****为你设置的密码））
　　输入 redis-cli 进入命令模式，使用 auth <span class="token string">'*****'</span> （****为你设置的密码）登陆　　　　　 
</code></pre> 
<p>【9】让外网能够访问<code>redis</code></p> 
<pre><code class="prism language-shell">a.配置防火墙:  **firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">6379</span>/tcp --permanent**（开放**6379**端口）

**systemctl restart firewalld**（重启防火墙以使配置即时生效）

查看系统所有开放的端口：firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports

b.此时 虽然防火墙开放了6379端口，但是外网还是无法访问的，因为redis监听的是127.0.0.1：6379，并不监听外网的请求。

（一）把文件夹目录里的redis.conf配置文件里的bind <span class="token number">127.0</span>.0.1前面加<span class="token comment">#注释掉</span>

（二）命令：redis-cli连接到redis后，通过 config get  daemonize和config get  protected-mode 是不是都为no，如果不是，就用config <span class="token builtin class-name">set</span> 配置名 属性 改为no。
</code></pre> 
<p>【10】<code>Linux</code>系统下设置<code>redis</code>的密码：<br> 1、进入<code>redis</code>操作的命令行：</p> 
<pre><code class="prism language-shell">redis-cli
</code></pre> 
<p>2、查看现有的<code>redis</code>密码(可选操作，可以没有)</p> 
<pre><code class="prism language-shell">config get requirepass
</code></pre> 
<p>3、设置<code>redis</code>密码</p> 
<pre><code class="prism language-shell">config <span class="token builtin class-name">set</span> requirepass ****<span class="token punctuation">(</span>****为你要设置的密码<span class="token punctuation">)</span>，设置成功的话会返回‘OK’字样
</code></pre> 
<p>4、重启<code>redis</code>服务：<code>ctrl+C</code>退出当前的命令行模式后运行命令：</p> 
<pre><code class="prism language-shell">redis-cli <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-p</span> <span class="token number">6379</span> <span class="token parameter variable">-a</span> ****（****为你心设置的密码）
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b3de88bf55345010f7bf16b5f60c91db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">1. Python语言介绍——《跟老吕学Python》</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b1ac76fc6d36030e54d339fb499b0a6e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringMVC基础详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>