<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jmeter 测试数据库的详细方法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/bf42d027a7f7f5001e9ee78459f19e6f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="jmeter 测试数据库的详细方法">
  <meta property="og:description" content="当前版本：
jmeter 5.6.3mysql 5.7.39 简介
JMeter是一个功能强大的开源性能测试工具，它被广泛用于测试Web应用程序、Web服务、API、数据库以及其他类型的应用程序。支持测试数据库的性能和可靠性，可以模拟多个并发用户对数据库执行各种不同类型的操作，例如查询、插入、更新和删除等。这篇文章主要介绍测试数据库的基本方法，压测见《jmeter 专栏》其他文章。
文章目录如下
1. jmeter 怎么测试数据库
1.1. 线程组的介绍
1.2. 数据库连接配置
1.3. 数据库业务构造
1.4. 下载依赖库
2. 测试案例
2.1. 测试读业务
2.2. 测试写业务
1. jmeter 怎么测试数据库 测试数据库与测试web程序类似，web程序的测试需要提供接口，而数据库测试则需要提供依赖库和连接串来测试。
1.1. 线程组的介绍 在学习测试数据库之前需要了解什么是线程组？
线程组是用于模拟并发用户的行为，它是一组线程的集合，每个线程代表一个虚拟用户，可以并发执行相同或不同的测试请求。
在执行过程中，每个线程独立运行，按照指定的逻辑顺序发送请求并接收响应。线程组可以指定启动和停止时间，从而控制测试的持续时间。此外，线程组还可以设置启动延迟和循环计数，以增加测试的复杂性和真实性。通过如下步骤添加：
右击测试计划 → 添加 → 线程(用户) → 线程组 串行测试通常按如下配置：
并发测试通常按如下配置：
它的整体界面由3部分组成：名称设置、异常设置、线程设置。
【第1部分】名称设置
名称：表示这一组业务的名字，比如可以修改为 &#34;用户登录&#34;、&#34;用户购物&#34;等。注释：名称用宏观的方式来写，那么注释就是把业务的一些细节写上去，便于理解。 【第2部分】异常设置
继续：无论当前取样器是否执行成功或失败，都会继续执行下一个取样器。启动下一进程循环：即使当前线程组中有其他线程在运行，也会立即启动新的线程循环。停止线程：当测试计划中有多个线程组，在停止当前线程之后，其他线程组将继续执行。停止测试：停止整个测试计划。 【第3部分】线程设置
线程数：模拟用户的并发数。接口测试一般1个就行，压测就根据情况而定。Ramp-Up时间：指定启动所有线程所需的时间。例如设置为5秒，且有10个线程，则每秒启动2个线程，直到所有线程都被启动。循环次数：每个线程循环的次数。例如设置线程2个，循环10次，那么业务就会执行20次。如果是压测的话勾选永远，再使用调度器指定测试时间。Same user on each iteration：每个迭代使用相同的用户。延迟创建线程直到需要：自动周期性控制。调度器：一般压测需要勾选调度器，指定压测的时长。 1.2. 数据库连接配置 在学习线程组后，第2步需要了解数据库怎么连接。
数据库通过配置元件中的《JDBC Connection Configuration》去连接，添加步骤如下：
右击测试计划 → 添加 → 配置元件 → JDBC Connection Configuration 配置 MySQL 示例">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-02-26T08:00:00+08:00">
    <meta property="article:modified_time" content="2024-02-26T08:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">jmeter 测试数据库的详细方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <hr> 
<p><strong><span style="color:#a2e043;">当前版本：</span></strong></p> 
<ul><li><strong><span style="color:#a2e043;">jmeter 5.6.3</span></strong></li><li><strong><span style="color:#a2e043;">mysql 5.7.39</span></strong></li></ul> 
<hr> 
<p><strong>简介</strong></p> 
<blockquote> 
 <p>    JMeter是一个功能强大的开源性能测试工具，它被广泛用于测试Web应用程序、Web服务、API、数据库以及其他类型的应用程序。支持测试数据库的性能和可靠性，可以模拟多个并发用户对数据库执行各种不同类型的操作，例如查询、插入、更新和删除等。这篇文章主要介绍测试数据库的基本方法，压测见《jmeter 专栏》其他文章。</p> 
</blockquote> 
<p>        </p> 
<p id="main-toc"><strong>文章目录如下</strong></p> 
<p id="1.%20jmeter%20%E6%80%8E%E4%B9%88%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:0px;"><a href="#1.%20jmeter%20%E6%80%8E%E4%B9%88%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">1. jmeter 怎么测试数据库</a></p> 
<p id="1.1.%20%E7%BA%BF%E7%A8%8B%E7%BB%84%E7%9A%84%E4%BB%8B%E7%BB%8D-toc" style="margin-left:40px;"><a href="#1.1.%20%E7%BA%BF%E7%A8%8B%E7%BB%84%E7%9A%84%E4%BB%8B%E7%BB%8D" rel="nofollow">1.1. 线程组的介绍</a></p> 
<p id="1.2.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#1.2.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE" rel="nofollow">1.2. 数据库连接配置</a></p> 
<p id="1.3.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%9A%E5%8A%A1%E6%9E%84%E9%80%A0-toc" style="margin-left:40px;"><a href="#1.3.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%9A%E5%8A%A1%E6%9E%84%E9%80%A0" rel="nofollow">1.3. 数据库业务构造</a></p> 
<p id="1.4.%20%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E5%BA%93-toc" style="margin-left:40px;"><a href="#1.4.%20%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E5%BA%93" rel="nofollow">1.4. 下载依赖库</a></p> 
<p id="2.%20%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B-toc" style="margin-left:0px;"><a href="#2.%20%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B" rel="nofollow">2. 测试案例</a></p> 
<p id="2.1.%20%E6%B5%8B%E8%AF%95%E8%AF%BB%E4%B8%9A%E5%8A%A1-toc" style="margin-left:40px;"><a href="#2.1.%20%E6%B5%8B%E8%AF%95%E8%AF%BB%E4%B8%9A%E5%8A%A1" rel="nofollow">2.1. 测试读业务</a></p> 
<p id="2.2.%20%E6%B5%8B%E8%AF%95%E5%86%99%E4%B8%9A%E5%8A%A1-toc" style="margin-left:40px;"><a href="#2.2.%20%E6%B5%8B%E8%AF%95%E5%86%99%E4%B8%9A%E5%8A%A1" rel="nofollow">2.2. 测试写业务</a></p> 
<hr id="hr-toc"> 
<p>        </p> 
<h2 id="1.%20jmeter%20%E6%80%8E%E4%B9%88%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BA%93">1. jmeter 怎么测试数据库</h2> 
<p>测试数据库与测试web程序类似，web程序的测试需要提供接口，而数据库测试则需要提供依赖库和连接串来测试。</p> 
<h3 id="1.1.%20%E7%BA%BF%E7%A8%8B%E7%BB%84%E7%9A%84%E4%BB%8B%E7%BB%8D">1.1. 线程组的介绍</h3> 
<p><strong>在学习测试数据库之前需要了解什么是线程组？</strong></p> 
<p>    线程组是用于模拟并发用户的行为，它是一组线程的集合，每个线程代表一个虚拟用户，可以并发执行相同或不同的测试请求。</p> 
<p>    在执行过程中，每个线程独立运行，按照指定的逻辑顺序发送请求并接收响应。线程组可以指定启动和停止时间，从而控制测试的持续时间。此外，线程组还可以设置启动延迟和循环计数，以增加测试的复杂性和真实性。通过如下步骤添加：</p> 
<ul><li>右击测试计划 → 添加 → 线程(用户) → 线程组</li></ul> 
<p><img alt="" height="206" src="https://images2.imgbox.com/33/8d/cIJbukAj_o.png" width="959"></p> 
<p>        </p> 
<p>串行测试通常按如下配置：</p> 
<p><img alt="" height="645" src="https://images2.imgbox.com/a3/ce/Ms3roEow_o.png" width="699"></p> 
<p>并发测试通常按如下配置：</p> 
<p><img alt="" height="644" src="https://images2.imgbox.com/d7/b4/cFIorqVq_o.png" width="736"></p> 
<p>        </p> 
<p>它的整体界面由3部分组成：名称设置、异常设置、线程设置。</p> 
<p><strong>【第1部分】名称设置</strong></p> 
<p><img alt="" height="145" src="https://images2.imgbox.com/77/56/Z8MrhAig_o.png" width="560"></p> 
<ul><li><span style="color:#4da8ee;">名称</span>：表示这一组业务的名字，比如可以修改为 "用户登录"、"用户购物"等。</li><li><span style="color:#4da8ee;">注释</span>：名称用宏观的方式来写，那么注释就是把业务的一些细节写上去，便于理解。</li></ul> 
<p>        </p> 
<p><strong>【第2部分】异常设置</strong></p> 
<p><img alt="" height="228" src="https://images2.imgbox.com/c2/af/rAu7CpgU_o.png" width="714"></p> 
<ul><li><span style="color:#4da8ee;">继续</span>：无论当前取样器是否执行成功或失败，都会继续执行下一个取样器。</li><li><span style="color:#4da8ee;">启动下一进程循环</span>：即使当前线程组中有其他线程在运行，也会立即启动新的线程循环。</li><li><span style="color:#4da8ee;">停止线程</span>：当测试计划中有多个线程组，在停止当前线程之后，其他线程组将继续执行。</li><li><span style="color:#4da8ee;">停止测试</span>：停止整个测试计划。</li></ul> 
<p>        </p> 
<p><strong>【第3部分】线程设置</strong></p> 
<p><img alt="" height="691" src="https://images2.imgbox.com/c5/bb/CoMMNdd7_o.png" width="766"></p> 
<ul><li><span style="color:#4da8ee;">线程数</span>：模拟用户的并发数。接口测试一般1个就行，压测就根据情况而定。</li><li><span style="color:#4da8ee;">Ramp-Up时间</span>：指定启动所有线程所需的时间。例如设置为5秒，且有10个线程，则每秒启动2个线程，直到所有线程都被启动。</li><li><span style="color:#4da8ee;">循环次数</span>：每个线程循环的次数。例如设置线程2个，循环10次，那么业务就会执行20次。如果是压测的话勾选永远，再使用调度器指定测试时间。</li><li><span style="color:#4da8ee;">Same user on each iteration</span>：每个迭代使用相同的用户。</li><li><span style="color:#4da8ee;">延迟创建线程直到需要</span>：自动周期性控制。</li><li><span style="color:#4da8ee;">调度器</span>：一般压测需要勾选调度器，指定压测的时长。</li></ul> 
<p>        </p> 
<h3 id="1.2.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE">1.2. 数据库连接配置</h3> 
<p>在学习线程组后，第2步需要了解数据库怎么连接。</p> 
<p>数据库通过配置元件中的《JDBC Connection Configuration》去连接，添加步骤如下：</p> 
<ul><li>右击测试计划 → 添加 → 配置元件 → JDBC Connection Configuration</li></ul> 
<p><img alt="" height="483" src="https://images2.imgbox.com/77/cc/gs0NbXEL_o.png" width="932"></p> 
<p>        </p> 
<p>配置 MySQL 示例</p> 
<p><img alt="" height="886" src="https://images2.imgbox.com/78/f9/BS96foXX_o.png" width="1200"></p> 
<p><img alt="" height="403" src="https://images2.imgbox.com/ed/21/JIfROrbe_o.png" width="1200"></p> 
<blockquote> 
 <p>jdbc:mysql://localhost:3306/mysql</p> 
 <p>com.mysql.jdbc.Driver</p> 
</blockquote> 
<p>测试其他数据库只需要修改对应的连接串和驱动即可：</p> 
<pre><code class="language-python">"""MySQL"""
URL：jdbc:mysql://[IP]:[端口]/[数库名]  # jdbc:mysql://localhost:3306/mysql
Driver:com.mysql.jdbc.Driver</code></pre> 
<pre><code class="language-python">"""Oracle"""
URL：jdbc:oracle:thin:@[IP]:[端口]:[数库名]  #jdbc:oracle:thin:@localhost:1521:orcl
Driver：oracle.jdbc.OracleDriver</code></pre> 
<pre><code class="language-python">"""PostgreSQL"""
URL：jdbc:postgresql://[IP]:[端口]/[数库名]  # jdbc:postgresql://localhost:5432/postgres
Driver:org.postgresql.Driver</code></pre> 
<p>        </p> 
<p>它的整体界面由5部分组成：名称、配置变量、连接池、连接验证和数据库配置</p> 
<p><strong>【第1部分】名称</strong></p> 
<p><img alt="" height="152" src="https://images2.imgbox.com/7a/0f/df3fyBUa_o.png" width="564"></p> 
<p>这里的名称和注释和线程组的名称是一个意思，自定义名称即可。这里的JDBC连接配置指的是：jmeter 通过JDBC来访问数据库，访问时数据库查询的接口便是JDBC。</p> 
<p>        </p> 
<p><strong>【第２部分】配置变量</strong></p> 
<p><img alt="" height="232" src="https://images2.imgbox.com/68/0e/GlWZVtiI_o.png" width="591"></p> 
<p>我们需要在标注的红框中填写一个自定义的变量名，可以是aaa，也可以是bbb（名称自定义），变量的作用就是后续测试的引用。</p> 
<p>比如当需要测试一条业务 select 1; 时，那么需要向对应的数据库发起请求，而发起请求是需要一些提供一些数据库参数的。所以我们在《JDBC Connection Configuration》中已经配置好了数据库的连接方式，那么在其他业务中直接引用这个配置即可，而引用的方式就是自定义的变量。</p> 
<p>        </p> 
<p><strong>【第３部分】连接池</strong></p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/55/f5/bcTMFeS1_o.png" width="978"></p> 
<ul><li><span style="color:#4da8ee;">Max Number of Connections</span>：设置连接池中的最大连接数（0表示不限制最大连接数），超过此数量的请求将在等待队列中等待连接资源。连接池是一种管理数据库连接的机制，它允许应用程序共享和重复使用连接，从而提高性能和效率。</li><li><span style="color:#4da8ee;">Max Wait (ms)</span>：设置在连接池中等待可用连接时的最大等待时间。当测试中的并发用户线程请求数据库连接时，如果所有的连接已经被占用且没有空闲连接可用，那么新的连接请求会被放入一个等待队列中，Max Wait (ms)定义了在该队列中等待连接的最长时间。如果超过了设定时间仍然无法获取连接，则等待的请求将会放弃并继续执行其他操作。</li><li><span style="color:#4da8ee;">Time Between Eviction Runs (ms)</span>：设置连接池中进行连接回收和清理的时间间隔（0表示禁用连接回收和清理机制）。连接池中的连接在使用过程中可能会因为各种原因变得无效，例如连接超时、数据库关闭等。为了保持连接池的健康和性能，需要定期回收和清理这些无效的连接。</li><li><span style="color:#4da8ee;">Auto Commit</span>：设置是否在每个SQL语句执行之后自动提交事务。True：每个SQL语句在执行完之后会立即自动提交事务。False：需要手动调用提交命令来提交事务。</li><li><span style="color:#4da8ee;">Transaction Isolation</span>：设置数据库事务的隔离级别。 
  <ul><li><span style="color:#7b7f82;">DEFAULT：使用数据库默认的事务隔离级别。</span></li><li><span style="color:#7b7f82;">READ_UNCOMMITTED（读取未提交的数据）：事务可以读取其他事务未提交的数据。该隔离级别提供了最低的数据一致性和最高的并发性，但也可能出现脏读、不可重复读和幻读等问题。</span></li><li><span style="color:#7b7f82;">READ_COMMITTED（读取已提交的数据）：事务只能读取其他事务已经提交的数据。该隔离级别保证了脏读的防止，但仍可能出现不可重复读和幻读的问题。</span></li><li><span style="color:#7b7f82;">REPEATABLE_READ（可重复读取）：事务在整个事务过程中可以多次读取相同的数据，并且其他事务不能对其进行更新。该隔离级别保证了脏读和不可重复读的防止，但仍可能出现幻读的问题。</span></li><li><span style="color:#7b7f82;">SERIALIZABLE（串行化）：事务之间完全串行执行，确保了最高的数据一致性，但同时也可能导致并发性能下降。</span></li></ul></li><li><span style="color:#4da8ee;">Pool Prepared Statements</span>：设置是否在连接池中缓存预编译的SQL语句（可以提高性能和安全性）。如果设置了预编译语句，JMeter会在连接池中缓存预编译的SQL语句，并在需要时复用。如果设置为-1，则每次执行SQL语句时都会重新编译。</li><li><span style="color:#4da8ee;">Preinit Pool</span>：指定是否在 JMeter 启动时预先初始化连接池。若设置为 True，JMeter 在启动时会在连接池中预先初始化一定数量的连接。在测试执行过程中，使用数据库连接的操作就可以直接获取到已经预先初始化的连接，而无需在运行时创建新的连接。这种预先初始化的方式可以显著减少数据库连接的创建时间，提高性能，并减轻数据库的负载。</li><li><span style="color:#4da8ee;">初始化sql框</span>：允许按照每行一个 SQL 语句的格式提供多个初始化语句，每行的 SQL 语句都将在连接建立之后按照顺序执行。这些 SQL 语句可以包括一些初始化或准备工作，例如设置连接的字符集、创建临时表、加载数据库函数、设定连接的隔离级别等。</li></ul> 
<p>        </p> 
<p><strong>【第４部分】连接验证</strong></p> 
<p><img alt="" height="164" src="https://images2.imgbox.com/2b/5a/Fw1FGwDV_o.png" width="782"></p> 
<ul><li><span style="color:#4da8ee;">Test While Idle</span>：指定是否在连接处于空闲状态时进行测试（也就是没有被使用的状态）。True 需要配置下面2个选项。</li><li><span style="color:#4da8ee;">Soft Min Evictable Idle Time(ms)</span>：指定连接在空闲状态下被认为是可回收的最短时间。连接池中的连接在使用完毕后，如果处于空闲状态一段时间，可以被回收并释放资源。Soft Min Evictable Idle Time (ms) 选项定义了一个最小的空闲时间，当连接空闲时间超过这个阈值时，连接可以被回收。通过合理设置该选项的值，可以控制连接池中连接的空闲回收策略，平衡资源利用和性能开销。</li><li><span style="color:#4da8ee;">Validation Query</span>：指定在测试数据库连接时执行的验证查询语句，一般使用最简单的语句，比如 select 1</li></ul> 
<p>        </p> 
<p><strong>【第５部分】数据库配置</strong></p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/6f/17/oCBRsh7H_o.png" width="766"></p> 
<ul><li><span style="color:#4da8ee;">Database URL</span>：设置连接到数据库服务器的 URL。包括数据库服务器的主机名、端口号、数据库名称以及其他连接参数。</li><li><span style="color:#4da8ee;">JDBC Driver class</span>：指定数据库驱动程序的类名。</li><li><span style="color:#4da8ee;">Username</span>：连接数据库的用户名。</li><li><span style="color:#4da8ee;">Password</span>：数据库用户的密码。</li><li><span style="color:#4da8ee;">Connection Properties</span>：设置额外的连接属性，定制数据库连接的行为，可以针对特定的连接需求进行优化和调整。 
  <ul><li><span style="color:#7b7f82;">characterEncoding: 字符编码，用于设置数据库连接的字符集编码。</span></li><li><span style="color:#7b7f82;">ssl: 是否启用 SSL 加密连接。</span></li><li><span style="color:#7b7f82;">fetchSize: 数据库查询时一次性从结果集中获取的记录数量。</span></li><li><span style="color:#7b7f82;">maxRows: 结果集的最大行数限制。</span></li><li><span style="color:#7b7f82;">loginTimeout: 登录超时时间，即连接到数据库服务器的最大等待时间。</span></li></ul></li></ul> 
<p>        </p> 
<h3 id="1.3.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%9A%E5%8A%A1%E6%9E%84%E9%80%A0">1.3. 数据库业务构造</h3> 
<p>jmeter 通过取样器中的《JDBC Request》来实现业务，添加步骤如下：</p> 
<ul><li>右击线程组 → 添加 → 取样器 → JDBC Request</li></ul> 
<p><img alt="" height="440" src="https://images2.imgbox.com/b6/8e/x6iVHoQE_o.png" width="974"></p> 
<p>        </p> 
<p>MySQL 业务示例</p> 
<p><img alt="" height="881" src="https://images2.imgbox.com/1a/b9/1pO0bwvl_o.png" width="878"></p> 
<p>        </p> 
<p>它的整体页面由4部分组成：名称、JDBC引用配置、SQL业务、其他属性。</p> 
<p><strong>【第1部分】名称</strong></p> 
<p><img alt="" height="137" src="https://images2.imgbox.com/77/be/sTLasGNp_o.png" width="454"></p> 
<p>这里的名称和注释和线程组的名称是一个意思，自定义名称即可。它的作用主要是构造业务，所以一般命名为：查询用户余额、用户取款，或者更直接的 select、update 都行。</p> 
<p>        </p> 
<p><strong>【第2部分】JDBC引用配置</strong></p> 
<p><img alt="" height="98" src="https://images2.imgbox.com/f7/75/QwapmtJq_o.png" width="747"></p> 
<p>执行SQL业务需要按指定的IP、端口、用户等信息。如果每个业务都需要这么写就太麻烦了，所以统一在《JDBC Connection Configuration》中配置，构造业务直接引用这个配置即可：</p> 
<p><img alt="" height="239" src="https://images2.imgbox.com/70/81/4u2BOY2T_o.png" width="627"></p> 
<p>《JDBC Request》引用的变量必须与《JDBC Connection Configuration》设置的变量一样。</p> 
<p>        </p> 
<p><strong>【第3部分】SQL业务</strong></p> 
<p><img alt="" height="185" src="https://images2.imgbox.com/4d/f1/XuqFLrPH_o.png" width="818"></p> 
<p>SQL 类型说明如下： </p> 
<ul><li><span style="color:#4da8ee;">Select Statement</span>：执行1条数据库查询语句，例如 <span style="color:#956fe7;">SELECT、FROM、WHERE、JOIN </span>等。</li><li><span style="color:#4da8ee;">Update Statement</span>：执行1条数据库更新语句，例如 <span style="color:#956fe7;">修改、删除</span>或<span style="color:#956fe7;">插入</span>等。</li><li><span style="color:#4da8ee;">Callable Statement</span>：调用1条已定义的存储过程或函数的接口，例如 <span style="color:#956fe7;">CALL 存储过程名()</span>。</li><li><span style="color:#4da8ee;">Prepared Select Statement</span>：编写具有占位符的SQL查询语句，例如 <span style="color:#956fe7;">SELECT * FROM t1 WHERE id &lt; ? AND num &gt; ?</span>; 使用问号表示参数占位符，在 "Parameter Values" 中按顺序输入值（多个值以逗号分割），并在 "Parameter types" 中指定类型。</li><li><span style="color:#4da8ee;">Prepared Update Statement</span>：与上面 "Prepared Select Statement" 的作用一样，支持修改、删除和插入语句，不支持查询。</li><li><span style="color:#4da8ee;">Commit</span>：指定1个提交事务的操作。在使用 “Commit” SQL类型时，需要确保数据库连接以及之前的数据库操作都是在同一个事务中。提交操作只有在事务处于活动状态时才会起作用。如果没有使用到事务或没有进行相应的数据库操作，那么 “Commit” 操作将不会产生任何效果。</li><li><span style="color:#4da8ee;">Rollback</span>：指定1个回滚事务的操作。方式与上面 "Commit" 类似。</li><li><span style="color:#4da8ee;">AutoCommit(false)</span>：禁用自动提交模式（禁止自动将每个SQL操作作为一个单独的事务提交到数据库中）。</li><li><span style="color:#4da8ee;">AutoCommit(true)</span>：启用自动提交模式（每个SQL操作都会立即提交到数据库中）。</li></ul> 
<p>        </p> 
<p><strong>【第4部分】其他属性</strong></p> 
<p><img alt="" height="304" src="https://images2.imgbox.com/88/be/8G6FpS7n_o.png" width="776"></p> 
<ul><li><span style="color:#4da8ee;">Parameter values</span>：指定 SQL 语句中的参数值的属性。比如语句为 select * from t1 where id = ?; 这里就是对问号指定参数值，比如10或者jmeter内置变量等（多个参数用逗号分割）。</li><li><span style="color:#4da8ee;">Parameter types</span>：指定参数类型，与上面的 "Parameter values" 一起使用，比如参数为数字，这里类型就是Integer；参数为字符，类型为varchar。 
  <ul><li><span style="color:#7b7f82;">integer: 整数类型，用于表示整数参数值。</span></li><li><span style="color:#7b7f82;">long: 长整数类型，用于表示长整数参数值。</span></li><li><span style="color:#7b7f82;">float: 浮点数类型，用于表示浮点数参数值。</span></li><li><span style="color:#7b7f82;">double: 双精度浮点数类型，用于表示双精度浮点数参数值。</span></li><li><span style="color:#7b7f82;">varchar: 字符串类型，用于表示字符串参数值。</span></li><li><span style="color:#7b7f82;">boolean: 布尔类型，用于表示布尔参数值（true或false）。</span></li><li><span style="color:#7b7f82;">date: 日期类型，用于表示日期参数值。</span></li><li><span style="color:#7b7f82;">time: 时间类型，用于表示时间参数值。</span></li><li><span style="color:#7b7f82;">timestamp: 时间戳类型，用于表示时间戳参数值。</span></li></ul></li><li><span style="color:#4da8ee;">Variable names</span>：指定SQL查询的结果集中的列名，以便提取和存储这些结果的属性。通过设置这个属性，可以将查询结果的特定列值存储到JMeter变量中，以供后续的处理和验证使用。</li><li><span style="color:#4da8ee;">Result variable name</span>：指定 SQL 查询的结果集的变量名，以便将整个结果集存储到一个变量中。</li><li><span style="color:#4da8ee;">Query timeout (s)</span>：设置SQL查询的超时时间的属性。这个属性可以控制JMeter等待SQL查询的时间，如果查询在指定的超时时间内没有完成，JMeter将中断查询并报告超时。在某些情况下，SQL查询可能需要很长时间才能完成，例如查询大量的数据或执行复杂的操作。通过设置合适的查询超时时间，可以防止JMeter长时间等待查询结果而导致整个测试计划停顿或耗费过多的资源。</li><li><span style="color:#4da8ee;">Limit ResultSet</span>：用于限制结果集的大小。这个属性可以控制JMeter返回结果集的最大行数，从而减少数据传输和处理的负担。</li><li><span style="color:#4da8ee;">Handle ResultSet</span>：指定如何处理查询结果集。这个属性可以控制JMeter处理结果集的方式，包括获取行数、存储结果或不处理结果等。 
  <ul><li><span style="color:#7b7f82;">Store as String：让JMeter将整个结果集作为一个字符串存储到一个变量中。</span></li><li><span style="color:#7b7f82;">Count：让JMeter只获取结果集的行数而不返回实际的结果。</span></li></ul></li></ul> 
<p>        </p> 
<h3 id="1.4.%20%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E5%BA%93">1.4. 下载依赖库</h3> 
<p>前面3个小章节介绍了如何定义线程组、如何配置数据库连接、如何构造业务，学会这3种基本能够测试数据库。但是测试数据库需要依赖库，这里主要说明怎么下载。</p> 
<p>依赖库的使用方式有2种（选其一）：</p> 
<ol><li>测试计划最下面添加 jar 包。</li><li>将下载的 jar 放到 jmeter/lib 下面，重启jmeter。</li></ol> 
<p>        </p> 
<p><strong>1、下载 MySQL 依赖包</strong></p> 
<blockquote> 
 <p><a href="https://dev.mysql.com/downloads/" rel="nofollow" title="https://dev.mysql.com/downloads/">https://dev.mysql.com/downloads/</a></p> 
</blockquote> 
<p><img alt="" height="312" src="https://images2.imgbox.com/18/e2/G0LGwHe6_o.png" width="973"></p> 
<p><img alt="" height="493" src="https://images2.imgbox.com/29/e9/tjt2S2AF_o.png" width="1074"></p> 
<p><img alt="" height="727" src="https://images2.imgbox.com/ce/5a/ygFPKTma_o.png" width="1200"></p> 
<p>        </p> 
<p><strong>2、下载 Oracle 依赖包</strong></p> 
<blockquote> 
 <p><a href="https://www.oracle.com/cn/downloads" rel="nofollow" title="https://www.oracle.com/cn/downloads">https://www.oracle.com/cn/downloads</a></p> 
 <p>或者</p> 
 <p><a href="https://files.cnblogs.com/files/lymlike/ojdbc6-1.0.rar?t=1698889296&amp;download=true" rel="nofollow" title="https://files.cnblogs.com/files/lymlike/ojdbc6-1.0.rar?t=1698889296&amp;download=true">https://files.cnblogs.com/files/lymlike/ojdbc6-1.0.rar?t=1698889296&amp;download=true</a></p> 
 <p>（版本：ojdbc6-1.0 将包名后缀修改为 .jar）</p> 
</blockquote> 
<p>        </p> 
<p><strong>3、下载 PostgreSQL 依赖包</strong></p> 
<blockquote> 
 <p><a href="https://jdbc.postgresql.org/download/postgresql-42.3.4.jar" rel="nofollow" title="https://jdbc.postgresql.org/download/postgresql-42.3.4.jar">https://jdbc.postgresql.org/download/postgresql-42.3.4.jar</a></p> 
 <p>（版本 42.3.4）</p> 
</blockquote> 
<p>        </p> 
<h2 id="2.%20%E6%B5%8B%E8%AF%95%E6%A1%88%E4%BE%8B">2. 测试案例</h2> 
<h3 id="2.1.%20%E6%B5%8B%E8%AF%95%E8%AF%BB%E4%B8%9A%E5%8A%A1">2.1. 测试读业务</h3> 
<p>1、添加线程组</p> 
<p><img alt="" height="655" src="https://images2.imgbox.com/68/e4/gA65JyVJ_o.png" width="718"></p> 
<p>        </p> 
<p>2、添加JDBC配置</p> 
<p><img alt="" height="542" src="https://images2.imgbox.com/98/ca/Fn8ESZnU_o.png" width="755"></p> 
<p><img alt="" height="404" src="https://images2.imgbox.com/f1/48/xh791oo7_o.png" width="742">         </p> 
<p>3、添加几个常规业务</p> 
<p>【业务1】简单SQL</p> 
<p><img alt="" height="364" src="https://images2.imgbox.com/9a/83/jEbN7QBa_o.png" width="818"></p> 
<p>【业务2】参数化查询</p> 
<p><img alt="" height="705" src="https://images2.imgbox.com/30/6f/NdqFsk4j_o.png" width="814"></p> 
<p>【业务3】连接查询</p> 
<p><img alt="" height="707" src="https://images2.imgbox.com/bc/6b/TQYjhp5s_o.png" width="777"></p> 
<p>        </p> 
<p>4、添加查看结果树，执行测试</p> 
<ul><li>右击线程组 → 添加 → 监听器 → 查看结果树</li></ul> 
<p><img alt="" height="129" src="https://images2.imgbox.com/92/0b/TVKMuFGc_o.png" width="983"></p> 
<p>【查看结果树】-请求语句 </p> 
<p><img alt="" height="212" src="https://images2.imgbox.com/a9/79/mNwfUNoF_o.png" width="926"></p> 
<p><img alt="" height="224" src="https://images2.imgbox.com/16/0a/2kgPIgV5_o.png" width="1200"></p> 
<p><img alt="" height="381" src="https://images2.imgbox.com/7d/30/wbyHZRms_o.png" width="821"></p> 
<p>【查看结果树】-响应数据</p> 
<p><img alt="" height="258" src="https://images2.imgbox.com/53/aa/6d1xCbkU_o.png" width="881"></p> 
<p>        </p> 
<h3 id="2.2.%20%E6%B5%8B%E8%AF%95%E5%86%99%E4%B8%9A%E5%8A%A1">2.2. 测试写业务</h3> 
<p>添加线程组和JDBC配置与上面的读业务一致，这里列举几种常见的方式</p> 
<p>1、简单写语句</p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/0a/2a/sCQJMa4K_o.png" width="754"></p> 
<ul><li>所有的 insert、update、delete、create、alter 语句都选择《Update Statement》类型</li></ul> 
<p>        </p> 
<p>2、参数化语句</p> 
<p><img alt="" height="702" src="https://images2.imgbox.com/6a/77/itA3lsYy_o.png" width="746"></p> 
<p>        </p> 
<p>3、插入100行数据</p> 
<p>先配置计数器：右击线程组 → 添加 → 配置元件 → 计数器</p> 
<p><img alt="" height="470" src="https://images2.imgbox.com/83/2d/NN1QMQXc_o.png" width="589"></p> 
<p>线程组配置循环100次</p> 
<p><img alt="" height="531" src="https://images2.imgbox.com/61/16/kVw1pGCV_o.png" width="702"></p> 
<p>配置业务</p> 
<p><img alt="" height="476" src="https://images2.imgbox.com/7f/f1/bmBGHexL_o.png" width="761"></p> 
<p>运行测试，查看结果</p> 
<p><img alt="" height="291" src="https://images2.imgbox.com/26/f6/Tx9T1K0s_o.png" width="996"></p> 
<p><img alt="" height="255" src="https://images2.imgbox.com/67/ac/Y1NR6zmk_o.png" width="994"></p> 
<p><img alt="" height="579" src="https://images2.imgbox.com/cb/55/lj2WYTIl_o.png" width="990"></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81483891201f420242e0c4749da77637/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java实战：Spring Boot application.yml配置文件详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/576c2d6fdcbbd007bb7e07b1ea3679c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android13 设置固定热点ip地址192.168.43.1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>