<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ä»å›è°ƒåœ°ç‹±åˆ°Promiseä¹å›­ï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ– - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/235591bb21645b1712a15452da4bc708/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ä»å›è°ƒåœ°ç‹±åˆ°Promiseä¹å›­ï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–">
  <meta property="og:description" content="å‰è¨€
ğŸ“« å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å—æœ¨å…ƒå…ƒï¼Œçƒ­çˆ±æŠ€æœ¯å’Œåˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶äº¤æµï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼
ğŸ…Â ä¸ªäººä¸»é¡µï¼šå—æœ¨å…ƒå…ƒ
ç›®å½•
ä»€ä¹ˆæ˜¯Promise
Promiseçš„ç‰¹ç‚¹
Promiseçš„åŸºæœ¬ç”¨æ³•
åˆ›å»ºPromiseå¯¹è±¡
then
resolve/reject
catch
å¸¸ç”¨æ–¹æ³•
Promise.all()
Promise.allSettled()
Promise.race()Â Promise.any()Â Promise.finally()Â ç»“è¯­
ä»€ä¹ˆæ˜¯Promise Promiseæ˜¯ä¸€ç§å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå°šæœªå®Œæˆä½†é¢„æœŸå°†æ¥ä¼šå®Œæˆçš„æ“ä½œï¼Œå¹¶å¯ä»¥åœ¨è¿™ä¸ªæ“ä½œå®Œæˆæˆ–å¤±è´¥æ—¶å¤„ç†ç›¸åº”çš„ç»“æœã€‚Promise æä¾›äº†ä¸€ç§æ›´æ¸…æ™°å’Œç»“æ„åŒ–çš„æ–¹å¼æ¥ç¼–å†™å’Œç®¡ç†å¼‚æ­¥ä»£ç ï¼Œé¿å…äº†â€œå›è°ƒåœ°ç‹±â€ï¼ˆcallback hellï¼‰çš„å‡ºç°ã€‚
ç®€å•æ¥è¯´ï¼ŒPromiseå°±ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚
å›è°ƒåœ°ç‹± Promiseå‡ºç°ä¹‹å‰ï¼ŒJavaScriptçš„å¼‚æ­¥æœºåˆ¶ä¸»è¦é€šè¿‡å›è°ƒå‡½æ•°æ¥å®ç°ï¼Œä½†ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šå¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—æ—¶ä¼šé€ æˆå›è°ƒå‡½æ•°åœ°ç‹±ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚
callback1(function(result1) { callback2(result1, function(result2) { callback3(result2, function(result3) { callback4(result3, function(result4) { // æœ€ç»ˆç»“æœå¤„ç† console.log(result4); }); }); }); }); åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœéƒ½è¢«ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œéšç€å¼‚æ­¥æ“ä½œçš„å¢åŠ ï¼Œè¿™ç§åµŒå¥—ä¼šå˜å¾—å¤æ‚å’Œéš¾ä»¥ç®¡ç†ã€‚
è€Œä½¿ç”¨ Promise çš„æ–¹å¼å¯ä»¥å°†åµŒå¥—çš„å›è°ƒå‡½æ•°ä½œä¸ºé“¾å¼è°ƒç”¨ï¼Œä»è€Œé¿å…å›è°ƒåœ°ç‹±ã€‚
Promiseçš„ç‰¹ç‚¹ Promiseå®ä¾‹æœ‰ä¸‰ç§çŠ¶æ€ï¼š
pendingï¼šè¿›è¡Œä¸­ï¼Œæ˜¯åˆå§‹çŠ¶æ€fulfilledï¼šå·²æˆåŠŸrejectedï¼šå·²å¤±è´¥ Promiseå®ä¾‹æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼š
pending -&gt; fulfilledÂ pending -&gt; rejected å½“æŠŠä¸€ä»¶äº‹æƒ…äº¤ç»™promiseæ—¶ï¼Œå®ƒçš„çŠ¶æ€å°±æ˜¯pendingï¼Œä»»åŠ¡å®Œæˆäº†çŠ¶æ€å°±å˜æˆäº†fulfilledï¼Œæ²¡æœ‰å®Œæˆå¤±è´¥äº†å°±å˜æˆäº†rejectedã€‚çŠ¶æ€çš„æ”¹å˜æ˜¯é€šè¿‡ resolve() å’Œ reject() å‡½æ•°æ¥å®ç°çš„ã€‚
Promiseçš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š
ç‰¹ç‚¹1ï¼šåªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚
ç‰¹ç‚¹2ï¼šå®ä¾‹çš„çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå°±å‡å›ºäº†ï¼Œæ— æ³•å†è¢«æ”¹å˜äº†ã€‚
Promiseçš„åŸºæœ¬ç”¨æ³• åˆ›å»ºPromiseå¯¹è±¡ ES6 è§„å®šï¼ŒPromiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆPromiseå®ä¾‹ã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-19T23:58:21+08:00">
    <meta property="article:modified_time" content="2024-08-19T23:58:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ä»å›è°ƒåœ°ç‹±åˆ°Promiseä¹å›­ï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>å‰è¨€</strong></p> 
<blockquote> 
 <p>Â ğŸ“« å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å—æœ¨å…ƒå…ƒï¼Œçƒ­çˆ±æŠ€æœ¯å’Œåˆ†äº«ï¼Œæ¬¢è¿å¤§å®¶äº¤æµï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼</p> 
 <p>Â ğŸ…Â <strong>ä¸ªäººä¸»é¡µï¼š<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><a href="https://blog.csdn.net/weixin_43288600" title="å—æœ¨å…ƒå…ƒ">å—æœ¨å…ƒå…ƒ</a></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p> 
</blockquote> 
<hr> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="%E4%BB%80%E4%B9%88%E6%98%AFPromise-toc" style="margin-left:0px;"><a href="#%E4%BB%80%E4%B9%88%E6%98%AFPromise" rel="nofollow">ä»€ä¹ˆæ˜¯Promise</a></p> 
<p id="Promise%E7%9A%84%E7%89%B9%E7%82%B9-toc" style="margin-left:0px;"><a href="#Promise%E7%9A%84%E7%89%B9%E7%82%B9" rel="nofollow">Promiseçš„ç‰¹ç‚¹</a></p> 
<p id="Promise%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-toc" style="margin-left:0px;"><a href="#Promise%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" rel="nofollow">Promiseçš„åŸºæœ¬ç”¨æ³•</a></p> 
<p id="%E5%88%9B%E5%BB%BAPromise%E5%AF%B9%E8%B1%A1-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BAPromise%E5%AF%B9%E8%B1%A1" rel="nofollow">åˆ›å»ºPromiseå¯¹è±¡</a></p> 
<p id="then-toc" style="margin-left:40px;"><a href="#then" rel="nofollow">then</a></p> 
<p id="resolve%2Freject-toc" style="margin-left:40px;"><a href="#resolve%2Freject" rel="nofollow">resolve/reject</a></p> 
<p id="catch-toc" style="margin-left:40px;"><a href="#catch" rel="nofollow">catch</a></p> 
<p id="%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-toc" style="margin-left:0px;"><a href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">å¸¸ç”¨æ–¹æ³•</a></p> 
<p id="Promise.all()-toc" style="margin-left:40px;"><a href="#Promise.all%28%29" rel="nofollow">Promise.all()</a></p> 
<p id="Promise.allSettled()-toc" style="margin-left:40px;"><a href="#Promise.allSettled%28%29" rel="nofollow">Promise.allSettled()</a></p> 
<p id="Promise.race()%C2%A0-toc" style="margin-left:40px;"><a href="#Promise.race%28%29%C2%A0" rel="nofollow">Promise.race()Â </a></p> 
<p id="Promise.any()%C2%A0-toc" style="margin-left:40px;"><a href="#Promise.any%28%29%C2%A0" rel="nofollow">Promise.any()Â </a></p> 
<p id="Promise.finally()%C2%A0-toc" style="margin-left:40px;"><a href="#Promise.finally%28%29%C2%A0" rel="nofollow">Promise.finally()Â </a></p> 
<p id="%E7%BB%93%E8%AF%AD-toc" style="margin-left:0px;"><a href="#%E7%BB%93%E8%AF%AD" rel="nofollow">ç»“è¯­</a></p> 
<hr id="hr-toc"> 
<h2>ä»€ä¹ˆæ˜¯Promise</h2> 
<p>Promiseæ˜¯ä¸€ç§å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå°šæœªå®Œæˆä½†é¢„æœŸå°†æ¥ä¼šå®Œæˆçš„æ“ä½œï¼Œå¹¶å¯ä»¥åœ¨è¿™ä¸ªæ“ä½œå®Œæˆæˆ–å¤±è´¥æ—¶å¤„ç†ç›¸åº”çš„ç»“æœã€‚Promise æä¾›äº†ä¸€ç§æ›´æ¸…æ™°å’Œç»“æ„åŒ–çš„æ–¹å¼æ¥ç¼–å†™å’Œç®¡ç†å¼‚æ­¥ä»£ç ï¼Œé¿å…äº†â€œå›è°ƒåœ°ç‹±â€ï¼ˆcallback hellï¼‰çš„å‡ºç°ã€‚</p> 
<p>ç®€å•æ¥è¯´ï¼Œ<strong>Promiseå°±ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</strong></p> 
<ul><li>å›è°ƒåœ°ç‹±</li></ul> 
<p>Promiseå‡ºç°ä¹‹å‰ï¼ŒJavaScriptçš„å¼‚æ­¥æœºåˆ¶ä¸»è¦é€šè¿‡å›è°ƒå‡½æ•°æ¥å®ç°ï¼Œä½†ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šå¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—æ—¶ä¼šé€ æˆ<strong>å›è°ƒå‡½æ•°åœ°ç‹±</strong>ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚</p> 
<pre><code class="language-javascript">callback1(function(result1) {
  callback2(result1, function(result2) {
    callback3(result2, function(result3) {
      callback4(result3, function(result4) {
        // æœ€ç»ˆç»“æœå¤„ç†
        console.log(result4);
      });
    });
  });
});
</code></pre> 
<p>åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœéƒ½è¢«ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œéšç€å¼‚æ­¥æ“ä½œçš„å¢åŠ ï¼Œè¿™ç§åµŒå¥—ä¼šå˜å¾—å¤æ‚å’Œéš¾ä»¥ç®¡ç†ã€‚</p> 
<p>è€Œä½¿ç”¨ Promise çš„æ–¹å¼å¯ä»¥å°†åµŒå¥—çš„å›è°ƒå‡½æ•°ä½œä¸ºé“¾å¼è°ƒç”¨ï¼Œä»è€Œé¿å…å›è°ƒåœ°ç‹±ã€‚</p> 
<h2 id="Promise%E7%9A%84%E7%89%B9%E7%82%B9">Promiseçš„ç‰¹ç‚¹</h2> 
<p>Promiseå®ä¾‹æœ‰ä¸‰ç§çŠ¶æ€ï¼š</p> 
<ul><li>pendingï¼šè¿›è¡Œä¸­ï¼Œæ˜¯åˆå§‹çŠ¶æ€</li><li>fulfilledï¼šå·²æˆåŠŸ</li><li>rejectedï¼šå·²å¤±è´¥</li></ul> 
<p>Promiseå®ä¾‹æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼š</p> 
<ul><li>pending -&gt; fulfilledÂ </li><li>pending -&gt; rejected</li></ul> 
<p class="img-center"><img alt="" height="276" src="https://images2.imgbox.com/99/e4/hckbRLav_o.png" width="475"></p> 
<p>å½“æŠŠä¸€ä»¶äº‹æƒ…äº¤ç»™promiseæ—¶ï¼Œå®ƒçš„çŠ¶æ€å°±æ˜¯pendingï¼Œä»»åŠ¡å®Œæˆäº†çŠ¶æ€å°±å˜æˆäº†fulfilledï¼Œæ²¡æœ‰å®Œæˆå¤±è´¥äº†å°±å˜æˆäº†rejectedã€‚çŠ¶æ€çš„æ”¹å˜æ˜¯é€šè¿‡ resolve() å’Œ reject() å‡½æ•°æ¥å®ç°çš„ã€‚</p> 
<p>Promiseçš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p> 
<p><strong>ç‰¹ç‚¹1ï¼š</strong>åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚</p> 
<p><strong>ç‰¹ç‚¹2ï¼š</strong>å®ä¾‹çš„çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå°±å‡å›ºäº†ï¼Œæ— æ³•å†è¢«æ”¹å˜äº†ã€‚</p> 
<h2 id="Promise%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">Promiseçš„åŸºæœ¬ç”¨æ³•</h2> 
<h3 id="%E5%88%9B%E5%BB%BAPromise%E5%AF%B9%E8%B1%A1">åˆ›å»ºPromiseå¯¹è±¡</h3> 
<p>ES6 è§„å®šï¼ŒPromiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆPromiseå®ä¾‹ã€‚</p> 
<pre><code class="language-javascript">const promise = new Promise(function(resolve, reject) {
  // åšä¸€äº›äº‹æƒ…
  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){
    // å½“è°ƒç”¨ resolve å‡½æ•°çš„æ—¶å€™ï¼ŒPromise çš„çŠ¶æ€å°±å˜æˆ fulfilled
    resolve(value);
  } else {
    // å½“è°ƒç”¨ reject å‡½æ•°çš„æ—¶å€™ï¼ŒPromise çš„çŠ¶æ€å°±å˜æˆ rejected
    reject(error);
  }
});</code></pre> 
<p>Promiseæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚resolve å°†Promiseçš„çŠ¶æ€ç”±ç­‰å¾…å˜ä¸ºæˆåŠŸï¼Œå°†å¼‚æ­¥æ“ä½œçš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ï¼› reject åˆ™å°†çŠ¶æ€ç”±ç­‰å¾…è½¬å˜ä¸ºå¤±è´¥ï¼Œå°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ã€‚</p> 
<h3 id="then">then</h3> 
<p>Promiseå®ä¾‹åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ thenæ–¹æ³•åˆ†åˆ«æŒ‡å®šæˆåŠŸæˆ–å¤±è´¥çš„å›è°ƒå‡½æ•°ã€‚</p> 
<pre><code class="language-javascript">promise.then(function(value) {
  // å¦‚æœçŠ¶æ€æ˜¯æˆåŠŸï¼Œè°ƒç”¨æˆåŠŸå›è°ƒå‡½æ•°
}, function(error) {
  // å¦‚æœçŠ¶æ€æ˜¯æˆåŠŸï¼Œè°ƒç”¨æˆåŠŸå›è°ƒå‡½æ•°
});</code></pre> 
<p>thenæ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºfulfilledæ—¶è°ƒç”¨ï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºrejectedæ—¶è°ƒç”¨ï¼ˆè¯¥å‚æ•°å¯ä»¥çœç•¥ï¼‰ã€‚ thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚</p> 
<h3 id="resolve%2Freject">resolve/reject</h3> 
<p>ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨ new Promise() æ¥åˆ›å»ºpromiseå¯¹è±¡ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ promise.resolve å’Œ promise.reject è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p> 
<p><strong>Promise.resolve() ï¼š</strong>è¿”å›ä¸€ä¸ªæˆåŠŸçš„promiseå¯¹è±¡ï¼Œå¹¶ä¸”å°†è¯¥ç»“æœä¼ é€’ç»™å¯¹åº”çš„thenæ–¹æ³•ã€‚</p> 
<pre><code class="language-javascript">Promise.resolve(11).then(function(value){
Â console.log(value); // æ‰“å°å‡º11
});</code></pre> 
<p><strong>Promise.reject() ï¼š</strong>è¿”å›ä¸€ä¸ªå¤±è´¥çš„Promiseå¯¹è±¡ï¼Œå¹¶å°†ç»™å®šå¤±è´¥ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”å¤„ç†æ–¹æ³•ã€‚</p> 
<pre><code class="language-javascript">Promise.reject(new Error("æˆ‘é”™äº†ï¼"));</code></pre> 
<p>å°±æ˜¯ä¸‹é¢çš„ä»£ç new Promiseçš„ç®€å•å½¢å¼ï¼š</p> 
<pre><code class="language-javascript">new Promise(function(resolve,reject){
   reject(new Error("æˆ‘é”™äº†ï¼"));
});</code></pre> 
<h3 id="catch">catch</h3> 
<p>catchæ–¹æ³•ç›¸å½“äºthenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸è¿‡catchæ–¹æ³•è¿˜æœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œresolveå›è°ƒå‡½æ•°æ—¶ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šåœæ­¢è¿è¡Œï¼Œè€Œæ˜¯è¿›å…¥catchæ–¹æ³•ä¸­ã€‚</p> 
<pre><code class="language-javascript">promise.then((data) =&gt; {
    console.log(data);
}).catch((err) =&gt; {
    console.log(err);
});</code></pre> 
<p><strong>thenå’Œcatchå¯¹çŠ¶æ€çš„å½±å“</strong></p> 
<p>then æ–¹æ³•å’Œ catchæ–¹æ³•ï¼Œåªè¦ä¸æŠ¥é”™ï¼Œè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªfulfilledçŠ¶æ€ï¼›å¦‚æœæŠ¥é”™ï¼Œè¿”å›rejectedã€‚</p> 
<p></p> 
<pre><code class="language-javascript">const p1 = Promise.resolve().then(()=&gt;{
Â throw new Error('then error')//thené‡Œé¢æŠ¥é”™è¿”å›rejected
})

p1.then(()=&gt;{
Â console.log(456)
}).catch(err=&gt;{
Â console.log(789) //789 p1æ˜¯rejectedä¼šè§¦å‘åç»­catchå›è°ƒ
})

const p2 = Promise.reject('my error').catch(()=&gt;{
Â console.log('catch error')//catchæ­£å¸¸è¿”å›fulfilled
})

p2.then(()=&gt;{
Â console.log(1)
//catch error 1 p2è¿”å›fulfilled è§¦å‘thenå›è°ƒ
})</code></pre> 
<h2 id="%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95">å¸¸ç”¨æ–¹æ³•</h2> 
<h3 id="Promise.all()">Promise.<strong>all()</strong></h3> 
<p>å¯ä»¥å®Œæˆå¹¶è¡Œä»»åŠ¡ï¼Œ å®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ª promise å¯¹è±¡ã€‚å½“æ‰€æœ‰ç»“æœæˆåŠŸæ—¶ä¼šè¿”å›æŒ‰ç…§è¯·æ±‚é¡ºåºæ’åˆ—çš„ç»“æœæ•°ç»„ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥ï¼Œå°±ä¼šè¿”å›è¯¥å¤±è´¥çŠ¶æ€çš„å€¼ã€‚</p> 
<pre><code class="language-javascript">const promise1 = Promise.resolve(3);
const promise2 = 42;
const promise3 = new Promise((resolve, reject) =&gt; {
Â setTimeout(resolve, 100, 'foo');
});
Promise.all([promise1, promise2, promise3]).then((values) =&gt; {
Â console.log(values); //[3, 42, "foo"]
});</code></pre> 
<p>åº”ç”¨åœºæ™¯ï¼šå‘é€å¤šä¸ªè¯·æ±‚å¹¶æ ¹æ®è¯·æ±‚é¡ºåºè·å–å’Œä½¿ç”¨æ•°æ®çš„åœºæ™¯ã€‚</p> 
<h3 id="Promise.allSettled()">Promise.allSettled()</h3> 
<p>è·Ÿ Promise.all ç±»ä¼¼ï¼Œ å”¯ä¸€çš„ä¸åŒåœ¨äºå¯ä»¥æ‹¿åˆ°æ¯ä¸ª Promise çš„çŠ¶æ€ï¼Œè€Œä¸ç®¡å…¶æ˜¯å¦å¤„ç†æˆåŠŸã€‚</p> 
<h3 id="Promise.race()%C2%A0">Promise.race()Â </h3> 
<p>æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ª promise å¯¹è±¡æ•°ç»„ï¼Œä¼šè¿”å›æœ€å…ˆæ‰§è¡Œå®Œæˆçš„promiseå¯¹è±¡çš„ç»“æœï¼Œä¸ç®¡ç»“æœæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚</p> 
<pre><code class="language-javascript">let promise1 = new Promise((resolve,reject)=&gt;{
	setTimeout(()=&gt;{
       reject(1);
	},2000)
});
let promise2 = new Promise((resolve,reject)=&gt;{
	setTimeout(()=&gt;{
       resolve(2);
	},1000)
});
let promise3 = new Promise((resolve,reject)=&gt;{
	setTimeout(()=&gt;{
       resolve(3);
	},3000)
});
Promise.race([promise1,promise2,promise3]).then(res=&gt;{
	console.log(res);
	//ç»“æœï¼š2
},rej=&gt;{
    console.log(rej)};
)
</code></pre> 
<p>åº”ç”¨ï¼šå½“è¦åšä¸€ä»¶äº‹ï¼Œè¶…è¿‡å¤šé•¿æ—¶é—´å°±ä¸åšäº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥è§£å†³ã€‚</p> 
<h3 id="Promise.any()%C2%A0">Promise.any()Â </h3> 
<p>æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡æ•°ç»„ï¼Œåªè¦å…¶ä¸­çš„ä¸€ä¸ª promise æˆåŠŸï¼Œå°±è¿”å›é‚£ä¸ªpromiseçš„å€¼ã€‚ å¦‚æœæ‰€æœ‰å®ä¾‹éƒ½å¤±è´¥ï¼Œä¼šä»¥ä¸€ä¸ªåŒ…å«æ‹’ç»åŸå› æ•°ç»„çš„AggregateErroræ‹’ç»ã€‚</p> 
<h3 id="Promise.finally()%C2%A0">Promise.finally()Â </h3> 
<p>ä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œ finally æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p> 
<pre><code class="language-javascript">promise
.then(result =&gt; {Â·Â·Â·})
.catch(error =&gt; {Â·Â·Â·})
.finally(() =&gt; {Â·Â·Â·});
</code></pre> 
<p>finallyæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰åŠæ³•çŸ¥é“ï¼Œå‰é¢çš„ Promise çŠ¶æ€åˆ°åº•æ˜¯fulfilledè¿˜æ˜¯rejectedã€‚è¿™è¡¨æ˜ï¼Œfinallyæ–¹æ³•é‡Œé¢çš„æ“ä½œï¼Œåº”è¯¥æ˜¯ä¸çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äº Promise çš„æ‰§è¡Œç»“æœã€‚æ¯”å¦‚æœåŠ¡å™¨ä½¿ç”¨ Promise å¤„ç†è¯·æ±‚ï¼Œç„¶åä½¿ç”¨ finally æ–¹æ³•å…³æ‰æœåŠ¡å™¨ã€‚</p> 
<h2 id="%E7%BB%93%E8%AF%AD">ç»“è¯­</h2> 
<p>ğŸ”¥å¦‚æœæ­¤æ–‡å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ğŸ’—<span style="color:#fe2c24;"><strong>å…³æ³¨</strong></span>ã€ğŸ‘<span style="color:#ff9900;"><strong>ç‚¹èµ</strong></span>ã€â­<span style="color:#4da8ee;"><strong>æ”¶è—</strong></span>ã€âœï¸<span style="color:#9c8ec1;"><strong>è¯„è®º</strong></span>ï¼Œæ”¯æŒä¸€ä¸‹åšä¸»~Â </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ecdd8189a2200decf14f002d3f5645dc/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æ·±åº¦å­¦ä¹ åŸºç¡€â€”å­¦ä¹ ç‡è¡°å‡ä¸å±€éƒ¨æœ€ä¼˜é—®é¢˜</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8a9372e61d9e6df56305682a26e7a325/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">äº§å“ç»ç†-â€‹â€‹å®ä¹ ä¸­çš„è‡ªæˆ‘è¿­ä»£(41)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>