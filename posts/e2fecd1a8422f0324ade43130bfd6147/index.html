<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于JSP、java、Tomcat三者的项目实战--校园交易平台系统--（实习，答辩皆可用到）--万字爆更 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e2fecd1a8422f0324ade43130bfd6147/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="基于JSP、java、Tomcat三者的项目实战--校园交易平台系统--（实习，答辩皆可用到）--万字爆更">
  <meta property="og:description" content="技术支持：JAVA、JSP
服务器：TOMCAT 7.0.86
编程软件：IntelliJ IDEA 2021.1.3 x64
全部文件展示 网页实现功能截图 主页 注册 登录 购物车主页 修改功能 修改成功
添加商品功能 添加成功
添加进入购物车功能 支付功能 支付过的历史清单账单
全部代码 dao-&gt;StudentDAO package dao; import entiy.Product; import entiy.Student; import entiy.Total; import util.DBUtil; import java.sql.Connection; import java.sql.PreparedStatement; import java.sql.ResultSet; import java.sql.SQLException; import java.util.ArrayList; import java.util.List; public class StudentDAO { public List&lt;Student&gt; findAll() throws Exception { List&lt;Student&gt; students = new ArrayList&lt;Student&gt;(); Connection conn = null; PreparedStatement prep = null; ResultSet rst = null; try { conn = DBUtil.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-07T15:38:44+08:00">
    <meta property="article:modified_time" content="2024-08-07T15:38:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于JSP、java、Tomcat三者的项目实战--校园交易平台系统--（实习，答辩皆可用到）--万字爆更</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>技术支持：JAVA、<a href="https://so.csdn.net/so/search?q=JSP&amp;spm=1001.2101.3001.7020" title="JSP">JSP</a></p> 
<p><a href="https://so.csdn.net/so/search?q=%E6%9C%8D%E5%8A%A1%E5%99%A8&amp;spm=1001.2101.3001.7020" title="服务器">服务器</a>：<a href="https://so.csdn.net/so/search?q=TOMCAT&amp;spm=1001.2101.3001.7020" title="TOMCAT">TOMCAT</a> 7.0.86</p> 
<p>编程软件：IntelliJ IDEA 2021.1.3 x64</p> 
<p></p> 
<h2>全部文件展示</h2> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/91/ac/tn4ruxwa_o.png" width="1200"></p> 
<p><img alt="" height="172" src="https://images2.imgbox.com/c4/1c/qVcc31M2_o.png" width="608"></p> 
<h2>网页实现功能截图</h2> 
<p><img alt="" height="209" src="https://images2.imgbox.com/de/52/XHaUQwpg_o.png" width="727"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/77/e0/IiV6iw1g_o.png" width="1200"></p> 
<h3><strong><u>主页</u></strong></h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/74/ec/cthheqty_o.png" width="1200"></p> 
<h3><u><strong>注册 </strong></u></h3> 
<h3><img alt="" height="1200" src="https://images2.imgbox.com/cb/4d/ddwdmGiJ_o.png" width="1200"><strong> 登录</strong></h3> 
<h3><img alt="" height="1200" src="https://images2.imgbox.com/89/34/0hqIwDG4_o.png" width="1200"></h3> 
<h3><u>购物车主页</u></h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/b7/89/VcJaPNp1_o.png" width="1200"></p> 
<h3><u><strong>修改功能</strong></u></h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/97/8a/KE4JtieG_o.png" width="1200"></p> 
<p>修改成功</p> 
<p><u><img alt="" height="1200" src="https://images2.imgbox.com/07/1d/F8N2jhuu_o.png" width="1200"></u></p> 
<h3><u><em><strong>添加商品功能 </strong></em></u></h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/64/52/NpEuGtEC_o.png" width="1200"></p> 
<p>添加成功</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ef/e1/doQrHiIR_o.png" width="1200"></p> 
<h3><strong><u>添加进入购物车功能</u></strong></h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2a/79/RuZvvsRA_o.png" width="1200"></p> 
<h3><u><strong>支付功能</strong></u></h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/9e/3a/ZNJv0O2M_o.png" width="1200"></p> 
<p> 支付过的历史清单账单</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/da/a5/iy0wKclP_o.png" width="1200"></p> 
<p></p> 
<hr> 
<h2 style="background-color:transparent;">全部代码</h2> 
<p></p> 
<blockquote> 
 <h4>dao-&gt;StudentDAO</h4> 
</blockquote> 
<p><img alt="" height="80" src="https://images2.imgbox.com/92/b1/1cSYi5Bf_o.png" width="615"></p> 
<pre><code class="hljs">package dao;

import entiy.Product;
import entiy.Student;
import entiy.Total;
import util.DBUtil;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

public class StudentDAO {
    public List&lt;Student&gt; findAll() throws Exception {
        List&lt;Student&gt; students = new ArrayList&lt;Student&gt;();
        Connection conn = null;
        PreparedStatement prep = null;
        ResultSet rst = null;
        try {
            conn = DBUtil.getConnection();
            prep = conn.prepareStatement("select * from users");
            rst = prep.executeQuery();
            while (rst.next()) {
                int id = rst.getInt("id");
                String name = rst.getString("name");
                int idname = rst.getInt("idname");
                String pd = rst.getString("pd");
                Student e1 = new Student();
                e1.setName(name);
                e1.setIdname(idname);
                e1.setPd(pd);
                students.add(e1);
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw e;
        } finally {
            DBUtil.close(conn);
        }

        return students;
    }
    public List&lt;Product&gt; findAllgoods() throws Exception {
        List&lt;Product&gt; products = new ArrayList&lt;Product&gt;();
        Connection conn = null;
        PreparedStatement prep = null;
        ResultSet rst = null;
        try {
            conn = DBUtil.getConnection();
            prep = conn.prepareStatement("select * from goods");
            rst = prep.executeQuery();
            while (rst.next()){
                int id = rst.getInt("id");
                String name = rst.getString("name");
                double price = rst.getDouble("price");
                Product e1 = new Product();
                e1.setId(id);
                e1.setName(name);
                e1.setPrice(price);
                products.add(e1);
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw  e;
        }finally {
            DBUtil.close(conn);
        }

        return products;
    }
    public List&lt;Total&gt; findtotals() throws Exception {
        List&lt;Total&gt; totals = new ArrayList&lt;Total&gt;();
        Connection conn = null;
        PreparedStatement prep = null;
        ResultSet rst = null;
        try {
            conn = DBUtil.getConnection();
            prep = conn.prepareStatement("select * from Total");
            rst = prep.executeQuery();
            while (rst.next()){
                int id = rst.getInt("id");
                double total = rst.getDouble("total");
                Total e1 = new Total();
                System.out.println(e1);
                e1.setId(id);
                e1.setTotal(total);
                totals.add(e1);
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw  e;
        }finally {
            DBUtil.close(conn);
        }

        return totals;
    }
    public void save(Student e) throws Exception {
        Connection conn = null;
        PreparedStatement prep = null;
        try {
            conn = DBUtil.getConnection();
            prep = conn.prepareStatement(
                    "INSERT INTO users (name, idname, pd) VALUES (?, ?, ?)");
            prep.setString(1, e.getName());
            prep.setInt(2, e.getIdname());
            prep.setString(3, e.getPd());
            prep.executeUpdate();
        } catch (Exception e1) {
            e1.printStackTrace();
            throw e1;
        } finally {
            // Close PreparedStatement and Connection
            if (prep != null) {
                try {
                    prep.close();
                } catch (SQLException e2) {
                    e2.printStackTrace();
                }
            }
            DBUtil.close(conn);
        }
    }
    public void savegoods(Product e) throws Exception {
    Connection conn = null;
    PreparedStatement prep = null;
    try {
        conn = DBUtil.getConnection();
        prep = conn.prepareStatement(
                "INSERT INTO goods (name,price) VALUES (?, ?)");
        prep.setString(1, e.getName());
        prep.setDouble(2, e.getPrice());
        prep.executeUpdate();
    } catch (SQLException e1) {
        // Handle specific SQL exceptions or log them for debugging
        e1.printStackTrace();
        throw new Exception("Failed to save goods: " + e1.getMessage(), e1);
    } finally {
        // Close PreparedStatement and Connection in finally block
        if (prep != null) {
            try {
                prep.close();
            } catch (SQLException e2) {
                e2.printStackTrace();
            }
        }
        DBUtil.close(conn);
    }
}
    public void delete(int id) throws Exception {
        Connection conn =null;
        PreparedStatement prep = null;
        try {
            conn = DBUtil.getConnection();
            prep = conn.prepareStatement("delete from emp where id="+id+"");
            prep.executeUpdate();
        }catch (Exception e){
            e.printStackTrace();
            throw e;
        }finally {
            DBUtil.close(conn);
        }
    }
    //根据ID查询商品信息（修改商品信息第一步）
    public Product findById(int id) throws Exception{
        Connection conn = null;
        PreparedStatement prep = null;
        ResultSet rst = null;
        Product e =new Product();
        try {
            conn =DBUtil.getConnection();
            System.out.println(conn);
            prep = conn.prepareStatement(
                    "select * from goods where id="+id+"");
            System.out.println(id);
            rst = prep.executeQuery();
            if(rst.next()){
                int id1 = rst.getInt("id");
                String name = rst.getString("name");
                Double price = rst.getDouble("price");
                e.setId(id1);
                e.setName(name);
                e.setPrice(price);
            }
        }catch (Exception e1){
            e1.printStackTrace();
            throw e1;
        }finally {
            DBUtil.close(conn);
        }
        return e;
    }
    public void Update(int id,String name,double price) throws Exception {
        Connection connection = DBUtil.getConnection();
        PreparedStatement preparedStatement = connection.prepareStatement("update goods set name=?,price=? where id =?;");
        preparedStatement.setString(1,name);
        preparedStatement.setDouble(2,price);
        preparedStatement.setInt(3,id);

        int i = preparedStatement.executeUpdate();
        connection.close();
    }
    public void totalprice(Total e) throws Exception {
        Connection conn = null;
        PreparedStatement prep = null;
        try {
            conn = DBUtil.getConnection();
            prep = conn.prepareStatement(
                    "INSERT INTO Total (total) VALUES (?)");
            prep.setDouble(1, e.getTotal());
            prep.executeUpdate();
        } catch (Exception e1) {
            e1.printStackTrace();
            throw e1;
        } finally {
            // Close PreparedStatement and Connection
            if (prep != null) {
                try {
                    prep.close();
                } catch (SQLException e2) {
                    e2.printStackTrace();
                }
            }
            DBUtil.close(conn);
        }
    }
    public static void main(String[] args) throws Exception {
       /* StudentDAO dao = new StudentDAO();
        Student e = new Student();
        e.setName("ww");
        e.setIdname(Integer.parseInt("123"));
        e.setPd("123");
        dao.save(e);
        System.out.println(e);
        */

    }
}
</code></pre> 
<hr> 
<blockquote> 
 <h4 style="background-color:transparent;">entity-&gt;CarItem -&gt;Product -&gt; Student -&gt;Total </h4> 
</blockquote> 
<p><img alt="" height="159" src="https://images2.imgbox.com/8c/64/zpwPL3VH_o.png" width="613"></p> 
<pre><code class="hljs">package entiy;

// 可选的购物车条目类
public class CarItem {
    private Product product;
    private int quantity;
    // 其他属性

    // 构造方法、getter和setter方法

    public CarItem(Product product, int quantity /*, 其他属性 */) {
        this.product = product;
        this.quantity = quantity;
        // 初始化其他属性
    }

    public Product getProduct() {
        return product;
    }

    public void setProduct(Product product) {
        this.product = product;
    }

    public int getQuantity() {
        return quantity;
    }

    public void setQuantity(int quantity) {
        this.quantity = quantity;
    }

    @Override
    public String toString() {
        return "CarItem{" +
                "product=" + product +
                ", quantity=" + quantity +
                '}';
    }
}</code></pre> 
<pre><code class="hljs">package entiy;

public class Product {
    private int id;
    private String name;
    private double price;
    // 其他商品属性，如颜色、库存等

    // 构造方法、getter和setter方法


    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public Product(/*, 其他属性 */) {
        this.name = name;
        this.price = price;
        // 初始化其他属性
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public double getPrice() { return price; }

    public void setPrice(double price) {
        this.price = price;
    }

    @Override
    public String toString() {
        return "Product{" +
                "id=" + id +
                ", name='" + name + '\'' +
                ", price=" + price +
                '}';
    }
}</code></pre> 
<pre><code class="hljs">package entiy;

public class Student {

    private String name;
    private int idname;
    private String pd;

    public String getName(){
        return name;
    }
    public void setName(String name){
        this.name=name;
    }

    public int getIdname(){
        return idname;
    }
    public void setIdname(int idname){
        this.idname = idname;
    }

    public String getPd(){
        return pd;
    }
    public void setPd(String pd){
        this.pd = pd;
    }

    @Override
    public String toString(){
        return "Student{"+
                "name="+name+
                "idname="+idname+
                ",pd="+pd+
                '}';
    }

}


</code></pre> 
<pre><code class="hljs">package entiy;

public class Total {
    private double total;
    private int id;

    public void setId(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }

    public Total(/*, 其他属性 */) {
        this.total = total;
        this.id = id;
        // 初始化其他属性
    }

    public void setTotal(double total) {
        this.total = total;
    }

    public double getTotal() {
        return total;
    }

    @Override
    public String toString() {
        return "Total{" +
                "total=" + total +
                ", id=" + id +
                '}';
    }
}

</code></pre> 
<hr> 
<blockquote> 
 <h4>Servlet包下的许多服务 </h4> 
</blockquote> 
<p><img alt="" height="305" src="https://images2.imgbox.com/bf/37/gP6bkvBm_o.png" width="368"> 以下按顺序排列</p> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;
import entiy.Product;
import entiy.Student;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

public class AddShoppingServlet extends HttpServlet {
    public void service(HttpServletRequest request,
                        HttpServletResponse response)

            throws ServletException, IOException {
        request.setCharacterEncoding("utf-8");
        //读取参数
        String name = request.getParameter("name");
        String price = request.getParameter("price");
        response.setContentType("text/html;charset=utf-8");
        PrintWriter out=response.getWriter();
        try {
            StudentDAO dao = new StudentDAO();
            //创建商品对象
            Product e1 = new Product();
            e1.setName(name);
            e1.setPrice(Double.parseDouble(price));
            System.out.println(e1.getName());
            System.out.println(e1.getPrice());
            dao.savegoods(e1);
            //重定向到主页面
            response.sendRedirect("list");
        } catch (Exception e) {
            e.printStackTrace();
            out.println("系统繁忙，请稍后再试！");
        }
        out.close();
    }
}
</code></pre> 
<p> </p> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;
import entiy.Product;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

public class listServlet extends HttpServlet {
    public void service(HttpServletRequest request,
                        HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=utf-8");
        PrintWriter out = response.getWriter();
        try {
            StudentDAO dao = new StudentDAO();
            List&lt;Product&gt; products = dao.findAllgoods();
            request.setAttribute("goods",products);
            RequestDispatcher rd = request.getRequestDispatcher("shopping.jsp");
            rd.forward(request,response);
        } catch (Exception e) {
            e.printStackTrace();
            out.println("系统繁忙，请稍后再试！");
        }
    }
}</code></pre> 
<pre><code class="hljs">package Servlet;

import java.io.*;
import java.sql.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class LoginServlet extends HttpServlet {
    // 数据库连接信息（这里假设你使用MySQL数据库）
    private String jdbcURL = "jdbc:mysql://localhost:3306/sdjyy";
    private String jdbcUsername = "root";
    private String jdbcPassword = "asd123";

    protected void doPost(
            HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // 获取登录页面提交的账号和密码
        String username = request.getParameter("idname");
        String password = request.getParameter("pd");
        System.out.println(username);
        System.out.println(password);

        // 假设这里是你的登录逻辑，可以是数据库验证等
        boolean isValidUser = false;
        try {
            isValidUser = checkUser(username, password);
        } catch (Exception e) {
            e.printStackTrace();
        }
        // 这里进行账号密码验证的逻辑，比如查询数据库
        // 注意：这里应该使用 PreparedStatement 或其他安全方式来避免 SQL 注入攻击

        // 示例中简单输出账号密码到控制台
        System.out.println("Username: " + username);
        System.out.println("Password: " + password);

        if (isValidUser) {
            // 登录成功，重定向到商品页面
            HttpSession session = request.getSession();
            session.setAttribute("username", username);
            response.sendRedirect("list");
        } else {
            // 登录失败，可以返回到登录页面或者给出错误信息
            response.sendRedirect("denglu.jsp?error=1"); // 假设带有错误参数
        }
    }

    // 模拟用户验证，实际情况应根据你的业务逻辑实现
    private boolean checkUser(String username, String password) throws Exception {
        try {
            // 加载数据库驱动程序
            Class.forName("com.mysql.jdbc.Driver");
            // 连接数据库
            Connection connection = DriverManager.getConnection(jdbcURL, jdbcUsername, jdbcPassword);

            // 查询语句
            String sql = "SELECT * FROM users WHERE idname = ? AND pd = ?";
            PreparedStatement statement = connection.prepareStatement(sql);
            statement.setString(1, username);
            statement.setString(2, password);
            System.out.println(username);
            System.out.println(password);

            // 执行查询
            ResultSet result = statement.executeQuery();

            // 如果查询到结果集，说明用户名和密码匹配
            if (result.next()) {
                return true;
            }

            // 关闭连接
            connection.close();
        } catch (SQLException | ClassNotFoundException e) {
            e.printStackTrace();
        }
        // 如果没有查询到结果或者出现异常，则验证失败
        return false;
    }
}
</code></pre> 
<p> </p> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;
import entiy.Total;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

public class LSQDServlet extends HttpServlet {
    public void service(HttpServletRequest request,
                        HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=utf-8");
        PrintWriter out = response.getWriter();
        try {
            StudentDAO dao = new StudentDAO();
            List&lt;Total&gt; totals = dao.findtotals();
            request.setAttribute("total",totals);
            RequestDispatcher rd = request.getRequestDispatcher("Checkout.jsp");
            rd.forward(request,response);
        } catch (Exception e) {
            e.printStackTrace();
            out.println("系统繁忙，请稍后再试！");
        }
    }
}
</code></pre> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;
import entiy.Product;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

public class SelectShoppingServlet extends HttpServlet {
    public void service(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        request.setCharacterEncoding("utf-8");
        response.setContentType("text/html;charset=utf-8");
        StudentDAO studentDAO = new StudentDAO();
        String id = request.getParameter("id");
        System.out.println(id);
        PrintWriter writer = response.getWriter();
        try {
            Product product = studentDAO.findById(Integer.parseInt(id));
            request.setAttribute("goods",product );
            RequestDispatcher rd = request.getRequestDispatcher("Update.jsp");
            rd.forward(request,response);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}
</code></pre> 
<pre><code class="hljs">package Servlet;

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import java.sql.*;

public class ShoppingServlet extends HttpServlet {
    // 数据库连接信息（这里假设你使用MySQL数据库）
    private String jdbcURL = "jdbc:mysql://localhost:3306/sdjyy";
    private String jdbcUsername = "root";
    private String jdbcPassword = "asd123";

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        HttpSession session = request.getSession();
        String idname = (String) session.getAttribute("idname");

        if (idname != null) {
            // 如果成功获取到 idname，可以继续处理逻辑
            // 在这里可以根据 idname 进行数据库查询或者其他业务逻辑

            Connection conn = null;
            PreparedStatement stmt = null;
            ResultSet rs = null;

            try {
                conn = DriverManager.getConnection(jdbcURL, jdbcUsername, jdbcPassword);

                String sql = "SELECT * FROM users WHERE idname = ?";
                stmt = conn.prepareStatement(sql);
                stmt.setString(1, idname);

                rs = stmt.executeQuery();

                if (rs.next()) {
                    // 从结果集中获取其他信息或者执行其他操作
                    String username = rs.getString("idname");
                    System.out.println("Username retrieved: " + username);

                    // 将用户名存储到 session 中（如果需要的话）
                    session.setAttribute("username", username);

                    // 转发到 shopping.jsp 页面或者其他需要的页面
                    RequestDispatcher dispatcher = request.getRequestDispatcher("/shopping.jsp");
                    dispatcher.forward(request, response);
                } else {
                    // 如果未能从数据库中找到对应的记录，处理逻辑（例如跳转到错误页面）
                    response.sendRedirect("/denglu.jsp");
                }

            } catch (SQLException se) {
                se.printStackTrace();
                response.getWriter().println("数据库连接错误");
            } finally {
                // 关闭资源
                try {
                    if (rs != null) rs.close();
                    if (stmt != null) stmt.close();
                    if (conn != null) conn.close();
                } catch (SQLException se) {
                    se.printStackTrace();
                }
            }
        } else {
            // 如果未能成功取 idname，处理逻辑（例如跳转到登录页面或者错误页面）
            response.sendRedirect("/denglu.jsp");
        }
    }
}</code></pre> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;
import entiy.Product;
import entiy.Total;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

public class TotalServlet extends HttpServlet {
    public void service(HttpServletRequest request,
                        HttpServletResponse response)

            throws ServletException, IOException {
        request.setCharacterEncoding("utf-8");
        String total = request.getParameter("total");
        response.setContentType("text/html;charset=utf-8");
        PrintWriter out=response.getWriter();
        try {
            StudentDAO dao = new StudentDAO();
           Total e1 = new Total();
            e1.setTotal(Double.parseDouble(total));

            System.out.println(e1.getTotal());
            dao.totalprice(e1);
            response.sendRedirect("list");
        } catch (Exception e) {
            e.printStackTrace();
            out.println("系统繁忙，请稍后再试！");
        }
        out.close();
    }
}
</code></pre> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class UpdateShoppingServlet extends HttpServlet {
    public void service(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        StudentDAO productDAO = new StudentDAO();
        request.setCharacterEncoding("utf-8");
        response.setContentType("text/html;charset=utf-8");

        // Get parameters from request
        String idStr = request.getParameter("id");
        String name = request.getParameter("name");
        String priceStr = request.getParameter("price");

        // Validate parameters
        if (idStr == null || name == null || priceStr == null || idStr.isEmpty() || name.isEmpty() || priceStr.isEmpty()) {
            response.getWriter().println("Invalid parameters. Please provide all fields.");
            return;
        }

        try {
            // Parse parameters
            int id = Integer.parseInt(idStr);
            double price = Double.parseDouble(priceStr);

            // Update product in DAO
            productDAO.Update(id, name, price);

            // Redirect to list page after successful update
            response.sendRedirect("list");

        } catch (NumberFormatException e) {
            // Handle if id or price is not a valid number
            response.getWriter().println("Invalid id or price format. Please enter valid numbers.");
        } catch (Exception e) {
            // Handle other exceptions
            throw new ServletException("Error updating product", e);
        }
    }
}
</code></pre> 
<pre><code class="hljs">package Servlet;

import dao.StudentDAO;
import entiy.Student;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

public class zhuceServlet extends HttpServlet {
    public void service(HttpServletRequest request,
                        HttpServletResponse response)
            throws ServletException, IOException {
        request.setCharacterEncoding("utf-8");
        String name = request.getParameter("name");
        String idname = request.getParameter("idname");
        String pd = request.getParameter("pd");
        response.setContentType("text/html;charset=utf-8");
        PrintWriter out = response.getWriter();
        try {
            if (name == null || idname == null || pd == null ||
                    name.isEmpty() || idname.isEmpty() || pd.isEmpty()) {
                throw new IllegalArgumentException("参数不能为空");
            }

            StudentDAO dao = new StudentDAO();
            Student e1 = new Student();
            e1.setName(name);
            e1.setIdname(Integer.parseInt(idname));
            e1.setPd(pd);
            dao.save(e1);
            response.sendRedirect("denglu.jsp");
        } catch (NumberFormatException e) {
            out.println("ID必须是数字");
        } catch (IllegalArgumentException e) {
            out.println(e.getMessage());
        } catch (Exception e) {
            e.printStackTrace();
            out.println("系统繁忙，请稍后再试！");
        } finally {
            out.close();
        }
    }

}

</code></pre> 
<hr> 
<blockquote> 
 <h4><strong>util-&gt;DBUtil</strong></h4> 
</blockquote> 
<pre><code class="hljs">package util;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBUtil {
    public static Connection getConnection() throws Exception {
        Connection conn = null;
        try {
            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/sdjyy?" +
                            "useUnicode=true&amp;characterEncoding=utf8","root","asd123"
            );
        } catch (Exception e) {
            e.printStackTrace();
            throw e;
        }
        return conn;
    }
    public static void close(Connection conn){
        if(conn!=null){
            try {
                conn.close();
            }catch (SQLException e){
                e.printStackTrace();
            }
        }
    }
    public static void main(String[] args)throws Exception{
        Connection conn = getConnection();
        System.out.println(conn);
    }
}

</code></pre> 
<p> </p> 
<hr> 
<blockquote> 
 <h4 style="background-color:transparent;"><strong>web.xml </strong></h4> 
</blockquote> 
<pre><code class="hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0"&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;zhuce&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.zhuceServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;zhuce&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/zhuce&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Login&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.LoginServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Login&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/Login&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Shopping&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.ShoppingServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Shopping&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/Shopping&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;list&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.listServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;list&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/list&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;add&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.AddShoppingServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;add&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/add&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;load&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.SelectShoppingServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;load&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/load&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;update&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.UpdateShoppingServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;update&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/update&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;total&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.TotalServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;total&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/total&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;LSQD&lt;/servlet-name&gt;
        &lt;servlet-class&gt;Servlet.LSQDServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;LSQD&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/LSQD&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;</code></pre> 
<hr> 
<h3 style="background-color:transparent;"><u><strong>JSP代码 </strong></u></h3> 
<blockquote> 
 <h4>AddShopping.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%@page contentType="text/html;charset=utf-8" pageEncoding="utf-8" %&gt;
&lt;%@page import="java.util.*,java.text.*,dao.*" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Add Product&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/style.css"&gt;
    &lt;style&gt;
        /* 这里可以添加页面特定的 CSS 样式 */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        #wrap {
            width: 80%;
            margin: 0 auto;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        header {
            background-color: #333;
            color: #fff;
            padding: 10px;
            text-align: center;
        }
        #content {
            padding: 20px;
        }
        .form_table {
            width: 100%;
        }
        .form_table td {
            padding: 10px;
        }
        .inputgri {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 14px;
        }
        .button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .button:hover {
            background-color: #45a049;
        }
        #footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="wrap"&gt;
    &lt;div id="content"&gt;
        &lt;h1&gt;添加商品：&lt;/h1&gt;
        &lt;form action="add" method="post"&gt;
            &lt;table class="form_table"&gt;
                &lt;tr&gt;
                    &lt;td align="right"&gt;Name:&lt;/td&gt;
                    &lt;td&gt;&lt;input type="text" class="inputgri" name="name" /&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td align="right"&gt;Price:&lt;/td&gt;
                    &lt;td&gt;&lt;input type="text" class="inputgri" name="price" /&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
            &lt;p&gt;&lt;input type="submit" class="button" value="确认添加"  /&gt;&lt;/p&gt;
        &lt;/form&gt;
    &lt;/div&gt;
    &lt;footer id="footer"&gt;
        sdjyw@126.com
    &lt;/footer&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<blockquote> 
 <h4> Checkoust.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%@ page import="entiy.Total" %&gt;
&lt;%@ page import="java.util.*" %&gt;
&lt;%@ page import="java.text.SimpleDateFormat" %&gt;
&lt;%@page contentType="text/html;charset=utf-8" pageEncoding="utf-8" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;style&gt;
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        .table_header {
            background-color: lightgray;
        }
        .table td, .table th {
            border: 1px solid black;
            padding: 8px;
        }
        .button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
        }
    &lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;
    查看您的历史清单
&lt;/h1&gt;
&lt;h2&gt;
    &lt;p&gt;
        &lt;%
            Date date = new Date();
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        %&gt;
        &lt;%=sdf.format(date)%&gt;
        &lt;br /&gt;
    &lt;/p &gt;
&lt;/h2&gt;
&lt;table class="table"&gt;
    &lt;tr class="table_header"&gt;
        &lt;td&gt;
            ID
        &lt;/td&gt;
        &lt;td&gt;
            消费金额
        &lt;/td&gt;
    &lt;/tr&gt;

    &lt;%
        List&lt;Total&gt; totals = (List&lt;Total&gt;) request.getAttribute("total");
        if (totals != null &amp;&amp; !totals.isEmpty()) {
            for (int i = 0; i &lt; totals.size(); i++) {
                Total e = totals.get(i);
    %&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;%= e.getId() %&gt;&lt;/td&gt;
        &lt;td&gt;&lt;%= e.getTotal() %&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;%
        }
    } else {
    %&gt;
    &lt;tr&gt;
        &lt;td colspan="2"&gt;没有找到消费金额记录。&lt;/td&gt;
    &lt;/tr&gt;
    &lt;%
        }
    %&gt;


&lt;/table&gt;
&lt;p&gt;
    &lt;input type="button" class="button" value="返回主页面" onclick="location='list'"/&gt;
&lt;/p &gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id="footer"&gt;
    &lt;div id="footer_bg"&gt;
        sdjyy@444.com
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<blockquote> 
 <h4> denglu.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%@page contentType="text/html;charset=utf-8" pageEncoding="UTF-8" %&gt;
&lt;%@page import="java.util.*,java.text.*,entiy.*" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;交易网登录&lt;/title&gt;
    &lt;script&gt;
        // 检查是否有错误信息参数，如果有则显示弹框提示
        &lt;% if ("1".equals(request.getParameter("error"))) { %&gt;
        window.onload = function() {
            alert("您的账号或密码输入错误，请重试。");
        }
        &lt;% } %&gt;
    &lt;/script&gt;
    &lt;style&gt;
        h1{
            font-size: 40px;
            color: blanchedalmond;
            text-align: center;
            font-family: 'Courier New', Courier, monospace;
            font-style: italic;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 name="top"&gt;交易网&lt;/h1&gt;
&lt;table align="center" cellspacing="0"&gt;
    &lt;tr&gt;
        &lt;td&gt;
            &lt;table cellpadding="0"&gt;
                &lt;tr&gt;
                    &lt;!-- 使用相对路径引用图片 --&gt;
                    &lt;td&gt;&lt;img src="img/3.jpg"&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;
                        &lt;ul&gt;
                            &lt;li&gt;全面支持iPhone/iPad及Android等系统&lt;/li&gt;
                            &lt;li&gt;客户端、手机与网页，实现发送、阅读邮件立即同步普通登录手机号登录&lt;/li&gt;
                        &lt;/ul&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;table border="1" cellspacing="0"&gt;
                &lt;form action="Login" method="post"&gt;
                    &lt;tr&gt;
                        &lt;td&gt;
                            &lt;table cellpadding="30"&gt;
                                &lt;tr&gt;
                                    &lt;td colspan="2" align="center"&gt;&lt;strong&gt;登录&lt;/strong&gt;&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;昵称:
                                        &lt;input type="text" id="name" name="name"&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;账号:
                                        &lt;input type="text" id="idname" name="idname"&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;密码:
                                        &lt;input type="password" id="pd" name="pd"&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td align="center" colspan="2"&gt;
                                        &lt;input type="submit" value="登录" onclick="f1();" /&gt;
                                        &lt;!-- 注册按钮改用正确的 &lt;a&gt; 标签 --&gt;
                                        &lt;a href="zhuce.jsp"&gt;&lt;input type="button" value="注册" onclick="f2();"&gt;&lt;/a&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/form&gt;
            &lt;/table&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="right"&gt;关于交易网&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<blockquote> 
 <h4> index.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%--
  Created by IntelliJ IDEA.
  User: NIL
  Date: 2024/7/17
  Time: 9:10
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;$Title$&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  $END$
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<blockquote> 
 <h4> shopping.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%@ page import="java.util.Date" %&gt;
&lt;%@ page import="java.text.SimpleDateFormat" %&gt;
&lt;%@ page import="entiy.Product" %&gt;
&lt;%@ page import="java.util.List" %&gt;
&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;购物车&lt;/title&gt;
    &lt;meta charset="utf-8"/&gt;
    &lt;style type="text/css"&gt;
        body {
            background-color: #f0f0f0; /* 设置整个页面的背景颜色 */
            background-image: url('img/f2.png'); /* 设置背景图片 */
            background-size: cover; /* 图片铺满整个页面 */
            background-repeat: no-repeat; /* 不重复显示背景图片 */
            background-attachment: fixed; /* 固定背景图片，不随页面滚动 */
            font-family: Arial, sans-serif; /* 设置页面字体 */
            margin: 0; /* 去除页面默认的边距 */
            padding: 0; /* 去除页面默认的内边距 */
        }
        h1 {
            text-align: center;
            margin-top: 20px;
            color: #555;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .user-info {
            text-align: right;
            margin-top: 10px;
            margin-right: 10px;
        }
        table {
            width: 100%;
            border: 1px solid #ddd;
            border-collapse: collapse;
            background-color: #fff;
            margin-top: 20px;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        td img {
            max-width: 50px;
            display: block;
            margin: 0 auto;
        }
        .button {
            padding: 12px 24px;
            font-size: 16px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .checkout {
            text-align: center;
            margin-top: 20px;
        }
        input[type="submit"] {
            padding: 14px 28px;
            font-size: 18px;
            background-color: #28a745;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        input[type="submit"]:hover {
            background-color: #218838;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;交易平台&lt;/h1&gt;
&lt;!-- 用户信息 --&gt;
&lt;div style="text-align: right; margin-top: 10px; margin-right: 10px;"&gt;
    &lt;form action="Shopping" method="post"&gt;
        &lt;input type="hidden" name="action" value="getUsername"&gt;
        &lt;%
            String username = (String) session.getAttribute("username");
            if (username == null) {
                username = "游客";
            }
        %&gt;
        &lt;span&gt;您好，&lt;%= session.getAttribute("username") %&gt;&lt;/span&gt;
        &lt;span&gt; | 现在时间：  &lt;%
            Date date = new Date();
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        %&gt;
        &lt;%=sdf.format(date )%&gt;
        &lt;/span&gt;
    &lt;/form&gt;
&lt;/div&gt;

&lt;table&gt;
    &lt;tr&gt;
        &lt;th&gt;商品&lt;/th&gt;
        &lt;th&gt;单价(元)&lt;/th&gt;
        &lt;th&gt;操作&lt;/th&gt;
    &lt;/tr&gt;
    &lt;%
        List&lt;Product&gt; products = (List&lt;Product&gt;) request.getAttribute("goods");
        if (products == null) {
            System.out.println("Products list is null!");
            // 可以根据实际情况做进一步处理，如返回到上一页或者显示错误信息。
        } else {
            for (int i=0; i&lt;products.size(); i++) {
                Product e = products.get(i);
    %&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;%=e.getName()%&gt;&lt;/td&gt;
        &lt;td&gt;&lt;%=e.getPrice()%&gt;&lt;/td&gt;
        &lt;td&gt;
            &lt;a href="load?id=&lt;%=e.getId()%&gt;"&gt;修改&lt;/a&gt;
            &lt;input type="button" value="加入购物车" onclick="add_shoppingcart(this);"&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;%
            }
        }
    %&gt;

&lt;/table&gt;
&lt;p&gt;
    &lt;input type="button" class="button" value="添加商品" onclick="location='AddShopping.jsp'"/&gt;
&lt;/p&gt;
&lt;h1&gt;购物车&lt;/h1&gt;
&lt;form action="total" method="post"&gt;
&lt;table&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;商品&lt;/th&gt;
        &lt;th&gt;单价(元)&lt;/th&gt;
        &lt;th&gt;数量&lt;/th&gt;
        &lt;th&gt;金额(元)&lt;/th&gt;
        &lt;th&gt;删除&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody id="goods"&gt;
    &lt;/tbody&gt;
    &lt;tfoot&gt;
    &lt;tr&gt;
        &lt;td colspan="3" align="right"&gt;总计&lt;/td&gt;
        &lt;td&gt;&lt;input type="text" name="total" id="total" value="" /&gt; &lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tfoot&gt;
&lt;/table&gt;
&lt;!-- 去支付按钮 --&gt;
&lt;div style="text-align: center; margin-top: 20px;"&gt;
        &lt;input type="submit" value="去支付" onclick="f1();" /&gt;
&lt;/div&gt;
    &lt;/form&gt;
&lt;p&gt;
   &lt;input type="button"value="历史清单" onclick="location='LSQD'"/&gt;
&lt;/p&gt;
&lt;script type="text/javascript"&gt;
   function f1(){
       alert("支付成功！");
   }
    function del(btn){
        //获取当前点击的删除按钮所在的tr
        var tr = btn.parentNode.parentNode;
        tr.parentNode.removeChild(tr);
        var tds = tr.getElementsByTagName("td");
        total();

    }
    function add(btn){
        var td = btn.parentNode;
        var inputs = td.getElementsByTagName("input");
        var text = inputs[1];
        var amount = parseInt(text.value)+1;
        text.value = amount;
        var tr = btn.parentNode.parentNode;
        var tds = tr.getElementsByTagName("td");
        var pr = parseFloat(tds[1].innerText);
        mny1 = pr*amount;
        //alert(mny1)
        tds[3].innerText = mny1;
        total();
    }
    function minu(btn){
        var td = btn.parentNode;
        var tr = td.parentNode;
        var inputs = td.getElementsByTagName("input");
        var text = inputs[1];
        if (text.value&gt;1){
            var amount = parseInt(text.value)-1;
            text.value = amount;
            var tds = tr.getElementsByTagName("td");
            var pr = parseInt(tds[1].innerText);
            mny2 = pr*amount;
            tds[3].innerText = mny2;

        }else{
            tr.parentNode.removeChild(tr);
        }
        total();

    }
    function total(){
        //1.获取购物车中所有的商品行
        var tbody = document.getElementById("goods");
        var trs = tbody.getElementsByTagName("tr");
        //2.遍历这些行,获取每一行的金额
        var sum = 0;
        for(var i=0;i&lt;trs.length;i++){
            var tr = trs[i];
            //取当前行的金额
            var tds = tr.getElementsByTagName("td");
            var mny = parseFloat(tds[3].innerText);
            sum = sum+mny;
        }
        document.getElementById("total").value=sum;

    }

    function add_shoppingcart(btn){
        var tbody = document.getElementById("goods");
        var tr = btn.parentNode.parentNode;
        var tds = tr.getElementsByTagName("td");
        var trs = tbody.getElementsByTagName("tr")
        var name = tds[0].innerText;
        var price = tds[1].innerText;
        for (var i=0;i&lt;trs.length;i++) {
            var tr1 = trs[i];
            var tds1 = tr1.getElementsByTagName("td");
            var name1 = tds1[0].innerText;
        }

        if(name==name1) {
            var TD = tds1[2];
            var inputs = TD.getElementsByTagName("input");
            var text = inputs[1];
            var amount = parseInt(text.value) + 1;
            mny1 = pr * amount;
            tds1[3].innerText = mny1;
            total();
        }

        else {
            var ntr = tbody.insertRow();
            ntr.innerHTML =
                '&lt;td&gt;'+name+'&lt;/td&gt;'+
                '&lt;td&gt;'+price+'&lt;/td&gt;'+
                '&lt;td align="center"&gt;'+
                '&lt;input  type="button" value="-" onclick="minu(this);"/&gt;'+
                '&lt;input   type="text" size="3" readonly value="1"/&gt;'+
                '&lt;input  type="button" value="+" onclick="add(this);"/&gt;'+
                '&lt;/td&gt;'+
                '&lt;td&gt;'+price+'&lt;/td&gt;'+
                '&lt;td align="center"&gt;&lt;input type="button" value="x" onclick="del(this);"/&gt;&lt;/td&gt;&lt;/tr&gt;';

            total();}
    }
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<blockquote> 
 <h4>Update.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%@ page import="entiy.Product" %&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;修改商品信息&lt;/title&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
    &lt;link rel="stylesheet" type="text/css"
          href="css/style.css" /&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;div id="wrap"&gt;
    &lt;div id="top_content"&gt;
        &lt;div id="header"&gt;
            &lt;div id="rightheader"&gt;
            &lt;/div&gt;
            &lt;div id="topheader"&gt;
                &lt;h1 id="title"&gt;
                   商品修改
                &lt;/h1&gt;
            &lt;/div&gt;
            &lt;div id="navigation"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div id="content"&gt;
            &lt;p id="whereami"&gt;
            &lt;/p&gt;
            &lt;h1&gt;
                修改商品信息:
            &lt;/h1&gt;
            &lt;form action="update" method="post"&gt;
                &lt;%
                    Product product = (Product) request.getAttribute("goods");

                    System.out.println(product.getId());
                %&gt;
                &lt;table cellpadding="0" cellspacing="0" border="0"
                       class="form_table"&gt;

                    &lt;tr&gt;
                        &lt;td valign="middle" align="right"&gt;
                            商品：
                        &lt;/td&gt;
                        &lt;td valign="middle" align="left"&gt;
                            &lt;input type="text" class="inputgri" name="name" value="&lt;%=product.getName()%&gt;" /&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td valign="middle" align="right"&gt;
                            价格:
                        &lt;/td&gt;
                        &lt;td valign="middle" align="left"&gt;
                            &lt;input type="text" class="inputgri" name="price" value="&lt;%=product.getPrice()%&gt;" /&gt;
                            &lt;input type="hidden" name="id" value="&lt;%=product.getId()%&gt;"&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;

                &lt;/table&gt;
                &lt;p&gt;
                    &lt;input type="submit" class="button" value="提交" /&gt;
                &lt;/p&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="footer"&gt;
        &lt;div id="footer_bg"&gt;
            ABC@126.com
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<blockquote> 
 <h4>zhuce.jsp</h4> 
</blockquote> 
<pre><code class="hljs">&lt;%@page contentType="text/html;charset=utf-8" pageEncoding="UTF-8" %&gt;
&lt;%@page import="java.util.*,java.text.*,entiy.*" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;交易网注册&lt;/title&gt;
    &lt;script&gt;
        function f2(){
            alert("确认注册?");
        }
    &lt;/script&gt;
    &lt;style&gt;
        h1 {
            font-size: 40px;
            color: blanchedalmond;
            text-align: center;
            font-family: 'Courier New', Courier, monospace;
            font-style: italic;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 name="top"&gt;交易网&lt;/h1&gt;
&lt;table align="center" cellspacing="0"&gt;
    &lt;tr&gt;
        &lt;td&gt;
            &lt;table border="1" cellspacing="0"&gt;
                &lt;form action="zhuce" method="post"&gt;
                    &lt;tr&gt;
                        &lt;td&gt;
                            &lt;table cellpadding="30"&gt;
                                &lt;tr&gt;
                                    &lt;td colspan="2" align="center"&gt;&lt;strong&gt;注册&lt;/strong&gt;&lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;昵称：
                                        &lt;input type="text" id="name" name="name"&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;帐号:
                                        &lt;input type="text" id="idname" name="idname"&gt;（输入九位以内整数字）
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td&gt;密码:
                                        &lt;input type="password" id="pd" name="pd"&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                    &lt;td align="center" colspan="2"&gt;
                                        &lt;input type="submit" value="注册" onclick="f2();"&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                            &lt;/table&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/form&gt;
            &lt;/table&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="right"&gt;关于交易网&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/19a2e7eef9e6858a0027424d15e9e99a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【LVS】防火墙标签解决轮询错误</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/417614a11f19bc38fd4a360a888d5698/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">怎么将jar注册为windows系统服务详细操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>