<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python Pandas.rank() 排名函数详解 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ee8d759e4ab90ab70452ed782ff623ab/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="python Pandas.rank() 排名函数详解">
  <meta property="og:description" content="文章目录 Pandas.rank() 函数详解一、参数解析二、案例分享默认排名`降序: ascending = False``method = &#39;min&#39;``method = &#39;max&#39;``method = &#39;first&#39;``method = &#39;dense&#39;``na_option=&#39;bottom&#39;``pct = True` Pandas.rank() 函数详解 一、参数解析 method：指定排名时的策略。 默认值为 &#39;average&#39;，表示相同值的项将会获得平均排名。可选的取值还包括 &#39;min&#39;：相同值的项将获得最小排名；&#39;max&#39;：相同值的项将获得最大排名；&#39;first&#39;：相同值的项将获得第一次出现时的排名；&#39;dense&#39;。相同值的项将获得连续排名。 ascending：指定排名的顺序。 默认值为 True，升序。设置为 False 降序。 na_option：指定如何处理缺失值（NaN）。 默认值为 &#39;keep&#39;，缺失值不参与排名。设置为 &#39;top&#39; 则将缺失值放在排名结果的顶部。设置为 &#39;bottom&#39; 则将缺失值放在排名结果的底部。 pct：指定是否返回百分比排名。 默认值为 False 表示返回实际的排名值。设置为 True 则返回相对于总项数的百分比排名值。 二、案例分享 import pandas as pd data = {&#39;Name&#39;: [&#39;Alice&#39;, &#39;Bob&#39;, &#39;Charlie&#39;, &#39;David&#39;, &#39;Emma&#39;, &#39;Frank&#39;], &#39;Score&#39;: [90, 85, 85, 75, None, 78]} df = pd.DataFrame(data) 默认排名 升序、忽略缺失值；遇到相同数值（如score=85），排名会平分 df[&#39;Rank&#39;] = df[&#39;Score&#39;].">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-02T11:29:57+08:00">
    <meta property="article:modified_time" content="2023-08-02T11:29:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python Pandas.rank() 排名函数详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Pandasrank__1" rel="nofollow">Pandas.rank() 函数详解</a></li><li><ul><li><a href="#_3" rel="nofollow">一、参数解析</a></li><li><a href="#_25" rel="nofollow">二、案例分享</a></li><li><ul><li><ul><li><ul><li><a href="#_37" rel="nofollow">默认排名</a></li><li><a href="#_ascending__False_46" rel="nofollow">`降序: ascending = False`</a></li><li><a href="#method__min_53" rel="nofollow">`method = 'min'`</a></li><li><a href="#method__max_65" rel="nofollow">`method = 'max'`</a></li><li><a href="#method__first_77" rel="nofollow">`method = 'first'`</a></li><li><a href="#method__dense_90" rel="nofollow">`method = 'dense'`</a></li><li><a href="#na_optionbottom_101" rel="nofollow">`na_option='bottom'`</a></li><li><a href="#pct__True_112" rel="nofollow">`pct = True`</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Pandasrank__1"></a>Pandas.rank() 函数详解</h2> 
<h3><a id="_3"></a>一、参数解析</h3> 
<ul><li><code>method</code>：指定排名时的策略。 
  <ul><li>默认值为 <code>'average'</code>，表示相同值的项将会获得平均排名。</li><li>可选的取值还包括 
    <ul><li><code>'min'</code>：相同值的项将获得<strong>最小</strong>排名；</li><li><code>'max'</code>：相同值的项将获得<strong>最大</strong>排名；</li><li><code>'first'：</code>相同值的项将获得<strong>第一次出现</strong>时的排名；</li><li><code>'dense'</code>。相同值的项将获得<strong>连续</strong>排名。</li></ul> </li></ul> </li><li><code>ascending</code>：指定排名的顺序。 
  <ul><li>默认值为 <code>True</code>，升序。</li><li>设置为 <code>False</code> 降序。</li></ul> </li><li><code>na_option</code>：指定如何处理缺失值（NaN）。 
  <ul><li>默认值为 <code>'keep'</code>，缺失值不参与排名。</li><li>设置为 <code>'top'</code> 则将缺失值放在排名结果的顶部。</li><li>设置为 <code>'bottom'</code> 则将缺失值放在排名结果的底部。</li></ul> </li><li><code>pct</code>：指定是否返回百分比排名。 
  <ul><li>默认值为 <code>False</code> 表示返回实际的排名值。</li><li>设置为 <code>True</code> 则返回相对于总项数的百分比排名值。</li></ul> </li></ul> 
<h3><a id="_25"></a>二、案例分享</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'Name'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Charlie'</span><span class="token punctuation">,</span> <span class="token string">'David'</span><span class="token punctuation">,</span> <span class="token string">'Emma'</span><span class="token punctuation">,</span> <span class="token string">'Frank'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'Score'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/02/ec/5SAeTzSA_o.png" alt="在这里插入图片描述" width="200"></p> 
<h6><a id="_37"></a>默认排名</h6> 
<ul><li>升序、忽略缺失值；</li><li>遇到相同数值（如score=85），排名会平分</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/25/ee/3Z80N6mH_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="_ascending__False_46"></a><code>降序: ascending = False</code></h6> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/be/83/g71EBSDk_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="method__min_53"></a><code>method = 'min'</code></h6> 
<ul><li>相同值的项将获得最小排名；</li><li>此处相同值为85，占排名3、4位，取最小3；</li><li>此时排名会出现断层</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">'min'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/dc/mqFwSwQl_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="method__max_65"></a><code>method = 'max'</code></h6> 
<ul><li>相同值的项将获得最大排名；</li><li>此处相同值为85，占排名3、4位，取最大4；</li><li>此时排名会出现断层</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">'max'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/55/6d/rW4OWFu2_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="method__first_77"></a><code>method = 'first'</code></h6> 
<ul><li>相同值的项将获得第一次出现时的排名；</li><li>此处相同值为85，占排名3、4位，Name=Bob出现在前，Name=Charlie出现在后；</li><li>此时排名不会出现断层</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">'first'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d6/1f/jC1SWYYx_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="method__dense_90"></a><code>method = 'dense'</code></h6> 
<ul><li>相同值的项将获得连续排名；</li><li>此时排名不会出现断层</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">'dense'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fa/4c/gWE9wP2u_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="na_optionbottom_101"></a><code>na_option='bottom'</code></h6> 
<ul><li>缺失值参与排名；</li><li>缺失值排名靠后</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>na_option<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/07/72/pp0J1Lrg_o.png" alt="在这里插入图片描述" width="250"></p> 
<h6><a id="pct__True_112"></a><code>pct = True</code></h6> 
<ul><li>返回百分比排名，如此处score=75排名第1（升序），总项数是5，1/5=0.2；</li><li>该参数可以扩展的实际需求：求销售额Top20的商品等</li></ul> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'Rank'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rank<span class="token punctuation">(</span>pct<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/48/64/tlQKT8qF_o.png" alt="在这里插入图片描述" width="250"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b0495da620374aed675531fc663b0e6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入理解 Java Bean 的生命周期及各个阶段解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43e2db2c82658884d056e97d752448c7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JSON parse error: Cannot deserialize value of type `java.util.ArrayList＜java.lang.Long＞` from Object</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>