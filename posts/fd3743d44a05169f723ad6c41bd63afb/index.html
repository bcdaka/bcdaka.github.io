<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Springbooté¡¹ç›®-åŸºäºJava&#43;MySQLçš„ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿ(é™„æºç &#43;è®ºæ–‡&#43;æ•°æ®åº“) - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/fd3743d44a05169f723ad6c41bd63afb/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="Springbooté¡¹ç›®-åŸºäºJava&#43;MySQLçš„ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿ(é™„æºç &#43;è®ºæ–‡&#43;æ•°æ®åº“)">
  <meta property="og:description" content="å¤§å®¶å¥½ï¼æˆ‘æ˜¯ç¨‹åºçŒ¿è€Aï¼Œæ„Ÿè°¢æ‚¨é˜…è¯»æœ¬æ–‡ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿å“¦ã€‚
ğŸ’å½“å‰ä¸“æ ï¼šJavaæ¯•ä¸šè®¾è®¡
ç²¾å½©ä¸“æ æ¨èğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»
ğŸ€ å®‰å“appæ¯•ä¸šè®¾è®¡
ğŸŒå¾®ä¿¡å°ç¨‹åºæ¯•ä¸šè®¾è®¡
å¼€å‘ç¯å¢ƒ å¼€å‘è¯­è¨€ï¼šJava
æ¡†æ¶ï¼šspringboot
JDKç‰ˆæœ¬ï¼šJDK1.8
æœåŠ¡å™¨ï¼štomcat7
æ•°æ®åº“ï¼šmysql 5.7
æ•°æ®åº“å·¥å…·ï¼šNavicat12
å¼€å‘è½¯ä»¶ï¼šeclipse/myeclipse/idea
MavenåŒ…ï¼šMaven3.3.9
æµè§ˆå™¨ï¼šè°·æ­Œæµè§ˆå™¨
æºç ä¸‹è½½åœ°å€ï¼š https://download.csdn.net/download/2301_76953549/87943477
è®ºæ–‡ç›®å½• ã€å¦‚éœ€å…¨æ–‡è¯·æŒ‰æ–‡æœ«è·å–è”ç³»ã€‘ ç›®å½• å¼€å‘ç¯å¢ƒæºç ä¸‹è½½åœ°å€ï¼šè®ºæ–‡ç›®å½•**ã€å¦‚éœ€å…¨æ–‡è¯·æŒ‰æ–‡æœ«è·å–è”ç³»ã€‘** ä¸€ã€é¡¹ç›®ç®€ä»‹äºŒã€ç³»ç»Ÿè®¾è®¡2.1è½¯ä»¶åŠŸèƒ½æ¨¡å—è®¾è®¡2.2æ•°æ®åº“è®¾è®¡ ä¸‰ã€ç³»ç»Ÿé¡¹ç›®éƒ¨åˆ†æˆªå›¾3.1ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å—3.2ç”¨æˆ·åŠŸèƒ½æ¨¡å—3.3å‰å°é¦–é¡µåŠŸèƒ½æ¨¡å— å››ã€éƒ¨åˆ†æ ¸å¿ƒä»£ç 4.1 ç”¨æˆ·éƒ¨åˆ† è·å–æºç æˆ–è®ºæ–‡ ä¸€ã€é¡¹ç›®ç®€ä»‹ æœ¬ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿé‡‡ç”¨çš„æ•°æ®åº“æ˜¯Mysqlï¼Œä½¿ç”¨springbootæ¡†æ¶å¼€å‘ã€‚åœ¨è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå……åˆ†ä¿è¯äº†ç³»ç»Ÿä»£ç çš„è‰¯å¥½å¯è¯»æ€§ã€å®ç”¨æ€§ã€æ˜“æ‰©å±•æ€§ã€é€šç”¨æ€§ã€ä¾¿äºåæœŸç»´æŠ¤ã€æ“ä½œæ–¹ä¾¿ä»¥åŠé¡µé¢ç®€æ´ç­‰ç‰¹ç‚¹ã€‚
äºŒã€ç³»ç»Ÿè®¾è®¡ 2.1è½¯ä»¶åŠŸèƒ½æ¨¡å—è®¾è®¡ ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿç»“æ„å›¾ï¼Œå¦‚å›¾4-3æ‰€ç¤ºã€‚
2.2æ•°æ®åº“è®¾è®¡ é€šè¿‡ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿçš„åŠŸèƒ½è¿›è¡Œè§„åˆ’åˆ†æˆå‡ ä¸ªå®ä½“ä¿¡æ¯ï¼Œå®ä½“ä¿¡æ¯å°†é€šè¿‡ERå›¾è¿›è¡Œè¯´æ˜ï¼Œæœ¬ç³»ç»Ÿçš„ä¸»è¦å®ä½“å›¾å¦‚ä¸‹ï¼š
ç®¡ç†å‘˜ä¿¡æ¯å±æ€§å›¾å¦‚å›¾4-5æ‰€ç¤ºã€‚
ç”¨æˆ·ç®¡ç†å®ä½“å±æ€§å›¾å¦‚å›¾4-6æ‰€ç¤ºã€‚
å•†å“ä¿¡æ¯ç®¡ç†å®ä½“å±æ€§å›¾å¦‚å›¾4-7æ‰€ç¤ºã€‚
è®¢å•ç®¡ç†å®ä½“å±æ€§å›¾å¦‚å›¾4-8æ‰€ç¤ºã€‚
ä¸‰ã€ç³»ç»Ÿé¡¹ç›®éƒ¨åˆ†æˆªå›¾ 3.1ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å— ç®¡ç†å‘˜ç™»å½•ï¼Œé€šè¿‡å¡«å†™ç”¨æˆ·åã€å¯†ç ã€è§’è‰²è¿›è¡Œç™»å½•ï¼Œå¦‚å›¾5-1æ‰€ç¤ºã€‚
ç®¡ç†å‘˜ç™»å½•è¿›å…¥ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹é¦–é¡µã€ä¸ªäººä¸­å¿ƒã€ç”¨æˆ·ç®¡ç†ã€å•†å“åˆ†ç±»ç®¡ç†ã€å•†å“ä¿¡æ¯ç®¡ç†ã€è®¢å•è¯„ä»·ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ã€è®¢å•ç®¡ç†ç­‰ä¿¡æ¯ã€‚
ä¸ªäººä¸­å¿ƒï¼Œåœ¨ä¸ªäººä¸­å¿ƒé¡µé¢ä¸­å¯ä»¥é€šè¿‡å¡«å†™åŸå¯†ç ã€æ–°å¯†ç ã€ç¡®è®¤å¯†ç ç­‰ä¿¡æ¯è¿›è¡Œæ·»åŠ ã€ä¿®æ”¹ï¼Œå¦‚å›¾5-2æ‰€ç¤ºã€‚è¿˜å¯ä»¥æ ¹æ®éœ€è¦å¯¹ä¸ªäººä¿¡æ¯è¿›è¡Œæ·»åŠ ï¼Œä¿®æ”¹æˆ–åˆ é™¤ç­‰è¯¦ç»†æ“ä½œï¼Œå¦‚å›¾5-3æ‰€ç¤ºã€‚
ç”¨æˆ·ç®¡ç†ï¼Œåœ¨ç”¨æˆ·ç®¡ç†é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€å¤´åƒã€è”ç³»ç”µè¯ç­‰ä¿¡æ¯ï¼Œå¹¶å¯æ ¹æ®éœ€è¦å¯¹ç”¨æˆ·ç®¡ç†è¿›è¡Œè¯¦æƒ…ã€ä¿®æ”¹æˆ–åˆ é™¤ç­‰æ“ä½œï¼Œå¦‚å›¾5-4æ‰€ç¤ºã€‚
è®¢å•è¯„ä»·ç®¡ç†ï¼Œåœ¨è®¢å•è¯„ä»·ç®¡ç†é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹è®¢å•ç¼–å·ã€å•†å“åç§°ã€å•†å“åˆ†ç±»ã€å“ç‰Œã€è§„æ ¼ã€è¯„åˆ†ã€æ·»åŠ å›¾ç‰‡ã€è¯„ä»·å†…å®¹ã€è¯„ä»·æ—¥æœŸã€ç”¨æˆ·åã€å®¡æ ¸å›å¤ã€å®¡æ ¸çŠ¶æ€ã€å®¡æ ¸ç­‰å†…å®¹ï¼Œå¹¶ä¸”æ ¹æ®éœ€è¦å¯¹è®¢å•è¯„ä»·ç®¡ç†è¿›è¡Œè¯¦æƒ…ã€ä¿®æ”¹æˆ–åˆ é™¤ç­‰è¯¦ç»†æ“ä½œï¼Œå¦‚å›¾5-9æ‰€ç¤ºã€‚
3.2ç”¨æˆ·åŠŸèƒ½æ¨¡å— ç”¨æˆ·ç™»å½•è¿›å…¥ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹é¦–é¡µã€ä¸ªäººä¸­å¿ƒã€è®¢å•è¯„ä»·ç®¡ç†ã€æˆ‘çš„æ”¶è—ç®¡ç†ã€è®¢å•ç®¡ç†ç­‰å†…å®¹ã€‚
è®¢å•è¯„ä»·ç®¡ç†ï¼Œåœ¨è®¢å•è¯„ä»·ç®¡ç†é¡µé¢ä¸­é€šè¿‡æŸ¥çœ‹è®¢å•ç¼–å·ã€å•†å“åç§°ã€å•†å“åˆ†ç±»ã€å“ç‰Œã€è§„æ ¼ã€è¯„åˆ†ã€æ·»åŠ å›¾ç‰‡ã€è¯„ä»·å†…å®¹ã€è¯„ä»·æ—¥æœŸã€ç”¨æˆ·åã€å®¡æ ¸å›å¤ã€å®¡æ ¸çŠ¶æ€ç­‰ä¿¡æ¯è¿˜å¯ä»¥æ ¹æ®éœ€è¦å¯¹è®¢å•è¯„ä»·ç®¡ç†è¿›è¡Œä¿®æ”¹ï¼Œå¦‚å›¾5-10æ‰€ç¤ºã€‚
æˆ‘çš„æ”¶è—ç®¡ç†ï¼Œåœ¨æˆ‘çš„æ”¶è—ç®¡ç†é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹æ”¶è—åç§°ã€æ”¶è—å›¾ç‰‡ç­‰ä¿¡æ¯å†…å®¹ï¼Œå¹¶ä¸”æ ¹æ®éœ€è¦å¯¹æˆ‘çš„æ”¶è—ç®¡ç†è¿›è¡Œè¯¦æƒ…æˆ–åˆ é™¤ç­‰å…¶ä»–è¯¦ç»†æ“ä½œï¼Œå¦‚å›¾5-11æ‰€ç¤ºã€‚
è®¢å•ç®¡ç†ï¼Œåœ¨è®¢å•ç®¡ç†é¡µé¢ä¸­é€šè¿‡æŸ¥çœ‹è®¢å•ç¼–å·ã€å•†å“åç§°ã€å•†å“å›¾ç‰‡ã€è´­ä¹°æ•°é‡ã€ä»·æ ¼/ç§¯åˆ†ã€æŠ˜æ‰£ä»·æ ¼ã€æ€»ä»·æ ¼/æ€»ç§¯åˆ†ã€æŠ˜æ‰£æ€»ä»·æ ¼ã€æ”¯ä»˜ç±»å‹ã€çŠ¶æ€ã€åœ°å€ç­‰å†…å®¹è¿›è¡Œè¯¦æƒ…ï¼Œå¦‚å›¾5-12æ‰€ç¤ºã€‚
3.3å‰å°é¦–é¡µåŠŸèƒ½æ¨¡å— ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿï¼Œåœ¨ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹é¦–é¡µã€å•†å“ä¿¡æ¯ã€å•†å“èµ„è®¯ã€ä¸ªäººä¸­å¿ƒã€åå°ç®¡ç†ã€è´­ç‰©è½¦ã€åœ¨çº¿å®¢æœç­‰å†…å®¹ï¼Œå¦‚å›¾5-13æ‰€ç¤ºã€‚
ç”¨æˆ·ç™»å½•ã€ç”¨æˆ·æ³¨å†Œï¼Œé€šè¿‡æ³¨å†Œè·å–ç”¨æˆ·åã€å¯†ç ã€å§“åã€è”ç³»ç”µè¯ç­‰ä¿¡æ¯è¿›è¡Œæ³¨å†Œã€ç™»å½•ï¼Œå¦‚å›¾5-14æ‰€ç¤ºã€‚
å•†å“ä¿¡æ¯ï¼Œåœ¨å•†å“ä¿¡æ¯é¡µé¢å¯ä»¥æŸ¥çœ‹å•†å“åç§°ã€å•†å“åˆ†ç±»ã€å›¾ç‰‡ã€å“ç‰Œã€è§„æ ¼ã€ä»·æ ¼ç­‰ä¿¡æ¯è¿›è¡Œæ·»åŠ åˆ°è´­ç‰©è½¦ã€ç«‹å³è´­ä¹°ï¼Œå¦‚å›¾5-15æ‰€ç¤ºã€‚ ä¸ªäººä¸­å¿ƒï¼Œåœ¨ä¸ªäººä¸­å¿ƒé¡µé¢å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€å¤´åƒã€è”ç³»ç”µè¯ç­‰è¿›è¡Œæ›´æ–°ä¿¡æ¯ã€é€€å‡ºç™»å½•å¦‚å›¾5-16æ‰€ç¤ºã€‚
å››ã€éƒ¨åˆ†æ ¸å¿ƒä»£ç  4.1 ç”¨æˆ·éƒ¨åˆ† package com.controller; import java.io.File; import java.io.FileNotFoundException; import java.io.IOException; import java.util.Arrays; import java.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-31T22:23:22+08:00">
    <meta property="article:modified_time" content="2024-03-31T22:23:22+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Springbooté¡¹ç›®-åŸºäºJava&#43;MySQLçš„ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿ(é™„æºç &#43;è®ºæ–‡&#43;æ•°æ®åº“)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>å¤§å®¶å¥½ï¼æˆ‘æ˜¯ç¨‹åºçŒ¿è€Aï¼Œæ„Ÿè°¢æ‚¨é˜…è¯»æœ¬æ–‡ï¼Œæ¬¢è¿ä¸€é”®ä¸‰è¿å“¦ã€‚</strong></p> 
<blockquote> 
 <p>ğŸ’å½“å‰ä¸“æ ï¼š<a href="https://blog.csdn.net/m0_46388260/category_12252975.html">Javaæ¯•ä¸šè®¾è®¡</a></p> 
</blockquote> 
<p><strong>ç²¾å½©ä¸“æ æ¨èğŸ‘‡ğŸ»ğŸ‘‡ğŸ»ğŸ‘‡ğŸ»</strong></p> 
<blockquote> 
 <p>ğŸ€ <a href="https://blog.csdn.net/m0_46388260/category_12293085.html">å®‰å“appæ¯•ä¸šè®¾è®¡</a><br> ğŸŒ<a href="https://blog.csdn.net/m0_46388260/category_12297237.html">å¾®ä¿¡å°ç¨‹åºæ¯•ä¸šè®¾è®¡</a></p> 
</blockquote> 
<h2><a id="_12"></a>å¼€å‘ç¯å¢ƒ</h2> 
<blockquote> 
 <p>å¼€å‘è¯­è¨€ï¼šJava<br> æ¡†æ¶ï¼šspringboot<br> JDKç‰ˆæœ¬ï¼šJDK1.8<br> æœåŠ¡å™¨ï¼štomcat7<br> æ•°æ®åº“ï¼šmysql 5.7<br> æ•°æ®åº“å·¥å…·ï¼šNavicat12<br> å¼€å‘è½¯ä»¶ï¼šeclipse/myeclipse/idea<br> MavenåŒ…ï¼šMaven3.3.9<br> æµè§ˆå™¨ï¼šè°·æ­Œæµè§ˆå™¨</p> 
</blockquote> 
<h2><a id="_24"></a>æºç ä¸‹è½½åœ°å€ï¼š</h2> 
<p><a href="https://download.csdn.net/download/2301_76953549/87943477">https://download.csdn.net/download/2301_76953549/87943477</a></p> 
<h2><a id="_26"></a>è®ºæ–‡ç›®å½•</h2> 
<h3><a id="_28"></a><strong>ã€å¦‚éœ€å…¨æ–‡è¯·æŒ‰æ–‡æœ«è·å–è”ç³»ã€‘</strong></h3> 
<p><img src="https://images2.imgbox.com/68/10/4VromhNG_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/68/5a/D3OwDmWg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p></p> 
<div class="toc"> 
 <h4>ç›®å½•</h4> 
 <ul><li><a href="#_12" rel="nofollow">å¼€å‘ç¯å¢ƒ</a></li><li><a href="#_24" rel="nofollow">æºç ä¸‹è½½åœ°å€ï¼š</a></li><li><a href="#_26" rel="nofollow">è®ºæ–‡ç›®å½•</a></li><li><ul><li><a href="#_28" rel="nofollow">**ã€å¦‚éœ€å…¨æ–‡è¯·æŒ‰æ–‡æœ«è·å–è”ç³»ã€‘**</a></li></ul> 
  </li><li><a href="#_33" rel="nofollow">ä¸€ã€é¡¹ç›®ç®€ä»‹</a></li><li><a href="#_37" rel="nofollow">äºŒã€ç³»ç»Ÿè®¾è®¡</a></li><li><ul><li><a href="#21_39" rel="nofollow">2.1è½¯ä»¶åŠŸèƒ½æ¨¡å—è®¾è®¡</a></li><li><a href="#22_45" rel="nofollow">2.2æ•°æ®åº“è®¾è®¡</a></li></ul> 
  </li><li><a href="#_57" rel="nofollow">ä¸‰ã€ç³»ç»Ÿé¡¹ç›®éƒ¨åˆ†æˆªå›¾</a></li><li><ul><li><a href="#31_59" rel="nofollow">3.1ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å—</a></li><li><a href="#32_72" rel="nofollow">3.2ç”¨æˆ·åŠŸèƒ½æ¨¡å—</a></li><li><a href="#33_81" rel="nofollow">3.3å‰å°é¦–é¡µåŠŸèƒ½æ¨¡å—</a></li></ul> 
  </li><li><a href="#_89" rel="nofollow">å››ã€éƒ¨åˆ†æ ¸å¿ƒä»£ç </a></li><li><ul><li><a href="#41__91" rel="nofollow">4.1 ç”¨æˆ·éƒ¨åˆ†</a></li></ul> 
  </li><li><a href="#_207" rel="nofollow">è·å–æºç æˆ–è®ºæ–‡</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_33"></a>ä¸€ã€é¡¹ç›®ç®€ä»‹</h2> 
<p>æœ¬ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿé‡‡ç”¨çš„æ•°æ®åº“æ˜¯Mysqlï¼Œä½¿ç”¨springbootæ¡†æ¶å¼€å‘ã€‚åœ¨è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå……åˆ†ä¿è¯äº†ç³»ç»Ÿä»£ç çš„è‰¯å¥½å¯è¯»æ€§ã€å®ç”¨æ€§ã€æ˜“æ‰©å±•æ€§ã€é€šç”¨æ€§ã€ä¾¿äºåæœŸç»´æŠ¤ã€æ“ä½œæ–¹ä¾¿ä»¥åŠé¡µé¢ç®€æ´ç­‰ç‰¹ç‚¹ã€‚</p> 
<h2><a id="_37"></a>äºŒã€ç³»ç»Ÿè®¾è®¡</h2> 
<h3><a id="21_39"></a>2.1è½¯ä»¶åŠŸèƒ½æ¨¡å—è®¾è®¡</h3> 
<p>ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿç»“æ„å›¾ï¼Œå¦‚å›¾4-3æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/c3/07/AcUWkJzL_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="22_45"></a>2.2æ•°æ®åº“è®¾è®¡</h3> 
<p>é€šè¿‡ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿçš„åŠŸèƒ½è¿›è¡Œè§„åˆ’åˆ†æˆå‡ ä¸ªå®ä½“ä¿¡æ¯ï¼Œå®ä½“ä¿¡æ¯å°†é€šè¿‡ERå›¾è¿›è¡Œè¯´æ˜ï¼Œæœ¬ç³»ç»Ÿçš„ä¸»è¦å®ä½“å›¾å¦‚ä¸‹ï¼š<br> ç®¡ç†å‘˜ä¿¡æ¯å±æ€§å›¾å¦‚å›¾4-5æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/71/12/5gUJ5QAw_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ç”¨æˆ·ç®¡ç†å®ä½“å±æ€§å›¾å¦‚å›¾4-6æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/69/5e/FiCEED5J_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å•†å“ä¿¡æ¯ç®¡ç†å®ä½“å±æ€§å›¾å¦‚å›¾4-7æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/46/23/y1yRSRq6_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è®¢å•ç®¡ç†å®ä½“å±æ€§å›¾å¦‚å›¾4-8æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/6b/13/KQ1Ztlvm_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="_57"></a>ä¸‰ã€ç³»ç»Ÿé¡¹ç›®éƒ¨åˆ†æˆªå›¾</h2> 
<h3><a id="31_59"></a>3.1ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å—</h3> 
<p>ç®¡ç†å‘˜ç™»å½•ï¼Œé€šè¿‡å¡«å†™ç”¨æˆ·åã€å¯†ç ã€è§’è‰²è¿›è¡Œç™»å½•ï¼Œå¦‚å›¾5-1æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/99/29/1gJICVR2_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç®¡ç†å‘˜ç™»å½•è¿›å…¥ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹é¦–é¡µã€ä¸ªäººä¸­å¿ƒã€ç”¨æˆ·ç®¡ç†ã€å•†å“åˆ†ç±»ç®¡ç†ã€å•†å“ä¿¡æ¯ç®¡ç†ã€è®¢å•è¯„ä»·ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ã€è®¢å•ç®¡ç†ç­‰ä¿¡æ¯ã€‚<br> ä¸ªäººä¸­å¿ƒï¼Œåœ¨ä¸ªäººä¸­å¿ƒé¡µé¢ä¸­å¯ä»¥é€šè¿‡å¡«å†™åŸå¯†ç ã€æ–°å¯†ç ã€ç¡®è®¤å¯†ç ç­‰ä¿¡æ¯è¿›è¡Œæ·»åŠ ã€ä¿®æ”¹ï¼Œå¦‚å›¾5-2æ‰€ç¤ºã€‚è¿˜å¯ä»¥æ ¹æ®éœ€è¦å¯¹ä¸ªäººä¿¡æ¯è¿›è¡Œæ·»åŠ ï¼Œä¿®æ”¹æˆ–åˆ é™¤ç­‰è¯¦ç»†æ“ä½œï¼Œå¦‚å›¾5-3æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/f8/44/osoZqFAB_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/73/40/QE2CTuu5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ç”¨æˆ·ç®¡ç†ï¼Œåœ¨ç”¨æˆ·ç®¡ç†é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€å¤´åƒã€è”ç³»ç”µè¯ç­‰ä¿¡æ¯ï¼Œå¹¶å¯æ ¹æ®éœ€è¦å¯¹ç”¨æˆ·ç®¡ç†è¿›è¡Œè¯¦æƒ…ã€ä¿®æ”¹æˆ–åˆ é™¤ç­‰æ“ä½œï¼Œå¦‚å›¾5-4æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/72/ba/2NT4ZEut_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è®¢å•è¯„ä»·ç®¡ç†ï¼Œåœ¨è®¢å•è¯„ä»·ç®¡ç†é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹è®¢å•ç¼–å·ã€å•†å“åç§°ã€å•†å“åˆ†ç±»ã€å“ç‰Œã€è§„æ ¼ã€è¯„åˆ†ã€æ·»åŠ å›¾ç‰‡ã€è¯„ä»·å†…å®¹ã€è¯„ä»·æ—¥æœŸã€ç”¨æˆ·åã€å®¡æ ¸å›å¤ã€å®¡æ ¸çŠ¶æ€ã€å®¡æ ¸ç­‰å†…å®¹ï¼Œå¹¶ä¸”æ ¹æ®éœ€è¦å¯¹è®¢å•è¯„ä»·ç®¡ç†è¿›è¡Œè¯¦æƒ…ã€ä¿®æ”¹æˆ–åˆ é™¤ç­‰è¯¦ç»†æ“ä½œï¼Œå¦‚å›¾5-9æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/e1/1f/0ewZGQ5d_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="32_72"></a>3.2ç”¨æˆ·åŠŸèƒ½æ¨¡å—</h3> 
<p>ç”¨æˆ·ç™»å½•è¿›å…¥ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹é¦–é¡µã€ä¸ªäººä¸­å¿ƒã€è®¢å•è¯„ä»·ç®¡ç†ã€æˆ‘çš„æ”¶è—ç®¡ç†ã€è®¢å•ç®¡ç†ç­‰å†…å®¹ã€‚<br> è®¢å•è¯„ä»·ç®¡ç†ï¼Œåœ¨è®¢å•è¯„ä»·ç®¡ç†é¡µé¢ä¸­é€šè¿‡æŸ¥çœ‹è®¢å•ç¼–å·ã€å•†å“åç§°ã€å•†å“åˆ†ç±»ã€å“ç‰Œã€è§„æ ¼ã€è¯„åˆ†ã€æ·»åŠ å›¾ç‰‡ã€è¯„ä»·å†…å®¹ã€è¯„ä»·æ—¥æœŸã€ç”¨æˆ·åã€å®¡æ ¸å›å¤ã€å®¡æ ¸çŠ¶æ€ç­‰ä¿¡æ¯è¿˜å¯ä»¥æ ¹æ®éœ€è¦å¯¹è®¢å•è¯„ä»·ç®¡ç†è¿›è¡Œä¿®æ”¹ï¼Œå¦‚å›¾5-10æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/96/bd/Uh225mmo_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘çš„æ”¶è—ç®¡ç†ï¼Œåœ¨æˆ‘çš„æ”¶è—ç®¡ç†é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹æ”¶è—åç§°ã€æ”¶è—å›¾ç‰‡ç­‰ä¿¡æ¯å†…å®¹ï¼Œå¹¶ä¸”æ ¹æ®éœ€è¦å¯¹æˆ‘çš„æ”¶è—ç®¡ç†è¿›è¡Œè¯¦æƒ…æˆ–åˆ é™¤ç­‰å…¶ä»–è¯¦ç»†æ“ä½œï¼Œå¦‚å›¾5-11æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/cc/ff/5K1EJ6Kb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è®¢å•ç®¡ç†ï¼Œåœ¨è®¢å•ç®¡ç†é¡µé¢ä¸­é€šè¿‡æŸ¥çœ‹è®¢å•ç¼–å·ã€å•†å“åç§°ã€å•†å“å›¾ç‰‡ã€è´­ä¹°æ•°é‡ã€ä»·æ ¼/ç§¯åˆ†ã€æŠ˜æ‰£ä»·æ ¼ã€æ€»ä»·æ ¼/æ€»ç§¯åˆ†ã€æŠ˜æ‰£æ€»ä»·æ ¼ã€æ”¯ä»˜ç±»å‹ã€çŠ¶æ€ã€åœ°å€ç­‰å†…å®¹è¿›è¡Œè¯¦æƒ…ï¼Œå¦‚å›¾5-12æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/3b/ad/4kfd4pbP_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="33_81"></a>3.3å‰å°é¦–é¡µåŠŸèƒ½æ¨¡å—</h3> 
<p>ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿï¼Œåœ¨ç½‘ä¸Šå•†åŸè´­ç‰©ç³»ç»Ÿå¯ä»¥æŸ¥çœ‹é¦–é¡µã€å•†å“ä¿¡æ¯ã€å•†å“èµ„è®¯ã€ä¸ªäººä¸­å¿ƒã€åå°ç®¡ç†ã€è´­ç‰©è½¦ã€åœ¨çº¿å®¢æœç­‰å†…å®¹ï¼Œå¦‚å›¾5-13æ‰€ç¤ºã€‚<br> <img src="https://images2.imgbox.com/c9/40/IHXzGGuC_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ç”¨æˆ·ç™»å½•ã€ç”¨æˆ·æ³¨å†Œï¼Œé€šè¿‡æ³¨å†Œè·å–ç”¨æˆ·åã€å¯†ç ã€å§“åã€è”ç³»ç”µè¯ç­‰ä¿¡æ¯è¿›è¡Œæ³¨å†Œã€ç™»å½•ï¼Œå¦‚å›¾5-14æ‰€ç¤ºã€‚<img src="https://images2.imgbox.com/82/8e/2Z4Y4cjN_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å•†å“ä¿¡æ¯ï¼Œåœ¨å•†å“ä¿¡æ¯é¡µé¢å¯ä»¥æŸ¥çœ‹å•†å“åç§°ã€å•†å“åˆ†ç±»ã€å›¾ç‰‡ã€å“ç‰Œã€è§„æ ¼ã€ä»·æ ¼ç­‰ä¿¡æ¯è¿›è¡Œæ·»åŠ åˆ°è´­ç‰©è½¦ã€ç«‹å³è´­ä¹°ï¼Œå¦‚å›¾5-15æ‰€ç¤ºã€‚ <img src="https://images2.imgbox.com/7b/2f/eyMNkOJ6_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä¸ªäººä¸­å¿ƒï¼Œåœ¨ä¸ªäººä¸­å¿ƒé¡µé¢å¯ä»¥æŸ¥çœ‹ç”¨æˆ·åã€å§“åã€æ€§åˆ«ã€å¤´åƒã€è”ç³»ç”µè¯ç­‰è¿›è¡Œæ›´æ–°ä¿¡æ¯ã€é€€å‡ºç™»å½•å¦‚å›¾5-16æ‰€ç¤ºã€‚<img src="https://images2.imgbox.com/ba/cc/c54rzOi2_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="_89"></a>å››ã€éƒ¨åˆ†æ ¸å¿ƒä»£ç </h2> 
<h3><a id="41__91"></a>4.1 ç”¨æˆ·éƒ¨åˆ†</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileNotFoundException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Random</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpHeaders</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">MediaType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ResourceUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestBody</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IgnoreAuth</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">EntityWrapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">ConfigEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">EIException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ConfigService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">R</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * ä¸Šä¼ æ–‡ä»¶æ˜ å°„è¡¨
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"unchecked"</span><span class="token punctuation">,</span><span class="token string">"rawtypes"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileController</span><span class="token punctuation">{<!-- --></span>
	<span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ConfigService</span> configService<span class="token punctuation">;</span>
	<span class="token comment">/**
	 * ä¸Šä¼ æ–‡ä»¶
	 */</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">,</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EIException</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ æ–‡ä»¶ä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">String</span> fileExt <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">File</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">ResourceUtils</span><span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token string">"classpath:static"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		    path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">File</span> upload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"/upload/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>upload<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		    upload<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"."</span><span class="token operator">+</span>fileExt<span class="token punctuation">;</span>
		<span class="token class-name">File</span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>upload<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">ConfigEntity</span> configEntity <span class="token operator">=</span> configService<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EntityWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigEntity</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"faceFile"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>configEntity<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				configEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				configEntity<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"faceFile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				configEntity<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
				configEntity<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			configService<span class="token punctuation">.</span><span class="token function">insertOrUpdate</span><span class="token punctuation">(</span>configEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"file"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">/**
	 * ä¸‹è½½æ–‡ä»¶
	 */</span>
	<span class="token annotation punctuation">@IgnoreAuth</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/download"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">File</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">ResourceUtils</span><span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token string">"classpath:static"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>path<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			    path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token class-name">File</span> upload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"/upload/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>upload<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			    upload<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>upload<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token comment">/*if(!fileService.canRead(file, SessionManager.getSessionUser())){
					getResponse().sendError(403);
				}*/</span>
				<span class="token class-name">HttpHeaders</span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			    headers<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_OCTET_STREAM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
			    headers<span class="token punctuation">.</span><span class="token function">setContentDispositionFormData</span><span class="token punctuation">(</span><span class="token string">"attachment"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>    
			    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token class-name">FileUtils</span><span class="token punctuation">.</span><span class="token function">readFileToByteArray</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span>headers<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">CREATED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="_207"></a>è·å–æºç æˆ–è®ºæ–‡</h2> 
<p>å¦‚éœ€å¯¹åº”çš„è®ºæ–‡æˆ–æºç ï¼Œä¹Ÿå¯ä»¥è¯„è®ºæˆ–è€…ç§ä¿¡ã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac29d4ce2d46cb8b410d20f4e0fa271d/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Redis(ä¸€) redisé…ç½® | å¦‚ä½•è¿æ¥redisæœåŠ¡å™¨ | åŸºæœ¬æ•°æ®ç±»å‹ | åŸºæœ¬å…¨å±€å‘½ä»¤ | æ•°æ®ç»“æ„å’Œå†…éƒ¨ç¼–ç æ–¹å¼</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/18b0157e73f626368b56d10f8460aa30/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">C&#43;&#43;å¿ƒå†³ä¹‹å‘½åç©ºé—´ã€é‡è½½å‡½æ•°å’Œå¼•ç”¨</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>