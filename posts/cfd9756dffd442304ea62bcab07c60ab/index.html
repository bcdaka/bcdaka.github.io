<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Stable Diffusion本地安装详细教程（Mac篇） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cfd9756dffd442304ea62bcab07c60ab/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Stable Diffusion本地安装详细教程（Mac篇）">
  <meta property="og:description" content="01引言
今天给大家重点介绍下AI绘图工具——Stable-Diffusion-WebUI。大家都知道Midjourney生成图片效果很惊艳，其实Stable Diffusion是目前开源免费且最好用的本地运行AI绘画工具。
Stable Diffusion是22年8月份由Stability AI推出的基于python的文本生成图像模型。Stable Diffusion对于普通用户而言，目前最大的优势就是免费，安装到电脑本地即可使用。
就生成图像的效果和性能来说：
**- Stable Diffusion的模型规模更大、稳定性更高，渲染效果更强大，也更具有人类创作水平；
**
- 生成图像质量更高于其他模型：图像真实感更高，更清晰且富有细节；
- 支持多种风格和主题的图像生成，不局限于特定类型，但支持定制化训练模型专注特定领域；
- 输入prompt文本描述更自由更灵活，不需要遵循特定的格式或者模板，且支持多种参数调整和设置；
- 模型是在本地电脑运行，不需要排队，适合在各种硬件环境中部署使用。
相比而言，Midjourney生成的图像更抽象，在图片的艺术性和想象空间上更强，如生成完全虚构的风景等,可能略胜一筹。当然Stable Diffusion因为模型庞大，对电脑的GPU性能要求高，每次输出速度会慢。
总的来说，Stable Diffusion是目前文本到图像生成的最领先模型,在大多数方面都超过mid journey。
不过Stable Diffusion的安装还是有不小门槛的。限于我手头只有Mac电脑，就先详细介绍一下Mac电脑如何安装Stable Diffusion。
02安装步骤
1、软硬件要求：
1）Mac电脑，最好是搭载m1或者m2的Mac本，内存在16G以上，这样运行速度会更快一些。当然如果你和我一样是旧本（MBP15款，16G），也是可以运行的，图片质量不会有太大差别，只是会比较慢；
2）硬盘空间：至少10个G，考虑到后续会添加不同的模型，所以最好有30G以上空间；
3）保持网络连接稳定；需要能够流畅访问内外网。
2、具体安装步骤如下：
1）从启动台打开terminal终端命令，也可以使用快捷键：control&#43;空格键调起聚焦搜索，输入terminal，回车打开终端；
2）如果使用代理的，需要复制终端代理命令（你在电脑上安装代理的界面上通常会有这一项，直接点击即可复制），是以“export https_proxy=”开头的一段代码，复制到终端敲回车运行即可。
3）打开homebrew网站（https://brew.sh/），安装homebrew
- 点击页面右侧的复制操作，或者直接复制下面这段代码：
/bin/bash -c “$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)”
- 在terminal内运行代码，即可安装。安装过程中看到**“password”是需要输入你电脑的开机密码，直接键盘输入，敲回车即可继续。这里面，如果电脑没有安装Xcode，会优先安装Xcode，再安装homebrew。显示“return/enter”**后再次敲回车，如果显示下面界面——Installation successful，则homebrew安装成功。
4）通过brew安装 python 等相关软件
复制下面这个安装文件，继续在当前终端窗口运行：
brew install cmake protobuf rust python@3.10 git wget
安装成功后关闭终端即可。
5）克隆stable diffusion webui
需要在自己的电脑里新建一个文件夹，比如我建的“SD-AI”，你点击右键可以选择“新建位于文件夹位置的终端窗口”，然后复制下面git地址到终端运行：
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
这样stable diffusion webui的github开源程序就可以全部克隆到自己的mac电脑本地了，原来的空文件就会展示stable-diffusion-webui文件。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-15T14:44:56+08:00">
    <meta property="article:modified_time" content="2024-05-15T14:44:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Stable Diffusion本地安装详细教程（Mac篇）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/22/2f/QoCwmCj0_o.png" alt=""></p> 
<p><strong>01引言</strong></p> 
<p>今天给大家重点介绍下AI绘图工具——Stable-Diffusion-WebUI。大家都知道Midjourney生成图片效果很惊艳，其实Stable Diffusion是目前开源免费且最好用的本地运行AI绘画工具。</p> 
<p>Stable Diffusion是22年8月份由Stability AI推出的基于python的文本生成图像模型。Stable Diffusion对于普通用户而言，目前最大的优势就是<strong>免费</strong>，安装到电脑本地即可使用。</p> 
<p><img src="https://images2.imgbox.com/d2/83/tTRuMliA_o.png" alt=""></p> 
<p>就生成图像的效果和性能来说：</p> 
<p>**- Stable Diffusion的模型规模更大、稳定性更高，渲染效果更强大，也更具有人类创作水平；<br> **</p> 
<p><strong>- 生成图像质量更高于其他模型：图像真实感更高，更清晰且富有细节；</strong></p> 
<p><strong>- 支持多种风格和主题的图像生成，不局限于特定类型，但支持定制化训练模型专注特定领域；</strong></p> 
<p><strong>- 输入prompt文本描述更自由更灵活，不需要遵循特定的格式或者模板，且支持多种参数调整和设置；</strong></p> 
<p><strong>- 模型是在本地电脑运行，不需要排队，适合在各种硬件环境中部署使用。</strong></p> 
<p>相比而言，Midjourney生成的图像更抽象，在图片的艺术性和想象空间上更强，如生成完全虚构的风景等,可能略胜一筹。当然Stable Diffusion因为模型庞大，对电脑的GPU性能要求高，每次输出速度会慢。</p> 
<p>总的来说，Stable Diffusion是目前文本到图像生成的最领先模型,在大多数方面都超过mid journey。</p> 
<p>不过Stable Diffusion的安装还是有不小门槛的。限于我手头只有Mac电脑，就先详细介绍一下Mac电脑如何安装Stable Diffusion。</p> 
<p><strong>02安装步骤</strong></p> 
<p><strong>1、软硬件要求：</strong></p> 
<p>1）Mac电脑，最好是搭载m1或者m2的Mac本，内存在16G以上，这样运行速度会更快一些。当然如果你和我一样是旧本（MBP15款，16G），也是可以运行的，图片质量不会有太大差别，只是会比较慢；</p> 
<p>2）硬盘空间：至少10个G，考虑到后续会添加不同的模型，所以最好有30G以上空间；</p> 
<p>3）保持网络连接稳定；需要能够流畅访问内外网。</p> 
<p><strong>2、具体安装步骤如下：</strong></p> 
<p><strong>1）从启动台打开terminal终端命令，也可以使用快捷键：control+空格键调起聚焦搜索，输入terminal，回车打开终端；</strong></p> 
<p><img src="https://images2.imgbox.com/48/2a/NzUFJHQf_o.png" alt="在这里插入图片描述"></p> 
<p>2）如果使用代理的，<strong>需要复制终端代理命令</strong>（你在电脑上安装代理的界面上通常会有这一项，直接点击即可复制），是以“export https_proxy=”开头的一段代码，复制到终端敲回车运行即可。</p> 
<p><img src="https://images2.imgbox.com/4c/bc/d509gujG_o.png" alt=""></p> 
<p><strong>3）打开homebrew网站（https://brew.sh/），安装homebrew</strong></p> 
<p><img src="https://images2.imgbox.com/30/f0/MiZM5mnW_o.png" alt=""></p> 
<p>- 点击页面右侧的复制操作，或者直接复制下面这段代码：</p> 
<blockquote> 
 <p><strong>/bin/bash -c “$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)”</strong></p> 
</blockquote> 
<p>- 在terminal内运行代码，即可安装。<img src="https://images2.imgbox.com/f6/ad/f3no0bHR_o.png" alt="">安装过程中看到**“password”<strong>是需要输入你电脑的开机密码，直接键盘输入，敲回车即可继续。这里面，如果电脑没有安装Xcode，会优先安装Xcode，再安装homebrew。<img src="https://images2.imgbox.com/7e/61/2uwIuIXL_o.jpg" alt="">显示</strong>“return/enter”**后再次敲回车，如果显示下面界面——Installation successful，则homebrew安装成功。<img src="https://images2.imgbox.com/47/4b/LqdOjwOt_o.png" alt=""></p> 
<p><strong>4）通过brew安装 python 等相关软件</strong></p> 
<p>复制下面这个安装文件，继续在当前终端窗口运行：</p> 
<blockquote> 
 <p><strong>brew install cmake protobuf rust python@3.10 git wget</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/e9/37/cDcA1h1x_o.png" alt=""></p> 
<p>安装成功后关闭终端即可。</p> 
<p><strong>5）克隆stable diffusion webui</strong></p> 
<p><img src="https://images2.imgbox.com/55/08/NNYZewqV_o.png" alt=""></p> 
<p>需要在自己的电脑里新建一个文件夹，比如我建的“SD-AI”，你点击右键可以选择“新建位于文件夹位置的终端窗口”，然后复制下面git地址到终端运行：</p> 
<blockquote> 
 <p><strong>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/9f/84/7i46JWr5_o.png" alt="">这样stable diffusion webui的github开源程序就可以全部克隆到自己的mac电脑本地了，原来的空文件就会展示<strong>stable-diffusion-webui</strong>文件。</p> 
<p><img src="https://images2.imgbox.com/3a/e5/yMslOuFf_o.png" alt=""></p> 
<p><strong>6）在stable-diffusion-webui&gt;venv文件夹下找到webui-user.sh，右键使用文本编辑器打开。</strong></p> 
<p><img src="https://images2.imgbox.com/0b/63/nXWAU5tx_o.png" alt=""></p> 
<p><strong>- 使用新版Mac的用到GPU的复制下面的代码，添加到引号里#export COMMANDLINE_ARGS=“”</strong></p> 
<blockquote> 
 <p><strong>–medvram --opt-split-attent****ion</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ae/8a/19ztuIyG_o.png" alt=""></p> 
<p><strong>- 使用旧版Mac的只用CPU的，复制下面的代码，添加到引号里#export COMMANDLINE_ARGS=“”</strong></p> 
<blockquote> 
 <p><strong>–medvram --opt-split-attention --skip-torch-cuda-test --no-half --use-cpu all</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/15/9c/JTUjj0Zi_o.png" alt=""></p> 
<p>如果是老机器，可以在stable-diffusion-webui&gt;venv找到webui-macos-env.sh文件，右键使用文本编辑器打开。</p> 
<p><img src="https://images2.imgbox.com/10/5e/Qwyy37G7_o.png" alt=""></p> 
<p><strong>找到并删除“-vae”就可以。</strong></p> 
<p><img src="https://images2.imgbox.com/f4/9d/QQCHXhEZ_o.png" alt=""></p> 
<p><strong>7）下载stable diffusion模型安装文件</strong></p> 
<p>克隆完stable diffusion webui之后，就可以下载模型，这里以stable diffusion 2.0训练模型为例。复制下面链接在浏览器打开：</p> 
<p><strong>https://huggingface.co/stabilityai/stable-diffusion-2-1/tree/main</strong></p> 
<p><img src="https://images2.imgbox.com/4f/5b/w24R8uNA_o.png" alt=""></p> 
<p><strong>在页面的“file and versions” 里面找到并下载其中一个ckpt文件。下载好后，把下载好的ckpt文件放在“文件名”&gt; Stable-diffusion-webui&gt;Models&gt;Stable-diffusion文件夹里。</strong></p> 
<p><img src="https://images2.imgbox.com/fe/29/UnHNUHAe_o.png" alt=""></p> 
<p>也可以下载其他模型，具体可以在这里下载：<strong>https://huggingface.co/stabilityai</strong></p> 
<p><strong>8）运行命令</strong>**./webui.sh**</p> 
<p><img src="https://images2.imgbox.com/e4/b7/DdTn9Vmk_o.png" alt=""></p> 
<p>在文件夹stable-diffusion-webui，点击右键选择“新建位于文件夹位置的终端窗口”，然后复制下面代码到终端运行：</p> 
<blockquote> 
 <p><strong>./webui.sh</strong></p> 
</blockquote> 
<p>这一步可能需要花费较长时间，因为会下载几个sd必需的应用。当你看到Running on local URL: http://127.0.0.1:7860，就算是成功了！</p> 
<p><img src="https://images2.imgbox.com/26/fe/TCR3Zyof_o.png" alt=""></p> 
<p><strong>9）打开stable-diffusion-webui网页版</strong></p> 
<p>**注意生成图片的过程中不要关闭终端（terminal）窗口，**打开浏览器(safari或者chrome)后输入</p> 
<p>http://127.0.0.1:7860，即可访问本地stable diffusion webui了。</p> 
<p><img src="https://images2.imgbox.com/34/a6/GY0aWBxV_o.png" alt=""></p> 
<p>10）接下来可以在prompt框里面输入提示词后，就能点击“general”生成ai绘图了。</p> 
<p>生成完成之后在界面右侧能看到具体图片，在右下角点击“save”保存图片即可，这样你就生成你的图片了，如下图我生成的这样。</p> 
<p><img src="https://images2.imgbox.com/d6/c8/8P8Xp0nw_o.png" alt=""></p> 
<p><strong>怎么样，也不难吧，快来生成你的第一张图吧！</strong></p> 
<p><strong>在电脑上安装好以后每次使用时，需要先执行终端代理命令（需要去掉最后一段<strong><strong>all_proxy开头的</strong></strong>，只保留前两段，具体见常见问题 Q4），再 执行第8步运行命令，然后在浏览器打开链接即可：http://127.0.0.1:7860</strong></p> 
<p><strong>03常见问题</strong></p> 
<p><strong>Q1:[notice] A new release of pip available: 22.2.2 -&gt; 23.0.1[notice] To update, run: pip install --upgrade pip</strong></p> 
<p><strong>A:跟pip关系不大，大部分都是网络原因，切换节点或者不切换重新运行几遍试试；</strong></p> 
<p><strong>Q2:zsh: command not found: brew</strong></p> 
<p><strong>A: 重新执行安装homebrew步骤；</strong></p> 
<p><strong>Q3:如果在安装Installing gfpgan/Installing clip过程中报错</strong></p> 
<p><strong>A: 大概率是网络或者硬盘空间不足问题，请确保网络连接正常，需要重新复制代理命令运行./webui.sh</strong></p> 
<p><strong>Q4:ImportError: Using SOCKS proxy, but the ‘socksio’ package is not installed. Make sure to install httpx using `pip install httpx[socks]`.</strong></p> 
<p><strong>A:在第8）步运行的时候，把你的终端代理命令行最后一段去掉：all_proxy=<strong><strong>socks5://127.0.0.1:7890</strong></strong>，只用前两段。</strong></p> 
<p>此外，硬件性能问题，如果你是m2或者m1 max， m1 pro之类的高性能芯片，16g内存以上，那么生成一张20step的图不会太慢。如果你就是老电脑，一旦设置的参数较高就会很慢，甚至会多达几个小时。</p> 
<p>另外，绘图需要算力和内存较大，建议先关闭其他不用的电脑程序。</p> 
<p><strong>04中文汉化</strong></p> 
<p><strong>1、复制下面汉化包地址，添加到Extension&gt;install from url&gt;URL for extensionis git repository</strong></p> 
<blockquote> 
 <p>https://github.com/VinsonLaro/stable-diffusion-webui-chinese</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/6d/00/PZ1Rzs43_o.png" alt=""></p> 
<p>然后点击“install”按钮进行安装。</p> 
<p><strong>2、然后回到Extension&gt;installed tab点击“Apply and restart UI”进行应用。</strong></p> 
<p><img src="https://images2.imgbox.com/95/40/gGPkKoXS_o.png" alt=""></p> 
<p><strong>3、应用后切换页面到Setting &gt;user interface&gt;Localizat****ion (requires restart)，选择chinese-english-0512（注）</strong></p> 
<p><img src="https://images2.imgbox.com/8d/77/O8zo1g2m_o.png" alt=""></p> 
<p><strong>4）在当前页面依次点击apply settings和Reload UI，这样就汉化完成了！</strong></p> 
<p><img src="https://images2.imgbox.com/16/b1/jrkP69aC_o.png" alt=""></p> 
<p>关于stable diffusion安装和使用，有什么想聊的也欢迎留言讨论～</p> 
<p>.</p> 
<h3><a id="_234"></a>写在最后</h3> 
<p><font face="幼圆" size="4" color="red">感兴趣的小伙伴，赠送全套AIGC学习资料，包含AI绘画、AI人工智能等前沿科技教程和软件工具，具体看这里。<br> </font><br> <img src="https://images2.imgbox.com/e8/68/O3IQrIXW_o.png"></p> 
<p>AIGC技术的未来发展前景广阔，随着人工智能技术的不断发展，AIGC技术也将不断提高。未来，AIGC技术将在游戏和计算领域得到更广泛的应用，使游戏和计算系统具有更高效、更智能、更灵活的特性。同时，AIGC技术也将与人工智能技术紧密结合，在更多的领域得到广泛应用，对程序员来说影响至关重要。未来，AIGC技术将继续得到提高，同时也将与人工智能技术紧密结合，在更多的领域得到广泛应用。<br>  <br> <img src="https://images2.imgbox.com/92/08/b1gbotuR_o.png" alt="在这里插入图片描述"></p> 
<p><strong>一、AIGC所有方向的学习路线</strong></p> 
<p>AIGC所有方向的技术点做的整理，形成各个领域的知识点汇总，它的用处就在于，你可以按照下面的知识点去找对应的学习资源，保证自己学得较为全面。</p> 
<p><img src="https://images2.imgbox.com/01/37/fp42SiFh_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/0f/04/BOYgKL22_o.png" alt="在这里插入图片描述"></p> 
<p><strong>二、AIGC必备工具</strong></p> 
<p>工具都帮大家整理好了，安装就可直接上手！<br> <img src="https://images2.imgbox.com/c8/71/gIobVEZD_o.png" alt="在这里插入图片描述"></p> 
<p><strong>三、最新AIGC学习笔记</strong></p> 
<p>当我学到一定基础，有自己的理解能力的时候，会去阅读一些前辈整理的书籍或者手写的笔记资料，这些笔记详细记载了他们对一些技术点的理解，这些理解是比较独到，可以学到不一样的思路。<br> <img src="https://images2.imgbox.com/be/12/1lZr6isW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bd/23/3emedX0N_o.png" alt="在这里插入图片描述"></p> 
<p><strong>四、AIGC视频教程合集</strong></p> 
<p>观看全面零基础学习视频，看视频学习是最快捷也是最有效果的方式，跟着视频中老师的思路，从基础到深入，还是很容易入门的。</p> 
<p><img src="https://images2.imgbox.com/23/4a/y4UV7JS7_o.png" alt="在这里插入图片描述"></p> 
<p><strong>五、实战案例</strong></p> 
<p>纸上得来终觉浅，要学会跟着视频一起敲，要动手实操，才能将自己的所学运用到实际当中去，这时候可以搞点实战案例来学习。<br> <img src="https://images2.imgbox.com/ae/b2/gMf6ySbP_o.png" alt="在这里插入图片描述"></p> 
<img src="https://images2.imgbox.com/32/e9/JZvAyvVD_o.png"> 若有侵权，请联系删除
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e50aea592ed2e119bf6630cd8cfef595/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数组（Java）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/904e20300c5393ce7f06847ec7ec953b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ES 数据写入方式:直连 VS Flink 集成系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>