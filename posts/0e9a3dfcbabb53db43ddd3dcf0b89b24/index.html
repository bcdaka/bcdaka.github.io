<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据结构】树和二叉树——Lesson1 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0e9a3dfcbabb53db43ddd3dcf0b89b24/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【数据结构】树和二叉树——Lesson1">
  <meta property="og:description" content="Hi~！这里是奋斗的小羊，很荣幸您能阅读我的文章，诚请评论指点，欢迎欢迎 ~~
💥💥个人主页：奋斗的小羊
💥💥所属专栏：C语言
🚀本系列文章为个人学习笔记，在这里撰写成文一为巩固知识，二为展示我的学习过程及理解。文笔、排版拙劣，望见谅。
目录 前言一、树1、树的概念和结构2、相关术语3、树的表示4、树形结构应用场景 二、二叉树1、概念和结构2、特殊的二叉树3、二叉树的存储3.1顺序存储3.2链式存储 4、顺序结构实现二叉树4.1堆的结构和概念4.2堆的实现4.2.1向上调整算法4.2.2向下调整算法 4.3堆的应用4.3.1堆排序4.3.2 TOP-K问题 5、完整代码 总结 前言 一、树 1、树的概念和结构 树是一种非线性的数据结构，它是由n（n&gt;=0）个有限节点组成的一个具有层次关系的集合。它包含一个根节点以及若干子节点，子节点又可以有自己的子节点，以此类推。
根节点： 根节点没有前驱结点子节点： 除根节点外，其余节点被分为m（m&gt;0）个互不相交的集合，其中每一个集合又是一棵结构与树类似的子树。每棵子树的根节点有且只有一个前驱节点，可以有0个或多个后继节点。因此，树是递归定义的。 与现实中的树相比，这里的树更像是一棵倒挂的树。
树形结构中，子树之前不能有交集，否则就不是树形结构。
非树结构：
子树是不相交的除了根节点，每个节点有且只有一个父节点一棵N个节点的树有N-1条边 2、相关术语 树有很多的术语，基本都是根据现实中的树和人类亲缘关系命名的，其中红色标记的是比较重要的概念。
父节点/双亲节点： 若一个节点有子节点，这个节点就是子节点的父节点（相对的），上图中A是B的父节点子节点： 一个节点含有的子树的根节点称为该节点的子节点，上图B是A的子节点节点的度： 一个节点有几个孩子，它的度就是多少树的度： 一棵树中，最大节点的度就是树的度，上图树的度为2叶子节点/终端节点： 度为0的节点称为叶子节点分支节点/非终端节点： 度不为0的节点兄弟节点： 具有相同父亲的节点就是兄弟节点（亲兄弟）节点的层次： 从根开始定义起，根为第一层，其子节点为第二层，以此类推树的高度/深度： 树中节点的最大层次，上图树的深度为5节点的祖先： 从根到该节点所经分支上的所有节点路径： 一条从树中任意节点出发，沿父节点-子节点连接，达到任意节点的序列子孙： 以某节点为根的子树中任意一节点都称为该节点的子孙森林： 由m (m&gt;0）棵互不相交的树（多棵树）的集合称为森林 3、树的表示 树结构相对线性表复杂的多，既要保存值域，还要保存节点和节点之间的关系，最常用的表示法是左孩子右兄弟表示法。
struct TreeNode { struct Node* child;//左边开始的第一个孩子节点 struct Node* brother;//右边的下一个兄弟节点 int data; }; 4、树形结构应用场景 文件系统是计算机存储和管理文件的一种方式，它利用树形结构来组织和管理文件好文件夹。在文件系统中，树结构被广泛应用，它通过父节点和子节点之间的关系来表示不同层级的文件和文件夹之间的关联。
二、二叉树 1、概念和结构 二叉树是一种特殊的树，在树形结构中，我们最常用的就是二叉树，一棵二叉树是节点的一个有限集合，该集合由一个根节点加上两棵别称为左子树和右子树的二叉树组成或者为空。
上图就是二叉树的基本结构。从上图可以看到，二叉树有以下特点：
二叉树的特点：
二叉树不存在度大于2的节点二叉树的子树有左右之分，次序不能颠倒，因此二叉树是有序树 对于任意二叉树都是由以下几种情况复合而成的：
2、特殊的二叉树 满二叉树： 一个二叉树，如果每一层的节点数都达到最大值，则这个二叉树就是满二叉树。一个层数为N的满二叉树的节点数为2^N-1。完全二叉树： 完全二叉树的前N-1层都是满的，最后一层不满且子节点从左到右必须是连续的。完全二叉树是效率很高的数据结构，完全二叉树是由满二叉树引出来的，因此满二叉树是一种特殊的完全二叉树。 3、二叉树的存储 3.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-17T13:45:29+08:00">
    <meta property="article:modified_time" content="2024-07-17T13:45:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据结构】树和二叉树——Lesson1</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><em><strong>Hi~！这里是奋斗的小羊，很荣幸您能阅读我的文章，诚请评论指点，欢迎欢迎 ~~</strong></em><br> <strong>💥💥个人主页：<a href="https://blog.csdn.net/2301_78843337?type=blog">奋斗的小羊</a><br> 💥💥所属专栏：<a href="https://blog.csdn.net/2301_78843337/category_12630603.html">C语言</a></strong><br> <img src="https://images2.imgbox.com/1f/58/cOKaVako_o.gif" alt=""></p> 
</blockquote> 
<blockquote> 
 <p><em><strong>🚀本系列文章为个人学习笔记，在这里撰写成文一为巩固知识，二为展示我的学习过程及理解。文笔、排版拙劣，望见谅。</strong></em></p> 
</blockquote> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_12" rel="nofollow">前言</a></li><li><a href="#_13" rel="nofollow">一、树</a></li><li><ul><li><a href="#1_14" rel="nofollow">1、树的概念和结构</a></li><li><a href="#2_36" rel="nofollow">2、相关术语</a></li><li><a href="#3_54" rel="nofollow">3、树的表示</a></li><li><a href="#4_67" rel="nofollow">4、树形结构应用场景</a></li></ul> 
  </li><li><a href="#_74" rel="nofollow">二、二叉树</a></li><li><ul><li><a href="#1_75" rel="nofollow">1、概念和结构</a></li><li><a href="#2_90" rel="nofollow">2、特殊的二叉树</a></li><li><a href="#3_97" rel="nofollow">3、二叉树的存储</a></li><li><ul><li><a href="#31_98" rel="nofollow">3.1顺序存储</a></li><li><a href="#32_117" rel="nofollow">3.2链式存储</a></li></ul> 
   </li><li><a href="#4_124" rel="nofollow">4、顺序结构实现二叉树</a></li><li><ul><li><a href="#41_125" rel="nofollow">4.1堆的结构和概念</a></li><li><a href="#42_147" rel="nofollow">4.2堆的实现</a></li><li><ul><li><a href="#421_200" rel="nofollow">4.2.1向上调整算法</a></li><li><a href="#422_259" rel="nofollow">4.2.2向下调整算法</a></li></ul> 
    </li><li><a href="#43_312" rel="nofollow">4.3堆的应用</a></li><li><ul><li><a href="#431_313" rel="nofollow">4.3.1堆排序</a></li><li><a href="#432_TOPK_399" rel="nofollow">4.3.2 TOP-K问题</a></li></ul> 
   </li></ul> 
   </li><li><a href="#5_433" rel="nofollow">5、完整代码</a></li></ul> 
  </li><li><a href="#_664" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/04/30/jVxAbx4I_o.gif" alt=""></p> 
<h2><a id="_12"></a>前言</h2> 
<h2><a id="_13"></a>一、树</h2> 
<h3><a id="1_14"></a>1、树的概念和结构</h3> 
<p>树是一种非线性的数据结构，它是由<code>n（n&gt;=0）</code>个有限节点组成的一个具有层次关系的集合。它包含<strong>一个根节点</strong>以及<strong>若干子节点</strong>，子节点又可以有自己的子节点，以此类推。</p> 
<ul><li><strong>根节点：</strong> 根节点没有前驱结点</li><li><strong>子节点：</strong> 除根节点外，其余节点被分为<code>m（m&gt;0）</code>个互不相交的集合，其中每一个集合又是一棵结构与树类似的子树。每棵子树的根节点有且只有一个前驱节点，可以有0个或多个后继节点。因此，<strong>树是递归定义的。</strong></li></ul> 
<p>与现实中的树相比，这里的树更像是一棵<strong>倒挂</strong>的树。</p> 
<p><img src="https://images2.imgbox.com/29/ac/qLRle2e2_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/0c/3e/76cShanZ_o.png" alt="在这里插入图片描述" height="300"></p> 
<p>树形结构中，子树之前不能有交集，否则就不是树形结构。</p> 
<p>非树结构：<br> <img src="https://images2.imgbox.com/8f/d0/ZJIKc3Hz_o.png" alt="在这里插入图片描述" height="200"></p> 
<ul><li><strong>子树是不相交的</strong></li><li><strong>除了根节点，每个节点有且只有一个父节点</strong></li><li><strong>一棵N个节点的树有N-1条边</strong></li></ul> 
<hr> 
<h3><a id="2_36"></a>2、相关术语</h3> 
<p>树有很多的术语，基本都是根据<strong>现实中的树和人类亲缘关系</strong>命名的，其中红色标记的是比较重要的概念。</p> 
<ul><li><strong><code>父节点/双亲节点</code>：</strong> 若一个节点有子节点，这个节点就是子节点的父节点（相对的），上图中A是B的父节点</li><li><strong><code>子节点</code>：</strong> 一个节点含有的子树的根节点称为该节点的子节点，上图B是A的子节点</li><li><strong>节点的度：</strong> 一个节点有几个孩子，它的度就是多少</li><li><strong>树的度：</strong> 一棵树中，最大节点的度就是树的度，上图树的度为2</li><li><strong><code>叶子节点/终端节点</code>：</strong> 度为<code>0</code>的节点称为叶子节点</li><li><strong>分支节点/非终端节点：</strong> 度不为<code>0</code>的节点</li><li><strong>兄弟节点：</strong> 具有相同父亲的节点就是兄弟节点（亲兄弟）</li><li><strong>节点的层次：</strong> 从根开始定义起，根为第一层，其子节点为第二层，以此类推</li><li><strong><code>树的高度/深度</code>：</strong> 树中节点的最大层次，上图树的深度为5</li><li><strong>节点的祖先：</strong> 从根到该节点所经分支上的所有节点</li><li><strong>路径：</strong> 一条从树中任意节点出发，沿父节点-子节点连接，达到任意节点的序列</li><li><strong>子孙：</strong> 以某节点为根的子树中任意一节点都称为该节点的子孙</li><li><strong>森林：</strong> 由m (m&gt;0）棵互不相交的树（多棵树）的集合称为森林</li></ul> 
<hr> 
<h3><a id="3_54"></a>3、树的表示</h3> 
<p>树结构相对线性表复杂的多，既要保存值域，还要保存节点和节点之间的关系，最常用的表示法是<strong>左孩子右兄弟表示法。</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">TreeNode</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token operator">*</span> child<span class="token punctuation">;</span><span class="token comment">//左边开始的第一个孩子节点</span>
	<span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token operator">*</span> brother<span class="token punctuation">;</span><span class="token comment">//右边的下一个兄弟节点</span>
	<span class="token keyword">int</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/a6/xdfa3ch7_o.png" alt=""></p> 
<hr> 
<h3><a id="4_67"></a>4、树形结构应用场景</h3> 
<p>文件系统是计算机存储和管理文件的一种方式，它利用树形结构来组织和管理文件好文件夹。在文件系统中，树结构被广泛应用，它通过父节点和子节点之间的关系来表示不同层级的文件和文件夹之间的关联。</p> 
<p><img src="https://images2.imgbox.com/c1/bb/a0DEQcMM_o.png" alt="请添加图片描述"></p> 
<hr> 
<h2><a id="_74"></a>二、二叉树</h2> 
<h3><a id="1_75"></a>1、概念和结构</h3> 
<p>二叉树是一种特殊的树，在树形结构中，我们最常用的就是二叉树，一棵二叉树是节点的一个有限集合，该集合由一个根节点加上两棵别称为<strong>左子树</strong>和<strong>右子树</strong>的二叉树组成或者为空。<br> <img src="https://images2.imgbox.com/b6/89/lofzTGaW_o.png" alt="在这里插入图片描述" height="300"></p> 
<p>上图就是二叉树的基本结构。从上图可以看到，二叉树有以下特点：</p> 
<p><strong>二叉树的特点：</strong></p> 
<blockquote> 
 <ul><li><strong>二叉树不存在度大于2的节点</strong></li><li><strong>二叉树的子树有左右之分，次序不能颠倒，因此<code>二叉树是有序树</code></strong></li></ul> 
</blockquote> 
<p><strong>对于任意二叉树都是由以下几种情况复合而成的：</strong></p> 
<p><img src="https://images2.imgbox.com/99/ee/t6r8fTMo_o.png" alt=""></p> 
<hr> 
<h3><a id="2_90"></a>2、特殊的二叉树</h3> 
<ul><li><strong>满二叉树：</strong> 一个二叉树，如果每一层的节点数都达到最大值，则这个二叉树就是满二叉树。一个层数为N的满二叉树的节点数为2^N-1。</li><li><strong>完全二叉树：</strong> 完全二叉树的前N-1层都是满的，最后一层不满且子节点从左到右必须是连续的。完全二叉树是效率很高的数据结构，完全二叉树是由满二叉树引出来的，因此满二叉树是一种特殊的完全二叉树。</li></ul> 
<p><img src="https://images2.imgbox.com/03/59/G3N0HAdo_o.png" alt="在这里插入图片描述" height="200"></p> 
<hr> 
<h3><a id="3_97"></a>3、二叉树的存储</h3> 
<h4><a id="31_98"></a>3.1顺序存储</h4> 
<p>顺序存储就是使用数组来存储，一般使用数组只适合表示完全二叉树，如果不是完全二叉树要<strong>保证下标对应</strong>就会有空间浪费，因此<strong>完全二叉树适合用顺序结构存储。</strong></p> 
<p><img src="https://images2.imgbox.com/93/5e/fore4caL_o.png" alt="请添加图片描述"><br> 可以看到非完全二叉树虽然也可以使用数组存储，但是存在空间浪费，所以非完全二叉树更适合链式存储。</p> 
<p>这种存储结构有一个规律，可以根据下标来计算父子关系。</p> 
<blockquote> 
 <p><strong>假设父亲在数组中的下标为：i</strong></p> 
</blockquote> 
<ul><li><strong>左孩子在数组中的下标：2*i+1</strong></li><li><strong>右孩子在数组中的下标：2*i+2</strong></li></ul> 
<blockquote> 
 <p><strong>假设孩子在数组中的下标是：j</strong></p> 
</blockquote> 
<ul><li><strong>父亲在数组中的下标就是(j-1）/ 2</strong></li></ul> 
<p>实际中<strong>常把堆（一种二叉树）使用顺序结构的数组来存储</strong>，需要注意的是这里的堆和操作系统虚拟进程地址空间中的堆不是一回事，一个是数据结构，一个是操作系统中管理内存的一块区域划分。</p> 
<hr> 
<h4><a id="32_117"></a>3.2链式存储</h4> 
<p>二叉树的链式存储是指用链表来表示一棵二叉树，即用链表来指示元素的逻辑关系。<br> 通常每个节点由三个域组成，一个数据域和两个指针域，<strong>分别用左指针和右指针来指向左孩子和右孩子</strong>。链式结构又分为二叉链和三叉链，当前学习中一般都是二叉链。<br> <img src="https://images2.imgbox.com/2b/a5/oKfDDOBU_o.png" alt="请添加图片描述" height="200"></p> 
<p><strong>本篇文章主要介绍二叉树的顺序存储，在下篇文章中会详细介绍二叉树的链式存储。</strong></p> 
<hr> 
<h3><a id="4_124"></a>4、顺序结构实现二叉树</h3> 
<h4><a id="41_125"></a>4.1堆的结构和概念</h4> 
<table><thead><tr><th></th><th>堆（Heap）</th><th>栈（Stack）</th></tr></thead><tbody><tr><td>数据结构</td><td>一种树形结构，可以做堆排序，效率很高</td><td>一种线性结构，具有后进先出的特点，基本操作有压栈、出栈</td></tr><tr><td>C语言</td><td>用于动态分配内存的区域</td><td>由操作系统分配的固定大小的空间</td></tr></tbody></table> 
<p>一般<strong>堆使用顺序结构的数组来存储数据</strong>，堆是一种特殊的二叉树，具有二叉树性质的同时，还具备其他的特性。</p> 
<p>堆具有以下性质：</p> 
<ul><li><strong>堆中某个节点的值总是不大于或不小于其父节点的值</strong></li><li><strong>堆是一棵完全二叉树</strong></li></ul> 
<p>其中堆又分为大堆和小堆：</p> 
<ul><li><strong>大堆 / 大根堆 / 大顶堆：任何一个父亲&gt;=孩子，根最大</strong></li><li><strong>小堆 / 小根堆 / 小顶堆：任何一个父亲&lt;=孩子，根最小</strong></li></ul> 
<p><img src="https://images2.imgbox.com/70/7d/o32Nx1Rh_o.png" alt="在这里插入图片描述"></p> 
<p>从上图中可以看到，<strong>小堆不一定是升序，大堆也不一定是降序，</strong> 因为兄弟之间没有大小关系。</p> 
<hr> 
<h4><a id="42_147"></a>4.2堆的实现</h4> 
<p>堆的底层结构是数组，基本与顺序表一样。因此定义堆的结构为：</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> HeapDataType<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Heap</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">;</span>
	<span class="token keyword">int</span> size<span class="token punctuation">;</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Heap<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">HeapInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HeapDestroy</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
bool <span class="token function">HeapEmpty</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中初始化、销毁、取堆顶、判空函数也基本与我们之前写过的相差无几，这里就直接给出不做介绍。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HeapInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HeapDestroy</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">free</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bool <span class="token function">HeapEmpty</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> php<span class="token operator">-&gt;</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p><strong><code>接下来就到了比较重要的内容.</code></strong></p> 
<h5><a id="421_200"></a>4.2.1向上调整算法</h5> 
<p>| <strong>堆的插入</strong><br> 将新数据插入到数组末尾，再通过向上调整算法，直到满足堆。</p> 
<ul><li>先将元素插入到堆的末尾，即最后一个孩子之后</li><li>插入后如果堆的性质被破坏，将新插入的节点顺着其双亲节点往上调整到合适的位置即可</li></ul> 
<p>下面是小堆插入：</p> 
<p><img src="https://images2.imgbox.com/db/0c/XN42Nywu_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		           <span class="token comment">//  &gt; 是建大堆</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HeapPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">==</span> php<span class="token operator">-&gt;</span>capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> php<span class="token operator">-&gt;</span>capacity<span class="token punctuation">;</span>
		HeapDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>HeapDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		php<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		tmp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
		php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>php<span class="token operator">-&gt;</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size<span class="token operator">++</span><span class="token punctuation">;</span>
	
	<span class="token comment">//向上调整</span>
	<span class="token function">AdjustUp</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>向上调整算法建堆的时间复杂度为：<code>O(N*logN)</code></strong></p> 
</blockquote> 
<hr> 
<h5><a id="422_259"></a>4.2.2向下调整算法</h5> 
<p>| <strong>堆的删除</strong></p> 
<p><strong>删除堆是删除堆顶的数据</strong>，前提是<code>size &gt; 0</code>有数据可删。将堆顶的数据和最后一个数据交换，然后删除数组最后一个数据，为了继续满足堆需要再进行向下调整算法，结果是<strong>次小的（次大的）在堆顶。</strong><br> 堆顶数据和最后一个数据交换再删除的目的是<strong>保证根节点下左右子树都是堆，父子关系不会乱。</strong></p> 
<p><img src="https://images2.imgbox.com/2a/b6/HVwUj7l1_o.png" alt="请添加图片描述"></p> 
<p><strong>向下调整：</strong></p> 
<p><img src="https://images2.imgbox.com/08/9d/8QAHRwCu_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//假设左孩子小</span>
	<span class="token keyword">int</span> child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> parent <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;</span> n<span class="token punctuation">)</span><span class="token comment">//child&gt;=n时孩子不存在</span>
	<span class="token punctuation">{<!-- --></span>
		                            <span class="token comment">// &lt; 是建大堆</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//防止右孩子越界</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//建大堆，要大孩子，建小堆，要小孩子</span>
			child<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
			child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> parent <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HeapPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
	
	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>向下调整算法建堆时间复杂度为：<code>O(N)</code></strong></p> 
</blockquote> 
<hr> 
<h4><a id="43_312"></a>4.3堆的应用</h4> 
<h5><a id="431_313"></a>4.3.1堆排序</h5> 
<p><strong>| <code>版本一</code>：基于已有数组建堆，取堆顶元素完成排序</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HeapSort</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Heap hp<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">HeapPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">HeapEmpty</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		arr<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">HeapTop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">HeapPop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">HeapDestroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>该版本有一个前提：必须提供有现成的数据结构堆。<br> 所以这样排序不好，得先建一个堆放入数据（开辟额外空间），再从堆里面将数组拷贝到原数组中，<strong><code>空间复杂度O(N)</code>。</strong><br> 要是能有什么办法避免开辟额外的空间就好了，来看版本二：</p> 
<hr> 
<p><strong>| <code>版本二</code>：原数组上建堆，首尾交换，交换后的堆尾数据从堆中删除，将堆顶数据向下（向上）调整选出次大（次小）的数据</strong></p> 
<p>思路是<strong>直接将原数组（看作）一个堆，从下标为1的孩子开始，向上（向下）</strong> 循环调整（实现大堆或者小堆），最终达到在原数组上建堆的效果，这个方法好在没有额外的空间消耗。</p> 
<pre><code class="prism language-c"><span class="token comment">//向上调整建堆</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">AdjustUp</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//向下调整建堆</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>向上调整算法建堆时默认第一个元素已经排好，从下标为1的元素<strong>往后依次</strong>开始调整。<br> 向下调整算法建堆，从最后一个孩子的父亲开始<strong>往前依次</strong>向下调整，到堆顶时结束。</p> 
<blockquote> 
 <p><strong>因为向上调整算法建堆的时间复杂度是：<code>O(N*logN)</code>，而向下调整算法建堆的时间复杂度是：<code>O(N)</code>，所以我们优先使用向下调整算法建堆来实现<code>堆排序</code>。</strong></p> 
</blockquote> 
<p>确定了建堆的算法，接下来就要考虑的是如果我们要排升序，该在原数组上建大堆还是小堆？<br> 可能大多数人下意识地<strong>认为排升序的话应该建小堆</strong>，因为我们可以通过循环拿根节点（堆顶）再删除根节点的方法依次得到最小值，<strong>其实这样是不好的</strong>。<br> 因为小堆的堆顶是所有数里的最小值，此时堆顶已经排好了，要想排剩下的数就要重新建堆，这样一来父子关系全乱了，实现起来代价太大。</p> 
<p>如果<strong>建大堆</strong>，此时堆顶是最大的数，可以删除堆顶，结果就是<strong>最大的数到数组末端</strong>，n- -后这个最大的数就不被当做堆内的数，循环向下调整重复上面的操作，就能得到按升序排列的数组了。</p> 
<p><img src="https://images2.imgbox.com/e3/9d/CSxCLnsa_o.png" alt="请添加图片描述"></p> 
<blockquote> 
 <p>所以，<strong>排升序，建大堆；排降序，建小堆。</strong></p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HeapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//升序，建大堆</span>
	<span class="token comment">//降序，建小堆</span>
	
	<span class="token comment">//向下调整建堆</span>
	<span class="token comment">//O(N)</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">AdjustDown</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//O(N*logN)</span>
	<span class="token keyword">int</span> end <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">AdjustDown</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
		end<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><strong>向下调整算法建堆时间复杂度<code>O(N)</code>，再加上最后的排序操作的时间复杂度<code>O(N*logN)</code>，整个堆排序的时间复杂度是<code>O(N*logN)</code>，比起冒泡排序时间复杂度<code>O(N^2)</code>，堆排序是非常非常理想的。</strong></p> 
</blockquote> 
<hr> 
<h5><a id="432_TOPK_399"></a>4.3.2 TOP-K问题</h5> 
<p>TOP-K问题：求数据量比较大的数据中前K个最大或最小的元素。比如：富豪榜TOP10、世界企业TOP500、中国名校TOP100等。</p> 
<p>对于TOP-K问题，最简单最直接的办法就是排序，但是当数据量比较大时排序就不可取了，最佳的方式就是利用堆来解决。</p> 
<p>我们可以将大量的数据<strong>建大堆</strong>（向下调整算法优先），此时堆顶就是最大的数据，然后<code>Top</code>k次就能解决问题了。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">TOP</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Heap hp<span class="token punctuation">;</span>
	<span class="token function">HeapInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">34</span><span class="token punctuation">,</span><span class="token number">453</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">534</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7673</span><span class="token punctuation">,</span><span class="token number">56</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">HeapPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>k<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token function">HeapTop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">HeapPop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">HeapDestroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b0/4a/Vd4Oud9A_o.png" alt="请添加图片描述" height="200"></p> 
<hr> 
<h3><a id="5_433"></a>5、完整代码</h3> 
<p><code>heap.h:</code></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;assert.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdbool.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> HeapDataType<span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Heap</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">;</span>
	<span class="token keyword">int</span> size<span class="token punctuation">;</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Heap<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> child<span class="token punctuation">,</span> HeapDataType<span class="token operator">*</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HeapInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HeapDestroy</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HeapPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">HeapPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
bool <span class="token function">HeapEmpty</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>heap.c:</code></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>  <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"heap.h"</span></span>

<span class="token keyword">void</span> <span class="token function">HeapInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HeapDestroy</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">free</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> child<span class="token punctuation">,</span> HeapDataType<span class="token operator">*</span> parent<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType tmp <span class="token operator">=</span> <span class="token operator">*</span>child<span class="token punctuation">;</span>
	<span class="token operator">*</span>child <span class="token operator">=</span> <span class="token operator">*</span>parent<span class="token punctuation">;</span>
	<span class="token operator">*</span>parent <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//  &gt; 是建大堆</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HeapPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">==</span> php<span class="token operator">-&gt;</span>capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> php<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> php<span class="token operator">-&gt;</span>capacity<span class="token punctuation">;</span>
		HeapDataType<span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> newcapacity <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>HeapDataType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc fail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		php<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		tmp <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
		php<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>php<span class="token operator">-&gt;</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size<span class="token operator">++</span><span class="token punctuation">;</span>

	<span class="token comment">//向上调整</span>
	<span class="token function">AdjustUp</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//假设左孩子小</span>
	<span class="token keyword">int</span> child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> parent <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;</span> n<span class="token punctuation">)</span><span class="token comment">//child&gt;=n时孩子不存在</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// &lt; 是建大堆</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//防止右孩子越界</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//建大堆，要大孩子，建小堆，要小孩子</span>
			child<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
			child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> parent <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">HeapPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>php<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	php<span class="token operator">-&gt;</span>size<span class="token operator">--</span><span class="token punctuation">;</span>

	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> php<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token operator">-&gt;</span>size <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> php<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bool <span class="token function">HeapEmpty</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> php<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>php<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> php<span class="token operator">-&gt;</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>test.c:</code></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>  <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"heap.h"</span></span>

<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	Heap hp<span class="token punctuation">;</span>
	<span class="token function">HeapInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">HeapPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">HeapDestroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//排升序</span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//建大堆</span>
		<span class="token function">AdjustUp</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">//void HeapSort(int* arr, int n)</span>
<span class="token comment">//{<!-- --></span>
<span class="token comment">//	//升序，建大堆</span>
<span class="token comment">//	//降序，建小堆</span>
<span class="token comment">//</span>
<span class="token comment">//	for (int i = 1; i &lt; n; i++)</span>
<span class="token comment">//	{<!-- --></span>
<span class="token comment">//		AdjustUp(arr, i);</span>
<span class="token comment">//	}</span>
<span class="token comment">//</span>
<span class="token comment">//	int end = n - 1;</span>
<span class="token comment">//	while (end &gt; 0)</span>
<span class="token comment">//	{<!-- --></span>
<span class="token comment">//		Swap(&amp;arr[0], &amp;arr[end]);</span>
<span class="token comment">//		AdjustDown(arr, 0, end);</span>
<span class="token comment">//		end--;</span>
<span class="token comment">//	}</span>
<span class="token comment">//}</span>

<span class="token keyword">void</span> <span class="token function">TOP</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Heap hp<span class="token punctuation">;</span>
	<span class="token function">HeapInit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">34</span><span class="token punctuation">,</span><span class="token number">453</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">,</span><span class="token number">534</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">7673</span><span class="token punctuation">,</span><span class="token number">56</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">HeapPush</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>k<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token function">HeapTop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">HeapPop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">HeapDestroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//test1();</span>
	<span class="token comment">//test2();</span>
	<span class="token function">TOP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_664"></a>总结</h2> 
<blockquote> 
 <ul><li>二叉树在各种领域和问题中都有广泛的应用，文件系统、数据库、表达式求值、代码编译、网络路由、Huffman 编码等场景。</li><li>堆排序利用了二叉堆的性质，通过构建最大堆（或最小堆）来实现排序。整个排序过程分为两个阶段：首先通过数组构建一个最大堆，然后不断将堆顶元素与堆的最后一个元素交换并调整堆，最终得到一个有序数组。</li></ul> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/83dbe1f639897f7315442d49d6e4b1af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【QT】鼠标按键事件 - QMouseEvent &amp; QKeyEvent</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e7047acbd5a380bdac4c7046918d9c5e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言中for、while、do while、break、continue、goto的使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>