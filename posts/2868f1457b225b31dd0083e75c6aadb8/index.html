<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【腾讯云 TDSQL-C Serverless 产品体验】聚焦业务价值之在Serverless上的探索和实践 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2868f1457b225b31dd0083e75c6aadb8/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【腾讯云 TDSQL-C Serverless 产品体验】聚焦业务价值之在Serverless上的探索和实践">
  <meta property="og:description" content="【腾讯云 TDSQL-C Serverless 产品体验】聚焦业务价值之在Serverless上的探索和实践
简介：随着公司商城的业务规模量的逐渐增长，对系统服务的弹性诉求越来越强烈，通过借助腾讯云TDSQL-C Serverless最佳落地实践如何对企业有效的降低成本，提高效率。
公司的业务现状： 公司在今年上半年开发了一个商城，在投入运营阶段发现在业务的初期5、6、7、8月初，用户量比较少，基本上还不到100的访问量，经过公司的策略改变，加上运营团队进行了几波疯狂有效的推广与促销，使系统的访问量逐渐在这2个月起来了，以下是公司的流量趋势图。
项目上线后，非但没有有效的盈收，反正每月还要消耗大量的IT软硬件资源成本。
Serverless的探索： Serverless计算模式一直是各大云厂商追求的目标。Serverless概念以及FaaS&#43;BaaS的设计思想的提出也极大地影响了近几年云计算的发展。随着腾讯云的Serverless Framework以及国内各云厂商FaaS模式的不断发展，业内对数据库模式的BaaS需求也越发强烈。
Serverless数据库的核心是解决实例CPU、内存和磁盘等资源平滑升降的问题，使得数据库实例可以根据负载情况按需分配资源。这种方式可以让用户获得最合理的IT资源，从而优化用户价值。
在业务波动较大的场景下，普通实例和Serverless实例资源使用和规格变化情况不同的对比：
Serverless这种模式在我们日常生活中无处不在。比如，我们日常用的水电，每月交水费和电费时，系统都会精确到几分钱，水电作为一种公共设施，完全可以按照个人需要去付费，用多少付多少，无需额外支付，其实这就是一种Serverless服务。
进入云计算模式以后，客户不用再去买服务器，直接使用云服务厂商提供的服务即可。这相当于是一种租车模式，相比买车成本更低，但同时也存在一个问题，因为你的业务不是每天都在跑，却时刻需要为这个服务去付费，租赁成本比较高昂。
而Serverless服务相当于打车模式，在你需要时才去为此付费，你不用特意去买车，也不用租车，需要用车时直接打车就行，更节约成本。从用户视角看，Serverless服务是一种完全按需付费的商业模式。
Serverless服务背后需要很强大的计算能力和资源池化的调度能力来支撑，对底层基础设施服务要求较高。而且随着技术演进，未来会有很多后端服务逐步走向Serverless化，比如云数据库，面临的技术挑战也会更大。
TDSQL-C Serverless 的实践： TDSQL-C基于全新计算存储分离的分布式数据库架构，融合传统数据库和云计算技术优势，100%兼容MySQL和PostgreSQL，极致计算能力突破千核，存储容量达PB级别，使得性能和安全性媲美商用数据库。并且TDSQL-C支持集群和Serverless灵活弹性部署，克服传统架构下的存储量受限、扩展难、主从延迟高等缺点，充分释放领先技术的成本效益，最高可为企业节省90%的成本。
TDSQL-C Serverless数据库对比传统云数据库的优势：
Serverless计费方式无需按固定资源付费，根据业务负载自适应动态匹配资源，秒级弹性升降资源与计费，最高可节省 90% 费用。
TDSQL-C MySQL Serverless实例提供了CPU、内存的实时弹性能力，实例不仅提供网络资源、命名空间、存储空间的垂直资源隔离能力，还提供计算资源按需计费的能力，具有资源用量低、简单易用、弹性灵活和价格低廉等优点，赋能用户面向业务峰谷时对计算能力进行快速且独立的扩缩要求，做到快速响应业务变化的同时，合理优化使用成本，进一步助力企业降本增效。
优势：
更低的成本：对于创业初期的企业，MySQL Serverless不依赖其他的基础设施和相关服务，即买即用并可以提供稳定和高效的数据存取服务。使用期间只需要为占用的资源按使用量付费。更大的存储空间：存储空间最大可高达32 TB，根据实例数据量自动扩展，可以有效避免集群存储资源不足对业务造成影响。计算资源自动弹性扩缩容：用户读取和写入需要的计算资源可弹性伸缩，不需要手动扩缩容，极大减少了运维成本和系统风险。全面托管和免运维：版本升级、系统部署、扩缩容、报警处理等所有运维工作由阿里云专业团队完成，用户无感知，业务无影响，服务持续可用，真正免运维。 适用场景：
开发、测试环境等低频数据库使用场景中小企业建站服务等SaaS应用场景个人开发者用户学校教学、学生实验等教育场景物联网（IoT）、边缘计算等不确定负载场景全托管或希望完全免运维的用户业务有波动或不可预测的用户具有间歇性定时任务的业务场景 TDSQL-C Serverless 的落地实践： 生态接入能力： TDSQL-C Serverless数据库可以通过HTTP请求直接访问数据库，降低了传统数据库的使用门槛。相比通过JDBC/ODBC进行CRUD等操作，对程序员的要求更低，为用户提供RESTful API等方式，以灵活地执行SQL语句并与数据库进行交互：
秒级计费能力： TDSQL-C MySQL Serverless数据库实现了秒级计费：
正常运行的实例，计费系统会记录实例秒级CCU资源量变化，实现精确计费。当实例进入自动暂停阶段时，计费系统只会计算存储云盘费用，以节省费用。当实例恢复启动状态后，计费系统会重新按照资源CCU进行秒级计费。 按量计费的模式：
资源包的模式：
实例自动启停： TDSQL-C MySQL Serverless支持实例的自动启停功能，这项功能为研发实例、测试实例或周期无负载的实例提供了更为极致的成本优化。
当用户不需要访问数据库时，该功能能够让实例进入暂停状态，从而进一步节省资源成本。通过实现自动启停，TDSQL-C MySQL Serverless数据库能够更加智能地管理资源，使得资源的使用更加高效和灵活，为用户提供了更为经济和便捷的服务。
为了保障实例启停体验，TDSQL-C MySQL Serverless数据库在以下几个方面进行了深入改造和优化：
增加恢复感知器：
通过恢复感知器，TDSQL-C MySQL Serverless实例在暂停期间也不会宕机。当MySQL处于暂停状态时，一旦有请求访问，恢复感知器，保证系统一直在线，随时响应用户的请求，提高实例的可用性和效率，将实例内核本身的启动时间压缩到2秒内，极大地提高了实例启动的效率和速度。
云原生资源监控调度优化：
为保障实例资源分配和加载的效率，TDSQL-C MySQL Serverless采用了计算与存储分离的架构模式，极大地降低了实例启动管控时间。
购买数据库后。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-01T20:58:59+08:00">
    <meta property="article:modified_time" content="2023-11-01T20:58:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【腾讯云 TDSQL-C Serverless 产品体验】聚焦业务价值之在Serverless上的探索和实践</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>【腾讯云 TDSQL-C Serverless 产品体验】聚焦业务价值之在Serverless上的探索和实践</p> 
<p>简介：随着公司商城的业务规模量的逐渐增长，对系统服务的弹性诉求越来越强烈，通过借助腾讯云TDSQL-C Serverless最佳落地实践如何对企业有效的降低成本，提高效率。</p> 
<h2><a id="_4"></a>公司的业务现状：</h2> 
<p>公司在今年上半年开发了一个商城，在投入运营阶段发现在业务的初期5、6、7、8月初，用户量比较少，基本上还不到100的访问量，经过公司的策略改变，加上运营团队进行了几波疯狂有效的推广与促销，使系统的访问量逐渐在这2个月起来了，以下是公司的流量趋势图。</p> 
<p><img src="https://images2.imgbox.com/6f/fd/hsiYmyxi_o.png" alt="在这里插入图片描述"></p> 
<p>项目上线后，非但没有有效的盈收，反正每月还要消耗大量的IT软硬件资源成本。</p> 
<p><img src="https://images2.imgbox.com/66/2d/SO4dvGNA_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="Serverless_19"></a>Serverless的探索：</h2> 
<p>Serverless计算模式一直是各大云厂商追求的目标。Serverless概念以及FaaS+BaaS的设计思想的提出也极大地影响了近几年云计算的发展。随着腾讯云的Serverless Framework以及国内各云厂商FaaS模式的不断发展，业内对数据库模式的BaaS需求也越发强烈。</p> 
<p>Serverless数据库的核心是解决实例CPU、内存和磁盘等资源平滑升降的问题，使得数据库实例可以根据负载情况按需分配资源。这种方式可以让用户获得最合理的IT资源，从而优化用户价值。</p> 
<p>在业务波动较大的场景下，普通实例和Serverless实例资源使用和规格变化情况不同的对比：</p> 
<p><img src="https://images2.imgbox.com/bf/b9/MDuIZtWA_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b6/dd/qw8zHXKz_o.png" alt="在这里插入图片描述"></p> 
<p>Serverless这种模式在我们日常生活中无处不在。比如，我们日常用的水电，每月交水费和电费时，系统都会精确到几分钱，水电作为一种公共设施，完全可以按照个人需要去付费，用多少付多少，无需额外支付，其实这就是一种Serverless服务。</p> 
<p>进入云计算模式以后，客户不用再去买服务器，直接使用云服务厂商提供的服务即可。这相当于是一种租车模式，相比买车成本更低，但同时也存在一个问题，因为你的业务不是每天都在跑，却时刻需要为这个服务去付费，租赁成本比较高昂。</p> 
<p>而Serverless服务相当于打车模式，在你需要时才去为此付费，你不用特意去买车，也不用租车，需要用车时直接打车就行，更节约成本。从用户视角看，Serverless服务是一种完全按需付费的商业模式。</p> 
<p>Serverless服务背后需要很强大的计算能力和资源池化的调度能力来支撑，对底层基础设施服务要求较高。而且随着技术演进，未来会有很多后端服务逐步走向Serverless化，比如云数据库，面临的技术挑战也会更大。</p> 
<hr> 
<h2><a id="TDSQLC_Serverless__43"></a>TDSQL-C Serverless 的实践：</h2> 
<p>TDSQL-C基于全新计算存储分离的分布式数据库架构，融合传统数据库和云计算技术优势，100%兼容MySQL和PostgreSQL，极致计算能力突破千核，存储容量达PB级别，使得性能和安全性媲美商用数据库。并且TDSQL-C支持集群和Serverless灵活弹性部署，克服传统架构下的存储量受限、扩展难、主从延迟高等缺点，充分释放领先技术的成本效益，最高可为企业节省90%的成本。</p> 
<p>TDSQL-C Serverless数据库对比传统云数据库的优势：</p> 
<blockquote> 
 <p>Serverless计费方式无需按固定资源付费，根据业务负载自适应动态匹配资源，秒级弹性升降资源与计费，最高可节省 90% 费用。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/7f/83/Fx8jeILs_o.png" alt="在这里插入图片描述"></p> 
<p>TDSQL-C MySQL Serverless实例提供了CPU、内存的实时弹性能力，实例不仅提供网络资源、命名空间、存储空间的垂直资源隔离能力，还提供计算资源按需计费的能力，具有资源用量低、简单易用、弹性灵活和价格低廉等优点，赋能用户面向业务峰谷时对计算能力进行快速且独立的扩缩要求，做到快速响应业务变化的同时，合理优化使用成本，进一步助力企业降本增效。</p> 
<p>优势：</p> 
<ul><li>更低的成本：对于创业初期的企业，MySQL Serverless不依赖其他的基础设施和相关服务，即买即用并可以提供稳定和高效的数据存取服务。使用期间只需要为占用的资源按使用量付费。</li><li>更大的存储空间：存储空间最大可高达32 TB，根据实例数据量自动扩展，可以有效避免集群存储资源不足对业务造成影响。</li><li>计算资源自动弹性扩缩容：用户读取和写入需要的计算资源可弹性伸缩，不需要手动扩缩容，极大减少了运维成本和系统风险。</li><li>全面托管和免运维：版本升级、系统部署、扩缩容、报警处理等所有运维工作由阿里云专业团队完成，用户无感知，业务无影响，服务持续可用，真正免运维。</li></ul> 
<p>适用场景：</p> 
<ul><li>开发、测试环境等低频数据库使用场景</li><li>中小企业建站服务等SaaS应用场景</li><li>个人开发者用户</li><li>学校教学、学生实验等教育场景</li><li>物联网（IoT）、边缘计算等不确定负载场景</li><li>全托管或希望完全免运维的用户</li><li>业务有波动或不可预测的用户</li><li>具有间歇性定时任务的业务场景</li></ul> 
<hr> 
<h2><a id="TDSQLC_Serverless__77"></a>TDSQL-C Serverless 的落地实践：</h2> 
<h3><a id="_79"></a>生态接入能力：</h3> 
<p>TDSQL-C Serverless数据库可以通过HTTP请求直接访问数据库，降低了传统数据库的使用门槛。相比通过JDBC/ODBC进行CRUD等操作，对程序员的要求更低，为用户提供RESTful API等方式，以灵活地执行SQL语句并与数据库进行交互：</p> 
<p><img src="https://images2.imgbox.com/41/8b/6KhSqjVw_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/c7/a8/qgDqh0tF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_88"></a>秒级计费能力：</h3> 
<p><img src="https://images2.imgbox.com/90/3e/8uezR6iX_o.png" alt="在这里插入图片描述"></p> 
<p>TDSQL-C MySQL Serverless数据库实现了秒级计费：</p> 
<ul><li>正常运行的实例，计费系统会记录实例秒级CCU资源量变化，实现精确计费。</li><li>当实例进入自动暂停阶段时，计费系统只会计算存储云盘费用，以节省费用。</li><li>当实例恢复启动状态后，计费系统会重新按照资源CCU进行秒级计费。</li></ul> 
<p>按量计费的模式：</p> 
<p><img src="https://images2.imgbox.com/dd/18/3pjQQIrZ_o.png" alt="在这里插入图片描述"></p> 
<p>资源包的模式：<br> <img src="https://images2.imgbox.com/28/11/ZZIdmPeT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_105"></a>实例自动启停：</h3> 
<p>TDSQL-C MySQL Serverless支持实例的自动启停功能，这项功能为研发实例、测试实例或周期无负载的实例提供了更为极致的成本优化。</p> 
<p><img src="https://images2.imgbox.com/bd/33/EjH9a5Rp_o.png" alt="在这里插入图片描述"></p> 
<p>当用户不需要访问数据库时，该功能能够让实例进入暂停状态，从而进一步节省资源成本。通过实现自动启停，TDSQL-C MySQL Serverless数据库能够更加智能地管理资源，使得资源的使用更加高效和灵活，为用户提供了更为经济和便捷的服务。<br> <img src="https://images2.imgbox.com/64/e7/hAL9Ajp6_o.png" alt="在这里插入图片描述"></p> 
<p>为了保障实例启停体验，TDSQL-C MySQL Serverless数据库在以下几个方面进行了深入改造和优化：</p> 
<p>增加恢复感知器：</p> 
<p>通过恢复感知器，TDSQL-C MySQL Serverless实例在暂停期间也不会宕机。当MySQL处于暂停状态时，一旦有请求访问，恢复感知器，保证系统一直在线，随时响应用户的请求，提高实例的可用性和效率，将实例内核本身的启动时间压缩到2秒内，极大地提高了实例启动的效率和速度。</p> 
<p>云原生资源监控调度优化：</p> 
<p>为保障实例资源分配和加载的效率，TDSQL-C MySQL Serverless采用了计算与存储分离的架构模式，极大地降低了实例启动管控时间。<br> <img src="https://images2.imgbox.com/a4/18/ojAVe4Sd_o.png" alt="在这里插入图片描述"></p> 
<p>购买数据库后。</p> 
<img src="https://images2.imgbox.com/3c/a1/JJfyXHDB_o.png" width="600"> 
<p>开启外网连接。</p> 
<img src="https://images2.imgbox.com/4f/e6/GvCdafGe_o.png" width="600"> 
<p>开启外网后。</p> 
<img src="https://images2.imgbox.com/f1/65/LWE62Chx_o.png" width="600"> 
<p>使用TDSQL-C Serverless测试首次连接时间。</p> 
<pre><code class="prism language-js"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"gorm.io/driver/mysql"</span>
	<span class="token string">"gorm.io/gorm"</span>
	<span class="token string">"gorm.io/gorm/logger"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

func <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">time1</span> <span class="token operator">:</span><span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token literal-property property">dns</span> <span class="token operator">:</span><span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%s:%s@tcp(%s)/%s?charset=%s&amp;parseTime=True&amp;loc=Local"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"tdsql1."</span><span class="token punctuation">,</span> <span class="token string">"bj-cynosdbmysql-grp-4yen7vmm.sql.tencentcdb.com:23460"</span><span class="token punctuation">,</span> <span class="token string">"tdsqldb"</span><span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span>
	db<span class="token punctuation">,</span> <span class="token literal-property property">_</span> <span class="token operator">:</span><span class="token operator">=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>mysql<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>dns<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>gorm<span class="token punctuation">.</span>Config<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n\r"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"数据库实例启动的时间为："</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>time1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2c/f2/2yFRZ8eP_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p>云计算的迅猛发展推动了数据库的<br> 变革，云原生数据库成为当前数据库发展的重要方向之一。云原生数据库与Serverless的结合，则进一步加速了云原生数据库的演进。</p> 
<p><img src="https://images2.imgbox.com/10/62/4oWrLVTS_o.png" alt="在这里插入图片描述"></p> 
<p>TDSQL-C MySQL Serverless打破固定资源付费的模式，做到真正负载与资源动态匹配的按量付费，可节省大量成本。对高吞吐写入场景和高并发业务进行了设计优化，同时提供了弹性伸缩能力，适合业务数据量大、并具有典型的业务访问波峰波谷场景。2秒内即可完成集群资源扩缩容，业务完全无感。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3298267b827a0613cb97eab6f8b27c28/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端（二十七）——封装指南：Axios接口、常用功能、Vue和React中的封装技术</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4b8f860ce8eb99623075dc217367f49b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】堆的实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>