<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaScript 进阶必备：掌握 Symbol 新标识符用法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2914cda935dbed435053b4c28e0beeaf/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="JavaScript 进阶必备：掌握 Symbol 新标识符用法">
  <meta property="og:description" content="个人主页：学习前端的小z
个人专栏：JavaScript 精粹
本专栏旨在分享记录每日学习的前端知识和学习笔记的归纳总结，欢迎大家在评论区交流讨论！
文章目录 💯Symbol🚧 1. 综述🚧2 Symbol.prototype.description🚧 2.1 深入Symbol.prototype.description 🚧3 Symbol 作为独一无二的属性键 🚧 4 实例：替换硬编码字符串🚧 5 Symbol属性名的隐藏特性🚧 6 Symbol的全局注册与检索🚧 7 内置的 Symbol 值🔱 7.1 Symbol.hasInstance🔱7.2 Symbol.isConcatSpreadable🔱7.3 Symbol.species🔱7.4 Symbol.match🔱7.5 Symbol.replace🔱7.6 Symbol.search🔱7.7 Symbol.split🔱7.8 Symbol.iterator🔱7.9 Symbol.toPrimitive🔱7.10 Symbol.toStringTag🔱7.11 Symbol.unscopables 💯Symbol 🚧 1. 综述 在ES5中，对象的属性名均为字符串，这容易导致属性名的冲突。例如，当你使用一个他人提供的对象并希望为其添加新方法时（采用mixin模式），新方法的名字可能与现有方法产生冲突。为避免此类冲突，ES6引入了Symbol。
ES6新增了一种原始数据类型Symbol，它代表独一无二的值，成为JavaScript的第七种数据类型，前六种为：undefined、null、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。
Symbol值通过Symbol函数生成，意味着对象的属性名现在有两种类型：原有的字符串类型和新增的Symbol类型。凡是属性名为Symbol类型，都是独一无二的，可确保不会与其他属性名冲突。
let s = Symbol(); typeof s; // &#34;symbol&#34; 上述代码中，变量s是一个独一无二的值。typeof运算符的结果表明s是Symbol数据类型，而非字符串等其他类型。
需注意的是，Symbol函数前不能使用new命令，否则将报错。因为生成的Symbol是一个原始类型的值，而非对象。因此，Symbol值无法添加属性，它类似于字符串数据类型。
Symbol函数可接受一个字符串作为参数，用于描述Symbol实例，便于在控制台显示或转为字符串时区分。
let s1 = Symbol(&#39;apple&#39;); let s2 = Symbol(&#39;banana&#39;); s1; // Symbol(apple) s2; // Symbol(banana) s1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-23T21:24:21+08:00">
    <meta property="article:modified_time" content="2024-07-23T21:24:21+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaScript 进阶必备：掌握 Symbol 新标识符用法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <hr> 
<blockquote> 
 <p><br><font color="red" size="6">个人主页：</font><font color="yellow" size="6">学习前端的小z</font><br><br> <font color="purple" size="6">个人专栏：</font><strong><font color="#2550F5" size="5"><font color="cyan" size="6">JavaScript 精粹</font></font></strong><font color="#2550F5" size="5"><br><br> <font color="lightblue" size="5">本专栏旨在分享记录每日学习的前端知识和学习笔记的归纳总结，欢迎大家在评论区交流讨论！</font><br> <img src="https://images2.imgbox.com/ea/d9/V3PmiNA2_o.gif" alt="在这里插入图片描述"></font></p> 
</blockquote> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#font_color38F7FF_size5Symbolfont_19" rel="nofollow"><font color="#38F7FF" size="5">💯Symbol</font></a></li><li><ul><li><a href="#font_colorFFD800_size5_1_font_21" rel="nofollow"><font color="#FFD800" size="5">🚧 1. 综述</font></a></li><li><a href="#font_colorFFD800_size52_Symbolprototypedescriptionfont_114" rel="nofollow"><font color="#FFD800" size="5">🚧2 Symbol.prototype.description</font></a></li><li><ul><li><a href="#font_colorFFD800_size5_21_Symbolprototypedescription__font_117" rel="nofollow"><font color="#FFD800" size="5">🚧 2.1 深入Symbol.prototype.description </font></a></li></ul> 
   </li><li><a href="#font_colorFFD800_size53_Symbol___font_146" rel="nofollow"><font color="#FFD800" size="5">🚧3 Symbol 作为独一无二的属性键 </font></a></li><li><a href="#font_colorFFD800_size5_4_font_251" rel="nofollow"><font color="#FFD800" size="5">🚧 4 实例：替换硬编码字符串</font></a></li><li><a href="#font_colorFFD800_size5_5_Symbolfont_303" rel="nofollow"><font color="#FFD800" size="5">🚧 5 Symbol属性名的隐藏特性</font></a></li><li><a href="#font_colorFFD800_size5_6_Symbolfont_380" rel="nofollow"><font color="#FFD800" size="5">🚧 6 Symbol的全局注册与检索</font></a></li><li><a href="#font_colorFFD800_size5_7__Symbol_font_437" rel="nofollow"><font color="#FFD800" size="5">🚧 7 内置的 Symbol 值</font></a></li><li><ul><li><a href="#font_colorFF5C00_size5_71_SymbolhasInstancefont_441" rel="nofollow"><font color="#FF5C00" size="5">🔱 7.1 Symbol.hasInstance</font></a></li><li><a href="#font_colorFF5C00_size572_SymbolisConcatSpreadablefont_478" rel="nofollow"><font color="#FF5C00" size="5">🔱7.2 Symbol.isConcatSpreadable</font></a></li><li><a href="#font_colorFF5C00_size573_Symbolspeciesfont_535" rel="nofollow"><font color="#FF5C00" size="5">🔱7.3 Symbol.species</font></a></li><li><a href="#font_colorFF5C00_size574_Symbolmatchfont_605" rel="nofollow"><font color="#FF5C00" size="5">🔱7.4 Symbol.match</font></a></li><li><a href="#font_colorFF5C00_size575_Symbolreplacefont_623" rel="nofollow"><font color="#FF5C00" size="5">🔱7.5 Symbol.replace</font></a></li><li><a href="#font_colorFF5C00_size576_Symbolsearchfont_644" rel="nofollow"><font color="#FF5C00" size="5">🔱7.6 Symbol.search</font></a></li><li><a href="#font_colorFF5C00_size577_Symbolsplitfont_664" rel="nofollow"><font color="#FF5C00" size="5">🔱7.7 Symbol.split</font></a></li><li><a href="#font_colorFF5C00_size578_Symboliteratorfont_705" rel="nofollow"><font color="#FF5C00" size="5">🔱7.8 Symbol.iterator</font></a></li><li><a href="#font_colorFF5C00_size579_SymboltoPrimitivefont_744" rel="nofollow"><font color="#FF5C00" size="5">🔱7.9 Symbol.toPrimitive</font></a></li><li><a href="#font_colorFF5C00_size5710_SymboltoStringTagfont_776" rel="nofollow"><font color="#FF5C00" size="5">🔱7.10 Symbol.toStringTag</font></a></li><li><a href="#font_colorFF5C00_size5711_Symbolunscopablesfont_815" rel="nofollow"><font color="#FF5C00" size="5">🔱7.11 Symbol.unscopables</font></a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<p><img src="https://images2.imgbox.com/c2/5d/58pCtyFK_o.gif" alt="在这里插入图片描述" width="1000" height="100"></p> 
<hr> 
<h2><a id="font_color38F7FF_size5Symbolfont_19"></a><font color="#38F7FF" size="5">💯Symbol</font></h2> 
<h3><a id="font_colorFFD800_size5_1_font_21"></a><font color="#FFD800" size="5">🚧 1. 综述</font></h3> 
<p>在ES5中，对象的属性名均为字符串，这容易导致属性名的冲突。例如，当你使用一个他人提供的对象并希望为其添加新方法时（采用mixin模式），新方法的名字可能与现有方法产生冲突。为避免此类冲突，ES6引入了<code>Symbol</code>。</p> 
<p>ES6新增了一种原始数据类型<code>Symbol</code>，它代表独一无二的值，成为JavaScript的第七种数据类型，前六种为：<code>undefined</code>、<code>null</code>、布尔值（Boolean）、字符串（String）、数值（Number）、对象（Object）。</p> 
<p><code>Symbol</code>值通过<code>Symbol</code>函数生成，意味着对象的属性名现在有两种类型：原有的字符串类型和新增的Symbol类型。凡是属性名为Symbol类型，都是独一无二的，可确保不会与其他属性名冲突。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">typeof</span> s<span class="token punctuation">;</span> <span class="token comment">// "symbol"</span>
</code></pre> 
<p>上述代码中，变量s是一个独一无二的值。typeof运算符的结果表明s是Symbol数据类型，而非字符串等其他类型。</p> 
<p>需注意的是，Symbol函数前不能使用new命令，否则将报错。因为生成的Symbol是一个原始类型的值，而非对象。因此，Symbol值无法添加属性，它类似于字符串数据类型。</p> 
<p>Symbol函数可接受一个字符串作为参数，用于描述Symbol实例，便于在控制台显示或转为字符串时区分。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
s1<span class="token punctuation">;</span> <span class="token comment">// Symbol(apple)  </span>
s2<span class="token punctuation">;</span> <span class="token comment">// Symbol(banana)  </span>
  
s1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Symbol(apple)"  </span>
s2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Symbol(banana)"</span>
</code></pre> 
<p>在上述代码中，s1和s2是两个Symbol值。添加参数后，它们就有了自己的描述，便于在输出时区分。</p> 
<p>如果Symbol的参数是一个对象，将调用该对象的toString方法，将其转为字符串，然后生成Symbol值。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> <span class="token string">'xyz'</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>  
sym<span class="token punctuation">;</span> <span class="token comment">// Symbol(xyz)</span>
</code></pre> 
<p>需要注意的是，Symbol函数的参数只是对当前Symbol值的描述，相同参数的Symbol函数返回值是不相等的。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 无参数情况  </span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
s1 <span class="token operator">===</span> s2<span class="token punctuation">;</span> <span class="token comment">// false  </span>
  
<span class="token comment">// 有参数情况  </span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
s1 <span class="token operator">===</span> s2<span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> 
<p>在上述代码中，s1和s2是Symbol函数的返回值，尽管参数相同，但它们是不相等的。</p> 
<p>Symbol值不能与其他类型的值进行运算，否则会报错。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'My symbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token string">"your symbol is "</span> <span class="token operator">+</span> sym<span class="token punctuation">;</span> <span class="token comment">// TypeError: can't convert symbol to string  </span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">your symbol is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>sym<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// TypeError: can't convert symbol to string</span>
</code></pre> 
<p>然而，Symbol值可以显式转为字符串。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'My symbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token function">String</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Symbol(My symbol)'  </span>
sym<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Symbol(My symbol)'</span>
</code></pre> 
<p>另外，Symbol值也可以转为布尔值，但不能转为数值。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token function">Boolean</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true  </span>
<span class="token operator">!</span>sym<span class="token punctuation">;</span> <span class="token comment">// false  </span>
  
<span class="token keyword">if</span> <span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token comment">// ...  </span>
<span class="token punctuation">}</span>  
  
<span class="token function">Number</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError  </span>
sym <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
</code></pre> 
<h3><a id="font_colorFFD800_size52_Symbolprototypedescriptionfont_114"></a><font color="#FFD800" size="5">🚧2 Symbol.prototype.description</font></h3> 
<h4><a id="font_colorFFD800_size5_21_Symbolprototypedescription__font_117"></a><font color="#FFD800" size="5">🚧 2.1 深入Symbol.prototype.description </font></h4> 
<p>在创建 Symbol 时，我们有机会为其添加一个描述性字符串，以增强代码的可读性。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> uniqueKey <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'Unique Identifier'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上述代码中，uniqueKey 这个 Symbol 的描述就是字符串 ‘Unique Identifier’。然而，若想要直接访问这个描述，传统上我们需要将 Symbol 转换为字符串形式，这可以通过以下两种方式实现：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> uniqueKey <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'Unique Identifier'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token function">String</span><span class="token punctuation">(</span>uniqueKey<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Symbol(Unique Identifier)"  </span>
uniqueKey<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Symbol(Unique Identifier)"</span>
</code></pre> 
<p>尽管这些方法可行，但它们返回的结果包含了 “Symbol(” 和 “)” 这样的前缀和后缀，这在某些场景下可能不是我们所期望的。幸运的是，ES2019 引入了 Symbol.prototype.description 实例属性，它允许我们直接访问 Symbol 的描述部分，无需进行任何转换。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> uniqueKey <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'Unique Identifier'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
uniqueKey<span class="token punctuation">.</span>description<span class="token punctuation">;</span> <span class="token comment">// "Unique Identifier"</span>
</code></pre> 
<p>这一特性不仅使得代码更加简洁，也提高了代码的可读性和维护性。通过 description 属性，我们可以轻松获取 Symbol 的描述，而无需担心字符串转换带来的额外开销或格式问题。</p> 
<h3><a id="font_colorFFD800_size53_Symbol___font_146"></a><font color="#FFD800" size="5">🚧3 Symbol 作为独一无二的属性键 </font></h3> 
<p>由于每个 Symbol 值都是独一无二的，这一特性使得它们成为对象属性名的理想选择，能够确保属性名称的唯一性，避免属性名冲突或被意外覆盖，这在多模块协作构建对象时尤为重要。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> uniqueId <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'uniqueProperty'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token comment">// 第一种方式  </span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
obj1<span class="token punctuation">[</span>uniqueId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Secret Value'</span><span class="token punctuation">;</span>  
  
<span class="token comment">// 第二种方式  </span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token punctuation">[</span>uniqueId<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Secret Value'</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token comment">// 第三种方式  </span>
<span class="token keyword">let</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj3<span class="token punctuation">,</span> uniqueId<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'Secret Value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token comment">// 以上方式均能得到相同的结果  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">[</span>uniqueId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Secret Value"  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">[</span>uniqueId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Secret Value"  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj3<span class="token punctuation">[</span>uniqueId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Secret Value"</span>
</code></pre> 
<p>当使用 Symbol 作为对象属性名时，重要的是要记住不能使用点运算符（.）来访问这些属性，因为点运算符后面总是被解释为字符串字面量。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'property'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
obj<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'Visible to all'</span><span class="token punctuation">;</span> <span class="token comment">// 这里的 'id' 被当作字符串处理  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined，因为 obj[id] 并没有设置  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Visible to all"</span>
</code></pre> 
<p>在对象字面量内部定义属性时，若属性键为 Symbol，同样需要将其放在方括号内。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'performAction'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token keyword">let</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Action performed!'</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
actions<span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: Action performed!</span>
</code></pre> 
<p>利用 ES6 的增强对象字面量语法，我们可以使上述对象定义更加简洁</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> actions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Action performed!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
actions<span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: Action performed!</span>
</code></pre> 
<p>Symbol 还可以用来定义一组互不相同的常量，这在配置对象或枚举类型中特别有用。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token literal-property property">features</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'enableLogging'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'enableDebugging'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">false</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token comment">// 注意：直接访问 Symbol 作为键的值需要通过原始 Symbol  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>features<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'enableLogging'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined，因为键是另一个新的 Symbol  </span>
<span class="token comment">// 正确的访问方式需要保留原始 Symbol 引用  </span>
<span class="token keyword">const</span> enableLogging <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'enableLogging'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>features<span class="token punctuation">[</span>enableLogging<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true（如果 enableLogging 是用于定义属性的同一个 Symbol）</span>
</code></pre> 
<p>最后，值得注意的是，尽管使用 Symbol 作为属性名可以确保属性的唯一性，但这些属性仍然是公开的，不是私有的。若要实现真正的封装和隐藏，需要采用其他方法，如使用闭包或 WeakMap。</p> 
<p>下面是另外一个例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token constant">COLOR_RED</span>    <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">COLOR_GREEN</span>  <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getComplement</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token constant">COLOR_RED</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token constant">COLOR_GREEN</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">COLOR_GREEN</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token constant">COLOR_RED</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Undefined color'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用 Symbol 作为常量值的核心优势在于其独一无二性，确保了在整个程序范围内不会有重复的值，这为逻辑判断（如switch语句）提供了坚实的保障，使得代码的执行能够严格遵循设计预期。</p> 
<p>然而，值得注意的是，尽管 Symbol 值被用作属性名时能够增加属性的唯一性，但这样的属性依然是公开的，并不具备 JavaScript 原生支持的私有属性特性。因此，在需要保护对象属性不被外部直接访问时，开发者需要寻找其他解决方案，如使用闭包或模块封装等技术手段。</p> 
<h3><a id="font_colorFFD800_size5_4_font_251"></a><font color="#FFD800" size="5">🚧 4 实例：替换硬编码字符串</font></h3> 
<p>硬编码字符串指的是在代码中直接出现、且与代码逻辑紧密绑定的具体字符串或数值。良好的编程实践建议尽量避免硬编码字符串，转而使用具有明确含义的变量来替代。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">calculateArea</span><span class="token punctuation">(</span><span class="token parameter">shape<span class="token punctuation">,</span> dimensions</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">let</span> area <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
  
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>shape<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">case</span> <span class="token string">'Rectangle'</span><span class="token operator">:</span> <span class="token comment">// 硬编码字符串  </span>
      area <span class="token operator">=</span> dimensions<span class="token punctuation">.</span>width <span class="token operator">*</span> dimensions<span class="token punctuation">.</span>height<span class="token punctuation">;</span>  
      <span class="token keyword">break</span><span class="token punctuation">;</span>  
    <span class="token comment">/* ... 其他代码 ... */</span>  
  <span class="token punctuation">}</span>  
  
  <span class="token keyword">return</span> area<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  

<span class="token function">calculateArea</span><span class="token punctuation">(</span><span class="token string">'Rectangle'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 硬编码字符串</span>
</code></pre> 
<p>在上述代码中，字符串’Rectangle’就是一个硬编码字符串。它在代码中多次出现，与逻辑紧密绑定，不利于未来的修改和维护。</p> 
<p>为了改进这一点，我们可以将硬编码字符串替换为变量。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> shapes <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token literal-property property">rectangle</span><span class="token operator">:</span> <span class="token string">'Rectangle'</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
<span class="token keyword">function</span> <span class="token function">calculateArea</span><span class="token punctuation">(</span><span class="token parameter">shape<span class="token punctuation">,</span> dimensions</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">let</span> area <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>shape<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">case</span> shapes<span class="token punctuation">.</span>rectangle<span class="token operator">:</span>  
      area <span class="token operator">=</span> dimensions<span class="token punctuation">.</span>width <span class="token operator">*</span> dimensions<span class="token punctuation">.</span>height<span class="token punctuation">;</span>  
      <span class="token keyword">break</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  <span class="token keyword">return</span> area<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token function">calculateArea</span><span class="token punctuation">(</span>shapes<span class="token punctuation">.</span>rectangle<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在改进后的代码中，我们将’Rectangle’定义为了shapes对象的一个属性，从而消除了硬编码。</p> 
<p>进一步思考，shapes.rectangle的确切值并不重要，只要它能确保唯一性且不与其他shapes属性的值冲突即可。因此，使用Symbol值是一个更好的选择。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> shapes <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token literal-property property">rectangle</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
在上面的代码中，我们将shapes<span class="token punctuation">.</span>rectangle的值设置为了一个Symbol，而其他代码部分无需修改。
</code></pre> 
<h3><a id="font_colorFFD800_size5_5_Symbolfont_303"></a><font color="#FFD800" size="5">🚧 5 Symbol属性名的隐藏特性</font></h3> 
<p>当Symbol被用作对象的属性名时，该属性在遍历对象时不会被for…in、for…of循环以及Object.keys()、Object.getOwnPropertyNames()、JSON.stringify()等方法返回。</p> 
<p>然而，Symbol属性并非私有属性。Object.getOwnPropertySymbols()方法可以获取指定对象的所有用作属性名的Symbol值。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> myObject <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> symA <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> symB <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
myObject<span class="token punctuation">[</span>symA<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Apple'</span><span class="token punctuation">;</span>  
myObject<span class="token punctuation">[</span>symB<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Banana'</span><span class="token punctuation">;</span>  
  
<span class="token keyword">const</span> symbols <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
symbols<span class="token punctuation">;</span> <span class="token comment">// [Symbol(A), Symbol(B)]</span>
</code></pre> 
<p>上述代码展示了Object.getOwnPropertySymbols()方法的使用，它返回了所有Symbol属性名。</p> 
<p>以下是一个对比Object.getOwnPropertySymbols()与for…in循环及Object.getOwnPropertyNames()方法的例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> myObject <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> mySymbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'mySymbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
myObject<span class="token punctuation">[</span>mySymbol<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Value'</span><span class="token punctuation">;</span>  
  
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> myObject<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无输出  </span>
<span class="token punctuation">}</span>  
  
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []  </span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Symbol(mySymbol)]</span>
</code></pre> 
<p>在上述代码中，for…in循环和Object.getOwnPropertyNames()方法都无法获取到Symbol键名，而Object.getOwnPropertySymbols()方法则可以。</p> 
<p>Reflect.ownKeys()是一个新的API，它可以返回对象上所有类型的键名，包括常规键名和Symbol键名。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> myObject <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'myKey'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Secret'</span><span class="token punctuation">,</span>  
  <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token string">'Visible'</span>  
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
  
Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">//  ["visible", Symbol(myKey)]</span>
</code></pre> 
<p>由于Symbol属性名不会被常规方法遍历，我们可以利用这一特性为对象定义一些非私有的、但仅供内部使用的属性或方法。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> internalKey <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'internalKey'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token keyword">class</span> <span class="token class-name">DataStorage</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">this</span><span class="token punctuation">[</span>internalKey<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  
  <span class="token function">saveData</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">this</span><span class="token punctuation">[</span>internalKey<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  
  <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>internalKey<span class="token punctuation">]</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">const</span> storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
storage<span class="token punctuation">.</span><span class="token function">saveData</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Alice'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>storage<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: 'Alice' }  </span>
  
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>storage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []  </span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>storage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可能包含一些继承的属性名，但不包括internalKey  </span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>storage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Symbol(internalKey)]</span>
</code></pre> 
<p>在上述代码中，DataStorage类的实例storage使用了一个Symbol属性名internalKey来存储内部数据，这使得这些数据不会通过常规方法被外部访问到。</p> 
<h3><a id="font_colorFFD800_size5_6_Symbolfont_380"></a><font color="#FFD800" size="5">🚧 6 Symbol的全局注册与检索</font></h3> 
<p>有时，我们需要跨多个代码模块或执行上下文重用同一个Symbol值。Symbol.for()方法允许我们通过传递一个字符串参数来实现这一点。如果全局注册表中已存在该字符串对应的Symbol值，则直接返回该值；否则，创建一个新的Symbol值并将其注册到全局注册表中。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> sym1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'unique'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">let</span> sym2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'unique'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
sym1 <span class="token operator">===</span> sym2<span class="token punctuation">;</span> <span class="token comment">// true</span>
在上述代码中，sym1和sym2都是通过Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'unique'</span><span class="token punctuation">)</span>创建的，因此它们是同一个Symbol值。

Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">与直接使用Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的区别在于前者会将Symbol值注册到全局环境中，而后者每次调用都会创建一个新的Symbol值。

javascript
Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span> <span class="token operator">===</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true  </span>
<span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法用于检索已注册的Symbol值的字符串键。

javascript
<span class="token keyword">let</span> registeredSym <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'registered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>registeredSym<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'registered'  </span>
  
<span class="token keyword">let</span> unregisteredSym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'unregistered'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>unregisteredSym<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> 
<p>在上述代码中，unregisteredSym是一个未注册的Symbol值，因此Symbol.keyFor(unregisteredSym)返回undefined。<br> 值得注意的是，Symbol.for()注册的全局Symbol值在任何执行上下文中都是可用的，包括不同的iframe或service worker。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">createGlobalSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">return</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'globalSymbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
<span class="token keyword">const</span> sym1 <span class="token operator">=</span> <span class="token function">createGlobalSymbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> sym2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'globalSymbol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym1 <span class="token operator">===</span> sym2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true  </span>
  
<span class="token comment">// 在iframe中  </span>
<span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>  
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'globalSymbol'</span><span class="token punctuation">)</span> <span class="token operator">===</span> sym1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true  </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>上述代码展示了如何在主页面和iframe之间共享通过Symbol.for()注册的全局Symbol值。】</p> 
<p>将【】中的markdown文本中的代码块插入如下格式<br> javascript<br> 代码块放在中间</p> 
<h3><a id="font_colorFFD800_size5_7__Symbol_font_437"></a><font color="#FFD800" size="5">🚧 7 内置的 Symbol 值</font></h3> 
<p>除了定义自己使用的 Symbol 值以外，ES6 还提供了 11 个内置的 Symbol 值，指向语言内部使用的方法。</p> 
<h4><a id="font_colorFF5C00_size5_71_SymbolhasInstancefont_441"></a><font color="#FF5C00" size="5">🔱 7.1 Symbol.hasInstance</font></h4> 
<p>对象的<code>Symbol.hasInstance</code>属性，指向一个内部方法。当其他对象使用<code>instanceof</code>运算符，判断是否为该对象的实例时，会调用这个方法。比如，<code>foo instanceof Foo</code>在语言内部，实际调用的是<code>Foo[Symbol.hasInstance](foo)</code>。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> foo <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">new</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> 
<p>上面代码中，<code>MyClass</code>是一个类，<code>new MyClass()</code>会返回一个实例。该实例的<code>Symbol.hasInstance</code>方法，会在进行<code>instanceof</code>运算时自动调用，判断左侧的运算子是否为<code>Array</code>的实例。</p> 
<p>下面是另一个例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Even</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 等同于</span>
<span class="token keyword">const</span> Even <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token number">1</span> <span class="token keyword">instanceof</span> <span class="token class-name">Even</span> <span class="token comment">// false</span>
<span class="token number">2</span> <span class="token keyword">instanceof</span> <span class="token class-name">Even</span> <span class="token comment">// true</span>
<span class="token number">12345</span> <span class="token keyword">instanceof</span> <span class="token class-name">Even</span> <span class="token comment">// false</span>
</code></pre> 
<h4><a id="font_colorFF5C00_size572_SymbolisConcatSpreadablefont_478"></a><font color="#FF5C00" size="5">🔱7.2 Symbol.isConcatSpreadable</font></h4> 
<p>对象的<code>Symbol.isConcatSpreadable</code>属性等于一个布尔值，表示该对象用于<code>Array.prototype.concat()</code>时，是否可以展开。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr1<span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span> <span class="token comment">// ['a', 'b', 'c', 'd', 'e']</span>
arr1<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token comment">// undefined</span>

<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span> <span class="token comment">// ['a', 'b', ['c','d'], 'e']</span>
</code></pre> 
<p>上面代码说明，数组的默认行为是可以展开，<code>Symbol.isConcatSpreadable</code>默认等于<code>undefined</code>。该属性等于<code>true</code>时，也有展开的效果。</p> 
<p>类似数组的对象正好相反，默认不展开。它的<code>Symbol.isConcatSpreadable</code>属性设为<code>true</code>，才可以展开。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'d'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span> <span class="token comment">// ['a', 'b', obj, 'e']</span>

obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span> <span class="token comment">// ['a', 'b', 'c', 'd', 'e']</span>
</code></pre> 
<p><code>Symbol.isConcatSpreadable</code>属性也可以定义在类里面。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">A1</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">A2</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
a1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
a2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span>
<span class="token comment">// [1, 2, 3, 4, [5, 6]]</span>
</code></pre> 
<p>上面代码中，类<code>A1</code>是可展开的，类<code>A2</code>是不可展开的，所以使用<code>concat</code>时有不一样的结果。</p> 
<p>注意，<code>Symbol.isConcatSpreadable</code>的位置差异，<code>A1</code>是定义在实例上，<code>A2</code>是定义在类本身，效果相同。</p> 
<h4><a id="font_colorFF5C00_size573_Symbolspeciesfont_535"></a><font color="#FF5C00" size="5">🔱7.3 Symbol.species</font></h4> 
<p>对象的<code>Symbol.species</code>属性，指向一个构造函数。创建衍生对象时，会使用该属性。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

b <span class="token keyword">instanceof</span> <span class="token class-name">MyArray</span> <span class="token comment">// true</span>
c <span class="token keyword">instanceof</span> <span class="token class-name">MyArray</span> <span class="token comment">// true</span>
</code></pre> 
<p>上面代码中，子类<code>MyArray</code>继承了父类<code>Array</code>，<code>a</code>是<code>MyArray</code>的实例，<code>b</code>和<code>c</code>是<code>a</code>的衍生对象。你可能会认为，<code>b</code>和<code>c</code>都是调用数组方法生成的，所以应该是数组（<code>Array</code>的实例），但实际上它们也是<code>MyArray</code>的实例。</p> 
<p><code>Symbol.species</code>属性就是为了解决这个问题而提供的。现在，我们可以为<code>MyArray</code>设置<code>Symbol.species</code>属性。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> Array<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上面代码中，由于定义了<code>Symbol.species</code>属性，创建衍生对象时就会使用这个属性返回的函数，作为构造函数。这个例子也说明，定义<code>Symbol.species</code>属性要采用<code>get</code>取值器。默认的<code>Symbol.species</code>属性等同于下面的写法。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>现在，再来看前面的例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> Array<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>

b <span class="token keyword">instanceof</span> <span class="token class-name">MyArray</span> <span class="token comment">// false</span>
b <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
</code></pre> 
<p>上面代码中，<code>a.map(x =&gt; x)</code>生成的衍生对象，就不是<code>MyArray</code>的实例，而直接就是<code>Array</code>的实例。</p> 
<p>再看一个例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">T1</span> <span class="token keyword">extends</span> <span class="token class-name">Promise</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">T2</span> <span class="token keyword">extends</span> <span class="token class-name">Promise</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">T1</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">T1</span> <span class="token comment">// true</span>
<span class="token keyword">new</span> <span class="token class-name">T2</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">T2</span> <span class="token comment">// false</span>
</code></pre> 
<p>上面代码中，<code>T2</code>定义了<code>Symbol.species</code>属性，<code>T1</code>没有。结果就导致了创建衍生对象时（<code>then</code>方法），<code>T1</code>调用的是自身的构造方法，而<code>T2</code>调用的是<code>Promise</code>的构造方法。</p> 
<p>总之，<code>Symbol.species</code>的作用在于，实例对象在运行过程中，需要再次调用自身的构造函数时，会调用该属性指定的构造函数。它主要的用途是，有些类库是在基类的基础上修改的，那么子类使用继承的方法时，作者可能希望返回基类的实例，而不是子类的实例。</p> 
<h4><a id="font_colorFF5C00_size574_Symbolmatchfont_605"></a><font color="#FF5C00" size="5">🔱7.4 Symbol.match</font></h4> 
<p>对象的<code>Symbol.match</code>属性，指向一个函数。当执行<code>str.match(myObject)</code>时，如果该属性存在，会调用它，返回该方法的返回值。</p> 
<pre><code class="prism language-javascript"><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
regexp<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>match<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MyMatcher</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>match<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">'hello world'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token string">'e'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre> 
<h4><a id="font_colorFF5C00_size575_Symbolreplacefont_623"></a><font color="#FF5C00" size="5">🔱7.5 Symbol.replace</font></h4> 
<p>对象的<code>Symbol.replace</code>属性，指向一个方法，当该对象被<code>String.prototype.replace</code>方法调用时，会返回该方法的返回值。</p> 
<pre><code class="prism language-javascript"><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>searchValue<span class="token punctuation">,</span> replaceValue<span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
searchValue<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>replace<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> replaceValue<span class="token punctuation">)</span>
</code></pre> 
<p>下面是一个例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
x<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>replace<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token string">'Hello'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">'World'</span><span class="token punctuation">)</span> <span class="token comment">// ["Hello", "World"]</span>
</code></pre> 
<p><code>Symbol.replace</code>方法会收到两个参数，第一个参数是<code>replace</code>方法正在作用的对象，上面例子是<code>Hello</code>，第二个参数是替换后的值，上面例子是<code>World</code>。</p> 
<h4><a id="font_colorFF5C00_size576_Symbolsearchfont_644"></a><font color="#FF5C00" size="5">🔱7.6 Symbol.search</font></h4> 
<p>对象的<code>Symbol.search</code>属性，指向一个方法，当该对象被<code>String.prototype.search</code>方法调用时，会返回该方法的返回值。</p> 
<pre><code class="prism language-javascript"><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
regexp<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>search<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">MySearch</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>search<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token string">'foobar'</span><span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MySearch</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre> 
<h4><a id="font_colorFF5C00_size577_Symbolsplitfont_664"></a><font color="#FF5C00" size="5">🔱7.7 Symbol.split</font></h4> 
<p>对象的<code>Symbol.split</code>属性，指向一个方法，当该对象被<code>String.prototype.split</code>方法调用时，会返回该方法的返回值。</p> 
<pre><code class="prism language-javascript"><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>separator<span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
separator<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>split<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
</code></pre> 
<p>下面是一个例子。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">MySplitter</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>split<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> string<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
      string<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">,</span>
      string<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token string">'foobar'</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MySplitter</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// ['', 'bar']</span>

<span class="token string">'foobar'</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MySplitter</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// ['foo', '']</span>

<span class="token string">'foobar'</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MySplitter</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 'foobar'</span>
</code></pre> 
<p>上面方法使用<code>Symbol.split</code>方法，重新定义了字符串对象的<code>split</code>方法的行为，</p> 
<h4><a id="font_colorFF5C00_size578_Symboliteratorfont_705"></a><font color="#FF5C00" size="5">🔱7.8 Symbol.iterator</font></h4> 
<p>对象的<code>Symbol.iterator</code>属性，指向该对象的默认遍历器方法。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> myIterable <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
myIterable<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token operator">...</span>myIterable<span class="token punctuation">]</span> <span class="token comment">// [1, 2, 3]</span>
</code></pre> 
<p>对象进行<code>for...of</code>循环时，会调用<code>Symbol.iterator</code>方法，返回该对象的默认遍历器，详细介绍参见《Iterator 和 for…of 循环》一章。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">class</span> <span class="token class-name">Collection</span> <span class="token punctuation">{<!-- --></span>
  <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">yield</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token operator">++</span>i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myCollection<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
myCollection<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> myCollection<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 2</span>
</code></pre> 
<h4><a id="font_colorFF5C00_size579_SymboltoPrimitivefont_744"></a><font color="#FF5C00" size="5">🔱7.9 Symbol.toPrimitive</font></h4> 
<p>对象的<code>Symbol.toPrimitive</code>属性，指向一个方法。该对象被转为原始类型的值时，会调用这个方法，返回该对象对应的原始类型值。</p> 
<p><code>Symbol.toPrimitive</code>被调用时，会接受一个字符串参数，表示当前运算的模式，一共有三种模式。</p> 
<ul><li>Number：该场合需要转成数值</li><li>String：该场合需要转成字符串</li><li>Default：该场合可以转成数值，也可以转成字符串</li></ul> 
<pre><code class="prism language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>hint<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">case</span> <span class="token string">'number'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'string'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'str'</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'default'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token number">2</span> <span class="token operator">*</span> obj <span class="token comment">// 246</span>
<span class="token number">3</span> <span class="token operator">+</span> obj <span class="token comment">// '3default'</span>
obj <span class="token operator">==</span> <span class="token string">'default'</span> <span class="token comment">// true</span>
<span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 'str'</span>
</code></pre> 
<h4><a id="font_colorFF5C00_size5710_SymboltoStringTagfont_776"></a><font color="#FF5C00" size="5">🔱7.10 Symbol.toStringTag</font></h4> 
<p>对象的<code>Symbol.toStringTag</code>属性，指向一个方法。在该对象上面调用<code>Object.prototype.toString</code>方法时，如果这个属性存在，它的返回值会出现在<code>toString</code>方法返回的字符串之中，表示对象的类型。也就是说，这个属性可以用来定制<code>[object Object]</code>或<code>[object Array]</code>中<code>object</code>后面的那个字符串。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 例一</span>
<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Foo'</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// "[object Foo]"</span>

<span class="token comment">// 例二</span>
<span class="token keyword">class</span> <span class="token class-name">Collection</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Collection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// "[object xxx]"</span>
</code></pre> 
<p>ES6 新增内置对象的<code>Symbol.toStringTag</code>属性值如下。</p> 
<ul><li><code>JSON[Symbol.toStringTag]</code>：‘JSON’</li><li><code>Math[Symbol.toStringTag]</code>：‘Math’</li><li>Module 对象<code>M[Symbol.toStringTag]</code>：‘Module’</li><li><code>ArrayBuffer.prototype[Symbol.toStringTag]</code>：‘ArrayBuffer’</li><li><code>DataView.prototype[Symbol.toStringTag]</code>：‘DataView’</li><li><code>Map.prototype[Symbol.toStringTag]</code>：‘Map’</li><li><code>Promise.prototype[Symbol.toStringTag]</code>：‘Promise’</li><li><code>Set.prototype[Symbol.toStringTag]</code>：‘Set’</li><li><code>%TypedArray%.prototype[Symbol.toStringTag]</code>：'Uint8Array’等</li><li><code>WeakMap.prototype[Symbol.toStringTag]</code>：‘WeakMap’</li><li><code>WeakSet.prototype[Symbol.toStringTag]</code>：‘WeakSet’</li><li><code>%MapIteratorPrototype%[Symbol.toStringTag]</code>：‘Map Iterator’</li><li><code>%SetIteratorPrototype%[Symbol.toStringTag]</code>：‘Set Iterator’</li><li><code>%StringIteratorPrototype%[Symbol.toStringTag]</code>：‘String Iterator’</li><li><code>Symbol.prototype[Symbol.toStringTag]</code>：‘Symbol’</li><li><code>Generator.prototype[Symbol.toStringTag]</code>：‘Generator’</li><li><code>GeneratorFunction.prototype[Symbol.toStringTag]</code>：‘GeneratorFunction’</li></ul> 
<h4><a id="font_colorFF5C00_size5711_Symbolunscopablesfont_815"></a><font color="#FF5C00" size="5">🔱7.11 Symbol.unscopables</font></h4> 
<p>对象的<code>Symbol.unscopables</code>属性，指向一个对象。该对象指定了使用<code>with</code>关键字时，哪些属性会被<code>with</code>环境排除。</p> 
<pre><code class="prism language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span>
<span class="token comment">// {<!-- --></span>
<span class="token comment">//   copyWithin: true,</span>
<span class="token comment">//   entries: true,</span>
<span class="token comment">//   fill: true,</span>
<span class="token comment">//   find: true,</span>
<span class="token comment">//   findIndex: true,</span>
<span class="token comment">//   includes: true,</span>
<span class="token comment">//   keys: true</span>
<span class="token comment">// }</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// ['copyWithin', 'entries', 'fill', 'find', 'findIndex', 'includes', 'keys']</span>
</code></pre> 
<p>上面代码说明，数组有 7 个属性，会被<code>with</code>命令排除。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 没有 unscopables 时</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">with</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span>

<span class="token comment">// 有 unscopables 时</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">with</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上面代码通过指定<code>Symbol.unscopables</code>属性，使得<code>with</code>语法块不会在当前作用域寻找<code>foo</code>属性，即<code>foo</code>将指向外层作用域的变量。</p> 
<hr> 
<p><img src="https://images2.imgbox.com/c1/37/IOD9BdVn_o.gif" alt="在这里插入图片描述" width="1000" height="100"></p> 
<hr> 
<p><font color="ORANGE" size="5">JavaScript:<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" rel="nofollow"> https://developer.mozilla.org/en-US/docs/Web/JavaScript</a></font></p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fa60774432b042b237ce7b93aa71513b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STL 简介（标准模板库）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d7de7fa4ae9563505391ff76165391af/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构】栈</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>