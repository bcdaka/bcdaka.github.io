<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€SpringBootã€‘SpringBootæ•´åˆRabbitMQæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå®ç°å»¶è¿Ÿé˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ— - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/28cb7c35d7657d6478fb14db63958561/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€SpringBootã€‘SpringBootæ•´åˆRabbitMQæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå®ç°å»¶è¿Ÿé˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ—">
  <meta property="og:description" content="ğŸ“ä¸ªäººä¸»é¡µï¼šå“ˆ__
æœŸå¾…æ‚¨çš„å…³æ³¨Â ç›®å½•
ä¸€ã€ğŸ”¥æ­»ä¿¡é˜Ÿåˆ—
RabbitMQçš„å·¥ä½œæ¨¡å¼
æ­»ä¿¡é˜Ÿåˆ—çš„å·¥ä½œæ¨¡å¼
äºŒã€ğŸ‰RabbitMQç›¸å…³çš„å®‰è£…Â ä¸‰ã€ğŸSpringBootå¼•å…¥RabbitMQ
1.å¼•å…¥ä¾èµ–
2.åˆ›å»ºé˜Ÿåˆ—å’Œäº¤æ¢å™¨
2.1 å˜é‡å£°æ˜Â 2.2 åˆ›å»ºå»¶è¿Ÿäº¤æ¢å™¨
2.3 åˆ›å»ºå»¶è¿Ÿé˜Ÿåˆ—
2.4 å»¶è¿Ÿé˜Ÿåˆ—ç»‘å®šå»¶è¿Ÿäº¤æ¢å™¨
2.5 æ­»ä¿¡é˜Ÿåˆ—é…ç½®
3. æ·»åŠ application.yml
4. æ·»åŠ RabbitMQListener ï¼ˆæ¶ˆè´¹è€…ï¼‰
5. åˆ›å»ºDelayMessageSenderÂ 6. åˆ›å»ºControllerÂ 7.æµ‹è¯•Â å››ã€ğŸŒæ­»ä¿¡é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯
ä¸€ã€ğŸ”¥æ­»ä¿¡é˜Ÿåˆ— RabbitMQçš„æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼ŒDLQï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œç”¨äºæ¥æ”¶å…¶ä»–é˜Ÿåˆ—ä¸­çš„â€œæ­»ä¿¡â€æ¶ˆæ¯ã€‚æ‰€è°“â€œæ­»ä¿¡â€ï¼Œæ˜¯æŒ‡æ»¡è¶³ä¸€å®šæ¡ä»¶è€Œæ— æ³•è¢«æ¶ˆè´¹è€…æ­£ç¡®å¤„ç†çš„æ¶ˆæ¯ï¼Œè¿™äº›æ¡ä»¶åŒ…æ‹¬æ¶ˆæ¯è¢«æ‹’ç»ã€æ¶ˆæ¯è¿‡æœŸã€æ¶ˆæ¯è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ç­‰ã€‚
å½“æ¶ˆæ¯æˆä¸ºæ­»ä¿¡æ—¶ï¼ŒRabbitMQä¼šå°†å…¶é‡æ–°å‘é€åˆ°æŒ‡å®šçš„æ­»ä¿¡é˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ä¸¢å¼ƒå®ƒä»¬ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥å¯¹æ­»ä¿¡è¿›è¡Œåˆ†æå’Œå¤„ç†ï¼Œä¾‹å¦‚è®°å½•æ—¥å¿—ã€é‡æ–°å…¥é˜Ÿæˆ–è€…è¿›ä¸€æ­¥å¤„ç†ã€‚
æ­»ä¿¡é˜Ÿåˆ—é€šå¸¸ä¸RabbitMQçš„å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆDelayed Message Queueï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œé€šè¿‡å»¶è¿Ÿé˜Ÿåˆ—å»¶è¿Ÿæ¶ˆæ¯çš„å¤„ç†æ—¶é—´ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°è§¦å‘æ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„æ¡ä»¶ï¼Œä»è€Œè¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚
æ­»ä¿¡é˜Ÿåˆ—åœ¨æ¶ˆæ¯ä¸­é—´ä»¶ä¸­æœ‰è®¸å¤šå®é™…åº”ç”¨åœºæ™¯ï¼Œä¸»è¦ç”¨äºå¤„ç†æ— æ³•è¢«æ­£å¸¸æ¶ˆè´¹çš„æ¶ˆæ¯ï¼Œå¢å¼ºäº†æ¶ˆæ¯çš„å¯é æ€§å’Œå¤„ç†èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š
å»¶è¿Ÿæ¶ˆæ¯å¤„ç†ï¼šé€šè¿‡å°†æ¶ˆæ¯å‘é€åˆ°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´åå†å°†æ¶ˆæ¯å‘é€åˆ°ç›®æ ‡é˜Ÿåˆ—ï¼Œå®ç°å»¶è¿Ÿå¤„ç†æ¶ˆæ¯çš„åŠŸèƒ½ã€‚
æ¶ˆæ¯é‡è¯•ï¼šå½“æ¶ˆè´¹è€…æ— æ³•å¤„ç†æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯å¯ä»¥è¢«é‡æ–°å‘é€åˆ°é˜Ÿåˆ—å¹¶è®¾ç½®é‡è¯•æ¬¡æ•°ï¼Œè¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åè½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚
å¼‚å¸¸å¤„ç†ï¼šå½“æ¶ˆæ¯æ— æ³•è¢«æ¶ˆè´¹è€…æ­£å¸¸å¤„ç†æ—¶ï¼ˆå¦‚æ ¼å¼é”™è¯¯ã€ä¸šåŠ¡å¼‚å¸¸ç­‰ï¼‰ï¼Œå°†æ¶ˆæ¯è½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œç”¨äºè®°å½•æ—¥å¿—ã€æŠ¥è­¦æˆ–äººå·¥å¤„ç†ã€‚
æ¶ˆæ¯è¶…æ—¶å¤„ç†ï¼šå½“æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…æ—¶é—´è¿‡é•¿æ—¶ï¼Œå¯ä»¥è®¾ç½®æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰ï¼Œè¶…è¿‡æ—¶é—´åå°†æ¶ˆæ¯è½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚
æ¶ˆæ¯è·¯ç”±å¤±è´¥ï¼šå½“æ¶ˆæ¯æ— æ³•è¢«æ­£ç¡®è·¯ç”±åˆ°ç›®æ ‡é˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚
æ¶ˆæ¯ç‰ˆæœ¬å…¼å®¹æ€§å¤„ç†ï¼šå½“æ¶ˆæ¯çš„æ ¼å¼æˆ–å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡æ­»ä¿¡é˜Ÿåˆ—å¯ä»¥å¤„ç†è€ç‰ˆæœ¬æ¶ˆæ¯ï¼Œç¡®ä¿æ–°ç‰ˆæœ¬ç³»ç»Ÿçš„å…¼å®¹æ€§ã€‚
RabbitMQçš„å·¥ä½œæ¨¡å¼ æ­»ä¿¡é˜Ÿåˆ—çš„å·¥ä½œæ¨¡å¼ ä»Šå¤©æˆ‘è¦å®ç°çš„å°±æ˜¯è¿™ä¸ªå»¶è¿Ÿé˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ—ã€‚ç”Ÿäº§è€…é¦–å…ˆå‘å»¶è¿Ÿé˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼Œå¾…è¾¾åˆ°TTLåæ¶ˆæ¯ä¼šè¢«è½¬é€åˆ°æ­»ä¿¡é˜Ÿåˆ—å½“ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šä»æ­»ä¿¡é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚
äºŒã€ğŸ‰RabbitMQç›¸å…³çš„å®‰è£…Â win10 å®‰è£…rabbitMQè¯¦ç»†æ­¥éª¤_rabbitmq å®‰è£…-CSDNåšå®¢
æˆ‘è¿™é‡Œç›´æ¥å¼•ç”¨åˆ«äººçš„æ–‡ç« äº†ï¼Œä¸‹è½½éœ€è¦å¤§å®¶å»çœ‹ä¸€çœ‹ã€‚
RabbitMQå»¶è¿Ÿæ’ä»¶çš„å®‰è£…ã€‚
[è¶…è¯¦ç»†]RabbitMQå®‰è£…å»¶è¿Ÿæ¶ˆæ¯æ’ä»¶_rabbitmqå®‰è£…å»¶è¿Ÿæ’ä»¶-CSDNåšå®¢
ä¸‰ã€ğŸSpringBootå¼•å…¥RabbitMQ 1.å¼•å…¥ä¾èµ– &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-08T14:55:47+08:00">
    <meta property="article:modified_time" content="2024-06-08T14:55:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€SpringBootã€‘SpringBootæ•´åˆRabbitMQæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå®ç°å»¶è¿Ÿé˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ—</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" height="150" src="https://images2.imgbox.com/42/89/hhQsE5Kf_o.png" width="150"></p> 
<p style="text-align:center;">Â <strong>Â ğŸ“ä¸ªäººä¸»é¡µï¼š<a class="link-info" href="https://blog.csdn.net/qq_61024956?type=blog" title="å“ˆ__">å“ˆ__</a></strong></p> 
<p style="text-align:center;"><span style="color:#fe2c24;">æœŸå¾…æ‚¨çš„å…³æ³¨Â </span></p> 
<p style="text-align:center;"><img alt="" height="100" src="https://images2.imgbox.com/0c/58/OxpDZSBf_o.gif" width="1000"></p> 
<p id="main-toc"><strong>ç›®å½•</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%C2%A0%E4%B8%80%E3%80%81%F0%9F%94%A5%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%80%E3%80%81%F0%9F%94%A5%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97" rel="nofollow">Â ä¸€ã€ğŸ”¥æ­»ä¿¡é˜Ÿåˆ—</a></p> 
<p id="RabbitMQ%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#RabbitMQ%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" rel="nofollow">RabbitMQçš„å·¥ä½œæ¨¡å¼</a></p> 
<p id="%C2%A0%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" rel="nofollow">Â æ­»ä¿¡é˜Ÿåˆ—çš„å·¥ä½œæ¨¡å¼</a></p> 
<p id="%C2%A0%E4%BA%8C%E3%80%81%F0%9F%8D%89RabbitMQ%E7%9B%B8%E5%85%B3%E7%9A%84%E5%AE%89%E8%A3%85%C2%A0-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%8C%E3%80%81%F0%9F%8D%89RabbitMQ%E7%9B%B8%E5%85%B3%E7%9A%84%E5%AE%89%E8%A3%85%C2%A0" rel="nofollow">Â äºŒã€ğŸ‰RabbitMQç›¸å…³çš„å®‰è£…Â </a></p> 
<p id="%E4%B8%89%E3%80%81%F0%9F%8D%8ESpringBoot%E5%BC%95%E5%85%A5RabbitMQ-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%F0%9F%8D%8ESpringBoot%E5%BC%95%E5%85%A5RabbitMQ" rel="nofollow">ä¸‰ã€ğŸSpringBootå¼•å…¥RabbitMQ</a></p> 
<p id="1.%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96-toc" style="margin-left:40px;"><a href="#1.%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96" rel="nofollow">1.å¼•å…¥ä¾èµ–</a></p> 
<p id="2.%E5%88%9B%E5%BB%BA%E9%98%9F%E5%88%97%E5%92%8C%E4%BA%A4%E6%8D%A2%E5%99%A8-toc" style="margin-left:40px;"><a href="#2.%E5%88%9B%E5%BB%BA%E9%98%9F%E5%88%97%E5%92%8C%E4%BA%A4%E6%8D%A2%E5%99%A8" rel="nofollow">2.åˆ›å»ºé˜Ÿåˆ—å’Œäº¤æ¢å™¨</a></p> 
<p id="2.1%20%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%C2%A0-toc" style="margin-left:80px;"><a href="#2.1%20%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%C2%A0" rel="nofollow">2.1 å˜é‡å£°æ˜Â </a></p> 
<p id="2.2%20%E5%88%9B%E5%BB%BA%E5%BB%B6%E8%BF%9F%E4%BA%A4%E6%8D%A2%E5%99%A8-toc" style="margin-left:80px;"><a href="#2.2%20%E5%88%9B%E5%BB%BA%E5%BB%B6%E8%BF%9F%E4%BA%A4%E6%8D%A2%E5%99%A8" rel="nofollow">2.2 åˆ›å»ºå»¶è¿Ÿäº¤æ¢å™¨</a></p> 
<p id="2.3%20%E5%88%9B%E5%BB%BA%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97-toc" style="margin-left:80px;"><a href="#2.3%20%E5%88%9B%E5%BB%BA%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97" rel="nofollow">2.3 åˆ›å»ºå»¶è¿Ÿé˜Ÿåˆ—</a></p> 
<p id="2.4%20%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97%E7%BB%91%E5%AE%9A%E5%BB%B6%E8%BF%9F%E4%BA%A4%E6%8D%A2%E5%99%A8-toc" style="margin-left:80px;"><a href="#2.4%20%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97%E7%BB%91%E5%AE%9A%E5%BB%B6%E8%BF%9F%E4%BA%A4%E6%8D%A2%E5%99%A8" rel="nofollow">2.4 å»¶è¿Ÿé˜Ÿåˆ—ç»‘å®šå»¶è¿Ÿäº¤æ¢å™¨</a></p> 
<p id="2.5%20%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#2.5%20%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E9%85%8D%E7%BD%AE" rel="nofollow">2.5 æ­»ä¿¡é˜Ÿåˆ—é…ç½®</a></p> 
<p id="3.%20%E6%B7%BB%E5%8A%A0application.yml-toc" style="margin-left:40px;"><a href="#3.%20%E6%B7%BB%E5%8A%A0application.yml" rel="nofollow">3. æ·»åŠ application.yml</a></p> 
<p id="4.%20%E6%B7%BB%E5%8A%A0RabbitMQListener%20%EF%BC%88%E6%B6%88%E8%B4%B9%E8%80%85%EF%BC%89-toc" style="margin-left:40px;"><a href="#4.%20%E6%B7%BB%E5%8A%A0RabbitMQListener%20%EF%BC%88%E6%B6%88%E8%B4%B9%E8%80%85%EF%BC%89" rel="nofollow">4. æ·»åŠ RabbitMQListener ï¼ˆæ¶ˆè´¹è€…ï¼‰</a></p> 
<p id="5.%20%E5%88%9B%E5%BB%BADelayMessageSender%C2%A0-toc" style="margin-left:40px;"><a href="#5.%20%E5%88%9B%E5%BB%BADelayMessageSender%C2%A0" rel="nofollow">5. åˆ›å»ºDelayMessageSenderÂ </a></p> 
<p id="6.%20%E5%88%9B%E5%BB%BAController%C2%A0-toc" style="margin-left:40px;"><a href="#6.%20%E5%88%9B%E5%BB%BAController%C2%A0" rel="nofollow">6. åˆ›å»ºControllerÂ </a></p> 
<p id="7.%E6%B5%8B%E8%AF%95%C2%A0-toc" style="margin-left:40px;"><a href="#7.%E6%B5%8B%E8%AF%95%C2%A0" rel="nofollow">7.æµ‹è¯•Â </a></p> 
<p id="%E5%9B%9B%E3%80%81%F0%9F%8D%8C%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%F0%9F%8D%8C%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">å››ã€ğŸŒæ­»ä¿¡é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%C2%A0%E4%B8%80%E3%80%81%F0%9F%94%A5%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97">Â ä¸€ã€ğŸ”¥æ­»ä¿¡é˜Ÿåˆ—</h2> 
<blockquote> 
 <p>RabbitMQçš„æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼ŒDLQï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œç”¨äºæ¥æ”¶å…¶ä»–é˜Ÿåˆ—ä¸­çš„â€œæ­»ä¿¡â€æ¶ˆæ¯ã€‚æ‰€è°“â€œæ­»ä¿¡â€ï¼Œæ˜¯æŒ‡æ»¡è¶³ä¸€å®šæ¡ä»¶è€Œæ— æ³•è¢«æ¶ˆè´¹è€…æ­£ç¡®å¤„ç†çš„æ¶ˆæ¯ï¼Œè¿™äº›æ¡ä»¶åŒ…æ‹¬æ¶ˆæ¯è¢«æ‹’ç»ã€æ¶ˆæ¯è¿‡æœŸã€æ¶ˆæ¯è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ç­‰ã€‚</p> 
 <p>å½“æ¶ˆæ¯æˆä¸ºæ­»ä¿¡æ—¶ï¼ŒRabbitMQä¼šå°†å…¶é‡æ–°å‘é€åˆ°æŒ‡å®šçš„æ­»ä¿¡é˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ä¸¢å¼ƒå®ƒä»¬ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥å¯¹æ­»ä¿¡è¿›è¡Œåˆ†æå’Œå¤„ç†ï¼Œä¾‹å¦‚è®°å½•æ—¥å¿—ã€é‡æ–°å…¥é˜Ÿæˆ–è€…è¿›ä¸€æ­¥å¤„ç†ã€‚</p> 
 <p>æ­»ä¿¡é˜Ÿåˆ—é€šå¸¸ä¸RabbitMQçš„å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆDelayed Message Queueï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œé€šè¿‡å»¶è¿Ÿé˜Ÿåˆ—å»¶è¿Ÿæ¶ˆæ¯çš„å¤„ç†æ—¶é—´ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°è§¦å‘æ¶ˆæ¯æˆä¸ºæ­»ä¿¡çš„æ¡ä»¶ï¼Œä»è€Œè¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚</p> 
 <p></p> 
 <p>æ­»ä¿¡é˜Ÿåˆ—åœ¨æ¶ˆæ¯ä¸­é—´ä»¶ä¸­æœ‰è®¸å¤šå®é™…åº”ç”¨åœºæ™¯ï¼Œä¸»è¦ç”¨äºå¤„ç†æ— æ³•è¢«æ­£å¸¸æ¶ˆè´¹çš„æ¶ˆæ¯ï¼Œå¢å¼ºäº†æ¶ˆæ¯çš„å¯é æ€§å’Œå¤„ç†èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š</p> 
 <ol><li> <p><strong>å»¶è¿Ÿæ¶ˆæ¯å¤„ç†</strong>ï¼šé€šè¿‡å°†æ¶ˆæ¯å‘é€åˆ°å»¶è¿Ÿé˜Ÿåˆ—ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´åå†å°†æ¶ˆæ¯å‘é€åˆ°ç›®æ ‡é˜Ÿåˆ—ï¼Œå®ç°å»¶è¿Ÿå¤„ç†æ¶ˆæ¯çš„åŠŸèƒ½ã€‚</p> </li><li> <p><strong>æ¶ˆæ¯é‡è¯•</strong>ï¼šå½“æ¶ˆè´¹è€…æ— æ³•å¤„ç†æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯å¯ä»¥è¢«é‡æ–°å‘é€åˆ°é˜Ÿåˆ—å¹¶è®¾ç½®é‡è¯•æ¬¡æ•°ï¼Œè¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åè½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚</p> </li><li> <p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šå½“æ¶ˆæ¯æ— æ³•è¢«æ¶ˆè´¹è€…æ­£å¸¸å¤„ç†æ—¶ï¼ˆå¦‚æ ¼å¼é”™è¯¯ã€ä¸šåŠ¡å¼‚å¸¸ç­‰ï¼‰ï¼Œå°†æ¶ˆæ¯è½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œç”¨äºè®°å½•æ—¥å¿—ã€æŠ¥è­¦æˆ–äººå·¥å¤„ç†ã€‚</p> </li><li> <p><strong>æ¶ˆæ¯è¶…æ—¶å¤„ç†</strong>ï¼šå½“æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…æ—¶é—´è¿‡é•¿æ—¶ï¼Œå¯ä»¥è®¾ç½®æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰ï¼Œè¶…è¿‡æ—¶é—´åå°†æ¶ˆæ¯è½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</p> </li><li> <p><strong>æ¶ˆæ¯è·¯ç”±å¤±è´¥</strong>ï¼šå½“æ¶ˆæ¯æ— æ³•è¢«æ­£ç¡®è·¯ç”±åˆ°ç›®æ ‡é˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚</p> </li><li> <p><strong>æ¶ˆæ¯ç‰ˆæœ¬å…¼å®¹æ€§å¤„ç†</strong>ï¼šå½“æ¶ˆæ¯çš„æ ¼å¼æˆ–å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡æ­»ä¿¡é˜Ÿåˆ—å¯ä»¥å¤„ç†è€ç‰ˆæœ¬æ¶ˆæ¯ï¼Œç¡®ä¿æ–°ç‰ˆæœ¬ç³»ç»Ÿçš„å…¼å®¹æ€§ã€‚</p> </li></ol> 
 <hr> 
 <h3 id="RabbitMQ%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F">RabbitMQçš„å·¥ä½œæ¨¡å¼</h3> 
 <p><img alt="" height="517" src="https://images2.imgbox.com/8f/48/bLQ0wF44_o.png" width="800"></p> 
 <hr> 
 <h3 id="%C2%A0%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F">Â æ­»ä¿¡é˜Ÿåˆ—çš„å·¥ä½œæ¨¡å¼</h3> 
 <p>ä»Šå¤©æˆ‘è¦å®ç°çš„å°±æ˜¯è¿™ä¸ªå»¶è¿Ÿé˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ—ã€‚ç”Ÿäº§è€…é¦–å…ˆå‘å»¶è¿Ÿé˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼Œå¾…è¾¾åˆ°TTLåæ¶ˆæ¯ä¼šè¢«è½¬é€åˆ°æ­»ä¿¡é˜Ÿåˆ—å½“ä¸­ï¼Œæ¶ˆè´¹è€…ä¼šä»æ­»ä¿¡é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ã€‚</p> 
 <p><img alt="" height="622" src="https://images2.imgbox.com/15/f1/95H2kYvL_o.png" width="1200"></p> 
</blockquote> 
<h2 id="%C2%A0%E4%BA%8C%E3%80%81%F0%9F%8D%89RabbitMQ%E7%9B%B8%E5%85%B3%E7%9A%84%E5%AE%89%E8%A3%85%C2%A0">Â äºŒã€ğŸ‰RabbitMQç›¸å…³çš„å®‰è£…Â </h2> 
<blockquote> 
 <p><a href="https://blog.csdn.net/qq_39915083/article/details/107034747" title="win10 å®‰è£…rabbitMQè¯¦ç»†æ­¥éª¤_rabbitmq å®‰è£…-CSDNåšå®¢">win10 å®‰è£…rabbitMQè¯¦ç»†æ­¥éª¤_rabbitmq å®‰è£…-CSDNåšå®¢</a></p> 
 <p>æˆ‘è¿™é‡Œç›´æ¥å¼•ç”¨åˆ«äººçš„æ–‡ç« äº†ï¼Œä¸‹è½½éœ€è¦å¤§å®¶å»çœ‹ä¸€çœ‹ã€‚</p> 
 <p>RabbitMQå»¶è¿Ÿæ’ä»¶çš„å®‰è£…ã€‚</p> 
 <p><a href="https://blog.csdn.net/zsh66666666/article/details/131077656" title="[è¶…è¯¦ç»†]RabbitMQå®‰è£…å»¶è¿Ÿæ¶ˆæ¯æ’ä»¶_rabbitmqå®‰è£…å»¶è¿Ÿæ’ä»¶-CSDNåšå®¢">[è¶…è¯¦ç»†]RabbitMQå®‰è£…å»¶è¿Ÿæ¶ˆæ¯æ’ä»¶_rabbitmqå®‰è£…å»¶è¿Ÿæ’ä»¶-CSDNåšå®¢</a></p> 
</blockquote> 
<h2 id="%E4%B8%89%E3%80%81%F0%9F%8D%8ESpringBoot%E5%BC%95%E5%85%A5RabbitMQ">ä¸‰ã€ğŸSpringBootå¼•å…¥RabbitMQ</h2> 
<blockquote> 
 <h3 id="1.%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96">1.å¼•å…¥ä¾èµ–</h3> 
 <pre><code class="language-XML">        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
 <hr> 
 <h3 id="2.%E5%88%9B%E5%BB%BA%E9%98%9F%E5%88%97%E5%92%8C%E4%BA%A4%E6%8D%A2%E5%99%A8">2.åˆ›å»ºé˜Ÿåˆ—å’Œäº¤æ¢å™¨</h3> 
 <p>è¿™ä¸€æ­¥æ˜¯å¾ˆé‡è¦çš„ï¼Œå¦‚æœä½ é…ç½®é”™è¯¯äº†ï¼Œæ¶ˆæ¯å¾ˆå¯èƒ½æ— æ³•æ­£ç¡®çš„ä¼ é€ã€‚è¦å®ç°å»¶è¿Ÿé˜Ÿåˆ—å’Œæ­»ä¿¡é˜Ÿåˆ—ï¼Œæˆ‘ä»¬ä¸€å…±è¦åˆ›å»ºä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š</p> 
 <ol><li>å»¶è¿Ÿé˜Ÿåˆ—</li><li>å»¶è¿Ÿé˜Ÿåˆ—çš„äº¤æ¢å™¨</li><li>æ­»ä¿¡é˜Ÿåˆ—</li><li>æ­»ä¿¡é˜Ÿåˆ—çš„äº¤æ¢å™¨</li></ol> 
 <p>åœ¨æˆ‘ä»¬åˆ›å»ºäº†è¿™å‡ ä¸ªç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬è¿˜è¦å¹²ä¸€äº›äº‹æƒ…ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›ç»„ä»¶è¿›è¡Œç»„è£…ï¼Œå¦‚æœä½ ä¸äº†è§£RabbitMQçš„åŸºç¡€ï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹åŸºç¡€æ•™å­¦ï¼Œæˆ‘è¿™é‡Œç®€å•çš„è¯´ä¸€ä¸‹ã€‚RabbitMQä¸­æœ‰ä¸€ç§ç»‘å®šæ–¹å¼ï¼Œè¿™ç§ç»‘å®šæ–¹å¼ä¼šæŠŠBindingKeyå’ŒRoutingKeyå®Œå…¨åŒ¹é…çš„è¿›è¡Œç»‘å®šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”Ÿäº§è€…å‘é€äº†ä¸€ä¸ªBindingKeyä¸ºâ€œwarningâ€çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶ˆæ¯å°±ä¼šè¢«å‘é€åˆ°Queue1å’ŒQueue2ï¼Œè¿™å¹¶ä¸éš¾ç†è§£ã€‚</p> 
 <p>æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠé˜Ÿåˆ—å’Œäº¤æ¢å™¨é€šè¿‡ä¸€ä¸ªRoutingKeyç»‘å®šåœ¨ä¸€èµ·ã€‚</p> 
 <p><img alt="" height="252" src="https://images2.imgbox.com/13/d2/WKz0W7PI_o.png" width="739"></p> 
 <hr> 
 <h4 id="2.1%20%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%C2%A0">2.1 å˜é‡å£°æ˜Â </h4> 
 <p>Â æ¥ä¸‹æ¥çš„ä»£ç è¦å¥½å¥½çœ‹äº†ï¼Œé¦–å…ˆæˆ‘ä»¬æŠŠæˆ‘ä»¬åè¾¹è¦ç”¨åˆ°çš„åç§°å˜é‡å…¨éƒ¨å®šä¹‰å‡ºæ¥ã€‚å› ä¸ºè¿™ä¸ªåç§°èµ·çš„å¾ˆé•¿ï¼Œæˆ‘ä»¬ä¸æ–¹ä¾¿ç›´æ¥ä½¿ç”¨ã€‚åˆ›å»ºDeadRabbitConfigã€‚åœ¨ç±»ä¸­å®šä¹‰å¦‚ä¸‹å˜é‡ï¼Œå»¶è¿Ÿé˜Ÿåˆ—äº¤æ¢å™¨åç§°ã€å»¶è¿Ÿé˜Ÿåˆ—åç§°ã€å»¶è¿Ÿé˜Ÿåˆ—Routingåç§°ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰æ­»ä¿¡é˜Ÿåˆ—äº¤æ¢å™¨åç§°ã€æ­»ä¿¡é˜Ÿåˆ—åç§°å’Œæ­»ä¿¡Routingåç§°ã€‚</p> 
 <pre><code class="language-java">  // å»¶è¿Ÿé˜Ÿåˆ—äº¤æ¢å™¨åç§°
    public static final String DELAY_EXCHANGE_NAME = "delay.queue.demo.business.exchange";
    // å»¶è¿Ÿé˜Ÿåˆ—Aåç§°
    public static final String DELAY_QUEUE_A_NAME = "delay.queue.demo.business.queue_a";
    // å»¶è¿Ÿé˜Ÿåˆ—Båç§°
    public static final String DELAY_QUEUE_B_NAME = "delay.queue.demo.business.queue_b";
    // å»¶è¿Ÿé˜Ÿåˆ—routingAåç§°
    public static final String DELAY_QUEUE_ROUTING_A_NAME = "delay.queue.demo.business.queue_a.routing_key";
    // å»¶è¿Ÿé˜Ÿåˆ—routingBåç§°
    public static final String DELAY_QUEUE_ROUTING_B_NAME = "delay.queue.demo.business.queue_b.routing_key";

    // æ­»ä¿¡é˜Ÿåˆ—
    public static final String DEAD_LETTER_EXCHANGE = "delay.queue.demo.deadletter.exchange";
    public static final String DEAD_LETTER_QUEUE_A_ROUTING_KEY = "delay.queue.demo.deadletter.delay_10s.routing_key";
    public static final String DEAD_LETTER_QUEUE_B_ROUTING_KEY = "delay.queue.demo.deadletter.delay_60s.routing_key";
    public static final String DEAD_LETTER_QUEUE_A_NAME = "delay.queue.demo.deadletter.queue_a";
    public static final String DEAD_LETTER_QUEUE_B_NAME = "delay.queue.demo.deadletter.queue_b";</code></pre> 
 <hr> 
 <h4 id="2.2%20%E5%88%9B%E5%BB%BA%E5%BB%B6%E8%BF%9F%E4%BA%A4%E6%8D%A2%E5%99%A8">2.2 åˆ›å»ºå»¶è¿Ÿäº¤æ¢å™¨</h4> 
 <pre><code class="language-java">// æ³¨å†Œå»¶è¿Ÿäº¤æ¢å™¨delayExchange
    @Bean("delayExchange")
    public DirectExchange delayExchange(){
        return  new DirectExchange(DELAY_EXCHANGE_NAME);
    }</code></pre> 
 <hr> 
 <h4 id="2.3%20%E5%88%9B%E5%BB%BA%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97">2.3 åˆ›å»ºå»¶è¿Ÿé˜Ÿåˆ—</h4> 
 <p>è¿™é‡Œçš„å»¶è¿Ÿé˜Ÿåˆ—éœ€è¦æˆ‘ä»¬é¢å¤–çš„é…ç½®ä¸€äº›å‚æ•°ï¼Œç”¨äºå’Œæ­»ä¿¡é˜Ÿåˆ—è¿›è¡Œä¿¡æ¯å‘é€ã€‚è¿™é‡Œæˆ‘æ˜¯ç”¨äº†ä¸¤ç§ä¸åŒçš„æ–¹å¼æ„å»ºå»¶è¿Ÿé˜Ÿåˆ—Aå’Œå»¶è¿Ÿé˜Ÿåˆ—Bï¼Œåœ¨å»¶è¿Ÿé˜Ÿåˆ—Aç§æˆ‘æ²¡æœ‰è®¾ç½®TTLå‚æ•°ï¼Œè€Œæ˜¯é€šè¿‡RabbitMQçš„å»¶è¿Ÿæ’ä»¶å®ç°çš„ï¼Œè€Œå»¶è¿Ÿé˜Ÿåˆ—Bæˆ‘è®¾ç½®äº†TTLä¸º10000msï¼Œä¹Ÿå°±æ˜¯åç§’ï¼Œåç§’å†…æ¶ˆæ¯å¦‚æœæ²¡æœ‰è¢«æ¶ˆè´¹æ‰å°±ä¼šå‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</p> 
 <pre><code class="language-java">// æ³¨å†Œå»¶è¿Ÿé˜Ÿåˆ—A   è¿˜è¦ç»‘å®šæ­»ä¿¡äº¤æ¢å™¨å’Œæ­»ä¿¡routingA
    @Bean("delayQueueA")
    public Queue delayQueueA(){
        Map&lt;String,Object&gt; args = new HashMap&lt;&gt;();
        args.put("x-dead-letter-exchange",DEAD_LETTER_EXCHANGE);
        args.put("x-dead-letter-routing-key",DEAD_LETTER_QUEUE_A_ROUTING_KEY);
        //args.put("x-message-ttl",6000);
        return QueueBuilder.durable(DELAY_QUEUE_A_NAME).withArguments(args).build();
    }
    // æ³¨å†Œå»¶è¿Ÿé˜Ÿåˆ—B   è¿˜è¦ç»‘å®šæ­»ä¿¡äº¤æ¢å™¨å’Œæ­»ä¿¡routingB
    @Bean("delayQueueB")
    public Queue delayQueueB(){
        Map&lt;String,Object&gt; args = new HashMap&lt;&gt;();
        args.put("x-dead-letter-exchange",DEAD_LETTER_EXCHANGE);
        args.put("x-dead-letter-routing-key",DEAD_LETTER_QUEUE_B_ROUTING_KEY);
        args.put("x-message-ttl",10000);
        return QueueBuilder.durable(DELAY_QUEUE_B_NAME).withArguments(args).build();
    }</code></pre> 
 <hr> 
 <h4 id="2.4%20%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97%E7%BB%91%E5%AE%9A%E5%BB%B6%E8%BF%9F%E4%BA%A4%E6%8D%A2%E5%99%A8">2.4 å»¶è¿Ÿé˜Ÿåˆ—ç»‘å®šå»¶è¿Ÿäº¤æ¢å™¨</h4> 
 <pre><code class="language-java"> // å»¶è¿Ÿé˜Ÿåˆ—Aç»‘å®šäº¤æ¢å™¨
    @Bean
    public Binding delayQueueABinding(@Qualifier("delayQueueA") Queue queue, @Qualifier("delayExchange") DirectExchange delayExchange){
        return BindingBuilder.bind(queue).to(delayExchange).with(DELAY_QUEUE_ROUTING_A_NAME);
    }
    // å»¶è¿Ÿé˜Ÿåˆ—Bç»‘å®šäº¤æ¢å™¨
    @Bean
    public Binding delayQueueBBinding(@Qualifier("delayQueueB") Queue queue,@Qualifier("delayExchange") DirectExchange delayExchange){
        return BindingBuilder.bind(queue).to(delayExchange).with(DELAY_QUEUE_ROUTING_B_NAME);
    }</code></pre> 
 <hr> 
 <h4 id="2.5%20%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E9%85%8D%E7%BD%AE">2.5 æ­»ä¿¡é˜Ÿåˆ—é…ç½®</h4> 
 <p>ä¸å»¶è¿Ÿé˜Ÿåˆ—ä¸åŒçš„æ˜¯ï¼Œæ­»ä¿¡é˜Ÿåˆ—å¹¶æ²¡æœ‰é…ç½®å»¶è¿Ÿå‚æ•°ã€‚</p> 
 <pre><code class="language-java">// æ³¨å†Œæ­»ä¿¡é˜Ÿåˆ—A
    @Bean("deadLetterQueueA")
    public Queue deadLetterQueueA(){
        return new Queue(DEAD_LETTER_QUEUE_A_NAME);
    }
    // æ³¨å†Œæ­»ä¿¡é˜Ÿåˆ—B
    @Bean("deadLetterQueueB")
    public Queue deadLetterQueueB(){
        return new Queue(DEAD_LETTER_QUEUE_B_NAME);
    }
    // æ³¨å†Œæ­»ä¿¡äº¤æ¢å™¨
    @Bean
    public DirectExchange deadLetterExchange(){
        return new DirectExchange(DEAD_LETTER_EXCHANGE);
    }
    // æ­»ä¿¡é˜Ÿåˆ—Aç»‘å®šæ­»ä¿¡äº¤æ¢å™¨
    @Bean
    public Binding deadLetterQueueABinding(@Qualifier("deadLetterQueueA") Queue queue, @Qualifier("deadLetterExchange") DirectExchange deadLetterExchange){
        return BindingBuilder.bind(queue).to(deadLetterExchange).with(DEAD_LETTER_QUEUE_A_ROUTING_KEY);
    }
    // æ­»ä¿¡é˜Ÿåˆ—Bç»‘å®šæ­»ä¿¡äº¤æ¢å™¨
    @Bean
    public Binding deadLetterQueueBBinding(@Qualifier("deadLetterQueueB") Queue queue, @Qualifier("deadLetterExchange")DirectExchange deadLetterExchange){
        return BindingBuilder.bind(queue).to(deadLetterExchange).with(DEAD_LETTER_QUEUE_B_ROUTING_KEY);
    }</code></pre> 
 <p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒRabbitMQçš„ç»„ä»¶é…ç½®å®Œæˆã€‚</p> 
 <hr> 
 <h3 id="3.%20%E6%B7%BB%E5%8A%A0application.yml">3. æ·»åŠ application.yml</h3> 
 <pre><code class="language-java">server:
  port: 8081
spring:
  application:
    name: test-rabbitmq-producer
  rabbitmq:
    host: 127.0.0.1
    port: 5672
    username: guest
    password: guest</code></pre> 
 <hr> 
 <h3 id="4.%20%E6%B7%BB%E5%8A%A0RabbitMQListener%20%EF%BC%88%E6%B6%88%E8%B4%B9%E8%80%85%EF%BC%89">4. æ·»åŠ RabbitMQListener ï¼ˆæ¶ˆè´¹è€…ï¼‰</h3> 
 <p>ä¸‹æ–¹çš„ä»£ç ä¸€å…±æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…è·å–æ­»ä¿¡é˜Ÿåˆ—Aä¸­çš„æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªæ¶ˆè´¹è€…è·å–æ­»ä¿¡é˜Ÿåˆ—Bä¸­çš„æ¶ˆæ¯ã€‚</p> 
 <pre><code class="language-java">@Component
public class DeadLetterQueueConsumer {
    public static final Logger LOGGER = LoggerFactory.getLogger(DeadLetterQueueConsumer.class);

    @RabbitListener(queues = DeadRabbitConfig.DEAD_LETTER_QUEUE_A_NAME,ackMode = "MANUAL")
    public void receiveA(Message message, Channel channel) throws IOException {
        String msg = new String(message.getBody());
        LOGGER.info("å½“å‰æ—¶é—´ï¼š{},æ­»ä¿¡é˜Ÿåˆ—Aæ”¶åˆ°æ¶ˆæ¯ï¼š{}", new Date().toString(), msg);
        System.out.println(message.getMessageProperties().getDeliveryTag());
        channel.basicAck(message.getMessageProperties().getDeliveryTag(), false);
    }

    @RabbitListener(queues = DeadRabbitConfig.DEAD_LETTER_QUEUE_B_NAME,ackMode = "MANUAL")
    public void receiveB(Message message, Channel channel) throws IOException {
        String msg = new String(message.getBody());
        LOGGER.info("å½“å‰æ—¶é—´ï¼š{},æ­»ä¿¡é˜Ÿåˆ—Bæ”¶åˆ°æ¶ˆæ¯ï¼š{}", new Date().toString(), msg);
        channel.basicAck(message.getMessageProperties().getDeliveryTag(), false);
    }
}</code></pre> 
 <hr> 
 <h3 id="5.%20%E5%88%9B%E5%BB%BADelayMessageSender%C2%A0">5. åˆ›å»ºDelayMessageSenderÂ </h3> 
 <p>è¿™é‡Œé‡‡ç”¨çš„å°±æ˜¯ä¸¤ç§ä¸åŒçš„æ–¹å¼ï¼Œä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æ’ä»¶æ¥å»¶è¿Ÿæ¶ˆæ¯çš„å‘é€ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡TTLå‚æ•°ã€‚</p> 
 <pre><code class="language-java">@Component
public class DelayMessageSender {
    @Resource
    RabbitTemplate rabbitTemplate;


    public void sendMessage(String msg,Integer delayTimes){
        switch (delayTimes){
            case 6:
                rabbitTemplate.convertAndSend(DeadRabbitConfig.DELAY_EXCHANGE_NAME, DeadRabbitConfig.DELAY_QUEUE_ROUTING_A_NAME,msg,new MessagePostProcessor() {
                    @Override
                    public Message postProcessMessage(Message message) throws AmqpException {
                        message.getMessageProperties().setExpiration(String.valueOf(6000));
                        return message;
                    }
                });
                break;
            case 10:
                rabbitTemplate.convertAndSend(DeadRabbitConfig.DELAY_QUEUE_B_NAME,msg);
                break;
        }
    }
}
</code></pre> 
 <hr> 
 <h3 id="6.%20%E5%88%9B%E5%BB%BAController%C2%A0">6. åˆ›å»ºControllerÂ </h3> 
 <pre><code class="language-java">@RestController
@RequestMapping("/student")
public class StudentController {
    @Autowired
    DelayMessageSender messageSender;
    @RequestMapping("/send-message")
    public String sendMessage(String msg,Integer delayTimes){
        System.out.println(new Date());
        messageSender.sendMessage(msg,delayTimes);
        return "å‘é€æˆåŠŸ";
    }
}</code></pre> 
 <hr> 
 <h3 id="7.%E6%B5%8B%E8%AF%95%C2%A0">7.æµ‹è¯•Â </h3> 
 <p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€è¿›å…¥RabbitMQç•Œé¢ã€‚è´¦å·å¯†ç éƒ½æ˜¯guestã€‚</p> 
 <pre><code class="language-bash">http://localhost:15672/</code></pre> 
 <p>Â å…ˆæ¥çœ‹çœ‹æˆ‘ä»¬çš„åˆå§‹é˜Ÿåˆ—ã€‚è¿™é‡Œæ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰çš„ã€‚</p> 
 <p><img alt="" height="632" src="https://images2.imgbox.com/84/62/aMaFDd4m_o.png" width="1200"></p> 
 <hr> 
 <p>ç„¶åæˆ‘ä»¬å¯åŠ¨é¡¹ç›®ååœ¨çœ‹ã€‚æˆ‘ä»¬åˆšæ‰åˆ›å»ºå‡ºæ¥çš„å››ä¸ªé˜Ÿåˆ—å…¨éƒ¨éƒ½è¢«åŠ è½½äº†å‡ºæ¥ã€‚</p> 
 <p><img alt="" height="600" src="https://images2.imgbox.com/d9/50/TPlYBxi2_o.png" width="1200"></p> 
 <hr> 
 <p>Â ä½¿ç”¨PostManå‘é€ä¸€æ¬¡è¯·æ±‚ã€‚<img alt="" height="641" src="https://images2.imgbox.com/31/c5/A2GXdGWa_o.png" width="1200"></p> 
 <hr> 
 <p>Â æˆ‘ä»¬çš„è¯·æ±‚åœ¨17sçš„æ—¶å€™å‘é€åˆ°åç«¯ï¼Œæ¶ˆæ¯æ‰“å°åœ¨23sï¼Œè¯´æ˜æˆ‘ä»¬çš„å»¶è¿Ÿé˜Ÿåˆ—æœ‰æ•ˆæœã€‚</p> 
 <p><img alt="" height="145" src="https://images2.imgbox.com/c3/2b/7PUAg4bR_o.png" width="1200"></p> 
 <hr> 
 <p></p> 
 <p>æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•10sçš„å»¶è¿Ÿé˜Ÿåˆ—ã€‚</p> 
 <p><img alt="" height="577" src="https://images2.imgbox.com/14/26/Dsv2r6ev_o.png" width="1200"></p> 
 <hr> 
 <p>Â 10såæ­»ä¿¡é˜Ÿåˆ—BæˆåŠŸçš„æ¥æ”¶åˆ°äº†æ¶ˆæ¯ã€‚</p> 
 <p><img alt="" height="78" src="https://images2.imgbox.com/76/69/Ga4uXd08_o.png" width="1200"></p> 
</blockquote> 
<h2 id="%E5%9B%9B%E3%80%81%F0%9F%8D%8C%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">å››ã€ğŸŒæ­»ä¿¡é˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯</h2> 
<blockquote> 
 <p>å»¶è¿Ÿé˜Ÿåˆ—é€šå¸¸ç”¨äºéœ€è¦å»¶è¿Ÿæ‰§è¡ŒæŸäº›ä»»åŠ¡æˆ–è§¦å‘æŸäº›äº‹ä»¶çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå­å•†åŠ¡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å»¶è¿Ÿé˜Ÿåˆ—å®ç°è®¢å•è¶…æ—¶æœªæ”¯ä»˜è‡ªåŠ¨å–æ¶ˆåŠŸèƒ½ã€‚</p> 
 <ul><li> <p><strong>1.è®¢å•åˆ›å»º</strong>ï¼š</p> 
   <ul><li>ç”¨æˆ·ä¸‹å•åï¼Œç³»ç»Ÿç”Ÿæˆè®¢å•ï¼Œå¹¶å°†è®¢å•ä¿¡æ¯å‘é€åˆ°ä¸€ä¸ªæ™®é€šé˜Ÿåˆ—ï¼ŒåŒæ—¶è®¾ç½®ä¸€ä¸ªTTLï¼ˆTime-To-Liveï¼‰ä¸º30åˆ†é’Ÿã€‚</li><li>è¿™ä¸ªé˜Ÿåˆ—é…ç½®äº†æ­»ä¿¡äº¤æ¢æœºï¼ˆDead Letter Exchange, DLXï¼‰ï¼Œå½“æ¶ˆæ¯è¿‡æœŸåä¼šè¢«è½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</li></ul></li><li> <p><strong>2.ç­‰å¾…æ”¯ä»˜</strong>ï¼š</p> 
   <ul><li>åœ¨30åˆ†é’Ÿå†…ï¼Œç”¨æˆ·å¯ä»¥å®Œæˆæ”¯ä»˜ã€‚å¦‚æœç”¨æˆ·åœ¨30åˆ†é’Ÿå†…æ”¯ä»˜å®Œæˆï¼Œç³»ç»Ÿä¼šä»æ™®é€šé˜Ÿåˆ—ä¸­ç§»é™¤å¯¹åº”çš„æ¶ˆæ¯å¹¶æ­£å¸¸å¤„ç†è®¢å•ã€‚</li></ul></li><li> <p><strong>3.è®¢å•è¶…æ—¶å¤„ç†</strong>ï¼š</p> 
   <ul><li>å¦‚æœç”¨æˆ·æœªåœ¨30åˆ†é’Ÿå†…å®Œæˆæ”¯ä»˜ï¼Œæ¶ˆæ¯ä¼šè‡ªåŠ¨è¿‡æœŸå¹¶è½¬å‘åˆ°æ­»ä¿¡äº¤æ¢æœºï¼Œè¿›è€Œè½¬å‘åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</li></ul></li><li> <p><strong>4.å–æ¶ˆè®¢å•</strong>ï¼š</p> 
   <ul><li>ç³»ç»Ÿæœ‰ä¸€ä¸ªä¸“é—¨çš„æ¶ˆè´¹è€…ç›‘å¬æ­»ä¿¡é˜Ÿåˆ—ã€‚å½“æœ‰æ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—æ—¶ï¼Œæ¶ˆè´¹è€…ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›æ¶ˆæ¯ï¼Œå³å–æ¶ˆè®¢å•ã€é‡Šæ”¾åº“å­˜ï¼Œå¹¶é€šçŸ¥ç”¨æˆ·è®¢å•å·²å–æ¶ˆã€‚</li></ul></li><li> <p><strong>5.å®šæ—¶ä»»åŠ¡</strong>ï¼ˆå¯é€‰ï¼‰ï¼š</p> 
   <ul><li>è™½ç„¶æ­»ä¿¡é˜Ÿåˆ—å·²ç»æä¾›äº†è¶…æ—¶è®¢å•çš„å¤„ç†ï¼Œä½†ä¸ºäº†é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±æˆ–å¤„ç†å»¶è¿Ÿï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªå®šæ—¶ä»»åŠ¡å®šæœŸæ£€æŸ¥è®¢å•çŠ¶æ€ï¼Œç¡®ä¿æ‰€æœ‰è¶…æ—¶æœªæ”¯ä»˜çš„è®¢å•éƒ½å¾—åˆ°äº†å¤„ç†ã€‚</li></ul></li></ul> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5a0b9fc33ae96802d5dd433d09514e9/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Webå‰ç«¯å®‰å…¨æµ‹è¯•ï¼šæ·±å…¥å‰–æä¸å®æˆ˜ç­–ç•¥</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/134f66d991cd66797215cc7adb4bc5b6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Linux shellç¼–ç¨‹åŸºç¡€</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>