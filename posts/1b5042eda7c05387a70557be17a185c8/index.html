<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C语言篇】深入理解指针1 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1b5042eda7c05387a70557be17a185c8/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C语言篇】深入理解指针1">
  <meta property="og:description" content="文章目录 内存和地址内存编址 指针变量和地址取地址操作符指针变量和解引用操作符指针变量指针变量类型解引用操作符指针变量的大小 指针变量类型的意义指针的解引用指针&#43;-整数void*指针 const修饰指针指针运算指针&#43;-整数指针-指针指针的关系运算 野指针野指针成因如何规避野指针 assert断言传值调用和传址调用写在最后 内存和地址 内存 在讲内存和地址之前，先看一个⽣活中的案例：
假设有⼀栋宿舍楼，把你放在楼⾥，楼上有100个房间，但是房间没有编号，你的⼀个朋友来找你玩， 如果想找到你，就得挨个房⼦去找，这样效率很低，但是我们如果根据楼层和楼层的房间的情况，给每个房间编上号，如：
//⼀楼：101，102，103... //⼆楼：201，202，203... //... 有了房间号，如果你的朋友得到房间号，就可以快速的找房间，找到你。
⽣活中，每个房间有了房间号，就能提⾼效率，能快速的找到房间。
如果把上⾯的例⼦对照到计算机中，⼜是怎么样呢？
我们知道计算机上 CPU（中央处理器）在处理数据的时候，需要的数据是在内存中读取的，处理后的数据也会放回内存中，那我们买电脑的时候，电脑上内存是8GB/16GB/32GB等，那这些内存空间如何⾼效的管理呢？
其实也是把内存划分为⼀个个的内存单元，每个内存单元的⼤⼩取1个字节。
计算机中常⻅的单位：
bit - ⽐特位 Byte - 字节 KB MB GB TB PB 1Byte = 8bit 1KB = 1024Byte 1MB = 1024KB 1GB = 1024MB 1TB = 1024GB 1PB = 1024TB 其中，每个内存单元，相当于⼀个学⽣宿舍，⼀ 个字节空间⾥⾯能放8个⽐特位，就好⽐同学们住的⼋⼈间，每个⼈是⼀个⽐特位。
每个内存单元也都有⼀个编号（这个编号就相当于宿舍房间的⻔牌号），有了这个内存单元的编号，CPU就可以快速找到⼀个内存空间。
⽣活中我们把⻔牌号也叫地址，在计算机中我们 把内存单元的编号也称为地址。C语⾔中给地址起了新的名字叫：指针。
内存单元的编号 == 地址 == 指针
编址 CPU访问内存中的某个字节空间，必须知道这个 字节空间在内存的什么位置，⽽因为内存中字节 很多，所以需要给内存进⾏编址(就如同宿舍很 多，需要给宿舍编号⼀样)。
计算机中的编址，并不是把每个字节的地址记录下来，⽽是通过硬件设计完成的
CPU和内存之间有⼀组线，叫做地址总线。
我们可以简单理解，32位机器有32根地址总线， 每根线只有两态，表⽰0,1【电脉冲有⽆】，那么 ⼀根线，就能表⽰2种含义，2根线就能表⽰4种含义，依次类推。32根地址线，就能表⽰232种含 义，每⼀种含义都代表⼀个地址。 地址信息被下达给内存，在内存上，就可以找到该地址对应的数据，将数据再通过数据总线传⼊ CPU内寄存器。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-11T01:30:00+08:00">
    <meta property="article:modified_time" content="2024-08-11T01:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C语言篇】深入理解指针1</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">内存和地址</a></li><li><ul><li><a href="#_3" rel="nofollow">内存</a></li><li><a href="#_61" rel="nofollow">编址</a></li></ul> 
  </li><li><a href="#_76" rel="nofollow">指针变量和地址</a></li><li><ul><li><a href="#_78" rel="nofollow">取地址操作符</a></li><li><a href="#_121" rel="nofollow">指针变量和解引用操作符</a></li><li><ul><li><a href="#_123" rel="nofollow">指针变量</a></li><li><a href="#_141" rel="nofollow">指针变量类型</a></li><li><a href="#_156" rel="nofollow">解引用操作符</a></li><li><a href="#_177" rel="nofollow">指针变量的大小</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_211" rel="nofollow">指针变量类型的意义</a></li><li><ul><li><a href="#_219" rel="nofollow">指针的解引用</a></li><li><a href="#_251" rel="nofollow">指针+-整数</a></li><li><a href="#void_281" rel="nofollow">void*指针</a></li></ul> 
  </li><li><a href="#const_312" rel="nofollow">const修饰指针</a></li><li><a href="#_384" rel="nofollow">指针运算</a></li><li><ul><li><a href="#_392" rel="nofollow">指针+-整数</a></li><li><a href="#_416" rel="nofollow">指针-指针</a></li><li><a href="#_437" rel="nofollow">指针的关系运算</a></li></ul> 
  </li><li><a href="#_460" rel="nofollow">野指针</a></li><li><ul><li><a href="#_464" rel="nofollow">野指针成因</a></li><li><a href="#_513" rel="nofollow">如何规避野指针</a></li></ul> 
  </li><li><a href="#assert_569" rel="nofollow">assert断言</a></li><li><a href="#_600" rel="nofollow">传值调用和传址调用</a></li><li><a href="#_670" rel="nofollow">写在最后</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>内存和地址</h2> 
<h3><a id="_3"></a>内存</h3> 
<p>在讲内存和地址之前，先看一个⽣活中的案例：</p> 
<p>假设有⼀栋宿舍楼，把你放在楼⾥，楼上有100个房间，但是房间没有编号，你的⼀个朋友来找你玩， 如果想找到你，就得挨个房⼦去找，这样效率很低，但是我们如果根据楼层和楼层的房间的情况，给每个房间编上号，如：</p> 
<pre><code class="prism language-c"><span class="token comment">//⼀楼：101，102，103...</span>
<span class="token comment">//⼆楼：201，202，203...</span>
<span class="token comment">//...</span>
</code></pre> 
<p>有了房间号，如果你的朋友得到房间号，就可以快速的找房间，找到你。<br> <img src="https://images2.imgbox.com/11/62/dSl6usZx_o.png" alt="在这里插入图片描述"></p> 
<p>⽣活中，每个房间有了房间号，就能提⾼效率，能快速的找到房间。</p> 
<p>如果把上⾯的例⼦对照到计算机中，⼜是怎么样呢？</p> 
<p><strong>我们知道计算机上 CPU（中央处理器）在处理数据的时候，需要的数据是在内存中读取的，处理后的数据也会放回内存中，那我们买电脑的时候，电脑上内存是8GB/16GB/32GB等，那这些内存空间如何⾼效的管理呢？</strong></p> 
<p>其实也是把内存划分为⼀个个的内存单元，每个内存单元的⼤⼩取1个字节。</p> 
<p>计算机中常⻅的单位：</p> 
<pre><code class="prism language-c">bit <span class="token operator">-</span> ⽐特位
Byte <span class="token operator">-</span> 字节
KB
MB
GB
TB
PB
    
<span class="token number">1</span>Byte <span class="token operator">=</span> <span class="token number">8</span>bit
<span class="token number">1</span>KB <span class="token operator">=</span> <span class="token number">1024</span>Byte
<span class="token number">1</span>MB <span class="token operator">=</span> <span class="token number">1024</span>KB
<span class="token number">1</span>GB <span class="token operator">=</span> <span class="token number">1024</span>MB
<span class="token number">1</span>TB <span class="token operator">=</span> <span class="token number">1024</span>GB
<span class="token number">1</span>PB <span class="token operator">=</span> <span class="token number">1024</span>TB
</code></pre> 
<p><strong>其中，每个内存单元，相当于⼀个学⽣宿舍，⼀ 个字节空间⾥⾯能放8个⽐特位，就好⽐同学们住的⼋⼈间，每个⼈是⼀个⽐特位。</strong></p> 
<p><strong>每个内存单元也都有⼀个编号（这个编号就相当于宿舍房间的⻔牌号），有了这个内存单元的编号，CPU就可以快速找到⼀个内存空间。</strong></p> 
<p><strong>⽣活中我们把⻔牌号也叫地址，在计算机中我们 把内存单元的编号也称为地址。C语⾔中给地址起了新的名字叫：<mark>指针</mark>。</strong></p> 
<p><mark>内存单元的编号 == 地址 == 指针</mark></p> 
<p><img src="https://images2.imgbox.com/04/24/ENwYRMcL_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_61"></a>编址</h3> 
<p>CPU访问内存中的某个字节空间，必须知道这个 字节空间在内存的什么位置，⽽因为内存中字节 很多，所以需要给内存进⾏编址(就如同宿舍很 多，需要给宿舍编号⼀样)。</p> 
<p>计算机中的编址，并不是把每个字节的地址记录下来，⽽是通过硬件设计完成的</p> 
<p>CPU和内存之间有⼀组线，叫做<strong>地址总线</strong>。</p> 
<p>我们可以简单理解，32位机器有32根<strong>地址总线</strong>， 每根线只有两态，表⽰0,1【电脉冲有⽆】，那么 ⼀根线，就能表⽰2种含义，2根线就能表⽰4种含义，依次类推。<strong>32根地址线，就能表⽰2<sup>32</sup>种含 义，每⼀种含义都代表⼀个地址</strong>。 地址信息被下达给内存，在内存上，就可以找到该地址对应的数据，将数据再通过数据总线传⼊ CPU内寄存器。</p> 
<p><img src="https://images2.imgbox.com/8e/7e/g5mg2Ht7_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_76"></a>指针变量和地址</h2> 
<h3><a id="_78"></a>取地址操作符</h3> 
<p>理解了内存和地址的关系，我们再回到C语⾔，在C语⾔中创建变量其实就是向内存申请空间，⽐如：</p> 
<p><img src="https://images2.imgbox.com/67/1f/WmaB3pyQ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>⽐如，上述的代码就是创建了整型变量a，内存中申请4个字节，⽤于存放整数10，其中每个字节都有地址，上图中4个字节的地址分别是：</strong></p> 
<pre><code class="prism language-c"><span class="token number">0x006FFD70</span>
<span class="token number">0x006FFD71</span>
<span class="token number">0x006FFD72</span>
<span class="token number">0x006FFD73</span>
</code></pre> 
<p><strong>使用<code>&amp;</code>操作符得到a的地址</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token comment">//取出a的地址 </span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>按照画图的例⼦，会打印处理：006FFD70</p> 
<p><mark>&amp;a取出的是a所占4个字节中地址较⼩的字节的地址</mark></p> 
<p><img src="https://images2.imgbox.com/c6/18/wPEoRhIL_o.png" alt="在这里插入图片描述"></p> 
<p>虽然整型变量占⽤4个字节，我们只要知道了第⼀个字节地址，顺藤摸⽠访问到4个字节的数据就是可行的了。</p> 
<hr> 
<h3><a id="_121"></a>指针变量和解引用操作符</h3> 
<h4><a id="_123"></a>指针变量</h4> 
<p>那我们通过取地址操作符(&amp;)拿到的地址是⼀个数值，⽐如：0x006FFD70，这个数值有时候也是需要存储起来，⽅便后期再使⽤的，那我们把这样的地址值存放在哪⾥呢？</p> 
<p><strong>答案是：指针变量中。</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token comment">//取出a的地址并存储到指针变量pa中 </span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>指针变量也是⼀种变量，这种变量就是⽤来存放地址的，存放在指针变量中的值都会理解为地址。</strong></p> 
<h4><a id="_141"></a>指针变量类型</h4> 
<pre><code class="prism language-c"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
</code></pre> 
<p>这⾥<code>pa</code>左边写的是 <code>int*</code> ， <code>*</code> 是在说明<code>pa</code>是指针变量，⽽前⾯的 <code>int</code> 是在说明<code>pa</code>指向的是整型(<code>int</code>) 类型的对象。</p> 
<p><img src="https://images2.imgbox.com/c7/02/lnJPYbQ2_o.png" alt="在这里插入图片描述"></p> 
<p><mark>要存储什么类型的对象的地址，指针变量类型就是：对象类型+*</mark></p> 
<h4><a id="_156"></a>解引用操作符</h4> 
<p>我们只要拿到了地址（指针），就可以通过地址（指针）找到地址（指针） 指向的对象，这⾥使用的⼀个操作符叫解引⽤操作符(<code>*</code>)。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
    <span class="token operator">*</span>pa <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上⾯代码中第6⾏就使⽤了解引⽤操作符， <code>*pa</code> 的意思就是通过<code>pa</code>中存放的地址，找到指向的空间， <code>*pa</code>其实就是<code>a</code>变量了；</p> 
<p>所以<code>*pa=0</code>，这个操作符是把<code>a</code>改成了0。</p> 
<hr> 
<h4><a id="_177"></a>指针变量的大小</h4> 
<p>前⾯的内容我们了解到，32位机器假设有32根地址总线，每根地址线出来的电信号转换成数字信号后 是1或者0，那我们把32根地址线产⽣的2进制序列当做⼀个地址，那么⼀个地址就是32个<code>bit</code>位，需要4个字节才能存储。</p> 
<p>指针变量是⽤来存放地址的，那么指针变量的⼤⼩就得是4个字节的空间才可以。</p> 
<p>同理64位机器，假设有64根地址线，⼀个地址就是64个⼆进制位组成的⼆进制序列，存储起来就需要 8个字节的空间，指针变量的⼤⼩就是8个字节。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token comment">//指针变量的⼤⼩取决于地址的⼤⼩ </span>
<span class="token comment">//32位平台下地址是32个bit位（即4个字节） </span>
<span class="token comment">//64位平台下地址是64个bit位（即8个字节） </span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zd\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zd\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">short</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zd\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zd\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/79/1a/geGls3Wb_o.png" alt="在这里插入图片描述"></p> 
<p><strong>结论：</strong></p> 
<ul><li>32位平台下地址是32个bit位，指针变量⼤⼩是4个字节</li><li>64位平台下地址是64个bit位，指针变量⼤⼩是8个字节</li><li><mark>注意指针变量的⼤⼩和类型是⽆关的，只要指针类型的变量，在相同的平台下，⼤⼩都是相同的</mark></li></ul> 
<hr> 
<h2><a id="_211"></a>指针变量类型的意义</h2> 
<p><font color="orange">指针变量的⼤⼩和类型⽆关，只要是指针变量，在同⼀个平台下，⼤⼩都是⼀样的，为什么还要有各种各样的指针类型呢？ </font></p> 
<p>其实指针类型是有特殊意义的，接下来继续介绍。</p> 
<hr> 
<h3><a id="_219"></a>指针的解引用</h3> 
<pre><code class="prism language-c"><span class="token comment">//代码1 </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0x11223344</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span> 
    <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//代码2 </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0x11223344</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>pc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>n<span class="token punctuation">;</span>
    <span class="token operator">*</span>pc <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>调试我们可以看到，代码1会将n的4个字节全部改为0，但是代码2只是将n的第⼀个字节改为0。</p> 
<p><strong>结论</strong>：</p> 
<p>**指针的类型决定了，对指针解引⽤的时候有多⼤的权限（⼀次能操作⼏个字节）。 **</p> 
<p><strong>⽐如： <code>char*</code> 的指针解引⽤就只能访问⼀个字节，⽽ <code>int*</code> 的指针的解引⽤就能访问四个字节。</strong></p> 
<h3><a id="_251"></a>指针±整数</h3> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>pc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>n<span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> pc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> pc<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> pi<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> pi<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/69/26/VCwiCUF1_o.png" alt="在这里插入图片描述"></p> 
<p>我们可以看出， <code>char*</code> 类型的指针变量+1跳过1个字节， <code>int*</code> 类型的指针变量+1跳过了4个字节。</p> 
<p>这就是指针变量的类型差异带来的变化。<strong>指针+1，其实跳过1个指针指向的元素。指针可以+1，那也可以-1。</strong></p> 
<p><strong>结论：</strong></p> 
<p><mark>指针的类型决定了指针向前或者向后⾛⼀步有多⼤（距离）</mark></p> 
<h3><a id="void_281"></a>void*指针</h3> 
<p>在指针类型中有⼀种特殊的类型是 <code>void *</code> 类型的，可以理解为⽆具体类型的指针（<strong>或者叫泛型指针</strong>），这种类型的指针可以⽤来接受任意类型地址。</p> 
<p><strong>但是也有局限性， <code>void*</code> 类型的指针不能直接进⾏指针的±整数和解引⽤的运算。</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span><span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
    <span class="token operator">*</span>pa <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>VS编译代码的结果：</p> 
<p><img src="https://images2.imgbox.com/e3/4a/aBA19G28_o.png" alt="在这里插入图片描述"></p> 
<p><strong>这⾥我们可以看到， <code>void*</code> 类型的指针可以接收不同类型的地址，但是⽆法直接进⾏指针运算。</strong></p> 
<p>那么 <code>void*</code> 类型的指针到底有什么⽤呢？</p> 
<p>⼀般 <code>void*</code> 类型的指针是使⽤在函数参数的部分，⽤来接收不同类型数据的地址，这样的设计可以 实现<strong>泛型编程</strong>的效果。使得⼀个函数来处理多种类型的数据，在之后博客中会讲解。</p> 
<hr> 
<h2><a id="const_312"></a>const修饰指针</h2> 
<p><code>const</code>修饰指针变量，可以放在<code>*</code>的左边，也可以放在<code>*</code>的右边，意义是不⼀样的。</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token operator">*</span> p<span class="token punctuation">;</span><span class="token comment">//没有const修饰？ </span>
<span class="token keyword">int</span> <span class="token keyword">const</span> <span class="token operator">*</span> p<span class="token punctuation">;</span><span class="token comment">//const 放在*的左边做修饰 </span>
<span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p<span class="token punctuation">;</span><span class="token comment">//const 放在*的右边做修饰 </span>
</code></pre> 
<p>我们看下⾯代码，来分析具体分析⼀下：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token comment">//代码1 - 测试⽆const修饰的情况 </span>
<span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span>
    <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">//ok?</span>
    p <span class="token operator">=</span> <span class="token operator">&amp;</span>m<span class="token punctuation">;</span> <span class="token comment">//ok?</span>
<span class="token punctuation">}</span>
<span class="token comment">//代码2 - 测试const放在*的左边情况 </span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span>
    <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">//ok?</span>
    p <span class="token operator">=</span> <span class="token operator">&amp;</span>m<span class="token punctuation">;</span> <span class="token comment">//ok?</span>
<span class="token punctuation">}</span>
<span class="token comment">//代码3 - 测试const放在*的右边情况 </span>
<span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span> <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span>
    <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//ok？</span>
    p <span class="token operator">=</span> <span class="token operator">&amp;</span>m<span class="token punctuation">;</span> <span class="token comment">//ok？</span>
<span class="token punctuation">}</span>
<span class="token comment">//代码4 - 测试*的左右两边都有const </span>
<span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token keyword">const</span> <span class="token operator">*</span> <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span>
    <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//ok?</span>
    p <span class="token operator">=</span> <span class="token operator">&amp;</span>m<span class="token punctuation">;</span> <span class="token comment">//ok?</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//测试⽆const修饰的情况 </span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//测试const放在*的左边情况 </span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//测试const放在*的右边情况 </span>
    <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//测试*的左右两边都有const </span>
    <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><mark>结论：const修饰指针变量的时候：</mark></p> 
<ul><li> <p><code>const</code>如果放在 <code>*</code> 的左边，<strong>修饰的是指针指向的内容，保证指针指向的内容不能通过指针来改变。 但是指针变量本⾝的内容可变。</strong></p> </li><li> <p><code>const</code>如果放在<code>*</code>的右边，<strong>修饰的是指针变量本⾝，保证了指针变量的内容不能修改，但是指针指向的内容，可以通过指针改变。</strong></p> </li></ul> 
<hr> 
<h2><a id="_384"></a>指针运算</h2> 
<p>指针的基本运算有三种，分别是：</p> 
<ul><li><strong>指针±整数</strong></li><li><strong>指针-指针</strong></li><li><strong>指针的关系运算</strong></li></ul> 
<h3><a id="_392"></a>指针±整数</h3> 
<p>因为数组在内存中是连续存放的，只要知道第⼀个元素的地址，顺藤摸⽠就能找到后⾯的所有元素。</p> 
<p><img src="https://images2.imgbox.com/13/51/N2Uw03kU_o.png" alt="20240810114230249.png&amp;pos_id=img-MRaIOI3y-1723294928017)"></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token comment">//指针+- 整数 </span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//p+i 这⾥就是指针+整数 </span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_416"></a>指针-指针</h3> 
<pre><code class="prism language-c"><span class="token comment">//指针-指针 </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">my_strlen</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> <span class="token operator">*</span>p <span class="token operator">=</span> s<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">*</span>p <span class="token operator">!=</span> <span class="token char">'\0'</span> <span class="token punctuation">)</span>
        p<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> p<span class="token operator">-</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token function">my_strlen</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>必须是同一块内存空间</strong></li></ul> 
<h3><a id="_437"></a>指针的关系运算</h3> 
<pre><code class="prism language-c"><span class="token comment">//指针的关系运算 </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">&lt;</span>arr<span class="token operator">+</span>sz<span class="token punctuation">)</span> <span class="token comment">//指针的⼤⼩⽐较 </span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><strong>指针是地址，说白了就是一组二进制数（为了方便显示的用的是十六进制），那是数就会有大小，即低地址高地址</strong></li></ul> 
<hr> 
<h2><a id="_460"></a>野指针</h2> 
<p><strong>概念：野指针就是指针指向的位置是不可知的（随机的、不正确的、没有明确限制的）</strong></p> 
<h3><a id="_464"></a>野指针成因</h3> 
<ol><li><strong>指针未初始化</strong></li></ol> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span><span class="token comment">//局部变量指针未初始化，默认为随机值 </span>
    <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li><strong>指针越界访问</strong></li></ol> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">11</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//当指针指向的范围超出数组arr的范围时，p就是野指针 </span>
        <span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li><strong>指针指向的空间释放</strong></li></ol> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span><span class="token operator">*</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span><span class="token comment">//函数栈帧使用完销毁</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//但p还能找到这块空间</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_513"></a>如何规避野指针</h3> 
<ol><li><strong>指针初始化</strong></li></ol> 
<p>如果明确知道指针指向哪⾥就直接赋值地址，如果不知道指针应该指向哪⾥，可以给指针赋值<code>NULL</code>.</p> 
<p><strong><code>NULL</code> 是C语⾔中定义的⼀个标识符常量，值是0，0也是地址，这个地址是⽆法使⽤的，读写该地址会报错</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span>p1 <span class="token operator">=</span> <span class="token operator">&amp;</span>num<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span>p2 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li><strong>注意指针越界</strong></li></ol> 
<p>⼀个程序向内存申请了哪些空间，通过指针也就只能访问哪些空间，不能超出范围访问，超出了就是越界访问。</p> 
<ol start="3"><li><strong>指针变量不再使⽤时，及时置NULL，指针使⽤之前检查有效性</strong></li></ol> 
<p><font color="blue">当指针变量指向⼀块区域的时候，我们可以通过指针访问该区域，后期不再使⽤这个指针访问空间的时候，我们可以把该指针置为NULL。因为约定俗成的⼀个规则就是：只要是NULL指针就不去访问， 同时使⽤指针之前可以判断指针是否为NULL。</font></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//此时p已经越界了，可以把p置为NULL </span>
    p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token comment">//下次使⽤的时候，判断p不为NULL的时候再使⽤ </span>
    <span class="token comment">//...</span>
    p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//重新让p获得地址 </span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token comment">//判断 </span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li><strong>避免返回局部变量的地址</strong></li></ol> 
<p>如造成野指针的第3个例⼦，不要返回局部变量的地址。</p> 
<hr> 
<h2><a id="assert_569"></a>assert断言</h2> 
<p><strong><code>assert.h</code> 头⽂件定义了宏 <code>assert()</code> ，⽤于在运⾏时确保程序符合指定条件，如果不符合，就报错终⽌运⾏。这个宏常常被称为“断⾔”</strong>。</p> 
<pre><code class="prism language-c"><span class="token function">assert</span><span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上⾯代码在程序运⾏到这⼀⾏语句时，验证变量 p 是否等于 <code>NULL</code> 。如果确实不等于 <code>NULL</code> ，程序 继续运⾏，否则就会终⽌运⾏，并且给出报错信息提⽰。</p> 
<p><font color="green"><code>assert()</code> 宏接受⼀个表达式作为参数。如果该表达式为真（返回值⾮零）， <code>assert()</code> 不会产⽣任何作⽤，程序继续运⾏。如果该表达式为假（返回值为零）， <code>assert()</code> 就会报错，在标准错误 流 <code>stderr</code> 中写⼊⼀条错误信息，显⽰没有通过的表达式，以及包含这个表达式的⽂件名和⾏号。 <code>assert()</code> 的使⽤对程序员是⾮常友好的</font></p> 
<p>使⽤ <code>assert()</code> 有⼏个好处：</p> 
<p><strong>它不仅能⾃动标识⽂件和出问题的⾏号</strong></p> 
<p><strong>还有⼀种⽆需更改代码就能开启或关闭 <code>assert()</code> 的机制。如果已经确认程序没有问题，不需要再做断⾔，就在 <code>#include</code> 语句的前⾯，定义⼀个宏 <code>NDEBUG</code> 。</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NDEBUG</span><span class="token comment">//关闭assert宏</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;assert.h&gt;</span></span>
</code></pre> 
<p>然后，重新编译程序，编译器就会禁⽤⽂件中所有的 <code>assert()</code> 语句。如果程序⼜出现问题，可以移除这条 <code>#define NDEBUG</code> 指令（或者把它注释掉），再次编译，这样就重新启⽤了 <code>assert()</code> 语 句。</p> 
<p><strong><code>assert()</code> 的缺点是，因为引⼊了额外的检查，增加了程序的运⾏时间。</strong></p> 
<p><font color="purple"> ⼀般我们可以在 <code>Debug</code> 中使⽤，在 <code>Release</code> 版本中选择禁⽤ <code>assert</code> 就⾏，在 VS 这样的集成开发环境中，在 <code>Release</code> 版本中，直接就是优化掉了。这样在<code>debug</code>版本写有利于程序员排查问题， 在 <code>Release</code> 版本不影响⽤⼾使⽤时程序的效率。</font>&gt;</p> 
<hr> 
<h2><a id="_600"></a>传值调用和传址调用</h2> 
<p>学习指针的⽬的是使⽤指针解决问题，那什么问题，⾮指针不可呢？</p> 
<p>例如：写⼀个函数，交换两个整型变量的值</p> 
<p>⼀番思考后，我们可能写出这样的代码：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">Swap1</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> tmp <span class="token operator">=</span> x<span class="token punctuation">;</span>
    x <span class="token operator">=</span> y<span class="token punctuation">;</span>
    y <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"交换前：a=%d b=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Swap1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"交换后：a=%d b=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如下：</p> 
<p><img src="https://images2.imgbox.com/12/b9/RuavFK9A_o.png" alt="在这里插入图片描述"></p> 
<p>我们发现其实没产⽣交换的效果，这是为什么呢？</p> 
<p><strong>在<a href="" rel="nofollow"></a>中我们就介绍到，形参是实参的一份临时拷贝，改变形参不影响实参，这种调用方式叫做传值调用，是不能实现我们上述要求的。</strong></p> 
<p><mark>所以我们需要使用指针进行传址调用</mark></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">Swap2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span>px<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span>py<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> tmp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tmp <span class="token operator">=</span> <span class="token operator">*</span>px<span class="token punctuation">;</span>
    <span class="token operator">*</span>px <span class="token operator">=</span> <span class="token operator">*</span>py<span class="token punctuation">;</span>
    <span class="token operator">*</span>py <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"交换前：a=%d b=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Swap2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"交换后：a=%d b=%d\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><mark>结论：</mark></p> 
<p><strong>传址调⽤，可以让被调函数和主调函数之间建⽴真正的联系，在被调函数内部可以修改主调函数中的变量；</strong></p> 
<p><strong>所以当被调函数中只是需要主调函数中的变量值来实现计算，就可以采⽤传值调⽤。</strong></p> 
<p><strong>如果函数内部要修改主调函数中的变量的值，就需要传址调⽤。</strong></p> 
<hr> 
<h2><a id="_670"></a>写在最后</h2> 
<p><font color="#002fa7">C语言指针是一个重头戏，关于指针的内容会有4-5篇博客，敬请期待喔💕</font></p> 
<p><font face="华文行楷" color="bitterweet" size="6">以上就是关于深入理解指针1的内容啦，各位大佬有什么问题欢迎在评论区指正，您的支持是我创作的最大动力！❤️</font></p> 
<p><img src="https://images2.imgbox.com/69/55/8Jo27zVp_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/01d7c87f5a501e0646f37fde91f8c26f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL --- 用户管理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0b44f3e1e0448905c5ec3b0d8d999f60/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人工智能时代，程序员如何保持核心竞争力？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>