<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot3整合SpringDoc实现在线接口文档 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/442083f707863a1b74cc36ab36e13c11/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SpringBoot3整合SpringDoc实现在线接口文档">
  <meta property="og:description" content="写在前面 在现目前项目开发中，一般都是前后端分离项目。前端小姐姐负责开发前端，苦逼的我们负责后端开发
事实是一个人全干，在这过程中编写接口文档就显得尤为重要了。然而作为一个程序员，最怕的莫过于自己写文档和别人不写文档
大家都不想写文档，那这活就交给今天的主角Swagger来实现了
一、专业名词介绍 ①OpenApi是什么？
解答：OpenApi是一个用于描述、定义和共享 RESTful API 文档的规范。最新规范是 OpenAPI 3.0
② Swagger是什么？
解答： Swagger 是一个用于设计和测试 RESTful APIs 的工具。
它提供了API 描述、请求和响应示例、API 测试和文档生成等丰富的功能。最新版本是Swagger3,支持OpenAPI3.0规范
③ SpringFox 是什么？
SpringFox 是 Spring 社区维护的一个项目（非官方），帮助使用者将 Swagger 2 集成到 Spring 中。
目前国内项目使用的都是它
github地址：https://github.com/springfox/springfox
④springDoc是什么？
解答： Spring-doc也是 Spring 社区维护的一个项目（非官方），帮助使用者将 Swagger 3 集成到 Spring 中
SpringDoc 支持 Swagger 页面 Oauth2 登录，相较于 SpringFox 而言，它的支撑时间更长，无疑是更好的选择。
但是在国内发展较慢，网上一找资料，出来的基本上是 Swagger2的内容。
地址：https://springdoc.org/
⑤ OpenAPI 、Spring-doc和 Swagger 之间的关系
解答：OpenAPI 定义了一种标准的格式来表示 API 文档，而 Swagger 是一个实现 OpenAPI 规范的工具">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-18T07:00:00+08:00">
    <meta property="article:modified_time" content="2024-06-18T07:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot3整合SpringDoc实现在线接口文档</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>写在前面</h4> 
<p>在现目前项目开发中，一般都是前后端分离项目。<s>前端小姐姐负责开发前端，苦逼的我们负责后端开发</s></p> 
<p>事实是一个人全干，在这过程中编写接口文档就显得尤为重要了。然而作为一个程序员，最怕的莫过于自己写文档和别人不写文档</p> 
<p>大家都不想写文档，那这活就交给今天的主角<code>Swagger</code>来实现了</p> 
<h4><a id="_8"></a>一、专业名词介绍</h4> 
<p>①<code>OpenApi</code>是什么？</p> 
<p><strong>解答：</strong><code>OpenApi</code>是一个用于描述、定义和共享 <code>RESTful API </code>文档的规范。最新规范是 <code>OpenAPI 3.0</code></p> 
<p>② <code>Swagger</code>是什么？</p> 
<p><strong>解答：</strong> <code>Swagger</code> 是一个用于设计和测试 <code>RESTful APIs</code> 的工具。</p> 
<p>它提供了<code>API</code> 描述、请求和响应示例、<code>API</code> 测试和文档生成等丰富的功能。最新版本是<code>Swagger3</code>,支持<code>OpenAPI3.0</code>规范</p> 
<p>③ <code>SpringFox </code> 是什么？</p> 
<p><code>SpringFox</code> 是 Spring 社区维护的一个项目（非官方），帮助使用者将 Swagger 2 集成到 Spring 中。</p> 
<p>目前国内项目使用的都是它</p> 
<p>github地址：https://github.com/springfox/springfox</p> 
<p>④<code>springDoc</code>是什么？</p> 
<p><strong>解答：</strong> <code>Spring-doc</code>也是 Spring 社区维护的一个项目（非官方），帮助使用者将 Swagger 3 集成到 Spring 中</p> 
<p><code>SpringDoc</code> 支持 <code>Swagger</code> 页面 <code>Oauth2</code> 登录，相较于 <code>SpringFox</code> 而言，它的支撑时间更长，<strong>无疑是更好的选择</strong>。</p> 
<p>但是在国内发展较慢，网上一找资料，出来的基本上是 <code>Swagger2</code>的内容。</p> 
<p>地址：https://springdoc.org/</p> 
<p>⑤ <code>OpenAPI</code> 、<code>Spring-doc</code>和 <code>Swagger</code> 之间的关系</p> 
<p><strong>解答：</strong><code>OpenAPI</code> 定义了一种标准的格式来表示 <code>API</code> 文档，而 <code>Swagger</code> 是一个实现<code> OpenAPI</code> 规范的工具</p> 
<h4><a id="Swagger_42"></a>二、Swagger详细简介</h4> 
<p>Swagger 江湖人称“丝袜哥”，是一个帮助程序员生成接口文档的利器。</p> 
<p>只需要简单配置，就可以生成带有漂亮<code>UI</code>界面的接口文档，而且编写的接口代码变了</p> 
<p>接口文档随之也跟着变，做到了真正的解放双手。</p> 
<p>官网https://swagger.io/</p> 
<p>Swagger 优点</p> 
<ul><li>号称世界上最流行的<code>API</code>框架</li><li><code>Restful Api </code>文档在线自动生成器</li><li>直接运行，支持在线测试<code>API</code></li><li>不仅仅支持Java，还支持多种语言（如：<code>PHP</code>、<code>Python</code>、<code>Node.js</code>等）</li></ul> 
<h4><a id="_61"></a>三、小试牛刀</h4> 
<p>说了这么多Swagger 的优点，接下来就小试牛刀，看看怎么将Swagger集成到<code>SpringBoot</code>中。</p> 
<h5><a id="31_65"></a>3.1、环境介绍</h5> 
<ul><li><code>JDK：17</code></li><li><code>SpringBoot：3.3.0</code></li><li><code>Springdoc</code></li></ul> 
<p><strong>注：</strong> 细心的小伙伴可能已经发现了，在<code>springboot3.0</code>之前我用的都是<code>Springfox</code>来集成<code>Swagger</code>管理我们的<code>API</code>接口文档,</p> 
<p>但是<code>Springfox</code>已经停止更新了，我们使用的是<code>SpringBoot3 +jdk17</code> 的环境后，<code>Spring</code>官网推荐了<code>Springdoc</code> 来整合<code>swagger</code></p> 
<h5><a id="32_springbootweb_75"></a>3.2 新建一个springboot-web项目</h5> 
<h5><a id="33__77"></a>3.3 添加依赖</h5> 
<p>由于篇幅原因，其他web项目相关依赖这里就不一一贴出来了。</p> 
<p>第一个依赖是必须的，而且版本必须大于2.0.0</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-starter-webmvc-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-starter-webmvc-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>注：</strong></p> 
<p>我们这里使用的是<code>jdk17+springboot3.3.0</code> 环境，<strong>原来<code>swagger</code>的<code>V2</code>和<code>V3</code>都不能用了</strong>，小伙伴们一定更要注意这儿</p> 
<p><img src="https://images2.imgbox.com/56/90/VQ9J9TQs_o.png" alt="不能引入的依赖"></p> 
<p>如果引入上面错误的依赖，项目启动会报下面错误，这时候我们引入上面正确的依赖重新启动项目即可</p> 
<p><img src="https://images2.imgbox.com/d3/28/BAC6VIAs_o.png" alt="报错信息"></p> 
<h5><a id="34_HelloController_106"></a>3.4 编写<code>HelloController</code></h5> 
<p>新建一个<code>controller</code>包—&gt;建立一个<code>HelloController</code>类</p> 
<p><img src="https://images2.imgbox.com/4b/2c/iC3HBR5R_o.png" alt="新建Hellocontroller"></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们在浏览器中输入“http://localhost:8080/hello” 后回车，出现如下界面，说明我们的hello开发成功了</p> 
<p><img src="https://images2.imgbox.com/bd/6f/HCfmmr9G_o.png" alt="hello接口正常访问"></p> 
<h5><a id="35_swagger_129"></a>3.5 访问swagger接口页面</h5> 
<p><strong>注</strong>：我们这里采用的是<code>openapi</code> ,所以就不用像<code>swagger</code>的<code>V2</code>和<code>v3</code>那样添加配置类了</p> 
<p>浏览器直接输入：http://localhost:8080/swagger-ui/index.html 回车即可看到下面界面</p> 
<p><img src="https://images2.imgbox.com/58/f4/yY9PC7Fw_o.png" alt="接口信息"></p> 
<p>整合swagger是不是很简单呢</p> 
<h4><a id="_141"></a>四、修改接口</h4> 
<p><img src="https://images2.imgbox.com/60/72/v7Z7Lh5D_o.png" alt="多种请求方式"></p> 
<p>从上面截图中我们看到，我们在<code>HelloController</code> 中只定义了一个接口，但是前端<code>UI</code>界面中出来个7种请求方式（<code>GET</code>、<code>PUT</code>、<code>POST</code>、<code>DELETE</code>、<code>OPTIONS</code>、<code>HEAD</code>、<code>PATCH</code>）的接口，这是为什么呢？</p> 
<p><strong>解答：</strong><code>@RequestMapping("/hello")</code> 我们接口中只是指定了访问地址，并没有指定请求方式</p> 
<p>我们将注解修改成<code>@RequestMapping(path = "/hello",method = RequestMethod.GET)</code></p> 
<p>或者<code>@GetMapping("/hello")</code> 然后重启服务，我们看到界面上就只有一种请求方式的接口了</p> 
<p><img src="https://images2.imgbox.com/fb/40/PWBPF8sg_o.png" alt="get请求方式"></p> 
<h4><a id="_157"></a>五、接口文档常用配置</h4> 
<h5><a id="51__159"></a>5.1 配置访问路径</h5> 
<p>在<code>application.yml</code>中可以自定义<code>api-docs</code>和<code>swagger-ui</code>的访问路径。当然了，如果没配置，默认就是下面路径</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>
  <span class="token key atrule">api-docs</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /v3/api<span class="token punctuation">-</span>docs
  <span class="token key atrule">swagger-ui</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /swagger<span class="token punctuation">-</span>ui.html
</code></pre> 
<h5><a id="52__171"></a>5.2 配置接口文档基本信息</h5> 
<p>① 配置接口基本信息</p> 
<p>新建一个<code>config</code>包—&gt;并在包下建立一个<code>SpringDocConfig</code>配置类</p> 
<p><img src="https://images2.imgbox.com/10/99/VqWx26br_o.png" alt="新建配置类"></p> 
<p>② 配置接口文档基础信息</p> 
<p>我们在配置类中添加如下代码，</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringDocConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">openAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置接口文档基本信息</span>
                <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getApiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Info</span> <span class="token function">getApiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                 <span class="token comment">// 配置文档标题</span>
                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"SpringBoot3集成Swagger3"</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置文档描述</span>
                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"SpringBoot3集成Swagger3示例文档"</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置作者信息</span>
                <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"程序员小凡"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://www.xiezhrspace.cn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token string">"1666397814@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置License许可证信息</span>
                <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://www.xiezhrspace.cn"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">// 概述信息</span>
                <span class="token punctuation">.</span><span class="token function">summary</span><span class="token punctuation">(</span><span class="token string">"SpringBoot3集成Swagger3示例文档aaa"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">termsOfService</span><span class="token punctuation">(</span><span class="token string">"https://www.xiezhrspace.cn"</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置版本号</span>
                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"2.0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>前端页面访问接口文档页面后显示如下</p> 
<p><img src="https://images2.imgbox.com/02/e3/6rYUN2AT_o.png" alt="接口基本信息"></p> 
<p>② 配置接口servers信息</p> 
<p>接口可能存在多环境，如开发环境、测试环境、生产环境等</p> 
<p>我们可以通过<code>@OpenAPIDefinition</code> 配合<code>servers</code> 属性来配置不同环境，具体配置示例如下</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@OpenAPIDefinition</span><span class="token punctuation">(</span>
        servers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token annotation punctuation">@Server</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"开发环境服务器"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Server</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"测试环境服务器"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"https://test.xiezhr.com"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringDocConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>配置完成后，浏览器访问显示如下</p> 
<p><img src="https://images2.imgbox.com/01/54/u8OA1YJw_o.png" alt="配置servers信息"></p> 
<p>③ 配置外部文档信息</p> 
<p>有时候我们需要在在线接口文档中可以显示跳转到API的一些外部文档（比如 项目部署文档等）</p> 
<p>这个时候我们可以通过<code>@OpenAPIDefinition</code> 配合<code> externalDocs</code> 属性来配置外部文档</p> 
<p>具体配置如下</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@OpenAPIDefinition</span><span class="token punctuation">(</span>

    externalDocs <span class="token operator">=</span> <span class="token annotation punctuation">@ExternalDocumentation</span><span class="token punctuation">(</span>
        description <span class="token operator">=</span> <span class="token string">"项目编译部署说明"</span><span class="token punctuation">,</span>
        url <span class="token operator">=</span> <span class="token string">"http://localhost:8080/deplay/readme.md"</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringDocConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//......</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>配置完后重启服务，浏览器访问接口文档，显示如下</p> 
<p><img src="https://images2.imgbox.com/83/30/7O0uCqTa_o.png" alt="外部API文档"></p> 
<p><code>SpringDocConfig</code> 类完整配置代码如下</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@OpenAPIDefinition</span><span class="token punctuation">(</span>

        servers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token annotation punctuation">@Server</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"开发环境服务器"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Server</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"测试环境服务器"</span><span class="token punctuation">,</span> url <span class="token operator">=</span> <span class="token string">"https://test.xiezhr.com"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        externalDocs <span class="token operator">=</span> <span class="token annotation punctuation">@ExternalDocumentation</span><span class="token punctuation">(</span>
                description <span class="token operator">=</span> <span class="token string">"项目编译部署说明"</span><span class="token punctuation">,</span>
                url <span class="token operator">=</span> <span class="token string">"http://localhost:8080/deplay/readme.md"</span>
        <span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringDocConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">openAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置接口文档基本信息</span>
                <span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getApiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Info</span> <span class="token function">getApiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                 <span class="token comment">// 配置文档标题</span>
                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"SpringBoot3集成Swagger3"</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置文档描述</span>
                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"SpringBoot3集成Swagger3示例文档"</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置作者信息</span>
                <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"程序员小凡"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://www.xiezhrspace.cn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token string">"1666397814@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">// 配置License许可证信息</span>
                <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Apache 2.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://www.xiezhrspace.cn"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//</span>
                <span class="token punctuation">.</span><span class="token function">summary</span><span class="token punctuation">(</span><span class="token string">"SpringBoot3集成Swagger3示例文档aaa"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">termsOfService</span><span class="token punctuation">(</span><span class="token string">"https://www.xiezhrspace.cn"</span><span class="token punctuation">)</span>

                <span class="token comment">// 配置版本号</span>
                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"2.0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  

<span class="token punctuation">}</span>
</code></pre> 
<p>配置完上面信息后，重启服务，浏览器访问：http://localhost:8080/v3/swagger-ui/index.html</p> 
<p><img src="https://images2.imgbox.com/5a/c3/sVBcDq23_o.png" alt="接口文档基本信息"></p> 
<h5><a id="53___329"></a>5.3 配置扫描接口</h5> 
<p><strong>应用场景：</strong></p> 
<p>有时候我们为了业务需要，我们建立了多个包下的接口，如admin包下的，common包下的接口，</p> 
<p>为了安全起见，我们只允许接口文档中访问comm包下面的接口。</p> 
<p>在不加任何配置的情况下，所以接口都会默认显示，具体如下</p> 
<p><img src="https://images2.imgbox.com/26/0f/ik7tChxC_o.png" alt="显示所有接口"></p> 
<p><strong>配置扫描接口包：</strong></p> 
<p>在<code>application.yml</code>中可以自定义要扫描的接口包</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>
  <span class="token key atrule">packages-to-scan</span><span class="token punctuation">:</span> com.xiezhr.swaggerdemo.common.controller
</code></pre> 
<p>配置好之后重启服务，我们发现前台UI只显示了common包下面的接口了</p> 
<p><img src="https://images2.imgbox.com/a6/4d/my3mwqNk_o.png" alt="只显示common包下面的接口"></p> 
<h5><a id="54__356"></a>5.4 配置接口文档开关</h5> 
<p><strong>使用场景：</strong></p> 
<p>为了接口安全，我们一般需要在测试（test）环境或者开发(dev)环境中开启接口文档，而在生产（prod）环境中 关闭接口文档</p> 
<p>这个应该怎么做呢？</p> 
<p>这里涉及到<code>SpringBoot</code>多环境配置，忘记的小伙伴可以翻一翻之前的文章。传送门：</p> 
<p>我们创建三个配置文件，分别为</p> 
<ul><li> <p>① <code>application-dev.yml</code> 开发环境</p> </li><li> <p>② <code>application-test.yml</code> 测试环境</p> </li><li> <p>③ <code>application-prod.yml</code> 生产环境</p> </li></ul> 
<p>只需在①和②配置文件中添加如下配置</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>
  <span class="token key atrule">api-docs</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> 
<p>而③配置文件中添加</p> 
<pre><code class="prism language-yml"><span class="token key atrule">springdoc</span><span class="token punctuation">:</span>
  <span class="token key atrule">api-docs</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre> 
<p>通过上面配置后，我们在开发和测试环境下：就能正常访问http://localhost:8080/v3/swagger-ui/index.html#/</p> 
<p>而在生产环境下就无法访问，报如下错误</p> 
<p><img src="https://images2.imgbox.com/fe/84/rOP8pxcv_o.png" alt="生产环境"></p> 
<h5><a id="55_API_395"></a>5.5 配置API分组</h5> 
<p>为了演示API分组，我们在<code>controller</code>包下面再建立<code>admin</code>包和<code>common</code>包，包下分别添加<code>AdminController</code>和<code>CommonController</code>接口类,结构及代码如下</p> 
<p><img src="https://images2.imgbox.com/c8/6a/wAFr0cCo_o.png" alt="包结构"></p> 
<p>①<code> AdminController</code>类</p> 
<pre><code class="prism language-java"><span class="token comment">// AdminController</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/admin"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span>  <span class="token function">admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"admin"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>② <code>CommonController</code> 类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/common"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommonController</span> <span class="token punctuation">{<!-- --></span>

   <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在默认情况（没有分组）的情况下，所有包下接口都显示在一一个默认组下面，如/common/* 和/admin/* 访问路径下的接口都显示在一起，如下图所示</p> 
<p><img src="https://images2.imgbox.com/93/33/PYh9SkBc_o.png" alt="默认分组"></p> 
<p>这时，如果/common/* 下的接口比较多，/admin/* 下的接口也比较多，界面上显示就很混乱</p> 
<p>解决办法就是<strong>添加分组信息</strong>，我们在<code>SpringDocConfig</code> 配置类中添加如下代码,这样就把接口分为了"common通用模块组" 和"admin模块组" 两个组</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"commonGroupApi"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">webGroupApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"common通用模块组"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">"/common/**"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"adminGroupApi"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">GroupedOpenApi</span> <span class="token function">adminGroupApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token class-name">GroupedOpenApi</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token string">"admin模块组"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pathsToMatch</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>重启服务，再访问http://localhost:8080/v3/swagger-ui/index.html 如下</p> 
<p><img src="https://images2.imgbox.com/e0/60/PlBxwOZc_o.png" alt="API分组"></p> 
<h5><a id="56__465"></a>5.6 配置接口信息</h5> 
<p>① <strong><code>@Tag</code> 注解使用</strong></p> 
<p>对一个 operation 进行说明或定义的标签，用在类或方法上，也可以用在 <code>@OpenAPIDefinition</code> 中定义标签。</p> 
<p>常用参数：</p> 
<ul><li><code>name</code>: 名称</li><li><code>description</code>: 接口描述信息</li></ul> 
<p>示例：</p> 
<p>用在类上</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/common"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"公共接口"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"公共接口"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommonController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//......</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>② <strong><code>@Operation</code> 注解使用</strong></p> 
<p>用于说明方法用途，用在方法上。</p> 
<p>参数：</p> 
<ul><li><code>summary</code>：方法概要，方法的一个简单介绍，建议 120 个字符内</li><li><code>description</code>：方法描述，一般是很长的内容</li><li><code>hidden</code>：是否隐藏</li></ul> 
<p>示例：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"hello接口"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"hello接口描述"</span> <span class="token punctuation">,</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>③ <strong><code>@Parameter</code>注解使用</strong></p> 
<p>用于说明方法参数，用在方法参数上。</p> 
<p>参数：</p> 
<ul><li><code>name</code>：指定的参数名</li><li><code>in</code>：参数位置，可选 <code>query</code>、<code>header</code>、<code>path</code> 或 <code>cookie</code>，默认为空，表示忽略</li><li><code>description</code>：参数描述</li><li><code>required</code>：是否必填，默认为 <code>false</code></li></ul> 
<p>示例：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span> <span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span>in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">PATH</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">"用户ID"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>前端页面查看</p> 
<p><img src="https://images2.imgbox.com/bb/23/AL3HqIoG_o.png" alt="@Paramter注解配置信息"></p> 
<p>④ <strong><code>@ApiResponse</code> 注解使用</strong></p> 
<p>用于说明一个响应信息，用在 <code>@ApiResponses</code> 中。</p> 
<p>参数：</p> 
<ul><li><code>responseCode</code>：HTTP 响应码</li><li><code>description</code>：描述</li></ul> 
<p>示例：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"获取用户信息"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"根据用户ID获取用户信息"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiResponses</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"请求成功"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"404"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"用户不存在"</span><span class="token punctuation">)</span>            
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span> <span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span>in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">PATH</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">"用户ID"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/77/e2/3UcRhqNJ_o.png" alt="@ApiResponse注解配置信息"></p> 
<p>完整配置</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/common"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"公共接口"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"公共接口"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommonController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>
   <span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"hello接口"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"hello接口描述"</span> <span class="token punctuation">,</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hi"</span><span class="token punctuation">)</span>

    <span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"hi接口"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"hi接口描述"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token class-name">Hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hi 程序员小凡"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">"获取用户信息"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"根据用户ID获取用户信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiResponses</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"请求成功"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">"404"</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">"用户不存在"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span> <span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span>in <span class="token operator">=</span> <span class="token class-name">ParameterIn</span><span class="token punctuation">.</span><span class="token constant">PATH</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">"用户ID"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>重启后，浏览器访问http://localhost:8080/v3/swagger-ui/index.html 如下</p> 
<p><img src="https://images2.imgbox.com/1e/5f/9rLdAiWC_o.png" alt="image-20240615213336423"></p> 
<h5><a id="57__607"></a>5.7 配置实体信息</h5> 
<p>① 新建一个<code>User</code>实体类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>② <strong><code>@Schema</code>标签使用</strong></p> 
<p>用于描述数据对象信息或数据对象属性，比如各种<code>POJO</code>类及属性，用在类或类属性上。</p> 
<p>参数：</p> 
<ul><li><code>name</code>：属性名称</li><li><code>description</code>：属性描述</li><li><code>required</code>：是否必须</li><li><code>minLength</code>：字符最小长度</li><li><code>maxLength</code>：字符最大长度</li></ul> 
<p>③使用示例：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"用户实体类"</span><span class="token punctuation">,</span>name <span class="token operator">=</span> <span class="token string">"User"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"用户名"</span><span class="token punctuation">,</span>name <span class="token operator">=</span>  <span class="token string">"name"</span><span class="token punctuation">,</span>minLength <span class="token operator">=</span>  <span class="token number">6</span><span class="token punctuation">,</span>maxLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"年龄"</span><span class="token punctuation">,</span>name <span class="token operator">=</span>  <span class="token string">"age"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>minimum <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">,</span>maximum <span class="token operator">=</span> <span class="token string">"100"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"邮箱"</span><span class="token punctuation">,</span>name <span class="token operator">=</span>  <span class="token string">"email"</span><span class="token punctuation">,</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"地址"</span><span class="token punctuation">,</span>name <span class="token operator">=</span>  <span class="token string">"address"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>④ 浏览器访问：http://localhost:8080/v3/swagger-ui/index.html ，我们看到配置的实体信息显示出来了</p> 
<p><img src="https://images2.imgbox.com/a9/b1/ypNnOOWU_o.png" alt="实体信息"></p> 
<h4><a id="_656"></a>六、接口调试</h4> 
<p>通过上面各种配置之后，我们的在线接口文档基本上生成得差不多了。接下来我们就来说说怎么使用在线接口文档进行接口测试</p> 
<p><strong>① 测试说明</strong></p> 
<p>在之前小节中我们开发了要给根据用户ID 获取用户信息的接口<code>getUser</code>。我们现在要做的就是在前端UI界面中找到这个接口，</p> 
<p>在开发环境下输入用户ID值，然后获取用户信息。</p> 
<p><strong>② 选择组信息</strong></p> 
<p>【获取用户信息】这个接口在，common通用模块组下面，所以我们第一步就要前端UI界面右上角选择这个组</p> 
<p><img src="https://images2.imgbox.com/72/14/I9koJweF_o.png" alt="选择common通用模块组"></p> 
<p><strong>② 选择开发环境</strong></p> 
<p>在<code>Servers</code> 下选择配置好的开发环境</p> 
<p><img src="https://images2.imgbox.com/cd/5f/XTUNq6YP_o.png" alt="选择开发环境"></p> 
<p>③ <strong>找到我们要测试的接口</strong></p> 
<p><img src="https://images2.imgbox.com/7d/50/y6FbLt6p_o.png" alt="找到目标接口"></p> 
<p>④ 测试接口，获取响应数据</p> 
<p>接口右边下三角箭头展开接口------&gt;点击<code>Try it out</code></p> 
<p><img src="https://images2.imgbox.com/b0/6f/cIXLQMdb_o.png" alt="点击Try it out"></p> 
<p>输入参数：用户ID------&gt; 点击【Execute】-----&gt;在Response body 中查看接口响应信息</p> 
<p><img src="https://images2.imgbox.com/84/ba/tz5QFwEj_o.png" alt="根据用户id获取到响应信息"></p> 
<h4><a id="_694"></a>七、添加请求头</h4> 
<p>很多时候我们接口都需要认证之后才能访问，这时候我们就需要接口调用的时候携带着<code>Token</code>信息</p> 
<p>示例：</p> 
<p>我们通过<code>@RequestHeader </code> 注解 获取请求头中<code>token</code>信息</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span>  <span class="token function">admin</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span> <span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"token&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;"</span><span class="token operator">+</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//token 验证</span>
    <span class="token comment">//.....各种业务逻辑</span>
    <span class="token keyword">return</span> <span class="token string">"admin"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/63/ce/6FPUmIQE_o.png" alt="添加请求头信息"></p> 
<p>到此，本期内容就结束了，<em>★,°</em>:.☆(￣▽￣)/$:<em>.°★</em> 。 希望对您有所帮助</p> 
<p>我们下期再见 ヾ(•ω•`)o (●’◡’●)</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e2e6079b665a380d9bb7c6c693022e41/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI学习指南机器学习篇-KNN算法超参数选择与调优</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/431225d199a0358da0aca3f3139d9fb6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python GUI开发: tkinter选项卡，移动滑块，颜色选择框，文本对话框，对话输入框，通用消息框模块用法详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>