<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenDevin：人人可用的开源AI软件工程师 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/21bf5f4a7972aa14940a2a37d7e293f2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="OpenDevin：人人可用的开源AI软件工程师">
  <meta property="og:description" content="OpenDevin，这是一个开源项目，旨在复制 Devin，Devin 是一位自主的 AI 软件工程师，能够执行复杂的工程任务并与用户在软件开发项目上积极协作。该项目希望通过开源社区的力量复制、增强和创新 Devin。
官网：GitHub - skywalk163/OpenDevin: 🐚 OpenDevin: Code Less, Make More
镜像：skywalk163/OpenDevin: 开源Devin - OpenDevin - OpenI - 启智AI开源社区提供普惠算力！
安装 需要python3.11以上版本。是目前见过的对python版本要求最高的软件。Ubuntu下安装python3.11
sudo apt install python3.11 sudo apt install python3.11-venv python3.11 -m venv py311 source py311/bin/activate 不要忘记激活py311环境。
FreeBSD下安装 git clone https://openi.pcl.ac.cn/skywalk163/OpenDevin/ cd OpenDevin # 可以先尝试安装包poetry # pkg install devel/py-poetry 安装需要的库 pip install poetry make build 可惜还是需要docker，在FreeBSD下运行不下去了。若是有朋友有FreeBSD下运行docker的经验，欢迎传授经验。
在Ubunut下安装： git clone https://openi.pcl.ac.cn/skywalk163/OpenDevin/ cd OpenDevin # 安装需要的库 pip install poetry # 安装build时需要的库 pip install pydantic-core==2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-11T13:30:32+08:00">
    <meta property="article:modified_time" content="2024-04-11T13:30:32+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenDevin：人人可用的开源AI软件工程师</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>OpenDevin，这是一个开源项目，旨在复制 Devin，Devin 是一位自主的 AI 软件工程师，能够执行复杂的工程任务并与用户在软件开发项目上积极协作。该项目希望通过开源社区的力量复制、增强和创新 Devin。</p> 
<p>官网：<a href="https://github.com/skywalk163/OpenDevin" title="GitHub - skywalk163/OpenDevin: 🐚 OpenDevin: Code Less, Make More">GitHub - skywalk163/OpenDevin: 🐚 OpenDevin: Code Less, Make More</a></p> 
<p>镜像：<a href="https://openi.pcl.ac.cn/skywalk163/OpenDevin" rel="nofollow" title="skywalk163/OpenDevin: 开源Devin -  OpenDevin - OpenI - 启智AI开源社区提供普惠算力！">skywalk163/OpenDevin: 开源Devin - OpenDevin - OpenI - 启智AI开源社区提供普惠算力！</a></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/b4/fb/CFFZDoUZ_o.png"></p> 
<h2>安装</h2> 
<p>需要python3.11以上版本。是目前见过的对python版本要求最高的软件。Ubuntu下安装python3.11</p> 
<pre><code>sudo apt install python3.11
sudo apt install python3.11-venv
python3.11 -m venv py311
source py311/bin/activate</code></pre> 
<p> 不要忘记激活py311环境。</p> 
<p></p> 
<h3>FreeBSD下安装</h3> 
<pre><code>git clone https://openi.pcl.ac.cn/skywalk163/OpenDevin/
cd OpenDevin

# 可以先尝试安装包poetry
# pkg install devel/py-poetry

安装需要的库
pip install poetry

make build </code></pre> 
<p>可惜还是需要docker，在FreeBSD下运行不下去了。若是有朋友有FreeBSD下运行docker的经验，欢迎传授经验。</p> 
<h3>在Ubunut下安装：</h3> 
<pre><code>git clone https://openi.pcl.ac.cn/skywalk163/OpenDevin/
cd OpenDevin

# 安装需要的库
pip install poetry

# 安装build时需要的库
pip install pydantic-core==2.16.3
pip install numpy==1.26.4 pillow==10.3.0 pandas==2.2.1 nltk==3.8.1
pip install sqlalchemy==2.0.29
pip install llama-index-core==0.10.27 mdurl==0.1.2 nvidia-nvjitlink-cu12==12.4.127 opentelemetry-api==1.24.0 
pip install protobuf==4.25.3 pyasn1==0.6.0  pyasn1==0.6.0 pyjwt==2.8.0 setuptools==69.2.0

pip install torch==2.2.2 kubernetes==29.0.0

make build </code></pre> 
<p>若make build报错docker权限问题，执行这句：</p> 
<pre><code>sudo chmod 666 /var/run/docker.sock</code></pre> 
<p>后面make build的时候还要下载很多python库， 空间小了还装不上呢。需要的python库如下，前面安装部分已经把一些库装好了，建议尽量pip安装，会比make build时安装快很多：</p> 
<pre><code>    [tool.poetry]
    name = "opendevin"
    version = "0.1.0"
    description = "OpenDevin: Code Less, Make More"
    authors = ["OpenDevin"]
    license = "MIT"
    readme = "README.md"
    repository = "https://github.com/OpenDevin/OpenDevin"

    [tool.poetry.dependencies]
    python = "^3.11"
    datasets = "*"
    pandas = "*"
    litellm = "*"
    google-generativeai = "*" # To use litellm with Gemini Pro API
    termcolor = "*"
    seaborn = "*"
    docker = "*"
    fastapi = "*"
    toml = "*"
    uvicorn = "*"
    types-toml = "*"
    numpy = "*"
    json-repair = "*"
    playwright = "*"
    pexpect = "*"

    [tool.poetry.group.llama-index.dependencies]
    llama-index = "*"
    llama-index-vector-stores-chroma = "*"
    chromadb = "*"
    llama-index-embeddings-huggingface = "*"
    llama-index-embeddings-azure-openai = "*"
    llama-index-embeddings-ollama = "*"

    [tool.poetry.group.dev.dependencies]
    ruff = "*"
    mypy = "*"
    pre-commit = "*"

    [tool.poetry.group.test.dependencies]
    pytest = "*"

    [tool.poetry.group.evaluation.dependencies]
    torch = "*"

    [build-system]
    requires = ["poetry-core"]
    build-backend = "poetry.core.masonry.api"</code></pre> 
<h4>使用了docker加速</h4> 
<p>加速效果好像不行，好像加速ixaoguo也跟时间段有关系。</p> 
<pre><code>{
  "registry-mirrors": ["https://docker.mirrors.sjtug.sjtu.edu.cn", "https://mirror.baidubce.com", "https://docker.mirrors.ustc.edu.cn", "https://dockerproxy.com", "https://docker.m.daocloud.io","https://registry.docker-cn.com", "https://hub-mirror.c.163.com", "https://mirror.baidubce.com",
        "https://docker.nju.edu.cn",
        "https://docker.mirrors.sjtug.sjtu.edu.cn"]
}
</code></pre> 
<h4>更新node.js版本</h4> 
<p>若安装过程中提示node.js版本低，可以用如下命令升级：</p> 
<pre><code>sudo npm install n -g

sudo n 18.17.1</code></pre> 
<p>安装完那，下面就可以开始配置了。</p> 
<h2>配置OpenDevin</h2> 
<h3>使用 Makefile：轻松的方法</h3> 
<p><br>  只需一个命令，您就可以为您的 OpenDevin 体验进行流畅的 LM 设置。只需运行：</p> 
<p>    make setup-config</p> 
<p><br>     此命令将提示您输入 LLM API 密钥和型号名称，确保 OpenDevin 适合您的特定需求。</p> 
<p>配置例子如下：</p> 
<p>make setup-config<br> \033[0;33mSetting up config.toml...\033[0m<br> make[1]: Entering directory '/home/skywalk/github/OpenDevin'<br> Enter your LLM Model name (see https://docs.litellm.ai/docs/providers for full list) [default: gpt-3.5-turbo-1106]:<br> Enter your LLM API key: sss<br> Enter your LLM Base URL [mostly used for local LLMs, leave blank if not needed - example: http://localhost:5001/v1/]: http://127.0.0.1:1337/v1/<br> Enter your LLM Embedding Model\nChoices are openai, azureopenai, llama2 or leave blank to default to 'BAAI/bge-small-en-v1.5' via huggingface<br> &gt; openai<br> Enter your workspace directory [default: ./workspace]: /media/skywalk/EXTERNAL_USB/work<br> make[1]: Leaving directory '/home/skywalk/github/OpenDevin'<br> \033[0;32mConfig.toml setup completed.\033[0m<br> (py311) skywalk@ub:~/github/OpenDevin$</p> 
<p></p> 
<p>最终LLM模型选择了自建chatgpt，api地址为：<a href="http://localhost:1337/v1/" rel="nofollow" title="http://localhost:1337/v1/">http://localhost:1337/v1/</a> 自建chatgpt api服务可以参考：<a href="https://blog.csdn.net/skywalk8163/article/details/134456740" title="gpt4free带来了更好的chatgpt体验！-CSDN博客">gpt4free带来了更好的chatgpt体验！-CSDN博客</a></p> 
<p>最终embedding模型选了：BAAI/bge-small-en-v1.5 。之所以选择这个模型是因为自己没有openai的账户，因此无法使用openai的embedding模型，而BAAI/bge-small-en-v1.5模型是OpenDevin默认选项，而且bge模型确实是非常出色的模型。</p> 
<p>因为没有用openai，所以openai的key就随便写成csdn，OPenai URL写成：<a href="http://localhost:1337/v1/models/" rel="nofollow" title="http://localhost:1337/v1/models/">http://localhost:1337/v1/models/</a></p> 
<p>最终配置过程如下：</p> 
<pre><code>make setup-config
\033[0;33mSetting up config.toml...\033[0m
make[1]: Entering directory '/home/skywalk/github/OpenDevin'
Enter your LLM Model name (see https://docs.litellm.ai/docs/providers for full list) [default: gpt-3.5-turbo-1106]: gpt-3.5-turb
Enter your LLM API key: csdn
Enter your LLM Base URL [mostly used for local LLMs, leave blank if not needed - example: http://localhost:5001/v1/]: http://localhost:1337/v1/models/
Enter your LLM Embedding Model\nChoices are openai, azureopenai, llama2 or leave blank to default to 'BAAI/bge-small-en-v1.5' via huggingface
&gt; 
Enter your workspace directory [default: ./workspace]: /media/skywalk/EXTERNAL_USB/work
make[1]: Leaving directory '/home/skywalk/github/OpenDevin'
</code></pre> 
<p>这样就配置好了。也可以使用手动配置。ps上面模型写错了，gpt-3.5-turbo写成gpt-3.5-turb，导致调试了很长时间。</p> 
<h3><br>  使用手动配置：</h3> 
<p><br>     如果您觉得特别喜欢冒险，可以手动更新位于项目根目录中的 config.toml 文件。在这里，您将找到 llm_api_key 和 llm_model_name 字段，您可以在其中设置您选择的 LM。</p> 
<p>文件内容如下：</p> 
<pre><code>cat config.toml
LLM_MODEL="gpt-3.5-turbo"
LLM_API_KEY="csdn"
LLM_BASE_URL="http://localhost:1337/v1/models/"
LLM_EMBEDDING_MODEL=""
WORKSPACE_DIR="/media/skywalk/EXTERNAL_USB/work"
</code></pre> 
<h2>运行应用程序</h2> 
<p>运行应用程序：设置完成后，启动 OpenDevin 就像运行单个命令一样简单。此命令无缝启动后端和前端服务器，使您可以轻松地与 OpenDevin 进行交互。</p> 
<p>    make run</p> 
<blockquote> 
 <h3>也可以单独启动服务：</h3> 
 <p></p> 
 <h4>    启动后端服务器：</h4> 
 <p>如果您愿意，可以独立启动后端服务器，以专注于与后端相关的任务或配置。</p> 
 <p>    make start-backend</p> 
 <h4>   <br>     启动前端服务器：</h4> 
 <p>同样，您可以自行启动前端服务器，以处理与前端相关的组件或接口增强功能。</p> 
 <p>    make start-frontend</p> 
</blockquote> 
<p>启动后显示：</p> 
<p>\033[0;34mStarting frontend with npm...\033[0m</p> 
<p>&gt; opendevin-frontend@0.1.0 start<br> &gt; vite --port 3001</p> 
<p><br>   VITE v5.2.8  ready in 2447 ms</p> 
<p>  ➜  Local:   http://localhost:3001/<br>   ➜  Network: use --host to expose<br>   ➜  press h + enter to show help</p> 
<p>embedding这里有问题，因为huggingface不好连，需要单独处理，处理方法见调试部分。</p> 
<h2>调试</h2> 
<h3>FreeBSD下make build的时候报错</h3> 
<p>Cannot connect to the Docker daemon at unix:///var/run/docker.sock</p> 
<p>freebsd下的docker还没调通，先停着。</p> 
<p></p> 
<h3>make build报错permission denied while trying to connect to the Docker daemon socket</h3> 
<p>\033[0;33mPulling Docker image...\033[0m<br> Using default tag: latest<br> permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Post "http://%2Fvar%2Frun%2Fdocker.sock/v1.24/images/create?fromImage=ghcr.io%2Fopendevin%2Fsandbox&amp;tag=latest": dial unix /var/run/docker.sock: connect: permission denied<br> make[1]: *** [Makefile:78: pull-docker-image] Error 1<br> make: *** [Makefile:24: build] Error 2</p> 
<p>给/var/run/docker.sock加上权限即可：</p> 
<p>sudo chmod 666 /var/run/docker.sock</p> 
<h3>报错Node.js Required version: ^18.17.1.</h3> 
<p>\033[0;33mDetect Node.js version...\033[0m<br> Current Node.js version is 12.22.9, but corepack is unsupported. Required version: ^18.17.1.</p> 
<p>升级，使用如下命令：</p> 
<p>sudo npm install n -g</p> 
<p>sudo n 18.17.1</p> 
<h3>启动后 Error decoding token: Not enough segments</h3> 
<p>02:35:32 - opendevin:ERROR: auth.py:18 - Error decoding token: Not enough segments<br> Traceback (most recent call last):<br>   File "/media/skywalk/EXTERNAL_USB/py311/lib/python3.11/site-packages/jwt/api_jws.py", line 257, in _load<br>     signing_input, crypto_segment = jwt.rsplit(b".", 1)<br>     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br> ValueError: not enough values to unpack (expected 2, got 1)</p> 
<p>准备学习deeplearning或者fastai，看看embedding怎么处理。</p> 
<p>可以试试用huggingface的那个embedding模型。</p> 
<h3>haggingface连不上的问题</h3> 
<p>  File "/media/skywalk/EXTERNAL_USB/py311/lib/python3.11/site-packages/transformers/utils/hub.py", line 441, in cached_file<br>     raise EnvironmentError(</p> 
<p>ERROR:root:&lt;class 'OSError'&gt;: We couldn't connect to 'https://huggingface.co' to load this file, couldn't find it in the cached files and it looks like BAAI/bge-small-en-v1.5 is not the path to a directory containing a file named config.json.</p> 
<p></p> 
<p>据说可以这样</p> 
<p>import os</p> 
<p>os.environ ['HF_ENDPOINT'] = 'https://hf-mirror.com'</p> 
<p>不行，修改了/media/skywalk/EXTERNAL_USB/py311/lib/python3.11/site-packages/transformers/utils/hub.py文件里的这一句：</p> 
<p># CLOUDFRONT_DISTRIB_PREFIX = "https://cdn.huggingface.co"<br> CLOUDFRONT_DISTRIB_PREFIX = "https://hf-mirror.com"</p> 
<p>最终是靠加了环境变量解决：</p> 
<p>export HF_ENDPOINT=https://hf-mirror.com</p> 
<h3>启动后报错模型不存在</h3> 
<p>刚开始用了gpt-3.5-turbo-1106 ，报错后换成gpt-3.5-turbo 还是说不存在。原来g4f的api链接地址修改了，改成：<a href="http://localhost:1337/v1/models/" rel="nofollow" title="http://localhost:1337/v1/models/">http://localhost:1337/v1/models/</a></p> 
<p>另外前面也有拼写错误，错把gpt-3.5-turbo写成gpt-3.5-turb ,也导致走了一些弯路。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/44c1d63dbdd4e1184e7c0b1679851b6f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小白必看，总结前端所有主流的构建工具，webpack / vite / roollup / esbuild，包含源码，建议关注&#43;收藏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/84845961d31d389f51df261e1ebbbc72/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">初始SpringBoot：详解特性和结构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>