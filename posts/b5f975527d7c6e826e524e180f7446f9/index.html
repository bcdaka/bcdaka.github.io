<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>图像分割实战-系列教程2：Unet系列算法（Unet、Unet&#43;&#43;、Unet&#43;&#43;&#43;、网络架构、损失计算方法） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b5f975527d7c6e826e524e180f7446f9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="图像分割实战-系列教程2：Unet系列算法（Unet、Unet&#43;&#43;、Unet&#43;&#43;&#43;、网络架构、损失计算方法）">
  <meta property="og:description" content="图像分割实战-系列教程 总目录
语义分割与实例分割概述
Unet系列算法
1、Unet网络 1.1 概述 整体结构：概述就是编码解码过程简单但是很实用，应用广起初是做医学方向，现在也是 虽然用的不是很多，在16年特别火，在医学领域、小目标领域做分割，其实到现在为止也还在用，因为在深度学习中网络越简单越好，这篇内容也会介绍Unet&#43;&#43;版和Unet最新版
相比于yolo、maskrcnn、fastrcnn这些，Unet远比这些网络简单。网络越大的时候，感受野也越大，实际上就会更加适合一些大目标。
1.2 结构 如图的网络架构中，左边从上到下，仍然是一层一层卷积的过程，三层卷积一个block，这个过程也就是图像长宽减小、通道变多的过程。一直到最底下的一层，tensor维度从（572,572,1）变成了（28,28，1024），当然这个过程从代码中打印出来会比较清晰。
第一个Block的输出会给到最后一个Block的输入和第二个Block的输入而第二个Block的输出会给到第三个Block的输入和倒数第二个Block的输入而同时最后一个Block会接受倒数第二个Block的输入和第一个Block的输入这种从上到下，从左到右的结构与以前的网络有所不同其中第一个Block和最后一个Block是一个对应的输入输出，对应的数据维度也是一样的，在当前这个网络中没有保持一样在后续新版本会保持一致 这整个过程相当于编码和解码的过程，整个网络呈现一个U字形，Unet在医学领域一直有不错的发挥
2、Unet各版本比较 2.1 Unet 主要网络结构：还引入了特征拼接操作以前我们都是加法，现在全都要这么简单的结构就能把分割任务做好 2.2 U-net&#43;&#43;概述 整体网络结构：特征融合，拼接更全面其实跟densenet思想一致把能拼能凑的特征全用上就是升级版了
相比于Unet，&#43;&#43;版本多做了一些融合的事情 2.3 U-net&#43;&#43;损失计算方式 Deep Supervision ：也是很常见的事，多输出损失由多个位置计算，再更新现在来看，很多视觉任务都可以套用这招 如图所示，第一层中 x 0 , 1 x^{0,1} x0,1、 x 0 , 2 x^{0,2} x0,2、 x 0 , 3 x^{0,3} x0,3、 x 0 , 4 x^{0,4} x0,4等4个位置都参与了损失计算，由于很多位置都参与了损失计算可以再各个阶段都获取一个比较好的效果，使得最终的结果更好。
2.4 Unet&#43;&#43;优点 可以更容易剪枝：因为前面也单独有监督训练可以根据速度要求来快速完成剪枝训练的时候同样会用到L4，效果还不错
如图所示，原本是一个4层的网络，由于多个部分参与了损失计算，可以很方便的直接去掉最后一层看最后的结果，如果对速度要求发生变化，就可以尝试去掉第四层。 2.5 Unet&#43;&#43;&#43; U-net&#43;&#43;&#43;（了解下就行）不同的max pool整合低阶特征(X1和X2，轮廓之类的)上采样整合高阶特征（感受野大的，全局的）各层统一用卷积得到64个特征图5*64=320，最终组合得到全部特征 这里看清楚了，是有3个&#43;，其实这方面的论文有不少，4&#43;和5&#43;都有，实际上大同小异。
低阶特征（长宽大、特征图数少，如图 X E n 1 X^1_{En} XEn1​、 X E n 2 X^2_{En} XEn2​）通过maxpooling降维，">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-08T02:44:22+08:00">
    <meta property="article:modified_time" content="2024-03-08T02:44:22+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">图像分割实战-系列教程2：Unet系列算法（Unet、Unet&#43;&#43;、Unet&#43;&#43;&#43;、网络架构、损失计算方法）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://blog.csdn.net/weixin_50592077/article/details/135304423?spm=1001.2014.3001.5501">图像分割实战-系列教程 总目录</a><br> <a href="https://blog.csdn.net/weixin_50592077/article/details/135300736?spm=1001.2014.3001.5501">语义分割与实例分割概述</a><br> <a href="https://blog.csdn.net/weixin_50592077/article/details/135304779?spm=1001.2014.3001.5501">Unet系列算法</a></p> 
<h2><a id="1Unet_4"></a>1、Unet网络</h2> 
<h3><a id="11__5"></a>1.1 概述</h3> 
<ul><li>整体结构：</li><li>概述就是编码解码过程</li><li>简单但是很实用，应用广</li><li>起初是做医学方向，现在也是</li></ul> 
<p>虽然用的不是很多，在16年特别火，在医学领域、小目标领域做分割，其实到现在为止也还在用，因为在深度学习中网络越简单越好，这篇内容也会介绍Unet++版和Unet最新版</p> 
<p>相比于yolo、maskrcnn、fastrcnn这些，Unet远比这些网络简单。网络越大的时候，感受野也越大，实际上就会更加适合一些大目标。</p> 
<div align="center"> 
 <img src="https://images2.imgbox.com/2b/aa/hdTGjUU6_o.png" height="320"> 
</div> 
<h3><a id="12__18"></a>1.2 结构</h3> 
<p>如图的网络架构中，左边从上到下，仍然是一层一层卷积的过程，三层卷积一个block，这个过程也就是图像长宽减小、通道变多的过程。一直到最底下的一层，tensor维度从（572,572,1）变成了（28,28，1024），当然这个过程从代码中打印出来会比较清晰。</p> 
<ul><li>第一个Block的输出会给到最后一个Block的输入和第二个Block的输入</li><li>而第二个Block的输出会给到第三个Block的输入和倒数第二个Block的输入</li><li>而同时最后一个Block会接受倒数第二个Block的输入和第一个Block的输入</li><li>这种从上到下，从左到右的结构与以前的网络有所不同</li><li>其中第一个Block和最后一个Block是一个对应的输入输出，对应的数据维度也是一样的，在当前这个网络中没有保持一样在后续新版本会保持一致</li></ul> 
<p>这整个过程相当于编码和解码的过程，整个网络呈现一个U字形，Unet在医学领域一直有不错的发挥</p> 
<h2><a id="2Unet_30"></a>2、Unet各版本比较</h2> 
<h3><a id="21_Unet_31"></a>2.1 Unet</h3> 
<p><img src="https://images2.imgbox.com/b2/36/ug1di6ip_o.png" alt="在这里插入图片描述"></p> 
<ul><li>主要网络结构：</li><li>还引入了特征拼接操作</li><li>以前我们都是加法，现在全都要</li><li>这么简单的结构就能把分割任务做好</li></ul> 
<h3><a id="22_Unet_39"></a>2.2 U-net++概述</h3> 
<ul><li>整体网络结构：</li><li>特征融合，拼接更全面</li><li>其实跟densenet思想一致</li><li>把能拼能凑的特征全用上就是升级版了<br> <img src="https://images2.imgbox.com/cc/fb/Qa5gipJp_o.png" alt="在这里插入图片描述"><br> 相比于Unet，++版本多做了一些融合的事情</li></ul> 
<h3><a id="23_Unet_48"></a>2.3 U-net++损失计算方式</h3> 
<ul><li>Deep Supervision ：</li><li>也是很常见的事，多输出</li><li>损失由多个位置计算，再更新</li><li>现在来看，很多视觉任务都可以套用这招</li></ul> 
<p><img src="https://images2.imgbox.com/c9/b3/oYbOrwVp_o.png" alt="在这里插入图片描述"><br> 如图所示，第一层中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
         
         
           0 
          
         
           , 
          
         
           1 
          
         
        
       
      
        x^{0,1} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
         
         
           0 
          
         
           , 
          
         
           2 
          
         
        
       
      
        x^{0,2} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
         
         
           0 
          
         
           , 
          
         
           3 
          
         
        
       
      
        x^{0,3} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
         
         
           0 
          
         
           , 
          
         
           4 
          
         
        
       
      
        x^{0,4} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mpunct mtight">,</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span></span>等4个位置都参与了损失计算，由于很多位置都参与了损失计算可以再各个阶段都获取一个比较好的效果，使得最终的结果更好。</p> 
<h3><a id="24_Unet_58"></a>2.4 Unet++优点</h3> 
<ul><li>可以更容易剪枝：</li><li>因为前面也单独有监督训练</li><li>可以根据速度要求来快速完成剪枝</li><li>训练的时候同样会用到L4，效果还不错<br> <img src="https://images2.imgbox.com/c3/64/bobgzAYk_o.png" alt="在这里插入图片描述"><br> 如图所示，原本是一个4层的网络，由于多个部分参与了损失计算，可以很方便的直接去掉最后一层看最后的结果，如果对速度要求发生变化，就可以尝试去掉第四层。</li></ul> 
<h3><a id="25_Unet_67"></a>2.5 Unet+++</h3> 
<ul><li>U-net+++（了解下就行）</li><li>不同的max pool整合低阶特征</li><li>(X1和X2，轮廓之类的)</li><li>上采样整合高阶特征</li><li>（感受野大的，全局的）</li><li>各层统一用卷积得到64个特征图</li><li>5*64=320，最终组合得到全部特征</li></ul> 
<p><img src="https://images2.imgbox.com/0a/5b/sXRAshIF_o.png" alt="在这里插入图片描述"><br> 这里看清楚了，是有3个+，其实这方面的论文有不少，4+和5+都有，实际上大同小异。</p> 
<p>低阶特征（长宽大、特征图数少，如图<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
         
         
           E 
          
         
           n 
          
         
        
          1 
         
        
       
      
        X^1_{En} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0894em; vertical-align: -0.2753em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -2.4247em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">E</span><span class="mord mathnormal mtight">n</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2753em;"><span class=""></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
         
         
           E 
          
         
           n 
          
         
        
          2 
         
        
       
      
        X^2_{En} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0894em; vertical-align: -0.2753em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -2.4247em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">E</span><span class="mord mathnormal mtight">n</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2753em;"><span class=""></span></span></span></span></span></span></span></span></span></span>）通过maxpooling降维，<br> 高阶特征（长宽大、特征图数少，如图<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
         
         
           E 
          
         
           n 
          
         
        
          4 
         
        
       
      
        X^4_{En} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0894em; vertical-align: -0.2753em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -2.4247em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">E</span><span class="mord mathnormal mtight">n</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2753em;"><span class=""></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          X 
         
         
         
           E 
          
         
           n 
          
         
        
          5 
         
        
       
      
        X^5_{En} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0894em; vertical-align: -0.2753em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -2.4247em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">E</span><span class="mord mathnormal mtight">n</span></span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2753em;"><span class=""></span></span></span></span></span></span></span></span></span></span>）通过线性插值增维，<br> 统一变成n<em>n</em>64的维度，然后全部拼接在一起，这里就是n<em>n</em>64<em>5 = n</em>n*320</p> 
<p><a href="https://blog.csdn.net/weixin_50592077/article/details/135304423?spm=1001.2014.3001.5501">图像分割实战-系列教程 总目录</a><br> <a href="https://blog.csdn.net/weixin_50592077/article/details/135300736?spm=1001.2014.3001.5501">语义分割与实例分割概述</a><br> <a href="https://blog.csdn.net/weixin_50592077/article/details/135304779?spm=1001.2014.3001.5501">Unet系列算法</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d8e50fdb28b318f4a53e4532411568a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python 安装库pycrypto失败的一系列问题[已解决]</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62e44fd8460ffd568046f6b9d4f361fa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用真实数据告诉你前10大AI对话工具排行！（国内&#43;国外篇）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>