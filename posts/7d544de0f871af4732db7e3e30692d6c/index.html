<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一篇文章教会你如何搭建hive数据库 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7d544de0f871af4732db7e3e30692d6c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="一篇文章教会你如何搭建hive数据库">
  <meta property="og:description" content="目录
一、hive的概念和由来
（1）Hive的概念
（2）Hive的由来
二、Hive的优缺点
三、Hive的组件架构
(1)Hive与hadoop的关系
(2)Hive与数据库的异同
四、基础环境准备和安装准备
(1)Hive组件的部署规划和软件包路径如下：
(2)解压安装文件
(1)关闭防火墙
（2）卸载 Linux 系统自带的 MariaDB。
(3)安装MySQL的mysql common、mysql libs、mysql client、mysql server软件包
(4)修改 MySQL 数据库配置，在/etc/my.cnf 文件中添加以下数据（在symbolic-links=0 配置信息的下方添加数据)
(5)启动mysql数据库
（启动后查看mysql的状态（一定是要running））​编辑(6)查看mysqld自动提供给的随机密码
（7）MySQL 数据库初始化。
（8）添加 root 用户从本地和远程访问 MySQL 数据库表单的授权。
五、配置Hive组件
(1)更改环境变量
（2）修改 Hive 组件配置文件。
（3）通过 vi 编辑器修改 hive-site.xml 文件实现 Hive 连接 MySQL 数据库，并设定 Hive 临时文件存储路径。
五、初始化元数据
​编辑
一、hive的概念和由来 （此图为Apache Hive官网的截图，具体网址为Apache Hive)
（1）Hive的概念 Hive是基于Hadoop的数据仓库工具，可以用来对HDFS中存储的数据进行查询和分析。Hive能够将HDFS上结构化的数据文件映射为数据库表，并提供SQL查询功能，将SQL语句转变成MapReduce任务来执行。Hive通过简单的SQL语句实现快速调用MapReduce机制进行数据统计分析，因此不必专门开发MapReduce应用程序即可实现大数据分析。
Hive对存储在HDFS中的数据进行分析和管理，它可以将结构化的数据文件映射为一张数据库表，通过SQL查询分析需要的内容，查询Hive使用的SQL语句简称Hive SQL（HQL）。Hive的运行机制使不熟悉MapReduce的用户也能很方便地利用SQL语言对数据进行查询、汇总、分析。同时，Hive也允许熟悉MapReduce开发者们开发自定义的Mappers和Reducers来处理内建的Mappers和Reducers无法完成的复杂的分析工作。Hive还允许用户编写自己定义的函数UDF，用来在查询中使用。
（2）Hive的由来 Hive起源于Facebook（一个美国的社交服务网络）。Facebook有着大量的数据，而Hadoop是一个开源的MapReduce实现，可以轻松处理大量的数据。但是MapReduce程序对于Java程序员来说比较容易写，但是对于其他语言使用者来说不太方便。此时Facebook最早地开始研发Hive，它让对Hadoop使用SQL查询（实际上SQL后台转化为了MapReduce）成为可能，那些非Java程序员也可以更方便地使用。hive最早的目的也就是为了分析处理海量的日志。
二、Hive的优缺点 (图中Hive的缺点明显是可控性差和因为使用语句的有限(只使用到SQL语句，逻辑简单，所以表达能力有限)
三、Hive的组件架构 (1)Hive与hadoop的关系 Hive构建在Hadoop之上，HQL中对查询语句的解释、优化、生成查询计划是由Hive完成的。Hive读取的所有数据都是存储在Hadoop文件系统中。Hive查询计划被转化为MapReduce任务，在Hadoop中执行。
(2)Hive与数据库的异同 由于Hive采用了SQL的查询语言HQL，因此很容易将Hive理解为数据库。其实从结构上来看，Hive和数据库除了拥有类似的查询语言，再无类似之处。MapReduce开发人员可以把自己写的Mapper和Reducer作为插件支持Hive做更复杂的数据分析。它与关系型数据库的SQL略有不同，但支持了绝大多数的语句（如DDL、DML）以及常见的聚合函数、连接查询、条件查询等操作。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-07T19:43:24+08:00">
    <meta property="article:modified_time" content="2024-04-07T19:43:24+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一篇文章教会你如何搭建hive数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81hive%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E7%94%B1%E6%9D%A5-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81hive%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E7%94%B1%E6%9D%A5" rel="nofollow">一、hive的概念和由来</a></p> 
<p id="%EF%BC%881%EF%BC%89Hive%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89Hive%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">（1）Hive的概念</a></p> 
<p id="%EF%BC%882%EF%BC%89Hive%E7%9A%84%E7%94%B1%E6%9D%A5-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89Hive%E7%9A%84%E7%94%B1%E6%9D%A5" rel="nofollow">（2）Hive的由来</a></p> 
<p id="%E4%BA%8C%E3%80%81Hive%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81Hive%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9" rel="nofollow">二、Hive的优缺点</a></p> 
<p id="%E4%B8%89%E3%80%81Hive%E7%9A%84%E7%BB%84%E4%BB%B6%E6%9E%B6%E6%9E%84-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Hive%E7%9A%84%E7%BB%84%E4%BB%B6%E6%9E%B6%E6%9E%84" rel="nofollow">三、Hive的组件架构</a></p> 
<p id="(1)Hive%E4%B8%8Ehadoop%E7%9A%84%E5%85%B3%E7%B3%BB-toc" style="margin-left:40px;"><a href="#%281%29Hive%E4%B8%8Ehadoop%E7%9A%84%E5%85%B3%E7%B3%BB" rel="nofollow">(1)Hive与hadoop的关系</a></p> 
<p id="(2)Hive%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%BC%82%E5%90%8C-toc" style="margin-left:40px;"><a href="#%282%29Hive%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%BC%82%E5%90%8C" rel="nofollow">(2)Hive与数据库的异同</a></p> 
<p id="%E5%9B%9B%E3%80%81%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%E5%92%8C%E5%AE%89%E8%A3%85%E5%87%86%E5%A4%87-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%E5%92%8C%E5%AE%89%E8%A3%85%E5%87%86%E5%A4%87" rel="nofollow">四、基础环境准备和安装准备</a></p> 
<p id="(1)Hive%E7%BB%84%E4%BB%B6%E7%9A%84%E9%83%A8%E7%BD%B2%E8%A7%84%E5%88%92%E5%92%8C%E8%BD%AF%E4%BB%B6%E5%8C%85%E8%B7%AF%E5%BE%84%E5%A6%82%E4%B8%8B%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%281%29Hive%E7%BB%84%E4%BB%B6%E7%9A%84%E9%83%A8%E7%BD%B2%E8%A7%84%E5%88%92%E5%92%8C%E8%BD%AF%E4%BB%B6%E5%8C%85%E8%B7%AF%E5%BE%84%E5%A6%82%E4%B8%8B%EF%BC%9A" rel="nofollow">(1)Hive组件的部署规划和软件包路径如下：</a></p> 
<p id="(2)%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%282%29%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6" rel="nofollow">(2)解压安装文件</a></p> 
<p id="(1)%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99-toc" style="margin-left:40px;"><a href="#%281%29%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99" rel="nofollow">(1)关闭防火墙</a></p> 
<p id="%EF%BC%882%EF%BC%89%E5%8D%B8%E8%BD%BD%20Linux%20%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E7%9A%84%20MariaDB%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E5%8D%B8%E8%BD%BD%20Linux%20%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E7%9A%84%20MariaDB%E3%80%82" rel="nofollow">（2）卸载 Linux 系统自带的 MariaDB。</a></p> 
<p id="(3)%E5%AE%89%E8%A3%85MySQL%E7%9A%84mysql%20common%E3%80%81mysql%20libs%E3%80%81mysql%20client%E3%80%81mysql%20server%E8%BD%AF%E4%BB%B6%E5%8C%85-toc" style="margin-left:40px;"><a href="#%283%29%E5%AE%89%E8%A3%85MySQL%E7%9A%84mysql%20common%E3%80%81mysql%20libs%E3%80%81mysql%20client%E3%80%81mysql%20server%E8%BD%AF%E4%BB%B6%E5%8C%85" rel="nofollow">(3)安装MySQL的mysql common、mysql libs、mysql client、mysql server软件包</a></p> 
<p id="(4)%E4%BF%AE%E6%94%B9%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%9C%A8%2Fetc%2Fmy.cnf%20%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E6%95%B0%E6%8D%AE%EF%BC%88%E5%9C%A8symbolic-links%3D0%20%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E4%B8%8B%E6%96%B9%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE)-toc" style="margin-left:40px;"><a href="#%284%29%E4%BF%AE%E6%94%B9%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%9C%A8%2Fetc%2Fmy.cnf%20%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E6%95%B0%E6%8D%AE%EF%BC%88%E5%9C%A8symbolic-links%3D0%20%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E4%B8%8B%E6%96%B9%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%29" rel="nofollow">(4)修改 MySQL 数据库配置，在/etc/my.cnf 文件中添加以下数据（在symbolic-links=0 配置信息的下方添加数据)</a></p> 
<p id="(5)%E5%90%AF%E5%8A%A8mysql%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;"><a href="#%285%29%E5%90%AF%E5%8A%A8mysql%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">(5)启动mysql数据库</a></p> 
<p id="%EF%BC%88%E5%90%AF%E5%8A%A8%E5%90%8E%E6%9F%A5%E7%9C%8Bmysql%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%88%E4%B8%80%E5%AE%9A%E6%98%AF%E8%A6%81running%EF%BC%89%EF%BC%89%E2%80%8B%E7%BC%96%E8%BE%91(6)%E6%9F%A5%E7%9C%8Bmysqld%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BE%9B%E7%BB%99%E7%9A%84%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E5%90%AF%E5%8A%A8%E5%90%8E%E6%9F%A5%E7%9C%8Bmysql%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%88%E4%B8%80%E5%AE%9A%E6%98%AF%E8%A6%81running%EF%BC%89%EF%BC%89%E2%80%8B%E7%BC%96%E8%BE%91%286%29%E6%9F%A5%E7%9C%8Bmysqld%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BE%9B%E7%BB%99%E7%9A%84%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81" rel="nofollow">（启动后查看mysql的状态（一定是要running））​编辑(6)查看mysqld自动提供给的随机密码</a></p> 
<p id="%EF%BC%887%EF%BC%89MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%887%EF%BC%89MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82" rel="nofollow">（7）MySQL 数据库初始化。</a></p> 
<p id="%EF%BC%888%EF%BC%89%E6%B7%BB%E5%8A%A0%20root%20%E7%94%A8%E6%88%B7%E4%BB%8E%E6%9C%AC%E5%9C%B0%E5%92%8C%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%8D%95%E7%9A%84%E6%8E%88%E6%9D%83%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%888%EF%BC%89%E6%B7%BB%E5%8A%A0%20root%20%E7%94%A8%E6%88%B7%E4%BB%8E%E6%9C%AC%E5%9C%B0%E5%92%8C%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%8D%95%E7%9A%84%E6%8E%88%E6%9D%83%E3%80%82" rel="nofollow">（8）添加 root 用户从本地和远程访问 MySQL 数据库表单的授权。</a></p> 
<p id="%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AEHive%E7%BB%84%E4%BB%B6-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AEHive%E7%BB%84%E4%BB%B6" rel="nofollow">五、配置Hive组件</a></p> 
<p id="(1)%E6%9B%B4%E6%94%B9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#%281%29%E6%9B%B4%E6%94%B9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">(1)更改环境变量</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%BF%AE%E6%94%B9%20Hive%20%E7%BB%84%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E4%BF%AE%E6%94%B9%20Hive%20%E7%BB%84%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82" rel="nofollow">（2）修改 Hive 组件配置文件。</a></p> 
<p id="%EF%BC%883%EF%BC%89%E9%80%9A%E8%BF%87%20vi%20%E7%BC%96%E8%BE%91%E5%99%A8%E4%BF%AE%E6%94%B9%20hive-site.xml%20%E6%96%87%E4%BB%B6%E5%AE%9E%E7%8E%B0%20Hive%20%E8%BF%9E%E6%8E%A5%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E5%B9%B6%E8%AE%BE%E5%AE%9A%20Hive%20%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%883%EF%BC%89%E9%80%9A%E8%BF%87%20vi%20%E7%BC%96%E8%BE%91%E5%99%A8%E4%BF%AE%E6%94%B9%20hive-site.xml%20%E6%96%87%E4%BB%B6%E5%AE%9E%E7%8E%B0%20Hive%20%E8%BF%9E%E6%8E%A5%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E5%B9%B6%E8%AE%BE%E5%AE%9A%20Hive%20%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E3%80%82" rel="nofollow">（3）通过 vi 编辑器修改 hive-site.xml 文件实现 Hive 连接 MySQL 数据库，并设定 Hive 临时文件存储路径。</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%85%83%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%85%83%E6%95%B0%E6%8D%AE" rel="nofollow">五、初始化元数据</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:0px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">​编辑</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p style="margin-left:0px;"></p> 
<h2 id="%E4%B8%80%E3%80%81hive%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E7%94%B1%E6%9D%A5"><span style="color:#511b78;"><strong>一、hive的概念和由来</strong></span></h2> 
<p></p> 
<p style="text-align:center;"><img alt="" height="270" src="https://images2.imgbox.com/3b/b6/OWN5T6db_o.jpg" width="615"></p> 
<p style="text-align:center;"><strong><span style="color:#fe2c24;">（此图为Apache Hive官网的截图，具体网址为<a href="https://hive.apache.org/" rel="nofollow" title="Apache Hive">Apache Hive</a>)</span></strong></p> 
<h3 id="%EF%BC%881%EF%BC%89Hive%E7%9A%84%E6%A6%82%E5%BF%B5"><strong>（1）Hive的概念</strong></h3> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">Hive</span><span style="color:#262626;">是基于</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">的数据仓库工具，可以用来对</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">中存储的数据进行查询和分析。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">能够将</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">上结构化的数据文件映射为数据库表，并提供</span><span style="color:#262626;">SQL</span><span style="color:#262626;">查询功能，将</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句转变成</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">任务来执行。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">通过简单的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句实现快速调用</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">机制进行数据统计分析，因此不必专门开发</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">应用程序即可实现大数据分析。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">Hive</span><span style="color:#262626;">对存储在</span><span style="color:#262626;">HDFS</span><span style="color:#262626;">中的数据进行分析和管理，它可以将结构化的数据文件映射为一张数据库表，通过</span><span style="color:#262626;">SQL</span><span style="color:#262626;">查询分析需要的内容，查询</span><span style="color:#262626;">Hive</span><span style="color:#262626;">使用的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句简称</span><span style="color:#262626;">Hive SQL</span><span style="color:#262626;">（</span><span style="color:#262626;">HQL</span><span style="color:#262626;">）。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的运行机制使不熟悉</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">的用户也能很方便地利用</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语言对数据进行查询、汇总、分析。同时，</span><span style="color:#262626;">Hive</span><span style="color:#262626;">也允许熟悉</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">开发者们开发自定义的</span><span style="color:#262626;">Mappers</span><span style="color:#262626;">和</span><span style="color:#262626;">Reducers</span><span style="color:#262626;">来处理内建的</span><span style="color:#262626;">Mappers</span><span style="color:#262626;">和</span><span style="color:#262626;">Reducers</span><span style="color:#262626;">无法完成的复杂的分析工作。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">还允许用户编写自己定义的函数</span><span style="color:#262626;">UDF</span><span style="color:#262626;">，用来在查询中使用。</span></p> 
<h3 id="%EF%BC%882%EF%BC%89Hive%E7%9A%84%E7%94%B1%E6%9D%A5" style="margin-left:0in;text-align:left;"><strong><span style="color:#262626;">（2）Hive的由来</span></strong></h3> 
<p><span style="color:#262626;">Hive起源于Facebook（一个美国的社交服务网络）。Facebook有着大量的数据，而Hadoop是一个开源的MapReduce实现，可以轻松处理大量的数据。但是MapReduce程序对于Java程序员来说比较容易写，但是对于其他语言使用者来说不太方便。此时Facebook最早地开始研发Hive，它让对Hadoop使用SQL查询（实际上SQL后台转化为了MapReduce）成为可能，那些非Java程序员也可以更方便地使用。hive最早的目的也就是为了分析处理海量的日志。</span></p> 
<h2 id="%E4%BA%8C%E3%80%81Hive%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span style="color:#333333;"><strong>二、Hive的优缺点</strong></span></h2> 
<p><img alt="" height="429" src="https://images2.imgbox.com/24/42/uRL9WmqS_o.png" width="852"><img alt="" height="249" src="https://images2.imgbox.com/3c/d1/KhGqXg9B_o.png" width="855"></p> 
<p><span style="color:#fe2c24;"><strong>(图中Hive的缺点明显是可控性差和因为使用语句的有限(只使用到SQL语句，逻辑简单，所以表达能力有限)</strong></span></p> 
<h2 id="%E4%B8%89%E3%80%81Hive%E7%9A%84%E7%BB%84%E4%BB%B6%E6%9E%B6%E6%9E%84"><span style="color:#b95514;"><strong>三、Hive的组件架构</strong></span></h2> 
<h3 id="(1)Hive%E4%B8%8Ehadoop%E7%9A%84%E5%85%B3%E7%B3%BB"><span style="color:#fe2c24;"><strong>(1)Hive与hadoop的关系</strong></span></h3> 
<p style="text-align:left;"><span style="color:#262626;">Hive</span><span style="color:#262626;">构建在</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">之上，</span><span style="color:#262626;">HQL</span><span style="color:#262626;">中对查询语句的解释、优化、生成查询计划是由</span><span style="color:#262626;">Hive</span><span style="color:#262626;">完成的。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">读取的所有数据都是存储在</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">文件系统中。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">查询计划被转化为</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">任务，在</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">中执行。</span></p> 
<h3 id="(2)Hive%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%BC%82%E5%90%8C" style="text-align:left;"><span style="color:#fe2c24;"><strong>(2)Hive与数据库的异同</strong></span></h3> 
<p style="text-align:left;">  <span style="color:#262626;">由于</span><span style="color:#262626;">Hive</span><span style="color:#262626;">采用了</span><span style="color:#262626;">SQL</span><span style="color:#262626;">的查询语言</span><span style="color:#262626;">HQL</span><span style="color:#262626;">，因此很容易将</span><span style="color:#262626;">Hive</span><span style="color:#262626;">理解为数据库。其实从结构上来看，</span><span style="color:#262626;">Hive</span><span style="color:#262626;">和数据库除了拥有类似的查询语言，再无类似之处。</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">开发人员可以把自己写的</span><span style="color:#262626;">Mapper</span><span style="color:#262626;">和</span><span style="color:#262626;">Reducer</span><span style="color:#262626;">作为插件支持</span><span style="color:#262626;">Hive</span><span style="color:#262626;">做更复杂的数据分析。它与关系型数据库的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">略有不同，但支持了绝大多数的语句（如</span><span style="color:#262626;">DDL</span><span style="color:#262626;">、</span><span style="color:#262626;">DML</span><span style="color:#262626;">）以及常见的聚合函数、连接查询、条件查询等操作。</span></p> 
<p style="text-align:left;"><span style="color:#262626;">Hive</span><span style="color:#262626;">不适合用于联机</span><span style="color:#262626;">(online)</span><span style="color:#262626;">事务处理，也不提供实时查询功能。它最适合应用在基于大量不可变数据的批处理作业。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的特点是可伸缩（在</span><span style="color:#262626;">Hadoop </span><span style="color:#262626;">的集群上动态的添加设备），可扩展、容错、输入格式的松散耦合。</span><span style="color:#262626;">Hive</span><span style="color:#262626;">的入口是</span><span style="color:#262626;">DRIVER</span><span style="color:#262626;">，执行的</span><span style="color:#262626;">SQL</span><span style="color:#262626;">语句首先提交到</span><span style="color:#262626;">DRIVER</span><span style="color:#262626;">驱动，然后调用</span><span style="color:#262626;">COMPILER</span><span style="color:#262626;">解释驱动，最终解释成</span><span style="color:#262626;">MapReduce</span><span style="color:#262626;">任务执行，最后将结果返回。</span></p> 
<h2 id="%E5%9B%9B%E3%80%81%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87%E5%92%8C%E5%AE%89%E8%A3%85%E5%87%86%E5%A4%87" style="text-align:left;">四、基础环境准备和安装准备</h2> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">Hive</span><span style="color:#262626;">组件需要基于</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">系统进行安装。因此，在安装</span><span style="color:#262626;">Hive</span><span style="color:#262626;">组件前，需要确保</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">系统能够正常运行。</span><span style="color:#fe2c24;"><strong>内容是基于之前已部署完毕的Hadoop全分布系统（HDFS)，在master节点上实现Hive组件安装。</strong></span></p> 
<h3 id="(1)Hive%E7%BB%84%E4%BB%B6%E7%9A%84%E9%83%A8%E7%BD%B2%E8%A7%84%E5%88%92%E5%92%8C%E8%BD%AF%E4%BB%B6%E5%8C%85%E8%B7%AF%E5%BE%84%E5%A6%82%E4%B8%8B%EF%BC%9A" style="margin-left:0in;text-align:left;"><span style="color:#fe2c24;"><strong>(1)Hive组件的部署规划和软件包路径如下：</strong></span></h3> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（1）当前环境中已安装</span><span style="color:#262626;">Hadoop</span><span style="color:#262626;">全分布系统。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">2</span><span style="color:#262626;">）本地安装</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">数据库（</span><span style="color:#fe2c24;"><strong>账号root，密码Password123$</strong></span><span style="color:#262626;">），</span><span style="color:#262626;">编写者软件包在/opt/software/mysql-5.7.18路径下。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">3</span><span style="color:#262626;">）</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">端口号（</span><span style="color:#262626;">3306</span><span style="color:#262626;">）。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（</span><span style="color:#262626;">4</span><span style="color:#262626;">）</span><span style="color:#262626;">MySQL</span><span style="color:#262626;">的</span><span style="color:#262626;">JDBC</span><span style="color:#262626;">驱动包</span><span style="color:#262626;">/opt/software/mysql-connector-java-5.1.47.jar</span><span style="color:#262626;">，</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">在此基础上更新</span><span style="color:#262626;">Hive</span><span style="color:#262626;">元数据存储。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（5</span><span style="color:#262626;">）</span><span style="color:#262626;">Hive</span><span style="color:#262626;">软件包</span><span style="color:#262626;">/opt/software/apache-hive-2.0.0-bin.tar.gz</span><span style="color:#262626;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><strong><span style="color:#fe2c24;">(缺一不可）</span></strong></p> 
<h3 id="(2)%E8%A7%A3%E5%8E%8B%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6" style="margin-left:0in;text-align:left;"><span style="color:#fe2c24;"><strong>(2)解压安装文件</strong></span></h3> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（1</span><span style="color:#262626;">）使用</span><span style="color:#262626;">root</span><span style="color:#262626;">用户，将</span><span style="color:#262626;">Hive</span><span style="color:#262626;">安装包</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">/opt/software/apache-hive-2.0.0-bin.tar.gz</span><span style="color:#262626;">路解压到</span><span style="color:#262626;">/</span><span style="color:#262626;">usr</span><span style="color:#262626;">/local/</span><span style="color:#262626;">src</span><span style="color:#262626;">路径下。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="background-color:#c0c0c0;"><span style="color:#262626;">[</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;"> ~]# tar -</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">zxvf</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;"> /opt/software/apache-hive-2.0.0-bin.tar.gz -C /</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">usr</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">src</span></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（2</span><span style="color:#262626;">）将解压后的</span><span style="color:#262626;">apache-hive-2.0.0-bin</span><span style="color:#262626;">文件夹更名为</span><span style="color:#262626;">hive</span><span style="color:#262626;">；</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="background-color:#c0c0c0;"><span style="color:#262626;">[</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;"> ~]# mv /</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">usr</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">src</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">/apache-hive-2.0.0-bin </span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">usr</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">src</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">/hive</span></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#262626;">（3</span><span style="color:#262626;">）修改</span><span style="color:#262626;">hive</span><span style="color:#262626;">目录归属用户和用户组为</span><span style="color:#262626;">hadoop</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="background-color:#c0c0c0;"><span style="color:#262626;">[</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">root@master</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;"> ~]# </span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">chown</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;"> -R </span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">hadoop:hadoop</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;"> /</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">usr</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">/local/</span></span><span style="background-color:#c0c0c0;"><span style="color:#262626;">src/hive</span></span><br><span style="color:#fe2c24;"><strong>四、设置Hive环境</strong></span></p> 
<h3 id="(1)%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99" style="margin-left:0in;text-align:left;"><span style="color:#fe2c24;"><strong>(1)关闭防火墙</strong></span></h3> 
<p style="margin-left:0in;text-align:left;"><strong>（1）关闭 Linux 系统防火墙，并将防火墙设定为系统开机并不自动启动</strong>。</p> 
<p style="margin-left:0in;text-align:left;"># 关闭防火墙服务</p> 
<p style="margin-left:0in;text-align:left;">[root@master ~]# systemctl stop firewalld</p> 
<p style="margin-left:0in;text-align:left;"># 设置防火墙服务开机不启动</p> 
<p style="margin-left:0in;text-align:left;">[root@master ~]# systemctl disable firewalld</p> 
<h3 id="%EF%BC%882%EF%BC%89%E5%8D%B8%E8%BD%BD%20Linux%20%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E7%9A%84%20MariaDB%E3%80%82" style="text-align:left;"><strong>（2）卸载 Linux 系统自带的 MariaDB。</strong></h3> 
<p style="text-align:left;"># 查询已安装的 mariadb 软件包</p> 
<p style="text-align:left;">[root@ master ~]# rpm -qa | grep mariadb</p> 
<p style="text-align:left;">#卸载已经查询到的mariadb软件包</p> 
<p style="text-align:left;">[root@master ~]# rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64（这是写者自身查到的包)</p> 
<h3 id="(3)%E5%AE%89%E8%A3%85MySQL%E7%9A%84mysql%20common%E3%80%81mysql%20libs%E3%80%81mysql%20client%E3%80%81mysql%20server%E8%BD%AF%E4%BB%B6%E5%8C%85" style="text-align:left;"><strong>(3)安装MySQL的mysql common、mysql libs、mysql client、mysql server软件包</strong></h3> 
<p style="text-align:left;">[root@master ~]# cd /opt/software/tools-software/</p> 
<p style="text-align:left;">[root@master ~]# rpm -ivh mysql-community-common-5.7.18-1.el7.x86_64.rpm</p> 
<p style="text-align:left;">[root@master ~]# rpm -ivh mysql-community-libs-5.7.18-1.el7.x86_64.rpm</p> 
<p style="text-align:left;">[root@master ~]# rpm -ivh mysql-community-client-5.7.18-1.el7.x86_64.rpm</p> 
<p style="text-align:left;">[root@master ~]# rpm -ivh mysql-community-server-5.7.18-1.el7.x86_64.rpm</p> 
<h3 id="(4)%E4%BF%AE%E6%94%B9%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%9C%A8%2Fetc%2Fmy.cnf%20%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E6%95%B0%E6%8D%AE%EF%BC%88%E5%9C%A8symbolic-links%3D0%20%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E4%B8%8B%E6%96%B9%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE)" style="text-align:left;"><strong>(4)修改 MySQL 数据库配置，在/etc/my.cnf 文件中添加以下数据（在symbolic-links=0 配置信息的下方添加数据)</strong></h3> 
<p style="text-align:left;">default-storage-engine=innodb</p> 
<p style="text-align:left;">innodb_file_per_table</p> 
<p style="text-align:left;">collation-server=utf8_general_ci</p> 
<p style="text-align:left;">init-connect='SET NAMES utf8'</p> 
<p style="text-align:left;">character-set-server=utf8</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/40/a3/kjYHXLfE_o.jpg"></p> 
<h3 id="(5)%E5%90%AF%E5%8A%A8mysql%E6%95%B0%E6%8D%AE%E5%BA%93" style="text-align:left;"><strong>(5)启动mysql数据库</strong></h3> 
<p style="text-align:left;">[root@master ~]# systemctl start mysqld</p> 
<h3 id="%EF%BC%88%E5%90%AF%E5%8A%A8%E5%90%8E%E6%9F%A5%E7%9C%8Bmysql%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%88%E4%B8%80%E5%AE%9A%E6%98%AF%E8%A6%81running%EF%BC%89%EF%BC%89%E2%80%8B%E7%BC%96%E8%BE%91(6)%E6%9F%A5%E7%9C%8Bmysqld%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BE%9B%E7%BB%99%E7%9A%84%E9%9A%8F%E6%9C%BA%E5%AF%86%E7%A0%81" style="text-align:left;"><span style="color:#fe2c24;"><strong>（启动后查看mysql的状态（一定是要running））<img alt="" height="293" src="https://images2.imgbox.com/c3/8e/l143fdQA_o.jpg" width="714"></strong></span><strong>(6)查看mysqld自动提供给的随机密码</strong></h3> 
<p style="text-align:center;">[root@master ~]# cat /var/log/mysqld.log | grep password<img alt="" src="https://images2.imgbox.com/41/88/hYcNbbNl_o.jpg"></p> 
<h3 id="%EF%BC%887%EF%BC%89MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82" style="text-align:left;"><strong>（7）MySQL 数据库初始化。</strong></h3> 
<p style="text-align:left;">（1）执行 mysql_secure_installation 命令初始化 MySQL 数据库，初始化过程中需要设定 数据库 root 用户登录密码，<span style="color:#fe2c24;"><strong>密码需符合安全规则，包括大小写字符、数字和特殊符号，</strong></span> 可设定密码为 Password123$。</p> 
<p style="text-align:left;">在进行 MySQL 数据库初始化过程中会出现以下交互确认信息：</p> 
<p style="text-align:left;">1）Change the password for root ? ((Press y|Y for Yes, any other key for No)表示是否更改 root 用户密码，在键盘输入 y 和回车。</p> 
<p style="text-align:left;">2）Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No)表示是否使用设定的密码继续，在键盘输入 y 和回车。</p> 
<p style="text-align:left;">3）Remove anonymous users? (Press y|Y for Yes, any other key for No)表示是 否删除匿名用户，在键盘输入 y 和回车。</p> 
<p style="text-align:left;">4）Disallow root login remotely? (Press y|Y for Yes, any other key for No) 表示是否拒绝 root 用户远程登录，在键盘输入 n 和回车，表示允许 root 用户远程登录。</p> 
<p style="text-align:left;">5）Remove test database and access to it? (Press y|Y for Yes, any other key for No)表示是否删除测试数据库，在键盘输入 y 和回车。</p> 
<p style="text-align:left;">6）Reload privilege tables now? (Press y|Y for Yes, any other key for No) 表示是否重新加载授权表，在键盘输入 y 和回车。</p> 
<h3 id="%EF%BC%888%EF%BC%89%E6%B7%BB%E5%8A%A0%20root%20%E7%94%A8%E6%88%B7%E4%BB%8E%E6%9C%AC%E5%9C%B0%E5%92%8C%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%8D%95%E7%9A%84%E6%8E%88%E6%9D%83%E3%80%82" style="text-align:left;"><strong>（8）添加 root 用户从本地和远程访问 MySQL 数据库表单的授权。</strong></h3> 
<p style="text-align:left;">[root@master ~]# mysql -uroot -p</p> 
<p style="text-align:left;">Enter password:                            #输入自己设置好的密码，写者的密码为:Password123$</p> 
<p style="text-align:left;"><strong>进入mysql界面后（mysql的界面为mysql&gt;)</strong></p> 
<p style="text-align:left;">mysql&gt; grant all privileges on *.* to root@'localhost' identified by 'Password123$'; # 添加 root 用户本地访问授权</p> 
<p style="text-align:left;">mysql&gt; grant all privileges on *.* to root@'%' identified by 'Password123$'; # 添加 root 用户远程访问授权</p> 
<p style="text-align:left;">mysql&gt; flush privileges; # 刷新授权</p> 
<p style="text-align:left;">mysql&gt; select user,host from mysql.user where user='root'; #查询root用户授权情况</p> 
<h2 id="%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AEHive%E7%BB%84%E4%BB%B6" style="text-align:left;"><strong>五、配置Hive组件</strong></h2> 
<h3 id="(1)%E6%9B%B4%E6%94%B9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" style="text-align:left;"><strong>(1)更改环境变量</strong></h3> 
<p style="text-align:left;"># 在文件末尾追加以下配置内容</p> 
<p style="text-align:left;">[root@master ~]# vi /etc/profile</p> 
<p style="text-align:left;"># set hive environment</p> 
<p style="text-align:left;">export HIVE_HOME=/usr/local/src/hive</p> 
<p style="text-align:left;">export PATH=$PATH:$HIVE_HOME/bin</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/10/d6/Holqwv9X_o.jpg"></p> 
<p style="text-align:left;"># 使环境变量配置生效</p> 
<p style="text-align:left;">[root@master ~]# source /etc/profile</p> 
<h3 id="%EF%BC%882%EF%BC%89%E4%BF%AE%E6%94%B9%20Hive%20%E7%BB%84%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E3%80%82" style="text-align:left;"><strong>（2）修改 Hive 组件配置文件。 </strong></h3> 
<p style="text-align:left;"><span style="color:#fe2c24;"><strong>切换到 hadoop 用户</strong></span>执行以下对 Hive 组件的配置操作。 将/usr/local/src/hive/conf 文件夹下 hive-default.xml.template 文件，更名为 hive-site.xml。</p> 
<p style="text-align:left;">[root@master ~]# su - hadoop</p> 
<p style="text-align:left;">[hadoop@master ~]$ cp /usr/local/src/hive/conf/hive-default.xml.template /usr/local/src/hive/conf/hive-site.xml</p> 
<h3 id="%EF%BC%883%EF%BC%89%E9%80%9A%E8%BF%87%20vi%20%E7%BC%96%E8%BE%91%E5%99%A8%E4%BF%AE%E6%94%B9%20hive-site.xml%20%E6%96%87%E4%BB%B6%E5%AE%9E%E7%8E%B0%20Hive%20%E8%BF%9E%E6%8E%A5%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E5%B9%B6%E8%AE%BE%E5%AE%9A%20Hive%20%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E3%80%82" style="text-align:left;">（3）通过 vi 编辑器修改 hive-site.xml 文件实现 Hive 连接 MySQL 数据库，并设定 Hive 临时文件存储路径。</h3> 
<p style="text-align:left;">[hadoop@master ~]$ vi /usr/local/src/hive/conf/hive-site.xml</p> 
<p style="text-align:left;">1)找出&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;<strong>(此项为设置mysql数据库连接)</strong></p> 
<p style="text-align:left;">更改value值，改为&lt;value&gt;jdbc:mysql://master:3306/hive?createDatabaseIfNotExist=true&amp;us eSSL=false&lt;/value&gt;</p> 
<p style="text-align:left;">2）找出&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;<strong>(此项为设置mysql数据库中root的密码)</strong></p> 
<p style="text-align:left;">更改value值，改为&lt;value&gt;Password123$&lt;/value&gt;</p> 
<p style="text-align:left;">3)找出&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;<strong>（此项为验证元存储版本的一致性)</strong></p> 
<p style="text-align:left;">value值默认为false，如果有错，则更改为&lt;value&gt;false&lt;/value&gt;</p> 
<p style="text-align:left;">4)找出&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;<strong>(配置数据库驱动)</strong></p> 
<p style="text-align:left;">更改value值，改为&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</p> 
<p style="text-align:left;">5)找出&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;<strong>(配置数据库用户名 javax.jdo.option.ConnectionUserName 为 root）</strong></p> 
<p style="text-align:left;">更改value值，改为&lt;value&gt;root&lt;/value&gt;</p> 
<p style="text-align:left;"><strong>6）将&lt;name&gt;<span style="color:#fe2c24;">hive.querylog.location</span>&lt;/name&gt;</strong></p> 
<p style="text-align:left;"><strong>&lt;name&gt;<span style="color:#fe2c24;">hive.exec.local.scratchdir</span>&lt;/name&gt;</strong></p> 
<p style="text-align:left;"><strong>&lt;name&gt;<span style="color:#fe2c24;">hive.downloaded.resources.dir</span>&lt;/name&gt;&lt;name&gt;<span style="color:#fe2c24;">hive.server2.logging.operation.log.location</span></strong><strong>&lt;/name&gt;这四个name的value值改为&lt;value&gt;<span style="color:#fe2c24;">/usr/local/src/hive/tmp</span>&lt;/value&gt;</strong></p> 
<p style="text-align:left;"><strong>7）</strong>在 Hive 安装目录中创建临时文件夹 tmp</p> 
<p style="text-align:left;">[hadoop@master ~]$ mkdir /usr/local/src/hive/tmp</p> 
<h2 id="%E4%BA%94%E3%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%85%83%E6%95%B0%E6%8D%AE" style="text-align:left;">五、初始化元数据</h2> 
<p style="text-align:left;">1）将 MySQL 数据库驱动（/opt/software/mysql-connector-java-5.1.46.jar）拷贝到 Hive 安装目录的 lib 下；</p> 
<p style="text-align:left;">[hadoop@master ~]$ cp /opt/software/mysql-connector-java-5.1.46.jar  /usr/local/src/hive/lib/</p> 
<p style="text-align:left;">2）重新启动 hadooop 即可</p> 
<p style="text-align:left;">[hadoop@master lib]$ stop-all.sh</p> 
<p style="text-align:left;">[hadoop@master lib]$ start-all.sh</p> 
<p style="text-align:left;">3）初始化数据库</p> 
<p style="text-align:left;">[hadoop@master ~]$schematool -initSchema -dbType mysql</p> 
<p style="text-align:left;">4）启动 hive</p> 
<p style="text-align:left;">[hadoop@master ~]$ hive</p> 
<p style="text-align:center;"><strong><img alt="" src="https://images2.imgbox.com/ac/f5/AjL2WqXp_o.jpg"></strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/de/f5/yqU31UA0_o.jpg"></p> 
<h2 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/e6/89/PG6x9XXZ_o.jpg"></h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9eab253f4e0776721b4a87c7749fc4a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android手势识别GestureDetector和ScaleGestureDetector介绍与使用，以自定义一个可拖拽拉伸的ImageView为例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8707bc4dd7e538e151a3ff6efb990b37/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Git密钥配置图文教程，web培训开发</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>