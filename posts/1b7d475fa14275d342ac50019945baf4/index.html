<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>深入解析FTP：原理、架构与搭建方式 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1b7d475fa14275d342ac50019945baf4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="深入解析FTP：原理、架构与搭建方式">
  <meta property="og:description" content="在当今互联网世界中，文件传输是日常工作和生活中不可或缺的一部分。FTP（File Transfer Protocol，文件传输协议）作为一种老而弥坚的协议，一直在文件传输领域发挥着重要作用。本文将从技术人的角度，详细分析FTP的原理、架构、搭建方式以及常见的操作方式。
一、FTP的原理
FTP是用于在网络上进行文件传输的一套标准协议，它工作在OSI模型的第七层，TCP模型的第四层，即应用层。FTP使用TCP传输而不是UDP，客户和服务器建立连接前要经过一个“三次握手”的过程，保证客户与服务器之间的连接是可靠的，而且是面向连接的，为数据传输提供可靠保证。
FTP允许用户以文件操作的方式（如文件的增、删、改、查、传送等）与另一主机相互通信。然而，用户并不真正登录到自己想要存取的计算机上面而成为完全用户，可用FTP程序访问远程资源，实现用户往返传输文件、目录管理以及访问电子邮件等等，即使双方计算机可能配有不同的操作系统和文件存储方式。
FTP的目标是提高文件的共享性，提供非直接使用远程计算机，使存储介质对用户透明和可靠高效地传送数据。它能操作任何类型的文件而不需要进一步处理，就像MIME或Unicode一样。但是，FTP有着极高的延时，这意味着，从开始请求到第一次接收需求数据之间的时间，会非常长。
二、FTP的架构
FTP是基于客户-服务器（C/S）模型而设计的，在客户端与FTP服务器之间建立两个连接。开发任何基于FTP的客户端软件都必须遵循FTP的工作原理，FTP的独特的优势同时也是与其它客户服务器程序最大的不同点就在于它在两台通信的主机之间使用了两条TCP连接，一条是数据连接，用于数据传送；另一条是控制连接，用于传送控制信息（命令和响应），这种将命令和数据分开传送的思想大大提高了FTP的效率，而其它客户服务器应用程序一般只有一条TCP连接。
FTP主要由三部分组成：FTP服务器、FTP客户端以及FTP协议。其中，FTP服务器是用来存储文件的，用户可以使用FTP客户端通过FTP协议与服务器进行文件传输。FTP协议包括两个组成部分：一个是FTP服务器，另一个是FTP客户端。其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。在开发网站的时候，通常利用FTP协议把网页或程序传到Web服务器上。此外，由于FTP传输效率非常高，在网络上传输大的文件时，一般也采用该协议。
三、FTP服务器的搭建方式
搭建FTP服务器，首先需要选择合适的操作系统，如Windows或Linux。接下来，需要安装FTP服务器软件，如FileZilla Server或vsftpd。安装完成后，进行服务器的基本配置，包括设置端口号、用户权限和文件目录等。同时，需要确保防火墙允许FTP流量通过，设置防火墙规则以开放FTP服务器的端口。如果在局域网内，还需要在路由器上进行端口转发的设置。最后，启动FTP服务器并进行连接测试，确保一切设置都能正常运作。
在CentOS7.6上搭建FTP服务器，我们通常选择vsftpd作为服务器软件。以下是详细的搭建步骤：
1. 关闭防火墙和SELinux
为了避免搭建过程中可能出现的网络问题，首先暂时关闭防火墙。可以使用以下命令： systemctl stop firewalld.service systemctl disable firewalld.service 同时，为了确保FTP服务的正常运行，建议将SELinux设置为disabled。编辑/etc/selinux/config文件，将SELINUX=enforcing改为SELINUX=disabled。修改后需要重启系统。 注意：在FTP服务器搭建成功后，应重新配置防火墙以允许FTP流量通过。
2. 安装vsftpd
使用yum包管理器安装vsftpd： yum install -y vsftpd 3. 启动vsftpd服务
安装完成后，启动vsftpd服务，并设置为开机自启： systemctl start vsftpd.service systemctl enable vsftpd.service 4. 配置vsftpd
vsftpd的主要配置文件位于/etc/vsftpd/vsftpd.conf。使用文本编辑器（如vi）打开此文件进行配置： vi /etc/vsftpd/vsftpd.conf 根据需要修改配置选项。例如，为了安全起见，你可能想要关闭匿名访问（anonymous_enable=NO），允许本地用户登录（local_enable=YES），并允许用户进行写操作（write_enable=YES）。 5. 创建FTP用户并设置权限
创建一个新的系统用户，该用户将用作FTP登录： adduser ftpuser passwd ftpuser 根据需要，你可以配置用户的主目录、访问权限等。例如，你可以通过修改/etc/vsftpd/vsftpd.conf中的相关设置来限制用户只能访问其主目录。 6. 重新启动vsftpd服务
在对配置文件进行更改后，需要重新启动vsftpd服务以使更改生效： systemctl restart vsftpd.service 7. 测试FTP服务器
使用FTP客户端软件（如FileZilla、WinSCP等）连接到你的FTP服务器进行测试。确保你能够成功登录，并且能够上传、下载和管理文件。 8. 配置防火墙以允许FTP流量（可选）
如果你在搭建成功后重新启用了防火墙，你需要配置防火墙以允许FTP流量通过。这通常涉及到开放FTP服务的标准端口（21）以及被动模式所需的端口范围（如6000-6010）。你可以使用firewall-cmd命令来配置这些规则。 以上就是在CentOS7.6上搭建FTP服务器的详细步骤。请注意，根据你的具体需求和网络环境，你可能需要对这些步骤进行适当的调整。
四、FTP的常见操作方式">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-24T14:19:51+08:00">
    <meta property="article:modified_time" content="2024-06-24T14:19:51+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">深入解析FTP：原理、架构与搭建方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>       在当今互联网世界中，文件传输是日常工作和生活中不可或缺的一部分。FTP（File Transfer Protocol，文件传输协议）作为一种老而弥坚的协议，一直在文件传输领域发挥着重要作用。本文将从技术人的角度，详细分析FTP的原理、架构、搭建方式以及常见的操作方式。</p> 
<p><strong>一、FTP的原理</strong></p> 
<p>      FTP是用于在网络上进行文件传输的一套标准协议，它工作在OSI模型的第七层，TCP模型的第四层，即应用层。FTP使用TCP传输而不是UDP，客户和服务器建立连接前要经过一个“三次握手”的过程，保证客户与服务器之间的连接是可靠的，而且是面向连接的，为数据传输提供可靠保证。</p> 
<p>      FTP允许用户以文件操作的方式（如文件的增、删、改、查、传送等）与另一主机相互通信。然而，用户并不真正登录到自己想要存取的计算机上面而成为完全用户，可用FTP程序访问远程资源，实现用户往返传输文件、目录管理以及访问电子邮件等等，即使双方计算机可能配有不同的操作系统和文件存储方式。</p> 
<p>     FTP的目标是提高文件的共享性，提供非直接使用远程计算机，使存储介质对用户透明和可靠高效地传送数据。它能操作任何类型的文件而不需要进一步处理，就像MIME或Unicode一样。但是，FTP有着极高的延时，这意味着，从开始请求到第一次接收需求数据之间的时间，会非常长。</p> 
<p><strong>二、FTP的架构</strong></p> 
<p>        FTP是基于客户-服务器（C/S）模型而设计的，在客户端与FTP服务器之间建立两个连接。开发任何基于FTP的客户端软件都必须遵循FTP的工作原理，FTP的独特的优势同时也是与其它客户服务器程序最大的不同点就在于它在两台通信的主机之间使用了两条TCP连接，一条是数据连接，用于数据传送；另一条是控制连接，用于传送控制信息（命令和响应），这种将命令和数据分开传送的思想大大提高了FTP的效率，而其它客户服务器应用程序一般只有一条TCP连接。</p> 
<p>       FTP主要由三部分组成：FTP服务器、FTP客户端以及FTP协议。其中，FTP服务器是用来存储文件的，用户可以使用FTP客户端通过FTP协议与服务器进行文件传输。FTP协议包括两个组成部分：一个是FTP服务器，另一个是FTP客户端。其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。在开发网站的时候，通常利用FTP协议把网页或程序传到Web服务器上。此外，由于FTP传输效率非常高，在网络上传输大的文件时，一般也采用该协议。</p> 
<p><strong>三、FTP服务器的搭建方式</strong></p> 
<p>        搭建FTP服务器，首先需要选择合适的操作系统，如Windows或Linux。接下来，需要安装FTP服务器软件，如FileZilla Server或vsftpd。安装完成后，进行服务器的基本配置，包括设置端口号、用户权限和文件目录等。同时，需要确保防火墙允许FTP流量通过，设置防火墙规则以开放FTP服务器的端口。如果在局域网内，还需要在路由器上进行端口转发的设置。最后，启动FTP服务器并进行连接测试，确保一切设置都能正常运作。</p> 
<p>在CentOS7.6上搭建FTP服务器，我们通常选择vsftpd作为服务器软件。以下是详细的搭建步骤：</p> 
<p><strong>1. 关闭防火墙和SELinux</strong></p> 
<ul><li>为了避免搭建过程中可能出现的网络问题，首先暂时关闭防火墙。可以使用以下命令：</li></ul> 
<pre></pre> 
<table style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;"><tbody><tr><td></td><td><code>systemctl stop firewalld.service </code></td></tr><tr><td></td><td><code>systemctl disable firewalld.service</code></td></tr></tbody></table> 
<ul><li>同时，为了确保FTP服务的正常运行，建议将SELinux设置为disabled。编辑<code>/etc/selinux/config</code>文件，将<code>SELINUX=enforcing</code>改为<code>SELINUX=disabled</code>。修改后需要重启系统。</li></ul> 
<p><strong>注意</strong>：在FTP服务器搭建成功后，应重新配置防火墙以允许FTP流量通过。</p> 
<p><strong>2. 安装vsftpd</strong></p> 
<ul><li>使用yum包管理器安装vsftpd：</li></ul> 
<table><tbody><tr><td></td><td><code>yum install -y vsftpd</code></td></tr></tbody></table> 
<p><strong>3. 启动vsftpd服务</strong></p> 
<ul><li>安装完成后，启动vsftpd服务，并设置为开机自启：</li></ul> 
<table><tbody><tr><td></td><td><code>systemctl start vsftpd.service </code></td></tr><tr><td></td><td><code>systemctl enable vsftpd.service</code></td></tr></tbody></table> 
<p><strong>4. 配置vsftpd</strong></p> 
<ul><li>vsftpd的主要配置文件位于<code>/etc/vsftpd/vsftpd.conf</code>。使用文本编辑器（如vi）打开此文件进行配置：</li></ul> 
<table><tbody><tr><td></td><td><code>vi /etc/vsftpd/vsftpd.conf</code></td></tr></tbody></table> 
<ul><li>根据需要修改配置选项。例如，为了安全起见，你可能想要关闭匿名访问（<code>anonymous_enable=NO</code>），允许本地用户登录（<code>local_enable=YES</code>），并允许用户进行写操作（<code>write_enable=YES</code>）。</li></ul> 
<p><strong>5. 创建FTP用户并设置权限</strong></p> 
<ul><li>创建一个新的系统用户，该用户将用作FTP登录：</li></ul> 
<table><tbody><tr><td></td><td><code>adduser ftpuser </code></td></tr><tr><td></td><td><code>passwd ftpuser</code></td></tr></tbody></table> 
<ul><li>根据需要，你可以配置用户的主目录、访问权限等。例如，你可以通过修改<code>/etc/vsftpd/vsftpd.conf</code>中的相关设置来限制用户只能访问其主目录。</li></ul> 
<p><strong>6. 重新启动vsftpd服务</strong></p> 
<ul><li>在对配置文件进行更改后，需要重新启动vsftpd服务以使更改生效：</li></ul> 
<table><tbody><tr><td></td><td><code>systemctl restart vsftpd.service</code></td></tr></tbody></table> 
<p><strong>7. 测试FTP服务器</strong></p> 
<ul><li>使用FTP客户端软件（如FileZilla、WinSCP等）连接到你的FTP服务器进行测试。确保你能够成功登录，并且能够上传、下载和管理文件。</li></ul> 
<p><strong>8. 配置防火墙以允许FTP流量（可选）</strong></p> 
<ul><li>如果你在搭建成功后重新启用了防火墙，你需要配置防火墙以允许FTP流量通过。这通常涉及到开放FTP服务的标准端口（21）以及被动模式所需的端口范围（如6000-6010）。你可以使用<code>firewall-cmd</code>命令来配置这些规则。</li></ul> 
<p>以上就是在CentOS7.6上搭建FTP服务器的详细步骤。请注意，根据你的具体需求和网络环境，你可能需要对这些步骤进行适当的调整。</p> 
<p><strong>四、FTP的常见操作方式</strong></p> 
<ol><li> <p><strong>文件上传</strong>：用户可以将本地文件上传到FTP服务器上。上传时，需要选择正确的目标目录，并确保有足够的权限进行上传操作。</p> </li><li> <p><strong>文件下载</strong>：用户可以从FTP服务器上下载文件到本地计算机。下载时，需要选择正确的源文件，并确保有足够的权限进行下载操作。</p> </li><li> <p><strong>目录管理</strong>：用户可以在FTP服务器上创建、删除、重命名目录等操作。这些操作需要相应的权限才能进行。</p> </li><li> <p><strong>用户管理</strong>：FTP服务器管理员可以创建、删除、修改用户账户，设置用户权限等。这些操作对于确保FTP服务器的安全性和稳定性至关重要。</p> </li></ol> 
<p><strong>五、总结</strong></p> 
<p>      FTP作为一种老而弥坚的文件传输协议，在互联网世界中仍然发挥着重要作用。通过深入了解FTP的原理、架构、搭建方式以及常见操作方式，我们可以更好地利用这一工具进行文件传输和管理。无论是个人用户还是企业用户，掌握FTP的相关知识都是非常有价值的。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/620c71790f6fd991748ed199891b99cc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI绘画Stable Diffussion 实操教程： 真人图片秒变动漫风，亲手绘制你的专属动漫头像</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/399d6f11420096487e20657eeebf2c11/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI工具——Hedra：上传音频&#43;照片，一键创作口型匹配视频～</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>