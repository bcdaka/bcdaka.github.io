<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STL list的主要接口模拟实现 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/de834251e92b0b18b1cea3e5179e0891/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="STL list的主要接口模拟实现">
  <meta property="og:description" content="STL-list是什么 STL里面的list本质上就是一个双向带头循环链表,如果不知道什么是双链表的话可以去看看这篇文章双链表
就像下面这种C语言双链表结构
只不过在这个原有的基础之上添加了增删查改的功能，让他变得更高级更实用
相当于把这个list封装了一遍，让我们可以调用他的接口，更加方便快捷，下面我们来看看具体怎么实现
list的模拟实现 在list里面有点麻烦的就是他的迭代器，这个和string还有vector的迭代器有点不一样，他的内存空间不是连续的，我们不能随机访问
所以我们把list分为3个部分写成两个struct和一个class，（struct的默认是公有的，这样我们在调用迭代器，还有创建节点的时候会方便一**些不像class默认是私有的）第一个是节点，这里定义了节点的数据域，还有指向前驱和后继指针的指针域，第二个是迭代器，这里我们可以简单的把迭代器理解成一个指针，用来对list进行操作，**最后一个用来定义list本身。
下面我们看看代码
template&lt;class type&gt; struct list_node { type data; list_node&lt;type&gt;* _next; list_node&lt;type&gt;* _prev; list_node(const type&amp; val = type()) :data(val) , _next(nullptr) , _prev(nullptr) {} }; 这里就是节点本身有数据域和指针域，这里我们用了一个模板，让编译器自动推导，这样的好处是可以存放任何数据，使用性更加广泛，
这里我们用了初始化列表，来作为默认构造函数
list_node(const type&amp; val = type()) :data(val) , _next(nullptr) , _prev(nullptr) {} **const type&amp; val = type()**这里我们用了一个匿名对象来进行我们链表节点的构造，这样的好处就是，我们在构造节点的时候不用去手动去拿一个类去构造对象，这里的匿名对象自动去调用属于他自己的默认构造，列如int会去调用int的默认构造，匿名对象只在当前行起作用，出了当前行就自动销毁。
list的迭代器 template&lt;class type, class ref, class ptr&gt; struct list_iterator { list_node&lt;type&gt;* _node; list_iterator(list_node&lt;type&gt;* node) :_node(node) {} list_iterator&lt;type, ref, ptr&gt;&amp; operator&#43;&#43;() { this-&gt;_node = _node-&gt;_next; return *this; } list_iterator&lt;type, ref, ptr&gt;&amp; operator--() { this-&gt;_node = _node-&gt;_prev; return *this; } list_iterator&lt;type, ref, ptr&gt; operator&#43;&#43;(int) { list_iterator&lt;type, ref, ptr&gt; temp = *this; this-&gt;_node = _node-&gt;_next; return temp; } list_iterator&lt;type, ref, ptr&gt; operator--(int) { list_iterator&lt;type, ref, ptr&gt; temp = *this; this-&gt;_node = _node-&gt;_prev; return temp; } // l1 !">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-10T16:59:37+08:00">
    <meta property="article:modified_time" content="2024-08-10T16:59:37+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STL list的主要接口模拟实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="STLlist_1"></a>STL-list是什么</h2> 
<p>STL里面的list本质上就是一个双向带头循环链表,如果不知道什么是双链表的话可以去看看这篇文章<a href="https://blog.csdn.net/2302_80245587/article/details/137792069">双链表</a><br> 就像下面这种C语言双链表结构<br> <img src="https://images2.imgbox.com/c3/02/mI7FsX38_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/f3/f8/GlFuTH3r_o.png" alt="在这里插入图片描述"></p> 
<p>只不过在这个原有的基础之上添加了增删查改的功能，让他变得更高级更实用<br> 相当于把这个list封装了一遍，让我们可以调用他的接口，更加方便快捷，下面我们来看看具体怎么实现</p> 
<h2><a id="list_8"></a>list的模拟实现</h2> 
<p>在list里面有点麻烦的就是他的迭代器，这个和string还有vector的迭代器有点不一样，他的内存空间不是连续的，我们不能随机访问<br> 所以我们把list分为3个部分写成两个struct和一个class，<strong>（struct的默认是公有的，这样我们在调用迭代器，还有创建节点的时候会方便</strong>一**些不像class默认是私有的）<strong>第一个是节点，这里定义了节点的数据域，还有指向前驱和后继指针的指针域，第二个是迭代器，这里我们可以简单的把迭代器理</strong>解成一个指针，用来对list进行操作，**最后一个用来定义list本身。<br> 下面我们看看代码</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">type</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">list_node</span>
	<span class="token punctuation">{<!-- --></span>
		type data<span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> _prev<span class="token punctuation">;</span>

		<span class="token function">list_node</span><span class="token punctuation">(</span><span class="token keyword">const</span> type<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">data</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_prev</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>这里就是节点本身有数据域和指针域，这里我们用了一个模板，让编译器自动推导，这样的好处是可以存放任何数据，使用性更加广泛，<br> 这里我们用了初始化列表，来作为默认构造函数</p> 
<pre><code class="prism language-cpp"><span class="token function">list_node</span><span class="token punctuation">(</span><span class="token keyword">const</span> type<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">data</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_prev</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>**const type&amp; val = type()**这里我们用了一个匿名对象来进行我们链表节点的构造，这样的好处就是，我们在构造节点的时候不用去手动去拿一个类去构造对象，这里的匿名对象自动去调用属于他自己的默认构造，列如int会去调用int的默认构造，匿名对象只在当前行起作用，出了当前行就自动销毁。</p> 
<h2><a id="list_38"></a>list的迭代器</h2> 
<pre><code class="prism language-cpp">	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">type</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">ptr</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">list_iterator</span>
	<span class="token punctuation">{<!-- --></span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> _node<span class="token punctuation">;</span>
		<span class="token function">list_iterator</span><span class="token punctuation">(</span>list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> node<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>

			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> temp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">return</span> temp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> temp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			<span class="token keyword">return</span> temp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// l1 != l2</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> l2<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">!=</span> l2<span class="token punctuation">.</span>_node<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> l2<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">==</span> l2<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_node<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">&amp;</span>_node<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>这里我们实现了主要的常用的迭代器的功能</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">type</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">ptr</span><span class="token operator">&gt;</span>
</code></pre> 
<p>这里的定义的模板参数需要讲一下，这里，<strong>实现了类模板给编译器，给了编译器不同的参数，编译器实例化了两个不同的类</strong>第一个是type就是数据类型，下面这个ref就是引用,ptr就是指针，这样是为了方便const调用,ref,ptr具体是什么不用管，编译器会根据传的数据类型来推导创建相对应的类，传const引用就是const ref ,const ptr，不传就是普通指针，普通引用，如果不用模板，就要写两个非常相似的类，这样就太冗余了，非常麻烦</p> 
<pre><code class="prism language-cpp">list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> _node<span class="token punctuation">;</span>
		<span class="token function">list_iterator</span><span class="token punctuation">(</span>list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> node<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>这里就是迭代器的默认构造，也是走的初始化列表，这里传了一个list_node类型的数据，也就是创建的节点来当构造参数，这里的迭代器我们可以把他理解成一个为我们list服务的专有指针，所以是list_node* _node类型，这个_node就是指针</p> 
<pre><code class="prism language-cpp">list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre> 
<p>这里就是实现迭代器++我们需要返回引用，因为要改变当前的迭代器的位置，这里的++不像vector还有string那样可以用原生指针，list的内存空间不连续，但他有指向前一个和下一个的指针<br> <img src="https://images2.imgbox.com/8c/cb/SYVYlrzR_o.png" alt="在这里插入图片描述"><br> 所以我们++就要返回当前迭代器指向的下一个地址就行了</p> 
<pre><code class="prism language-cpp">list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre> 
<p>迭代器–也同理<br> 下面是后置++迭代器，后置++，这里他会改变当前迭代器指向的位置，但会返回原来迭代器的位置，所以我们要创建一个temp变量来存放当前迭代器的值</p> 
<pre><code class="prism language-cpp">	list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> temp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token keyword">return</span> temp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>迭代器–也同理</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> l2<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">!=</span> l2<span class="token punctuation">.</span>_node<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>这里是判断两个迭代器的是不是不相等的，用当前迭代器指向的位置来判断，<br> 判断相等也同理</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">bool</span> <span class="token keyword">operator</span> <span class="token operator">==</span> <span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> l2<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_node <span class="token operator">==</span> l2<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>这里是对*的运算符重载，返回当前迭代器下面的数据域，这里就体现模板的作用了，这里的ref是没有被定义的可以返回普通的，也可以是const的</p> 
<pre><code class="prism language-cpp">ref <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_node<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们可以来试一下<br> <img src="https://images2.imgbox.com/f0/80/xIatm1df_o.png" alt="在这里插入图片描述"><br> 这里迭代器就讲解完了，我们来说说list</p> 
<h2><a id="list_173"></a>list</h2> 
<p>下面是代码</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">type</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">ref</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">ptr</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">list</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">init_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_head <span class="token operator">=</span> <span class="token keyword">new</span> list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">;</span>
		_head<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _head<span class="token punctuation">;</span>
		_head<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> _head<span class="token punctuation">;</span>
		_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">init_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//l2(l1)</span>
	<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">const</span> list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> l1<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">init_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> <span class="token keyword">const</span> ref<span class="token punctuation">,</span> <span class="token keyword">const</span> ptr<span class="token operator">&gt;</span> it <span class="token operator">=</span> l1<span class="token punctuation">.</span><span class="token function">const_begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span>l1<span class="token punctuation">.</span><span class="token function">const_end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
			it<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> li<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token punctuation">,</span> li<span class="token punctuation">.</span>_head<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>_size<span class="token punctuation">,</span> li<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// l1                             l2</span>
	list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> li<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">swap</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">auto</span> it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">erase</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token operator">~</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_head <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
	list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> <span class="token keyword">const</span> ref<span class="token punctuation">,</span> <span class="token keyword">const</span> ptr<span class="token operator">&gt;</span> <span class="token function">const_begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> <span class="token keyword">const</span> ref<span class="token punctuation">,</span> <span class="token keyword">const</span> ptr<span class="token operator">&gt;</span> <span class="token function">const_end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//tail newnode head</span>
	<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> type<span class="token operator">&amp;</span> input<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> newnode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-function"><span class="token function">list_node</span><span class="token generic class-name"><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> tail <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

		newnode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token punctuation">;</span>
		newnode<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> tail<span class="token punctuation">;</span>
		tail<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
		_size<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//pos newnode next</span>
	<span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> pos<span class="token punctuation">,</span> <span class="token keyword">const</span> type<span class="token operator">&amp;</span> input<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> newnode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-function"><span class="token function">list_node</span><span class="token generic class-name"><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> next <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> poser <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
		newnode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> next<span class="token punctuation">;</span>
		newnode<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> poser<span class="token punctuation">;</span>
		pos<span class="token punctuation">.</span>_node<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
		next<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
		_size<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// prev pos next</span>
	list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token function">erase</span><span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> pos<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> poser <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> next <span class="token operator">=</span> poser<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> prev <span class="token operator">=</span> poser<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
		<span class="token keyword">delete</span> poser<span class="token punctuation">;</span>
		prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> next<span class="token punctuation">;</span>
		next<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>

		<span class="token keyword">return</span> next<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">pop_fornt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_size<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_size<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token function">is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	size_t _size<span class="token punctuation">;</span>
	list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>这里，因为我们是双向循环带头链表，在初始化的时候就需要创建一个头节点，这个头节点不存放任何东西</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">init_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_head <span class="token operator">=</span> <span class="token keyword">new</span> list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">;</span>
		_head<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _head<span class="token punctuation">;</span>
		_head<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> _head<span class="token punctuation">;</span>
		_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>所以我们的默认构造函数，就要调用init_empty()来满足这个双向链表的结构特点</p> 
<pre><code class="prism language-cpp"><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">init_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在有头节点之后，我们在进行对数据的插入，修改等<br> 下面是拷贝构造函数</p> 
<pre><code class="prism language-cpp">	<span class="token comment">//l2(l1)</span>
	<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">const</span> list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> l1<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">init_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> <span class="token keyword">const</span> ref<span class="token punctuation">,</span> <span class="token keyword">const</span> ptr<span class="token operator">&gt;</span> it <span class="token operator">=</span> l1<span class="token punctuation">.</span><span class="token function">const_begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span>l1<span class="token punctuation">.</span><span class="token function">const_end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
			it<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>这个拷贝构造函数很巧妙，用了一个尾插来解决，把原始list里面的值复制一份拿下来，这里的必须是 const ref, const ptr，因为拷贝构造传的参数必须是const对类类型的对象的引用，这段代码用了迭代器来完成拷贝构造，it获取最先开始的位置，依次++直到最后一个迭代器位置<br> <img src="https://images2.imgbox.com/10/31/5fWh3P7y_o.png" alt="在这里插入图片描述"><br> 接下来就是赋值运算符重载</p> 
<pre><code class="prism language-cpp">	<span class="token comment">// l1                             l2</span>
	list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> li<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">swap</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span><span class="token operator">&amp;</span> li<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token punctuation">,</span> li<span class="token punctuation">.</span>_head<span class="token punctuation">)</span><span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span>_size<span class="token punctuation">,</span> li<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>这里很巧妙，直接交换两个对象指向的指针，还有大小，就行了，假设把l2复制给l1，this指针是指向l1，交换完之后this就是指向l2了，当swap函数结束之后，l1会自动销毁，带走l1所指向的链表，直接返回*this就可以了,就完成了赋值，<br> 下面是析构函数</p> 
<pre><code class="prism language-cpp">		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">auto</span> it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">erase</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token operator">~</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_head<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token operator">-&gt;</span>_head <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
</code></pre> 
<p>这里我们通过erase(it)这个函数来实现析构，这个函数就是删除当前节点函数，也是通过两个迭代器来控制区间，最后就是删除头节点<br> 下面这些就是非常简单的小函数了，返回开始和结束的迭代器，还有const版本</p> 
<pre><code class="prism language-cpp">list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> <span class="token keyword">const</span> ref<span class="token punctuation">,</span> <span class="token keyword">const</span> ptr<span class="token operator">&gt;</span> <span class="token function">const_begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> <span class="token keyword">const</span> ref<span class="token punctuation">,</span> <span class="token keyword">const</span> ptr<span class="token operator">&gt;</span> <span class="token function">const_end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>下面我们来说说erase</p> 
<pre><code class="prism language-cpp">list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> <span class="token function">erase</span><span class="token punctuation">(</span>list_iterator<span class="token operator">&lt;</span>type<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> ptr<span class="token operator">&gt;</span> pos<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> poser <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
	list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> next <span class="token operator">=</span> poser<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
	list_node<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token operator">*</span> prev <span class="token operator">=</span> poser<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
	<span class="token keyword">delete</span> poser<span class="token punctuation">;</span>
	prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> next<span class="token punctuation">;</span>
	next<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>

	<span class="token keyword">return</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里我们可以画图来理解一下<br> <img src="https://images2.imgbox.com/7b/9c/mTi5s9ku_o.png" alt="在这里插入图片描述"><br> 像push_back和insert可以看看开头给的文章链接，里面有更详细的讲解</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">void</span> <span class="token function">pop_fornt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		_size<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		_size<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_size<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_size<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">bool</span> <span class="token function">is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>_size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>这些小函数就不需要过多的讲解了删除头部，和删除尾部都可以调用erase来解决，判空可以判断_size是不是为0，size，我们在对链表中push_back ，insert, 等，里面都有对size进行统计，这样统计size更加方便，不用在去新写一个函数进行对size进行统计<br> <strong>print打印函数</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">print_type</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span>print_type<span class="token operator">&amp;</span> p1<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	list_iterator<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">&gt;</span> it <span class="token operator">=</span> p1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> p1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		it<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里，我们创建了一个模板类，这里和上面一样可以传不同的数据类型进来进行打印，不同的数据类型实例化不同的类型，提高了函数的利用性<br> 以上就是对list的主要接口的实现，如果有什么问题欢迎指正！<br> 完</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/435e636c223d7827aee260921cc4f308/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43; | list</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e9b4cfd7259ecf4b1d2656d83562d9be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LDR6020在Type-C手机同时充电与USB2.0数据传输方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>