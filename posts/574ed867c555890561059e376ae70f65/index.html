<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>最新开源的解析效果非常好的PDF解析工具MinerU （pdf2md pdf2json） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/574ed867c555890561059e376ae70f65/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="最新开源的解析效果非常好的PDF解析工具MinerU （pdf2md pdf2json）">
  <meta property="og:description" content="毫不夸张的说 PDF解析工具MinerU是照进RAG黑暗中的一道光——这是我对它的评价。我测过太多了文档解析工具！ 最近在做文档解析的工作。看了很多的开源的文档解析的工具，版面分析的工具，其中包括paddelpaddel这样30k&#43;star的明星工具。但是效果都觉得不好。 MinerU是一个最近开源的文档解析工具，可以把PDF转成json结构，还可以转成md格式。可以解析得到其中的图片，表格，可以得到段落，可以得到标题，这是很哇塞的事情。因为最近RAG特别火热，这些都是RAG非常需要的。文档解析是非常重要的一个环节。可以看看这篇文章。 RAG的上限在哪里？边界在哪里？_rag的限制-CSDN博客 虽然现在MinerUstar数量不高，1k star都不到，但是绝对会涨起来的。我们调研对比过很多开源的工具，效果都强差人意，这个是我看到的最满意的一个。甚至要比我们生产环境的都要好一些。MinerUstar 绝对是一个为RAG而创造的工具，开源世界的一道光。 这篇文章会详细介绍它的解析效果，它的优势和不足。并且给出详细的安装教程。MinerU 在github上的安装教程太粗糙了。一堆问题。 环境介绍 windows10 环境
使用CPU运行
Magic-PDF简介 MinerU 是一款一站式、开源、高质量的数据提取工具，主要包含以下功能:
Magic-PDF PDF文档提取Magic-Doc 网页与电子书提取 Magic-PDF 是一款将 PDF 转化为 markdown 格式的工具。支持转换本地文档或者位于支持S3协议对象存储上的文件。
解析系效果总结 我觉得不妨先看看解析的效果，不着急折腾环境，先看看我列出来的缺点是否能接受。或者看看优点是不是自己想要的。再去安装它。
缺点 问题1： 解析速度慢 这里使用的CPU跑的，6页大概两三分钟。解析走的纯模型，先版面分析，再ocr，再公式检测。
模型初始化耗时167s，之后每页大概是16s
问题2：表格解析成图片 把表格处理成了图片
原文件如下所示
解析结果如下所示
原文件如下
解析后的结果
问题3：标题识别不准确，且没有分层 原文件
解析后的结果
问题4:财报中的表格没有识别出来 优点 优点1：论文版面分析准确 表定位，图表定位准确。测了一篇论文，都正确。并且准确获取到了表格和图片的caption
支持多栏，解析顺序是正确的
优点2：混乱的杂志 &#43; 多栏 &#43; 图片 解析效果挺不错。一页多栏，顺序是对的。
优点3：多语言 测了中文和英文。都可以，github上的描述，支持176种语言
优点4：获取了表格和图片的caption 能够获取到caption并且单独存储了。
优点5：页眉页脚、脚注识别准确 转md的时候，都已经去掉了。
优点6：段落结构比较好 段落合并的好。得到的结果多数是自然段落
优点7：可以解析公式 优点8：多平台多环境支持 支持windows/linux/mac平台；支持cpu和gpu环境
安装MinerU 虚拟化环境 conda create -n MinerU python=3.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-18T23:36:13+08:00">
    <meta property="article:modified_time" content="2024-07-18T23:36:13+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">最新开源的解析效果非常好的PDF解析工具MinerU （pdf2md pdf2json）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <div>
     毫不夸张的说 PDF解析工具MinerU是照进RAG黑暗中的一道光——这是我对它的评价。我测过太多了文档解析工具！ 
 </div> 
 <div></div> 
 <div>
     最近在做文档解析的工作。看了很多的开源的文档解析的工具，版面分析的工具，其中包括paddelpaddel这样30k+star的明星工具。但是效果都觉得不好。 
 </div> 
 <div></div> 
 <div>
     MinerU是一个最近开源的文档解析工具，可以把PDF转成json结构，还可以转成md格式。可以解析得到其中的图片，表格，可以得到段落，可以得到标题，这是很哇塞的事情。因为最近RAG特别火热，这些都是RAG非常需要的。文档解析是非常重要的一个环节。可以看看这篇文章。 
  <a href="https://blog.csdn.net/star1210644725/article/details/140088334?spm=1001.2014.3001.5502" title="RAG的上限在哪里？边界在哪里？_rag的限制-CSDN博客">RAG的上限在哪里？边界在哪里？_rag的限制-CSDN博客</a> 
 </div> 
 <div></div> 
 <div>
     虽然现在MinerUstar数量不高，1k star都不到，但是绝对会涨起来的。我们调研对比过很多开源的工具，效果都强差人意，这个是我看到的最满意的一个。甚至要比我们生产环境的都要好一些。MinerUstar 绝对是一个为RAG而创造的工具，开源世界的一道光。 
 </div> 
 <div></div> 
 <div>
     这篇文章会详细介绍它的解析效果，它的优势和不足。并且给出详细的安装教程。MinerU 在github上的安装教程太粗糙了。一堆问题。 
 </div> 
</blockquote> 
<div> 
 <h2 style="margin-left:0pt;text-align:left;"></h2> 
 <h2>环境介绍</h2> 
 <p>windows10 环境</p> 
 <p>使用CPU运行</p> 
 <p></p> 
 <h2>Magic-PDF简介</h2> 
 <p></p> 
 <p>MinerU 是一款一站式、开源、高质量的数据提取工具，主要包含以下功能:</p> 
 <ul><li><a href="https://github.com/opendatalab/MinerU/blob/master/README_zh-CN.md#Magic-PDF" title="Magic-PDF">Magic-PDF</a> PDF文档提取</li><li><a href="https://github.com/opendatalab/MinerU/blob/master/README_zh-CN.md#Magic-Doc" title="Magic-Doc">Magic-Doc</a> 网页与电子书提取</li></ul> 
 <h2></h2> 
 <p>Magic-PDF 是一款将 PDF 转化为 markdown 格式的工具。支持转换本地文档或者位于支持S3协议对象存储上的文件。</p> 
 <p></p> 
 <p><img alt="" height="657" src="https://images2.imgbox.com/c7/3a/8Ny3xqeI_o.png" width="945"></p> 
 <p></p> 
 <h2 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">解析系效果总结</span></strong></h2> 
 <p style="margin-left:0;text-align:left;">我觉得不妨先看看解析的效果，不着急折腾环境，先看看我列出来的缺点是否能接受。或者看看优点是不是自己想要的。再去安装它。</p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">缺点</span></strong></h3> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">问题1： 解析速度慢</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">这里使用的CPU跑的，6页大概两三分钟。解析走的纯模型，先版面分析，再ocr，再公式检测。</span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">模型初始化耗时167s，之后每页大概是16s</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="407" src="https://images2.imgbox.com/77/0c/hC5Yqk4i_o.png" width="1200"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">问题2：表格解析成图片</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">把表格处理成了图片</span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">原文件如下所示</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="430" src="https://images2.imgbox.com/8c/e5/X8juuqhS_o.png" width="992"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">解析结果如下所示</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="360" src="https://images2.imgbox.com/2b/32/lcIcrMzv_o.png" width="835"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">原文件如下</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="722" src="https://images2.imgbox.com/9c/c9/sCNAl70O_o.png" width="849"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">解析后的结果</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="306" src="https://images2.imgbox.com/9e/67/2oy8ez2k_o.png" width="1200"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">问题3：标题识别不准确，且没有分层</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">原文件</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="734" src="https://images2.imgbox.com/79/8a/w5lEuDg7_o.png" width="573"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">解析后的结果</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="567" src="https://images2.imgbox.com/67/71/nmqhZr3o_o.png" width="1200"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">问题4:财报中的表格没有识别出来</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="718" src="https://images2.imgbox.com/2d/e5/UPk6pUi4_o.png" width="963"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点</span></strong></h3> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点1：论文版面分析准确</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">表定位，图表定位准确。测了一篇论文，都正确。并且准确获取到了表格和图片的caption</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">支持多栏，解析顺序是正确的</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点2：混乱的杂志 + 多栏 + 图片</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">解析效果挺不错。一页多栏，顺序是对的。</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点3：多语言</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">测了中文和英文。都可以，github上的描述，支持176种语言</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点4：获取了表格和图片的caption</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">能够获取到caption并且单独存储了。</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点5：页眉页脚、脚注识别准确</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">转md的时候，都已经去掉了。</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点6：段落结构比较好</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">段落合并的好。得到的结果多数是自然段落</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点7：可以解析公式</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">优点8：多平台多环境支持</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">支持windows/linux/mac平台；支持cpu和gpu环境</span></p> 
 <p></p> 
 <h2 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">安装MinerU </span></strong></h2> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">虚拟化环境</span></strong></h3> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">conda create -n MinerU python=3.10</span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">conda activate MinerU</span></span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">安装配置</span></strong></h3> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">pip install magic-pdf[full-cpu]</span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">这一步最好有科学上网，不然可能拉不到。</span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">pip install detectron2 --extra-index-url https://myhloli.github.io/wheels/</span></span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">下载模型</span></strong></h3> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">模型，这里是模型没有下载，会报错如下</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="30" src="https://images2.imgbox.com/80/35/OhYFbjB4_o.png" width="829"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">这里为了方便，使用git来从魔搭上拉取</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <pre><span style="background-color:#fafafa;"><code><span style="color:#dd4a68;">git</span><span style="color:#000000;"> clone https://www.modelscope.cn/wanderkid/PDF-Extract-Kit.git</span>
</code></span></pre> 
 <p></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">如果想要使用其它的方式拉取，参考</span></p> 
 <p style="margin-left:0;text-align:left;"><a href="https://github.com/opendatalab/MinerU/blob/master/docs/how_to_download_models_zh_cn.md" title="MinerU/docs/how_to_download_models_zh_cn.md at master · opendatalab/MinerU · GitHub">MinerU/docs/how_to_download_models_zh_cn.md at master · opendatalab/MinerU · GitHub</a></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">修改配置文件</span></strong></h3> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#1f2328;">在仓库根目录可以获得 </span></span><a href="https://github.com/opendatalab/MinerU/blob/master/magic-pdf.template.json" title="MinerU/magic-pdf.template.json at master · opendatalab/MinerU · GitHub">MinerU/magic-pdf.template.json at master · opendatalab/MinerU · GitHub</a><span style="background-color:#ffffff;"><span style="color:#1f2328;"> 文件</span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">这里解释一下这个命令，实际上是把配置文件发在了c盘的user目录下。</span></p> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">cp magic-pdf.template.json </span></span><span style="background-color:#f6f8fa;"><span style="color:#333333;">~</span></span><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">/magic-pdf.json</span></span></p> 
 <p style="margin-left:0;text-align:left;"><span style="background-color:#f6f8fa;"><span style="color:#1f2328;">修改配置文件的内容，如下图所示。 output-dir是解析后的文件结果存放的目录。 models-dir是下载的模型的地址。</span></span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="236" src="https://images2.imgbox.com/17/a3/q6eDWLrH_o.png" width="919"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">如果还是不知道放在哪里，可以先启动一下，会报一个错误，找不到配置文件</span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">magic-pdf pdf-command --pdf "page1.pdf" 注意这里替换成自己文件</span></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">根据报错，把上述的配置文件放过去就可以。</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h3 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">接下来测试解析效果</span></strong></h3> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">magic-pdf pdf-command --pdf "困难pdf节选西藏奇正2022.pdf" --inside_model true</span></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">正常解析</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="485" src="https://images2.imgbox.com/c4/45/JatPmab6_o.png" width="1198"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h4 style="margin-left:0pt;text-align:left;"><strong><span style="color:#1a1a1a;">解析后得到的结果</span></strong></h4> 
 <p style="margin-left:0;text-align:left;"><span style="color:#333333;">包含了md结构，json结构，和版面分析的结果</span></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="292" src="https://images2.imgbox.com/0b/24/z4ASsq26_o.png" width="784"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><strong><span style="color:#333333;">md</span></strong></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="195" src="https://images2.imgbox.com/97/47/9utd5ezf_o.png" width="1200"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"><strong><span style="color:#333333;">layout</span></strong></p> 
 <p style="margin-left:0;text-align:left;"><img alt="" height="682" src="https://images2.imgbox.com/e2/c0/n6cG7HsH_o.png" width="955"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <p style="margin-left:0;text-align:left;"></p> 
 <h2 style="margin-left:0pt;text-align:left;"></h2> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/62992984b540b6521f0288df4ce3a3a7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;】C&#43;&#43;11的新特性 --- 右值引用与移动语义</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f41c6cef8a84f4dbc5b4061b4c020b80/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Docker-compose单机容器集群编排</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>