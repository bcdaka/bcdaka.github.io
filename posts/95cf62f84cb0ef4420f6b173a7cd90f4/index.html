<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SwiftUI 6.0（iOS 18.0）滚动视图新增的滚动阶段（Scroll Phase）监听功能趣谈 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/95cf62f84cb0ef4420f6b173a7cd90f4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SwiftUI 6.0（iOS 18.0）滚动视图新增的滚动阶段（Scroll Phase）监听功能趣谈">
  <meta property="og:description" content="何曾几时，在 SwiftUI 开发中的秃头小码农们迫切需要一种能够读取当前滚动状态的方法。
在过去，他们往往需要借助于 UIKit 的神秘力量。不过这一切在 SwiftUI 6.0 中已成“沧海桑田”。
在本篇博文中，您将学到如下内容： 1. ScrollView 滚动阶段简介2. 普度众生的 SwiftUI 6.03. 滚动阶段更改上下文（ScrollPhaseChangeContext）4. 如何监听列表（List）的滚动阶段总结 相信学完本课后，小伙伴们在需要监听滚动视图滚动阶段的应用场景中定能得心应手、游刃有余！
那还等什么呢？让我们马上开始吧！Let‘s go！！！😃
1. ScrollView 滚动阶段简介 所谓滚动阶段（Scroll Phase）是指滚动视图在滚动前、滚动中以及滚动后所处的不同阶段。
早在 macOS 10.9&#43; 的 CoreGraphics 中就有滚动阶段的概念了：
如果我们能及时的读取各个滚动阶段的值，我们就可以根据它们为滚动视图提供更加“银杏化”的定制和更流畅滚动附加体验。
在 SwiftUI 6.0 之前，我们无法使用行之有效的方法来读取滚动视图当前所处的滚动阶段，只有委身救助于 UIKit 的秉轴持钧。
然而，这一切在 SwiftUI 6.0 中有了翻天覆地的变化！
2. 普度众生的 SwiftUI 6.0 自从 SwiftUI 6.0（iOS 18.0）开始，“顿悟”的苹果终于提供滚动阶段的监听功能了。
一方面，我们有了描述滚动阶段的新类型 ScrollPhase：
它包含 5 个枚举值分别对应于 5 种滚动阶段：
@frozen public enum ScrollPhase : Equatable { case idle case tracking case interacting case decelerating case animating public var isScrolling: Bool { get } } 这些滚动阶段的含义如下所示：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-06T13:06:35+08:00">
    <meta property="article:modified_time" content="2024-07-06T13:06:35+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SwiftUI 6.0（iOS 18.0）滚动视图新增的滚动阶段（Scroll Phase）监听功能趣谈</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/9f/2a/TM2nZFYB_o.png" alt="在这里插入图片描述"></p> 
<p>何曾几时，在 SwiftUI 开发中的秃头小码农们迫切需要一种能够读取当前滚动状态的方法。</p> 
<p><img src="https://images2.imgbox.com/fc/a3/WTYjKOH6_o.png" alt="在这里插入图片描述"></p> 
<p>在过去，他们往往需要借助于 UIKit 的神秘力量。不过这一切在 SwiftUI 6.0 中已成“沧海桑田”。<br> </p> 
<div class="toc"> 
 <h4>在本篇博文中，您将学到如下内容：</h4> 
 <ul><li><a href="#1_ScrollView__15" rel="nofollow">1. ScrollView 滚动阶段简介</a></li><li><a href="#2__SwiftUI_60_29" rel="nofollow">2. 普度众生的 SwiftUI 6.0</a></li><li><a href="#3_ScrollPhaseChangeContext_125" rel="nofollow">3. 滚动阶段更改上下文（ScrollPhaseChangeContext）</a></li><li><a href="#4_List_164" rel="nofollow">4. 如何监听列表（List）的滚动阶段</a></li><li><a href="#_217" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<p>相信学完本课后，小伙伴们在需要监听滚动视图滚动阶段的应用场景中定能得心应手、游刃有余！</p> 
<p>那还等什么呢？让我们马上开始吧！Let‘s go！！！😃</p> 
<hr> 
<h2><a id="1_ScrollView__15"></a>1. ScrollView 滚动阶段简介</h2> 
<p>所谓滚动阶段（Scroll Phase）是指滚动视图在滚动前、滚动中以及滚动后所处的不同阶段。</p> 
<p>早在 macOS 10.9+ 的 CoreGraphics 中就有滚动阶段的概念了：</p> 
<p><img src="https://images2.imgbox.com/7d/74/ADKqatwp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b8/be/r0n8MQBz_o.png" alt="在这里插入图片描述"></p> 
<p>如果我们能及时的读取各个滚动阶段的值，我们就可以根据它们为滚动视图提供更加“银杏化”的定制和更流畅滚动附加体验。</p> 
<p>在 SwiftUI 6.0 之前，我们无法使用行之有效的方法来读取滚动视图当前所处的滚动阶段，只有委身救助于 UIKit 的秉轴持钧。</p> 
<p>然而，这一切在 SwiftUI 6.0 中有了翻天覆地的变化！</p> 
<h2><a id="2__SwiftUI_60_29"></a>2. 普度众生的 SwiftUI 6.0</h2> 
<p>自从 SwiftUI 6.0（iOS 18.0）开始，“顿悟”的苹果终于提供滚动阶段的监听功能了。</p> 
<p>一方面，我们有了描述滚动阶段的新类型 ScrollPhase：</p> 
<p><img src="https://images2.imgbox.com/26/34/iWdboOtq_o.png" alt="在这里插入图片描述"></p> 
<p>它包含 5 个枚举值分别对应于 5 种滚动阶段：</p> 
<pre><code class="prism language-swift"><span class="token attribute atrule">@frozen</span> <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">ScrollPhase</span> <span class="token punctuation">:</span> <span class="token class-name">Equatable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> idle
    <span class="token keyword">case</span> tracking
    <span class="token keyword">case</span> interacting
    <span class="token keyword">case</span> decelerating
    <span class="token keyword">case</span> animating
    
    <span class="token keyword">public</span> <span class="token keyword">var</span> isScrolling<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这些滚动阶段的含义如下所示：</p> 
<ul><li>Idle - 表示当前滚动视图处于空闲状态，可以认为“嘛事没有”；</li><li>Tracking - 表示当前用户正轻触滚动视图但并没有开始滚动；</li><li>Interacting - 表示用户正在开始或继续滚动着视图的内容；</li><li>Decelerating -表示用户已结束滚动操作，滚动视图的滚动正在减速直至静止状态；</li><li>Animating - 表示滚动视图被 ScrollPosition 或 ScrollViewReader 类型通过代码动态滚动到了指定的位置；</li></ul> 
<p>另一方面，我们有了新的视图改器方法 onScrollPhaseChange 专注于滚动阶段的监听：</p> 
<p><img src="https://images2.imgbox.com/36/79/GHIFowi9_o.png" alt="在这里插入图片描述"></p> 
<p>有了以上两者的珠联璧合，现在我们在 SwiftUI 6.0 即可轻而易举的监听任何滚动视图的滚动阶段啦：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ScrollView</span> <span class="token punctuation">{<!-- --></span>
            
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">50</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> i <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                
                <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span>onScrollPhaseChange <span class="token punctuation">{<!-- --></span> old<span class="token punctuation">,</span> new <span class="token keyword">in</span>
            <span class="token keyword">guard</span> old <span class="token operator">!=</span> new <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"new phase: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">new</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在 Xcode 16beta 中运行效果如下所示：</p> 
<p><img src="https://images2.imgbox.com/65/27/1xz4Lara_o.gif" alt="在这里插入图片描述"></p> 
<p>ScrollPhase 类型还提供一个 isScrolling 计算属性，我们可以用它来判断当前是否正在滚动。比如，假若视图正在被滚动我们就“遮挡”它的显示内容：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token attribute atrule">@State</span> <span class="token keyword">var</span> isScrolling <span class="token operator">=</span> <span class="token boolean">false</span>
        
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ScrollView</span> <span class="token punctuation">{<!-- --></span>
            
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">50</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> i <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                
                <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">redacted</span><span class="token punctuation">(</span>reason<span class="token punctuation">:</span> isScrolling <span class="token operator">?</span> <span class="token punctuation">.</span>placeholder <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span>onScrollPhaseChange <span class="token punctuation">{<!-- --></span> old<span class="token punctuation">,</span> new <span class="token keyword">in</span>
            <span class="token keyword">guard</span> old <span class="token operator">!=</span> new <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"正在滚动？</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">new<span class="token punctuation">.</span>isScrolling</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
            isScrolling <span class="token operator">=</span> new<span class="token punctuation">.</span>isScrolling
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>执行效果如下图所示：</p> 
<p><img src="https://images2.imgbox.com/3d/57/iTB0nl4N_o.gif" alt="在这里插入图片描述"></p> 
<h2><a id="3_ScrollPhaseChangeContext_125"></a>3. 滚动阶段更改上下文（ScrollPhaseChangeContext）</h2> 
<p>除此之外，SwiftUI 6.0 中新增的 onScrollPhaseChange 修改器还提供另一种重载（Overloading）形式，在该重载方法的闭包中我们会得到一个 ScrollPhaseChangeContext 上下文对象，使用它我们可以更多的掌控滚动的其它全局信息：</p> 
<p><img src="https://images2.imgbox.com/5e/36/fjeb0KAd_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-swift"><span class="token keyword">nonisolated</span>
<span class="token keyword">func</span> <span class="token function-definition function">onScrollPhaseChange</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> action<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">ScrollPhase</span><span class="token punctuation">,</span> <span class="token class-name">ScrollPhase</span><span class="token punctuation">,</span> <span class="token class-name">ScrollPhaseChangeContext</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">some</span> <span class="token class-name">View</span>
</code></pre> 
<p>演示代码如下所示，可以看到在其中我们使用 ScrollPhaseChangeContext 上下文对象打印出了更多的与滚动相关的信息：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>        
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ScrollView</span> <span class="token punctuation">{<!-- --></span>
            
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">50</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> i <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                
                <span class="token class-name">Divider</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>        
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span>onScrollPhaseChange <span class="token punctuation">{<!-- --></span> old<span class="token punctuation">,</span> new<span class="token punctuation">,</span> context <span class="token keyword">in</span>
            <span class="token keyword">guard</span> old <span class="token operator">!=</span> new <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">new</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">\n</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">context</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果如下所示：</p> 
<p><img src="https://images2.imgbox.com/b0/d3/SDyIo7jQ_o.gif" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>ScrollPhaseChangeContext(geometry: &lt;ScrollGeometry: contentOffset (0.0, 1694.3333333333333), contentSize (393.0, 4092.0), contentInsets &lt;top: 59.0, leading: 0.0, bottom: 34.0, trailing: 0.0&gt;, containerSize (393.0, 759.0), visibleRect (0.0, 1694.3333333333333, 393.0, 852.0)&gt;, velocity: Optional((0.0, 0.0)))</p> 
</blockquote> 
<h2><a id="4_List_164"></a>4. 如何监听列表（List）的滚动阶段</h2> 
<p>虽然 SwiftUI 6.0 破茧而出的“大杀器” onScrollPhaseChange 对于我们监听滚动状态大有裨益，不过目前它只能应用在 ScrollView 视图的外层。这意味着，如果将其放在 List 上将会“徒劳无功”：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>        
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">50</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> i <span class="token keyword">in</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>        
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span>onScrollPhaseChange <span class="token punctuation">{<!-- --></span> old<span class="token punctuation">,</span> new<span class="token punctuation">,</span> context <span class="token keyword">in</span>
            <span class="token keyword">guard</span> old <span class="token operator">!=</span> new <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">new</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">\n</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">context</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>上述代码附着在 List 之上的 onScrollPhaseChange 修改器回调闭包将会无所事事，直接沦为“不舞之鹤”。</p> 
<p>诚然我们可以使用 ScrollView 来平替 List，不过如果能在 List 上直接监听滚动阶段岂不更妙？</p> 
<p>在 iOS 18.0beta 中，我们可以通过将 List 包裹在 Form 容器中暂时绕开此问题：</p> 
<pre><code class="prism language-swift"><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>        
    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Form</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">List</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">ForEach</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">...</span><span class="token number">50</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> i <span class="token keyword">in</span>
                    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"Item </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">i</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span>onScrollPhaseChange <span class="token punctuation">{<!-- --></span> old<span class="token punctuation">,</span> new<span class="token punctuation">,</span> context <span class="token keyword">in</span>
            <span class="token keyword">guard</span> old <span class="token operator">!=</span> new <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">new</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">\n</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">context</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行代码可以看到，我们用 onScrollPhaseChange 修改器成功的捕获到了 List 中滚动阶段的改变以及其它滚动信息：</p> 
<p><img src="https://images2.imgbox.com/a3/95/rtGetagU_o.gif" alt="在这里插入图片描述"></p> 
<p>我不确定这一情况在 iOS 18.0 正式版中是否能够修复，让我们拭目以待吧！</p> 
<h2><a id="_217"></a>总结</h2> 
<p>在本篇博文中，我们介绍了 SwiftUI 6.0（iOS 18.0）滚动视图最新的滚动阶段（Scroll Phase）监听功能，并讨论了如何在原本不支持该功能的列表（List）上使用它。</p> 
<p>感谢观赏，再会啦！😎</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/93f0ab6352cc7fbbc298e6a02dc2cfb4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android基础知识</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/214ea1a64a0b77c2b4049ffd6acb6a64/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">lodash-es 基本使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>