<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mac如何在终端用命令批量修改文件名？ - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/5037e2c123f8ea2ec4b25ad2e6d0290d/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Mac如何在终端用命令批量修改文件名？">
  <meta property="og:description" content="1. 场景还原 我们从网上下载的教程文件名中可能会带有视频来源等不相干的信息，使得文件名冗长不便于查看，例如下面的文件，包含一些无用的后缀：
由于这些文件可能分布在很多个文件夹或子文件夹中，一个个手动改肯定不现实，我们需要一个命令快速批量地修改所有文件名。
2. 操作步骤 我们可以使用rename命令批量修改文件名，rename是Linux系统自带的一个命令行工具，用于批量重命名文件。在 macOS 中，默认情况下是没有 rename 命令的，因为 macOS 使用的是 BSD(Berkeley Software Distribution, 伯克利软件发行版, 一个类 Unix 的操作系统) 的变种，而不是 Linux。
我们可以通过安装 Homebrew 这样的软件包管理器来获取 rename 命令，如果已安装请跳过此步骤。
1. 安装Homebrew和rename 安装Homebrew
打开终端或者iterm输入以下命令，按照提示输入密码：
/bin/bash -c &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&#34; 安装rename
brew install rename 2. 使用find命令筛选出需要修改的文件 find 是一个强大的命令行工具，用于在文件系统中搜索文件和目录。Mac和Linux系统自带find命令，无需安装。find命令很灵活，如果你对find命令不太熟悉，请参考拓展知识根据实际需求筛选出需要修改的文件，下面是一些例子：
例1. 查找当前目录及其子目录下所有mp4文件：
find . -type f -name &#34;*.mp4&#34; 例2. 只查找当前目录所有mp4文件，不查找找子目录中的文件，使用-depth参数：
find . -type f -name &#34;*.mp4&#34; -depth 1 例3. 查找指定目录下及其子目录下所有文件名包含“数字-数字”的文件，使用-regex参数，后面跟正则表达式
find /path/to/search -type f -regex &#39;.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-23T09:00:57+08:00">
    <meta property="article:modified_time" content="2024-04-23T09:00:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mac如何在终端用命令批量修改文件名？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1. 场景还原</h2> 
<p>我们从网上下载的教程文件名中可能会带有视频来源等不相干的信息，使得文件名冗长不便于查看，例如下面的文件，包含一些无用的后缀：</p> 
<p><img alt="" height="326" src="https://images2.imgbox.com/31/39/4aMDShnJ_o.png" width="1200"></p> 
<p>由于这些文件可能分布在很多个文件夹或子文件夹中，一个个手动改肯定不现实，我们需要一个命令<strong>快速批量</strong>地修改所有文件名。</p> 
<p></p> 
<h2>2. 操作步骤</h2> 
<p>我们可以使用<strong>rename命令</strong>批量修改文件名，<code>rename</code>是Linux系统自带的一个命令行工具，<strong>用于批量重命名文件</strong>。在 macOS 中，默认情况下是没有 <code>rename</code> 命令的，因为 macOS 使用的是 BSD(Berkeley Software Distribution, 伯克利软件发行版, 一个类 Unix 的操作系统) 的变种，而不是 Linux。</p> 
<p>我们可以通过安装 Homebrew 这样的软件包管理器来获取 <code>rename</code> 命令，如果已安装请跳过此步骤。</p> 
<h3><strong>1. 安装Homebrew和rename</strong></h3> 
<p><strong>安装Homebrew</strong></p> 
<p>打开终端或者iterm输入以下命令，按照提示输入密码：</p> 
<pre><code class="language-bash">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</code></pre> 
<p><strong>安装rename</strong></p> 
<pre><code class="language-bash">brew install rename</code></pre> 
<p></p> 
<h3>2. 使用find命令筛选出需要修改的文件</h3> 
<p><code>find</code> 是一个强大的命令行工具，用于<strong>在文件系统中搜索文件和目录</strong>。Mac和Linux系统自带find命令，无需安装。find命令很灵活，如果你对find命令不太熟悉，请参考拓展知识根据实际需求筛选出需要修改的文件，下面是一些例子：</p> 
<p>例1. 查找当前目录及其子目录下所有mp4文件：</p> 
<pre><code class="language-bash">find . -type f -name "*.mp4"</code></pre> 
<p>例2. 只查找当前目录所有mp4文件，不查找找子目录中的文件，使用-depth参数：</p> 
<pre><code class="language-bash">find . -type f -name "*.mp4" -depth 1</code></pre> 
<p>例3. 查找<strong>指定目录</strong>下及其子目录下所有文件名包含“数字-数字”的文件，使用-regex参数，后面跟<strong>正则表达式</strong></p> 
<pre><code class="language-bash">find /path/to/search -type f -regex '.*[0-9]-[0-9].*'</code></pre> 
<h3>3. 使用rename命令批量修改文件名 </h3> 
<p>关键是将需要修改的内容与正则表达式结合起来，<strong>请结合自己的需求修改正则表达式</strong>，下面提供一写例子：</p> 
<p><strong>例1</strong></p> 
<p>我们需要将下面所有mp4文件的"[瑞客论坛][www.ruike1.com]"去掉：</p> 
<p><img alt="" height="326" src="https://images2.imgbox.com/48/ae/TRKiiEzP_o.png" width="1200"></p> 
<h4>模拟运行</h4> 
<p>切换到所有文件夹的父目录，运行下面的命令，先<strong>模拟运行（防止修改出错）</strong>：</p> 
<pre><code class="language-bash">find . -name "*瑞客*.mp4" -type f -exec rename -v -n 's/\[瑞客论坛]\[www.ruike1.com]//g' {} \;</code></pre> 
<p> 下面是这个命令的解释：</p> 
<p><code>find .</code>: 在当前目录及其子目录中搜索文件和目录。</p> 
<p><code>-name "*瑞客*.mp4"</code>: 匹配文件名中包含 <code>瑞客</code> 字符串且以 <code>.mp4</code> 结尾的文件。</p> 
<p><code>-type f</code>: 限定搜索结果为普通文件。</p> 
<p><code>-exec rename -v -n 's/\[瑞客论坛]\[www.ruike1.com]//g' {} \;</code>: 对于每个找到的文件执行 <code>rename</code> 命令。<code>{}</code> 表示当前找到的文件名，<code>\;</code> 表示执行命令结束。</p> 
<p><code>rename</code>: 命令行文件重命名工具。</p> 
<p><code>-v</code>: 表示进行详细输出。</p> 
<p><code>-n</code>: 表示执行测试，即显示将要执行的操作但<strong>不实际执行</strong>。</p> 
<p><code>'s/\[瑞客论坛]\[www.ruike1.com]//g'</code>: 这是 Perl 风格的正则表达式替换。<code>s/old/new/g</code> 表示将字符串中的 <code>old</code> 替换为 <code>new</code>，<code>g</code> 表示全局替换。在这个表达式中，我们将 <code>[瑞客论坛][www.ruike1.com]</code> 替换为空，即删除这部分字符串。需要注意的是，<strong>正则表达式中的 <code>[</code>  是特殊字符，需要用 <code>\</code> 进行转义</strong>。</p> 
<p></p> 
<p><strong>输出结果检查</strong></p> 
<p>输出结果如果包含"<strong>would be renamed to</strong>"，表示正则表达式生效，但修改是否达到预期还要看后面的<strong>文件名是否修改正确</strong>，如下面的输出内容，表示修改符合我的预期（删除了多余后缀）：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/e0/97/VLU06DR9_o.png" width="1200"></p> 
<p>如果输出结果包含"unchanged"，表示<strong>正则表达式与实际需求不符</strong>，需要修改正则表达式。 </p> 
<p><img alt="" height="726" src="https://images2.imgbox.com/56/03/F1lYXtff_o.png" width="1200"></p> 
<p></p> 
<h4>运行修改 </h4> 
<p>当上一步的模拟运行达到预期后，或者你确定正则表达式填写无误后，可以去掉-n参数，直接运行修改，<strong>请注意，这种修改无法还原</strong></p> 
<pre><code class="language-bash">find . -name "*瑞客*.mp4" -type f -exec rename -v 's/\[瑞客论坛]\[www.ruike1.com]//g' {} \;</code></pre> 
<p>检查输出结果：</p> 
<p>由于加了-v参数，会输出详细步骤，如果你不需要，可去掉该参数运行，然后在访达直接查看修改后的结果。</p> 
<p><img alt="" height="616" src="https://images2.imgbox.com/48/24/TIwVAbdn_o.png" width="1200"></p> 
<p><img alt="" height="328" src="https://images2.imgbox.com/67/dc/iuIXNtto_o.png" width="940"></p> 
<p><strong>例2</strong></p> 
<p>例如，我还想删除文件名前面多余的序号</p> 
<p><img alt="" height="346" src="https://images2.imgbox.com/ea/61/tH1AOxU4_o.png" width="938"></p> 
<p>运行命令：</p> 
<pre><code class="language-bash">find . -name "*.mp4" -exec rename -v 's/\[.*]--//g' {} \;</code></pre> 
<h2>3. 拓展知识 </h2> 
<h3>find命令</h3> 
<p><code>find</code> 命令是一个强大的用于在文件系统中搜索文件和目录的工具，它具有广泛的功能和选项，可以<strong>根据各种条件来查找文件</strong>，例如文件名、文件类型、文件大小、权限等。下面详细介绍一下 <code>find</code> 命令的用法和常见参数：</p> 
<h4><strong>基本用法：</strong></h4> 
<pre><code class="language-bash">find [起始目录] [匹配条件] [动作]
</code></pre> 
<p><code>[起始目录]</code>：指定搜索的起始目录，默认为当前目录。</p> 
<p><code>[匹配条件]</code>：指定要匹配的条件，例如文件名、文件类型、大小等。</p> 
<p><code>[动作]</code>：指定在找到匹配项时要执行的操作，例如打印匹配项、执行其他命令等。</p> 
<h4><strong>常见参数：</strong></h4> 
<p><code>-name pattern</code>：按文件名模式匹配搜索文件。</p> 
<p><code>-type type</code>：指定搜索的文件类型，如 <code>f</code> 表示普通文件，<code>d</code> 表示目录。</p> 
<p><code>-size [+|-]size[unit]</code>：按文件大小搜索，可以使用 <code>+</code> 或 <code>-</code> 来指定大于或小于指定大小的文件，单位可以是 <code>c</code>（字节）、<code>k</code>（KB）、<code>M</code>（MB）、<code>G</code>（GB）等。</p> 
<p><code>-exec command {} \;</code>：对每个找到的文件执行指定的命令，<code>{}</code> 表示匹配到的文件。</p> 
<p><code>-print</code>：打印匹配项的路径。</p> 
<p><code>-delete</code>：删除匹配到的文件。</p> 
<p><strong><code>-regex</code><strong> </strong>pattern:  使用的是基于正则表达式的匹配模式</strong>，通常是使用 POSIX 扩展的正则表达式语法。这些正则表达式语法与普通的通配符模式（如 <code>-name</code> 参数中使用的 <code>*</code>、<code>?</code> 等）相比更加强大和灵活。</p> 
<p>-perm mode:  指定要搜索的权限</p> 
<ul><li><code>mode</code>：指定要匹配的权限模式。</li><li><code>mode</code> 是一个三位数的八进制数，分别表示用户、群组和其他用户的权限。</li><li>每个数字的含义分别为： 
  <ul><li>4：读权限（r）</li><li>2：写权限（w）</li><li>1：执行权限（x）</li></ul></li><li>若要匹配某种权限，只需将相应的数字相加即可。例如，读写权限为 6，读写执行权限为 7。</li></ul> 
<h4> 示例</h4> 
<p><code>find</code> 命令非常灵活，可以根据我们的需求组合不同的选项来实现各种搜索操作。使用前请确保理解每个选项的含义以及操作的影响。</p> 
<p>1. 在当前目录及其子目录中查找所有以 <code>.txt</code> 结尾的文件：</p> 
<pre><code class="language-bash">find . -name "*.txt"</code></pre> 
<p>2. 在 <code>/usr/bin</code> 目录中查找所有普通文件：</p> 
<pre><code class="language-bash">find /usr/bin -type f</code></pre> 
<p>3. 在 <code>/home</code> 目录及其子目录中查找大于 1GB 的文件并删除它们：</p> 
<pre><code class="language-bash">find /home -size +1G -delete</code></pre> 
<p>4. 在 <code>/var/log</code> 目录中查找所有 <code>.log</code> 结尾的文件并将它们复制到 <code>/backup</code> 目录下：</p> 
<pre><code class="language-bash">find /var/log -name "*.log" -exec cp {} /backup \;</code></pre> 
<p>5. 匹配文件名中包含两个数字之间有一个减号的文件：</p> 
<pre><code class="language-bash">find . -regex '.*[0-9]-[0-9].*'</code></pre> 
<p>6. 查找当前目录及其子目录中所有拥有读权限但没有写权限的文件：</p> 
<pre><code class="language-bash">find . -perm /400 ! -perm /200</code></pre> 
<p></p> 
<h3>rename命令 </h3> 
<p></p> 
<p><code>rename</code> 命令是用于<strong>批量重命名文件的命令行工具</strong>。它允许您使用正则表达式来匹配文件名，并通过指定的替换模式来修改文件名。</p> 
<h4>基本用法：</h4> 
<pre><code class="language-bash">rename [选项] '正则表达式' 文件名...</code></pre> 
<p><code>[选项]</code>：<code>rename</code> 命令支持一些选项，例如 <code>-v</code>（详细输出）、<code>-n</code>（测试模式，不实际重命名文件）、<code>-f</code>（强制执行，忽略警告）等。</p> 
<p><code>'正则表达式'</code>：用于匹配文件名的正则表达式模式，可以是 Perl 正则表达式。</p> 
<p><code>文件名...</code>：要重命名的文件名列表。</p> 
<h4>常用参数：</h4> 
<p><code>-v, --verbose</code>：显示详细的输出，即显示哪些文件被重命名成了什么。</p> 
<p><strong><code>-n, --no-act</code>：测试模式</strong>，不实际执行重命名操作，而是显示将要执行的重命名操作。这可以帮助您在执行真正的重命名之前进行预览。</p> 
<p><code>-f, --force</code>：强制执行操作，忽略警告。通常在重命名时文件名可能会冲突时使用。</p> 
<h4> 示例：</h4> 
<p>1. 使用 <code>-v</code> 参数显示详细输出，将当前目录下所有 <code>.txt</code> 文件的扩展名改为 <code>.bak</code>：</p> 
<pre><code class="language-bash">rename -v 's/\.txt$/.bak/' *.txt</code></pre> 
<p>2. 使用 <code>-n</code> 参数进行测试，将文件名中的空格替换为下划线：</p> 
<pre><code class="language-bash">rename -v -n 's/ /_/g' *</code></pre> 
<p>3. 在文件名前面添加前缀：</p> 
<pre><code class="language-bash">rename 's/^/prefix_/' *</code></pre> 
<p>4. 在文件名后面添加后缀：</p> 
<pre><code class="language-bash">rename 's/$/_suffix/' *</code></pre> 
<p>5. 使用 <code>-f</code> 参数强制执行操作，忽略警告，将当前目录下所有文件名中的大写字母改为小写：</p> 
<pre><code class="language-bash">rename -f 'y/A-Z/a-z/' *</code></pre> 
<p> 6. 与find命令结合</p> 
<p>例如：将 <code>/home/user/documents</code> 目录下所有以 <code>.txt</code> 结尾的文件的扩展名改为 <code>.bak</code>，可以使用 <code>find</code> 命令找到这些文件，然后再结合 <code>rename</code> 命令进行批量重命名。</p> 
<pre><code class="language-bash">find /home/user/documents -type f -name "*.txt" -exec rename -v 's/\.txt$/.bak/' {} \;</code></pre> 
<p>命令解释：</p> 
<p><code>find /home/user/documents</code>：在 <code>/home/user/documents</code> 目录及其子目录中搜索文件。</p> 
<p><code>-type f</code>：限定搜索结果为普通文件。</p> 
<p><code>-name "*.txt"</code>：匹配文件名以 <code>.txt</code> 结尾的文件。</p> 
<p><code>-exec rename -v 's/\.txt$/.bak/' {} \;</code>：对每个匹配到的文件执行 <code>rename</code> 命令，将 <code>.txt</code> 扩展名改为 <code>.bak</code>。<code>{}</code> 表示当前找到的文件，<code>\;</code> 表示命令结束。</p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9121e2aca38af45ee2a66cf2d481851d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SQL BETWEEN AND 语句</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5a2451c3fb6f422dbae1400d94d73c75/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux安装Weblogic保姆级教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>