<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【乐吾乐大屏可视化组态编辑器】事件交互-场景交互 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4a41f31700c3fc38be785ca997bce2c2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【乐吾乐大屏可视化组态编辑器】事件交互-场景交互">
  <meta property="og:description" content="场景交互 在线使用：https://v.le5le.com/ 乐吾乐大屏可视化可以实现大屏页面与内嵌2d/3d场景相互通信，底层原理是利用了iframe通过postMessage发送消息。
下面以2d场景为例，实现步骤如下：
1. 首先配置场景2（被嵌入页面）的内容。 ① 一个向外发送消息的按钮。 选中按钮，右侧选择“交互”面板，配置点击事件。动作类型选择“向父窗口发送消息”，消息名可以自己定（不要过于简单，以免和内置的消息冲突），这里叫做“two-message”。
② 一个监听父窗口消息的正方形图元。 点击正方形图元，可以给他配置一个动画效果，方便我们观察结果。
给这个正方形添加监听消息的交互事件，监听&#34;start&#34;/&#34;stop&#34;消息，分别控制当前正方形图元播放/暂停动画。
③ 点击保存，生成图纸id。 2. 配置场景1（外层父页面）的内容。 ① 创建场景2图元。 从控件-面板中拖入一个网页图元，在数据中配置网页地址为场景2的预览地址。为了方便定位，可以给它配置一个分组为“场景2”。
② 一个用于向2d场景发送消息的船型开关。 从控件中拖入一个船型开关，配置点击交互事件，事件触发条件分别监听船型开关的开/关状态，向场景2分别发送&#34;start&#34;/&#34;stop&#34;的消息。
③ 一个接收场景2消息的图元。 选中一个文本图元，添加监听消息的交互事件，消息名称填写上面确定的消息名，这里是“two-message”。执行动作填写弹出一个alert弹窗。
3. 保存后，点击运行查看运行结果。 点击船型开关可以控制场景2中正方形的闪烁/停止。点击场景2中的按钮，可以看到页面弹出alert弹窗。
项目地址
场景1
场景2
通过上面的操作我们可以知道，消息的发送方只负责发送消息，具体执行的内容都是消息的接收方自己接收消息后去执行的。大屏与3d场景的交互操作大同小异，官方方案中有相关案例。
3D可视化-智慧楼宇-案例演示">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-20T10:47:10+08:00">
    <meta property="article:modified_time" content="2024-08-20T10:47:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【乐吾乐大屏可视化组态编辑器】事件交互-场景交互</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>场景交互</h2> 
<p>在线使用：<a href="https://v.le5le.com/" rel="nofollow" title="https://v.le5le.com/ ">https://v.le5le.com/ </a></p> 
<p>乐吾乐大屏可视化可以实现大屏页面与内嵌2d/3d场景相互通信，底层原理是利用了iframe通过<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" rel="nofollow" title="postMessage">postMessage</a>发送消息。</p> 
<p>下面以2d场景为例，实现步骤如下：</p> 
<h2 id="0">1. 首先配置场景2（被嵌入页面）的内容。</h2> 
<h3 id="1">①  一个向外发送消息的按钮。</h3> 
<p>选中按钮，右侧选择“交互”面板，配置点击事件。动作类型选择“向父窗口发送消息”，消息名可以自己定（不要过于简单，以免和内置的消息冲突），这里叫做“two-message”。</p> 
<p></p> 
<p class="img-center"><img alt="" height="579" src="https://images2.imgbox.com/f0/67/Ti9GGZHs_o.png" width="1057"></p> 
<h3 id="2">②  一个监听父窗口消息的正方形图元。</h3> 
<p>点击正方形图元，可以给他配置一个动画效果，方便我们观察结果。</p> 
<p></p> 
<p class="img-center"><img alt="" height="791" src="https://images2.imgbox.com/05/e2/mjyd4Y03_o.png" width="1200"></p> 
<p>给这个正方形添加监听消息的交互事件，监听"start"/"stop"消息，分别控制当前正方形图元播放/暂停动画。</p> 
<p></p> 
<p class="img-center"><img alt="" height="934" src="https://images2.imgbox.com/5b/59/fjqa8wUS_o.png" width="1046"></p> 
<h3 id="3">③ 点击保存，生成图纸id。</h3> 
<p></p> 
<h2 id="4">2. 配置场景1（外层父页面）的内容。</h2> 
<h3 id="5">① 创建场景2图元。</h3> 
<p>从控件-面板中拖入一个网页图元，在数据中配置网页地址为场景2的预览地址。为了方便定位，可以给它配置一个分组为“场景2”。</p> 
<p></p> 
<p class="img-center"><img alt="" height="766" src="https://images2.imgbox.com/1f/c7/UdJXrotf_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="" height="791" src="https://images2.imgbox.com/db/fc/1faGN2LK_o.png" width="1200"></p> 
<h3 id="6">② 一个用于向2d场景发送消息的船型开关。</h3> 
<p>从控件中拖入一个船型开关，配置点击交互事件，事件触发条件分别监听船型开关的开/关状态，向场景2分别发送"start"/"stop"的消息。</p> 
<p></p> 
<p class="img-center"><img alt="" height="791" src="https://images2.imgbox.com/ff/9d/YyVZiVtf_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="" height="791" src="https://images2.imgbox.com/d6/ed/mclvYUqY_o.png" width="1200"></p> 
<h3 id="7">③ 一个接收场景2消息的图元。</h3> 
<p>选中一个文本图元，添加监听消息的交互事件，消息名称填写上面确定的消息名，这里是“two-message”。执行动作填写弹出一个alert弹窗。</p> 
<p></p> 
<p class="img-center"><img alt="" height="930" src="https://images2.imgbox.com/0b/f2/cXd6laIF_o.png" width="1200"></p> 
<h2 id="8">3. 保存后，点击运行查看运行结果。</h2> 
<p>点击船型开关可以控制场景2中正方形的闪烁/停止。点击场景2中的按钮，可以看到页面弹出alert弹窗。</p> 
<p></p> 
<p class="img-center"><img alt="" height="892" src="https://images2.imgbox.com/24/af/39m7te1K_o.gif" width="1200"></p> 
<p><strong>项目地址</strong></p> 
<p><a href="https://v.le5le.com/?r=1708591902185&amp;id=018bf0fe-0c18-706f-80a2-b8363a87480c" rel="nofollow" title="场景1">场景1</a></p> 
<p><a href="https://v.le5le.com/?r=1708591881262&amp;id=018bf100-65a8-706f-80a2-b8363a874826" rel="nofollow" title="场景2">场景2</a></p> 
<p>通过上面的操作我们可以知道，消息的发送方只负责发送消息，具体执行的内容都是消息的接收方自己接收消息后去执行的。大屏与3d场景的交互操作大同小异，官方方案中有相关案例。</p> 
<p><a href="https://mp.weixin.qq.com/s/idipsIQQmLSRirGFKoiZ9A" rel="nofollow" title="3D可视化-智慧楼宇-案例演示">3D可视化-智慧楼宇-案例演示</a></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f7cd27562d3bb92c152128444567e31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">贪吃蛇游戏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7405e01781409b7d21088d7acb799d20/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[Day 58] 區塊鏈與人工智能的聯動應用：理論、技術與實踐</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>