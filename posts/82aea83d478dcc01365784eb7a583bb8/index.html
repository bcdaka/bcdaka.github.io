<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Boot与Redis深度整合：实战指南 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/82aea83d478dcc01365784eb7a583bb8/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spring Boot与Redis深度整合：实战指南">
  <meta property="og:description" content="Spring Boot 整合 Redis 相当简单，它利用了 Spring Data Redis 项目，使得我们可以在 Spring Boot 应用中轻松地操作 Redis。以下是如何整合 Redis 到 Spring Boot 应用的基本步骤：
1. 添加依赖 首先，在你的 pom.xml 文件中添加 Spring Boot Data Redis 的依赖：
&lt;dependencies&gt; &lt;!-- 其他依赖 --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- 如果使用Lettuce作为Redis客户端，需要添加此依赖 --&gt; &lt;dependency&gt; &lt;groupId&gt;io.lettuce&lt;/groupId&gt; &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- 如果使用Jedis作为Redis客户端，需要添加此依赖 --&gt; &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 注意：Lettuce和Jedis是Spring Boot支持的两个主要的Redis客户端，你可以选择其中一个。在Spring Boot 2.x中，默认使用Lettuce。 2. 配置 Redis 在 application.properties 或 application.yml 文件中添加 Redis 的配置信息：
application.properties 示例
spring.redis.host=localhost spring.redis.port=6379 spring.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-29T10:02:52+08:00">
    <meta property="article:modified_time" content="2024-03-29T10:02:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Boot与Redis深度整合：实战指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Spring Boot 整合 Redis 相当简单，它利用了 Spring Data Redis 项目，使得我们可以在 Spring Boot 应用中轻松地操作 Redis。以下是如何整合 Redis 到 Spring Boot 应用的基本步骤：</p> 
<h4>1. 添加依赖</h4> 
<p>首先，在你的 <code>pom.xml</code> 文件中添加 Spring Boot Data Redis 的依赖：</p> 
<pre><code class="language-XML">&lt;dependencies&gt;  
    &lt;!-- 其他依赖 --&gt;  
    &lt;dependency&gt;  
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  
        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;  
    &lt;/dependency&gt;  
    &lt;!-- 如果使用Lettuce作为Redis客户端，需要添加此依赖 --&gt;  
    &lt;dependency&gt;  
        &lt;groupId&gt;io.lettuce&lt;/groupId&gt;  
        &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;  
    &lt;/dependency&gt;  
    &lt;!-- 如果使用Jedis作为Redis客户端，需要添加此依赖 --&gt;  
    &lt;dependency&gt;  
        &lt;groupId&gt;redis.clients&lt;/groupId&gt;  
        &lt;artifactId&gt;jedis&lt;/artifactId&gt;  
    &lt;/dependency&gt;  
&lt;/dependencies&gt;</code></pre> 
<p>注意：Lettuce和Jedis是Spring Boot支持的两个主要的Redis客户端，你可以选择其中一个。在Spring Boot 2.x中，默认使用Lettuce。 </p> 
<h4>2. 配置 Redis</h4> 
<p>在 <code>application.properties</code> 或 <code>application.yml</code> 文件中添加 Redis 的配置信息：</p> 
<p><strong>application.properties 示例</strong></p> 
<pre><code class="language-XML">spring.redis.host=localhost  
spring.redis.port=6379  
spring.redis.password= # 如果设置了密码，则填写密码  
spring.redis.database=0 # Redis数据库索引（默认为0）  
spring.redis.jedis.pool.max-active=8 # 连接池最大连接数（使用Jedis时）  
spring.redis.jedis.pool.max-wait=-1ms # 连接池最大阻塞等待时间（使用Jedis时）  
spring.redis.jedis.pool.max-idle=8 # 连接池中的最大空闲连接（使用Jedis时）  
spring.redis.jedis.pool.min-idle=0 # 连接池中的最小空闲连接（使用Jedis时）  
spring.redis.lettuce.pool.max-active=8 # 连接池最大连接数（使用Lettuce时）  
spring.redis.lettuce.pool.max-wait=-1ms # 连接池最大阻塞等待时间（使用Lettuce时）  
spring.redis.lettuce.pool.max-idle=8 # 连接池中的最大空闲连接（使用Lettuce时）  
spring.redis.lettuce.pool.min-idle=0 # 连接池中的最小空闲连接（使用Lettuce时）</code></pre> 
<p><strong>application.yml 示例</strong></p> 
<pre><code class="language-XML">spring:  
  redis:  
    host: localhost  
    port: 6379  
    password: # 如果设置了密码，则填写密码  
    database: 0 # Redis数据库索引（默认为0）  
    jedis:  
      pool:  
        max-active: 8 # 连接池最大连接数（使用Jedis时）  
        max-wait: -1ms # 连接池最大阻塞等待时间（使用Jedis时）  
        max-idle: 8 # 连接池中的最大空闲连接（使用Jedis时）  
        min-idle: 0 # 连接池中的最小空闲连接（使用Jedis时）  
    lettuce:  
      pool:  
        max-active: 8 # 连接池最大连接数（使用Lettuce时）  
        max-wait: -1ms # 连接池最大阻塞等待时间（使用Lettuce时）  
        max-idle: 8 # 连接池中的最大空闲连接（使用Lettuce时）  
        min-idle: 0 # 连接池中的最小空闲连接（使用Lettuce时）</code></pre> 
<p>这里要说的是：</p> 
<p>Lettuce和Jedis两者都是Java连接Redis的客户端</p> 
<p>选择使用Lettuce而不是Jedis的原因如下：</p> 
<h5>线程安全性：</h5> 
<ul><li>Lettuce 是基于 Netty 构建的，它使用异步和事件驱动的方式处理连接。因此，它可以在多个线程之间共享一个连接而不需要额外的同步，因此在高并发环境下更高效。</li><li>Jedis 是基于阻塞 I/O 的，并且不是线程安全的，如果在多个线程中共享同一个 Jedis 实例，需要使用连接池进行同步管理，这可能引入额外的复杂性。</li></ul> 
<h5>连接方式：</h5> 
<ul><li>Lettuce 支持基于 Reactive Streams 的响应式编程模型，能够更好地与 Spring Reactor、Project Reactor 等框架集成，提供异步和非阻塞的操作。</li><li>Jedis 是同步的，并且在执行某些操作时会阻塞线程，这可能会影响应用程序的性能和响应性。</li></ul> 
<h5>性能和扩展性：</h5> 
<ul><li>Lettuce 的设计目标是高性能和扩展性，它可以更好地利用 Redis 4.0 中引入的一些新特性（如 Redis Sentinel 和 Redis Cluster）。</li><li>Jedis 的设计目标更偏向于简单易用，对于一些特殊的 Redis 集群模式可能支持不够完善。</li></ul> 
<h5>维护和更新：</h5> 
<ul><li>Lettuce 是一个活跃的项目，并且持续地得到更新和改进。</li><li>Jedis 在某些方面已经相对稳定，并且在一段时间内没有大的更新。</li></ul> 
<h4>3. 创建 Redis 配置类</h4> 
<p>如果需要自定义 Redis 的配置（比如序列化器），可以创建一个配置类：</p> 
<pre><code class="language-java">import org.springframework.context.annotation.Bean;  
import org.springframework.context.annotation.Configuration;  
import org.springframework.data.redis.connection.RedisConnectionFactory;  
import org.springframework.data.redis.core.RedisTemplate;  
import org.springframework.data.redis.serializer.StringRedisSerializer;  
  
@Configuration  
public class RedisConfig {  
  
    @Bean  
    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {  
        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();  
        template.setConnectionFactory(redisConnectionFactory);  
  
        // 使用 StringRedisSerializer 来序列化和反序列化 key 值  
        template.setKeySerializer(new StringRedisSerializer());  
        // 使用 JdkSerializationRedisSerializer 来序列化和反序列化 value 值  
        // 你也可以自定义序列化器  
        template.setValueSerializer(new GenericToStringSerializer&lt;&gt;(Object.class));  
          
        template.afterPropertiesSet();  
        return template;  
    }  
}</code></pre> 
<h4>4. 使用 RedisTemplate 或 StringRedisTemplate</h4> 
<p>在 Spring Boot 应用中，你可以注入 <code>RedisTemplate</code> 或 <code>StringRedisTemplate</code> 来操作 Redis：</p> 
<pre><code class="language-java">import org.springframework.beans.factory.annotation.Autowired;  
import org.springframework.data.redis.core.RedisTemplate;  
import org.springframework.stereotype.Service;  
  
@Service  
public class RedisService {  
  
    private final RedisTemplate&lt;String, Object&gt; redisTemplate;  
  
    @Autowired  
    public RedisService(RedisTemplate&lt;String, Object&gt; redisTemplate) {  
        this.redisTemplate = redisTemplate;  
    }  
  
    public void setValue(String key, Object value) {  
        redisTemplate.opsForValue().set(key, value);  
    }  
  
    public Object getValue(String key) {  
        return redisTemplate.opsForValue().get(key);  
    }  
      
    // 其他操作...  
}</code></pre> 
<h4>5. 编写测试</h4> 
<pre><code class="language-java">import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.redis.core.StringRedisTemplate;
 
import java.util.concurrent.TimeUnit;
 
@SpringBootTest
public class RedisTest {
    @Autowired
    private StringRedisTemplate stringRedisTemplate;
 
    @Test
    //测试redis
    void contextLoads2() {
        //添加缓存键值对name:mijiu并设置过期时间为1小时
        stringRedisTemplate.opsForValue().set("name","mijiu",10, TimeUnit.SECONDS);
        System.out.println(stringRedisTemplate.opsForValue().get("name"));
 
    }
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/db89bd4ec92d651bb44707a01dd04a4f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">UniApp中获取安卓设备的唯一标识符</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2cfc7bf20e636be9dc6842bb9792b13f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HBase报错：Master is initializing</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>