<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>图像亮度和对比度的调整 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/8e29e077c5a5b57a8c8403fd06522204/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="图像亮度和对比度的调整">
  <meta property="og:description" content="在网上找了很多图像亮度的调整算法，下面是其中一种，可以通过条形框进行调整，并实时的查看对应参数值后的效果。
图像亮度处理公式:
y = [x - 127.5 * (1 - B)] * k &#43; 127.5 * (1 &#43; B);
x 是输入像素值
y 是输出像素值
B 是亮度值， 范围在[-1,1]之间
对比度处理公式：
k是调节对比度
k = tan( (45 &#43; 44 * c) / 180 * PI );
c 是对比度值, 范围在[-1,1]之间
下面是具体实现代码
#include &lt;iostream&gt; #include &#34;opencv2/core.hpp&#34; #include &#34;opencv2/imgproc.hpp&#34; #include &#34;opencv2/highgui.hpp&#34; using namespace std; using namespace cv; #define SWAP(a, b, t) do { t = a; a = b; b = t; } while(0) #define CLIP_RANGE(value, min, max) ( (value) &gt; (max) ?">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-26T16:00:00+08:00">
    <meta property="article:modified_time" content="2024-06-26T16:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">图像亮度和对比度的调整</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在网上找了很多图像亮度的调整算法，下面是其中一种，可以通过条形框进行调整，并实时的查看对应参数值后的效果。</p> 
<p>图像亮度处理公式:<br> y = [x - 127.5 * (1 - B)] * k + 127.5 * (1 + B);</p> 
<p>x 是输入像素值<br> y 是输出像素值<br> B 是亮度值， 范围在[-1,1]之间</p> 
<p>对比度处理公式：<br> k是调节对比度<br> k = tan( (45 + 44 * c) / 180 * PI );<br> c 是对比度值, 范围在[-1,1]之间</p> 
<p>下面是具体实现代码</p> 
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include "opencv2/core.hpp"
#include "opencv2/imgproc.hpp"
#include "opencv2/highgui.hpp"

using namespace std;
using namespace cv;


#define SWAP(a, b, t)  do { t = a; a = b; b = t; } while(0)
#define CLIP_RANGE(value, min, max)  ( (value) &gt; (max) ? (max) : (((value) &lt; (min)) ? (min) : (value)) )
#define COLOR_RANGE(value)  CLIP_RANGE(value, 0, 255)
#define M_PI 3.1415926
int adjustBrightnessContrast(InputArray src, OutputArray dst, int brightness, int contrast)
{
	Mat input = src.getMat();
	if (input.empty()) {
		return -1;
	}

	dst.create(src.size(), src.type());
	Mat output = dst.getMat();

	brightness = CLIP_RANGE(brightness, -255, 255);
	contrast = CLIP_RANGE(contrast, -255, 255);
	double B = brightness / 255.;
	double c = contrast / 255.;
	double k = tan((45 + 44 * c) / 180 * M_PI);
	Mat lookupTable(1, 256, CV_8U);
	uchar* p = lookupTable.data;
	for (int i = 0; i &lt; 256; i++)
		p[i] = COLOR_RANGE((i - 127.5 * (1 - B)) * k + 127.5 * (1 + B));
	LUT(input, lookupTable, output);
	return 0;
}

static string window_name = "photo";
static Mat src;
static int brightness = 255;
static int contrast = 255;
static void callbackAdjust(int, void*)
{
	Mat dst;
	adjustBrightnessContrast(src, dst, brightness - 255, contrast - 255);
	imshow(window_name, dst);
}

int main()
{
	src = imread("D:/vsproject/skin_beauty/jishu-image/face02/center.jpg");

	if (!src.data) {
		cout &lt;&lt; "error read image" &lt;&lt; endl;
		return -1;
	}

	namedWindow(window_name, WINDOW_NORMAL);
	resizeWindow(window_name, 800, 600);//设置窗口展示大小
	createTrackbar("brightness", window_name, &amp;brightness, 2 * brightness, callbackAdjust);
	createTrackbar("contrast", window_name, &amp;contrast, 2 * contrast, callbackAdjust);
	callbackAdjust(0, 0);

	waitKey();

	return 0;

}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f2987d76f95c6f9003f15698c7db8dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">nvm安装详细教程（卸载旧的nodejs，安装nvm、node、npm、cnpm、yarn及环境变量配置）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/285f23c5fd918283727823762e87adf7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">什么是前端开发？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>