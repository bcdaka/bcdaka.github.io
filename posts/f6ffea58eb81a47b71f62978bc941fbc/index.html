<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python中的正则表达式 | re模块】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/f6ffea58eb81a47b71f62978bc941fbc/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【Python中的正则表达式 | re模块】">
  <meta property="og:description" content="正则表达式（Regular Expression，通常简写为regex或regexp）是一种强大的文本处理工具，它使用一种特定的模式来描述和匹配字符串。正则表达式可以用于搜索、替换和验证文本中的特定字符序列。
简单来说，可以理解为正则表达式是一个特殊的字符序列，它能帮助你方便的检查一个字符串是否与某种模式匹配。
一、基本概念和常见元素 1、基本元素 字符类：匹配方括号中的任意字符。例如，[abc] 匹配 “a”、“b” 或 “c”。范围：使用连字符 - 来表示字符范围。例如，[a-z] 匹配任何小写字母。否定字符类：在字符类前加上 ^ 符号可以匹配不在该字符类中的任意字符。例如，[^a-z] 匹配任何非小写字母的字符。元字符：具有特殊含义的字符，如 .（匹配任意字符，除了换行符）、*（匹配前面的元素零次或多次）、&#43;（匹配前面的元素一次或多次）、?（匹配前面的元素零次或一次）等。锚点：用于指定匹配的位置，如 ^（匹配字符串的开头）和 $（匹配字符串的结尾）。 2、分组和引用 圆括号：用于分组，并捕获匹配的子字符串。反向引用：使用 \1、\2 等来引用之前捕获的分组。 3、修饰符和标志 多行模式：使 ^ 和 $ 分别匹配每一行的开头和结尾，而不是整个字符串的开头和结尾。忽略大小写：使匹配时不区分大小写。全局搜索：搜索整个字符串中的所有匹配项，而不是只找到第一个就停止。 4、常见应用 验证：检查字符串是否符合特定的格式或规则，如电子邮件地址、电话号码等。搜索和替换：在文本中查找特定的模式，并用其他文本替换它。分割字符串：使用正则表达式作为分隔符来分割字符串。 示例：
import re text = &#34;There are 123 apples and 456 oranges.&#34; pattern = r&#39;\d&#43;&#39; # 匹配一个或多个数字 matches = re.findall(pattern, text) print(matches) # 输出: [&#39;123&#39;, &#39;456&#39;] 示例中， r&#39;\d&#43;&#39; 是一个正则表达式，其中 \d 匹配任意数字， &#43; 匹配前面的元素（即数字）一次或多次。re.findall() 函数用于在文本中查找所有匹配该正则表达式的子字符串。
二、python 正则表达式 re模块 re 模块使 Python 语言拥有全部的正则表达式功能。这个模块提供了一系列函数和方法，用于匹配和操作字符串。接下来将学习re模块的处理函数。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-08T14:53:42+08:00">
    <meta property="article:modified_time" content="2024-04-08T14:53:42+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python中的正则表达式 | re模块】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>正则表达式（Regular Expression，通常简写为regex或regexp）是一种强大的文本处理工具，它使用一种特定的模式来描述和匹配字符串。正则表达式可以用于<code>搜索、替换和验证文本中的特定字符序列</code>。</p> 
<p>简单来说，可以理解为正则表达式是一个特殊的字符序列，它能帮助你方便的<code>检查一个字符串是否与某种模式匹配</code>。</p> 
<h2><a id="_4"></a>一、基本概念和常见元素</h2> 
<h3><a id="1_5"></a>1、基本元素</h3> 
<ul><li>字符类：<code>匹配方括号中的任意字符</code>。例如，[abc] 匹配 “a”、“b” 或 “c”。</li><li>范围：使用<code>连字符 -</code> 来表示字符范围。例如，[a-z] 匹配任何小写字母。</li><li>否定字符类：在字符类前加上 <code>^ 符号</code>可以匹配不在该字符类中的任意字符。例如，[^a-z] 匹配任何非小写字母的字符。</li><li>元字符：具有特殊含义的字符，如 <code>.</code>（匹配任意字符，除了换行符）、<code>*</code>（匹配前面的元素零次或多次）、<code>+</code>（匹配前面的元素一次或多次）、<code>?</code>（匹配前面的元素零次或一次）等。</li><li>锚点：用于指定匹配的位置，如 <code>^</code>（匹配字符串的开头）和 <code>$</code>（匹配字符串的结尾）。</li></ul> 
<h3><a id="2_12"></a>2、分组和引用</h3> 
<ul><li>圆括号：用于分组，并<code>捕获匹配的子字符串</code>。</li><li>反向引用：使用 <code>\1、\2</code> 等来引用之前捕获的分组。</li></ul> 
<h3><a id="3_16"></a>3、修饰符和标志</h3> 
<ul><li>多行模式：使 ^ 和 $ 分别匹配每一行的开头和结尾，而不是整个字符串的开头和结尾。</li><li>忽略大小写：使匹配时不区分大小写。</li><li>全局搜索：搜索整个字符串中的所有匹配项，而不是只找到第一个就停止。</li></ul> 
<h3><a id="4_22"></a>4、常见应用</h3> 
<ul><li><strong>验证</strong>：检查字符串是否符合特定的格式或规则，如电子邮件地址、电话号码等。</li><li><strong>搜索和替换</strong>：在文本中查找特定的模式，并用其他文本替换它。</li><li><strong>分割字符串</strong>：使用正则表达式作为分隔符来分割字符串。</li></ul> 
<p><strong>示例：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

text <span class="token operator">=</span> <span class="token string">"There are 123 apples and 456 oranges."</span>
pattern <span class="token operator">=</span> <span class="token string">r'\d+'</span>  <span class="token comment"># 匹配一个或多个数字</span>

matches <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span>  <span class="token comment"># 输出: ['123', '456']</span>
</code></pre> 
<p>示例中， <code>r'\d+'</code> 是一个正则表达式，其中 <code>\d</code> 匹配任意数字， <code>+</code> 匹配前面的元素（即数字）一次或多次。<code>re.findall() 函数</code>用于在文本中查找所有匹配该正则表达式的子字符串。</p> 
<h2><a id="python__re_41"></a>二、python 正则表达式 re模块</h2> 
<p>re 模块使 Python 语言拥有全部的正则表达式功能。这个模块提供了一系列函数和方法，用于匹配和操作字符串。接下来将学习re模块的处理函数。</p> 
<h3><a id="1re_44"></a>1、re模块的基本函数</h3> 
<pre><code class="prism language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> re
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'ASCII'</span><span class="token punctuation">,</span> <span class="token string">'DEBUG'</span><span class="token punctuation">,</span> <span class="token string">'DOTALL'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">,</span> <span class="token string">'IGNORECASE'</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token string">'LOCALE'</span><span class="token punctuation">,</span> <span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token string">'MULTILINE'</span><span class="token punctuation">,</span> 
<span class="token string">'Match'</span><span class="token punctuation">,</span> <span class="token string">'NOFLAG'</span><span class="token punctuation">,</span> <span class="token string">'Pattern'</span><span class="token punctuation">,</span> <span class="token string">'RegexFlag'</span><span class="token punctuation">,</span> <span class="token string">'S'</span><span class="token punctuation">,</span> <span class="token string">'Scanner'</span><span class="token punctuation">,</span> <span class="token string">'T'</span><span class="token punctuation">,</span> <span class="token string">'TEMPLATE'</span><span class="token punctuation">,</span> <span class="token string">'U'</span><span class="token punctuation">,</span> 
<span class="token string">'UNICODE'</span><span class="token punctuation">,</span> <span class="token string">'VERBOSE'</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">,</span> <span class="token string">'_MAXCACHE'</span><span class="token punctuation">,</span> <span class="token string">'_MAXCACHE2'</span><span class="token punctuation">,</span> <span class="token string">'__all__'</span><span class="token punctuation">,</span> <span class="token string">'__builtins__'</span><span class="token punctuation">,</span>
 <span class="token string">'__cached__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span> <span class="token string">'__file__'</span><span class="token punctuation">,</span> <span class="token string">'__loader__'</span><span class="token punctuation">,</span> <span class="token string">'__name__'</span><span class="token punctuation">,</span> <span class="token string">'__package__'</span><span class="token punctuation">,</span> 
 <span class="token string">'__path__'</span><span class="token punctuation">,</span> <span class="token string">'__spec__'</span><span class="token punctuation">,</span> <span class="token string">'__version__'</span><span class="token punctuation">,</span> <span class="token string">'_cache'</span><span class="token punctuation">,</span> <span class="token string">'_cache2'</span><span class="token punctuation">,</span> <span class="token string">'_casefix'</span><span class="token punctuation">,</span>
  <span class="token string">'_compile'</span><span class="token punctuation">,</span> <span class="token string">'_compile_template'</span><span class="token punctuation">,</span> <span class="token string">'_compiler'</span><span class="token punctuation">,</span> <span class="token string">'_constants'</span><span class="token punctuation">,</span> <span class="token string">'_parser'</span><span class="token punctuation">,</span>
   <span class="token string">'_pickle'</span><span class="token punctuation">,</span> <span class="token string">'_special_chars_map'</span><span class="token punctuation">,</span> <span class="token string">'_sre'</span><span class="token punctuation">,</span> <span class="token string">'compile'</span><span class="token punctuation">,</span> <span class="token string">'copyreg'</span><span class="token punctuation">,</span> <span class="token string">'enum'</span><span class="token punctuation">,</span>
    <span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'escape'</span><span class="token punctuation">,</span> <span class="token string">'findall'</span><span class="token punctuation">,</span> <span class="token string">'finditer'</span><span class="token punctuation">,</span> <span class="token string">'fullmatch'</span><span class="token punctuation">,</span> <span class="token string">'functools'</span><span class="token punctuation">,</span> 
    <span class="token string">'match'</span><span class="token punctuation">,</span> <span class="token string">'purge'</span><span class="token punctuation">,</span> <span class="token string">'search'</span><span class="token punctuation">,</span> <span class="token string">'split'</span><span class="token punctuation">,</span> <span class="token string">'sub'</span><span class="token punctuation">,</span> <span class="token string">'subn'</span><span class="token punctuation">,</span> <span class="token string">'template'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre> 
<p>和其他模块一样，在使用re模块来处理正则表达式时，要先导入 re 模块</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re
</code></pre> 
<h3><a id="2re_66"></a>2、re模块函数使用</h3> 
<p>正则表达式的语法和功能非常强大和灵活，可以通过学习更多的元字符、量词、边界匹配来扩展正则表达式的知识。<br> <strong>（1）re.match()</strong><br> 从字符串的<code>起始位置匹配一个模式</code>，如果匹配成功，返回一个匹配对象；否则返回None</p> 
<p>语法：</p> 
<pre><code class="prism language-python">re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p>参数说明–<br> pattern：匹配的正则表达式<br> string ：要匹配的字符串。<br> flags ：标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。参见：正则表达式修饰符 - 可选标志</p> 
<p>匹配对象方法：可使用 <code>group(num)</code> 或 <code>groups()</code> 匹配对象函数来获取匹配表达式。</p> 
<ul><li>group(num=0) 匹配的整个表达式的字符串，group()可一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</li><li>groups() 返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</li></ul> 
<p>示例如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

line <span class="token operator">=</span> <span class="token string">"Cats are smarter than dogs"</span>

matchObj <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">r'(.*) are (.*?) than (.*)'</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span>
<span class="token keyword">if</span> matchObj<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"matchObj.group() : "</span><span class="token punctuation">,</span> matchObj<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#输出 Cats are smarter than dogs</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"matchObj.groups() : "</span><span class="token punctuation">,</span> matchObj<span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出 ('Cats', 'smarter', 'dogs')</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"matchObj.group(1) : "</span><span class="token punctuation">,</span> matchObj<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出 Cats</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"matchObj.group(2) : "</span><span class="token punctuation">,</span> matchObj<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出 smarter</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"matchObj.group(3) : "</span><span class="token punctuation">,</span> matchObj<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出dogs</span>

<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No match!!"</span><span class="token punctuation">)</span>
</code></pre> 
<p>以上示例，正则表达式：<code>r'(.*) are (.*?) than (.*)'</code><br> 其中 <code>(.*)</code>：匹配任意数量的任意字符（除了换行符），并将它们捕获到第一个组中。<br> <code>(.*?)</code>：匹配任意数量的任意字符（除了换行符），但尽可能少地匹配（非贪婪模式），并将它们捕获到第二个组中。</p> 
<p><strong>（2）re.search()</strong><br> 扫描整个字符串，返回第一个成功匹配的对象。<br> 语法：</p> 
<pre><code class="prism language-python">re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None。</li><li>re.search匹配整个字符串，直到找到一个匹配。</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'hello.python.com'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 在起始位置匹配   输出：(0, 5)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span><span class="token string">'com'</span><span class="token punctuation">,</span> <span class="token string">'hello.python.com'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment"># 不在起始位置匹配   输出：None</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'hello.python.com'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 在起始位置匹配   输出：(0, 5)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'com'</span><span class="token punctuation">,</span> <span class="token string">'hello.python.com'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 不在起始位置匹配  输出：(13, 16)</span>
</code></pre> 
<p><strong>（3）re.findall()</strong><br> 在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果有多个匹配模式，则返回元组列表，如果没有找到匹配的，则返回空列表。</p> 
<p>注意： match 和 search 是匹配一次 findall 匹配所有。<br> 语法：</p> 
<pre><code class="prism language-python">findall<span class="token punctuation">(</span>string<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> endpos<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>参数说明：<br> string : 待匹配的字符串。<br> pos : 可选参数，指定字符串的起始位置，默认为 0。<br> endpos : 可选参数，指定字符串的结束位置，默认为字符串的长度。</p> 
<p>示例：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span>  re
pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">)</span> <span class="token comment"># 匹配一个或多个数字</span>
text<span class="token operator">=</span> <span class="token string">"I have 100 leomon trees and 20 rivers"</span>
findall<span class="token operator">=</span> pattern<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
findall1<span class="token operator">=</span> pattern<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>text<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"findall:"</span><span class="token punctuation">,</span>findall<span class="token punctuation">)</span>  <span class="token comment">#输出：findall: ['100', '20']</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"findall1:"</span><span class="token punctuation">,</span>findall1<span class="token punctuation">)</span> <span class="token comment">#输出：findall1: ['100']</span>
</code></pre> 
<p><strong>（4）re.finditer()</strong><br> 找到字符串中所有匹配的部分，并返回一个迭代器，产生匹配对象。<br> 语法:</p> 
<pre><code class="prism language-python">re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p>示例：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span>  re
pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">)</span> <span class="token comment"># 匹配一个或多个数字</span>
text<span class="token operator">=</span> <span class="token string">"I have 100 leomon trees and 20 rivers"</span>
findall<span class="token operator">=</span> pattern<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
findall1<span class="token operator">=</span> pattern<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>text<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token keyword">match</span> <span class="token keyword">in</span> findall<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token keyword">match</span> <span class="token keyword">in</span> findall1<span class="token punctuation">:</span>
    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre> 
<p>运行结果：</p> 
<pre><code class="prism language-python"><span class="token number">100</span>
<span class="token number">20</span>
<span class="token number">100</span>
</code></pre> 
<p><strong>（5）re.sub()：检索和替换</strong><br> 在字符串中查找匹配正则表达式的部分，并用另一个字符串替换它们。<br> 语法：</p> 
<pre><code class="prism language-python">re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> repl<span class="token punctuation">,</span> string<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p>参数说明：<br> pattern : 正则中的模式字符串。<br> repl : 替换的字符串，也可为一个函数。<br> string : 要被查找替换的原始字符串。<br> count : 模式匹配后替换的最大次数，默认 0 表示替换所有的匹配。</p> 
<p><strong>（6）re.split()：分割</strong><br> split 方法按照能够匹配的子串将字符串分割后返回列表.<br> 语法：</p> 
<pre><code class="prism language-python">re<span class="token punctuation">.</span>split<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> string<span class="token punctuation">,</span> maxsplit<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>参数说明：</p> 
<ul><li>pattern, string同上。</li><li>maxsplit 分隔次数，maxsplit=1 分隔一次，默认为<br> 0，不限制次数。</li><li>flags 标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。参见：正则表达式修饰符 - 可选标志</li></ul> 
<p><strong>（7）re.compile()：</strong><br> 编译正则表达式，根据一个模式字符串和可选的标志参数生成一个正则表达式（ Pattern ）对象。<br> 即：预编译一个正则表达式对象，然后重复使用它。<br> 该对象拥有一系列方法用于正则表达式匹配、搜索、替换等操作。</p> 
<p>语法：</p> 
<pre><code class="prism language-python">re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> 
<p>① pattern : 一个字符串形式的正则表达式</p> 
<p>② flags : 可选，表示匹配模式，比如忽略大小写，多行模式等，具体参数为：</p> 
<ul><li>re.I 忽略大小写</li><li>re.L 表示特殊字符集 \w, \W, \b, \B, \s, \S 依赖于当前环境</li><li>re.M 多行模式</li><li>re.S即为 . 并且包括换行符在内的任意字符（. 不包括换行符）</li><li>re.U 表示特殊字符集 \w, \W, \b, \B, \d, \D, \s, \S 依赖于 Unicode 字符属性数据库</li><li>re.X 为了增加可读性，忽略空格和 # 后面的注释</li></ul> 
<p>编译后的Pattern对象可以使用的方法包括match()、search()、findall()、finditer()、sub()、split()等<br> 示例：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

<span class="token comment"># 编译一个正则表达式</span>
pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">)</span>  <span class="token comment"># 匹配一个或多个数字</span>

<span class="token comment"># 使用编译后的正则表达式对象进行匹配</span>
text <span class="token operator">=</span> <span class="token string">"123 apples and 456 oranges."</span>

<span class="token comment"># 使用match方法从字符串的起始位置匹配</span>
<span class="token keyword">match</span> <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Match at start:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#输出 Match at start: 123</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No match at start."</span><span class="token punctuation">)</span>

<span class="token comment"># 使用search方法在整个字符串中搜索匹配项</span>
search <span class="token operator">=</span> pattern<span class="token punctuation">.</span>search<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token keyword">if</span> search<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Match found:"</span><span class="token punctuation">,</span> search<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 输出： Match found: 123</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No match found."</span><span class="token punctuation">)</span>

<span class="token comment"># 使用findall方法找到所有匹配项</span>
matches <span class="token operator">=</span> pattern<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"All matches:"</span><span class="token punctuation">,</span> matches<span class="token punctuation">)</span>  <span class="token comment"># 输出： All matches: ['123', '456']</span>
</code></pre> 
<p>compile()函数的好处：可将正则表达式的编译和匹配操作分开，多次重用编译后的正则表达式对象，提高性能。使代码更清晰、更易于维护。</p> 
<p><strong>（8）修饰符和标志</strong><br> 在编译正则表达式时，可以使用一些标志来改变匹配的行为。例如，re.IGNORECASE或re.I用于忽略大小写匹配。</p> 
<p>示例如下：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.match()匹配----"</span><span class="token punctuation">)</span>
pattern <span class="token operator">=</span> <span class="token string">r'\d+'</span>  <span class="token comment">#匹配一个或多个数字</span>
text <span class="token operator">=</span> <span class="token string">"123 apples and 456 oranges"</span>
<span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token keyword">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Found:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Found: 123</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.search()扫描----"</span><span class="token punctuation">)</span>
<span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Found:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Found: 123</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.findall()函数----"</span><span class="token punctuation">)</span><span class="token comment">#找到字符串中所有匹配的部分，并返回一个列表</span>
matches <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span>  <span class="token comment"># 输出: ['123', '456']</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.finditer()函数----"</span><span class="token punctuation">)</span>
<span class="token comment">#找到字符串中所有匹配的部分，并返回一个迭代器，产生匹配对象。</span>
matches <span class="token operator">=</span> re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token keyword">match</span> <span class="token keyword">in</span> matches<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 分别输出: 123 和 456</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.sub()替换----"</span><span class="token punctuation">)</span>
new_text <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">,</span> <span class="token string">'XXX'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>new_text<span class="token punctuation">)</span>  <span class="token comment"># 输出: XXX apples and XXX oranges</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.split()分割----"</span><span class="token punctuation">)</span>
words <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span>  <span class="token comment"># 输出: ['', ' apples and ', ' oranges']</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.compile()预编译----"</span><span class="token punctuation">)</span>
compiled_pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'\d+'</span><span class="token punctuation">)</span>
matches <span class="token operator">=</span> compiled_pattern<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span>  <span class="token comment"># 输出: ['123', '456']</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"----re.IGNORECASE或re.I用于忽略大小写匹配----"</span><span class="token punctuation">)</span> <span class="token comment">#修饰符和标志</span>
pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'apple'</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>IGNORECASE<span class="token punctuation">)</span>
<span class="token keyword">match</span> <span class="token operator">=</span> pattern<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'There is an Apple on the table.'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Found:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 输出: Found: Apple</span>
</code></pre> 
<h2><a id="_326"></a>三、应用</h2> 
<p>‘(?P…)’ 分组匹配<br> 示例1：日期"The date is 2024-04-18."</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

<span class="token comment"># 定义一个包含日期的字符串</span>
date_string <span class="token operator">=</span> <span class="token string">"The date is 2023-03-15."</span>
<span class="token comment"># 使用命名分组来匹配日期</span>
pattern <span class="token operator">=</span> <span class="token string">r"The date is (?P&lt;year&gt;\d{4})-(?P&lt;month&gt;\d{2})-(?P&lt;day&gt;\d{2})."</span>
<span class="token comment"># 执行匹配</span>
<span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> date_string<span class="token punctuation">)</span>
<span class="token comment"># 如果匹配成功，打印命名分组的值</span>
<span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"match.group:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"group-Year:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"group-Month:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"month"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"group-Day:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">"day"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"match.groups:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"groups-Year:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"groups-Month:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token string">"month"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"groups-Day:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>groups<span class="token punctuation">(</span><span class="token string">"day"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"match.groupdict:"</span><span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">.</span>groupdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No match found."</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行结果：</p> 
<pre><code class="prism language-python"><span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">:</span> The date <span class="token keyword">is</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">15.</span>
group<span class="token operator">-</span>Year<span class="token punctuation">:</span> <span class="token number">2023</span>
group<span class="token operator">-</span>Month<span class="token punctuation">:</span> <span class="token number">03</span>
group<span class="token operator">-</span>Day<span class="token punctuation">:</span> <span class="token number">15</span>
<span class="token keyword">match</span><span class="token punctuation">.</span>groups<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'2023'</span><span class="token punctuation">,</span> <span class="token string">'03'</span><span class="token punctuation">,</span> <span class="token string">'15'</span><span class="token punctuation">)</span>
groups<span class="token operator">-</span>Year<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'2023'</span><span class="token punctuation">,</span> <span class="token string">'03'</span><span class="token punctuation">,</span> <span class="token string">'15'</span><span class="token punctuation">)</span>
groups<span class="token operator">-</span>Month<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'2023'</span><span class="token punctuation">,</span> <span class="token string">'03'</span><span class="token punctuation">,</span> <span class="token string">'15'</span><span class="token punctuation">)</span>
groups<span class="token operator">-</span>Day<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'2023'</span><span class="token punctuation">,</span> <span class="token string">'03'</span><span class="token punctuation">,</span> <span class="token string">'15'</span><span class="token punctuation">)</span>
<span class="token keyword">match</span><span class="token punctuation">.</span>groupdict<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token string">'year'</span><span class="token punctuation">:</span> <span class="token string">'2023'</span><span class="token punctuation">,</span> <span class="token string">'month'</span><span class="token punctuation">:</span> <span class="token string">'03'</span><span class="token punctuation">,</span> <span class="token string">'day'</span><span class="token punctuation">:</span> <span class="token string">'15'</span><span class="token punctuation">}</span>
</code></pre> 
<p>示例2：识别身份证ID<br> 在Python的re模块中，当使用命名分组（即(?P…)语法）进行正则表达式匹配时，匹配对象会提供一个名为groupdict()的方法。这个方法返回一个字典，其中的键是命名分组的名称，值是相应分组匹配到的字符串。这对于提取和访问匹配到的命名分组非常有用。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re

<span class="token builtin">id</span> <span class="token operator">=</span> <span class="token string">'4102211990xxxxxxxx'</span>
res <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">r'(?P&lt;province&gt;\d{3})(?P&lt;city&gt;\d{3})(?P&lt;born_year&gt;\d{4})'</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> res<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>groupdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#输出{'province': '410', 'city': '221', 'born_year': '1990'}</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"No match found."</span><span class="token punctuation">)</span>
</code></pre> 
<p>or</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> re
<span class="token builtin">id</span> <span class="token operator">=</span> <span class="token string">'4102211990xxxxxxxx'</span>
res <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">r'(?P&lt;province&gt;\d{3})(?P&lt;city&gt;\d{3})(?P&lt;born_year&gt;\d{4})'</span><span class="token punctuation">,</span><span class="token builtin">id</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>groupdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9c6e219a10507a5e9c87f3a3fb56516e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">文心一言上线声音定制功能；通义千问开源模型；openAI又侵权？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b578cc0aba1f66e9821d35f7df00cc1c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">秘塔 AI 搜索：颠覆搜索的常态体验，强大&#43;惊艳</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>