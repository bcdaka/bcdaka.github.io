<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Spring] MyBatisæ“ä½œæ•°æ®åº“(åŸºç¡€) - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9b2c7b0a790e3afa463addaaa1c65342/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="[Spring] MyBatisæ“ä½œæ•°æ®åº“(åŸºç¡€)">
  <meta property="og:description" content="ğŸŒ¸ä¸ªäººä¸»é¡µ:https://blog.csdn.net/2301_80050796?spm=1000.2115.3001.5343
ğŸµï¸çƒ­é—¨ä¸“æ :
ğŸ§Š JavaåŸºæœ¬è¯­æ³•(97å¹³å‡è´¨é‡åˆ†)https://blog.csdn.net/2301_80050796/category_12615970.html?spm=1001.2014.3001.5482
ğŸ• Collectionä¸æ•°æ®ç»“æ„ (92å¹³å‡è´¨é‡åˆ†)https://blog.csdn.net/2301_80050796/category_12621348.html?spm=1001.2014.3001.5482
ğŸ§€çº¿ç¨‹ä¸ç½‘ç»œ(96å¹³å‡è´¨é‡åˆ†) https://blog.csdn.net/2301_80050796/category_12643370.html?spm=1001.2014.3001.5482
ğŸ­MySqlæ•°æ®åº“(93å¹³å‡è´¨é‡åˆ†)https://blog.csdn.net/2301_80050796/category_12629890.html?spm=1001.2014.3001.5482
ğŸ¬ç®—æ³•(97å¹³å‡è´¨é‡åˆ†)https://blog.csdn.net/2301_80050796/category_12676091.html?spm=1001.2014.3001.5482
ğŸƒ Spring(97å¹³å‡è´¨é‡åˆ†)https://blog.csdn.net/2301_80050796/category_12724152.html?spm=1001.2014.3001.5482
æ„Ÿè°¢ç‚¹èµä¸å…³æ³¨~~~
ç›®å½• 1.ä»€ä¹ˆæ˜¯MyBatis2. MyBatiså…¥é—¨2.1 åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–2.2 å‡†å¤‡æ•°æ®ä¸ç›¸å…³å®ä½“ç±»2.3 é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯2.4 ç¼–å†™Mapper2.5 ç¼–å†™æµ‹è¯•ä»£ç  2. MyBatisåŸºç¡€æ“ä½œ2.1 MyBatisæ‰“å°æ—¥å¿—2.2 å‚æ•°ä¼ é€’2.3 å¢(insert)2.4 åˆ (Delete)2.5 æ”¹(Update)2.6 æŸ¥(select)3.6.1 èµ·åˆ«å3.6.2 ç»“æœæ˜ å°„2.6.3 å¼€å¯é©¼å³°å‘½åä¸è›‡å½¢å‘½åè½¬æ¢(æ¨èåšæ³•) 3. MyBatis XMLé…ç½®æ–‡ä»¶3.1 é…ç½®è¿æ¥å­—ç¬¦ä¸²å’ŒMyBatis3.2 æŒä¹…å±‚ä»£ç 3.2.1 æ·»åŠ mapperæ¥å£3.2.2 æ·»åŠ UserInfoXMLMapper.xml3.2.3 å•å…ƒæµ‹è¯• 3.3 å¢åˆ æ”¹æŸ¥æ“ä½œ3.3.1 å¢(Insert)3.3.2 åˆ (Delete)3.3.3 æ”¹(Update)3.3.4 æŸ¥(select) 4. å…¶ä»–æŸ¥è¯¢æ“ä½œ4.1 å¤šè¡¨æŸ¥è¯¢(è”åˆæŸ¥è¯¢)4.1.1 å‡†å¤‡æ•°æ®,åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»4.1.2 æŸ¥è¯¢æ•°æ® 4.2 #{} å’Œ ${}4.2.1 ä½¿ç”¨4.2.2 #{} å’Œ ${}çš„åŒºåˆ«(é«˜é¢‘é¢è¯•é¢˜) 4.3 æ’åºåŠŸèƒ½4.4 likeæŸ¥è¯¢ 1.ä»€ä¹ˆæ˜¯MyBatis åœ¨å‰é¢,æˆ‘ä»¬å­¦ä¹ è¿‡JDBCç¼–ç¨‹å¯¹æ•°æ®åº“çš„æ“ä½œ,ä¸è¿‡JDBCå¯¹äºæ•°æ®åº“çš„æ“ä½œåœ¨æ­¥éª¤ä¸Šè¿‡äºéº»çƒ¦,æ‰€ä»¥æˆ‘ä»¬åœ¨Springä¸­å¼•å…¥äº†MyBatis.
MyBatisæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶,ç”¨äºç®€åŒ–JDBCçš„å¼€å‘.
é‚£ä¹ˆæŒä¹…å±‚æ˜¯ä»€ä¹ˆæ„æ€å‘¢?æŒä¹…å±‚æŒ‡çš„å°±æ˜¯æŒä¹…åŒ–æ“ä½œçš„å±‚,é€šå¸¸æŒ‡çš„æ˜¯æ•°æ®åº“çš„è®¿é—®å±‚,é€šå¸¸ç”¨æ¥æ“ä½œæ•°æ®åº“.
ç®€å•æ¥è¯´MyBatisæ˜¯æ›´ç®€å•å®Œæˆç¨‹åºå’Œæ•°æ®åº“äº¤äº’çš„æ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯æ›´ç®€å•çš„æ“ä½œå’Œè¯»å–æ•°æ®åº“å·¥å…·. 2. MyBatiså…¥é—¨ MyBatisæ“ä½œæ•°æ®åº“çš„æ­¥éª¤:">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-25T23:30:46+08:00">
    <meta property="article:modified_time" content="2024-07-25T23:30:46+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Spring] MyBatisæ“ä½œæ•°æ®åº“(åŸºç¡€)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ğŸŒ¸ä¸ªäººä¸»é¡µ:<a href="https://blog.csdn.net/2301_80050796?spm=1000.2115.3001.5343">https://blog.csdn.net/2301_80050796?spm=1000.2115.3001.5343</a><br> ğŸµï¸çƒ­é—¨ä¸“æ :<br> ğŸ§Š JavaåŸºæœ¬è¯­æ³•(97å¹³å‡è´¨é‡åˆ†)<a href="https://blog.csdn.net/2301_80050796/category_12615970.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12615970.html?spm=1001.2014.3001.5482</a><br> ğŸ• Collectionä¸æ•°æ®ç»“æ„ (92å¹³å‡è´¨é‡åˆ†)<a href="https://blog.csdn.net/2301_80050796/category_12621348.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12621348.html?spm=1001.2014.3001.5482</a><br> ğŸ§€çº¿ç¨‹ä¸ç½‘ç»œ(96å¹³å‡è´¨é‡åˆ†) <a href="https://blog.csdn.net/2301_80050796/category_12643370.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12643370.html?spm=1001.2014.3001.5482</a><br> ğŸ­MySqlæ•°æ®åº“(93å¹³å‡è´¨é‡åˆ†)<a href="https://blog.csdn.net/2301_80050796/category_12629890.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12629890.html?spm=1001.2014.3001.5482</a><br> ğŸ¬ç®—æ³•(97å¹³å‡è´¨é‡åˆ†)<a href="https://blog.csdn.net/2301_80050796/category_12676091.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12676091.html?spm=1001.2014.3001.5482</a><br> ğŸƒ Spring(97å¹³å‡è´¨é‡åˆ†)<a href="https://blog.csdn.net/2301_80050796/category_12724152.html?spm=1001.2014.3001.5482">https://blog.csdn.net/2301_80050796/category_12724152.html?spm=1001.2014.3001.5482</a><br> æ„Ÿè°¢ç‚¹èµä¸å…³æ³¨~~~<br> <img src="https://images2.imgbox.com/53/e3/amR6afn3_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>ç›®å½•</h4> 
 <ul><li><a href="#1MyBatis_13" rel="nofollow">1.ä»€ä¹ˆæ˜¯MyBatis</a></li><li><a href="#2_MyBatis_19" rel="nofollow">2. MyBatiså…¥é—¨</a></li><li><ul><li><a href="#21__26" rel="nofollow">2.1 åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–</a></li><li><a href="#22__45" rel="nofollow">2.2 å‡†å¤‡æ•°æ®ä¸ç›¸å…³å®ä½“ç±»</a></li><li><a href="#23__100" rel="nofollow">2.3 é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯</a></li><li><a href="#24_Mapper_113" rel="nofollow">2.4 ç¼–å†™Mapper</a></li><li><a href="#25__133" rel="nofollow">2.5 ç¼–å†™æµ‹è¯•ä»£ç </a></li></ul> 
  </li><li><a href="#2_MyBatis_162" rel="nofollow">2. MyBatisåŸºç¡€æ“ä½œ</a></li><li><ul><li><a href="#21_MyBatis_163" rel="nofollow">2.1 MyBatisæ‰“å°æ—¥å¿—</a></li><li><a href="#22__173" rel="nofollow">2.2 å‚æ•°ä¼ é€’</a></li><li><a href="#23_insert_240" rel="nofollow">2.3 å¢(insert)</a></li><li><a href="#24_Delete_295" rel="nofollow">2.4 åˆ (Delete)</a></li><li><a href="#25_Update_311" rel="nofollow">2.5 æ”¹(Update)</a></li><li><a href="#26_select_331" rel="nofollow">2.6 æŸ¥(select)</a></li><li><ul><li><a href="#361__339" rel="nofollow">3.6.1 èµ·åˆ«å</a></li><li><a href="#362__349" rel="nofollow">3.6.2 ç»“æœæ˜ å°„</a></li><li><a href="#263__390" rel="nofollow">2.6.3 å¼€å¯é©¼å³°å‘½åä¸è›‡å½¢å‘½åè½¬æ¢(æ¨èåšæ³•)</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3_MyBatis_XML_410" rel="nofollow">3. MyBatis XMLé…ç½®æ–‡ä»¶</a></li><li><ul><li><a href="#31_MyBatis_417" rel="nofollow">3.1 é…ç½®è¿æ¥å­—ç¬¦ä¸²å’ŒMyBatis</a></li><li><a href="#32__433" rel="nofollow">3.2 æŒä¹…å±‚ä»£ç </a></li><li><ul><li><a href="#321_mapper_438" rel="nofollow">3.2.1 æ·»åŠ mapperæ¥å£</a></li><li><a href="#322_UserInfoXMLMapperxml_453" rel="nofollow">3.2.2 æ·»åŠ UserInfoXMLMapper.xml</a></li><li><a href="#323__479" rel="nofollow">3.2.3 å•å…ƒæµ‹è¯•</a></li></ul> 
   </li><li><a href="#33__493" rel="nofollow">3.3 å¢åˆ æ”¹æŸ¥æ“ä½œ</a></li><li><ul><li><a href="#331_Insert_494" rel="nofollow">3.3.1 å¢(Insert)</a></li><li><a href="#332_Delete_536" rel="nofollow">3.3.2 åˆ (Delete)</a></li><li><a href="#333_Update_537" rel="nofollow">3.3.3 æ”¹(Update)</a></li><li><a href="#334_select_539" rel="nofollow">3.3.4 æŸ¥(select)</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4__573" rel="nofollow">4. å…¶ä»–æŸ¥è¯¢æ“ä½œ</a></li><li><ul><li><a href="#41__574" rel="nofollow">4.1 å¤šè¡¨æŸ¥è¯¢(è”åˆæŸ¥è¯¢)</a></li><li><ul><li><a href="#411__577" rel="nofollow">4.1.1 å‡†å¤‡æ•°æ®,åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»</a></li><li><a href="#412__616" rel="nofollow">4.1.2 æŸ¥è¯¢æ•°æ®</a></li></ul> 
   </li><li><a href="#42____681" rel="nofollow">4.2 #{} å’Œ ${}</a></li><li><ul><li><a href="#421__683" rel="nofollow">4.2.1 ä½¿ç”¨</a></li><li><a href="#422____731" rel="nofollow">4.2.2 #{} å’Œ ${}çš„åŒºåˆ«(é«˜é¢‘é¢è¯•é¢˜)</a></li></ul> 
   </li><li><a href="#43__753" rel="nofollow">4.3 æ’åºåŠŸèƒ½</a></li><li><a href="#44_like_772" rel="nofollow">4.4 likeæŸ¥è¯¢</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1MyBatis_13"></a>1.ä»€ä¹ˆæ˜¯MyBatis</h2> 
<p>åœ¨å‰é¢,æˆ‘ä»¬å­¦ä¹ è¿‡JDBCç¼–ç¨‹å¯¹æ•°æ®åº“çš„æ“ä½œ,ä¸è¿‡JDBCå¯¹äºæ•°æ®åº“çš„æ“ä½œåœ¨æ­¥éª¤ä¸Šè¿‡äºéº»çƒ¦,æ‰€ä»¥æˆ‘ä»¬åœ¨Springä¸­å¼•å…¥äº†MyBatis.</p> 
<ul><li>MyBatisæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<mark>æŒä¹…å±‚æ¡†æ¶,ç”¨äºç®€åŒ–JDBCçš„å¼€å‘</mark>.<br> é‚£ä¹ˆæŒä¹…å±‚æ˜¯ä»€ä¹ˆæ„æ€å‘¢?æŒä¹…å±‚æŒ‡çš„å°±æ˜¯æŒä¹…åŒ–æ“ä½œçš„å±‚,<strong>é€šå¸¸æŒ‡çš„æ˜¯æ•°æ®åº“çš„è®¿é—®å±‚,é€šå¸¸ç”¨æ¥æ“ä½œæ•°æ®åº“</strong>.<br> <img src="https://images2.imgbox.com/cc/db/e1Xi9BdQ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ç®€å•æ¥è¯´MyBatisæ˜¯æ›´ç®€å•å®Œæˆç¨‹åºå’Œæ•°æ®åº“äº¤äº’çš„æ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯æ›´ç®€å•çš„æ“ä½œå’Œè¯»å–æ•°æ®åº“å·¥å…·.</li></ul> 
<h2><a id="2_MyBatis_19"></a>2. MyBatiså…¥é—¨</h2> 
<p>MyBatisæ“ä½œæ•°æ®åº“çš„æ­¥éª¤:</p> 
<ol><li>åˆ›å»ºé¡¹ç›®,å¼•å…¥ä¾èµ–</li><li>å‡†å¤‡æ•°æ®ä¸å®ä½“ç±»</li><li>é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯,åŒ…æ‹¬æ•°æ®åº“URL,è´¦å·å’Œå¯†ç </li><li>ç¼–å†™Mapper(æŒä¹…å±‚ä»£ç ),åŒ…æ‹¬æ¥å£interfaceä¸sqlè¯­å¥.</li><li>ç”Ÿæˆæµ‹è¯•ä»£ç ,å¯¹ç¼–å†™çš„æ¥å£è¿›è¡Œæµ‹è¯•.</li></ol> 
<h3><a id="21__26"></a>2.1 åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–</h3> 
<ul><li>åˆ›å»ºSpringBootå·¥ç¨‹,å¹¶<mark>å¯¼å…¥MyBatisçš„èµ·æ­¥ä¾èµ–å’ŒMySQLçš„é©±åŠ¨åŒ…</mark>.æŠŠMyBatis Frameworkå’ŒMySQL driverè¿™ä¸¤ä¸ªé€‰é¡¹éƒ½å‹¾é€‰ä¸Š.<br> <img src="https://images2.imgbox.com/b7/11/TSjsPF74_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>åˆ›å»ºé¡¹ç›®ä¹‹å,æˆ‘ä»¬å°±å¯ä»¥å‘ç°,é¡¹ç›®çš„pomæ–‡ä»¶ä¸­è‡ªåŠ¨å¯¼å…¥äº†ä¸¤ä¸ªé€‰é¡¹çš„ä¾èµ–é¡¹.</li></ul> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>å¦‚æœæˆ‘ä»¬åœ¨åˆ›å»ºå·¥ç¨‹çš„æ—¶å€™å¿˜è®°å‹¾é€‰äº†è¿™ä¸¤ä¸ªé€‰é¡¹,ä¹Ÿå¯ä»¥é€šè¿‡å³é”®ç‚¹å‡»ç”Ÿæˆ,é€‰æ‹©edit starterè‡ªåŠ¨åˆ›å»ºä¾èµ–.<br> <img src="https://images2.imgbox.com/17/7d/YhZ4e5Aq_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="22__45"></a>2.2 å‡†å¤‡æ•°æ®ä¸ç›¸å…³å®ä½“ç±»</h3> 
<ul><li>åˆ›å»ºç”¨æˆ·è¡¨,å¹¶åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»User.</li></ul> 
<pre><code class="prism language-sql"><span class="token comment">-- åˆ›å»ºæ•°æ®åº“ </span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> mybatis_test<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> mybatis_test <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4<span class="token punctuation">;</span>
<span class="token comment">-- ä½¿â½¤æ•°æ®æ•°æ® </span>
<span class="token keyword">USE</span> mybatis_test<span class="token punctuation">;</span>
<span class="token comment">-- åˆ›å»ºè¡¨[ç”¨æˆ·è¡¨] </span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> userinfo<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>userinfo<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
 <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span> <span class="token punctuation">(</span> <span class="token number">11</span> <span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>username<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">127</span> <span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">127</span> <span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">TINYINT</span> <span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>gender<span class="token punctuation">`</span></span> <span class="token keyword">TINYINT</span> <span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'1-ç”· 2-â¼¥ 0-é»˜è®¤'</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">15</span> <span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>delete_flag<span class="token punctuation">`</span></span> <span class="token keyword">TINYINT</span> <span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">'0-æ­£å¸¸, 1-åˆ é™¤'</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span> <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token punctuation">)</span> 
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> <span class="token operator">=</span> utf8mb4<span class="token punctuation">;</span> 
<span class="token comment">-- æ·»åŠ ç”¨æˆ·ä¿¡æ¯ </span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mybatis_test<span class="token punctuation">.</span>userinfo <span class="token punctuation">(</span> username<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone <span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'18612340001'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mybatis_test<span class="token punctuation">.</span>userinfo <span class="token punctuation">(</span> username<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone <span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'18612340002'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mybatis_test<span class="token punctuation">.</span>userinfo <span class="token punctuation">(</span> username<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone <span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'18612340003'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mybatis_test<span class="token punctuation">.</span>userinfo <span class="token punctuation">(</span> username<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>password<span class="token punctuation">`</span></span><span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone <span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span> <span class="token string">'wangwu'</span><span class="token punctuation">,</span> <span class="token string">'wangwu'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'18612340004'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/35/gds5XM37_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ul><li>åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»,UserInfo,å…¶ä¸­å®ä½“ç±»çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸€ä¸€å¯¹åº”.</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jrj<span class="token punctuation">.</span>mybatis</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfo</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleteFlag<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="23__100"></a>2.3 é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯</h3> 
<p>MyBatisä¸­è¦è¿æ¥æ•°æ®åº“éœ€è¦æ•°æ®åº“ç›¸å…³å‚æ•°çš„é…ç½®,åŒ…æ‹¬æ•°æ®åº“URL,ç”¨æˆ·å,å¯†ç ,MySQLé©±åŠ¨ç±».è¿™äº›é…ç½®ä¿¡æ¯<strong>å‡åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆ</strong>.ç”¨äºè¿æ¥å¯¹åº”çš„æ•°æ®åº“.ä¸‹é¢æˆ‘ä»¬ä»¥ymlæ–‡ä»¶ä¸ºä¾‹:</p> 
<pre><code class="prism language-yml"><span class="token comment"># æ•°æ®åº“è¿æ¥é…ç½® </span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
	  <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/mybatis_test<span class="token punctuation">?</span>characterEncoding=utf8<span class="token important">&amp;useSSL=false</span>
	  <span class="token key atrule">username</span><span class="token punctuation">:</span> root
	  <span class="token key atrule">password</span><span class="token punctuation">:</span> root
	  <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
</code></pre> 
<p>å…¶ä¸­,mybatis_testå°±å¯¹åº”çš„æ˜¯æ•°æ®åº“çš„åå­—.<br> [æ³¨æ„] å¦‚æœpasswordæ˜¯çº¯æ•°å­—çš„è¯,<mark>éœ€è¦åœ¨æ•°å­—çš„çš„å¤–å›´ç”¨å•å¼•å·æ‹¬èµ·æ¥</mark>.</p> 
<h3><a id="24_Mapper_113"></a>2.4 ç¼–å†™Mapper</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jrj<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>jrj<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span></span><span class="token class-name">UserInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Select</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserInfoMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>@Mapper</code>æ³¨è§£: è¡¨ç¤ºçš„æ˜¯MyBatisä¸­çš„Mapperæ¥å£,<mark>åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™,è¿™ä¸ªæ¥å£ä¼šäº¤ç»™IoCå®¹å™¨ç®¡ç†</mark>.<br> <code>@Select</code>æ³¨è§£: è¡¨ç¤ºçš„æ˜¯sqlè¯­å¥æ˜¯ä¸€ä¸ªselectæŸ¥è¯¢è¯­å¥,<strong>ä¹Ÿå°±æ˜¯æ³¨è§£æ–¹æ³•å…·ä½“å®ç°çš„å†…å®¹</strong>.<br> éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯,<strong>åƒè¿™æ ·è¿”å›å¤šæ¡æ•°æ®çš„æ¥å£,ä¸€å®šè¦ç”¨Listæ¥æ¥æ”¶</strong>.</p> 
<h3><a id="25__133"></a>2.5 ç¼–å†™æµ‹è¯•ä»£ç </h3> 
<p>å¦‚ä½•ç”Ÿæˆæµ‹è¯•ä»£ç :</p> 
<ul><li>åœ¨æƒ³è¦æµ‹è¯•çš„æ¥å£ä¸­ç‚¹å‡»å³é”®,ç‚¹å‡»ç”Ÿæˆ.<br> <img src="https://images2.imgbox.com/71/71/4FhpqLbt_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>ç‚¹å‡»æµ‹è¯•<br> <img src="https://images2.imgbox.com/7f/2e/60Ajkfk5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>é€‰æ‹©æƒ³è¦æµ‹è¯•çš„æ–¹æ³•<br> <img src="https://images2.imgbox.com/c4/e9/9656FCcr_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>æµ‹è¯•ç±»ä¼šåœ¨srcç›®å½•ä¸­çš„testç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆ.<br> <img src="https://images2.imgbox.com/63/2d/DpADrlK7_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li><li>ä¹‹ååœ¨å¯¹åº”çš„æ–¹æ³•ä¸­ç¼–å†™æµ‹è¯•ä»£ç .</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">UserInfoMapperTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserInfoMapper</span> userInfoMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userInfoMapper<span class="token punctuation">.</span><span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li><code>@SpringBootTest</code>æ³¨è§£:ä¼šåœ¨æµ‹è¯•ç±»è¿è¡Œçš„æ—¶å€™,è‡ªåŠ¨åŠ è½½Springç¯å¢ƒ,</li><li><code>@Autowired</code>è¿›è¡ŒDIæ³¨å…¥ä¹‹å,æˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨å¯¹åº”çš„ç±»è°ƒç”¨å¯¹åº”çš„æ–¹æ³•è¿›è¡Œæµ‹è¯•.</li><li><code>@Test</code>æ³¨è§£è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•, <mark>åŠ ä¸Šè¯¥æ³¨è§£åä¼šåœ¨è¿è¡Œæµ‹è¯•æ–¹æ³•çš„æ—¶å€™åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºæµ‹è¯•æ–¹æ³•çš„è¿è¡Œç»“æœ</mark>.</li></ol> 
<h2><a id="2_MyBatis_162"></a>2. MyBatisåŸºç¡€æ“ä½œ</h2> 
<h3><a id="21_MyBatis_163"></a>2.1 MyBatisæ‰“å°æ—¥å¿—</h3> 
<p>åœ¨Mybatiså½“ä¸­æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ—¥å¿—,æŸ¥çœ‹åˆ°sqlè¯­å¥çš„æ‰§è¡Œã€æ‰§è¡Œä¼ é€’çš„å‚æ•°ä»¥åŠæ‰§è¡Œç»“æœ,<strong>åœ¨é…ç½®æ–‡ä»¶</strong>ä¸­è¿›è¡Œé…ç½®å³å¯.ä¸‹é¢æ˜¯ymlé…ç½®æ–‡ä»¶çš„æ ¼å¼:</p> 
<pre><code class="prism language-yml"><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span> <span class="token comment"># é…ç½®æ‰“å° MyBatisâ½‡å¿— </span>
  	<span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre> 
<p>é‡æ–°è¿è¡Œç¨‹åº,æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<mark>sqlè¯­å¥çš„å†…å®¹,ä»¥åŠä¼ é€’çš„å‚æ•°ç±»å‹å’Œæ‰§è¡Œç»“æœ</mark>.</p> 
<p><img src="https://images2.imgbox.com/5e/19/JF3GjHUT_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="22__173"></a>2.2 å‚æ•°ä¼ é€’</h3> 
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾id=4çš„ç”¨æˆ·,å¯¹åº”çš„sqlæ˜¯select * from userinfo where id=4.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * form userinfo where id = 4"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä½†æ˜¯è¿™æ ·çš„è¯,å°±åªèƒ½æŸ¥è¯¢åˆ°idä¸º4ç”¨æˆ·çš„æ•°æ®,æ‰€ä»¥æˆ‘ä»¬ä¸å»ºè®®æŠŠsqlè¯­å¥è¿™æ ·å†™æ­».éœ€è¦å˜ä¸ºåŠ¨æ€çš„æ•°å€¼.<br> è§£å†³åŠæ³•å°±æ˜¯åœ¨selectUseræ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°(id),<mark>å°†æ–¹æ³•ä¸­çš„å‚æ•°ä¼ é€’ç»™sqlè¯­å¥.ä½¿ç”¨<code>#{}</code>çš„æ–¹å¼åœ¨sqlè¯­å¥ä¸­è·å–æ–¹æ³•ä¸­çš„å‚æ•°</mark>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where id = #{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token keyword">void</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œæµ‹è¯•ä»£ç :<br> <img src="https://images2.imgbox.com/4b/04/HkVbXYui_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <mark>å¦‚æœmapperæ¥å£æ–¹æ³•ä¸­çš„å½¢å¼å‚æ•°åªæœ‰ä¸€ä¸ª,<code>#{}</code>é‡Œé¢çš„å±æ€§åå¯ä»¥éšä¾¿å†™.å› ä¸ºå‚æ•°å’Œå±æ€§åéƒ½åªæœ‰ä¸€ä¸ª</mark>,åªèƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³».å¦‚æœå‚æ•°æœ‰å¤šä¸ª,å±æ€§åå’Œå‚æ•°åå°±å¿…é¡»ä¿æŒä¸€è‡´,æˆ–è€…ä½¿ç”¨param1,param2â€¦æŒ‰ç…§é¡ºåºå¯¹åº”.</p> 
<ul><li>æŒ‰ç…§åå­—å¯¹åº”</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username = #{name} and id = #{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectUser2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser2</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•ç»“æœ:<br> <img src="https://images2.imgbox.com/86/12/ocCwRAhg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ul><li>æŒ‰ç…§å‚æ•°é¡ºåºå¯¹åº”</li></ul> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username = #{param1} and id = #{param2}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser3</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">selectUser3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser3</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•ç»“æœ:<br> <img src="https://images2.imgbox.com/dc/c2/bnRRwtM7_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¹Ÿå¯ä»¥é€šè¿‡<code>@Param</code>æ³¨è§£,è®¾ç½®å‚æ•°çš„åˆ«å,å¦‚æœä½¿ç”¨<code>@Param</code>è®¾ç½®åˆ«å,<mark>æ³¨è§£ä¸­çš„åˆ«åå¿…é¡»å’Œsqlä¸­çš„å±æ€§åä¿æŒä¸€è‡´</mark>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where id = #{ID}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser4</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"ID"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectUser4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser4</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œç»“æœ:<br> <img src="https://images2.imgbox.com/48/6e/7F67CH1t_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="23_insert_240"></a>2.3 å¢(insert)</h3> 
<p>sqlè¯­å¥:<br> <code>insert into userinfo (username, `password`, age, gender, phone) values ("zhaoliu","zhaoliu",19,1,"18700001234")</code><br> æŠŠsqlä¸­çš„å¸¸é‡æ¢ä¸ºåŠ¨æ€çš„å‚æ•°.<br> Mapperæ¥å£:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into userinfo (id,username,password,age,gender,phone) values ("</span> <span class="token operator">+</span>
        <span class="token string">"#{id},#{username},#{password},#{age},#{gender},#{phone})"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">insertUser1</span><span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™é‡Œæˆ‘ä»¬<mark>å¯ä»¥ç›´æ¥ä½¿ç”¨UserInfoå¯¹è±¡çš„å±æ€§æ¥è·å–å‚æ•°</mark>.ç”±äºInsertè¿”å›çš„æ˜¯æ”¹å˜æ•°æ®åº“çš„è¡Œæ•°,æ‰€ä»¥æ¥å£çš„è¿”å›å€¼æ˜¯Integer.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">insertUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"wangwu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"12345"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token string">"13334768907"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfoMapper<span class="token punctuation">.</span><span class="token function">insertUser1</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œç»“æœ:<br> <img src="https://images2.imgbox.com/57/bd/SllZlLr2_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æŸ¥çœ‹æ•°æ®åº“:idä¸º5çš„æ•°æ®æ’å…¥æˆåŠŸ.<br> <img src="https://images2.imgbox.com/41/5e/3C5dCS08_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®¾ç½®<code>@Param</code>å±æ€§,<mark>é‚£ä¹ˆ<code>#{}</code>å°±éœ€è¦ç”¨å‚æ•°.å±æ€§çš„æ–¹å¼æ¥è·å–</mark>.</p> 
<ul><li>è¿”å›ä¸»é”®<br> Insertè¯­å¥é»˜è®¤è¿”å›çš„æ˜¯å—å½±å“çš„è¡Œæ•°,ä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹,æ•°æ®æ’å…¥ä¹‹å,è¿˜éœ€è¦æœ‰åç»­çš„å…³è”æ“ä½œ,éœ€è¦è·å–åˆ°æ–°æ’å…¥çš„æ•°æ®çš„id.<mark>å¦‚æœæƒ³è¦æ‹¿åˆ°è‡ªå¢id,éœ€è¦åœ¨Mapperæ¥å£çš„æ–¹æ³•ä¸Šæ·»åŠ â¼€ä¸ªOptionsçš„æ³¨è§£</mark>.</li></ul> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>keyProperty <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into userinfo (id,username,password,age,gender,phone) values ("</span> <span class="token operator">+</span>
        <span class="token string">"#{id},#{username},#{password},#{age},#{gender},#{phone})"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">insertUser2</span><span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>å…¶ä¸­useGeneratedKeysè¡¨ç¤ºçš„æ˜¯æ˜¯è‡ªå¢?keyPropertyè¡¨ç¤ºçš„æ˜¯å“ªä¸ªå­—æ®µè‡ªå¢?</strong></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">insertUser2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"zhaoliu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"1234566"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token string">"13334098738"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"change col "</span> <span class="token operator">+</span> userInfoMapper<span class="token punctuation">.</span><span class="token function">insertUser2</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"id = "</span> <span class="token operator">+</span> userInfo<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•è¿è¡Œ:<br> <img src="https://images2.imgbox.com/4b/c8/kLJ1WbMo_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬çœ‹åˆ°å½±å“çš„è¡Œæ•°æ˜¯1,è‡ªå¢çš„idä¸º7.ä¸‹é¢æˆ‘ä»¬è§‚å¯Ÿæ•°æ®åº“:<br> <img src="https://images2.imgbox.com/d9/52/SCTJCWrg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="24_Delete_295"></a>2.4 åˆ (Delete)</h3> 
<p>sqlè¯­å¥:<br> <code>delete from userinfo where id=6</code>.<br> æŠŠsqlè¯­å¥ä¸­çš„å¸¸é‡æ›¿æ¢ä¸ºåŠ¨æ€å‚æ•°.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from userinfo where id = #{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">deleteUser1</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">deleteUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">deleteUser1</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æŸ¥çœ‹æ•°æ®åº“,æˆ‘ä»¬çœ‹åˆ°id=6çš„æ•°æ®è¢«åˆ é™¤æ‰äº†.<br> <img src="https://images2.imgbox.com/7e/97/qla9QNtL_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="25_Update_311"></a>2.5 æ”¹(Update)</h3> 
<p>sqlè¯­å¥:<br> <code>update userinfo set username="zhaoliu" where id=5</code><br> æŠŠSQLä¸­çš„å¸¸é‡æ›¿æ¢ä¸ºåŠ¨æ€çš„å‚æ•°<br> Mapperæ¥å£:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">"update userinfo set username = #{username} where id = #{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userInfo<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userInfo<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"tianqi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•è¿è¡Œ:æˆ‘ä»¬çœ‹åˆ°æ•°æ®åº“ä¸­idä¸º5çš„åå­—è¢«æ”¹æˆäº†tianqi.<br> <img src="https://images2.imgbox.com/79/8a/jQZCXacb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="26_select_331"></a>2.6 æŸ¥(select)</h3> 
<p>æˆ‘ä»¬åœ¨ä¸Šé¢æŸ¥è¯¢çš„æ—¶å€™,å‘ç°æœ‰å‡ ä¸ªå­—æ®µæ˜¯æ²¡æœ‰èµ‹å€¼çš„.<strong>åªæœ‰Javaå¯¹è±¡å±æ€§å’Œæ•°æ®åº“å­—æ®µâ¼€æ¨¡â¼€æ ·æ—¶,æ‰ä¼šè¿›è¡Œèµ‹å€¼</strong>.<br> <img src="https://images2.imgbox.com/e4/24/4r31kXjM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> åœ¨æˆ‘ä»¬æŸ¥è¯¢æ‰€æœ‰æ•°æ®çš„æ—¶å€™,æˆ‘ä»¬å‘ç°,å¯¹è±¡çš„åˆ›å»ºæ—¶é—´,æ›´æ–°æ—¶é—´,åˆ é™¤é€»è¾‘æ•°å­—éƒ½æ˜¯null.<br> <strong>åŸå› </strong>:<br> å½“è‡ªåŠ¨æ˜ å°„æŸ¥è¯¢ç»“æœçš„æ—¶å€™,MyBatisä¼šè·å–ç»“æœä¸­<strong>è¿”å›çš„åˆ—åå¹¶åœ¨Javaç±»ä¸­æŸ¥æ‰¾ç›¸åŒåå­—çš„å±æ€§(å¿½ç•¥å¤§å°å†™)</strong> .è¿™æ„å‘³ç€å¦‚æœå‘ç°äº†IDåˆ—å’Œidå±æ€§ï¼ŒMyBatisä¼šå°†åˆ—IDçš„å€¼èµ‹ç»™idå±æ€§.ä½†æ˜¯æˆ‘ä»¬çš„åˆ›å»ºæ—¶é—´,æ›´æ–°æ—¶é—´,åˆ é™¤é€»è¾‘æ•°å­—,<em>åœ¨æ•°æ®åº“ä¸­æ˜¯è›‡å½¢ç»“æ„çš„åå­—,è€Œåœ¨Javaç±»ä¸­æ˜¯å°é©¼å³°çš„æ ¼å¼</em>.<br> <img src="https://images2.imgbox.com/56/25/NFaTzFhh_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä¸‹é¢æ˜¯è§£å†³åŠæ³•:</p> 
<h4><a id="361__339"></a>3.6.1 èµ·åˆ«å</h4> 
<p>åœ¨sqlè¯­å¥ä¸­,ç»™åˆ—åèµ·åˆ«å,<strong>ä¿æŒåˆ«åå’Œå®ä½“ç±»å±æ€§åä¸€æ ·</strong>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, username, `password`, age, gender, phone, "</span> <span class="token operator">+</span>
        <span class="token string">"delete_flag as deleteFlag,"</span> <span class="token operator">+</span>
        <span class="token string">"create_time as createTime, update_time as updateTime from userinfo"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å½“sqlè¯­å¥å¤ªé•¿çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨+è¿›è¡Œæ‹¼æ¥.</p> 
<h4><a id="362__349"></a>3.6.2 ç»“æœæ˜ å°„</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"delete_flag"</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">"deleteFlag"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"create_time"</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">"createTime"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"update_time"</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">"updateTime"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>@Results</code>æ³¨è§£ä¸­å¯ä»¥ç”¨å¤§æ‹¬å·æ‹¬èµ·å¤šä¸ª<code>@Result</code>æ˜ å°„,<mark><code>@Result</code>å‰é¢çš„å‚æ•°æ˜¯è¡¨çš„å­—æ®µå,åé¢æ˜¯Javaç±»çš„å±æ€§</mark>.ä¹Ÿå°±æ˜¯å­—æ®µä¸å±æ€§çš„æ˜ å°„å…³ç³».</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectAllUser3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userInfoMapper<span class="token punctuation">.</span><span class="token function">selectAllUser3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token operator">:</span>list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œæµ‹è¯•:<br> <img src="https://images2.imgbox.com/67/1c/0wvKe2di_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬çœ‹åˆ°,åé¢çš„å‡ ä¸ªå±æ€§è¢«æ˜¾ç¤ºäº†å‡ºæ¥.<br> å¦‚æœå…¶ä»–sqlä¹Ÿæƒ³å¤ç”¨è¿™ä¸€ç»„æ˜ å°„,å¯ä»¥ç»™è¿™ä¸€ç»„<code>@Results</code>æ˜ å°„è‡ªå®šä¹‰ä¸€ä¸ªåç§°. ä¹‹ååœ¨æƒ³è¦å¤ç”¨è¿™ä¸ªsqlæ˜ å°„çš„åœ°æ–¹ä½¿ç”¨<code>@ResultMap(æ˜ å°„åç§°)</code>æ¥å¤ç”¨æ˜ å°„.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">"resultMap1"</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"delete_flag"</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">"deleteFlag"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"create_time"</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">"createTime"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"update_time"</span><span class="token punctuation">,</span>property <span class="token operator">=</span> <span class="token string">"updateTime"</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo"</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token annotation punctuation">@ResultMap</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"resultMap1"</span><span class="token punctuation">)</span>
 <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where id = #{id}"</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser5</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>@ResultMap</code>æ³¨è§£ä¸­çš„valueçš„å€¼å’Œä¸Šé¢æ˜ å°„çš„idåå­—ä¸€æ ·.æ–¹å¯å¤ç”¨.</p> 
<h4><a id="263__390"></a>2.6.3 å¼€å¯é©¼å³°å‘½åä¸è›‡å½¢å‘½åè½¬æ¢(æ¨èåšæ³•)</h4> 
<p>é€šå¸¸æ•°æ®åº“åˆ—<em>ä½¿ç”¨è›‡å½¢å‘½åæ³•è¿›è¡Œå‘½å(ä¸‹åˆ’çº¿åˆ†å‰²å„ä¸ªå•è¯),è€ŒJavaå±æ€§â¼€èˆ¬éµå¾ªé©¼å³°å‘½åæ³•çº¦å®š</em>.<br> ä¸ºäº†åœ¨è¿™ä¸¤ç§å‘½åæ–¹å¼ä¹‹é—´å¯ç”¨è‡ªåŠ¨æ˜ å°„ï¼Œéœ€è¦å°†<code>mapUnderscoreToCamelCase</code>è®¾ç½®ä¸ºtrue.æˆ‘ä»¬éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®.</p> 
<pre><code class="prism language-yml"><span class="token key atrule">mybatis</span><span class="token punctuation">:</span> 
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
   <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#é…ç½®é©¼å³°â¾ƒåŠ¨è½¬æ¢ </span>
</code></pre> 
<p>è½¬æ¢è§„åˆ™:abc_xyz=&gt;abcXyz<mark>è›‡å½¢è½¬æ¢ä¸ºå°é©¼å³°æ ¼å¼</mark>.<br> Javaä»£ç ä¸åšä»»ä½•å¤„ç†:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>æˆ‘ä»¬çœ‹åˆ°åŸæ¥æ²¡æœ‰èµ‹å€¼ä¸Šçš„å±æ€§è¢«èµ‹å€¼äº†.<br> <img src="https://images2.imgbox.com/b6/ab/xIi3P5Up_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p>mysqlè¡¨çš„è®¾è®¡è§„èŒƒ:<br> è‡ªå¢id,åˆ›å»ºæ—¥æœŸ,æ›´æ–°æ—¥æœŸ,è¿™å‡ ä¸ªå­—æ®µå³ä½¿ä¸šåŠ¡æ²¡æœ‰éœ€æ±‚,ä¹Ÿå¿…é¡»æœ‰.</p> 
</blockquote> 
<h2><a id="3_MyBatis_XML_410"></a>3. MyBatis XMLé…ç½®æ–‡ä»¶</h2> 
<p>MyBatisçš„å¼€å‘æ–¹å¼ä»å¤§æ–¹å‘ä¸Šåˆ†ä¸ºä¸¤ç§,é™¤äº†æˆ‘ä»¬ä¸Šé¢å±•ç¤ºçš„ä½¿ç”¨æ³¨è§£çš„æ–¹å¼,æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡xmlé…ç½®æ–‡ä»¶æ¥å¼€å‘.</p> 
<blockquote> 
 <p>ä½¿â½¤Mybatisçš„æ³¨è§£æ–¹å¼ï¼Œä¸»è¦æ˜¯æ¥å®Œæˆâ¼€äº›ç®€å•çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½.å¦‚æœéœ€è¦å®ç°å¤æ‚çš„SQLåŠŸèƒ½ï¼Œå»ºè®®ä½¿ç”¨XMLæ¥é…ç½®æ˜ å°„è¯­å¥ï¼Œä¹Ÿå°±æ˜¯å°†SQLè¯­å¥å†™åœ¨XMLé…ç½®æ–‡ä»¶ä¸­.</p> 
</blockquote> 
<p>è¿™ç§å¼€å‘æ–¹å¼å¤§è‡´åˆ†ä¸ºä¸¤æ­¥:</p> 
<ol><li>é…ç½®æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²å’ŒMyBatis.</li><li>å†™æŒä¹…å±‚ä»£ç </li></ol> 
<h3><a id="31_MyBatis_417"></a>3.1 é…ç½®è¿æ¥å­—ç¬¦ä¸²å’ŒMyBatis</h3> 
<p>æ­¤æ­¥éª¤éœ€è¦è¿›è¡Œä¸¤é¡¹è®¾ç½®,<mark>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²è®¾ç½®å’ŒæŒ‡å®šMyBatisçš„XMLæ–‡ä»¶</mark>.</p> 
<pre><code class="prism language-yml"><span class="token comment"># æ•°æ®åº“è¿æ¥é…ç½® </span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/mybatis_test<span class="token punctuation">?</span>
    characterEncoding=utf8<span class="token important">&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
<span class="token comment"># é…ç½® mybatis xml çš„â½‚ä»¶è·¯å¾„ï¼Œåœ¨ resources/mapper åˆ›å»ºæ‰€æœ‰è¡¨çš„ xml â½‚ä»¶ </span>
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">**Mapper.xml</span>
</code></pre> 
<p><code>mapper-locations</code>ä¸­çš„valueå€¼,<code>classpath</code>è¡¨ç¤ºçš„æ˜¯é¡¹ç›®ä¸­çš„resourceç›®å½•.<code>mapper</code>è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç›®å½•.ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨xmlæ“ä½œæ•°æ®åº“çš„ä»£ç éƒ½ä¼šå•ç‹¬æ”¾åœ¨ä¸€ä¸ªmapperç›®å½•ä¸­,ä¹‹å<code>**Mapper.xml</code>è¡¨ç¤ºçš„æ˜¯ä»¥è¿™ä¸ªç»“å°¾çš„xmlæ–‡ä»¶å°±æ˜¯æ“ä½œæ•°æ®åº“çš„xmlæ–‡ä»¶.</p> 
<h3><a id="32__433"></a>3.2 æŒä¹…å±‚ä»£ç </h3> 
<p>æŒä¹…å±‚ä»£ç åˆ†ä¸ºä¸¤éƒ¨åˆ†:</p> 
<ol><li>æ–¹æ³•å®šä¹‰: Interface</li><li>æ–¹æ³•å®ç°: xxx.xml<br> <img src="https://images2.imgbox.com/4d/50/lZdhee0C_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol> 
<h4><a id="321_mapper_438"></a>3.2.1 æ·»åŠ mapperæ¥å£</h4> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jrj<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>jrj<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span></span><span class="token class-name">UserInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserInfoXMLMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="322_UserInfoXMLMapperxml_453"></a>3.2.2 æ·»åŠ UserInfoXMLMapper.xml</h4> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jrj.mybatis.mapper.UserInfoXMLMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>mapperæ ‡ç­¾ä¸­åŠ çš„æ˜¯<mark>å¸¦æœ‰<code>@Mapper</code>æ³¨è§£æ¥å£çš„è·¯å¾„</mark>,å³æƒ³è¦é€šè¿‡MyBatisæ“ä½œæ•°æ®åº“çš„Mapperæ¥å£.<br> æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„å…·ä½“å®ç°:</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jrj.mybatis.mapper.UserInfoXMLMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectAllUser1<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jrj.mybatis.UserInfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        select * from userinfo
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><mark>å…¶ä¸­selectæ ‡ç­¾ä¸­,<code>id="selectAllUser1"</code>ä»£è¡¨çš„æ˜¯Mapperä¸­çš„æ–¹æ³•å. <code>resultType="com.jrj.mybatis.UserInfo"</code>ä»£è¡¨çš„æ˜¯sqlæŸ¥è¯¢ä¹‹åè¿”å›çš„ç±»å‹,ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¼€å¤´å®šä¹‰çš„å®ä½“ç±»,åªæœ‰selectç±»å‹çš„è¯­å¥ä¼šæœ‰è¿”å›å€¼çš„ç±»å‹</mark>.<strong>æ³¨æ„,æ˜¯sqlæŸ¥è¯¢ä¹‹åè¿”å›çš„ç±»å‹,ä¸æ˜¯æ¥å£è¿”å›å€¼çš„ç±»å‹</strong>,sqlæŸ¥è¯¢ä¹‹åè¿”å›çš„æ˜¯UserInfoç±»,è€Œæ¥å£è¿”å›çš„æ˜¯Listç±»å‹.<br> æ ‡ç­¾ä¸­é—´å†™çš„æ˜¯sqlè¯­å¥.<br> æˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªæ’ä»¶,å«åšMyBatisX,è¿™ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆxmlæ ‡ç­¾.æˆ‘ä»¬æ˜¯éœ€è¦å†™sqlè¯­å¥å³å¯.</p> 
<blockquote> 
 <p>æ³¨æ„,åœ¨æˆ‘ä»¬çš„æ–¹æ³•åä¸­å¦‚æœæœ‰select,Insertè¿™æ ·çš„å…³é”®å­—çš„æ—¶å€™,æ’ä»¶ä¼šè‡ªåŠ¨æ ¹æ®åå­—è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾ç±»å‹.å¦‚æœæ²¡æœ‰,éœ€è¦åœ¨ç”Ÿæˆçš„æ—¶å€™è¿›è¡Œé€‰æ‹©.<br> <img src="https://images2.imgbox.com/86/a2/hgixEDpE_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
</blockquote> 
<h4><a id="323__479"></a>3.2.3 å•å…ƒæµ‹è¯•</h4> 
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectAllUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> userInfoXMLMapper<span class="token punctuation">.</span><span class="token function">selectAllUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•ç»“æœ:<br> <img src="https://images2.imgbox.com/8d/ec/ofrVg49u_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="33__493"></a>3.3 å¢åˆ æ”¹æŸ¥æ“ä½œ</h3> 
<h4><a id="331_Insert_494"></a>3.3.1 å¢(Insert)</h4> 
<p>UserInfoMapperæ¥å£:</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>xml:</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insertUser<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    insert into userinfo (id,username,password,age,gender,phone) values (#{id},#{username},#{password},#{age},#{gender},#{phone})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>æµ‹è¯•ä»£ç :</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"zhubajie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"6666666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfo<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token string">"487362849326"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userInfoXMLMapper<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œç»“æœ:<br> <img src="https://images2.imgbox.com/53/e3/dbWmsYzn_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/9a/1a/bky79Uwg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä¸æ³¨è§£å®ç°ç±»ä¼¼,è¦æ˜¯åœ¨å½¢å‚çš„å‰é¢åŠ ä¸Š<code>@Param</code>æ³¨è§£çš„è¯,åœ¨sqlè¯­å¥ä¸­çš„<code>#{}</code>å°±å¿…é¡»ä½¿ç”¨<strong>å¯¹è±¡å.å±æ€§å</strong>æ¥è®¿é—®.<br> Mapperæ¥å£:</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"userinfo"</span><span class="token punctuation">)</span> <span class="token class-name">UserInfo</span> userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>xml:</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insertUser<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
   insert into userinfo (id,username,password,age,gender,phone) values (#{userinfo.id},#{userinfo.username},#{userinfo.password},#{userinfo.age},#{userinfo.gender},#{userinfo.phone})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="332_Delete_536"></a>3.3.2 åˆ (Delete)</h4> 
<h4><a id="333_Update_537"></a>3.3.3 æ”¹(Update)</h4> 
<p>åˆ å’Œæ”¹å’Œä¸Šé¢çš„å¢æ˜¯ç›¸åŒçš„é“ç†,è¿™é‡Œæˆ‘ä»¬ä¸å†èµ˜è¿°.</p> 
<h4><a id="334_select_539"></a>3.3.4 æŸ¥(select)</h4> 
<p>åŒæ ·,ä½¿ç”¨xmlè¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™,åŒæ ·ä¹Ÿå­˜åœ¨sqlå­—æ®µåå’Œç±»å±æ€§å¯¹åº”ä¸ä¸Šçš„é—®é¢˜.<br> xml:</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectAllUser1<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jrj.mybatis.UserInfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    select * from userinfo
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>Mapperæ¥å£:</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿è¡Œç»“æœ:<br> <img src="https://images2.imgbox.com/a5/f9/w1US6k2R_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬çœ‹åˆ°ä¸€äº›å­—æ®µåä»ç„¶æ²¡æœ‰è¢«èµ‹å€¼.<br> è§£å†³åŠæ³•ä¸æ³¨è§£ç±»ä¼¼:</p> 
<ol><li>èµ·åˆ«å</li><li>ç»“æœæ˜ å°„</li><li>å¼€å¯é©¼å³°ä¸è›‡å½¢è½¬æ¢.<br> 1,3 ä¸æ³¨è§£ä¸€æ ·,ä¸å†èµ˜è¿°.ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç»“æœæ˜ å°„æ³•å¦‚ä½•è§£å†³å­—æ®µä¸å±æ€§æ˜ å°„ä»¥åŠä¸»é”®é—®é¢˜.<br> xml:</li></ol> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Map<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jrj.mybatis.UserInfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete_flag<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deleteFlag<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>create_time<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectAllUser1<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jrj.mybatis.UserInfo<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Map<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    select * from userinfo
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>è§£é‡Š:<br> <img src="https://images2.imgbox.com/42/f1/kZmQGvkX_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="4__573"></a>4. å…¶ä»–æŸ¥è¯¢æ“ä½œ</h2> 
<h3><a id="41__574"></a>4.1 å¤šè¡¨æŸ¥è¯¢(è”åˆæŸ¥è¯¢)</h3> 
<p>å¤šè¡¨æŸ¥è¯¢å’Œå•è¡¨æŸ¥è¯¢ç±»ä¼¼,åªä¸è¿‡å°±æ˜¯sqlä¸åŒè€Œå·²,å…·ä½“sqlå¯å‚è€ƒ:<br> <a href="https://lilesily12385.blog.csdn.net/article/details/137519405" rel="nofollow">https://lilesily12385.blog.csdn.net/article/details/137519405</a></p> 
<h4><a id="411__577"></a>4.1.1 å‡†å¤‡æ•°æ®,åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»</h4> 
<p>ä¸Šé¢å»ºäº†â¼€å¼ ç”¨æˆ·è¡¨,æˆ‘ä»¬å†æ¥å»ºâ¼€å¼ æ–‡ç« è¡¨,è¿›è¡Œå¤šè¡¨å…³è”æŸ¥è¯¢.<br> <strong>æ–‡ç« è¡¨çš„uid,å¯¹åº”ç”¨æˆ·è¡¨çš„id</strong>.</p> 
<ul><li>å‡†å¤‡æ•°æ®</li></ul> 
<pre><code class="prism language-sql"><span class="token comment">-- åˆ›å»ºâ½‚ç« è¡¨ </span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> articleinfo<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> articleinfo <span class="token punctuation">(</span>
 id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
 title <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 content <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 uid <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 delete_flag <span class="token keyword">TINYINT</span> <span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">'0-æ­£å¸¸, 1-åˆ é™¤'</span><span class="token punctuation">,</span>
 create_time <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 update_time <span class="token keyword">DATETIME</span> <span class="token keyword">DEFAULT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">charset</span> <span class="token string">'utf8mb4'</span><span class="token punctuation">;</span>
<span class="token comment">-- æ’â¼Šæµ‹è¯•æ•°æ® </span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> articleinfo <span class="token punctuation">(</span> title<span class="token punctuation">,</span> content<span class="token punctuation">,</span> uid <span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span> <span class="token string">'Java'</span><span class="token punctuation">,</span> <span class="token string">'Javaæ­£â½‚'</span><span class="token punctuation">,</span> <span class="token number">1</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>åˆ›å»ºå¯¹åº”model</li></ul> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jrj<span class="token punctuation">.</span>mybatis</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArticleInfo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> uid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleteFlag<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="412__616"></a>4.1.2 æŸ¥è¯¢æ•°æ®</h4> 
<p>éœ€æ±‚,æ ¹æ®uidæŸ¥è¯¢ä½œè€…çš„åç§°ç­‰ç›¸å…³ä¿¡æ¯.<br> sql:</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span>
 ta<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
 ta<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
 ta<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
 ta<span class="token punctuation">.</span>uid<span class="token punctuation">,</span>
 tb<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
 tb<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
 tb<span class="token punctuation">.</span>gender 
<span class="token keyword">FROM</span>
 articleinfo ta
 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> userinfo tb <span class="token keyword">ON</span> ta<span class="token punctuation">.</span>uid <span class="token operator">=</span> tb<span class="token punctuation">.</span>id 
<span class="token keyword">WHERE</span>
 ta<span class="token punctuation">.</span>id <span class="token operator">=</span><span class="token number">1</span>
</code></pre> 
<p>è¡¥å……å®ä½“ç±»:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArticleInfo</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> uid<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deleteFlag<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æ¥å£å®šä¹‰:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ArticleInfoMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select "</span> <span class="token operator">+</span>
<span class="token string">"articleinfo.id,articleinfo.title,articleinfo.content,articleinfo.uid,articleinfo.delete_flag,articleinfo.create_time,articleinfo.update_time,userinfo.username,userinfo.age,userinfo.gender "</span> <span class="token operator">+</span>
            <span class="token string">"from "</span> <span class="token operator">+</span>
            <span class="token string">"articleinfo left join userinfo "</span> <span class="token operator">+</span>
            <span class="token string">"on articleinfo.uid = userinfo.id "</span> <span class="token operator">+</span>
            <span class="token string">"where userinfo.id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ArticleInfo</span> <span class="token function">selectArticle</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•ä»£ç :</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">ArticleInfoMapperTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">ArticleInfoMapper</span> articleInfoMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">selectArticle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>articleInfoMapper<span class="token punctuation">.</span><span class="token function">selectArticle</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œç»“æœ:<br> <img src="https://images2.imgbox.com/d6/33/PSO4eHzX_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p>ä¸€èˆ¬æƒ…å†µä¸‹,æˆ‘ä»¬ä¸ä¼šè½»æ˜“ä½¿ç”¨è”åˆæŸ¥è¯¢,å› ä¸ºå®ƒæ˜¯ä¸€ç§æ…¢æŸ¥è¯¢,ä¼šå½±å“é›†ç¾¤çš„æ€§èƒ½.æˆ‘ä»¬ä¸€èˆ¬ä¼šæŠŠè”åˆæŸ¥è¯¢çš„sqlæ‹†åˆ†æˆå¤šä¸ªå•è¡¨æŸ¥è¯¢.<br> å½“ç„¶æœ‰äº›æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨å¤šè¡¨æŸ¥è¯¢,è¿™äº›æƒ…å†µå¯¹äºæ€§èƒ½è¦æ±‚éƒ½æ¯”è¾ƒå°:æ¯”å¦‚å†…éƒ¨å‘˜å·¥ä½¿ç”¨çš„ç³»ç»Ÿ,Bç«¯é¡¹ç›®(å¹³å°çš„å•†å®¶ç«¯).</p> 
</blockquote> 
<h3><a id="42____681"></a>4.2 #{} å’Œ ${}</h3> 
<p>åœ¨MyBatisä¸­,å‚æ•°èµ‹å€¼çš„æ–¹æ³•ä¸ä»…ä»…åªæœ‰<code>#{}</code>,è€Œä¸”è¿˜æœ‰<code>${}</code>,ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹äºŒè€…çš„åŒºåˆ«.</p> 
<h4><a id="421__683"></a>4.2.1 ä½¿ç”¨</h4> 
<ol><li>å…ˆçœ‹Integerç±»å‹çš„å‚æ•°</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where id = #{id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è§‚å¯Ÿæ—¥å¿—:<br> <img src="https://images2.imgbox.com/11/0a/xApfg0Bz_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬å‘ç°,é€šè¿‡æ¬¡æ¥å£è¾“å‡ºçš„sqlè¯­å¥æ˜¯:<br> <code>select * form userinfo where id = ?</code><br> æˆ‘ä»¬è¾“â¼Šçš„å‚æ•°å¹¶æ²¡æœ‰åœ¨åé¢æ‹¼æ¥ï¼Œ<mark>idçš„å€¼æ˜¯ä½¿ç”¨? è¿›è¡Œå ä½.è¿™ç§SQLæˆ‘ä»¬ç§°ä¹‹ä¸º"é¢„ç¼–è¯‘SQL"</mark>.é¢„ç¼–è¯‘sqlæˆ‘ä»¬åœ¨mysqlä¸­çš„JDBCç¼–ç¨‹ä¸­æœ‰æåˆ°è¿‡.<mark>å°±æ˜¯æŠŠå‚æ•°çš„å€¼ç›´æ¥èµ‹ç»™äº†å‰é¢çš„id</mark>.<br> æŠŠ<code>#{}</code>æ›¿æ¢ä¸º<code>${}</code>ä¹‹åå†æ¬¡è§‚å¯Ÿæ‰“å°æ—¥å¿—:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where id = ${id}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/e5/uCR49V0z_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬çœ‹åˆ°,å‚æ•°ç›´æ¥æ‹¼æ¥åˆ°äº†sqlè¯­å¥ä¸­.<br> 2. æ¥ä¸‹æ¥å°±æ˜¯Stringç±»å‹çš„å‚æ•°</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username = #{name}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser6</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è§‚å¯Ÿæ‰“å°æ—¥å¿—:<br> <img src="https://images2.imgbox.com/8d/31/7nly6JMi_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æŠŠ<code>#{}</code>æ¢ä¸º<code>${}</code>å†è§‚å¯Ÿæ‰“å°æ—¥å¿—.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username = ${name}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser6</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è§‚å¯Ÿæ—¥å¿—:<br> <img src="https://images2.imgbox.com/1a/dc/fKepK3Rq_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬å‘ç°,è¿™æ¬¡çš„ç»“æœä¾ç„¶æ˜¯æŠŠå‚æ•°ç›´æ¥æ‹¼æ¥åœ¨äº†sqlä¸­,<mark>ä½†æ˜¯å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°çš„æ—¶å€™éœ€è¦æ·»åŠ å¼•å· â€˜â€™ ,ä½¿<br> â½¤ <code>${} </code>ä¸ä¼šæ‹¼æ¥å¼•å·</mark> â€˜â€™ ,å¯¼è‡´ç¨‹åºæŠ¥é”™.<br> æˆ‘ä»¬ä¿®æ”¹ä»£ç :</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username = '${name}'"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser6</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>å†æ¬¡è¿è¡Œ,æ­£å¸¸è¿”å›:<br> <img src="https://images2.imgbox.com/45/8c/MVz0i3OP_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä»ä¸Šé¢ä¸¤ä¸ªä¾‹å­å¯ä»¥æ€»ç»“:<br> <mark>#{} ä½¿ç”¨çš„æ˜¯é¢„ç¼–è¯‘SQL,é€šè¿‡?å ä½çš„æ–¹å¼,æå‰å¯¹SQLè¿›è¡Œç¼–è¯‘,ç„¶åæŠŠå‚æ•°èµ‹å€¼åˆ°SQLè¯­å¥ä¸­.#{} ä¼šæ ¹æ®å‚æ•°ç±»å‹,è‡ªåŠ¨æ‹¼æ¥å¼•å·â€™â€™ .${} ä¼šç›´æ¥è¿›è¡Œå­—ç¬¦æ›¿æ¢,ç›´æ¥æŠŠå‚æ•°æ‹¼æ¥åˆ°sqlä¸­,â¼€èµ·å¯¹SQLè¿›è¡Œç¼–è¯‘.å¦‚æœå‚æ•°ä¸ºå­—ç¬¦ä¸²,éœ€è¦åŠ ä¸Šå¼•å· â€˜â€™</mark> .</p> 
<h4><a id="422____731"></a>4.2.2 #{} å’Œ ${}çš„åŒºåˆ«(é«˜é¢‘é¢è¯•é¢˜)</h4> 
<p><strong>#{}å’Œ${}çš„åŒºåˆ«å°±æ˜¯é¢„ç¼–è¯‘SQLå’Œå³æ—¶SQLçš„åŒºåˆ«.</strong></p> 
<ol><li><code>#{}</code>ç›¸å¯¹äº<code>${}</code>æ€§èƒ½æ›´é«˜.<br> é¢„ç¼–è¯‘SQLï¼Œ<mark>ç¼–è¯‘â¼€æ¬¡ä¹‹åä¼šå°†ç¼–è¯‘åçš„SQLè¯­å¥ç¼“å­˜èµ·æ¥ï¼Œåé¢å†æ¬¡æ‰§è¡Œè¿™æ¡è¯­å¥æ—¶ï¼Œä¸ä¼šå†æ¬¡ç¼–è¯‘</mark>(åªæ˜¯è¾“â¼Šçš„å‚æ•°ä¸åŒ),çœå»äº†è§£æä¼˜åŒ–ç­‰è¿‡ç¨‹,ä»¥æ­¤æ¥æé«˜æ•ˆç‡.</li><li><code>#{}</code>æ›´å®‰å…¨(é˜²æ­¢sqlæ³¨å…¥)<br> SQLæ³¨â¼Šï¼š<em>æ˜¯é€šè¿‡æ“ä½œè¾“â¼Šçš„æ•°æ®æ¥ä¿®æ”¹äº‹å…ˆå®šä¹‰å¥½çš„SQLè¯­å¥çš„æœ¬æ„</em>ï¼Œä»¥è¾¾åˆ°æ‰§è¡Œä»£ç å¯¹æœåŠ¡å™¨è¿›è¡Œæ”»å‡»çš„æ–¹æ³•.ç”±äºæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œå……åˆ†æ£€æŸ¥ï¼Œè€ŒSQLâ¼œæ˜¯æ‹¼æ¥è€Œæˆï¼Œåœ¨ç”¨æˆ·è¾“â¼Šå‚æ•°æ—¶ï¼Œåœ¨å‚æ•°ä¸­æ·»åŠ â¼€äº›SQLå…³é”®å­—ï¼Œè¾¾åˆ°æ”¹å˜SQLè¿â¾ç»“æœçš„ç›®çš„ï¼Œä¹Ÿå¯ä»¥å®Œæˆæ¶æ„æ”»å‡».<br> æˆ‘ä»¬ä¸‹é¢æ¥ä¸¾ä¸€ä¸ªsqlæ³¨å…¥çš„ä¾‹å­:sqlæ³¨å…¥ä»£ç ï¼š â€™ or 1='1</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username = '${name}'"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser6</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>sqlæ³¨å…¥å:</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectUser6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser6</span><span class="token punctuation">(</span><span class="token string">"' or 1='1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œç»“æœ:<br> <img src="https://images2.imgbox.com/72/80/GBqrrcew_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> sqlå°±è¿”å›æ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯.å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯.<mark>æ‰€ä»¥æˆ‘ä»¬å°½é‡ä½¿ç”¨<code>#{}</code>çš„æ–¹å¼</mark>.</p> 
<h3><a id="43__753"></a>4.3 æ’åºåŠŸèƒ½</h3> 
<p>å³ä½¿<code>${}</code>ä¼šæœ‰sqlæ³¨å…¥çš„é£é™©.æœ‰äº›æƒ…å†µä¸‹,<code>${}</code>è¿˜æ˜¯æœ‰ä»–è‡ªå·±çš„ä½œç”¨.æ¯”å¦‚å¯¹æ•°æ®è¿›è¡Œæ’åº.<br> Mapperå®ç°:æŠŠæ•°æ®æ ¹æ®idé™åºæ’å.</p> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo order by id ${sort}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectUser7</span><span class="token punctuation">(</span><span class="token class-name">String</span> sort<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectUser7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser7</span><span class="token punctuation">(</span><span class="token string">"desc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿”å›äº†æ­£ç¡®çš„ç»“æœ;<br> <img src="https://images2.imgbox.com/27/87/q8ydvpEq_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ==å¦‚æœæŠŠ<span class="katex--inline">KaTeX parse error: Expected 'EOF', got '#' at position 3: æ”¹æˆ#Ì²,å°±ä¼šè‡ªåŠ¨å¯¹å­—ç¬¦ä¸²åŠ ä¸Š``' â€¦</span>{}``.</p> 
<h3><a id="44_like_772"></a>4.4 likeæŸ¥è¯¢</h3> 
<p>likeä½¿ç”¨<code>#{}</code>ä¼šæŠ¥é”™.ä¼šç»™å­—ç¬¦ä¸²åŠ ä¸Šå•å¼•å·.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username like '%#{name}%'"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser8</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">selectUser8</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfoMapper<span class="token punctuation">.</span><span class="token function">selectUser8</span><span class="token punctuation">(</span><span class="token string">"dmi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/50/1f/FKuarXOy_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> è™½ç„¶ä½¿ç”¨<code>${}</code>ä¼šæˆåŠŸ,ä½†æ˜¯å­˜åœ¨sqlæ³¨å…¥é—®é¢˜,ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨.<mark>æ‰€ä»¥æˆ‘ä»¬é€šè¿‡sqlä¸­çš„ä¸€ä¸ªå‡½æ•°concat()æ¥å¤„ç†</mark>,<strong>å®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥å‡½æ•°</strong>.</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from userinfo where username like concat('%',#{name},'%')"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">UserInfo</span> <span class="token function">selectUser8</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿è¡ŒæˆåŠŸ:<br> <img src="https://images2.imgbox.com/8f/fd/DocRzu1n_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/04982abd284f415086e6081cdac08061/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">2024åä¸ºæ•°é€šHCIP-datacomæœ€æ–°é¢˜åº“ï¼ˆH12-831å˜é¢˜æ›´æ–°â‘¦ï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/375243dc869d0e04bf9f7af653394298/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">ã€äººå·¥æ™ºèƒ½ã€‘AIç»˜ç”»ï¼šç§‘æŠ€ä¸è‰ºæœ¯äº¤æ±‡çš„æ–°æ—¶ä»£</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>