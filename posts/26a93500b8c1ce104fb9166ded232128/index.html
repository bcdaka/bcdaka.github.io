<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>适配Ollama的前端界面Open WebUI - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/26a93500b8c1ce104fb9166ded232128/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="适配Ollama的前端界面Open WebUI">
  <meta property="og:description" content="在前文 本地大模型运行框架Ollama 中，老苏留了个尾巴，限于篇幅只是提了一下 Open WebUI，有网友留言说自己安装没搞定，今天我们来补上
文章传送门：本地大模型运行框架Ollama
什么是 Open WebUI ？
Open WebUI 是针对 LLM 的用户友好的 WebUI，支持的 LLM 运行程序包括 Ollama 和 OpenAI 兼容的 API。
Open WebUI 系统旨在简化客户端（您的浏览器）和 Ollama API 之间的交互。此设计的核心是后端反向代理，可增强安全性并解决 CORS 问题。
外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传
Open WebUI 功能演示
【说明】：
因为老苏的小机器不支持 Nvidia GPU，所以下面👇的安装示例仅支持 CPU。
本文假设你已经在 11434 端口启动了 Ollama 服务，但是否在本机是无所谓的。
安装 在群晖上以 Docker 方式安装。
镜像下载 官方没有在 docker hub 上发布镜像，而是发布在 ghcr.io，地址在 https://github.com/open-webui/open-webui/pkgs/container/open-webui
用 SSH 客户端登录到群晖后，依次执行下面的命令
# 新建文件夹 open-webui 和 子目录 mkdir -p /volume1/docker/open-webui/data # 进入 open-webui 目录 cd /volume1/docker/open-webui # 拉取镜像 docker pull ghcr.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-04T09:15:49+08:00">
    <meta property="article:modified_time" content="2024-03-04T09:15:49+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">适配Ollama的前端界面Open WebUI</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/f2/10/ZrjKVHja_o.png" alt="在这里插入图片描述"></p> 
<p>在前文 <code>本地大模型运行框架Ollama</code> 中，老苏留了个尾巴，限于篇幅只是提了一下 <code>Open WebUI</code>，有网友留言说自己安装没搞定，今天我们来补上</p> 
<blockquote> 
 <p>文章传送门：<a href="https://laosu.tech/2024/02/28/%E6%9C%AC%E5%9C%B0%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%BF%90%E8%A1%8C%E6%A1%86%E6%9E%B6Ollama" rel="nofollow">本地大模型运行框架Ollama</a></p> 
</blockquote> 
<p><strong>什么是 Open WebUI ？</strong></p> 
<blockquote> 
 <p><code>Open WebUI</code> 是针对 <code>LLM</code> 的用户友好的 <code>WebUI</code>，支持的 <code>LLM</code> 运行程序包括 <code>Ollama</code> 和 <code>OpenAI</code> 兼容的 <code>API</code>。</p> 
</blockquote> 
<p><code>Open WebUI</code> 系统旨在简化客户端（您的浏览器）和 <code>Ollama API</code> 之间的交互。此设计的核心是后端反向代理，可增强安全性并解决 <code>CORS</code> 问题。</p> 
<p>外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传</p> 
<p></p> 
<div class="csdn-video-box"> 
 <iframe id="8LG8lR01-1709514738554" frameborder="0" src="https://player.bilibili.com/player.html?aid=1401044830" allowfullscreen="true" data-mediaembed="bilibili"></iframe> 
 <p>Open WebUI 功能演示</p> 
</div> 
<p></p> 
<blockquote> 
 <p>【说明】：</p> 
 <ul><li> <p>因为老苏的小机器不支持 <code>Nvidia GPU</code>，所以下面👇的安装示例仅支持 <code>CPU</code>。</p> </li><li> <p>本文假设你已经在 <code>11434</code> 端口启动了 <code>Ollama</code> 服务，但是否在本机是无所谓的。</p> </li></ul> 
</blockquote> 
<h2><a id="_25"></a>安装</h2> 
<p>在群晖上以 Docker 方式安装。</p> 
<h3><a id="_29"></a>镜像下载</h3> 
<p>官方没有在 <code>docker hub</code> 上发布镜像，而是发布在 <code>ghcr.io</code>，地址在 <a href="https://github.com/open-webui/open-webui/pkgs/container/open-webui">https://github.com/open-webui/open-webui/pkgs/container/open-webui</a></p> 
<p><img src="https://images2.imgbox.com/68/92/bLrpwyT3_o.png" alt="在这里插入图片描述"></p> 
<p>用 <code>SSH</code> 客户端登录到群晖后，依次执行下面的命令</p> 
<pre><code class="prism language-bash"><span class="token comment"># 新建文件夹 open-webui 和 子目录</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /volume1/docker/open-webui/data

<span class="token comment"># 进入 open-webui 目录</span>
<span class="token builtin class-name">cd</span> /volume1/docker/open-webui

<span class="token comment"># 拉取镜像</span>
<span class="token function">docker</span> pull ghcr.io/open-webui/open-webui:main
</code></pre> 
<p>如果没有科学上网，很可能会拉不动，可以试试 <code>docker</code> 代理网站：<a href="https://dockerproxy.com/" rel="nofollow">https://dockerproxy.com/</a>，但是会多几个步骤</p> 
<pre><code class="prism language-bash"><span class="token comment"># 如果拉不动的话加个代理</span>
<span class="token function">docker</span> pull ghcr.dockerproxy.com/open-webui/open-webui:main

<span class="token comment"># 重命名镜像（如果是通过代理下载的）</span>
<span class="token function">docker</span> tag ghcr.dockerproxy.com/open-webui/open-webui:main ghcr.io/open-webui/open-webui:main

<span class="token comment"># 删除代理镜像（如果是通过代理下载的）</span>
<span class="token function">docker</span> rmi ghcr.dockerproxy.com/open-webui/open-webui:main
</code></pre> 
<p>下载完成后，可以在 <code>映像</code> 中找到</p> 
<p><img src="https://images2.imgbox.com/a9/b7/OultfEqW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_67"></a>命令行安装</h3> 
<p>如果你熟悉命令行，可能用 <code>docker cli</code> 更快捷</p> 
<pre><code class="prism language-bash"><span class="token comment"># 运行容器（仅CPU）</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\</span>
   <span class="token parameter variable">--restart</span> unless-stopped <span class="token punctuation">\</span>
   <span class="token parameter variable">--name</span> ollama-webui <span class="token punctuation">\</span>
   <span class="token parameter variable">-p</span> <span class="token number">11433</span>:8080 <span class="token punctuation">\</span>
   <span class="token parameter variable">-v</span> <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/data:/app/backend/data <span class="token punctuation">\</span>
   <span class="token parameter variable">-e</span> <span class="token assign-left variable">OLLAMA_API_BASE_URL</span><span class="token operator">=</span>http://192.168.0.197:11434/api <span class="token punctuation">\</span>
   <span class="token parameter variable">-e</span> <span class="token assign-left variable">WEBUI_SECRET_KEY</span><span class="token operator">=</span>TkjGEiQ@5K^j <span class="token punctuation">\</span>
   ghcr.io/open-webui/open-webui:main
</code></pre> 
<p>环境变量的简单说明</p> 
<blockquote> 
 <p>没有找到官方说明，但是这两个是必须要设置的</p> 
</blockquote> 
<table><thead><tr><th align="center">可变</th><th align="center">值</th></tr></thead><tbody><tr><td align="center"><code>OLLAMA_API_BASE_URL</code></td><td align="center"><code>Ollama</code> 服务器的地址</td></tr><tr><td align="center"><code>WEBUI_SECRET_KEY</code></td><td align="center">可以理解成密码，老苏是用 <code>Vaultwarden</code> 生成的</td></tr></tbody></table> 
<p>也可以用 <code>docker-compose</code> 安装，将下面的内容保存为 <code>docker-compose.yml</code> 文件</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">ollama-webui</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ghcr.io/open<span class="token punctuation">-</span>webui/open<span class="token punctuation">-</span>webui<span class="token punctuation">:</span>main
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ollama<span class="token punctuation">-</span>webui
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 11433<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/app/backend/data
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> OLLAMA_API_BASE_URL=http<span class="token punctuation">:</span>//192.168.0.197<span class="token punctuation">:</span>11434/api
      <span class="token punctuation">-</span> WEBUI_SECRET_KEY=TkjGEiQ@5K^j
</code></pre> 
<p>然后执行下面的命令</p> 
<pre><code class="prism language-bash"><span class="token comment"># 进入 open-webui 目录</span>
<span class="token builtin class-name">cd</span> /volume1/docker/open-webui

<span class="token comment"># 将 docker-compose.yml 放入当前目录</span>

<span class="token comment"># 一键启动</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/ec/Ck99GqbY_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_126"></a>运行</h2> 
<p>在浏览器中输入 <code>http://群晖IP:11433</code> 就能看到登录界面</p> 
<blockquote> 
 <p>第一次需要注册账号</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/25/d5/rKwcw1Y1_o.png" alt="在这里插入图片描述"></p> 
<p>登录成功后的主界面</p> 
<p><img src="https://images2.imgbox.com/20/f4/Xe6EBMlS_o.png" alt="在这里插入图片描述"></p> 
<p>点左下角的用户名，进 <code>Settings</code></p> 
<blockquote> 
 <p>也可以点 <code>Select a model</code> 后面的设置图标；</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/39/2e/oH5DQEXQ_o.png" alt="在这里插入图片描述"></p> 
<p><code>Modles</code> 中可以添加、删除和切换模型</p> 
<blockquote> 
 <p>感谢网友 <code>Zzz</code> 推荐的 <code>qwen:0.5b</code>，这是阿里云推出的基于 <code>Transformer</code> 的大型语言模型，推理最低内存需求小于 <code>2GB</code> ，在老苏的机器上，运行都非常流畅。</p> 
</blockquote> 
<p>可以在 <code>Ollama</code> 中用命令行安装</p> 
<p><img src="https://images2.imgbox.com/82/99/YnXVIJ8g_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>感谢网友 <code>潇雨</code> 推荐的 <code>gemma:2b</code>，这是 <code>Google</code> 及其 <code>DeepMind</code> 团队开发的新型开放模型。</p> 
</blockquote> 
<p>也可以在这里直接下载</p> 
<ul><li>①中输入模型名称及版本</li><li>②点击开始下载</li><li>③跳转到模型库查询页面</li></ul> 
<p><img src="https://images2.imgbox.com/70/a0/LanMZlD1_o.png" alt="在这里插入图片描述"></p> 
<p>过程中有进度显示</p> 
<p><img src="https://images2.imgbox.com/38/77/AQX9HNdc_o.png" alt="在这里插入图片描述"></p> 
<p>回到首界面，选择模型</p> 
<p><img src="https://images2.imgbox.com/b9/c9/9OrvQVcz_o.png" alt="在这里插入图片描述"></p> 
<p>刚下载的模型可能要等一会才会显示出来，现在老苏已经有了 <code>2</code> 模型了</p> 
<p><img src="https://images2.imgbox.com/36/c5/dziKNXKw_o.png" alt="在这里插入图片描述"></p> 
<p>现在可以开始提问了</p> 
<p><img src="https://images2.imgbox.com/a0/3b/ZdycKVrm_o.png" alt="在这里插入图片描述"></p> 
<p>同样的问题，换个模型试试</p> 
<p><img src="https://images2.imgbox.com/ed/ac/jAfnaK4m_o.png" alt="在这里插入图片描述"></p> 
<p>目前的这种应用场景下，老苏暂时倾向于使用 <code>qwen:0.5b</code> ，不仅速度快，答案看起来也更丰满一些</p> 
<p><img src="https://images2.imgbox.com/11/91/OCF2NE5n_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_197"></a>参考文档</h2> 
<blockquote> 
 <p>open-webui/open-webui: User-friendly WebUI for LLMs (Formerly Ollama WebUI)<br> 地址：<a href="https://github.com/open-webui/open-webui">https://github.com/open-webui/open-webui</a></p> 
</blockquote> 
<blockquote> 
 <p>🏡 Home | Open WebUI<br> 地址：<a href="https://docs.openwebui.com/" rel="nofollow">https://docs.openwebui.com/</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aabd76a4b86fbcdd4e674362c82a60b6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据库核心术语解析与应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a2c9a369945f0076bd40910b589dbfd2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解密 Python 的 staticmethod 函数：静态方法的全面解析！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>