<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaScript获取URL参数的几种方法 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c44cbe278fabeafff9554996ab26ac54/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="JavaScript获取URL参数的几种方法">
  <meta property="og:description" content="前言 在前端开发中，处理URL参数是一个常见的任务，尤其是在没有框架支持的情况下。虽然许多框架提供了方便的方法来获取URL参数，但有时我们需要依赖原生JavaScript来完成这个任务。这也是面试中经常出现的问题之一。今天让我们一起来探讨如何利用原生JavaScript来获取URL参数值。
获取方法总结 原生JS获取URL链接参数的方法有好几种，我们一起来学习一下常见的几种。
1.使用正则表达式
2.利用a标签内置方法
3.利用split分割方法
4.使用URLSearchParams方法
具体实现 方法一: 正则表达式 function queryURLParams(url, paramName) { // 正则表达式模式，用于匹配URL中的参数部分。正则表达式的含义是匹配不包含 ?、&amp;、= 的字符作为参数名，之后是等号和不包含 &amp; 的字符作为参数值 let pattern = /([^?&amp;=]&#43;)=([^&amp;]&#43;)/g; let params = {}; // match用于存储正则匹配的结果 let match; // while 循环和正则表达式 exec 方法来迭代匹配URL中的参数 while ((match = pattern.exec(url)) !== null) { // 在字符串url中循环匹配pattern，并对每个匹配项进行解码操作，将解码后的键和值分别存储在key和value变量中 let key = decodeURIComponent(match[1]); let value = decodeURIComponent(match[2]); if (params[key]) { if (Array.isArray(params[key])) { params[key].push(value); } else { params[key] = [params[key], value]; } } else { // 参数名在 params 对象中不存在，将该参数名和对应的值添加到 params 对象中 params[key] = value; } } if (!">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-10T10:05:11+08:00">
    <meta property="article:modified_time" content="2024-07-10T10:05:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaScript获取URL参数的几种方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>前言</h3> 
<p>在前端开发中，处理URL参数是一个常见的任务，尤其是在没有框架支持的情况下。虽然许多框架提供了方便的方法来获取URL参数，但有时我们需要依赖原生JavaScript来完成这个任务。这也是面试中经常出现的问题之一。今天让我们一起来探讨如何利用原生JavaScript来获取URL参数值。<br>  </p> 
<h3>获取方法总结</h3> 
<p>原生JS获取URL链接参数的方法有好几种，我们一起来学习一下常见的几种。</p> 
<p>1.使用正则表达式</p> 
<p>2.利用a标签内置方法</p> 
<p>3.利用split分割方法</p> 
<p>4.使用URLSearchParams方法</p> 
<p></p> 
<h3>具体实现</h3> 
<h4>方法一: 正则表达式</h4> 
<pre><code class="language-javascript">function queryURLParams(url, paramName) {
    // 正则表达式模式，用于匹配URL中的参数部分。正则表达式的含义是匹配不包含 ?、&amp;、= 的字符作为参数名，之后是等号和不包含 &amp; 的字符作为参数值
    let pattern = /([^?&amp;=]+)=([^&amp;]+)/g;
    let params = {};
    
    // match用于存储正则匹配的结果
    let match;
    // while 循环和正则表达式 exec 方法来迭代匹配URL中的参数
    while ((match = pattern.exec(url)) !== null) {
        // 在字符串url中循环匹配pattern，并对每个匹配项进行解码操作，将解码后的键和值分别存储在key和value变量中
        let key = decodeURIComponent(match[1]);
        let value = decodeURIComponent(match[2]);
        
        if (params[key]) {
            if (Array.isArray(params[key])) {
                params[key].push(value);
            } else {
                params[key] = [params[key], value];
            }
        } else {
            // 参数名在 params 对象中不存在，将该参数名和对应的值添加到 params 对象中
            params[key] = value;
        }
    }
    
    if (!paramName) {
        // 没有传入参数名称, 返回含有所有参数的对象params
        return params;
    } else {
        if (params[paramName]) {
            return params[paramName];
        } else {
            return '';
        }
    }
}

let url = "http://www.baidu.com?name=elephant&amp;age=25&amp;sex=male&amp;num=100&amp;name=lion";
console.log(queryURLParams(url)); // 返回所有参数对象
console.log(queryURLParams(url, 'name')); // 返回参数名为 'name' 的所有值
console.log(queryURLParams(url, 'age')); // 返回参数名为 'age' 的值
console.log(queryURLParams(url, 'color')); // 返回""</code></pre> 
<p>正则表达式解释: </p> 
<ul><li><code>([^?&amp;=]+)</code>：这部分是一个捕获组，表示匹配不包含 <code>?</code>、<code>&amp;</code>、<code>=</code> 的任意字符的一个或多个，即匹配参数名部分。</li><li><code>=</code>：表示匹配参数名和参数值之间的等号。</li><li><code>([^&amp;]+)</code>：这部分也是一个捕获组，表示匹配不包含 <code>&amp;</code> 的任意字符的一个或多个，即匹配参数值部分。</li><li><code>g</code>：表示使用全局匹配模式，即匹配目标字符串中所有符合模式的部分。</li></ul> 
<p></p> 
<h4>方法二： 利用a标签</h4> 
<p>a标签内置的方法能够快速且方便地获取URL参数，</p> 
<p>它的原理主要就是利用了a标签得到一些内置属性，如href、hash、search等属性。</p> 
<p>考虑到URL中的哈希部分，在函数<code>queryURLParams(url)</code>中，会检查URL中的哈希部分是否存在，如果存在则将哈希值存储到参数对象中，并将属性名设置为"HASH"。这样在返回的参数对象中，如果URL中有哈希部分，就可以通过"HASH"来访问哈希值。</p> 
<pre><code class="language-javascript">let URL = "http://www.baidu.com?name=elephant&amp;age=25&amp;sex=male&amp;num=100#smallpig"
  function queryURLParams(url) {
    // 1.创建a标签
    let link = document.createElement('a');
    link.href = url;
    let searchUrl = link.search.substr(1); // 获取问号后面字符串
    let hashUrl = link.hash.substr(1); // 获取#后面的值
    let obj = {}; // 声明参数对象
    // 2.向对象中进行存储
    hashUrl ? obj['HASH'] = hashUrl : null; // #后面是否有值

    let list = searchUrl.split("&amp;");
    for (let i = 0; i &lt; list.length; i++) {
      let arr = list[i].split("=");
      obj[arr[0]] = arr[1];
    }
    return obj;
  }
  console.log(queryURLParams(URL))</code></pre> 
<p>上段代码中先创建了一个a标签，然后就可以根据a标签的属性分别得到url的各个部分了，这其实和Vue的路由跳转获取参数有点类似。</p> 
<p>1. 将传入的URL赋值给 `&lt;a&gt;` 标签的 `href` 属性的目的是利用浏览器提供的原生 API 来帮助实现 URL 参数的解析。通过将URL赋值给 `&lt;a&gt;` 标签的 `href` 属性，浏览器会自动解析这个URL，包括提取其中的协议、主机、路径、查询参数等各个部分，从而方便我们对这个URL进行进一步的操作。</p> 
<p>2. 通过`link.search.substr(1)`和`link.hash.substr(1)`可以获取URL中问号后面的字符串和`#`后面的值，是因为浏览器在解析URL后会将这些信息存储在`&lt;a&gt;`标签对象的对应属性中。具体来说：<br>    - `link.search` 包含了 URL 中问号后面的部分（即查询参数部分）。<br>    - `link.hash` 包含了 URL 中`#`后面的部分（即片段部分）。<br>    - 使用`substr(1)`是为了去掉字符串中的问号或`#`字符，只留下真正的参数内容或片段内容。<br>  </p> 
<h4>方法三： split分割法</h4> 
<p>这种方法利用了split可以以某个字符讲字符串分割为数组的特点，巧妙地将各个参数分割出来。</p> 
<pre><code class="language-javascript">function getUrlParams(url, paramName) {
    // 从 URL 中提取查询参数部分
    const queryString = url.split('?')[1];
    
    // 如果没有查询参数，返回空对象
    if (!queryString) {
        return {};
    }
    
    // 处理带有 hash 地址的情况
    const hashIndex = queryString.indexOf('#');
    if (hashIndex !== -1) {
        queryString = queryString.substring(0, hashIndex);
    }
    
    // 将查询参数字符串解析为键值对
    const queryParams = {};
    queryString.split('&amp;').forEach(param =&gt; {
        const [key, value] = param.split('=');
        // 如果值已经存在，则将其转换为数组存储
        if (queryParams[key]) {
            if (Array.isArray(queryParams[key])) {
                queryParams[key].push(decodeURIComponent(value));
            } else {
                queryParams[key] = [queryParams[key], decodeURIComponent(value)];
            }
        } else {
            queryParams[key] = decodeURIComponent(value);
        }
    });
    
    // 如果没有指定参数名称，则返回包含所有查询参数的对象
    if (!paramName) {
        return queryParams;
    }
    
    // 如果指定了参数名称
    if (queryParams[paramName]) {
        return queryParams[paramName];
    } else {
        // 参数不存在，返回空字符串
        return '';
    }
}

// 示例 URL
const url = 'https://example.com?name=John&amp;age=30&amp;name=Jane&amp;gender=male';
const urlWithHash = 'http://xxx.com/#/operations/app?name=John&amp;age=30&amp;name=Jane&amp;gender=male';

console.log(getUrlParams(url)); 
// 输出: { name: ['John', 'Jane'], age: '30', gender: 'male' }

console.log(getUrlParams(url, 'name'));
// 输出: ['John', 'Jane']

console.log(getUrlParams(url, 'age'));
// 输出: '30'

console.log(getUrlParams(url, 'city'));
// 输出: ''

console.log(getUrlParams(urlWithHash)); 
// 输出: { name: ['John', 'Jane'], age: '30', gender: 'male' }
</code></pre> 
<h5>关于hash地址部分</h5> 
<p>在处理 URL 查询参数时，通常情况下不需要处理 hash 地址部分。</p> 
<p>Hash 地址通常用于客户端路由或页面内导航，一般不会包含查询参数信息。</p> 
<p>但在某些情况下，可能需要处理带有 hash 地址的 URL，例如：</p> 
<p>1. 当需要从 URL 中提取查询参数时，如果 URL 中的查询参数部分后面紧跟着 hash 地址（如 `http://example.com/page?name=John#section2`），需要排除 hash 部分以确保正确提取查询参数。</p> 
<p>2. 如果要监听 hash 地址的变化，并根据不同的 hash 地址执行不同的逻辑（如单页面应用路由器），则需要处理 hash 地址的改变并做出响应。 总的来说，在处理 URL 查询参数时一般不需要处理 hash 地址部分，但在特定情况下需要注意并处理。</p> 
<p></p> 
<h4>方法四： URLSearchParams</h4> 
<p>URLSearchParams方法能够让我们非常方便的获取URL参数，但是存在一定的兼容性问题，官网的解释如下：</p> 
<blockquote>
  URLSearchParams 接口定义了一些实用的方法来处理 URL 的查询字符串。 
</blockquote> 
<p>该接口提供了非常的的方法让我们来处理URL参数，这里我们只介绍如何获取URL参数值，更加详细的使用方法大家可以参考官网。</p> 
<pre><code class="language-javascript"> let URL = "http://www.baidu.com?name=elephant&amp;age=25&amp;sex=male&amp;num=100"
  function queryURLParams(URL) {
    let url = URL.split("?")[1];
    const urlSearchParams = new URLSearchParams(url);
    const params = Object.fromEntries(urlSearchParams.entries());
    return params
  }
  console.log(queryURLParams(URL))</code></pre> 
<p>这里我们基本上只用了两行主要代码就实现了参数的解析。需要注意的是urlSearchParams.entries()返回的是一个迭代协议iterator，所以我们需要利用Object.fromEntries()方法将把键值对列表转换为一个对象。</p> 
<p>关于迭代协议，大家可以参考官网：<a href="https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols" rel="nofollow" title="迭代协议">迭代协议</a></p> 
<h3>总结：</h3> 
<p>这里介绍了四种方法来实现URL链接参数值的解析，其中使用最为广泛的应该当属split分割法。总的来说，了解和掌握这些方法可以帮助前端开发者更有效地处理URL参数，从而提升开发效率和应对面试中可能出现的相关问题。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41964d12c2f5a9a30860ae6497981036/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI绘画Midjourney从入门到实战应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8a2cd77d9dff66b1528a979106313f7a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从头开始学习扩散模型 Stable Diffusion</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>