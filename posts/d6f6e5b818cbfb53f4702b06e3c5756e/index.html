<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Layui——隐藏表单项后不再进行验证 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d6f6e5b818cbfb53f4702b06e3c5756e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Layui——隐藏表单项后不再进行验证">
  <meta property="og:description" content="目录
修改后的部分代码
修改后的完整代码 我编辑用户信息和添加新用户用的是同一个表单，不同的是编辑用户信息里没有密码项和确认密码项，但是把它们隐藏后仍然要进行验证，也就是说它们俩的验证并没有随着表单项的隐藏而关闭。原因：关闭不彻底，一共有两步。隐藏表单项的同时，需要把表单项里的 lay-verify 属性改为空 修改后的部分代码 修改后的完整代码 &lt;!DOCTYPE html&gt; &lt;%@ page language=&#34;java&#34; pageEncoding=&#34;UTF-8&#34; contentType=&#34;text/html;charset=utf-8&#34; %&gt; &lt;%@ include file=&#34;../common/taglibs.jsp&#34; %&gt; &lt;html lang=&#34;zh&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;utf-8&#34;&gt; &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1, maximum-scale=1&#34;&gt; &lt;%@ include file=&#34;../common/meta.jsp&#34; %&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&#34;layui-btn-group layui-row&#34; id=&#34;btn_group&#34;&gt; &lt;button type=&#34;button&#34; class=&#34;layui-btn&#34; data-method=&#34;addUser&#34;&gt;添加账号&lt;/button&gt; &lt;/div&gt; &lt;table class=&#34;layui-hide&#34; id=&#34;userTable&#34;&gt;&lt;/table&gt; &lt;/body&gt; &lt;div hidden id=&#34;addUser&#34;&gt; &lt;form class=&#34;layui-form&#34; action=&#34;&#34; lay-filter=&#34;addUserForm&#34; id=&#34;addUserForm&#34;&gt; &lt;div class=&#34;layui-form-item&#34;&gt; &lt;label class=&#34;layui-form-label&#34;&gt;真实姓名&lt;/label&gt; &lt;div class=&#34;layui-input-block&#34;&gt; &lt;input type=&#34;text&#34; name=&#34;realname&#34; required lay-verify=&#34;required&#34; autocomplete=&#34;off&#34; class=&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-13T19:20:00+08:00">
    <meta property="article:modified_time" content="2024-08-13T19:20:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Layui——隐藏表单项后不再进行验证</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81" rel="nofollow">修改后的部分代码</a></p> 
<p id="%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%C2%A0" rel="nofollow">修改后的完整代码 </a></p> 
<hr id="hr-toc"> 
<p></p> 
<blockquote> 
 <ul><li>我编辑用户信息和添加新用户用的是同一个表单，不同的是编辑用户信息里没有密码项和确认密码项，但是把它们隐藏后仍然要进行验证，也就是说它们俩的验证并没有随着表单项的隐藏而关闭。</li><li>原因：关闭不彻底，一共有两步。隐藏表单项的同时，需要把表单项里的 lay-verify 属性改为空</li></ul> 
</blockquote> 
<h2 id="%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81">修改后的部分代码</h2> 
<p><img alt="" height="442" src="https://images2.imgbox.com/af/96/9lQFFZvK_o.png" width="1200"></p> 
<p><img alt="" height="591" src="https://images2.imgbox.com/c3/91/s5rXMlbo_o.png" width="1200"></p> 
<p><img alt="" height="605" src="https://images2.imgbox.com/76/be/Bbk74EdH_o.png" width="1200"></p> 
<h2 id="%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%C2%A0">修改后的完整代码 </h2> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;%@ page language="java" pageEncoding="UTF-8" contentType="text/html;charset=utf-8" %&gt;
&lt;%@ include file="../common/taglibs.jsp" %&gt;

&lt;html lang="zh"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"&gt;
    &lt;%@ include file="../common/meta.jsp" %&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="layui-btn-group layui-row" id="btn_group"&gt;
    &lt;button type="button" class="layui-btn" data-method="addUser"&gt;添加账号&lt;/button&gt;
&lt;/div&gt;
&lt;table class="layui-hide" id="userTable"&gt;&lt;/table&gt;
&lt;/body&gt;
&lt;div hidden id="addUser"&gt;
    &lt;form class="layui-form" action="" lay-filter="addUserForm" id="addUserForm"&gt;
        &lt;div class="layui-form-item"&gt;
            &lt;label class="layui-form-label"&gt;真实姓名&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="text" name="realname" required  lay-verify="required" autocomplete="off" class="layui-input"&gt;
                &lt;input type="text" name="id" hidden&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="layui-form-item"&gt;
            &lt;label class="layui-form-label"&gt;用户名&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="text" name="username" required  lay-verify="required" autocomplete="off" class="layui-input"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="layui-form-item"  lay-filter="userPaword" id="userPaword"&gt;
        &lt;label class="layui-form-label"&gt;密码&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="password" name="paword" required  lay-verify="required" autocomplete="off" class="layui-input"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="layui-form-item" lay-filter="confirmPaword" id="confirmPaword"&gt;
            &lt;label class="layui-form-label"&gt;确认密码&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="password" lay-verify="required|confirmPass" autocomplete="off" placeholder="确认密码"  class="layui-input"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;button type="button" data-method="addUser" lay-filter="formVerify" lay-submit style="display: none"&gt;提交新用户表单或修改后的用户表单&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;
&lt;div hidden id="editPaword"&gt;
    &lt;form class="layui-form" action="" lay-filter="editPawordForm" id="editPawordForm"&gt;
        &lt;div class="layui-form-item"  lay-filter="paword"&gt;
            &lt;label class="layui-form-label"&gt;密码&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="text" name="paword" required  lay-verify="required" autocomplete="off" class="layui-input"&gt;
                &lt;input type="text" name="id" hidden&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="layui-form-item" lay-filter="conformPaword"&gt;
            &lt;label class="layui-form-label"&gt;确认密码&lt;/label&gt;
            &lt;div class="layui-input-block"&gt;
                &lt;input type="password"  lay-verify="required|confirmPass" autocomplete="off" placeholder="确认密码"  class="layui-input"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;button type="button" data-method="editPaword" lay-filter="passwordVerify" lay-submit style="display: none"&gt;提交修改后的密码&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;
&lt;script&gt;
    layui.use(['table','layer','form','laydate'], function() {
        var table = layui.table;
        var layer = layui.layer;
        var $ = layui.$;
        var form = layui.form;
        var user={};
        form.verify({
            confirmPassword: function(value) {
                if($('input[name=paword]').val() !== value){
                    return "两次输入的密码不一致!";
                }
            }
        });
        var userTable =  table.render({
            elem: '#userTable'
            ,url:'/user/list'
            ,method:"post"
            ,data: JSON.stringify(user)//传递json类型的参数
            ,contentType: 'application/json'
            ,cellMinWidth: 100 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            ,cols: [[
                {field:'username', width:200, title: '用户名', sort: true}
                ,{field:'realname', width:200, title: '真实姓名', sort: true}
                ,{field:'lastLogineTime', width:200, title: '上次登录时间', sort: true}
                ,{field:'createtime', width:200, title: '创建时间', sort: true}
                ,{width:300, title: '操作',templet:function(d){
                        return '&lt;button type="button" class="layui-btn layui-btn-sm singleBtn" data-method="editUser" data-id="'
                            +d.id+'"&gt;&lt;i class="layui-icon layui-icon-edit"/&gt;&lt;/button&gt;'
                            +'&lt;button type="button" class="layui-btn layui-btn-sm singleBtn" data-method="editPaword" data-id="'
                            +d.id+'"&gt;&lt;i class="layui-icon layui-icon-key" /&gt;&lt;/button&gt;'
                            +'&lt;button type="button" class="layui-btn layui-btn-sm singleBtn" data-method="deleteUser" data-id="'
                            +d.id+'"&gt;&lt;i class="layui-icon layui-icon-delete"/&gt;&lt;/button&gt;'
                    }}
            ]],
            parseData: function(res){ //res 即为原始返回的数据
                return res
            },
            done: function(res, curr, count){
                //如果是异步请求数据方式，res即为你接口返回的信息。
                //如果是直接赋值的方式，res即为：{data: [], count: 99} data为当前页数据、count为数据总长度
                console.log(res);
                //得到当前页码
                console.log(curr);
                //得到数据总量
                console.log(count);
                $('.singleBtn').on('click', function(){
                    var othis = $(this), method = othis.data('method');
                    active[method] ? active[method].call(this, othis) : '';
                });
            },
            page: true
        });
        function layerForm(){
            //多窗口模式，层叠置顶
            layer.open({
                type: 1
                , title: '添加账号'
                , content: $('#addUser')
                , btn: ['保存', '取消'] //只是为了演示
                , area: ['600px', '300px'] //宽高
                ,closeBtn: 0
                ,success: function (layero, index) { // 弹出层打开后的回调函数
                    layero.addClass('layui-form'); // 为弹出层添加 `layui-form` 类
                    layero.find('.layui-layer-btn0').attr({ // 修改“保存”按钮的属性
                        'lay-filter': 'formVerify', // 添加 lay-filter 属性，设置为 'formVerify'
                        'lay-submit': '' // 添加 lay-submit 属性，启用 layui 表单提交功能
                    });
                    form.render(); // 渲染表单
                }
                , yes: function () {
                    form.on('submit(formVerify)', function (data) { // 绑定表单提交事件
                        var formData = form.val('addUserForm');//form lay-filter属性
                        console.log(formData);
                        var layerui = layer;
                        $.ajax({
                            url: "/user/add",
                            type: "POST",
                            data: JSON.stringify(formData),//传递json类型的参数
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: function (result) {
                                if(result.code == COMMON_SUCCESS_CODE){
                                    layerui.msg('操作成功');
                                    userTable.reload()
                                }else{
                                    layerui.alert('操作失败', {icon: 2});
                                }
                                layerui.closeAll();
                                $("#addUserForm")[0].reset();
                                form.render();
                            }
                        })

                    })
                }
                , btn2: function () {
                    layer.closeAll();
                    $("#addUserForm")[0].reset();
                    form.render();
                }
            });
        }
        //触发事件
        var active = {
            addUser: function () {
                var that = this;
                layerForm();
            },
            editUser:function(){
                var othis = $(this), dataId = othis.data('id');
                $("#userPaword").hide();
                $("#confirmPaword").hide();
                $('#userPaword input').attr('lay-verify', ''); // 添加lay-verify属性,进行表单验证
                $('#confirmPaword input').attr('lay-verify', '');
                $.ajax({
                    url: "/user/search/"+dataId,
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        if(result.code == COMMON_SUCCESS_CODE){
                            var user = result.data;
                            //给表单赋值
                            form.val("addUserForm", {
                                "username": user.username,
                                "realname": user.realname,
                                "id": user.id
                            });
                            layerForm();
                        }else{
                            layer.alert('数据获取失败', {icon: 2});
                        }
                    }
                });
            },
            editPaword: function () {
                var othis = $(this), dataId = othis.data('id');
                //多窗口模式，层叠置顶
                layer.open({
                    type: 1
                    , title: '修改密码'
                    , content: $('#editPaword')
                    , btn: ['保存', '取消'] //只是为了演示
                    , area: ['600px', '300px'] //宽高
                    ,closeBtn: 0
                    ,success: function (layero, index) { // 弹出层打开后的回调函数
                        layero.addClass('layui-form'); // 为弹出层添加 `layui-form` 类
                        layero.find('.layui-layer-btn0').attr({ // 修改“保存”按钮的属性
                            'lay-filter': 'passwordVerify', // 添加 lay-filter 属性，设置为 'formVerify'
                            'lay-submit': '' // 添加 lay-submit 属性，启用 layui 表单提交功能
                        });
                        form.render(); // 渲染表单
                    }
                    , yes: function () {
                        form.on('submit(passwordVerify)', function (data) { // 绑定表单提交事件
                            var formData = form.val('editPawordForm');//form lay-filter属性
                            console.log(formData);
                            var layerui = layer;
                            $.ajax({
                                url: "/user/editPaword/"+dataId,
                                type: "POST",
                                data: JSON.stringify(formData),//传递json类型的参数
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (result) {
                                    if(result.code == COMMON_SUCCESS_CODE){
                                        layerui.msg('操作成功');
                                        userTable.reload()
                                    }else{
                                        layerui.alert('操作失败', {icon: 2});
                                    }
                                    layerui.closeAll();
                                    $("#editPawordForm")[0].reset();
                                    form.render();
                                }
                            })
                        })
                    }
                    , btn2: function () {
                        layer.closeAll();
                        $("#editPawordForm")[0].reset();
                        form.render();
                    }
                });
            },
            deleteUser: function(){
                var othis = $(this), dataId = othis.data('id');
                layer.confirm('确定删除？', {
                    btn: ['确定', '取消'] //可以无限个按钮
                    ,yes: function(index, layero){
                        var layDelete  = layer;
                        $.ajax({
                            url: "/user/delete/"+dataId,
                            type: "DELETE",
                            contentType: "application/json; charset=utf-8",
                            success: function (result) {
                                if(result.code == COMMON_SUCCESS_CODE){
                                    userTable.reload()
                                }else{
                                    layer.alert('删除失败', {icon: 2});
                                }
                                layDelete.closeAll();
                            }

                        })

                    }, btn2: function(index, layero){
                        layer.closeAll();
                    }});
            }
        }
        $('#btn_group .layui-btn').on('click', function(){
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
    })
&lt;/script&gt;
&lt;/html&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51e99d325c91606b2ece581c1660fca2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Qt】QSS</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/40bf41b6ec2bb0173cbb80e71ad0ac30/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Kubernetes】身份认证与鉴权</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>