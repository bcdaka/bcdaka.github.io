<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【详细版】Linux系统中搭建Hadoop - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/284a43d04470f95aed7dbffc3c621f2f/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【详细版】Linux系统中搭建Hadoop">
  <meta property="og:description" content="一、Hadoop单机版环境搭建 1、上传JDK至服务器 创建tools目录，用于存放文件
mkdir /opt/tools 切换tools目录，rz上传JDK安装包
jdk-8u361-linux-x64.tar.gz （文章结尾附安装包链接）
2、解压JDK安装包 创建server目录，用于存放JDK解压后的文件
mkdir /opt/server 解压至server目录
tar -zvxf jdk-8u131-linux-x64.tar.gz -C /opt/server 3、配置JDK环境变量 编辑 /etc/profile 文件
vim /etc/profile # 文件末尾增加 export JAVA_HOME=/opt/server/jdk1.8.0_361 export PATH=${JAVA_HOME}/bin:$PATH 执行source命令，使配置立即生效
source /etc/profile 检查是否安装成功
java -version 4、配置免密登录 Hadoop 组件之间需要基于 SSH 进行通讯，配置免密登录后不需要每次都输入密码
更改当前用户名为server，reboot后生效
echo &#34;server&#34; &gt; /etc/hostname 配置映射，配置 ip 地址和主机名映射
vim /etc/hosts # 文件末尾增加 192.168.1.153 server 生成公钥私钥
ssh-keygen -t rsa 进入 ~/.ssh 目录下，查看生成的公匙和私匙，并将公匙写入到授权文件
cd ~/.ssh cat id_rsa.pub &gt;&gt; authorized_keys chmod 600 authorized_keys 5、下载并解压Hadoop 切换/opt/tools目录下，rz上传Hadoop安装包">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-01T15:11:04+08:00">
    <meta property="article:modified_time" content="2023-11-01T15:11:04+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【详细版】Linux系统中搭建Hadoop</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Hadoop_0"></a>一、Hadoop单机版环境搭建</h3> 
<h4><a id="1JDK_2"></a>1、上传JDK至服务器</h4> 
<p>创建tools目录，用于存放文件</p> 
<pre><code class="prism language-sh"><span class="token function">mkdir</span> /opt/tools
</code></pre> 
<p>切换tools目录，rz上传JDK安装包</p> 
<p>jdk-8u361-linux-x64.tar.gz （文章结尾附安装包链接）</p> 
<h4><a id="2JDK_14"></a>2、解压JDK安装包</h4> 
<p>创建server目录，用于存放JDK解压后的文件</p> 
<pre><code class="prism language-sh"><span class="token function">mkdir</span> /opt/server
</code></pre> 
<p>解压至server目录</p> 
<pre><code class="prism language-sh"><span class="token function">tar</span> <span class="token parameter variable">-zvxf</span> jdk-8u131-linux-x64.tar.gz <span class="token parameter variable">-C</span> /opt/server
</code></pre> 
<h4><a id="3JDK_28"></a>3、配置JDK环境变量</h4> 
<p>编辑 /etc/profile 文件</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /etc/profile
<span class="token comment"># 文件末尾增加</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/opt/server/jdk1.8.0_361
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">${JAVA_HOME}</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre> 
<p>执行source命令，使配置立即生效</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>检查是否安装成功</p> 
<pre><code class="prism language-shell"><span class="token function">java</span> <span class="token parameter variable">-version</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/dc/80/RXKCpYnO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_52"></a>4、配置免密登录</h4> 
<p>Hadoop 组件之间需要基于 SSH 进行通讯，配置免密登录后不需要每次都输入密码</p> 
<p>更改当前用户名为server，reboot后生效</p> 
<pre><code class="prism language-sh"><span class="token builtin class-name">echo</span> <span class="token string">"server"</span> <span class="token operator">&gt;</span> /etc/hostname
</code></pre> 
<p>配置映射，配置 ip 地址和主机名映射</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /etc/hosts
<span class="token comment"># 文件末尾增加</span>
<span class="token number">192.168</span>.1.153 server
</code></pre> 
<p>生成公钥私钥</p> 
<pre><code class="prism language-shell">ssh-keygen <span class="token parameter variable">-t</span> rsa
</code></pre> 
<p>进入 ~/.ssh 目录下，查看生成的公匙和私匙，并将公匙写入到授权文件</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">cat</span> id_rsa.pub <span class="token operator">&gt;&gt;</span> authorized_keys
<span class="token function">chmod</span> <span class="token number">600</span> authorized_keys
</code></pre> 
<h4><a id="5Hadoop_84"></a>5、下载并解压Hadoop</h4> 
<p>切换/opt/tools目录下，rz上传Hadoop安装包</p> 
<p>hadoop-3.3.4.tar.gz</p> 
<p>解压Hadoop至server目录</p> 
<pre><code class="prism language-shell"><span class="token function">tar</span> <span class="token parameter variable">-zvxf</span> hadoop-3.3.4.tar.gz <span class="token parameter variable">-C</span> /opt/server/
</code></pre> 
<h4><a id="6Hadoop_96"></a>6、配置Hadoop</h4> 
<h5><a id="1_98"></a>（1）修改配置文件</h5> 
<p>进入/opt/server/hadoop-3.3.4/etc/hadoop 目录下，修改以下配置：</p> 
<p>修改hadoop-env.sh文件，设置JDK的安装路径</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> hadoop-env.sh
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/opt/server/jdk1.8.0_361
</code></pre> 
<p>修改core-site.xml文件，分别指定hdfs 协议文件系统的通信地址及hadoop 存储临时文件的目录</p> 
<pre><code class="prism language-shell"><span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>--指定 namenode 的 hdfs 协议文件系统的通信地址--<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs.defaultFS<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs://server:802<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>--指定 hadoop 数据文件存储目录--<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop.tmp.dir<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>/home/hadoop/data<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<p>修改hdfs-site.xml，指定 dfs 的副本系数</p> 
<pre><code class="prism language-shell"><span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>--由于我们这里搭建是单机版本，所以指定 dfs 的副本系数为 <span class="token number">1</span>--<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs.replication<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<p>修改workers文件，配置所有从属节点</p> 
<pre><code class="prism language-shell"><span class="token function">vim</span> workers
<span class="token comment"># 配置所有从属节点的主机名或 IP 地址，由于是单机版本，所以指定本机即可：</span>
server
</code></pre> 
<h5><a id="2HDFS_146"></a>（2）初始化并启动HDFS</h5> 
<p>关闭防火墙，不关闭防火墙可能导致无法访问 Hadoop 的 Web UI 界面</p> 
<pre><code class="prism language-shell"><span class="token comment"># 查看防火墙状态</span>
<span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--state</span>
<span class="token comment"># 关闭防火墙:</span>
<span class="token function">sudo</span> systemctl stop firewalld
<span class="token comment"># 禁止开机启动</span>
<span class="token function">sudo</span> systemctl disable firewalld
</code></pre> 
<p>第一次启动 Hadoop 时需要进行初始化，进入 /opt/server/hadoop-3.1.0/bin目录下，执行以下命令：</p> 
<pre><code class="prism language-sh"><span class="token builtin class-name">cd</span> /opt/server/hadoop-3.1.0/bin

./hdfs namenode <span class="token parameter variable">-format</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0f/8d/gx6Kc6bW_o.png" alt="在这里插入图片描述"></p> 
<p>Hadoop 3中不允许使用root用户来一键启动集群，需要配置启动用户</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /opt/server/hadoop-3.1.0/sbin/
<span class="token comment"># 编辑start-dfs.sh、stop-dfs.sh,在顶部加入以下内容</span>
<span class="token assign-left variable">HDFS_DATANODE_USER</span><span class="token operator">=</span>root
<span class="token assign-left variable">HDFS_DATANODE_SECURE_USER</span><span class="token operator">=</span>hdfs
<span class="token assign-left variable">HDFS_NAMENODE_USER</span><span class="token operator">=</span>root
<span class="token assign-left variable">HDFS_SECONDARYNAMENODE_USER</span><span class="token operator">=</span>root
</code></pre> 
<p>启动HDFS，进入/opt/server/hadoop-3.3.4/sbin/ 目录下，启动 HDFS：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /opt/server/hadoop-3.3.4/sbin/

./start-dfs.sh
</code></pre> 
<p>验证是否启动</p> 
<p>方式一：执行 jps 查看 NameNode 和 DataNode 服务是否已经启动：</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@server sbin<span class="token punctuation">]</span><span class="token comment"># jps</span>
<span class="token number">1696</span> NameNode
<span class="token number">2067</span> SecondaryNameNode
<span class="token number">1863</span> DataNode
<span class="token number">2183</span> Jps
</code></pre> 
<p>方式二：查看 Web UI 界面，端口为 9870：</p> 
<p><img src="https://images2.imgbox.com/3d/0f/bCndV6aX_o.png" alt="在这里插入图片描述"></p> 
<p>配置环境变量，方便启动</p> 
<pre><code class="prism language-sh"><span class="token function">vim</span> /etc/profile
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/opt/server/hadoop-3.3.4
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">${HADOOP_HOME}</span>/bin:<span class="token variable">${HADOOP_HOME}</span>/sbin
<span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<h4><a id="7HadoopYAEN_212"></a>7、Hadoop(YAEN)环境搭建</h4> 
<h5><a id="1_214"></a>（1）修改配置文件</h5> 
<p>进入/opt/server/hadoop-3.3.4/etc/hadoop 目录下，修改以下配置</p> 
<p>修改mapred-site.xml文件</p> 
<pre><code class="prism language-shell"><span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.framework.name<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>yarn<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.app.mapreduce.am.env<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>HADOOP_MAPRED_HOME<span class="token operator">=</span><span class="token variable">${HADOOP_HOME}</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.map.env<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>HADOOP_MAPRED_HOME<span class="token operator">=</span><span class="token variable">${HADOOP_HOME}</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce.reduce.env<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>HADOOP_MAPRED_HOME<span class="token operator">=</span><span class="token variable">${HADOOP_HOME}</span><span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<p>修改yarn-site.xml文件，配置 NodeManager 上运行的附属服务</p> 
<pre><code class="prism language-shell"><span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>--配置NodeManager运行的附属服务。需要配置成mapreduce_shuffle后才可以在Yarn上运行MapRedvimuce程序--<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn.nodemanager.aux-services<span class="token operator">&lt;</span>/name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>mapreduce_shuffle<span class="token operator">&lt;</span>/value<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/configuration<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="2_253"></a>（2）启动服务</h5> 
<p>Hadoop 3中不允许使用root用户来一键启动集群，需要配置启动用户</p> 
<pre><code class="prism language-shell"><span class="token comment"># start-yarn.sh stop-yarn.sh在两个文件顶部添加以下内容</span>
<span class="token assign-left variable">YARN_RESOURCEMANAGER_USER</span><span class="token operator">=</span>root
<span class="token assign-left variable">HADOOP_SECURE_DN_USER</span><span class="token operator">=</span>yarn
<span class="token assign-left variable">YARN_NODEMANAGER_USER</span><span class="token operator">=</span>root
</code></pre> 
<p>进入 ${HADOOP_HOME}/sbin/ 目录下，启动 YARN</p> 
<pre><code class="prism language-shell">./start-yarn.sh
</code></pre> 
<p>验证是否启动成功</p> 
<p>方式一：执行 jps 命令查看 NodeManager 和 ResourceManager 服务是否已经启动</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>root@server sbin<span class="token punctuation">]</span><span class="token comment"># jps</span>
<span class="token number">1696</span> NameNode
<span class="token number">2401</span> ResourceManager
<span class="token number">2067</span> SecondaryNameNode
<span class="token number">1863</span> DataNode
<span class="token number">2856</span> Jps
<span class="token number">2537</span> NodeManager
</code></pre> 
<p>方式二：查看 Web UI 界面，端口为 8088</p> 
<p><img src="https://images2.imgbox.com/a7/8d/eZm2punf_o.png" alt="在这里插入图片描述"></p> 
<pre><code>所需安装包链接：
链接:https://pan.baidu.com/s/1bw2PaENbWVBNt6JcrMO-BA?pwd=k7xj 
提取码:k7xj
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ab24c25d8cf4a76de07dbf8c99381f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络流量调度的艺术：权重公平排队算法（WFQ）揭秘，全面解析！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc20508d8a2998db84df343a3683e84c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android Studio的笔记--SerialPort串口通讯学习和使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>