<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL排序规则之utf8mb4_0900_ai_ci - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/b2860e6d6ccd5941697ff2cbfd5d163c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL排序规则之utf8mb4_0900_ai_ci">
  <meta property="og:description" content="1. utf8mb4_0900_ai_ci是什么？如何理解？ 是什么？ utf8mb4_0900_ai_ci是mysql8.0之后的数据库的一种排序规则（collation）。
如何理解？ utf8mb4，这个名字许多人大概熟悉。如今️✈️♥️emoji表情已经大量使用，但MySQL之前的的字符集(character set)是utf8(更准确的名字是utf8mb3，一个字符最多使用3个字节来存储)，只能存储编码值从0x000到0xFFFF之间的字符。然而，emoji表情字符的码值超过了0xFFFF，按照UTF-8规范，存储时需要用4个字节。正因为如此，MySQL才提供了utf8mb4的字符集。如果把数据库表的字符集设定为utf8mb4，就可以正常存储包含表情字符的文本了。中间的0900，它对应的是Unicode 9.0的规范。要知道，Unicode规范是在不断更新的，每次更新既包括扩充，也包括修正。比如6.0版新加入了222个中日韩统一表义字符(CJK Unified Ideographs)，7.0版加入了俄国货币卢布的符号等等。最后两部分_ai_ci，ai表示accent insensitivity，也就是“不区分音调”，而ci表示case insensitivity，也就是“不区分大小写”。 2. utf8mb4_0900_ai_ci有什么优点，为什么要用它？ utf8mb4_0900_ai_ci是针对Unicode字符集的一种扩展，支持存储和处理更广泛的字符。
使用utf8mb4_0900_ai_ci的一些优点和原因：
支持更多的字符：utf8mb4_0900_ai_ci字符集支持存储和处理包括表情符号、特殊符号和罕见字符在内的更多Unicode字符。相比之前的字符集，它可以更全面地满足多语言和多字符需求。表情符号支持：随着表情符号在现代通信中的广泛使用，使用utf8mb4_0900_ai_ci字符集可以确保数据库能够正确存储和处理这些表情符号。排序规则：utf8mb4_0900_ai_ci排序规则是根据Unicode标准制定的，它提供了更准确和一致的排序方式。这对于需要对文本进行排序和比较的应用程序非常重要，尤其是涉及多语言的场景。兼容性：utf8mb4_0900_ai_ci字符集在MySQL 8.0.0版本引入，是MySQL官方推荐的字符集。使用它可以确保与最新版本的MySQL兼容，并且能够利用MySQL提供的最新功能和改进。 总之，utf8mb4_0900_ai_ci字符集和排序规则提供了更广泛的字符支持和更准确的排序方式，适用于需要处理多语言、表情符号和特殊字符的应用程序。它是与最新版本的MySQL兼容的推荐选择。
3. 如何使用utf8mb4_0900_ai_ci？ 要在MySQL中使用utf8mb4_0900_ai_ci字符集和排序规则，需要进行以下步骤：
创建数据库时指定字符集和排序规则： CREATE DATABASE your_database_name CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci; 这将创建一个名为your_database_name的数据库，并将其字符集设置为utf8mb4，排序规则设置为utf8mb4_0900_ai_ci。
2. 在创建表时指定字符集和排序规则：
CREATE TABLE your_table_name ( column1 datatype CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, column2 datatype CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci, ... ); 在创建表时，为每个需要存储utf8mb4字符集的列指定字符集和排序规则。将datatype替换为相应的数据类型。
3. 修改现有表的字符集和排序规则：
ALTER TABLE your_table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci; 使用上述语句，将现有表your_table_name的字符集和排序规则修改为utf8mb4和utf8mb4_0900_ai_ci。
请注意，执行上述操作可能会导致数据丢失或格式变化。在进行任何更改之前，请务必备份重要的数据。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-11-16T11:28:53+08:00">
    <meta property="article:modified_time" content="2023-11-16T11:28:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL排序规则之utf8mb4_0900_ai_ci</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_utf8mb4_0900_ai_ci_0"></a>1. <code>utf8mb4_0900_ai_ci</code>是什么？如何理解？</h3> 
<h4><a id="_1"></a>是什么？</h4> 
<p><code>utf8mb4_0900_ai_ci</code>是mysql8.0之后的数据库的一种排序规则（collation）。</p> 
<h4><a id="_3"></a>如何理解？</h4> 
<ol><li>utf8mb4，这个名字许多人大概熟悉。如今️✈️♥️emoji表情已经大量使用，但MySQL之前的的字符集(character set)是utf8(更准确的名字是utf8mb3，一个字符最多使用3个字节来存储)，只能存储编码值从0x000到0xFFFF之间的字符。然而，emoji表情字符的码值超过了0xFFFF，按照UTF-8规范，存储时需要用4个字节。正因为如此，MySQL才提供了utf8mb4的字符集。如果把数据库表的字符集设定为utf8mb4，就可以正常存储包含表情字符的文本了。</li><li>中间的0900，它对应的是Unicode 9.0的规范。要知道，Unicode规范是在不断更新的，每次更新既包括扩充，也包括修正。比如6.0版新加入了222个中日韩统一表义字符(CJK Unified Ideographs)，7.0版加入了俄国货币卢布的符号等等。</li><li>最后两部分_ai_ci，ai表示accent insensitivity，也就是“不区分音调”，而ci表示case insensitivity，也就是“不区分大小写”。</li></ol> 
<h3><a id="2_utf8mb4_0900_ai_ci_7"></a>2. <code>utf8mb4_0900_ai_ci</code>有什么优点，为什么要用它？</h3> 
<p><code>utf8mb4_0900_ai_ci</code>是针对Unicode字符集的一种扩展，支持存储和处理更广泛的字符。<br> 使用<code>utf8mb4_0900_ai_ci</code>的一些优点和原因：</p> 
<ol><li>支持更多的字符：<code>utf8mb4_0900_ai_ci</code>字符集支持存储和处理包括表情符号、特殊符号和罕见字符在内的更多Unicode字符。相比之前的字符集，它可以更全面地满足多语言和多字符需求。</li><li>表情符号支持：随着表情符号在现代通信中的广泛使用，使用<code>utf8mb4_0900_ai_ci</code>字符集可以确保数据库能够正确存储和处理这些表情符号。</li><li>排序规则：<code>utf8mb4_0900_ai_ci</code>排序规则是根据Unicode标准制定的，它提供了更准确和一致的排序方式。这对于需要对文本进行排序和比较的应用程序非常重要，尤其是涉及多语言的场景。</li><li>兼容性：<code>utf8mb4_0900_ai_ci</code>字符集在MySQL 8.0.0版本引入，是MySQL官方推荐的字符集。使用它可以确保与最新版本的MySQL兼容，并且能够利用MySQL提供的最新功能和改进。</li></ol> 
<blockquote> 
 <p>总之，<code>utf8mb4_0900_ai_ci</code>字符集和排序规则提供了更广泛的字符支持和更准确的排序方式，适用于需要处理多语言、表情符号和特殊字符的应用程序。它是与最新版本的MySQL兼容的推荐选择。</p> 
</blockquote> 
<h3><a id="3_utf8mb4_0900_ai_ci_15"></a>3. 如何使用<code>utf8mb4_0900_ai_ci</code>？</h3> 
<p>要在MySQL中使用<code>utf8mb4_0900_ai_ci</code>字符集和排序规则，需要进行以下步骤：</p> 
<ol><li>创建数据库时指定字符集和排序规则：</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> your_database_name <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_0900_ai_ci<span class="token punctuation">;</span>
</code></pre> 
<p>这将创建一个名为<code>your_database_name</code>的数据库，并将其字符集设置为<code>utf8mb4</code>，排序规则设置为<code>utf8mb4_0900_ai_ci</code>。<br> 2. 在创建表时指定字符集和排序规则：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> your_table_name <span class="token punctuation">(</span>
  column1 datatype <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_0900_ai_ci<span class="token punctuation">,</span>
  column2 datatype <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_0900_ai_ci<span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在创建表时，为每个需要存储<code>utf8mb4</code>字符集的列指定字符集和排序规则。将<code>datatype</code>替换为相应的数据类型。<br> 3. 修改现有表的字符集和排序规则：</p> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> your_table_name <span class="token keyword">CONVERT</span> <span class="token keyword">TO</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_0900_ai_ci<span class="token punctuation">;</span>
</code></pre> 
<p>使用上述语句，将现有表<code>your_table_name</code>的字符集和排序规则修改为<code>utf8mb4</code>和<code>utf8mb4_0900_ai_ci</code>。</p> 
<blockquote> 
 <p>请注意，执行上述操作可能会导致数据丢失或格式变化。在进行任何更改之前，请务必备份重要的数据。</p> 
</blockquote> 
<p>确保在MySQL版本8.0.0或更高版本中使用<code>utf8mb4_0900_ai_ci</code>字符集和排序规则，因为早期版本的MySQL可能不支持该字符集和排序规则。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6f671e82f0b6d0f13a46d6c769376a95/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Oracle中的NVL、NVL2、NULLIF、COALESCE函数详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5965fcb691da972cdd8d085c48615efd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决 “Module build failed (from ./node_modules/babel-loader/lib/index.js)“ 错误的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>