<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于Leaflet.js和Turf.js的等值线区间自定义及颜色自适应实践 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/510095292f6d6ec299dab088b49e4da1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="基于Leaflet.js和Turf.js的等值线区间自定义及颜色自适应实践">
  <meta property="og:description" content="目录
前言
一、Turf.js等值线相关制作
1、生成方法
2、主要参数
二、实际案例开发
1、新建展示页面
2、等值线生成
3、基于Leaflet的再优化
总结
前言 在气象方面的GIS应用当中，会根据实际的工作需要建立不同的监测站点。气象监测站的主要功能包括：（1）天气预报和气候研究。通过实时监测大气压力、温度、湿度、风速、风向和降水等参数，对天气和气候变化进行准确预测和研究，提供及时的天气预报和气候变化的科学依据。（2）灾害预警和防控。监测和预警各类自然灾害，如暴雨、大风、强降雪等，及时发出预警信息，帮助居民和相关部门采取紧急应对措施，减轻灾害造成的损失。（3）环境保护与生态研究。测量大气污染物，如PM2.5、O3等，提供空气质量和污染状况的数据，为环境保护部门和科研机构提供重要依据。（4）农业生产与粮食安全。提供气象参数，如温度、湿度、降雨量等，为农田灌溉、作物生长和病虫害预警等农业生产活动提供重要数据，保障粮食安全和农业发展。（5）生态旅游和户外活动。提供气象参数和天气预报，帮助人们选择合适的时机和地点，增加旅游活动的安全性和可行性。（6）航空航天和海洋工程。提供气象数据，如风速、风向、气温等，用于航班安排、船舶安全和海洋工程施工，确保航空和海洋工程的安全进行。
在上述这些应用当中，为了可以从空间尺度进行数据分布的可视化。等值线是制图对象某一数量指标值相等的各点连成的平滑曲线，由地图上标出的表示制图对象数量的各点，采用内插法找出各整数点绘制而成的。每两条等值线之间的数量差额多为常数，可通过等值线的疏密程度来判断现象的数量变化趋势。等值线法往往与分层设色的表示手段配合使用，即采用改变颜色深浅、冷暖和阴暗来表示现象的数值变化趋势，使图面更清晰、易读。另外往往在等值线上加数字注记，便于直接获得数量指标。等值线法除用于表示空间现象数量的连续而逐渐变化的特征外，还可表示现象随时间的变化，现象的重复性（频度）等。等值线图用数值相等各点联成的曲线（即等值线）在平面上的投影来表示被摄物体的外形和大小的图。等值线是由某种现象的数值相等的各点所连成的一条平滑曲线，如等高线、等温线、等雨量线、等磁偏线、等气压线等。等值线法就是利用一组等值线表示制图现象分布特征的方法。如下图所示：
既然利用等值线可以得到很多有用的有效信息，那么在WebGIS当中，如何进行等值线的绘制呢？在不同的值域分布区间当中，如何根据值域的区间来进行不同颜色的自适应适配呢？在一些技术博客中有讲解如何进行WebGIS的web生成。但是目前均有一些缺陷，以Turf.js为例，其官方自带的例子过于简单，只是把基础的功能展示出来，没有实现如何进行值域的自适应。而另外一些有值域颜色自适应的，主要是采用OpenLayers来进行开发的。而使用Leaflet进行等值线生成的例子相对较少，而且示例不全。因此才有了本文的创作。本文将重点讲解在Leaflet中使用turf来生成等值线，同时可以自主适配不同的值域信息，根据值域区间配置不同的颜色，让可视化效果更加贴近实际需要。如果您目前也刚好在学习有关于Leaflet中进行等值线的展示的需求，不妨来看看博文。
等值线的生成从生成角度可以分成前端生成和后端生成，本文采用前端生成的方式。采用turf.js作为前端生产的组件。相关的数据可以从后台查询得到，本文使用的数据均为演示数据，不是真实数据。
一、Turf.js等值线相关制作 想要在前端直接生成等值线，有一个非常值得学习的工具，那就是Turf.js组件，通过这个组件可以做很多的前端空间计算和分析。当然，如果是大规模的空间分析，不建议放在前端，毕竟前端作为可视化终端，并不是用来解决分析的，主要是作为效果的展示终端。关于Turf的能力，在之前的博客中也有一定的介绍，关于Turf.js，感兴趣的朋友可以自己到相关网站上查看，turf.js。
为了本文的介绍同时让大家对Turf的等值面生成有一个基本的了解和掌握，本节将首先对Turf.js进行简单介绍，将其的api及相关的属性和方法进行讲解，让大家有一个基本的认识。
1、生成方法 在Turf当中，生成等值线的方法主要是isolines方法，这里对isolines方法中的相关参数，使用方法进行讲解，为下一步的实例开发打好技术基础。
Takes a grid FeatureCollection of Point features with z-values and an array of value breaks and generates isolines.翻译成中文就是：采用带有z值的点特征的网格FeatureCollection和一组断点值并生成等值线。
2、主要参数 isolines方法的参数主要有三个，分别如下：
参数类型描述pointGridFeatureCollection &lt;Point&gt;input pointsbreaksArrayvalues of zProperty where to draw isolinesoptionsObject可选参数：见下文 其中，pointGrid是空间点的集合，可以理解成为多个坐标点的信息，主要是空间信息。breaks在这里是值域区间，实际情况需要根据不同值域合理分开。options选项是一个可选参数，其包含的主要信息如下：
属性类型默认值描述zPropertystringelevationthe property name incommonPropertiesObject{}GeoJSON properties passed to ALL isolinesbreaksPropertiesArray[]GeoJSON properties passed, in order, to the correspondent isoline; the breaks array will define the order in which the isolines are created 其中，zProperty是指实际的值，比如气象中的实际降水量，温度，湿度等具体的值。commonProperties是geojson的公共属性，所有的等值线都会拥有这些属性，在设置时要谨慎。breaksProperties主要是用来进行对应的分区属性定义的，与这个参数的参数对应的breaks对应，也就是说，这个范围与breaks要一致，顺序也一并保持一致。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-03T08:30:00+08:00">
    <meta property="article:modified_time" content="2024-04-03T08:30:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于Leaflet.js和Turf.js的等值线区间自定义及颜色自适应实践</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E4%B8%80%E3%80%81Turf.js%E7%AD%89%E5%80%BC%E7%BA%BF%E7%9B%B8%E5%85%B3%E5%88%B6%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81Turf.js%E7%AD%89%E5%80%BC%E7%BA%BF%E7%9B%B8%E5%85%B3%E5%88%B6%E4%BD%9C" rel="nofollow">一、Turf.js等值线相关制作</a></p> 
<p id="1%E3%80%81%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95" rel="nofollow">1、生成方法</a></p> 
<p id="2%E3%80%81%E4%B8%BB%E8%A6%81%E5%8F%82%E6%95%B0-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%B8%BB%E8%A6%81%E5%8F%82%E6%95%B0" rel="nofollow">2、主要参数</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B%E5%BC%80%E5%8F%91-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B%E5%BC%80%E5%8F%91" rel="nofollow">二、实际案例开发</a></p> 
<p id="1%E3%80%81%E6%96%B0%E5%BB%BA%E5%B1%95%E7%A4%BA%E9%A1%B5%E9%9D%A2-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E6%96%B0%E5%BB%BA%E5%B1%95%E7%A4%BA%E9%A1%B5%E9%9D%A2" rel="nofollow">1、新建展示页面</a></p> 
<p id="2%E3%80%81%E7%AD%89%E5%80%BC%E7%BA%BF%E7%94%9F%E6%88%90-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E7%AD%89%E5%80%BC%E7%BA%BF%E7%94%9F%E6%88%90" rel="nofollow">2、等值线生成</a></p> 
<p id="%C2%A03%E3%80%81%E5%9F%BA%E4%BA%8ELeaflet%E7%9A%84%E5%86%8D%E4%BC%98%E5%8C%96-toc" style="margin-left:40px;"><a href="#%C2%A03%E3%80%81%E5%9F%BA%E4%BA%8ELeaflet%E7%9A%84%E5%86%8D%E4%BC%98%E5%8C%96" rel="nofollow"> 3、基于Leaflet的再优化</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%89%8D%E8%A8%80">前言</h2> 
<p>        在气象方面的GIS应用当中，会根据实际的工作需要建立不同的监测站点。气象监测站的主要功能包括：（1）天气预报和气候研究。通过实时监测大气压力、温度、湿度、风速、风向和降水等参数，对天气和气候变化进行准确预测和研究，提供及时的天气预报和气候变化的科学依据。（2）灾害预警和防控。监测和预警各类自然灾害，如暴雨、大风、强降雪等，及时发出预警信息，帮助居民和相关部门采取紧急应对措施，减轻灾害造成的损失。（3）环境保护与生态研究。测量大气污染物，如PM2.5、O3等，提供空气质量和污染状况的数据，为环境保护部门和科研机构提供重要依据。（4）农业生产与粮食安全。提供气象参数，如温度、湿度、降雨量等，为农田灌溉、作物生长和病虫害预警等农业生产活动提供重要数据，保障粮食安全和农业发展。（5）生态旅游和户外活动。提供气象参数和天气预报，帮助人们选择合适的时机和地点，增加旅游活动的安全性和可行性。（6）航空航天和海洋工程。提供气象数据，如风速、风向、气温等，用于航班安排、船舶安全和海洋工程施工，确保航空和海洋工程的安全进行。</p> 
<p>        在上述这些应用当中，为了可以从空间尺度进行数据分布的可视化。等值线是制图对象某一数量指标值相等的各点连成的平滑曲线，由地图上标出的表示制图对象数量的各点，采用内插法找出各整数点绘制而成的。每两条等值线之间的数量差额多为常数，可通过等值线的疏密程度来判断现象的数量变化趋势。等值线法往往与分层设色的表示手段配合使用，即采用改变颜色深浅、冷暖和阴暗来表示现象的数值变化趋势，使图面更清晰、易读。另外往往在等值线上加数字注记，便于直接获得数量指标。等值线法除用于表示空间现象数量的连续而逐渐变化的特征外，还可表示现象随时间的变化，现象的重复性（频度）等。等值线图用数值相等各点联成的曲线（即等值线）在平面上的投影来表示被摄物体的外形和大小的图。等值线是由某种现象的数值相等的各点所连成的一条平滑曲线，如等高线、等温线、等雨量线、等磁偏线、等气压线等。等值线法就是利用一组等值线表示制图现象分布特征的方法。如下图所示：</p> 
<p class="img-center"><img alt="" height="391" src="https://images2.imgbox.com/15/fd/v9MH5XYf_o.png" width="656"></p> 
<p>        既然利用等值线可以得到很多有用的有效信息，那么在WebGIS当中，如何进行等值线的绘制呢？在不同的值域分布区间当中，如何根据值域的区间来进行不同颜色的自适应适配呢？在一些技术博客中有讲解如何进行WebGIS的web生成。但是目前均有一些缺陷，以Turf.js为例，其官方自带的例子过于简单，只是把基础的功能展示出来，没有实现如何进行值域的自适应。而另外一些有值域颜色自适应的，主要是采用OpenLayers来进行开发的。而使用Leaflet进行等值线生成的例子相对较少，而且示例不全。因此才有了本文的创作。本文将重点讲解在Leaflet中使用turf来生成等值线，同时可以自主适配不同的值域信息，根据值域区间配置不同的颜色，让可视化效果更加贴近实际需要。如果您目前也刚好在学习有关于Leaflet中进行等值线的展示的需求，不妨来看看博文。</p> 
<p>        等值线的生成从生成角度可以分成前端生成和后端生成，本文采用前端生成的方式。采用turf.js作为前端生产的组件。相关的数据可以从后台查询得到，本文使用的数据均为演示数据，不是真实数据。</p> 
<h2 id="%E4%B8%80%E3%80%81Turf.js%E7%AD%89%E5%80%BC%E7%BA%BF%E7%9B%B8%E5%85%B3%E5%88%B6%E4%BD%9C">一、Turf.js等值线相关制作</h2> 
<p>        想要在前端直接生成等值线，有一个非常值得学习的工具，那就是Turf.js组件，通过这个组件可以做很多的前端空间计算和分析。当然，如果是大规模的空间分析，不建议放在前端，毕竟前端作为可视化终端，并不是用来解决分析的，主要是作为效果的展示终端。关于Turf的能力，在之前的博客中也有一定的介绍，关于Turf.js，感兴趣的朋友可以自己到相关网站上查看，<a class="link-info" href="https://turfjs.fenxianglu.cn/" rel="nofollow" title="turf.js">turf.js</a>。</p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/23/25/yxsFuWCg_o.png" width="643"></p> 
<p>        为了本文的介绍同时让大家对Turf的等值面生成有一个基本的了解和掌握，本节将首先对Turf.js进行简单介绍，将其的api及相关的属性和方法进行讲解，让大家有一个基本的认识。</p> 
<h3 id="1%E3%80%81%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95">1、生成方法</h3> 
<p>        在Turf当中，生成等值线的方法主要是isolines方法，这里对isolines方法中的相关参数，使用方法进行讲解，为下一步的实例开发打好技术基础。</p> 
<p>        Takes a grid FeatureCollection of Point features with z-values and an array of value breaks and generates isolines.翻译成中文就是：采用带有z值的点特征的网格<code>FeatureCollection</code>和一组断点值并生成等值线。</p> 
<h3 id="2%E3%80%81%E4%B8%BB%E8%A6%81%E5%8F%82%E6%95%B0">2、主要参数</h3> 
<p>        isolines方法的参数主要有三个，分别如下：</p> 
<table align="center"><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>pointGrid</td><td>FeatureCollection &lt;Point&gt;</td><td>input points</td></tr><tr><td>breaks</td><td>Array</td><td>values of zProperty where to draw isolines</td></tr><tr><td>options</td><td>Object</td><td>可选参数：见下文</td></tr></tbody></table> 
<p>        其中，pointGrid是空间点的集合，可以理解成为多个坐标点的信息，主要是空间信息。breaks在这里是值域区间，实际情况需要根据不同值域合理分开。options选项是一个可选参数，其包含的主要信息如下：</p> 
<table align="center"><thead><tr><th style="width:135px;">属性</th><th style="width:56px;">类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td style="width:135px;">zProperty</td><td style="width:56px;">string</td><td>elevation</td><td>the property name in</td></tr><tr><td style="width:135px;">commonProperties</td><td style="width:56px;">Object</td><td>{}</td><td>GeoJSON properties passed to ALL isolines</td></tr><tr><td style="width:135px;">breaksProperties</td><td style="width:56px;">Array</td><td>[]</td><td>GeoJSON properties passed, in order, to the correspondent isoline; the breaks array will define the order in which the isolines are created</td></tr></tbody></table> 
<p>        其中，zProperty是指实际的值，比如气象中的实际降水量，温度，湿度等具体的值。commonProperties是geojson的公共属性，所有的等值线都会拥有这些属性，在设置时要谨慎。breaksProperties主要是用来进行对应的分区属性定义的，与这个参数的参数对应的breaks对应，也就是说，这个范围与breaks要一致，顺序也一并保持一致。</p> 
<p>        经过isolines的计算，得到的结果是FeatureCollection &lt;MultiLineString&gt; - a FeatureCollection of MultiLineString features representing isolines。其结果是一个多线，也就是等值线。至此我们对其核心api有了基本的认识。下面将基于以上的核心api进行实际应用的开发。</p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B%E5%BC%80%E5%8F%91">二、实际案例开发</h2> 
<p>        在进行等值线生成的实例开发之前，还有一些数据是需要准备的。比如需要展示的区域范围，由于使用的模拟数据，我们采用pointGrid生成随机点位来标识范围。</p> 
<p><img alt="" height="478" src="https://images2.imgbox.com/66/b7/7j42HhfE_o.png" width="671"></p> 
<h3 id="1%E3%80%81%E6%96%B0%E5%BB%BA%E5%B1%95%E7%A4%BA%E9%A1%B5%E9%9D%A2">1、新建展示页面</h3> 
<p>        为了展示出所有空间数据，需要定义html对象来绑定地图对象。关键代码如下：</p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;Turf生成等值线&lt;/title&gt;
	&lt;meta charset="utf-8" /&gt;
	&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
	&lt;link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" /&gt;
	&lt;link rel="stylesheet" href="/2d/leaflet/leaflet.css" /&gt;
    &lt;script src="/2d/leaflet/leaflet.js?v=1.0.0"&gt;&lt;/script&gt;
	&lt;!-- 使用unpkg --&gt;
	&lt;script src="https://unpkg.com/@turf/turf/turf.min.js"&gt;&lt;/script&gt;
	&lt;style&gt;
        #map {
            margin: 0;
            padding: 0;
            position: absolute;
            width: 99%;
            height: 98%;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;!--
&lt;div id="mapid" style="width: 100%; height: 600px;"&gt;&lt;/div&gt;--&gt;
&lt;div id="map"&gt;&lt;/div&gt;
&lt;script&gt;
  var mymap = L.map('map').setView([29.052934, 104.0625], 5);
var tileLayer = L.tileLayer('http://localhost:8086/data/xxgc/q0403/{z}/{x}/{y}.png', {
		maxZoom: 7,
		minZoom:0
});
tileLayer.addTo(mymap);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<h3 id="2%E3%80%81%E7%AD%89%E5%80%BC%E7%BA%BF%E7%94%9F%E6%88%90">2、等值线生成</h3> 
<p>        定义完成地图及底图对象后，我们来使用turf生成模拟数据，首先设置展示范围，代码如下：</p> 
<pre><code class="language-javascript">var extent = [90, 20, 120, 38];
var cellWidth = 100;
var pointGrid = turf.pointGrid(extent, cellWidth, {units: 'miles'});</code></pre> 
<p>        extent是类似于bbox参数的外包框范围，cellWidth是单元宽度，跟pointGrid中的单位配套使用。上面的代码表示在extent范围内生成100米的范围点。生成范围点还不够，还需要对点位的数据进行赋值。这里我们采用模拟的方式赋值。</p> 
<pre><code class="language-javascript">for (var i = 0; i &lt; pointGrid.features.length; i++) {
	 var val = Math.random() * 10;
	pointGrid.features[i].properties.temperature = Math.random() * 10;
}</code></pre> 
<p>        在生成的点中，追加一个气温的属性，使用随机数的方式进行赋值。最后进行等值线的值域定义，关键代码如下：</p> 
<pre><code class="language-javascript">//等值线绘制参数配置
var isobands_options = {
	  zProperty: "temperature",
	  commonProperties: {
		"fill-opacity": 0.85
    },
	  breaksProperties: [
		{fill: "#009900"},
		{fill: "#66C200"},
		{fill: "#99D600"},
		{fill: "#CCEB00"},
		{fill: "#FFCC00"},
		{fill: "#FF9900"},
		{fill: "#FF5000"},
		{fill: "#FF0000"}
	  ]
};

var breaks = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];</code></pre> 
<p>        最后使用isolines进行等值线生成，将返回的geojson对象绑定到leaflet创建的map对象中。</p> 
<pre><code class="language-javascript">var lines = turf.isobands(pointGrid, breaks, isobands_options);
	
var myStyle = {
	"color": "red",
    "weight": 5,
    "opacity": 0.65
 };
	
L.geoJSON(lines, {
	style:myStyle
}).addTo(mymap);</code></pre> 
<p>        首先来看第一版的效果，将页面发布到nginx当中，可以看到以下的效果。可以看到，虽然等值线生成了，但是都是统一的颜色，并没有按照不同的颜色进行区分开。这也是Leaflet当中大多数的等值线生成案例的效果。</p> 
<p style="text-align:center;"><img alt="" height="298" src="https://images2.imgbox.com/fb/55/FLjnwYgE_o.png" width="653"></p> 
<p>        下面我将进行更深入的讲解，将等值面按照值域渲染不同的颜色，让等值线体现出更加丰富的信息，同时点击等值线可以进行相应范围的提示。</p> 
<h3 id="%C2%A03%E3%80%81%E5%9F%BA%E4%BA%8ELeaflet%E7%9A%84%E5%86%8D%E4%BC%98%E5%8C%96"> 3、基于Leaflet的再优化</h3> 
<p>        首先我们在代码中是定义了相应的breaksProperties，不同的点可以进行不同颜色的渲染。但是没有起作用，主要是因为在等值线中使用了固定的颜色。</p> 
<pre><code class="language-javascript">L.geoJSON(lines, {
	style:myStyle
}).addTo(mymap);</code></pre> 
<p>        这里把每条线都设置了固定颜色，因此我们要结合geojson的渲染来进行颜色的可视化。</p> 
<pre><code class="language-javascript">L.geoJSON(lines, {
		style:feature =&gt; {
			return {
				color: feature.properties.fill,
				weight: 2,
				opacity: 0.5
			};
		}
	}).addTo(mymap);
	</code></pre> 
<p>        这里再来看一下效果如何，实际效果图如下：</p> 
<p class="img-center"><img alt="" height="304" src="https://images2.imgbox.com/96/0b/0oiImTCT_o.png" width="662"></p> 
<p class="img-center"><img alt="" height="300" src="https://images2.imgbox.com/e2/5b/ttAgiRmL_o.png" width="658"></p> 
<p>        至此，已经实现颜色的值域区间自定义。最后来绑定提示值。</p> 
<pre><code class="language-javascript">L.geoJSON(lines, {
		style:feature =&gt; {
			return {
				color: feature.properties.fill,
				weight: 2,
				opacity: 0.5
			};
		}
	}).bindPopup(function(layer){
		return "("+layer.feature.properties.temperature + ")°";
	}).addTo(mymap);</code></pre> 
<p class="img-center"><img alt="" height="291" src="https://images2.imgbox.com/cd/4c/L7L58yVA_o.png" width="638"></p> 
<p>         到这里，就基本完成了等值线的生成，自定义区间和颜色自适应，还有等值线的值智能提示。我们完成了基于Leaflet的等值线的改造和支持。</p> 
<h2 id="%E6%80%BB%E7%BB%93">总结</h2> 
<p>        以上就是本文的主要内容，本文将重点讲解在Leaflet中使用turf来生成等值线，同时可以自主适配不同的值域信息，根据值域区间配置不同的颜色，让可视化效果更加贴近实际需要。本文首先对turf生成等值线的相关函数进行深入介绍，包括其入参的参数及值定义。然后介绍了如何进行等值线渲染的基本可视化开发，最后基于Leaflet讲解了如何进行等值线的绘制，丰富了Leaflet的展示案例，很多社区在Leaflet当中进行等值线的动态展示缺乏介绍，本文结合实例的讲解进行了详细的讲解。看博文的朋友如果对相关技术感兴趣，不妨留言交流。turf作为前端生成的一种方案，提供了动态，样式可编辑的渲染模式，值得进行尝试。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/85ea106f1a8d64a27777d643273063e9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Java初阶（八）】String类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b35b6cb4411f248cad3466bf1d96e9c1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AI绘画：使用Stable Diffusion ComfyUI进行换脸：IPAdapter FaceID全面教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>