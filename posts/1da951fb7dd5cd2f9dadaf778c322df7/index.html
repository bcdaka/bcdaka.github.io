<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在 Visual Studio 2022 中使用 GitHub Copilot chat - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/1da951fb7dd5cd2f9dadaf778c322df7/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="在 Visual Studio 2022 中使用 GitHub Copilot chat">
  <meta property="og:description" content="本文通过实际应用场景和示例代码展示了 GitHub Copilot Chat 在 Visual Studio 2022 中的优势和特点。最后，鼓励读者在实际工作中尝试使用 Copilot Chat，以提升开发效率和代码质量。希望这些信息和经验能为你在使用GitHub Copilot时提供帮助和启发。
文章目录 1. 背景2. 活动回顾3. 启用 Copilot Chat3.1 确认权限3.2 安装插件 4. 使用体验4.1 如何交互4.2 分析当前异常4.3 简单的测试4.3.1 对话式编程4.3.2 代码解释4.3.3 问题解答4.3.4 提供优化建议 4.4 编写单元测试 5. 最后 1. 背景 近年来，GitHub Copilot 的问世为软件开发领域带来了新的可能性。作为一款智能编程工具，它极大地提高了开发者的编程效率。为了更深入了解和掌握 GitHub Copilot 的使用技巧，我参加了一场名为“GitHub Copilot开发者训练营”的活动。
2. 活动回顾 北京的线下场是在北京微软大厦故宫会议室，这也是我第一次到微软大厦。
本次活动可谓是收获满满，会议中几位老师，分享了 GitHub Copilot 使用技巧和最佳实践，并做了实操的演示。我们探讨了 GitHub Copilot 如何帮助开发者提高开发效率、助力创新以及弥补技能差距。通过使用 GitHub Copilot，开发者可以专注于解决关键和实际问题，加快原型创建，轻松学习新技术，从而提高生产力。此外，徐磊老师列举了 10 个 AI 在编程场景中表现出色的例子，展示了AI如何在各种编程任务中取得优异成果，包括正则表达式编写、编写测试代码、使用难以记忆的关键字等。GitHub Copilot 作为一款智能编程工具，具有很大的潜力，能够帮助开发者提升开发效率和代码质量。
当然，也有一些稍微的小遗憾。我们胖胖的卢老师竟然在上海，不过能在线下看到徐磊老师也是非常棒的。另一个遗憾，大概是没有赶上会前的拍照吧。因为上午帮我的大朋友抢六一儿童节的玩具，误入了美术馆，然后就看了一上午的美轮美奂的艺术品，流连忘返，误了饭点。等到会议地点，已是正式开始的时间了。看了会议相册，我猜是早到有单独拍照的环节。可惜了，上面只能单独放一个展板咯。
在会议中，主要介绍了 Copilot 的功能，并展示了如何在 VS Code 中使用 Copilot Chat。结合 GitHub 的 Codespaces，我们可以在完全云端的开发环境中体验到非常便捷和高效的编程过程。然而，如何在被誉为地表最强的IDE —— Visual Studio 中使用 Copilot chat 呢？接下来，就让我们一起探讨一番。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-05-28T11:19:30+08:00">
    <meta property="article:modified_time" content="2023-05-28T11:19:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在 Visual Studio 2022 中使用 GitHub Copilot chat</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>本文通过实际应用场景和示例代码展示了 GitHub Copilot Chat 在 Visual Studio 2022 中的优势和特点。最后，鼓励读者在实际工作中尝试使用 Copilot Chat，以提升开发效率和代码质量。希望这些信息和经验能为你在使用GitHub Copilot时提供帮助和启发。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__4" rel="nofollow">1. 背景</a></li><li><a href="#2__10" rel="nofollow">2. 活动回顾</a></li><li><a href="#3__Copilot_Chat_24" rel="nofollow">3. 启用 Copilot Chat</a></li><li><ul><li><a href="#31__26" rel="nofollow">3.1 确认权限</a></li><li><a href="#32__38" rel="nofollow">3.2 安装插件</a></li></ul> 
  </li><li><a href="#4__52" rel="nofollow">4. 使用体验</a></li><li><ul><li><a href="#41__58" rel="nofollow">4.1 如何交互</a></li><li><a href="#42__69" rel="nofollow">4.2 分析当前异常</a></li><li><a href="#43__89" rel="nofollow">4.3 简单的测试</a></li><li><ul><li><a href="#431__93" rel="nofollow">4.3.1 对话式编程</a></li><li><a href="#432__101" rel="nofollow">4.3.2 代码解释</a></li><li><a href="#433__148" rel="nofollow">4.3.3 问题解答</a></li><li><a href="#434__169" rel="nofollow">4.3.4 提供优化建议</a></li></ul> 
   </li><li><a href="#44__175" rel="nofollow">4.4 编写单元测试</a></li></ul> 
  </li><li><a href="#5__246" rel="nofollow">5. 最后</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__4"></a>1. 背景</h2> 
<p>近年来，GitHub Copilot 的问世为软件开发领域带来了新的可能性。作为一款智能编程工具，它极大地提高了开发者的编程效率。为了更深入了解和掌握 GitHub Copilot 的使用技巧，我参加了一场名为“GitHub Copilot开发者训练营”的活动。</p> 
<p><img src="https://images2.imgbox.com/1f/09/M6x6okjT_o.jpg" alt="活动展板"></p> 
<h2><a id="2__10"></a>2. 活动回顾</h2> 
<p>北京的线下场是在北京微软大厦故宫会议室，这也是我第一次到微软大厦。</p> 
<p><img src="https://images2.imgbox.com/72/1c/4CpHIIJM_o.jpg" alt="微软大厦"></p> 
<p>本次活动可谓是收获满满，会议中几位老师，分享了 GitHub Copilot 使用技巧和最佳实践，并做了实操的演示。我们探讨了 GitHub Copilot 如何帮助开发者提高开发效率、助力创新以及弥补技能差距。通过使用 GitHub Copilot，开发者可以专注于解决关键和实际问题，加快原型创建，轻松学习新技术，从而提高生产力。此外，徐磊老师列举了 10 个 AI 在编程场景中表现出色的例子，展示了AI如何在各种编程任务中取得优异成果，包括正则表达式编写、编写测试代码、使用难以记忆的关键字等。GitHub Copilot 作为一款智能编程工具，具有很大的潜力，能够帮助开发者提升开发效率和代码质量。</p> 
<p><img src="https://images2.imgbox.com/5e/7f/GzL3zKD1_o.jpg" alt="实操环节"></p> 
<p>当然，也有一些稍微的小遗憾。我们胖胖的卢老师竟然在上海，不过能在线下看到徐磊老师也是非常棒的。另一个遗憾，大概是没有赶上会前的拍照吧。因为上午帮我的大朋友抢六一儿童节的玩具，误入了美术馆，然后就看了一上午的美轮美奂的艺术品，流连忘返，误了饭点。等到会议地点，已是正式开始的时间了。看了会议相册，我猜是早到有单独拍照的环节。可惜了，上面只能单独放一个展板咯。</p> 
<p>在会议中，主要介绍了 Copilot 的功能，并展示了如何在 VS Code 中使用 Copilot Chat。结合 GitHub 的 Codespaces，我们可以在完全云端的开发环境中体验到非常便捷和高效的编程过程。然而，如何在被誉为地表最强的IDE —— Visual Studio 中使用 Copilot chat 呢？接下来，就让我们一起探讨一番。</p> 
<h2><a id="3__Copilot_Chat_24"></a>3. 启用 Copilot Chat</h2> 
<h3><a id="31__26"></a>3.1 确认权限</h3> 
<p>Copilot Chat 属于 GitHub Copilot X 中的一项能力，采用 OpenAI GPT-4，关于它的介绍可以前往 <a href="https://github.com/features/preview/copilot-x?WT.mc_id=DT-MVP-5005195">https://github.com/features/preview/copilot-x?WT.mc_id=DT-MVP-5005195</a> 查看。</p> 
<p>其当前还是预览状态，如果想使用该功能，首先你需要确保你已经注册并拥有了 Github Copilot 的权限：<a href="https://github.com/features/copilot/?WT.mc_id=DT-MVP-5005195">https://github.com/features/copilot/?WT.mc_id=DT-MVP-5005195</a></p> 
<p>对于普通用户，可以试用 Copilot 一个月。当确认你拥有 Copilot 的使用权限后，你可以通过这里提交预览功能的访问申请：<a href="https://aka.ms/GHCopilotXPPSignup?WT.mc_id=DT-MVP-5005195" rel="nofollow">https://aka.ms/GHCopilotXPPSignup?WT.mc_id=DT-MVP-5005195</a>。</p> 
<p>提交申请后，等待审核，审核结果会发送到你的邮箱，当你收到《Welcome to the Copilot chat private beta!》的邮件就意味着你可以使用 Copilot chat 了。</p> 
<p><img src="https://images2.imgbox.com/f5/c6/W4bTIxe7_o.png" alt="waitlist"></p> 
<h3><a id="32__38"></a>3.2 安装插件</h3> 
<p>在 Visual Studio 2022 中安装 Copilot Chat 扩展非常简单，只需要在扩展管理搜索 <code>github</code> 选择 <code>Visual Studio Extension for GitHub Copilot Preview</code> 即可。</p> 
<p><img src="https://images2.imgbox.com/47/f5/N16m6ObY_o.png" alt="扩展安装"></p> 
<p>你也可以直接前往 <a href="https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.VSGitHubCopilot" rel="nofollow">Marketplace下载</a>，完成后直接打开安装即可。</p> 
<p>安装完成后，需要确保你已经在 Visual Studio 中登录了 Github 账户。如果你对对这一步操作不熟悉，可以前往帮助查看：<a href="https://learn.microsoft.com/zh-cn/visualstudio/ide/work-with-github-accounts?WT.mc_id=DT-MVP-5005195" rel="nofollow">在 Visual Studio 中使用 GitHub 帐户</a>。</p> 
<p>若操作没有问题，你就可以在顶部菜单的视图中找到 <code>Copilot Chat</code>：</p> 
<p><img src="https://images2.imgbox.com/dc/29/6CAbb3v2_o.png" alt="菜单"></p> 
<h2><a id="4__52"></a>4. 使用体验</h2> 
<p>据说是与 Copilot 的沟通使用英文会更好，但是，当我看到 Copilot Chat 在 Visual Studio 中的界面后，我完全可以放心他的中文理解能力了：</p> 
<p><img src="https://images2.imgbox.com/42/23/FaJD6bam_o.png" alt="UI"></p> 
<h3><a id="41__58"></a>4.1 如何交互</h3> 
<p>和 Copilot chat 的交互有两种方式，除了可以通过打开的常驻对话框窗口外，你也可以通过右键菜单呼出对话浮窗（默认快捷键 <code>Alt + /</code>）。</p> 
<p><img src="https://images2.imgbox.com/5b/b2/AlOb1Hxm_o.png" alt="右键菜单"></p> 
<p>对于对话相关的代码，你可以通过光标定位到某一行代码，某一个类或者方法的开通结尾，当你激活对话框时，一个粉色的框会提示你当前对话相关的代码区域，当然你也可以选择相关区域后通过右键呼出：</p> 
<p><img src="https://images2.imgbox.com/29/60/AI8LWLRy_o.png" alt="区域"></p> 
<h3><a id="42__69"></a>4.2 分析当前异常</h3> 
<p>除了前面两种交互形式，在当程序调试出现 BUG 的时候，你也可以通过异常面板中“Copilot AI Assistant”快捷的询问解决方案：</p> 
<p><img src="https://images2.imgbox.com/ee/d5/sUA7fIHT_o.png" alt="Copilot"></p> 
<p>这里为了演示，我修改了正常项目的代码，让其出现了一个生命周期的相关异常。当你点击了 “Copilot AI Assistant” 其动作其实就是在对话框输入“Analyze the current exception”：</p> 
<p><img src="https://images2.imgbox.com/73/7e/UquGqiiD_o.png" alt="异常信息"></p> 
<p>通过上面 Copilot chat 的回复结果我们会发现，这里回复是英文的。熟悉 GPT 的同学应该清楚，AI 的回复会根据你提示的语言进行调整（毕竟不可见的输入中给 AI 输入了大量的英文报错信息）。不过，在我再次询问“程序当前的错误是怎么回事”时，他回复却耐人寻味了起来：</p> 
<p><img src="https://images2.imgbox.com/24/d4/McL3Dnix_o.png" alt="提问"></p> 
<p>当然，他的限制是必要的，毕竟他是作为一个编程伙伴。对于他对不理解我口语化的描述，我似乎也有些理解，就像 MOSS 的警告：禁止使用比喻，反问，暗示。</p> 
<p>这里有个小技巧，当你的程序报错时，你可以这样提问得到中文的错误分析：“分析当前异常，使用中文回复”</p> 
<p><img src="https://images2.imgbox.com/c5/36/BdIeFPfe_o.png" alt="分析当前异常"></p> 
<h3><a id="43__89"></a>4.3 简单的测试</h3> 
<p>接下来我们简单的进行几个测试，感受一下 Copilot chat 带来的一些便利。当然，AI 在许多编程场景可以完全碾压人类，更多功能还需要大家自行去探索。唯一可以确定的是，以后编程基本可以脱离搜索引擎，享受到更高效的开发体验了。</p> 
<h4><a id="431__93"></a>4.3.1 对话式编程</h4> 
<p>有了 Copilot chat ，其实我们完全可以通过不断的与其聊天对话，完成我们的开发工作。接下来我尝试让其帮我创建一个微信用户对象，用来存储到数据库：</p> 
<p><img src="https://images2.imgbox.com/8b/ad/oUrMo8Eu_o.png" alt="创建对象"></p> 
<p>这里我们不需要苦恼给对象起名，也不用考虑要存什么字段。更重要的是，他是懂我们的微信的，这里生成的结果完全没有问题。甚至于他可以直接通过快捷方式放到我的项目当中，无需我复制粘贴。</p> 
<h4><a id="432__101"></a>4.3.2 代码解释</h4> 
<p>我们会有需要读源码的场景，比如：接手新的项目，学习开源项目等。Copilot chat 的代码解释功能可以帮助我们节省大量的时间和精力，他可以在几毫秒中给你结果。以下是我用来询问他的一段代码：</p> 
<pre><code class="prism language-cs"><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// 验证来源</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token comment">/// &lt;param name="msg_signature"&gt;微信的签名&lt;/param&gt;</span>
<span class="token comment">/// &lt;param name="timestamp"&gt;时间戳&lt;/param&gt;</span>
<span class="token comment">/// &lt;param name="nonce"&gt;随机字符&lt;/param&gt;</span>
<span class="token comment">/// &lt;param name="echostr"&gt;加密的字符串&lt;/param&gt;</span>
<span class="token comment">/// &lt;returns&gt;&lt;/returns&gt;</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">VerifyURL</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> msg_signature<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> timestamp<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> nonce<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> echostr<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 微信加解密库</span>
    <span class="token class-name"><span class="token keyword">var</span></span> wxcpt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WXBizMsgCrypt</span><span class="token punctuation">(</span>_wechat<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Token<span class="token punctuation">,</span> _wechat<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>EncodingAesKey<span class="token punctuation">,</span> _wechat<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>CorpId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 接入验证，需要输出 EchoStr 的解密结果</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>echostr<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">string</span></span> sEchoStr <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> ret <span class="token operator">=</span> wxcpt<span class="token punctuation">.</span><span class="token function">VerifyURL</span><span class="token punctuation">(</span>msg_signature<span class="token punctuation">,</span> timestamp<span class="token punctuation">,</span> nonce<span class="token punctuation">,</span> echostr<span class="token punctuation">,</span> <span class="token keyword">ref</span> sEchoStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            _logger<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"ERR: VerifyURL fail, ret: "</span> <span class="token operator">+</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sEchoStr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    _logger<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"ERR: VerifyURL fail, empty echostr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>以下是回复的内容：</p> 
<pre><code class="prism language-text">这个函数是 VerifyURL。它有四个参数：msg_signature，timestamp，nonce 和 echostr。这个函数的主要目的是用于验证接口连接。
首先，这个函数会创建 WXBizMsgCrypt 的对象，该对象的实例用于微信消息的加解密。然后它会检查 echostr 的值是否为非空，如果不为空，则需要将 echostr 的解密结果输出。
为了完成解密过程，这个函数使用 wxcpt.VerifyURL(msg_signature, timestamp, nonce, echostr, ref sEchoStr) 方法，该方法返回一个 int 值。如果返回的不是 0，则表示解密失败，函数会通过记录日志输出错误信息并返回空字符串。否则，将解密后的字符串 sEchoStr 返回。
如果 echostr 的值为空，则表示验证失败。函数会记录一个错误日志信息并返回一个空字符串。
如果您需要进一步了解 WXBizMsgCrypt 和如何进行微信消息的加解密，请参考微信官方文档。
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/42/s620apgy_o.png" alt="代码解释"></p> 
<h4><a id="433__148"></a>4.3.3 问题解答</h4> 
<p>首先我们看一段代码：</p> 
<pre><code class="prism language-cs"><span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>MsgList<span class="token punctuation">&gt;</span></span> MsgLists <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>CursorCache<span class="token punctuation">&gt;</span></span> CursorCache <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre> 
<p>这段代码的第二行是 AI 生成的，前面写的代码我采用了 <code>private set</code>，这里我向其提问：这里采用 private set 和 set 有什么区别，哪个好？</p> 
<p>这里 AI 的回复是非常准确的，详细解释了set和private set的访问级别和用途。对于初学者，这无疑是非常有用的，他可以帮助你不断提高编程水平。</p> 
<pre><code>set 和 private set 是两种访问器的访问限定。 set 具有 public 的访问级别，而 private set 只有类本身内部可以访问。
当你使用 set 时，任何人都可以更改属性的值。这意味着，如果属性的值是不应该更改的，那么你应该使用 private set 而不是set。 这有助于保护对象不受不受控制的更改，并使代码更加安全。
让我们以 OnModelCreating 方法为例。这个方法只会在类内部中被访问，而不会外部进行更改。因此，建议使用 private set 以保护代码。
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/4f/ttadMoQT_o.png" alt="回答"></p> 
<h4><a id="434__169"></a>4.3.4 提供优化建议</h4> 
<p>同时，他也可以帮助你审查代码，提供修改建议。当然，这里的小技巧依旧适用，后面记得跟上“使用中文回复”，否则大段的英文会让他忘记问题的提出是中文了。</p> 
<p><img src="https://images2.imgbox.com/15/4e/uqGUpHgD_o.png" alt="优化建议"></p> 
<h3><a id="44__175"></a>4.4 编写单元测试</h3> 
<p>单元测试是软件开发过程中不可或缺的一部分，它可以帮助我们确保代码的质量和功能的正确性。通过 Copilot chat ，可以帮助我们快速的创建单元测试，以下是其针对我的 minimal web API 项目生成的单元测试：</p> 
<pre><code class="prism language-cs"><span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Hosting</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>TestHost</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>DependencyInjection</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Hosting</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Moq</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Http</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">WeChatCustomerAzureOpenAI<span class="token punctuation">.</span>WeChat</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Xunit</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeChatCustomerAzureOpenAITest</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">TestServer</span> _server<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">HttpClient</span> _client<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">WeChatCustomerAzureOpenAITest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        _server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TestServer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebHostBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseEnvironment</span><span class="token punctuation">(</span><span class="token string">"Development"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UseStartup</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Startup<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _client <span class="token operator">=</span> _server<span class="token punctuation">.</span><span class="token function">CreateClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Verify_WeChatURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//Arrange</span>
        <span class="token class-name"><span class="token keyword">var</span></span> url <span class="token operator">=</span> <span class="token string">"/wechatback?msg_signature=test&amp;timestamp=0&amp;nonce=0&amp;echostr=123"</span><span class="token punctuation">;</span>
        <span class="token comment">//Act</span>
        <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">GetAsync</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Assert</span>
        response<span class="token punctuation">.</span><span class="token function">EnsureSuccessStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> responseString <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span>Content<span class="token punctuation">.</span><span class="token function">ReadAsStringAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> expectedString <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>expectedString<span class="token punctuation">,</span> responseString<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Fact</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Check_Decrypt_Msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//Arrange</span>
        <span class="token class-name"><span class="token keyword">var</span></span> sMsg <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> requestContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StringContent</span><span class="token punctuation">(</span>sMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DefaultHttpContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>ContentLength <span class="token operator">=</span> requestContent<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>ContentLength<span class="token punctuation">;</span>
        context<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Body <span class="token operator">=</span> <span class="token keyword">await</span> requestContent<span class="token punctuation">.</span><span class="token function">ReadAsStreamAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> wechat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Mock<span class="token punctuation">&lt;</span>WechatServices<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Object<span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Mock<span class="token punctuation">&lt;</span>IMediator<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Object<span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> expectedString <span class="token operator">=</span> sMsg<span class="token punctuation">;</span>
        <span class="token comment">//Act</span>
        <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token keyword">await</span> _server<span class="token punctuation">.</span>Host<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WechatServices<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">DecryptMsg</span><span class="token punctuation">(</span>sMsg<span class="token punctuation">,</span> It<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IsAny</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> It<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IsAny</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> It<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">IsAny</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> _server<span class="token punctuation">.</span>Host<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Mediator<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Publish</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserBack</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Assert</span>
        Assert<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>expectedString<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/70/f6/1Rf8o4wB_o.png" alt="单元测试"></p> 
<p>这里的单元测试，当然是不能直接使用的，但是他完成了一个从零到一的过程。通过不断的对话调整，就会生成我们满意的结果。</p> 
<h2><a id="5__246"></a>5. 最后</h2> 
<p>如果你对 Copilot 和人工智能感兴趣并希望进一步了解，那么这里有一个 Microsoft Learn 的免费课程非常适合你：<a href="https://learn.microsoft.com/zh-cn/shows/learning-ai-with-github-copilot/?WT.mc_id=DT-MVP-5005195" rel="nofollow">使用 GitHub Copilot 学习 AI</a>。此系列视频可以指导你进入 AI 领域，探索机器学习基础知识、演示如何构建分类模型，然后介绍更高级的算法（称为神经网络）及它们在计算机视觉中的应用。</p> 
<p>最后，请牢记这句话：AI 本身不会取代你，但掌握 AI 技能的人可能会取代你。因此，希望大家能拥抱创新，尝试新的工具，提高开发效率和代码质量。让我们共同期待 Copilot 等类似的 AI 工具不断发展，助力更多开发者轻松应对编程挑战，编写出更优秀的软件作品。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c21f4517527b65cd370c1fe70d0b6dde/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Selenium自动化测试（基于Java）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dcd425ccaaa1847396298740e7846783/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于java的超市管理系统设计与实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>