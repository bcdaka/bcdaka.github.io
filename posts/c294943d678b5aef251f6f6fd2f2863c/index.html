<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【SQL Server】在 SSMS 中 使用 生成 SQL 脚本 方式 实现 数据库 备份 / 还原 ( 数据备份操作 - 生成 SQL 脚本 | 数据还原操作 - 执行 SQL 脚本 ) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c294943d678b5aef251f6f6fd2f2863c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【SQL Server】在 SSMS 中 使用 生成 SQL 脚本 方式 实现 数据库 备份 / 还原 ( 数据备份操作 - 生成 SQL 脚本 | 数据还原操作 - 执行 SQL 脚本 )">
  <meta property="og:description" content="文章目录 一、SQL Server 数据库备份简介1、SQL Server Management Studio 简介2、数据备份操作 - 生成 SQL 脚本3、数据还原操作 - 执行 SQL 脚本4、生成数据库表创建语句 一、SQL Server 数据库备份简介 1、SQL Server Management Studio 简介 SSMS 全称 &#34; SQL Server Management Studio &#34; , 是 由 Microsoft 开发的一款集成式环境 , 用于管理 Microsoft SQL Server 的数据库 ;
SSMS 是 SQL Server 的主要管理工具之一 , 提供了丰富的功能和工具 , 帮助开发人员和数据库管理员进行数据库管理、查询、优化和开发工作 ;
本篇博客介绍如何使用 SSMS 进行数据库备份 ;
使用的原理是 将数据库中的 数据 生成为 SQL 脚本 ( 几万条 SQL 语句 ) , 还原数据库的时候 , 先 TRUNCATE 清空表 , 然后再执行上述生成的 SQL 脚本 ;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-14T10:31:47+08:00">
    <meta property="article:modified_time" content="2024-08-14T10:31:47+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【SQL Server】在 SSMS 中 使用 生成 SQL 脚本 方式 实现 数据库 备份 / 还原 ( 数据备份操作 - 生成 SQL 脚本 | 数据还原操作 - 执行 SQL 脚本 )</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#SQL_Server__12" rel="nofollow">一、SQL Server 数据库备份简介</a></li><li><ul><li><a href="#1SQL_Server_Management_Studio__21" rel="nofollow">1、SQL Server Management Studio 简介</a></li><li><a href="#2___SQL__36" rel="nofollow">2、数据备份操作 - 生成 SQL 脚本</a></li><li><a href="#3___SQL__103" rel="nofollow">3、数据还原操作 - 执行 SQL 脚本</a></li><li><a href="#4_148" rel="nofollow">4、生成数据库表创建语句</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<br> 
<br> 
<br> 
<br> 
<br> 
<h2><a id="SQL_Server__12"></a>一、SQL Server 数据库备份简介</h2> 
<hr> 
<br> 
<br> 
<h3><a id="1SQL_Server_Management_Studio__21"></a>1、SQL Server Management Studio 简介</h3> 
<br> 
<p>SSMS 全称 " SQL Server Management Studio " , 是 由 Microsoft 开发的一款集成式环境 , 用于管理 Microsoft SQL Server 的数据库 ;</p> 
<p>SSMS 是 SQL Server 的主要管理工具之一 , 提供了丰富的功能和工具 , 帮助开发人员和数据库管理员进行数据库管理、查询、优化和开发工作 ;</p> 
<p>本篇博客介绍如何使用 SSMS 进行数据库备份 ;</p> 
<p>使用的原理是 将数据库中的 数据 生成为 SQL 脚本 ( 几万条 SQL 语句 ) , 还原数据库的时候 , 先 <code>TRUNCATE</code> 清空表 , 然后再执行上述生成的 SQL 脚本 ;</p> 
<br> 
<h3><a id="2___SQL__36"></a>2、数据备份操作 - 生成 SQL 脚本</h3> 
<br> 
<p>右键点击 数据库 , 选择 " 任务 / 生成脚本 " ;</p> 
<p><img src="https://images2.imgbox.com/ab/25/OVx2SCBE_o.png" alt="在这里插入图片描述"></p> 
<p>弹出生成脚本对话框 , 点击 " 下一步(N) " 按钮 , 进行下一步操作 ;</p> 
<p><img src="https://images2.imgbox.com/0f/c7/gUOUeb79_o.png" alt="在这里插入图片描述"></p> 
<p>在该步骤中 , 勾选 上方的 " 选择具体的数据库对象(Q) " 选项 , 然后 展开 " 表 " 选项 ;</p> 
<p><img src="https://images2.imgbox.com/e2/85/JJmaSVuS_o.png" alt="在这里插入图片描述"></p> 
<p>表 展开后 如下显示 , 会将数据库中所有的 数据表 都显示在列表中 , 这里 勾选要保存的数据库表 , 不需要保存的 不要勾选 ;</p> 
<p>数据库表 勾选完毕后 , 点击下一步 按钮 ;</p> 
<p><img src="https://images2.imgbox.com/c8/5a/Eenca71X_o.png" alt="在这里插入图片描述"></p> 
<p>在该步骤中 , 设置要保存的 SQL 脚本 存放位置 ,</p> 
<p>我设置的位置是 " C:\Users\octop\Documents\script_2024_08_08_10_39.sql " , 在说明这是 2024年8月8日10:39 进行备份的数据库数据 ;</p> 
<p><img src="https://images2.imgbox.com/c4/b1/0yTDe5gO_o.png" alt="在这里插入图片描述"></p> 
<p>在上述对话框中 , 再次点击 " 高级 " 按钮 , 进行脚本数据类型设置 ,</p> 
<p>将拖动条拉倒最下面 , 倒数第二项设置 选择 " 要编写脚本的数据的类型 " , 这里选择 仅限数据 ;</p> 
<ul><li>仅限架构 : 指的是 生成 建表的 SQL 语句 ;</li><li>仅限数据 : 指的是 生成 插入数据的 SQL 语句 , 执行前要删除数据库中的对应表 , 使用 <code>TRUNCATE TABLE table_name;</code> 删除数据库表即可 ;</li><li>架构和数据 : 指的是 生成 建表 + 插入数据 的 SQL 语句 ;</li></ul> 
<p><img src="https://images2.imgbox.com/ae/b5/r7I3p7ZV_o.png" alt="在这里插入图片描述"></p> 
<p>上述内容设置完毕后 , 点击下一步 , 会在该步骤中 检查所做选择 , 这里保持默认即可 , 再次点击下一步按钮 ;</p> 
<p><img src="https://images2.imgbox.com/d3/02/xuCAK53T_o.png" alt="在这里插入图片描述"></p> 
<p>等待数据库表 生成脚本即可 ;</p> 
<p><img src="https://images2.imgbox.com/7f/02/5D9Ut0xP_o.png" alt="在这里插入图片描述"></p> 
<p>生成完毕后 , 点击 完成 按钮 ;</p> 
<p><img src="https://images2.imgbox.com/44/b1/9p2D43cO_o.png" alt="在这里插入图片描述"></p> 
<p>如果使用 固态硬盘 , 上述操作 几秒 就可以完成 , 如果使用机械硬盘 , 可能需要几分钟 ;</p> 
<p>在保存位置 查看生成的脚本 ;</p> 
<p><img src="https://images2.imgbox.com/45/05/ffuZBRdd_o.png" alt="在这里插入图片描述"></p> 
<p>打开该文件 , 发现这就是一个文本文件 , 首先使用 <code>USE database_name;</code> 指定了数据库 , 然后 是几万条插入数据 ;</p> 
<p><img src="https://images2.imgbox.com/ee/93/28h10Q2F_o.png" alt="在这里插入图片描述"></p> 
<br> 
<h3><a id="3___SQL__103"></a>3、数据还原操作 - 执行 SQL 脚本</h3> 
<br> 
<p>进入 SSMS 后 , 右键点击 数据库 , 选择 " 新建查询 " , 然后 使用</p> 
<pre><code class="prism language-sql"><span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE1<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE2<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE3<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE4<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE5<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE6<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE7<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>TABLE8<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>语句 , 清空要 恢复数据 的 八张表 ;</p> 
<p><img src="https://images2.imgbox.com/e8/43/zY2BxtFD_o.png" alt="在这里插入图片描述"></p> 
<br> 
<p>一定要把表清空了 , 再执行 SQL 脚本 , 要不然数据全乱了 ;</p> 
<br> 
<p>然后进入到 生成的 SQL 脚本 script_2024_08_08_10_39.sql 保存目录 C:\Users\octop\Documents\ , 右键点击 SQL 脚本 , 选择 " 打开方式 / SSMS 19 " ,</p> 
<p><img src="https://images2.imgbox.com/74/ce/SggANb9x_o.png" alt="在这里插入图片描述"></p> 
<p>在 SSMS 中 打开后 , 会将 SQL 脚本加载到 SSMS 中 ;</p> 
<p><img src="https://images2.imgbox.com/95/e9/hbF5XHR9_o.png" alt="在这里插入图片描述"></p> 
<p>在脚本中 , 右键点击空白处 , 在弹出的菜单中选择 " 执行 " 选项 , 即可执行</p> 
<p><img src="https://images2.imgbox.com/cf/b1/tAFUGdYS_o.png" alt="在这里插入图片描述"></p> 
<p>等待执行完毕即可完成数据还原操作 ;</p> 
<br> 
<h3><a id="4_148"></a>4、生成数据库表创建语句</h3> 
<br> 
<p>如果 在 设置脚本编写选项 的 步骤中 , 设置 " 要编写脚本的数据的类型 " 为 " 仅限架构 " , 则生成的就是 选中表的 建表语句 ;<br> <img src="https://images2.imgbox.com/ab/5b/ySdZ2V0T_o.png" alt="在这里插入图片描述"></p> 
<p>保存后 , 得到的是 SQL 建表语句 ;</p> 
<p><img src="https://images2.imgbox.com/02/87/LuWiQekx_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a3e5f0b0fe42d88724b977ca020eb158/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在 CentOS 8.2.2004 上部署 ELK 栈实现日志归集20240813</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/72ed0671cd8602be08c13e876a180093/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">WPF窗体动态效果</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>