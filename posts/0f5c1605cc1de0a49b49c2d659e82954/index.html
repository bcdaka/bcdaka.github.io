<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c语言-＞贪吃蛇实战技巧结合EasyX简单实现页面管理（简单实现） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0f5c1605cc1de0a49b49c2d659e82954/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="c语言-＞贪吃蛇实战技巧结合EasyX简单实现页面管理（简单实现）">
  <meta property="og:description" content="✅作者简介：大家好，我是橘橙黄又青，一个想要与大家共同进步的男人😉😉
🍎个人主页：再无B～U～G-CSDN博客
1. 游戏背景 贪吃蛇是久负盛名的游戏，它也和俄罗斯⽅块，扫雷等游戏位列经典游戏的⾏列。 在编程语⾔的教学中，我们以贪吃蛇为例，从设计到代码实现来提升学⽣的编程能⼒和逻辑能⼒。 2. 游戏效果演⽰ 屏幕录制
3. 课程⽬标 使⽤C语⾔在Windows环境的控制台中模拟实现经典⼩游戏贪吃蛇 实现基本的功能： • 贪吃蛇地图绘制 • 蛇吃⻝物的功能 （上、下、左、右⽅向键控制蛇的动作） • 蛇撞墙死亡 • 蛇撞⾃⾝死亡 • 计算得分 • 蛇⾝加速、减速 • 暂停游戏 4. 课程定位 • 提⾼⼩⽐特对编程的兴趣 • 对C语⾔语法做⼀个基本的巩固。 • 对游戏开发有兴趣的同学做⼀个启发。 • 项⽬适合：C语⾔学完的同学，有⼀定的代码能⼒，初步接触数据结构中的链表。 5. 技术要点 C语⾔函数、枚举、结构体、动态 内存管理、预处理指令、链表、Win32 API等。 整体的框架： 课前准备：
调好项目适应本地化
了解EasyX的坐标体系
6. 控制台程序 6.1 控制台程序 设置如下：
6.1 相关函数的使用 地区设置为&#34;C&#34;时，库函数按正常⽅式执⾏，⼩数点是⼀个点。 当程序运⾏起来后想改变地区，就只能显⽰调⽤setlocale函数。⽤&#34; &#34;作为第2个参数，调⽤setlocale 函数就可以切换到本地模式，这种模式下程序会适应本地环境。⽐如：切换到我们的本地模式后就⽀持宽字符（汉字）的输出等 &lt;locale.h&gt;本地化
全部来自于EasyX简单图形库
6.2pause 6.3 outtextxy 两个一个输出字符，一个输出字符串
案例：
6.4cleardevice 6.5图片设置 相关用法：
6.6rectangle 6.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-13T13:39:56+08:00">
    <meta property="article:modified_time" content="2024-04-13T13:39:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c语言-＞贪吃蛇实战技巧结合EasyX简单实现页面管理（简单实现）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><img alt="" height="1200" src="https://images2.imgbox.com/c3/a9/ouqDlOSV_o.png" width="1200"></h2> 
<p></p> 
<p>✅作者简介：大家好，我是橘橙黄又青，一个想要与大家共同进步的男人😉😉</p> 
<p>🍎<a href="https://so.csdn.net/so/search?q=%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5&amp;spm=1001.2101.3001.7020" title="个人主页">个人主页</a>：<a href="https://blog.csdn.net/chendemingxxx?spm=1011.2266.3001.5343" title="再无B～U～G-CSDN博客">再无B～U～G-CSDN博客</a></p> 
<h2><span style="color:#1456f0;">1. </span><span style="color:#1f2329;">游戏背景</span></h2> 
<div> 
 <span style="color:#1f2329;">贪吃蛇是久负盛名的游戏，它也和俄罗斯⽅块，扫雷等游戏位列经典游戏的⾏列。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">在编程语⾔的教学中，我们以贪吃蛇为例，从设计到代码实现来提升学⽣的编程能⼒和逻辑能⼒。</span> 
</div> 
<h2><span style="color:#1456f0;">2. </span><span style="color:#1f2329;">游戏效果演⽰</span> </h2> 
<div class="csdn-video-box"> 
 <iframe id="IJso7Zzj-1712909837855" frameborder="0" src="https://live.csdn.net/v/embed/378383" allowfullscreen="true" data-mediaembed="csdn"></iframe> 
 <p>屏幕录制</p> 
</div> 
<h2><span style="color:#1456f0;">3. </span><span style="color:#1f2329;">课程⽬标 </span></h2> 
<div> 
 <span style="color:#1f2329;">使⽤C语⾔在Windows环境的控制台中模拟实现经典⼩游戏贪吃蛇 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">实现基本的功能： </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">贪吃蛇地图绘制 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">蛇吃⻝物的功能 （上、下、左、右⽅向键控制蛇的动作） </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">蛇撞墙死亡 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">蛇撞⾃⾝死亡 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">计算得分 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">蛇⾝加速、减速 </span> 
</div> 
<div> 
 <span style="color:#1456f0;">• </span> 
 <span style="color:#1f2329;">暂停游戏 </span> 
</div> 
<div> 
 <h2><span style="color:#1456f0;">4. </span><span style="color:#1f2329;">课程定位 </span></h2> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">提⾼⼩⽐特对编程的兴趣 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">对C语⾔语法做⼀个基本的巩固。 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">对游戏开发有兴趣的同学做⼀个启发。 </span> 
 </div> 
 <div> 
  <span style="color:#1456f0;">• </span> 
  <span style="color:#1f2329;">项⽬适合：C语⾔学完的同学，有⼀定的代码能⼒，初步接触数据结构中的链表。 </span> 
 </div> 
 <div> 
  <h2><span style="color:#1456f0;">5. </span><span style="color:#1f2329;">技术要点 </span></h2> 
  <div> 
   <span style="color:#1f2329;">C语⾔函数、枚举、结构体、动态</span> 
  </div> 
  <div> 
   <span style="color:#1f2329;">内存管理、预处理指令、链表、Win32 API等。</span> 
  </div> 
  <div> 
   <span style="color:#1f2329;">整体的框架：</span> 
  </div> 
  <div> 
   <img alt="" height="1200" src="https://images2.imgbox.com/ff/b8/cbEIkP2S_o.png" width="1200"> 
  </div> 
 </div> 
</div> 
<p> <img alt="" height="755" src="https://images2.imgbox.com/cb/17/Ci06Bkrg_o.png" width="1034"></p> 
<p>课前准备：</p> 
<p><strong>调好项目适应本地化</strong></p> 
<p><img alt="" height="914" src="https://images2.imgbox.com/f9/c4/OGMoyNWD_o.png" width="1200"></p> 
<p><strong>了解EasyX的坐标体系</strong></p> 
<p><img alt="" height="826" src="https://images2.imgbox.com/2b/7f/OVNcpGa4_o.png" width="975"></p> 
<h2><span style="color:#1456f0;">6. </span><span style="color:#1f2329;">控制台程序 </span></h2> 
<h3><span style="color:#1456f0;">6.1 </span><span style="color:#1f2329;">控制台程序 </span></h3> 
<p><img alt="" height="782" src="https://images2.imgbox.com/15/ff/AK9E6oLi_o.png" width="505"></p> 
<p><img alt="" height="314" src="https://images2.imgbox.com/16/3d/XSEGAhwn_o.png" width="651"></p> 
<p>设置如下：</p> 
<p><img alt="" height="203" src="https://images2.imgbox.com/e4/5b/aRV9cWPn_o.png" width="505"></p> 
<p></p> 
<p></p> 
<h3><strong><span style="color:#4da8ee;">6.1 </span><span style="color:#0d0016;">相关函数的使用</span></strong></h3> 
<p></p> 
<div> 
 <span style="color:#1f2329;">地区设置为"C"时，库函数按正常⽅式执⾏，⼩数点是⼀个点。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">当程序运⾏起来后想改变地区，就只能显⽰调⽤setlocale函数。⽤" "作为第2个参数，调⽤setlocale 函数就可以切换到本地模式，这种模式下程序会适应本地环境。⽐如：切换到我们的本地模式后就⽀持宽字符（汉字）的输出等</span> 
</div> 
<p><span style="color:#1f2329;">&lt;locale.h&gt;本地化</span></p> 
<p></p> 
<div> 
 <img alt="" height="305" src="https://images2.imgbox.com/f2/de/zY0jgi0P_o.png" width="540"> 
</div> 
<p><strong><span style="color:#0d0016;">全部来自于EasyX简单图形库</span></strong></p> 
<h3><strong><span style="color:#4da8ee;">6.2</span><span style="color:#0d0016;">pause</span></strong></h3> 
<p><img alt="" height="683" src="https://images2.imgbox.com/0b/13/lW9pthtP_o.png" width="1139"></p> 
<h3><strong><span style="color:#4da8ee;">6.3</span></strong> outtextxy</h3> 
<p>两个一个输出字符，一个输出字符串</p> 
<p><img alt="" height="463" src="https://images2.imgbox.com/e9/e3/tnTPqeL3_o.png" width="529"></p> 
<p><img alt="" height="508" src="https://images2.imgbox.com/b5/12/uoL37nB6_o.png" width="696"></p> 
<p>案例：</p> 
<p><img alt="" height="316" src="https://images2.imgbox.com/87/da/tIjpoTHB_o.png" width="692"></p> 
<h3><span style="color:#4da8ee;">6.4</span>cleardevice</h3> 
<p><img alt="" height="661" src="https://images2.imgbox.com/84/e0/c6ptjAp5_o.png" width="749"></p> 
<h3><span style="color:#4da8ee;"> 6.5</span>图片设置</h3> 
<p><img alt="" height="763" src="https://images2.imgbox.com/f0/3d/fjTVEl2h_o.png" width="944"></p> 
<p><img alt="" height="142" src="https://images2.imgbox.com/e3/96/GkmOAupn_o.png" width="749"></p> 
<p>相关用法：</p> 
<p> <img alt="" height="796" src="https://images2.imgbox.com/d1/a5/MgfaRmwU_o.png" width="869"></p> 
<p><img alt="" height="985" src="https://images2.imgbox.com/55/c4/urBS7H9w_o.png" width="963"></p> 
<p><img alt="" height="670" src="https://images2.imgbox.com/7f/ec/SpHZXjMV_o.png" width="1027"></p> 
<p><img alt="" height="805" src="https://images2.imgbox.com/0f/72/t8zHK4lQ_o.png" width="922"></p> 
<h3><img alt="" height="245" src="https://images2.imgbox.com/5a/02/0xlGgMlt_o.png" width="761"><span style="color:#4da8ee;"> 6.6</span>rectangle</h3> 
<h2><img alt="" height="417" src="https://images2.imgbox.com/c3/a6/5umu6RmV_o.png" width="404"></h2> 
<p><img alt="" height="510" src="https://images2.imgbox.com/c1/08/TVSaeWi9_o.png" width="660"></p> 
<h2>6.7setlinecolor设置线条颜色</h2> 
<p><img alt="" height="449" src="https://images2.imgbox.com/d1/91/M5od9D2L_o.png" width="672"></p> 
<p></p> 
<h2><span style="color:#1456f0;">7. </span><span style="color:#1f2329;">游戏实现</span></h2> 
<div> 
 <h3><span style="color:#1456f0;">7.1</span><span style="color:#1f2329;">地图坐标 </span></h3> 
 <div> 
  <span style="color:#1f2329;">我们假设实现⼀个棋盘27⾏，58列的棋盘（⾏和列可以根据⾃⼰的情况修改），再围绕地图画出墙，</span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">如下：</span> 
 </div> 
 <div> 
  <img alt="" height="1097" src="https://images2.imgbox.com/b4/83/3vDaRKFZ_o.png" width="1200"> 
 </div> 
</div> 
<h3><span style="color:#1456f0;">7.2 </span><span style="color:#1f2329;">蛇⾝和⻝物</span> </h3> 
<div> 
 <span style="color:#1f2329;">初始化状态，假设蛇的⻓度是5，</span> 
</div> 
<div> 
 <div> 
  <span style="color:#1f2329;">⽐如(24, 5)处开始出现蛇，连续5个节点。注意：蛇的每个节点的x坐标必须是2个倍数，否则可能会出现蛇的⼀个节点有⼀半⼉出现在墙体中，另外⼀般在墙外的现象，坐标不好对⻬。</span> 
  <img alt="" height="195" src="https://images2.imgbox.com/34/ff/fEjPXrlj_o.png" width="428"> 
 </div> 
 <div> 
  <div> 
   <span style="color:#1f2329;">关于⻝物，就是在墙体内随机⽣成⼀个坐标（x坐标必须是1的15倍数），坐标不能和蛇的⾝体重合</span> 
  </div> 
  <h3><span style="color:#1456f0;">7.3 </span><span style="color:#1f2329;">数据结构设计</span></h3> 
  <p></p> 
  <div> 
   <span style="color:#1f2329;">游戏运⾏的过程中，蛇每次吃⼀个⻝物，蛇的⾝体就会变⻓⼀节，如果我们使⽤链表存储蛇的信 </span> 
  </div> 
  <div> 
   <span style="color:#1f2329;">息，那么蛇的每⼀节其实就是链表的每个节点。每个节点只要记录好蛇⾝节点在地图上的坐标就⾏，所以蛇节点结构如下： </span> 
  </div> 
  <div> 
   <img alt="" height="160" src="https://images2.imgbox.com/16/f3/cmLpZOrl_o.png" width="672"> 
  </div> 
 </div> 
</div> 
<div> 
 <span style="color:#1f2329;">要管理整条贪吃蛇，我们再封装⼀个Snake的结构来维护整条贪吃蛇：</span> 
</div> 
<p> <img alt="" height="314" src="https://images2.imgbox.com/70/1a/PcG5oTTR_o.png" width="996"></p> 
<p><span style="color:#1f2329;">蛇的⽅向，可以⼀⼀列举，使⽤枚举</span> </p> 
<p><img alt="" height="217" src="https://images2.imgbox.com/d6/09/wLLE2wo0_o.png" width="544"></p> 
<div> 
 <span style="color:#1f2329;">游戏状态，可以⼀⼀列举，使⽤枚举</span>  
</div> 
<div> 
 <img alt="" height="231" src="https://images2.imgbox.com/f6/c3/JoetC07q_o.png" width="355"> 
</div> 
<div> 
 <h3><span style="color:#1456f0;">7.4 </span><span style="color:#1f2329;">游戏流程设计</span></h3> 
 <p><img alt="" height="418" src="https://images2.imgbox.com/38/b9/6tz6Vww1_o.png" width="926"></p> 
 <h2><span style="color:#1456f0;">8. </span><span style="color:#1f2329;">核⼼逻辑实现分析 </span></h2> 
 <h3><span style="color:#1456f0;">8.1 </span><span style="color:#1f2329;">游戏主逻辑 </span></h3> 
 <p><img alt="" height="645" src="https://images2.imgbox.com/fe/bd/7QHdSvFo_o.png" width="847"></p> 
</div> 
<h3><span style="color:#1456f0;">8.2 </span><span style="color:#1f2329;">游戏开始前面的准备</span> </h3> 
<p><img alt="" height="405" src="https://images2.imgbox.com/4a/92/BOO3c1lG_o.png" width="763"></p> 
<h4><span style="color:#1456f0;">8.2.1 </span><span style="color:#1f2329;">打印欢迎界⾯</span> </h4> 
<p><img alt="" height="535" src="https://images2.imgbox.com/01/73/RLchLu78_o.png" width="928"></p> 
<p></p> 
<p>看看效果：</p> 
<p><img alt="" height="1002" src="https://images2.imgbox.com/21/83/VEWw6hwu_o.png" width="1200"></p> 
<p><img alt="" height="812" src="https://images2.imgbox.com/f3/9a/2oHYpSbq_o.png" width="1200"></p> 
<h4><span style="color:#1456f0;">8.2.2 </span><span style="color:#1f2329;">创建地图</span></h4> 
<div> 
 <span style="color:#1f2329;">打印地图的关键是要算好坐标，才能在想要的位置打印墙体。 </span> 
</div> 
<div> 
 <img alt="" height="636" src="https://images2.imgbox.com/91/ac/zq0szzgZ_o.png" width="686"> 
</div> 
<div>
  看看效果： 
</div> 
<div> 
 <img alt="" height="549" src="https://images2.imgbox.com/86/eb/2tzRzm1Y_o.png" width="982"> 
</div> 
<div> 
 <h4><span style="color:#1456f0;">8.2.3 </span><span style="color:#1f2329;">初始化蛇⾝</span></h4> 
 <p></p> 
 <div> 
  <span style="color:#1f2329;">蛇最开始⻓度为5节，每节对应链表的⼀个节点，蛇⾝的每⼀个节点都有⾃⼰的坐标。 </span> 
 </div> 
 <div> 
  <span style="color:#1f2329;">创建5个节点，然后将每个节点存放在链表中进⾏管理。创建完蛇⾝后，将蛇的每⼀节打印在屏幕上。</span> 
 </div> 
 <div> 
  <img alt="" height="820" src="https://images2.imgbox.com/52/2c/QTXsaWfR_o.png" width="885"> 
 </div> 
 <div> 
  <span style="color:#fe2c24;"><strong>创建完蛇⾝后随便，初始化蛇的其他属性</strong></span> 
 </div> 
 <div></div> 
</div> 
<p><img alt="" height="152" src="https://images2.imgbox.com/bb/1f/KVRDqafV_o.png" width="903"></p> 
<p>蛇的图片是：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/03/64/prFkNDm5_o.jpg" width="1200"></p> 
<h4><img alt="" height="902" src="https://images2.imgbox.com/91/80/ttigZWqv_o.png" width="1200"> <span style="color:#1456f0;">8.2.4 </span><span style="color:#1f2329;">创建第⼀个⻝物</span></h4> 
<p><span style="color:#1f2329;">先随机⽣成⻝物的坐标</span></p> 
<blockquote> 
 <p></p> 
 <div></div> 
 <ol><li><strong><span style="color:#1f2329;">x坐标必须是15的倍数 </span></strong></li><li><strong><span style="color:#1f2329;">⻝物的坐标不能和蛇⾝每个节点的坐标重复 </span></strong></li><li><strong><span style="color:#1f2329;">创建⻝物节点，打印⻝物</span></strong></li></ol> 
</blockquote> 
<p><span style="color:#1f2329;">创建⻝物的函数：CreateFood </span> </p> 
<p><img alt="" height="804" src="https://images2.imgbox.com/a4/69/ZmJo5bCo_o.png" width="954"></p> 
<h3><span style="color:#1456f0;">8.3 </span><span style="color:#1f2329;">游戏运⾏过程</span></h3> 
<p></p> 
<div> 
 <span style="color:#1f2329;">游戏运⾏期间，右侧打印帮助信息，提⽰玩家 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">根据游戏状态检查游戏是否继续，如果是状态是OK，游戏继续，否则游戏结束。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">如果游戏继续，就是检测按键情况，确定蛇下⼀步的⽅向，或者是否加速减速，是否暂停或者退出游戏。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">确定了蛇的⽅向和速度，蛇就可以移动了。 </span> 
</div> 
<div> 
 <img alt="" height="1105" src="https://images2.imgbox.com/6f/b1/0qC36Hgv_o.png" width="847"> 
</div> 
<div> 
 <h4><span style="color:#1456f0;">8.3.1 </span><span style="color:#1f2329;">KEY_PRESS </span></h4> 
 <p><span style="color:#1f2329;">检测按键状态，我们封装了⼀个宏 </span></p> 
 <blockquote> 
  <div> 
   <span style="color:#4078f2;">#</span> 
   <span style="color:#a626a4;">define</span> 
   <span style="color:#4078f2;"> KEY_PRESS(VK) ((GetAsyncKeyState(VK)&amp;0x1) ? 1 : 0)</span> 
  </div> 
 </blockquote> 
</div> 
<h4><span style="color:#1456f0;">8.3.2 </span><span style="color:#1f2329;">PrintHelpInfo</span> 打印规则信息</h4> 
<p> <img alt="" height="320" src="https://images2.imgbox.com/a1/8c/yyyp8kjm_o.png" width="618"></p> 
<p><img alt="" height="230" src="https://images2.imgbox.com/7a/67/whHcnUeK_o.png" width="445"></p> 
<h4><span style="color:#1456f0;">8.3.3 </span><span style="color:#1f2329;">蛇⾝移动</span></h4> 
<p></p> 
<div> 
 <span style="color:#1f2329;">先创建下⼀个节点，根据移动⽅向和蛇头的坐标，蛇移动到下⼀个位置的坐标。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">确定了下⼀个位置后，看下⼀个位置是否是⻝物（NextIsFood），是⻝物就做吃⻝物处理 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">（EatFood），如果不是⻝物则做前进⼀步的处理（NoFood）。 </span> 
</div> 
<div> 
 <span style="color:#1f2329;">蛇⾝移动后，判断此次移动是否会造成撞墙（KillByWall）或者撞上⾃⼰蛇⾝（KillBySelf），从⽽影响游戏的状态。</span> 
</div> 
<div> 
 <img alt="" height="925" src="https://images2.imgbox.com/05/56/Gl6RdDnD_o.png" width="768"> 
</div> 
<h5><span style="color:#1456f0;">8.3.3.1 </span><span style="color:#1f2329;">NextIsFood </span> </h5> 
<p><img alt="" height="195" src="https://images2.imgbox.com/77/18/7WKdIWs5_o.png" width="643"></p> 
<h5><span style="color:#1456f0;">8.3.3.2 </span><span style="color:#1f2329;">EatFood </span></h5> 
<p><img alt="" height="370" src="https://images2.imgbox.com/70/41/XHT9qQyI_o.png" width="646"></p> 
<h5><span style="color:#1456f0;">8.3.3.3 </span><span style="color:#1f2329;">NoFood</span> </h5> 
<div> 
 <span style="color:#1f2329;">将下⼀个节点头插⼊蛇的⾝体，并将之前蛇⾝最后⼀个节点打印为空格，放弃掉蛇⾝的最后⼀个节点 </span> 
</div> 
<div> 
 <img alt="" height="365" src="https://images2.imgbox.com/96/c2/KH05ML1D_o.png" width="736"> 
</div> 
<div> 
 <h5><span style="color:#1456f0;">8.3.3.4 </span><span style="color:#1f2329;">KillByWall</span></h5> 
 <p><img alt="" height="212" src="https://images2.imgbox.com/0d/08/LDORwtb7_o.png" width="434"></p> 
 <h5><span style="color:#1456f0;">8.3.3.5 </span><span style="color:#1f2329;">KillBySelf </span></h5> 
 <p><img alt="" height="232" src="https://images2.imgbox.com/53/08/utKara4Z_o.png" width="678"></p> 
 <h3><span style="color:#1456f0;">8.4 </span><span style="color:#1f2329;">游戏结束</span></h3> 
 <p><span style="color:#1f2329;">戏状态不再是OK（游戏继续）的时候，要告知游戏结束的原因，并且释放蛇⾝节点。</span></p> 
 <p><img alt="" height="620" src="https://images2.imgbox.com/82/9c/tWZd5FCt_o.png" width="748"></p> 
 <h2><span style="color:#1456f0;">9. </span><span style="color:#1f2329;">参考代码 </span></h2> 
 <div> 
  <span style="color:#1f2329;">完整代码实现，分3个⽂件实现 </span> 
 </div> 
 <div> 
  <h3><span style="color:#1f2329;">test.cpp </span></h3> 
  <div> 
   <pre><code class="language-java">#include"snake.h"

void test()
{
	//修改适配本地中文环境
	setlocale(LC_ALL, "");
	bool c = false;
	char str[4] = " ";
	do
	{
		Snake snake = { 0 };
		GameStart(&amp;snake);//游戏开始前的初始化
		GameRun(&amp;snake);//玩游戏的过程
		GameEnd(&amp;snake);//善后的工作
		outtextxy(350, 500, "再来一局吗？(Yes/No):");
		scanf("%s", str);
		c = Determine(str);
	} while (c);
}
int main()
{
	//修改适配本地中文环境
	setlocale(LC_ALL, "");
	test();
	return 0;
}
</code></pre> 
   <p></p> 
  </div> 
  <h3><span style="color:#1f2329;">snake.h </span></h3> 
  <pre><code class="language-java">#pragma once
#define _CRT_SECURE_NO_WARNINGS

#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;locale.h&gt;
#include&lt;windows.h&gt;
#include&lt;stdbool.h&gt;
#include &lt;graphics.h&gt;		
#include &lt;conio.h&gt;


#define KEY_PRESS(VK)  ( (GetAsyncKeyState(VK) &amp; 0x1) ? 1 : 0 )


//蛇默认的起始坐标
#define POS_X 300
#define POS_Y 200
//背景单位
#define SIZE_X 15
#define SIZE_Y 20

//游戏的状态
enum GAME_STATUS
{
	OK = 1,//正常运行
	ESC, //按了ESC键退出，正常退出
	KILL_BY_WALL,//撞墙
	KILL_BY_SELF //撞到自身
};

typedef struct snake {
	int x;
	int y;
	struct snake* next;
}SnakeNode, * pSnakeNode;//结构体指针重命名

//蛇行走的方向
enum DIRECTION
{
	UP = 1,
	DOWN,
	LEFT,
	RIGHT//向右
};

//贪吃蛇应该有的属性
typedef struct Snake
{
	pSnakeNode pSnake;//维护整条蛇的指针，是指向蛇头
	pSnakeNode pFood;//指向食物的指针
	int Score;//当前累积的分数
	int FoodWeight;//一个食物的分数
	int SleepTime;//蛇休眠的时间，休眠的时间越短，蛇的速度越快，休眠的时间越长，蛇的速度越慢
	enum GAME_STATUS status;//游戏当前的状态
	enum DIRECTION dir;//蛇当前走的方向
	//...
}Snake, * pSnake;

//游戏前的初始化
void GameStart(pSnake p);

//打印欢迎信息
void WelcomeToGame();

//绘制地图
void CreateMap();

//初始化蛇
void InitSnake(pSnake ps);

//打印图片
void picture(int x, int y);

//创建食物
void CreateFood(pSnake ps);

//玩游戏的过程
void GameRun(pSnake ps);

//打印帮助(规则)信息
void PrintHelpInfo();

//当前分数情况
void Score(pSnake ps);

//游戏要暂停
void pause();

//蛇走一步
void SnakeMove(pSnake ps);

//下一个坐标是不是食物
bool NextIsFood(pSnake ps, pSnakeNode pNext);

//是食物就吃掉
void EatFood(pSnake ps, pSnakeNode pNext);

//不是食物就正常一步
void NotEatFood(pSnake ps, pSnakeNode pNext);

//检测撞墙
void KillByWall(pSnake ps);

//检测撞到自己
void KillBySelf(pSnake ps);

//结束游戏后的工作
void GameEnd(pSnake ps);


//判断是否再来一局
bool Determine(char str[]);
</code></pre> 
  <div> 
   <h3><span style="color:#1f2329;">snake.cpp</span></h3> 
   <pre><code class="language-java">#include"snake.h"

void GameStart(pSnake ps) {
	//设置控制台信息，窗口大小，窗口名
	initgraph(1300, 720, EX_SHOWCONSOLE);


	//打印欢迎信息
	WelcomeToGame();

	//绘制地图
	CreateMap();

	//初始化蛇
	InitSnake(ps);

	//创建食物
	CreateFood(ps);
}

//打印欢迎信息
void WelcomeToGame() {
	//欢迎信息
	system("title 贪吃蛇");
	outtextxy(500, 350, "欢迎来到贪吃蛇小游戏");
	outtextxy(600, 400, "随意点击屏幕继续. . .");
	//随意点击屏幕
	system("pause");
	
	//清空屏幕，换画面
	cleardevice();

	//功能介绍信息
	outtextxy(400, 350, "1.用 ↑   ↓   ←   → 来控制蛇的移动，F3是加速，F4是减速");
	outtextxy(400, 370, "2.加速能得到更高的分数");
	outtextxy(600, 400, "随意点击屏幕继续. . .");

	//打印尾巴信息
	system("pause");
	//清空桌面
	cleardevice();

}
//绘制地图
void CreateMap() {
	IMAGE img1;
	//玩游戏背景图
	loadimage(&amp;img1, "picture.jpg\\picture.jpg", 900, 700, true);
	//从0，开始画图
	putimage(0, 0, &amp;img1);
	//画线矩形
	setlinecolor(GREEN);
	//rectangle(0, 0, 900, 699);
	//rectangle(3, 3, 897, 697);
	//上
	int i = 0;
	for (i = 0; i &lt;= 900; i += 15)
	{
		rectangle(i, 0, i + 13, 13);
	}
	//下
	for (i = 0; i &lt;= 900; i += 15)
	{
		rectangle(i, 700, i + 13, 700 + 13);
	}
	//左
	for (i = 20; i &lt; 700; i += 20)
	{
		rectangle(0, i , 0 + 13, i + 17);

	}
	//右
	for (i = 1; i &lt;  700; i += 20)
	{
		rectangle(900, i, 900 + 13, i + 17);
	}

}

//初始化蛇
void InitSnake(pSnake ps) {
	//创建5个节点
	pSnakeNode cur = NULL;
	for (int i = 0; i &lt; 5; i++) {
		cur = (pSnakeNode)malloc(sizeof(SnakeNode));
		if (cur == NULL) {
			perror("malloc fail!");
			return;
		}
		cur-&gt;x = POS_X + i * 15;
		cur-&gt;y = POS_Y;
		cur-&gt;next = NULL;
		if (ps-&gt;pSnake == NULL) {
			ps-&gt;pSnake = cur;
		}
		else {
			cur-&gt;next = ps-&gt;pSnake;
			ps-&gt;pSnake = cur;
		}
	}
	//打印蛇的位置
	cur = ps-&gt;pSnake;
	while (cur) {
		picture(cur-&gt;x, cur-&gt;y);
		cur = cur-&gt;next;
	}
	//初始化贪吃蛇其他属性
	ps-&gt;dir = RIGHT;//向右
	ps-&gt;pFood = NULL;
	ps-&gt;Score = 0;
	ps-&gt;FoodWeight = 10;
	ps-&gt;SleepTime = 200;
	ps-&gt;status = OK;
}
//打印蛇身
void picture(int x, int y) {
	IMAGE img1;
	loadimage(&amp;img1, "picture.jpg\\picture2.jpg", SIZE_X, SIZE_Y, true);
	putimage(x, y, &amp;img1);
}

//创建食物
void CreateFood(pSnake ps) {
	pSnakeNode pNext = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pNext == NULL) {
		perror("pNext malloc fail!");
		return;
	}
	int x = 0;
	int y = 0;
circulate:
	do {
		//避免出现在（0，0）
		x = rand() % 871 + 15 ;
		y = rand() % 681 + 20;
	} while (x % 15 != 0 || y % 20 != 0);
	pSnakeNode cur = ps-&gt;pSnake;
	while (cur) {
		if (cur-&gt;x == x &amp;&amp; cur-&gt;y == y) {
			goto circulate;
		}
		cur = cur-&gt;next;
	}
	pNext-&gt;x = x;
	pNext-&gt;y = y;
	pNext-&gt;next = NULL;
	//维护食物
	ps-&gt;pFood = pNext;

	//打印食物
	IMAGE img3;
	loadimage(&amp;img3, "picture.jpg\\R-C (1).jpg", 15, 20, true);
	putimage(x, y, &amp;img3);

}
//玩游戏的过程
void GameRun(pSnake ps) {
	//打印帮助(规则)信息
	PrintHelpInfo();

	do {
		//当前分数情况
		Score(ps);
		//向上
		if (KEY_PRESS(VK_UP) &amp;&amp; ps-&gt;dir != DOWN) {
			ps-&gt;dir = UP;
		}
		//向下
		else if (KEY_PRESS(VK_DOWN) &amp;&amp; ps-&gt;dir != UP) {
			ps-&gt;dir = DOWN;
		}
		//向左
		else if (KEY_PRESS(VK_LEFT) &amp;&amp; ps-&gt;dir != RIGHT) {
			ps-&gt;dir = LEFT;
		}
		//向右
		else if (KEY_PRESS(VK_RIGHT) &amp;&amp; ps-&gt;dir != LEFT) {
			ps-&gt;dir = RIGHT;
		}
		//暂停
		else if (KEY_PRESS(VK_SPACE)) {
			//游戏要暂停
			pause();
		}
		//加速
		else if (KEY_PRESS(VK_F3)) {
			if (ps-&gt;FoodWeight &lt; 16) {
				ps-&gt;FoodWeight += 2;
				ps-&gt;SleepTime -= 50;
			}
		}
		//减速
		else if (KEY_PRESS(VK_F4)) {
			if (ps-&gt;FoodWeight &gt; 4) {
				ps-&gt;FoodWeight -= 2;
				ps-&gt;SleepTime += 50;

			}
		}
		//退出游戏
		else if (KEY_PRESS(VK_ESCAPE)) {
			ps-&gt;status = ESC;
		}
		//走一步
		SnakeMove(ps);

		//休眠
		Sleep(ps-&gt;SleepTime);

	} while (ps-&gt;status == OK);

}

//打印帮助(规则)信息
void PrintHelpInfo() {
	//规则
	setlinecolor(MAGENTA);
	rectangle(918, 50, 1250, 180);
	outtextxy(930, 60, "1.不能穿墙，不能咬到自己");
	outtextxy(930, 80, "2.用 ↑.↓.←.→ 来控制蛇的移动");
	outtextxy(930, 100, "3.F3是加速，F4是减速");
	outtextxy(930, 120, "4.一个食物基础分10分");
	outtextxy(930, 140, "5.加速一次加2分，最大加6分");
	outtextxy(930, 160, "6.减速一次减2分，最大减6分");

}
//当前分数情况
void Score(pSnake ps) {
	char num1[10];
	char num2[10];
	sprintf(num1, "%d", ps-&gt;Score);
	sprintf(num2, "%d", ps-&gt;FoodWeight);
	outtextxy(930, 300, "当前总积分：");
	outtextxy(1020, 300, num1);
	outtextxy(930, 340, "当前一个食物积分：");
	outtextxy(1065, 340, num2);
}
//游戏要暂停
void pause() {
	while (true) {

		if (KEY_PRESS(VK_SPACE)) {
			break;
		}
		Sleep(200);
	}
}
//蛇走一步
void SnakeMove(pSnake ps) {
	//生成下一个走过的节点
	pSnakeNode pNext = (pSnakeNode)malloc(sizeof(SnakeNode));
	if (pNext == NULL) {
		perror("malloc tail");
		return;
	}
	pNext-&gt;next = NULL;
	//向上
	if (ps-&gt;dir == UP) {
		pNext-&gt;x = ps-&gt;pSnake-&gt;x;
		pNext-&gt;y = ps-&gt;pSnake-&gt;y - 20;
	}
	//向下
	else if (ps-&gt;dir == DOWN) {
		pNext-&gt;x = ps-&gt;pSnake-&gt;x;
		pNext-&gt;y = ps-&gt;pSnake-&gt;y + 20;

	}
	//向右
	else if (ps-&gt;dir == LEFT) {
		pNext-&gt;x = ps-&gt;pSnake-&gt;x - 15;
		pNext-&gt;y = ps-&gt;pSnake-&gt;y;
	}
	//向左
	else if (ps-&gt;dir == RIGHT) {
		pNext-&gt;x = ps-&gt;pSnake-&gt;x + 15;
		pNext-&gt;y = ps-&gt;pSnake-&gt;y;
	}

	//下一个坐标处是否是食物
	if (NextIsFood(ps, pNext))
	{
		//是食物就吃掉
		EatFood(ps, pNext);
	}
	else
	{
		//不是食物就正常一步
		NotEatFood(ps, pNext);
	}
	//检测撞墙
	KillByWall(ps);

	//检测撞到自己
	KillBySelf(ps);
}
//判断下一个坐标是不是食物
bool NextIsFood(pSnake ps, pSnakeNode pNext) {
	if (ps-&gt;pFood-&gt;x == pNext-&gt;x &amp;&amp; ps-&gt;pFood-&gt;y == pNext-&gt;y) {
		return true;
	}
	else {
		return false;
	}
}

//是食物就吃掉
void EatFood(pSnake ps, pSnakeNode pNext) {
	//头插
	pNext-&gt;next = ps-&gt;pSnake;
	ps-&gt;pSnake = pNext;

	//打印蛇
	pSnakeNode cur = ps-&gt;pSnake;
	while (cur) {
		picture(cur-&gt;x, cur-&gt;y);S
		cur = cur-&gt;next;
	}
	//改变分数
	ps-&gt;Score += ps-&gt;FoodWeight;

	//释放旧的食物
	free(ps-&gt;pFood);

	//重新生成食物
	CreateFood(ps);
}
//不是食物就正常一步
void NotEatFood(pSnake ps, pSnakeNode pNext) {
	//头插
	pNext-&gt;next = ps-&gt;pSnake;
	ps-&gt;pSnake = pNext;

	pSnakeNode cur = ps-&gt;pSnake;
	while (cur-&gt;next-&gt;next) {
		picture(cur-&gt;x, cur-&gt;y);
		cur = cur-&gt;next;
	}
	//把尾巴打印成背景图片	
	IMAGE img4;
	loadimage(&amp;img4, "picture.jpg\\picture4.jpg", SIZE_X, SIZE_Y, true);
	putimage(cur-&gt;next-&gt;x, cur-&gt;next-&gt;y, &amp;img4);
	//释放尾部
	free(cur-&gt;next);
	cur-&gt;next = NULL;
}
//检测撞墙
void KillByWall(pSnake ps) {
	if (ps-&gt;pSnake-&gt;x == 885 ||
		ps-&gt;pSnake-&gt;y == 680 ||
		ps-&gt;pSnake-&gt;x == 15 ||
		ps-&gt;pSnake-&gt;y == 20)
	{
		ps-&gt;status = KILL_BY_WALL;
		return;
	}
}
//检测撞到自己
void KillBySelf(pSnake ps) {
	pSnakeNode cur = ps-&gt;pSnake-&gt;next;
	while (cur) {
		if (cur-&gt;x == ps-&gt;pSnake-&gt;x &amp;&amp; cur-&gt;y == ps-&gt;pSnake-&gt;y)
		{
			ps-&gt;status = KILL_BY_SELF;
			return;
		}
		cur = cur-&gt;next;
	}
}
//结束游戏后的工作
void GameEnd(pSnake ps)
{
	
	switch (ps-&gt;status)
	{
	case ESC:
		outtextxy(330, 300, "主动退出游戏，正常退出\n");
		break;
	case KILL_BY_WALL:
		outtextxy(330, 300, "很遗憾，撞墙了，游戏结束\n");
		break;
	case KILL_BY_SELF:
		outtextxy(330, 300, "很遗憾，咬到自己了，游戏结束\n");
		break;
	}
	//释放贪吃蛇的链表资源
	pSnakeNode cur = ps-&gt;pSnake;
	pSnakeNode del = NULL;

	while (cur)
	{
		del = cur;
		cur = cur-&gt;next;
		free(del);
	}
	//把最后打印的食物打印成背景图片
	IMAGE img4;
	loadimage(&amp;img4, "picture.jpg\\picture4.jpg", SIZE_X, SIZE_Y, true);
	putimage(ps-&gt;pFood-&gt;x, ps-&gt;pFood-&gt;y, &amp;img4);
	free(ps-&gt;pFood);
	ps = NULL;
}

//判断是否再来一局
bool Determine(char str[]) {
	char arr[4] = "Yes";
	int ret = strcmp(str, arr);
	if (ret == 0) {
		return true;
	}
	else {
		return false;
	}
}</code></pre> 
   <p>好啦今天的分享就到这里了，感谢观看。</p> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9964bab08234ae827fe4bec43f51002e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【JAVASE】带你了解String类的常用方法和常见操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4bbe7250a690579b61c652e88b22fa66/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【数据结构与算法】：10道链表经典OJ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>