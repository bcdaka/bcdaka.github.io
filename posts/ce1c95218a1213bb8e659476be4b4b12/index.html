<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL篇五：基本查询 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ce1c95218a1213bb8e659476be4b4b12/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="MySQL篇五：基本查询">
  <meta property="og:description" content="文章目录 前言1. Create1.1 单行数据 &#43; 全列插入1.2 多行数据 &#43; 指定列插入1.3 插入否则更新1.4 替换 2. Retrieve2.1 SELECT 列2.1.1 全列查询2.1.2 指定列查询2.1.3 查询字段为表达式2.1.4 为查询结果指定别名2.1.5 结果去重 2.2 WHERE 条件2.2.1 练习 2.3 结果排序2.3.1 练习 2.4 筛选分页结果 3. Update3.1 练习 4. Delete4.1 练习4.2 截断表 5. 插入查询结果6. 聚合函数6.1 练习 7. group by子句的使用7.1 练习 前言 表的增删改查：CRUD : Create(创建), Retrieve(读取)，Update(更新)，Delete（删除）。
1. Create 语法：
INSERT [INTO] table_name [(column [, column] ...)] VALUES (value_list) [, (value_list)] ... value_list: value, [, value] ... 样例：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-09T19:13:34+08:00">
    <meta property="article:modified_time" content="2024-07-09T19:13:34+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL篇五：基本查询</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#1_Create_3" rel="nofollow">1. Create</a></li><li><ul><li><a href="#11____25" rel="nofollow">1.1 单行数据 + 全列插入</a></li><li><a href="#12____30" rel="nofollow">1.2 多行数据 + 指定列插入</a></li><li><a href="#13__37" rel="nofollow">1.3 插入否则更新</a></li><li><a href="#14__57" rel="nofollow">1.4 替换</a></li></ul> 
  </li><li><a href="#2_Retrieve_66" rel="nofollow">2. Retrieve</a></li><li><ul><li><a href="#21_SELECT__91" rel="nofollow">2.1 SELECT 列</a></li><li><ul><li><a href="#211__92" rel="nofollow">2.1.1 全列查询</a></li><li><a href="#212__101" rel="nofollow">2.1.2 指定列查询</a></li><li><a href="#213__107" rel="nofollow">2.1.3 查询字段为表达式</a></li><li><a href="#214__123" rel="nofollow">2.1.4 为查询结果指定别名</a></li><li><a href="#215__133" rel="nofollow">2.1.5 结果去重</a></li></ul> 
   </li><li><a href="#22_WHERE__144" rel="nofollow">2.2 WHERE 条件</a></li><li><ul><li><a href="#221__164" rel="nofollow">2.2.1 练习</a></li></ul> 
   </li><li><a href="#23__265" rel="nofollow">2.3 结果排序</a></li><li><ul><li><a href="#231__277" rel="nofollow">2.3.1 练习</a></li></ul> 
   </li><li><a href="#24__331" rel="nofollow">2.4 筛选分页结果</a></li></ul> 
  </li><li><a href="#3_Update_365" rel="nofollow">3. Update</a></li><li><ul><li><a href="#31__372" rel="nofollow">3.1 练习</a></li></ul> 
  </li><li><a href="#4_Delete_399" rel="nofollow">4. Delete</a></li><li><ul><li><a href="#41__405" rel="nofollow">4.1 练习</a></li><li><a href="#42__417" rel="nofollow">4.2 截断表</a></li></ul> 
  </li><li><a href="#5__432" rel="nofollow">5. 插入查询结果</a></li><li><a href="#6__448" rel="nofollow">6. 聚合函数</a></li><li><ul><li><a href="#61__456" rel="nofollow">6.1 练习</a></li></ul> 
  </li><li><a href="#7_group_by_504" rel="nofollow">7. group by子句的使用</a></li><li><ul><li><a href="#71__520" rel="nofollow">7.1 练习</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>  表的增删改查：CRUD : Create(创建), Retrieve(读取)，Update(更新)，Delete（删除）。</p> 
<h2><a id="1_Create_3"></a>1. Create</h2> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> table_name
	<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
	<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value_list<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>value_list<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

value_list: <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>  样例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> students <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	sn <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">COMMENT</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	qq <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="11____25"></a>1.1 单行数据 + 全列插入</h3> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token string">'唐三藏'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="12____30"></a>1.2 多行数据 + 指定列插入</h3> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sn<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> 
<span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">20001</span><span class="token punctuation">,</span> <span class="token string">'曹孟德'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token number">20002</span><span class="token punctuation">,</span> <span class="token string">'孙仲谋'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="13__37"></a>1.3 插入否则更新</h3> 
<p>  如果插入的数据发生冲突，则进行修正。<br>   可以选择性的进行同步更新操作 语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">ON</span> <span class="token keyword">DUPLICATE</span> <span class="token keyword">KEY</span> <span class="token keyword">UPDATE</span>
	<span class="token keyword">column</span> <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span> <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>  样例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sn<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10010</span><span class="token punctuation">,</span> <span class="token string">'唐大师'</span><span class="token punctuation">)</span>
	<span class="token keyword">ON</span> <span class="token keyword">DUPLICATE</span> <span class="token keyword">KEY</span> <span class="token keyword">UPDATE</span> sn <span class="token operator">=</span> <span class="token number">10010</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'唐大师'</span><span class="token punctuation">;</span>
</code></pre> 
<p>  解释：如果(100, 10010, ‘唐大师’)发生数据冲突，则将已插入的值修改为 sn = 10010, name = ‘唐大师’。比如说此时数据库中有(100, 9999, ‘唐玄奘’)，由于id是主键，新插入数据的id发生了冲突，那么就会将(100, 9999, ‘唐玄奘’)改为(100, 10010, ‘唐大师’)。</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> ROW_COUNT<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//通过 MySQL 函数获取受到影响的数据行数</span>
</code></pre> 
<h3><a id="14__57"></a>1.4 替换</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 主键 或者 唯一键 没有冲突，则直接插入；</span>
<span class="token comment">-- 主键 或者 唯一键 如果冲突，则删除后再插入</span>
<span class="token keyword">REPLACE</span> <span class="token keyword">INTO</span> students <span class="token punctuation">(</span>sn<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">20001</span><span class="token punctuation">,</span> <span class="token string">'曹阿瞒'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> 
<h2><a id="2_Retrieve_66"></a>2. Retrieve</h2> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span>
	<span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> {<!-- --><span class="token operator">*</span> <span class="token operator">|</span> {<!-- --><span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>}
	<span class="token punctuation">[</span><span class="token keyword">FROM</span> table_name<span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token keyword">LIMIT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>  样例：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 创建表结构</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> exam_result <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'同学姓名'</span><span class="token punctuation">,</span>
	chinese <span class="token keyword">float</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span> <span class="token keyword">COMMENT</span> <span class="token string">'语文成绩'</span><span class="token punctuation">,</span>
	math <span class="token keyword">float</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span> <span class="token keyword">COMMENT</span> <span class="token string">'数学成绩'</span><span class="token punctuation">,</span>
	english <span class="token keyword">float</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span> <span class="token keyword">COMMENT</span> <span class="token string">'英语成绩'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="21_SELECT__91"></a>2.1 SELECT 列</h3> 
<h4><a id="211__92"></a>2.1.1 全列查询</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 通常情况下不建议使用 * 进行全列查询</span>
<span class="token comment">-- 1. 查询的列越多，意味着需要传输的数据量越大；</span>
<span class="token comment">-- 2. 可能会影响到索引的使用。（索引待后面讲解）</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="212__101"></a>2.1.2 指定列查询</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 指定列的顺序不需要按定义表的顺序来</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> english <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="213__107"></a>2.1.3 查询字段为表达式</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 表达式不包含字段</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token number">10</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 表达式包含一个字段</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> english <span class="token operator">+</span> <span class="token number">10</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 表达式包含多个字段</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="214__123"></a>2.1.4 为查询结果指定别名</h4> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token keyword">AS</span><span class="token punctuation">]</span> alias_name <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
</code></pre> 
<p>  样例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english 总分 <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="215__133"></a>2.1.5 结果去重</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 98 分重复了</span>
<span class="token keyword">SELECT</span> math <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 去重结果</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> math <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="22_WHERE__144"></a>2.2 WHERE 条件</h3> 
<p>  比较运算符：</p> 
<table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>&gt;, &gt;=, &lt;, &lt;=</td><td>大于，大于等于，小于，小于等于</td></tr><tr><td>=</td><td>等于，NULL 不安全，例如 NULL = NULL 的结果是 NULL</td></tr><tr><td>&lt;=&gt;</td><td>等于，NULL 安全，例如 NULL &lt;=&gt; NULL 的结果是 TRUE(1)</td></tr><tr><td>!=, &lt;&gt;</td><td>不等于</td></tr><tr><td>BETWEEN a0 AND a1</td><td>范围匹配，[a0, a1]，如果 a0 &lt;= value &lt;= a1，返回 TRUE(1)</td></tr><tr><td>IN (option, …)</td><td>如果是 option 中的任意一个，返回 TRUE(1)</td></tr><tr><td>IS NULL</td><td>是 NULL</td></tr><tr><td>IS NOT NULL</td><td>不是 NULL</td></tr><tr><td>LIKE</td><td>模糊匹配。% 表示任意多个（包括 0 个）任意字符；_ 表示任意一个字符</td></tr></tbody></table> 
<p>  逻辑运算符：</p> 
<table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>AND</td><td>多个条件必须都为 TRUE(1)，结果才是 TRUE(1)</td></tr><tr><td>OR</td><td>任意一个条件为 TRUE(1), 结果为 TRUE(1)</td></tr><tr><td>NOT</td><td>条件为 TRUE(1)，结果为 FALSE(0)</td></tr></tbody></table> 
<h4><a id="221__164"></a>2.2.1 练习</h4> 
<p>  <strong>英语不及格的同学及英语成绩 ( &lt; 60 )</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 基本比较</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> english <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> english <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>语文成绩在 [80, 90] 分的同学及语文成绩</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 使用 AND 进行条件连接</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> chinese <span class="token operator">&gt;=</span> <span class="token number">80</span> <span class="token operator">AND</span> chinese <span class="token operator">&lt;=</span> <span class="token number">90</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 使用 BETWEEN ... AND ... 条件</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> chinese <span class="token operator">BETWEEN</span> <span class="token number">80</span> <span class="token operator">AND</span> <span class="token number">90</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>数学成绩是 58 或者 59 或者 98 或者 99 分的同学及数学成绩</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 使用 OR 进行条件连接</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> math <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">WHERE</span> math <span class="token operator">=</span> <span class="token number">58</span>
	<span class="token operator">OR</span> math <span class="token operator">=</span> <span class="token number">59</span>
	<span class="token operator">OR</span> math <span class="token operator">=</span> <span class="token number">98</span>
	<span class="token operator">OR</span> math <span class="token operator">=</span> <span class="token number">99</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 使用 IN 条件</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> math <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> math <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>姓孙的同学及孙某同学</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- % 匹配任意多个（包括 0 个）任意字符</span>
<span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'孙%'</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- _ 匹配严格的一个任意字符</span>
<span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'孙_'</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>语文成绩好于英语成绩的同学</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- WHERE 条件中比较运算符两侧都是字段</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese<span class="token punctuation">,</span> english <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> chinese <span class="token operator">&gt;</span> english<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>总分在 200 分以下的同学</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- WHERE 条件中使用表达式</span>
<span class="token comment">-- 别名不能用在 WHERE 条件中</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english 总分 <span class="token keyword">FROM</span> exam_result
<span class="token keyword">WHERE</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english <span class="token operator">&lt;</span> <span class="token number">200</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>语文成绩 &gt; 80 并且不姓孙的同学</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- AND 与 NOT 的使用</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">WHERE</span> chinese <span class="token operator">&gt;</span> <span class="token number">80</span> <span class="token operator">AND</span> name <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">'孙%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>孙某同学，否则要求总成绩 &gt; 200 并且 语文成绩 &lt; 数学成绩 并且 英语成绩 &gt; 80</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 综合性查询</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english 总分
<span class="token keyword">FROM</span> exam_result
<span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'孙_'</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>
	chinese <span class="token operator">+</span> math <span class="token operator">+</span> english <span class="token operator">&gt;</span> <span class="token number">200</span> <span class="token operator">AND</span> chinese <span class="token operator">&lt;</span> math <span class="token operator">AND</span> english <span class="token operator">&gt;</span> <span class="token number">80</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>NULL 的查询</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 查询 qq 号已知的同学姓名</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> qq <span class="token keyword">FROM</span> students <span class="token keyword">WHERE</span> qq <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- NULL 和 NULL 的比较，= 和 &lt;=&gt; 的区别</span>
<span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+----------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+----------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> 		  <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+----------+</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------+------------+------------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">&lt;=&gt;</span> <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+------------+------------+</span>
<span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> <span class="token number">0</span>          <span class="token operator">|</span> <span class="token number">0</span>          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+------------+------------+</span>
</code></pre> 
<p>  如果使用=让null和其他值进行比较，结果都是null。如果使用&lt;=&gt;让null进行比较，只有 NULL &lt;=&gt; NULL的结果为1（真），其他都为0（假），因为null和0是不一样的。</p> 
<h3><a id="23__265"></a>2.3 结果排序</h3> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- ASC 为升序（从小到大）</span>
<span class="token comment">-- DESC 为降序（从大到小）</span>
<span class="token comment">-- 默认为 ASC</span>

<span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>注意：没有 ORDER BY 子句的查询，返回的顺序是未定义的，永远不要依赖这个顺序。</strong></p> 
<h4><a id="231__277"></a>2.3.1 练习</h4> 
<p>  <strong>同学及数学成绩，按数学成绩升序显示</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> math <span class="token keyword">FROM</span> exam_result <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> math<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>同学及 qq 号，按 qq 号排序显示</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- NULL 视为比任何值都小，升序出现在最上面</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> qq <span class="token keyword">FROM</span> students <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> qq<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- NULL 视为比任何值都小，降序出现在最下面</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> qq <span class="token keyword">FROM</span> students <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> qq <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>查询同学各门成绩，依次按 数学降序，英语升序，语文升序的方式显示</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 多字段排序，排序优先级随书写顺序</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> math <span class="token keyword">DESC</span><span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>查询同学及总分，由高到低</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese <span class="token operator">+</span> english <span class="token operator">+</span> math <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> chinese <span class="token operator">+</span> english <span class="token operator">+</span> math <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- ORDER BY 子句中可以使用列别名</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> chinese <span class="token operator">+</span> english <span class="token operator">+</span> math 总分 <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 总分 <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>查询姓孙的同学或者姓曹的同学数学成绩，结果按数学成绩由高到低显示</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 结合 WHERE 子句 和 ORDER BY 子句</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> math <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'孙%'</span> <span class="token operator">OR</span> name <span class="token operator">LIKE</span> <span class="token string">'曹%'</span>
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> math <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 错的，在where后面不允许使用别名</span>
<span class="token keyword">select</span> chinese<span class="token operator">+</span>math <span class="token keyword">as</span> total <span class="token keyword">from</span> exam_result <span class="token keyword">where</span> total <span class="token operator">&gt;</span> <span class="token number">150</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> chinese<span class="token operator">+</span>math <span class="token keyword">as</span> total <span class="token keyword">from</span> exam_result <span class="token keyword">where</span> chinese<span class="token operator">+</span>math <span class="token operator">&gt;</span> <span class="token number">150</span><span class="token punctuation">;</span>

<span class="token comment">-- 正确的，order by 后面可以使用别名，为什么呢？</span>
<span class="token keyword">select</span> chinese<span class="token operator">+</span>math <span class="token keyword">as</span> total <span class="token keyword">from</span> exam_result <span class="token keyword">order</span> <span class="token keyword">by</span> total <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="24__331"></a>2.4 筛选分页结果</h3> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 起始下标为 0</span>

<span class="token comment">-- 从 s 开始，筛选 n 条结果</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token keyword">LIMIT</span> s<span class="token punctuation">,</span> n

<span class="token comment">-- 从 0 开始，筛选 n 条结果</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token keyword">LIMIT</span> n<span class="token punctuation">;</span>
<span class="token punctuation">;</span>
<span class="token comment">-- 从 s 开始，筛选 n 条结果，比第二种用法更明确，建议使用</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token keyword">LIMIT</span> n <span class="token keyword">OFFSET</span> s<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>建议：对未知表进行查询时，最好加一条 LIMIT 1，避免因为表中数据过大，查询全表数据导致数据库卡死，按 id 进行分页，每页 3 条记录，分别显示 第 1、2、3 页</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 第 1 页</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id <span class="token keyword">LIMIT</span> <span class="token number">3</span> <span class="token keyword">OFFSET</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 第 2 页</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id <span class="token keyword">LIMIT</span> <span class="token number">3</span> <span class="token keyword">OFFSET</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 第 3 页，如果结果不足 3 个，不会有影响</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> math<span class="token punctuation">,</span> english<span class="token punctuation">,</span> chinese <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id <span class="token keyword">LIMIT</span> <span class="token number">3</span> <span class="token keyword">OFFSET</span> <span class="token number">6</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="3_Update_365"></a>3. Update</h2> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> <span class="token keyword">column</span> <span class="token operator">=</span> expr <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span> <span class="token operator">=</span> expr <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
	<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="31__372"></a>3.1 练习</h3> 
<p>  <strong>将孙悟空同学的数学成绩变更为 80 分</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> exam_result <span class="token keyword">SET</span> math <span class="token operator">=</span> <span class="token number">80</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'孙悟空'</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>将曹孟德同学的数学成绩变更为 60 分，语文成绩变更为 70 分</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> exam_result <span class="token keyword">SET</span> math <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">,</span> chinese <span class="token operator">=</span> <span class="token number">70</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'曹孟德'</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>将总成绩倒数前三的 3 位同学的数学成绩加上 30 分</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 数据更新，不支持 math += 30 这种语法</span>
<span class="token keyword">UPDATE</span> exam_result <span class="token keyword">SET</span> math <span class="token operator">=</span> math <span class="token operator">+</span> <span class="token number">30</span>
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english <span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">-- 思考：这里还可以按总分升序排序取前 3 个么？</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> math<span class="token punctuation">,</span> chinese <span class="token operator">+</span> math <span class="token operator">+</span> english 总分 <span class="token keyword">FROM</span> exam_result
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 总分 <span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>将所有同学的语文成绩更新为原来的 2 倍</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> exam_result <span class="token keyword">SET</span> chinese <span class="token operator">=</span> chinese <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="4_Delete_399"></a>4. Delete</h2> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> 
<h3><a id="41__405"></a>4.1 练习</h3> 
<p>   <strong>删除孙悟空同学的考试成绩</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'孙悟空'</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>删除整张表数据</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> for_delete<span class="token punctuation">;</span>
</code></pre> 
<p>  清除表数据，auto_increment并不会变为0，依旧是清楚前的大小。截断表会清除auto_increment。</p> 
<h3><a id="42__417"></a>4.2 截断表</h3> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">TRUNCATE</span> <span class="token punctuation">[</span><span class="token keyword">TABLE</span><span class="token punctuation">]</span> table_name
</code></pre> 
<p>  <strong>注意：这个操作慎用</strong></p> 
<ol><li>只能对整表操作，不能像 DELETE 一样针对部分数据操作；</li><li>实际上 MySQL 不对数据操作，所以比 DELETE 更快，但是TRUNCATE在删除数据的时候，并不经过真正的事物，所以无法回滚</li><li>会重置 AUTO_INCREMENT 项</li></ol> 
<pre><code class="prism language-sql"><span class="token comment">-- 截断整表数据，注意影响行数是 0，所以实际上没有对数据真正操作</span>
<span class="token keyword">TRUNCATE</span> for_truncate<span class="token punctuation">;</span>
</code></pre> 
<h2><a id="5__432"></a>5. 插入查询结果</h2> 
<p>  语法：</p> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">column</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token keyword">column</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">-- 将 duplicate_table 的去重数据插入到 no_duplicate_table</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> no_duplicate_table <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> duplicate_table<span class="token punctuation">;</span>

<span class="token comment">-- 通过重命名表，实现原子的去重操作</span>
<span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> duplicate_table <span class="token keyword">TO</span> old_duplicate_table<span class="token punctuation">,</span>
no_duplicate_table <span class="token keyword">TO</span> duplicate_table<span class="token punctuation">;</span>
</code></pre> 
<h2><a id="6__448"></a>6. 聚合函数</h2> 
<table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>COUNT([DISTINCT] expr)</td><td>返回查询到的数据的数量</td></tr><tr><td>SUM([DISTINCT] expr)</td><td>返回查询到的数据的 总和，不是数字没有意义</td></tr><tr><td>AVG([DISTINCT] expr)</td><td>返回查询到的数据的 平均值，不是数字没有意义</td></tr><tr><td>MAX([DISTINCT] expr)</td><td>返回查询到的数据的 最大值，不是数字没有意义</td></tr><tr><td>MIN([DISTINCT] expr)</td><td>返回查询到的数据的 最小值，不是数字没有意义</td></tr></tbody></table> 
<h3><a id="61__456"></a>6.1 练习</h3> 
<p>  <strong>统计班级共有多少同学</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 使用 * 做统计，不受 NULL 影响</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> students<span class="token punctuation">;</span>

<span class="token comment">-- 使用表达式做统计</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> students<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>统计班级收集的 qq 号有多少</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- NULL 不会计入结果</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>qq<span class="token punctuation">)</span> <span class="token keyword">FROM</span> students<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>统计本次考试的数学成绩分数个数</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- COUNT(math) 统计的是全部成绩</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>

<span class="token comment">-- COUNT(DISTINCT math) 统计的是去重成绩数量</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>统计数学成绩总分</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>

<span class="token comment">-- 不及格 &lt; 60 的总分，没有结果，返回 NULL</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> math <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>统计平均总分</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>chinese <span class="token operator">+</span> math <span class="token operator">+</span> english<span class="token punctuation">)</span> 平均总分 <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>返回英语最高分</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>english<span class="token punctuation">)</span> <span class="token keyword">FROM</span> exam_result<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>返回 &gt; 70 分以上的数学最低分</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">FROM</span> exam_result <span class="token keyword">WHERE</span> math <span class="token operator">&gt;</span> <span class="token number">70</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="7_group_by_504"></a>7. group by子句的使用</h2> 
<p>  <strong>分组，聚合统计</strong><br>   在select中使用group by 子句可以对指定列进行分组查询：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token keyword">column</span><span class="token punctuation">;</span>
</code></pre> 
<p>样例：<br>   准备工作，创建一个雇员信息表（来自oracle 9i的经典测试表）</p> 
<ul><li>EMP员工表</li><li>DEPT部门表</li><li>SALGRADE工资等级表</li></ul> 
<p>  group by —— 指定列名，实际分组，是用该列的不同行的数据来进行分组。分组的条件depton（下面的第一个例子），组内一定是相同的，是可以被聚合压缩的。<br>   分组，就是把一组按照条件拆分成了多个组，进行各自组内的统计。分组（“分表”），就是把一长表按照条件在逻辑上拆成了多个元素，然后分别对各自的子表进行聚合统计。</p> 
<h3><a id="71__520"></a>7.1 练习</h3> 
<p>  <strong>如何显示每个部门的平均工资和最高工资</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> EMP <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
</code></pre> 
<p>  <strong>显示每个部门的每种岗位的平均工资和最低工资</strong></p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span>job<span class="token punctuation">,</span> deptno <span class="token keyword">from</span> EMP <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">,</span> job<span class="token punctuation">;</span>
</code></pre> 
<p>  只有分组之后的信息才能卸载select后面，在上面也就是只有depton和job可以写在select后面。<br>   <strong>显示平均工资低于2000的部门和它的平均工资</strong><br>   1. 统计各个部门的平均工资</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> EMP <span class="token keyword">group</span> <span class="token keyword">by</span> deptno
</code></pre> 
<p>  2. having和group by配合使用，对group by结果进行过滤</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> myavg <span class="token keyword">from</span> EMP <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> myavg<span class="token operator">&lt;</span><span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token comment">--having经常和group by搭配使用，作用是对分组进行筛选，作用有些像where</span>
</code></pre> 
<p>  having 和 where区别理解？执行顺序，构建对 “结果” 的理解。<br>   where是对具体的一列进行筛选，having是对分组聚合后的结果进行筛选。条件筛选的阶段是不同的。<br>   不要单纯的认为，只有磁盘上的表结构导入到MySQL，真实存在的表，才叫做表。在MySQL中间筛选出来的表，包括最终的结果，在我看来都是逻辑上的表。</p> 
<p><strong>面试题：SQL查询中各个关键字的执行先后顺序 from &gt; on&gt; join &gt; where &gt; group by &gt; with &gt; having &gt; select&gt; distinct &gt; order by &gt; limit</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b84bbcec3ddbf97c58b0049b105dbcba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Jenkins安装、配置、部署springboot项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1ac26de0b8f4ec4ad656fe45877813f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HTML 学习指南：从入门到精通</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>