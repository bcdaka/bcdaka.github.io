<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>05 HTTP &amp; Tomcat &amp; Servlet - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ab1223db435bc98d082a995fa62480fe/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="05 HTTP & Tomcat & Servlet">
  <meta property="og:description" content="文章目录 HTTP1、简介2、请求数据格式3、响应数据格式 Tomcat1、简介2、基本使用3、Maven创建Web项目4、IDEA使用Tomcat Servlet1、简介2、方法介绍3、体系结构4、urlPattern配置5、XML配置 HTTP 1、简介 HTTP概念 HyperText Transfer Protocol，超文本传输协议，规定了浏览器和服务器之间数据传输的规则 数据传输的规则指的是请求数据和响应数据需要按照指定的格式进行传输如果想知道具体的格式，可以打开浏览器，点击F12打开开发者工具，点击Network来查看某一次请求的请求数据和响数据具体的格式内容在浏览器中如果看不到上述内容，需要清除浏览器的浏览数据。chrome浏览器可以使用ctrl&#43;shift&#43;Del进行清除所以学习HTTP主要就是学习请求和响应数据的具体格式内容 HTTP协议特点 基于TCP协议: 面向连接，安全
TCP是一种面向连接的(建立连接之前是需要经过三次握手)、可靠的、基于字节流的传输层通信协议，在数据传输方面更安全基于请求-响应模型:一次请求对应一次响应HTTP协议是无状态协议:对于事物处理没有记忆能力。每次请求-响应都是独立的
无状态指的是客户端发送HTTP请求给服务端之后，服务端根据请求响应数据，响应完后，不会记录任何信息 优点:速度快缺点：多次请求间不能共享数据
可以使用会话技术(Cookie、Session)来解决这个问题 2、请求数据格式 格式介绍
请求数据总共分为三部分内容，分别是请求行、请求头、请求体 请求行: HTTP请求中的第一行数据 请求行包含三块内容分别是 GET[请求方式] /[请求URL路径] HTTP/1.1[HTTP协议及版本]请求方式有七种,最常用的是GET和POST 请求头: 第二行开始，格式为key: value形式 服务端可以根据请求头中的内容来获取客户端的相关信息有了这些信息服务端就可以处理不同的业务需求请求头中会包含若干个属性，常见的HTTP请求头有:Host: 表示请求的主机名 User-Agent: 浏览器版本,例如Chrome浏览器的标识类似Mozilla/5.0 ...Chrome/79，IE浏览器的标识类似Mozilla/5.0 (Windows NT ...)like Gecko； Accept：表示浏览器能接收的资源类型，如text/*，image/*或者*/*表示所有； Accept-Language：表示浏览器偏好的语言，服务器可以据此返回不同语言的网页； Accept-Encoding：表示浏览器可以支持的压缩类型，例如gzip, deflate等。 请求体: POST请求的最后一部分，存储请求参数
GET请求请求参数在请求行中，没有请求体，POST请求请求参数在请求体中GET请求请求参数大小有限制，POST没有 3、响应数据格式 格式介绍
响应数据总共分为三部分内容，分别是响应行、响应头、响应体
响应行：响应数据的第一行
（1）响应行包含三块内容
（2）分别是 HTTP/1.1[HTTP协议及版本] 200[响应状态码] ok[状态码的描述]响应头：第二行开始，格式为key：value形式
（1）响应头中会包含若干个属性响应体： 最后一部分。存放响应数据
（1）响应体和响应头之间有一个空行隔开 响应状态码
状态码大全：https://cloud.tencent.com/developer/chapter/13553 Tomcat 1、简介 Web服务器
Web服务器是一个应用程序（软件）
（1）对HTTP协议的操作进行封装，使得程序员不必直接对协议进行操作，让Web开发更加便捷
（2）主要功能是&#34;提供网上信息浏览服务&#34; Web服务器软件使用步骤
准备静态资源下载安装Web服务器软件将静态资源部署到Web服务器上启动Web服务器使用浏览器访问对应的资源 Tomcat">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-22T20:41:29+08:00">
    <meta property="article:modified_time" content="2024-07-22T20:41:29+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">05 HTTP &amp; Tomcat &amp; Servlet</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#HTTP_2" rel="nofollow">HTTP</a></li><li><ul><li><a href="#1_3" rel="nofollow">1、简介</a></li><li><a href="#2_22" rel="nofollow">2、请求数据格式</a></li><li><a href="#3_44" rel="nofollow">3、响应数据格式</a></li></ul> 
  </li><li><a href="#Tomcat_61" rel="nofollow">Tomcat</a></li><li><ul><li><a href="#1_62" rel="nofollow">1、简介</a></li><li><a href="#2_82" rel="nofollow">2、基本使用</a></li><li><a href="#3MavenWeb_106" rel="nofollow">3、Maven创建Web项目</a></li><li><a href="#4IDEATomcat_143" rel="nofollow">4、IDEA使用Tomcat</a></li></ul> 
  </li><li><a href="#Servlet_222" rel="nofollow">Servlet</a></li><li><ul><li><a href="#1_223" rel="nofollow">1、简介</a></li><li><a href="#2_301" rel="nofollow">2、方法介绍</a></li><li><a href="#3_365" rel="nofollow">3、体系结构</a></li><li><a href="#4urlPattern_389" rel="nofollow">4、urlPattern配置</a></li><li><a href="#5XML_417" rel="nofollow">5、XML配置</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="HTTP_2"></a>HTTP</h2> 
<h3><a id="1_3"></a>1、简介</h3> 
<ol><li>HTTP概念 
  <ul><li>HyperText Transfer Protocol，超文本传输协议，规定了浏览器和服务器之间数据传输的规则 
    <ul><li>数据传输的规则指的是请求数据和响应数据需要按照指定的格式进行传输</li><li>如果想知道具体的格式，可以打开浏览器，点击<code>F12</code>打开开发者工具，点击<code>Network</code>来查看某一次请求的请求数据和响数据具体的格式内容</li><li>在浏览器中如果看不到上述内容，需要清除浏览器的浏览数据。chrome浏览器可以使用ctrl+shift+Del进行清除</li><li>所以学习HTTP主要就是学习请求和响应数据的具体格式内容</li></ul> </li></ul> </li><li>HTTP协议特点 
  <ul><li>基于TCP协议: 面向连接，安全<br> TCP是一种面向连接的(建立连接之前是需要经过三次握手)、可靠的、基于字节流的传输层通信协议，在数据传输方面更安全</li><li>基于请求-响应模型:一次请求对应一次响应</li><li>HTTP协议是无状态协议:对于事物处理没有记忆能力。每次请求-响应都是独立的<br> 无状态指的是客户端发送HTTP请求给服务端之后，服务端根据请求响应数据，响应完后，不会记录任何信息 
    <ul><li>优点:速度快</li><li>缺点：多次请求间不能共享数据<br> 可以使用<code>会话技术(Cookie、Session)</code>来解决这个问题</li></ul> </li></ul> </li></ol> 
<h3><a id="2_22"></a>2、请求数据格式</h3> 
<ol><li>格式介绍<br> 请求数据总共分为三部分内容，分别是请求行、请求头、请求体 
  <ul><li>请求行: HTTP请求中的第一行数据 
    <ul><li>请求行包含三块内容</li><li>分别是 GET[请求方式] /[请求URL路径] HTTP/1.1[HTTP协议及版本]</li><li>请求方式有七种,最常用的是GET和POST</li></ul> </li><li>请求头: 第二行开始，格式为key: value形式 
    <ul><li>服务端可以根据请求头中的内容来获取客户端的相关信息</li><li>有了这些信息服务端就可以处理不同的业务需求</li><li>请求头中会包含若干个属性，常见的HTTP请求头有:<pre><code>Host: 表示请求的主机名
User-Agent: 浏览器版本,例如Chrome浏览器的标识类似Mozilla/5.0 ...Chrome/79，IE浏览器的标识类似Mozilla/5.0 (Windows NT ...)like Gecko；
Accept：表示浏览器能接收的资源类型，如text/*，image/*或者*/*表示所有；
Accept-Language：表示浏览器偏好的语言，服务器可以据此返回不同语言的网页；
Accept-Encoding：表示浏览器可以支持的压缩类型，例如gzip, deflate等。
</code></pre> </li></ul> </li><li>请求体: POST请求的最后一部分，存储请求参数<br> <img src="https://images2.imgbox.com/60/dc/zmqU4XVh_o.png" alt="" width="400"> 
    <ul><li>GET请求请求参数在请求行中，没有请求体，POST请求请求参数在请求体中</li><li>GET请求请求参数大小有限制，POST没有</li></ul> </li></ul> </li></ol> 
<h3><a id="3_44"></a>3、响应数据格式</h3> 
<ol><li> <p>格式介绍<br> 响应数据总共分为三部分内容，分别是响应行、响应头、响应体<br> <img src="https://images2.imgbox.com/c6/93/ttllRCJU_o.png" alt="" width="400"></p> 
  <ul><li>响应行：响应数据的第一行<br> （1）响应行包含三块内容<br> （2）分别是 HTTP/1.1[HTTP协议及版本] 200[响应状态码] ok[状态码的描述]</li><li>响应头：第二行开始，格式为key：value形式<br> （1）响应头中会包含若干个属性</li><li>响应体： 最后一部分。存放响应数据<br> （1）响应体和响应头之间有一个空行隔开</li></ul> </li><li> <p>响应状态码<br> <img src="https://images2.imgbox.com/60/34/oUrtgp7y_o.png" alt=""><br> 状态码大全：<a href="https://cloud.tencent.com/developer/chapter/13553" rel="nofollow">https://cloud.tencent.com/developer/chapter/13553 </a><br> <img src="https://images2.imgbox.com/69/9e/wOdjREPC_o.png" alt=""></p> </li></ol> 
<h2><a id="Tomcat_61"></a>Tomcat</h2> 
<h3><a id="1_62"></a>1、简介</h3> 
<ol><li> <p>Web服务器</p> 
  <ul><li>Web服务器是一个应用程序（软件）<br> （1）对HTTP协议的操作进行封装，使得程序员不必直接对协议进行操作，让Web开发更加便捷<br> （2）主要功能是"提供网上信息浏览服务"</li></ul> </li><li> <p>Web服务器软件使用步骤</p> 
  <ul><li>准备静态资源</li><li>下载安装Web服务器软件</li><li>将静态资源部署到Web服务器上</li><li>启动Web服务器使用浏览器访问对应的资源</li></ul> </li><li> <p>Tomcat<br> <img src="https://images2.imgbox.com/91/58/XPWOv9tN_o.png" alt=""></p> 
  <ul><li>Tomcat是Apache软件基金会一个核心项目，是一个开源免费的轻量级<strong>Web服务器</strong>，支持Servlet/JSP少量JavaEE规范</li><li>JavaEE: Java Enterprise Edition,Java企业版。指Java企业级开发的技术规范总和。包含13项技术规范:JDBC、JNDI、EJB、RMI、JSP、Servlet、XML、JMS、Java IDL、JTS、JTA、JavaMail、JAF</li><li>因为Tomcat支持Servlet/JSP规范，所以Tomcat也被称为Web容器、Servlet容器。Servlet需要依赖Tomcat才能运行</li><li>Tomcat的官网:<a href="https://tomcat.apache.org/" rel="nofollow">https://tomcat.apache.org/</a></li></ul> </li></ol> 
<h3><a id="2_82"></a>2、基本使用</h3> 
<ol><li> <p>启动</p> 
  <ul><li>双击: bin\startup.bat</li></ul> </li><li> <p>关闭</p> 
  <ul><li>直接x掉运行窗口:强制关闭[不建议]</li><li>bin\shutdown.bat：正常关闭</li><li>ctrl+c： 正常关闭</li></ul> </li><li> <p>配置</p> 
  <ul><li> <p>修改端口：Tomcat默认的端口是8080，要想修改Tomcat启动的端口号，需要修改 conf/server.xml<br> <img src="https://images2.imgbox.com/92/e7/gWv6ACNR_o.png" alt=""></p> 
    <blockquote> 
     <p>注: HTTP协议默认端口号为80，如果将Tomcat端口号改为80，则将来访问Tomcat时，将不用输入端口号</p> 
    </blockquote> </li><li> <p>启动时可能出现的错误</p> 
    <ul><li> <p>Tomcat的端口号取值范围是0-65535之间任意未被占用的端口，如果设置的端口号被占用，启动的时候就会包如下的错误<br> <img src="https://images2.imgbox.com/f1/dc/2cPkoRj4_o.png" alt=""></p> </li><li> <p>Tomcat启动的时候，启动窗口一闪而过: 需要检查JAVA_HOME环境变量是否正确配置</p> </li></ul> </li></ul> </li><li> <p>部署</p> 
  <ul><li>Tomcat部署项目： 将项目放置到webapps目录下，即部署完成</li><li>一般JavaWeb项目会被打包称<mark>war</mark>包，然后将war包放到Webapps目录下，Tomcat会自动解压缩war文件</li></ul> </li></ol> 
<h3><a id="3MavenWeb_106"></a>3、Maven创建Web项目</h3> 
<ol><li> <p>Web项目结构<br> Web项目的结构分为:开发中的项目和开发完可以部署的Web项目</p> 
  <ul><li>Maven Web项目结构: 开发中的项目<br> <img src="https://images2.imgbox.com/40/d4/MjH3noy5_o.png" alt="在这里插入图片描述"></li><li>开发完成部署的Web项目<br> <img src="https://images2.imgbox.com/20/c6/mn5GSi8j_o.png" alt=""> 
    <ul><li>开发项目通过执行Maven打包命令<mark>package</mark>,可以获取到部署的Web项目目录</li><li>编译后的Java字节码文件和resources的资源文件，会被放到WEB-INF下的classes目录下</li><li>pom.xml中依赖坐标对应的jar包，会被放入WEB-INF下的lib目录下</li></ul> </li></ul> </li><li> <p>创建Maven Web项目<br> 创建方式有两种:使用骨架和不使用骨架</p> 
  <ul><li> <p>使用骨架<br> 1.创建Maven项目时，选择使用Web项目骨架<br> <img src="https://images2.imgbox.com/1c/80/P8bBD141_o.png" alt=""></p> <p>2.完成项目创建后，删除pom.xml中多余内容<br> <img src="https://images2.imgbox.com/23/6f/8ueLWGr7_o.png" alt=""></p> <p>3.补齐Maven Web项目缺失的目录结构<br> <img src="https://images2.imgbox.com/09/00/odzs1CFc_o.png" alt=""></p> </li></ul> <p><img src="https://images2.imgbox.com/06/86/d40bkRaH_o.png" alt=""></p> 
  <ul><li> <p>不使用骨架<br> 1.创建Maven项目后，在pom.xml设置打包方式为war<br> <img src="https://images2.imgbox.com/43/b6/zemdQPVq_o.png" alt=""></p> <p>2.补齐Maven Web项目缺失webapp的目录结构<br> <img src="https://images2.imgbox.com/25/77/MlZffiK5_o.png" alt=""></p> <p>3.补齐Maven Web项目缺失WEB-INF/web.xml的目录结构<br> <img src="https://images2.imgbox.com/66/9f/5yEkE0XT_o.png" alt=""></p> </li></ul> </li></ol> 
<p><img src="https://images2.imgbox.com/e0/41/dIVnH2nk_o.png" alt=""></p> 
<h3><a id="4IDEATomcat_143"></a>4、IDEA使用Tomcat</h3> 
<p>在IDEA中集成使用Tomcat有两种方式，分别是<mark>集成本地Tomcat</mark>和<mark>Tomcat Maven插件</mark></p> 
<ol><li> <p>集成本地Tomcat<br> <img src="https://images2.imgbox.com/ab/ca/kHsqlOAy_o.png" alt=""></p> 
  <ul><li> <p>打开添加本地Tomcat的面板<br> <img src="https://images2.imgbox.com/00/4e/dOG2jia5_o.png" alt=""></p> </li><li> <p>指定本地Tomcat的具体路径<br> <img src="https://images2.imgbox.com/c9/94/pNzz1z0p_o.png" alt=""></p> </li><li> <p>修改Tomcat的名称，此步骤可以不改，只是让名字看起来更有意义，HTTP port中的端口也可以进行修改，比如把8080改成80<br> <img src="https://images2.imgbox.com/1c/0a/0BVYLXoA_o.png" alt=""></p> </li><li> <p>将开发项目部署项目到Tomcat中<br> <img src="https://images2.imgbox.com/f7/31/28uCoc4X_o.png" alt=""><br> 扩展内容： xxx.war和 xxx.war exploded这两种部署项目模式的区别?</p> 
    <ul><li> <p>war模式是将WEB工程打成war包，把war包发布到Tomcat服务器上</p> </li><li> <p>war exploded模式是将WEB工程以当前文件夹的位置关系发布到Tomcat服务器上</p> </li><li> <p>war模式部署成功后，Tomcat的webapps目录下会有部署的项目内容</p> </li><li> <p>war exploded模式部署成功后，Tomcat的webapps目录下没有，而使用的是项目的target目录下的内容进行部署</p> </li><li> <p>建议选war模式进行部署，更符合项目部署的实际情况</p> </li></ul> </li><li> <p>部署成功后，就可以启动项目<br> <img src="https://images2.imgbox.com/de/bc/UGfoRKDw_o.png" alt=""></p> </li><li> <p>启动成功后，可以通过浏览器进行访问测试<br> <img src="https://images2.imgbox.com/ce/db/bOdDbV5u_o.png" alt=""></p> </li><li> <p>最终的注意事项<br> <img src="https://images2.imgbox.com/86/c7/3GHuTXWN_o.png" alt=""></p> </li></ul> </li><li> <p>Tomcat Maven插件</p> 
  <ul><li> <p>在pom.xml中添加Tomcat插件</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    	<span class="token comment">&lt;!--Tomcat插件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li><li> <p>使用Maven Helper插件快速启动项目，选中项目，右键–&gt;Run Maven --&gt; tomcat7:run<br> <img src="https://images2.imgbox.com/28/b1/Te6QvMD6_o.png" alt=""></p> </li><li> <p>如果选中项目并右键点击后，看不到Run Maven和Debug Maven，这个时候就需要在IDEA中下载Maven Helper插件，具体的操作方式为: File --&gt; Settings --&gt; Plugins --&gt; Maven Helper —&gt; Install,安装完后按照提示重启IDEA，就可以看到了</p> </li><li> <p>Maven Tomcat插件目前只有Tomcat7版本，没有更高的版本可以使用（截止2021年）</p> </li><li> <p>使用Maven Tomcat插件，要想修改Tomcat的端口和访问路径，可以直接修改pom.xml</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    	<span class="token comment">&lt;!--Tomcat插件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.tomcat.maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tomcat7-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
            	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span><span class="token punctuation">&gt;</span></span>80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>port</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--访问端口号 --&gt;</span>
                <span class="token comment">&lt;!--项目访问路径
					未配置访问路径: http://localhost:80/tomcat-demo2/a.html
					配置/后访问路径: http://localhost:80/a.html
					如果配置成 /hello,访问路径会变成什么?
						答案: http://localhost:80/hello/a.html
				--&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ul> </li></ol> 
<h2><a id="Servlet_222"></a>Servlet</h2> 
<h3><a id="1_223"></a>1、简介</h3> 
<ul><li> <p>概述</p> 
  <ul><li>Servlet是JavaWeb最为核心的内容，是Java提供的一门<mark>动态</mark>web资源开发技术</li><li>作用：使用Servlet就可以实现，根据不同的登录用户在页面上动态显示不同内容</li><li>Servlet是JavaEE规范之一，就是一个接口，需要定义Servlet类实现Servlet接口，并由web服务器运行Servlet</li></ul> </li><li> <p>快速入门<br> 需求分析: 编写一个Servlet类，并使用IDEA中Tomcat插件进行部署，最终通过浏览器访问所编写的Servlet程序<br> <img src="https://images2.imgbox.com/bc/1d/7BuT8FM6_o.png" alt=""></p> 
  <ol><li> <p>创建Web项目<code>web-demo</code>，导入Servlet依赖坐标</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
      provided指的是在编译和测试过程中有效,最后生成的war包时不会加入
       因为Tomcat的lib目录中已经有servlet-api这个jar包，如果在生成war包的时候生效就会和Tomcat中的jar包冲突，导致报错
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li><li> <p>创建:定义一个类，实现Servlet接口，并重写接口中所有方法，并在service方法中输入一句话</p> <pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo1</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet hello world~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>配置:在类上使用@WebServlet注解，配置该Servlet的访问路径</p> <pre><code class="prism language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/demo1"</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>访问:启动Tomcat,浏览器中输入URL地址访问该Servlet</p> <pre><code class="prism language-java">http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>web<span class="token operator">-</span>demo<span class="token operator">/</span>demo1
</code></pre> </li></ol> </li><li> <p>执行流程<br> <img src="https://images2.imgbox.com/9e/ed/d543Rhba_o.png" alt=""></p> 
  <ul><li>浏览器发出<code>http://localhost:8080/web-demo/demo1</code>请求，从请求中可以解析出三部分内容，分别是<code>localhost:8080</code>、<code>web-demo</code>、<code>demo1</code> 
    <ul><li>根据<code>localhost:8080</code>可以找到要访问的Tomcat Web服务器</li><li>根据<code>web-demo</code>可以找到部署在Tomcat服务器上的web-demo项目</li><li>根据<code>demo1</code>可以找到要访问的是项目中的哪个Servlet类，根据@WebServlet后面的值进行匹配</li></ul> </li><li>找到ServletDemo1这个类后，Tomcat Web服务器就会为ServletDemo1这个类创建一个对象，然后调用对象中的service方法 
    <ul><li>ServletDemo1实现了Servlet接口，所以类中必然会重写service方法供Tomcat Web服务器进行调用</li><li>service方法中有ServletRequest和ServletResponse两个参数，ServletRequest封装的是请求数据，ServletResponse封装的是响应数据，后期我们可以通过这两个参数实现前后端的数据交互</li></ul> </li></ul> 
  <blockquote> 
   <p>Servlet由web服务器创建，Servlet方法由web服务器调用</p> 
  </blockquote> </li></ul> 
<h3><a id="2_301"></a>2、方法介绍</h3> 
<ul><li> <p>生命周期</p> 
  <ul><li>生命周期: 对象的生命周期指一个对象从被创建到被销毁的整个过程</li><li>Servlet运行在Servlet容器(web服务器)中，其生命周期由容器来管理，分为4个阶段： 
    <ul><li>（1）加载和实例化：默认情况下，当Servlet第一次被访问时，由容器创建Servlet对象</li><li>（2）初始化：在Servlet实例化之后，容器将调用Servlet的<code>init()</code>方法初始化这个对象，完成一些如加载配置文件、创建连接等初始化的工作，该方法只<strong>调用一次</strong></li><li>（3）请求处理：<strong>每次</strong>请求Servlet时，Servlet容器都会调用Servlet的<code>service()</code>方法对请求进行处理</li><li>（4）服务终止：当需要释放内存或者容器关闭时，容器就会调用Servlet实例的<code>destroy()</code>方法完成资源的释放。在destroy()方法调用之后，容器会释放这个Servlet实例，该实例随后会被Java的垃圾收集器所回收</li></ul> </li></ul> </li><li> <p>方法<br> Servlet中总共有5个方法</p> 
  <ul><li>void init(ServletConfig config) ：初始化方法，在Servlet被创建时执行，只执行一次</li><li>void service(ServletRequest req, ServletResponse res)：提供服务方法， 每次Servlet被访问，都会调用该方法</li><li>void destroy() ：销毁方法，当Servlet被销毁时，调用该方法。在内存释放或服务器关闭时销毁Servlet</li><li>String getServletInfo() ：获取Servlet信息</li><li>ServletConfig getServletConfig()：获取ServletConfig对象</li></ul> <pre><code class="prism language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/demo2"</span><span class="token punctuation">,</span>loadOnStartup <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo2</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">;</span>
	
    <span class="token comment">/**
     * （1）初始化方法
     *  1.调用时机：默认情况下，Servlet被第一次访问时，调用
     *      * loadOnStartup: 默认为-1，修改为0或者正整数，则会在服务器启动的时候，调用
     *  2.调用次数: 1次
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{<!-- --></span>
    	<span class="token keyword">this</span><span class="token punctuation">.</span>servletConfig <span class="token operator">=</span> config<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"init..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">// （5）获取ServletConfig对象</span>
	<span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> servletConfig<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * （2）提供服务
     * 1.调用时机:每一次Servlet被访问时，调用
     * 2.调用次数: 多次
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"servlet hello world~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * （3）销毁方法
     * 1.调用时机：内存释放或者服务器关闭的时候，Servlet对象会被销毁，调用
     * 2.调用次数: 1次
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"destroy..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
	<span class="token comment">//（4）该方法用来返回Servlet的相关信息，没有什么太大的用处，一般返回一个空字符串即可</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre> </li></ul> 
<h3><a id="3_365"></a>3、体系结构</h3> 
<p><img src="https://images2.imgbox.com/fb/09/weYxqDcT_o.png" alt="在这里插入图片描述" width="600"><br> 我们更关注的其实只有<code>Servlet</code>接口中的<code>service()</code>方法，通过自定义Servlet继承<code>HttpServlet</code>，创建方式更加简单</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/demo4"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo4</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//TODO GET 请求方式处理逻辑</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"get..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//TODO Post 请求方式处理逻辑</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"post..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>HttpServlet原理：获取请求方式，并根据不同的请求方式，调用不同的doXxx方法<br> HttpServlet不仅可以处理GET和POST还可以处理其他五种请求方式</p> 
</blockquote> 
<h3><a id="4urlPattern_389"></a>4、urlPattern配置</h3> 
<ul><li> <p>一个Servlet,可以配置多个urlPattern<br> 例如：@WebServlet(urlPatterns = {“/demo7”,“/demo8”})</p> </li><li> <p>urlPattern配置规则</p> 
  <ul><li> <p>精确匹配<br> <img src="https://images2.imgbox.com/68/56/f6oNiXt4_o.png" alt="" width="350"></p> </li><li> <p>目录匹配<br> <img src="https://images2.imgbox.com/1a/00/VPPAy1dq_o.png" alt="" width="350"></p> </li><li> <p>扩展名匹配<br> <img src="https://images2.imgbox.com/a8/1d/5QdO4WQD_o.png" alt="在这里插入图片描述" width="350"></p> 
    <blockquote> 
     <p>如果路径配置的不是扩展名，那么在路径的前面就必须要加<code>/</code>否则会报错<br> 如果路径配置的是<code>*.do</code>,那么在*.do的前面不能加<code>/</code>,否则会报错</p> 
    </blockquote> </li><li> <p>任意匹配<br> <img src="https://images2.imgbox.com/6f/94/qk0yZMZJ_o.png" alt="" width="350"></p> 
    <ul><li><code>/</code>和<code>/*</code>的区别</li></ul> 
    <ol><li><code>" / "</code>会覆盖<code>DefaultServlet</code>， <code>" /* "</code>不会</li><li>tomcat中的<code>DefaultServlet</code> 用来处理静态资源</li><li>当其他的url-pattern匹配不上时会走<code>DefaultServlet</code></li><li><code>DefaultServlet</code>被覆盖掉，就会引发请求静态资源的时走自定义的Servlet类，导致静态资源无法被访问</li></ol> </li></ul> 
  <blockquote> 
   <p>五种配置的优先级为 精确匹配 &gt; 目录匹配&gt; 扩展名匹配 &gt; /* &gt; /</p> 
  </blockquote> </li></ul> 
<h3><a id="5XML_417"></a>5、XML配置</h3> 
<ul><li>Servlet从3.0版本后开始支持注解配置</li><li>3.0版本前只支持XML配置文件的配置方法</li><li>XML的配置步骤有两步: 
  <ul><li>编写Servlet类</li><li>在web.xml中配置该Servlet<pre><code class="prism language-xml">	<span class="token comment">&lt;!-- 
        Servlet 全类名
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- servlet的名称，名字任意--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>demo13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--servlet的类全名--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.itheima.web.ServletDemo13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 
        Servlet 访问路径
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- servlet的名称，要和上面的名称一致--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>demo13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- servlet的访问路径--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/demo13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ul> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4fa5217edd47c4df82f5886f7bb7a2e2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构之初始二叉树（4）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9983189946d3c65fec2b6060d502e0a5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">生成式 AI 的发展方向，是 Chat 还是 Agent？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>