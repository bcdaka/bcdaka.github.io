<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cordova从0到1开始打包APP - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e0841b7a82d9924aab43dc837ef79e16/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Cordova从0到1开始打包APP">
  <meta property="og:description" content="截至2024-07-23为止我的绝对是最新的，直接上步骤
（
成功条件：
1：java17（低了高了都不行测试版本20，18，11）
2：gradle-8.7（低了高了都不行测试版本8.9，8.3）
3：android studio 2024.1.1
4：VPN（必需品 Pig Farm）
）
1：环境部署
1.1：java的jdk：一定要18.0.0的不要以上的，android不兼容，链接兄弟们就自己找个吧
1.2：android studio： Android 移动应用开发者工具 – Android 开发者 | Android Developers
下载步骤直接随便找个博客跟着走就行，新版的跟旧版的差了几步但是不碍事
1.3：Cordova（新版的android studio从2024.1.1就开始不支持内置Cordova了 因为我的就是这个版本）
Gradle | Releases
直接下载二进制的8.7版本就行，8.9版本的不兼容
1.4：环境变量
_JAVA_OPTIONS：-Xmx512M
JAVA_HOME C:\Program Files\Java\jdk-17 (下面文章有解释)
path：
C:\Users\my\AppData\Local\Android\Sdk\gradle-8.7\bin（自己下载的路径）
GRADLE_HOME：C:\Users\my\AppData\Local\Android\Sdk\gradle-8.7\bin
2：创建项目
npm i -g cordova cordova create hello com.example.hello HelloWorld cd hello 添加编译 环境
cordova platform add ios cordova platform add android 检查编辑环境
cordova platform ls 检查环境（安装的jdk等东西）
cordova requirements 如果按照我说的版本去安装绝对没问题，如果出了问题评论区留言">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-29T17:18:39+08:00">
    <meta property="article:modified_time" content="2024-07-29T17:18:39+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Cordova从0到1开始打包APP</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>截至2024-07-23为止我的绝对是最新的，直接上步骤</p> 
<p>（</p> 
<p>成功条件：</p> 
<p>1：java17（低了高了都不行测试版本20，18，11）</p> 
<p>2：gradle-8.7（低了高了都不行测试版本8.9，8.3）</p> 
<p>3：android studio 2024.1.1</p> 
<p>4：VPN（必需品 <a href="https://xn--l6qx3l9s1a.com/#/knowledge" rel="nofollow" title="Pig Farm">Pig Farm</a>）</p> 
<p>       ）</p> 
<p>1：环境部署</p> 
<p>1.1：java的jdk：一定要18.0.0的不要以上的，android不兼容，链接兄弟们就自己找个吧</p> 
<p><img alt="" height="842" src="https://images2.imgbox.com/8c/3a/uL4pAFxY_o.png" width="771"></p> 
<p></p> 
<p>1.2：android studio： <a href="https://developer.android.google.cn/?hl=zh-cn" rel="nofollow" title="Android 移动应用开发者工具 – Android 开发者  |  Android Developers">Android 移动应用开发者工具 – Android 开发者  |  Android Developers</a></p> 
<p> 下载步骤直接随便找个博客跟着走就行，新版的跟旧版的差了几步但是不碍事</p> 
<p> 1.3：Cordova（新版的android studio从2024.1.1就开始不支持内置Cordova了   因为我的就是这个版本）</p> 
<p><a href="https://gradle.org/releases/" rel="nofollow" title="Gradle | Releases">Gradle | Releases</a></p> 
<p>直接下载二进制的8.7版本就行，8.9版本的不兼容</p> 
<p>1.4：环境变量</p> 
<p>_JAVA_OPTIONS：-Xmx512M</p> 
<p>JAVA_HOME    C:\Program Files\Java\jdk-17 (下面文章有解释)</p> 
<p>path：</p> 
<p>C:\Users\my\AppData\Local\Android\Sdk\gradle-8.7\bin（自己下载的路径）</p> 
<p>GRADLE_HOME：C:\Users\my\AppData\Local\Android\Sdk\gradle-8.7\bin</p> 
<p></p> 
<p>2：创建项目</p> 
<pre><code class="language-javascript">npm i -g cordova</code></pre> 
<pre><code class="language-java">cordova create hello com.example.hello HelloWorld</code></pre> 
<pre><code class="language-java">cd hello</code></pre> 
<p> 添加编译 环境</p> 
<pre><code class="language-java">cordova platform add ios
cordova platform add android</code></pre> 
<p>检查编辑环境</p> 
<pre><code class="language-java">cordova platform ls</code></pre> 
<p>检查环境（安装的jdk等东西）</p> 
<pre><code class="language-java">cordova requirements</code></pre> 
<p>如果按照我说的版本去安装绝对没问题，如果出了问题评论区留言</p> 
<pre><code class="language-javascript">E:\work3\hello&gt;cordova requirements

Requirements check results for android:
Java JDK: installed 1.8.0//java的jdk版本
Android SDK: installed true
Android target: installed android-35,android-34,android-32,android-29,android-28,android-22//android的版本
Gradle: installed C:\Users\my\AppData\Local\Android\Sdk\gradle-8.7\bin\gradle.BAT//Gradle的位置</code></pre> 
<p>3：打包</p> 
<pre><code class="language-javascript">cordova build android</code></pre> 
<p>直接报错：</p> 
<pre><code class="language-javascript">E:\work3\hello&gt;cordova build android
Checking Java JDK and Android SDK versions
ANDROID_HOME=C:\Users\my\AppData\Local\Android\Sdk (recommended setting)
ANDROID_SDK_ROOT=C:\Users\my\AppData\Local\Android\Sdk (DEPRECATED)
Using Android SDK: C:\Users\my\AppData\Local\Android\Sdk

BUILD SUCCESSFUL in 2s
1 actionable task: 1 up-to-date
Subproject Path: CordovaLib
Subproject Path: app
Downloading https://services.gradle.org/distributions/gradle-8.7-bin.zip

Exception in thread "main" javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:994)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1367)
        at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1395)
        at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1379)
        at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:559)
        at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
        at sun.net.www.protocol.http.HttpURLConnection.followRedirect0(HttpURLConnection.java:2729)
        at sun.net.www.protocol.http.HttpURLConnection.followRedirect(HttpURLConnection.java:2641)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1824)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)
        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:263)
        at org.gradle.wrapper.Install.forceFetch(SourceFile:2)
        at org.gradle.wrapper.Install$1.call(SourceFile:8)
        at org.gradle.wrapper.GradleWrapperMain.main(SourceFile:67)
Caused by: java.io.EOFException: SSL peer shut down incorrectly
        at sun.security.ssl.InputRecord.read(InputRecord.java:505)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:975)
        ... 13 more
Command failed with exit code 1: E:\work3\hello\platforms\android\tools\gradlew.bat cdvBuildDebug

E:\work3\hello&gt;</code></pre> 
<p>正常现象：说发现了一个Gradle8.7版本的包，要去下载但是超时了（链接）</p> 
<p>解决方法：一直执行这个命令直到下载开始（不需要VPN，不需要等待直接猛干就完了）</p> 
<p>开始我也以为是VPN的问题但是发现它对VPN的消耗很少所以网的问题很小</p> 
<p>我的第20几遍执行结果：</p> 
<p>现在是下载下来这个包了但是它跟你的android版本不兼容了，需要去升级到34.0.0</p> 
<p><img alt="" height="642" src="https://images2.imgbox.com/e3/fb/hvawMPRa_o.png" width="784"></p> 
<p><img alt="" height="734" src="https://images2.imgbox.com/13/3f/m5MpNFje_o.png" width="1030"></p> 
<p> <img alt="" height="734" src="https://images2.imgbox.com/ce/81/IwUZvS7z_o.png" width="1030"></p> 
<p> 点击ok等待下载就行</p> 
<p>再次执行，执行的非常慢</p> 
<pre><code class="language-javascript">E:\work3\hello&gt;cordova run android
Checking Java JDK and Android SDK versions
ANDROID_HOME=C:\Users\my\AppData\Local\Android\Sdk (recommended setting)
ANDROID_SDK_ROOT=C:\Users\my\AppData\Local\Android\Sdk (DEPRECATED)
Using Android SDK: C:\Users\my\AppData\Local\Android\Sdk

BUILD SUCCESSFUL in 2s
1 actionable task: 1 up-to-date
Subproject Path: CordovaLib
Subproject Path: app

FAILURE: Build failed with an exception.

* What went wrong:
A problem occurred configuring root project 'HelloWorld'.
&gt; Could not resolve all artifacts for configuration ':classpath'.
   &gt; Could not resolve com.android.tools.build:gradle:8.3.0.
     Required by:
         project :
      &gt; No matching variant of com.android.tools.build:gradle:8.3.0 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '8.7' but:
          - Variant 'apiElements' declares a library, packaged as a jar, and its dependencies declared externally:
              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8
              - Other compatible attribute:
                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.7')
          - Variant 'javadocElements' declares a component for use during runtime, and its dependencies declared externally:
              - Incompatible because this component declares documentation and the consumer needed a library
              - Other compatible attributes:
                  - Doesn't say anything about its elements (required them packaged as a jar)
                  - Doesn't say anything about its target Java version (required compatibility with Java 8)
                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.7')
          - Variant 'runtimeElements' declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:
              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8
              - Other compatible attribute:
                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.7')
          - Variant 'sourcesElements' declares a component for use during runtime, and its dependencies declared externally:
              - Incompatible because this component declares documentation and the consumer needed a library
              - Other compatible attributes:
                  - Doesn't say anything about its elements (required them packaged as a jar)
                  - Doesn't say anything about its target Java version (required compatibility with Java 8)
                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.7')
   &gt; Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.24.
     Required by:
         project :
      &gt; Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.24.
         &gt; Could not get resource 'https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.9.24/kotlin-gradle-plugin-1.9.24.module'.
            &gt; Read timed out

* Try:
&gt; Review the variant matching algorithm at https://docs.gradle.org/8.7/userguide/variant_attributes.html#sec:abm_algorithm.
&gt; No matching variant errors are explained in more detail at https://docs.gradle.org/8.7/userguide/variant_model.html#sub:variant-no-match.
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.
&gt; Get more help at https://help.gradle.org.

BUILD FAILED in 6m 9s
Command failed with exit code 1: E:\work3\hello\platforms\android\tools\gradlew.bat cdvBuildDebug

E:\work3\hello&gt;</code></pre> 
<p>降版本没有用报：Test of distribution url https://services.gradle.org/distributions/gradle-8.7-bin.zip failed. Please check the values set with --gradle-distribution-url and --gradle-version.</p> 
<p>它找不到与之匹配的8.7版本（<a href="https://blog.csdn.net/qq_42257666/article/details/117398185" title="在下载一个内置版本来解决">在下载一个内置版本来解决</a>）</p> 
<p>但这个方案尝试了不成功，先切换回来继续走8.7</p> 
<p>上面那个报错说是：jdk版本不兼容冲突了</p> 
<p>解决方案：安装java11</p> 
<p><a href="https://blog.csdn.net/m0_63628018/article/details/139800071" title="下载链接">下载链接</a></p> 
<p><img alt="" height="400" src="https://images2.imgbox.com/a1/bb/xiB1dqFT_o.png" width="1200"></p> 
<p> 直接运行打包（会出现长时间的下载<img alt="" height="19" src="https://images2.imgbox.com/9a/a5/cxfTiYJ2_o.png" width="328">大致内容就是它在安装很多依赖插件然后进行到哪里了等等）</p> 
<p><img alt="" height="465" src="https://images2.imgbox.com/0d/af/LRRQiqtx_o.png" width="1200"></p> 
<p><img alt="" height="702" src="https://images2.imgbox.com/2e/b2/DZZcTJAG_o.png" width="899"></p> 
<p> 不出意外又报错了：Android Gradle plugin requires Java 17 to run. You are currently using Java 11.</p> 
<p>Android Gradle最低需要java17才能运行，ok继续升级版本</p> 
<p>再次打包：还是报错不用管直接继续打包并且开启vpn（报错内容大概是：无法解析xx插件无法进行编译一般是由时间太长但是依赖还没有下载完整要么重复执行拼运气要么开启vpn重新下载）</p> 
<p>最后等待所有依赖插件下载完毕</p> 
<p><img alt="" height="387" src="https://images2.imgbox.com/69/c6/goOEZRoL_o.png" width="774"></p> 
<p>最后运行效果：</p> 
<p><img alt="" height="981" src="https://images2.imgbox.com/90/0b/5Wc3wmlf_o.png" width="457"></p> 
<p></p> 
<p>真的纯纯0到1开始搞了，搞之前我都不知道还有这个东西 </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cdb459eabc91bd1fdf08cc3d99cfc9dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">记一次因为在html两个地方引入vue.js导致组件注入失败的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0058a709e3809c2b39ef7d0d6a7192be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">二、八、十、十六进制介绍及相互转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>